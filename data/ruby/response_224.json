[{"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "is_accepted": false, "score": 0, "last_activity_date": 1556151208, "last_edit_date": 1556151208, "creation_date": 1556148413, "answer_id": 55839856, "question_id": 55839762, "link": "https://stackoverflow.com/questions/55839762/rails-deploy-to-heroku-detecting-rails-configuration-failed-and-usr-bin-env/55839856#55839856", "title": "Rails deploy to heroku &quot; Detecting rails configuration failed&quot; and &quot;/usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory&quot;", "body": "<p>run bundle update, delete the heroku git, and create heroku app again</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10773439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fea698d92e0b8f7ccdb1dc8c10598cd?s=128&d=identicon&r=PG&f=1", "display_name": "Murgiuf", "link": "https://stackoverflow.com/users/10773439/murgiuf"}, "is_accepted": false, "score": 1, "last_activity_date": 1556167264, "creation_date": 1556167264, "answer_id": 55841898, "question_id": 55839762, "link": "https://stackoverflow.com/questions/55839762/rails-deploy-to-heroku-detecting-rails-configuration-failed-and-usr-bin-env/55841898#55841898", "title": "Rails deploy to heroku &quot; Detecting rails configuration failed&quot; and &quot;/usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory&quot;", "body": "<p>Well I fixed this by doing the following:</p>\n\n<p>I setup the config:</p>\n\n<pre><code>heroku config:set AWS_ACCESS_KEY_ID=&lt;something&gt;\nheroku config:set AWS_SECRET_ACCESS_KEY=&lt;something&gt;\nheroku config:set AWS_REGION=&lt;something&gt;\nheroku config:set S3_BUCKET_NAME=&lt;something&gt;\n</code></pre>\n\n<p>That didn't fully help but then again, I noticed that I was missing the master.key.</p>\n\n<p>I also made sure that my config/enviroment/production.rb had:</p>\n\n<pre><code>config.require_master_key = true\n</code></pre>\n\n<p>So I added the config aswell:</p>\n\n<pre><code>heroku config:set RAILS_MASTER_KEY=&lt;something&gt;\n</code></pre>\n\n<p>After doing this, I did again the 'git push heroku master'</p>\n\n<p>And it worked.</p>\n"}], "owner": {"reputation": 21, "user_id": 10773439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fea698d92e0b8f7ccdb1dc8c10598cd?s=128&d=identicon&r=PG&f=1", "display_name": "Murgiuf", "link": "https://stackoverflow.com/users/10773439/murgiuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556167264, "creation_date": 1556147652, "last_edit_date": 1556165943, "question_id": 55839762, "link": "https://stackoverflow.com/questions/55839762/rails-deploy-to-heroku-detecting-rails-configuration-failed-and-usr-bin-env", "title": "Rails deploy to heroku &quot; Detecting rails configuration failed&quot; and &quot;/usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory&quot;", "body": "<p>I'm getting a error message when deploying my rails application to heroku</p>\n\n<p>I'm coding in a Windows laptop.</p>\n\n<p>I get two distinct errors (I think they may be related).</p>\n\n<p>First:</p>\n\n<p><code>remote:        /usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory</code></p>\n\n<p>Then:</p>\n\n<p><code>remote:        Detecting rails configuration failed</code></p>\n\n<p>I searched in Stackoverflow to see for solutions, I tried to apply: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/15443456/windows-heroku-run-rake-dbmigrate-error-usr-bin-env-ruby-exe-no-such-file-o/16268193#16268193\">windows heroku run rake db:migrate error &quot;/usr/bin/env: ruby.exe: No such file or directory&quot;</a></p>\n\n<p>And it doesn't work. </p>\n\n<p>Also I've tried to execute in my git bash:</p>\n\n<pre><code>dos2unix bin/bundle bin/rake bin/rails\n</code></pre>\n\n<p>What I have noticed is that it doesnt matter that I've changed ruby.exe to ruby (as said above), heroku still deploys looking for <code>ruby.exe\\r</code></p>\n\n<p>This is the second time I deploy a Rails project in heroku, the first time I didnt have any problems, the second time I cloned the project and used it as template, with a different git repository.</p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE 2:</strong> </p>\n\n<p>I can run it with no problems using  <strong>heroku local</strong>  so Im not sure whats causin the error.</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>Well, I applied what is in these 2 answers:\n<a href=\"https://stackoverflow.com/questions/52316594/heroku-usr-bin-env-ruby-exe-r-no-such-file-or-directory-problem\">heroku /usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory problem</a>\n<a href=\"https://help.github.com/en/articles/dealing-with-line-endings\" rel=\"nofollow noreferrer\">https://help.github.com/en/articles/dealing-with-line-endings</a></p>\n\n<p>Now the:\n'remote:        /usr/bin/env: \u2018ruby.exe\\r\u2019: No such file or directory'</p>\n\n<p>Doesn't appear anymore.</p>\n\n<p>Still getting the rails configuration failed. These are the logs:</p>\n\n<pre><code>(erb):12:in `&lt;main&gt;': undefined method `[]' for nil:NilClass (NoMethodError)\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/erb.rb:876:in `eval'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/erb.rb:876:in `result'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activestorage-5.2.3/lib/active_storage/engine.rb:95:in `block (2 levels) in &lt;class:Engine&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:71:in `instance_eval'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:71:in `block in execute_hook'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:62:in `with_execution_control'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:67:in `execute_hook'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:52:in `block in run_load_hooks'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:51:in `each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/lazy_load_hooks.rb:51:in `run_load_hooks'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activestorage-5.2.3/app/models/active_storage/blob.rb:235:in `&lt;class:Blob&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activestorage-5.2.3/app/models/active_storage/blob.rb:16:in `&lt;top (required)&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:378:in `block in require_or_load'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:37:in `block in load_interlock'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies/interlock.rb:14:in `block in loading'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/concurrency/share_lock.rb:151:in `exclusive'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies/interlock.rb:13:in `loading'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:37:in `load_interlock'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:356:in `require_or_load'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/active_support.rb:48:in `block in require_or_load'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/active_support.rb:16:in `allow_bootsnap_retry'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/active_support.rb:47:in `require_or_load'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:334:in `depend_on'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/active_support.rb:85:in `depend_on'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:246:in `require_dependency'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:478:in `block (2 levels) in eager_load!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:477:in `each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:477:in `block in eager_load!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:475:in `each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:475:in `eager_load!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/engine.rb:356:in `eager_load!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/application/finisher.rb:69:in `each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/application/finisher.rb:69:in `block in &lt;module:Finisher&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/initializable.rb:32:in `instance_exec'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/initializable.rb:32:in `run'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/initializable.rb:61:in `block in run_initializers'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:228:in `block in tsort_each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:431:in `each_strongly_connected_component_from'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:349:in `block in each_strongly_connected_component'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:347:in `each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:347:in `call'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:347:in `each_strongly_connected_component'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:226:in `tsort_each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/ruby-2.5.3/lib/ruby/2.5.0/tsort.rb:205:in `tsort_each'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/initializable.rb:60:in `run_initializers'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/application.rb:361:in `initialize!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/config/environment.rb:5:in `&lt;top (required)&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/application.rb:337:in `require_environment!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/command/actions.rb:28:in `require_environment!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/command/actions.rb:15:in `require_application_and_environment!'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/commands/runner/runner_command.rb:29:in `perform'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/command/base.rb:65:in `perform'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/command.rb:46:in `invoke'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/railties-5.2.3/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\nremote:         from /tmp/build_1139d3f60c8f9853c7eca09a6e6cc23a/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\nremote:         from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "if-statement", "next"], "comments": [{"owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "edited": false, "score": 3, "creation_date": 1556143685, "post_id": 55839192, "comment_id": 98342253, "body": "It will help fix your issue if you will send the whole loop method!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556146431, "post_id": 55839192, "comment_id": 98342931, "body": "<code>return if  i &lt; 2</code> or <code>if i &lt; 2; return; end</code>. (..<code>if 1 &lt; 2</code> is not the best example, since its always <code>true</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 14921, "user_id": 211327, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f50ea766b73c2f3e168daad07286a10b?s=128&d=identicon&r=PG", "display_name": "Alan H.", "link": "https://stackoverflow.com/users/211327/alan-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1556143601, "creation_date": 1556143601, "answer_id": 55839225, "question_id": 55839192, "link": "https://stackoverflow.com/questions/55839192/ruby-condition-return-next-returning-error/55839225#55839225", "title": "Ruby. (condition) ? return : next .Returning error", "body": "<p>Just use if instead of a ternary, and be sure you are in a context (such as a loop) where <code>next</code> is valid.</p>\n"}, {"tags": [], "owner": {"reputation": 29582, "user_id": 1427098, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Bvdm0.jpg?s=128&g=1", "display_name": "Darshan Rivka Whittle", "link": "https://stackoverflow.com/users/1427098/darshan-rivka-whittle"}, "is_accepted": false, "score": 5, "last_activity_date": 1556143685, "creation_date": 1556143685, "answer_id": 55839236, "question_id": 55839192, "link": "https://stackoverflow.com/questions/55839192/ruby-condition-return-next-returning-error/55839236#55839236", "title": "Ruby. (condition) ? return : next .Returning error", "body": "<p>You can just say:</p>\n\n<pre><code>return if (1 &lt; 2)\n</code></pre>\n\n<p>You don't have to tell Ruby to \"keep going\" -- that's what it'll do if it doesn't return from the function!</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556186525, "post_id": 55839516, "comment_id": 98355400, "body": "Although top-level <code>return</code> exists in newer Ruby versions."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1556145711, "creation_date": 1556145711, "answer_id": 55839516, "question_id": 55839192, "link": "https://stackoverflow.com/questions/55839192/ruby-condition-return-next-returning-error/55839516#55839516", "title": "Ruby. (condition) ? return : next .Returning error", "body": "<p><code>return</code> returns from a method or lambda, <code>next</code> returns from a block. There is neither a method nor a lambda nor a block in your code, therefore neither <code>return</code> nor <code>next</code> are valid in your code.</p>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556145711, "creation_date": 1556143338, "question_id": 55839192, "link": "https://stackoverflow.com/questions/55839192/ruby-condition-return-next-returning-error", "title": "Ruby. (condition) ? return : next .Returning error", "body": "<pre><code>(1&lt;2) ? return : next\n</code></pre>\n\n<blockquote>\n  <p>dos.rb: dos.rb:74: Invalid next (SyntaxError)</p>\n</blockquote>\n\n<p>What is the correct way to tell ruby to 'continue' in this context .</p>\n\n<p>if 1 is less than 2, leave the function, else keep going</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1556145479, "post_id": 55838525, "comment_id": 98342713, "body": "Look carefully at your code: at which point in your code do you attempt to instantiate <code>Task</code>? At which point do you define <code>Task</code>? Which of those two points comes before the other? What does that tell you about the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "reply_to_user": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "edited": false, "score": 0, "creation_date": 1556140989, "post_id": 55838651, "comment_id": 98341433, "body": "how did you test? Show please your error!  P.S If you testing though rails console, you need restart console after update Class!!"}, {"owner": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "edited": false, "score": 0, "creation_date": 1556141178, "post_id": 55838651, "comment_id": 98341486, "body": "I&#39;ve used both visual studio code and sublime text to run this. After trying your solution I got the same exact error even when I pasted your solution to a new file and tested it there."}, {"owner": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "edited": false, "score": 0, "creation_date": 1556141576, "post_id": 55838651, "comment_id": 98341631, "body": "The same thing happened when I tried running both files through command prompt as well through &quot;ruby todo.rb&quot; I tried using both ruby version 2.2 and 2.6"}, {"owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "reply_to_user": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "edited": false, "score": 0, "creation_date": 1556143232, "post_id": 55838651, "comment_id": 98342130, "body": "Dear @ri_ji there not a good practice put negative rating to the person who wants to help you, but I hope my code helped you!  I updated code please check and let me know if now code is work!  Good luck!"}, {"owner": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "edited": false, "score": 1, "creation_date": 1556143430, "post_id": 55838651, "comment_id": 98342194, "body": "Thanks. I&#39;m still new to posting to this site and am sorry for the rude vote. I appreciate your patience and effort to help me."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 2, "creation_date": 1556143971, "post_id": 55838651, "comment_id": 98342350, "body": "@AndriyKondzolko I really appreciate your effort Andriy (also being very responsive to the original reporter, nice - even if it was downvoted!), but a code-only answer without comments is not always helpful as an Stack-Overflow answer. Maybe you could incorporate some text (just a few sentences, like your comment about the rails console or how you executed the code you posted)."}], "tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": false, "score": 0, "last_activity_date": 1556145279, "last_edit_date": 1556145279, "creation_date": 1556140472, "answer_id": 55838651, "question_id": 55838525, "link": "https://stackoverflow.com/questions/55838525/how-to-fix-uninitialized-constant-listtask-nameerror-in-ruby/55838651#55838651", "title": "How to fix &quot;uninitialized constant List::Task (NameError)&quot; in Ruby", "body": "<pre><code>class List\n  class Task\n    attr_reader :description\n    def initialize(description)\n      @description = description\n    end\n  end\n\n  attr_reader :all_tasks\n  if __FILE__ == $PROGRAM_NAME\n\n    my_list = List.new\n    puts 'You have created a new list'\n    List::Task.new('Make breakfest')\n    # my_list.add(Task.new('Make breakfest'))\n    puts 'You added a task'\n  end\n\n  def initialize\n    @all_tasks = []\n  end\n\n  def add(task)\n    all_tasks &lt;&lt; task\n  end\n\nend\n</code></pre>\n\n<ol>\n<li><p>The first issue what we had in this file, that we try to call <code>Task</code> class before implemented!</p></li>\n<li><p>You don't correct call <code>Task</code> class <code>my_list.add(Task.new('Make breakfest'))</code> \ncorrect is List::Task.new('Make breakfast')</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": true, "score": 0, "last_activity_date": 1556145421, "last_edit_date": 1556145421, "creation_date": 1556143561, "answer_id": 55839220, "question_id": 55838525, "link": "https://stackoverflow.com/questions/55838525/how-to-fix-uninitialized-constant-listtask-nameerror-in-ruby/55839220#55839220", "title": "How to fix &quot;uninitialized constant List::Task (NameError)&quot; in Ruby", "body": "<p>It might have helped if you provided more information about where (like: in which files) the classes are defined and how you call/execute your ruby code.</p>\n\n<p>Usually, you would put code in a <code>lib</code> directory, with one class per file and strong semantics (<code>class List</code> goes into <code>lib/list.rb</code>), but its a tiny bit more complicated than that.</p>\n\n<p>If you want to hack around and learn play a bit with ruby it is also perfectly understandable, that you do not want to cope with <code>require</code>ing (loading) other files, dealing with dependencies and all that (although this will need to happen one day as with most other programming languages).</p>\n\n<p>For now, this would fix your issue and should get you going:</p>\n\n<pre><code># file name: task_list_program.rb (or anything you want)\nclass Task\n  attr_reader :description\n  def initialize(description)\n    @description = description\n  end\nend\n\nclass List\n  attr_reader :all_tasks\n  def initialize\n    @all_tasks = []\n  end\n\n  def add(task)\n      all_tasks &lt;&lt; task\n  end\nend\n\n# note that for playing around in a single file, you actually\n# do not even need the 'if ...' part here\nif __FILE__ == $PROGRAM_NAME\n  my_list = List.new\n  puts 'You have created a new list'\n  my_list.add(Task.new('Make breakfest'))\n  puts 'You added a task'\nend\n</code></pre>\n\n<p>The main \"trick\" here is to move the <code>if __FILE__ == ...</code> thing out of your class definition, because otherwise (you are accidentally dealing with a special case here), stuff evaluated in that class at runtime will not be able to pick up and reference other \"definitions\" in the way you seem to expect.</p>\n\n<p>I hope this helps you to get going. The differences between the code example could teach you a lot, e.g. about \"namespaces\" (which afaik are not a real concept in Ruby), but I believe this short answer is good enough to get you started and <strong>have some fun with ruby</strong> (and welcome at SO by the way)!</p>\n\n<p>(\"execute\" the file like this: <code>ruby task_list_program.rb</code>).</p>\n"}], "owner": {"reputation": 75, "user_id": 11111472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OWjz-x7_kyA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOAWBxzw8Z5sXXmd3QttOvn7TIPeg/mo/photo.jpg?sz=128", "display_name": "ri_ji", "link": "https://stackoverflow.com/users/11111472/ri-ji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 55839220, "answer_count": 2, "score": 3, "last_activity_date": 1556145421, "creation_date": 1556139891, "last_edit_date": 1556143731, "question_id": 55838525, "link": "https://stackoverflow.com/questions/55838525/how-to-fix-uninitialized-constant-listtask-nameerror-in-ruby", "title": "How to fix &quot;uninitialized constant List::Task (NameError)&quot; in Ruby", "body": "<p>Output: &lt;'class:List'> uninitialized constant List::Task (NameError)\nYou have created a new list</p>\n\n<hr>\n\n<p>What I think is happening is that when I call Task.new, the List class is looking for possibly a task method or variable within its own class.</p>\n\n<p>So far I tried using <code>include Task</code> and <code>require Task</code> in my List class with no luck. I also tried to declare the List class in my Task class. I also tried making the list class a parent of the Task class. After some digging online I thought it was the Ruby version and even changed the PATH to an older ruby version.</p>\n\n<pre><code>class List\n    attr_reader :all_tasks\n    if __FILE__ == $PROGRAM_NAME\n\n        my_list = List.new\n        puts 'You have created a new list'\n        my_list.add(Task.new('Make breakfest'))\n        puts 'You added a task'\n    end\n    def initialize\n      @all_tasks = []\n    end\n\n    def add(task)\n        all_tasks &lt;&lt; task\n    end\nend\n\nclass Task\n  attr_reader :description\n  def initialize(description)\n    @description = description\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 2, "creation_date": 1556296499, "post_id": 55838200, "comment_id": 98403405, "body": "Sorry, Workers must have an empty initialize method.  Arguments go into <code>perform</code>.  ActiveJob is the same way."}], "answers": [{"comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 2, "creation_date": 1556296627, "post_id": 55838274, "comment_id": 98403472, "body": "This is incorrect.  Sidekiq Workers can be named anything but they must include Sidekiq::Worker, have an empty initialize method and a perform method which takes any necessary arguments."}], "tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": false, "score": 1, "last_activity_date": 1556138573, "creation_date": 1556138573, "answer_id": 55838274, "question_id": 55838200, "link": "https://stackoverflow.com/questions/55838200/do-i-need-to-put-everything-in-app-workers-for-sidekiq/55838274#55838274", "title": "Do I need to put everything in app/workers for sidekiq?", "body": "<p>Only one mistake what you did, you forget to add \"Worker\" word in your class name in the first file!</p>\n\n<pre><code>class SomeServiceWorker\n  include Sidekiq::Worker\n\n  def initialize(id)\n    @some_instance = SomeClass.find_by(id: id)\n  end \n\n  def perform\n    @some_instance.do_something\n  end\nend\n</code></pre>\n\n<p>And this code will run your worker</p>\n\n<pre><code>SomeServiceWorker.new(id).perform\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 5180432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Lo-8B_jYrM/AAAAAAAAAAI/AAAAAAAAAZE/A5kAXhOCgTk/photo.jpg?sz=128", "display_name": "Aldo Ziflaj", "link": "https://stackoverflow.com/users/5180432/aldo-ziflaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1556140608, "creation_date": 1556140608, "answer_id": 55838678, "question_id": 55838200, "link": "https://stackoverflow.com/questions/55838200/do-i-need-to-put-everything-in-app-workers-for-sidekiq/55838678#55838678", "title": "Do I need to put everything in app/workers for sidekiq?", "body": "<p>Sidekiq doesn't care much about where the files are and/or how they are named, as long as they include <code>Sidekiq::Worker</code>. The convention though, is to put all the workers in the <code>app/workers</code> directory and to name them as <code>MyWorker</code>.</p>\n\n<p>You can then call them as:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>MyWorker.perform_async params\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 400, "user_id": 10055107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pm3MD.jpg?s=128&g=1", "display_name": "KSD Putra", "link": "https://stackoverflow.com/users/10055107/ksd-putra"}, "is_accepted": false, "score": 0, "last_activity_date": 1576853305, "creation_date": 1576853305, "answer_id": 59427142, "question_id": 55838200, "link": "https://stackoverflow.com/questions/55838200/do-i-need-to-put-everything-in-app-workers-for-sidekiq/59427142#59427142", "title": "Do I need to put everything in app/workers for sidekiq?", "body": "<p>These won't be background job:</p>\n\n<pre><code># This won't do\nSomeWorker.new(*args).perform\n# This is also won't do\nSomeWorker.new.perform(*args)\n</code></pre>\n\n<p>You have to use perform without create the class instance:</p>\n\n<pre><code># This is correct:\nSomeWorker.perform_async(*args)\n# This is also correct:\nSidekiq::Client.push('class' =&gt; SomeWorker, 'args' =&gt; *args)\n</code></pre>\n\n<p>So, you cannot have initialize method in for sidekiq worker.</p>\n\n<p>Assuming those are your only code, so:</p>\n\n<pre><code>class SomeServiceWorker\n  include Sidekiq::Worker\n\n  def perform(id)\n    some_instance = SomeClass.find(id)\n    some_instance.do_something\n  end\nend\n</code></pre>\n\n<p>If SomeService is actually more complex, the best practice is to do what you do:</p>\n\n<pre><code>class SomeServiceWorker\n  include Sidekiq::Worker\n\n  def perform(id)\n    SomeService.new(id).perform\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2015, "user_id": 4852449, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d154c373d3615bf42edf7aecaba3a9c?s=128&d=identicon&r=PG&f=1", "display_name": "cvdv", "link": "https://stackoverflow.com/users/4852449/cvdv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576853305, "creation_date": 1556138275, "question_id": 55838200, "link": "https://stackoverflow.com/questions/55838200/do-i-need-to-put-everything-in-app-workers-for-sidekiq", "title": "Do I need to put everything in app/workers for sidekiq?", "body": "<p>I'm currently migrating from DJ to sidekiq and have a lot of plain old ruby objects that I would use like so:</p>\n\n<pre><code>Delayed::Job.enqueue(SomeService.new(id))\n</code></pre>\n\n<p>I thought I could just move <code>SomeService</code> into the <code>app/workers</code> folder and add <code>include Sidekiq::Worker</code> but it doesn't ever go into the sidekiq queue and just calls performs on the spot</p>\n\n<pre><code>class SomeService\n  include Sidekiq::Worker\n\n  def initialize(id)\n    @some_instance = SomeClass.find_by(id: id)\n  end \n\n  def perform\n    @some_instance.do_something\n  end\nend\n</code></pre>\n\n<p>so instead I have to create a sidekiq worker to call the service </p>\n\n<pre><code>class SomeServiceWorker\n  include Sidekiq::Worker\n\n  def perform(id)\n    SomeService.new(id).perform\n  end\nend\n\n</code></pre>\n\n<p>Is there a way to just use the SomeService, which contains an initialize method and perform method so I don't have to create a worker to call my service object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 1, "creation_date": 1556137959, "post_id": 55838090, "comment_id": 98340265, "body": "Thanks! that works. Why does it not act like a normal hash? Is it an embedded hash?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1556138114, "post_id": 55838090, "comment_id": 98340347, "body": "It is a normal hash with normal hashes inside of it. This is how you navigate through the levels."}, {"owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "edited": false, "score": 0, "creation_date": 1556138179, "post_id": 55838090, "comment_id": 98340378, "body": "It works like normal Hash, but you didn&#39;t take your &quot;lat&quot; data, because of this &quot;lat&quot; data inside &quot;place&quot; hash, and &quot;place&quot; hash inside &quot;searchresults&quot;  @object[:searchresults][:place][:lat] also, should work!"}], "tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": false, "score": 1, "last_activity_date": 1556137769, "creation_date": 1556137769, "answer_id": 55838090, "question_id": 55838041, "link": "https://stackoverflow.com/questions/55838041/how-do-i-access-a-value-from-within-this-hash/55838090#55838090", "title": "How do I access a value from within this hash?", "body": "<pre><code>@object[\"searchresults\"][\"place\"][\"lat\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "is_accepted": false, "score": 1, "last_activity_date": 1556137888, "creation_date": 1556137888, "answer_id": 55838115, "question_id": 55838041, "link": "https://stackoverflow.com/questions/55838041/how-do-i-access-a-value-from-within-this-hash/55838115#55838115", "title": "How do I access a value from within this hash?", "body": "<p>If you have this code you can retrieve <code>lat</code> and <code>lon</code> this way : </p>\n\n<pre><code>object = {\"searchresults\"=&gt;{\"place\"=&gt;{\"place_id\"=&gt;\"100066\", \"osm_type\"=&gt;\"node\", \"osm_id\"=&gt;\"107775\", \"place_rank\"=&gt;\"15\", \"boundingbox\"=&gt;\"51.3473219,51.6673219,-0.2876474,0.0323526\", \"lat\"=&gt;\"51.5073219\", \"lon\"=&gt;\"-0.1276474\", \"display_name\"=&gt;\"London, Greater London, England, SW1A 2DX, United Kingdom\", \"class\"=&gt;\"place\", \"type\"=&gt;\"city\", \"importance\"=&gt;\"0.9654895765402\", \"icon\"=&gt;\"https://locationiq.org/static/images/mapicons/poi_place_city.p.20.png\"}, \"timestamp\"=&gt;\"Thu, 25 Apr 19 01:43:32 +0530\", \"attribution\"=&gt;\"https://locationiq.com/attribution\", \"querystring\"=&gt;\"london\", \"polygon\"=&gt;\"false\", \"exclude_place_ids\"=&gt;\"100066\", \"more_url\"=&gt;\"https://locationiq.org/static/search.php?q=london&amp;exclude_place_ids=100066&amp;format=xml\"}}\nlat = object[\"searchresults\"][\"place\"][\"lat\"]\nlon = object[\"searchresults\"][\"place\"][\"lon\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 4, "last_activity_date": 1556138759, "last_edit_date": 1556138759, "creation_date": 1556138264, "answer_id": 55838195, "question_id": 55838041, "link": "https://stackoverflow.com/questions/55838041/how-do-i-access-a-value-from-within-this-hash/55838195#55838195", "title": "How do I access a value from within this hash?", "body": "<p>If you have:</p>\n\n<pre><code>object = {\"searchresults\"=&gt;{\"place\"=&gt;{\"place_id\"=&gt;\"100066\", \"osm_type\"=&gt;\"node\", \"osm_id\"=&gt;\"107775\", \"place_rank\"=&gt;\"15\", \"boundingbox\"=&gt;\"51.3473219,51.6673219,-0.2876474,0.0323526\", \"lat\"=&gt;\"51.5073219\", \"lon\"=&gt;\"-0.1276474\", \"display_name\"=&gt;\"London, Greater London, England, SW1A 2DX, United Kingdom\", \"class\"=&gt;\"place\", \"type\"=&gt;\"city\", \"importance\"=&gt;\"0.9654895765402\", \"icon\"=&gt;\"https://locationiq.org/static/images/mapicons/poi_place_city.p.20.png\"}, \"timestamp\"=&gt;\"Thu, 25 Apr 19 01:43:32 +0530\", \"attribution\"=&gt;\"https://locationiq.com/attribution\", \"querystring\"=&gt;\"london\", \"polygon\"=&gt;\"false\", \"exclude_place_ids\"=&gt;\"100066\", \"more_url\"=&gt;\"https://locationiq.org/static/search.php?q=london&amp;exclude_place_ids=100066&amp;format=xml\"}}\n</code></pre>\n\n<p>You might want to use: </p>\n\n<pre><code>object.dig('searchresults','place','lat')\n =&gt; \"51.5073219\"\n</code></pre>\n\n<p>The benefit is that, if by chance, your <code>object</code> doesn't have the expected structure, you'll receive a <code>nil</code>:</p>\n\n<pre><code>object.dig('searchresults','foo_place','lat')\n =&gt; nil \n</code></pre>\n\n<p>Whereas the sequential hash accessors will throw an error: </p>\n\n<pre><code>object['searchresults']['foo_place']['lat']\nTraceback (most recent call last):\n        1: from (irb):60\nNoMethodError (undefined method `[]' for nil:NilClass)\n</code></pre>\n\n<p>And it's probably easier to deal with a <code>nil</code> than a <code>NoMethodError</code>.</p>\n\n<p>If you prefer to use symbols as your keys (instead of strings), then you could do: </p>\n\n<pre><code>object.with_indifferent_access.dig(:searchresults, :place, :lat)\n =&gt; \"51.5073219\"\n</code></pre>\n\n<p>Note that, without <code>with_indifferent_access</code> (or one of the other means of converting your keys from strings to symbols):</p>\n\n<pre><code>object[:searchresults][:place][:lat]\nTraceback (most recent call last):\n        1: from (irb):67\nNoMethodError (undefined method `[]' for nil:NilClass)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7287203, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YeNdB3irVwk/AAAAAAAAAAI/AAAAAAAAD7I/0QJGINL8o_g/photo.jpg?sz=128", "display_name": "Marcos Parreiras", "link": "https://stackoverflow.com/users/7287203/marcos-parreiras"}, "is_accepted": false, "score": 0, "last_activity_date": 1556213430, "creation_date": 1556213430, "answer_id": 55854753, "question_id": 55838041, "link": "https://stackoverflow.com/questions/55838041/how-do-i-access-a-value-from-within-this-hash/55854753#55854753", "title": "How do I access a value from within this hash?", "body": "<p>It's easier to see the hash structure once it's properly indented. So here's the structure for the hash you want to access:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>{\n  \"searchresults\"=&gt; {\n    \"place\"=&gt; {\n      \"place_id\"=&gt;\"100066\", \n      \"osm_type\"=&gt;\"node\", \n      \"osm_id\"=&gt;\"107775\", \n      \"place_rank\"=&gt;\"15\", \n      \"boundingbox\"=&gt;\"51.3473219,51.6673219,-0.2876474,0.0323526\", \n      \"lat\"=&gt;\"51.5073219\", \n      \"lon\"=&gt;\"-0.1276474\", \n      \"display_name\"=&gt;\"London, Greater London, England, SW1A 2DX, United Kingdom\", \n      \"class\"=&gt;\"place\", \"type\"=&gt;\"city\", \"importance\"=&gt;\"0.9654895765402\", \n      \"icon\"=&gt;\"https://locationiq.org/static/images/mapicons/poi_place_city.p.20.png\"\n    }, \n    \"timestamp\"=&gt;\"Thu, 25 Apr 19 01:43:32 +0530\", \"attribution\"=&gt;\"https://locationiq.com/attribution\", \n    \"querystring\"=&gt;\"london\", \"polygon\"=&gt;\"false\", \"exclude_place_ids\"=&gt;\"100066\", \n    \"more_url\"=&gt;\"https://locationiq.org/static/search.php?q=london&amp;exclude_place_ids=100066&amp;format=xml\"\n  }\n}\n</code></pre>\n\n<p>From here, you can see that the <code>lat</code> key is actually under the <code>searchresults -&gt; place -&gt; lat</code> path. Therefore, you could reach it with </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>@object['searchresults']['place']['lat']\n</code></pre>\n\n<p>or alternatively </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>@object.dig('searchresults', 'place', 'lat')\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 55838195, "answer_count": 4, "score": 2, "last_activity_date": 1556213430, "creation_date": 1556137552, "question_id": 55838041, "link": "https://stackoverflow.com/questions/55838041/how-do-i-access-a-value-from-within-this-hash", "title": "How do I access a value from within this hash?", "body": "<p>I'm trying to access the <code>lat</code> and <code>lon</code> values within this hash, but when I call <code>@object[\"lat\"]</code> or <code>object[:lat]</code> it returns <code>nil</code>. Here is the hash:</p>\n\n<pre><code>{\"searchresults\"=&gt;{\"place\"=&gt;{\"place_id\"=&gt;\"100066\", \"osm_type\"=&gt;\"node\", \"osm_id\"=&gt;\"107775\", \"place_rank\"=&gt;\"15\", \"boundingbox\"=&gt;\"51.3473219,51.6673219,-0.2876474,0.0323526\", \"lat\"=&gt;\"51.5073219\", \"lon\"=&gt;\"-0.1276474\", \"display_name\"=&gt;\"London, Greater London, England, SW1A 2DX, United Kingdom\", \"class\"=&gt;\"place\", \"type\"=&gt;\"city\", \"importance\"=&gt;\"0.9654895765402\", \"icon\"=&gt;\"https://locationiq.org/static/images/mapicons/poi_place_city.p.20.png\"}, \"timestamp\"=&gt;\"Thu, 25 Apr 19 01:43:32 +0530\", \"attribution\"=&gt;\"https://locationiq.com/attribution\", \"querystring\"=&gt;\"london\", \"polygon\"=&gt;\"false\", \"exclude_place_ids\"=&gt;\"100066\", \"more_url\"=&gt;\"https://locationiq.org/static/search.php?q=london&amp;exclude_place_ids=100066&amp;format=xml\"}}\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556135064, "post_id": 55837425, "comment_id": 98339040, "body": "What makes you think it&#39;s a relationship error when your server is returning <code>401 (Unauthorized)</code>?"}, {"owner": {"reputation": 35, "user_id": 10405423, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MzDrQ5LZiwU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOhZtRXOoxXDYgL7Dqjz8Y8mGatUA/mo/photo.jpg?sz=128", "display_name": "kingninja", "link": "https://stackoverflow.com/users/10405423/kingninja"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556135226, "post_id": 55837425, "comment_id": 98339110, "body": "@jvillian  I&#39;m not sure, the server shows the following:  Started GET &quot;/ requests / get_communes? Selected_region = ATACAMA&quot; for :: 1 at 2019-04-24 15:21:21 -0400 Processing by RequestsController # get_communes as * / *   Parameters: {&quot;selected_region&quot; =&gt; &quot;ATACAMA&quot;} Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556137732, "post_id": 55837425, "comment_id": 98340139, "body": "Does your <code>ApplicationController</code> also include <code>before_action :authenticate_request!</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556137862, "post_id": 55837681, "comment_id": 98340217, "body": "Out of curiosity... This would require, wouldn&#39;t it, that <code>token</code> is available on the client side? And, if so, wouldn&#39;t that mean that <code>token</code> would be available to anyone who wanted to look at the js code in the browser?"}, {"owner": {"reputation": 46, "user_id": 11392210, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cBs3XPIvS4s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsb9onaPuQlcXQzBdj09FM_ggqXA/mo/photo.jpg?sz=128", "display_name": "Lefteris Fotopoulos", "link": "https://stackoverflow.com/users/11392210/lefteris-fotopoulos"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556138247, "post_id": 55837681, "comment_id": 98340409, "body": "It would require a mechanism to generate a unique token for each user (maybe using asymetric jwt?). So even if he looked at the source code, he would see his own token. This is required, since he tries to retrieve ajax data from a protected source."}], "tags": [], "owner": {"reputation": 46, "user_id": 11392210, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cBs3XPIvS4s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsb9onaPuQlcXQzBdj09FM_ggqXA/mo/photo.jpg?sz=128", "display_name": "Lefteris Fotopoulos", "link": "https://stackoverflow.com/users/11392210/lefteris-fotopoulos"}, "is_accepted": false, "score": 0, "last_activity_date": 1556135890, "creation_date": 1556135890, "answer_id": 55837681, "question_id": 55837425, "link": "https://stackoverflow.com/questions/55837425/i-need-help-to-solve-relationship-error-and-list-options-in-a-second-select-acc/55837681#55837681", "title": "I need help to solve relationship error and list options in a second select, according to the value entered in the first select", "body": "<p>Seems like you need to generate and pass an auth token to the ajax call, something like:</p>\n\n<pre><code>beforeSend: function (xhr) {\n   xhr.setRequestHeader (\"Authorization\", token ));\n},\n</code></pre>\n\n<p>Check jQuery's <a href=\"http://api.jquery.com/jQuery.ajax/\" rel=\"nofollow noreferrer\">beforeSend</a> directive.</p>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": false, "score": 0, "last_activity_date": 1556136006, "creation_date": 1556136006, "answer_id": 55837707, "question_id": 55837425, "link": "https://stackoverflow.com/questions/55837425/i-need-help-to-solve-relationship-error-and-list-options-in-a-second-select-acc/55837707#55837707", "title": "I need help to solve relationship error and list options in a second select, according to the value entered in the first select", "body": "<p>I think issue what do you have is here <code>before_action: authenticate_request!</code>, I think if you will remove this code from your controller, your <code>get_communes</code> will return you JSON!</p>\n\n<p>\"before_action :authenticate_request!\" suppose use only in <code>AuthenticationController</code> or <code>ApplicationController</code>!</p>\n"}], "owner": {"reputation": 35, "user_id": 10405423, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MzDrQ5LZiwU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOhZtRXOoxXDYgL7Dqjz8Y8mGatUA/mo/photo.jpg?sz=128", "display_name": "kingninja", "link": "https://stackoverflow.com/users/10405423/kingninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556136006, "creation_date": 1556134805, "question_id": 55837425, "link": "https://stackoverflow.com/questions/55837425/i-need-help-to-solve-relationship-error-and-list-options-in-a-second-select-acc", "title": "I need help to solve relationship error and list options in a second select, according to the value entered in the first select", "body": "<p>I need help to solve relationship error and list options in a second select, according to the value entered in the first select</p>\n\n<p>In the browser console I have the following error when selecting the first \"select\".</p>\n\n<p>get_communes?selected_region=ATACAMA:1 Failed to load resource: the server responded with a status of 401 (Unauthorized)</p>\n\n<p>My objective is to select a region in the first selection, then in the second select the options in that region</p>\n\n<p>I'm working with ruby \u200b\u200bon rails, javascript, jQuery, bootstrap</p>\n\n<p>request.js</p>\n\n<pre><code>$(document).on(\"turbolinks:load\", function() {\n\n\n    //============ traer comuna de acuerdo a la region \n    $('#request_region').on('change', function (e) {\n        var request_region = $('#request_region').find(\":selected\").text();\n        $.ajax({\n            url: '/requests/get_communes',\n            type: 'get',\n            data: {selected_region: request_region},\n            success: function(data) {\n                console.log('correcto!!');\n\n                console.log(data);\n\n\n                $(\"#request_commune\").children().remove();\n                var listitems = []; \n                $.each(data, function(key, value) { \n                    listitems += '&lt;option value=\"' + value['id']+ '\"&gt;' + value['name'] + '&lt;/option&gt;'; \n                }); \n                $(\"#request_commune\").append(listitems);\n            }\n        });\n    });\n\n\n    $(\".js-example-basic-single\").select2();\n\n});\n</code></pre>\n\n<p>new.html.erb </p>\n\n<pre><code>            &lt;div class=\"col-12 col-md-6\"&gt;\n                &lt;%= f.select :region_id, @regions, {include_blank: 'Elija una regi\u00f3n'}, {class: 'js-example-basic-single', id: :request_region, required: true} %&gt;\n                &lt;%= f.label :Regi\u00f3n, class:'' %&gt;\n            &lt;/div&gt;\n\n\n            &lt;div class=\"col-12 col-md-6\"&gt;\n\n                    &lt;span class=\"custom-dropdown last\"&gt;\n                        &lt;select class=\"js-example-basic-single\" id=\"request_commune\" data-live-search=\"true\" name=\"request[commune_id]\"\n                        required&gt;\n                        &lt;option value=\"AL\"&gt;Primero Elija una Regi\u00f3n&lt;/option&gt;\n                    &lt;/select&gt;\n                    &lt;%= f.label :comuna, class:'' %&gt;\n\n            &lt;/div&gt;\n</code></pre>\n\n<p>folder: requests (devise)\nregistrations_controller-rb</p>\n\n<pre><code>    def new\n        @regions = Region.all.collect { |reg| [reg.name, reg.id] }\n        super\n    end\n\n\n</code></pre>\n\n<p>requests_controller.rb</p>\n\n<pre><code>class RequestsController &lt; ApplicationController\n  before_action :authenticate_request!\n  before_action :set_request, only: [:show, :edit, :update] # probably want to keep using this\n\n  # GET /users\n  # GET /users.json\n  def index\n    @requests = Request.all\n  end\n\n  # # GET /users/1\n  # # GET /users/1.json\n  def show\n\n  end\n\n  # GET /users/1/edit\n  def edit\n\n  end\n\n  # # PATCH/PUT /users/1\n  # # PATCH/PUT /users/1.json\n  def update\n    respond_to do |format|\n      if @request.update(request_params)\n        format.html { redirect_to @request, notice: 'User was successfully updated.' }\n        format.json { render :show, status: :ok, location: @request }\n      else\n        format.html { render :edit }\n        format.json { render json: @request.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  #def dashboard\n    #corregir este m\u00e9todo\n    #data_certificacion = Event.find_by(request: current_request)\n    #byebug\n    #if data_certificacion.present?\n     # @certification = true\n    #end\n  #end\n\n\n  def get_communes\n        region = Region.find_by(name: params[:selected_region])\n        @communes = Commune.order(name: :asc).where(region_id: region.id)\n    render json: @communes\n  end\n\n\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_user\n    @request = Request.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def user_params\n    params.require(:request).permit(:role, :name)\n  end\n\nend\n</code></pre>\n\n<p>relationships and models</p>\n\n<pre><code>region:\n  has_many :communes\n\ncommune\n  belongs_to :region\n  has_many :requests\n\nSchema:\n\n\n  create_table \"requests\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.string \"confirmation_token\"\n    t.datetime \"confirmed_at\"\n    t.datetime \"confirmation_sent_at\"\n    t.string \"unconfirmed_email\"\n    t.integer \"failed_attempts\", default: 0, null: false\n    t.string \"unlock_token\"\n    t.datetime \"locked_at\"\n    t.string \"name\"\n    t.integer \"phone\"\n    t.text \"comment\"\n    t.boolean \"state\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.bigint \"region_id\"\n    t.bigint \"commune_id\"\n    t.index [\"commune_id\"], name: \"index_requests_on_commune_id\"\n    t.index [\"email\"], name: \"index_requests_on_email\", unique: true\n    t.index [\"region_id\"], name: \"index_requests_on_region_id\"\n    t.index [\"reset_password_token\"], name: \"index_requests_on_reset_password_token\", unique: true\n  end\n\n\n  create_table \"regions\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n\n  create_table \"communes\", force: :cascade do |t|\n    t.string \"name\"\n    t.bigint \"region_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"region_id\"], name: \"index_communes_on_region_id\"\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "passenger", "phusion"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556162257, "post_id": 55836853, "comment_id": 98345722, "body": "If you&#39;re using Passenger then this is a very strange way to be launching your application. Does your <code>database.yml</code> have root configured for anything? On a production server it should have <code>production</code> and only production as a top-level key."}], "answers": [{"tags": [], "owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "is_accepted": false, "score": 1, "last_activity_date": 1556147582, "creation_date": 1556147582, "answer_id": 55839751, "question_id": 55836853, "link": "https://stackoverflow.com/questions/55836853/phusion-passenger-is-overriding-my-database-config/55839751#55839751", "title": "Phusion passenger is overriding my database config", "body": "<p>in my opinion, I think you should try <a href=\"https://www.phusionpassenger.com/library/deploy/standalone/deploy/ruby/\" rel=\"nofollow noreferrer\">Passenger Standalone</a> that is what I use and it works fine.</p>\n"}], "owner": {"reputation": 23, "user_id": 4962645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73018384dec5985c397a7b37e17c36cd?s=128&d=identicon&r=PG&f=1", "display_name": "beckmx", "link": "https://stackoverflow.com/users/4962645/beckmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556147582, "creation_date": 1556132274, "question_id": 55836853, "link": "https://stackoverflow.com/questions/55836853/phusion-passenger-is-overriding-my-database-config", "title": "Phusion passenger is overriding my database config", "body": "<p>I am using nginx with Phusion Passenger to bootload a ruby on rails application, if I run the application like </p>\n\n<pre><code>rails s -e production\n</code></pre>\n\n<p>It does connect correctly to the database, but when bootloaded from nginx with passenger it tries to use root to the database, like ignoring the config files.</p>\n\n<p>I already tried giving permissions, but doesnt look like there is the problem, I already opened the 3 possible host names for root, which could be \"localhost\", \"%\" and \"127.0.0.1\", but in any case it should be openning a connection with root</p>\n\n<p>I would say something is weird on how passenger behaves or that somewhere (not in the app) is ignoring the database.yml or overriding the credentials</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "minitest"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556128744, "post_id": 55835903, "comment_id": 98336360, "body": "What version of Rails are you using? Are you using database cleaner? What version of Capybara? Have you overridden the Capybara default session reset behavior? Are you letting Capybara manage running the application under test, or have you disabled that? Current Capybaras default setup should wait for all requests to complete when resetting the session unless you&#39;ve disabled that by trying to do custom things."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556130682, "post_id": 55835903, "comment_id": 98337209, "body": "Ok -- You&#39;re running Rails 5.2.2 so you shouldn&#39;t be using database_cleaner since Rails handles that from Rails 5.1+ - Are these Rails system tests you&#39;re writing?  If so do you happen to have written <code>teardown</code> blocks where you forgot to call <code>super</code>? If so that would prevent Capybaras <code>reset_sessions!</code> from being called which is where Capybara waits for all current requests to end before moving on.  If you&#39;re not using system tests do you have your own <code>teardown</code> block that calls <code>Capybara.reset_sessions!</code> at the end of the test?  Also, Capybara 3.0.3 is obsolete nowadays"}, {"owner": {"reputation": 46, "user_id": 3853083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycNRe.jpg?s=128&g=1", "display_name": "Phenixer", "link": "https://stackoverflow.com/users/3853083/phenixer"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556130848, "post_id": 55835903, "comment_id": 98337306, "body": "Hi @ThomasWalpole, I updated the question with gem versions, thanks for reminding me to put those. We are not using any Database Cleaner gem, we are using rails fixtures. For the session behavior, we have implemented something like <a href=\"https://github.com/teamcapybara/capybara#using-capybara-with-minitest\" rel=\"nofollow noreferrer\">this documentation</a>, though I noticed we have overridden <code>def after_teardown</code> and not <code>def teardown</code>, not sure if it would change much. Your question &quot;letting Capybara manage running application under test&quot;, I am not sure what you are referring to, sorry."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556131550, "post_id": 55835903, "comment_id": 98337599, "body": "<code>after_teardown</code> vs <code>teardown</code> would make a huge difference if the DB is being rolled back during <code>teardown</code> - <code>Capybara.reset_sessions!</code> needs to be called before the DB is rolled back (I don&#39;t remember offhand during which stage Rails rolls back in integration tests - but system tests specifically call reset_sessions from teardown not after_teardown so I assume it should be in <code>teardown</code> - try it and see) This all assumes you are letting Capybara run the app (you haven&#39;t set Capybara.run_server = false, and then set <code>app_host</code> to another instance of the app you are managing startup for)"}, {"owner": {"reputation": 46, "user_id": 3853083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycNRe.jpg?s=128&g=1", "display_name": "Phenixer", "link": "https://stackoverflow.com/users/3853083/phenixer"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556132197, "post_id": 55835903, "comment_id": 98337882, "body": "Well! @ThomasWalpole You are my man! It was indeed <code>teardown</code> vs <code>after_teardown</code>. Rails most certainly does rollback in <code>after_teardown</code> because after moving the <code>super</code> call after <code>Capybara.reset_sessions!</code>, it worked. Thanks for pointing me in the right directions, my knowledge of Capybara is still limited so I wasn&#39;t able to pinpoint when/where things happens."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1556132589, "post_id": 55835903, "comment_id": 98338063, "body": "Added as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 3853083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycNRe.jpg?s=128&g=1", "display_name": "Phenixer", "link": "https://stackoverflow.com/users/3853083/phenixer"}, "is_accepted": false, "score": 0, "last_activity_date": 1556132531, "creation_date": 1556132531, "answer_id": 55836914, "question_id": 55835903, "link": "https://stackoverflow.com/questions/55835903/how-to-avoid-pending-requests-to-fail-after-database-rollback-in-integration-tes/55836914#55836914", "title": "How to avoid pending requests to fail after database rollback in integration tests?", "body": "<p>It turned out we had implemented Capybara this way:</p>\n\n<pre><code>def after_teardown\n  super\n  Capybara.reset_sessions!\n  Capybara.use_default_driver\nend\n</code></pre>\n\n<p>but Rails rollbacks the database in the <code>super</code> call of <code>after_teardown</code>. So the database was rollbacked before Capybara waits for the session to finish.</p>\n\n<p>Moving the <code>super</code> after <code>Capybara.reset_sessions!</code> did the trick (it also makes sense to put it inside <code>def teardown</code> instead, which is most probably what we will do).</p>\n\n<p>Thank you to @ThomasWalpole for pointing me in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1556132558, "creation_date": 1556132558, "answer_id": 55836923, "question_id": 55835903, "link": "https://stackoverflow.com/questions/55835903/how-to-avoid-pending-requests-to-fail-after-database-rollback-in-integration-tes/55836923#55836923", "title": "How to avoid pending requests to fail after database rollback in integration tests?", "body": "<p>Assuming Capybara is managing the running of the app being tested, <code>Capybara.reset_sessions!</code> will wait for all open requests to complete.  This needs to happen before the DB is rolled back. If using Rails system tests this will be handled in a <code>teardown</code> block as long as you call <code>super</code> from any <code>teardown</code> blocks you have defined. If not using system tests and just basing your tests off IntegerationTests you need to define a <code>teardown</code> block that calls <code>Capybara.reset_sessions!</code> in order to have it wait for all the requests to complete before Rails rolls back the DB.</p>\n"}], "owner": {"reputation": 46, "user_id": 3853083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycNRe.jpg?s=128&g=1", "display_name": "Phenixer", "link": "https://stackoverflow.com/users/3853083/phenixer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 55836923, "answer_count": 2, "score": 1, "last_activity_date": 1556132558, "creation_date": 1556128399, "last_edit_date": 1556129962, "question_id": 55835903, "link": "https://stackoverflow.com/questions/55835903/how-to-avoid-pending-requests-to-fail-after-database-rollback-in-integration-tes", "title": "How to avoid pending requests to fail after database rollback in integration tests?", "body": "<p>We have been experiencing an intermittent issue and I would like to see if someone in here has insight to how we can tackle it.\nWe are doing our integration tests with Minitest + Capybara and Chrome headless driver.</p>\n\n<p>The issue happens when a test has finished and the database gets ROLLBACK'd. There can still be some unfinished requests running in the background, and crashes may occur (like a RecordNotFound) if they try to access unavailable database information.</p>\n\n<p>That kind of problem most commonly happens because of AJAX requests, and for this, we are already using a <strong>wait_for_ajax</strong> helper (that we developed ourselves) to wait until the Browser has finished with his requests.</p>\n\n<p>The unresolved problem happens with <code>&lt;img&gt;</code> HTML tags because the browser can still be trying to load images asynchronously even though the tests are finished.</p>\n\n<p>Here is a code example that would cause the issue almost all of the time:</p>\n\n<pre><code>test 'image popup should contain some class' do\n  upload_some_images # Uploads images\n  visit '/list_of_images' # Some page with list of images, you can click on the image and it opens it in a popup\n\n  find('.image-popup-open-button').click # Open image in a popup window\n  assert_selector '.some-class-must-be-present'\nend\n</code></pre>\n\n<p>This is a simple test, yet, it will always crash in our case with a <code>ActiveRecord::RecordNotFound blob id=xxx</code> error.</p>\n\n<ul>\n<li>When opening the popup window, an <code>&lt;img src='/files/123' /&gt;</code> is added to the DOM. The Browser then queries that and gets redirected to the ActiveRecord representation URL.</li>\n<li>The integration test is quite simple and validates if some class is present, then the test is finished and the database is ROLLBACK'd.</li>\n<li>The request for <code>/files/123</code> is still running, which then tries to load a blob (database record) that does not exist anymore, and result in an unexpected test failure.</li>\n</ul>\n\n<p>Does anyone ever had such a problem, if so, how did you manage to avoid it?</p>\n\n<p>We are using Ruby 2.5.0, Rails 5.2.2, Capybara 3.0.3</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "centos7", "redmine", "webrick"], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 1940844, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30c6e74f59ee13913774451e28ae2ac2?s=128&d=identicon&r=PG", "display_name": "KayKay", "link": "https://stackoverflow.com/users/1940844/kaykay"}, "is_accepted": false, "score": 0, "last_activity_date": 1556273501, "creation_date": 1556273501, "answer_id": 55865369, "question_id": 55835869, "link": "https://stackoverflow.com/questions/55835869/econnreset-error-when-accessing-ruby-application-which-runs-in-webrick/55865369#55865369", "title": "ECONNRESET error when accessing Ruby application which runs in Webrick", "body": "<p>In the end, it was due to the port 3000 was being blocked by the network where the server was part of. Once the port block was removed, it started to work. Thanks @mike-k for your tips.</p>\n"}], "owner": {"reputation": 463, "user_id": 1940844, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30c6e74f59ee13913774451e28ae2ac2?s=128&d=identicon&r=PG", "display_name": "KayKay", "link": "https://stackoverflow.com/users/1940844/kaykay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580417957, "creation_date": 1556128281, "last_edit_date": 1556171910, "question_id": 55835869, "link": "https://stackoverflow.com/questions/55835869/econnreset-error-when-accessing-ruby-application-which-runs-in-webrick", "title": "ECONNRESET error when accessing Ruby application which runs in Webrick", "body": "<p>I am trying to install redmine (bugtracker which runs on ruby). I use webrick, it starts all fine, but when I access <a href=\"http://IP:3000/\" rel=\"nofollow noreferrer\">http://IP:3000/</a>, it throws the following error  in the server logs and the page does not load in the browser.  </p>\n\n<pre><code>ERROR Errno::ECONNRESET: Connection reset by peer @ io_fillbuf - fd:11\n    /root/.rbenv/versions/2.5.1/lib/ruby/2.5.0/webrick/httpserver.rb:82:in `eof?'\n    /root/.rbenv/versions/2.5.1/lib/ruby/2.5.0/webrick/httpserver.rb:82:in `run'\n    /root/.rbenv/versions/2.5.1/lib/ruby/2.5.0/webrick/server.rb:307:in `block in start_thread'\n</code></pre>\n\n<p>I am a bit stuck here, any help would be greatly appreciated. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "regex", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556123488, "post_id": 55834696, "comment_id": 98333922, "body": "so is your logic for this any string which has a <code>domain.root_domain</code> ?"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556123727, "post_id": 55834696, "comment_id": 98334055, "body": "@lacostenycoder kindly check the updated text. thanks"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1556124216, "post_id": 55834696, "comment_id": 98334267, "body": "Matching any arbitrary URL is not easy, you will certainly get false positives if you want to also match strings like <code>googl.com</code>. Please check <a href=\"https://stackoverflow.com/questions/6038061/regular-expression-to-find-urls-within-a-string\">this thread</a> for ideas on what pattern suits your scenario best. Once you know what pattern is good to use the rest is easy."}], "answers": [{"comments": [{"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1556124199, "post_id": 55834868, "comment_id": 98334261, "body": "classic fix. you rocked"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 1, "creation_date": 1556124237, "post_id": 55834868, "comment_id": 98334277, "body": "i wish i could give you more than 1 thumbs up"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1556124976, "post_id": 55834868, "comment_id": 98334647, "body": "@ImranNaqvi all good, see updated answer, it&#39;s complete solution I think."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1556125445, "last_edit_date": 1556125445, "creation_date": 1556124054, "answer_id": 55834868, "question_id": 55834696, "link": "https://stackoverflow.com/questions/55834696/regex-to-extract-urls-from-text-ruby/55834868#55834868", "title": "regex to extract URLs from text - Ruby", "body": "<p>Find words who look like urls:</p>\n\n<pre><code>str = \"ANQUETIL-DUPERRON Abraham-Hyacinthe, KIEFFER Jean-Luc, www.hominides.net/html/actualites/outils-preuve-presence-hominides-asie-0422.php,Les Belles lettres, 2001.\\n\\nhttps://www.ancient-code.com/indian-archeologists-stumbleacross-ruins-great-forgotten-civilization-mizoram/\\n\\nwww.jstor.org/stable/24084454\\n\\nwww.biorespire.com/2016/03/22/une-nouvelle-villeantique-d%C3%A9couverte-en-inde/\\n\\ninsu.cnrs.fr/terre-solide/terre-et-vie/de-nouvellesdatations-repoussent-l-age-de-l-apparition-d-outils-surle-so\\n\\nwww.cerege.fr/spip.php?page=pageperso&amp;id_user=94\"\n\nstr.split.select{|w| w[/(\\b+\\.\\w+)/]}\n</code></pre>\n\n<p>This will give you an array of words which have no spaces and include a one or more <code>.</code> characters which MIGHT work for your use case. </p>\n\n<pre><code>puts str.split.select{|w| w[/(\\b+\\.\\w+)/]}\nwww.hominides.net/html/actualites/outils-preuve-presence-hominides-asie-0422.php,\nhttps://www.ancient-code.com/indian-archeologists-stumbleacross-ruins-great-forgotten-civilization-mizoram/\nwww.jstor.org/stable/24084454\nwww.biorespire.com/2016/03/22/une-nouvelle-villeantique-d%C3%A9couverte-en-inde/\ninsu.cnrs.fr/terre-solide/terre-et-vie/de-nouvellesdatations-repoussent-l-age-de-l-apparition-d-outils-surle-so\nwww.cerege.fr/spip.php?page=pageperso&amp;id_user=94\n</code></pre>\n\n<h3>Updated</h3>\n\n<p>Complete solution to modify your string:</p>\n\n<pre><code>str_with_quote = str.clone # make a clone for the `gsub!`\n\nstr.split.select{|w| w[/(\\b+\\.\\w+)/]}\n   .each{|url| str_with_quote.gsub!(url, '\"' + url + '\"')} \n</code></pre>\n\n<p>Now your cloned object wraps urls inside double quotes</p>\n\n<pre><code>puts str_with_quote\n</code></pre>\n\n<p>Will give you this output </p>\n\n<pre><code>ANQUETIL-DUPERRON Abraham-Hyacinthe, KIEFFER Jean-Luc, \"www.hominides.net/html/actualites/outils-preuve-presence-hominides-asie-0422.php,Les\" Belles lettres, 2001.\n\n\"https://www.ancient-code.com/indian-archeologists-stumbleacross-ruins-great-forgotten-civilization-mizoram/\"\n\n\"www.jstor.org/stable/24084454\"\n\n\"www.biorespire.com/2016/03/22/une-nouvelle-villeantique-d%C3%A9couverte-en-inde/\"\n\n\"insu.cnrs.fr/terre-solide/terre-et-vie/de-nouvellesdatations-repoussent-l-age-de-l-apparition-d-outils-surle-so\"\n\n\"www.cerege.fr/spip.php?page=pageperso&amp;id_user=94\"\n</code></pre>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55834868, "answer_count": 1, "score": 0, "last_activity_date": 1556125445, "creation_date": 1556123320, "last_edit_date": 1556124066, "question_id": 55834696, "link": "https://stackoverflow.com/questions/55834696/regex-to-extract-urls-from-text-ruby", "title": "regex to extract URLs from text - Ruby", "body": "<p>I am trying to detect the <code>urls</code> from a text and replace them by wrapping in quotes like below:</p>\n\n<pre><code>original text: Hey, it is a url here www.example.com\nrequired text: Hey, it is a url here \"www.example.com\"\n</code></pre>\n\n<p><code>original text</code> show my input value and <code>required text</code> represents the required output. I searched a lot on web but could not find any possible solution. I already have tried <code>URL.extract</code> feature but that doesn't seem to detect <code>URLs</code> without <code>http</code> or <code>https</code>. Below are the examples of some of urls I want to deal with. Kindly let me know if you know the solution.</p>\n\n<blockquote>\n  <p>ANQUETIL-DUPERRON Abraham-Hyacinthe, KIEFFER Jean-Luc, www.hominides.net/html/actualites/outils-preuve-presence-hominides-asie-0422.php,Les Belles lettres, 2001.</p>\n  \n  <p><a href=\"https://www.ancient-code.com/indian-archeologists-stumbleacross-ruins-great-forgotten-civilization-mizoram/\" rel=\"nofollow noreferrer\">https://www.ancient-code.com/indian-archeologists-stumbleacross-ruins-great-forgotten-civilization-mizoram/</a></p>\n  \n  <p>www.jstor.org/stable/24084454</p>\n  \n  <p>www.biorespire.com/2016/03/22/une-nouvelle-villeantique-d%C3%A9couverte-en-inde/</p>\n  \n  <p>insu.cnrs.fr/terre-solide/terre-et-vie/de-nouvellesdatations-repoussent-l-age-de-l-apparition-d-outils-surle-so </p>\n  \n  <p>www.cerege.fr/spip.php?page=pageperso&amp;id_user=94</p>\n</blockquote>\n"}, {"tags": ["ruby", "postgresql", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1556126351, "creation_date": 1556126351, "answer_id": 55835423, "question_id": 55834421, "link": "https://stackoverflow.com/questions/55834421/i-tried-to-use-dbi-gem-to-connect-my-postgresql-server/55835423#55835423", "title": "I tried to use DBI gem to connect my PostgreSQL server", "body": "<p>Don't use <a href=\"https://github.com/erikh/ruby-dbi\" rel=\"nofollow noreferrer\">unmaintained gem dbi</a>, you can see the readme says no longer maintained. Instead use the <a href=\"https://github.com/ged/ruby-pg\" rel=\"nofollow noreferrer\">ruby pg gem</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10195395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6451622814690894762a092ad450a72a?s=128&d=identicon&r=PG&f=1", "display_name": "VicXu", "link": "https://stackoverflow.com/users/10195395/vicxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556126351, "creation_date": 1556122331, "question_id": 55834421, "link": "https://stackoverflow.com/questions/55834421/i-tried-to-use-dbi-gem-to-connect-my-postgresql-server", "title": "I tried to use DBI gem to connect my PostgreSQL server", "body": "<p>I tried to use DBI gem to connect my PostgreSQL server.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>DBI.connect('DBI:Pg:DBNAME:IP', 'ROLE', 'PWD')\n</code></pre>\n\n<p>Here is an error message I got:</p>\n\n<p><b>NameError: uninitialized constant DBI::DBD::Pg::Database::PGError</p>\n\n<p>Did you mean?  TypeError\n              DBI::Error</b></p>\n\n<p>I have no problem when I use dbi to connect Mysql server.</p>\n\n<pre><code>dbn = DBI.connect('DBI:Mysql:DBNAME:IP', 'USERNAME', 'PWD')\n</code></pre>\n\n<p>I also update my all gems:\npg, dbi and dbd-pg.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1556126880, "post_id": 55833405, "comment_id": 98335504, "body": "<code>chain</code> is cool but <code>a + b</code> is the most straightforward and transparent solution."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556124001, "post_id": 55833548, "comment_id": 98334182, "body": "<code>c = [a.flatten] + [b.flatten]</code> could be simplified to <code>c = a + b</code>. :-)"}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1556119326, "creation_date": 1556119326, "answer_id": 55833548, "question_id": 55833405, "link": "https://stackoverflow.com/questions/55833405/combining-arrays-of-arrays-in-ruby/55833548#55833548", "title": "Combining arrays of arrays in ruby", "body": "<p>One method would be:</p>\n\n<pre><code>c = [a.flatten] + [b.flatten]\n</code></pre>\n\n<p>although you could also:</p>\n\n<pre><code>c = [a.first] + [b.first]\n</code></pre>\n\n<p>I expect there are a few other too.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 3, "last_activity_date": 1556123924, "creation_date": 1556123924, "answer_id": 55834837, "question_id": 55833405, "link": "https://stackoverflow.com/questions/55833405/combining-arrays-of-arrays-in-ruby/55834837#55834837", "title": "Combining arrays of arrays in ruby", "body": "<p>Why not just concatenation <a href=\"https://ruby-doc.org/core-2.6.2/Array.html#method-i-2B\" rel=\"nofollow noreferrer\">Array#+</a>, <code>a + b</code>?</p>\n\n<pre><code>a = [[0, 0, 0]]\nb = [[1, 1, 1]]\n\n\nc = a + b\nc #=&gt; [[0, 0, 0], [1, 1, 1]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556124348, "post_id": 55834888, "comment_id": 98334336, "body": "What a cool method, particularly because it returns an enumerator! I love answers that tell us about new methods, this one having made its debut in v2.6."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1556124102, "creation_date": 1556124102, "answer_id": 55834888, "question_id": 55833405, "link": "https://stackoverflow.com/questions/55833405/combining-arrays-of-arrays-in-ruby/55834888#55834888", "title": "Combining arrays of arrays in ruby", "body": "<p><a href=\"https://ruby-doc.org/core-2.6.2/Enumerable.html#method-i-chain\" rel=\"nofollow noreferrer\">chain</a> is a recently added method on Enumerables</p>\n\n<pre><code>a = [[0, 0, 0]]\nb = [[1, 1, 1]]\np a.chain(b).to_a # =&gt; [[0, 0, 0], [1, 1, 1]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556132336, "post_id": 55835803, "comment_id": 98337941, "body": "The OP has indicated that a new array (<code>c</code>) is desired, rather than <code>a</code> being mutated."}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": false, "score": 1, "last_activity_date": 1556194276, "last_edit_date": 1556194276, "creation_date": 1556127918, "answer_id": 55835803, "question_id": 55833405, "link": "https://stackoverflow.com/questions/55833405/combining-arrays-of-arrays-in-ruby/55835803#55835803", "title": "Combining arrays of arrays in ruby", "body": "<p>You could also use <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-concat\" rel=\"nofollow noreferrer\">concat</a>:</p>\n\n<pre><code>a = [[0, 0, 0]]\nb = [[1, 1, 1]]\n\nc = a.concat(b)\nc #=&gt; [[0, 0, 0], [1, 1, 1]]\n</code></pre>\n\n<p>But please note it appends the elements of <code>b</code> to <code>a</code>, which might be less expensive than <code>a + b</code> (new array by concatenating <code>a</code> and <code>b</code>) but modifies the <code>a</code>.</p>\n\n<pre><code>a #=&gt; [[0, 0, 0], [1, 1, 1]]\nb #=&gt; [[1, 1, 1]]\nc #=&gt; [[0, 0, 0], [1, 1, 1]]\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 1461022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tN4Je.jpg?s=128&g=1", "display_name": "wheresmycookie", "link": "https://stackoverflow.com/users/1461022/wheresmycookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55834888, "answer_count": 4, "score": 0, "last_activity_date": 1556194276, "creation_date": 1556118861, "question_id": 55833405, "link": "https://stackoverflow.com/questions/55833405/combining-arrays-of-arrays-in-ruby", "title": "Combining arrays of arrays in ruby", "body": "<p>Beginner Ruby question here: What's the most idiomatic way to combine two arrays of arrays in Ruby?</p>\n\n<pre><code>a = [[0, 0, 0]]\nb = [[1, 1, 1]]\n</code></pre>\n\n<p>I'd like to find c such that</p>\n\n<pre><code>c = [[0, 0, 0], [1, 1, 1]]\n</code></pre>\n\n<p>I've been able to solve this with a loop, but can't seem to find a way that \"feels\" correct.</p>\n"}, {"tags": ["ruby", "xml"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1556127942, "post_id": 55833288, "comment_id": 98335998, "body": "The code example you have provided does not work. The response is <code>{&quot;response&quot;=&gt;{&quot;code&quot;=&gt;&quot;1&quot;, &quot;msg&quot;=&gt;&quot;INVALID KEY&quot;}}</code>. Your error response is also incomplete. Is that a truncated error message that you get from HTTParty? Does it come with a stack trace? Or is it a plaintext response from the remote API? What is the <b>exact</b> and <b>complete</b> response in your terminal when you make the request? Since you have not included a working code sample and you have not included a complete error response, it&#39;s unlikely that you will get any useful response here."}], "answers": [{"tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": true, "score": 0, "last_activity_date": 1556132083, "creation_date": 1556132083, "answer_id": 55836804, "question_id": 55833288, "link": "https://stackoverflow.com/questions/55833288/how-to-call-xml-request-in-ruby-using-httparty/55836804#55836804", "title": "how to call xml request in ruby using httparty?", "body": "<p>You wrote correct request to API, but looks like they just don't give you access to API, looks like your login credential not correct, but there no problem with your code!</p>\n\n<p>This response from API!</p>\n\n<pre><code>#&lt;HTTParty::Response:0x7ff11da769b0 parsed_response={\"response\"=&gt;{\"code\"=&gt;\"1\", \"msg\"=&gt;\"INVALID KEY\"}}, @response=#&lt;Net::HTTPUnauthorized 401 Unauthorized readbody=true&gt;, @headers={\"server\"=&gt;[\"nginx\"], \"content-type\"=&gt;[\"text/xml;charset=UTF-8\"], \"content-length\"=&gt;[\"85\"], \"content-security-policy-report-only\"=&gt;[\"block-all-mixed-content; report-uri https://track.99acres.com/csp_logging.php;\"], \"etag\"=&gt;[\"\\\"d41d8cd98f00b204e9800998ecf8427e\\\"\"], \"date\"=&gt;[\"Wed, 24 Apr 2019 18:46:46 GMT\"], \"connection\"=&gt;[\"close\"], \"set-cookie\"=&gt;[\"99_ab=20; expires=Thu, 23-Apr-2020 18:46:46 GMT; Max-Age=31536000; path=/\"]}&gt;\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 55836804, "answer_count": 1, "score": 1, "last_activity_date": 1556132083, "creation_date": 1556118526, "question_id": 55833288, "link": "https://stackoverflow.com/questions/55833288/how-to-call-xml-request-in-ruby-using-httparty", "title": "how to call xml request in ruby using httparty?", "body": "<p>while calling xml request api in ruby it is getting xml parser error as response.</p>\n\n<p><strong>API call</strong></p>\n\n<pre><code>require 'httparty'\n\n    response = HTTParty.post(\"http://www.99acres.com/99api/v1/getmy99Response/test/uid/\",\n    :headers =&gt; {\"Accept\" =&gt; \"application/xml\", \"Content-Type\" =&gt;\"application/xml\"},\n    :body =&gt; '&lt;?xml version=\"1.0\"?&gt;&lt;query&gt;\n    &lt;user_name&gt;test&lt;/user_name&gt;&lt;pswd&gt;testest&lt;/pswd&gt;&lt;start_date&gt;2019-03-25 12:03:00&lt;/start_date&gt;&lt;end_date&gt;2019-04-24 12:04:00&lt;/end_date&gt;&lt;/query&gt;'\n\n)\n</code></pre>\n\n<p><strong>Error Response</strong></p>\n\n<blockquote>\n  <p><br>\n  <Code>ERROR-0000</Code>XML Parsing\n  Error</p>\n</blockquote>\n\n<p>How to call XML request API calling in ruby?. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "geocoding", "rails-api", "httparty"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556120223, "post_id": 55833249, "comment_id": 98332137, "body": "What does the JSON returned from the API look like?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556120581, "post_id": 55833249, "comment_id": 98332346, "body": "@jvillian I&#39;ve added it to the question now."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 7069011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfPIn.jpg?s=128&g=1", "display_name": "ThorTL67", "link": "https://stackoverflow.com/users/7069011/thortl67"}, "edited": false, "score": 0, "creation_date": 1556121503, "post_id": 55833540, "comment_id": 98332869, "body": "Would <code>@search.map {|r| {lat: r[&#39;lat&#39;], lon: r[&#39;lon&#39;]} }.to_json</code> work?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 486, "user_id": 7069011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfPIn.jpg?s=128&g=1", "display_name": "ThorTL67", "link": "https://stackoverflow.com/users/7069011/thortl67"}, "edited": false, "score": 0, "creation_date": 1556124063, "post_id": 55833540, "comment_id": 98334209, "body": "@ThorTL67 That throws a type error <code>no implicit conversion of String into Integer </code>"}], "tags": [], "owner": {"reputation": 304, "user_id": 1046317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99260bd1182482ecdd7bc522965c0da3?s=128&d=identicon&r=PG", "display_name": "Gonzalo Moreno Caballero", "link": "https://stackoverflow.com/users/1046317/gonzalo-moreno-caballero"}, "is_accepted": false, "score": -1, "last_activity_date": 1556119299, "creation_date": 1556119299, "answer_id": 55833540, "question_id": 55833249, "link": "https://stackoverflow.com/questions/55833249/how-do-i-return-specific-json-keys-values-from-an-api-after-a-search-using-the/55833540#55833540", "title": "How do I return specific json keys/values from an API after a search, using the HTTParty gem?", "body": "<p>Try this:</p>\n\n<pre><code>@search.map {|r| {lat: r['lat'], lon: r['lon']} }\n</code></pre>\n\n<p>Will be an array of hashes</p>\n"}, {"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556126751, "post_id": 55835335, "comment_id": 98335442, "body": "thanks for the answer :) So there is no way of doing this in my class method? Somehow just fetching the <code>lat</code> and <code>lon</code> parameters only? It seems like there must be a simpler solution - maybe using something other than HTTParty that will return JSON rather than a Ruby object."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556127249, "post_id": 55835335, "comment_id": 98335693, "body": "All of that could absolutely take place in your class method. Whether or not you can simply fetch just the <code>lat</code> and <code>lon</code> parameters depends on what is supported by the API - about which I know nothing. If, however, you are receiving a JSON string that has more attributes than you want, then I don&#39;t see how you would get just the attributes you want without doing some parsing, manipulation, and dumping."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556128211, "post_id": 55835335, "comment_id": 98336142, "body": "I think the <a href=\"https://locationiq.com/docs\" rel=\"nofollow noreferrer\">API</a> supports fetching individual parameters, but not 100% sure. I&#39;m pretty new to working with APIs so it&#39;s a bit of a learning curve at the moment."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556128765, "post_id": 55835335, "comment_id": 98336371, "body": "I just took a quick look at the API docs. It does not appear to me that you can specify a subset of the attributes to return. BTW and out of curiosity, why do you want to display JSON in the view?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556129277, "post_id": 55835335, "comment_id": 98336582, "body": "I&#39;m doing a coding challenge and it stipulates that I should make an app that receives an address as a string and converts it to coordinates and that the endpoint should have a &quot;JSON-formatted response&quot;"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1556127409, "last_edit_date": 1556127409, "creation_date": 1556126028, "answer_id": 55835335, "question_id": 55833249, "link": "https://stackoverflow.com/questions/55833249/how-do-i-return-specific-json-keys-values-from-an-api-after-a-search-using-the/55835335#55835335", "title": "How do I return specific json keys/values from an API after a search, using the HTTParty gem?", "body": "<p>Supposing you have a JSON string that looks something like, as an example, this: </p>\n\n<pre><code>\"[{\\\"place_id\\\":\\\"100066\\\",\\\"lat\\\":\\\"51.5073219\\\",\\\"lon\\\":\\\"-0.1276474\\\",\\\"class\\\":\\\"place\\\",\\\"type\\\":\\\"city\\\"}]\"\n</code></pre>\n\n<p>Then you should be able to do (roughly speaking): </p>\n\n<pre><code>JSON.dump(\n  JSON.\n    parse(\n      \"[{\\\"place_id\\\":\\\"100066\\\",\\\"lat\\\":\\\"51.5073219\\\",\\\"lon\\\":\\\"-0.1276474\\\",\\\"class\\\":\\\"place\\\",\\\"type\\\":\\\"city\\\"}]\"\n    ).\n    first.\n    slice('lat', 'lon')\n)\n</code></pre>\n\n<p>This should give you: </p>\n\n<pre><code> =&gt; \"{\\\"lat\\\":\\\"51.5073219\\\",\\\"lon\\\":\\\"-0.1276474\\\"}\" \n</code></pre>\n\n<p>Now, I recall that HTTParty may already convert the API reponse to a Ruby object (array or hash), so that <code>JSON.dump</code> may not be needed. And, there might be other fiddles you would like to do (e.g., you could use <code>with_indifferent_access</code> if you prefer working with symbols as keys instead of strings).</p>\n\n<p>Just to be clear, if you want this to be part of your class method, then you might do something like: </p>\n\n<pre><code>class LocationiqApi\n  include HTTParty\n\n  BASE_URI = \"https://eu1.locationiq.com/v1/search.php\"\n\n  attr_accessor :city\n\n  def initialize(api_key, format = \"json\")\n    @options = { key: api_key, format: format }\n  end\n\n  def find_coordinates(city)\n    JSON.dump(\n      JSON.\n        parse(\n          self.class.get(BASE_URI, query: @options.merge({ q: city }))\n        ).\n        first.\n        slice('lat', 'lon')\n    )\n  end\n\n  def handle_error\n    if find_coordinates.code.to_i = 200\n      find_coordinates.parsed_response\n    else\n      raise \"Couldn't connect to LocationIQ Api\"\n    end\n  end\nend\n</code></pre>\n\n<p>If <code>self.class.get(BASE_URI, query: @options.merge({ q: city }))</code> returns anything other than a valid <code>JSON</code> string that represents an <code>array</code> of <code>hashes</code>, then this will probably fail. </p>\n\n<p>I suppose the key bits are: </p>\n\n<ul>\n<li>You need to convert (parse) your JSON into something Ruby can work with;</li>\n<li>Once parsed, you need to grab a <code>hash</code> from your <code>array</code> of hashes (assuming an array of hashes is always the result of the parsing);</li>\n<li>You can use <code>slice</code> to use only those key-value pairs you want;</li>\n<li>Then, since you stipulated you want to return JSON, you need to turn your Ruby object back into JSON using, for example <code>JSON.dump</code>. You could also use, I suppose, <code>to_json</code>. Whichever floats your boat.</li>\n</ul>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1556127409, "creation_date": 1556118387, "last_edit_date": 1556120547, "question_id": 55833249, "link": "https://stackoverflow.com/questions/55833249/how-do-i-return-specific-json-keys-values-from-an-api-after-a-search-using-the", "title": "How do I return specific json keys/values from an API after a search, using the HTTParty gem?", "body": "<p>At the moment I have a simple app that consumes an external API and allows a user to query and return json. It returns all keys/values but I would only like it to return <code>lat</code> and <code>lon</code> in json, or at least I would only like to show these two in my view. Here is my code:</p>\n\n<p>locationiq_api.rb</p>\n\n<pre><code>class LocationiqApi\n  include HTTParty\n\n  BASE_URI = \"https://eu1.locationiq.com/v1/search.php\"\n\n  attr_accessor :city\n\n  def initialize(api_key, format = \"json\")\n    @options = { key: api_key, format: format }\n  end\n\n  def find_coordinates(city)\n    self.class.get(BASE_URI, query: @options.merge({ q: city }))\n  end\n\n  def handle_error\n    if find_coordinates.code.to_i = 200\n      find_coordinates.parsed_response\n    else\n      raise \"Couldn't connect to LocationIQ Api\"\n    end\n  end\nend \n</code></pre>\n\n<p>locations_controller.rb</p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n\n  def index\n    @search = LocationiqApi.new(\"pk.29313e52bff0240b650bb0573332121e\").find_coordinates(params[:q])\n  end\nend\n</code></pre>\n\n<p>locations.html.erb</p>\n\n<pre><code>&lt;main&gt;\n  &lt;h1&gt;Location Search&lt;/h1&gt;\n  &lt;!-- Button to search find coordinates --&gt;\n  &lt;%= form_tag(locations_path, method: :get) do %&gt;\n    &lt;%= label_tag(:q, \"Search: \") %&gt;\n    &lt;%= text_field_tag(:q) %&gt;\n    &lt;%= submit_tag(\"Find coordinates\") %&gt;\n  &lt;% end %&gt;&lt;br&gt;\n\n  &lt;h2&gt;Search results:&lt;/h2&gt;\n\n&lt;/main&gt;\n\n&lt;%= @search %&gt;\n</code></pre>\n\n<p>Returned json:</p>\n\n<pre><code>[{\"place_id\":\"100066\",\"licence\":\"https:\\/\\/locationiq.com\\/attribution\",\"osm_type\":\"node\",\"osm_id\":\"107775\",\"boundingbox\":[\"51.3473219\",\"51.6673219\",\"-0.2876474\",\"0.0323526\"],\"lat\":\"51.5073219\",\"lon\":\"-0.1276474\",\"display_name\":\"London, Greater London, England, SW1A 2DX, United Kingdom\",\"class\":\"place\",\"type\":\"city\",\"importance\":0.9654895765402,\"icon\":\"https:\\/\\/locationiq.org\\/static\\/images\\/mapicons\\/poi_place_city.p.20.png\"}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556117236, "post_id": 55832613, "comment_id": 98330366, "body": "Where do <code>post_id</code> and <code>member_id</code> come from? Is the current user the member? Where will that form live, on a show post page?"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1556121049, "last_edit_date": 1556121049, "creation_date": 1556116891, "answer_id": 55832774, "question_id": 55832613, "link": "https://stackoverflow.com/questions/55832613/how-proceed-to-create-one-entry-comment-in-db-with-belong-to-post-and-membre/55832774#55832774", "title": "How proceed to create one entry comment in db with belong_to post and membre", "body": "<p>With the code you've provided, try (and I'll assume membre_id is member_id):</p>\n\n<pre><code>@comment = Comment.new(comment_params)\n\n@comment.member_id = @member_id\n@comment.post_id = @post_id\n\nrespond_to do |format|\n  if @comment.save\n  etc...\nend\n</code></pre>\n\n<p>There are far nicer ways to do it though. If you have an @member and @post variable you can do:</p>\n\n<pre><code>@comment.member = @member\n@comment.post = @post\n</code></pre>\n\n<p>But the nicest is to include the paramaters in the first place. Where the user is creating a comment, add in two hidden fields into the form, member_id and post_id. This way you won't need to manually assign the ID's yourself.</p>\n"}], "owner": {"reputation": 31, "user_id": 7655549, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154990387833633/picture?type=large", "display_name": "Christophe Cuypers", "link": "https://stackoverflow.com/users/7655549/christophe-cuypers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55832774, "answer_count": 1, "score": 0, "last_activity_date": 1556121049, "creation_date": 1556116457, "last_edit_date": 1556117544, "question_id": 55832613, "link": "https://stackoverflow.com/questions/55832613/how-proceed-to-create-one-entry-comment-in-db-with-belong-to-post-and-membre", "title": "How proceed to create one entry comment in db with belong_to post and membre", "body": "<p>I have one model :comment with two belong_to one :post and others :membre</p>\n\n<p>i want to do def create</p>\n\n<p>with twoo var <code>@post_id</code> and <code>@membre_id</code></p>\n\n<p>how proceed for doing on one time with the twoo belong_to ?</p>\n\n<p>how place var ?</p>\n\n<p>Thanks for your help</p>\n\n<pre><code>def create\n  @comment = Comment.new(comment_params)\n\n  respond_to do |format|\n    if @comment.save\n      format.html { redirect_to @comment, notice: 'Comment was successfully created.' }\n      format.json { render :show, status: :created, location: @comment }\n    else\n      format.html { render :new }\n      format.json { render json: @comment.errors, status: :unprocessable_entity }\n    end\n  end\nend\n\n\ndef comment_params\n  params.fetch(:comment, {})\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sockets", "mechanize-ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1556131148, "post_id": 55832543, "comment_id": 98337428, "body": "Maybe something like <code>agent.instance_variable_get(&#39;@agent&#39;).instance_variable_get(&zwnj;&#8203;&#39;@http&#39;).instance_va&zwnj;&#8203;riable_get(&#39;@pool&#39;).&zwnj;&#8203;instance_variable_ge&zwnj;&#8203;t(&#39;@available&#39;).inst&zwnj;&#8203;ance_variable_get(&#39;@&zwnj;&#8203;ques&#39;).values.first.&zwnj;&#8203;first.instance_varia&zwnj;&#8203;ble_get(&#39;@http&#39;).loc&zwnj;&#8203;al_port</code>?"}, {"owner": {"reputation": 543, "user_id": 2553863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/97619dadec2be401e5601cdb881b09d5?s=128&d=identicon&r=PG", "display_name": "user2553863", "link": "https://stackoverflow.com/users/2553863/user2553863"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1556192618, "post_id": 55832543, "comment_id": 98358815, "body": "Thanks, @anothermh, but it returned nil. Did it work for you?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1556209707, "post_id": 55832543, "comment_id": 98369253, "body": "I meant that you should use that as a jumping off point for digging into mechanize\u2019s guts."}, {"owner": {"reputation": 543, "user_id": 2553863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/97619dadec2be401e5601cdb881b09d5?s=128&d=identicon&r=PG", "display_name": "user2553863", "link": "https://stackoverflow.com/users/2553863/user2553863"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1556234948, "post_id": 55832543, "comment_id": 98378881, "body": "Yes, I think I did! Using your hint, I wrote a recursive method that explored all instance variables and methods looking for either a port value or an addr or address method. Didn&#39;t find what I need. I think I&#39;ll try to redefine some of the socksify methods, that use TCPSocket, and try to get it from there... I&#39;m not sure how exactly, but I&#39;ll try that. Thank you very much."}], "owner": {"reputation": 543, "user_id": 2553863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/97619dadec2be401e5601cdb881b09d5?s=128&d=identicon&r=PG", "display_name": "user2553863", "link": "https://stackoverflow.com/users/2553863/user2553863"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556116226, "creation_date": 1556116226, "question_id": 55832543, "link": "https://stackoverflow.com/questions/55832543/get-connection-details-in-ruby-mechanize", "title": "Get connection details in ruby mechanize", "body": "<p>I'm having problems with a web scraper in Ruby. I'm using Mechanize gem.</p>\n\n<p>Is there any way to get the local port used in the agent connection? It would be very useful for my problem.</p>\n\n<p>For instance, in TCPSockets, I can call:</p>\n\n<pre><code>2.3.3 :029 &gt; t = TCPSocket.new\n =&gt; #&lt;TCPSocket:fd 14&gt; \n2.3.3 :030 &gt; t.addr\n =&gt; [\"AF_INET\", 45164, \"127.0.0.1\", \"127.0.0.1\"] \n</code></pre>\n\n<p>Here, 45164 is the port number I need.</p>\n\n<p>I'd like to do something like</p>\n\n<pre><code> agent = Mechanize.new\n page = agent.get \"http://www.google.com/\"\n\n agent.addr\n</code></pre>\n\n<p>and get the local port number.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1130, "user_id": 9584778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dp3b0.jpg?s=128&g=1", "display_name": "sandhya sasane", "link": "https://stackoverflow.com/users/9584778/sandhya-sasane"}, "edited": false, "score": 0, "creation_date": 1556115148, "post_id": 55832110, "comment_id": 98328892, "body": "As you are new member, i am just giving a hint ( procedure ) as the answer but you have to implement it on your own..."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 4, "creation_date": 1556115272, "post_id": 55832110, "comment_id": 98328984, "body": "What have you tried, and where are you getting stuck?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1556175632, "post_id": 55832110, "comment_id": 98349482, "body": "<code>1.upto(5) { |i| puts (64 + i).chr * i }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 4, "creation_date": 1556117344, "post_id": 55832235, "comment_id": 98330433, "body": "This question was specifically tagged ruby, so that&#39;s why you&#39;re probably getting downvoted"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1556136830, "post_id": 55832235, "comment_id": 98339788, "body": "This is a good answer using pseudo code, encouraging the op to find their own solution."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1556145522, "post_id": 55832235, "comment_id": 98342725, "body": "@SagarPandya I disagree.  What was presented here is a procedural approach when the target language is object-oriented and has strong functional leanings.  This is not idiomatic for a question that specifies Ruby, as you can see by contrasting this with ray&#39;s answer."}], "tags": [], "owner": {"reputation": 1130, "user_id": 9584778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dp3b0.jpg?s=128&g=1", "display_name": "sandhya sasane", "link": "https://stackoverflow.com/users/9584778/sandhya-sasane"}, "is_accepted": true, "score": -4, "last_activity_date": 1556115328, "creation_date": 1556115328, "answer_id": 55832235, "question_id": 55832110, "link": "https://stackoverflow.com/questions/55832110/how-can-i-make-the-following-pattern-in-ruby/55832235#55832235", "title": "How can i make the following pattern in Ruby?", "body": "<p>Its not for <code>RUBY</code> nor for any other language, its just a flow : </p>\n\n<p>Print alphabets like :</p>\n\n<pre><code>for (ch = 'a'; ch &lt;= 'z'; ch++)\n{\n    System.out.println(ch);\n}\n</code></pre>\n\n<ol>\n<li>Now initialise counter <code>i = 0</code></li>\n<li>Increment i++ in every loop.</li>\n<li>Print the current outer loops current <code>char</code>, i times</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1556116304, "post_id": 55832278, "comment_id": 98329719, "body": "You had gone too deep, check my answer and space between two characters will be much better."}, {"owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1556117298, "post_id": 55832278, "comment_id": 98330409, "body": "@ray - yeah, yours is cleaner, since the OP looked like a beginner, I thought simple loops would be easy to understand"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1556125775, "post_id": 55832278, "comment_id": 98335006, "body": "Better to get beginners used to Ruby idioms such as iterators and closures as quickly as possible, particularly since they are often cleaner once a person moves past the &quot;but it&#39;s different!&quot; phase."}], "tags": [], "owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "is_accepted": false, "score": 0, "last_activity_date": 1556115767, "last_edit_date": 1556115767, "creation_date": 1556115457, "answer_id": 55832278, "question_id": 55832110, "link": "https://stackoverflow.com/questions/55832110/how-can-i-make-the-following-pattern-in-ruby/55832278#55832278", "title": "How can i make the following pattern in Ruby?", "body": "<p>You can do something like - </p>\n\n<pre><code>(1..5).each do |index|\n  (1..index).each do\n    print (64+index).chr\n  end\n  puts \"\\n\"\nend\n</code></pre>\n\n<p>What it does - </p>\n\n<ol>\n<li>(1..5) - Run a loop with index starting from 1 up until 5.</li>\n<li>(1..index) - run another loop so for each of the above loop, it runs from 1 up till index, which will be controlled from the (1..5).each loop.</li>\n<li>(65).chr -> A, (66).chr -> B and so on.. </li>\n<li>puts \"\\n\" to add a new line </li>\n</ol>\n\n<p>That will give you the output - </p>\n\n<pre><code>A\n\nBB\n\nCCC\n\nDDDD\n\nEEEEE\n</code></pre>\n\n<p>If you want to add anything additional to whatever you are printing you can do something like - </p>\n\n<p><code>print \"#{(64+index).chr} - random text\"</code> </p>\n\n<p><code>#{}</code> construct will allow you to write ruby interpret-able code within a string block`</p>\n\n<p>Note: <code>#{}</code> only works when you use double quotes :) </p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1556116768, "post_id": 55832526, "comment_id": 98330040, "body": "You don&#39;t need an array, just use a range <code>(&#39;A&#39;..&#39;Z&#39;)</code>. Also use <code>each.with_index(1)</code> to avoid having to do <code>i + 1</code> on each iteration."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1556117002, "post_id": 55832526, "comment_id": 98330203, "body": "@SagarPandya Thanks edited, That helped, I just did not noticed it in hurry"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1556117521, "post_id": 55832526, "comment_id": 98330561, "body": "I think the interpolation of <code>n</code> isn&#39;t needed, and if you called your variables <code>letter, index</code> that might add a little clarity. Good solution though!"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1556117660, "post_id": 55832526, "comment_id": 98330641, "body": "@JayDorsey The interpolation is a clean way of getting the spaces, but I agree that renaming the variables would add clarity."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1556119018, "post_id": 55832526, "comment_id": 98331421, "body": "@pjs You&#39;re right, I didn&#39;t account for the spaces between lines (I didn&#39;t even really &quot;see&quot; them when i looked). I just assumed it was copy/paste noise rather than an integral part of the output. But, per the OP, it does have spaces so the interpolation would be an easy way to do that"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1556120617, "post_id": 55832526, "comment_id": 98332367, "body": "@JayDorsey Yup I always keep clarity (rails does suggest although) while working on project, here missed, edited. Interpolation was added only for spaces."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1556540710, "post_id": 55832526, "comment_id": 98462216, "body": "@pjs sorry for being late, you can go and edit my answer for addition."}, {"owner": {"reputation": 71, "user_id": 11015909, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4OC1cxyDQBE/AAAAAAAAAAI/AAAAAAAAACo/O_cqaM-h5NI/photo.jpg?sz=128", "display_name": "Ayush", "link": "https://stackoverflow.com/users/11015909/ayush"}, "edited": false, "score": 0, "creation_date": 1556817467, "post_id": 55832526, "comment_id": 98566282, "body": "Thank you all of you it&#39;s work, and sorry for my late response."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 6, "last_activity_date": 1556565650, "last_edit_date": 1556565650, "creation_date": 1556116156, "answer_id": 55832526, "question_id": 55832110, "link": "https://stackoverflow.com/questions/55832110/how-can-i-make-the-following-pattern-in-ruby/55832526#55832526", "title": "How can i make the following pattern in Ruby?", "body": "<p>You can do the following to work it out:</p>\n\n<pre><code>('A'..'F').each.with_index(1) { |letter,index| puts \"#{letter} \"*index }\n</code></pre>\n\n<p>Alternatives include making the ranges variable: </p>\n\n<pre><code>lower_limit = 'A'   # could be read in rather than wired\nupper_limit = 'F'   # ditto\n(lower_limit..upper_limit).each.with_index(1) { |letter,index| puts \"#{letter} \"*index }\n</code></pre>\n\n<p>or using an array with <code>join</code> to get the spaces without introducing a trailing blank:</p>\n\n<pre><code>(lower_limit..upper_limit).each.with_index(1) { |letter,index| puts Array.new(index) { letter }.join(' ') }\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11015909, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4OC1cxyDQBE/AAAAAAAAAAI/AAAAAAAAACo/O_cqaM-h5NI/photo.jpg?sz=128", "display_name": "Ayush", "link": "https://stackoverflow.com/users/11015909/ayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "closed_date": 1556116217, "accepted_answer_id": 55832235, "answer_count": 3, "score": -1, "last_activity_date": 1596741300, "creation_date": 1556114977, "last_edit_date": 1596741300, "question_id": 55832110, "link": "https://stackoverflow.com/questions/55832110/how-can-i-make-the-following-pattern-in-ruby", "closed_reason": "Needs details or clarity", "title": "How can i make the following pattern in Ruby?", "body": "<p><code>A</code></p>\n\n<p><code>B B</code></p>\n\n<p><code>C C C</code></p>\n\n<p><code>D D D D</code></p>\n\n<p><code>E E E E E</code></p>\n\n<p>I don't know, how to print alpahbets</p>\n"}, {"tags": ["python", "ruby", "encode"], "answers": [{"tags": [], "owner": {"reputation": 2282, "user_id": 1073696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2184590d81d2280d2c9802b05fe83?s=128&d=identicon&r=PG", "display_name": "brunns", "link": "https://stackoverflow.com/users/1073696/brunns"}, "is_accepted": false, "score": 0, "last_activity_date": 1556112557, "creation_date": 1556112557, "answer_id": 55831250, "question_id": 55831110, "link": "https://stackoverflow.com/questions/55831110/what-is-the-equivalent-of-pythons-encode-in-ruby/55831250#55831250", "title": "What is the equivalent of Python&#39;s encode() in Ruby", "body": "<p>Python's <a href=\"https://docs.python.org/3/library/stdtypes.html#str.encode\" rel=\"nofollow noreferrer\"><code>str.encode()</code></a> defaults to utf-8, so go with that.</p>\n"}, {"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1556120444, "post_id": 55831288, "comment_id": 98332281, "body": "<a href=\"https://ruby-doc.org/core/String.html#method-i-encode\" rel=\"nofollow noreferrer\"><code>String#encode</code></a> doesn&#39;t default to UTF-8: <i>The last form returns a copy of <code>str</code> transcoded to <code>Encoding.default_internal</code>.</i>"}], "tags": [], "owner": {"reputation": 2514, "user_id": 9783433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vRAjK.png?s=128&g=1", "display_name": "mischva11", "link": "https://stackoverflow.com/users/9783433/mischva11"}, "is_accepted": true, "score": 1, "last_activity_date": 1556113599, "last_edit_date": 1556113599, "creation_date": 1556112638, "answer_id": 55831288, "question_id": 55831110, "link": "https://stackoverflow.com/questions/55831110/what-is-the-equivalent-of-pythons-encode-in-ruby/55831288#55831288", "title": "What is the equivalent of Python&#39;s encode() in Ruby", "body": "<p>Ruby: </p>\n\n<pre><code>   string = \"some string\".encode\n   string.encoding\n</code></pre>\n\n<blockquote>\n  <p>Encoding:UTF-8</p>\n</blockquote>\n\n<p>So Ruby's <a href=\"https://ruby-doc.org/core-2.2.0/Encoding.html\" rel=\"nofollow noreferrer\">default</a> is UTF-8</p>\n\n<p>Pythons <a href=\"https://www.programiz.com/python-programming/methods/string/encode\" rel=\"nofollow noreferrer\">default</a> also encodes in UTF-8</p>\n\n<p>So no parameters to add, both defaults are the same: UTF-8</p>\n\n<hr>\n\n<p><em>For completeness</em>:</p>\n\n<p>If someone want to change the default <code>UTF-8</code> you can do it in python (see <a href=\"https://www.programiz.com/python-programming/methods/string/encode\" rel=\"nofollow noreferrer\">documentary</a> and <a href=\"https://docs.python.org/3/library/codecs.html#standard-encodings\" rel=\"nofollow noreferrer\">supported encodings</a>) by:</p>\n\n<pre><code>string.encode(encoding='UTF-8')\n</code></pre>\n\n<p>The same is in <a href=\"https://ruby-doc.org/core-2.2.0/Encoding.html\" rel=\"nofollow noreferrer\">Ruby</a>:</p>\n\n<p><code>string.encode(\"UTF-8\")</code></p>\n\n<p>Supported Ruby <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Encoding#Encoding_Support\" rel=\"nofollow noreferrer\">encodings</a></p>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55831288, "answer_count": 2, "score": 1, "last_activity_date": 1556113599, "creation_date": 1556112131, "question_id": 55831110, "link": "https://stackoverflow.com/questions/55831110/what-is-the-equivalent-of-pythons-encode-in-ruby", "title": "What is the equivalent of Python&#39;s encode() in Ruby", "body": "<p>I am transferring a Python script to Ruby.</p>\n\n<p>The python method 'encode()' is used often. Examples:</p>\n\n<pre><code>apikey.encode()\nencoded_payload = json.dumps(payload).encode()\n</code></pre>\n\n<p>It looks like the Ruby equivalent has a few required params that need to be added. UTF-8 or ISO-8859-1. Which one matches the standard python encode().</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "font-awesome", "haml"], "comments": [{"owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "edited": false, "score": 0, "creation_date": 1556119742, "post_id": 55831019, "comment_id": 98331881, "body": "f.submit raw(&quot;&lt;i class=&#39;fa fa-search&#39;&lt;/i&gt;&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": false, "score": 0, "last_activity_date": 1556112560, "creation_date": 1556112560, "answer_id": 55831252, "question_id": 55831019, "link": "https://stackoverflow.com/questions/55831019/how-to-add-a-font-awesome-icon-into-a-haml-form-submit-button/55831252#55831252", "title": "How to add a font awesome icon into a haml form submit button", "body": "<p>Remove <code>Search</code> from submit and add it inside the block.</p>\n"}, {"tags": [], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "is_accepted": true, "score": 2, "last_activity_date": 1556998615, "last_edit_date": 1556998615, "creation_date": 1556182363, "answer_id": 55845356, "question_id": 55831019, "link": "https://stackoverflow.com/questions/55831019/how-to-add-a-font-awesome-icon-into-a-haml-form-submit-button/55845356#55845356", "title": "How to add a font awesome icon into a haml form submit button", "body": "<p>You cannot combine passing block and text argument to f.submit. </p>\n\n<p>So you should do:</p>\n\n<pre><code>= f.submit raw(\"&lt;i class='fa fa-search'&lt;/i&gt; Search\"), :class =&gt; \"btn btn-success\"\n</code></pre>\n\n<p>or preferably:</p>\n\n<pre><code>= f.submit :class =&gt; \"btn btn-success\" do\n  %i.fa.fa-search Search\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 4186718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oa1Ej.jpg?s=128&g=1", "display_name": "teamyates", "link": "https://stackoverflow.com/users/4186718/teamyates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 55845356, "answer_count": 2, "score": 1, "last_activity_date": 1556998615, "creation_date": 1556111855, "question_id": 55831019, "link": "https://stackoverflow.com/questions/55831019/how-to-add-a-font-awesome-icon-into-a-haml-form-submit-button", "title": "How to add a font awesome icon into a haml form submit button", "body": "<p>I'm currently trying to add a search <code>font-awesome icon</code> into my forms submit button, here's what I've done so far:</p>\n\n<pre><code> = simple_form_for :search, url: search_products_path, method: :post, html: { class: \"mx-auto\"}  do |f|\n    = f.input :code\n    = f.submit 'Search', :class =&gt; \"btn btn-success\" do\n      %i.fa.fa-search\n</code></pre>\n\n<p>Currently no <code>font-awesome icon</code> appears, if I use:</p>\n\n<pre><code>%i.fa.fa-search\n= f.submit 'Search', :class =&gt; \"btn btn-success\"\n</code></pre>\n\n<p>Then the icon does appear, on the same line but obviously not inside the submit button. Currently I've not found a solution to do this with <code>haml</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1556116558, "post_id": 55831016, "comment_id": 98329890, "body": "Could you confirm your <code>category</code> variable (which would be much better renamed to <code>category_ids</code> or similar) definitely contains an array of IDs please?"}], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 7346165, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fa9d009fd92253e31a317ef493346311?s=128&d=identicon&r=PG&f=1", "display_name": "lufizi", "link": "https://stackoverflow.com/users/7346165/lufizi"}, "edited": false, "score": 0, "creation_date": 1556117514, "post_id": 55832790, "comment_id": 98330556, "body": "It gives the same error. ActiveRecord :: RecordInvalid: Validation failed: Categories is required"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 363, "user_id": 7346165, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fa9d009fd92253e31a317ef493346311?s=128&d=identicon&r=PG&f=1", "display_name": "lufizi", "link": "https://stackoverflow.com/users/7346165/lufizi"}, "edited": false, "score": 0, "creation_date": 1556119201, "post_id": 55832790, "comment_id": 98331537, "body": "@lufizi I&#39;ve updated my answer: I think it&#39;s the setup of your associations that&#39;s causing the issue. Try the update the bottom section and see if that gets things working."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 363, "user_id": 7346165, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fa9d009fd92253e31a317ef493346311?s=128&d=identicon&r=PG&f=1", "display_name": "lufizi", "link": "https://stackoverflow.com/users/7346165/lufizi"}, "edited": false, "score": 0, "creation_date": 1556122551, "post_id": 55832790, "comment_id": 98333447, "body": "Great, glad it helped out!"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1556119168, "last_edit_date": 1556119168, "creation_date": 1556116943, "answer_id": 55832790, "question_id": 55831016, "link": "https://stackoverflow.com/questions/55831016/how-to-seed-belongs-to-and-has-many-associantion-with-seeds-rb/55832790#55832790", "title": "How to seed belongs to and has many associantion with seeds.rb", "body": "<p>I think your problem lies in how you are attempting to create the products.</p>\n\n<p>Your current code will attempt to create three products, as you're passing an array of hashes - two of which have no category ID:</p>\n\n<pre><code>Product.create!([\n  {\n    name_product: Faker::Commerce.product_name # &lt;&lt; first product, no category\n  },\n  {\n    value_product: Faker::Commerce.price # &lt;&lt; second product, no category \n  },\n  {\n    category_id: category.sample # &lt;&lt; third product\n  }\n])\n</code></pre>\n\n<p>It's a little unclear from your question but try one the following inside your <code>100.times do</code> block instead:</p>\n\n<pre><code>Product.create!(\n    name_product: Faker::Commerce.product_name,\n    value_product: Faker::Commerce.price,\n    category_id: category.sample\n)\n</code></pre>\n\n<p>Or: </p>\n\n<pre><code>Product.create!([\n  {\n    name_product: Faker::Commerce.product_name,\n    category_id: category.sample\n  },\n  {\n    value_product: Faker::Commerce.price,\n    category_id: category.sample\n  },\n  {\n    category_id: category.sample\n  }\n])\n</code></pre>\n\n<p>The former will create a single record, if each instance has <code>name_product</code>, <code>value_product</code> and <code>category_id</code> columns; the latter three products, all of which have a <code>category_id</code>.</p>\n\n<p>Let me know how you get on and if that helps at all.</p>\n\n<hr>\n\n<p><strong><em>Edit</em></strong></p>\n\n<p>Looks like your association is setup incorrectly. Try:</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  belongs_to :category\nend\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 7346165, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fa9d009fd92253e31a317ef493346311?s=128&d=identicon&r=PG&f=1", "display_name": "lufizi", "link": "https://stackoverflow.com/users/7346165/lufizi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55832790, "answer_count": 1, "score": 0, "last_activity_date": 1556119168, "creation_date": 1556111850, "question_id": 55831016, "link": "https://stackoverflow.com/questions/55831016/how-to-seed-belongs-to-and-has-many-associantion-with-seeds-rb", "title": "How to seed belongs to and has many associantion with seeds.rb", "body": "<p>I have two models. One is categories and the other one is products. I already populated the categories table and now I need to populate the products one with the category id.\nI'm using faker for this population.</p>\n\n<p>The models and the seeds.rb file are like this</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n    belongs_to :categories\nend\n\nclass Category &lt; ApplicationRecord\n    has_many :products\nend\n</code></pre>\n\n<p>seeds.rb</p>\n\n<pre><code>category = Category.ids\n\n100.times do\n    Product.create!([{\n        name_product: Faker::Commerce.product_name\n    },\n    {\n        value_product: Faker::Commerce.price\n    },\n    {\n        category_id: category.sample\n    }\n    ])\nend\n</code></pre>\n\n<p>But I keep getting the error \"validation failed. Categories is necessary\" even passing the category id.\nIf I comment the association inside the product model it works but this isn't a solution.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "edited": false, "score": 0, "creation_date": 1556126659, "post_id": 55833436, "comment_id": 98335386, "body": "Yes, nice.  I can also refer to the spec&#39;s variaboles, so this is great"}], "tags": [], "owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1556127371, "last_edit_date": 1556127371, "creation_date": 1556118978, "answer_id": 55833436, "question_id": 55830876, "link": "https://stackoverflow.com/questions/55830876/rspec-how-to-add-more-info-to-the-failure-error-where-it-occurs/55833436#55833436", "title": "rspec - how to add more info to the Failure/Error where it occurs", "body": "<p>You can use a lambda in your test:</p>\n\n<pre><code>  expect(page).to have_text(\"Doesn't exist\"), lambda { \"This failed for all sorts of reasons, let me list them out here: #{detailed info}.\" }\n</code></pre>\n\n<p>Will give you output like:</p>\n\n<pre><code>    Failures:\n  1) Blah blah blah\n     Failure/Error: expect(page).to have_text(\"Doesn't exist\"), lambda { \"This failed for all sorts of reasons, let me list them out here: nil.\" }\n       This failed for all sorts of reasons, let me list them.\n     # ./spec/features/search_results_spec.rb:19:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>It can be a bit tricky if you have code like <code>expect(x).to eq y.count</code> as just tacking on the lambda gives 2 params given but 0..1 expected. to get around this use formats like</p>\n\n<pre><code>expect(x).to (eq y.count), lambda { \"message\" }\n</code></pre>\n"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 55833436, "answer_count": 1, "score": 2, "last_activity_date": 1556127371, "creation_date": 1556111457, "last_edit_date": 1556118033, "question_id": 55830876, "link": "https://stackoverflow.com/questions/55830876/rspec-how-to-add-more-info-to-the-failure-error-where-it-occurs", "title": "rspec - how to add more info to the Failure/Error where it occurs", "body": "<p>I want to output a bunch of information from the test if it fails.</p>\n\n<p>When i puts out the information however it appears <em>before</em> the <code>Failures:</code> section of the rspec output as opposed to where the specific spec failure info is (line number etc)</p>\n\n<p>Is there a way in rspec for the spec to show the info in the failure itself rather than separately?</p>\n\n<p>I thought mybe an around hook, but... </p>\n\n<blockquote>\n  <p>WARNING: around hooks do not share state with the example the way\n  before and after hooks do. This means that you cannot share instance\n  variables between around hooks and examples.```</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "edited": false, "score": 2, "creation_date": 1556107750, "post_id": 55829597, "comment_id": 98324054, "body": "the entire application will always have access, this is ruby.  But you can do it the other way around, defining a public module with your public API, which is itself included in a private implementation which you get through a getter / factory / whatever"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1556108015, "post_id": 55829597, "comment_id": 98324223, "body": "The public methods probably call the private methods. Moving the latter into a separate file will make your code harder to understand. A reader will have to skip between both files. I&#39;d just put the public methods on top and the private methods below the <code>private</code> keyword."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1556108049, "post_id": 55829597, "comment_id": 98324242, "body": "Ruby classes are open. Just <b>literally split</b> the implementation into several files."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556108152, "post_id": 55829597, "comment_id": 98324305, "body": "@Stefan I could not disagree more. Implementation details, buried into private methods, should not be of any interest for the reader. If you expect anybody to need to understand what\u2019s there in private methods, the implementation is flawed."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1556108313, "post_id": 55829597, "comment_id": 98324400, "body": "@AlekseiMatiushkin implementation details should not be of interest, regardless of whether it&#39;s a private or public method. But if I have to dig into the implementation for some reason, I usually want / need all the details."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556108488, "post_id": 55829597, "comment_id": 98324489, "body": "@Stefan than opening two files in the editor panes side by side would make your life even easier :)"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1556110769, "post_id": 55829597, "comment_id": 98325863, "body": "what are you trying to achive here? moving private methods somewhere sounds like a bad idea."}, {"owner": {"reputation": 195, "user_id": 3803735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GK6JX.jpg?s=128&g=1", "display_name": "Andrei Statescu", "link": "https://stackoverflow.com/users/3803735/andrei-statescu"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1556111362, "post_id": 55829597, "comment_id": 98326261, "body": "@phoet the main file is just getting to big, so I hoping of a way to make the code more readable"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 1, "creation_date": 1556116887, "post_id": 55829597, "comment_id": 98330123, "body": "put the methods where they are used! moving stuff to another file decreases readability"}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 1, "last_activity_date": 1556115610, "last_edit_date": 1556115610, "creation_date": 1556113933, "answer_id": 55831751, "question_id": 55829597, "link": "https://stackoverflow.com/questions/55829597/how-can-i-move-the-private-methods-of-a-big-class-out-of-a-single-file/55831751#55831751", "title": "How can I move the private methods of a big class out of a single file", "body": "<p>As suggested in the comments, you could reopen the class and just define private methods.</p>\n\n<p>Alternatively, you could define a module and include that in your class:</p>\n\n<pre><code>module FooPrivate\n  private\n\n  def greet\n    'hello'\n  end\nend\n\nclass Foo\n  include FooPrivate\n\n  def hello\n    greet\n  end\nend\n</code></pre>\n\n<p>The above in action:</p>\n\n<pre><code>irb&gt; Foo.new.greet\nNoMethodError (private method `greet' called for #&lt;Foo:0x00007f83ba04bd58&gt;)\nirb&gt; Foo.new.hello\n=&gt; \"hello\"\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 3803735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GK6JX.jpg?s=128&g=1", "display_name": "Andrei Statescu", "link": "https://stackoverflow.com/users/3803735/andrei-statescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 55831751, "answer_count": 1, "score": 0, "last_activity_date": 1556115610, "creation_date": 1556107290, "question_id": 55829597, "link": "https://stackoverflow.com/questions/55829597/how-can-i-move-the-private-methods-of-a-big-class-out-of-a-single-file", "title": "How can I move the private methods of a big class out of a single file", "body": "<p>I have a rather big class with much functionality, made out of:</p>\n\n<ul>\n<li>3 public methods</li>\n<li>20+ private methods</li>\n<li>zero state (no attributes) </li>\n</ul>\n\n<p>What is the best option to split my class into multiple files, while keeping the 3 public methods into the initial file, and not making the private implementations accesible to the entire application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556104811, "post_id": 55828652, "comment_id": 98322297, "body": "Don&#39;t forget to wrap your code in a transaction in order to make the changes atomic."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556105227, "post_id": 55828652, "comment_id": 98322560, "body": "<i>Sidenote:</i> calling unbanged <code>ActiveRecord::Base#save</code> without checking the outcome is a very dangerous practice."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556105752, "post_id": 55828652, "comment_id": 98322884, "body": "That <code>sold</code> field seems redundant. You could simply check if <code>quantity</code> is above zero instead."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556104684, "post_id": 55828699, "comment_id": 98322213, "body": "However, if more than one product is saled, only the first product quantity falls"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556104764, "post_id": 55828699, "comment_id": 98322269, "body": "which is the <code>first product</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556104956, "post_id": 55828699, "comment_id": 98322398, "body": "Although <code>find_by</code> fixes the error, it probably doesn&#39;t solve the OP&#39;s problem (decreasing the quantity of the ordered products)."}, {"owner": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105755, "post_id": 55828699, "comment_id": 98322888, "body": "@Ursus you are a gift of god to me"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556107592, "post_id": 55828699, "comment_id": 98323960, "body": "Thanks @MansurBerbero, way too nice :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1556105462, "last_edit_date": 1556105462, "creation_date": 1556104300, "answer_id": 55828699, "question_id": 55828652, "link": "https://stackoverflow.com/questions/55828652/how-to-fix-undefined-method-product-for-lineitemactiverecord-relation0x00/55828699#55828699", "title": "How To Fix undefined method `product&#39; for #&lt;LineItem::ActiveRecord_Relation:0x0000000017b22f70&gt;", "body": "<p>If you use <code>where</code>, you don't get a single <code>LineItem</code> object, but a <code>LineItem::ActiveRecord_Relation</code> object. If that condition is enough to get just one record then use <code>find_by</code>. If it's not you need to think more about the logic because you'd get more than one object.</p>\n\n<pre><code>@line_item = LineItem.find_by(:order_id =&gt; params[:zc_orderid])\n</code></pre>\n\n<p>If you want to decrease the quantity of all those line items I'd do something like</p>\n\n<pre><code>LineItem.transaction do\n  LineItem.where(:order_id =&gt; params[:zc_orderid]).each do |line_item|\n    line_item.product.quantity = line_item.product.quantity - 1\n    if line_item.product.quantity == 0\n      line_item.product.sold = true\n    end\n    line_item.product.save\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105822, "post_id": 55828722, "comment_id": 98322927, "body": "@MansurBerbero order id is unique right?.  then why do u use where?"}, {"owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105883, "post_id": 55828722, "comment_id": 98322964, "body": "@MansurBerbero one order belongs to an product. if it sold means u reduce a count in product right?"}, {"owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105926, "post_id": 55828722, "comment_id": 98322994, "body": "<code>@line_item = LineItem.find_by(order_id: params[:zc_orderid])         @line_item.product.quantity = @line_item.product.quantity - 1         if @line_item.product.quantity == 0           @line_item.product.sold = true         end         @line_item.product.save</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556106510, "post_id": 55828722, "comment_id": 98323343, "body": "@VeluDhanesh an order can have more than one line item. <code>find_by</code> only fetches the first one."}, {"owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "edited": false, "score": 0, "creation_date": 1556106809, "post_id": 55828722, "comment_id": 98323509, "body": "Then loop @lime_items and fetch product then reduce it count"}], "tags": [], "owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "is_accepted": false, "score": 0, "last_activity_date": 1556104394, "creation_date": 1556104394, "answer_id": 55828722, "question_id": 55828652, "link": "https://stackoverflow.com/questions/55828652/how-to-fix-undefined-method-product-for-lineitemactiverecord-relation0x00/55828722#55828722", "title": "How To Fix undefined method `product&#39; for #&lt;LineItem::ActiveRecord_Relation:0x0000000017b22f70&gt;", "body": "<p><code>LineItem.where(:order_id =&gt; params[:zc_orderid])</code> its return as array format. </p>\n\n<p>So you can fetch by following\n<code>LineItem.find_by(order_id: params[:zc_orderid])</code>. its return single active record</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105654, "post_id": 55828859, "comment_id": 98322817, "body": "does not decrease the quantity of any product"}, {"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556105773, "post_id": 55828859, "comment_id": 98322895, "body": "@Stefan, sorry, fixed :)"}, {"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "reply_to_user": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "edited": false, "score": 0, "creation_date": 1556105857, "post_id": 55828859, "comment_id": 98322948, "body": "@MansurBerbero I missed <code>each</code> , sorry. Now it&#39;s fixed"}], "tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": true, "score": 0, "last_activity_date": 1556105761, "last_edit_date": 1556105761, "creation_date": 1556104868, "answer_id": 55828859, "question_id": 55828652, "link": "https://stackoverflow.com/questions/55828652/how-to-fix-undefined-method-product-for-lineitemactiverecord-relation0x00/55828859#55828859", "title": "How To Fix undefined method `product&#39; for #&lt;LineItem::ActiveRecord_Relation:0x0000000017b22f70&gt;", "body": "<p>Since <code>Order</code> has many <code>LineItem</code> you should expect more than one line, so should rewrite your code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>LineItem.where(:order_id =&gt; params[:zc_orderid]).each do |line_item|\n  product = line_item.product\n  product.quantity -= 1\n  if product.quantity == 0\n    product.sold = true\n  end\n  product.save\nend\n</code></pre>\n\n<p>Btw, consider add a <a href=\"https://api.rubyonrails.org/v5.2.3/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-transaction\" rel=\"nofollow noreferrer\">Transaction</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10148284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66698c19680ed7adfb6823986f4b9b6?s=128&d=identicon&r=PG", "display_name": "Mansur Berbero", "link": "https://stackoverflow.com/users/10148284/mansur-berbero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 55828859, "answer_count": 3, "score": 1, "last_activity_date": 1556105761, "creation_date": 1556104170, "last_edit_date": 1556104379, "question_id": 55828652, "link": "https://stackoverflow.com/questions/55828652/how-to-fix-undefined-method-product-for-lineitemactiverecord-relation0x00", "title": "How To Fix undefined method `product&#39; for #&lt;LineItem::ActiveRecord_Relation:0x0000000017b22f70&gt;", "body": "<p>I'm try product quantity - 1 but \u0131 get this error</p>\n\n<p>line_item.rb</p>\n\n<pre><code>belongs_to :order\nbelongs_to :product\n</code></pre>\n\n<p>payment.rb</p>\n\n<pre><code>has_many :orders\n</code></pre>\n\n<p>undefined method `product' for # LineItem::ActiveRecord_Relation:0x0000000017b22f70> </p>\n\n<pre><code>@line_item = LineItem.where(:order_id =&gt; params[:zc_orderid])\n        @line_item.product.quantity = @line_item.product.quantity - 1\n        if @line_item.product.quantity == 0\n          @line_item.product.sold = true\n        end\n        @line_item.product.save\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1556101028, "post_id": 55827580, "comment_id": 98320045, "body": "Well, you have to pass / set <code>@hash</code> somewhere. How would you use / call the method outside of RSpec?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556101575, "post_id": 55827580, "comment_id": 98320364, "body": "BTW, <a href=\"http://ruby-doc.org/core-2.6.3/Hash.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> already returns a hash. Wrapping the result in <code>Hash[...]</code> is superfluous."}, {"owner": {"reputation": 408, "user_id": 7737587, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/uJmPn.jpg?s=128&g=1", "display_name": "Ninja", "link": "https://stackoverflow.com/users/7737587/ninja"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556101651, "post_id": 55827580, "comment_id": 98320410, "body": "Within service <code>@hash</code> will have some values assigned from another method. How can I pass/set <code>@hash</code> within my test?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1556101726, "post_id": 55827580, "comment_id": 98320460, "body": "@Ninja: call that other method in your test to setup your <code>@hash</code>. You can set it directly with <code>instance_variable_set</code>, but then you risk decoupling your test from reality."}, {"owner": {"reputation": 408, "user_id": 7737587, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/uJmPn.jpg?s=128&g=1", "display_name": "Ninja", "link": "https://stackoverflow.com/users/7737587/ninja"}, "edited": false, "score": 0, "creation_date": 1556101869, "post_id": 55827580, "comment_id": 98320545, "body": "Yeah that will work but i want to test specifically this method by passing random <code>@hash</code> values. Input is unpredictable here."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556102195, "post_id": 55827580, "comment_id": 98320728, "body": "@Ninja this could be an indication that <code>Service</code> is missing a method that allows you to set <code>@hash</code> from the outside. I&#39;d say pass the hash to <code>Service.new</code> so you don&#39;t have an undefined state in the first place."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1556110641, "post_id": 55827580, "comment_id": 98325790, "body": "testing should lead to good design. if it&#39;s hard to test something, the design is usually bad. make sure to change your code to be testable with ease."}], "answers": [{"tags": [], "owner": {"reputation": 286, "user_id": 9787936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6al57BxxfcE/AAAAAAAAAAI/AAAAAAAADac/EfHKQpp25-0/photo.jpg?sz=128", "display_name": "Andrew Rozhenko", "link": "https://stackoverflow.com/users/9787936/andrew-rozhenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1556110514, "creation_date": 1556110514, "answer_id": 55830559, "question_id": 55827580, "link": "https://stackoverflow.com/questions/55827580/rspec-which-actually-tests-method-with-instance-variable/55830559#55830559", "title": "Rspec which actually tests method with instance variable", "body": "<p>Ninja, you can use <code>service.instance_variable_set(@hash, your_value)</code> right above the <code>expect</code> line</p>\n\n<p><a href=\"http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set\" rel=\"nofollow noreferrer\">source</a></p>\n"}], "owner": {"reputation": 408, "user_id": 7737587, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/uJmPn.jpg?s=128&g=1", "display_name": "Ninja", "link": "https://stackoverflow.com/users/7737587/ninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556110514, "creation_date": 1556100706, "last_edit_date": 1556101465, "question_id": 55827580, "link": "https://stackoverflow.com/questions/55827580/rspec-which-actually-tests-method-with-instance-variable", "title": "Rspec which actually tests method with instance variable", "body": "<p>I have a service method as </p>\n\n<pre><code>class Service\n  def maximum_match\n    max = @hash.values.max\n    Hash[@hash.select { |_k, v| v == max }]\n  end\nend\n</code></pre>\n\n<p>My test is like</p>\n\n<pre><code>context 'Finding tags count' do    \n    it 'counts tags and returns maximum match' do      \n      service = Service.new     \n      expect(service.maximum_match).to eq some_result\n    end\n  end\n</code></pre>\n\n<p>How can I pass any values <code>@hash</code> to run my test?</p>\n\n<p>Error is <code>NoMethodError:undefined method 'values' for nil:NilClass</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1556110938, "post_id": 55826980, "comment_id": 98325971, "body": "a main problem related to  JSON.parse(response). and need to add    require &#39;json&#39;  to a head of rb file ( if u run it in an isolate file, not in a rails project). JSON.parse(response) need to add to a bottom of a method for parse to json."}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": true, "score": 1, "last_activity_date": 1556101668, "last_edit_date": 1556101668, "creation_date": 1556100598, "answer_id": 55827552, "question_id": 55826980, "link": "https://stackoverflow.com/questions/55826980/rails-api-how-to-fill-headers-in-request/55827552#55827552", "title": "rails api how to fill headers in request", "body": "<p>Your method <code>auth_token</code> is not returning a <code>response</code>, but a <code>nil</code> (<code>puts</code> returns <code>nil</code>). </p>\n\n<p>Btw, you don't need <code>attr_reader :authorize</code> since you have a method with that name.</p>\n\n<p>Also, as you are setting <code>attr_reader :auth_token</code>, the method <code>auth_token</code> must be rename (and maybe become <code>private</code>).</p>\n\n<p>Change your code to:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    class Paytrace\n      require 'rest-client'\n\n      attr_reader :auth_token\n\n      def initialize()\n        @auth_token = get_auth_token\n      end      \n\n      def authorize\n        headers = {:Authorization =&gt; \"Bearer #{auth_token['access_token']}\"}\n\n        RestClient.get('https://api.paytrace.com/v1/transactions/sale/keyed', headers)\n      end\n\n      private\n\n        def get_auth_token\n          RestClient.post 'https://api.paytrace.com/oauth/token', { grant_type: :password, username: \"loginname\", password: \"htmlkoi8r\" }        \n        end\n    end\n\n    a = Paytrace.new\n    puts a.auth_token\n    puts a.authorize\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 11369200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-T39gf7KDG2Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reaQYtUy-p18WEN3mqcDKiiS0o7Rw/mo/photo.jpg?sz=128", "display_name": "Muahmmad Tahir Saleh", "link": "https://stackoverflow.com/users/11369200/muahmmad-tahir-saleh"}, "is_accepted": false, "score": 0, "last_activity_date": 1556108766, "last_edit_date": 1556108766, "creation_date": 1556104205, "answer_id": 55828663, "question_id": 55826980, "link": "https://stackoverflow.com/questions/55826980/rails-api-how-to-fill-headers-in-request/55828663#55828663", "title": "rails api how to fill headers in request", "body": "<p>Seems like there are 3 mistakes in this code the 2 puts. line 12 and 20</p>\n\n<p>and the </p>\n\n<pre><code>headers = {:Authorization =&gt; \"Bearer #{auth_token['access_token']}\"}\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>headers = {:Authorization =&gt; \"Bearer #{auth_token[:access_token]}\"}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>headers = {:Authorization =&gt; \"Bearer #{@auth_token[:access_token]}\"}\n</code></pre>\n\n<p>try this code </p>\n\n<pre><code>    class Paytrace\n      require 'rest-client'\n\n      attr_reader :auth_token, :authorize\n\n      def initialize()\n        @auth_token = auth_token\n      end\n\n      def auth_token\n        response = RestClient.post 'https://api.paytrace.com/oauth/token', { grant_type: :password, username: \"loginname\", password: \"htmlkoi8r\" }\n        # puts response\n      end\n\n      def authorize\n        headers = {:Authorization =&gt; \"Bearer #{@auth_token[:access_token]}\"}\n\n        response1 = RestClient.get('https://api.paytrace.com/v1/transactions/sale/keyed', headers)\n\n        # puts response1\n      end\n    end\n\n    a = Paytrace.new\n    a.authorize\n</code></pre>\n\n<p>take care the your response hash if you check is  </p>\n\n<pre><code>{:access_token=&gt;\"c6d69786f6075633:8647d6c6b6f6968327:092e8cfc553726d2b8198577ea2836f41173aae68a53aa1d2af2b2c7f65dcdc7\",\n   :token_type=&gt;\"Bearer\",\n   :expires_in=&gt;7200,\n   :created_at=&gt;1556098344}\n</code></pre>\n\n<p>and not </p>\n\n<pre><code>{\"access_token\":\"c6d69786f6075633:8647d6c6b6f6968327:092e8cfc553726d2b8198577ea2836f41173aae68a53aa1d2af2b2c7f65dcdc7\",\"token_type\":\"Bearer\",\"expires_in\":7200,\"created_at\":1556098344} \n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 55827552, "answer_count": 2, "score": 0, "last_activity_date": 1556108766, "creation_date": 1556098764, "last_edit_date": 1556100671, "question_id": 55826980, "link": "https://stackoverflow.com/questions/55826980/rails-api-how-to-fill-headers-in-request", "title": "rails api how to fill headers in request", "body": "<p>I don't understand what I do wrong. I want to send a simple request to an API, and it didn't work:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    class Paytrace\n      require 'rest-client'\n\n      attr_reader :auth_token, :authorize\n\n      def initialize()\n        @auth_token = auth_token\n      end\n\n      def auth_token\n        response = RestClient.post 'https://api.paytrace.com/oauth/token', { grant_type: :password, username: \"loginname\", password: \"htmlkoi8r\" }\n        puts response\n      end\n\n      def authorize\n        headers = {:Authorization =&gt; \"Bearer #{auth_token['access_token']}\"}\n\n        response1 = RestClient.get('https://api.paytrace.com/v1/transactions/sale/keyed', headers)\n\n        puts response1\n      end\n    end\n\n    a = Paytrace.new\n    a.authorize\n</code></pre>\n\n<blockquote>\n  <h1>console.log</h1>\n  \n  <p>lucker@lucker-pc:~/git/paytrace-testh$ ruby integration.rb \n  {\"access_token\":\"c6d69786f6075633:8647d6c6b6f6968327:092e8cfc553726d2b8198577ea2836f41173aae68a53aa1d2af2b2c7f65dcdc7\",\"token_type\":\"Bearer\",\"expires_in\":7200,\"created_at\":1556098344}\n  {\"access_token\":\"c6d69786f6075633:8647d6c6b6f6968327:232c92f977a301d033eec321c3d82b73bb65ebec33f9fcc8f6c2d7575c8b0d88\",\"token_type\":\"Bearer\",\"expires_in\":7200,\"created_at\":1556098346}\n  Traceback (most recent call last):    1: from integration.rb:25:in\n  <code>&lt;main&gt;' integration.rb:16:in</code>authorize': undefined method `[]' for\n  nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<ol>\n<li>Why is the access_token generated twice?</li>\n<li>Why is there an undefined method '[]' for nil:NilClass? </li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1556090990, "post_id": 55824367, "comment_id": 98314291, "body": "<a href=\"https://medium.freecodecamp.org/single-table-inheritance-vs-polymorphic-associations-in-rails-af3a07a204f2\" rel=\"nofollow noreferrer\">medium.freecodecamp.org/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556122088, "post_id": 55824367, "comment_id": 98333221, "body": "There is also a third option which is often overlooked which is using a set of discrete join tables. So to join A and B with C you would use the tables AC and BC. This allows you to use foreign keys and cascades."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1556121807, "post_id": 55824467, "comment_id": 98333056, "body": "Data integrity is a problem even if you have one application that is running on multiple threads simultaneously. Which is pretty much every rails app not running on Webbrick. Race conditions can and will occur so you cannot trust the application to maintain the integrity of the database."}], "tags": [], "owner": {"reputation": 301, "user_id": 5138485, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K4fTJWCrpp4/AAAAAAAAAAI/AAAAAAAAB0o/KSBsbEj0Xz4/photo.jpg?sz=128", "display_name": "Kishor Vyavahare", "link": "https://stackoverflow.com/users/5138485/kishor-vyavahare"}, "is_accepted": false, "score": 1, "last_activity_date": 1556110747, "last_edit_date": 1556110747, "creation_date": 1556090584, "answer_id": 55824467, "question_id": 55824367, "link": "https://stackoverflow.com/questions/55824367/sti-vs-polymorphic-associations/55824467#55824467", "title": "STI vs Polymorphic associations", "body": "<p>Following are the difference scenarios which would help you to take a decision</p>\n\n<ol>\n<li><strong>Database structure.</strong> STI uses only one table for all classes in the\nrelationship, while polymorphic associations use a table per class.\nEach method has its own advantages and disadvantages as the\napplication grows.</li>\n<li><strong>Shared data or state.</strong> STI is a great option if your models have many\nshared attributes. Otherwise a polymorphic association is probably\nthe better choice.</li>\n<li><strong>Future concerns.</strong> Consider how your application might change and\ngrow. If you\u2019re considering STI but think you\u2019ll add models or model\nfields that deviate from the shared structure, you might want to\nrethink your plan. If you think your structure is likely to remain\nthe same, STI will generally be faster for querying.</li>\n<li><strong>Data integrity.</strong> If data is not going to be contained (one\napplication using your database), polymorphic association is\nprobably a bad choice because your data will be compromised.</li>\n</ol>\n\n<p>If you want to more deatils about STI and Polymorpic association then you could use <a href=\"https://medium.freecodecamp.org/single-table-inheritance-vs-polymorphic-associations-in-rails-af3a07a204f2\" rel=\"nofollow noreferrer\">this link</a>, it will give clear idea of using it.</p>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 9910110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OTTsN.jpg?s=128&g=1", "display_name": "Sandra", "link": "https://stackoverflow.com/users/9910110/sandra"}, "is_accepted": false, "score": 2, "last_activity_date": 1556094640, "creation_date": 1556094640, "answer_id": 55825633, "question_id": 55824367, "link": "https://stackoverflow.com/questions/55824367/sti-vs-polymorphic-associations/55825633#55825633", "title": "STI vs Polymorphic associations", "body": "<p>In short...</p>\n\n<ul>\n<li>you should use STI when your app doesn't need to scale or change (a lot) and your models have many shared attributes.</li>\n<li>you should use Polymorpic when your app has simple queries and the integrity of your data is not crucial.</li>\n</ul>\n\n<p>I hope it useful for you. :)</p>\n"}], "owner": {"reputation": 63, "user_id": 6941553, "user_type": "registered", "profile_image": "https://graph.facebook.com/1264893356888672/picture?type=large", "display_name": "Girish Bhanarkar", "link": "https://stackoverflow.com/users/6941553/girish-bhanarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1556110747, "creation_date": 1556090235, "question_id": 55824367, "link": "https://stackoverflow.com/questions/55824367/sti-vs-polymorphic-associations", "title": "STI vs Polymorphic associations", "body": "<p>I am confuse while using STI and Polymorphic association, so When should I use STI or Polymorphic associations?</p>\n"}, {"tags": ["ruby", "google-chrome"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1556084477, "post_id": 55822969, "comment_id": 98311582, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49318748/session-not-created-exception-chrome-version-must-be-x-y-z-when-using-seleni\">Session not created exception: Chrome version must be &gt;= x.y.z when using Selenium Webdriver with Chrome</a>"}, {"owner": {"reputation": 956, "user_id": 232374, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4bb313af528d968c3a35e8208ecd287b?s=128&d=identicon&r=PG", "display_name": "Shagymoe", "link": "https://stackoverflow.com/users/232374/shagymoe"}, "edited": false, "score": 0, "creation_date": 1556225566, "post_id": 55822969, "comment_id": 98376184, "body": "Why was this downvoted? I&#39;m having the same issue. Chrome was auto-upgraded to v74 yesterday and now selenium is broken."}, {"owner": {"reputation": 956, "user_id": 232374, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4bb313af528d968c3a35e8208ecd287b?s=128&d=identicon&r=PG", "display_name": "Shagymoe", "link": "https://stackoverflow.com/users/232374/shagymoe"}, "edited": false, "score": 0, "creation_date": 1556230151, "post_id": 55822969, "comment_id": 98377750, "body": "@american-ninja-warrior did you find a solution?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1556479499, "post_id": 55822969, "comment_id": 98444090, "body": "I think I did the manual download tarball and install thing ...."}], "answers": [{"comments": [{"owner": {"reputation": 956, "user_id": 232374, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4bb313af528d968c3a35e8208ecd287b?s=128&d=identicon&r=PG", "display_name": "Shagymoe", "link": "https://stackoverflow.com/users/232374/shagymoe"}, "edited": false, "score": 0, "creation_date": 1556301558, "post_id": 55872627, "comment_id": 98405437, "body": "I did the same but it actually introduced different issues."}, {"owner": {"reputation": 85, "user_id": 4698185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5753d4b47465373d1000decdfb0960eb?s=128&d=identicon&r=PG&f=1", "display_name": "natsbat4ws", "link": "https://stackoverflow.com/users/4698185/natsbat4ws"}, "reply_to_user": {"reputation": 956, "user_id": 232374, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4bb313af528d968c3a35e8208ecd287b?s=128&d=identicon&r=PG", "display_name": "Shagymoe", "link": "https://stackoverflow.com/users/232374/shagymoe"}, "edited": false, "score": 0, "creation_date": 1556301694, "post_id": 55872627, "comment_id": 98405493, "body": "Yeah I am actually occasionally getting timeout errors now. Looking into it."}], "tags": [], "owner": {"reputation": 85, "user_id": 4698185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5753d4b47465373d1000decdfb0960eb?s=128&d=identicon&r=PG&f=1", "display_name": "natsbat4ws", "link": "https://stackoverflow.com/users/4698185/natsbat4ws"}, "is_accepted": false, "score": 1, "last_activity_date": 1556300635, "creation_date": 1556300635, "answer_id": 55872627, "question_id": 55822969, "link": "https://stackoverflow.com/questions/55822969/session-not-created-chrome-version-must-be-between/55872627#55872627", "title": "session not created: Chrome version must be between", "body": "<p>Apparently the <code>chromedriver-helper</code> gem was deprecated. I switched to using the <code>webdrivers</code> gem and it fixed the issue.</p>\n\n<p>In Gemfile replace:\n<code>gem 'chromedriver-helper'</code></p>\n\n<p>With:\n<code>gem 'webdrivers', '~&gt; 3.0'</code></p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2930, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1556300635, "creation_date": 1556083817, "question_id": 55822969, "link": "https://stackoverflow.com/questions/55822969/session-not-created-chrome-version-must-be-between", "title": "session not created: Chrome version must be between", "body": "<p>When driving chrome using ruby selenium driver, I get</p>\n\n<p>/home/travis/.rvm/gems/ruby-2.6.2/gems/selenium-webdriver-3.141.5926/lib/selenium/webdriver/remote/response.rb:72:in `assert_ok': session not created: Chrome version must be between 70 and 73 (Selenium::WebDriver::Error::SessionNotCreatedError)</p>\n\n<p>How do I resolve this issue?\nDowngrading chrome is not something I want to do.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1556077247, "post_id": 55822031, "comment_id": 98309849, "body": "First you shouldn&#39;t redefine Array. <code>&#39;TETDC3DBE01&#39;.match(&#39;WEB&#39;) # nil &#39;TETDC3DBE01&#39;.match(&#39;APP&#39;) # nil &#39;TETDC3DBE01&#39;.match(&#39;STR&#39;) # nil</code> all nil, so they don&#39;t match, what are you really trying to do?"}, {"owner": {"reputation": 5, "user_id": 11368639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XVl433QScpo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-fmS37hvsqkkYwTnO3zh2LEhTvA/mo/photo.jpg?sz=128", "display_name": "mahesh a", "link": "https://stackoverflow.com/users/11368639/mahesh-a"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1556077452, "post_id": 55822031, "comment_id": 98309878, "body": "Now I want output only &quot;yes&quot;"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1556077646, "post_id": 55822031, "comment_id": 98309906, "body": "Isn&#39;t <code>hostname.match(x)</code> working?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556077670, "post_id": 55822031, "comment_id": 98309909, "body": "Try <code>[&#39;WEB&#39;,&#39;APP&#39;,&#39;STR&#39;,&#39;DBE&#39;].map { |s| hostname.match?(&#47;#{s}&#47;) ? &#39;yes&#39; : &#39;no&#39; } #=&gt; [&quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;yes&quot;]</code>. You want <code>hostname = &#39;TETDC3DBE01&#39;</code> (i.e., with single or double quotes). Better edit that now,   before it attracts downvotes.."}, {"owner": {"reputation": 5, "user_id": 11368639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XVl433QScpo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-fmS37hvsqkkYwTnO3zh2LEhTvA/mo/photo.jpg?sz=128", "display_name": "mahesh a", "link": "https://stackoverflow.com/users/11368639/mahesh-a"}, "edited": false, "score": 0, "creation_date": 1556078009, "post_id": 55822031, "comment_id": 98309980, "body": "I am getting out as &quot;no no no yes&quot;  I want only either yes or no"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556078406, "post_id": 55822031, "comment_id": 98310061, "body": "Note: Ruby is a case-sensitive language and capital letters have specific meaning in terms of syntax. Variables and method names should be lower-case letters. Capitals indicate constants of the form  <code>ClassName</code> or <code>CONSTANT_NAME</code>. <code>Array</code> is actually an existing constant, you can&#39;t use that name."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1556095641, "post_id": 55822031, "comment_id": 98316871, "body": "@mahesha &quot;I want either yes or no&quot; - take a look at <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Enumerable#any?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1556078690, "creation_date": 1556078690, "answer_id": 55822257, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not/55822257#55822257", "title": "Check whether string match or not", "body": "<p>Given this fixed Ruby code:</p>\n\n<pre><code>hostname = 'TETDC3DBE01'\n\narray  = ['WEB','APP','STR','DBE']\n</code></pre>\n\n<p>Where if you want to find all elements in <code>array</code> that match as a substring of <code>hostname</code> your code should work. The more minimal matching system is probably:</p>\n\n<pre><code>array.select { |x| hostname.match(x) }\n# =&gt; [\"DBE\"]\n</code></pre>\n\n<p>Using a tool like <code>puts</code> to produce output isn't always very useful because that \"yes\" or \"no\" text can't be acted upon by more code. Try and think of Ruby programs as a chain of transformations, where this selects all matches, and later you can print them, like this:</p>\n\n<pre><code>puts array.select { |x| hostname.match(x) }.join(',')\n# =&gt; DBE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1556101508, "last_edit_date": 1556101508, "creation_date": 1556080697, "answer_id": 55822517, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not/55822517#55822517", "title": "Check whether string match or not", "body": "<p>I wouldn't use regexp in this case. A simple <code>String#include?</code> is probably faster. Furthermore <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\"><code>any?</code></a> will return <code>true</code> if any of the elements in the array leads is matching.</p>\n\n<pre><code>hostname = 'TETDC3DBE01'\narray  = ['WEB','APP','STR','DBE']\n\narray.any? { |x| hostname.include?(x) }\n#=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 6941553, "user_type": "registered", "profile_image": "https://graph.facebook.com/1264893356888672/picture?type=large", "display_name": "Girish Bhanarkar", "link": "https://stackoverflow.com/users/6941553/girish-bhanarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556096562, "last_edit_date": 1556096562, "creation_date": 1556094169, "answer_id": 55825497, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not/55825497#55825497", "title": "Check whether string match or not", "body": "<p>Lets take your code to fix it.</p>\n\n<pre><code>hostname = \"TETDC3DBE01\"\n\narr  = ['WEB','APP','STR','DBE']\n\n arr.each do |x|\n  if hostname.match?(x)\n   puts \"yes\"\n  else\n   puts \"no\"\n  end\nend\n</code></pre>\n\n<p><code>match</code> gives array of result and\n<code>match?</code> gives you true or false value</p>\n"}, {"tags": [], "owner": {"reputation": 19821, "user_id": 170230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cNDYy.png?s=128&g=1", "display_name": "Draco Ater", "link": "https://stackoverflow.com/users/170230/draco-ater"}, "is_accepted": false, "score": 1, "last_activity_date": 1556095076, "creation_date": 1556095076, "answer_id": 55825765, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not/55825765#55825765", "title": "Check whether string match or not", "body": "<p>Check out <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Array#any?</a> method.</p>\n\n<p>It passes each element of the collection to the given block. The method returns true if the block ever returns a value other than false or nil. If the block is not given, Ruby adds an implicit block of <code>{ |obj| obj }</code> that will cause <code>any?</code> to return true if at least one of the collection members is not false or nil.</p>\n\n<p>If instead a pattern is supplied, the method returns whether <code>pattern === element</code> for any collection member.</p>\n\n<p>In your case:</p>\n\n<pre><code>hostname = 'TETDC3DBE01'\n['WEB','APP','STR','DBE'].any? do |x|\n  hostname.match(x)\nend\n</code></pre>\n\n<p>or even if you actually mean <em>equal</em> by <em>match</em>:</p>\n\n<pre><code>hostname = 'TETDC3DBE01'\n['WEB','APP','STR','DBE'].any?(hostname)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1556105102, "creation_date": 1556105102, "answer_id": 55828952, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not/55828952#55828952", "title": "Check whether string match or not", "body": "<p>Regular expression made real easy:</p>\n\n<pre><code>hostname = \"TETDC3DBE01\"\narray  = ['WEB','APP','STR','DBE']\n\nre = Regexp.union(array)\nhostname.match?(re)  # =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11368639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XVl433QScpo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-fmS37hvsqkkYwTnO3zh2LEhTvA/mo/photo.jpg?sz=128", "display_name": "mahesh a", "link": "https://stackoverflow.com/users/11368639/mahesh-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1556105102, "creation_date": 1556076870, "last_edit_date": 1556077423, "question_id": 55822031, "link": "https://stackoverflow.com/questions/55822031/check-whether-string-match-or-not", "title": "Check whether string match or not", "body": "<p>I have a string and an array with some strings.\nas below</p>\n\n<pre><code>hostname = TETDC3DBE01\n\nArray  = ['WEB','APP','STR','DBE']\n</code></pre>\n\n<p>I want to find whether that hostname match with any of the array element or not?</p>\n\n<p>When I'm trying with below code getting output</p>\n\n<pre><code>no\nno\nno\nno\n</code></pre>\n\n<p>Here is loop repeating each and every element on array. I want check that hostname with single check on array the produce the output either yes or no only. </p>\n\n<pre><code>Array.each do |x|\n  if hostname.match(x)\n    puts \"yes\"\n  else\n    puts \"no\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "exit"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1556070474, "creation_date": 1556070474, "answer_id": 55821257, "question_id": 55821191, "link": "https://stackoverflow.com/questions/55821191/if-i-want-code-to-allow-all-the-sub-domains-what-should-i-do/55821257#55821257", "title": "If I want code to allow all the sub domains what should I do?", "body": "<p>One way to do this would be to use String#end_with?</p>\n\n<pre><code>halt 403 unless url.host.end_with?('.webserver.com')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1556079342, "creation_date": 1556079342, "answer_id": 55822342, "question_id": 55821191, "link": "https://stackoverflow.com/questions/55821191/if-i-want-code-to-allow-all-the-sub-domains-what-should-i-do/55822342#55822342", "title": "If I want code to allow all the sub domains what should I do?", "body": "<p>Another approach is to use <code>case</code>:</p>\n\n<pre><code>case url.host\nwhen /\\.webserver\\.com\\z/i\n  halt 403\nend\n</code></pre>\n\n<p>Where that's case-insensitive (<code>/i</code>) and allows you to add other rules as necessary.</p>\n"}], "owner": {"reputation": 1, "user_id": 11402624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0135d2cf881b956d0aa60c1f8404034?s=128&d=identicon&r=PG&f=1", "display_name": "meet", "link": "https://stackoverflow.com/users/11402624/meet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556079342, "creation_date": 1556069759, "last_edit_date": 1556077642, "question_id": 55821191, "link": "https://stackoverflow.com/questions/55821191/if-i-want-code-to-allow-all-the-sub-domains-what-should-i-do", "title": "If I want code to allow all the sub domains what should I do?", "body": "<p>Ruby code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>halt 403 unless url.host == 'xyz.webserver.com'\n</code></pre>\n\n<p>there are many sub domains like xyz. What is the solution if I would like to allow all the sub domains.</p>\n\n<p>Any help would be appreciated.</p>\n\n<pre><code>halt 403 unless url.host == 'xyz.webserver.com'\n</code></pre>\n"}, {"tags": ["ruby", "email"], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": true, "score": 0, "last_activity_date": 1556087114, "creation_date": 1556087114, "answer_id": 55823604, "question_id": 55820993, "link": "https://stackoverflow.com/questions/55820993/ruby-mail-library-how-to-get-error-reports/55823604#55823604", "title": "Ruby mail library How to get Error Reports", "body": "<p>You need to configure <strong>receive method</strong> to receive mails from <strong>host</strong> to you're app. As mentioned <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html#receiving-emails\" rel=\"nofollow noreferrer\">here</a>.<br>\nIn that <strong>receiver</strong> you'll configure where the mails to be stored. And from that path you can read &amp; retrieve errors.  </p>\n\n<p>Without using any <strong>receive method</strong> you can read any <code>unread/not seen</code> mails from the mail and then you can get error reports. </p>\n\n<p>You can check these <a href=\"https://stackoverflow.com/questions/18150069/how-to-retrieve-only-unread-emails-with-ruby-mail-gem\">post1</a> &amp; <a href=\"https://stackoverflow.com/questions/20070204/message-eml-path-for-mail-gem-ruby-on-rails\">post2</a> to know about how to read mails.  </p>\n\n<p>Link about <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html#receiving-emails\" rel=\"nofollow noreferrer\">Receive mail options</a> in rails app.</p>\n"}], "owner": {"reputation": 172, "user_id": 11128859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TL0LILj5IGo/AAAAAAAAAAI/AAAAAAAAAAc/CsiRgUFH6ro/photo.jpg?sz=128", "display_name": "K-Sato", "link": "https://stackoverflow.com/users/11128859/k-sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55823604, "answer_count": 1, "score": 0, "last_activity_date": 1556087114, "creation_date": 1556064806, "last_edit_date": 1556084182, "question_id": 55820993, "link": "https://stackoverflow.com/questions/55820993/ruby-mail-library-how-to-get-error-reports", "title": "Ruby mail library How to get Error Reports", "body": "<p>I'm using Ruby's mail library and it says you can get the error reports from mails you sent <a href=\"https://github.com/mikel/mail#getting-error-reports-from-an-email\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I'm trying to figure out where I can find the path to check the mails that didn't get to the receivers due to the errors.</p>\n"}, {"tags": ["ruby", "elixir", "hashicorp-vault"], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 347655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae6c528bf00e14f34b4d59e0a28b461?s=128&d=identicon&r=PG", "display_name": "BrandonG", "link": "https://stackoverflow.com/users/347655/brandong"}, "is_accepted": false, "score": 0, "last_activity_date": 1579381385, "creation_date": 1579381385, "answer_id": 59804804, "question_id": 55818108, "link": "https://stackoverflow.com/questions/55818108/verify-signed-data-vault-offline/59804804#59804804", "title": "Verify signed data vault offline", "body": "<p>Yes, it's possible to verify the signature offline. My answer is going to mention some Ruby specifics, since I didn't notice this was Elixir until after I started researching a bit more.</p>\n\n<p>By default, when signing with a RSA key, Vault uses the <a href=\"https://en.wikipedia.org/wiki/Probabilistic_signature_scheme\" rel=\"nofollow noreferrer\"><code>PSS</code></a> algorithm for the signature. The <code>verify</code> method on <code>OpenSSL::PKey::PKey</code> is expecting <a href=\"https://en.wikipedia.org/wiki/PKCS_1#Schemes\" rel=\"nofollow noreferrer\"><code>PKCS #1 v1.5</code></a>. <a href=\"https://crypto.stackexchange.com/questions/48407/should-i-be-using-pkcs1-v1-5-or-pss-for-rsa-signatures\">Here's</a> some useful info about the pros and cons of the two.</p>\n\n<p>In addition to this algorithm difference, you need to strip off the <code>vault:v1:</code> from the returned signature from Vault.</p>\n\n<p>Here's some sample Ruby code to sign and then verify the signature:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>transit_key = \"test_key\"\nmessage = \"test\"\n\n# Returns something like:\n# vault:v1:B3reNpf8e/WyAYzBzyWz3oSUM...\nsignature = Vault.logical.write(\n        \"transit/sign/#{transit_key}/sha2-256\",\n        input: Base64.encode64(message),\n        signature_algorithm: \"pkcs1v15\"\n    ).data[:signature]\n\nsignature = signature.split(\":\")[2]\n\n# Gives us the PEM encoded public key\n# -----BEGIN PUBLIC KEY-----\n# ...\npublic_key = Vault.logical.read(\"transit/keys/#{transit_key}\").data[:keys][:\"1\"][:public_key]\npublic_key = OpenSSL::PKey::RSA.new(public_key)\n\ndigest = OpenSSL::Digest::SHA256.new\n\nputs public_key.verify(digest, Base64.decode64(signature), message) # returns true\nputs public_key.verify(digest, Base64.decode64(signature), message + \"modified\") # returns false\n</code></pre>\n\n<p>Looks like as of Ruby 2.5, there's a new <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html#method-i-verify_pss\" rel=\"nofollow noreferrer\"><code>verify_pss</code> method on the <code>OpenSSL::PKey::RSA</code> class</a>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>signature = Vault.logical.write(\n        \"transit/sign/#{transit_key}/sha2-256\",\n        input: Base64.encode64(message),\n        signature_algorithm: \"pss\"\n    ).data[:signature].split(\":\")[2]\n\nputs public_key.verify_pss(digest, Base64.decode64(signature), message, salt_length: :auto, mgf1_hash: \"SHA256\") # returns true\nputs public_key.verify_pss(digest, Base64.decode64(signature), message + \"modified\", salt_length: :auto, mgf1_hash: \"SHA256\") # returns false\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1579381385, "creation_date": 1556047484, "question_id": 55818108, "link": "https://stackoverflow.com/questions/55818108/verify-signed-data-vault-offline", "title": "Verify signed data vault offline", "body": "<p>I'm sending to a client a public_key and a payload plus a signature.</p>\n\n<p>I'm trying to verify the signature on the client using the public_key and payload but I can't find a way to get the data verified. Every time I receive false as a response regardless of what I'm doing.</p>\n\n<p>I'm using vault to sign the payload</p>\n\n<pre><code>  def sign(box_identifier, data) do\n       Vaultex.Client.write(\"transit/sign/#{box_identifier}\",\n                     %{ \n                        input: data,\n                        hash_algorithm: \"sha2-256\"\n                      },\n                     @authentication_strategy,\n                     {@token})\n  end\n\n  Vault.Transit.sign(\"coucou\", Base.encode64(\"test\"))\n\n   _____________________________________________________________\n   digest = OpenSSL::Digest::SHA256.new\n   key = OpenSSL::PKey::RSA.new File.read 'key.pem'       \n\n   key.public_key.verify digest, signature, \"test\"\n\n\n-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzj0qLxEc0Qu9g9nxdMRe\njBaUD0+GuQITiAPEDOrjScJTznJrR9hXqO14BqepuEmcz4irv4hEkBEBfqZ1XnP9\n2fc9zG4A20lepqDRwPhkEdI4D71KRPSxv/a+O2HrAhTYH17NbsYDtpkFCdepC6FC\n01aso679d3kAZiZ+GD2OLDWifreBVPE2aXacJYXZZ4kTkchsevY3PnAcOG4LmM6b\nkUoF1qfP6tJ/VItJXyqSC2PI9Io28zFhwOf6cPLEQCBCTNCNwHunqHW8olcE/Xfn\nb2toym0/UvW3kH/P4h+TE1ZoCV5FWwcx9hcAy1TC0zm4D5Xwt0/4Pgj1GiXFGOY4\nWKGyuDK8gs7QsSDqu+B5p0xiDg7226bpplVxR/P87CohYTtYZj/lO03G2ZEj3pCr\n/juxThdzTgO5xUcPV5GFbPjlK1TIIb5XVZZzW6+sviB6cYZ5T/Xp9dtbR8G9Zt9n\ngLlaKU7U/DDQxRv2uiCZy5U/DUpfxY56r4Y73Ir2YgmZY1PKLC2a5/w3wScVZILN\nfnxnVYOzSPPaKxAJWbZsZjxXJS0veE8RgGFHgWfe8+qPCEnx81Jf2NzupQHO1KIk\nUnlYGcPESk/90psDNsmISSdtF2D6j4k28k0ncViTu2eMKBX81W8TgTeHtQa3zR0S\nupN2o25b3Wi2oQU14kTdOCcCAwEAAQ==\n-----END PUBLIC KEY-----\n</code></pre>\n\n<p>Am I even capable of validating the signature offline when its signed by vault ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 10813827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736f8f0de40f55f19c595a02be8b667?s=128&d=identicon&r=PG&f=1", "display_name": "k10a", "link": "https://stackoverflow.com/users/10813827/k10a"}, "edited": false, "score": 0, "creation_date": 1556048307, "post_id": 55818183, "comment_id": 98302979, "body": "Thanks so much, it helps me totally :)"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1556048366, "post_id": 55818183, "comment_id": 98302997, "body": "Kudos! I forgot about <code>@board.board_items</code> completely and tried executing the same with <code>Item.joins(:board_items).where(&#39;board_items.board_id = ?&#39;, @board.id)</code>."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1556048494, "post_id": 55818183, "comment_id": 98303047, "body": "A possible suggestion - if relations are set correctly, <code>@board.item_ids</code> should give <code>selected_item_ids</code>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1556048773, "post_id": 55818183, "comment_id": 98303154, "body": "yep @kiddorails, but it will fetch <code>item_ids</code> through intermediate query of <code>board_items</code> which is unnecessary."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 2, "last_activity_date": 1556047851, "creation_date": 1556047851, "answer_id": 55818183, "question_id": 55818060, "link": "https://stackoverflow.com/questions/55818060/how-to-exclude-items-have-already-chosen/55818183#55818183", "title": "How to exclude items have already chosen", "body": "<p>You can exclude selected IDs in the where query as:</p>\n\n<pre><code>@board = Board.find(params[:id])\nselected_item_ids = @board.board_items.pluck(:item_id)\n@unselected_items = Item.where.not(id: selected_item_ids)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 555, "user_id": 10813827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736f8f0de40f55f19c595a02be8b667?s=128&d=identicon&r=PG&f=1", "display_name": "k10a", "link": "https://stackoverflow.com/users/10813827/k10a"}, "edited": false, "score": 0, "creation_date": 1556048328, "post_id": 55818212, "comment_id": 98302988, "body": "Thanks a lot, I really appreciate that!"}], "tags": [], "owner": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "is_accepted": false, "score": 1, "last_activity_date": 1556047960, "creation_date": 1556047960, "answer_id": 55818212, "question_id": 55818060, "link": "https://stackoverflow.com/questions/55818060/how-to-exclude-items-have-already-chosen/55818212#55818212", "title": "How to exclude items have already chosen", "body": "<p>You should be able to do it with a simple query such as </p>\n\n<pre><code>Item.includes(:board).where(boards: {id: nil })\n</code></pre>\n\n<p>You may have to tweak a bit the syntax regarding your models.</p>\n\n<p>The goal is to load all items expect the ones with an existing relation</p>\n"}], "owner": {"reputation": 555, "user_id": 10813827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736f8f0de40f55f19c595a02be8b667?s=128&d=identicon&r=PG&f=1", "display_name": "k10a", "link": "https://stackoverflow.com/users/10813827/k10a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 55818183, "answer_count": 2, "score": 1, "last_activity_date": 1556083247, "creation_date": 1556047242, "last_edit_date": 1556083247, "question_id": 55818060, "link": "https://stackoverflow.com/questions/55818060/how-to-exclude-items-have-already-chosen", "title": "How to exclude items have already chosen", "body": "<p>I'm working on the application which users can choose items but they can't choose ones have already been chosen. </p>\n\n<p>BoardItem has board_id and item_id.\nAn item that was already chosen should not be included in the selected collection.\nItem and board have board items.</p>\n\n<pre><code>@board = Board.find(params[:id])\n@chosen = BoardItem.select{ |board_item| board_item.board === @board }\n@choosing = Item.select{ |item| item.board_items.each do |board_item|\n                             @chosen.exclude?(board_item)\n                            end }\n</code></pre>\n\n<p>Please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 252071, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6db33d8ded0d28975ee679dc77e576f3?s=128&d=identicon&r=PG", "display_name": "kg.", "link": "https://stackoverflow.com/users/252071/kg"}, "edited": false, "score": 0, "creation_date": 1556045413, "post_id": 55817584, "comment_id": 98301810, "body": "Thank you, if I cannot find a way to parse the API&#39;s Time.zone.to_s back into a Ruby class, then I will go with a string strip solution"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 1, "last_activity_date": 1556045161, "creation_date": 1556045161, "answer_id": 55817584, "question_id": 55817454, "link": "https://stackoverflow.com/questions/55817454/parsing-a-timezone-name-string-that-includes-gmt-offset-hours/55817584#55817584", "title": "Parsing a TimeZone name string that includes GMT offset hours", "body": "<p>If you are confident about the API and string format you are going to receive, you can manipulate string as</p>\n\n<pre><code>string.partition(')').last.strip\n# =&gt; Pacific Time (US &amp; Canada)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 252071, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6db33d8ded0d28975ee679dc77e576f3?s=128&d=identicon&r=PG", "display_name": "kg.", "link": "https://stackoverflow.com/users/252071/kg"}, "edited": false, "score": 0, "creation_date": 1556050850, "post_id": 55818692, "comment_id": 98304039, "body": "Thank you, I missed the iana_timezone property in the API reference"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 609, "user_id": 252071, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6db33d8ded0d28975ee679dc77e576f3?s=128&d=identicon&r=PG", "display_name": "kg.", "link": "https://stackoverflow.com/users/252071/kg"}, "edited": false, "score": 0, "creation_date": 1556100809, "post_id": 55818692, "comment_id": 98319944, "body": "@kg. your question is about <i>parsing</i> a given timezone string from an (external) API whereas this answer is about <i>formatting</i> a timezone. How did it solve your parsing problem?"}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 1, "creation_date": 1556116058, "post_id": 55818692, "comment_id": 98329528, "body": "It was an <a href=\"https://meta.stackexchange.com/a/66378/201534\">XY Problem</a>. How to get a useable time one identifier from the Shopify API was the X. Parsing strings was the Y."}], "tags": [], "owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "is_accepted": true, "score": 2, "last_activity_date": 1556050113, "creation_date": 1556050113, "answer_id": 55818692, "question_id": 55817454, "link": "https://stackoverflow.com/questions/55817454/parsing-a-timezone-name-string-that-includes-gmt-offset-hours/55818692#55818692", "title": "Parsing a TimeZone name string that includes GMT offset hours", "body": "<p><code>ShopifyAPI::Shop.current</code> returns properties <a href=\"https://help.shopify.com/en/api/reference/store-properties/shop#properties\" rel=\"nofollow noreferrer\">documented here</a>.  Yes, <code>timezone</code> is one of them, but it is intended to be a display name, not something you should parse.</p>\n\n<p>Instead, use the <code>iana_timezone</code> property, which will give you the <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">IANA time zone identifier</a>, such as <code>America/Los_Angeles</code>. These are compatible with Rails, as well as Ruby's tzinfo gem, and also are used in many other platforms.</p>\n\n<pre><code>irb&gt; ShopifyAPI::Shop.current.timezone\n=&gt; \"(GMT-08:00) Pacific Time (US &amp; Canada)\"\n\nirb&gt; ShopifyAPI::Shop.current.iana_timezone\n=&gt; \"America/Los_Angeles\"\n</code></pre>\n\n<p>If you want to get a Rails time zone from there, you can use the <code>MAPPING</code> constant defined in <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\"><code>ActiveSupport::TimeZone</code></a>.  Though I'd avoid it if possible, for the reasons mentioned in <a href=\"https://stackoverflow.com/tags/timezone/info\">the timezone tag wiki</a> in the \"Rails Time Zone Identifiers\" section at the bottom.</p>\n"}], "owner": {"reputation": 609, "user_id": 252071, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6db33d8ded0d28975ee679dc77e576f3?s=128&d=identicon&r=PG", "display_name": "kg.", "link": "https://stackoverflow.com/users/252071/kg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 55818692, "answer_count": 2, "score": 1, "last_activity_date": 1581600722, "creation_date": 1556044595, "last_edit_date": 1581600722, "question_id": 55817454, "link": "https://stackoverflow.com/questions/55817454/parsing-a-timezone-name-string-that-includes-gmt-offset-hours", "title": "Parsing a TimeZone name string that includes GMT offset hours", "body": "<p>I did find <a href=\"https://stackoverflow.com/questions/13887643/in-rails-how-get-current-time-zone-time-zone-in-a-format-that-can-be-used-wit/13888151\">this question</a> but I am still stumbling around looking for a simple solution to the following:</p>\n\n<p>An API call returns the following format which looks like they are using <code>Time.zone.to_s</code> </p>\n\n<pre><code>irb&gt; ShopifyAPI::Shop.current.timezone\n=&gt; \"(GMT-08:00) Pacific Time (US &amp; Canada)\"\n</code></pre>\n\n<p>I would like to parse the <code>\"(GMT-08:00) Pacific Time (US &amp; Canada)\"</code> into a Ruby class and output the TimeZone name <code>\"Pacific Time (US &amp; Canada)\"</code></p>\n\n<p>Alternately I could just strip the <code>\"(GMT-08:00)\"</code> offset and be left with a clean TimeZone name <code>\"Pacific Time (US &amp; Canada)\"</code> but this seems like a messy string editing solution.</p>\n"}, {"tags": ["ruby", "ssl", "bundler"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1556045913, "post_id": 55817362, "comment_id": 98301996, "body": "Does <a href=\"https://stackoverflow.com/questions/2293608/what-causes-neither-pub-key-nor-priv-key-nested-asn1-error-when-building-a-p\">this</a> answer make sense?"}, {"owner": {"reputation": 2883, "user_id": 2649093, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0816be0eaf327f7b13d220f617f024de?s=128&d=identicon&r=PG", "display_name": "Micka&#235;l", "link": "https://stackoverflow.com/users/2649093/micka%c3%abl"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1556046586, "post_id": 55817362, "comment_id": 98302254, "body": "@Md.FarhanMemon it makes sense, but it doesn&#39;t help me. I have a keypair and a certificate over the public key, that I need to use for the connection. I&#39;m not sure what needs to be included in the only file to be imported, nor how to assemble all the existing files."}], "answers": [{"tags": [], "owner": {"reputation": 2883, "user_id": 2649093, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0816be0eaf327f7b13d220f617f024de?s=128&d=identicon&r=PG", "display_name": "Micka&#235;l", "link": "https://stackoverflow.com/users/2649093/micka%c3%abl"}, "is_accepted": true, "score": 0, "last_activity_date": 1556239281, "last_edit_date": 1556239281, "creation_date": 1556048036, "answer_id": 55818231, "question_id": 55817362, "link": "https://stackoverflow.com/questions/55817362/how-to-use-a-tls-client-certificate-with-a-rubygems-registry/55818231#55818231", "title": "How to use a TLS client certificate with a RubyGems registry?", "body": "<p>I finally found how to assemble the files:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Concatenate the key and the certificate\nopenssl rsa -in key.pem &gt; ruby-bundler-cert.pem \nopenssl x509 -in cert.pem &gt;&gt; ruby-bundler-cert.pem\n# Tell bundler to use the file \nbundle config ssl_client_cert ~/certs/ruby-bundler-cert.pem\n</code></pre>\n\n<p>Did you think this was enough? No! You also need to specify this value somewhere else: in your <code>~/.gemrc</code> file.</p>\n\n<pre><code>:ssl_client_cert: \"/full/path/to/the/certs/ruby-bundler-cert.pem\"\n</code></pre>\n\n<p>Hope this will help other people.</p>\n"}], "owner": {"reputation": 2883, "user_id": 2649093, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0816be0eaf327f7b13d220f617f024de?s=128&d=identicon&r=PG", "display_name": "Micka&#235;l", "link": "https://stackoverflow.com/users/2649093/micka%c3%abl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55818231, "answer_count": 1, "score": 0, "last_activity_date": 1556239281, "creation_date": 1556044223, "question_id": 55817362, "link": "https://stackoverflow.com/questions/55817362/how-to-use-a-tls-client-certificate-with-a-rubygems-registry", "title": "How to use a TLS client certificate with a RubyGems registry?", "body": "<p>I have an internal RubyGems registry from which I want to download some Gems. The registry is protected and requires a valid TLS Client Certificate.</p>\n\n<p>I am able to reach the registry in Chrome (imported the certificate bundle into Chrome), but I am not able to do it with Bundler.</p>\n\n<p>The <a href=\"https://bundler.io/v2.0/man/bundle-config.1.html\" rel=\"nofollow noreferrer\">documentation</a> says <code>ssl_client_cert</code> has to be:</p>\n\n<blockquote>\n  <p>Path to a designated file containing a X.509 client certificate and key in PEM format.</p>\n</blockquote>\n\n<p>I get the following error when using the certificate provided:</p>\n\n<pre><code>either PUB key nor PRIV key: nested asn1 error\n</code></pre>\n\n<p>How do I assemble my certificate and key?</p>\n"}, {"tags": ["ruby", "pry"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1556043665, "creation_date": 1556043665, "answer_id": 55817226, "question_id": 55816918, "link": "https://stackoverflow.com/questions/55816918/requiring-pry-gem-into-ruby-script-causes-error/55817226#55817226", "title": "Requiring pry gem into ruby script causes error", "body": "<p>What eventually worked for me is I just uninstalled all of the <code>pry</code> versions I had installed via <code>gem uninstall</code>.  Then: in my gemfile I specified a previous version of <code>0.11.3</code>:</p>\n\n<pre><code># Gemfile\nsource 'https://rubygems.org'\ngem 'pry', '0.11.3'\n</code></pre>\n\n<p>I did <code>bundle install</code> and then ran my ruby script, and that worked for me.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 55817226, "answer_count": 1, "score": 0, "last_activity_date": 1556043665, "creation_date": 1556042296, "question_id": 55816918, "link": "https://stackoverflow.com/questions/55816918/requiring-pry-gem-into-ruby-script-causes-error", "title": "Requiring pry gem into ruby script causes error", "body": "<p>I am using ruby version <code>2.3.3p222</code></p>\n\n<p>Here is my Gemfile:</p>\n\n<pre><code># Gemfile\nsource 'https://rubygems.org'\n\ngem 'pry'\n</code></pre>\n\n<p>I run <code>bundle</code> and here is the resulting <code>Gemfile.lock</code></p>\n\n<pre><code>Gemfile.lock\nGEM\n  remote: https://rubygems.org/\n  specs:\n    coderay (1.1.2)\n    method_source (0.9.2)\n    pry (0.12.2)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.9.0)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  pry\n\nBUNDLED WITH\n   1.15.1\n</code></pre>\n\n<p>I then simply run a ruby script via <code>ruby my_report.rb</code> (this script is located in the same directory as <code>Gemfile</code> and <code>Gemfile.lock</code>).  <code>my_report.rb</code> only has this in the file:</p>\n\n<pre><code>require 'pry'\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>WARN: Clearing out unresolved specs.\nPlease report a bug if this causes problems.\n/Users/&lt;user&gt;/.rvm/gems/ruby-2.3.3/gems/pry-rescue-1.4.5/lib/pry-rescue.rb:15: warning: method BaseHelpers#windows? is deprecated. Use Pry:Helpers::Platform.windows? instead\n/Users/&lt;user&gt;/.rvm/gems/ruby-2.3.3/gems/pry-stack_explorer-0.4.9.2/lib/pry-stack_explorer.rb:128:in `&lt;top (required)&gt;': undefined method `before_command' for #&lt;Pry::CommandSet:0x007fccdcf0b1e8&gt; (NoMethodError)\n</code></pre>\n\n<p><strong>Question:</strong> What am I missing? How can I properly require in <code>pry</code> into my ruby script so that I can set breakpoints?</p>\n"}, {"tags": ["arrays", "ruby", "string", "split"], "comments": [{"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1556041274, "post_id": 55816634, "comment_id": 98300043, "body": "Try using <code>.{1,2}</code> to match either 1 or 2 times."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556043203, "post_id": 55816802, "comment_id": 98300899, "body": "A small point, so small that it is barely discernible: I suggest you use <code>each_char</code> rather than <code>chars</code> when followed by an <code>Enumerable</code> method, to avoid the creation of the temporary array <code>string.chars</code>."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556043550, "post_id": 55816802, "comment_id": 98301057, "body": "I get your point @CarySwoveland, I started with the same thing but then I couldn&#39;t gather 2/required number of characters chars after <code>each_char</code>. can you think of chaining it somehow?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556043871, "post_id": 55816802, "comment_id": 98301196, "body": "<code>string.each_char.each_slice(2).map { |s| s.join }</code>. Note the return value of <code>string.each_char.each_slice(2) #=&gt; #&lt;Enumerator: #&lt;Enumerator: &quot;hellohellohey&quot;:each_char&gt;:each_slice(2)&gt;</code>, a sort of <i>compound enumerator</i>."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1556059248, "post_id": 55816802, "comment_id": 98306987, "body": "Does dividing the string at say 10000 chars at a time help? <code>string[0..10000]</code>"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 3, "last_activity_date": 1556044220, "last_edit_date": 1556044220, "creation_date": 1556041754, "answer_id": 55816802, "question_id": 55816634, "link": "https://stackoverflow.com/questions/55816634/how-to-efficiently-split-a-very-long-multiple-million-characters-string-after/55816802#55816802", "title": "How to efficiently split a very long (multiple million characters) string after every nth character in Ruby?", "body": "<p>You can chain multiple methods like below:</p>\n\n<pre><code>string = 'hellohellohey'\nstring.chars.each_slice(2).map { |s| s.join }\n# =&gt; [\"he\", \"ll\", \"oh\", \"el\", \"lo\", \"he\", \"y\"]\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.5.0/String.html#method-i-chars\" rel=\"nofollow noreferrer\">#chars</a> will convert string to character array.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">#each_slice</a> splits the array into required number of parts.</p>\n\n<p><strong>Update - Without intermediate/temporary array</strong></p>\n\n<p>As per the comments, thanks to @Cary Swoveland, temporary array can be avoided as follows.</p>\n\n<pre><code>string.each_char.each_slice(2).map { |s| s.join }\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.3/String.html#method-i-each_char\" rel=\"nofollow noreferrer\">#each_char</a> gives an Enumerator of each character.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1556053838, "post_id": 55816803, "comment_id": 98305339, "body": "Also works: <code>&#47;..?&#47;</code> which is just one more character. The <code>{}</code> version you have here is more flexible, though, as you could do <code>2,5</code> or <code>9,300</code> or whatever you need."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556092157, "post_id": 55816803, "comment_id": 98314898, "body": "In addition, you probably want to add the <code>m</code> modifier to have <code>.</code> match any character (it doesn&#39;t match newline by default)."}], "tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 3, "last_activity_date": 1556041755, "creation_date": 1556041755, "answer_id": 55816803, "question_id": 55816634, "link": "https://stackoverflow.com/questions/55816634/how-to-efficiently-split-a-very-long-multiple-million-characters-string-after/55816803#55816803", "title": "How to efficiently split a very long (multiple million characters) string after every nth character in Ruby?", "body": "<p>The dot matches any character except a newline. You are trying to match 2 times any character and that won't match the last character if the string is odd in length.</p>\n\n<p>You could use a <a href=\"https://www.regular-expressions.info/refrepeat.html\" rel=\"nofollow noreferrer\">quantifier</a> <code>{1,2}</code> which is greedy so it first tries to match 2 times.</p>\n\n<pre><code>.{1,2}\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/o7dTVm\" rel=\"nofollow noreferrer\">a demo</a></p>\n\n<p>If you want to match only lowercase characters a-z you might also use <code>[a-z]</code> instead of a dot.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 7836368, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O2cWZN0iRPk/AAAAAAAAAAI/AAAAAAAAAuw/l-LBgIx1b6w/photo.jpg?sz=128", "display_name": "tequila", "link": "https://stackoverflow.com/users/7836368/tequila"}, "edited": false, "score": 0, "creation_date": 1556112224, "post_id": 55824620, "comment_id": 98326912, "body": "Thanks, it works. However, it tells me that it&#39;s an enumerator when I try to count the number of items in the array.  Edit: Nevermind, I used <code>.to_a</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 39, "user_id": 7836368, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O2cWZN0iRPk/AAAAAAAAAAI/AAAAAAAAAuw/l-LBgIx1b6w/photo.jpg?sz=128", "display_name": "tequila", "link": "https://stackoverflow.com/users/7836368/tequila"}, "edited": false, "score": 0, "creation_date": 1556123022, "post_id": 55824620, "comment_id": 98333698, "body": "@tequila that&#39;s expected. With a block, <code>StringIO#each</code> yields the characters / substrings. Without a block, it returns an enumerator. I assumed that you wanted to skip the array creation and work on the substrings."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1556091693, "last_edit_date": 1556091693, "creation_date": 1556091240, "answer_id": 55824620, "question_id": 55816634, "link": "https://stackoverflow.com/questions/55816634/how-to-efficiently-split-a-very-long-multiple-million-characters-string-after/55824620#55824620", "title": "How to efficiently split a very long (multiple million characters) string after every nth character in Ruby?", "body": "<p>When processing (very) large strings, it can be useful to wrap them in a <a href=\"http://ruby-doc.org/stdlib-2.6.3/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow noreferrer\"><code>StringIO</code></a>. It provides an efficient file-like access to the string.</p>\n\n<p>You can for example read every <em>n</em> characters via <a href=\"http://ruby-doc.org/stdlib-2.6.3/libdoc/stringio/rdoc/StringIO.html#method-i-each\" rel=\"nofollow noreferrer\"><code>StringIO#each</code></a>:</p>\n\n<pre><code>string = \"hellohellohey\"\nstring_io = StringIO.new(string)\n\nstring_io.each(5) do |substring|\n  p substring\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"hello\"\n\"hello\"\n\"hey\"\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7836368, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O2cWZN0iRPk/AAAAAAAAAAI/AAAAAAAAAuw/l-LBgIx1b6w/photo.jpg?sz=128", "display_name": "tequila", "link": "https://stackoverflow.com/users/7836368/tequila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 55824620, "answer_count": 3, "score": 1, "last_activity_date": 1556135958, "creation_date": 1556040915, "last_edit_date": 1556135958, "question_id": 55816634, "link": "https://stackoverflow.com/questions/55816634/how-to-efficiently-split-a-very-long-multiple-million-characters-string-after", "title": "How to efficiently split a very long (multiple million characters) string after every nth character in Ruby?", "body": "<p>Let's say I have a string</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string = \"hellohellohey\"\n</code></pre>\n\n<p>I want to split it every 2nd character so it looks like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string = [\"he\",\"ll\",\"oh\",\"el\",\"lo\",\"he\",\"y\"]\n</code></pre>\n\n<p>I tried using the <code>scan(/.{2}/)</code> method but if the array item can't be divided by 2, it doesn't work.</p>\n\n<p><em>Edit:</em> It's necessary to inform you that the 2-character thing was an example. I'm doing something big so I'll be splitting it every 8 <strong>million</strong> characters. So splitting it into individual characters and using <code>each_slice</code> doesn't work here. It just freezes my laptop.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara"], "comments": [{"owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "edited": false, "score": 0, "creation_date": 1610699685, "post_id": 55816291, "comment_id": 116219848, "body": "The problem is not in driver logging (solution You tryied), but in Capybara using old methods on Selenium driver. @Thomas answer should solve it in most cases (unfortunatelly not mine)."}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "edited": false, "score": 0, "creation_date": 1610699454, "post_id": 55816611, "comment_id": 116219748, "body": "Unfortunatelly my system test passing with 3.12 (with warnings) , but not passing with 3.13 (still warnings), so I have to stay on 3.12 (untill I figure out what changes in <code>assert_no_text</code>)"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "edited": false, "score": 0, "creation_date": 1610756970, "post_id": 55816611, "comment_id": 116241735, "body": "@Foton The answer says to go to 3.17+ - why do you think 3.13 would make a difference?"}, {"owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "edited": false, "score": 0, "creation_date": 1610914775, "post_id": 55816611, "comment_id": 116277224, "body": "I tryied 3.34. No warings, but failing test. Then I pin down that 3.13 is first version which broke will not let my test pass. Sorry for misleading. I was meant as side note about upgrading."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 6, "last_activity_date": 1556040822, "creation_date": 1556040822, "answer_id": 55816611, "question_id": 55816291, "link": "https://stackoverflow.com/questions/55816291/suppress-selenium-warnings-when-running-cucumber-test-on-local-machine/55816611#55816611", "title": "Suppress Selenium Warnings when running Cucumber Test on Local Machine", "body": "<p>Update to the latest Capybara (3.17+) and it should suppress the warnings for you (unless you're actually specifying those classes in your code).  The other option is to lock <code>selenium-webdriver</code> to 3.141.0 in your Gemfile.</p>\n"}], "owner": {"reputation": 41, "user_id": 10106077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89e8d68478a272086344775feac1982?s=128&d=identicon&r=PG&f=1", "display_name": "Syed ", "link": "https://stackoverflow.com/users/10106077/syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556045413, "creation_date": 1556039629, "last_edit_date": 1556045413, "question_id": 55816291, "link": "https://stackoverflow.com/questions/55816291/suppress-selenium-warnings-when-running-cucumber-test-on-local-machine", "title": "Suppress Selenium Warnings when running Cucumber Test on Local Machine", "body": "<p>I am trying to suppress <strong>selenium</strong> warning whenever I run a cucumber test on my local machine. </p>\n\n<p>I tried the following:</p>\n\n<ol>\n<li><code>options.add_argument(\"--disable-logging\")</code></li>\n<li><code>options.add_argument('log-level=3')</code></li>\n</ol>\n\n<p>Below is what the warnings look like on my console: </p>\n\n<pre><code>2019-04-23 12:42:33 WARN Selenium [DEPRECATION] Selenium::WebDriver::Error::InvalidElementStateError is deprecated. Use Selenium::WebDriver::Error::ElementNotInteractableError (ensure the driver supports W3C WebDriver specification) instead.\n2019-04-23 12:42:33 WARN Selenium [DEPRECATION] Selenium::WebDriver::Error::ElementNotSelectableError is deprecated. Use Selenium::WebDriver::Error::ElementNotInteractableError (ensure the driver supports W3C WebDriver specification) instead.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1556039174, "post_id": 55816046, "comment_id": 98299105, "body": "Looks like this is a bug in Ruby 2.5. According to <a href=\"https://github.com/mikel/mail/issues/1209\" rel=\"nofollow noreferrer\">this issue</a>, it may have been fixed in 2.5.3 or in 2.6."}, {"owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "edited": false, "score": 0, "creation_date": 1556080137, "post_id": 55816046, "comment_id": 98310402, "body": "Try to add the method &quot;dup&quot; <a href=\"https://stackoverflow.com/questions/2204945/ruby-cant-modify-frozen-string-typeerror\" title=\"ruby cant modify frozen string typeerror\">stackoverflow.com/questions/2204945/&hellip;</a>"}, {"owner": {"reputation": 1099, "user_id": 2789806, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7aa33579aa0603dce450f5956bdf8d89?s=128&d=identicon&r=PG", "display_name": "Alon Dahari", "link": "https://stackoverflow.com/users/2789806/alon-dahari"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1556131571, "post_id": 55816046, "comment_id": 98337608, "body": "@moveson I don&#39;t think it&#39;s fixed. I tried 2.5.3, 2.5.5 and 2.6.2 and got the same error every time"}, {"owner": {"reputation": 1099, "user_id": 2789806, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7aa33579aa0603dce450f5956bdf8d89?s=128&d=identicon&r=PG", "display_name": "Alon Dahari", "link": "https://stackoverflow.com/users/2789806/alon-dahari"}, "reply_to_user": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "edited": false, "score": 0, "creation_date": 1556131627, "post_id": 55816046, "comment_id": 98337627, "body": "@AndriyKondzolko Don&#39;t think that&#39;ll work for me, I need to modify the actual object, not a duplicate of it."}, {"owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "edited": false, "score": 0, "creation_date": 1618262991, "post_id": 55816046, "comment_id": 118545014, "body": "I just upgraded to Ruby 2.7.3 from 2.6.6 and this became an issue for me, with HUNDREDS of test errors like yours (<code>FrozenError: can&#39;t modify frozen String: &quot;&quot;</code>). I don&#39;t know how to proceed."}, {"owner": {"reputation": 5170, "user_id": 2622934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75041580faf9fba4c3282d529bf3a92c?s=128&d=identicon&r=PG", "display_name": "cschroed", "link": "https://stackoverflow.com/users/2622934/cschroed"}, "edited": false, "score": 1, "creation_date": 1618326178, "post_id": 55816046, "comment_id": 118565029, "body": "Can you include the error backtrace and version of Rails you are using?"}, {"owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "edited": false, "score": 0, "creation_date": 1618600532, "post_id": 55816046, "comment_id": 118660413, "body": "Sorry, my <code>FrozenError: can&#39;t modify frozen String: &quot;&quot;</code> errors were unrelated to <code>Time.zone=</code>; ultimately I used <code>rails test -b</code> to view the errors with a backtrace and it led me to discover that the error was not in my codebase but in a gem."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1618830059, "post_id": 55816046, "comment_id": 118712625, "body": "Could you add the full exception including backtrace to the question?"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5210348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P7AG4.jpg?s=128&g=1", "display_name": "Sergey Burtsev", "link": "https://stackoverflow.com/users/5210348/sergey-burtsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1618596355, "creation_date": 1618596355, "answer_id": 67130162, "question_id": 55816046, "link": "https://stackoverflow.com/questions/55816046/frozenerror-cant-modify-frozen-string-ruby-2-5/67130162#67130162", "title": "FrozenError - can&#39;t modify frozen String (ruby 2.5+)", "body": "<p>You can use Time.use_zone(zone) with a block, for example:</p>\n<pre><code>class ApplicationController &lt; ActionController::Base\n  around_action :set_time_zone\n\n  def set_time_zone\n    if logged_in?\n      Time.use_zone(current_user.location.time_zone) { yield }\n    else\n      yield\n    end\n  end\nend\n</code></pre>\n<p><a href=\"https://api.rubyonrails.org/classes/Time.html#method-c-zone-3D\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/Time.html#method-c-zone-3D</a></p>\n"}], "owner": {"reputation": 1099, "user_id": 2789806, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7aa33579aa0603dce450f5956bdf8d89?s=128&d=identicon&r=PG", "display_name": "Alon Dahari", "link": "https://stackoverflow.com/users/2789806/alon-dahari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3027, "favorite_count": 0, "answer_count": 1, "score": 10, "last_activity_date": 1618596355, "creation_date": 1556038528, "last_edit_date": 1556040195, "question_id": 55816046, "link": "https://stackoverflow.com/questions/55816046/frozenerror-cant-modify-frozen-string-ruby-2-5", "title": "FrozenError - can&#39;t modify frozen String (ruby 2.5+)", "body": "<p>I'm trying to update ruby in our project to 2.5 and up, and bundler from <code>1.17.2</code> to <code>2.0.1</code>. After doing so, running our application produces the following error in multiple places:</p>\n\n<pre><code>FrozenError - can't modify frozen String:\n</code></pre>\n\n<p>This is a result of trying to set the timezone in a controller (<code>Time.zone = current_user.location.time_zone</code>) among other places.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 1, "creation_date": 1556037856, "post_id": 55815753, "comment_id": 98298470, "body": "Did you create and migrate the database? <code>rails db:create</code> and <code>rails db:migrate</code> and seed if necessary?"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "reply_to_user": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 0, "creation_date": 1556039910, "post_id": 55815753, "comment_id": 98299438, "body": "as stated above NO rake/rails command works. It throws the exact same error"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1556043171, "post_id": 55815753, "comment_id": 98300883, "body": "yes devise actually does that &#39;  config.mailer_sender = Setting.first.from_email if Setting.first.present?&#39;"}, {"owner": {"reputation": 304, "user_id": 1046317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99260bd1182482ecdd7bc522965c0da3?s=128&d=identicon&r=PG", "display_name": "Gonzalo Moreno Caballero", "link": "https://stackoverflow.com/users/1046317/gonzalo-moreno-caballero"}, "edited": false, "score": 0, "creation_date": 1556050242, "post_id": 55815753, "comment_id": 98303776, "body": "try <code>config.mailer_sender = Setting.first.from_email if ActiveRecord::Base.connection.table_exists? &#39;settings&#39; &amp;&amp; Setting.first.present?</code>"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1556197899, "post_id": 55815753, "comment_id": 98362016, "body": "i&#39;ve already fixed the problem by disabling that init line in devise, before doing the migration. mu_is_too_short gave me that idea."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 1, "creation_date": 1556197850, "post_id": 55822791, "comment_id": 98361995, "body": "as already stated -&gt; NO rake command works ... none, well or rather said worked. fixed the problem, it was related to devise"}], "tags": [], "owner": {"reputation": 373, "user_id": 11402804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALDDn.jpg?s=128&g=1", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/11402804/andriy-kondzolko"}, "is_accepted": false, "score": 0, "last_activity_date": 1556082633, "creation_date": 1556082633, "answer_id": 55822791, "question_id": 55815753, "link": "https://stackoverflow.com/questions/55815753/how-to-fix-pgundefinedtable-error-relation-does-not-exist/55822791#55822791", "title": "How to fix PG::UndefinedTable: ERROR: relation does not exist", "body": "<p>Try <code>rake db:reset</code>!</p>\n\n<p>If it doesn't help, try to drop BD! </p>\n\n<pre><code>rake db:drop\n</code></pre>\n\n<p>then create new db</p>\n\n<pre><code>db:create\n</code></pre>\n\n<p>and run migrate</p>\n\n<pre><code>db:migrate\n</code></pre>\n\n<p>also, populate your DB if you have some code in \"seed\" file!</p>\n\n<pre><code>rake db:seed\n</code></pre>\n\n<p>Sometimes if your rake command doesn't work try to add before rake comment in your console:</p>\n\n<pre><code>bundle exec\n</code></pre>\n\n<p>Example: </p>\n\n<pre><code>bundle exec rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556082633, "creation_date": 1556037253, "question_id": 55815753, "link": "https://stackoverflow.com/questions/55815753/how-to-fix-pgundefinedtable-error-relation-does-not-exist", "title": "How to fix PG::UndefinedTable: ERROR: relation does not exist", "body": "<p>So i'm installing this app on a 3rd laptop, and it's working fine on the other 2, however on this one i'm hitting this psql error whatever rake command i try. Actually no rake command works. I've already tried everything i've seen around here, reinstalled the app, reinstalled the gems, dropped the table from the psql, and i'm totally clueless as to where the issue is. I'm out of ideas. I would assume it's a config problem somewhere .. or some version of something that's creating a conflict</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.0.7.2 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\nExiting\n/home/allg/.rvm/gems/ruby-2.3.1/gems/activerecord-5.0.7.2/lib/active_record/connection_adapters/postgresql_adapter.rb:600:in `async_exec': PG::UndefinedTable: ERROR:  relation \"settings\" does not exist (ActiveRecord::StatementInvalid)\nLINE 1: SELECT  \"settings\".* FROM \"settings\" ORDER BY \"settings\".\"id...\n                                  ^\n: SELECT  \"settings\".* FROM \"settings\" ORDER BY \"settings\".\"id\" ASC LIMIT 1\n    from /home/allg/.rvm/gems/ruby-2.3.1/gems/activerecord-5.0.7.2/lib/active_record/connection_adapters/postgresql_adapter.rb:600:in `block in exec_no_cache'\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 172, "user_id": 854528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ea6bb88f1b1a94ef8f8444043cca13?s=128&d=identicon&r=PG", "display_name": "ray", "link": "https://stackoverflow.com/users/854528/ray"}, "edited": false, "score": 0, "creation_date": 1556047990, "post_id": 55815662, "comment_id": 98302846, "body": "I think that you&#39;re using action_access, is a gem for rails. Well before you use that you should implement according to his documentation. <a href=\"https://github.com/matiasgagliano/action_access\" rel=\"nofollow noreferrer\">github.com/matiasgagliano/action_access</a>"}], "answers": [{"comments": [{"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556107908, "post_id": 55816069, "comment_id": 98324158, "body": "Yes, when I created an account for a user then created a hairstyle the &quot;delete&quot; button showed up. However now when I log them out and then log back in with their account the delete button does not show up.. So strange. Ar yes I have heard of Pundit I will see how to implement it. Would you recommend that or action_access as others have mentioned above? thanks in advance"}, {"owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "reply_to_user": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556219847, "post_id": 55816069, "comment_id": 98373831, "body": "Well, the only explanation from your code above is, that the signed-in user (<code>current_user</code>) is not the <code>hairstyle.user</code>. Try to <code>raise</code> and check their IDs in the console. I assume you use devise for the sign in process?! PS: Ahhh, you&#39;re Le Wagon alumni too? Let&#39;s connect on slack!  Regarding the gems, I have only worked with Pundit, but CanCan seems nice too. The action_access gem hasn&#39;t been maintained in 3 years (see the github), so I would not go for that one."}], "tags": [], "owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "is_accepted": false, "score": 1, "last_activity_date": 1556038653, "creation_date": 1556038653, "answer_id": 55816069, "question_id": 55815662, "link": "https://stackoverflow.com/questions/55815662/edit-and-delete-function-for-signed-in-users-only/55816069#55816069", "title": "edit and delete function for signed in users only", "body": "<p>Can you specifiy what you mean by it stopped working please? Maybe you're not signed in currently?</p>\n\n<p>Also for this functionality you should use an authorization tool like <a href=\"https://github.com/varvet/pundit\" rel=\"nofollow noreferrer\">pundit</a>. Because right now, you're just hiding the respective links to the actions in the view. But if the user would guess the url and type it in the browser, they could still delete or edit other users objects. Pundit, with it's concept of policies is avoiding exactly that.</p>\n"}, {"tags": [], "owner": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "is_accepted": false, "score": 0, "last_activity_date": 1556048115, "creation_date": 1556048115, "answer_id": 55818247, "question_id": 55815662, "link": "https://stackoverflow.com/questions/55815662/edit-and-delete-function-for-signed-in-users-only/55818247#55818247", "title": "edit and delete function for signed in users only", "body": "<p>Tip about your code, use cancancan gem to dry your code, also its help to centralise your \"security access\"</p>\n"}, {"comments": [{"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556107758, "post_id": 55818331, "comment_id": 98324057, "body": "Ok great thanks for the recommendation I&#39;ll have a look now"}], "tags": [], "owner": {"reputation": 172, "user_id": 854528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ea6bb88f1b1a94ef8f8444043cca13?s=128&d=identicon&r=PG", "display_name": "ray", "link": "https://stackoverflow.com/users/854528/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1556048526, "creation_date": 1556048526, "answer_id": 55818331, "question_id": 55815662, "link": "https://stackoverflow.com/questions/55815662/edit-and-delete-function-for-signed-in-users-only/55818331#55818331", "title": "edit and delete function for signed in users only", "body": "<p>According to your issue, I would recommend using action_access, is easy to implement, and easy to assign permissions to edit, delete or update for each user that you have.\nLink: <a href=\"https://github.com/matiasgagliano/action_access\" rel=\"nofollow noreferrer\">https://github.com/matiasgagliano/action_access</a></p>\n"}], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556048526, "creation_date": 1556036946, "question_id": 55815662, "link": "https://stackoverflow.com/questions/55815662/edit-and-delete-function-for-signed-in-users-only", "title": "edit and delete function for signed in users only", "body": "<p>I am trying to use the current_user helper tag from rails in order to let users who are signed in EDIT and DELETE the objects they created whilst logged in. </p>\n\n<p>This seemed to be working for me last week but now I have come back to my app and it has stopped. I also implemented the same function for my edit function on my show page  but it does not work. Please can someone tell me where I am going wrong do I have the right syntax for this function to work? Thank you in advance :)</p>\n\n<p>My index.html.erb file:</p>\n\n<pre><code> &lt;div class=\"row justify-content-around p-3\"&gt;\n  &lt;% @hairstyles.each do |hairstyle| %&gt;\n    &lt;div class=\"card m-3\"&gt;\n      &lt;div&gt;\n      &lt;%= cl_image_tag hairstyle.photo, width: 300, height: 200, crop: :fill, class: 'card-image'%&gt;\n      &lt;/div&gt;\n      &lt;div class=\"card-body\"&gt;\n        &lt;div class=\"card2\"&gt;\n          &lt;div class=\"card-body-inner1 transbox\"&gt;\n            &lt;h5 class=\"card-title\"&gt;&lt;%= link_to hairstyle.name, hairstyle_path(hairstyle) %&gt;&lt;/h5&gt;\n            &lt;p&gt;Location: &lt;%= hairstyle.location%&gt;&lt;/p&gt;\n          &lt;/div&gt;\n\n          &lt;div class =\"card-body-inner2 d-flex\"&gt;\n            &lt;p&gt; Likes&lt;/p&gt;\n            &lt;p&gt; Share&lt;/p&gt;\n\n          &lt;% if hairstyle.user == current_user%&gt;\n           &lt;p&gt; &lt;%= link_to \"Delete\", hairstyle_path(hairstyle), method: :delete, data: { confirm: \"Are you sure?\" }%&gt;&lt;/p&gt;\n          &lt;%end %&gt;\n          &lt;/div&gt;         \n      &lt;/div&gt;\n\n\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>def create\n    @hairstyle = Hairstyle.create(hairstyle_params)\n    # @hairstyle.save ? (redirect_to hairstyle_path(@hairstyle)):(render 'new')\n    @hairstyle.user = current_user\n    if @hairstyle.save!\n      redirect_to hairstyle_path(@hairstyle)\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556033669, "post_id": 55813895, "comment_id": 98296230, "body": "I don&#39;t see how this solves the problem, @Nsikan. I did it with the same approach and still nothing."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556034904, "post_id": 55813895, "comment_id": 98296900, "body": "let&#39;s see the controller&#39;s action"}, {"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556035895, "post_id": 55813895, "comment_id": 98297425, "body": "Just updated the question with the controller&#39;s action, @Nsikan."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556036138, "post_id": 55813895, "comment_id": 98297568, "body": "let me see this function create_candidate_skill_tags"}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556036264, "post_id": 55813895, "comment_id": 98297634, "body": "can you do this as well params.require(:candidate).permit!"}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556036869, "post_id": 55813895, "comment_id": 98297952, "body": "let me see this function create_candidate_skill_tags"}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556037518, "post_id": 55813895, "comment_id": 98298298, "body": "name=&quot;candidate[market_segment_id]&quot; from generated form. your name is getting Id s  but in <code>create_candidate_skill_tags</code>  <code>@candidate.skill_tags &lt;&lt; SkillTag.where(name: skill_text).first_or_create</code> is checking for where SkillTag mactches name. should be <code>@candidate.skill_tags &lt;&lt; SkillTag.where(id: skill_text).first_or_create</code>"}, {"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556037982, "post_id": 55813895, "comment_id": 98298539, "body": "I think this function has nothing to do with what&#39;s going on, @Nsikan.  I explicitly state in the question description that I&#39;m having an issue with market_segment, that is completely different from skilltags."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556038205, "post_id": 55813895, "comment_id": 98298648, "body": "ok I see what of <code>candidate_params</code> ?  actually I have use it with HABTM and it  works fine. if you are interested I can give you my source codes."}, {"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556038319, "post_id": 55813895, "comment_id": 98298704, "body": "All candidate&#39;s attributes, including :market_segment_id."}, {"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556038405, "post_id": 55813895, "comment_id": 98298740, "body": "In my case, I use it with has_one :market_segment (on Candidate class)."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556041621, "post_id": 55813895, "comment_id": 98300197, "body": "has_one has a convention of creating the actual association in controller action e.g  ` @admin = current_admin     @company = Company.create(company_params)     @company.companyadmin_id= @admin.id     @admin.company = @company     @company.save`  You need to manually enable the association. find the market_segment and associate it."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556042290, "post_id": 55813895, "comment_id": 98300463, "body": "<code>@ms = MarketSegment.find(params[:market_segment_id]) then @candidate.market_segment = @ms </code>"}, {"owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556044539, "post_id": 55813895, "comment_id": 98301456, "body": "That&#39;s true, but it is not the problem. It is already updating the market_segment_id with the value from params. The question is that params is getting the wrong value from the form and I don&#39;t know why but it is always the value of the last radio button."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556047637, "post_id": 55813895, "comment_id": 98302687, "body": "use the form in my answer."}, {"owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "reply_to_user": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "edited": false, "score": 0, "creation_date": 1556052998, "post_id": 55813895, "comment_id": 98305009, "body": "one more thing, remove it from the partial. create a the form in the edit view."}], "tags": [], "owner": {"reputation": 367, "user_id": 8789323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMAPx.png?s=128&g=1", "display_name": "Nsikan Sylvester", "link": "https://stackoverflow.com/users/8789323/nsikan-sylvester"}, "is_accepted": false, "score": 0, "last_activity_date": 1556037652, "last_edit_date": 1556037652, "creation_date": 1556031042, "answer_id": 55813895, "question_id": 55813310, "link": "https://stackoverflow.com/questions/55813310/how-to-fix-rails-radio-button-collection-always-returning-the-last-value/55813895#55813895", "title": "How to fix Rails radio button collection always returning the last value?", "body": "<p>I have done similar thing. You could do something like this</p>\n\n<pre><code>  def create_candidate_skill_tags \n     new_skill_tags_from_params.map do |skill_text| \n      @candidate.skill_tags &lt;&lt; SkillTag.where(id: \n    skill_text).first_or_create\n  end\n end\n\n\n&lt;label for=\"users\"&gt;&lt;strong&gt;Your Form&lt;/strong&gt;&lt;/label&gt;\n&lt;div class=\"custom-select form-control pull-right\"&gt;\n &lt;%= form.collection_check_boxes(:market_segment_id, MarketSegment.all, :id, \n    :description, \n  checked: @candidate.market_segments.map(&amp;:id)) do |b| %&gt;    \n    &lt;%= b.check_box %&gt; &lt;%= b.label %&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>also you need in your candidate.rb</p>\n\n<pre><code>has_and_belongs_to_many :market_segments, foreign_key: :candidate_id\n</code></pre>\n\n<p>and in market_segment.rb</p>\n\n<pre><code>has_and_belongs_to_many :candidates \n</code></pre>\n\n<p>ensure you have <code>:candidate_id</code> column in your db. or any how you did it.</p>\n"}], "owner": {"reputation": 11, "user_id": 11168081, "user_type": "registered", "profile_image": "https://graph.facebook.com/2108239295933184/picture?type=large", "display_name": "Diego Gonzales de Souza", "link": "https://stackoverflow.com/users/11168081/diego-gonzales-de-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556038510, "creation_date": 1556029028, "last_edit_date": 1556038510, "question_id": 55813310, "link": "https://stackoverflow.com/questions/55813310/how-to-fix-rails-radio-button-collection-always-returning-the-last-value", "title": "How to fix Rails radio button collection always returning the last value?", "body": "<p>We have an application that has many models, two of them are behaving curiously (Candidate and MarketSegment).</p>\n\n<p>Each entity of class Candidate holds a market_segment_id attribute. We also have a form that allows us to edit instance of Candidate and submit/update via a JSON request.</p>\n\n<p>When I try to render a partial that builds the collection of radio buttons with market segment options to be selected for that candidate within the edit form, I'm always getting the last value/market_segment_id of the radio button list in params hash, that is market_segment_id => '35' every time.</p>\n\n<p>We already tried many different approaches, including:</p>\n\n<p>1) Inspected html to confirm if the 'collection_radio_buttons' helper is generating the right values for each button;</p>\n\n<p>2) Built the loop to create each radio button with its respective attributes manually.</p>\n\n<pre><code>&lt;%= render partial: 'shared/forms/market_segments_select', locals: {f: f} %&gt;\n</code></pre>\n\n<p>ruby/erb partial content that generates radio button list</p>\n\n<pre><code>&lt;div class=\"w-100 h4 overflow-scroll overflow-x-hidden bn pt3\"&gt;\n  &lt;%= f.collection_radio_buttons :market_segment_id, MarketSegment.all, :id, :description_pt do |m| %&gt;\n    &lt;div class=\"w-100 mb2 market_segment__radio-group\"&gt;\n      &lt;%= m.radio_button %&gt;\n      &lt;%= m.label %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>html generated by the partial</p>\n\n<pre><code>&lt;div class=\"w-100 h4 overflow-scroll overflow-x-hidden bn pt3\"&gt;\n  &lt;input type=\"hidden\" name=\"candidate[market_segment_id]\" value=\"\" /&gt;\n    &lt;div class=\"w-100 mb2 market_segment__radio-group\"&gt;\n      &lt;input type=\"radio\" value=\"1\" name=\"candidate[market_segment_id]\" id=\"candidate_market_segment_id_1\" /&gt;\n      &lt;label for=\"candidate_market_segment_id_1\"&gt;Agroneg\u00f3cio e Bioenergia&lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"w-100 mb2 market_segment__radio-group\"&gt;\n      &lt;input type=\"radio\" value=\"2\" name=\"candidate[market_segment_id]\" id=\"candidate_market_segment_id_2\" /&gt;\n      &lt;label for=\"candidate_market_segment_id_2\"&gt;Alimentos&lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"w-100 mb2 market_segment__radio-group\"&gt;\n      &lt;input type=\"radio\" value=\"3\" name=\"candidate[market_segment_id]\" id=\"candidate_market_segment_id_3\" /&gt;\n      &lt;label for=\"candidate_market_segment_id_3\"&gt;Auditoria&lt;/label&gt;\n    &lt;/div&gt;\n...and so on until market_segment_id = 35\n</code></pre>\n\n<p>params</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"Sgpo39Lo...==\", \"candidate\"=&gt;{\"avatar\"=&gt;\"\", ..., \"market_segment_id\"=&gt;\"35\", ...}, \"commit\"=&gt;\"Atualizar\", \"id\"=&gt;\"8\"}\n</code></pre>\n\n<p>controller action</p>\n\n<pre><code>def update\n    respond_to do |format|\n      if @candidate.update(candidate_params)\n        create_candidate_skill_tags\n\n        format.html do\n          redirect_to admin_candidate_path(@candidate),\n                      notice: 'Candidato atualizado com sucesso'\n        end\n        format.json { render json: @candidate, status: :ok }\n      else\n        format.html { render :edit }\n        format.json do\n          render json: @candidate.errors, status: :unprocessable_entity\n        end\n     end\n  end\nend\n</code></pre>\n\n<p>Regardless of the radio button I select the params always get market_segment_id => '35' (that is the last record of the MarketSegment table.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1556028816, "post_id": 55813215, "comment_id": 98293184, "body": "What would be wrong with plain old good SQL query to update everything at once? It should drastically decrease the update time."}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 1, "creation_date": 1556029860, "post_id": 55813215, "comment_id": 98293804, "body": "You should post the table structure here and the update query then we can give advice."}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1556030278, "creation_date": 1556030278, "answer_id": 55813665, "question_id": 55813215, "link": "https://stackoverflow.com/questions/55813215/what-is-the-best-way-to-execute-a-bulk-update-of-all-records-in-a-large-table/55813665#55813665", "title": "What is the best way to execute a bulk update of all records in a large table", "body": "<p>For such large updates overhead of fetching records and instantiating AR objects is very significant (and also there'll be slowdown from GC), fastest way to execute - is to write raw sql query that will do the update (or use <code>update_all</code> to construct it, which is very similar, but allows to use scopes/joins by relations).</p>\n"}], "owner": {"reputation": 1, "user_id": 11400229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O7-CG24MZEs/AAAAAAAAAAI/AAAAAAAAAcc/bOcLCjhfvtM/photo.jpg?sz=128", "display_name": "Arun Murugan", "link": "https://stackoverflow.com/users/11400229/arun-murugan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556030278, "creation_date": 1556028717, "question_id": 55813215, "link": "https://stackoverflow.com/questions/55813215/what-is-the-best-way-to-execute-a-bulk-update-of-all-records-in-a-large-table", "title": "What is the best way to execute a bulk update of all records in a large table", "body": "<p>What is the best way to execute a bulk update of all records in a large table in MySQL?</p>\n\n<p>During the sanitization process, we are updating all rows in the users table, which has 28M rows, to mask a few columns.  This is currently taking right around 2 hours to complete in a rake task, and the AWS session expiration is also 2 hours.  If the rake task takes longer than the session expiration, the build will fail.</p>\n\n<p>Due to a large number of records, we are updating 25K rows at a time by using find_in_batches, and then update_all in the results.  We throttle between each batch by sleeping for 0.1s to avoid high CPU.  </p>\n\n<p>So the question is, is there any way we can optimize the bulk update further, or shall we increase the AWS session expiration to 3 hours?</p>\n\n<p>One option could be to batch by id ranges, rather than by exact batch sizes.  So update between id 1-100000, followed by 100001-200000, and so on.  This avoids the large sets of ids being passed around.  As there will be gaps in the ids, each batch would be a different size, but this might not be an issue.</p>\n\n<p>Thanks for your input.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "partials"], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "edited": false, "score": 0, "creation_date": 1556029267, "post_id": 55812959, "comment_id": 98293475, "body": "Thank you! But how <code>current_language</code> is overrided when checked it in line 3 before even overriding it?"}, {"owner": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "edited": false, "score": 0, "creation_date": 1556029349, "post_id": 55812959, "comment_id": 98293523, "body": "Shall it be overrided in line 5 or am I missing something?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "edited": false, "score": 1, "creation_date": 1556029608, "post_id": 55812959, "comment_id": 98293672, "body": "Follow the links in the referenced answer and google for \u201cvariable hoisting.\u201d"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1556027910, "creation_date": 1556027910, "answer_id": 55812959, "question_id": 55812594, "link": "https://stackoverflow.com/questions/55812594/do-partial-variables-override-helper-methods/55812959#55812959", "title": "Do partial variables override helper methods?", "body": "<p>It\u2019s well-documented feature of the language. The variable is kinda hoisted. Use this code to explicitly tell the parser where is the variable and where is the method call:</p>\n\n<pre><code>#                                                                      \u21d3\u21d3\ncurrent_language = local_assigns[:current_language] || current_language()\n</code></pre>\n"}], "owner": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1556028367, "accepted_answer_id": 55812959, "answer_count": 1, "score": 0, "last_activity_date": 1556027910, "creation_date": 1556026784, "question_id": 55812594, "link": "https://stackoverflow.com/questions/55812594/do-partial-variables-override-helper-methods", "closed_reason": "Duplicate", "title": "Do partial variables override helper methods?", "body": "<p>I have some helper method that called <code>current_language</code> and sometimes I send <code>current_language</code> in the <code>local_assigns</code>.</p>\n\n<p>So I want to assign my partial variable by the <code>local_assigns</code>'s <code>current_language</code> in case if it's sent.</p>\n\n<p>But I found something weird, in the following code:</p>\n\n<pre><code>&lt;%\n  binding.pry\n  x = 4\n\n  current_language = local_assigns[:current_language] || current_language\n%&gt;\n</code></pre>\n\n<p>In line 3 when debugging <code>current_language</code> equals <code>nil</code> even before overriding.</p>\n\n<p>I expect it shall still equal the helper method until it's overrided.</p>\n\n<p>So what is going on?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556102171, "post_id": 55812913, "comment_id": 98320716, "body": "Hi Vincent, I see what you mean now. I now see my console logged text when I inspect the console and create a comment. I am now going to add the actual javascript I want in the create.js.erb file and see if it executes. Thank you for your help! I may be back with another question though :)"}, {"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556107684, "post_id": 55812913, "comment_id": 98324024, "body": "Hello again Vincent. I just want to make you aware of an edit I have made to my create.js.erb file. If you have time please could you help me understand why that code is not working? I dont have any errors and the comment is created in the database  (I can see it in my terminal) but the comment does not post to the page..........."}, {"owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "reply_to_user": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556110093, "post_id": 55812913, "comment_id": 98325456, "body": "Hi Angela. I don&#39;t think <code>getElementById</code> can take more than one argument. I&#39;d do <code>comments = document.getElementById(&#39;beforeend&#39;)</code> and then <code>comments.append(newComment)</code>"}, {"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556111777, "post_id": 55812913, "comment_id": 98326569, "body": "Hi Vincent I missed your comment. Yes I realised I had written it wrong :(  I wasn&#39;t targeting the element. I was mixing the syntax for <code>getElementById</code> and <code>InsertAdjacentId</code>. I have added a solution below, which works for now :)"}], "tags": [], "owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "is_accepted": false, "score": 1, "last_activity_date": 1556027749, "creation_date": 1556027749, "answer_id": 55812913, "question_id": 55812199, "link": "https://stackoverflow.com/questions/55812199/trying-to-add-ajax-to-rails-app-to-refresh-comments-however-js-file-is-not-execu/55812913#55812913", "title": "Trying to add ajax to rails app to refresh comments however js file is not executing in browser", "body": "<p>In your <code>create</code> action your are redirecting to a new page, hence triggering a reload of the page. In the case of an AJAX call, you want to render your <code>js.erb</code> file and not redirecting</p>\n\n<pre><code>def create\n  @hairstyle = Hairstyle.find(params[:hairstyle_id])\n  @comment = Comment.new(comment_params)\n  @comment.hairstyle = @hairstyle\n  @comment.user = @user\n\n  if @comment.save!\n    respond_to do |format|\n      format.js # will render your create.js.erb file in case of an ajax call\n      format.html do\n        redirect_to hairstyle_path(@hairstyle) # will redirect to the correct path in case of a html call\n      end\n    end\n  else\n    render 'hairstyles/show'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "is_accepted": false, "score": 1, "last_activity_date": 1556111623, "creation_date": 1556111623, "answer_id": 55830933, "question_id": 55812199, "link": "https://stackoverflow.com/questions/55812199/trying-to-add-ajax-to-rails-app-to-refresh-comments-however-js-file-is-not-execu/55830933#55830933", "title": "Trying to add ajax to rails app to refresh comments however js file is not executing in browser", "body": "<p>I managed to figure out the issue. </p>\n\n<p>I was not inserting adjacentHTML after line 5 of my edited create.js.erb file code.</p>\n\n<p>Here is the amended code in my create.js.erb file which now allows a user to \npost a comment and for the comment to be inserted below the rest of the comments on the page and for the comment box to refresh to be blank once the comment has been posted.</p>\n\n<pre><code>\n  var newComment  = \"&lt;%= j render 'comments/show',comment: @comment%&gt;\";\n  // 2. append the new review to the list\n  var comments = document.getElementById('comments');\n  comments.insertAdjacentHTML('beforeend', newComment)\n\n  // 3. Empty out the input box\n var inputBox = document.getElementById('comment_content');\n  inputBox.value = \"\";\n\n\n</code></pre>\n\n<p>thank you </p>\n"}], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556111623, "creation_date": 1556025597, "last_edit_date": 1556107517, "question_id": 55812199, "link": "https://stackoverflow.com/questions/55812199/trying-to-add-ajax-to-rails-app-to-refresh-comments-however-js-file-is-not-execu", "title": "Trying to add ajax to rails app to refresh comments however js file is not executing in browser", "body": "<p>I am trying to add ajax to my rails app so that when I add a new comment to one of my objects the page does not refresh and jump back to the top of the page however it refreshes and stays in the same place. </p>\n\n<p>In order to test that the js I will write in order to do this is working I console logged some text in a separate file <code>views/comments/create.js.erb</code> to make sure that the JS was executed in my browser.</p>\n\n<p>When I go to my browser and inspect then click the Console tab, when I create a comment I expect to saee the text I console logged. Instead I see nothing.</p>\n\n<p>Can someone tell me if I m not linking something correctly? Here is my repo if needs be: <a href=\"https://github.com/Angela-Inniss/hair-do\" rel=\"nofollow noreferrer\">https://github.com/Angela-Inniss/hair-do</a></p>\n\n<p>Thank you so much in advance</p>\n\n<p>comments controller: </p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  def new\n    @hairstyle = Hairstyle.find(params[:hairstyle_id])\n    @comment = Comment.new\n  end\n\n  def create\n    # we need to find the hairstyle route would be\n    # hairstyle/hairstyle id/comments\n    @hairstyle = Hairstyle.find(params[:hairstyle_id])\n    @comment = Comment.new(comment_params)\n    @comment.hairstyle = @hairstyle\n    @comment.user = @user\n\n     if @comment.save!\n      redirect_to hairstyle_path(@hairstyle)\n    else\n      render 'hairstyles/show'\n    end\n  end\n\n  def destroy\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:content)\n  end\nend\n\n\n</code></pre>\n\n<p>views/comments/create.js.erb file(this is the text I would like to see in my browser under CONSOLE:</p>\n\n<pre><code>console.log('hello ajax')\n</code></pre>\n\n<p>UPDATE TO CREATE.JS.ERB FILE, now that I know the javascript is working (from the console.log that I did above) I added the javascript i wanted to the create.js.erb file (See below) but it does not perform the action I want. I would like the users comment to be inserted at the end of the existing comments and for the page to not refresh and go to the top of the screen then i want to comment box to clear. Can you see anything that looks out of place in the below code: \nI have pushed my repo again for ease of understanding: <a href=\"https://github.com/Angela-Inniss/hair-do\" rel=\"nofollow noreferrer\">https://github.com/Angela-Inniss/hair-do</a></p>\n\n<pre><code>&lt;% if @comment.persisted? %&gt;\n  // 1.create the html for the review\n  newComment  = \"&lt;p&gt;&lt;%= @comment.content %&gt;&lt;/p&gt;\"\n  // 2. append the new review to the list\n  comments = document.getElementById('beforeend', newComment);\n  // 3. Empty out the input box\n  inputBox = document.getElementById('new_comment');\n  inputBox.value = \"\";\n&lt;%end%&gt;\n\n</code></pre>\n"}, {"tags": ["ruby", "api", "coinbase-api", "faraday"], "comments": [{"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 1, "creation_date": 1556023562, "post_id": 55811195, "comment_id": 98289888, "body": "have you tried converting TimeStamp to string? and make a request"}, {"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 0, "creation_date": 1556023759, "post_id": 55811195, "comment_id": 98290009, "body": "when i tried by converting it to string i go this response <code>{&quot;message&quot;=&gt;&quot;User-Agent header is required.&quot;}</code> &amp; i used HTTPparty"}], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 1, "last_activity_date": 1556024072, "creation_date": 1556024072, "answer_id": 55811740, "question_id": 55811195, "link": "https://stackoverflow.com/questions/55811195/connecting-to-coinbase-api-with-ruby-and-running-into-connection-issue-faraday/55811740#55811740", "title": "Connecting to Coinbase API with Ruby and running into connection issue. Faraday", "body": "<p>You can check the code at <a href=\"https://github.com/ruby/ruby/blob/ruby_2_3/lib/net/http/header.rb#L18\" rel=\"nofollow noreferrer\">http/header.rb</a>: it calls <code>strip</code> on every header, so every header value should be a string.</p>\n\n<p>I think this is the offending line, you are supplying an integer here as the header value:</p>\n\n<pre><code>req.headers['CB-ACCESS-TIMESTAMP'] = Time.now.to_i\n</code></pre>\n\n<p>Converting it to string should fix it:</p>\n\n<pre><code>req.headers['CB-ACCESS-TIMESTAMP'] = Time.now.to_i.to_s\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 55811740, "answer_count": 1, "score": 0, "last_activity_date": 1556024072, "creation_date": 1556022351, "question_id": 55811195, "link": "https://stackoverflow.com/questions/55811195/connecting-to-coinbase-api-with-ruby-and-running-into-connection-issue-faraday", "title": "Connecting to Coinbase API with Ruby and running into connection issue. Faraday", "body": "<p>Attempting to connect to the Coinbase GDAX sandbox API with Ruby.\nCurrently using Faraday, but HTTParty or Ruby Core API advice is welcomed.</p>\n\n<p>I am having a hard time making post requests and can't seem to tell where I am messing this up.</p>\n\n<p>A laundry list of error's appear but the top one is:</p>\n\n<blockquote>\n  <p>/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http/header.rb:18:in\n  <code>block in initialize_http_header': undefined method</code>strip' for\n  1556021965:Fixnum (NoMethodError)</p>\n</blockquote>\n\n<p>Coinbase docs: <a href=\"https://docs.pro.coinbase.com/?ruby#signing-a-message\" rel=\"nofollow noreferrer\">https://docs.pro.coinbase.com/?ruby#signing-a-message</a></p>\n\n<p>My api call in a nutshell.</p>\n\n<pre><code>payload = { \n            \"data\": \"DATA\"        \n        }\n\n        url = 'https://api-public.sandbox.gdax.com/orders'\n        conn = Faraday.new      \n        response = conn.post do |req|           \n            req.url url\n            req.headers['REQ-HEADER-1'] = \"FOO\",\n            req.headers['REQ-HEADER-1'] = \"BAR\",           \n            req.body = payload      \n        end\n\n        puts response\n</code></pre>\n\n<hr>\n\n<p>Full Code</p>\n\n<pre><code>require 'Faraday' require 'base64' require 'openssl' require 'json'\n\n\nclass foo\n\n\n    def initialize\n        @api_key = '25b1d259417d159443c03ed14eb9ee49'       \n        @api_secret = 'trBTZUj4zLfHEBfbQy3+LeLOaAeAbfG/zCqIvzu3RyiKhqf5y85NYqqZi7GUSBCzhryud1pyOs5idibzdOx/tw=='        \n        @api_pass = '7zkf0bvr6q4'       \n    end         \n\n    def signature(request_path='', body='', timestamp=nil, method='POST')\n      body = body.to_json if body.is_a?(Hash)\n      timestamp = Time.now.to_i if !timestamp\n\n      what = \"#{timestamp}#{method}#{request_path}#{body}\";\n\n      # create a sha256 hmac with the secret\n      secret = Base64.decode64(@api_secret)\n      hash  = OpenSSL::HMAC.digest('sha256', secret, what)\n      Base64.strict_encode64(hash)\n    end\n\n    def post_buy\n\n        usd = get_usd_available         \n        usd = usd / 2       \n\n        payload = { \n            \"funds\": usd.to_s,\n            \"product_id\": \"BTC-USD\",\n            \"side\": \"buy\",\n            \"type\": \"market\"        \n        }\n\n        url = 'https://api-public.sandbox.gdax.com/orders'\n        conn = Faraday.new      \n        response = conn.post do |req|           \n            req.url url\n            req.headers['CB-ACCESS-KEY'] = @api_key,\n            req.headers['CB-ACCESS-SIGN'] = signature( url, payload),\n            req.headers['CB-ACCESS-TIMESTAMP'] = Time.now.to_i,\n            req.headers['CB-ACCESS-PASSPHRASE'] = @passphrase,           \n            req.body = payload      \n        end\n\n        puts response\n\n    end\n\nend\n\nfoo.new.post_buy\n</code></pre>\n"}, {"tags": ["ruby", "inheritance"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556046018, "post_id": 55811156, "comment_id": 98302029, "body": "In <code>associated_model</code>, <code>self.class.to_s #=&gt; &quot;BaserService&quot;</code>, so <code>&quot;BaserService&quot;.delete(&quot;EventsService&quot;) #=&gt;  &quot;Ba&quot;</code>. Is that what you want? Also, Ruby does not have a method <code>constantize</code>. I believe Rails has one, but there&#39;s no Rails tag. Lastly, there&#39;s no need for <code>&quot;(Ruby)&quot;</code> in the title since you have a &quot;Ruby&quot; tag."}, {"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556097603, "post_id": 55811156, "comment_id": 98318104, "body": "@CarySwoveland this is indeed from a rails project. I deleted the ref to ruby in the title as suggested. The associated_model is supposed to be called in child classes. BaseService is actually an &quot;abstract class&quot; (even though there&#39;s no such thing in ruby), so I dont think this is a problem"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556175580, "post_id": 55811156, "comment_id": 98349464, "body": "I suggest you add a Rails tag."}], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1556024856, "post_id": 55811240, "comment_id": 98290687, "body": "I see but my problem is that I want my method in the child class to be named <code>create</code>...What Im looking for is some kind of reverse Super I guess. @SergioTulentsev Do you know if it&#39;s actually possible to do that ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 1, "creation_date": 1556025326, "post_id": 55811240, "comment_id": 98291019, "body": "@DavidGeismar: check out the update. That&#39;s probably the best thing you can get :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556028156, "post_id": 55811240, "comment_id": 98292767, "body": "&quot;Same as in any OOP language: behaviour override.&quot; \u2013 That is a very narrow view of &quot;OOP language&quot;. Beta&#39;s prefix inheritance works exactly like the OP needs: instead of subclass method implementations calling superclass implementations, it is the other way around: the superclass methods leave &quot;holes&quot; in the implementation to be filled by subclass methods. So, it is exactly the other way around from classical inheritance: superclass methods call their subclass implementations. Note that mixin inheritances subsumes both classical and prefix inheritance. (See the Jigsaw paper.)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556028758, "post_id": 55811240, "comment_id": 98293150, "body": "@J&#246;rgWMittag: isn&#39;t that what I did here, though (in the first snippet)? Create a hole to be filled by descendant classes? (I should check that that paper, sounds interesting)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1556028957, "post_id": 55811240, "comment_id": 98293282, "body": "The OP wants a method with the same name that overrides the superclass method, and can then be called by the superclass method. That is exactly how prefix inheritance works and is more or less the opposite of how classical inheritance works. Your first sentence seems to imply that all OOP languages use classical inheritance, which is not the case. (In fact, some don&#39;t even have inheritance at all, whereas there are non-OOP languages that do have inheritance, even classical inheritance.) The <i>Template Method</i> Pattern you are using here is essentially a workaround for lack of prefix inheritance."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1556029128, "post_id": 55811240, "comment_id": 98293395, "body": "Perfect. Might make sense to include the words <i>Template Method Design Pattern</i> somewhere, since that&#39;s what it is. Also, &quot;hook&quot; and maybe &quot;callback&quot; (although the meaning of the latter seems to have shifted towards async programming in recent years)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1556029251, "post_id": 55811240, "comment_id": 98293468, "body": "It definitely is that. Forgot the formal name :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556045660, "post_id": 55811240, "comment_id": 98301914, "body": "<code>associated_model</code> seems to be <a href=\"https://dictionary.cambridge.org/dictionary/english/awol\" rel=\"nofollow noreferrer\">AWOL</a>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556045926, "post_id": 55811240, "comment_id": 98302000, "body": "@CarySwoveland: was irrelevant, so I cut it out :shrug:"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556050718, "post_id": 55811240, "comment_id": 98303984, "body": "@CarySwoveland: I lost my buffer where I kept it and I was too lazy to go look it up. Thanks :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1556029213, "last_edit_date": 1556029213, "creation_date": 1556022498, "answer_id": 55811240, "question_id": 55811156, "link": "https://stackoverflow.com/questions/55811156/inserting-code-from-child-class-method-implementation-in-between-code-from-paren/55811240#55811240", "title": "Inserting code from child class method implementation in between code from parent class method implementation", "body": "<blockquote>\n  <p>What is the right way to implement this kind of behavior in ruby ?</p>\n</blockquote>\n\n<p>Same as in any OOP language with classical inheritance: use the <a href=\"https://en.wikipedia.org/wiki/Template_method_pattern\" rel=\"nofollow noreferrer\">Template Method</a> pattern.</p>\n\n<pre><code>class BaseService\n\n  def create\n    return if associated_model.find_by(id: @data['id'])\n\n    specific_create\n  rescue =&gt; exception\n    @failure_strategy.rescue(exception)\n  end\n\n  private\n\n  def specific_create\n    # default behaviour, possibly empty.\n  end\nend\n\nclass SpecificService &lt; BaseService\n  def specific_create\n    # overridden behaviour\n  end\nend\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>I see but my problem is that I want my method in the child class to be named create. What I'm looking for is some kind of reverse <code>super</code>, I guess.</p>\n</blockquote>\n\n<p>This looks like something you can do with blocks.</p>\n\n<pre><code>class Parent\n  def create\n    puts \"prep work\"\n    yield\n  rescue =&gt; ex\n    puts \"error: #{ex}\"\n  end\nend\n\nclass Child &lt; Parent\n  def create\n    super do\n      puts \"specific work\"\n    end\n  end\nend\n\nChild.new.create\n# &gt;&gt; prep work\n# &gt;&gt; specific work\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55811240, "answer_count": 1, "score": 0, "last_activity_date": 1556097481, "creation_date": 1556022193, "last_edit_date": 1556097481, "question_id": 55811156, "link": "https://stackoverflow.com/questions/55811156/inserting-code-from-child-class-method-implementation-in-between-code-from-paren", "title": "Inserting code from child class method implementation in between code from parent class method implementation", "body": "<p>I am using inheritance to extract common behavior into my parent class. Here's my parent class BaseService :</p>\n\n<pre><code>class BaseService\n  def initialize(data, failure_strategy)\n    @data = data\n    @failure_strategy = failure_strategy\n  end\n\n  def create\n    return if associated_model.find_by(id: @data['id'])\n    # insert specific code from child class CREATE method implementation here\n  rescue =&gt; exception\n    @failure_strategy.rescue(exception)\n  end\n\n  private\n\n  def associated_model\n    self.class.to_s.delete(\"EventsService\").constantize\n  end\nend\n</code></pre>\n\n<p>Basically I am implementing different failure strategies in case of an exception occuring. However I would like the specific code from my child class implementation of <code>create</code> to be inserted in between two piece of code inside my parent class implementation of create...</p>\n\n<pre><code>return if associated_model.find_by(id: @data['id'])\n        # insert specific code from child class CREATE method implementation here\n      rescue =&gt; exception\n        @failure_strategy.rescue(exception)\n</code></pre>\n\n<p>What is the right way to implement this kind of behavior in ruby ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-console"], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": true, "score": 0, "last_activity_date": 1556021492, "last_edit_date": 1556021492, "creation_date": 1556021037, "answer_id": 55810841, "question_id": 55810590, "link": "https://stackoverflow.com/questions/55810590/system-boot-4-15-0-47-generi-tue-apr-23-1144-still-running-last-with-rails-c/55810841#55810841", "title": "system boot 4.15.0-47-generi Tue Apr 23 11:44 still running ( .last with rails c )", "body": "<p><code>.last</code> command show a listing of last logged in users. You can use UNIX command with a <strong>.</strong> before command in you're rails console.</p>\n\n<p><strong>last</strong> is a UNIX command to list all logged in users of system</p>\n"}], "owner": {"reputation": 21, "user_id": 10341060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fC48h.jpg?s=128&g=1", "display_name": "Mohamed Barakat", "link": "https://stackoverflow.com/users/10341060/mohamed-barakat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55810841, "answer_count": 1, "score": 0, "last_activity_date": 1556021492, "creation_date": 1556020222, "last_edit_date": 1556021305, "question_id": 55810590, "link": "https://stackoverflow.com/questions/55810590/system-boot-4-15-0-47-generi-tue-apr-23-1144-still-running-last-with-rails-c", "title": "system boot 4.15.0-47-generi Tue Apr 23 11:44 still running ( .last with rails c )", "body": "<p>When I open Ruby on Rails console, with <code>rails c</code>, I can directly type <code>.last</code> without any Model. </p>\n\n<p>I get something like a <code>log</code>. </p>\n\n<p>What does <code>.last</code> mean (when it's standalone) and why does it work in <code>rails c</code> only. </p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1556030479, "post_id": 55810098, "comment_id": 98294181, "body": "You can assign to a,b and c directly in the block arguments: <code>array.delete_if{|a,b,c| array.include?([a+1,b,c]) }</code>"}, {"owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556095146, "post_id": 55810098, "comment_id": 98316570, "body": "Thanks a lot for your answer, it&#39;s exactly what I was looking for! Is there a reason why defined <code>item</code> before defining <code>a,b,c</code>? Wouldn&#39;t it be simpler to remove the second line and define <code>a,b,c</code>in the block arguments?"}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556103208, "post_id": 55810098, "comment_id": 98321295, "body": "@Dobby You&#39;re welcome! It probably would be easier to do exactly that, I&#39;d just forgotten about that feature."}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 4, "last_activity_date": 1556018568, "creation_date": 1556018568, "answer_id": 55810098, "question_id": 55810012, "link": "https://stackoverflow.com/questions/55810012/in-ruby-for-a-2d-array-how-can-i-remove-lines-that-match-another-line-apart-fr/55810098#55810098", "title": "In ruby, for a 2d array, how can I remove lines that match another line apart from one value?", "body": "<p>I would do it like this:</p>\n\n<pre><code>array.delete_if do |item|\n  a, b, c = item\n  array.include? [a + 1, b, c]\nend\n</code></pre>\n\n<p>This iterates through the array and, for each item:</p>\n\n<ol>\n<li><p>Destructures the array into three separate variables, <code>a</code>, <code>b</code> and <code>c</code>. (You should probably give these more descriptive names when you use this in your own code!)</p></li>\n<li><p>Reconstructs the array with <code>a</code> incremented, and checks if this new array is present in <code>array</code>.</p></li>\n<li><p>If so, delete this item.</p></li>\n</ol>\n\n<p>Please note that this mutates <code>array</code> directly rather than returning an altered copy.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556095743, "post_id": 55821104, "comment_id": 98316925, "body": "Thanks for your answer! I&#39;m not familiar with time-complexity, does a time-complexity of O(n) mean that it will run faster or slower than the other proposed answer?"}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556122233, "post_id": 55821104, "comment_id": 98333303, "body": "@Hildobby This will run faster than my answer: my answer is <code>O(n^2)</code> worst-case whereas this is <code>O(n)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556122590, "post_id": 55821104, "comment_id": 98333466, "body": "Hildobby, see <a href=\"https://en.wikipedia.org/wiki/Time_complexity\" rel=\"nofollow noreferrer\">this Wiki</a> for an explanation of time complexity."}, {"owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556209647, "post_id": 55821104, "comment_id": 98369221, "body": "Thanks @CarySwoveland ! This works great and is indeed much faster than the other proposed solution. However, for very large files, I get the following error <code>stack level too deep (SystemStackError)</code> on this line: <code>arr.values_at *(arr.size.times.to_a &amp; keepers_idx.values.flatten)</code>, how can I solve this?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556212364, "post_id": 55821104, "comment_id": 98370426, "body": "How large are the files that cause the error? Also, among all elements <code>[a,b,c]</code> in a problem file, do you have any idea of the number of unique arrays <code>[b,c]</code> (which are the keys in my hash)?"}, {"owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556267327, "post_id": 55821104, "comment_id": 98387575, "body": "The file in question contains about 15 500 000 lines (about 450 MB) and out of those, about 5% or so are unique while the rest should get removed."}, {"owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "edited": false, "score": 0, "creation_date": 1556548934, "post_id": 55821104, "comment_id": 98466918, "body": "@CarySwoveland do you know how I could get the result for those larger files?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556560936, "post_id": 55821104, "comment_id": 98472448, "body": "I&#39;ve added some code and discussion at the end to process a file. Let me know if that works for you."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1556655910, "last_edit_date": 1556655910, "creation_date": 1556068708, "answer_id": 55821104, "question_id": 55810012, "link": "https://stackoverflow.com/questions/55810012/in-ruby-for-a-2d-array-how-can-i-remove-lines-that-match-another-line-apart-fr/55821104#55821104", "title": "In ruby, for a 2d array, how can I remove lines that match another line apart from one value?", "body": "<p>This solution has a time-complexity of O(n).</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def prune(arr)\n  keepers_idx =\n    arr.each_with_index.\n        with_object(Hash.new {|h,k| h[k]=[]}) do |((n,*rest),i),h|\n          h[rest].pop if h.key?(rest) &amp;&amp; n == arr[h[rest].last].first + 1\n          h[rest] &lt;&lt; i\n        end\n  arr.values_at *(arr.size.times.to_a &amp; keepers_idx.values.flatten)\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>I've added the element <code>[5, \"b\", 34]</code> to the end of the array given in the question:</p>\n\n<pre><code>array = [\n  [1, \"a\", 34], [1, \"a\", 72], [1, \"b\", 82],\n  [2, \"a\", 72], [2, \"b\", 34], [2, \"b\", 32],\n  [3, \"a\", 72], [3, \"b\", 82], [3, \"b\", 34],\n  [4, \"a\", 93], [4, \"b\", 15], [5, \"b\", 34]\n]\n\nprune(array) \n  #=&gt; [[1, \"a\", 34], [1, \"b\", 82], [2, \"b\", 32], [3, \"a\", 72], [3, \"b\", 82],\n  #    [3, \"b\", 34], [4, \"a\", 93], [4, \"b\", 15], [5, \"b\", 34]] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p><code>prune</code> returns the reduced array but does not modify its argument, <code>array</code>. If <code>array</code> is to be replaced write </p>\n\n<pre><code>array = prune(array)\n</code></pre>\n\n<p>or change the last line of the method to:</p>\n\n<pre><code>array.replace(array.values_at *keepers_idx.values.flatten(1).sort)\n</code></pre>\n\n<p>depending on requirements.</p>\n\n<p>The values in <code>keepers_idx</code> are the indices of the elements of <code>array</code> that are to be retained whose last 2 elements are given by the corresponding keys. For example, the arrays ending <code>[\"b\", 82]</code> to be retained are at indices <code>2</code> and <code>7</code>. Note also that when <code>arr = array</code>,</p>\n\n<pre><code>keepers_idx \n  #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[6], [\"b\", 82]=&gt;[2, 7], [\"b\", 34]=&gt;[8, 11],\n  #    [\"b\", 32]=&gt;[5], [\"a\", 93]=&gt;[9], [\"b\", 15]=&gt;[10]}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>arr.size.times.to_a &amp; keepers_idx.values.flatten\n  #=&gt; [0, 2, 5, 6, 7, 8, 9, 10, 11]\n</code></pre>\n\n<p>The empty hash created by <code>h = Hash.new {|h,k| h[k]=[]}</code> has the property that if <code>h</code> does not have a key <code>k</code>, say <code>k = ['a', 34]</code>, then</p>\n\n<pre><code>h[k] #=&gt; []\n</code></pre>\n\n<p>so we can write</p>\n\n<pre><code>h[k] &lt;&lt; 0\n  #=&gt; [0]\n</code></pre>\n\n<p>Use of the <em>default proc</em> is equivalent to:</p>\n\n<pre><code>h[k] = [] unless h.key?(k)\nh[k] &lt;&lt; 0\n</code></pre>\n\n<p><strong>Step-by-step</strong></p>\n\n<p>Now lets step through the code for the example array.</p>\n\n<pre><code>arr = array\nenum = arr.each_with_index.with_object(Hash.new {|h,k| h[k]=[]})\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: [[1, \"a\", 34], [1, \"a\", 72],\n  #     [1, \"b\", 82],...[5, \"b\", 34]]:each_with_index&gt;:with_object({})&gt; \n</code></pre>\n\n<p>The first value is generated by the enumerator (see <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a>), passed to the block and the block variables are assigned values by a process known as <a href=\"https://docs.ruby-lang.org/en/2.6.0/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a>:</p>\n\n<pre><code>((n,*rest),i),h = enum.next\n     #=&gt; [[[1, \"a\", 34], 0], {}] \nn    #=&gt; 1 \nrest #=&gt; [\"a\", 34] \ni    #=&gt; 0 \nh    #=&gt; {} \n</code></pre>\n\n<p>We now perform the block calculation.</p>\n\n<pre><code>h.key?(rest)\n  #=&gt; {}.key([\"a\", 34]) =&gt; false\n</code></pre>\n\n<p>so we do not perform <code>h[rest].pop</code>. Continuing,</p>\n\n<pre><code>h[rest] &lt;&lt; i \n  #=&gt; h[[\"a\", 34]] &lt;&lt; 0 =&gt; [0] \nh #=&gt; {[\"a\", 34]=&gt;[0]}\n</code></pre>\n\n<p>The next element is generated by <code>enum</code>, passed to the block, the block variables are assigned values and the block calculation is performed.</p>\n\n<pre><code>((n,*rest),i),h = enum.next\n  #=&gt; [[[1, \"a\", 72], 1], {[\"a\", 34]=&gt;[0]}] \nn    #=&gt; 1 \nrest #=&gt; [\"a\", 72] \ni    #=&gt; 1 \nh    #=&gt; {[\"a\", 34]=&gt;[0]} \n\nh.key?(rest)\n  #=&gt; {}.key([\"a\", 72]) =&gt; false =&gt; *no* h[rest].pop\nh[rest] &lt;&lt; i \n  #=&gt; h[[\"a\", 72]] &lt;&lt; 1 =&gt; [1] \nh #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[1]} \n</code></pre>\n\n<p>After one more similar step,</p>\n\n<pre><code>h=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[1], [\"b\", 82]=&gt;[2]}\n</code></pre>\n\n<p>Now things are about to change.</p>\n\n<pre><code>((n,*rest),i),h = enum.next\n  #=&gt; [[[2, \"a\", 72], 3], {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[1], [\"b\", 82]=&gt;[2]}]\nn    #=&gt; 2 \nrest #=&gt; [\"a\", 72] \ni    #=&gt; 3 \nh    #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[1], [\"b\", 82]=&gt;[2]}  \n\nh.key?(rest)\n  #=&gt; h.key?([\"a\", 72]) =&gt; true\nn == arr[h[rest].last].first + 1\n  #=&gt; 2 == arr[h[[\"a\", 72]].last].first + 1\n  #=&gt; 2 == arr[[1].last].first + 1\n  #=&gt; 2 == arr[1].first + 1\n  #=&gt; 2 == [1, \"a\", 72].first + 1 =&gt; true\n</code></pre>\n\n<p>so we execute</p>\n\n<pre><code>h[rest].pop     \n  #=&gt; h[[\"a\", 72]].pop =&gt; 1\nh #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[], [\"b\", 82]=&gt;[2]}\n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>h[rest] &lt;&lt; i\n  #=&gt; h[[\"a\", 72]] &lt;&lt; 3 =&gt; [3] \nh #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[3], [\"b\", 82]=&gt;[2]}\n</code></pre>\n\n<p>The remaining calculations to obtain <code>keepers_idx</code> are similar, producing:</p>\n\n<pre><code>keepers_idx\n  #=&gt; {[\"a\", 34]=&gt;[0], [\"a\", 72]=&gt;[6], [\"b\", 82]=&gt;[2, 7], [\"b\", 34]=&gt;[8, 11],\n  #    [\"b\", 32]=&gt;[5], [\"a\", 93]=&gt;[9], [\"b\", 15]=&gt;[10]}\n</code></pre>\n\n<p>Lastly,</p>\n\n<pre><code>  arr.values_at *(0..arr.size-1).to_a &amp; keepers_idx.values.flatten\n\na = keepers_idx.values\n  #=&gt; [[0], [6], [2, 7], [8, 11], [5], [9], [10]] \nb = a.flatten\n  #=&gt; [0, 6, 2, 7, 8, 11, 5, 9, 10] \nc = arr.size.times.to_a\n  #=&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11] \nd = c &amp; b\n  #=&gt; [0, 2, 5, 6, 7, 8, 9, 10, 11]\n\narr.values_at *d\n  #=&gt; arr.values_at(0, 2, 5, 6, 7, 8, 9, 10, 11) \n  #=&gt; [[1, \"a\", 34], [1, \"b\", 82], [2, \"b\", 32], [3, \"a\", 72], [3, \"b\", 82],\n  #=&gt;  [3, \"b\", 34], [4, \"a\", 93], [4, \"b\", 15], [5, \"b\", 34]] \n</code></pre>\n\n<p>In computing <code>c &amp; b</code>, the doc <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-26\" rel=\"nofollow noreferrer\">Array#&amp;</a> guarantees that \"The order is preserved from the original array [<code>c</code>].\".</p>\n\n<p><strong>Processing a file</strong></p>\n\n<p>Evidently, the elements of <code>array</code> are contained in a large file. Let's assume the file has the following format for the array <code>array</code> given above.</p>\n\n<pre><code>s = array.map { |a| a.map(&amp;:to_s).join(\",\") }.join(\"\\n\")\nputs s\n1,a,34\n1,a,72\n1,b,82\n2,a,72\n2,b,34\n2,b,32\n3,a,72\n3,b,82\n3,b,34\n4,a,93\n4,b,15\n5,b,34\n</code></pre>\n\n<p><code>s</code> could have an ending newline (it doesn't matter). Let's write that to file.</p>\n\n<pre><code>FName = 'temp'\nFile.write(FName, s)\n  #=&gt; 83\n</code></pre>\n\n<p>Check it:</p>\n\n<pre><code>s == File.read(FName)\n  #=&gt; true\n</code></pre>\n\n<p>The method could be modified as follows. Two passes are made through the file, reading line-by-line.</p>\n\n<p>The first pass constructs the hash <code>keepers</code>. This hash is similar to <code>keepers_idx</code>, above, but the values are modified. The values of <code>keeper_idx</code> are arrays of indices. The values of <code>keepers</code> are arrays of two-element arrays of the form <code>[i,n]</code>, where <code>i</code> is the index of the line in the file and <code>n</code> is the first integer obtained from that line. Consider, for example, the line <code>\"1,b,82\"</code> at index <code>2</code>. The array <code>[2,1]</code> would then be appended to the value (array) of the key <code>[\"b\",82]</code>, the value having been initialised to an empty array.</p>\n\n<p>The second pass through the file extracts the lines at indices given by <code>keepers</code>, held in the sorted array <code>lines_to_keep</code>. I've returned an array of the extracted lines, converted to three-element arrays. (See the comment at then end if this is not permitted due to insufficient memory.)</p>\n\n<pre><code>def prune(fname)\n  keepers =\n    File.foreach(fname).\n         with_index.\n         with_object(Hash.new {|h,k| h[k]=[]}) do |(line,i),h|\n           n, *rest = convert(line)\n           h[rest].pop if h.key?(rest) &amp;&amp; n == h[rest].last.last + 1\n           h[rest] &lt;&lt; [i,n]\n         end\n  keepers = keepers.values.flatten(1).map(&amp;:first)\n  keepers = (0..keepers.max).to_a &amp; keepers\n  next_line = keepers.shift\n  File.foreach(fname).\n       with_index.\n       with_object([]) do |(line,i),a|\n         if i == next_line\n           a &lt;&lt; convert(line)\n           next_line = keepers.shift\n           break a if keepers.nil?\n         end\n       end\nend\n\ndef convert(line)\n  a,b,c = line.chomp.split(',')\n  [a.to_i, b, c.to_i]\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>prune(FName)\n  #=&gt; [[1, \"a\", 34], [1, \"b\", 82], [2, \"b\", 32], [3, \"a\", 72], [3, \"b\", 82],\n       [3, \"b\", 34], [4, \"a\", 93], [4, \"b\", 15], [5, \"b\", 34]] \n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>It may be faster to replace the line</li>\n</ul>\n\n<h1><p></p></h1>\n\n<pre><code>keepers = (0..keepers.max).to_a &amp; keepers\n</code></pre>\n\n<p>with</p>\n\n<pre><code>keepers.sort!\n</code></pre>\n\n<ul>\n<li>Depending on the file format, it may of course be necessary to modify <code>convert</code>. At present:</li>\n</ul>\n\n<h1><p></p></h1>\n\n<pre><code>convert \"1,a,34\"\n  #=&gt; [1, \"a\", 34]\n</code></pre>\n\n<ul>\n<li><p>If the array returned by <code>prune</code> is too large to hold in memory, one could replace the line <code>a &lt;&lt; convert(line)</code> with one that writes <code>line</code> to a file previously-opened for writing.</p></li>\n<li><p>If the hash <code>keepers</code> is itself too large to hold in memory, it would have to be written to and read from a database table.</p></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 11261505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5JU57vfkIM/AAAAAAAAAAI/AAAAAAAATXg/TZrrQa9O7RM/photo.jpg?sz=128", "display_name": "Hildobby", "link": "https://stackoverflow.com/users/11261505/hildobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55821104, "answer_count": 2, "score": 1, "last_activity_date": 1556655910, "creation_date": 1556018242, "last_edit_date": 1556018382, "question_id": 55810012, "link": "https://stackoverflow.com/questions/55810012/in-ruby-for-a-2d-array-how-can-i-remove-lines-that-match-another-line-apart-fr", "title": "In ruby, for a 2d array, how can I remove lines that match another line apart from one value?", "body": "<p>Given an array like the following:</p>\n\n<pre><code>array = [[1, \"a\", 34], [1, \"a\", 72], [1, \"b\", 82],\n         [2, \"a\", 72], [2, \"b\", 34], [2, \"b\", 32],\n         [3, \"a\", 72], [3, \"b\", 82], [3, \"b\", 34],\n         [4, \"a\", 93], [4, \"b\", 15]]\n</code></pre>\n\n<p>I would like to know how, using ruby, I could  remove all of the lines that match all values in another line apart from the first value which has to be equal to <code>n-1</code>.\nSo that would mean that <code>[1, \"a\", 72]</code> is deleted since there is a line with <code>[2, \"a\", 72]</code> which would also be deleted since <code>[3, \"a\", 72]</code> is present.\n<code>[2, \"b\", 34]</code> would also be deleted since there is <code>[3, \"b\", 34]</code></p>\n\n<p>The script would therefore return the following array:</p>\n\n<pre><code>array = [[1, \"a\", 34], [1, \"b\", 82],\n         [2, \"b\", 32],\n         [3, \"a\", 72], [3, \"b\", 82], [3, \"b\", 34],\n         [4, \"a\", 93], [4, \"b\", 15]]\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby", "xml"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10284591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KqIRqEUspCU/AAAAAAAAAAI/AAAAAAAAAAA/3wXyR1_xqR8/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/10284591/dmitry-gusev"}, "edited": false, "score": 0, "creation_date": 1556018920, "post_id": 55809260, "comment_id": 98287450, "body": "Used tmp = Tempfile.new([&#39;upload&#39;, &#39;.xml&#39;]) tmp.write(nokogiri_response)"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 0, "last_activity_date": 1556015525, "creation_date": 1556015525, "answer_id": 55809260, "question_id": 55808770, "link": "https://stackoverflow.com/questions/55808770/ruby-create-xml-file/55809260#55809260", "title": "Ruby create XML file", "body": "<p>Just use <a href=\"https://ruby-doc.org/core-2.6.1/IO.html#method-c-write\" rel=\"nofollow noreferrer\"><code>IO.write</code></a> to get <code>your.xml</code></p>\n\n<pre><code>content = Nokogiri::XML::Builder.new(:encoding =&gt; 'UTF-8') do |xml|\n  xml.root {\n    xml.products {\n      xml.widget {\n        xml.id_ \"10\"\n        xml.name \"Awesome widget\"\n      }\n    }\n  }\nend\n\nFile.write(\"your.xml\", content.to_xml)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10284591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KqIRqEUspCU/AAAAAAAAAAI/AAAAAAAAAAA/3wXyR1_xqR8/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/10284591/dmitry-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 55809260, "answer_count": 1, "score": -1, "last_activity_date": 1556015525, "creation_date": 1556013855, "question_id": 55808770, "link": "https://stackoverflow.com/questions/55808770/ruby-create-xml-file", "title": "Ruby create XML file", "body": "<p>I need to create xml file for upload, found how to create body, but that code return structure of file and not file, could you please help me? Should I just push that structure to new file or there is more easy way to do it?\nMany thanks!</p>\n\n<pre><code>Nokogiri::XML::Builder.new(:encoding =&gt; 'UTF-8') do |xml|\n  xml.root {\n    xml.products {\n      xml.widget {\n        xml.id_ \"10\"\n        xml.name \"Awesome widget\"\n      }\n    }\n  }.to_xml\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556094749, "post_id": 55810335, "comment_id": 98316338, "body": "Thanks, It  helps to store the value in a session variable."}], "tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": true, "score": 2, "last_activity_date": 1556019329, "creation_date": 1556019329, "answer_id": 55810335, "question_id": 55808182, "link": "https://stackoverflow.com/questions/55808182/how-to-pass-the-value-of-input-type-radio-in-application-helper/55810335#55810335", "title": "How to pass the value of input type radio in application_helper?", "body": "<p>Not sure if I'm understanding you, but instance variables get lost between requests, so there's no point on using <code>@color</code> instead of <code>red</code>.</p>\n\n<p>If you want to <em>persist</em> <code>red</code> over requests then store it in the session or pass it as a param.</p>\n"}, {"comments": [{"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556022198, "post_id": 55810542, "comment_id": 98289172, "body": "Thanks for the reply, Basically the main thing I want to do is when I click on any radio button the value of the button should pass as a parameter in action, suppose if I click on red the params value should be red if green then it should be green and on the basis of that I want to change the name of class, so wheneven i click on any radio button this will change the color of sidebar dynamically, But I don&#39;t know how to pass the values of radio button."}, {"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556022211, "post_id": 55810542, "comment_id": 98289182, "body": "I am providing you a link, open it and there is a button on the right side with setting icon and its being rotating, click on that, and there would be a sidebar filter if you click on any radio button it will change the sidebar background color, but its in vuejs so the color won&#39;t  change if you go to another page.please open the link and you will get the idea.  <a href=\"http://vuely.theironnetwork.org/default/dashboard/ecommerce\" rel=\"nofollow noreferrer\">vuely.theironnetwork.org/default/dashboard/ecommerce</a>"}, {"owner": {"reputation": 167, "user_id": 9273735, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-crLGF5VF2jI/AAAAAAAAAAI/AAAAAAAAALk/fmgr_kmQdxY/photo.jpg?sz=128", "display_name": "Mrunal Selokar", "link": "https://stackoverflow.com/users/9273735/mrunal-selokar"}, "reply_to_user": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556022649, "post_id": 55810542, "comment_id": 98289408, "body": "Pass the <code>action</code> variable in form and submit the form on radio button click. Refer this link on how to submit a form on radio button click: [<a href=\"https://stackoverflow.com/questions/846526/submitting-rails-form-on-a-radio-button-selection?]\" title=\"submitting rails form on a radio button selection\">stackoverflow.com/questions/846526/&hellip;</a>"}, {"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556025189, "post_id": 55810542, "comment_id": 98290923, "body": "ok, but where to submit the form , to application_helper.rb ?"}, {"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "edited": false, "score": 0, "creation_date": 1556026485, "post_id": 55810542, "comment_id": 98291730, "body": "Firstly please tell me that did you open the link and checked that functionality of changing the color of the sidebar, Is it really possible?"}], "tags": [], "owner": {"reputation": 167, "user_id": 9273735, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-crLGF5VF2jI/AAAAAAAAAAI/AAAAAAAAALk/fmgr_kmQdxY/photo.jpg?sz=128", "display_name": "Mrunal Selokar", "link": "https://stackoverflow.com/users/9273735/mrunal-selokar"}, "is_accepted": false, "score": 1, "last_activity_date": 1556020063, "creation_date": 1556020063, "answer_id": 55810542, "question_id": 55808182, "link": "https://stackoverflow.com/questions/55808182/how-to-pass-the-value-of-input-type-radio-in-application-helper/55810542#55810542", "title": "How to pass the value of input type radio in application_helper?", "body": "<p>I am slightly reframing your sidebar code:</p>\n\n<pre><code>&lt;div class=\"sidebar-nav &lt;%= selected_color(params[:action]) %&gt;\" id=\"collapse-sidebar\"  &gt;\n</code></pre>\n\n<p>Assuming you are passing color names('Red', 'Blue' or 'Green') in the <code>action</code> parameter, the <code>application_helper.rb</code> code would go like this:</p>\n\n<pre><code>def selected_color(action_color_name)\n  colors = ['Red','Blue', 'Green']\n  colors.include? action_color_name ? action_color_name : nil                  \nend\n</code></pre>\n\n<p>Also, store <code>action</code> in a hidden variable so that, colors will retain upon going to some other page. If that doesn't work, simply store the <code>sidebar_color</code> in configurations table in the database and update the attribute upon clicking respective radio buttons.\nHope this helps.</p>\n"}], "owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55810335, "answer_count": 2, "score": 2, "last_activity_date": 1556020063, "creation_date": 1556011780, "question_id": 55808182, "link": "https://stackoverflow.com/questions/55808182/how-to-pass-the-value-of-input-type-radio-in-application-helper", "title": "How to pass the value of input type radio in application_helper?", "body": "<p>I am creating an admin template, and there is a customizer section in which I have created 3 radio buttons (named: Red, Blue, Green). There is a left sidebar navigation menu and I want to change the background color of sidebar navigation menu by clicking on the radio buttons.\nIf I am clicking on the button it is changing the bg-color of sidebar navigation menu by adding a class, but if I am going to another page gets reloaded and the class gets removed.  </p>\n\n<p>I have tried one thing, in my application_helper.rb I have added the following code</p>\n\n<pre><code>    def is_active(action)\n        @color = \"red\"\n        params[:action] == action_name ? @color : nil                  \n      end\n</code></pre>\n\n<p>and in my layouts folder, I have a partial file _sidebar.html.erb and at the outer div I am using this helper like below</p>\n\n<pre><code>    &lt;div class=\"sidebar-nav &lt;%= is_active('action_name') %&gt;\" id=\"collapse-sidebar\"  &gt;\n</code></pre>\n\n<p>What I am doing here is, checking the action name if it is matching then adding a class red which is stored in an instance variable @color</p>\n\n<p>If I can pass the value of the radio button to the application_helper file dynamically means if I click on red the value should be red, green then the value should be green. and by which I can change the class name dynamically in application helper and further that would change the color of the sidebar.</p>\n\n<p>Please, If I am doing anything wrong or it's is not the right way to do this or we can't achieve this kind of functionality in ruby on rails, please acknowledge me, that would be appreciable.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "edited": false, "score": 0, "creation_date": 1556006829, "post_id": 55806755, "comment_id": 98281234, "body": "Please, can you add example of input data?"}, {"owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "reply_to_user": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "edited": false, "score": 0, "creation_date": 1556007037, "post_id": 55806755, "comment_id": 98281352, "body": "HN58 C 256 A T &quot;I&quot; 85E or HN58 C 257 A T 85 &quot;I&quot; E  as you can see in this expression there are two possible position of &quot;I&quot;. it can either be before &quot;85&quot; or after &quot;85&quot;."}, {"owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "edited": false, "score": 0, "creation_date": 1556007721, "post_id": 55806755, "comment_id": 98281687, "body": "Thank you, but none of your examples doesn&#39;t fit your regex. Please, can you fix it? Basically I would probably use two regexp or nested matching groups."}, {"owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "reply_to_user": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "edited": false, "score": 0, "creation_date": 1556008319, "post_id": 55806755, "comment_id": 98281985, "body": "(/\\A(HN58)(C|V)(256|257)(A|R)(T|P)(I|SR)(85|10)(E)\\z/) or (/\\A(HN58)(C|V)(256|257)(A|R)(T|P)(85|10)(I|SR)(E)\\z/)  these are the two possible regular expression for the above input . how to handle both of the above inputs in single regular expression ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556008551, "post_id": 55806755, "comment_id": 98282102, "body": "When @Iojza asked you to add an example, he/she meant for you to do so by editing your question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556008933, "post_id": 55806755, "comment_id": 98282287, "body": "If your regular expression were <code>&#47;a(#{b})c(#{d})(e)f&#47;</code> and <code>(#{g})</code> were to be inserted before <code>c</code> or after <code>(#{d})</code> you would use &quot;or&quot; (<code>|</code>) within a non-capture group: <code>&#47;a(#{b})(?:(#{g})c(#{d})|c(#{d})(#{g}))(e)f&#47;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 0, "last_activity_date": 1556008344, "creation_date": 1556008344, "answer_id": 55807199, "question_id": 55806755, "link": "https://stackoverflow.com/questions/55806755/how-to-handle-two-possible-position-of-a-group-in-regular-expression-in-ruby/55807199#55807199", "title": "How to handle two possible position of a group in regular expression in ruby?", "body": "<p><a href=\"https://regex101.com/r/7Idi7D/1/\" rel=\"nofollow noreferrer\">This RegEx</a> might help you to design a proper matching for your input strings: </p>\n\n<pre><code>HN[0-9]{2}\\s[A-Z]\\s[0-9]{3}\\s[A-Z\\s0-9]+\\x22I\\x22\\s[A-Z0-9]+\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4SdB2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SdB2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "is_accepted": true, "score": 2, "last_activity_date": 1556010181, "creation_date": 1556010181, "answer_id": 55807719, "question_id": 55806755, "link": "https://stackoverflow.com/questions/55806755/how-to-handle-two-possible-position-of-a-group-in-regular-expression-in-ruby/55807719#55807719", "title": "How to handle two possible position of a group in regular expression in ruby?", "body": "<p>Still not sure what's your data. But with the help of <a href=\"https://ruby-doc.org/core-2.6.3/doc/regexp_rdoc.html#label-Capturing\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.3/doc/regexp_rdoc.html#label-Capturing</a> try:</p>\n\n<pre><code>regex = /HN(?&lt;val&gt;\\d+) (C|V) (?&lt;dens&gt;\\d+) (A|R) (T|P) (((?&lt;temp&gt;\\d+) (85|10))|((85|10) (?&lt;temp&gt;\\d+))) (E)/\n\nregex =~ \"HN58 C 256 A T 37 85 E\"\nputs val,dens,temp\n\nregex =~ \"HN58 C 257 A T 85 36 E\"\nputs val,dens,temp\n</code></pre>\n\n<p><a href=\"https://rubular.com/r/vD98oRgaDGLb8W\" rel=\"nofollow noreferrer\">https://rubular.com/r/vD98oRgaDGLb8W</a></p>\n"}], "owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55807719, "answer_count": 2, "score": 0, "last_activity_date": 1556010181, "creation_date": 1556006576, "last_edit_date": 1556009487, "question_id": 55806755, "link": "https://stackoverflow.com/questions/55806755/how-to-handle-two-possible-position-of-a-group-in-regular-expression-in-ruby", "title": "How to handle two possible position of a group in regular expression in ruby?", "body": "<p>I have a regular expression like this <code>(HN)(#{VAL})(#{dens})(#{temp})(C|A)#?{temp})#?(A|0)</code></p>\n\n<p>\"temp\" can either be at 4th position or at 7th position in my regular expression . How to handle this pattern in ruby regex ?</p>\n\n<p>Example of the input data:</p>\n\n<pre><code>HN58 C 256 A T \"I\" 85E or HN58 C 257 A T 85 \"I\" E\n</code></pre>\n"}, {"tags": ["c", "ruby", "bluetooth"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556009893, "post_id": 55807228, "comment_id": 98282796, "body": "Note that <code>0.to_s(16)</code> gives <code>&quot;0&quot;</code>, not <code>&quot;00&quot;</code>."}], "tags": [], "owner": {"reputation": 935, "user_id": 3481220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/O8T6C.jpg?s=128&g=1", "display_name": "kayakpim", "link": "https://stackoverflow.com/users/3481220/kayakpim"}, "is_accepted": false, "score": 0, "last_activity_date": 1556008458, "creation_date": 1556008458, "answer_id": 55807228, "question_id": 55806735, "link": "https://stackoverflow.com/questions/55806735/ruby-array-of-characters-to-to-byte-array-of-hex-chars-for-bluetooth-transfer/55807228#55807228", "title": "Ruby array of characters to to byte array (of hex chars) for bluetooth transfer", "body": "<p>I guess this would suffice. I'm not clear still whether the byte array and string are \"equivalent\" in ruby</p>\n\n<pre><code>intarr=[\"\\xA6\", \"\\x9E\", \"\\x00\", \"\\x14\", \"\\x00\", \"\\x8E\", \"\\x00\", \"{\", \"\\\"\", \"s\", \"i\", \"t\", \"e\", \"_\", \"n\", \"a\", \"m\", \"e\", \"\\\"\", \":\", \"1\", \"1\", \"5\", \"8\", \"5\", \"4\", \"}\", \"\\xF5\"].join.bytes.to_a\nstrres=\"\"\nintarr.each do |x|\n  strres=strres+x.to_s(16)\nend\nputs strres\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1556009385, "creation_date": 1556009385, "answer_id": 55807469, "question_id": 55806735, "link": "https://stackoverflow.com/questions/55806735/ruby-array-of-characters-to-to-byte-array-of-hex-chars-for-bluetooth-transfer/55807469#55807469", "title": "Ruby array of characters to to byte array (of hex chars) for bluetooth transfer", "body": "<p>Given a binary string:</p>\n\n<pre><code>s = \"\\xA6\\x9E\\x00\\x14\\x00\\x8E\\x00{\\\"site_name\\\":115854}\\xF5\"\n</code></pre>\n\n<p>You can use <a href=\"http://ruby-doc.org/core-2.6.3/String.html#method-i-unpack1\" rel=\"nofollow noreferrer\"><code>unpack1</code></a> with <code>H*</code> (hex string, high nibble first):</p>\n\n<pre><code>s.unpack1('H*') #=&gt; \"a69e0014008e007b22736974655f6e616d65223a3131353835347df5\"\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 3481220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/O8T6C.jpg?s=128&g=1", "display_name": "kayakpim", "link": "https://stackoverflow.com/users/3481220/kayakpim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55807469, "answer_count": 2, "score": 0, "last_activity_date": 1556009385, "creation_date": 1556006502, "last_edit_date": 1556007197, "question_id": 55806735, "link": "https://stackoverflow.com/questions/55806735/ruby-array-of-characters-to-to-byte-array-of-hex-chars-for-bluetooth-transfer", "title": "Ruby array of characters to to byte array (of hex chars) for bluetooth transfer", "body": "<p>I supposed to be passing a byte array (I guess c terminology for a string?) to an api used for Bluetooth communication. What I'm trying to pass is this array, joined as a string:</p>\n\n<pre><code>[\"\\xA6\", \"\\x9E\", \"\\x00\", \"\\x14\", \"\\x00\", \"\\x8E\", \"\\x00\", \"{\", \"\\\"\", \"s\", \"i\", \"t\", \"e\", \"_\", \"n\", \"a\", \"m\", \"e\", \"\\\"\", \":\", \"1\", \"1\", \"5\", \"8\", \"5\", \"4\", \"}\", \"\\xF5\"]\n</code></pre>\n\n<p>However, this fails silently, the expected format seems to be:</p>\n\n<pre><code>a69e0014008e007b22736974655f6e616d65223a3131353835347df5\n</code></pre>\n\n<p>I can see that Ruby has a string method bytes.to_a which would give me</p>\n\n<pre><code>[166, 158, 0, 20, 0, 142, 0, 123, 34, 115, 105, 116, 101, 95, 110, 97, 109, 101, 34, 58, 49, 49, 53, 56, 53, 52, 125, 245]\n</code></pre>\n\n<p>But I'd like to pull out the hex values for each byte and then .join them. Is there a simple way to achieve this? Or am I approaching this incorrectly! </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1556001374, "post_id": 55805516, "comment_id": 98278920, "body": "It is unclear what are you trying to achieve. Please post the desired output."}, {"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556002545, "post_id": 55805516, "comment_id": 98279357, "body": "The expected output: Category 1 : 5 points Total length : 98.75  Category 2 : 3 points Total length : 54.99  Category 3 : 7 points Total length : 118.53"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1556004372, "post_id": 55805516, "comment_id": 98280129, "body": "Can you add full input data related to the same category (e.g. 1) useful to determinate the output <code>Category 1 : 5 points Total length : 98.75</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1556005025, "post_id": 55805516, "comment_id": 98280422, "body": "<i>&quot;Succeeded in grouping the category&quot;</i> \u2013 you are merely traversing the lines. I don&#39;t see any grouping. Try to split the data into chunks, so you can convert each data chunk to a Ruby object, e.g. <code>{id: &#39;001&#39;, category: 2, length: 6.3}</code>. Then group those objects by category and finally sum their lengths."}, {"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1556005814, "post_id": 55805516, "comment_id": 98280779, "body": "if read the list from a file, how do u split the data into chunks?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563056479, "post_id": 55805516, "comment_id": 100576514, "body": "Roche, I happened to stumble onto this question, to which I previously offered a solution. I noticed that my answer could be improved by taking a different approach, so I did an edit."}], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "is_accepted": false, "score": 1, "last_activity_date": 1556006121, "creation_date": 1556006121, "answer_id": 55806626, "question_id": 55805516, "link": "https://stackoverflow.com/questions/55805516/need-help-using-enumerable/55806626#55806626", "title": "Need help using Enumerable", "body": "<p>Your problem is that you're actually just counting the unique lines without the actual processing. You need to parse the file line by line, extract key-value pairs from each line and associate the points with categories somehow - only after that your calculations make sense.</p>\n\n<p>In the simplest case, if the data structure is robust enough and the length always follows the category, the parsing might be as trivial as</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>text = StringIO.new(&lt;&lt;~DATA)\n  ID : 001\n  category : 2\n  length : 6.30\n\n  ID : 002\n  category : 1\n  length : 17.9\n\n  ID : 003\n  category : 2\n  length : 3.70\n\nDATA\n\ncategories = Hash.new { |h,k| h[k] = {count: 0, length: 0} }\ncurrent_cat = nil\n\ntext.each_line do |line|\n  next if line.strip.empty?\n  key, value = line.split(\":\").map(&amp;:strip)\n\n  case key\n  when \"category\"\n    current_cat = value\n    categories[current_cat][:count] += 1\n  when \"length\"\n    categories[current_cat][:length] += Float(value)\n  end\nend\n\nputs categories.inspect # =&gt; {\"2\"=&gt;{:count=&gt;2, :length=&gt;10.0}, \"1\"=&gt;{:count=&gt;1, :length=&gt;17.9}}\n</code></pre>\n\n<p>(just replace stringio with reading from a file to map it to your use case)</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1563935089, "post_id": 55806870, "comment_id": 100861294, "body": "Thank u for your feedback @Cary Swoveland. May I know what these : <b>[/\\p{L}+/]</b> and <b>[/\\d+/]</b> mean?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1563938709, "post_id": 55806870, "comment_id": 100861894, "body": "<code>line[&lt;regular expression&gt;]</code> means the portion of the string held by <code>line</code> that matches the given regular expression (&quot;regex&quot;) is to be returned (or <code>nil</code> is returned if there is no match). See the doc <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">String#&#91;&#93;</a>.  <code>&#47;\\p{L}+&#47;</code> reads, &quot;match a sequence of one or more (<code>+</code>) Unicode letters (<code>p{L}</code>)&quot;. <code>&#47;\\d+&#47;</code> reads, &quot;match a sequence of one or more digits&quot;. <code>&#47;[\\d.]+&#47;</code> reads, &quot;match a sequence of one or more digits or periods&quot;. Search for <code>\\p{L}</code> in <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1563056323, "last_edit_date": 1563056323, "creation_date": 1556007026, "answer_id": 55806870, "question_id": 55805516, "link": "https://stackoverflow.com/questions/55805516/need-help-using-enumerable/55806870#55806870", "title": "Need help using Enumerable", "body": "<p>I've copied the string in your example to the file <code>'temp'</code>. We can efficiently obtain a hash that can be used to display the desired result as follows.</p>\n\n<pre><code>category = nil\nh = IO.foreach('temp').\n       each_with_object(Hash.new {|h,k| h[k]={points: 0, length: 0}}) do |line,h|\n         case line[/\\p{L}+/]\n         when 'category'\n           category = line[/\\d+/]\n           h[category][:points] += 1\n         when 'length'\n           h[category][:length] += line[/[\\d.]+/].to_f\n         end\n       end\n  #=&gt; {\"2\"=&gt;{:points=&gt;3, :length=&gt;54.959999999999994},\n  #    \"1\"=&gt;{:points=&gt;5, :length=&gt;98.75},\n  #    \"3\"=&gt;{:points=&gt;7, :length=&gt;136.43}} \n</code></pre>\n\n<p>We can then use this hash to display the desired results.</p>\n\n<pre><code>h.sort_by(&amp;:first).each do |k,v|\n  puts \"Category #{k} : #{v[:points]} points\"      \n  puts \"Total length : #{v[:length].round(2)}\"\n  puts      \nend\n</code></pre>\n\n<p>displays:</p>\n\n<pre><code>Category 1 : 5 points\nTotal length : 98.75\n\nCategory 2 : 3 points\nTotal length : 54.96\n\nCategory 3 : 7 points\nTotal length : 136.43\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a> is a very useful method. Not only does it read files line-by-line (which may be essential for large files) and close the file when finished, but it returns an enumerator when no block is given, permitting it to be chained to other methods.<sup>1</sup> Here I've chained it to <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> with the associated object being:</p>\n\n<pre><code>Hash.new { |h,k| h[k] = { points: 0, length: 0 } }\n</code></pre>\n\n<p>The doc <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a> explains that this constructs an empty hash with an attached default proc; that is, it is the same as:</p>\n\n<pre><code>h = {}\npr = proc { |h,k| h[k] = { points: 0, length: 0 } }\n  #=&gt; #&lt;Proc:0x000059d3963150b0@(irb):84&gt; \nh.default_proc = pr\n  #=&gt; #&lt;Proc:0x000059d3963150b0@(irb):84&gt; \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-default_proc-3D\" rel=\"nofollow noreferrer\">Hash#default_proc=</a>.</p>\n\n<p>This simply means that if <code>h[k]</code> is executed when <code>h</code> does not have a key <code>k</code>, <code>h[k]</code> is set equal to the value of the proc when it is called with arguments <code>h</code> and <code>k</code>. For example (since <code>h</code> is empty and therefore has no keys),</p>\n\n<pre><code>h['cat']\n  #=&gt; {:points=&gt;0, :length=&gt;0} \nh #=&gt; {\"cat\"=&gt;{:points=&gt;0, :length=&gt;0}}\n</code></pre>\n\n<p>Now let's try:</p>\n\n<pre><code>h['dog'][:points] += 1\n  #=&gt; 1 \nh #=&gt; {\"cat\"=&gt;{:points=&gt;0, :length=&gt;0}, \"dog\"=&gt;{:points=&gt;1, :length=&gt;0}} \n</code></pre>\n\n<p>Ruby executes the first of these expressions in two steps:</p>\n\n<pre><code>g = h['dog']\n  #=&gt; {:points=&gt;0, :length=&gt;0}\ng[:points] += 1\n</code></pre>\n\n<p>The next time <code>h['dog'][:points] += 1</code> is executed the default proc is not called because <code>h</code> now has a key <code>'dog'</code>.</p>\n\n<p>Lastly, <code>category</code> must be initialised (to any object) outside the loop it order for its value to survive from one line to the next.<sup>2</sup></p>\n\n<p><sup>1. <code>foreach</code> is often executed on <code>File</code>, rather than <code>IO</code>. That is permissible because <code>File</code> is a subclass of <code>IO</code>.</sup></p>\n\n<p><sup>2. If that is not done, Ruby will first set the variable <code>category</code> to its value in the first line of the file. It will then go out of scope after the block calculation is performed, but at that point Ruby does not \"undefine\" the variable; instead, for reasons of performance, it sets it to <code>nil</code>. It therefore would equal <code>nil</code> when the second line of the file is read, and so on.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563938417, "post_id": 55807220, "comment_id": 100861839, "body": "If the file is large you may want <code>points</code> to be something like <code>[[2, 18.33], [1, 19.75],...]</code>. Note that there&#39;s no need to carry the values of <code>:id</code> forward."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1556008432, "creation_date": 1556008432, "answer_id": 55807220, "question_id": 55805516, "link": "https://stackoverflow.com/questions/55805516/need-help-using-enumerable/55807220#55807220", "title": "Need help using Enumerable", "body": "<p>If each \"point entry\" starts with <code>ID</code>, you can use <a href=\"http://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-slice_before\" rel=\"nofollow noreferrer\"><code>slice_before</code></a> to split the data accordingly, e.g.:</p>\n\n<pre><code>IO.foreach('point.txt').slice_before(/^ID/).each do |lines|\n   # ...\nend\n</code></pre>\n\n<p>The result can then be mapped to a more manageable object, for example a hash:</p>\n\n<pre><code>points = IO.foreach('point.txt').slice_before(/^ID/).map do |lines|\n  lines.each_with_object({}) do |line, h|\n    case line\n    when /^ID : (.*)/\n      h[:id] = $1\n    when /^category : (.*)/\n      h[:category] = $1.to_i\n    when /^length : (.*)/\n      h[:length] = $1.to_f\n    end\n  end\nend\n#=&gt; [\n#     {:id=&gt;\"001\", :category=&gt;2, :length=&gt;18.33},\n#     {:id=&gt;\"002\", :category=&gt;1, :length=&gt;19.75},\n#     # ...\n#   ]\n</code></pre>\n\n<p>We can now group the points by category:</p>\n\n<pre><code>grouped_points = points.group_by { |h| h[:category] }\n</code></pre>\n\n<p>and print the results:</p>\n\n<pre><code>grouped_points.each do |category, points|\n  puts \"Category #{category} : #{points.length} points\"\n  puts \"Total length : #{ points.sum { |p| p[:length] }.round(2) }\"\n  puts\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Category 2 : 3 points\nTotal length : 54.96\n\nCategory 1 : 5 points\nTotal length : 98.75\n\nCategory 3 : 7 points\nTotal length : 136.43\n</code></pre>\n\n<p>You might want to sort the <code>grouped_points</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1557978115, "post_id": 55809002, "comment_id": 98948949, "body": "i got &quot;undefined method &#39;transform_values&#39;&quot; what should i do?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1557983112, "post_id": 55809002, "comment_id": 98950065, "body": "Which version of Ruby are you running?"}, {"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1558131453, "post_id": 55809002, "comment_id": 99012900, "body": "1.9.3 is the ruby version matter?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "edited": false, "score": 0, "creation_date": 1558150935, "post_id": 55809002, "comment_id": 99015575, "body": "Absolutely. You are missing great features. Consider to upgrade. Last version is 2.6.3: <a href=\"https://ruby-doc.org/\" rel=\"nofollow noreferrer\">ruby-doc.org</a>"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1556014681, "creation_date": 1556014681, "answer_id": 55809002, "question_id": 55805516, "link": "https://stackoverflow.com/questions/55805516/need-help-using-enumerable/55809002#55809002", "title": "Need help using Enumerable", "body": "<p>More or less the same soup as showed in other answers.</p>\n\n<p>Once you read the file, <code>a</code> contains:</p>\n\n<pre><code>#=&gt; [\"ID : 001\\n\", \"category : 2\\n\", \"length : 18.33\\n\", \"\\n\", \"ID : 002\\n\", \"category : 1\\n\", \"length : 19.75\\n\", \"\\n\", \"ID : 003\\n\", \"category : 1\\n\", \"length : 18.8\\n\", \"\\n\", \"ID : 004\\n\", \"category : 3\\n\", \"length : 17.9\\n\", \"\\n\", \"ID : 005\\n\", \"category : 3\\n\", \"length : 16.9\\n\", \"\\n\", \"ID : 006\\n\", \"category : 2\\n\", \"length : 17.9\\n\", \"\\n\", \"ID : 007\\n\", \"category : 3\\n\", \"length : 21.5\\n\", \"\\n\", \"ID : 008\\n\", \"category : 1\\n\", \"length : 20.7\\n\", \"\\n\", \"ID : 009\\n\", \"category : 1\\n\", \"length : 16.5\\n\", \"\\n\", \"ID : 010\\n\", \"category : 1\\n\", \"length : 23\\n\", \"\\n\", \"ID : 011\\n\", \"category : 2\\n\", \"length : 18.73\\n\", \"\\n\", \"ID : 012\\n\", \"category : 3\\n\", \"length : 17.9\\n\", \"\\n\", \"ID : 013\\n\", \"category : 3\\n\", \"length : 23.4\\n\", \"\\n\", \"ID : 014\\n\", \"category : 3\\n\", \"length : 17.9\\n\", \"\\n\", \"ID : 015\\n\", \"category : 3\\n\", \"length : 20.93\"]\n</code></pre>\n\n<p>Then you need to convert this mess into a more comfortable object, an Array of Hashes is the best option, so:</p>\n\n<pre><code>res = a.map{ |e| e.chomp.gsub(/\\s+/, \"\").split(':') }.reject(&amp;:empty?).each_slice(3).map(&amp;:to_h)\n#=&gt; [{\"ID\"=&gt;\"001\", \"category\"=&gt;\"2\", \"length\"=&gt;\"18.33\"}, {\"ID\"=&gt;\"002\", \"category\"=&gt;\"1\", \"length\"=&gt;\"19.75\"}, {\"ID\"=&gt;\"003\", \"category\"=&gt;\"1\", \"length\"=&gt;\"18.8\"}, ...\n</code></pre>\n\n<p>Maybe it's better to have <code>length</code> value as a float:</p>\n\n<pre><code>res.map { |h| h['length'] = h['length'].to_f }\n</code></pre>\n\n<p>Finally, grouping by <code>\"category\"</code> and transforming the values of the resulting hash:</p>\n\n<pre><code>res.group_by { |h| h['category']}.transform_values { |v| [v.size, v.sum { |h| h['length'] }] }\n#=&gt; {\"2\"=&gt;[3, 54.959999999999994], \"1\"=&gt;[5, 98.75], \"3\"=&gt;[7, 136.43]}\n</code></pre>\n\n<p><hr>\nOne liner, just for fun:</p>\n\n<pre><code>a.map{ |e| e.chomp.gsub(/\\s+/, \"\").split(':') }.reject(&amp;:empty?).each_slice(3).map(&amp;:to_h).tap { |res| res.map { |h| h['length'] = h['length'].to_f } }.group_by { |h| h['category']}.transform_values { |v| [v.size, v.sum { |h| h['length'] }] }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1563056323, "creation_date": 1556001152, "last_edit_date": 1556005700, "question_id": 55805516, "link": "https://stackoverflow.com/questions/55805516/need-help-using-enumerable", "title": "Need help using Enumerable", "body": "<p>Trying to read file containing a list of information, it's a .dtf file. The information is in 1 paragraph per point. Example:</p>\n\n<pre><code>ID : 001\ncategory : 2\nlength : 18.33\n\nID : 002\ncategory : 1\nlength : 19.75\n\nID : 003\ncategory : 1\nlength : 18.8\n\nID : 004\ncategory : 3\nlength : 17.9\n\nID : 005\ncategory : 3\nlength : 16.9\n\nID : 006\ncategory : 2\nlength : 17.9\n\nID : 007\ncategory : 3\nlength : 21.5\n\nID : 008\ncategory : 1\nlength : 20.7\n\nID : 009\ncategory : 1\nlength : 16.5\n\nID : 010\ncategory : 1\nlength : 23\n\nID : 011\ncategory : 2\nlength : 18.73\n\nID : 012\ncategory : 3\nlength : 17.9\n\nID : 013\ncategory : 3\nlength : 23.4\n\nID : 014\ncategory : 3\nlength : 17.9\n\nID : 015\ncategory : 3\nlength : 20.93\n</code></pre>\n\n<p>and so on..</p>\n\n<p>Need to group the category and total the length for each group.\nAnybody can help?</p>\n\n<p>Succeeded in grouping the category but did not manage to get total of the length.</p>\n\n<pre><code>a = IO.readlines(\"point.txt\")\nb = Hash.new(0)\na.each do |v|\n  b[v] +=1\nend\nb.each do |k, v|\n  puts \"#{k} occurs #{v}\"\nend\nb = Hash.new(0)\n</code></pre>\n\n<p>The expected output:</p>\n\n<pre><code>Category 1 : 5 points\nTotal length : 98.75\n\nCategory 2 : 3 points\nTotal length : 54.96\n\nCategory 3 : 7 points\nTotal length : 136.43\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "tags"], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "is_accepted": false, "score": 1, "last_activity_date": 1555999010, "last_edit_date": 1555999010, "creation_date": 1555998419, "answer_id": 55805029, "question_id": 55804748, "link": "https://stackoverflow.com/questions/55804748/ruby-on-rails-reinsert-html-tags/55805029#55805029", "title": "ruby on rails reinsert html tags", "body": "<p>If you are using in <strong>erb file</strong> then do as,</p>\n\n<pre><code>&lt;%= raw \"&amp;lt;p&amp;gt;Sacent tout cil ki cest escrit veront et oront ke mesire Engerrans, cur\u00e9s de Waneheng, et Jehans Vrouars, de Waneheng doivent cescuns comme se propre dette et cescuns pour le tout a Jehans le Petit, cousturier de dras u a celui ki cest escrit aporteroit, lai homme, IIIc de faissiaus de gros et de lonc a le clauwiere de Tournai, a paiier XV jours devant le jour Saint Jehans Baptiste ki vient prochainement u XV jours apri\u00e9s la endevens, en tous leur boins poins et livret en Tournai sour kauchie en quel liu ke li dis Jehans li cousturiers vorra, mais ke kars u karete i puist tourner et kariier.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Et se li dis Jehans li Petis en faisoit coust u frais u despens u emprunt par le defaute de leur paiement, rendre li doivent li deteur dessus dit parmi sen voir dit sans ceste dette amenrir et si poroit li dis Jehans li Petis u chius ki cest escrit aporteroit, lais hons, donner sour le detteurs dessus dit a quel signeur de tiere u a quel bailliu u a quele justice k'il vorroit le quint denier que li value des faissiaus monteroit pour le sien faire avoir d'iaus et ce quint seroient il tenut de paiier avuec le dette devant dite. De tout chou ont il assenet a aus et au leur a quank'il ont et aront partout et cescuns pour le tout.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;La fu Jakemes Brande con voirs jur\u00e9s et Jakemes le Cuveliers li Agneliers, ki tiesmongna k'il connoiste les parties, comme autres hons. Et si furent les parties a ces escit livrer.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;L'an de grasse mil CCC et XIIII le witisme jour dou mois de march, par un samedi&amp;lt;/p&amp;gt;\"%&gt;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><p>Sacent tout cil ki cest escrit veront et oront ke mesire Engerrans, cur\u00e9s de Waneheng, et Jehans Vrouars, de Waneheng doivent cescuns comme se propre dette et cescuns pour le tout a Jehans le Petit, cousturier de dras u a celui ki cest escrit aporteroit, lai homme, IIIc de faissiaus de gros et de lonc a le clauwiere de Tournai, a paiier XV jours devant le jour Saint Jehans Baptiste ki vient prochainement u XV jours apri\u00e9s la endevens, en tous leur boins poins et livret en Tournai sour kauchie en quel liu ke li dis Jehans li cousturiers vorra, mais ke kars u karete i puist tourner et kariier.&nbsp;</p><p>Et se li dis Jehans li Petis en faisoit coust u frais u despens u emprunt par le defaute de leur paiement, rendre li doivent li deteur dessus dit parmi sen voir dit sans ceste dette amenrir et si poroit li dis Jehans li Petis u chius ki cest escrit aporteroit, lais hons, donner sour le detteurs dessus dit a quel signeur de tiere u a quel bailliu u a quele justice k'il vorroit le quint denier que li value des faissiaus monteroit pour le sien faire avoir d'iaus et ce quint seroient il tenut de paiier avuec le dette devant dite. De tout chou ont il assenet a aus et au leur a quank'il ont et aront partout et cescuns pour le tout.&nbsp;</p><p>La fu Jakemes Brande con voirs jur\u00e9s et Jakemes le Cuveliers li Agneliers, ki tiesmongna k'il connoiste les parties, comme autres hons. Et si furent les parties a ces escit livrer.&nbsp;</p><p>L'an de grasse mil CCC et XIIII le witisme jour dou mois de march, par un samedi</p> </p>\n\n<p>If you are using in controller then use,</p>\n\n<pre><code>include ActionView::Helpers::OutputSafetyHelper\n\nraw(\"&amp;lt;p&amp;gt;Sacent tout cil ki cest escrit veront et oront ke mesire Engerrans, cur\u00e9s de Waneheng, et Jehans Vrouars, de Waneheng doivent cescuns comme se propre dette et cescuns pour le tout a Jehans le Petit, cousturier de dras u a celui ki cest escrit aporteroit, lai homme, IIIc de faissiaus de gros et de lonc a le clauwiere de Tournai, a paiier XV jours devant le jour Saint Jehans Baptiste ki vient prochainement u XV jours apri\u00e9s la endevens, en tous leur boins poins et livret en Tournai sour kauchie en quel liu ke li dis Jehans li cousturiers vorra, mais ke kars u karete i puist tourner et kariier.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Et se li dis Jehans li Petis en faisoit coust u frais u despens u emprunt par le defaute de leur paiement, rendre li doivent li deteur dessus dit parmi sen voir dit sans ceste dette amenrir et si poroit li dis Jehans li Petis u chius ki cest escrit aporteroit, lais hons, donner sour le detteurs dessus dit a quel signeur de tiere u a quel bailliu u a quele justice k'il vorroit le quint denier que li value des faissiaus monteroit pour le sien faire avoir d'iaus et ce quint seroient il tenut de paiier avuec le dette devant dite. De tout chou ont il assenet a aus et au leur a quank'il ont et aront partout et cescuns pour le tout.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;La fu Jakemes Brande con voirs jur\u00e9s et Jakemes le Cuveliers li Agneliers, ki tiesmongna k'il connoiste les parties, comme autres hons. Et si furent les parties a ces escit livrer.&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;L'an de grasse mil CCC et XIIII le witisme jour dou mois de march, par un samedi&amp;lt;/p&amp;gt;\")\n</code></pre>\n\n<p><strong>Or you can also use like,</strong></p>\n\n<pre><code>CGI.unescapeHTML \"&amp;lt;p&amp;gt;\"\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p>\"<p>\"</p>\n"}], "owner": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555999010, "creation_date": 1555996666, "question_id": 55804748, "link": "https://stackoverflow.com/questions/55804748/ruby-on-rails-reinsert-html-tags", "title": "ruby on rails reinsert html tags", "body": "<p>I'm getting a document from my database in xml format like this</p>\n\n<p><a href=\"http://www.fonsiuris.net/dts/document_endpoint/urn:cts:frenchLit:ed_ruelle:1962:19.xml\" rel=\"nofollow noreferrer\">link to xml document</a></p>\n\n<p>It contains these things &amp;lt p &amp;gt (I removed the semicolumn as this website also transforms it in <p>).</p>\n\n<p>Is there ruby or a specific rails function that allows to rewrite the correct html tags ? Or must I do a regex for that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556004385, "post_id": 55804522, "comment_id": 98280139, "body": "See the docs for <a href=\"http://ruby-doc.org/core-2.6.3/doc/syntax/methods_rdoc.html#label-Block+Argument\" rel=\"nofollow noreferrer\">Block Arguments</a> (2nd example)"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1555996173, "creation_date": 1555996173, "answer_id": 55804676, "question_id": 55804522, "link": "https://stackoverflow.com/questions/55804522/passing-block-as-variable-failing-argumenterror-missing-block/55804676#55804676", "title": "Passing block as variable failing &quot;ArgumentError: Missing block&quot;", "body": "<p>The <code>&amp;</code> ampersand unary prefix operator in an argument list is used to \"unroll\" an instance of <code>Proc</code> as if it were passed as a block to a method, just like the <code>&amp;</code> ampersand sigil in a parameter list is used to \"roll up\" a block passed as an argument into an instance of <code>Proc</code>:</p>\n\n<pre><code>Rails.cache.fetch(key, &amp;block)\n#                      \u2191\n</code></pre>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55804676, "answer_count": 1, "score": 0, "last_activity_date": 1555996173, "creation_date": 1555995155, "question_id": 55804522, "link": "https://stackoverflow.com/questions/55804522/passing-block-as-variable-failing-argumenterror-missing-block", "title": "Passing block as variable failing &quot;ArgumentError: Missing block&quot;", "body": "<p>I have the method</p>\n\n<pre><code>  def self.fetch(key, &amp;block)\n    begin\n      Rails.cache.fetch(key, block)\n    rescue Redis::CommandError =&gt; e\n      raise unless e.message == \"OOM command not allowed when used memory &gt; 'maxmemory'.\"\n\n      Utils.log_exception ex\n      yield\n    end\n  end\n</code></pre>\n\n<p>This fails on line 3 with the error</p>\n\n<blockquote>\n  <p>ArgumentError: Missing block: Calling <code>Cache#fetch</code> with <code>force: true</code>\n  requires a block.</p>\n</blockquote>\n\n<p>I'm not sure if passing block in as a parameter like that is the correct way but I couldn't see another way. </p>\n\n<p>What is the correct way to pass a variable containing a block to a method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3.2", "digital-ocean"], "comments": [{"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 1, "creation_date": 1556001956, "post_id": 55804326, "comment_id": 98279137, "body": "have you tried changing the app folder permissions? something as suggested <a href=\"https://www.digitalocean.com/community/questions/permission-denied-on-deploying-rails\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 0, "creation_date": 1556005249, "post_id": 55804326, "comment_id": 98280526, "body": "@UdAY that suggestion is dead on the money. It worked for me. Do you mind writing up a complete answer and I will accept it. Try to make it as comprehensive as you can, i.e. directions about how to discover the users on the system and the user that is running the script and then how to modify the folder permissions. I could always do it, but this is an easy way for you to get some points, especially since you pointed me in the right direction. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": true, "score": 1, "last_activity_date": 1561941655, "last_edit_date": 1561941655, "creation_date": 1556009706, "answer_id": 55807581, "question_id": 55804326, "link": "https://stackoverflow.com/questions/55804326/how-do-i-give-a-ruby-script-executed-via-rails-console-write-permissions-on-digi/55807581#55807581", "title": "How do I give a Ruby script executed via Rails console write permissions on Digital Ocean?", "body": "<p>You need to give the necessary folder permissions to <code>create/write</code> a file. You can do that by:  </p>\n\n<blockquote>\n  <p>chmod -R g+w app_path/config   </p>\n</blockquote>\n\n<p>This gives write permission to app <code>config</code> folder.  </p>\n\n<p>If you want to give permissions to a certain user then:  </p>\n\n<blockquote>\n<pre><code>=&gt; w || who; #list all of the currently logged in users\n=&gt; chgrp -R user_name app_path/config\n=&gt; chmod -R g+w app_path/config\n</code></pre>\n</blockquote>\n\n<p><strong>Edited by OP</strong></p>\n\n<p>What also works is: <code>sudo chmod 777 oxr.json</code></p>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 55807581, "answer_count": 1, "score": 0, "last_activity_date": 1561941655, "creation_date": 1555993631, "last_edit_date": 1555994637, "question_id": 55804326, "link": "https://stackoverflow.com/questions/55804326/how-do-i-give-a-ruby-script-executed-via-rails-console-write-permissions-on-digi", "title": "How do I give a Ruby script executed via Rails console write permissions on Digital Ocean?", "body": "<p>I am deploying my Rails app to Digital Ocean.</p>\n\n<p>I need to run a custom ruby script via the Rails console (or even on a job queue) and in some cases I want it to create a file and store it within my <code>config</code> directory.</p>\n\n<p>Specifically, this is what the setup looks like:</p>\n\n<pre><code>Money.default_bank = MoneyOXR::Bank.new(\n  app_id: ENV[\"APP_ID\"],\n  cache_path: 'config/oxr.json',\n  max_age: 86400\n)\n</code></pre>\n\n<p>So, what needs to happen is whenever it runs it needs to create the <code>config/oxr.json</code>.</p>\n\n<p>However, when I run it, this is what happens:</p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen - config/oxr.json\n</code></pre>\n\n<p>Right now, I am just running it as <code>MyScript.run</code> at the command line in Rails console.</p>\n\n<p>How do I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "puma"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1556014312, "post_id": 55802940, "comment_id": 98285127, "body": "Two quick guesses: 1) another server instance is running in the background; 2) you&#39;re using a port number that requires an administrator level access (<code>sudo</code>). For example, trying to run Puma on port 80 will throw errors unless you have admin privileges."}, {"owner": {"reputation": 181, "user_id": 557317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a826b46b1e737c3f40d8dd2a220943c6?s=128&d=identicon&r=PG", "display_name": "bxiong", "link": "https://stackoverflow.com/users/557317/bxiong"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1556590681, "post_id": 55802940, "comment_id": 98480727, "body": "I wasn&#39;t sure but thought it was my puma.rb config file. Commented it out and works with the defaults. I think some of the settings have changed."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1556590916, "post_id": 55802940, "comment_id": 98480769, "body": "Consider editing the question - add the <code>puma.rb</code> configuration file so we could help track down the cause."}], "answers": [{"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1604419863, "post_id": 58035173, "comment_id": 114339292, "body": "I had to update my <code>puma</code> gem from <code>4.x</code> to <code>5.x</code> and then removed <code>preload_app!</code> from <code>config&#47;puma.rb</code>."}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1604419897, "post_id": 58035173, "comment_id": 114339311, "body": "FYI, <code>preload_app</code> is automatically used in <code>puma</code> 5+ when <code>workers</code> is &gt;= 2."}], "tags": [], "owner": {"reputation": 629, "user_id": 4148056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddfb60491811aa550037b9e39953a4c0?s=128&d=identicon&r=PG", "display_name": "augustocbx", "link": "https://stackoverflow.com/users/4148056/augustocbx"}, "is_accepted": false, "score": 1, "last_activity_date": 1569013513, "creation_date": 1569013513, "answer_id": 58035173, "question_id": 55802940, "link": "https://stackoverflow.com/questions/55802940/puma-listen-loop-error-errnoebadf-bad-file-descriptor-in-puma-rb-config/58035173#58035173", "title": "Puma Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt; in puma.rb config", "body": "<p>If you use capistrano, you need to comment preload_app!\ntry to use phased-restart instead restart</p>\n\n<p>I've solved this issue with the following changes in the puma.rb (config file). In my case, I use capistrano to deploy and restart puma. The are 2 requirements to use the command <strong>phased-restart</strong>: workers >= 2 and don't use preload</p>\n\n<pre><code>workers 2\n#preload_app! \n</code></pre>\n\n<p>My restart command (<strong>phased-restart</strong>): </p>\n\n<p><code>pumactl -S /srv/apps/my_app/shared/tmp/pids/puma.state -F /srv/apps/my_app/shared/config/puma.rb phased-restart\n</code></p>\n"}], "owner": {"reputation": 181, "user_id": 557317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a826b46b1e737c3f40d8dd2a220943c6?s=128&d=identicon&r=PG", "display_name": "bxiong", "link": "https://stackoverflow.com/users/557317/bxiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1569013513, "creation_date": 1555981412, "last_edit_date": 1556715324, "question_id": 55802940, "link": "https://stackoverflow.com/questions/55802940/puma-listen-loop-error-errnoebadf-bad-file-descriptor-in-puma-rb-config", "title": "Puma Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt; in puma.rb config", "body": "<p>When I run puma, I'm getting this error:</p>\n\n<pre><code>2019-04-22 19:59:10 -0500: Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt;\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `select'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `handle_servers'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:360:in `block in run'\n2019-04-22 19:59:10 -0500: Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt;\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `select'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `handle_servers'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:360:in `block in run'\n2019-04-22 19:59:10 -0500: Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt;\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `select'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:386:in `handle_servers'\n/Users/my_account/.rvm/gems/ruby-2.5.5/gems/puma-3.12.1/lib/puma/server.rb:360:in `block in run'\n2019-04-22 19:59:10 -0500: Listen loop error: #&lt;Errno::EBADF: Bad file descriptor&gt;\n</code></pre>\n\n<p>My puma.rb file:</p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\nthreads_count = Integer(ENV['MAX_THREADS'] || 5)\nthreads threads_count, threads_count\n\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RAILS_ENV'] || 'development'\n\non_restart do\n  puts \"Puma restarting...\"\nend\n\napp_dir = File.expand_path(\"../..\", __FILE__)\nlog_dir = \"#{app_dir}/log\"\n\nputs \"LOG DIR: #{log_dir}\"\n\nif ENV['RAILS_ENV'] == 'production'\n  stdout_redirect \"#{log_dir}/puma.stdout.log\", \"#{log_dir}/puma.stderr.log\", true\nend\n\nCauses problem\non_worker_boot do\n  ActiveRecord::Base.establish_connection\nend\n\nCauses problem\npreload_app!\n</code></pre>\n\n<p>This issue is caused by the puma.rb config file. I was uncommenting each line to see if any of them would work but it seems like having any line of code in the puma.rb file just causes the <code>Errno::EBADF: Bad file descriptor</code> error.</p>\n"}, {"tags": ["ruby", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555969204, "post_id": 55801322, "comment_id": 98271621, "body": "I suggest you add a tag &quot;Gtk&quot; and change the title to &quot;...prepend Gtk...&quot;, so that readers, like myself, who know nothing of the gem, are not lured into reading a question that is of no interest and which they cannot hope to answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1555994504, "post_id": 55801322, "comment_id": 98276763, "body": "Wild guess: because <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> never promised autoloading of everything. I am pretty sure that <code>::Gtk::Application.new(&#39;org.gtk.example&#39;)</code> in the first snippet would work. Also, I am not sure I understand what is the exact purpose of prepending <code>Gtk</code> to <code>Object</code>, while it might bring a lot of harm."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1556024056, "post_id": 55801322, "comment_id": 98290190, "body": "Prepending or including Gtk will be added to the Object class. You can directly write include ::Gtk without having to write &lt;class Object ; include Gtk ; end&gt; - but you can&#39;t directly use prepend keyword. Say you want to access ApplicationWindow, you will write Gtk::ApplicationWindow, but by including it, you will write only ApplicationWindow. Consider: <code>module A class B define_singleton_method(:c) do &quot;From #{self}&quot; end end end ; include A ; p B.c</code>. This saves a bit of time. You don&#39;t have to write A::B.c every time. That&#39;s it. There&#39;s no other reason."}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1555994202, "creation_date": 1555968315, "last_edit_date": 1555994202, "question_id": 55801322, "link": "https://stackoverflow.com/questions/55801322/ruby-warns-about-nameerror-while-prepend-gtk-modules-to-object-class", "title": "Ruby warns about NameError while prepend Gtk modules to Object class", "body": "<p>I am using the Gtk3 gem. Following is my code:</p>\n\n<pre><code>#!/usr/bin/ruby -w\nrequire 'gtk3'\n\nclass Object\n    prepend Gtk\nend\n\nApplication.new('org.gtk.example')\n</code></pre>\n\n<p>Result: </p>\n\n<blockquote>\n  <p>/home/sourav/gtk.rb:8:in `&lt;main>': uninitialized constant <code>Application</code> (<code>NameError</code>)</p>\n</blockquote>\n\n<p>But the following code works:</p>\n\n<pre><code>#!/usr/bin/ruby -w\nrequire 'gtk3'\n\nclass Object\n    prepend Gtk\n    Gtk::Application\nend\n\nApplication.new('org.gtk.example')\n</code></pre>\n\n<p>This doesn't have to be specifically <code>Gtk::Application</code>, it could be <code>::Gtk::ApplicationWindow</code> under the prepend line. Why am I getting <code>NameError</code> without the <code>Gtk::Application</code> line?</p>\n"}, {"tags": ["ruby", "unicode", "unicode-string"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555968164, "post_id": 55801279, "comment_id": 98271327, "body": "single quotes vs double quotes. That&#39;s where the inconsistency is."}, {"owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555968243, "post_id": 55801279, "comment_id": 98271346, "body": "nope - I tried that already. You will get different error: &quot;invalid Unicode escape&quot;. Example code: <a href=\"https://tio.run/##Tc5NCsIwEIbhfU7xURdJFw2oC914E0FimtJQTEoyQcV69pj6U9wNDPM@E9L5nrPujR4uKgw4oDqmzW69rdiYKGLZSOO0b43gibpmz2sAK1BvI64@DBENxmBduaDegC9nvBRUUJpMYGzuyjSSF/NU4zHZiZUQ3lSBK6m904qEleRPcUZ@yrf@eQ4Q1kUyqoXvYG6jKUD7z9bsyXJ@AQ\" rel=\"nofollow noreferrer\">tio.run/&hellip;</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555968358, "post_id": 55801279, "comment_id": 98271375, "body": "Indeed, I tried this myself now. In any case, single-quoted strings don&#39;t process most  backslash sequences, this included."}, {"owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555968455, "post_id": 55801279, "comment_id": 98271397, "body": "My Goal: I am trying to print few Unicode characters using a loop ... Any suggestion?"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1555968903, "post_id": 55801395, "comment_id": 98271541, "body": "I think it is also worth noting that <code>&#39;\\u&#39; + &#39;2713&#39;</code> and <code>&quot;\\u2713&quot;</code> are very different things due to when escape sequences are decoded. Also that <code>\\u</code> works with hex rather than decimal."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1555968947, "post_id": 55801395, "comment_id": 98271557, "body": "@muistooshort: your comment should serve perfectly, I think. Thanks :)"}, {"owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "edited": false, "score": 0, "creation_date": 1555969338, "post_id": 55801395, "comment_id": 98271667, "body": "Great: I need to check the hex vs. decimal. However, I get different result on Win7 platform:    C:\\Users\\ZZBGO&gt;irb irb(main):001:0&gt; p RUBY_PLATFORM &quot;x64-mingw32&quot; =&gt; &quot;x64-mingw32&quot; irb(main):002:0&gt; p RUBY_VERSION &quot;2.6.1&quot; =&gt; &quot;2.6.1&quot; irb(main):003:0&gt; 10003.chr(Encoding::UTF_8) =&gt; &quot;\\u2713&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "edited": false, "score": 0, "creation_date": 1555969392, "post_id": 55801395, "comment_id": 98271683, "body": "@Adam: maybe it&#39;s the windows &#175;\\_(\u30c4)_/&#175; Works on my machine (and tio)"}, {"owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "edited": false, "score": 0, "creation_date": 1556571246, "post_id": 55801395, "comment_id": 98476586, "body": "f = File.open(&#39;trash.txt&#39;, &#39;w&#39;);  100.upto(33500){|i| \tf &lt;&lt; i.chr(Encoding::UTF_8) }"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1555969032, "last_edit_date": 1555969032, "creation_date": 1555968734, "answer_id": 55801395, "question_id": 55801279, "link": "https://stackoverflow.com/questions/55801279/check-mark-character-u2713-inconsistent-print-out/55801395#55801395", "title": "check mark character = &quot;\\u2713&quot; - inconsistent print out", "body": "<p>In ruby, you turn character codes into characters with <code>chr</code></p>\n\n<pre><code>55.chr # =&gt; \"7\"\n</code></pre>\n\n<p>But this will fail for codes outside of ASCII range</p>\n\n<pre><code>10003.chr # RangeError (10003 out of char range)\n# 10003 is 0x2713 in decimal\n</code></pre>\n\n<p>In this case, you need to specify the encoding.</p>\n\n<pre><code>10003.chr(Encoding::UTF_8) # =&gt; \"\u2713\"\n</code></pre>\n\n<p>Or use <code>Array#pack</code></p>\n\n<pre><code>[10003].pack(\"U*\") # =&gt; \"\u2713\"\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555969032, "creation_date": 1555968040, "question_id": 55801279, "link": "https://stackoverflow.com/questions/55801279/check-mark-character-u2713-inconsistent-print-out", "title": "check mark character = &quot;\\u2713&quot; - inconsistent print out", "body": "<p>Inconsistent behavior.</p>\n\n\n\n<pre class=\"lang-ruby prettyprint-override\"><code>checkmark = \"\\u2713\"\nputs checkmark.encode('utf-8')   # this works - prints the 'checkmark' character\n\n2713.upto(2713) {|i|\n    puts '\\u'.concat(i.to_s)    # this prints \\u2713  (instead of expected 'checkmark')\n}\n\n</code></pre>\n\n<p>In both cases - print the check box character.</p>\n\n<p>Code: <a href=\"https://tio.run/##TY5NCsIwGET3OcWgi6SLBtSFbrxJQWKa0lBMSvIFFevZY@pPcTcwzHsT0vmes@6NHi4qDDhi1aTtfrNbsTFRxNJI47RvjeCJuvrAKwBrUG8jrj4METXGYF1ZUG/AlxkvBBWUJhMYm7kyjeTFnCo8JjuxAsJbxZvEpfZOKxJWkj/FWfKzfOmfc4CwLpJRLXwHcxtNEbT/2oo9Wc4v\" rel=\"nofollow noreferrer\">https://tio.run/##TY5NCsIwGET3OcWgi6SLBtSFbrxJQWKa0lBMSvIFFevZY@pPcTcwzHsT0vmes@6NHi4qDDhi1aTtfrNbsTFRxNJI47RvjeCJuvrAKwBrUG8jrj4METXGYF1ZUG/AlxkvBBWUJhMYm7kyjeTFnCo8JjuxAsJbxZvEpfZOKxJWkj/FWfKzfOmfc4CwLpJRLXwHcxtNEbT/2oo9Wc4v</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1555972220, "post_id": 55800351, "comment_id": 98272450, "body": "Size should be a column of the products table and not line items. Each size should be a unique product. The key reason here is that you should be able to keep a stock of each size."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1555972996, "post_id": 55800351, "comment_id": 98272612, "body": "This is also two separate questions masquerading as one. The larger design question about how to model product sizes is a bit too broad. The second question is about how to add additional attributes to <code>button_to</code> is very likely a duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5966163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156561973920367/picture?type=large", "display_name": "Israel Sepulveda", "link": "https://stackoverflow.com/users/5966163/israel-sepulveda"}, "edited": false, "score": 0, "creation_date": 1555982578, "post_id": 55802955, "comment_id": 98274506, "body": "I did. I added the following code: &lt;%= select_tag(:size, options_for_select([[&#39;Extra-large&#39;, &#39;Extra-large&#39;], [&#39;Large&#39;, &#39;Large&#39;]]))%&gt; for the sizes. Should I add the sizes in the database? I have tried that, but then how do I get them to drop down and add value to each size?"}, {"owner": {"reputation": 1223, "user_id": 8476609, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QsRBss4d88I/AAAAAAAAAAI/AAAAAAAAAPY/8gVoiTO98xc/photo.jpg?sz=128", "display_name": "Ninh Le", "link": "https://stackoverflow.com/users/8476609/ninh-le"}, "reply_to_user": {"reputation": 29, "user_id": 5966163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156561973920367/picture?type=large", "display_name": "Israel Sepulveda", "link": "https://stackoverflow.com/users/5966163/israel-sepulveda"}, "edited": false, "score": 0, "creation_date": 1555986158, "post_id": 55802955, "comment_id": 98275172, "body": "I have viewed your source code, is a problem that you have the default sizes you store in the model and in show product you want to scroll all size option in a form and submit with product id when you create one?"}, {"owner": {"reputation": 29, "user_id": 5966163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156561973920367/picture?type=large", "display_name": "Israel Sepulveda", "link": "https://stackoverflow.com/users/5966163/israel-sepulveda"}, "edited": false, "score": 0, "creation_date": 1555987993, "post_id": 55802955, "comment_id": 98275519, "body": "I tried a different method, so that&#39;s why I had the default sizes in the model, but I&#39;m not using them throughout the application."}, {"owner": {"reputation": 1223, "user_id": 8476609, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QsRBss4d88I/AAAAAAAAAAI/AAAAAAAAAPY/8gVoiTO98xc/photo.jpg?sz=128", "display_name": "Ninh Le", "link": "https://stackoverflow.com/users/8476609/ninh-le"}, "reply_to_user": {"reputation": 29, "user_id": 5966163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156561973920367/picture?type=large", "display_name": "Israel Sepulveda", "link": "https://stackoverflow.com/users/5966163/israel-sepulveda"}, "edited": false, "score": 0, "creation_date": 1555988901, "post_id": 55802955, "comment_id": 98275662, "body": "why not you use enum for size instead of using the constant? Use can iterate it in views instead of hard-coding, instead of using submit button you can using form_tag to pass size params in select_box when submit form."}], "tags": [], "owner": {"reputation": 1223, "user_id": 8476609, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QsRBss4d88I/AAAAAAAAAAI/AAAAAAAAAPY/8gVoiTO98xc/photo.jpg?sz=128", "display_name": "Ninh Le", "link": "https://stackoverflow.com/users/8476609/ninh-le"}, "is_accepted": false, "score": 0, "last_activity_date": 1555981550, "creation_date": 1555981550, "answer_id": 55802955, "question_id": 55800351, "link": "https://stackoverflow.com/questions/55800351/building-an-simple-ecommerce-site-with-rails/55802955#55802955", "title": "Building an simple ecommerce site with rails", "body": "<p>Do you have try:</p>\n\n<pre><code>&lt;%= button_to 'Add to cart', line_items_path(product_id: @product, size: @product.size), class: 'btn btn-primary' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5966163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156561973920367/picture?type=large", "display_name": "Israel Sepulveda", "link": "https://stackoverflow.com/users/5966163/israel-sepulveda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555981550, "creation_date": 1555963124, "last_edit_date": 1555963823, "question_id": 55800351, "link": "https://stackoverflow.com/questions/55800351/building-an-simple-ecommerce-site-with-rails", "title": "Building an simple ecommerce site with rails", "body": "<p>So I read the Agile Web Development with Rails 5.1. The author used a scaffold to generate products. In my product page (<code>show.html.erb</code>), I'm able to purchase an item. If I wanted to add sizes to my product, how would I go about that? Do I add a size column in my product table?</p>\n\n<p>In my show.html.erb file, I have </p>\n\n<pre><code>&lt;%= button_to 'Add to cart', line_items_path(product_id: @product), class: 'btn btn-primary' %&gt;\n</code></pre>\n\n<p>This allows me to send the product id to the controller. I understand that the button is a form. However, the <code>show.html.erb</code> page is not a form. How could I pass additional params such as the size of the product to the <code>line_items_path</code>?</p>\n"}, {"tags": ["ruby", "command-line"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5286074, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1822576187/picture?type=large", "display_name": "Brandon Minner", "link": "https://stackoverflow.com/users/5286074/brandon-minner"}, "edited": false, "score": 0, "creation_date": 1555967210, "post_id": 55801092, "comment_id": 98270996, "body": "Ok thank you. My current requirement was that I do both, but I&#39;m just going to have to change that I guess"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1555967604, "last_edit_date": 1555967604, "creation_date": 1555966992, "answer_id": 55801092, "question_id": 55800335, "link": "https://stackoverflow.com/questions/55800335/how-to-read-a-file-from-command-line-using-operator-and-read-user-input-afterw/55801092#55801092", "title": "How to read a file from command line using &lt; operator and read user input afterwards?", "body": "<p>You can't read both file <strong>and</strong> user input from stdin. You must choose. But since you want both, how about this:</p>\n\n<p>Instead of piping the file content to stdin, pass just the filename to your script. The script will then open and read the file. And stdin will be available for interaction with the user (through <code>$stdin</code> or <code>STDIN</code>).</p>\n\n<p>Here is a minor modification of your script:</p>\n\n<pre><code>arr = CSV.parse(ARGF) # the important part. \ninput = ''\nwhile true\n  puts \"What is your choice: \"\n  input = STDIN.gets.to_i\n  if input.zero?\n    break\n  end\nend\n</code></pre>\n\n<p>And you can call it like this:</p>\n\n<pre><code>ruby ./bin/kata items.csv\n</code></pre>\n\n<p>You can read more about ARGF in the documentation: <a href=\"https://ruby-doc.org/core-2.6/ARGF.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6/ARGF.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1555970745, "creation_date": 1555970745, "answer_id": 55801708, "question_id": 55800335, "link": "https://stackoverflow.com/questions/55800335/how-to-read-a-file-from-command-line-using-operator-and-read-user-input-afterw/55801708#55801708", "title": "How to read a file from command line using &lt; operator and read user input afterwards?", "body": "<p>This has nothing to do with Ruby. It is a feature of the shell.</p>\n\n<p>A file descriptor is connected to exactly one file at any one time. The file descriptor <code>0</code> (standard input) can be connected to a file or it can be connected to the terminal. It can't be connected to both.</p>\n\n<p>So, therefore, what you want is simply not possible. And it is not just not possible in Ruby, it is <em>fundamentally</em> impossible by the very nature of how shell redirection works.</p>\n\n<p>If you want to change this, there is nothing you can do in your program or in Ruby. You need to modify how your shell works.</p>\n"}], "owner": {"reputation": 29, "user_id": 5286074, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1822576187/picture?type=large", "display_name": "Brandon Minner", "link": "https://stackoverflow.com/users/5286074/brandon-minner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555970745, "creation_date": 1555963049, "last_edit_date": 1555966657, "question_id": 55800335, "link": "https://stackoverflow.com/questions/55800335/how-to-read-a-file-from-command-line-using-operator-and-read-user-input-afterw", "title": "How to read a file from command line using &lt; operator and read user input afterwards?", "body": "<p>I am writing a program in which I am taking in a csv file via the &lt; operator on the command line. After I read in the file I would also like to ask the user questions and have them input their response via the command line. However, whenever I ask for user input, my program skips right over it.</p>\n\n<p>When I searched stack overflow I found what seems to be the python version <a href=\"https://stackoverflow.com/questions/70797/user-input-and-command-line-arguments\">here</a>, but it doesn't really help me since the methods are obviously different.</p>\n\n<p>I read my file using $stdin.read. And I have tried to use regular gets, STDIN.gets, and $stdin.gets. However, the program always skips over them.</p>\n\n<p>Sample input <code>ruby ./bin/kata &lt; items.csv</code>\nCurrent File</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'csv'\n\nn = $stdin.read\narr = CSV.parse(n)\ninput = ''\nwhile true\n  puts \"What is your choice: \"\n  input = $stdin.gets.to_i\n  if input.zero?\n    break\n  end\nend\n\n</code></pre>\n\n<p>My expected result is to have <code>What is your choice:</code> display in the command and wait for user input. However, I am getting that phrase displayed over and over in an infinite loop. Any help would be appreciated!</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1556030600, "post_id": 55803823, "comment_id": 98294247, "body": "Thank you so much Povilas! That solves my problem, I was hoping to learn this in a RSpec way of doing it. So that for a much more complex data driven suites, I can apply it. Do you know a way of data driving the RSpec tests?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556037854, "post_id": 55803823, "comment_id": 98298469, "body": "There is no &quot;RSpec way of doing it.&quot;. RSpec does not actually know or care about your database (well except the hooks that test for pending migrations in rspec-rails). Most gems use Travis together with ENV vars to test on different ruby versions, databases etc."}], "tags": [], "owner": {"reputation": 134, "user_id": 11275596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gewiN2n-1YI/AAAAAAAAAAI/AAAAAAAAAAc/sBC2tJTStP0/photo.jpg?sz=128", "display_name": "Povilas Jur\u010dys", "link": "https://stackoverflow.com/users/11275596/povilas-jur%c4%8dys"}, "is_accepted": true, "score": 1, "last_activity_date": 1555989553, "creation_date": 1555989553, "answer_id": 55803823, "question_id": 55800139, "link": "https://stackoverflow.com/questions/55800139/run-rspec-test-suite-multiple-times-with-different-parameters/55803823#55803823", "title": "Run rspec test suite multiple times with different parameters", "body": "<p>You can solve this with <a href=\"https://www.thoughtco.com/using-environment-variables-2908194\" rel=\"nofollow noreferrer\">env variables</a>. Let's say that you want to run rspec for two different MySQL databases. You can define your db connection like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>db_client = Mysql2::Client.new(database: ENV['DB_NAME'])\n</code></pre>\n\n<p>Now you can run your rspec like this:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>DB_NAME=your_custom_db_name rspec\nDB_NAME=other_db_name rspec\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "is_accepted": false, "score": 1, "last_activity_date": 1587577275, "last_edit_date": 1587577275, "creation_date": 1587576545, "answer_id": 61371352, "question_id": 55800139, "link": "https://stackoverflow.com/questions/55800139/run-rspec-test-suite-multiple-times-with-different-parameters/61371352#61371352", "title": "Run rspec test suite multiple times with different parameters", "body": "<p>You can use <a href=\"https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow noreferrer\">shared_examples</a> to achieve what you want.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>RSpec.describe 'shared_examples' do\n  shared_examples 'is palendrome' do |word|\n    it 'is equal to itself if reversed' do\n      expect(word.reverse).to eq(word)\n    end\n  end\n\n  context 'with the word racecar' do\n    # Runs every example is the shared_examples block and passes\n    include_examples 'is palendrome', 'racecar'\n  end\n\n  context 'with the word apple' do\n    # Runs every example is the shared_examples block but fails\n    include_examples 'is palendrome', 'apple'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 55803823, "answer_count": 2, "score": 1, "last_activity_date": 1587577275, "creation_date": 1555961984, "last_edit_date": 1556000469, "question_id": 55800139, "link": "https://stackoverflow.com/questions/55800139/run-rspec-test-suite-multiple-times-with-different-parameters", "title": "Run rspec test suite multiple times with different parameters", "body": "<p>I have a suite of specs to run. I would like to run the specs multiple times with different parameters each time. For example, I am testing the SQL scripts against two different database versions. The test cases are the same, but the connection string is different. How will I achieve this?\nI am new to RSpec, I was able to get the whole suite working for one version. Just need to know how to rerun with different parameters?</p>\n\n<p>I looked at <code>Class:RSpec::Core::Runner</code>, but it's not very clear to me from the documentation that how this can be leveraged to run multiple times?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1195, "user_id": 4230170, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c18501b216e1b2c742b3e0a719688307?s=128&d=identicon&r=PG&f=1", "display_name": "Evochrome", "link": "https://stackoverflow.com/users/4230170/evochrome"}, "edited": false, "score": 2, "creation_date": 1555959939, "post_id": 55799717, "comment_id": 98268395, "body": "typo in your id in your html <code>btb-menu</code>. Therefore <code>btnMenu</code> is <code>undefined</code>."}, {"owner": {"reputation": 39336, "user_id": 1377002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oDeF7.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/1377002/andy"}, "edited": false, "score": 2, "creation_date": 1555960735, "post_id": 55799717, "comment_id": 98268688, "body": "You can just call the function with <code>toogleView()</code> rather than <code>new toogleView()</code>."}, {"owner": {"reputation": 151, "user_id": 7488085, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-uT6cqh7XaEk/AAAAAAAAAAI/AAAAAAAAABs/-j08Y7gbAXw/photo.jpg?sz=128", "display_name": "JULIO MACHAN", "link": "https://stackoverflow.com/users/7488085/julio-machan"}, "edited": false, "score": 0, "creation_date": 1555961889, "post_id": 55799717, "comment_id": 98269085, "body": "Thanks my mistake"}], "owner": {"reputation": 151, "user_id": 7488085, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-uT6cqh7XaEk/AAAAAAAAAAI/AAAAAAAAABs/-j08Y7gbAXw/photo.jpg?sz=128", "display_name": "JULIO MACHAN", "link": "https://stackoverflow.com/users/7488085/julio-machan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555959999, "creation_date": 1555959869, "question_id": 55799717, "link": "https://stackoverflow.com/questions/55799717/cannot-read-property-addeventlistener", "title": "Cannot read property &#39;addEventListener&#39;", "body": "<p>I'm using javascript with ruby on rails but when I try to pass the addEventListener is say null</p>\n\n<p>I am passing the javascript through a call </p>\n\n<p>html:</p>\n\n<pre><code>&lt;header class=\"header\"&gt;\n  &lt;div class=\"contenedor\"&gt;\n    &lt;h1 class=\"logo\"&gt;Doujins Latinos&lt;/h1&gt;\n    &lt;span class=\"icon-menu btb-menu\" id=\"btb-menu\"&gt;&lt;i class=\"fas fa-bars\"&gt;&lt;/i&gt;&lt;/span&gt;\n    &lt;nav class=\"nav\" id=\"nav\"&gt;\n      &lt;ul class=\"menu\"&gt;\n        &lt;li class=\"menu__item\"&gt;&lt;a class=\"menu__link select\" href=\"#\"&gt;Inicio&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"menu__item\"&gt;&lt;a class=\"menu__link\"href=\"\"&gt;Curso&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"menu__item\"&gt;&lt;a class=\"menu__link\"href=\"\"&gt;Docente&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"menu__item\"&gt;&lt;a class=\"menu__link\"href=\"\"&gt;Contacto&lt;/a&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/nav&gt;\n  &lt;/div&gt;\n&lt;/header&gt;\n&lt;script&gt;\n  new toogleView();\n&lt;/script&gt;\n</code></pre>\n\n<p>js: </p>\n\n<pre><code>function toogleView(){\n  var btnMenu = document.getElementById('btn-menu');\n  var nav = document.getElementById('nav');\n\n  btnMenu.addEventListener('click', function(){\n    nav.classList.toggle('mostrar');\n  });\n}\n</code></pre>\n\n<p>I will really appreciate if you can help me.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1555960077, "post_id": 55799621, "comment_id": 98268449, "body": "Default the <code>fmt</code> argument to nil, and if it&#39;s given show a warning."}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1555960613, "post_id": 55799621, "comment_id": 98268639, "body": "@maxpleaner that is really a good point... simple but right on the mark! Would you mind put your comment as an answer?  Otherwise I will not be able to mark the question as answered"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555965721, "post_id": 55799621, "comment_id": 98270486, "body": "What class has a method <code>deprecate</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555965727, "post_id": 55799621, "comment_id": 98270489, "body": "Allowing the new method to be called with two arguments, in which case you would disregard one and issue a warning, is an ugly and potentially dangerous kludge. The safest approach is to accept only one argument, allowing an exception to be raised if an attempt is made to pass two arguments, and track down and fix the parts of your entire code base that presently call the method with two arguments.  Note that a warning can be easily missed if it&#39;s just one message among many."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1555965920, "post_id": 55799621, "comment_id": 98270545, "body": "I could make an answer, it&#39;s very simple, but I am wondering why you want to deprecate it. The second argument is already optional (it has a default value) so calling it with 1 or 2 args would still work. Unless you really don&#39;t want to allow the user to specify this value."}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555966830, "post_id": 55799621, "comment_id": 98270882, "body": "@CarySwoveland deprecate comfes from the module Gem::Deprecate from stdlib/rubygems"}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1555967222, "post_id": 55799621, "comment_id": 98270997, "body": "@maxpleaner the deprecations is to alert that the argument is not anymore being used and should be gone on subsequent versions Let the argument there and never use it, is something possible but maybe not desired for long... Imagine maintain for years an argument that is not needed. While remove all of a sudden the argument, may break compatibility with systems that currently use the gem without alert"}], "answers": [{"comments": [{"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1555967585, "post_id": 55800978, "comment_id": 98271112, "body": "the intention is make clear that the argument that once was optional, now is not even used anymore."}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1555967720, "post_id": 55800978, "comment_id": 98271160, "body": "the check if it was passed and send a <code>warn</code> will work pretty much... then in future major release the second argument will be completely removed."}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1555968147, "post_id": 55800978, "comment_id": 98271325, "body": "I&#39;m just looking for a smooth integration between parts... with an approach like &quot;Instruct in the right direction&quot; with a warning on a current release, and then &quot;punish&quot; raising exception in a major release"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1555966239, "creation_date": 1555966239, "answer_id": 55800978, "question_id": 55799621, "link": "https://stackoverflow.com/questions/55799621/ruby-what-is-the-best-approach-to-deprecate-just-one-argument-of-a-method/55800978#55800978", "title": "Ruby: What is the best approach to deprecate just one argument of a method?", "body": "<p>You can check if the second argument is provided like so:</p>\n\n<pre><code>  def date_valid?(date_string, fmt=nil)\n    if fmt\n      warn \"second argument to `date_valid?` is deprecated (#{caller[-2]})\"\n    end\n    fmt ||= \"default value\"\n    # ... \n  end\n</code></pre>\n\n<p>But like I mentioned in a comment, not sure why you would want to deprecate the second argument at all (it is optional, after all), unless it's important that the user <em>not</em> customize this value</p>\n"}], "owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 55800978, "answer_count": 1, "score": 0, "last_activity_date": 1555966239, "creation_date": 1555959432, "question_id": 55799621, "link": "https://stackoverflow.com/questions/55799621/ruby-what-is-the-best-approach-to-deprecate-just-one-argument-of-a-method", "title": "Ruby: What is the best approach to deprecate just one argument of a method?", "body": "<p>Considering a class with a method that used to receive 2 arguments but now on the new versions the argument is not anymore wanted. What is the best approach to deprecate this method's argument?</p>\n\n<p>The Ruby stdlib has a <code>deprecate</code> method that would deprecate the entire method, but I still want the method to exist, it just don't need one of the arguments it used to receive, and was already an optional argument.</p>\n\n<p>And example would be</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class DateValidator\n  def date_valid?(date_string, fmt=\"%Y-%m-%d\")\n    # any check that does not even look for `_fmt` anymore\n  end\n</code></pre>\n\n<p>If I simply deprecate this method, a deprecation warning will be sent even when someone call the method without passing the second argument.</p>\n\n<p>I want to change the method arity soon to explicitly ommit the argument, but I want do that in a new version, and I don't want break compatibility with the classes that still passes the second argument, even if it is not necessary anymore.</p>\n\n<p>So, how would be the best approach to warn of the deprecation of the 2nd argument in this example?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555957499, "post_id": 55798796, "comment_id": 98267290, "body": "That&#39;s giving me an error when I try to load <code>http:&#47;&#47;localhost:3000&#47;locations&#47;new</code> <code>NameError in LocationsController#new uninitialized constant LocationsController::LocationIqApi</code>"}, {"owner": {"reputation": 498, "user_id": 3977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41389f201bd54d41181a28e2b1c14608?s=128&d=identicon&r=PG", "display_name": "nikz", "link": "https://stackoverflow.com/users/3977/nikz"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555957607, "post_id": 55798796, "comment_id": 98267340, "body": "Where is locationiq_api.rb (as in, which folder inside Rails)? It might be because of the capitalisation, so that means autoloading isn&#39;t kicking in - try calling the class <code>LocationiqApi</code> instead?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555957994, "post_id": 55798796, "comment_id": 98267508, "body": "it&#39;s app/services. I&#39;ve changed it to LocationIqApi as per your example but still get this error."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555962137, "post_id": 55798796, "comment_id": 98269173, "body": "do i need to require the class method or anything like that? can&#39;t seem to put my finger on it"}, {"owner": {"reputation": 498, "user_id": 3977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41389f201bd54d41181a28e2b1c14608?s=128&d=identicon&r=PG", "display_name": "nikz", "link": "https://stackoverflow.com/users/3977/nikz"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555962586, "post_id": 55798796, "comment_id": 98269342, "body": "You might need to explicitly require the file, unless you add app/services to your autoload paths (although depending on your Rails version this might not be needed): <code>config.autoload_paths += [ Rails.root.join(&quot;app&quot;, &quot;services&quot;) ]</code>.  If you change it to <code>LocationIqApi</code>, then the file will need to be named <code>location_iq_api.rb</code> rather than <code>locationiq_api.rb</code> - the filename is how Rails knows that constant should be defined in there."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555963611, "post_id": 55798796, "comment_id": 98269748, "body": "Thanks for the suggestion - changing the file names worked. Well, at least I&#39;m getting a different error message now ;) <code>TypeError in Locations#new, no implicit conversion of String into Intege</code>"}, {"owner": {"reputation": 498, "user_id": 3977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41389f201bd54d41181a28e2b1c14608?s=128&d=identicon&r=PG", "display_name": "nikz", "link": "https://stackoverflow.com/users/3977/nikz"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1555964043, "post_id": 55798796, "comment_id": 98269896, "body": "Usually that means you&#39;re trying to access an array like a hash or vice versa - I&#39;d check the exact object that&#39;s being returned from your <code>#find_coordinates</code> method."}], "tags": [], "owner": {"reputation": 498, "user_id": 3977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41389f201bd54d41181a28e2b1c14608?s=128&d=identicon&r=PG", "display_name": "nikz", "link": "https://stackoverflow.com/users/3977/nikz"}, "is_accepted": false, "score": 0, "last_activity_date": 1555955873, "creation_date": 1555955873, "answer_id": 55798796, "question_id": 55798592, "link": "https://stackoverflow.com/questions/55798592/how-do-i-set-my-base-uri-when-using-the-httparty-gem/55798796#55798796", "title": "How do I set my `base_uri` when using the HTTParty gem?", "body": "<p>Something like this might help: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class LocationIqApi\n  include HTTParty\n  base_uri \"https://eu1.locationiq.com/v1/search.php\"\n\n  def initialize(api_key, format = \"json\")\n    @options = { key: api_key, format: format }\n  end\n\n  def find_coordinates(street)\n    self.class.get(\"/locations\", query: @options.merge({ q: street }))\n  end\n\n  def handle_error\n    if find_coordinates.code.to_i = 200\n      find_coordinates.parsed_response\n    else\n      raise \"Couldn't connect to LocationIQ Api\"\n    end\n  end\nend\n</code></pre>\n\n<p>Then when you want to use it, you'll need to create a new instance with your key:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>@search = LocationIqApi.new(YOUR_API_KEY_HERE).find_coordinates(params[:q])\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555955873, "creation_date": 1555954964, "question_id": 55798592, "link": "https://stackoverflow.com/questions/55798592/how-do-i-set-my-base-uri-when-using-the-httparty-gem", "title": "How do I set my `base_uri` when using the HTTParty gem?", "body": "<p>I am creating a small Rails at that consumes an external geolocations API. It should take a string (address) and return the coordinates. I am not sure how to set the base URI with the HTTParty gem. The documentation of the API says requests can be sent to the endpoint</p>\n\n<p><code>GET https://eu1.locationiq.com/v1/search.php?key=YOUR_PRIVATE_TOKEN&amp;q=SEARCH_STRING&amp;format=json</code></p>\n\n<p>How do I go about setting the token and the search string in my class method? Here is the code I have so far.</p>\n\n<p>locationiq_api.rb</p>\n\n<pre><code>  include HTTParty\n  base_uri \"https://eu1.locationiq.com/v1/search.php?key=pk.29313e52bff0240b650bb0573332121e&amp;q=SEARCH_STRING&amp;format=json\"\n\n  attr_accessor :street\n\n  def find_coordinates(street)\n    self.class.get(\"/locations\", query: { q: street })\n  end\n\n  def handle_error\n    if find_coordinates.code.to_i = 200\n      find_coordinates.parsed_response\n    else\n      raise \"Couldn't connect to LocationIQ Api\"\n    end\n  end\nend```\n\nlocations controller:\n\n```class LocationsController &lt; ApplicationController\nbefore_action :find_location, only: [:show, :destroy, :edit, :update]\n\ndef new\n  @search = []\n  # returns an array of hashes\n  @search = locationiq_api.new.find_coordinates(params[:q])['results'] unless params[:q].nil?\nend\n\ndef create\n  @location = Location.new(location_params)\n  if @location.save\n    redirect_to root_path\n  else\n    render 'new'      \n  end\nend\n\nprivate\n\n  def location_params\n    params.require(:location).permit(:place_name, :coordinate)\n  end\n\n  def find_location\n    @location = Location.find(params[:id])\n  end\nend```\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "sendgrid", "devise-confirmable"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555950227, "post_id": 55797491, "comment_id": 98264063, "body": "The first question is if SendGrid is receiving the API calls."}, {"owner": {"reputation": 3, "user_id": 11395645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb793b37119da4f0f30a1b77e05d54cc?s=128&d=identicon&r=PG&f=1", "display_name": "RandomUser2002", "link": "https://stackoverflow.com/users/11395645/randomuser2002"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1555950345, "post_id": 55797491, "comment_id": 98264114, "body": "@tadman. How do I check if Sendgrid is receiving the API calls?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555950402, "post_id": 55797491, "comment_id": 98264142, "body": "That&#39;s a question for the SendGrid dashboard, documentation and/or support department. I&#39;d check that your credentials are correct, like test using something other than this code to verify, and rule out possible failures that way."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1555954622, "post_id": 55797491, "comment_id": 98266092, "body": "Did you configure your environment variables on heroku?"}], "owner": {"reputation": 3, "user_id": 11395645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb793b37119da4f0f30a1b77e05d54cc?s=128&d=identicon&r=PG&f=1", "display_name": "RandomUser2002", "link": "https://stackoverflow.com/users/11395645/randomuser2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556008955, "creation_date": 1555949837, "last_edit_date": 1556008955, "question_id": 55797491, "link": "https://stackoverflow.com/questions/55797491/devise-confirmable-emails-are-not-being-sent", "title": "Devise Confirmable emails are not being sent", "body": "<p>Devise account confirmation emails are not being sent out despite heroku logs saying that it is.</p>\n\n<p>I have added the send grid  add-on to my heroku app. I have tried adding config.action_mailer.perform_deliveries = true to my production.rb file and setting config.action_mailer.raise_delivery_errors = true. But none of these seem to work.</p>\n\n<p>config/environments/production.rb:</p>\n\n<pre><code>  config.action_mailer.perform_caching = false\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.delivery_method = :smtp\n  host = 'math-scientist.herokuapp.com'\n  config.action_mailer.default_url_options = { host: host }\n  ActionMailer::Base.smtp_settings = {\n    :address        =&gt; 'smtp.sendgrid.net',\n    :port           =&gt; '587',\n    :authentication =&gt; :plain,\n    :user_name      =&gt; ENV['SENDGRID_USERNAME'],\n    :password       =&gt; ENV['SENDGRID_PASSWORD'],\n    :domain         =&gt; 'heroku.com',\n    :enable_starttls_auto =&gt; true\n  }\n</code></pre>\n\n<p>config/initializers/devise.rb</p>\n\n<pre><code>  config.mailer_sender = 'noreply@mathscientist.com'\n  config.reconfirmable = false\n</code></pre>\n\n<p>User Model:</p>\n\n<pre><code>  class User &lt; ApplicationRecord\n    devise :database_authenticatable, :registerable, :confirmable,\n       :recoverable, :rememberable, :validatable\n  end\n</code></pre>\n\n<p>Database Migration:</p>\n\n<pre><code>  class AddConfirmableToUsers &lt; ActiveRecord::Migration[5.1]\n    def up\n     add_column :users, :confirmation_token, :string\n      add_column :users, :confirmed_at, :datetime\n      add_column :users, :confirmation_sent_at, :datetime\n      add_index :users, :confirmation_token, unique: true\n      User.update_all confirmed_at: DateTime.now\n    end\n\n    def down\n      remove_columns :users, :confirmation_token, :confirmed_at,           \n                     :confirmation_sent_at\n    end\n  end\n</code></pre>\n\n<p>Heroku Logs:</p>\n\n<pre><code>  Sent mail to mathscientistofficial@gmail.com (1210.8ms)\n  Date: Mon, 22 Apr 2019 15:51:18 +0000\n  From: noreply@mathscientist.com\n  Reply-To: noreply@mathscientist.com\n  To: mathscientistofficial@gmail.com\n\n  Subject: Confirmation instructions\n\n\n  &lt;p&gt;Welcome mathscientistofficial@gmail.com!&lt;/p&gt;\n\n  &lt;p&gt;You can confirm your account email through the link below:&lt;/p&gt;\n\n  &lt;p&gt;&lt;a href=\"http://math-scientist.herokuapp.com/users/confirmation?confirmation_token=sSbZLC3ytX8dEc2Xv1e2\"&gt;Confirm my account&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Edit:\nI checked my sendgrid dashboard on heroku and it says that it has received no email requests.</p>\n\n<p>Edit 2:\nHeroku has set a send grid username and password for me when I added the send grid add-on. But I do not have a send grid api key. Is it needed to send devise confirmation emails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "uuid"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1555950175, "post_id": 55797391, "comment_id": 98264037, "body": "Yeah, one definitely must not mess with built-in <code>hash</code> method. It&#39;s a terrible name here anyway. A UUID is not a hash."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 2, "last_activity_date": 1555951717, "last_edit_date": 1555951717, "creation_date": 1555949393, "answer_id": 55797391, "question_id": 55797078, "link": "https://stackoverflow.com/questions/55797078/activerecord-reads-uuid-as-an-integer-i-need-the-actual-uuid-as-a-string/55797391#55797391", "title": "Activerecord reads UUID as an Integer. I need the actual UUID as a string", "body": "<p><code>hash</code> is a method on the base <code>Object</code> in Ruby. Nothing you can do about that really* except change the name of the field in your db. <a href=\"https://apidock.com/ruby/Object/hash\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Object/hash</a></p>\n\n<blockquote>\n  <p>Generates a Fixnum hash value for this object. This function must have\n  the property that a.eql?(b) implies a.hash == b.hash. The hash value\n  is used by class Hash. Any hash value that exceeds the capacity of a\n  Fixnum will be truncated before being used.</p>\n</blockquote>\n\n<hr>\n\n<p>As suggested in the comments you can also access it directly with</p>\n\n<pre><code># in your view or model\naccount[:hash]\n</code></pre>\n"}], "owner": {"reputation": 523, "user_id": 8980988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b92727f9c9f58bb720a08be26e3d3a?s=128&d=identicon&r=PG&f=1", "display_name": "danielsmith1789", "link": "https://stackoverflow.com/users/8980988/danielsmith1789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55797391, "answer_count": 1, "score": 2, "last_activity_date": 1555951717, "creation_date": 1555948074, "question_id": 55797078, "link": "https://stackoverflow.com/questions/55797078/activerecord-reads-uuid-as-an-integer-i-need-the-actual-uuid-as-a-string", "title": "Activerecord reads UUID as an Integer. I need the actual UUID as a string", "body": "<p>I am trying to save a filename with the same name as the hash of the corresponding record.</p>\n\n<p>Currently the data importer is using rails, but the database and corresponding schema, were generated outside of the application.</p>\n\n<p>When I read the <code>Account</code> model in <code>psql</code> I see:</p>\n\n<p><code>select * from accounts where id=1</code></p>\n\n<pre><code>id                     | 1\nfirst_name             | JOHN\nmiddle_name            |\nlast_name              | DOE\nsuffix                 |\ndob                    | 1985-11-29 00:00:00\ngender                 | M             \nhash                   | 5062a455-ad6e-4104-ae49-92d12b1fbd27\n</code></pre>\n\n<p>when I use ActiveRecord I get the following:\n<code>Account.first</code></p>\n\n<pre><code>id: 1,\nfirst_name: \"JOHN\",\nmiddle_name: \"\",\nlast_name: \"DOE\",\ndob: Fri, 29 Nov 1985 00:00:00 UTC +00:00,\ngender: \"M\",\nhash: \"5062a455-ad6e-4104-ae49-92d12b1fbd27\"\n</code></pre>\n\n<p>When I try to access the hash using <code>Account.first.hash</code> I get <code>-1029718433662254257</code> instead of <code>\"5062a455-ad6e-4104-ae49-92d12b1fbd27\"</code>. </p>\n\n<p>I essentially want to do <code>filename = \"#{account.hash}.png\"</code> but now all of my file names are negative numbers instead of the UUIDs.</p>\n\n<p>Any idea what is going on? </p>\n"}, {"tags": ["ruby", "google-apps-script", "google-apps-script-api"], "comments": [{"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "edited": false, "score": 0, "creation_date": 1555950977, "post_id": 55796594, "comment_id": 98264408, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55453933/404-error-when-deploying-a-google-apps-script-via-the-rest-api\">404 error when deploying a Google Apps script via the REST API</a>"}, {"owner": {"reputation": 87, "user_id": 7379552, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5918153900fecd91fa80f9aef9c87a8?s=128&d=identicon&r=PG&f=1", "display_name": "plgelso", "link": "https://stackoverflow.com/users/7379552/plgelso"}, "reply_to_user": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "edited": false, "score": 0, "creation_date": 1555958137, "post_id": 55796594, "comment_id": 98267571, "body": "@TheMaster Im not deploying a new version I just want to execute one of the functions in my apps script.  I can deploy a new one fine using the link you provided in any event"}, {"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "edited": false, "score": 0, "creation_date": 1555960639, "post_id": 55796594, "comment_id": 98268653, "body": "Try  saving a version setting  <code>devMode:true</code>."}, {"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 0, "creation_date": 1555970566, "post_id": 55796594, "comment_id": 98272030, "body": "Although I&#39;m not sure whether this is the same situation with me, in my experience, if the error of <code>Requested entity was not found.</code> occurs when run the script for requesting the scripts.run method of Apps Script API after deployed API executable, the error was removed by saving scripts in the project with the save button. By this, the latest version is reflected. Can you try to save the script of project (Google Apps Script) and run again? If this was not the direct solution of your issue, I apologize."}], "owner": {"reputation": 87, "user_id": 7379552, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5918153900fecd91fa80f9aef9c87a8?s=128&d=identicon&r=PG&f=1", "display_name": "plgelso", "link": "https://stackoverflow.com/users/7379552/plgelso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555950996, "creation_date": 1555945749, "last_edit_date": 1555950996, "question_id": 55796594, "link": "https://stackoverflow.com/questions/55796594/execute-google-apps-script-via-ruby-script-check-status-notfound-requested", "title": "Execute Google Apps Script via ruby script ( `check_status&#39;: notFound: Requested entity was not found. (Google::Apis::ClientError)", "body": "<p>I have a google apps script that runs a macro to do things on my google sheet.  I want my ruby script to execute the macro in the google sheet.</p>\n\n<p>I am getting authentication issues when trying to execute. the script.  I have used the ruby quick-start below.</p>\n\n<p><a href=\"https://developers.google.com/apps-script/api/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/apps-script/api/quickstart/ruby</a></p>\n\n<p>and everything works fine but it opens a brand app because thats what the script does. I modified it to target my other script that shows up in the same list on the google webpage.  I have already tried this below</p>\n\n<p><a href=\"https://developers.google.com/apps-script/api/how-tos/execute\" rel=\"nofollow noreferrer\">https://developers.google.com/apps-script/api/how-tos/execute</a></p>\n\n<p>Every-time I run it, I get this error  <code>\n`check_status': notFound: Requested entity was not found. (Google::Apis::ClientError)</code></p>\n\n<p>Here is my code </p>\n\n<pre><code>require 'googleauth'\nrequire 'googleauth/stores/file_token_store'\nrequire 'fileutils'\n\nOOB_URI = 'urn:ietf:wg:oauth:2.0:oob'.freeze\nAPPLICATION_NAME = 'KPI Macros'.freeze\nCREDENTIALS_PATH = 'credentials.json'.freeze\n# The file token.yaml stores the user's access and refresh tokens, and is\n# created automatically when the authorization flow completes for the first\n# time.\nTOKEN_PATH = 'token.yaml'.freeze\nSCOPE = 'https://www.googleapis.com/auth/spreadsheets.currentonly'.freeze\n\n# Ensure valid credentials, either by restoring from the saved credentials\n# files or intitiating an OAuth2 authorization. If authorization is required,\n# the user's default browser will be launched to approve the request.\n#\n# @return [Google::Auth::UserRefreshCredentials] OAuth2 credentials\ndef authorize\n  client_id = Google::Auth::ClientId.from_file(CREDENTIALS_PATH)\n  token_store = Google::Auth::Stores::FileTokenStore.new(file: TOKEN_PATH)\n  authorizer = Google::Auth::UserAuthorizer.new(client_id, SCOPE, token_store)\n  user_id = 'default'\n  credentials = authorizer.get_credentials(user_id)\n  print(credentials)\n  if credentials.nil?\n    url = authorizer.get_authorization_url(base_url: OOB_URI)\n    puts 'Open the following URL in the browser and enter the ' \\\n         \"resulting code after authorization:\\n\" + url\n    code = gets\n    credentials = authorizer.get_and_store_credentials_from_code(\n      user_id: user_id, code: code, base_url: OOB_URI\n    )\n  end\n  credentials\nend\n\n# Initialize the API\nservice = Google::Apis::ScriptV1::ScriptService.new\nservice.client_options.application_name = APPLICATION_NAME\nservice.authorization = authorize\nscript_id = 'MY SCRIPT ID HERE'\n\n# Make the API request.\nrequest = Google::Apis::ScriptV1::ExecutionRequest.new(\n  function: 'failedTest'\n)\n\nresponse = service.run_script(script_id, request)\nprint(response)\n</code></pre>\n\n<p>Any debugging help would be appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556041160, "post_id": 55797069, "comment_id": 98299976, "body": "And by using a regex you now you have two problems... :). The first one is that the pattern does not match <code>&#47;users&#47;sign_in</code> without a locale. The second is that it does not match <code>&#47;users&#47;sign_in.html</code>."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1555948049, "creation_date": 1555948049, "answer_id": 55797069, "question_id": 55796510, "link": "https://stackoverflow.com/questions/55796510/ruby-wildcard-on-path/55797069#55797069", "title": "Ruby wildcard on path", "body": "<p>Wildcards don't work in string comparisons, which are just straight character-by-character equality checks.</p>\n\n<p>You need to use a regular expression, and check for a <a href=\"https://ruby-doc.org/core-2.1.1/Regexp.html#method-i-match\" rel=\"nofollow noreferrer\"><code>match</code></a>, or use <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>String#[]</code></a>:</p>\n\n<pre><code>if (!request.fullpath[%r{\\A/users/sign_in\\?locale=.*\\z}] &amp;&amp;\n  ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "edited": false, "score": 0, "creation_date": 1556042326, "post_id": 55816327, "comment_id": 98300478, "body": "a wise approach; yes, I appreciate the distribution of responsibilities.  I also send a kudo for the succinctness!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1556039761, "creation_date": 1556039761, "answer_id": 55816327, "question_id": 55796510, "link": "https://stackoverflow.com/questions/55796510/ruby-wildcard-on-path/55816327#55816327", "title": "Ruby wildcard on path", "body": "<p>Instead of <code>request.full_path</code> you can use <code>request.path</code> which does not include the query string.</p>\n\n<p>But a better solution altogether is just skipping the callback on the effected controllers / actions as this distributes the responsibilities correctly.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :store_location\n  def store_location\n    session[:previous_url] = request.fullpath \n  end \nend\n\nclass SessionsController &lt; ApplicationController\n  skip_before_action :store_location\nend\n\nclass UsersController &lt; ApplicationController\n  skip_before_action :store_location, only: :index\nend\n</code></pre>\n"}], "owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 55816327, "answer_count": 2, "score": 0, "last_activity_date": 1556098542, "creation_date": 1555945385, "last_edit_date": 1556098542, "question_id": 55796510, "link": "https://stackoverflow.com/questions/55796510/ruby-wildcard-on-path", "title": "Ruby wildcard on path", "body": "<p>The following ruby code to store a previous URL is meant to exclude a certain series where the resulting action might send the user in an endless loop.</p>\n\n<pre><code>  def current_user_url   # store last url \n    if (request.fullpath != \"/users/sign_in?locale=*\" &amp;&amp;\n        request.fullpath != \"/users/sign_up?locale=*\" &amp;&amp;\n        request.fullpath != \"/users/password?locale=*\" &amp;&amp;\n        request.fullpath != \"/users/sign_out?locale=*\" &amp;&amp;\n        request.fullpath != \"/users?locale=*\" &amp;&amp;\n        !request.xhr?) # don't store ajax calls\n      session[:previous_url] = request.fullpath \n    end\n  end\n</code></pre>\n\n<p>when handling self-referential actions</p>\n\n<pre><code>def after_sign_in_path_for(resource)\n  session[:previous_url] || session[:confirm_url]\nend\n</code></pre>\n\n<p>The wildcard character is not working as desired, as the session variable is storing, for example, <code>/users/sign_in?locale=en</code>  notwithstanding the use of the wildcard. <em>note: without the use of <code>?locale=en</code> the function does work as expected.</em>  </p>\n\n<p>How can this code become locale agnostic?</p>\n\n<p><strong>Update with note on solution</strong></p>\n\n<p>In case anyone drops by and is flustered by the <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update\" rel=\"nofollow noreferrer\">second apporach of a wiki for the devise gem</a>, you're not alone.  I wasn't too thrilled instinctively with an after filter.  Digging into Devise's store location method is an option, though not as straightforward as Max's solution below.</p>\n\n<p>That does need a slight tweak though <em>(and [ahem, yes] the question did not mention devise)</em> where routes need to invoke <code>devise_for</code> and the controller needs to inherit from devise</p>\n\n<pre><code> devise_for :users, :controllers =&gt; { registrations: 'registrations', sessions: 'sessions' } \n\nclass SessionsController &lt; Devise::SessionsController\n  skip_before_action :store_location \nend\n</code></pre>\n\n<p>This feels cleaner to me come maintenance time...</p>\n"}, {"tags": ["ruby", "scope"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1555971018, "post_id": 55796355, "comment_id": 98272134, "body": "Ruby doesn&#39;t have nested methods, nor do I see anything in your code that could be called &quot;nested methods&quot;. It is possible to nest a method definition inside a method body, but that does not create a nested method. And I don&#39;t see a method definition nested in a method body in your code either. Can you clarify your question, please?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1555945324, "last_edit_date": 1555945324, "creation_date": 1555944985, "answer_id": 55796402, "question_id": 55796355, "link": "https://stackoverflow.com/questions/55796355/how-do-i-set-a-local-variable-declared-in-a-nested-method-to-be-within-the-paren/55796402#55796402", "title": "How do I set a local variable declared in a nested method to be within the parent method&#39;s scope?", "body": "<p>Set the result of the proc to <code>old_var</code> so that it\u2019s declared on the same scope where used.</p>\n\n<pre><code>old_var = \n  @sandbox.function() do |resp|\n    resp.var.to_f\n  end\n</code></pre>\n\n<p>The same for <code>new_var</code>:</p>\n\n<pre><code>new_var = \n  @sandbox.function() do |resp|\n    resp.var.to_f\n  end\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>How do I set a local variable declared in a nested method to be within the parent method's scope?</p>\n</blockquote>\n\n<p>Answering the question in the title: that is impossible.</p>\n\n<hr>\n\n<p>If you need to perform some actions before returning a value from a nested block, use <code>break</code>:</p>\n\n<pre><code>value =\n  @sandbox.function() do |resp|\n    foo = 42\n    # do something else\n    break foo\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1555945168, "post_id": 55796431, "comment_id": 98261836, "body": "This is a <i>very</i> bad practice and it should be avoided. Many languages directly restrict this mess with scopes."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1555945273, "post_id": 55796431, "comment_id": 98261896, "body": "Sometimes it\u2019s not your method, so you can\u2019t change what the defined method returns. You don\u2019t know what <code>@sandbox.function()</code> is. Also, do you have a citation on how Ruby says it\u2019s bad practice? Ruby would prohibit it if they cared about scopes that much. @AlekseiMatiushkin"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1555945836, "post_id": 55796431, "comment_id": 98262149, "body": "If it\u2019s not your method, use <code>break</code> as shown in the last para of my answer. No, I don\u2019t have a citation on hand, but Ruby does not prohibit anything; it does not mean we should use monkeypatching, scope leaking and other <i>bad design decisions</i> here and there. (<code>break</code> might bypass the code after <code>yield</code> in the <code>function</code> though.)"}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1555946170, "post_id": 55796431, "comment_id": 98262312, "body": "Using break in a block that isn\u2019t yours is not safe though. Because as you said, it bypasses anything after the yield in that function. I would say using break to return something from a block like that is arguably worse because you don\u2019t know (and shouldn\u2019t know) the inner workings of that other method. Ruby limits scopes the way it does to prevent leaking the variable unintentionally. But intentionally pulling variables out of a block is permitted. If it\u2019s your method, it should return what you expect (old_val/new_val), if it\u2019s not then I think my way is much safer."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1555954140, "post_id": 55796431, "comment_id": 98265844, "body": "I agree with here, sometimes you&#39;re stuck with someone else&#39;s interface and have to use a bit of trickery to make it go."}], "tags": [], "owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "is_accepted": false, "score": 1, "last_activity_date": 1555945098, "creation_date": 1555945098, "answer_id": 55796431, "question_id": 55796355, "link": "https://stackoverflow.com/questions/55796355/how-do-i-set-a-local-variable-declared-in-a-nested-method-to-be-within-the-paren/55796431#55796431", "title": "How do I set a local variable declared in a nested method to be within the parent method&#39;s scope?", "body": "<p>Variables defined inside a block are scoped to the block. Define your variables outside the block, and then you can modify them inside the block. This will allow you to access them after the block completes. </p>\n\n<pre><code>def initialize\n    @sandbox = #working api call\nend\n\ndef foobar\n    # defining these two variables so you can set them\n    # inside the block later\n    old_var = nil\n    new_var = nil\n\n    @sandbox.function() do |resp|\n         old_var = resp.var.to_f\n    end\n\n    sleep(10)\n\n    @sandbox.function() do |resp|\n         new_var = resp.var.to_f\n    end\n\n    new_var + old_var;\nend\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 55796402, "answer_count": 2, "score": 0, "last_activity_date": 1555945324, "creation_date": 1555944832, "question_id": 55796355, "link": "https://stackoverflow.com/questions/55796355/how-do-i-set-a-local-variable-declared-in-a-nested-method-to-be-within-the-paren", "title": "How do I set a local variable declared in a nested method to be within the parent method&#39;s scope?", "body": "<p>I am having problems with Ruby's scoping.</p>\n\n<p>I have method 'foobar' which has two methods inside it. I want each of 'foobar's methods to initialize a variable that can be used by 'foobar'.</p>\n\n<p>Below is my Error &amp; Code: </p>\n\n<blockquote>\n  <p>undefined local variable or method `old_var'</p>\n</blockquote>\n\n<pre><code>def initialize\n    @sandbox = #working api call\nend\n\ndef foobar\n\n        @sandbox.function() do |resp|\n             old_var = resp.var.to_f\n        end\n\n        sleep(10)\n\n        @sandbox.function() do |resp|\n             new_var = resp.var.to_f\n        end\n\n        new_var + old_var;\n\n    end\n</code></pre>\n"}, {"tags": ["ruby", "vagrant", "vagrantfile", "vagrant-provision"], "comments": [{"owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1555946814, "post_id": 55796069, "comment_id": 98262597, "body": "When you see &quot;undefined method ... for nil:NilClass&quot; it means you have a nil value you&#39;re trying to call the method on."}, {"owner": {"reputation": 101, "user_id": 9304912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VJ2B.jpg?s=128&g=1", "display_name": "Weyder Ferreira", "link": "https://stackoverflow.com/users/9304912/weyder-ferreira"}, "reply_to_user": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1555950596, "post_id": 55796069, "comment_id": 98264236, "body": "ok, but you know how to fix this?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 9304912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VJ2B.jpg?s=128&g=1", "display_name": "Weyder Ferreira", "link": "https://stackoverflow.com/users/9304912/weyder-ferreira"}, "edited": false, "score": 0, "creation_date": 1560459642, "post_id": 56505937, "comment_id": 99754711, "body": "I made rollback version and works again, tanks for help."}], "tags": [], "owner": {"reputation": 11, "user_id": 11617627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052794ed8f2096dce6fe71501de475d6?s=128&d=identicon&r=PG&f=1", "display_name": "xueyubingsen", "link": "https://stackoverflow.com/users/11617627/xueyubingsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1559993334, "creation_date": 1559993334, "answer_id": 56505937, "question_id": 55796069, "link": "https://stackoverflow.com/questions/55796069/vagrant-not-provision-stack/56505937#56505937", "title": "Vagrant not provision stack", "body": "<p>Try to fixed this by this:\nvagrant plugin uninstall hostmanager</p>\n\n<pre><code>$ vagrant.exe plugin uninstall hostmanager\nUninstalling the 'hostmanager' plugin...\nRemoving hm\nSuccessfully uninstalled hostmanager-1.2.2\nSuccessfully uninstalled rubyhacks-0.1.5\n\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 9304912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VJ2B.jpg?s=128&g=1", "display_name": "Weyder Ferreira", "link": "https://stackoverflow.com/users/9304912/weyder-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559993334, "creation_date": 1555943619, "question_id": 55796069, "link": "https://stackoverflow.com/questions/55796069/vagrant-not-provision-stack", "title": "Vagrant not provision stack", "body": "<p>When I run <code>vagrant up</code> show error bellow: </p>\n\n<pre><code>vagrant up\n/Users/sui6526/.vagrant.d/gems/2.4.4/gems/rubyhacks-0.1.5/lib/rubyhacks.rb:536: warning: constant ::Fixnum is deprecated\nBringing machine 'srvub01' up with 'virtualbox' provider...\nBringing machine 'srvubu02' up with 'virtualbox' provider...\nBringing machine 'srvubu03' up with 'virtualbox' provider...\n==&gt; srvub01: Importing base box 'ubuntu/bionic64'...\n==&gt; srvub01: Matching MAC address for NAT networking...\n==&gt; srvub01: Checking if box 'ubuntu/bionic64' version '20190126.0.0' is up to date...\n==&gt; srvub01: Setting the name of the VM: ContainerWeek_srvub01_1555943344899_21275\n==&gt; srvub01: Clearing any previously set network interfaces...\n==&gt; srvub01: Preparing network interfaces based on configuration...\n    srvub01: Adapter 1: nat\n    srvub01: Adapter 2: hostonly\n==&gt; srvub01: Forwarding ports...\n    srvub01: 22 (guest) =&gt; 2222 (host) (adapter 1)\n==&gt; srvub01: Running 'pre-boot' VM customizations...\n==&gt; srvub01: Booting VM...\n==&gt; srvub01: Waiting for machine to boot. This may take a few minutes...\n==&gt; srvub01: Forcing shutdown of VM...\n==&gt; srvub01: Destroying VM and associated drives...\n/opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:70:in `block in &lt;class:Response&gt;': undefined method `downcase' for nil:NilClass (NoMethodError)\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:68:in `each'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:68:in `inject'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:68:in `&lt;class:Response&gt;'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:16:in `&lt;module:SFTP&gt;'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:3:in `&lt;module:Net&gt;'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/response.rb:3:in `&lt;top (required)&gt;'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/request.rb:2:in `&lt;top (required)&gt;'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp/session.rb:5:in `&lt;top (required)&gt;'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/net-sftp-2.1.2/lib/net/sftp.rb:2:in `&lt;top (required)&gt;'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/vagrant-2.2.4/plugins/communicators/ssh/communicator.rb:12:in `&lt;top (required)&gt;'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/vagrant-2.2.4/plugins/communicators/ssh/plugin.rb:14:in `block in &lt;class:Plugin&gt;'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/vagrant-2.2.4/lib/vagrant/registry.rb:27:in `get'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/vagrant-2.2.4/lib/vagrant/machine.rb:259:in `communicate'\n    from /opt/vagrant/embedded/gems/2.2.4/gems/vagrant-2.2.4/lib/vagrant/action/builtin/wait_for_communicator.rb:16:in `block in call'\n</code></pre>\n\n<p>I use MacOS and running Vagrant 2.2.4, anyone can help me? I am no programmer, and not understand about Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555939337, "post_id": 55795056, "comment_id": 98258995, "body": "You save the address, but not the aliases. So pluck (correctly) doesn&#39;t find anything in the db."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555939448, "post_id": 55795056, "comment_id": 98259047, "body": "Also try creating the other way around: address first, then feed this address to the aliases."}, {"owner": {"reputation": 549, "user_id": 2362969, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5134195a14fee2ff1a6abb1c68371590?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh Malik", "link": "https://stackoverflow.com/users/2362969/rakesh-malik"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555939601, "post_id": 55795056, "comment_id": 98259117, "body": "@SergioTulentsev I cannot create address_aliases seperately because I dont have the address id yet. If I create address_alias after address it will work but I wont get address_alias in after_save of address anymore. Tried the other way around too... its still the same"}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 1, "last_activity_date": 1555940086, "creation_date": 1555940086, "answer_id": 55795241, "question_id": 55795056, "link": "https://stackoverflow.com/questions/55795056/rspec-has-many-through-activerecordassociationscollectionproxy-on-after-s/55795241#55795241", "title": "RSpec has_many through #&lt;ActiveRecord::Associations::CollectionProxy&gt; on after_save", "body": "<p>The problem is that the aliases are not yet persisted and <code>pluck</code> does a database query (see when you inspect <code>address_aliases</code>, the record does not have an ID yet, it's on memory, it's not on the database yet).</p>\n\n<p>Replace that <code>pluck</code> with <code>map(&amp;:alias_for_city)</code> so it doesn't do a database query and uses the already loaded collection.</p>\n"}], "owner": {"reputation": 549, "user_id": 2362969, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5134195a14fee2ff1a6abb1c68371590?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh Malik", "link": "https://stackoverflow.com/users/2362969/rakesh-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55795241, "answer_count": 1, "score": 0, "last_activity_date": 1555940086, "creation_date": 1555939218, "last_edit_date": 1555939639, "question_id": 55795056, "link": "https://stackoverflow.com/questions/55795056/rspec-has-many-through-activerecordassociationscollectionproxy-on-after-s", "title": "RSpec has_many through #&lt;ActiveRecord::Associations::CollectionProxy&gt; on after_save", "body": "<p>Heres my relationship model</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n    has_many :address_aliases, :inverse_of =&gt; :address, :foreign_key =&gt; :address_id\nend\n</code></pre>\n\n<p>In spec I am building an address with address_aliases. In my after_save of address I have used address.address_aliases.pluck somewhere, and it does not give correct value.</p>\n\n<pre><code>address_aliases = FactoryGirl.build_list(:address_alias, 1, :alias_for_city =&gt; \"TEST1\")\naddress = FactoryGirl.build(:some_address, :company_id =&gt; \"test_company\", :address_aliases =&gt; address_aliases)\nbyebug\nexpect ...\naddress.save!\n</code></pre>\n\n<p>This is what I get on byebug. address.address_aliases has one element, but when I pluck it returns blank array.</p>\n\n<pre><code>(byebug) address.address_aliases\n#&lt;ActiveRecord::Associations::CollectionProxy [#&lt;AddressAlias id: nil, alias_for_city: \"TEST1\", created_at: nil, updated_at: nil, address_id: nil&gt;]&gt;\n(byebug) address.address_aliases.pluck(:alias_for_city)\n[]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xss"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555935191, "post_id": 55794182, "comment_id": 98257311, "body": "You don&#39;t really need to check for xss if you&#39;re inserting your own links, just if you&#39;re dealing with user submitted links/content"}, {"owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555935256, "post_id": 55794182, "comment_id": 98257333, "body": "@Iceman <code>message</code> could potentially be tainted with user input (even if I&#39;m avoiding it for now but having proper XSS prevention could allow me to have better error messages)"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555935461, "post_id": 55794182, "comment_id": 98257435, "body": "Would the <code>sanitize</code> method serve you better? <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555935807, "post_id": 55794182, "comment_id": 98257590, "body": "@Iceman oh thanks a lot! I kept the initial <code>strip_tags</code> (to prevent random links), then <code>gsub</code>s then <code>sanitize(message, tags: [&#39;a&#39;], attributes: [&#39;href&#39;])</code>, works very well in my limited testing"}], "answers": [{"comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555936116, "post_id": 55794380, "comment_id": 98257722, "body": "Great, you can accept your own answer, that&#39;s perfectly valid practice!"}], "tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 2, "last_activity_date": 1555935885, "creation_date": 1555935885, "answer_id": 55794380, "question_id": 55794182, "link": "https://stackoverflow.com/questions/55794182/how-do-i-avoid-html-safe-when-using-gsub-to-insert-links/55794380#55794380", "title": "how do I avoid html_safe when using gsub to insert links?", "body": "<p>here is what I did from @iceman's <a href=\"https://stackoverflow.com/questions/55794182/how-do-i-avoid-html-safe-when-using-gsub-to-insert-links#comment98257435_55794182\">suggestion</a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def expand_links(message)\n    message = strip_tags(message)\n    message = message.gsub('[register]') { link_to('register', new_user_path) }\n    message = message.gsub('[login]') { link_to('login', new_sessions_path) }\n    sanitize(message, tags: ['a'], attributes: ['href'])\n  end\n</code></pre>\n\n<p>(BTW sanitize doesn't work with symbols)</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html</a></p>\n"}], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1555935885, "creation_date": 1555934916, "last_edit_date": 1555935301, "question_id": 55794182, "link": "https://stackoverflow.com/questions/55794182/how-do-i-avoid-html-safe-when-using-gsub-to-insert-links", "title": "how do I avoid html_safe when using gsub to insert links?", "body": "<p>a simplified example would be this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def expand_links(message)\n  message = strip_tags(message)\n  message = message.gsub('[register]') { link_to('register', new_user_path) }\n  message = message.gsub('[login]') { link_to('login', new_sessions_path) }\n  message.html_safe\nend\n</code></pre>\n\n<p>I'm using <code>strip_tags</code> but to be sure there isn't a chance of XSS.</p>\n\n<p>so what would be the proper way to do this without <code>strip_tags</code> and <code>html_safe</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1555931883, "creation_date": 1555931883, "answer_id": 55793529, "question_id": 55793408, "link": "https://stackoverflow.com/questions/55793408/refile-s3-delete-attachment-and-keep-db-record/55793529#55793529", "title": "Refile + S3: delete attachment and keep db record", "body": "<p>I would go with defining 2 new columns in the respective model and copying the data to remain there upon removal.</p>\n\n<p>This is way more consistent than keeping the malformed <code>refile</code> objects:</p>\n\n<pre><code>data_file.update_attributes!(\n  file_name: data_file.document.filename,\n  removed_at: DateTime.now,\n  document: nil)\n</code></pre>\n"}], "owner": {"reputation": 3565, "user_id": 574686, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78ca2bb02d19ca5225897136c047ec73?s=128&d=identicon&r=PG", "display_name": "Eugeny89", "link": "https://stackoverflow.com/users/574686/eugeny89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 55793529, "answer_count": 1, "score": 0, "last_activity_date": 1555931883, "creation_date": 1555931313, "question_id": 55793408, "link": "https://stackoverflow.com/questions/55793408/refile-s3-delete-attachment-and-keep-db-record", "title": "Refile + S3: delete attachment and keep db record", "body": "<p>I'm using <code>refile</code> gem to upload files to <code>S3</code> and having the following model</p>\n\n<pre><code>class DataFile &lt; ActiveRecord::Base\n  attachment :document, destroy: true\nend\n</code></pre>\n\n<p>The respective table in database has columns <code>document_filename</code> and <code>document_id</code> to hold file metadata.</p>\n\n<p>I need to remove file from <code>S3</code> and keep the respective row in DB (I need that to be able to display the name and delete date of that file).</p>\n\n<p>I'm trying to do</p>\n\n<pre><code>data_file.document = nil\ndata_file.save()\n</code></pre>\n\n<p>But that removes filename. Is there a solution to remove file from S3 and keep <code>document_filename</code> value.</p>\n"}, {"tags": ["ruby", "timestamp", "scheduling"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1555930471, "creation_date": 1555930471, "answer_id": 55793220, "question_id": 55793060, "link": "https://stackoverflow.com/questions/55793060/ruby-find-the-next-timestamp/55793220#55793220", "title": "Ruby: Find the next timestamp", "body": "<pre><code>require 'time'\n\n\u270e today_hour_x = DateTime.parse(\"22:00\")\n\u270e today_hour_x + (today_hour_x - DateTime.now &gt; 0 ? 0 : 1)\n#\u21d2\u00a0#&lt;DateTime: 2019-04-22T22:00:00+00:00 ...&gt;\n\u270e today_hour_x = DateTime.parse(\"10:00\")\n\u270e today_hour_x + (today_hour_x - DateTime.now &gt; 0 ? 0 : 1)\n#\u21d2\u00a0#&lt;DateTime: 2019-04-23T10:00:00+00:00 ...&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1555938974, "creation_date": 1555938974, "answer_id": 55795016, "question_id": 55793060, "link": "https://stackoverflow.com/questions/55793060/ruby-find-the-next-timestamp/55795016#55795016", "title": "Ruby: Find the next timestamp", "body": "<p>You can hardcode 22, but as idea for more flexible approach:</p>\n\n<pre><code>require 'date'\n\ndef event_time(hour)\n  now = Time.now\n  tomorrow = Date._parse((Date.today + 1).to_s)\n  now.hour &lt; hour ? Time.new(now.year, now.month, now.day, hour) : Time.new(tomorrow[:year], tomorrow[:mon], tomorrow[:mday], hour)\nend\n</code></pre>\n\n<p>My local time is now 22nd April 16:16. So for example:</p>\n\n<pre><code>event_time(15) # =&gt; 2019-04-23 15:00:00 +0300\nevent_time(22) # =&gt; 2019-04-22 22:00:00 +0300\n</code></pre>\n\n<p>In Rails you can also use <code>Date.tomorrow</code>, <code>Time.now + 1.day</code> and other pleasant things</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1555960515, "creation_date": 1555960515, "answer_id": 55799842, "question_id": 55793060, "link": "https://stackoverflow.com/questions/55793060/ruby-find-the-next-timestamp/55799842#55799842", "title": "Ruby: Find the next timestamp", "body": "<pre><code>require 'date'\n\ndef event_time(time_str)\n  t = DateTime.strptime(time_str, \"%H:%M\").to_time\n  t &gt;= Time.now ? t : t + 24*60*60\nend\n\nTime.now\n  #=&gt; 2019-04-22 12:13:57 -0700 \nevent_time(\"22:00\")\n  #=&gt; 2019-04-22 22:00:00 +0000 \nevent_time(\"10:31\")\n  #=&gt; 2019-04-23 10:31:00 +0000 \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 4890834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-5Ae3PgotkUU/AAAAAAAAAAI/AAAAAAAAACg/ibC1mA70uY8/photo.jpg?sz=128", "display_name": "Maulik Soneji", "link": "https://stackoverflow.com/users/4890834/maulik-soneji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1555960515, "creation_date": 1555929657, "question_id": 55793060, "link": "https://stackoverflow.com/questions/55793060/ruby-find-the-next-timestamp", "title": "Ruby: Find the next timestamp", "body": "<p>If I am given a specific time in <code>HH:mm</code> format like: <code>22:00</code>, how do I get the next timestamp when I can schedule this event.</p>\n\n<p>For example:</p>\n\n<p>If the current time is <code>22nd April 23:30</code>, it should give as <code>23rd April 22:00</code>(UTC format is ok, date written only for reference)</p>\n\n<p>If the current time is <code>22nd April 18:00</code> it should give as <code>22nd April 22:00</code></p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555953958, "post_id": 55792811, "comment_id": 98265763, "body": "Did Robocop disparage your algorithm for coding secret messages as being, er, less than impenetrable?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1555952587, "post_id": 55792957, "comment_id": 98265145, "body": "You are computing <code>HSH.invert</code> for each character of the string. Also, whenever <code>chars</code> is the receiver of an <code>Enumerable</code> method (here <code>map</code>) I suggest you use <code>each_char</code> instead, to avoid the creation of the temporary array <code>str.chars</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1555929157, "creation_date": 1555929157, "answer_id": 55792957, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55792957#55792957", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<pre><code>HSH = {\n  'a' =&gt; 'z', 'b' =&gt; 'y', 'c' =&gt; 'x',\n  'd' =&gt; 'w', 'e' =&gt; 'v', 'f' =&gt; 'u',\n  'g' =&gt; 't', 'h' =&gt; 's', 'i' =&gt; 'r',\n  'j' =&gt; 'q', 'k' =&gt; 'p', 'l' =&gt; 'o',\n  'm' =&gt; 'n'\n}.freeze\n\ndef encoder(str)\n  str.chars.map { |char| HSH[char] || HSH.invert[char] || char }.join\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1555997106, "post_id": 55793192, "comment_id": 98277416, "body": "You are abusing iteration for reducing, making readers to wonder why <code>each</code> was chosen here. The reducing should be done with <code>Enumerable#reduce</code> (or <code>Enumerable#each_with_object</code>): <code>def encoder(str); str.chars.each_with_object(&#39;&#39;) { |char, acc| acc &lt;&lt; .... }; end</code>. Using <code>each</code> here is both semantically incorrect and very misleading."}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1556045459, "post_id": 55793192, "comment_id": 98301829, "body": "I agree. But, I&#39;m answering the OP&#39;s specific question, with regard to THEIR code. I&#39;m not trying to show how much better I could write it myself."}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 0, "last_activity_date": 1555963144, "last_edit_date": 1555963144, "creation_date": 1555930362, "answer_id": 55793192, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55793192#55793192", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p>I would go ahead and expand your hash to all 26 letters, so you can avoid the inverse lookup. That simplifies your code by removing one case, which will may appease Rubocop... But more importantly, you'll be using the hash index for greater efficiency and performance. Inverse hash lookups are expensive, as it must read (up to) every value. </p>\n\n<p>Consider encoding \"1+2\u201d. It will do three quick index scans, then three full array scans, just to return the original string. </p>\n\n<p>With a fully populated hash, it would only take three quick scans. </p>\n\n<p>Here is your original code with minimal changes to meet your goal:  (There are shorter ways to do this (hint: <code>tr</code> or <code>map</code>), but shorter is not as important as easy and comfortable to the programmer using the code.)</p>\n\n<pre><code>translation = { \n  'a' =&gt; 'z', 'b' =&gt; 'y', 'c' =&gt; 'x', 'd' =&gt; 'w', 'e' =&gt; 'v', 'f' =&gt; 'u', 'g' =&gt; 't', \n  'h' =&gt; 's', 'i' =&gt; 'r', 'j' =&gt; 'q', 'k' =&gt; 'p', 'l' =&gt; 'o', 'm' =&gt; 'n', 'n' =&gt; 'm', \n  'o' =&gt; 'l', 'p' =&gt; 'k', 'q' =&gt; 'j', 'r' =&gt; 'i', 's' =&gt; 'h', 't' =&gt; 'g', 'u' =&gt; 'f', \n  'v' =&gt; 'e', 'w' =&gt; 'd', 'x' =&gt; 'c', 'y' =&gt; 'b', 'z' =&gt; 'a'\n}.freeze\n\ndef encoder(str)\n  encoded_string = ''\n\n  str.chars.each do |char|\n    encoded_string &lt;&lt; translation[char] || char\n  end\n  encoded_string\nend\n</code></pre>\n\n<p>You might even consider expanding the hash to upper and lower case letters, or even all 256 char values, depending on what problem you're solving. But let's agree to ignore Unicode chars!</p>\n\n<p>Back to Rubocop... The easiest, sure-fire solution to any sort of \"too long/too complex\" warning is to pull code out to a new method. Write <code>def charswap</code> and use that as the body of your loop. That will make writing tests easier, to boot. But, by expanding your translation array to all 26 letters, the code gets so simple that refactoring isn't really needed.</p>\n"}, {"comments": [{"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1555938536, "post_id": 55793359, "comment_id": 98258663, "body": "Is this for an obfuscation contest? I would not approve any pull request that came my way with code difficult to read as this."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1555943090, "post_id": 55793359, "comment_id": 98260782, "body": "@DavidHempy I do not work in teams where this code is considered to be hard-to-read, so that is a win-win."}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 1, "creation_date": 1555946577, "post_id": 55793359, "comment_id": 98262494, "body": "I apologize for my snarky comment."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 2, "creation_date": 1555957191, "post_id": 55793359, "comment_id": 98267159, "body": "You forgot a final <code>join</code>. @David, I had a laugh over your comments, not the comments themselves but the fact that you apologised for the earlier one, but LEFT it! (Please leave them for others to enjoy.) btw, I did not find mudsie&#39;s answer opaque. I was able to figure it out in well under an hour."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574706613, "post_id": 55793359, "comment_id": 104318889, "body": "Maybe <code>str.gsub(&#47;.&#47;, HSH)</code>. This is more efficient than @steenslag&#39;s answer in that a linear search is not required for each character."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1555997313, "last_edit_date": 1555997313, "creation_date": 1555931065, "answer_id": 55793359, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55793359#55793359", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p><strong>NB! Do not use this answer!</strong> the proper way to go is provided by @steenslag <a href=\"https://stackoverflow.com/a/55794669/2035262\">here</a>.</p>\n\n<p>Use the hash with all the letters explicitly mapped <em>and</em> the default proc:</p>\n\n<pre><code>HSH =\n  (?a..?z).zip((?a..?z).to_a.reverse).to_h.\n  tap { |h| h.default_proc = -&gt;(_, k) { k }}.\n  freeze\n\ndef encoder(str)\n  str.chars.map(&amp;HSH.method(:[])).join\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1555997244, "post_id": 55794669, "comment_id": 98277459, "body": "Future readers: this answer <b>is the best here and should be chosen</b>."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1555949336, "last_edit_date": 1555949336, "creation_date": 1555937177, "answer_id": 55794669, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55794669#55794669", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p>No hash:</p>\n\n<pre><code>ALPHABET = (\"a\"..\"z\").to_a.join\n\ndef encoder(str)\n  str.tr(ALPHABET, ALPHABET.reverse)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1574705549, "last_edit_date": 1574705549, "creation_date": 1555953751, "answer_id": 55798340, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55798340#55798340", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p>As with @Steenslag's answer, there's no need to convert the string to an array, map each element of the array and join the result back into a string. The following is defined to be efficient, by avoiding the need for a linear search for each letter.</p>\n\n<pre><code>def encode_decode(str)\n  rng = 'a'..'z'       \n  str.gsub(/./) { |c| rng.cover?(c) ? (219-c.ord).chr : c }\nend\n\nplain_text = \"The launch code is 'Bal3De8Rd0asH'.\"\n  #=&gt; \"Tsv ozfmxs xlwv rh 'Bzo3Dv8Rw0zhH'.\"\ncoded_text = encode_decode(plain_text)\n  #=&gt; \"Tsv ozfmxs xlwv rh 'Bzo3Dv8Rw0zhH'.\" \nencode_decode(coded_text)\n  #=&gt; \"The launch code is 'Bal3De8Rd0asH'.\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1555996907, "post_id": 55800594, "comment_id": 98277369, "body": "Please do not suggest <code>String#+</code> in the answer, suggest <code>String#&lt;&lt;</code> instead. I understand the intent to change as few codes as possible, but it\u2019s a thousand times more offensive to produce a gazillion of intermediate unnecessary <code>String</code> instances than to have a line of the length some automatic tool is not satisfied with."}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556045266, "post_id": 55800594, "comment_id": 98301747, "body": "Thanks, @AlekseiMatiushkin ! Done."}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 1, "last_activity_date": 1556045231, "last_edit_date": 1592644375, "creation_date": 1555964379, "answer_id": 55800594, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c/55800594#55800594", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p>Several of us suggested better ways to implement your <code>encoder</code> method. But all of us (myself included) didn't actually answer your question, or see a central problem in your code:</p>\n<blockquote>\n<p>My Rubocop offense is telling me I need to 'Use the return of the conditional for variable assignment and comparison'</p>\n<p>While I tried fixing it, it gave me another offense that my 'method line is too long'.</p>\n</blockquote>\n<pre><code>encoded_string = if HSH.key?(char) then encoded_string += HSH[char]\n                 elsif HSH.invert.key?(char) then encoded_string += HSH.invert[char]\n                 else encoded_string += char\n                 end\n</code></pre>\n<p>You sort of followed Rubocop's advice...you assigned a conditional result to a value...but I think you missed the mark. I'm not even sure that's the conditional result it was referring to. I'm assuming you added the <code>encoded_string = ...</code> assignment.</p>\n<p>That is a uselesss assignment, as you already appended the character to encoded_string within the <code>if</code> blocks. You don't have to assign it again.</p>\n<p>Rewinding to what I'm guessing was your version 1 code, here's a more efficient way to follow Rubocop's advice. Don't make an assignment within each condition...only do one assignment, with the result of the conditionals:</p>\n<pre><code>encoded_string += if HSH.key?(char) then HSH[char]\n                  elsif HSH.invert.key?(char) then HSH.invert[char]\n                  else char\n                  end\n</code></pre>\n<p>That ends up with less code, and matches your original coding style and approach. It might even make Rubocop happy. The next step to lovely code would be to eliminate the excessive <code>key?</code> tests:</p>\n<pre><code>encoded_string += if HSH[char] then HSH[char]\n                  elsif HSH.invert[char] then HSH.invert[char]\n                  else char\n                  end\n</code></pre>\n<p>From there, it's a small step to eliminate the <code>if/elsif</code> blocks with <code>||</code>'s. And while we're at it, we'll change <code>+=</code> to <code>&lt;&lt;</code> to avoid, &quot;produce a gazillion of intermediate unnecessary String instances.&quot; (Thanks for the suggestion, @Aleksei Matiushkin )</p>\n<pre><code>encoded_string &lt;&lt; HSH[char] || HSH.invert[char] || char\n</code></pre>\n<p>For your approach to this problem, that's about the minimal level of conciseness and readability that production code should strive for. Anyone can understand it without thinking real hard or hitting Stack Overflow.</p>\n"}], "owner": {"reputation": 79, "user_id": 8167135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ccf74b6250d0ef2281c76a9942f0aa?s=128&d=identicon&r=PG&f=1", "display_name": "cguy", "link": "https://stackoverflow.com/users/8167135/cguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 55794669, "answer_count": 6, "score": 2, "last_activity_date": 1574705549, "creation_date": 1555928344, "last_edit_date": 1555929485, "question_id": 55792811, "link": "https://stackoverflow.com/questions/55792811/rubocop-offense-use-the-return-of-the-conditional-for-variable-assignment-and-c", "title": "Rubocop Offense: Use the return of the conditional for variable assignment and comparison", "body": "<p>My Rubocop offense is telling me I need to 'Use the return of the conditional for variable assignment and comparison'</p>\n\n<p>While I tried fixing it, it gave me another offense that my 'method line is too long'.</p>\n\n<p>I've tried refactoring to another method but my code broke.</p>\n\n<p>How do I shorten or refactor this code ?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>HSH = { 'a' =&gt; 'z', 'b' =&gt; 'y', 'c' =&gt; 'x', 'd' =&gt; 'w', 'e' =&gt; 'v', \\\n        'f' =&gt; 'u', 'g' =&gt; 't', 'h' =&gt; 's', \\\n        'i' =&gt; 'r', 'j' =&gt; 'q', 'k' =&gt; 'p', 'l' =&gt; 'o', 'm' =&gt; 'n' }.freeze\n\n\ndef encoder(str)\n  encoded_string = ''\n  str.chars.each do |char|\n    encoded_string = if HSH.key?(char) then encoded_string += HSH[char]\n                     elsif HSH.invert.key?(char) then encoded_string += HSH.invert[char]\n                     else encoded_string += char\n                     end\n  end\n  encoded_string\nend\n</code></pre>\n\n<p>When I ran my test suite, everything was ok. </p>\n\n<p>But the rubocop offense gave me method line is too long.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "rails-activestorage"], "comments": [{"owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 0, "creation_date": 1555930401, "post_id": 55792786, "comment_id": 98255386, "body": "Maybe it helps <a href=\"https://medium.com/@sulmanweb/active-storage-as-attachment-in-rails-api-with-base64-decoding-f8362376d77c\" rel=\"nofollow noreferrer\">medium.com/@sulmanweb/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11394200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6CTVRs2ScP8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfF-TpEH1fpb_0Gf8UbgvTV4rdH9w/mo/photo.jpg?sz=128", "display_name": "SECCIA Corentin", "link": "https://stackoverflow.com/users/11394200/seccia-corentin"}, "reply_to_user": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 1, "creation_date": 1555936215, "post_id": 55792786, "comment_id": 98257752, "body": "Thanks you, i did it this way!"}], "owner": {"reputation": 1, "user_id": 11394200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6CTVRs2ScP8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfF-TpEH1fpb_0Gf8UbgvTV4rdH9w/mo/photo.jpg?sz=128", "display_name": "SECCIA Corentin", "link": "https://stackoverflow.com/users/11394200/seccia-corentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555936449, "creation_date": 1555928214, "last_edit_date": 1555936449, "question_id": 55792786, "link": "https://stackoverflow.com/questions/55792786/how-to-store-inline-file-with-active-storage", "title": "How to store inline file with active storage?", "body": "<p>I work with a third-party application and at this moment for upload an image with rails active storage, i have only access to inline data (like: data:image/png;base64,iVBORw0KG....)\nHow to store then with active storage? Or convert it into blob?</p>\n\n<p>avatar.attach looks to work only with blob or uploaded file from request / form</p>\n\n<pre><code>file = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAACSkpL19fXr6+tYWFhRUVHj4+NgYGCpqakXFxc5OTm1tbXw8PBtbW2AgIAfHx8KCgqhoaGenp5DQ0PS0tKmpqbCwsJJSUk6Ojq7u7sUFBRpaWnKysrb29vf3990dHQwMDCMjIwqKiqOjo4kJCSHyVX2AAAJSUlEQVR4nO2de5+qLBDHLU2z7J5d3LW0dt//W3za07YBMwghN3v8/XU+JxW+iwwMDkMQqCsMz8PFcqBTo3TWokJ6NUtOsVa4h+ZJ6JrtR7O80tt4pBYn13hBUCxWxvhu2m4cN2NmsP1+Nc8d8iUX43w3HRfOAKORBb4fuUJcW+K76XB2AZjaA7wNjg46484m4GBQZ28OeNP63QEHg41NQItGxg1idHRCuLKGmJiZZ0vIFuLQFaAtc1N+uyMc7CwAzha80qfzYWtdRD3AAmLGKXq8KyMNjz9tps2IxvtidEDLjbNEVwmbj2ZE030xQkstdK6pjJsJTQ8ac6zQvdYi8kkzotkXNUQK3OouRNATzSIiPtNSh4Gh9CUiNGlRoTGfFtoL2QsJDSLaeWPEhMZeVPjXPZjwviUITSHCKemXiWJkCA0hguH+28jqgmDMv2tlZOgHjuGniVKCSqoRjbTili3kYqAQzrQCkX6LGtVMER9mrLYsoX7EHdtBrma+DUkTap+Gp+yM8ai5gF/JE+rui4Bwqvf5D71AqBnRR0K9zpSPhHpb0U9CnebGU0KNg4avhPpa0VtCbX3RX0JdiB4Taho0PCbU1IpeE2oxN34T6hg0PCfUgOg7Yfu+6D1h677oP2HbQcN/wrYvahcI41YLK10gHIzaIHaCcDBu8bm2G4SDoXrJHSEclMold4WwVu6KXSEcjFRL7gyhclfsDuFBseTuEH4oNqItws/WhIOpmj21RagjvlPNy7BFmGggHCsF2tkiDPHwwJc0UQpFs0UYJKLQNgkpRTJZIwzX7ff8pSoFWyMMwrT1foCDSke0RxgE+SYGkR8vKfadMAhOeSZUEXONUgcIpZSc8wIPKn4Xwh+Fe+x9fifCAAm4eztCJJzx3Qg3b08IQ+zfjXD29oQhiLF/O0IwKPaEqHpCh+oJJdUTOlRPKKme0KF6Qkn1hA7VE0qqJ3QoTYQ7Szu7FCRNGF00fH81qnEVYakUJQnDtdQOXNf6QsK65AhDcTIDP1RBRDlCNym8VHQBL6oUYd6JV/QuUHspwouLqipqwTaiFKGLmqpqwvbEjhEuJ5OJIPmrNsJrXY/mpA41HiZRj5/XMEPq999PsTj+YLL9nH+mP1rcHrSteXfoIZwuNlmxpxPsnIq0QjKOHajoFTrh2bPPJIKstcf5MKVypeTFrsI/Y+sh5GS3DfMMMNKXUvl3V8RencYZRb3B8qHN8hQL5NNDyI/vO7NZ25g/BvkzmYMk4/eu5YYb2HtGPmKbJgyCkk5XxRAmRHkkYcolnDdkm4K1t0EYJJQ9YV9oIoWrFGFjUViOOAuE9BvHEkbPAmUIm1MxnR0RUplOgFF6/igmvArCCLF4GSuEM+KhgHD2Z26FhEdRnCSWD9MKYXB6NiIcWP56oohwKwwERQAtERJpoyBh+DC2IkJhKSc7hOFoPB4Pmc19z4xVyOTgMSYKCD+FxzugfrkBwn+VXR3P+C3Y9EeKcAICXffD4/Su4/BfnC8ahGmI8EdUja5NhAUkhHOaMXNTWTP1PJcYoElCKkPb34wRIwy3gBC04YqOxuYnKbZIWJN1aiT8bcRGwlgR0CghadybCe8uRiMh9c6/AOgJ4d2cNhJSFYXxhd4T/nMxmgipl5STZto+oXw/vE9smggpSzp8ZY+FQcKKvOXPg+IQ/rgYTYTUaC+Z8dI04WSH3kISkr7szcVoIiTrWdSP/10eY1pbuPhhjLCmAJ97zEjCCfHvm4vRQDgl2zD7O5Fgx9YthM1rgHBywzteaD/gad1JwsGZuqSBcEwSPjcdgpo9pkdGCYMyy0rWFX8uqVGE5LQnWQ5eJoRzcXhcgR3vqXwaP4rwm9yhWnWZkOPjr2jL2mFCcrcuTUjPCginsluE1MGVNCGVQHlPmN9OEebU+hBDyMsR0yXCnP7IwhDy9oo3EaZ/dssLwjXzFYkljPHz/JoI9/Xjv+F91gn3wJFjCTn7jBnCI0mY/7kWKaibXcKwqGpwKSA8ol9amualT0flezsejUZkvIVFwnKxXWLfAAEh3ojsShTV45iYsrFlQuyAmUZCxF4I/MOA7tv+E2Kp4cAqBvVrQbnA/hNijQgI6WuohZoOECKNCAiZrk4idoBwCs0pIKzZC+ouESK2GH63YCc/5eJhUUcdIIxBI0LCLVixCPf3sCOS3VdC2IjI1zWpc1y8JQSZNhHCg0x+PG8JwcQG+wZcCT+R+ky4YCqCRiqAWNEuEX4wq3N4tIn4dHh/CdlG5EQMzTtMyARk82KiPnGHuROElBvPj2uDAQvWCWFmDTlCuhEboi/jnJP+N4xOSGyxHkJyMBakMvwkSqSrcyAbcdOUae64zxPGrEZJnldo1K0ewsP6mVOrGfA2qhWPS9m/xeWZmUt0mvFqNMyKMv/VPkurmNfoXY7Vn25/1ZhZsMuEclIivGJP8lSx0p4Z3pniPgqsH8jtXavt11RRU7WdXUHRlfd0AuPCJfeQFq1TalpRnUJvRHYfcD4UnvrtXMuvEnG3pHc6h3m5j0c8HdnZ08eYe60ZxVmZo+7kS7vVI55mYNI1DbkXGxKv0qYyDnRwP36z3j+nQk/oUD2hpHpCh+oJJdUTOlRPKKme0KF6Qkn1hA7VE0qqJ3SonlBSPaFD9YSS6gkd6n+wIgw2gushvLY65lunTJ0z87ET32RHmghhQjmp+Fcb2gNCJI2rhMAX1E/xPXYEd3tnSs8BhN9qz9EvAKh2SmcAMzt+aa6polJQsaXSSatIdNuhOZmcJUU1qBhvG6tAOXwZJGKYzQtJqQGTKcsJPunDg564R8JkVMcxJMXqVa1LaxSbPatVrbBA2qlan9amHAt0qpQfh8Z7OkVEbMNAIpMfV3iyqovS/EGHZnjw8qEh4atAEZ7qKM5UZoFtFSY5J/eyehMGIS/ge7wreLHohlTuh/hJwDc706YmCZZN9K5tNbSoy/GbWxNsD7K84ATJP7WbhYjSjnugtn55w3vqh9q9oz9aN+4TcC6w8VZBXp+EwUmr8poiLNO9J6pLcf07jbhEYsCVlPiKqM+X8xRRp7MavZSq0pI0TxvXtWsgWqu59gWVZC447saq4szEilHqzfRmstAxDCI6rf1grApzntt55/w8wWuKHcGjUVGycdiQ16qwsbwQhvtqYd/sjBZV+IJ5+Q/C7LvXlNtrHAAAAABJRU5ErkJggg==\"\n</code></pre>\n\n<pre><code>ite = Item.find(item_id)\nite.presentation.attach(file)\n</code></pre>\n\n<p>Current working way by store tmp file for image:</p>\n\n<pre><code>ite = Item.find(item_id)\n\ncontent_type = file[/(image\\/[a-z]{3,4})|(application\\/[a-z]{3,4})/]\ncontent_type = content_type[/\\b(?!.*\\/).*/]\n\ncontents = file.sub /data:((image|application)\\/.{3,}),/, ''\ndecoded_data = Base64.decode64(contents)\n\nfilename = 'img_' + Time.zone.now.to_s + '.' + content_type\n\nFile.open(\"#{Rails.root}/tmp/images/#{filename}\", 'wb') do |f|\n   f.write(decoded_data)\nend\n\nite.presentation.attach(io: File.open(\"#{Rails.root}/tmp/images/#{filename}\"), filename: filename)\nFileUtils.rm(\"#{Rails.root}/tmp/images/#{filename}\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "therubyracer"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8256048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff8bbba932f41afab17ac63949cb85a?s=128&d=identicon&r=PG&f=1", "display_name": "zetastreak", "link": "https://stackoverflow.com/users/8256048/zetastreak"}, "edited": false, "score": 0, "creation_date": 1555950330, "post_id": 55794853, "comment_id": 98264106, "body": "Thank you for the insights! I modified the lock file and then &quot;bundle update therubyracer&quot; command worked!"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 39, "user_id": 8256048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff8bbba932f41afab17ac63949cb85a?s=128&d=identicon&r=PG&f=1", "display_name": "zetastreak", "link": "https://stackoverflow.com/users/8256048/zetastreak"}, "edited": false, "score": 0, "creation_date": 1555950617, "post_id": 55794853, "comment_id": 98264245, "body": "lockfile is modified by bundler, you do not have to do it youself, the latter command tells bundler to ignore lock for specific gem and install the newest that fits other requirements"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1555938651, "last_edit_date": 1555938651, "creation_date": 1555938088, "answer_id": 55794853, "question_id": 55792755, "link": "https://stackoverflow.com/questions/55792755/install-older-version-of-therubyracerv0-9-10-gem-on-mac-mojave/55794853#55794853", "title": "install older version of therubyracer(v0.9.10) gem on mac mojave", "body": "<p>This version is locked only by <code>Gemfile.lock</code>, which means that there're probably no specific requirements in project itself.</p>\n\n<p>You can try updating just this gem without full <code>bundle update</code> via: <code>bundle update therubyracer</code>, most probably newer version will do ok.</p>\n"}], "owner": {"reputation": 39, "user_id": 8256048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff8bbba932f41afab17ac63949cb85a?s=128&d=identicon&r=PG&f=1", "display_name": "zetastreak", "link": "https://stackoverflow.com/users/8256048/zetastreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 55794853, "answer_count": 1, "score": 0, "last_activity_date": 1555938651, "creation_date": 1555928104, "question_id": 55792755, "link": "https://stackoverflow.com/questions/55792755/install-older-version-of-therubyracerv0-9-10-gem-on-mac-mojave", "title": "install older version of therubyracer(v0.9.10) gem on mac mojave", "body": "<p>It's my very first time with ruby on rails.</p>\n\n<p>I cloned this project from github.</p>\n\n<p><a href=\"https://github.com/fredwu/angel_nest\" rel=\"nofollow noreferrer\">https://github.com/fredwu/angel_nest</a></p>\n\n<p>it took me a while to setup and figure out things.\ni'm having a lot of compatibility issues as this project was made a long time ago.</p>\n\n<p>when i do \"bundle install\"<br>\nI get this error and bundler stops.</p>\n\n<blockquote>\n  <p>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n          /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/bin/ruby extconf.rb checking for main() in -lobjc... yes creating Makefile</p>\n  \n  <p>make compiling v8_external.cpp clang: warning: argument unused during\n  compilation: '-rdynamic' [-Wunused-command-line-argument]\n  v8_external.cpp:10:9: warning: unused variable 'references'\n  [-Wunused-variable]   VALUE references;\n          ^ 1 warning generated. compiling v8_exception.cpp clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_exception.cpp:10:16: warning:\n  unused variable 'stack' [-Wunused-variable]   static void* stack[20];\n                 ^ 1 warning generated. compiling v8_function.cpp clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_handle.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_array.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_try_catch.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_v8.cpp clang: warning:\n  argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_v8.cpp:22:49: warning: implicit\n  conversion loses integer precision: 'long' to 'int'\n  [-Wshorten-64-to-32]\n      V8::SetFlagsFromString(RSTRING_PTR(string), RSTRING_LEN(string));\n      ~~                                          ^~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:674:6:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING_EMBED_LEN(str) : \\\n       ^~~~~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:670:6:\n  note: expanded from macro 'RSTRING_EMBED_LEN'\n       (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) &amp; \\\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ v8_v8.cpp:22:49: warning: implicit conversion loses integer precision:\n  'long' to 'int' [-Wshorten-64-to-32]\n      V8::SetFlagsFromString(RSTRING_PTR(string), RSTRING_LEN(string));\n      ~~                                          ^~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:675:28:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING(str)->as.heap.len)\n       ~~~~~~~~~~~~~~~~~~~~~~^~~ 2 warnings generated. compiling v8_callbacks.cpp clang: warning: argument unused during compilation:\n  '-rdynamic' [-Wunused-command-line-argument] compiling v8_string.cpp\n  clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_string.cpp:18:73: warning:\n  implicit conversion loses integer precision: 'long' to 'int'\n  [-Wshorten-64-to-32]\n      return rr_v8_handle_new(string_class, String::New(RSTRING_PTR(str), RSTRING_LEN(str)));\n                                            ~~~~~~                        ^~~~~~~~~~~~~~~~\n  /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:674:6:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING_EMBED_LEN(str) : \\\n       ^~~~~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:670:6:\n  note: expanded from macro 'RSTRING_EMBED_LEN'\n       (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) &amp; \\\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ v8_string.cpp:18:73: warning: implicit conversion loses integer\n  precision: 'long' to 'int' [-Wshorten-64-to-32]\n      return rr_v8_handle_new(string_class, String::New(RSTRING_PTR(str), RSTRING_LEN(str)));\n                                            ~~~~~~                        ^~~~~~~~~~~~~~~~\n  /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:675:28:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING(str)->as.heap.len)\n       ~~~~~~~~~~~~~~~~~~~~~~^~~ v8_string.cpp:23:79: warning: implicit conversion loses integer precision: 'long' to 'int'\n  [-Wshorten-64-to-32]\n      return rr_v8_handle_new(string_class, String::NewSymbol(RSTRING_PTR(str), RSTRING_LEN(str)));\n                                            ~~~~~~                              ^~~~~~~~~~~~~~~~\n  /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:674:6:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING_EMBED_LEN(str) : \\\n       ^~~~~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:670:6:\n  note: expanded from macro 'RSTRING_EMBED_LEN'\n       (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) &amp; \\\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ v8_string.cpp:23:79: warning: implicit conversion loses integer\n  precision: 'long' to 'int' [-Wshorten-64-to-32]\n      return rr_v8_handle_new(string_class, String::NewSymbol(RSTRING_PTR(str), RSTRING_LEN(str)));\n                                            ~~~~~~                              ^~~~~~~~~~~~~~~~\n  /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:675:28:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING(str)->as.heap.len)\n       ~~~~~~~~~~~~~~~~~~~~~~^~~ 4 warnings generated. compiling v8_message.cpp clang: warning: argument unused during compilation:\n  '-rdynamic' [-Wunused-command-line-argument] compiling rr.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] rr.cpp:48:1: warning: control reaches\n  end of non-void function [-Wreturn-type] } ^ rr.cpp:151:44: warning:\n  implicit conversion loses integer precision: 'long' to 'int'\n  [-Wshorten-64-to-32]\n      return String::New(RSTRING_PTR(value), RSTRING_LEN(value));\n             ~~~~~~                          ^~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:674:6:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING_EMBED_LEN(str) : \\\n       ^~~~~~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:670:6:\n  note: expanded from macro 'RSTRING_EMBED_LEN'\n       (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) &amp; \\\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ rr.cpp:151:44: warning: implicit conversion loses integer precision:\n  'long' to 'int' [-Wshorten-64-to-32]\n      return String::New(RSTRING_PTR(value), RSTRING_LEN(value));\n             ~~~~~~                          ^~~~~~~~~~~~~~~~~~ /Users/divyanshuverma/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:675:28:\n  note: expanded from macro 'RSTRING_LEN'\n       RSTRING(str)->as.heap.len)\n       ~~~~~~~~~~~~~~~~~~~~~~^~~ 3 warnings generated. compiling v8_weakref.cpp clang: warning: argument unused during compilation:\n  '-rdynamic' [-Wunused-command-line-argument] compiling v8_script.cpp\n  clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_date.cpp clang: warning:\n  argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_debug.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_value.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_value.cpp:100:9: warning: unused\n  function 'ToInt32' [-Wunused-function]   VALUE ToInt32(VALUE self) {\n          ^ 1 warning generated. compiling v8_object.cpp clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_object.cpp:77:19: warning: unused\n  variable 'proto' [-Wunused-variable]\n      Handle proto(rr_rb2v8(prototype));\n                    ^ 1 warning generated. compiling v8_locker.cpp clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] v8_locker.cpp:45:5: warning: control\n  reaches end of non-void function [-Wreturn-type]\n      }\n      ^ v8_locker.cpp:85:5: warning: control reaches end of non-void function [-Wreturn-type]\n      }\n      ^ 2 warnings generated. compiling v8_template.cpp clang: warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8.cpp clang: warning:\n  argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] compiling v8_context.cpp clang:\n  warning: argument unused during compilation: '-rdynamic'\n  [-Wunused-command-line-argument] linking shared-object v8.bundle\n  clang: error: no such file or directory:\n  '/Users/divyanshuverma/angel_nest/vendor/cache/ruby/1.9.1/gems/libv8-3.3.10.4/lib/libv8/build/v8/libv8.a'\n  make: *** [v8.bundle] Error 1</p>\n  \n  <p>Gem files will remain installed in\n  /Users/divyanshuverma/angel_nest/vendor/cache/ruby/1.9.1/gems/therubyracer-0.9.10\n  for inspection. Results logged to\n  /Users/divyanshuverma/angel_nest/vendor/cache/ruby/1.9.1/gems/therubyracer-0.9.10/ext/v8/gem_make.out\n  An error occurred while installing therubyracer (0.9.10), and Bundler\n  cannot continue. Make sure that <code>gem install therubyracer -v '0.9.10'</code>\n  succeeds before bundling.</p>\n</blockquote>\n\n<p>i've tried all approaches available on stackoverflow for this method but none works!\nis there any way to override the requirements of this gem make changes such that project works on the newer version of therubyracer gem</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10907347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BVQ1tc13Zdw/AAAAAAAAAAI/AAAAAAAAACU/J-7g2LmWOVk/photo.jpg?sz=128", "display_name": "OG Newbie", "link": "https://stackoverflow.com/users/10907347/og-newbie"}, "edited": false, "score": 0, "creation_date": 1555962440, "post_id": 55792821, "comment_id": 98269289, "body": "Thanks for helping me, I&#39;m really very gratuful to you"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1555928382, "creation_date": 1555928382, "answer_id": 55792821, "question_id": 55791411, "link": "https://stackoverflow.com/questions/55791411/how-to-find-the-shortest-path-from-a-vertex-to-other-in-a-graph-with-a-dijkstra/55792821#55792821", "title": "How to find the shortest path from a vertex to other in a graph with a Dijkstra&#39;s algorithm", "body": "<p>The issue is with something being not initialized (<code>nil</code>) while an attempt to call <code>prev</code> method on it, as might be seen from the error message.</p>\n\n<p>The nearest suspicious call is in <code>Graph#find_shortest_path</code>. If you\u2019d print the <code>@vertices</code> <em>and</em> <code>u</code> from there, you\u2019ll see that on the second iteration <code>u</code> becomes <em>the <code>Vertex</code> instance</em>, while <code>@vertices</code> has <em>raw values</em> as keys. The fix would be to change <code>u = @vertices[u].prev</code> to <code>u = @vertices[u].prev.value</code> to keep <code>u</code> being the <em>raw value</em> (note the check for the <code>@vertices[u].prev</code> in the first place.</p>\n\n<p>The summing up:</p>\n\n<pre><code>def find_shortest_path(source, target)\n  dijkstra(source)\n  path = []\n  u = target\n  while u\n    path.unshift(u)\n    u = (@vertices[u].prev.value if @vertices[u].prev)\n  end\n  return path\nend\n</code></pre>\n\n<hr>\n\n<p>Also the code above would fix the issue, the code is not ruby idiomatic; FWIW, I\u2019d post the idiomatic version.</p>\n\n<p>I understand, it\u2019s too much of uncommon patterns for you yet, but just in case you\u2019d be interested to dig into:</p>\n\n<pre><code>def find_shortest_path(source, target)\n  dijkstra(source)\n\n  loop.reduce([[], target]) do |(path, u), _|\n    break path unless u\n    [\n      path &lt;&lt; u,\n      (@vertices[u].prev.value if @vertices[u].prev)\n    ]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10907347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BVQ1tc13Zdw/AAAAAAAAAAI/AAAAAAAAACU/J-7g2LmWOVk/photo.jpg?sz=128", "display_name": "OG Newbie", "link": "https://stackoverflow.com/users/10907347/og-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 55792821, "answer_count": 1, "score": 0, "last_activity_date": 1555928382, "creation_date": 1555921736, "question_id": 55791411, "link": "https://stackoverflow.com/questions/55791411/how-to-find-the-shortest-path-from-a-vertex-to-other-in-a-graph-with-a-dijkstra", "title": "How to find the shortest path from a vertex to other in a graph with a Dijkstra&#39;s algorithm", "body": "<p>I'm working on a TOP's project where i should do a function that return the shortest path between two vertices of a graph, but i get an error.\nWhat can i do to solve this?</p>\n\n<p>Nothing yet because i am a newbie.</p>\n\n<p>the Graph class</p>\n\n<pre><code>class Vertex\n  attr_accessor :value, :neighbors, :prev, :dist\n  def initialize(value)\n      @value = value\n      @neighbors = []\n      @prev = nil\n      @dist = Float::INFINITY\n  end\n\n  def add_edge(adjacent_vertex)\n      @neighbors &lt;&lt; adjacent_vertex\n  end\nend\n\nclass Graph\n  attr_reader :vertices\n  def initialize\n      @vertices = {}\n      @dijkstra_source = nil\n  end\n\n  def add_vertex(vertex)\n      @vertices[vertex.value] = vertex\n  end\n\n  def add_edge(vertex1, vertex2)\n      @vertices[vertex1.value].add_edge(@vertices[vertex2])\n      @vertices[vertex2.value].add_edge(@vertices[vertex1])\n  end\n\n  def dijkstra(source)\n    return if @dijkstra_source == source\n      unvisited = @vertices.values\n      unvisited.each do |vertex|\n          vertex.dist = Float::INFINITY\n          vertex.prev = nil\n      end\n      @vertices[source].dist = 0\n      until unvisited.empty?\n          current_node = unvisited.min_by(&amp;:dist)\n          break if current_node.dist == Float::INFINITY\n          unvisited.delete(current_node)\n          current_node.neighbors.each do |v|\n              neighbor = @vertices[v]\n              if unvisited.include?(neighbor)\n                  alt = current_node.dist + 1\n                  if alt &lt; neighbor.dist\n                    neighbor.dist = alt\n                    neighbor.prev = current_node \n                  end\n              end\n          end\n      end\n      @dijkstra_source = source\n  end\n\n  def find_shortest_path(source, target)\n      dijkstra(source)\n      path = []\n      u = target\n      while u\n          path.unshift(u)\n          u = @vertices[u].prev\n      end\n      return path\n  end\nend\n</code></pre>\n\n<p>Where i instatiane the vertices</p>\n\n<pre><code>require_relative 'graph'\n\nclass Knight\n  attr_reader :character, :graph\n  def initialize\n      @character = \"\u265e\"\n      @possible_moves = nil\n      @positions = Array.new(8) { Array.new(8, \" \") }\n      @move_set = [\n                    [-1,-2],\n                    [-2,-1],\n                    [-2,+1],\n                    [-1,+2],\n                    [+1,+2],\n                    [+2,+1],\n                    [+2,-1],\n                    [+1,-2]\n                   ]\n      @graph = generate_graph\n      generate_edges\n  end\n\n  def generate_graph\n    graph = Graph.new\n      @positions.each_index do |x|\n          @positions[x].each_index do |y|\n              vertex = Vertex.new([x,y])\n              graph.add_vertex(vertex)\n          end\n      end\n      graph\n  end\n\n  def generate_edges\n      @graph.vertices.each do |key, value|\n          @move_set.each do |move|\n              x = key[0] + move[0]\n              y = key[1] + move[1]\n              if (0..7).include?(x) &amp;&amp; (0..7).include?(y)\n                  vertex = [x,y]\n                  value.add_edge(vertex) unless value.neighbors.include?(vertex)\n              end\n          end\n      end\n  end\nend\n\nknight = Knight.new\nknight.generate_edges\np knight.graph.find_shortest_path([1,2],[2,3])\n</code></pre>\n\n<p>I expect an array which stores inside the shortest path from a source vertex([1,2]) to a target vertex(2,3).</p>\n\n<p>But instead of that what i get is a NilClass error</p>\n\n<pre><code>Traceback (most recent call last):\n    1: from knight.rb:50:in `&lt;main&gt;'\n/home/brito/the_odin_project/knight_moves/graph.rb:63:in `find_shortest_path': undefined method `prev' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 1, "creation_date": 1555914450, "post_id": 55789905, "comment_id": 98249799, "body": "did you tried this <a href=\"https://gist.github.com/luislavena/f064211759ee0f806c88\" rel=\"nofollow noreferrer\">gist</a>"}, {"owner": {"reputation": 59, "user_id": 5623903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f063686aeddbe53ac6355e9010e542b4?s=128&d=identicon&r=PG&f=1", "display_name": "Anh Bui", "link": "https://stackoverflow.com/users/5623903/anh-bui"}, "reply_to_user": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 0, "creation_date": 1555927179, "post_id": 55789905, "comment_id": 98254264, "body": "I tried download the lastest version 3.0.3 gem from this, and used this command to install it : &quot;gem install --force --local *.gem&quot;, it said to me that &quot;1 gem installed&quot;, but when I checked it still 2.3.0 so nothing change. Could you please help me ? Thank you so much."}, {"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 0, "creation_date": 1555927823, "post_id": 55789905, "comment_id": 98254481, "body": "can you update you&#39;re question with <code>bundler</code> &amp; <code>gem --version</code>"}, {"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 1, "creation_date": 1555933083, "post_id": 55789905, "comment_id": 98256398, "body": "i think you need to downgrade you&#39;re <code>bundler</code> version or upgrade you&#39;re gems version &gt; 2.5.0"}, {"owner": {"reputation": 59, "user_id": 5623903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f063686aeddbe53ac6355e9010e542b4?s=128&d=identicon&r=PG&f=1", "display_name": "Anh Bui", "link": "https://stackoverflow.com/users/5623903/anh-bui"}, "reply_to_user": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "edited": false, "score": 0, "creation_date": 1555944568, "post_id": 55789905, "comment_id": 98261529, "body": "@UdAY thank you so much when I upgrade my gems version to 2.5.2 all my problems have been solved"}], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": false, "score": 0, "last_activity_date": 1555994978, "creation_date": 1555994978, "answer_id": 55804494, "question_id": 55789905, "link": "https://stackoverflow.com/questions/55789905/how-to-fix-bundler-2-requires-rubygems-2-5-or-later/55804494#55804494", "title": "How to fix &quot;Bundler 2 requires RubyGems 2.5 or later&quot;", "body": "<p>You need to downgrade you're <code>bundler</code> version or upgrade you're gems version > 2.5.0. Because <code>bundler 2</code> don't support the gems version &lt; 2.5.0</p>\n"}], "owner": {"reputation": 59, "user_id": 5623903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f063686aeddbe53ac6355e9010e542b4?s=128&d=identicon&r=PG&f=1", "display_name": "Anh Bui", "link": "https://stackoverflow.com/users/5623903/anh-bui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1136, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564410070, "creation_date": 1555913425, "last_edit_date": 1564410070, "question_id": 55789905, "link": "https://stackoverflow.com/questions/55789905/how-to-fix-bundler-2-requires-rubygems-2-5-or-later", "title": "How to fix &quot;Bundler 2 requires RubyGems 2.5 or later&quot;", "body": "<p>I am a newbie and using Ruby on Rails, I am stuck with this problem.\nI am trying to install Ruby on Rails, and when I am trying to check rails's version with \"rails -v\", it gave me this message:</p>\n\n<pre><code>Bundler 2 requires RubyGems 2.5 or later. Either install bundler 1 or update to a support RubyGems version \n</code></pre>\n\n<p>I tried to update the gem with <code>gem update --system</code> but it gave me this message:</p>\n\n<pre><code>ERROR: While executing gem ... (Gem::RemoteFetcher::FetchError) SSL_connect returned=1 errno=0 state=error: certificate verify failed.\n</code></pre>\n\n<p>(<a href=\"https://api.rubygemsorg/specs.4.8.gz\" rel=\"nofollow noreferrer\">https://api.rubygemsorg/specs.4.8.gz</a>)</p>\n\n<p>When I check my gem version with <code>gem --version</code>, it gives me <code>2.3.0</code>. </p>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["ruby", "scope"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555901158, "post_id": 55788373, "comment_id": 98247228, "body": "<code>@name</code> in <code>@name = &#39;bob&#39;</code> is a <i>class instance variable</i>, belonging to <code>Name</code>. The other <code>@name</code> is an <i>instance variable</i>, belonging to the instance <code>new</code>. They are as different as night and day, and co-exist just fine. Try adding <code>def initialize; @name = &#39;sue&#39;; end</code>. Then <code>name = Name.new; name.foo #=&gt; &#39;sue&#39;</code>, but <code>Name.instance_variable_get(:@name) #=&gt; &#39;bob&#39;</code>. Note <code>Name.instance_variables #=&gt; [:@name]; name.instance_variables #=&gt; [:@name]</code>, but those are different variables."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555901392, "post_id": 55788373, "comment_id": 98247264, "body": "Note that poor <code>&#39;bob</code> is missing his closing quote. Also, as most classes have a class method <code>new</code>, using <code>new</code> as your own local variable can be confusing. It&#39;s best to avoid giving variables names that are the names of Ruby methods."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 2, "creation_date": 1555921054, "post_id": 55788373, "comment_id": 98252026, "body": "This is an example where the duplicate question is better than the original (<a href=\"https://meta.stackoverflow.com/questions/366565/what-to-do-when-a-question-marked-as-a-duplicate-is-better-than-the-original-que\" title=\"what to do when a question marked as a duplicate is better than the original que\">meta.stackoverflow.com/questions/366565/&hellip;</a>) - the exampe is simpler. Ideally the &quot;marked duplicate&quot; direction should be reversed imo."}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1555908668, "answer_count": 0, "score": 0, "last_activity_date": 1555898821, "creation_date": 1555898821, "last_edit_date": 1592644375, "question_id": 55788373, "link": "https://stackoverflow.com/questions/55788373/why-is-instance-variable-out-of-scope-inside-of-methods-inside-an-object", "closed_reason": "Duplicate", "title": "Why is @instance variable out of scope inside of methods inside an object", "body": "<p>Why is my @instance variable 'name' out of scope inside of methods inside an object</p>\n<pre><code>class Name\n\n  @name = 'bob  \n\n  puts @name\n\n  def foo\n     @name\n  end   \n\nend\n\n\nnew = Name.new\np new.foo\n</code></pre>\n<p>The above code returns</p>\n<blockquote>\n<p>bob</p>\n<p>nil</p>\n</blockquote>\n"}, {"tags": ["ruby", "rubygems", "cocoapods"], "comments": [{"owner": {"reputation": 522, "user_id": 5539754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vhzX.jpg?s=128&g=1", "display_name": "Shiv Jaiswal", "link": "https://stackoverflow.com/users/5539754/shiv-jaiswal"}, "edited": false, "score": 0, "creation_date": 1555901187, "post_id": 55788336, "comment_id": 98247236, "body": "First try to run pod init command to initialise pod file."}, {"owner": {"reputation": 65, "user_id": 11392819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32acf41a2eafeba4e0ec5a7c504866d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Singh", "link": "https://stackoverflow.com/users/11392819/jason-singh"}, "reply_to_user": {"reputation": 522, "user_id": 5539754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vhzX.jpg?s=128&g=1", "display_name": "Shiv Jaiswal", "link": "https://stackoverflow.com/users/5539754/shiv-jaiswal"}, "edited": false, "score": 0, "creation_date": 1555903599, "post_id": 55788336, "comment_id": 98247603, "body": "@ShivJaiswal i tried pod init but I got the same message."}, {"owner": {"reputation": 522, "user_id": 5539754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vhzX.jpg?s=128&g=1", "display_name": "Shiv Jaiswal", "link": "https://stackoverflow.com/users/5539754/shiv-jaiswal"}, "edited": false, "score": 2, "creation_date": 1555907786, "post_id": 55788336, "comment_id": 98248234, "body": "Check <i><a href=\"https://stackoverflow.com/questions/37904588/cocoapods-not-installing\" title=\"cocoapods not installing\">stackoverflow.com/questions/37904588/cocoapods-not-installin&zwnj;&#8203;g</a></i> link may be it help you to solve problem."}, {"owner": {"reputation": 522, "user_id": 5539754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vhzX.jpg?s=128&g=1", "display_name": "Shiv Jaiswal", "link": "https://stackoverflow.com/users/5539754/shiv-jaiswal"}, "edited": false, "score": 0, "creation_date": 1556014444, "post_id": 55788336, "comment_id": 98285183, "body": "Your welcome bro."}], "owner": {"reputation": 65, "user_id": 11392819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32acf41a2eafeba4e0ec5a7c504866d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Singh", "link": "https://stackoverflow.com/users/11392819/jason-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1548, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1555900760, "creation_date": 1555898519, "last_edit_date": 1555900760, "question_id": 55788336, "link": "https://stackoverflow.com/questions/55788336/when-i-run-pod-install-i-get-the-message-that-gem-cocoapods-cannot-be-found-ho", "title": "When I run pod install, I get the message that gem cocoapods cannot be found. How can I resolve this issue?", "body": "<p>Ever since I integrated rvm into my xcode project, I am not able to install any pods. When I run pod install, I get the message that gem cocoapods cannot be found. How can I resolve this issue?</p>\n\n<p>I have already tried looking at this link (<a href=\"https://stackoverflow.com/questions/46438176/cocoapods-claims-to-install-but-does-not-work\">Cocoapods claims to install but does not work</a>) but to no avail.</p>\n\n<p>Bhaveshs-MacBook-Air:moneymiles bhaveshshah$ pod install\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems.rb:241:in <code>bin_path': can't find gem cocoapods (&gt;= 0.a) (Gem::GemNotFoundException)\n    from /usr/local/bin/pod:22:in</code>'</p>\n\n<p>Pods should have been installed properly but fail to do so.</p>\n"}, {"tags": ["ruby", "class", "variables", "methods", "scope"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1555901675, "post_id": 55788226, "comment_id": 98247305, "body": "You need <code>self.class.instance_variable_get(:@sandbox).accounts..</code>. That is, you need the value of the <i>class instance variable</i> <code>@sandbox</code>, so you first have to change the scope to the class: <code>self.class</code>. (This is one of the cases where <code>self.</code> is required, because without it Ruby would think <code>class</code> is a keyword.) Then, since the class has no getter for <code>@sandbox</code> you need to use the method <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-instance_variable_get\" rel=\"nofollow noreferrer\">Object#instance_variable_get</a>."}, {"owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555934892, "post_id": 55788226, "comment_id": 98257182, "body": "worlds most complicated $this-&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 24667, "user_id": 797303, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DahZJ.jpg?s=128&g=1", "display_name": "Maxim Krizhanovsky", "link": "https://stackoverflow.com/users/797303/maxim-krizhanovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1555937143, "creation_date": 1555937143, "answer_id": 55794662, "question_id": 55788226, "link": "https://stackoverflow.com/questions/55788226/method-referring-to-a-pulled-in-packageds-method-moves-out-of-scope-when-put-in/55794662#55794662", "title": "Method referring to a pulled in packaged&#39;s method moves out of scope when put inside an objects method", "body": "<p>To understand this, you need to understand the concept of singleton classes in Ruby.</p>\n\n<p>The class Name is an object itself, and <code>@sandbox</code> is an instance variable of that object.</p>\n\n<p>If you write <code>def self.get_account</code> you could use <code>@sandox</code> there, but then this method is not available for instances of Name, e.g. you should call <code>Name.get_account</code> and not <code>Name.new.get_account</code>. Actually, this adds a method to the singleton class of Name, and that's why you can access @sandbox there.</p>\n\n<p>To create an instance variable that could be used in the instances of <code>Name</code>, you should do so in the <code>initialize</code> method of <code>Name</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555944485, "post_id": 55795517, "comment_id": 98261484, "body": "The value of <code>@sandbox</code> is the same for all instances, so doesn`t it make sense for it to be a class instance variable?"}, {"owner": {"reputation": 51, "user_id": 2753690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2778a6b310cb638f13d2a5084b79fce3?s=128&d=identicon&r=PG&f=1", "display_name": "sathish1203", "link": "https://stackoverflow.com/users/2753690/sathish1203"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556523772, "post_id": 55795517, "comment_id": 98453979, "body": "Sure! If the @sandbox scope is class level than @@sandbox should do the trick in the code. I am unsure about the design intent in this case. With class variables, there could be some extendability issues later on if they decide to change the API for specific classes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556528765, "post_id": 55795517, "comment_id": 98456275, "body": "I&#39;m suggesting that <code>@sandbox</code> be a class instance variable, not a class variable. (btw, many Rubiests, myself included, never use class variables.)"}, {"owner": {"reputation": 51, "user_id": 2753690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2778a6b310cb638f13d2a5084b79fce3?s=128&d=identicon&r=PG&f=1", "display_name": "sathish1203", "link": "https://stackoverflow.com/users/2753690/sathish1203"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556537502, "post_id": 55795517, "comment_id": 98460565, "body": "Oh, sorry I got confused. I also added @sandbox as an instance variable only. I misread the comment and thought the suggestion was to have it as a class variable. I think we might be on the same page here. Am I misunderstanding something?"}], "tags": [], "owner": {"reputation": 51, "user_id": 2753690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2778a6b310cb638f13d2a5084b79fce3?s=128&d=identicon&r=PG&f=1", "display_name": "sathish1203", "link": "https://stackoverflow.com/users/2753690/sathish1203"}, "is_accepted": true, "score": 1, "last_activity_date": 1555941244, "creation_date": 1555941244, "answer_id": 55795517, "question_id": 55788226, "link": "https://stackoverflow.com/questions/55788226/method-referring-to-a-pulled-in-packageds-method-moves-out-of-scope-when-put-in/55795517#55795517", "title": "Method referring to a pulled in packaged&#39;s method moves out of scope when put inside an objects method", "body": "<ol>\n<li><p>The mistake in the code is that @sandbox is an attribute of the class. The value would be initialized when an object of the class is created. Writing the initialization in the class will have no effect. @Maxim has explained this in his answer. </p></li>\n<li><p>For the second code, when the interpreter runs through the code, it would execute it once. But that code cannot run more than once. </p></li>\n</ol>\n\n<p>The code should be, </p>\n\n<pre><code>require 'package that has 'accounts''\n\n\nclass Name\n\n    def initialize\n      @sandbox = #working API connection\n    end\n\n    def get_account\n        @sandbox.accounts do |resp|         #This is where error is\n          resp.each do |account|\n\n            if account.name == \"John\"\n                name = account.name\n            end\n\n          end\n        end\n    end\n\n\nend\n\n\nnew = Name.new\np new.get_account\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55795517, "answer_count": 2, "score": 0, "last_activity_date": 1555941244, "creation_date": 1555897173, "question_id": 55788226, "link": "https://stackoverflow.com/questions/55788226/method-referring-to-a-pulled-in-packageds-method-moves-out-of-scope-when-put-in", "title": "Method referring to a pulled in packaged&#39;s method moves out of scope when put inside an objects method", "body": "<p>When I put a method that refers to a pulled in package inside another method it leaves scope and fails. </p>\n\n<p>What is the proper way to do this. I tried playing with the 'self' but am new and that did not work out.</p>\n\n<p>Desired solution. Does not work. Returns error.</p>\n\n<blockquote>\n  <p>undefined method `accounts' for nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<pre><code>require 'package that has 'accounts''\n\n\nclass Name\n\n    @sandbox = #working API connection\n\n    def get_account\n        @sandbox.accounts do |resp|         #This is where error is\n          resp.each do |account|\n\n            if account.name == \"John\"\n                name = account.name\n            end\n\n          end\n        end\n    end\n\n\nend\n\n\nnew = Name.new\np new.get_account\n</code></pre>\n\n<hr>\n\n<p>This works but does not create a reusable method.</p>\n\n<pre><code>require 'package that has 'accounts''\n\nclass Name\n\n    @sandbox = #working API connection\n\n\n        @sandbox.accounts do |resp|       \n          resp.each do |account|    \n            if account.name == \"John\"\n                p account.name\n            end\n          end\n        end\n\n\n\n\nend\n\n\nnew = Name.new\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "timezone"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1555891956, "post_id": 55787510, "comment_id": 98245956, "body": "<code>created_at</code> is <code>TimeWithZone</code>, is that playing a role in this?"}, {"owner": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1555892880, "post_id": 55787510, "comment_id": 98246081, "body": "Yes they all are TimeWithZone, but that&#39;s supposedly <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow noreferrer\">interchangeable with Time in Rails</a>, (<code>inv.created_at.is_a?(Time) =&gt; true</code>) and I&#39;ve always just extended Time before"}], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "reply_to_user": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "edited": false, "score": 0, "creation_date": 1555929932, "post_id": 55787752, "comment_id": 98255219, "body": "thanks, should have tested it, works with <code>ActiveSupport::TimeWithZone</code>"}, {"owner": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "edited": false, "score": 0, "creation_date": 1555938610, "post_id": 55787752, "comment_id": 98258698, "body": "Thank you, this does in fact work, though I&#39;m going to leave this question open a little longer as I&#39;m still confused as to why this particular patch necessitates extending <code>ActiveSupport::TimeWithZone</code>, when normally extending <code>Time</code> is all that&#39;s required."}, {"owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "reply_to_user": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "edited": false, "score": 0, "creation_date": 1555941973, "post_id": 55787752, "comment_id": 98260251, "body": "rails doesn&#39;t use <code>Time</code> directly (as it&#39;s linked to the local time of your machine) but does things like <code>Time.zone</code> (e.g. <code>Time.zone.now</code>) to get the UTC time (that is what is stored in the database). also <code>in_time_zone</code> is defined by active support and returns an <code>ActiveSupport::TimeWithZone</code>. personally I would make a zone name alias for nyc, e.g. doing <code>in_time_zone(&#39;nyc&#39;)</code> (this assumes you set your rails time zone to UTC which is the default)"}], "tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": true, "score": 1, "last_activity_date": 1555929912, "last_edit_date": 1555929912, "creation_date": 1555890843, "answer_id": 55787752, "question_id": 55787510, "link": "https://stackoverflow.com/questions/55787510/converting-time-zone-of-rails-activerecord-timestamps/55787752#55787752", "title": "Converting time zone of Rails ActiveRecord timestamps", "body": "<p>you would need to patch ActiveSupport::TimeWithZone instead of Time, e.g.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ActiveSupport::TimeWithZone\n  def nyc\n    in_time_zone('Eastern Time (US &amp; Canada)')\n  end\nend\n\nTime.zone.now.nyc # =&gt; Mon, 22 Apr 2019 06:44:41 EDT -04:00\nUser.last.created_at.nyc # =&gt; Sun, 21 Apr 2019 13:34:45 EDT -04:00\n</code></pre>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html</a></p>\n\n<p>(edit: I previously said \"DateTime\" instead of \"ActiveSupport::TimeWithZone\")</p>\n"}], "owner": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 55787752, "answer_count": 1, "score": 2, "last_activity_date": 1555929912, "creation_date": 1555887977, "last_edit_date": 1555893521, "question_id": 55787510, "link": "https://stackoverflow.com/questions/55787510/converting-time-zone-of-rails-activerecord-timestamps", "title": "Converting time zone of Rails ActiveRecord timestamps", "body": "<p>I extended the Time class in my Rails projects so I can easily get the time in NYC:  </p>\n\n<p><strong>/lib/extensions.rb</strong> . </p>\n\n<pre><code>class Time\n  # Get NYC time:\n  def nyc\n    self.in_time_zone('Eastern Time (US &amp; Canada)')\n  end\nend\n</code></pre>\n\n<p>Testing it out, looks good:</p>\n\n<pre><code>time_a = Time.now.utc.nyc\n=&gt; Sun, 21 Apr 2019 18:42:12 EDT -04:00\n</code></pre>\n\n<p>The problem is when I pull timestamps from the DB:</p>\n\n<pre><code>time_b = object.created_at.in_time_zone('Eastern Time (US &amp; Canada)')\n=&gt; Sun, 21 Apr 2019 17:22:04 EDT -04:00\ntime_c = object.created_at.nyc\n=&gt; Sun, 21 Apr 2019 17:22:04 UTC +00:00\n</code></pre>\n\n<p>Super confused. Converting the timestamp to EDT works when I use in_time_zone in the console, but not when I use the extension? Even though my extension method works on Time objects I create in console? What's happening here?</p>\n\n<hr>\n\n<p>(<strong>Note:</strong> Time instances in Rails are in fact instances of <code>ActiveSupport::TimeWithZone</code>. \"TimeWithZone instances implement the same API as Ruby Time instances, so that Time and TimeWithZone instances are interchangeable.\" - <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow noreferrer\">ActiveSupportTimeWithZone</a>)</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1555906385, "post_id": 55787252, "comment_id": 98248006, "body": "Your <code>span</code> tag does not have a <code>picture</code> class. Maybe you want to use <code>span.content img</code> as the selector instead of <code>span.picture</code>."}, {"owner": {"reputation": 47, "user_id": 10882248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbb0d0db905795c146980de1c180213?s=128&d=identicon&r=PG&f=1", "display_name": "T M", "link": "https://stackoverflow.com/users/10882248/t-m"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1555907245, "post_id": 55787252, "comment_id": 98248147, "body": "I&#39;ve used all classes from Michael Hartl  tutorial as is. If I change something, I need to change something else regarding.  Could you answer on my question and show what  changes need to be done to   enlarge images on hover?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10882248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbb0d0db905795c146980de1c180213?s=128&d=identicon&r=PG&f=1", "display_name": "T M", "link": "https://stackoverflow.com/users/10882248/t-m"}, "edited": false, "score": 0, "creation_date": 1555956021, "post_id": 55794934, "comment_id": 98266694, "body": "It is working for one app. but not for others. I need to figure out why is the difference.  thanks ."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 0, "last_activity_date": 1555938525, "creation_date": 1555938525, "answer_id": 55794934, "question_id": 55787252, "link": "https://stackoverflow.com/questions/55787252/how-to-enlarge-images-on-hover-using-only-css-in-ruby-on-rails/55794934#55794934", "title": "How to enlarge images on hover using only CSS in Ruby on Rails?", "body": "<p>From the code you are showing the CSS should be:</p>\n\n<pre><code>.content {\n  display: block;\n  margin-left: 60px;\n  img {\n    display: block;\n    padding: 5px 0;\n  }\n}\n.content:hover img {\n  transform: scale(1.5);\n}\n</code></pre>\n\n<p>I have no idea what's that <code>span.picture</code> selector for, at least there's no span element with class picture on the HTML you are showing.</p>\n"}], "owner": {"reputation": 47, "user_id": 10882248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbb0d0db905795c146980de1c180213?s=128&d=identicon&r=PG&f=1", "display_name": "T M", "link": "https://stackoverflow.com/users/10882248/t-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 55794934, "answer_count": 1, "score": 0, "last_activity_date": 1555938525, "creation_date": 1555884991, "last_edit_date": 1555886622, "question_id": 55787252, "link": "https://stackoverflow.com/questions/55787252/how-to-enlarge-images-on-hover-using-only-css-in-ruby-on-rails", "title": "How to enlarge images on hover using only CSS in Ruby on Rails?", "body": "<p>Right now, a user could download and see images using Ruby on Rails. \nI would like that those images be enlarged on hover.</p>\n\n<p>The similar question was asked (link below) without the answer on it.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/40814446/in-bootstrap-how-to-enlarge-one-of-these-images-when-mouse-is-hovered-and-ie8\">In bootstrap, how to enlarge one of these images when mouse is hovered? And IE8 shall be compatible</a></p>\n\n<p>To implement this functionality, I\u2019ve added :hover to custom.scss(see below)  but the pictures want not being enlarged on hover.</p>\n\n<pre><code>span.picture {\n    margin-top: 10px;\n    input {\n      border: 0;\n    }\n  }\n   span.picture:hover {\n     transform: scale(1.5);\n}\n</code></pre>\n\n<p>//The files related are similar as below:</p>\n\n<p>'''from source/bootstrap'''</p>\n\n<pre><code>    &lt;span class=\"content\"&gt;\n        pic\n        &lt;img src=\"https://example.s3.amazonaws.com/uploads/micropost/picture/124/1.JPG\" alt=\"B1\" /&gt;\n      &lt;/span&gt;\n</code></pre>\n\n<p>'''from custom.scss'''</p>\n\n<pre><code>.content {\n    display: block;\n    margin-left: 60px;\n    img {\n      display: block;\n      padding: 5px 0;\n    }\n  }\n\n\nspan.picture {\n  margin-top: 10px;\n  input {\n    border: 0;\n  }\n}\n</code></pre>\n\n<p>'''from Gemfile'''</p>\n\n<pre><code>gem 'bootstrap-will_paginate', '1.0.0'\ngem 'bootstrap-sass', '3.3.7'\ngem 'puma',         '3.9.1'\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "reactjs", "hyperstack", "opal"], "answers": [{"tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1555902105, "creation_date": 1555902105, "answer_id": 55788663, "question_id": 55787081, "link": "https://stackoverflow.com/questions/55787081/how-can-i-upload-a-file-in-hyperstack/55788663#55788663", "title": "How can I upload a file in hyperstack?", "body": "<p>There are exceptions to every rule <a href=\"https://github.com/hyperstack-org/hyperstack/issues/174\" rel=\"nofollow noreferrer\">https://github.com/hyperstack-org/hyperstack/issues/174</a></p>\n\n<p>Fileuploads would require a special parameter type in operations.  </p>\n\n<p>Just use a regular controller to define the endpoint.  You can still access your end point with an <code>HTTP.post</code> in your client ruby code.</p>\n\n<p>HOWEVER that said, these days most file uploads go directly to some cloud storage like Amazon AWS.  In this case you would indeed define an Operation to get the temporary storage URL from the cloud storage provider, as this all needs to be run server side.</p>\n\n<p>So you would define an operation that returns the cloud storage URL (which usually lasts just a few minutes), the you would post to that URL.</p>\n\n<p>Inside the operation you would directly contact the cloud storage provider with your credentials, or use the Fog gem.</p>\n"}], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555902105, "creation_date": 1555883539, "question_id": 55787081, "link": "https://stackoverflow.com/questions/55787081/how-can-i-upload-a-file-in-hyperstack", "title": "How can I upload a file in hyperstack?", "body": "<p>Basically the title. The documentation says to use Operations in place of traditional APIs, but I can't seem to find a way to handle file uploads.</p>\n\n<p>Is this even possible in hyperstack?</p>\n"}, {"tags": ["ruby", "oop", "class-level"], "answers": [{"comments": [{"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "reply_to_user": {"reputation": 3, "user_id": 6359265, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7-CZ9FAZYfc/AAAAAAAAAAI/AAAAAAAABsI/Vm7iibWcu4g/photo.jpg?sz=128", "display_name": "Hmejia in the Bay", "link": "https://stackoverflow.com/users/6359265/hmejia-in-the-bay"}, "edited": false, "score": 0, "creation_date": 1556172817, "post_id": 55786714, "comment_id": 98348259, "body": "@HmejiaintheBay I see you&#39;re new to Stack Overflow. Would you mind accepting my answer as the correct one then? Thanks!"}, {"owner": {"reputation": 3, "user_id": 6359265, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7-CZ9FAZYfc/AAAAAAAAAAI/AAAAAAAABsI/Vm7iibWcu4g/photo.jpg?sz=128", "display_name": "Hmejia in the Bay", "link": "https://stackoverflow.com/users/6359265/hmejia-in-the-bay"}, "edited": false, "score": 1, "creation_date": 1557163323, "post_id": 55786714, "comment_id": 98664821, "body": "I just did that @fphilipe Thanks for the nudge, you are right.  I am very new here."}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 0, "last_activity_date": 1555880444, "creation_date": 1555880444, "answer_id": 55786714, "question_id": 55786604, "link": "https://stackoverflow.com/questions/55786604/why-do-i-get-an-extra-trailing-space-and-how-to-get-rid-of-it/55786714#55786714", "title": "Why do I get an extra trailing space and how to get rid of it?", "body": "<p>From the docs of <code>puts</code>:</p>\n\n<blockquote>\n  <p>Writes a newline after any that do not already end with a newline sequence.</p>\n</blockquote>\n\n<p>In <code>Deck.deal</code> you have <code>puts \"#{dealing.output_card}\"</code>. <code>Card#output_card</code> is defined as:</p>\n\n<pre><code>def output_card\n  puts \"#{self.rank} of #{self.suit}\"\nend\n</code></pre>\n\n<p>I.e., <code>Card#output_card</code> is already printing with a new line at the end. The return value of this method, which is the return value of <code>puts</code>, which in turn per the docs is <code>nil</code>, is then printed in <code>Deck.deal</code>, resulting in an empty line being printed.</p>\n\n<p>In short, you're printing twice, where the second <code>puts</code> results in the additional line.</p>\n\n<p>I suggest you remove <code>puts</code> from <code>Card</code> as it should not have a notion of printing itself. That's the job of <code>Deck</code>. I would change <code>Card#output_card</code> to be <code>Card#to_s</code> and just return the string you're constructing rather than <code>puts</code>ing it. Then you can rely on the fact that <code>puts</code> will call <code>#to_s</code> on the object being printed.</p>\n\n<pre><code>class Card\n  # ...\n\n  def to_s\n    \"#{self.rank} of #{self.suit}\"\n  end\n\n  # ...\nend\n\nclass Deck\n  # ...\n\n  def output\n    @cards.each do |card|\n      puts card\n    end\n  end\n\n  def deal\n    self.shuffle\n    puts @cards.shift\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6359265, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7-CZ9FAZYfc/AAAAAAAAAAI/AAAAAAAABsI/Vm7iibWcu4g/photo.jpg?sz=128", "display_name": "Hmejia in the Bay", "link": "https://stackoverflow.com/users/6359265/hmejia-in-the-bay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 55786714, "answer_count": 1, "score": 0, "last_activity_date": 1555880444, "creation_date": 1555879457, "question_id": 55786604, "link": "https://stackoverflow.com/questions/55786604/why-do-i-get-an-extra-trailing-space-and-how-to-get-rid-of-it", "title": "Why do I get an extra trailing space and how to get rid of it?", "body": "<p>I am new to ruby and I can't understand why I after running this code I get an extra empty line as a result as a part of the output. I am using Ruby 2.5.3</p>\n\n<pre><code>class Card\n  attr_accessor :rank, :suit\n\n  def initialize(rank,suit)\n    @rank = rank\n    @suit = suit\n  end\n\n  def output_card\n    puts \"#{self.rank} of #{self.suit}\"\n  end\n\n  def self.random_card\n    suit = [\"hearts\", \"spades\", \"clubs\", \"diamonds\"]\n    Card.new(rand(1..13), suit.sample)\n  end\nend\n\nclass Deck\n  def initialize\n    d = 0\n    @cards =[]\n    while d &lt; 13\n      @cards &lt;&lt; Card.random_card\n      d += 1\n    end\n  end\n\n  def shuffle\n    @cards.shuffle!\n  end\n\n  def output\n    @cards.each do |card|\n      card.output_card\n    end\n  end\n\n  def deal\n    self.shuffle\n    dealing = @cards.shift\n    puts \"#{dealing.output_card}\"\n  end\nend\n\ndeck = Deck.new\ndeck.deal\n</code></pre>\n\n<p>The above will give me this result:</p>\n\n<pre><code>[ENV]:/vagrant/OOP $ ruby card.rb\n6 of clubs\n\n[ENV]:/vagrant/OOP $\n</code></pre>\n\n<p>As you can see there is an extra line, and I don't understand why.</p>\n"}, {"tags": ["ruby", "github-api"], "answers": [{"comments": [{"owner": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556850684, "post_id": 55926977, "comment_id": 98576321, "body": "The <code>sanitized_tree</code> params that I&#39;m passing are represented in the last code snippet, which also explains the text in question. The sanitized_tree looks good, but upon creating the new tree, the trees and blobs I would expect to be there still, are gone."}, {"owner": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556851828, "post_id": 55926977, "comment_id": 98576517, "body": "I updated my question with the <code>sanitized_tree</code> to show what I mean."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556867357, "post_id": 55926977, "comment_id": 98580503, "body": "@Dudo I updated my answer, I believe you are using the wrong path to the repo as by point 4)"}, {"owner": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556897199, "post_id": 55926977, "comment_id": 98596490, "body": "typo on my part (in the question, since that variable is passed in via <code>ruby feature_cleanup.rb -n foo -r dudo&#47;k8s_colors</code>). Also, the repo is private. Updated question to show <code>base_tree</code>."}, {"owner": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556897712, "post_id": 55926977, "comment_id": 98596757, "body": "I also renamed a variable. I only have <code>clean_tree</code> now."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "edited": false, "score": 0, "creation_date": 1556976216, "post_id": 55926977, "comment_id": 98615161, "body": "@Dudo currently I don&#39;t have any idea, but later I will check again. The only thing I notice is that <code>create_tree</code> returns new commits. I wonder what actually is included in that tree. Only sha <code>d0554827144fae7e578edb545d07e8e43bd17b74</code> and <code>f2d7ff860c04b80fb4f9b6cba5304d0ca0a6816f</code> ? What does those commits include? are they merge commits including all the commits from <code>base_tree</code>?"}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 2, "last_activity_date": 1556867330, "last_edit_date": 1556867330, "creation_date": 1556649732, "answer_id": 55926977, "question_id": 55786299, "link": "https://stackoverflow.com/questions/55786299/delete-multiple-files-from-github-api/55926977#55926977", "title": "Delete multiple files from GitHub API", "body": "<p>1) You get the <code>sha</code> from the last <a href=\"http://octokit.github.io/octokit.rb/Octokit/Client/Commits.html#commit-instance_method\" rel=\"nofollow noreferrer\"><code>commit</code></a> from the repo</p>\n\n<pre><code>sha_base_tree = client.commit(repo, sha_latest_commit).commit.tree.sha\n</code></pre>\n\n<p>2) You fetch all the <a href=\"http://octokit.github.io/octokit.rb/Octokit/Client/Objects.html#tree-instance_method\" rel=\"nofollow noreferrer\"><code>tree</code> objects</a></p>\n\n<pre><code>base_tree = client.tree(repo, sha_base_tree, recursive: true)\n</code></pre>\n\n<p>3) You loop and modify those <code>threes</code>. </p>\n\n<pre><code>cleaned_tree = base_tree.tree.reject { |blob| blob.path.include? ['overlays', namespace].join('/') }\nsanitized_tree = cleaned_tree.map { |o| o.to_h.slice(:path, :mode, :type, :sha) }\nsha_new_tree = client.create_tree(repo, sanitized_tree)\n</code></pre>\n\n<p>4) You need to incude <strong>the correct path to the repo <code>dudo/k8s_colors</code></strong> in <a href=\"http://octokit.github.io/octokit.rb/Octokit/Client/Objects.html#create_tree-instance_method\" rel=\"nofollow noreferrer\"><code>create_tree(repo, sanitized_tree)</code></a></p>\n\n<pre><code>client.create_tree('dudo/k8s_colors', sanitized_tree)\n</code></pre>\n\n<p>I tried to retrieve your tree via <a href=\"https://developer.github.com/v3/git/trees/#get-a-tree\" rel=\"nofollow noreferrer\">github api get request</a>. The <a href=\"https://api.github.com/repos/dudo/k8s_colors/git/trees/2a8800e18b5a4dc50414fc380e2d2d66401082d3\" rel=\"nofollow noreferrer\">request returns <code>not found</code></a>, which means you did not create any tree. The repo does not exist even <a href=\"https://github.com/dudo?utf8=%E2%9C%93&amp;tab=repositories&amp;q=&amp;type=&amp;language=\" rel=\"nofollow noreferrer\">on your github repository</a>.</p>\n\n<p>also <code>.create_tree</code> returns the following <code>head</code> commits.</p>\n\n<ol>\n<li><code>2a8800e18b5a4dc50414fc380e2d2d66401082d3</code></li>\n<li>blue <code>d0554827144fae7e578edb545d07e8e43bd17b74</code></li>\n<li>red <code>f2d7ff860c04b80fb4f9b6cba5304d0ca0a6816f</code></li>\n</ol>\n\n<p>To help further we need to see all the trees on github, those from base and those originating sanitized tree and review those commits. I would verify in the history that those commits do not exist.</p>\n"}], "owner": {"reputation": 3479, "user_id": 1639575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L9ukx.jpg?s=128&g=1", "display_name": "Dudo", "link": "https://stackoverflow.com/users/1639575/dudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1556898169, "creation_date": 1555876940, "last_edit_date": 1556898169, "question_id": 55786299, "link": "https://stackoverflow.com/questions/55786299/delete-multiple-files-from-github-api", "title": "Delete multiple files from GitHub API", "body": "<p>I'm trying to delete multiple files from a few subdirectories using octokit.rb - to be clear, what I\u2019m really trying to do is just delete some subdirectories in their entirety. If there\u2019s a better way to do that (in one commit) please point me in the right direction. I have a working example of this when CREATING the 'foo' directory, and its files, but DELETING the directory is giving me problems. Here's my code, using octokit:</p>\n\n<pre><code>client = Octokit::Client.new(...)\nrepo = 'dudo/k8s_colors'\nnamespace = 'foo'\n\nref = 'heads/master'\nsha_latest_commit = client.ref(repo, ref).object.sha\n\nsha_base_tree = client.commit(repo, sha_latest_commit).commit.tree.sha\nbase_tree = client.tree(repo, sha_base_tree, recursive: true)\nclean_tree = base_tree.tree.select { |o| o.type == 'blob' &amp;&amp; !o.path.include?(\"overlays/#{namespace}\") }\n                           .map { |o| o.to_h.slice(:path, :mode, :type, :sha) }\nsha_new_tree = client.create_tree(repo, clean_tree).sha # TODO: this doesn't work\n</code></pre>\n\n<p>This call to <code>create_tree</code> doesn't produce the tree I'm expecting, though.</p>\n\n<pre><code>&gt; base_tree\n\n{:sha=&gt;\"2c89f29eab56c8f53bcbb5649bb326433e439629\",\n :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/2c89f29eab56c8f53bcbb5649bb326433e439629\",\n :tree=&gt;\n  [{:path=&gt;\".gitignore\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"f494b1b6ae2590ef5998845626566708ec9e2908\", :size=&gt;15, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/f494b1b6ae2590ef5998845626566708ec9e2908\"},\n   {:path=&gt;\"blue\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"ac10637c3435b466ef29ddc5c0f40f047f1b7e92\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/ac10637c3435b466ef29ddc5c0f40f047f1b7e92\"},\n   {:path=&gt;\"blue/base\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"4996aaefbf8099595515907a8e80dd266638afcc\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/4996aaefbf8099595515907a8e80dd266638afcc\"},\n   {:path=&gt;\"blue/base/deployment.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"770bdc76ea5a29ba7e5219cd9cedfa7333adb084\", :size=&gt;512, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/770bdc76ea5a29ba7e5219cd9cedfa7333adb084\"},\n   {:path=&gt;\"blue/base/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"f2e9e9babb19978ec3dc3e10e71a2b3cbd80840f\", :size=&gt;292, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/f2e9e9babb19978ec3dc3e10e71a2b3cbd80840f\"},\n   {:path=&gt;\"blue/base/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"80a9ccdb3a395395b58fa462b2b4d0339665862e\", :size=&gt;122, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/80a9ccdb3a395395b58fa462b2b4d0339665862e\"},\n   {:path=&gt;\"blue/overlays\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"34e882c2a2b76ef926bfe179aaba688e2956ff12\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/34e882c2a2b76ef926bfe179aaba688e2956ff12\"},\n   {:path=&gt;\"blue/overlays/foo\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"aa9a92503f622aa6d61c74a63dda655a3afe0bf8\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/aa9a92503f622aa6d61c74a63dda655a3afe0bf8\"},\n   {:path=&gt;\"blue/overlays/foo/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"2245b69ea811665de2bea620db394d69fe41f768\", :size=&gt;311, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/2245b69ea811665de2bea620db394d69fe41f768\"},\n   {:path=&gt;\"blue/overlays/foo/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"af1742cdd917b7207377874ba34263a782fce673\", :size=&gt;147, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/af1742cdd917b7207377874ba34263a782fce673\"},\n   {:path=&gt;\"red\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"a8442ac6ab5be147f5452aa4a94061b81b0dc32b\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/a8442ac6ab5be147f5452aa4a94061b81b0dc32b\"},\n   {:path=&gt;\"red/base\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"9374bbaec9f3ca88bfc4dcbdee421d8edecd9d73\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/9374bbaec9f3ca88bfc4dcbdee421d8edecd9d73\"},\n   {:path=&gt;\"red/base/deployment.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"3a8d2448475d851e851dff1fc36d1bb443c8acea\", :size=&gt;507, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/3a8d2448475d851e851dff1fc36d1bb443c8acea\"},\n   {:path=&gt;\"red/base/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"b9322cc79212813285b93467e15aa5aea08eb442\", :size=&gt;289, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/b9322cc79212813285b93467e15aa5aea08eb442\"},\n   {:path=&gt;\"red/base/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"5113689b6a1c1aca2b36a3c513d9c143e8ae12e0\", :size=&gt;120, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/5113689b6a1c1aca2b36a3c513d9c143e8ae12e0\"},\n   {:path=&gt;\"red/overlays\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"a4f8d5b81643b26684f7db7af17bf5d2d95c3c1b\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/a4f8d5b81643b26684f7db7af17bf5d2d95c3c1b\"},\n   {:path=&gt;\"red/overlays/foo\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"bccf70cc1e84f1724116644ee8c82cf4ab734834\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/bccf70cc1e84f1724116644ee8c82cf4ab734834\"},\n   {:path=&gt;\"red/overlays/foo/deployment.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"3e050646dd49721b3d701929c0a89db831ebea14\", :size=&gt;524, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/3e050646dd49721b3d701929c0a89db831ebea14\"},\n   {:path=&gt;\"red/overlays/foo/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"840d45bb3c5c6c81a1ac71d82ee49d348653ffc7\", :size=&gt;308, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/840d45bb3c5c6c81a1ac71d82ee49d348653ffc7\"},\n   {:path=&gt;\"red/overlays/foo/namespace.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"9eb7d29d67093ec524dcea1b32f3eeb7c2cecc81\", :size=&gt;57, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/9eb7d29d67093ec524dcea1b32f3eeb7c2cecc81\"},\n   {:path=&gt;\"red/overlays/foo/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"43d2053a6f237d643036499fa7b01d7b01fc2111\", :size=&gt;142, :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/blobs/43d2053a6f237d643036499fa7b01d7b01fc2111\"}],\n :truncated=&gt;false}\n\n\n&gt; clean_tree\n\n[\n  {:path=&gt;\".gitignore\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"f494b1b6ae2590ef5998845626566708ec9e2908\"}, \n  {:path=&gt;\"blue/base/deployment.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"770bdc76ea5a29ba7e5219cd9cedfa7333adb084\"}, \n  {:path=&gt;\"blue/base/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"f2e9e9babb19978ec3dc3e10e71a2b3cbd80840f\"}, \n  {:path=&gt;\"blue/base/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"80a9ccdb3a395395b58fa462b2b4d0339665862e\"}, \n  {:path=&gt;\"red/base/deployment.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"3a8d2448475d851e851dff1fc36d1bb443c8acea\"}, \n  {:path=&gt;\"red/base/ingress.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"b9322cc79212813285b93467e15aa5aea08eb442\"}, \n  {:path=&gt;\"red/base/service.yaml\", :mode=&gt;\"100644\", :type=&gt;\"blob\", :sha=&gt;\"5113689b6a1c1aca2b36a3c513d9c143e8ae12e0\"}\n]\n\n\n&gt; client.create_tree(repo, clean_tree)\n\n{:sha=&gt;\"2a8800e18b5a4dc50414fc380e2d2d66401082d3\",\n :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/2a8800e18b5a4dc50414fc380e2d2d66401082d3\",\n :tree=&gt;\n  [{:path=&gt;\"blue\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"d0554827144fae7e578edb545d07e8e43bd17b74\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/d0554827144fae7e578edb545d07e8e43bd17b74\"},\n   {:path=&gt;\"red\", :mode=&gt;\"040000\", :type=&gt;\"tree\", :sha=&gt;\"f2d7ff860c04b80fb4f9b6cba5304d0ca0a6816f\", :url=&gt;\"https://api.github.com/repos/dudo/k8s_colors/git/trees/f2d7ff860c04b80fb4f9b6cba5304d0ca0a6816f\"}],\n :truncated=&gt;false}\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "runtime-error", "runtime", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1555873491, "post_id": 55783473, "comment_id": 98242282, "body": "Support for anything &lt; Ruby 2.2 <a href=\"https://github.com/rubygems/rubygems/pull/2182\" rel=\"nofollow noreferrer\">was removed</a> in Rubygems 3.0. Thus, the currently latest version of Rubygems still supporting Ruby 1.9.3 is Rubygems 2.7.9. In any case, it&#39;s probably a good idea to upgrade to a newer Ruby which then also receives security updates. Ruby 1.9.3 should be obsolete now."}, {"owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "edited": false, "score": 0, "creation_date": 1557743481, "post_id": 55783473, "comment_id": 98854643, "body": "I&#39;ve the same problem on OSX Mojave. How I can specify to install ruby 1.9.3 by RVM downloading and installing an older version of rubygems? It&#39;s seems that RVM download, extract and install rubygems 3 automatically trying to delete every older version could be present"}], "tags": [], "owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "is_accepted": true, "score": 3, "last_activity_date": 1555855812, "creation_date": 1555855812, "answer_id": 55783473, "question_id": 55782909, "link": "https://stackoverflow.com/questions/55782909/unable-to-install-ruby-gems-3-0-3/55783473#55783473", "title": "Unable to install Ruby Gems 3.0.3", "body": "<p><a href=\"https://www.ruby-lang.org/en/downloads/releases/\" rel=\"nofollow noreferrer\">Ruby 1.9.3-p551</a> was released in November 2014, it's possible that compatibility has been broken at this point with the latest rubygems.</p>\n\n<p>Try installing older versions of <a href=\"https://rubygems.org/gems/rubygems-update/versions\" rel=\"nofollow noreferrer\">rubygems</a>, I would start with <code>2.4.4</code> because it aligns well with the release of Ruby 1.9.3 but I would also try upgrading to anything <code>2.X</code> cause one should expect support to last a few years.</p>\n\n<p>The project's <a href=\"https://github.com/rubygems/rubygems/blob/edf1dbd5b1ecf0cc55e06f59fa1007b4f55ef612/History.txt#L293\" rel=\"nofollow noreferrer\">changelog</a> does mention removal of compatibility code for 1.9.2.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12977927, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gjrjmz84QpP8yXUXk5d4o57ZTkn8o9xA3iZjwcP=k-s128", "display_name": "akash Punna", "link": "https://stackoverflow.com/users/12977927/akash-punna"}, "is_accepted": false, "score": 2, "last_activity_date": 1582877065, "last_edit_date": 1582877065, "creation_date": 1582876538, "answer_id": 60447438, "question_id": 55782909, "link": "https://stackoverflow.com/questions/55782909/unable-to-install-ruby-gems-3-0-3/60447438#60447438", "title": "Unable to install Ruby Gems 3.0.3", "body": "<p>Was running on same issue. You need to change the ruby gem version to 2.7.3 default its taking 3.0.8</p>\n\n<ul>\n<li>rvm_rubygems_version=2.7.3 rvm reinstall ruby-1.9.3</li>\n</ul>\n\n<p>It worked for me</p>\n"}, {"tags": [], "owner": {"reputation": 2655, "user_id": 1633753, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b8dc4b76792ff3c8cd993aa4c9c467f6?s=128&d=identicon&r=PG", "display_name": "Isaac Betesh", "link": "https://stackoverflow.com/users/1633753/isaac-betesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1591758402, "creation_date": 1591758402, "answer_id": 62295168, "question_id": 55782909, "link": "https://stackoverflow.com/questions/55782909/unable-to-install-ruby-gems-3-0-3/62295168#62295168", "title": "Unable to install Ruby Gems 3.0.3", "body": "<p>What worked for me was downgrading to an older version of rvm.</p>\n\n<pre><code>curl -sSL https://get.rvm.io | bash -s 1.28.0\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11110303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900bf3c6d9b5e2ffe2098379a7ffe7f4?s=128&d=identicon&r=PG&f=1", "display_name": "JoeMarshall", "link": "https://stackoverflow.com/users/11110303/joemarshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1562, "favorite_count": 2, "accepted_answer_id": 55783473, "answer_count": 3, "score": 3, "last_activity_date": 1591758402, "creation_date": 1555851275, "question_id": 55782909, "link": "https://stackoverflow.com/questions/55782909/unable-to-install-ruby-gems-3-0-3", "title": "Unable to install Ruby Gems 3.0.3", "body": "<p>I am trying to re-install Ruby 1.9.3 on a Raspberry Pi via RVM due to a dependency error by Logstash and getting the below error. Anyone else had a similar issue: </p>\n\n<pre><code>ruby-1.9.3-p551 - #downloading ruby-1.9.3-p551, this may take a while depending on your connection...\nruby-1.9.3-p551 - #extracting ruby-1.9.3-p551 to /home/pi/.rvm/src/ruby-1.9.3-p551.....\nruby-1.9.3-p551 - #applying patch /home/pi/.rvm/patches/ruby/GH-488.patch.\nruby-1.9.3-p551 - #applying patch /home/pi/.rvm/patches/ruby/1.9.3/CVE-2015-1855-p484.patch.\nruby-1.9.3-p551 - #applying patch /home/pi/.rvm/patches/ruby/1.9.3/update-autoconf.patch.\nruby-1.9.3-p551 - #applying patch /home/pi/.rvm/patches/ruby/1.9.3/openssl3.patch.\nruby-1.9.3-p551 - #configuring..............................................\nruby-1.9.3-p551 - #post-configuration..\nruby-1.9.3-p551 - #compiling..........................................................................................................................................................................\nruby-1.9.3-p551 - #installing........................\nruby-1.9.3-p551 - #making binaries executable..\nruby-1.9.3-p551 - #downloading rubygems-3.0.3\nruby-1.9.3-p551 - #extracting rubygems-3.0.3......\nruby-1.9.3-p551 - #removing old rubygems........\nruby-1.9.3-p551 - #installing rubygems-3.0.3..\nError running 'env GEM_HOME=/home/pi/.rvm/gems/ruby-1.9.3-p551@global GEM_PATH= /home/pi/.rvm/rubies/ruby-1.9.3-p551/bin/ruby -d /home/pi/.rvm/src/rubygems-3.0.3/setup.rb --no-document',\nplease read /home/pi/.rvm/log/1555769993_ruby-1.9.3-p551/rubygems.install.log\n</code></pre>\n\n<p>Error in log file:</p>\n\n<pre><code>command(7): env GEM_HOME=/home/pi/.rvm/gems/ruby-1.9.3-p551@global GEM_PATH= /home/pi/.rvm/rubies/ruby-1.9.3-p551/bin/ruby -d /home/pi/.rvm/src/rubygems-3.0.3/setup.rb --no-document\nException `LoadError' at /home/pi/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/rubygems.rb:1264 - cannot load such file -- rubygems/defaults/operating_system\nException `LoadError' at /home/pi/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/rubygems.rb:1273 - cannot load such file -- rubygems/defaults/ruby\n/home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems/core_ext/kernel_require.rb:54:in `require': /home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems/core_ext/kernel_warn.rb:15: syntax error, unexpected tLABEL (SyntaxError)\n    module_function define_method(:warn) {|*messages, uplevel: nil|\n                                                              ^\n/home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems/core_ext/kernel_warn.rb:18: void value expression\n/home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems/core_ext/kernel_warn.rb:43: syntax error, unexpected '}', expecting keyword_end\n        from /home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/pi/.rvm/src/rubygems-3.0.3/lib/rubygems.rb:1395:in `&lt;top (required)&gt;'\n        from setup.rb:28:in `require'\n        from setup.rb:28:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any suggestions? I am not really familiar with Ruby or RVM so any help is appreciated.</p>\n"}, {"tags": ["ruby", "alias", "alias-method"], "comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1555858601, "post_id": 55782807, "comment_id": 98238417, "body": "<code>or</code> and <code>and</code> are banned by codestyle because of bugs. Please <a href=\"https://github.com/rubocop-hq/ruby-style-guide#no-and-or-or\" rel=\"nofollow noreferrer\">read about this</a>"}, {"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "edited": false, "score": 0, "creation_date": 1555880648, "post_id": 55782807, "comment_id": 98243987, "body": "Banned according to that style guide and because of subtle bugs that can be introduced by someone that doesn&#39;t know the difference. Doesn&#39;t mean you shouldn&#39;t use them if you like them."}], "answers": [{"tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1555852069, "creation_date": 1555852069, "answer_id": 55782996, "question_id": 55782807, "link": "https://stackoverflow.com/questions/55782807/add-alias-to-logical-operators/55782996#55782996", "title": "Add alias to logical operators", "body": "<p>Unfortunately, you can't do this.</p>\n\n<p>Ruby's infix operators like <code>and</code> and <code>or</code> are hard-coded as part of the language's syntax, so you can't define new infix operators like you can in Haskell or Kotlin.</p>\n\n<p>There are some <a href=\"https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby\">strange but interesting hacks</a> which allow you to achieve <em>similar</em> results, but parser constraints mean you can't do exactly what you're trying to achieve.</p>\n\n<p>Alternatively, you could just invoke <code>foo</code> without parentheses, which looks rather similar:</p>\n\n<pre><code>class_example_1.foo class_example_2\n</code></pre>\n\n<p>Or, since you've already overloaded the existing logical operators, just use those:</p>\n\n<pre><code>class_example_1 or class_example_2\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8583854, "user_type": "registered", "profile_image": "https://graph.facebook.com/740189706128813/picture?type=large", "display_name": "Egor  Pavlov", "link": "https://stackoverflow.com/users/8583854/egor-pavlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555852069, "creation_date": 1555850456, "last_edit_date": 1555851705, "question_id": 55782807, "link": "https://stackoverflow.com/questions/55782807/add-alias-to-logical-operators", "title": "Add alias to logical operators", "body": "<p>I have ruby project (without rails) and i want to add aliases to the logical AND and OR operators for my class. I have already overloaded logical operators for my class, but if I add <code>alias_method :foo, :or</code> and use like <code>class_example_1 foo class_example_2</code> I get SyntaxError.\nHow to make an alias to work?</p>\n"}, {"tags": ["ruby", "class"], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "is_accepted": true, "score": 1, "last_activity_date": 1555857800, "creation_date": 1555857800, "answer_id": 55783730, "question_id": 55782790, "link": "https://stackoverflow.com/questions/55782790/is-it-possible-to-place-all-variables-and-methods-inside-of-a-class/55783730#55783730", "title": "Is it possible to place all Variables and Methods inside of a Class?", "body": "<p>Welcome to Stack Overflow and the Ruby community!</p>\n\n<blockquote>\n  <p>Is there a better way of doing this?</p>\n</blockquote>\n\n<p>When it comes to programming there is always other ways of doing things, sometimes considered better, sometimes worse, it depends on case by case basis. It's good to learn what is considered best practices and practice them until it becomes your default way of coding. As many things in life take best practices as guidelines as opposed to rules.</p>\n\n<p>In your case everything was fine until you wanted to import the code to reuse it in another project, so the abstraction you chose is not working anymore, this happens and it's fine, it's time to refactor it!</p>\n\n<p>Looking at your code at this moment, the question class is just a glorified data structure, you could achieve something similar with a hash <code>{ prompt: '', answer: ''}</code> meaning your class has the data portion but no logic portion, my first suggestion is to move the answer checking logic to a method in the Question class.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Question\n  attr_reader :prompt, :correct_answer\n\n  def initialize(prompt, correct_answer)\n    @prompt = prompt\n    @correct_answer = correct_answer\n  end\n\n  def score(answer)\n    return 1 if answer == @correct_answer\n    return 0\n  end\nend\n</code></pre>\n\n<p>The benefit of this approach is that eventually you may decide to do things like \"this question is worth 2 points\", \"when the user inputs <code>(several spaces)c(several spaces)</code> I want to treat as just <code>c</code>\" and this would be the place to implement that logic.</p>\n\n<p>The next thing you can consider doing is introducing a new class, the one that represents a Test/Quiz/Exam. That class is responsible for doing the logic that you implemented in <code>run_test</code>. With that you should be able to import and reuse your code. When writing down this class, think about the possible things you can do with a test, can you \"start it\", \"end it\", \"answer question\", \"go to next question\" and so on. </p>\n\n<p>It's very common in programming to avoid coupling IO and your code, IO in this case it's the <code>puts question.prompt</code> and the <code>answer = gets.chomp()</code>.</p>\n\n<p>One could expect the following API to work but it really depends on your preference and what you are trying to achieve:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def run_test(quiz)\n  quiz.questions.each do |question|\n    puts question.prompt\n    answer = gets.chomp()\n    quiz.answer(question, answer)\n  end\n  puts (\"You got #{quiz.score} / #{quiz.maximum_score}\")\nend\n</code></pre>\n\n<p>You see with this approach the main focus of the code is looping through questions and proving IO, if you were building a web page you could still use the Quiz and Question class, what would change is how you prompt the question and how you obtain the answer. What you hid from the consumers of your class is how you score the test, what's the maximum score, what's the person current score?</p>\n\n<p>Other things in my mind when I drafted this code:\n- should I have a <code>start</code> method that resets the score to 0?\n- should I hide questions behind a <code>next_question</code> method, this way I can return <code>nil</code> if no more questions are left, with the current approach one could answer the quiz multiple times by running <code>run_test</code> multiple times and getting all the added score \"You got 23 / 10\".</p>\n\n<p>I hope this gives you ideas of what you could do next.</p>\n"}], "owner": {"reputation": 35, "user_id": 11352134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd52659b0000719235b350e301c98d0a?s=128&d=identicon&r=PG&f=1", "display_name": "runikom90", "link": "https://stackoverflow.com/users/11352134/runikom90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 55783730, "answer_count": 1, "score": 0, "last_activity_date": 1555857800, "creation_date": 1555850291, "question_id": 55782790, "link": "https://stackoverflow.com/questions/55782790/is-it-possible-to-place-all-variables-and-methods-inside-of-a-class", "title": "Is it possible to place all Variables and Methods inside of a Class?", "body": "<p>Sorry for the beginner question. I followed a quick tutorial to make a Ruby Quiz, which I'll explain.</p>\n\n<p>I created a class as below:</p>\n\n<pre><code>class Question\n    attr_accessor :prompt, :answer\n\n    def initialize(prompt, answer)\n        @prompt = prompt\n        @answer = answer\n    end\nend\n</code></pre>\n\n<p>I then created a variable as the question:</p>\n\n<pre><code>p1 = \"What color is an apple?\\n(a)red\\n(b)orange\\n(c)yellow\"\n</code></pre>\n\n<p>Then an array to store the question and assign an answer:</p>\n\n<pre><code>questions = Question.new(p1, \"a\")\n</code></pre>\n\n<p>Below that a method:</p>\n\n<pre><code>def run_test(questions)\n    answer = \"\"\n    score = 0\n    for question in questions\n        puts question.prompt\n        answer = gets.chomp()\n        if answer == question.answer\n            score += 1\n        end\n    end\n    puts (\"You got \" + score.to_s + \"/\" + questions.length().to_s)\nend\n</code></pre>\n\n<p>Now, I want to modularize a bit so the Question class contains the variable/question, array/answer and method so that I can refer to it from another file (like a main app file). Is it possible to place all these elements into the class so that I can refer to it from another file (main app)?</p>\n\n<p>Is there a better way of doing this? I tried not having everything in the class but different elements were not accessible from another file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fastjsonapi"], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 2, "creation_date": 1555847353, "post_id": 55782259, "comment_id": 98235776, "body": "The default behavior is indeed to show just id and type, however, as per their documentation, by using the options hash with the include property, I should get the team name and the team color.  Link to documentation: <a href=\"https://github.com/Netflix/fast_jsonapi#compound-document\" rel=\"nofollow noreferrer\">github.com/Netflix/fast_jsonapi#compound-document</a>"}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "reply_to_user": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 1, "creation_date": 1555855270, "post_id": 55782259, "comment_id": 98237557, "body": "I&#39;ve attached screenshot to visualize it"}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "reply_to_user": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 2, "creation_date": 1555856025, "post_id": 55782259, "comment_id": 98237736, "body": "also you should use <code>options[:include] = [:team, :&#39;team.name&#39;, :&#39;team.color&#39;]</code> in a bit other way: <code>options = { include: [:team], fields: { team: [:name, :color] } }</code>   Or create separate TeamSerializer and use it: <code>options = { include: [:team] }</code> and in ShiftSerializer: <code>belongs_to :team, serializer: TeamSerializer</code>"}, {"owner": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 1, "creation_date": 1555858331, "post_id": 55782259, "comment_id": 98238333, "body": "I followed what the documentation said (literally copy-paste) and it&#39;s not working. WIll give a go to the other way you mentioned. I already have a team serializer created that I use for the teams endpoint. Will keep you posted.  Cheers!"}, {"owner": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 1, "creation_date": 1555877841, "post_id": 55782259, "comment_id": 98243361, "body": "Tried the second approach as well and I&#39;m still getting the same outcome. I find it pretty weird as I&#39;m literally taking the code from the documentation they have"}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "reply_to_user": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "edited": false, "score": 0, "creation_date": 1556120735, "post_id": 55782259, "comment_id": 98332438, "body": "Hey, sorry for late reply. Have you figure out the problem?"}], "tags": [], "owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "is_accepted": false, "score": 4, "last_activity_date": 1555855182, "last_edit_date": 1555855182, "creation_date": 1555845779, "answer_id": 55782259, "question_id": 55782066, "link": "https://stackoverflow.com/questions/55782066/how-to-get-the-fast-jsonapi-to-return-the-attributes-of-the-relationships/55782259#55782259", "title": "How to get the fast_jsonapi to return the attributes of the relationships", "body": "<p>fast_jsonapi implements <a href=\"https://jsonapi.org/\" rel=\"nofollow noreferrer\">json api specification</a> so respond includes \"included\" key, where serialized data for relationships placed.That's default behavior</p>\n\n<p><a href=\"https://i.stack.imgur.com/RkF8k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RkF8k.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12653156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c28645b71d9eef661ea296b310fb6b?s=128&d=identicon&r=PG&f=1", "display_name": "David Metta", "link": "https://stackoverflow.com/users/12653156/david-metta"}, "is_accepted": false, "score": 0, "last_activity_date": 1579761907, "creation_date": 1579761907, "answer_id": 59872921, "question_id": 55782066, "link": "https://stackoverflow.com/questions/55782066/how-to-get-the-fast-jsonapi-to-return-the-attributes-of-the-relationships/59872921#59872921", "title": "How to get the fast_jsonapi to return the attributes of the relationships", "body": "<p>If you use the <code>options[:include]</code> you should create a serializer for the included model, and customize what is included in the response there.</p>\n\n<p>in your case if you use</p>\n\n<pre><code>ShiftSerializer.new(shifts, include: [:team]).serializable_hash\n</code></pre>\n\n<p>you should create a new serializer  <code>serializers/team_serializer.rb</code></p>\n\n<pre><code>class TeamSerializer\n  include FastJsonapi::ObjectSerializer\n\n  attributes :name, :color\nend\n</code></pre>\n\n<p>this way your response will be</p>\n\n<pre><code>{\n  data: [\n    {\n      id: 1,\n      type: \"shift\",\n      relationships: {\n        team: {\n          data: {\n            id: \"22\",\n            type: \"Team\"\n          }\n        }\n      }\n    }\n  ],\n  included: [\n    id: 22,\n    type: \"Team\",\n    attributes: {\n       name: \"example\",\n       color: \"red\"\n    }\n  ]\n}\n</code></pre>\n\n<p>and you will find the custom data of your association in the response <code>\"included\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 12288988, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yOLf82vDW_U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5ZGLwZoQAP5QGmk0vg5jYo9qXjg/photo.jpg?sz=128", "display_name": "nirav kanani", "link": "https://stackoverflow.com/users/12288988/nirav-kanani"}, "is_accepted": false, "score": 0, "last_activity_date": 1588924841, "creation_date": 1588924841, "answer_id": 61674666, "question_id": 55782066, "link": "https://stackoverflow.com/questions/55782066/how-to-get-the-fast-jsonapi-to-return-the-attributes-of-the-relationships/61674666#61674666", "title": "How to get the fast_jsonapi to return the attributes of the relationships", "body": "<p>If you use like this then maybe solve your problem</p>\n\n<pre><code>class Shift &lt; ApplicationRecord\n    belongs_to :team, optional:true\n    accepts_nested_attributes_for :team\nend \n</code></pre>\n\n<blockquote>\n  <p>In your ShiftSerializer.rb please write this code,</p>\n</blockquote>\n\n<pre><code>attribute :team do |object|\n    object.team.as_json\nend\n</code></pre>\n\n<blockquote>\n  <p>And you will get custom data that you want.</p>\n</blockquote>\n\n<p>Reference: <a href=\"https://github.com/Netflix/fast_jsonapi/issues/160#issuecomment-379727174\" rel=\"nofollow noreferrer\">https://github.com/Netflix/fast_jsonapi/issues/160#issuecomment-379727174</a> </p>\n"}], "owner": {"reputation": 357, "user_id": 5895099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-hQxPXyUIfrs/AAAAAAAAAAI/AAAAAAAAHcA/uQo7eHJ-Dpk/photo.jpg?sz=128", "display_name": "ilrock", "link": "https://stackoverflow.com/users/5895099/ilrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6590, "favorite_count": 2, "answer_count": 3, "score": 7, "last_activity_date": 1588924841, "creation_date": 1555843790, "question_id": 55782066, "link": "https://stackoverflow.com/questions/55782066/how-to-get-the-fast-jsonapi-to-return-the-attributes-of-the-relationships", "title": "How to get the fast_jsonapi to return the attributes of the relationships", "body": "<p>I have a rails api with a number of models that are being serialized by the fast_jsonapi gem.</p>\n\n<p>This is what my models look like:</p>\n\n<pre><code>class Shift &lt; ApplicationRecord\n  belongs_to :team, optional: true\n  ...\n</code></pre>\n\n<pre><code>class Team &lt; ApplicationRecord\n  has_many :shifts\n  ...\n</code></pre>\n\n<p>This is what the serializer looks like</p>\n\n<pre><code>class ShiftSerializer\n  include FastJsonapi::ObjectSerializer\n  ...\n  belongs_to :team\n  ...\nend\n</code></pre>\n\n<p>The serialization works. However, even though I am including the compound team document:</p>\n\n<pre><code>def index\n  shifts = policy_scope(Shift).includes(:team)\n  options = {}\n  options[:include] = [:team, :'team.name', :'team.color']\n  render json: ShiftSerializer.new(shifts, options)\nend\n</code></pre>\n\n<p>I'm still getting the object formatted like so:</p>\n\n<pre><code>...\nrelationships: {\n  team: {\n    data: {\n      id: \"22\",\n      type: \"Team\"\n    }\n  }\n}\n</code></pre>\n\n<p>Whereas I'm expecting to get also the attributes of my team model.</p>\n"}, {"tags": ["regex", "ruby", "collections", "prefix"], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "edited": false, "score": 0, "creation_date": 1555845868, "post_id": 55782096, "comment_id": 98235506, "body": "thank you for your answer. my path list is not from input by the user, but I was hoping to get the efficiency of the set, the same as I would&#39;ve got if I used the full path. joining the set to one big string won&#39;t help me because the original code holds a very big set"}, {"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "reply_to_user": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "edited": false, "score": 0, "creation_date": 1555846216, "post_id": 55782096, "comment_id": 98235565, "body": "What about the first solution?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1555848795, "post_id": 55782096, "comment_id": 98236081, "body": "<code>start_with</code> takes multiple arguments: <code>fd.start_with (&#39;A&#47;B&#47;C&#39;, &#39;A&#47;D&#47;E&#39;, &#39;A&#47;F&#47;G&#39;)</code>"}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 2, "last_activity_date": 1555861484, "last_edit_date": 1555861484, "creation_date": 1555844085, "answer_id": 55782096, "question_id": 55782005, "link": "https://stackoverflow.com/questions/55782005/how-to-find-if-prefix-is-a-match-to-some-string-in-a-set-in-ruby/55782096#55782096", "title": "how to find if prefix is a match to some string in a set in Ruby?", "body": "<p>If these are only the prefix, try <code>String#start_with?</code>:</p>\n\n<pre><code>require 'set'\n\nlegal_paths = Set['A/B/C', 'A/D/E', 'A/F/G']\nfiles = Dir.glob('**/system.log').select do |fd|\n  fd.start_with?(*legal_paths)\nend\n</code></pre>\n\n<p>Why not make use of the fact that you can specify these prefixes in the glob?</p>\n\n<pre><code>legal_paths = ['A/B/C', 'A/D/E', 'A/F/G']\nfiles = Dir.glob(\"{#{legal_paths.join(',')}}/**/system.log\")\n</code></pre>\n\n<p>Note though that if the <code>legal_paths</code> are input by the user, the above might not be secure as the user could traverse to parent directories using <code>..</code>.</p>\n"}], "owner": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 55782096, "answer_count": 1, "score": 0, "last_activity_date": 1555861484, "creation_date": 1555843277, "question_id": 55782005, "link": "https://stackoverflow.com/questions/55782005/how-to-find-if-prefix-is-a-match-to-some-string-in-a-set-in-ruby", "title": "how to find if prefix is a match to some string in a set in Ruby?", "body": "<p>I am trying to go through a predefined dir path set but I only have the prefix of the path</p>\n\n<p>I have tried use include? or find a method that does that.\nI can only think about the trivial solution of define a regexp and go for each in the set, but that seems to be not so ruby-like style</p>\n\n<pre><code>require 'set'\n\nlegal_paths = Set['A/B/C', 'A/D/E', 'A/F/G']\nDir.glob('**/system.log').each do |fd|\n    if failed_tests_path.include?(fd) #fd for example = A/F/G/E/system.log, A/B/C/K/system.log etc...\n        puts fd\n    end\nend\n</code></pre>\n\n<p>I want fd to be only system.log files that the paths are including inside the set (the set holds the prefix to the path)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imgkit"], "answers": [{"comments": [{"owner": {"reputation": 824, "user_id": 5610600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Szyb3uK2uU8/AAAAAAAAAAI/AAAAAAAAAJE/XuBsiUUU61c/photo.jpg?sz=128", "display_name": "Jem Built", "link": "https://stackoverflow.com/users/5610600/jem-built"}, "edited": false, "score": 1, "creation_date": 1555892134, "post_id": 55782025, "comment_id": 98245985, "body": "hi @fphilipe thank you so much for the answer... good spotting... I really appreciate you taking the time"}, {"owner": {"reputation": 150, "user_id": 3310616, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nPE9J.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/3310616/sunny"}, "reply_to_user": {"reputation": 824, "user_id": 5610600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Szyb3uK2uU8/AAAAAAAAAAI/AAAAAAAAAJE/XuBsiUUU61c/photo.jpg?sz=128", "display_name": "Jem Built", "link": "https://stackoverflow.com/users/5610600/jem-built"}, "edited": false, "score": 0, "creation_date": 1574533177, "post_id": 55782025, "comment_id": 104269436, "body": "@JoeBloggs Does this implementation still work? I tried this but getting a blank white image."}, {"owner": {"reputation": 824, "user_id": 5610600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Szyb3uK2uU8/AAAAAAAAAAI/AAAAAAAAAJE/XuBsiUUU61c/photo.jpg?sz=128", "display_name": "Jem Built", "link": "https://stackoverflow.com/users/5610600/jem-built"}, "reply_to_user": {"reputation": 150, "user_id": 3310616, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nPE9J.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/3310616/sunny"}, "edited": false, "score": 0, "creation_date": 1575102722, "post_id": 55782025, "comment_id": 104459510, "body": "@sunny its been ahile since i played with this app. why dont you explain your problem a little more, I sure its a typo somewhere and with some delving we can get to the bottom of it"}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 2, "last_activity_date": 1555865584, "last_edit_date": 1555865584, "creation_date": 1555843408, "answer_id": 55782025, "question_id": 55780413, "link": "https://stackoverflow.com/questions/55780413/imgkit-gem-not-working-on-heroku-in-rails-application/55782025#55782025", "title": "imgkit gem not working on heroku in rails application", "body": "<p>You have added the binary at <code>app/bin/wkhtmltoimage-amd64</code>, but you're specifying <code>Rails.root.join('bin', 'wkhtmltoimage-amd64')</code>, which is <code>bin/wkhtmltoimage-amd64</code>.</p>\n\n<p>Either</p>\n\n<ul>\n<li>move the binary to <code>bin/wkhtmltoimage-amd64</code>, or</li>\n<li>change <code>Rails.root.join('bin', 'wkhtmltoimage-amd64')</code> to <code>Rails.root.join('app', 'bin', 'wkhtmltoimage-amd64')</code>.</li>\n</ul>\n\n<p>I'd recommend the first option as it is more typical to have binaries at the root in <code>bin/</code>.</p>\n"}], "owner": {"reputation": 824, "user_id": 5610600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Szyb3uK2uU8/AAAAAAAAAAI/AAAAAAAAAJE/XuBsiUUU61c/photo.jpg?sz=128", "display_name": "Jem Built", "link": "https://stackoverflow.com/users/5610600/jem-built"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 2, "accepted_answer_id": 55782025, "answer_count": 1, "score": 1, "last_activity_date": 1555891907, "creation_date": 1555827767, "last_edit_date": 1555891907, "question_id": 55780413, "link": "https://stackoverflow.com/questions/55780413/imgkit-gem-not-working-on-heroku-in-rails-application", "title": "imgkit gem not working on heroku in rails application", "body": "<p>Hi I have a little application that is using imgkit to generate a png from some text. Every quote in my quote model uses imgkit to create a png version</p>\n\n<p>app/controllers/quotes_controller.rb</p>\n\n<pre><code>def show\n    respond_to do |format|\n      format .html\n      format.png do\n        kit = IMGKit.new render_to_string, width: 1080, height: 1080\n        send_data kit.to_png, type: \"image/png\", disposition: \"inline\"\n      end\n    end\n  end \n</code></pre>\n\n<p>It works well on my local machine but when i upload to heroku imgkit stops working.</p>\n\n<p>I tried adding the binaries to the gem file as below:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.6.0'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.3'\n# Use postgresql as the database for Active Record\ngem 'pg', '&gt;= 0.18', '&lt; 2.0'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'mini_racer', platforms: :ruby\ngem 'bootstrap'\ngem 'jquery-rails'\ngem 'imgkit'\ngem 'wkhtmltoimage-binary'\ngem 'devise'\ngem \"font-awesome-rails\"\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.1.0', require: false\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem \"better_errors\"\n  gem \"binding_of_caller\"\nend\n\ngroup :development do\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15'\n  gem 'selenium-webdriver'\n  # Easy installation and use of chromedriver to run system tests with Chrome\n  gem 'chromedriver-helper'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Unfortunately this didn't work.</p>\n\n<p>I then followed the instructions at <a href=\"https://github.com/csquared/IMGKit#heroku\" rel=\"nofollow noreferrer\">https://github.com/csquared/IMGKit#heroku</a></p>\n\n<p>and downloaded the 10.0 version mentioned from <a href=\"https://github.com/wkhtmltopdf/obsolete-downloads/blob/master/README.md#linux\" rel=\"nofollow noreferrer\">https://github.com/wkhtmltopdf/obsolete-downloads/blob/master/README.md#linux</a></p>\n\n<p>I added the file to bin/wkhtmltoimage-amd64 and I added the file config/initializers/imgkit.rb</p>\n\n<p>with the following code to that file</p>\n\n<pre><code>IMGKit.configure do |config|\n  config.wkhtmltoimage = Rails.root.join('bin', 'wkhtmltoimage-amd64').to_s if ENV['RACK_ENV'] == 'production'\nend\n</code></pre>\n\n<p>I tested and found it didnt work and I keep getting the </p>\n\n<p><code>IMGKit::NoExecutableError (No wkhtmltoimage executable found at /app/bin/wkhtmltoimage-amd64</code></p>\n\n<p>can anyone point me in the right direction, please let me know if you need any more info</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11389767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q92aXvfLNcU/AAAAAAAAAAI/AAAAAAAAAi8/FWp--0Q4Pqk/photo.jpg?sz=128", "display_name": "Lautaro urtiaga", "link": "https://stackoverflow.com/users/11389767/lautaro-urtiaga"}, "edited": false, "score": 0, "creation_date": 1555821229, "post_id": 55779887, "comment_id": 98231132, "body": "That would define a method in Class singleton_class, i want to redefine a method in a Class instance singleton_class."}], "tags": [], "owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "is_accepted": false, "score": 0, "last_activity_date": 1555820926, "creation_date": 1555820926, "answer_id": 55779887, "question_id": 55779726, "link": "https://stackoverflow.com/questions/55779726/redefining-a-singleton-class-method-to-behave-exactly-as-it-was-behaving-before/55779887#55779887", "title": "Redefining a singleton_class method to behave exactly as it was behaving before but also do something else", "body": "<p>Change change <code>addHelloToSingletonClassMethod</code> to <code>self.addHelloToSingletonClassMethod</code>. It should be a class method.</p>\n"}, {"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 1, "last_activity_date": 1555845766, "last_edit_date": 1555845766, "creation_date": 1555844983, "answer_id": 55782189, "question_id": 55779726, "link": "https://stackoverflow.com/questions/55779726/redefining-a-singleton-class-method-to-behave-exactly-as-it-was-behaving-before/55782189#55782189", "title": "Redefining a singleton_class method to behave exactly as it was behaving before but also do something else", "body": "<p>One way of doing this is to prepend an anonymous module that overrides the desired method, prints hello, and calls <code>super</code> to invoke the actual implementation.</p>\n\n<p>I'm not sure why you're adding this method to <code>Class</code>. Is your goal to call the <code>addHelloToSingletonClassMethod</code> on an instance of a class such as this?</p>\n\n<pre><code>irb&gt; s = \"foo\"\nirb&gt; s.addHelloToSingletonClassMethod(:upcase)\nirb&gt; s.upcase\nhello\n=&gt; \"FOO\"\n</code></pre>\n\n<p>If so, define the following on <code>Object</code>:</p>\n\n<pre><code>class Object\n   def addHelloToSingletonClassMethod(methodName)\n     mod = Module.new\n     mod.define_method(methodName) do |*args, &amp;blk|\n       puts \"hello\"\n       super(*args, &amp;blk)\n     end\n\n     singleton_class.prepend(mod)\n   end\nend\n</code></pre>\n\n<p>Or in more typical Ruby naming convention:</p>\n\n<pre><code>class Object\n  def add_hello_to_method(name)\n    mod = Module.new\n    mod.define_method(name) do |*args, &amp;blk|\n      puts \"hello\"\n      super(*args, &amp;blk)\n    end\n\n    singleton_class.prepend(mod)\n  end\nend\n</code></pre>\n\n<p>If your goal on the other hand is to be able to call it on a class as follows</p>\n\n<pre><code>irb&gt; String.addHelloToSingletonClassMethod(:upcase)\nirb&gt; \"foo\".upcase\nhello\n=&gt; \"FOO\"\n</code></pre>\n\n<p>then you want to define it on <code>Class</code>:</p>\n\n<pre><code>class Class\n  def add_hello_to_method(name)\n    mod = Module.new\n    mod.define_method(name) do |*args, &amp;blk|\n      puts \"hello\"\n      super(*args, &amp;blk)\n    end\n\n    prepend(mod)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11389767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q92aXvfLNcU/AAAAAAAAAAI/AAAAAAAAAi8/FWp--0Q4Pqk/photo.jpg?sz=128", "display_name": "Lautaro urtiaga", "link": "https://stackoverflow.com/users/11389767/lautaro-urtiaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55782189, "answer_count": 2, "score": 1, "last_activity_date": 1555845766, "creation_date": 1555818766, "question_id": 55779726, "link": "https://stackoverflow.com/questions/55779726/redefining-a-singleton-class-method-to-behave-exactly-as-it-was-behaving-before", "title": "Redefining a singleton_class method to behave exactly as it was behaving before but also do something else", "body": "<p>I want to change a singleton_class method of a certain class for it to do the same as it was doing before but also do something else, For example apart from what it was doing, to do: </p>\n\n<ul>\n<li>puts \"hello\" </li>\n</ul>\n\n<p>Ok, so i know how to redefine a normal method of a class to actually do the same as it was doing before but also do something else, it would be like this:</p>\n\n<pre><code>class Class\n   def addHelloToMethod(methodName)\n       unboundMethod = instance_method(methodName)\n\n       define_method(methodName) do |*args, &amp;block|\n\n          result =unboundMethod.bind(self).(*args, &amp;block)\n          puts \"hello\"\n          result\n      end\n   end\nend\n</code></pre>\n\n<p>What i need is to actually add this \"hello\" to a singleton_class method\nso i tried this:</p>\n\n<pre><code>class Class\n   def addHelloToSingletonClassMethod(methodName)\n       unboundMethod = singleton_class.instance_method(methodName)\n\n       singleton_class.define_method(methodName) do |*args, &amp;block|\n\n          result =unboundMethod.bind(self).(*args, &amp;block)\n          puts \"hello\"\n          result\n      end\n   end\nend\n</code></pre>\n\n<p>What am i doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "data-structures", "null"], "comments": [{"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "edited": false, "score": 0, "creation_date": 1555816441, "post_id": 55779401, "comment_id": 98230564, "body": "is artist an array why are you looping across artist"}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "edited": false, "score": 0, "creation_date": 1555860298, "post_id": 55779527, "comment_id": 98238880, "body": "Ok I think both the solutions above are getting a lot closer. If I run just a one liner, the names appear just fine: <code>search[&#39;relations&#39;].map { |r| r[&#39;artist&#39;] &amp;&amp; r[&#39;artist&#39;][&#39;name&#39;] }</code> But if I try to implement a wrapper with necessary protections like <code>r[&#39;artist&#39;].present?</code>, I still get errors."}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "reply_to_user": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "edited": false, "score": 0, "creation_date": 1555860715, "post_id": 55779527, "comment_id": 98238974, "body": "Can you update the answer with updated code and the error you are getting"}, {"owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "edited": false, "score": 0, "creation_date": 1555892169, "post_id": 55779527, "comment_id": 98245991, "body": "Ok yes I did in an EDIT above."}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "reply_to_user": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "edited": false, "score": 0, "creation_date": 1555909128, "post_id": 55779527, "comment_id": 98248465, "body": "are you getting <code>relations</code> object directly from response???(generally what ever the response you get will be response body not in response)"}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "reply_to_user": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "edited": false, "score": 0, "creation_date": 1555925234, "post_id": 55779527, "comment_id": 98253454, "body": "@demiansims updated my answer,please  check if it helps"}], "tags": [], "owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "is_accepted": false, "score": 0, "last_activity_date": 1555925277, "last_edit_date": 1555925277, "creation_date": 1555815936, "answer_id": 55779527, "question_id": 55779401, "link": "https://stackoverflow.com/questions/55779401/having-trouble-accessing-nested-data-and-nil-in-ruby-rails/55779527#55779527", "title": "Having trouble accessing nested data and Nil in Ruby/Rails", "body": "<p>You can use try method in rails try method returns nil is data doest not exist in the object refer to <a href=\"https://apidock.com/rails/v3.2.1/Object/try\" rel=\"nofollow noreferrer\">this</a> link for reference, If that does not work, use nil checks like <code>a.present?</code> or <code>a.blank?</code></p>\n\n<p>If you want to check nil then with the sample you provided and assuming that will be in array you can use</p>\n\n<pre><code>a.map { |r|  r['artist'] &amp;&amp; r['artist']['name'] } //a is array of object you specified\n</code></pre>\n\n<p>You are doing it wrong r['artist', 'name'] throws an error</p>\n\n<pre><code>  def song_details\nsearch = HTTParty.get(\"https://musicbrainz.org/ws/2/release/#{params[:songId]}?inc=artist-credits+artist-rels+media+recording-level-rels+url-rels+work-level-rels+recording-rels&amp;fmt=json\", {\n  headers: {\"User-Agent\" =&gt; \"Songly/ver 1.0\", \"Contact\" =&gt; \"demiansims@gmail.com\"}\n  })\n  search['relations'].present?\n    search['relations'].map do |r|\n      r['artist'].present?\n      artist = {\n        name: r.dig('artist', 'name'),\n        role: r['type'],\n        id: r.dig('artist', 'id'),\n        disambiguation: r.dig('artist', 'disambiguation'),\n        attributes: r['attributes'] &amp;&amp; r['attributes'].each { |a| a }\n      }\n  end\nartist\n</code></pre>\n\n<p>end</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1555822725, "creation_date": 1555822725, "answer_id": 55780013, "question_id": 55779401, "link": "https://stackoverflow.com/questions/55779401/having-trouble-accessing-nested-data-and-nil-in-ruby-rails/55780013#55780013", "title": "Having trouble accessing nested data and Nil in Ruby/Rails", "body": "<p>This is a good example in  which you can use <a href=\"https://docs.ruby-lang.org/en/2.6.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a></p>\n\n<pre><code>artist_names = search['relations'].map { |r| r.dig('artist', 'name') }\n</code></pre>\n"}], "owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555925277, "creation_date": 1555813973, "last_edit_date": 1555860573, "question_id": 55779401, "link": "https://stackoverflow.com/questions/55779401/having-trouble-accessing-nested-data-and-nil-in-ruby-rails", "title": "Having trouble accessing nested data and Nil in Ruby/Rails", "body": "<p>I'm getting data from an external API in my Rails app for a React frontend. I'd like to cleanup the data before it hits the frontend and trying to reach nested data in a unpredictable API response. Sometimes the nested data returns something and other times <code>nil</code>. This is the problem (I think). </p>\n\n<p>I've tried various protections with conditions but this doesn't seem to work. </p>\n\n<p>Here is the method I'm working with: </p>\n\n<pre><code>def song_details\n    search = HTTParty.get(\"https://musicbrainz.org/ws/2/release/#{params[:songId]}?inc=artist-credits+artist-rels+media+recording-level-rels+url-rels+work-level-rels+recording-rels&amp;fmt=json\", {\n      headers: {\"User-Agent\" =&gt; \"Songly/ver 1.0\", \"Contact\" =&gt; \"demiansims@gmail.com\"}\n      })\n\n\nend\n</code></pre>\n\n<p>If I call <code>search['relations'][0]['artist']['name']</code> in Rails Console, I get a nice string of a name back. </p>\n\n<p>If I try to run:</p>\n\n<pre><code>search['relations'].map { |r| r['artist'].each { |a| puts a['name'] }}\n</code></pre>\n\n<p>I get <code>no method for Nil class on []</code> error. I know it's because some of the values are Nil. </p>\n\n<p>Here is a full picture of the nested data (1 iteration worth - there are about 20 of these): </p>\n\n<pre><code>{\"end\"=&gt;nil,\n \"attribute-values\"=&gt;{},\n \"artist\"=&gt;\n  {\"id\"=&gt;\"70047e57-0153-4117-b0fc-a1d2e322e5ef\",\n   \"name\"=&gt;\"Donald Fagen\",\n   \"disambiguation\"=&gt;\"\",\n   \"sort-name\"=&gt;\"Fagen, Donald\"},\n \"ended\"=&gt;false,\n \"direction\"=&gt;\"backward\",\n \"type-id\"=&gt;\"01ce32b0-d873-4baa-8025-714b45c0c754\",\n \"begin\"=&gt;nil,\n \"target-type\"=&gt;\"artist\",\n \"target-credit\"=&gt;\"\",\n \"type\"=&gt;\"composer\",\n \"attributes\"=&gt;[],\n \"attribute-ids\"=&gt;{},\n \"source-credit\"=&gt;\"\"}\n\n</code></pre>\n\n<p>I'm trying to get the name from <code>relations -&gt; artist -&gt; name</code> if there even is a 'artist' or 'name' and it does not equal nil. How to I approach this? Sorry I'm a Rails newb and just starting to wrestle with data structures. And I assume I'm right in taking care of the data in the backend before sending to React?</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>The suggestions below are a lot closer but I still get errors when trying to wrap the data:</p>\n\n<pre><code>  def song_details\n    search = HTTParty.get(\"https://musicbrainz.org/ws/2/release/#{params[:songId]}?inc=artist-credits+artist-rels+media+recording-level-rels+url-rels+work-level-rels+recording-rels&amp;fmt=json\", {\n      headers: {\"User-Agent\" =&gt; \"Songly/ver 1.0\", \"Contact\" =&gt; \"demiansims@gmail.com\"}\n      })\n      search['relations'].present?\n        search['relations'].map do |r|\n          r['artist'].present?\n          artist = {\n            name: r['artist', 'name'],\n            role: r['type'].present? &amp;&amp; r['type'],\n            id: r['artist', 'id'],\n            disambiguation: r['artist', 'disambiguation'],\n            attributes: r['attributes'] &amp;&amp; r['attributes'].each { |a| a }\n          }\n      end\n    artist\n  end\n</code></pre>\n\n<p>I get errors like: </p>\n\n<pre><code>app/controllers/api/v1/searches_controller.rb:26:in `[]'\napp/controllers/api/v1/searches_controller.rb:26:in `block in song_details'\napp/controllers/api/v1/searches_controller.rb:21:in `map'\napp/controllers/api/v1/searches_controller.rb:21:in `song_details'\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11389637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZcY_-r1v68Y/AAAAAAAAAAI/AAAAAAAACfU/Igt9yGrCHUQ/photo.jpg?sz=128", "display_name": "Nicolas Nobile", "link": "https://stackoverflow.com/users/11389637/nicolas-nobile"}, "edited": false, "score": 0, "creation_date": 1555815246, "post_id": 55779441, "comment_id": 98230432, "body": "Hey man! Your answer actually really helped me out!, But i have an issue with it. Redefining self.inherited(obj) is turning my pry crazy. So how can i make self.inherited(obj) mantain what it was doing before, but also add this logic?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 11, "user_id": 11389637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZcY_-r1v68Y/AAAAAAAAAAI/AAAAAAAACfU/Igt9yGrCHUQ/photo.jpg?sz=128", "display_name": "Nicolas Nobile", "link": "https://stackoverflow.com/users/11389637/nicolas-nobile"}, "edited": false, "score": 0, "creation_date": 1555819172, "post_id": 55779441, "comment_id": 98230899, "body": "@Nicolas, I don&#39;t know why it would cause a problem with Pry. IRB has no such problem and it runs fine from the command line. Getting it to work with Pry is a different question. Try this: add the line <code>super</code> at the end of the <code>inherited</code> method. Let me know if that works."}, {"owner": {"reputation": 11, "user_id": 11389637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZcY_-r1v68Y/AAAAAAAAAAI/AAAAAAAACfU/Igt9yGrCHUQ/photo.jpg?sz=128", "display_name": "Nicolas Nobile", "link": "https://stackoverflow.com/users/11389637/nicolas-nobile"}, "edited": false, "score": 0, "creation_date": 1555821152, "post_id": 55779441, "comment_id": 98231122, "body": "Still breaking my pry, don&#39;t know why. Thanks for the answer btw"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555821450, "post_id": 55779441, "comment_id": 98231159, "body": "Note that you may need to restart Pry to properly test the code."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1555814743, "last_edit_date": 1555814743, "creation_date": 1555814437, "answer_id": 55779441, "question_id": 55779214, "link": "https://stackoverflow.com/questions/55779214/i-need-to-know-if-is-there-a-way-to-exec-something-everytime-i-define-a-class/55779441#55779441", "title": "I need to know if is there a way to exec something everytime i define a class", "body": "<pre><code>class Object\n  def self.inherited(obj)\n    puts \"fifi\" if obj == Pipipupu\n  end\nend\n\nclass Pipipupu\nend\n</code></pre>\n\n<p>diplays <code>\"fifi\"</code>. </p>\n\n<pre><code>class Cat\nend\n</code></pre>\n\n<p>displays nothing. See <a href=\"https://ruby-doc.org/core-2.6.2/Class.html#method-i-inherited\" rel=\"nofollow noreferrer\">Class#inherited</a>, which is referred to as a <em>callback</em> or <em>hook</em> method.</p>\n\n<p>If you wish to display <code>\"fifi\"</code> whenever any class is created replace</p>\n\n<pre><code>puts \"fifi\" if obj == Pipipupu\n</code></pre>\n\n<p>with</p>\n\n<pre><code>puts \"fifi\" if obj.is_a? Class\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": false, "score": 0, "last_activity_date": 1555846654, "creation_date": 1555846654, "answer_id": 55782353, "question_id": 55779214, "link": "https://stackoverflow.com/questions/55779214/i-need-to-know-if-is-there-a-way-to-exec-something-everytime-i-define-a-class/55782353#55782353", "title": "I need to know if is there a way to exec something everytime i define a class", "body": "<p>Add an <code>inherited</code> hook to <code>BasicObject</code>:</p>\n\n<pre><code>class BasicObject\n  def self.inherited(subclass)\n    puts \"fifi\"\n  end\nend\n</code></pre>\n\n<p>To prevent it from screwing up other hooks, instead of redefining it you can prepend a module that prints and calls super to invoke the already registered behavior:</p>\n\n<pre><code>module Hook\n  def inherited(subclass)\n    puts \"fifi\"\n    super\n  end\nend\n\nBasicObject.singleton_class.prepend(Hook)\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>irb&gt; class Foo; end\nfifi\n=&gt; nil\n</code></pre>\n\n<p>Alternatively, add the hook to <code>Object</code>. For <code>Foo</code> above the implicit superclass is <code>Object</code>. But <code>BasicObject</code> is the superclass of <code>Object</code>. Adding the hook to <code>BasicObject</code> will also print for classes that specify <code>BasicObject</code> as superclass.</p>\n"}], "owner": {"reputation": 11, "user_id": 11389637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZcY_-r1v68Y/AAAAAAAAAAI/AAAAAAAACfU/Igt9yGrCHUQ/photo.jpg?sz=128", "display_name": "Nicolas Nobile", "link": "https://stackoverflow.com/users/11389637/nicolas-nobile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555846654, "creation_date": 1555811144, "question_id": 55779214, "link": "https://stackoverflow.com/questions/55779214/i-need-to-know-if-is-there-a-way-to-exec-something-everytime-i-define-a-class", "title": "I need to know if is there a way to exec something everytime i define a class", "body": "<p>Like i said in the title. I need to know if is there some way to execute something everytime i define a class</p>\n\n<p>Like puts \"fifi\".</p>\n\n<p>When i do this:</p>\n\n<pre><code>class Pipipupu\nend\n\n=&gt; fifi\n</code></pre>\n"}, {"tags": ["ruby", "file", "parsing"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1555790795, "post_id": 55777264, "comment_id": 98226704, "body": "Have you defined a <code>Guns</code> class?"}, {"owner": {"reputation": 3, "user_id": 11389046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAbTu.png?s=128&g=1", "display_name": "Rain Bird", "link": "https://stackoverflow.com/users/11389046/rain-bird"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1555792215, "post_id": 55777264, "comment_id": 98227036, "body": "I just tried that, didnt work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1555792714, "post_id": 55777264, "comment_id": 98227154, "body": "<code>File.open(filename, &quot;r+&quot;).read</code> opens the file for reading and then reads it, but you have not later closed it (and can&#39;t because you don&#39;t have the file handle <code>f = File.open(filename)</code>. (<code>&quot;r&quot;</code> is not needed as it is the default; I&#39;m not familiar with <code>&quot;r+&quot;</code>.) Better: <code>File.read(filename)</code>, which closes the file after it is read. All the elements of <code>gun_type</code> are strings, so <code>.to_s</code> in <code>gun_type.last.to_s</code> is redundant. You need to edit show the class <code>Gun</code>, even if it&#39;s somewhat simplified. The error message makes it clear that Ruby hasn&#39;t seen it, which is the heart of your problem."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11389046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAbTu.png?s=128&g=1", "display_name": "Rain Bird", "link": "https://stackoverflow.com/users/11389046/rain-bird"}, "edited": false, "score": 0, "creation_date": 1555944446, "post_id": 55779376, "comment_id": 98261459, "body": "Thank you so so much! I know it is probably obvious to everyone, but I was missing that! I added the class and define it but now when I run the code I do not get any output... Even when I put &quot;puts guns&quot; after the .readlines"}, {"owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "reply_to_user": {"reputation": 3, "user_id": 11389046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAbTu.png?s=128&g=1", "display_name": "Rain Bird", "link": "https://stackoverflow.com/users/11389046/rain-bird"}, "edited": false, "score": 0, "creation_date": 1555949105, "post_id": 55779376, "comment_id": 98263553, "body": "@Rainbird Please always update the question to reflect your current code. Updating doesn&#39;t mean to edit what you&#39;ve written so far but attach an update to what you&#39;ve written at then end to reflect progress, then people can comment on your changes. And it would be useful to provide a small excerpt of the text file you are trying to parse, 3 lines are enough."}], "tags": [], "owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "is_accepted": true, "score": 0, "last_activity_date": 1555813525, "creation_date": 1555813525, "answer_id": 55779376, "question_id": 55777264, "link": "https://stackoverflow.com/questions/55777264/cannot-parse-a-list-of-guns-and-ammo-types-to-array-and-display-results/55779376#55779376", "title": "Cannot parse a list of guns and ammo types to array and display results", "body": "<p>Ruby doesn't know what Guns is. You need to define a Guns class. Actually, I'd name it Gun, as a class name usually should be singular.</p>\n\n<pre><code>class Gun\n    attr_reader :name\n    attr_reader :ammo\n\n    def initialize ( name, ammo )\n        @name = name\n        @ammo = ammo\n    end\nend\n</code></pre>\n\n<p>Also your input file is never closed. To read a file line by line, you can use this handy method:</p>\n\n<pre><code>File.readlines(filename).each do |line|\n    # Do something with line\nend\n</code></pre>\n\n<p>Using this method, the file is automatically closed at the end.</p>\n"}], "owner": {"reputation": 3, "user_id": 11389046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAbTu.png?s=128&g=1", "display_name": "Rain Bird", "link": "https://stackoverflow.com/users/11389046/rain-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 55779376, "answer_count": 1, "score": 0, "last_activity_date": 1555813525, "creation_date": 1555790459, "question_id": 55777264, "link": "https://stackoverflow.com/questions/55777264/cannot-parse-a-list-of-guns-and-ammo-types-to-array-and-display-results", "title": "Cannot parse a list of guns and ammo types to array and display results", "body": "<p>I am learning Ruby and practicing parsing a list of guns from a video game - I followed a instructional and did exactly how they parsed a list of names/ages but I cannot get this code to run... </p>\n\n<p>I've tried creating a Guns.new(name, ammo) before the parse which did not work.. </p>\n\n<pre><code># FILE IN FORMAT \"gun, ammo\" IS IN \"gunsammo.txt\"\ndef load_guns(filename)\n  guns = []\n# load gun names and ammo types from file \"gunsammo.txt\"\n  file = File.open(filename, \"r+\").read\n  file.lines do |line|\n    gun_type = line.split(\", \")\n    name = gun_type.first #[0]\n    ammo = gun_type.last.to_s #[1]\n    gun = Guns.new(name, ammo)\n    guns &lt;&lt; gun\n    # puts \"imported #{gun.display}\"\n  end\n  # RETURN GUNS FROM TEXT gunsammo.txt\n  guns\nend\n\neft_guns = load_guns(\"gunsammo.txt\")\neft_guns.each {|gun| p guns}\n</code></pre>\n\n<p>I expected to get an output of the following list in array format: </p>\n\n<pre><code>[\nADAR 2-15, 5.56x45mm NATO\nAK-101, 5.56x45mm NATO\nAK-102, 5.56x45mm NATO\nAK-103, 7.62x39mm\nAK-104, 7.62x39mm\nAK-105, 5.45x39mm\nAK-74, 5.45x39mm\nAK-74M, 5.45x39mm\nAK-74N, 5.45x39mm\n]\n</code></pre>\n\n<p>Instead I get these errors: </p>\n\n<pre><code>enter code here\n\n/RUBY/class_ammo.rb:11:in `block in load_guns': uninitialized constant Guns (NameError)\n    from C:/Users/**/Documents/CODING/RUBY/class_ammo.rb:7:in `lines'\n    from C:/Users/**/Documents/CODING/RUBY/class_ammo.rb:7:in `load_guns'\n    from C:/Users/**/Documents/CODING/RUBY/class_ammo.rb:19:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 108, "user_id": 10743912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HbKmkzk5vhU/AAAAAAAAAAI/AAAAAAAAACs/jKnJlPBCITs/photo.jpg?sz=128", "display_name": "Edwardcho Vaklinov", "link": "https://stackoverflow.com/users/10743912/edwardcho-vaklinov"}, "edited": false, "score": 0, "creation_date": 1555787699, "post_id": 55776843, "comment_id": 98225994, "body": "An array Is a great data structure for searching elements in O(n) complexity, since there is indexing so it will take a linear complexity for an element to be found. Of course, if you are trying to look up at a string for a duplicate, then you can make the string to an CharArray and after that search thoughout each char."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 108, "user_id": 10743912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HbKmkzk5vhU/AAAAAAAAAAI/AAAAAAAAACs/jKnJlPBCITs/photo.jpg?sz=128", "display_name": "Edwardcho Vaklinov", "link": "https://stackoverflow.com/users/10743912/edwardcho-vaklinov"}, "edited": false, "score": 0, "creation_date": 1555788124, "post_id": 55776843, "comment_id": 98226082, "body": "@EdwardchoVaklinov: exactly, array&#39;s linear search will result in a O(N^2) here. Not a very good time complexity."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1555791615, "post_id": 55776843, "comment_id": 98226914, "body": "Another way, that does not use a regex, is <code>arr = &#39;abccdd&#39;.each_char.each_cons(2).find { |c1,c2| c1==c2 } #=&gt; [&quot;c&quot;, &quot;c&quot;]; arr.first unless arr.nil? #=&gt; &quot;c&quot;</code>. If the string contained no consecutive characters that are equal, <code>arr #=&gt; nil</code>, in which case <code>arr.first unless arr.nil?</code> would return <code>nil</code>. See <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-each_char\" rel=\"nofollow noreferrer\">String#each_char</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">Enumerable#find</a>..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555791984, "post_id": 55776843, "comment_id": 98226993, "body": "...I am not advocating this approach over the use of a regex; I just wanted to bring it to your attention. Incidentally, SO&#39;s mandate is to fix broken code and propose alternative algorithmic alternatives; SO&#39;s sister-site <a href=\"https://codereview.stackexchange.com/\">Code Review</a> is the place to take working code (such as yours) that you wish to improve. That may account for the vote to close the question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555795713, "post_id": 55776843, "comment_id": 98227739, "body": "@CarySwoveland: duplicate chars being adjacent to each other is a corner case here, I think (it&#39;s a common interview question)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1555797854, "post_id": 55776843, "comment_id": 98228154, "body": "Your question references a string but the argument of your method is an array. Best to make the a string. If <code>str</code> is the argument, then <code>str.each_char.find { |e| !s.add?(e) }</code>. I presume by <code>&quot;...of two duplicate characters...&quot;</code> you mean at least two, rather than exactly two. Also, your title is misleading. Better: &quot;Return first character in a string that is followed by the same character.&quot; Be precise! @Sergio, I don&#39;t follow. Corner of what?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555798146, "post_id": 55776843, "comment_id": 98228203, "body": "@CarySwoveland: ah, &quot;of two duplicate characters <b>in a row</b>&quot; - looks like I can&#39;t read tonight. My bad. It might very well be OP&#39;s misinterpretation of the actual problem statement, but given the context here (exercise for a ruby novice), I find it unlikely."}, {"owner": {"reputation": 31, "user_id": 10791576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1e2152140d00f4823ebce187b53afd?s=128&d=identicon&r=PG&f=1", "display_name": "Cholis", "link": "https://stackoverflow.com/users/10791576/cholis"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555798274, "post_id": 55776843, "comment_id": 98228226, "body": "@CarySwoveland Sounds good and thanks for the tips! I am slowly learning Ruby, so it&#39;s been a process.  Any feedback is always welcome in my book."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555801643, "post_id": 55776843, "comment_id": 98228774, "body": "You can always edit your question to make it clearer as long as you don&#39;t alter the meaning. As @lacostenycoder assumes a string is to be modified editing would not be a problem; it would in fact be an improvement. Note that your code locates the first character that is preceded in the string by the same character, not necessarily the previous character."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1555848471, "post_id": 55776843, "comment_id": 98236024, "body": "@Cholis are you sure your method should only return 1 character? That&#39;s what my answer below does."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1555790783, "post_id": 55777216, "comment_id": 98226700, "body": "You don&#39;t need the second capture group. Also, you could use <code>str[&#47;(.)(?=\\1)&#47;]</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555801693, "post_id": 55777216, "comment_id": 98228787, "body": "It&#39;s simple if you understand regular expressions. If you don&#39;t, tools like <a href=\"https://regex101.com/r/iwDdtU/1\" rel=\"nofollow noreferrer\">Regex101</a> help explain."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1555847509, "post_id": 55777216, "comment_id": 98235815, "body": "@CarySwoveland you&#39;re right, I updated my answer thanks"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555949427, "post_id": 55777216, "comment_id": 98263683, "body": "When benchmarking you need to run more than one cycle. Generally you want a run-time of at least 5-10s per method for something trivial like this. Like <code>cycles = 100000</code> and then <code>x.report(:ruby) { cycles.times { ... } }</code> where I get times like 5.7 seconds for the first and 0.096s for the latter, a very stark difference!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1555950665, "post_id": 55777216, "comment_id": 98264270, "body": "@tadman: also replacing <code>str.chars.each_cons</code> with <code>str.each_char.each_cons</code> speeds up ruby version by ~25x. Still about 1.5-2.5x slower than regex though."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1555952788, "last_edit_date": 1555952788, "creation_date": 1555790158, "answer_id": 55777216, "question_id": 55776843, "link": "https://stackoverflow.com/questions/55776843/returning-duplicate-characters-in-a-string/55777216#55777216", "title": "Returning duplicate characters in a string", "body": "<p>Why not just use a simple regex?</p>\n\n<pre><code>str = 'abccdd'\nstr[/(.)\\1/][0]\n=&gt; 'c'\n</code></pre>\n\n<p>The regex here groups each character and find the first consecutive pair.  Then we just get the first character by calling 0 index. </p>\n\n<p>In ruby there are several ways to use a <a href=\"https://ruby-doc.org/core-2.6.2/Regexp.html\" rel=\"nofollow noreferrer\">Regular Expression</a> on a string.  So you could put this a method.</p>\n\n<pre><code>def find_first_dup_in_string(str)\n  str[/(.)\\1/][0] \nend\n</code></pre>\n\n<p>Here's a variation on tadman's answer and I'll include benchmarks to compare UPDATED to use <code>each_char</code> as per comments.</p>\n\n<pre><code>def find_first_dup_a(str)\n  d = ''\n  str.each_char.each_cons(2){|c| d = c[0]; break if c[0] == c[1] }\n  d\nend\n\nalpha=[*'a'..'z']\nstr = ''\n1000.times{ str &lt;&lt; alpha.sample}\n\ncycles = 100000\n\nBenchmark.bm do |x|\n  x.report(:ruby) {  cycles.times { find_first_dup_a(str) } }\n  x.report(:regex) { cycles.times { find_first_dup_in_string(str) } }\nend\n\nruby  0.330000   0.010000   0.340000 (  0.338940)\nregex  0.140000   0.000000   0.140000 (  0.151719)\n=&gt; [\n    [0] #&lt;Benchmark::Tms:0x00007fb6a0bd4c88 @label=\"ruby\", @real=0.33893999992869794, @cstime=0.0, @cutime=0.0, @stime=0.010000000000000009, @utime=0.33000000000000007, @total=0.3400000000000001&gt;,\n    [1] #&lt;Benchmark::Tms:0x00007fb6a2601390 @label=\"regex\", @real=0.1517189999576658, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.14000000000000057, @total=0.14000000000000057&gt;\n]\n</code></pre>\n\n<p>And an funny coincidence, not relevant whatsoever :)</p>\n\n<pre><code>14.0/33.0 * 100\n=&gt; 42.42424242424242\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1555848277, "post_id": 55778571, "comment_id": 98235986, "body": "Nice but you&#39;re method returns a boolean when OP method returns the first dupe character .  Your last method has a typo <code>chrs</code> should be <code>chars</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1555949220, "last_edit_date": 1555949220, "creation_date": 1555802354, "answer_id": 55778571, "question_id": 55776843, "link": "https://stackoverflow.com/questions/55776843/returning-duplicate-characters-in-a-string/55778571#55778571", "title": "Returning duplicate characters in a string", "body": "<p>In Ruby strings can be turned into arrays of characters, and then you can have all kinds of fun with them:</p>\n\n<pre><code>def duup?(str)\n  !!str.chars.each_cons(2).find { |a,b| a == b }\nend\n</code></pre>\n\n<p>Where that just uses an <code>each_cons</code> (<em>each consecutive</em>) iterator and finds the first instance of the two letters being identical.</p>\n\n<p>If that's not exciting enough:</p>\n\n<pre><code>def duup?(str)\n  !!str.chars.each_cons(2).lazy.map(&amp;:uniq).map(&amp;:length).include?(1)\nend\n</code></pre>\n\n<p>Where this reduces each pair to only the unique elements and looks for those that collapsed into an array of length 1. <code>lazy</code> is thrown in for good measure.</p>\n\n<p>You could also do something a little obscure like:</p>\n\n<pre><code>def duup?(str)\n !!(1...str.length).find { |i| str[i].ord ^ str[i-1].ord == 0 }\nend\n</code></pre>\n\n<p>If you like binary math, XOR will return zero if the two values are identical as they cancel themselves out.</p>\n\n<p>Or for simplicity:</p>\n\n<pre><code>def duup?(str)\n  !!str.chars.each_cons(2).find { |v| v == v.reverse }\nend\n</code></pre>\n\n<p>Where if the reversed set is the same as the forward set it must be two of the same thing.</p>\n\n<p>Note that some of these can be easily scaled up to <em>N</em> characters as the <code>2</code> is completely arbitrary.</p>\n\n<p>As an exercise you may want to <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">benchmark</a> these routines with strings of varying lengths. Some approaches might not be viable on huge strings.</p>\n"}], "owner": {"reputation": 31, "user_id": 10791576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1e2152140d00f4823ebce187b53afd?s=128&d=identicon&r=PG&f=1", "display_name": "Cholis", "link": "https://stackoverflow.com/users/10791576/cholis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555952788, "creation_date": 1555787482, "last_edit_date": 1555797478, "question_id": 55776843, "link": "https://stackoverflow.com/questions/55776843/returning-duplicate-characters-in-a-string", "title": "Returning duplicate characters in a string", "body": "<p>I am learning Ruby. As part of my HW, I am to find the first occurence of two duplicate characters in a row in a string, and return the duplicated character. This is what I came up with:</p>\n\n<pre><code>require 'set'\n\ndef find_a_dup_using_set(arr)\n   s = Set.new\n   arr.find { |e| !s.add?(e) }\nend\n p find_a_dup_using_set([\"q\", \"q\", \"c\", \"d\", \"e\"])\n</code></pre>\n\n<p>Question: was this the best approach?  Maybe because I am still learning, but I feel this isn't what they were asking for, but this is what I knew what worked based on research I did.  Is there a reason not to use an array for something like this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1555781821, "post_id": 55775995, "comment_id": 98224501, "body": "What server? Is it on a different machine or VM? Do you have more than one version of Ruby installed?"}, {"owner": {"reputation": 29, "user_id": 8767993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f44f21c7b562bce46cbc8d0dcbd2e9?s=128&d=identicon&r=PG&f=1", "display_name": "DammitJanet", "link": "https://stackoverflow.com/users/8767993/dammitjanet"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555782351, "post_id": 55775995, "comment_id": 98224645, "body": "I did have 2 versions of ruby installed.  I went to setting and changed my SDK over and now it is working.  Thanks!"}], "owner": {"reputation": 29, "user_id": 8767993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f44f21c7b562bce46cbc8d0dcbd2e9?s=128&d=identicon&r=PG&f=1", "display_name": "DammitJanet", "link": "https://stackoverflow.com/users/8767993/dammitjanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555781224, "creation_date": 1555781224, "question_id": 55775995, "link": "https://stackoverflow.com/questions/55775995/rails-running-two-different-version-of-ruby", "title": "Rails running two different version of ruby?", "body": "<p>I am using rubymine and when I go to the terminal and type ruby -v I get ruby 2.5.5, which matches my gemfile.</p>\n\n<p>But when I go to start the server I get this error message:\nYour Ruby version is 2.4.4, but your Gemfile specified 2.5.5</p>\n\n<p>Why is my development server running a different version of ruby and how to I get them to match?</p>\n"}]