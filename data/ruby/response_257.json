[{"tags": ["ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1576105689, "post_id": 59295287, "comment_id": 104795271, "body": "I suspect the answer to this question may require a trip into Matz&#39;s head. But I am eagerly awaiting an answer none the less, as I think it would be much more intuitive if it used the semantic scope for lookup. However, let&#39;s say you would patch Ruby to do this (how hard can it be? [<i>famous last words</i>]). It may break something, which would then probably also reveal the reason."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1576109285, "post_id": 59295287, "comment_id": 104796176, "body": "Pat Shaughnessy&#39;s excellent book &quot;Ruby Under a Microscope&quot; covers this in great detail. Highly recommended."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1576172665, "post_id": 59295287, "comment_id": 104822424, "body": "@JaredBeck I actually read the section on constant lookup before asking this question. It still leaves me with the question, &quot;why does <code>Foo::SecondClass</code> never point to <code>Foo</code> (via <code>nd_next</code> member of the <code>ruby_cref</code> <code>NODE</code> struct)?"}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576124370, "post_id": 59297383, "comment_id": 104799143, "body": "@Casper: How so? As I said, it should be obvious in the rewrite: <code>::FirstClass</code> is not defined. There is no way for the <code>proc</code> that is assigned to <code>meth2</code> to know it will end up as a method in a class in a <code>Foo</code> namespace."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576124641, "post_id": 59297383, "comment_id": 104799216, "body": "To be clear: there is no OBVIOUS reason why <code>class Foo::SomeClass</code>, does not open the scope <code>Foo</code> and <code>SomeClass</code> separately, like it does in the case of <code>module Foo; class SomeClass</code>. It is just a syntactic choice that Matz made for some unknown reason."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576124823, "post_id": 59297383, "comment_id": 104799246, "body": "@Casper There is no obvious reason why Ruby shouldn&#39;t sing you a lullaby when you exit <code>irb</code>. Having no reason not to do something is very different from having a reason to do something; this brings me to the top of my answer: why should it? I believe my rewrite makes sense; doing what you suggest would insert some additional heuristics there that would complicate things \u2014 with no obvious reason (in my opinion)."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576125278, "post_id": 59297383, "comment_id": 104799340, "body": "Don&#39;t worry, I didn&#39;t take it that way \u2014 but I don&#39;t think having ambiguous scope would be beneficial."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576171049, "post_id": 59297383, "comment_id": 104821635, "body": "&quot;is understood as <code>::FirstClass</code>&quot; - What is the benefit of this this implicitly being <code>::FirstClass</code>? Why not determine the nesting based on scope of execution. Why not have this implicitly evaluate as <code>self.class.const_get :FirstClass</code> (and have <code>Foo::SecondClass.const_get :FirstClass</code> return <code>Foo::FirstClass</code> instead of a NameError for <code>Foo::SecondClass::FirstClass</code>) and if we wanted to explicitly lookup the constant at the top level we write <code>::FirstClass</code>."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 1, "creation_date": 1576171058, "post_id": 59297383, "comment_id": 104821638, "body": "&quot;why should it?&quot; - I think it would be more sensible for <code>Foo::SecondClass.const_get :FirstClass</code> to return <code>Foo::FirstClass</code> instead of a NameError on <code>Foo::SecondClass::FirstClass</code>. Also, if we want to dynamically reference a constant in multiple classes across varying parent modules/classes, we have to to do something like <code>proc { Kernel.const_get &quot;#{self.class.to_s.split(&quot;::&quot;).first}::CONSTANT_NAME&quot;}</code> which gets increasingly difficult as you have more complex nesting structures. Finally we wouldn&#39;t need to write <code>class Foo::SecondClass \\ninclude Foo</code>."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 3, "last_activity_date": 1576123438, "last_edit_date": 1576123438, "creation_date": 1576122030, "answer_id": 59297383, "question_id": 59295287, "link": "https://stackoverflow.com/questions/59295287/why-does-ruby-not-add-parent-modules-to-the-lexical-scope-for-constant-lookup-wh/59297383#59297383", "title": "Why does Ruby not add parent modules to the lexical scope for constant lookup when using double colons?", "body": "<p>Let me ask you the reverse question: why <em>would</em> it?</p>\n\n<p>As you found in the last question, module nesting is important. For a quick intuitive example,</p>\n\n<pre><code>module Foo\n  puts self       # executing in Foo context\n  module Bar\n    puts self     # executing in Foo::Bar context\n  end\nend\n</code></pre>\n\n<p>It is only modules (and its subclasses, such as <code>Class</code>) that can do this \u2014\u00a0change the execution context by nesting.</p>\n\n<p>Now, over to your examples. The first snippet is effectively equivalent to:</p>\n\n<pre><code>module Foo\n  # executing in Foo namespace context\n  FirstClass = Class.new\n  meth1 = proc do puts \"HELLO\" end\n  FirstClass.define_method(:meth, meth1)\n  SecondClass = Class.new\n  meth2 = proc do FirstClass.new.meth end\n  SecondClass.define_method(:meth, meth2)\n  SecondClass.new.meth\nend\n</code></pre>\n\n<p>Here, assuming we executed this at the <code>main</code> level, all of the references are relative to <code>::Foo</code>. When we write <code>FirstClass</code>, it is understood as <code>::Foo::FirstClass</code>.</p>\n\n<p>The second snippet is effectively equivalent to</p>\n\n<pre><code># executing in top namespace context\nFoo = Module.new\nFoo::FirstClass = Class.new\nmeth1 = proc do puts \"HELLO\" end\nFoo::FirstClass.define_method(:meth, meth1)\nFoo::SecondClass = Class.new\nmeth2 = proc do FirstClass.new.meth end        # ERROR\nFoo::SecondClass.define_method(:meth, meth2)\nFoo::SecondClass.new.meth\n</code></pre>\n\n<p>Written this way, it might be obvious why the second example does not work. If this was executed in <code>main</code>, then <code>Foo::FirstClass</code> that we defined is understood as <code>::Foo::FirstClass</code>. The <code>FirstClass</code> mention in the error line is understood as <code>::FirstClass</code>, which was never defined.</p>\n"}, {"comments": [{"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576174477, "post_id": 59306930, "comment_id": 104823193, "body": "&quot;You can precisely select the modules you want to include (or exclude)&quot; - I have no qualms about <i>explicit</i> constant lookup, but rather <i>implicit</i> constant lookup. For example, I would expect <code>Foo::MyClass.const_get :A</code> to return <code>&#39;A in Foo&#39;</code>, but it throws a <code>NameError</code> because <code>Foo::MyClass::A</code> is not defined."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576176093, "post_id": 59306930, "comment_id": 104823915, "body": "@Joe_P <code>Foo::MyClass.const_get :A</code> <i>is</i> explicit. It throws an error because <code>MyClass</code> doesn&#39;t define <code>A</code>. Implicit lookup means just writing <code>A</code> which uses the current nesting."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576446199, "post_id": 59306930, "comment_id": 104892604, "body": "I see <code>Foo::MyClass.const_get :A</code> as being implicit because you are not using the namespace operator when referring to the constant. For example, simply writing <code>A</code> is implicit while writing <code>::A</code>, <code>Foo::A</code>, or <code>Foo::MyClass::A</code> is explicitly defining the namespace. In the case of <code>Module#const_get</code>, <code>Foo::MyClass.const_get &quot;Foo::A&quot;</code> would be explicit where as <code>Foo::MyClass.const_get &quot;A&quot;</code> is implicit, and I want to know why it only tries to lookup the constant under <code>Foo::MyClass</code> and not <code>Foo</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576484856, "post_id": 59306930, "comment_id": 104900706, "body": "@Joe_P the current namespace / nesting is a transient property while Ruby is parsing the code (lexical scope). You can freely reopen the same class under different namespaces and have different constant lookup each time. And there&#39;s no way Ruby could retrieve that information afterwards. For example, in my second example, <code>C</code> evaluates to <code>Bar::Baz::C</code> within the <code>class</code> block, although <code>Bar::Baz</code> has no connection at all to <code>Foo</code> or <code>Foo::MyClass</code>."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576521200, "post_id": 59306930, "comment_id": 104918697, "body": "&quot;transient property while Ruby is parsing the code (lexical scope)&quot; - Yes, but why? Why is <code>Module.nesting</code> <code>[Foo::MyClass, Bar::Baz, Foo]</code> instead of <code>[Foo::MyClass, Foo, Bar::Baz, Bar ]</code>. The latter makes more sense and seems more natural, whereas the first seems more convoluted. Yes, it is more flexible in terms of implicit lookup, but we could easily specify <code>Bar::Baz::C</code> if we wanted to explicitly lookup the constant in <code>Bar::Baz</code> or dynamically skip modules by calling <code>Module#const_get</code> while iterating through <code>Module.nesting</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576523023, "post_id": 59306930, "comment_id": 104919465, "body": "@Joe_P you can just use the nested variant (<code>module Foo ; class FirstClass ; end ; end</code>). It works <i>exactly</i> the way you want. The other variant (<code>module Foo::FirstClass</code>) requires you to specify the modules for constant lookup explicitly. This might seem complicated if you are just replicating the former variant. But if you want to set up a different kind of constant lookup, this syntax allows it \u2013 you can have it the way you want. Maybe it helps to think of the former variant as &quot;automatic nesting&quot; and of the latter variant as &quot;manual nesting&quot;."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 1, "creation_date": 1576528943, "post_id": 59306930, "comment_id": 104921799, "body": "If you are writing code across multiple files (ie. each class within its own file) the latter is easier to write and looks a lot cleaner. In my opinion, if you want to setup a &quot;different kind of constant lookup&quot;, this should be done via the code executing the constant lookup itself, rather than the lexical scope. I have yet to see any real benefits of lexical scope the current way it&#39;s implemented, and I have listed the disadvantages <a href=\"https://stackoverflow.com/questions/59295287#comment104821638_59297383\">here</a>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1576161423, "creation_date": 1576161423, "answer_id": 59306930, "question_id": 59295287, "link": "https://stackoverflow.com/questions/59295287/why-does-ruby-not-add-parent-modules-to-the-lexical-scope-for-constant-lookup-wh/59306930#59306930", "title": "Why does Ruby not add parent modules to the lexical scope for constant lookup when using double colons?", "body": "<p>It allows you to explicitly set the modules that are used for constant lookup. Here's an example of a class <code>MyClass</code> defined under a module <code>Foo</code>:</p>\n\n<pre><code>module Foo\n  A = 'A in Foo'\n  B = 'B in Foo'\n  C = 'C in Foo'\nend\n\nmodule Foo\n  class MyClass\n    B = 'B in MyClass'\n\n    p Module.nesting  #=&gt; [Foo::MyClass, Foo]\n\n    def self.abc\n      [A, B, C]\n    end\n  end\nend\n\nFoo::MyClass.abc\n#=&gt; [\"A in Foo\", \"B in MyClass\", \"C in Foo\"]\n</code></pre>\n\n<p>The constants are resolved the way <code>Module.nesting</code> shows,  i.e. <code>A</code>, <code>B</code>, <code>C</code> are searched in <code>Foo::MyClass</code> and then in <code>Foo</code>.</p>\n\n<hr>\n\n<p>Now for something more unusual. We can add a totally unrelated module <code>Bar::Baz</code> in-between <code>Foo::MyClass</code> and <code>Foo</code> for constant lookup:</p>\n\n<pre><code>module Foo\n  A = 'A in Foo'\n  B = 'B in Foo'\n  C = 'C in Foo'\nend\n\nmodule Bar\n  module Baz\n    C = 'C in Bar::Baz'\n  end\nend\n\nmodule Foo\n  module ::Bar::Baz\n    class Foo::MyClass\n      B = 'B in MyClass'\n\n      p Module.nesting  #=&gt; [Foo::MyClass, Bar::Baz, Foo]\n\n      def self.abc\n        [A, B, C]\n      end\n    end\n  end\nend\n\nFoo::MyClass.abc\n#=&gt; [\"A in Foo\", \"B in MyClass\", \"C in Bar::Baz\"]\n</code></pre>\n\n<p>I don't know if this has any real-world application, but it makes constant lookup extremely flexible. You can precisely select the modules you want to include (or exclude) for constant lookup and their order.</p>\n"}], "owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1576161423, "creation_date": 1576104402, "question_id": 59295287, "link": "https://stackoverflow.com/questions/59295287/why-does-ruby-not-add-parent-modules-to-the-lexical-scope-for-constant-lookup-wh", "title": "Why does Ruby not add parent modules to the lexical scope for constant lookup when using double colons?", "body": "<p>This question is an extension of <a href=\"https://stackoverflow.com/questions/59273879/ruby-class-namespacing-with-modules-why-do-i-get-nameerror-with-double-colons-b\">this</a> question. The answer helped me understand what was happening, but I am still questioning why. </p>\n\n<p>When defining two classes within a module there are two ways to write it.</p>\n\n<p><strong>Using Module Blocks:</strong></p>\n\n<pre><code>module Foo\n  class FirstClass\n    def meth\n      puts 'HELLO'\n    end\n  end\n\n  class SecondClass\n    def meth\n      FirstClass.new.meth\n    end\n  end\nend\n\nFoo::SecondClass.new.meth\n</code></pre>\n\n<p><strong>Using Double Colons:</strong></p>\n\n<pre><code>module Foo; end\n\nclass Foo::FirstClass\n  def meth\n    puts 'HELLO'\n  end\nend\n\nclass Foo::SecondClass\n  def meth\n    FirstClass.new.meth\n  end\nend\n\nFoo::SecondClass.new.meth\n\n</code></pre>\n\n<p>Both ways work for class definition, but when using double colons you cannot directly lookup <code>FirstClass</code> inside of <code>SecondClass</code> without including <code>FirstClass</code> or writing <code>Foo::FirstClass</code>. This happens because <code>Foo</code> is not a part of the lexical scope of <code>SecondClass</code> when it's defined with double colons, which can be demonstrated by using <code>Module.nesting</code>. </p>\n\n<p>Why is <code>Foo</code> not added to the lexical scope with double colons? In the context of the lower level Ruby <a href=\"https://ruby-hacking-guide.github.io/module.html\" rel=\"noreferrer\">source code</a>, why does <code>ruby_cref</code> point only to <code>Foo::SecondClass</code> instead of <code>ruby_cref</code> pointing to <code>SecondClass</code> which then points to <code>Foo</code>? </p>\n\n<p><strong>For Example:</strong></p>\n\n<pre><code>+---------+       +---------+\n| nd_next | &lt;-----+ nd_next | &lt;----+  ruby_cref\n| nd_clss |       | nd_clss |\n+----+----+       +----+----+\n     |                 |\n     |                 |\n     v                 v\n    Foo            SecondClass\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "password-encryption", "actioncontroller"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1576112343, "post_id": 59295083, "comment_id": 104796769, "body": "<code>password_digest</code> is not the password, so you should not be doing any content check against it."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576113249, "post_id": 59295083, "comment_id": 104796957, "body": "what does <code>send_password_reset</code> do? show the code. I guess it sends an email with a link, what happens when the user clicks the link? show the code, I guess it shows a form, what happens when the user submits the form? show the code"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "is_accepted": true, "score": 0, "last_activity_date": 1576334752, "last_edit_date": 1576334752, "creation_date": 1576177060, "answer_id": 59311163, "question_id": 59295083, "link": "https://stackoverflow.com/questions/59295083/why-password-validation-does-not-work-after-adding-password-recovery/59311163#59311163", "title": "Why password validation does not work after adding password recovery?", "body": "<p>The error was in the <code>send_password_reset</code> method.\nAdded <code>(: validate =&gt; false)</code> to this method and it worked.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def send_password_reset\n    confirmation_token\n    self.password_reset_sent_at = Time.zone.now\n    save!(:validate =&gt; false)\n    AuthorMailer.password_reset(self).deliver!\n  end\n</code></pre>\n\n<p>In vallidation i use <code>password</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1595349726, "last_edit_date": 1595349726, "creation_date": 1595348890, "answer_id": 63018901, "question_id": 59295083, "link": "https://stackoverflow.com/questions/59295083/why-password-validation-does-not-work-after-adding-password-recovery/63018901#63018901", "title": "Why password validation does not work after adding password recovery?", "body": "<p>Seems like you already found a solution yourself. However I'm not sure you understand <strong>why</strong> this is happening.</p>\n<p>Let's start of with the important fact that <code>password_digest</code> doesn't contain the password but rather a hashed version of the password. (The result of a hash function is also called a digest.) You'll want to add the validations to the <code>password</code> attribute, since that contains the actual password.</p>\n<p>When you assign a new password to an author both the password and password digest will be assigned a new value. You could imagine the <code>password</code> setter to look something like this:</p>\n<pre><code>def password=(password)\n  @password = password\n  @password_digest = do_some_hash_magic(password)\nend\n</code></pre>\n<p>Because <code>password</code> is set when you assign it to the author you're able to validate the contents of it.</p>\n<p>Another important thing to know is that the actual password is never saved into the database, only the password digest is (for security reasons). For this reason when you (re)load the instance from the database <code>password</code> is set to <code>nil</code>, because the application no longer knows what it is.</p>\n<p>Instead of skipping the validation with <code>save(validate: false)</code>, I suggest using the <a href=\"https://guides.rubyonrails.org/active_record_validations.html#allow-nil\" rel=\"nofollow noreferrer\"><code>:allow_nil</code></a> option or making the <a href=\"https://guides.rubyonrails.org/active_record_validations.html#conditional-validation\" rel=\"nofollow noreferrer\">validation conditional</a> to only trigger the validation when the <code>password</code> is not <code>nil</code>.</p>\n<pre><code>validates :password, length: { in: 8..255 }, allow_nil: true\n\nvalidates :password, format: { with: /\\p{Lower}/,    message: :no_lower   }, allow_nil: true\nvalidates :password, format: { with: /\\p{Upper}/,    message: :no_upper   }, allow_nil: true\nvalidates :password, format: { with: /\\p{Digit}/,    message: :no_digit   }, allow_nil: true\nvalidates :password, format: { with: /[\\p{S}\\p{P}]/, message: :no_special }, allow_nil: true\n</code></pre>\n<p>Alternatively you can be more explicit and use the <a href=\"https://guides.rubyonrails.org/active_record_validations.html#on\" rel=\"nofollow noreferrer\"><code>:on</code></a> option with a custom context to only trigger trigger the validations when you want them to:</p>\n<pre><code>validates :password, length: { in: 8..255 }, on: :password\n\nvalidates :password, format: { with: /\\p{Lower}/,    message: :no_lower   }, on: :password\nvalidates :password, format: { with: /\\p{Upper}/,    message: :no_upper   }, on: :password\nvalidates :password, format: { with: /\\p{Digit}/,    message: :no_digit   }, on: :password\nvalidates :password, format: { with: /[\\p{S}\\p{P}]/, message: :no_special }, on: :password\n</code></pre>\n<p>The context doesn't have to be named after an attribute, using <code>:foo</code> instead of <code>:password</code> would also be just fine. You can then run these validations by passing a context when calling <code>valid?</code> or <code>save</code>.</p>\n<pre><code>author.valid?(:password)\nauthor.save(context: :password)\n</code></pre>\n<p>If you use Rails 5 or higher you can pass multiple contexts as an array if you want to run a mix of validations. <code>author.valid?([:create, :password])</code></p>\n<p>For additional info about the regexes used check out the <a href=\"https://ruby-doc.org/core-2.7.1/doc/regexp_rdoc.html#label-Character+Properties\" rel=\"nofollow noreferrer\">Ruby regexp documentation</a>.</p>\n"}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59311163, "answer_count": 2, "score": 0, "last_activity_date": 1595636865, "creation_date": 1576103310, "last_edit_date": 1595636865, "question_id": 59295083, "link": "https://stackoverflow.com/questions/59295083/why-password-validation-does-not-work-after-adding-password-recovery", "title": "Why password validation does not work after adding password recovery?", "body": "<p>Faced a problem not clear to me.\nI used password validation during registration.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>def pass_val\n    if password_digest.count(&quot;a-z&quot;) &lt;= 0 || password_digest.count(&quot;A-Z&quot;) &lt;= 0 \n      errors.add(:password, &quot;must contain 1 small letter, 1 capital letter and minimum 8 symbols&quot;)\n    end\n  end\nvalidates :password_digest, presence: true,\n                            length: { minimum: 8 }\n</code></pre>\n<p>I made it possible to recover the password for the user, and validation just stopped working.\nI changed all <code>password_digest</code> in validation to just <code>password</code> and validation worked again.\nBUT, after that, password recovery disappeared, which began to curse for validation.</p>\n<pre><code>NoMethodError in PasswordResetsController#create\nundefined method `count' for nil:NilClass\n</code></pre>\n<p>If I change all <code>password</code> again to <code>password_digest</code>, validation will disappear, but the recovery password will work again.</p>\n<p><strong>UPDATE</strong></p>\n<ol>\n<li>Using <code>password</code> - validation in the console works (it also works on the site. Passwords recovery does not work).</li>\n<li>Using <code>password_digest</code> - validation in the console also works (it doesn\u2019t work on the site, the recovery password works).</li>\n</ol>\n<p><strong>UPDATE 2</strong>\n<strong>Moreover, an error occurs during password recovery when a letter is sent to the mail (before sending), and not exactly during the password change.</strong></p>\n<p><strong>UPDATE 3</strong>\ncreate method in PasswordResetsController:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>def create\n  author = Author.find_by_email(params[:email])\n  author.send_password_reset if author\n  flash[:success] = &quot;Email sent with password reset instructions.&quot;\n  redirect_to root_path\nend\n</code></pre>\n<p><strong>UPDATE 4</strong>\nsend password_reset:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>  def send_password_reset\n    confirmation_token\n    self.password_reset_sent_at = Time.zone.now\n    save!\n    AuthorMailer.password_reset(self).deliver!\n  end\n</code></pre>\n<p>But the letter is not sent, crashes up to this point.\n<strong>I want to emphasize</strong> that I either use <code>password_digest</code> in validation and validation does not work, and password recovery works. Or I use <code>password</code> in validation and validation works, but password recovery does not.</p>\n<p>Also, it\u2019s worth noting that the create method in PasswordResetsController is not used to change the password, but to send an email to the email. I can\u2019t understand why validation swears at him.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "edited": false, "score": 0, "creation_date": 1576177411, "post_id": 59295337, "comment_id": 104824444, "body": "I&#39;m loath to say it, but you might be right about adding an &quot;is_primary&quot; flag.  Your solution works in mysql, but it doesn&#39;t work in sqlite, which I&#39;m using for initial testing.  The &quot;is_primary&quot; flag might be the most compatible solution."}], "tags": [], "owner": {"reputation": 4580, "user_id": 59075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb05d5355508fa766fb488ed51a7d5?s=128&d=identicon&r=PG", "display_name": "Darren Hicks", "link": "https://stackoverflow.com/users/59075/darren-hicks"}, "is_accepted": false, "score": 0, "last_activity_date": 1576109305, "last_edit_date": 1576109305, "creation_date": 1576104683, "answer_id": 59295337, "question_id": 59295028, "link": "https://stackoverflow.com/questions/59295028/activerecord-query-for-each-users-latest-email-address-in-a-table-of-email-addr/59295337#59295337", "title": "ActiveRecord query for each user&#39;s latest email address in a table of email addresses", "body": "<p>This isn't pretty, but...</p>\n\n<pre><code>sql = \"SELECT *\nFROM emails e1 WHERE (user_id,id) IN \n( SELECT user_id, MAX(id)\n  FROM emails e2\n  GROUP BY user_id\n)\"\n\nEmail.find_by_sql(sql)\n</code></pre>\n\n<p>If you really need to use <code>created_at</code> to determine the ordering, then, so long as <code>created_at</code> values are unique, you can replace <code>id</code> above with <code>created_at</code> and get the same results.</p>\n\n<p>However, if at all possible, I strongly suggest you add an is_primary flag to the table to allow a user to clearly denote the email address that they expect to be contacted with.  You would also want to add logic and validations to ensure only one email per user_id had is_primary = true.</p>\n\n<p>This change would also eliminate the need for the nested grouped query you were forced to discover herein.</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "edited": false, "score": 0, "creation_date": 1576176250, "post_id": 59299545, "comment_id": 104823990, "body": "This is still giving me the oldest record in a group, not the latest."}], "tags": [], "owner": {"reputation": 533, "user_id": 1478095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7326ae0deb2809921bcd3b7348cf441e?s=128&d=identicon&r=PG", "display_name": "crazy_phage", "link": "https://stackoverflow.com/users/1478095/crazy-phage"}, "is_accepted": false, "score": 0, "last_activity_date": 1576135321, "creation_date": 1576135321, "answer_id": 59299545, "question_id": 59295028, "link": "https://stackoverflow.com/questions/59295028/activerecord-query-for-each-users-latest-email-address-in-a-table-of-email-addr/59299545#59299545", "title": "ActiveRecord query for each user&#39;s latest email address in a table of email addresses", "body": "<p>There might be several ways to do it, you can try this one:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Email.all.group(:user_id).order(\"max(emails.created_at) DESC\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "edited": false, "score": 0, "creation_date": 1576176675, "post_id": 59301965, "comment_id": 104824155, "body": "This gives me the oldest email for each user.  I need the newest email for each user."}, {"owner": {"reputation": 21, "user_id": 12504742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wlk9T9Bd_Rw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrxEYALJ9tCYAccDWfvmvgQge0Sg/photo.jpg?sz=128", "display_name": "Bilal Ahmad", "link": "https://stackoverflow.com/users/12504742/bilal-ahmad"}, "reply_to_user": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "edited": false, "score": 0, "creation_date": 1576220560, "post_id": 59301965, "comment_id": 104835962, "body": "then add this line at the end &quot;  emails = Ordered_emails.reverse! &quot;"}], "tags": [], "owner": {"reputation": 21, "user_id": 12504742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wlk9T9Bd_Rw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrxEYALJ9tCYAccDWfvmvgQge0Sg/photo.jpg?sz=128", "display_name": "Bilal Ahmad", "link": "https://stackoverflow.com/users/12504742/bilal-ahmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1576144754, "creation_date": 1576144754, "answer_id": 59301965, "question_id": 59295028, "link": "https://stackoverflow.com/questions/59295028/activerecord-query-for-each-users-latest-email-address-in-a-table-of-email-addr/59301965#59301965", "title": "ActiveRecord query for each user&#39;s latest email address in a table of email addresses", "body": "<p>Try this </p>\n\n<pre><code>emails=Email.all.group(:user_id)\nOrdered_emails = emails.sort_by &amp;:created_at\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1576144754, "creation_date": 1576103026, "question_id": 59295028, "link": "https://stackoverflow.com/questions/59295028/activerecord-query-for-each-users-latest-email-address-in-a-table-of-email-addr", "title": "ActiveRecord query for each user&#39;s latest email address in a table of email addresses", "body": "<p>I wanted to keep track of user's changing their email addresses so I created a \"users\" table which is referenced by an \"emails\" table.  The contents of the \"users\" table is unimportant for this question.  The \"emails\" table contains a string \"email\" column as well as the usual \"id\", \"user_id\", \"created_at\", \"updated_at\" columns.  When a user's email is changed, a new record is added to the \"emails\" table which references the user by \"user_id\".  So any given user could have multiple email addresses in the \"emails\" table, but only the latest one is relevant contact information.</p>\n\n<p>The models are setup as follows:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n   has_many :emails\nend\n\nclass Email &lt; ApplicationRecord\n   belongs_to :user\nend\n</code></pre>\n\n<p>I would like to get a listing of all users' current email addresses.  I'm looking for a way to do this with maybe one or two queries, not iterating through every user.  I'm guessing it's something like the following:</p>\n\n<pre><code>Email.order(created_at: :desc).group(:user_id)\n</code></pre>\n\n<p>but that seems to give me the oldest email address for every user, not the latest.  I'm currently using Rails 5.1.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubocop", "linter"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576103677, "post_id": 59295023, "comment_id": 104794654, "body": "<i>I&#39;ve tried changing the settings for Layout/DefEndAlignment, Layout/EndAlignment, Layout/BlockAlignment and a few others</i> Post what you tried and the outcomes of trying them. Don&#39;t make everyone reproduce work that you&#39;ve already tried and determined not to be the solution."}, {"owner": {"reputation": 1387, "user_id": 3981789, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OO3JI.jpg?s=128&g=1", "display_name": "Rockster160", "link": "https://stackoverflow.com/users/3981789/rockster160"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576103787, "post_id": 59295023, "comment_id": 104794691, "body": "@anothermh - Sorry I wasn&#39;t clear. I meant changing all/any of those settings has 0 effect on the layout of any sort. I&#39;ll update the post for clarity."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576104171, "post_id": 59295023, "comment_id": 104794808, "body": "You&#39;re still haven&#39;t said what you&#39;ve tried. You&#39;re essentially saying &quot;I know a bunch of things that don&#39;t work but I won&#39;t tell you what they are. I want you to spend time figuring out what I already know doesn&#39;t work.&quot; Think about your audience. If you&#39;ve tried x and got outcome y but desire outcome z, explain what x, y and z are. Repeat for every iteration you&#39;ve tried."}, {"owner": {"reputation": 1387, "user_id": 3981789, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OO3JI.jpg?s=128&g=1", "display_name": "Rockster160", "link": "https://stackoverflow.com/users/3981789/rockster160"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576111646, "post_id": 59295023, "comment_id": 104796658, "body": "I&#39;m still not sure how exactly you expect the question to be phrased? Rubocop has thousands of different cops, and I didn&#39;t keep a running tab of every single one I tried. I listed the relevant ones because those are the ones that SHOULD matter, the rest of them are irrelevant."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576117131, "post_id": 59295023, "comment_id": 104797723, "body": "That&#39;s my point: there are <b>tons</b> of things that can be configured. You&#39;ve already spent time trying things and none of them worked. <i>You should post in your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> the things you tried that did not work</i>. Instead, you&#39;ve decided it&#39;s better to say &quot;there are lots of options, I didn&#39;t keep track of my work, so please go replicate all the work I&#39;ve already done until you find the answer for me.&quot; Imagine how much time you could save by sharing the work you&#39;ve done! Imagine how polite it would be to make the smallest effort to help the people you&#39;re asking for help!"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576117518, "post_id": 59295023, "comment_id": 104797787, "body": "<code>EndAlignment</code> has three options, <code>BlockAlignment</code> has three options, and <code>DefEndAlignment</code> has two options. You&#39;re basically asking us to try all the combinations of these options -- and any others that may be relevant -- even though you&#39;ve already tested some number of these combinations and found they didn&#39;t work. Why would you not include that information in your post so that people don&#39;t have to replicate a bunch of steps that you already know won&#39;t work? If the answer truly is &quot;I didn&#39;t keep track,&quot; then go do the work of keeping track and post it here."}, {"owner": {"reputation": 1387, "user_id": 3981789, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OO3JI.jpg?s=128&g=1", "display_name": "Rockster160", "link": "https://stackoverflow.com/users/3981789/rockster160"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576268739, "post_id": 59295023, "comment_id": 104858090, "body": "Not trying to argue- but clearly we&#39;re not understanding each other. The point of that line was, &quot;I tried irrelevant things and they obviously didn&#39;t work.&quot; I ate a banana while trying it- should I include that in the steps as well? The other work I did was not relevant, therefore, not mentioned explicitly outside of &quot;I&#39;m frustrated and just trying rubbish at this point.&quot; I could have been more clear saying that I&#39;ve tried each of the available options on the 3 relevant to no avail, you are correct."}], "answers": [{"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 2, "last_activity_date": 1576137552, "last_edit_date": 1576137552, "creation_date": 1576131126, "answer_id": 59298668, "question_id": 59295023, "link": "https://stackoverflow.com/questions/59295023/rubocop-end-alignment-for-begin-blocks/59298668#59298668", "title": "Rubocop: end alignment for begin blocks", "body": "<p><strong>Update:</strong> This is a known issue (<a href=\"https://github.com/rubocop-hq/rubocop/pull/7286\" rel=\"nofollow noreferrer\">https://github.com/rubocop-hq/rubocop/pull/7286</a>)</p>\n\n<p><strong>Original answer:</strong></p>\n\n<blockquote>\n  <p>Given the [input] ..</p>\n\n<pre><code>begin\n      # Foo\n    end\n</code></pre>\n</blockquote>\n\n<p>Testing with latest rubocop (0.77.0) ..</p>\n\n<ul>\n<li><code>BlockAlignment</code> is only concerned with <code>do .. end</code> blocks, per the docs.</li>\n<li><code>BlockEndNewline</code> only cares that <code>end</code> is on its own line, and does not seem to care about indentation</li>\n<li><code>DefEndAlignment</code> not applicable, I think, because it's not a method definition (a <code>def</code>)</li>\n<li><code>EndAlignment</code> seems <strong>the most relevant</strong>, but does not seem to support <code>begin</code>. It supports lots of other things (<code>class</code>, <code>module</code>, <code>if</code>, <code>while</code>, etc.) so <strong>perhaps this is an oversight</strong>.</li>\n<li><code>IndentationConsistency</code> seems to only be concerned with the contents of blocks, and seems to ignore the <code>end</code></li>\n<li><code>IndentationWidth</code> is described as a \"companion\" to <code>IndentationConsistency</code> and accordingly also seems to only be concerned with the contents of blocks</li>\n<li><code>RescueEnsureAlignment</code> is relevant to blocks, but seems to be only concerned with the <code>rescue</code> and <code>ensure</code> keywords</li>\n</ul>\n\n<p>In conclusion, this seems like an oversight in the implementation of <code>EndAlignment</code> in the latest rubocop (0.77.0). I'd suggest opening an issue.</p>\n"}], "owner": {"reputation": 1387, "user_id": 3981789, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OO3JI.jpg?s=128&g=1", "display_name": "Rockster160", "link": "https://stackoverflow.com/users/3981789/rockster160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576268961, "creation_date": 1576102984, "last_edit_date": 1576268961, "question_id": 59295023, "link": "https://stackoverflow.com/questions/59295023/rubocop-end-alignment-for-begin-blocks", "title": "Rubocop: end alignment for begin blocks", "body": "<p>I may be missing something obvious, but it seems that Rubocop skips the alignment of <code>end</code> when closing a <code>begin</code> block. </p>\n\n<p>Given the case:</p>\n\n<pre><code>  begin\n        # Foo\n      end\n</code></pre>\n\n<p>I would expect the \"end\" to have a Layout error: <code>Layout/EndAlignment end is not aligned with begin</code>\nHowever, Rubocop seems to believe this is correct.</p>\n\n<p>I would expect one of <code>Layout/DefEndAlignment</code>, <code>Layout/EndAlignment</code>, and <code>Layout/BlockAlignment</code> to manage this behavior, but no option in any of them seems to have any effect.</p>\n\n<p>Any Rubocop experts know how to fix this configuration, or is this a potential bug?</p>\n\n<p>Use case of using <code>begin</code> without a <code>rescue</code> is using memoization to set a calculated value</p>\n\n<pre><code>@ivar ||= begin\n  # Do some stuff\n  # Do more stuff\n  # Then return the value\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1576104100, "post_id": 59294978, "comment_id": 104794783, "body": "You&#39;re probably trying to decide between <a href=\"https://www.freecodecamp.org/news/single-table-inheritance-vs-polymorphic-associations-in-rails-af3a07a204f2/\" rel=\"nofollow noreferrer\">STI or polymorphic</a>. From your description, you probably want STI."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "edited": false, "score": 0, "creation_date": 1577292384, "post_id": 59294978, "comment_id": 105137277, "body": "WordPress is just category post ?"}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 7479934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007344395075/picture?type=large", "display_name": "Amanda Ferrari", "link": "https://stackoverflow.com/users/7479934/amanda-ferrari"}, "edited": false, "score": 0, "creation_date": 1576165790, "post_id": 59299853, "comment_id": 104818798, "body": "Can you give me an example with the correct entities?"}], "tags": [], "owner": {"reputation": 533, "user_id": 1478095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7326ae0deb2809921bcd3b7348cf441e?s=128&d=identicon&r=PG", "display_name": "crazy_phage", "link": "https://stackoverflow.com/users/1478095/crazy-phage"}, "is_accepted": false, "score": 0, "last_activity_date": 1576136686, "creation_date": 1576136686, "answer_id": 59299853, "question_id": 59294978, "link": "https://stackoverflow.com/questions/59294978/seeking-help-to-prevent-adding-table-with-too-many-columns/59299853#59299853", "title": "Seeking help to prevent adding table with too many columns", "body": "<p>I think there is another way to do that, changing the database. Like mongoDB, it's easier to meet your goal. If you dont't like mongoDB you can choose Postgres either, which can store hash like data structure.   </p>\n\n<p>Back to your polymorphic problem</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Person &lt; ActiveRecord::Base\n  has_one :address, :as =&gt; :addressable\nend\n\nclass Company &lt; ActiveRecord::Base\n  has_one :address, :as =&gt; :addressable\nend\n\nclass Address &lt; ActiveRecord::Base\n  belongs_to :addressable, :polymorphic =&gt; true\nend\n</code></pre>\n\n<p>In above example, address is the common part.\nSo you should define two classes</p>\n\n<pre><code>Post\n  - WordpressPost\n    -  Content\n  - DrupalPost\n    -  Content\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 345, "user_id": 12414906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD5suJdYcDeghXgTWphTBGjGZoPQQxt-xOY-16MfA=k-s128", "display_name": "Ganeshkumar K", "link": "https://stackoverflow.com/users/12414906/ganeshkumar-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1577291999, "last_edit_date": 1577291999, "creation_date": 1577289147, "answer_id": 59479882, "question_id": 59294978, "link": "https://stackoverflow.com/questions/59294978/seeking-help-to-prevent-adding-table-with-too-many-columns/59479882#59479882", "title": "Seeking help to prevent adding table with too many columns", "body": "<p>As u need different set of columns for different post type based on the cms(post source), \nyou have to setup specific set of columns required by each post source.</p>\n\n<p>setting up all the required columns in the same Post model itself is not recommended. \nbecause scenarios like removing a post source or adding a post source into your application will be hard in future.</p>\n\n<hr>\n\n<p>The solution I suggest is to setup a separate model for each post source like</p>\n\n<pre><code>class WordpressPost &lt; ActiveRecord::Base\n    belongs_to :post\nend\n\nclass JoomlaPost &lt; ActiveRecord::Base\n    belongs_to :post    \nend\n</code></pre>\n\n<p>Each of these model will have their own specific set of columns like status and data for WordpressPost model and so on to hold the post data along with the post_id.</p>\n\n<hr>\n\n<p>Then, the Post model can be updated like</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n     belongs_to :blog\n\n     has_one: wordpress_post\n     has_one: joomla_post\nend\n</code></pre>\n\n<p>Additionally, in the posts table, \nyou have to include a column called 'post_source' which stores the integer values to denote the post source type.\nthe reference value for each integer value can be obtained using an helper function like</p>\n\n<pre><code>def get_post_source(source_val)\n    if (source_val == 1)\n        source_info = { name: 'Wordpress', model: 'WordpressPost' }\n    elsif (source_val == 2)\n        source_info = { name: 'Joomla', model: 'JoomlaPost' }\n    end\n    return source_info\nend\n</code></pre>\n\n<p>Using this approach, </p>\n\n<p>you can maintain scalability with ease.\nIf you have to remove joomla posts entirely from your application, then you can do that without affecting the structure of any other model.\nSimilarly, you can also add other new post sources like drupal, medium and so on by adding separate models for each.</p>\n"}, {"comments": [{"owner": {"reputation": 382, "user_id": 7479934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007344395075/picture?type=large", "display_name": "Amanda Ferrari", "link": "https://stackoverflow.com/users/7479934/amanda-ferrari"}, "edited": false, "score": 0, "creation_date": 1577738662, "post_id": 59492247, "comment_id": 105242891, "body": "Although this answer shows me the differences, it doesn&#39;t help me with a real suggestion on how to solve the problem. What would be your suggestions?"}, {"owner": {"reputation": 957, "user_id": 7219974, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-4_5zN89Hjdc/AAAAAAAAAAI/AAAAAAAAADI/AIKD9aq0H8s/photo.jpg?sz=128", "display_name": "Rafael Costa", "link": "https://stackoverflow.com/users/7219974/rafael-costa"}, "reply_to_user": {"reputation": 382, "user_id": 7479934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007344395075/picture?type=large", "display_name": "Amanda Ferrari", "link": "https://stackoverflow.com/users/7479934/amanda-ferrari"}, "edited": false, "score": 0, "creation_date": 1578081899, "post_id": 59492247, "comment_id": 105335758, "body": "I edited the answer with a proposed solution @AmandaFerrari, I expect to had been of some help."}], "tags": [], "owner": {"reputation": 957, "user_id": 7219974, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-4_5zN89Hjdc/AAAAAAAAAAI/AAAAAAAAADI/AIKD9aq0H8s/photo.jpg?sz=128", "display_name": "Rafael Costa", "link": "https://stackoverflow.com/users/7219974/rafael-costa"}, "is_accepted": true, "score": 4, "last_activity_date": 1578081836, "last_edit_date": 1578081836, "creation_date": 1577385810, "answer_id": 59492247, "question_id": 59294978, "link": "https://stackoverflow.com/questions/59294978/seeking-help-to-prevent-adding-table-with-too-many-columns/59492247#59492247", "title": "Seeking help to prevent adding table with too many columns", "body": "<p>when mapping OO inheritance to relational database we traditionally have three ways of doing it (as highlighted in this <a href=\"https://aksakalli.github.io/2015/06/16/mapping-inheritance-to-relational-databases.html\" rel=\"nofollow noreferrer\">link</a>):</p>\n\n<ol>\n<li><strong>Single Table Inheritance(STI):</strong> One table with all the attributes used by all the subclasses. <em>This way is more suitable for cases where the attributes don't change much from one subclass to another.</em>\n<a href=\"https://i.stack.imgur.com/b7cUr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b7cUr.png\" alt=\"Single Table Inheritance example\"></a></li>\n<li><strong>Class Table Inheritance(MTI):</strong> One dad table with common attributes, and child tables for each subclass with their specific attributes and a foreign key to the dad table. <em>Good when there are many different attributes between each subclass and even different associations.</em>\n<a href=\"https://i.stack.imgur.com/Vbrdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vbrdn.png\" alt=\"Class Table Inheritance example\"></a></li>\n<li><strong>Concrete Table Inheritance:</strong> One table for each class with all the needed attributes. <em>May be good if there are little common attributes.</em>\n\n<h2><a href=\"https://i.stack.imgur.com/peF8b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/peF8b.png\" alt=\"Concrete Table Inheritance example\"></a></h2></li>\n</ol>\n\n<p>Rails allow us to create a <strong>Single Table Inheritance(STI)</strong> and we can also use the <strong>Concrete Table Inheritance</strong>. But it doesn't have a built in way of dealing with the <strong>Class Table Inheritance</strong>(known as well as Multiple Table Inheritance - <strong>MTI</strong>), what doesn't prevents you from creating your own way of doing it, like it is done in this <a href=\"https://www.belighted.com/blog/implementing-multiple-table-inheritance-in-rails\" rel=\"nofollow noreferrer\">post</a>.</p>\n\n<p>Rails also allow us to have a <strong>Polymorphic Association</strong>, <em>which is useful when we want an association of one type for certain records and of another for others</em>, this can be used for inheritance, but was not actually designed for this. In this <a href=\"https://medium.com/@User3141592/when-to-use-single-table-inheritance-vs-multiple-table-inheritance-db7e9733ae2e\" rel=\"nofollow noreferrer\">link</a> you will find an example of all the three types and how to use them.</p>\n\n<hr>\n\n<p>Another way to achieve it is by having an <code>options jsonb field</code>. <em>This is a good approach when you have unpredictable/changeable fields that will vary from one record to another.</em> Which is a much simpler way but must be well designed, cause may have some downsides.</p>\n\n<hr>\n\n<p><strong>Proposed Solution:</strong></p>\n\n<p><strong><em>I wouldnt use:</em></strong></p>\n\n<ul>\n<li><strong>STI:</strong> as you said it is going to be a lot of different management systems, I believe it is not a good idea because you would have too many unused columns.</li>\n<li><strong>Concrete Table Inheritance:</strong> I guess you want to make it easy to add new management systems as you go, treating them as one and ignoring their nuances. So it is not really a good option because it would make it harder to understand their commonalities.</li>\n</ul>\n\n<p><strong><em>I could use:</em></strong></p>\n\n<ul>\n<li><strong>MTI:</strong> it would be a good database design, but as youre using rails you would have to deal with it your own way and it could add some complexity to the code. I would use it if I were more concerned about having a normalized database.</li>\n<li><strong>Polymorphic Association:</strong> would add some complexity to the database when compared to the <em>MTI</em> and to make it usable as an inheritance would add some complexity to the code as well. I prefer using it with an actual polymorphic association.</li>\n</ul>\n\n<p><strong><em>I would use:</em></strong></p>\n\n<ul>\n<li><strong>An options json field:</strong> I believe you will need to access this specific attributes just in some specific moments and that each different management system wouldn't have other associations. So I guess it would be the most straightforward solution being totally supported by both rails and the database without adding complexity to neither one.</li>\n</ul>\n\n<p><em>Ps: If you have just some little different attributes, I would use a STI instead.</em></p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 4311690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YIRVESeG5ns/AAAAAAAAAAI/AAAAAAAAAbY/Pu-ANqEzDlU/photo.jpg?sz=128", "display_name": "Fernando Luengo", "link": "https://stackoverflow.com/users/4311690/fernando-luengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577752329, "creation_date": 1577752329, "answer_id": 59538326, "question_id": 59294978, "link": "https://stackoverflow.com/questions/59294978/seeking-help-to-prevent-adding-table-with-too-many-columns/59538326#59538326", "title": "Seeking help to prevent adding table with too many columns", "body": "<p>From the answer from Rafael, you could use the singl etable inheritance.</p>\n\n<p>first, allow null data in the status and date columns (you need to create a migration for that), and even create a new column that stores the content management system so later you could do a validation before saving (ensuring that the column exist in the cases that are needed) or to make querys only on some of your content by cms.</p>\n"}], "owner": {"reputation": 382, "user_id": 7479934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007344395075/picture?type=large", "display_name": "Amanda Ferrari", "link": "https://stackoverflow.com/users/7479934/amanda-ferrari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 59492247, "answer_count": 4, "score": 4, "last_activity_date": 1578081836, "creation_date": 1576102773, "last_edit_date": 1576104401, "question_id": 59294978, "link": "https://stackoverflow.com/questions/59294978/seeking-help-to-prevent-adding-table-with-too-many-columns", "title": "Seeking help to prevent adding table with too many columns", "body": "<p>In my app I have a model called <code>Post</code>, that has a belongs to association with the <code>Blog</code>. That's how they look like:</p>\n\n<p><code>app/models/post</code>:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :blog\nend\n</code></pre>\n\n<p><code>app/models/blog</code>:</p>\n\n<pre><code>class Blog &lt; ApplicationRecord\n  has_many :posts\nend\n</code></pre>\n\n<p>The app will collect and store posts of a lot of content management systems (like Wordpress), and there are columns that should only exist for certain types of posts. I would like to know if it's possible to have some kinda of hierarchy, like this:</p>\n\n<pre><code>Post\n  - WordpressPost\n  - DrupalPost\n</code></pre>\n\n<p>This is important because that are columns that should only exist when it's a <code>WordpressPost</code>, for example.</p>\n\n<p>I've tried to understand something called  Polymorphic association (I really did), but I just can't get my head around the concept, and I'm also not sure if that's what's going to allow me that flexibility.</p>\n\n<p>Right now the <code>posts</code> table look like this:</p>\n\n<pre><code>+------------+---------------------------------------------------------------------------+------+-----+---------+----------------+\n| Field      | Type                                                                      | Null | Key | Default | Extra          |\n+------------+---------------------------------------------------------------------------+------+-----+---------+----------------+\n| id         | bigint(20)                                                                | NO   | PRI | NULL    | auto_increment |\n| site_id    | bigint(20)                                                                | NO   | MUL | NULL    |                |\n| status     | enum('auto_draft','draft','future','pending','private','publish','trash') | NO   |     | NULL    |                |\n| date       | datetime                                                                  | NO   |     | NULL    |                |\n| title      | varchar(255)                                                              | NO   |     | NULL    |                |\n| url        | varchar(255)                                                              | NO   |     | NULL    |                |\n| body       | longtext                                                                  | NO   |     | NULL    |                |\n| created_at | datetime(6)                                                               | NO   |     | NULL    |                |\n| updated_at | datetime(6)                                                               | NO   |     | NULL    |                |\n+------------+---------------------------------------------------------------------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>But things like:</p>\n\n<pre><code>- status\n- date\n</code></pre>\n\n<p>Should only exist for Wordpress posts. I really would like to understand the best way to do what I want.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "activeadmin"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576103399, "post_id": 59294835, "comment_id": 104794570, "body": "Reduce to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 0, "creation_date": 1580242689, "post_id": 59294835, "comment_id": 106031772, "body": "Did your migration run successfully on production? Perhaps include your migration code with your question."}], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576103105, "creation_date": 1576102070, "last_edit_date": 1576103105, "question_id": 59294835, "link": "https://stackoverflow.com/questions/59294835/error-adding-a-new-field-to-active-admin-only-in-production", "title": "error adding a new field to active admin only in production", "body": "<p>I created the migration to add two new fields to the database, run rake db: migrate, added the name of the fields in project.rb inside the admin folder. It works in development perfectly and even saves the fields, but when I move it to the server in production it gives me the following error on the server:</p>\n\n<pre><code>[2019-12-11T22:00:51.534672 #15667]  INFO -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f] Completed 500 Internal Server Error in 315ms (ActiveRecord: 37.3ms)\nF, [2019-12-11T22:00:51.535812 #15667] FATAL -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f]   \nF, [2019-12-11T22:00:51.535846 #15667] FATAL -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f] ActionView::Template::Error (undefined method `location' for #&lt;Project:0x00007fa6d4beeee8&gt;):\nF, [2019-12-11T22:00:51.535960 #15667] FATAL -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f]     1: insert_tag renderer_for(:new)\nF, [2019-12-11T22:00:51.535982 #15667] FATAL -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f]   \nF, [2019-12-11T22:00:51.536001 #15667] FATAL -- : [ddc2376a-4f4b-4744-be87-bde2ff699b2f] app/admin/project.rb:66:in `block (3 levels) in &lt;main&gt;'\n[ddc2376a-4f4b-4744-be87-bde2ff699b2f] app/admin/project.rb:50:in `block (2 levels) in &lt;main&gt;'\nI, [2019-12-11T22:00:51.819833 #15667]  INFO -- : [4a176034-3ddd-40cf-8b59-017915796ee0] Started GET \"/favicon.ico\" for 190.122.220.221 at 2019-12-11 22:00:51 +0000\nF, [2019-12-11T22:00:51.820622 #15667] FATAL -- : [4a176034-3ddd-40cf-8b59-017915796ee0]   \nF, [2019-12-11T22:00:51.820663 #15667] FATAL -- : [4a176034-3ddd-40cf-8b59-017915796ee0] ActionController::RoutingError (No route matches [GET] \"/favicon.ico\"):\nF, [2019-12-11T22:00:51.820685 #15667] FATAL -- : [4a176034-3ddd-40cf-8b59-017915796ee0]   \nF, [2019-12-11T22:00:51.820709 #15667] FATAL -- : [4a176034-3ddd-40cf-8b59-017915796ee0] actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'\n[4a176034-3ddd-40cf-8b59-017915796ee0] railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'\n[4a176034-3ddd-40cf-8b59-017915796ee0] activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'\n[4a176034-3ddd-40cf-8b59-017915796ee0] activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'\n[4a176034-3ddd-40cf-8b59-017915796ee0] railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] rack (2.0.7) lib/rack/method_override.rb:22:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] rack (2.0.7) lib/rack/runtime.rb:22:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] rack (2.0.7) lib/rack/sendfile.rb:111:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] railties (5.2.3) lib/rails/engine.rb:524:in `call'\n[4a176034-3ddd-40cf-8b59-017915796ee0] /usr/lib/ruby/vendor_ruby/phusion_passenger/rack/thread_handler_extension.rb:97:in `process_request'\n[4a176034-3ddd-40cf-8b59-017915796ee0] /usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:149:in `accept_and_process_next_request'\n[4a176034-3ddd-40cf-8b59-017915796ee0] /usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:110:in `main_loop'\n[4a176034-3ddd-40cf-8b59-017915796ee0] /usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler.rb:415:in `block (3 levels) in start_threads'\n[4a176034-3ddd-40cf-8b59-017915796ee0] /usr/lib/ruby/vendor_ruby/phusion_passenger/utils.rb:113:in `block in create_thread_and_abort_on_exception'\n</code></pre>\n\n<p>This is my project.rb inside the admin folder: </p>\n\n<pre><code>ActiveAdmin.register Project do\n  actions :all\n  permit_params :title, :end_time, :content, :extract, :picture, :user_id, :brand_name, :payment_amount, :link, :is_link, :location, :job_type\n\n  filter :id\n  filter :identifier\n  filter :title\n  filter :end_time\n\n  # list configuration\n  index do\n    column :id\n    column(:picture) { |project| image_tag(project.picture.url(:thumb), :width =&gt; \"40\") }\n    column :title do |project|\n      url = url_for :controller =&gt; '/project', :action =&gt; 'show', :identifier =&gt; project\n      link_to project.title, url\n    end\n    column :extract\n    column :end_time\n    actions\n  end\n\n  show do\n    attributes_table do\n      row :id\n      if project.picture.present?\n        row(:picture) { |project| image_tag(project.picture.url(:thumb)) }\n      end\n      row :identifier\n      row :title\n      row (:content) { |post| raw(post.content) } \n      row :extract\n      row :end_time\n      row :created_at\n      row :updated_at\n      row :user_id\n      row :brand_name\n      row :payment_amount\n      row :link\n      bool_row :is_link\n      row :location\n      row :job_type\n\n    end\n  end\n\n  form :html =&gt; { :enctype =&gt; \"multipart/form-data\" } do |f|\n    f.inputs do\n      f.input :title\n      f.input :content\n      f.input :end_time, as: :datepicker,\n        datepicker_options: {\n          min_date: 3.days.ago.to_date\n        }\n      f.input :picture, :as =&gt; :file, :hint =&gt; f.object.picture.present?\\\n        ? image_tag(f.object.picture.url(:thumb))\n        : content_tag(:span, \"no cover page yet\")\n\n      f.input :user_id, :as =&gt; :select, :collection =&gt; User.where(\"plan_id = 4\").collect {|user| [\"#{user.name} #{user.last_name}\", user.id] }\n      f.input :brand_name\n      f.input :payment_amount\n      f.input :link\n      f.input :is_link, :as =&gt; :select, :collection =&gt; [[\"True\",1],[\"False\",0]]\n      f.input :location\n      f.input :job_type\n    end\n    f.actions\n  end\n\n  controller do\n    defaults :finder =&gt; :find_by_identifier\n  end\n\nend\n</code></pre>\n\n<p>apparently it is not taking the new \"location\" field, what could I be missing?</p>\n"}, {"tags": ["ruby", "logging", "io-redirection", "stderr", "bugsnag"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576103310, "post_id": 59294250, "comment_id": 104794537, "body": "Never used bugsnag, but what&#39;s wrong with adding <code>Rails.logger.error e</code>?"}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576181162, "post_id": 59294250, "comment_id": 104825865, "body": "@anothermh If you have hundreds of <code>Bugsnag.notify(e)</code>, it&#39;s not practical to change them all to another log mechanism. That being said, I used <code>puts ...</code> in a few locations to verify that things were happening as expected. That worked."}], "owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576104848, "creation_date": 1576099176, "last_edit_date": 1576104848, "question_id": 59294250, "link": "https://stackoverflow.com/questions/59294250/how-do-i-send-bugsnag-notifices-to-stderr", "title": "How do I send Bugsnag notifices to stderr?", "body": "<p>I'm working on a Ruby software which may catch some errors (exceptions) and use Bugsnag to record the event in the Bugsnag logs.</p>\n\n<p>For example, I may have something like this:</p>\n\n<pre><code>begin\n  [...snip...]\nrescue StandardError =&gt; e\n  Bugsnag.notify(e)\nend\n</code></pre>\n\n<p>What I'd like to be able to do is redirect the message logged by that line of code to my console. That way I could get it to my log file and then search on it and see what's before/after it and make sure things are working as expected.</p>\n\n<p>Is there a way to setup Bugsnag to get such functionality?</p>\n"}, {"tags": ["ruby", "gets", "puts"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1576097919, "post_id": 59293523, "comment_id": 104792562, "body": "I don&#39;t know how you could have got that result, but I think what you want requires two statements in Ruby: <code>print &quot;Name? &quot;</code>, followed by <code>name = gets</code>. Note that if the user enters <code>&quot;Bob&quot;</code> (followed by pressing the &quot;Enter&quot; key), <code>name</code> will be set equal to <code>&quot;Bob\\n&quot;</code>. If you don&#39;t want the newline character it is common to write <code>name = gets.chomp</code>, which sets <code>name</code> equal to <code>&quot;Bob&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 0, "creation_date": 1576098293, "post_id": 59293979, "comment_id": 104792704, "body": "Is there any way to make it easier? But still thanks a lot, exactly what I needed :)"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 0, "creation_date": 1576098460, "post_id": 59293979, "comment_id": 104792767, "body": "The simplest piece of code that works, if you can accept a newline after the prompt is: <code>puts &#39;Name?&#39;; name = gets.chomp; puts &quot;Welcome #{name}&quot;</code>."}, {"owner": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 0, "creation_date": 1576099995, "post_id": 59293979, "comment_id": 104793394, "body": "That unfortunately produces <code>Bob Name? Welcome Bob   Process finished.</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 0, "creation_date": 1576100298, "post_id": 59293979, "comment_id": 104793522, "body": "Are you running this in an IDE? Try it in your console. I don&#39;t think an IDE is good for user input processing like this. I.e. this smells like an IDE issue, and not a Ruby issue."}, {"owner": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 0, "creation_date": 1576100467, "post_id": 59293979, "comment_id": 104793594, "body": "Yeah... I&#39;m running it in decoder on android :D but in PC it should work as you have said earlier?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "edited": false, "score": 1, "creation_date": 1576101337, "post_id": 59293979, "comment_id": 104793888, "body": "Yes. It works fine in the console on both Windows and Linux / OSX."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1576097944, "creation_date": 1576097944, "answer_id": 59293979, "question_id": 59293523, "link": "https://stackoverflow.com/questions/59293523/ruby-gets-issue/59293979#59293979", "title": "Ruby- gets issue", "body": "<p>You can write your own Python equivalent <code>input</code> method: </p>\n\n<pre><code>def input(prompt)\n  print(prompt)   # Output prompt\n  $stdout.flush   # Flush stdout buffers to ensure prompt appears\n  gets.chomp      # Get user input, remove final newline with chomp\nend\n</code></pre>\n\n<p>Now we can try it:</p>\n\n<pre><code>name = input('What is your name? ')\nputs \"Welcome #{name}\"\n</code></pre>\n\n<p>For more information on the methods used here. See these:</p>\n\n<ul>\n<li><a href=\"https://apidock.com/ruby/IO/flush\" rel=\"nofollow noreferrer\"><code>IO.flush</code></a></li>\n<li><a href=\"https://apidock.com/ruby/String/chomp\" rel=\"nofollow noreferrer\"><code>String.chomp</code></a></li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 12444448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c2dbe09e78768f29f81ff10a545c39?s=128&d=identicon&r=PG&f=1", "display_name": "oguh43", "link": "https://stackoverflow.com/users/12444448/oguh43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 59293979, "answer_count": 1, "score": 0, "last_activity_date": 1576097944, "creation_date": 1576095853, "question_id": 59293523, "link": "https://stackoverflow.com/questions/59293523/ruby-gets-issue", "title": "Ruby- gets issue", "body": "<p>I'm currently in the process of learning ruby,  and I don't know if I'm doing something wrong or the compiler is, but this code:</p>\n\n<pre><code>puts \"Name?\"\nname = gets\nputs \"Welcome \" + name\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>#blank line waiting for input, if gotten input\nPrints input, Name? And Welcome Name\n</code></pre>\n\n<p>I want it to do something like python's input(\"Name? \")</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1576095714, "post_id": 59293312, "comment_id": 104791661, "body": "Can you add example data and the desired output for that data?"}, {"owner": {"reputation": 3, "user_id": 11928462, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100764450996706/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/11928462/justin"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1576096306, "post_id": 59293312, "comment_id": 104791898, "body": "The desired output of the data, in sessions_array, would be [{:time=&gt;&quot;time1&quot;, :action=&gt;&quot;action1&quot;, :user=&gt;&quot;user1&quot;},{:time=&gt;&quot;time2&quot;, :action=&gt;&quot;action2&quot;, :user=&gt;&quot;user2&quot;},{:time=&gt;&quot;time3&quot;, :action=&gt;&quot;action3&quot;, :user=&gt;&quot;user3&quot;},...] . with every hash having unique values.  This output is correctly displayed via the &#39;puts sessions&#39; command in the block, but the sessions_array only receives one hash repeated and looks like: [{:time=&gt;&quot;time1&quot;, :action=&gt;&quot;action1&quot;, :user=&gt;&quot;user1&quot;}, {:time=&gt;&quot;time1&quot;, :action=&gt;&quot;action1&quot;, :user=&gt;&quot;user1&quot;}, {:time=&gt;&quot;time1&quot;, :action=&gt;&quot;action1&quot;, :user=&gt;&quot;user1&quot;},...]"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1576096423, "post_id": 59293312, "comment_id": 104791941, "body": "Edit your question instead of posting in the comments"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1576097357, "last_edit_date": 1576097357, "creation_date": 1576096026, "answer_id": 59293566, "question_id": 59293312, "link": "https://stackoverflow.com/questions/59293312/how-do-i-get-this-block-of-ruby-to-add-each-individual-hash-into-an-array-instea/59293566#59293566", "title": "How do I get this block of ruby to add each individual hash into an array instead of just adding one hash multiple times?", "body": "<p>Perhaps you are looking for something like the following.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def hashify(data, keys)     \n  data.map { |row| keys.zip(row).to_h }\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>data = [\n  %w| 11:00 pummel Billy-Bob |,\n  %w| 02:00 maim Trixie |,\n  %w| 19:00 kill Bill |\n]\n  #=&gt; [[\"11:00\", \"pummel\", \"Billy-Bob\"],\n  #    [\"02:00\", \"maim\", \"Trixie\"],\n  #    [\"19:00\", \"kill\", \"Bill\"]]\n\nkeys = [:time, :action, :user] \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>hashify(data, keys)\n  #=&gt; [{:time=&gt;\"11:00\", :action=&gt;\"pummel\", :user=&gt;\"Billy-Bob\"},\n  #    {:time=&gt;\"02:00\", :action=&gt;\"maim\", :user=&gt;\"Trixie\"},\n  #    {:time=&gt;\"19:00\", :action=&gt;\"kill\", :user=&gt;\"Bill\"}]\n</code></pre>\n\n<p>I have chosen to make <code>data</code> and <code>keys</code> arguments of the method so that those parameters can be modified without affecting the method itself.</p>\n\n<p>Note that each of the three elements of:</p>\n\n<pre><code>data.map { |row| keys.zip(row) }\n  #=&gt; [[[:time, \"11:00\"], [:action, \"pummel\"], [:user, \"Billy-Bob\"]],\n  #    [[:time, \"02:00\"], [:action, \"maim\"], [:user, \"Trixie\"]],\n  #    [[:time, \"19:00\"], [:action, \"kill\"], [:user, \"Bill\"]]]\n</code></pre>\n\n<p>is converted to a hash using the method <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\">Array#to_h</a>. See also <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">Array#zip</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1576096980, "last_edit_date": 1576096980, "creation_date": 1576096609, "answer_id": 59293700, "question_id": 59293312, "link": "https://stackoverflow.com/questions/59293312/how-do-i-get-this-block-of-ruby-to-add-each-individual-hash-into-an-array-instea/59293700#59293700", "title": "How do I get this block of ruby to add each individual hash into an array instead of just adding one hash multiple times?", "body": "<p>Create <code>sessions</code> inside of the <code>each_with_index</code> block instead of outside:</p>\n\n<pre><code>sessions_array = []\n\n@session.each do |element|\n  sessions = {\n    time: element[0],\n    action: element[1],\n    user: element[2],\n  }\n  sessions_array &lt;&lt; sessions\nend\n\nputs sessions_array\n</code></pre>\n\n<p>However, this can be done much more succinctly. When you're turning an array into another array with the same number of elements you almost always want to use <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a>. Also, in a Ruby block you can extract the elements from an array by specifying multiple names in its arguments (<code>|foo, bar, ...|</code>).</p>\n\n<p>This code is equivalent to the above:</p>\n\n<pre><code>sessions_array = @session.map do |time, action, user|\n  { time: time, action: action, user: user }\nend\n</code></pre>\n\n<p>You can see both of these snippets in action on repl.it here: <a href=\"https://repl.it/@jrunning/NavyImmaculateShockwave\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/NavyImmaculateShockwave</a></p>\n"}], "owner": {"reputation": 3, "user_id": 11928462, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100764450996706/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/11928462/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59293700, "answer_count": 2, "score": 0, "last_activity_date": 1576097357, "creation_date": 1576094918, "last_edit_date": 1576096647, "question_id": 59293312, "link": "https://stackoverflow.com/questions/59293312/how-do-i-get-this-block-of-ruby-to-add-each-individual-hash-into-an-array-instea", "title": "How do I get this block of ruby to add each individual hash into an array instead of just adding one hash multiple times?", "body": "<p><code>@session</code> is formatted as</p>\n\n<pre><code>[\n  ['time','action','user'],\n  ['time','action','user'],\n  ...\n]\n</code></pre>\n\n<p>and I'm trying to create an array that has those array elements but as hashes of <code>{:time=&gt;\"time, :action=&gt;\"action\", :user=&gt;\"user\"}</code>. The <code>puts sessions</code> line outputs each line as I desire, but when I try to capture those hashes into <code>sessions_array</code> I receive an array of only one hash repeated many times and not the unique hashes that puts is outputting.</p>\n\n<pre><code>sessions = Hash.new\nsessions_array = Array.new\n\n@session.each_with_index { |element, index|\n  next_element = @session[index+1]\n\n  sessions[:time] = element[0]\n  sessions[:action] = element[1]\n  sessions[:user] = element[2]\n\n  sessions_array &lt;&lt; sessions\n  puts sessions\n}\n\nputs sessions_array\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron"], "answers": [{"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1576149438, "post_id": 59293158, "comment_id": 104809357, "body": "@yu-coder you wrote <code>Modules::CronJob::Job</code> but in your code example just <code>Modules::CronJob</code>"}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1576150042, "post_id": 59293158, "comment_id": 104809702, "body": "yes that&#39;s what I want to know why Modules::CronJob::Job error, not Modules::CronJob"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1576094256, "creation_date": 1576094256, "answer_id": 59293158, "question_id": 59292994, "link": "https://stackoverflow.com/questions/59292994/nameerror-uninitialized-constant-modulescronjobjob/59293158#59293158", "title": "NameError (uninitialized constant Modules::CronJob::Job):", "body": "<p>Add to your <code>config/application.rb</code></p>\n\n<pre><code>config.autoload_paths &lt;&lt; Rails.root.join('lib')\n</code></pre>\n\n<p>Then you can use all classes and modules from this folder.</p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576097015, "creation_date": 1576093570, "last_edit_date": 1576097015, "question_id": 59292994, "link": "https://stackoverflow.com/questions/59292994/nameerror-uninitialized-constant-modulescronjobjob", "title": "NameError (uninitialized constant Modules::CronJob::Job):", "body": "<p><strong>lib/modules/cron_job.rb</strong></p>\n\n<pre><code>module Modules\n  module CronJob\n    ...\n  end\nend\n</code></pre>\n\n<p><strong>app/models/schedule.jb</strong></p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  extend Modules::CronJob\n  ...\nend\n</code></pre>\n\n<p><strong>config/application.rb</strong></p>\n\n<pre><code>config.autoload_paths += %W(#{config.root}/lib)\n</code></pre>\n\n<p>But I am getting this error - <code>NameError (uninitialized constant Modules::CronJob::Job):</code></p>\n\n<p>I am not sure why I am getting this error.</p>\n"}, {"tags": ["ruby", "google-app-engine", "google-cloud-platform"], "comments": [{"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 1, "creation_date": 1576094330, "post_id": 59292862, "comment_id": 104791034, "body": "Passed along to the appengine-ruby team (who can quickly get in touch with the gae ruby standard environment team) via a github issue: <a href=\"https://github.com/GoogleCloudPlatform/appengine-ruby/issues/31\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/appengine-ruby/issues/31</a>"}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 1, "creation_date": 1576096212, "post_id": 59292862, "comment_id": 104791868, "body": "I&#39;m responsible for the Ruby runtimes, and I&#39;m looking at this now."}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "reply_to_user": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 0, "creation_date": 1576096438, "post_id": 59292862, "comment_id": 104791951, "body": "Thanks I appreciate it!!!"}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 1, "creation_date": 1576098322, "post_id": 59292862, "comment_id": 104792713, "body": "This does appear to be related to an App Engine Ruby Runtime release that was being rolled out this week. We are rolling it back while the issue is investigated; the rollback should be complete within the next couple hours."}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "reply_to_user": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 0, "creation_date": 1576166610, "post_id": 59292862, "comment_id": 104819329, "body": "update: they have been unable to reproduce so far so I have provided my Gemfile.lock, Gemfile, and cloud build and GAE app logs"}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 0, "creation_date": 1576280803, "post_id": 59292862, "comment_id": 104861487, "body": "Update: Thanks to the info Sam sent me, we have been able to reproduce this internally. We have a test around this case now, and will make sure it&#39;s resolved before pushing out our next release."}], "answers": [{"comments": [{"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 0, "creation_date": 1576620715, "post_id": 59366148, "comment_id": 104957639, "body": "Daniel, thanks for your attention to this. I will be sure to use the proper issue tracker in the future (I was not aware these existed). One thing I think this (and my previous issue) highlights though is the awkwardness of having different ruby versions for the build and runtime environments. You would probably prevent a large amount of user frustration (and, indeed, increase GCP sales) if you could coordinate so that build and runtime always use the same ruby version. The current solution (<code>ruby &#39;~&gt; 2.5.5&#39;</code>) while reasonable, will break a lot of Gemfiles and in a maddening, unintuitive way."}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "reply_to_user": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 0, "creation_date": 1576713095, "post_id": 59366148, "comment_id": 104992134, "body": "Sam: thanks for the feedback. Yes, there is that awkwardness. It&#39;s an implication of App Engine&#39;s feature where it can swap out the runtime layer under your app (to update the OS, the Ruby installation, security patches, etc.) at any time, and it does so transparently without rerunning the build and bundle install. (So there&#39;s actually <i>never</i> a guarantee that build and runtime will always use the same Ruby version.) Part of the goal of the current beta period for the ruby25 runtime is to determine if this is reasonable for real-world Ruby apps."}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 1, "creation_date": 1576824262, "post_id": 59366148, "comment_id": 105028423, "body": "I think with a friendly intelligent error message this behavior would be fine. Without it it is frustrating because you end up in a loop of &quot;your Gemfile specified X but your ruby version is Y&quot;. Maybe detect if the user has a particular ruby version pegged in Gemfile and suggest a <code>~&gt;</code> style peg. The official docs should also mention this imo, and then it would be fine."}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "reply_to_user": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 1, "creation_date": 1576950767, "post_id": 59366148, "comment_id": 105060994, "body": "That&#39;s an excellent idea. In fact, we had already implemented just such an error message (based on your previous report on stack overflow), and it was one of the very features we were rolling out, when this C extensions issue forced us to roll it back. (The irony is frustrating...) In any case, releases are being frozen for the US holidays, but we&#39;ll try to roll it out again after the new year."}], "tags": [], "owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "is_accepted": true, "score": 1, "last_activity_date": 1576543477, "creation_date": 1576543477, "answer_id": 59366148, "question_id": 59292862, "link": "https://stackoverflow.com/questions/59292862/sudden-could-not-find-nokogiri-1-10-7-in-any-of-the-sources-error-for-previous/59366148#59366148", "title": "Sudden &quot;Could not find nokogiri-1.10.7 in any of the sources&quot; error for previously working GAE Ruby Standard Environment deploys", "body": "<p>We've finished root cause investigation. For the curious, here is what happened:</p>\n\n<p>The Ruby runtime for the App Engine Standard Environment uses <a href=\"https://github.com/rbenv/ruby-build\" rel=\"nofollow noreferrer\">ruby-build</a> to build/install MRI (the standard \"Matz\" Ruby runtime). On Oct 30, ruby-build <a href=\"https://github.com/rbenv/ruby-build/pull/1368\" rel=\"nofollow noreferrer\">changed its behavior to set --enable-shared</a> when building recent versions of MRI. However, MRI built with the <code>--enable-shared</code> setting is not binary-compatible with MRI built without. This can manifest when loading C extensions (such as Nokogiri)... C extensions compiled against MRI built with one setting, will not load successfully in MRI built with the opposite setting.</p>\n\n<p>Prior to the week of Dec 9, the live Ruby runtime was from a build prior to Oct 30, and was thus not built with <code>--enable-shared</code>. Then, that week, App Engine started rolling out a new Ruby runtime build that <em>was</em> built with <code>--enable-shared</code>. The new runtime was incompatible with the old runtime, and thus also with existing applications that included C extensions that were originally compiled against the old runtime, resulting in the symptoms described.</p>\n\n<p>On Dec 11 we rolled the release back as soon as we determined that there was an issue with it. If anyone is still seeing issues, just redeploying your app should resolve them.</p>\n\n<p>To retain compatibility with your existing apps, we will <em>disable</em> <code>--enable-shared</code> for all future updates of the <code>ruby25</code> runtime, and we've put in tests to detect future changes to the runtime compile flags to prevent this from happening again. Note that this does mean that the <code>ruby25</code> runtime will always be compiled without dynamic libraries. We are aware that there are a few gems that require dynamic library support, and these will not be supported under the <code>ruby25</code> runtime. However, any upcoming <code>ruby26</code>, <code>ruby27</code>, and later Ruby runtimes, will be built with <code>--enable-shared</code>.</p>\n\n<p>Finally, just a note that the official channel for reporting App Engine issues (assuming you do not have a GCP support plan) is to file an issue in the App Engine Issue Tracker. (You can find a link from <a href=\"https://cloud.google.com/support/docs/issue-trackers\" rel=\"nofollow noreferrer\">https://cloud.google.com/support/docs/issue-trackers</a>). We're not always checking stack overflow, but the issue trackers feed directly into the internal queues at Google.</p>\n"}, {"comments": [{"owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1616434243, "post_id": 59692357, "comment_id": 117995961, "body": "<code>bundle update nokogiri</code> solved the issue for me,"}], "tags": [], "owner": {"reputation": 1, "user_id": 12693510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90d7b61cd074691eb6fd2a0b4983bfa6?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/12693510/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1578726113, "creation_date": 1578726113, "answer_id": 59692357, "question_id": 59292862, "link": "https://stackoverflow.com/questions/59292862/sudden-could-not-find-nokogiri-1-10-7-in-any-of-the-sources-error-for-previous/59692357#59692357", "title": "Sudden &quot;Could not find nokogiri-1.10.7 in any of the sources&quot; error for previously working GAE Ruby Standard Environment deploys", "body": "<p>updating all the bundle things... Could solve this kind of\n<strong>could not find _______ v ___ in any of the sources error</strong>\nJust try to run ....</p>\n\n<blockquote>\n  <p>bundle update --all</p>\n</blockquote>\n\n<p>Thinking may this solve all bundle problems accordingly..</p>\n"}], "owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 59366148, "answer_count": 2, "score": 1, "last_activity_date": 1578726113, "creation_date": 1576092964, "last_edit_date": 1576094744, "question_id": 59292862, "link": "https://stackoverflow.com/questions/59292862/sudden-could-not-find-nokogiri-1-10-7-in-any-of-the-sources-error-for-previous", "title": "Sudden &quot;Could not find nokogiri-1.10.7 in any of the sources&quot; error for previously working GAE Ruby Standard Environment deploys", "body": "<p>It looks like Google has changed the App Engine Ruby Standard runtime in some way that has messed up GAE deploys for a large number of people so I am reporting it here. Deploys that were working two days ago now fail when deployed.</p>\n\n<p>The error is always:</p>\n\n<pre><code>Bundler::GemNotFound: Could not find nokogiri-1.10.7 in any of the sources\n</code></pre>\n\n<p>This occurs regardless of the local state of your code and seems to have nothing to do with bundler configuration, gem versions, or anything like that. If nokogiri is in your app, it won't deploy to gae ruby standard environment right now, period.</p>\n\n<p>This issue has been reported on <a href=\"https://ja.stackoverflow.com/questions/61330/google-app-engine-standard-%e3%81%ae-ruby-beta-%e3%81%a7%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%81%8c%e3%81%a7%e3%81%8d%e3%81%aa%e3%81%8f%e3%81%aa%e3%81%a3%e3%81%9f?newreg=c5eb9b0436474e308986530f7177d2d7\">Japanese stackoverflow</a> but has not yet received any attention from Google.</p>\n"}, {"tags": ["ruby", "rest", "api", "twitter", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12162309, "user_type": "registered", "profile_image": "https://graph.facebook.com/2785394021470854/picture?type=large", "display_name": "Phelps Toussaint", "link": "https://stackoverflow.com/users/12162309/phelps-toussaint"}, "edited": false, "score": 0, "creation_date": 1576097444, "post_id": 59293588, "comment_id": 104792364, "body": "Thank you so much!!"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 1, "user_id": 12162309, "user_type": "registered", "profile_image": "https://graph.facebook.com/2785394021470854/picture?type=large", "display_name": "Phelps Toussaint", "link": "https://stackoverflow.com/users/12162309/phelps-toussaint"}, "edited": false, "score": 1, "creation_date": 1576098110, "post_id": 59293588, "comment_id": 104792633, "body": "@PhelpsToussaint Great :) Remember to approve the answer if it worked for you, so others can see it too."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 1, "last_activity_date": 1576096123, "creation_date": 1576096123, "answer_id": 59293588, "question_id": 59292717, "link": "https://stackoverflow.com/questions/59292717/how-do-i-print-out-the-number-of-tweets-returned-that-were-only-in-english-by-ut/59293588#59293588", "title": "How do I print out the number of tweets returned that were only in English by utilizing a counter method?", "body": "<p>The <a href=\"https://rdoc.info/gems/twitter/Twitter%2FREST%2FSearch:search\" rel=\"nofollow noreferrer\">documentation for the Twitter Ruby gem</a> states that you can use the <code>:lang</code> option to restrict the search results to any <a href=\"https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes\" rel=\"nofollow noreferrer\">ISO-639-1 language id</a>:</p>\n\n<pre><code>tweet_count = client.search(\"Lebron\", lang: \"en\", result_type: \"recent\").count\nputs \"Found #{tweet_count} tweets in English\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12162309, "user_type": "registered", "profile_image": "https://graph.facebook.com/2785394021470854/picture?type=large", "display_name": "Phelps Toussaint", "link": "https://stackoverflow.com/users/12162309/phelps-toussaint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576096123, "creation_date": 1576092370, "question_id": 59292717, "link": "https://stackoverflow.com/questions/59292717/how-do-i-print-out-the-number-of-tweets-returned-that-were-only-in-english-by-ut", "title": "How do I print out the number of tweets returned that were only in English by utilizing a counter method?", "body": "<p>I am utilizing the twitter api in which I search for tweets that have the keyword, \"Lebron\" in it. I'm trying to write a loop that counts the number of tweets that are ONLY in english and contains the keyword, \"Lebron\". I am writing this in ruby using Atom as my text editor.</p>\n\n<p>p.s - I have access to Twitter already, I'm just not displaying the full keys</p>\n\n<pre><code>require 'twitter'\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key        = \"8t4G...aa6\"\n  config.consumer_secret     = \"tmq...bFA\"\n  config.access_token        = \"106...OwI\"\n  config.access_token_secret = \"LDh...VnB\"\nend\n\ndef tweet_count\n  tweet_count.count do |e|\n  e == lang: \"en\"\n  end\n\nclient.search(\"Lebron -rt\", result_type: \"recent\").take(2).each do |tweet|\n  puts \"#{tweet.user.screen_name}: #{tweet.text}\" #tweet.text\nend\n</code></pre>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "edited": false, "score": 0, "creation_date": 1576097656, "post_id": 59292483, "comment_id": 104792443, "body": "what cucumber is to do with oracle database connection?"}, {"owner": {"reputation": 23, "user_id": 9628361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LjXgx.jpg?s=128&g=1", "display_name": "Rodrigo Ramblas", "link": "https://stackoverflow.com/users/9628361/rodrigo-ramblas"}, "reply_to_user": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "edited": false, "score": 0, "creation_date": 1576147264, "post_id": 59292483, "comment_id": 104808197, "body": "Query an xml in a table"}], "owner": {"reputation": 23, "user_id": 9628361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LjXgx.jpg?s=128&g=1", "display_name": "Rodrigo Ramblas", "link": "https://stackoverflow.com/users/9628361/rodrigo-ramblas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576132411, "creation_date": 1576091300, "last_edit_date": 1576132411, "question_id": 59292483, "link": "https://stackoverflow.com/questions/59292483/how-to-connect-cucumber-to-oracle-database-to-validate-an-xml", "title": "how to connect cucumber to oracle database to validate an xml", "body": "<p>How to connect cucumber to oracle database to validate an xml\nthis code is in mysql and i need in plsql\nrequire 'mysql2'</p>\n\n<pre><code>begin\n    # Initialize connection variables.\n    host = String('mydemoserver.mysql.database.azure.com')\n    database = String('quickstartdb')\n    username`enter code here` = String('myadmin@mydemoserver')\n    password = String('yourpassword')\n\n    # Initialize connection object.\n    client = Mysql2::Client.new(:host =&gt; host, :username =&gt; username, :database =&gt; database, :password =&gt; password)\n    puts 'Successfully created connection to database.'\n\n    # Read data\n    resultSet = client.query('SELECT * from inventory;')\n    resultSet.each do |row|\n        puts 'Data row = (%s, %s, %s)' % [row['id'], row['name'], row['quantity']]\n    end\n    puts 'Read ' + resultSet.count.to_s + ' row(s).'\n\n# Error handling\nrescue Exception =&gt; e\n    puts e.message\n\n# Cleanup\nensure\n    client.close if client\n    puts 'Done.'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "clockwork"], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 8846296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea72c18b190d4af20595026a3f53f8f7?s=128&d=identicon&r=PG&f=1", "display_name": "webbyweb", "link": "https://stackoverflow.com/users/8846296/webbyweb"}, "is_accepted": true, "score": 0, "last_activity_date": 1576097110, "creation_date": 1576097110, "answer_id": 59293799, "question_id": 59292065, "link": "https://stackoverflow.com/questions/59292065/rails-clockwork-events-getting-called-twice-locally/59293799#59293799", "title": "Rails Clockwork events getting called twice locally", "body": "<p>After a good amount of debugging I found it was because in my development.rb file I had:</p>\n\n<p><code>config.eager_load = true</code></p>\n\n<p>Which, combined with the </p>\n\n<pre><code>require './config/boot'\nrequire './config/environment'\n</code></pre>\n\n<p>Ran the clock file twice. I believe this is because I'm preloading the app (eager_load), and then loading again with the require statements?</p>\n\n<p>Anyways, the eager_load is ignored when clockwork is ran from my procfile (tested with $ heroku local), so it works fine.</p>\n\n<p>Hope this helps anyone as I was stuck on this for a while!</p>\n"}], "owner": {"reputation": 170, "user_id": 8846296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea72c18b190d4af20595026a3f53f8f7?s=128&d=identicon&r=PG&f=1", "display_name": "webbyweb", "link": "https://stackoverflow.com/users/8846296/webbyweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 59293799, "answer_count": 1, "score": 0, "last_activity_date": 1576097110, "creation_date": 1576089404, "question_id": 59292065, "link": "https://stackoverflow.com/questions/59292065/rails-clockwork-events-getting-called-twice-locally", "title": "Rails Clockwork events getting called twice locally", "body": "<p>When I run my clockwork file, events are registered twice. Am I doing something wrong?</p>\n\n<p>CLI I'm running locally to test:\n<code>clockwork app/lib/clockwork/clock.rb</code></p>\n\n<p>clock.rb:</p>\n\n<pre><code>require 'clockwork'\nrequire 'active_support/time'\nrequire './config/boot'\nrequire './config/environment'\n\nmodule Clockwork\n  handler do |job, time|\n    puts \"Running #{job} at #{time}\"\n    puts\n  end\n\n  every(1.hour, 'test') do \n    puts 'RUNNING TEST'\n  end\nend\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>I, INFO -- : Starting clock for 2 events: [ test test ]\nI, INFO -- : Triggering 'test'\nBLOCK RUNNING TEST\nI, INFO -- : Triggering 'test'\nBLOCK RUNNING TEST\n</code></pre>\n"}, {"tags": ["ruby", "macos", "flutter", "fastlane"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1576092669, "post_id": 59291771, "comment_id": 104790272, "body": "Welcome to stackoverflow. Make sure you use code blocks instead of blockquotes when pasting in console output. It&#39;s much easier to read that way. More <a href=\"https://stackoverflow.com/editing-help\">here</a>."}, {"owner": {"reputation": 8216, "user_id": 1481072, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/175dd3dbbacf8ea284c82b0dac16cc80?s=128&d=identicon&r=PG", "display_name": "Chase Roberts", "link": "https://stackoverflow.com/users/1481072/chase-roberts"}, "edited": false, "score": 0, "creation_date": 1576159032, "post_id": 59291771, "comment_id": 104814569, "body": "Interestingly enough, I am having the exact same problem."}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 6483149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01f8860ac95469269d7e20eb98ec0720?s=128&d=identicon&r=PG&f=1", "display_name": "LWJ", "link": "https://stackoverflow.com/users/6483149/lwj"}, "is_accepted": false, "score": 0, "last_activity_date": 1576428917, "creation_date": 1576428917, "answer_id": 59346058, "question_id": 59291771, "link": "https://stackoverflow.com/questions/59291771/error-installing-running-fastlane-for-flutter-on-mac/59346058#59346058", "title": "Error installing, running Fastlane for Flutter on mac", "body": "<p>I've found a \"temporary workaround\" to resolve this based on <a href=\"https://github.com/fastlane/fastlane/issues/15740\" rel=\"nofollow noreferrer\">this issue on the fastlane GitHub repo</a>.</p>\n\n<p>After installing <code>fastlane</code> either via <code>brew cask</code> or <code>gem</code>, try running the following commands:</p>\n\n<pre><code>rm -rf $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.* \nrm -rf $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/specifications/faraday-0.* \ngem install faraday -v 0.17.0 --install-dir $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0\n</code></pre>\n\n<p>This fixed the issue for me, as of now.</p>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 1995358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fJz53.jpg?s=128&g=1", "display_name": "Ahmad Abdullah", "link": "https://stackoverflow.com/users/1995358/ahmad-abdullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1577788760, "last_edit_date": 1577788760, "creation_date": 1577773707, "answer_id": 59540431, "question_id": 59291771, "link": "https://stackoverflow.com/questions/59291771/error-installing-running-fastlane-for-flutter-on-mac/59540431#59540431", "title": "Error installing, running Fastlane for Flutter on mac", "body": "<p>Based on this thread (thanks for @lwj Answer):</p>\n\n<p><a href=\"https://github.com/fastlane/fastlane/issues/15740\" rel=\"nofollow noreferrer\">https://github.com/fastlane/fastlane/issues/15740</a></p>\n\n<p>1- It might need to uninstall cask fastlane first:</p>\n\n<pre><code>brew cask uninstall fastlane\n</code></pre>\n\n<p>2- Then Install it using RubyGems:</p>\n\n<pre><code>sudo gem install fastlane -NV\n</code></pre>\n\n<p>Also because Apple has changed the default shell to zsh, referring to @fdg13gustav answer: <a href=\"https://stackoverflow.com/a/58310864/1995358\">https://stackoverflow.com/a/58310864/1995358</a></p>\n\n<p>3- Create <code>.zprofile</code> file in your home directory</p>\n\n<p>And regarding this thread:\n<a href=\"https://github.com/fastlane/fastlane/issues/12609\" rel=\"nofollow noreferrer\">https://github.com/fastlane/fastlane/issues/12609</a></p>\n\n<p>4- Add these lines to your <code>~/.zprofile</code> file:  </p>\n\n<pre><code>export PATH=\"$HOME/.fastlane/bin:$PATH\"\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 5917063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/naOoE.jpg?s=128&g=1", "display_name": "Tanmay Pandharipande", "link": "https://stackoverflow.com/users/5917063/tanmay-pandharipande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1577788760, "creation_date": 1576087985, "last_edit_date": 1576092618, "question_id": 59291771, "link": "https://stackoverflow.com/questions/59291771/error-installing-running-fastlane-for-flutter-on-mac", "title": "Error installing, running Fastlane for Flutter on mac", "body": "<p>Following the link <a href=\"https://flutter.dev/docs/deployment/cd\" rel=\"nofollow noreferrer\">Flutter Fastlane docs</a></p>\n\n<p>Running command:</p>\n\n<pre><code>brew cask install fastlane\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>Gems updated: slack-notifier atomos claide nanaimo xcodeproj rouge xcpretty terminal-notifier tty-screen tty-cursor tty-spinner commander-fastlane faraday faraday_middleware gh_inspector mini_magick rubyzip naturally simctl jwt memoist signet\nGems already up-to-date: fastlane\n**ERROR:  Error installing fastlane:\n    signet requires Ruby version &gt;= 2.4.0.**\nCleaning up installed gems...\nAttempting to uninstall xcpretty-0.2.6\nSuccessfully uninstalled xcpretty-0.2.6\nAttempting to uninstall xcodeproj-1.4.4\nSuccessfully uninstalled xcodeproj-1.4.4\nAttempting to uninstall rubyzip-1.2.1\nSuccessfully uninstalled rubyzip-1.2.1\nAttempting to uninstall nanaimo-0.2.3\nSuccessfully uninstalled nanaimo-0.2.3\nAttempting to uninstall memoist-0.15.0\nSuccessfully uninstalled memoist-0.15.0\nAttempting to uninstall gh_inspector-1.0.3\nSuccessfully uninstalled gh_inspector-1.0.3\nAttempting to uninstall faraday_middleware-0.11.0.1\nSuccessfully uninstalled faraday_middleware-0.11.0.1\nAttempting to uninstall faraday-0.12.1\nSuccessfully uninstalled faraday-0.12.1\nAttempting to uninstall commander-fastlane-4.4.4\nSuccessfully uninstalled commander-fastlane-4.4.4\nAttempting to uninstall claide-1.0.1\nSuccessfully uninstalled claide-1.0.1\nAttempting to uninstall rouge-1.11.1\nSuccessfully uninstalled rouge-1.11.1\nClean Up Complete\nDetected shell config file at path '~/.bash_profile'\nPlease add the following line to your bash profile:\nexport PATH=\"$HOME/.fastlane/bin:$PATH\"\n**After doing so close the terminal session and restart it to start using fastlane \ud83d\ude80\n\ud83c\udf7a  fastlane was successfully installed!**\n</code></pre>\n\n<p>which gave this output. But when I run <code>ruby -v</code></p>\n\n<pre><code>ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin16]\n</code></pre>\n\n<p>I get this output. I added all the paths in .bash_profile and then I run <code>fastlane env</code> or <code>fastlane init</code> inside the android/ folder or anywhere it is giving me this error</p>\n\n<pre><code>/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday/error.rb:95:in  &lt;.module:Faraday&gt;: superclass mismatch for class ConnectionFailed (TypeError)\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday/error.rb:6:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday.rb:80:in  'block in require_libs'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday.rb:79:in  'each'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday.rb:79:in  'require_libs'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday.rb:242:in  '&lt;.module:Faraday&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.17.1/lib/faraday.rb:16:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/spaceship/lib/spaceship/client.rb:1:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/spaceship/lib/spaceship.rb:3:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/fastlane/lib/fastlane/setup/setup_ios.rb:1:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/fastlane/lib/fastlane/setup/setup.rb:57:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/fastlane/lib/fastlane.rb:10:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in  'require'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/fastlane/lib/fastlane/cli_tools_distributor.rb:18:in  'take_off'\n        from  /.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/bin/fastlane:20:in  '&lt;.top (required)&gt;'\n        from  /.fastlane/bin/bundle/bin/fastlane:22:in  'load'\n        from  /.fastlane/bin/bundle/bin/fastlane:22:in  '&lt;.main&gt;'\n</code></pre>\n\n<p>After trying <code>sudo gem install fastlane</code> it says </p>\n\n<pre><code>Successfully installed fastlane-2.137.0\nParsing documentation for fastlane-2.137.0\nDone installing documentation for fastlane after 6 seconds\n1 gem installed\n</code></pre>\n\n<p>But when I again write <code>fastlane env</code> or <code>fastlane init</code> it gives me same above error</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576085886, "post_id": 59291123, "comment_id": 104787295, "body": "I&#39;d probably go with <code>.nil?</code> as that seems to be what he&#39;s checking, rather than a blank string"}, {"owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "edited": false, "score": 0, "creation_date": 1576086504, "post_id": 59291123, "comment_id": 104787571, "body": "awesome both worked and stopped giving me the error. the only issue i am having now is that even when the user enters a 4 digit number the error still pushes and gives  `Error: 4 digits only``` is there any other way i can compare the length of characters of the input and check if it equals atleast for 4 digits?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576086747, "post_id": 59291123, "comment_id": 104787696, "body": "It looks like you&#39;re checking <code>@filters[:duration][:durations]</code>, but I can see you&#39;re mapping out the same thing a few lines before. Is <code>@filters[:duration][:durations]</code> an array or a string?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576086768, "post_id": 59291123, "comment_id": 104787711, "body": "Either way you can call  <code>.length</code> on it, but you may be checking the wrong item"}, {"owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "edited": false, "score": 0, "creation_date": 1576087709, "post_id": 59291123, "comment_id": 104788134, "body": "it is an array of strings. i would assume .length should work. I tried regex and that gave the error of 4 digits only but it keeps repeating even if the user inputs a number with 4 digits"}], "tags": [], "owner": {"reputation": 959, "user_id": 3268304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qDzJ.png?s=128&g=1", "display_name": "Jeff F.", "link": "https://stackoverflow.com/users/3268304/jeff-f"}, "is_accepted": false, "score": 3, "last_activity_date": 1576085278, "creation_date": 1576085278, "answer_id": 59291123, "question_id": 59291055, "link": "https://stackoverflow.com/questions/59291055/undefined-method-empty-for-nilnilclass-when-trying-to-add-a-error-validation/59291123#59291123", "title": "undefined method `empty?&#39; for nil:NilClass when trying to add a error validation messege", "body": "<p><code>empty?</code> doesn't work for <code>nil</code>. Try doing <code>unless @recording_metadata.blank?</code>. <code>blank?</code> is provided by Ruby on Rails.</p>\n"}], "owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576085278, "creation_date": 1576085048, "question_id": 59291055, "link": "https://stackoverflow.com/questions/59291055/undefined-method-empty-for-nilnilclass-when-trying-to-add-a-error-validation", "title": "undefined method `empty?&#39; for nil:NilClass when trying to add a error validation messege", "body": "<p>I am trying to add a validation in my code where if the user puts more than 4 digits it push an error message. I want to be able to add an error message when the user enters in the durations field a number lager than 4 digits the error pops up and reloads the page again.</p>\n\n<p>this was my controller before validation</p>\n\n<pre><code>unless params[:searched] \n        @filters[:duration] ||= Hash.new\n        @filters[:duration][:durations] = ['1']\n        @filters[:duration][:operators] = [:gt]\n      end\n\n      if @filters.try(:[],:duration).try(:[],:durations)\n        @filters[:duration][:durations].map!(&amp;:to_i)\n      end\n@recording_metadata = RecordingMetadata.find(@tenant, request.session_options[:id], (start_time..end_time), @filters, additional_options)\n</code></pre>\n\n<p>this is my controller right now where I have my code</p>\n\n<pre><code>     unless params[:searched] \n        @filters[:duration] ||= Hash.new\n        @filters[:duration][:durations] = ['1']\n        @filters[:duration][:operators] = [:gt]\n      end\n\n      if @filters.try(:[],:duration).try(:[],:durations)\n        @filters[:duration][:durations].map!(&amp;:to_i)\n      end\nif @filters[:duration][:durations].length &lt;= 4 \n        @recording_metadata = RecordingMetadata.find(@tenant, request.session_options[:id], (start_time..end_time), @filters, additional_options)\n      else\n        Notice.rpush(\"4 digits\")\n        save_notice\n        render action: :index\n      end\n</code></pre>\n\n<p>this is my view where the error is happening at in my view</p>\n\n<pre><code> - unless @recording_metadata.empty?\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1576083537, "post_id": 59290433, "comment_id": 104786146, "body": "You don&#39;t want a DateTime you want a <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow noreferrer\"><code>TimeWithZone</code></a> try this instead <code>Time.zone.now.change({hour: time, minute: hour}).in_time_zone(&#39;IST&#39;)</code>"}, {"owner": {"reputation": 113, "user_id": 10122337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a89914659b575ba80d5b17239b131a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dany Alves", "link": "https://stackoverflow.com/users/10122337/dany-alves"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1576083974, "post_id": 59290433, "comment_id": 104786357, "body": "ArgumentError (Invalid Timezone: IST) its throwing this error"}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1576086308, "post_id": 59290433, "comment_id": 104787479, "body": "you have to use timezone known to the server. You can see the available list using <code>timedatectl list-timezones</code> (if you are on Linux)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1576086373, "post_id": 59290433, "comment_id": 104787510, "body": "Okay it is not listed as <code>IST</code> but rather <code>&quot;Chennai&quot;</code> so use <code>Time.zone.now.change({hour: time, minute: hour}).in_time_zone(&#39;Chennai&#39;)</code> or <code>Time.zone.now.change({hour: time, minute: hour, offset: &quot;+05:30&quot;})</code>"}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1576086436, "post_id": 59290433, "comment_id": 104787534, "body": "after figuring out your timezone, use <code>to_i</code> to get integer number of seconds since the Epoch (January 1, 1970 00:00 UTC)."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10122337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a89914659b575ba80d5b17239b131a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dany Alves", "link": "https://stackoverflow.com/users/10122337/dany-alves"}, "edited": false, "score": 0, "creation_date": 1576082991, "post_id": 59290456, "comment_id": 104785880, "body": "getting this error (undefined method `time_zone&#39; for Wed, 11 Dec 2019 19:00:00 +0530:DateTime)"}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1576083774, "last_edit_date": 1576083774, "creation_date": 1576082755, "answer_id": 59290456, "question_id": 59290433, "link": "https://stackoverflow.com/questions/59290433/in-rails-how-to-convert-time-zone-into-an-integer/59290456#59290456", "title": "In Rails, how to convert time zone into an integer", "body": "<p>You need to convert it to UTC:</p>\n\n<pre><code>DateTime.now.change({hour: time, minute: hour}).time_zone('IST').utc\n</code></pre>\n\n<p>Or if you are in Rails 4 or above you can use in_time_zone:</p>\n\n<pre><code>DateTime.now.change({hour: time, minute: hour}).in_time_zone('IST').utc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "is_accepted": false, "score": 1, "last_activity_date": 1576086789, "creation_date": 1576086789, "answer_id": 59291487, "question_id": 59290433, "link": "https://stackoverflow.com/questions/59290433/in-rails-how-to-convert-time-zone-into-an-integer/59291487#59291487", "title": "In Rails, how to convert time zone into an integer", "body": "<p>credit to @engineersmnky</p>\n\n<pre><code>hour = 19\nminute = 0\ntime_zone = 'Chennai'\n\ne = Time.zone.now.change({hour: hour, minute: minute}).in_time_zone(time_zone).to_i\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10122337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a89914659b575ba80d5b17239b131a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dany Alves", "link": "https://stackoverflow.com/users/10122337/dany-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576086789, "creation_date": 1576082665, "question_id": 59290433, "link": "https://stackoverflow.com/questions/59290433/in-rails-how-to-convert-time-zone-into-an-integer", "title": "In Rails, how to convert time zone into an integer", "body": "<p>I have time and time zone, what I need is I just want to convert like this <em>Wed, 11 Dec 2019 19:00:00 +0530</em> and then I need to convert like this <em>1576071000</em>.</p>\n\n<p>So for I tried like this</p>\n\n<pre><code>time = \"19\"\nhour = \"00\"\ntime_zone = \"IST\"\n\ne = DateTime.now.change({hour: time, minute: hour})\n</code></pre>\n\n<p>I get the exact output, but I need to convert with timezone. that means something like this</p>\n\n<pre><code>DateTime.now.change({hour: time, minute: hour}).time_zone('IST') \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage", "wicked-pdf"], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 12409240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qaC2J.jpg?s=128&g=1", "display_name": "Shark Lasers", "link": "https://stackoverflow.com/users/12409240/shark-lasers"}, "edited": false, "score": 0, "creation_date": 1592469591, "post_id": 59312316, "comment_id": 110438148, "body": "Well done. Maybe you could share this great function Max, could you?"}], "tags": [], "owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "is_accepted": false, "score": 1, "last_activity_date": 1576182887, "creation_date": 1576182887, "answer_id": 59312316, "question_id": 59290138, "link": "https://stackoverflow.com/questions/59290138/rails-wicked-pdf-activestorage/59312316#59312316", "title": "Rails Wicked_PDF ActiveStorage", "body": "<p>Fixed it myself by using wicked_pdf_image_tag and wrote a helper function which puts the requested in the asset pipeline.</p>\n"}], "owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576182887, "creation_date": 1576081615, "question_id": 59290138, "link": "https://stackoverflow.com/questions/59290138/rails-wicked-pdf-activestorage", "title": "Rails Wicked_PDF ActiveStorage", "body": "<p>I'm exporting PDF's in my Rails 6 application in a Cronjob with the crono gem. This for itself works fine, my styles are applied to the table etc:</p>\n\n<pre><code>def perform\n        view = ActionController::Base.new\n        view.extend(ApplicationHelper)\n        view.extend(Rails.application.routes.url_helpers)\n        # include helpers and routes\n        view.instance_variable_set(\"@clinic_image\", Configuration.first.image)\n        view.instance_variable_set(\"@meal_triplet_week_vollkost\", Meal.this_week_vollkost)\n        view.instance_variable_set(\"@meal_triplet_week_schonkost\", Meal.this_week_schonkost)\n        view.instance_variable_set(\"@meal_triplet_week_vegetarisch\", Meal.this_week_vegetarisch)\n        view.instance_variable_set(\"@clinic_name\", Configuration.first.clinicName)\n\n        pdf = WickedPdf.new.pdf_from_string(\n            view.render_to_string('meals/exportMealsCurrentWeek.html.erb', layout: 'pdf_week.html.erb'))\n\n        save_path = Rails.root.join('pdfs','filename.pdf')\n        File.open(save_path, 'wb') do |file|\n            file &lt;&lt; pdf\n        end\n    end\n</code></pre>\n\n<p>My problem is the following:</p>\n\n<p>When I call the action to render the PDF from the controller, the ActiveStorage Image from my database gets displayed without problems:</p>\n\n<pre><code>&lt;%= image_tag(@clinic_image, size: \"400x64\", alt: \"BDH Klinik Braunfels\") %&gt;\n</code></pre>\n\n<p>The @clinic_image is defined from my database in the default content for the application:</p>\n\n<pre><code>if Configuration.first.image.attached?\n   @clinic_image = Configuration.first.image \nend\n</code></pre>\n\n<p>But in my PDF which is generated in the cronjob, I get the two following errors:</p>\n\n<p>If I keep the image_tag in the view I get: </p>\n\n<p><strong>Can't resolve image into URL: undefined method `polymorphic_url' for #&lt;#:0x000000000c119c28></strong></p>\n\n<p>If I try to use the <code>wicked_pdf_image_tag</code> instead of normal image_tag helper I get the following error:</p>\n\n<p><strong>no implicit conversion of ActiveStorage::Attached::One into String</strong></p>\n\n<p>So I either need the proper URL (where I first have to download the image I think) or I need the ActiveStorage Image as a string.</p>\n\n<p>I tried some \"solutions\" or better workarounds from the GitHub repo, but it doesn't seem to work for me (maybe I did something wrong, not sure).</p>\n\n<p>If I use the normal path to the image in my assets folder it*s working, but I always need the image which is set in the configuration.</p>\n\n<p>Is there any solution to this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "slim-lang"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 3, "creation_date": 1576080610, "post_id": 59289674, "comment_id": 104784627, "body": "Adding a front-end to an API application is just all kinds of backwards. If you already have an API then a better alternative is to use a SPA framework like React, Vue, Ember, Angular etc to build a frontend that consumes your API."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1576080724, "post_id": 59289674, "comment_id": 104784693, "body": "Adding an API to an existing &quot;classical&quot; application has been commonly done but what you are doing is like attaching a horse to pull your car."}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1576087205, "post_id": 59289674, "comment_id": 104787915, "body": "The error message will have sequence of file places and sequence of file formats  Rails is looking for. Check it and post it in your question."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8560722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc33cbe09d24de004dc1893a00f5780d?s=128&d=identicon&r=PG&f=1", "display_name": "gp88", "link": "https://stackoverflow.com/users/8560722/gp88"}, "edited": false, "score": 0, "creation_date": 1576090397, "post_id": 59291581, "comment_id": 104789311, "body": "That was exactly the problem, I also had to adjust the routes and remove the modules Api and V1 from the controllers. Thank you very much."}], "tags": [], "owner": {"reputation": 417, "user_id": 3536464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd01b78340efef45c19a5697a2920d7?s=128&d=identicon&r=PG", "display_name": "pcrglennon", "link": "https://stackoverflow.com/users/3536464/pcrglennon"}, "is_accepted": false, "score": 4, "last_activity_date": 1576087172, "creation_date": 1576087172, "answer_id": 59291581, "question_id": 59289674, "link": "https://stackoverflow.com/questions/59289674/apiv1companiescontrollerindex-is-missing-a-template-for-request-formats-te/59291581#59291581", "title": "Api::V1::CompaniesController#index is missing a template for request formats: text/html", "body": "<p>Because the Controller is in the <code>Api::V1</code> namespace, Rails will be looking for views in the same namespace, which means it'll be looking for a view in <code>app/views/api/v1/companies/index.html.slim</code>. And that directory of course doesn't exist. You could try creating that directory and moving the file there.</p>\n\n<p>However, I don't think that's a good idea. API Controllers should be separate from view-based Controllers. If you want to keep everything in the same application (both the API and the frontend), I'd suggest creating a new Controller for handling the frontend in the root namespace, e.g. <code>app/controllers/companies_controller.rb</code>. Then that Controller will just act like a \"normal\" Rails Controller, rather than an API-specific one.</p>\n\n<p>Or you could do like @max suggested and just have an entirely separate application for the frontend. That would be ideal, but if you're just working on a demo/side project, it might be overkill for now.</p>\n"}], "owner": {"reputation": 23, "user_id": 8560722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc33cbe09d24de004dc1893a00f5780d?s=128&d=identicon&r=PG&f=1", "display_name": "gp88", "link": "https://stackoverflow.com/users/8560722/gp88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576087172, "creation_date": 1576080008, "question_id": 59289674, "link": "https://stackoverflow.com/questions/59289674/apiv1companiescontrollerindex-is-missing-a-template-for-request-formats-te", "title": "Api::V1::CompaniesController#index is missing a template for request formats: text/html", "body": "<p>I'm getting this error and I haven't been able to figure out how to fix this.\nInitially it was going to be just a rest api, but now I've decided to add a front-end as well, so I added the 'slim-rails' gem and tried to create the front-end for my companies_controller but I'm stuck with this error, it works fine if I request a JSON, but for some reason it doesn't find the template and I get \"Api::V1::CompaniesController#index is missing a template for request formats: text/html\". Most of the research I've done points to wrong names, but apparently everything is fine. Here is my code:</p>\n\n<p><strong>companies_controller.rb</strong></p>\n\n<pre><code>module Api\n    module V1\n        class CompaniesController &lt; ApplicationController            \n            before_action :set_company, only: [:show, :edit, :update, :destroy]\n            #List all\n            def index\n                # TODO validate and filter based on user role permissions\n                @companies = Company.order('active DESC, name')\n                respond_to do |format|\n                    format.html \n                    format.json { json_response(@companies , status: :ok) }\n                end\n            end\n\n            #other controller methods\n\n            private\n\n            def set_company\n                @company = Company.find(params[:id])\n            end\n\n            def company_params\n                params.require(:company).permit(:id, :name, :active, :city_id)\n            end\n\n        end\n    end\nend \n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace 'api' do\n    namespace 'v1' do\n      resources :states, only: :index\n      resources :companies\n    end\n  end\nend \n</code></pre>\n\n<p><strong>index.html.slim</strong></p>\n\n<pre><code>h1 Listing companies\n\ntable\n  thead\n    tr\n      th Name\n      th Active\n      th City\n      th\n      th\n      th\n\n  tbody\n    - @companies.each do |company|\n      tr\n        td = company.name\n        td = company.active\n        td = company.city\n        td = link_to 'Show', company\n        td = link_to 'Edit', edit_company_path(company)\n        td = link_to 'Destroy', company, data: { confirm: 'Are you sure?' }, method: :delete\n\nbr\n\n= link_to 'New Company', new_company_path\n</code></pre>\n\n<p><strong>Project Structure</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/LoKxz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LoKxz.png\" alt=\"Project structure\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth-facebook"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576080150, "post_id": 59289665, "comment_id": 104784355, "body": "You do realize that you have to generate a new secret now that you have published it on the internet?"}, {"owner": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576085472, "post_id": 59289665, "comment_id": 104787078, "body": "Sorry, I don&#39;t understand your point."}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1576087484, "post_id": 59289665, "comment_id": 104788027, "body": "@RanaUmer, never post the APP ID and APP SECRET."}, {"owner": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "reply_to_user": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1576087882, "post_id": 59289665, "comment_id": 104788216, "body": "Sure @twnaing. I will be careful next time."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "edited": false, "score": 0, "creation_date": 1576088709, "post_id": 59291757, "comment_id": 104788567, "body": "After removed <code>omniauth.rb</code> I am getting this error &quot;The action &#39;facebook&#39; could not be found for Users::OmniauthCallbacksController&quot;"}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "reply_to_user": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "edited": false, "score": 0, "creation_date": 1576088968, "post_id": 59291757, "comment_id": 104788704, "body": "you have &#39;devise&#39; and &#39;omniauth-facebook&#39; gem installed and have restarted the server?"}, {"owner": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "edited": false, "score": 0, "creation_date": 1576089095, "post_id": 59291757, "comment_id": 104788762, "body": "Yes, I did but facing the same issue."}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "reply_to_user": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "edited": false, "score": 0, "creation_date": 1576089415, "post_id": 59291757, "comment_id": 104788901, "body": "check this issue, similar to yours. <a href=\"https://github.com/plataformatec/devise/issues/615\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/issues/615</a>"}], "tags": [], "owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "is_accepted": false, "score": 1, "last_activity_date": 1576089025, "last_edit_date": 1576089025, "creation_date": 1576087942, "answer_id": 59291757, "question_id": 59289665, "link": "https://stackoverflow.com/questions/59289665/invalid-app-id-facebook-omniauth-rails-5-2-4/59291757#59291757", "title": "Invalid App ID facebook, Omniauth rails 5.2.4", "body": "<p>I think you are configuring omniauth two times. You should remove <code>omniauth.rb</code> under <code>config/initializers</code> folder.</p>\n\n<blockquote>\n  <p>Remember that <code>config.omniauth</code> adds omniauth provider middleware to your application. This means you should not add this provider middleware again in <code>config/initializers/omniauth.rb</code> as they'll clash with each other and result in always-failing authentication.</p>\n</blockquote>\n\n<p>Check <a href=\"https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview\" rel=\"nofollow noreferrer\">Devise wiki on Facebook omniauth</a> for Facebook integration.</p>\n"}], "owner": {"reputation": 11, "user_id": 11741198, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-32PY43YW0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDi1yEtOgk3s0_aFKlXmMU1yZW5Q/photo.jpg?sz=128", "display_name": "Rana Umer", "link": "https://stackoverflow.com/users/11741198/rana-umer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576089025, "creation_date": 1576079983, "last_edit_date": 1576087809, "question_id": 59289665, "link": "https://stackoverflow.com/questions/59289665/invalid-app-id-facebook-omniauth-rails-5-2-4", "title": "Invalid App ID facebook, Omniauth rails 5.2.4", "body": "<p>When I sign in my app with facebook I am getting the error \"Invalid App ID\" even I verified my app id and it is correct.</p>\n\n<p>what am I doing wrong in my code?</p>\n\n<p>Here is my code:</p>\n\n<p><strong>devise.rb</strong></p>\n\n<pre><code>config.omniauth :facebook, 'xxxxxxxxxxxx', 'xxxxxxxxxxxxxxxxxxxxx', token_params: { parse: :json }\n</code></pre>\n\n<p><strong>omniauth.rb</strong></p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n    provider :developer unless Rails.env.production?\n    provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET']\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\nroot to: 'surveys#index'\nresources :surveys\n\ndevise_for :users, controllers: {\n    sessions: 'users/sessions', \n    confirmations: 'confirmations',\n    omniauth_callbacks: \"users/omniauth_callbacks\"\n}\nend\n</code></pre>\n\n<p><strong>omniauth_callbacks_controller.rb</strong></p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n\n  def facebook\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n\n    if @user.persisted?\n      sign_in_and_redirect @user, event: :authentication #this will throw if @user is not activated\n      set_flash_message(:notice, :success, kind: \"Facebook\") if is_navigational_format?\n    else\n      session[\"devise.facebook_data\"] = request.env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n\n\n  def failure\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_many :surveys\n    mount_uploader :avatar, AvatarUploader\n\n    devise :database_authenticatable, :registerable, \n    :recoverable, :rememberable, :validatable, :confirmable,\n    :omniauthable, omniauth_providers: %i[facebook]\n\n    def self.from_omniauth(auth)\n      where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n        user.email = auth.info.email\n        user.password = Devise.friendly_token[0, 20]\n        user.first_name = auth.info.first_name   # assuming the user model has a name\n        # If you are using confirmable and the provider(s) you use validate emails, \n        # uncomment the line below to skip the confirmation emails.\n        user.skip_confirmation!\n      end\n    end\n\n    def self.new_with_session(params, session)\n        super.tap do |user|\n          if data = session[\"devise.facebook_data\"] &amp;&amp; session[\"devise.facebook_data\"][\"extra\"][\"raw_info\"]\n            user.email = data[\"email\"] if user.email.blank?\n          end\n        end\n    end\nend\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "rvm", "pre-commit"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10231307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AkK2.jpg?s=128&g=1", "display_name": "mwdeatherage", "link": "https://stackoverflow.com/users/10231307/mwdeatherage"}, "edited": false, "score": 0, "creation_date": 1576079927, "post_id": 59289640, "comment_id": 104784215, "body": "Sorry I may not have specified. I am using that version. If you look at the log, it is saying I am using 2.6.3, but then it reverts to 2.3.7"}, {"owner": {"reputation": 1, "user_id": 10966366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066f92534a82a50f04a6dc3154eef540?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/10966366/martin"}, "reply_to_user": {"reputation": 35, "user_id": 10231307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AkK2.jpg?s=128&g=1", "display_name": "mwdeatherage", "link": "https://stackoverflow.com/users/10231307/mwdeatherage"}, "edited": false, "score": 0, "creation_date": 1576080059, "post_id": 59289640, "comment_id": 104784298, "body": "What does .ruby-version file in project root says?"}, {"owner": {"reputation": 35, "user_id": 10231307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AkK2.jpg?s=128&g=1", "display_name": "mwdeatherage", "link": "https://stackoverflow.com/users/10231307/mwdeatherage"}, "edited": false, "score": 0, "creation_date": 1576080830, "post_id": 59289640, "comment_id": 104784757, "body": "2.6.3, which makes it all the more odd."}], "tags": [], "owner": {"reputation": 1, "user_id": 10966366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066f92534a82a50f04a6dc3154eef540?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/10966366/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576080020, "last_edit_date": 1576080020, "creation_date": 1576079879, "answer_id": 59289640, "question_id": 59289318, "link": "https://stackoverflow.com/questions/59289318/ruby-version-changing-within-pre-commit-hook/59289640#59289640", "title": "Ruby version changing within pre-commit hook", "body": "<p>You have it installed, but are you using it?\ntype: </p>\n\n<pre><code>rvm use 2.6.3\n\n</code></pre>\n\n<p>to use said version of ruby</p>\n"}], "owner": {"reputation": 35, "user_id": 10231307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AkK2.jpg?s=128&g=1", "display_name": "mwdeatherage", "link": "https://stackoverflow.com/users/10231307/mwdeatherage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576951997, "creation_date": 1576078907, "last_edit_date": 1576951997, "question_id": 59289318, "link": "https://stackoverflow.com/questions/59289318/ruby-version-changing-within-pre-commit-hook", "title": "Ruby version changing within pre-commit hook", "body": "<p>I have RVM installed at 2.6.3, but a pre-commit hook is changing my version back to \"system\" which is 2.3.7. I am unsure how/ why this is happening, as when I run bundle check outside the pre-commit, it works just fine. This is the log that I am getting, along with my .bash_profile and .bashrc. I have tried using \"[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" \" in my .bashrc to no success. Much appreciated to anyone who may have some more information on this problem.</p>\n\n<blockquote>\n  <p><code>git commit -m \"trying\"\n  Using /Users/matt/.rvm/gems/ruby-2.6.3\n  husky &gt; pre-commit (node v8.12.0)\n  Your Ruby version is 2.3.7, but your Gemfile specified 2.6.3\n  husky &gt; pre-commit hook failed (add --no-verify to bypass)</code></p>\n</blockquote>\n\n<p>.bash_profile</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>export PATH=/usr/local/bin:$PATH\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" \n</code></pre>\n\n<p>.bashrc </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>export PATH=\"$PATH:$HOME/.rvm/bin\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576074741, "post_id": 59287635, "comment_id": 104781160, "body": "<code>1.month.ago..Date.today</code> or use <code>where(Tool.arel_table[:published_date].gte(1.month.ago))</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1576082488, "post_id": 59287635, "comment_id": 104785598, "body": "Not directly related to your question but this seems like a lot of Ruby logic that should be database logic instead. You&#39;re doing 10 queries where you could do one. Something like <code>Certified.joins(:tools).where(date: from..to, certifieds: {name: %w[disc wpmot df ptsi eq]})</code>."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 10648704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb928c6f40064e7a12d768934e34d93f?s=128&d=identicon&r=PG&f=1", "display_name": "HCKRMVT", "link": "https://stackoverflow.com/users/10648704/hckrmvt"}, "edited": false, "score": 0, "creation_date": 1576075629, "post_id": 59288110, "comment_id": 104781682, "body": "Thanks, this does solve my problem. I found <a href=\"https://stackoverflow.com/a/18387395/10648704\">this</a> post that provides an example."}], "tags": [], "owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "is_accepted": true, "score": 2, "last_activity_date": 1576074858, "creation_date": 1576074858, "answer_id": 59288110, "question_id": 59287635, "link": "https://stackoverflow.com/questions/59287635/where-method-doesnt-understand-date-objects/59288110#59288110", "title": ".where method doesn&#39;t understand Date objects", "body": "<p>In the first loop you used <code>to - from</code> and it results in number of days between those two dates.</p>\n\n<p>If I understood you correctly you want to find all the <code>certifieds</code> between dates so instead of substracting them supply a <code>Range</code> as a argument to <code>where</code>. You did it in the second loop with <code>Date.today - 1.months..Date.today</code>.</p>\n\n<p>You can build range between two dates using <code>..</code> syntax. Your where clause should look like this: <code>.where(date: from..to)</code></p>\n"}], "owner": {"reputation": 105, "user_id": 10648704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb928c6f40064e7a12d768934e34d93f?s=128&d=identicon&r=PG&f=1", "display_name": "HCKRMVT", "link": "https://stackoverflow.com/users/10648704/hckrmvt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59288110, "answer_count": 1, "score": 0, "last_activity_date": 1576074858, "creation_date": 1576073393, "question_id": 59287635, "link": "https://stackoverflow.com/questions/59287635/where-method-doesnt-understand-date-objects", "title": ".where method doesn&#39;t understand Date objects", "body": "<p>I'm having trouble with the first loop. The second one successfully fills the @res[] array whereas the first one doesn't.</p>\n\n<pre><code>@res = {}\n[:disc, :wpmot, :df, :ptsi, :eq].each do |t|\n   tool = Tool.find_by(name: t)\n   p (to - from)\n   @res[t] = tool.certifieds.where(date: to - from)\nend\n.\n.\n.\n@res = {}\n[:disc, :wpmot, :df, :ptsi, :eq].each do |t|\n   tool = Tool.find_by(name: t)\n   p (Date.today - 1.months..Date.today)\n   @res[t] = tool.certifieds.where(date: Date.today - 1.months..Date.today)\nend\n</code></pre>\n\n<p><code>to</code> and <code>from</code> are defined as such:</p>\n\n<pre><code>from = Date.new(start_year, start_month, start_day)\nto = Date.new(end_year, end_month, end_day)\n</code></pre>\n\n<p>I then printed both values to see if they correspond but they didn't.\n<code>p (Date.today - 1.months..Date.today)</code> gave me <code>'Mon, 11 Nov 2019..Wed, 11 Dec 2019'</code> whereas <code>p (to - from)</code> gave me  <code>'(1/1)'</code>(sort of ratio between both dates). So I do understand that the first loop isn't working because the <code>Date</code> objects aren't correct. What is it that I'm doing wrong ?</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["ruby", "docker", "jenkins", "bundler"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1576077413, "post_id": 59287118, "comment_id": 104782672, "body": "You need to build a custom image with your gems inside."}], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 1553138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/41qKx.png?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/1553138/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1576076132, "creation_date": 1576076132, "answer_id": 59288490, "question_id": 59287118, "link": "https://stackoverflow.com/questions/59287118/how-to-save-installed-gems-in-jenkins-installed-with-docker/59288490#59288490", "title": "How to save installed gems in Jenkins installed with Docker?", "body": "<p>This is actually the intended outcome. As Docker is a transient container, the expectation is you should rebuild <code>bundle</code> from scratch each time.</p>\n"}], "owner": {"reputation": 504, "user_id": 5032083, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4037649b3a1722b0cb699d5a74e2918e?s=128&d=identicon&r=PG&f=1", "display_name": "Igorzovisk", "link": "https://stackoverflow.com/users/5032083/igorzovisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576076132, "creation_date": 1576071666, "last_edit_date": 1576072514, "question_id": 59287118, "link": "https://stackoverflow.com/questions/59287118/how-to-save-installed-gems-in-jenkins-installed-with-docker", "title": "How to save installed gems in Jenkins installed with Docker?", "body": "<p>Every time the job I made in Jenkins run, it installs ALL the gems in the Gemfile.</p>\n\n<p>It seems that the installed gems are not kept. How to keep it?</p>\n\n<p>My job:</p>\n\n<pre><code>pipeline {\n    agent { docker { image 'ruby:2.5.5' } }\n    stages {\n        stage('build') {\n            steps {\n                sh 'ruby --version'\n                sh 'bundle install --jobs 5'\n                sh 'bundle exec rspec'\n                sh 'exit 0'\n            }\n        }\n    }\n}\n\n</code></pre>\n\n<p>My Jenkins: <code>jenkinsci/blueocean</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576072919, "post_id": 59287078, "comment_id": 104780143, "body": "Are you converting an existing project or creating a new one?"}, {"owner": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "edited": false, "score": 0, "creation_date": 1576073602, "post_id": 59287078, "comment_id": 104780498, "body": "try following this steps <a href=\"https://revelry.co/rails-app-without-database/\" rel=\"nofollow noreferrer\">revelry.co/rails-app-without-database</a>"}, {"owner": {"reputation": 1, "user_id": 12518665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a587724a175820c6946a20c3e15906ee?s=128&d=identicon&r=PG&f=1", "display_name": "nakamura samurai", "link": "https://stackoverflow.com/users/12518665/nakamura-samurai"}, "edited": false, "score": 0, "creation_date": 1576073815, "post_id": 59287078, "comment_id": 104780604, "body": "I am working on an existing project"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12518665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a587724a175820c6946a20c3e15906ee?s=128&d=identicon&r=PG&f=1", "display_name": "nakamura samurai", "link": "https://stackoverflow.com/users/12518665/nakamura-samurai"}, "edited": false, "score": 0, "creation_date": 1576109983, "post_id": 59287834, "comment_id": 104796333, "body": "Thank you Everything was done. Still, I get the same error"}], "tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 0, "last_activity_date": 1576073956, "creation_date": 1576073956, "answer_id": 59287834, "question_id": 59287078, "link": "https://stackoverflow.com/questions/59287078/disabling-activerecord-in-ruby-on-rails-5/59287834#59287834", "title": "Disabling ActiveRecord in Ruby on Rails 5", "body": "<p>If you creating new project then you can exclude ActiveRecord by running the command: \n<code>rails new yourprojectname -O</code><br>\nwhere the -O param is used for not including ActiveRecord into newly created project.</p>\n\n<p>For existing project please check this advise here: <a href=\"https://stackoverflow.com/questions/28319002/how-do-i-remove-activerecord-from-an-existing-rails-4-application\">How do I remove ActiveRecord from an existing Rails 4 Application?</a></p>\n\n<p>For Rails 5 there is one more suggestion to do:\nDo all the steps from link above, but also remove the line</p>\n\n<pre><code>Rails.application.config.active_record.belongs_to_required_by_default = true\n</code></pre>\n\n<p>from</p>\n\n<pre><code>config/initializers/new_framework_defaults.rb\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12518665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a587724a175820c6946a20c3e15906ee?s=128&d=identicon&r=PG&f=1", "display_name": "nakamura samurai", "link": "https://stackoverflow.com/users/12518665/nakamura-samurai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1576073956, "creation_date": 1576071527, "last_edit_date": 1576071610, "question_id": 59287078, "link": "https://stackoverflow.com/questions/59287078/disabling-activerecord-in-ruby-on-rails-5", "title": "Disabling ActiveRecord in Ruby on Rails 5", "body": "<p>I used the <a href=\"https://stackoverflow.com/questions/45008990/disable-activerecord-in-ruby-on-rails-5\">Disable ActiveRecord in Ruby on Rails 5</a> as a reference, but my problem was not solved.</p>\n\n<p>I'm experiencing the problem below</p>\n\n<pre><code>Cannot load database configuration:\nCould not load database configuration. No such file - [\"config/database.yml\"] (RuntimeError)\n</code></pre>\n\n<p>Do you know what to do?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1576079217, "post_id": 59286735, "comment_id": 104783806, "body": "I&#39;ve marked this as a duplicate. TL;DL use <code>self::SCORE_HIGHEST</code> inside your struct."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1576079503, "post_id": 59286735, "comment_id": 104783968, "body": "Just noticed that you are the author of the other question, too! Seems like you encounter this problem every year on December 11 ;-)"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576146650, "post_id": 59286735, "comment_id": 104807821, "body": "@Stefan : Not exactly the same problem: In the first case, I had an outer class wrapped around it, and I was fine with associating the constant with the outer class. Now it is a stand-alone class, and I would like the constant to be part of the class generated by the <code>Struct</code>."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576147035, "post_id": 59286735, "comment_id": 104808039, "body": "@Stefan : I have updated my question by incorporating your suggestion, which did not work for me - most likely because I misunderstood you with this. And you are right: December 11 seems to be &quot;constant problem day&quot; for me ...."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1576147142, "post_id": 59286735, "comment_id": 104808114, "body": "I cannot replicate the problem. Pasting your (updated) code into IRB works just fine for me."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576147551, "post_id": 59286735, "comment_id": 104808377, "body": "Another December mystery: I still have the IRB session open and can actually <i>see</i>  the error message, but when I open a new IRB, and paste the code, it works perfectly well. Hence, your suggestion does seem to work. If you make it an answer, I will accept it."}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1576078917, "answer_count": 0, "score": 1, "last_activity_date": 1576147639, "creation_date": 1576070364, "last_edit_date": 1576147639, "question_id": 59286735, "link": "https://stackoverflow.com/questions/59286735/properly-defining-a-constant-inside-a-ruby-struct", "closed_reason": "Duplicate", "title": "Properly defining a constant inside a Ruby Struct", "body": "<p>I stumbled over a problem, which i present highly simplified here:</p>\n\n<pre><code>LDI = Struct.new(\n  :dummy\n) do\n  SCORE_HIGHEST =  2\n  def d\n    dummy+1 \n  end\nend\n\n# Using the constant defined in LDI\nLDH = LDI::SCORE_HIGHEST\nputs LDH\n</code></pre>\n\n<p>The idea here is that <code>Struct</code> is used to define a class which basically acts as a Container for several fields and puts for convenience more stuff in it. In the real application, there are of course more fields, more constants, and some methods to make the access easier.</p>\n\n<p>Running this program with MRI Ruby 2.6.2 produces the <strong>error</strong> <em>uninitialized constant LDI::SCORE_HIGHEST (NameError)</em> for the line defining the constant LDH. Running it with JRuby 1.7 (which corresponds to MRI Ruby 1.9) and \"warnings\" enabled, correctly outputs the number <code>2</code>, but also a <strong>warning</strong>  <em>toplevel constant SCORE_HIGHEST referenced by LDI::SCORE_HIGHEST</em>.</p>\n\n<p>It seems that what was only a warning in earlier Ruby versions, is now seen as error. Can someone explain exactly what's going on here?</p>\n\n<p>I already found that obviously inside the <code>do....end</code> block of <code>Struct.new</code>, the constants are not bound to the class being defined, but on global scope. Indeed if I just reference it with SCORE_HIGHEST, without further qualification, it works. But why is it that defining methods does work - they become methods of the class LDI -, while defining constants does not?</p>\n\n<p>And what's the best way to define such a constant? I found a solution, but I don't like so much:</p>\n\n<p>I could take the constant definition into a separate <code>class</code> block (I added here for illustration one more method to make it clear why I don't like this way):</p>\n\n<pre><code>LDI = Struct.new(\n  :dummy\n) do\n  def self.h\n    LDI::SCORE_HIGHEST\n  end\nend\nclass LDI\n  SCORE_HIGHEST =  2\nend\n\nputs  LDI.h\nLDH = LDI::SCORE_HIGHEST\nputs LDH\n</code></pre>\n\n<p>This works, but I have to prefix the name of the constant with the class name, LDI, even inside the definint block (as seen in the definition of method <code>h</code>).</p>\n\n<p>Perhaps an alternative would be not to use constants, but just methods which return a constant value, i.e.</p>\n\n<pre><code>  def score_highest; 2; end\n</code></pre>\n\n<p>but this doesn't look very clever either.</p>\n\n<p>Any better idea?</p>\n\n<p><strong>UPDATE</strong>: @Stefan suggested in his comment to prefix the constant by <code>self</code> inside the struct, but this doesn't seem to work either:</p>\n\n<pre><code>LDI = Struct.new(\n  :dummy\n) do\n  self::SCORE_HIGHEST =  2\n  def d\n    dummy+1 \n  end\nend\n\n# Using the constant defined in LDI\nLDH = LDI::SCORE_HIGHEST\nputs LDH\n</code></pre>\n\n<p>Yields error <em>uninitialized constant LDI::SCORE_HIGHTEST</em></p>\n\n<p><strong>UPDATE</strong> The aforementioned error is not reproducible, The suggested code works indeed in a new irb session....</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1576069385, "creation_date": 1576069385, "answer_id": 59286467, "question_id": 59285919, "link": "https://stackoverflow.com/questions/59285919/how-to-render-flash-messages-when-remote-true/59286467#59286467", "title": "How to render flash messages when remote true", "body": "<p>Use <code>flash.now[:error]</code> if you need to use the flash message on the same request.</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-now\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-now</a>\n<a href=\"https://guides.rubyonrails.org/action_controller_overview.html#flash-now\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/action_controller_overview.html#flash-now</a></p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 12499841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782e3e6b144205d2c026a06dc8140457?s=128&d=identicon&r=PG&f=1", "display_name": "Tejasvini Parikh", "link": "https://stackoverflow.com/users/12499841/tejasvini-parikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1576069540, "creation_date": 1576069540, "answer_id": 59286501, "question_id": 59285919, "link": "https://stackoverflow.com/questions/59285919/how-to-render-flash-messages-when-remote-true/59286501#59286501", "title": "How to render flash messages when remote true", "body": "<p>replace flash to <code>flash.now</code>.\nfor example,</p>\n\n<pre><code>respond_to do |format|\n  format.js{ flash.now[:error] = l(:start_time_expired_error)}\nend\n</code></pre>\n\n<p>and in js.erb file re-render the partial where you want to update.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1576069824, "creation_date": 1576069824, "answer_id": 59286578, "question_id": 59285919, "link": "https://stackoverflow.com/questions/59285919/how-to-render-flash-messages-when-remote-true/59286578#59286578", "title": "How to render flash messages when remote true", "body": "<p>What happens when you click a <code>remote: true</code> link is that Rails creates a request for <code>text/javascript</code> and then runs the resulting javascript in that page.</p>\n\n<p>Usually a <code>js.erb</code> template contains some javascript that modifies the document:</p>\n\n<pre><code>$(\"&lt;%= escape_javascript(render @user) %&gt;\").appendTo(\"#users\");\n</code></pre>\n\n<p>So if you want to alter the flash messages on the page you need to target the wrapping element and append it:</p>\n\n<pre><code>$(\"&lt;%= escape_javascript(render_flash_messages) %&gt;\").appendTo(\"#flashes\");\n</code></pre>\n\n<p>This assumes you have a wrapping element around the flash messages. Otherwise just add one to the layout.</p>\n\n<pre><code>&lt;div id=\"flashes\"&gt;\n  &lt;%= render_flash_messages %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 12070054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u7SRMcwnkJI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWPugfiTR3garhloctH93uRgdThQ/photo.jpg?sz=128", "display_name": "Rostislav Ruban", "link": "https://stackoverflow.com/users/12070054/rostislav-ruban"}, "is_accepted": true, "score": 0, "last_activity_date": 1576070560, "creation_date": 1576070560, "answer_id": 59286781, "question_id": 59285919, "link": "https://stackoverflow.com/questions/59285919/how-to-render-flash-messages-when-remote-true/59286781#59286781", "title": "How to render flash messages when remote true", "body": "<p>I just manually redirect to the page by window.location solution - here I just call issues index controller, but here can any link.  </p>\n\n<pre><code>      flash[:error] = l(:start_time_expired_error)\n      respond_to do |format|\n        format.js{ render js:\"window.location='/issues/\"+@issue.id.to_s+\"'\"}\n      end\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 12070054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u7SRMcwnkJI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWPugfiTR3garhloctH93uRgdThQ/photo.jpg?sz=128", "display_name": "Rostislav Ruban", "link": "https://stackoverflow.com/users/12070054/rostislav-ruban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 59286781, "answer_count": 4, "score": 2, "last_activity_date": 1576070560, "creation_date": 1576067534, "last_edit_date": 1576068077, "question_id": 59285919, "link": "https://stackoverflow.com/questions/59285919/how-to-render-flash-messages-when-remote-true", "title": "How to render flash messages when remote true", "body": "<p>I have a time logger controller method that calls from my view, called <code>_embed_menu.html.erb</code></p>\n\n<pre><code>&lt;%= link_to l(:start_time_logger) + ' #' + @issue.id.to_s + ' ',\n   {:controller =&gt; '/time_loggers', :action =&gt; 'start', :issue_id =&gt; @issue.id},\n    :class =&gt; 'icon icon-start',\n    :\"data-replace\" =&gt; '#time-logger-menu',\n    :remote =&gt; true\n%&gt;\n</code></pre>\n\n<p>The part of 'start' method, where I shown an error:</p>\n\n<pre><code>      respond_to do |format|\n        format.js{ flash[:error] = l(:start_time_expired_error)}\n      end\n</code></pre>\n\n<p>Now to the part of the rendering flash messages. <code>application_helper.rb</code>\nHave <code>render_flash_messages</code> function.</p>\n\n<pre><code>  def render_flash_messages\n    s = ''\n    flash.each do |k,v|\n      s &lt;&lt; content_tag('div', v.html_safe, :class =&gt; \"flash #{k}\", :id =&gt; \"flash_#{k}\")\n    end\n    s.html_safe\n  end\n</code></pre>\n\n<p>and that function called on <code>base.html.erb</code> template.</p>\n\n<pre><code>&lt;%= render_flash_messages %&gt;\n</code></pre>\n\n<p>So the result - I launch a start method and flash shown only after I reload the page. I also tried to redirect with the hope that after this redirect the error will show.</p>\n\n<pre><code>redirect_to controller: 'issues', format: 'js'\n</code></pre>\n\n<p>but no result.</p>\n\n<p>Maybe I can trigger re-rendering of &lt;%= render_flash_messages %>?</p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 61, "user_id": 12517838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EuiPBORYhFo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdMUNdgIfYx1rLGuPOzhaCgPfvYjw/photo.jpg?sz=128", "display_name": "D_Oghli", "link": "https://stackoverflow.com/users/12517838/d-oghli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576067203, "creation_date": 1576067203, "question_id": 59285812, "link": "https://stackoverflow.com/questions/59285812/activeldap-add-a-value-to-a-multivalued-attribute-in-the-active-directory", "title": "Activeldap: add a value to a multivalued attribute in the active directory", "body": "<p>i have a users and groups in my AD.\nou=users, dc=MLT, dc=local\nou=groups, dc=MLT, dc=local\ni want to associate the users with the groups using activeldap.\ni do that through adding the users distinguish name (user.dn) to an attribute in the groups called \"member\" which is multivalued attribute.</p>\n\n<p>you can hier read the description of \"member\"\n<a href=\"https://docs.microsoft.com/en-us/windows/win32/ad/group-objects\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/ad/group-objects</a></p>\n\n<p>This is the Ruby code that I wrote :</p>\n\n<pre><code>config = {\n  host: 'c',\n  base: 'dc= MLT,dc=local',\n  bind_dn: ENV['AD_SERVICE_USER'],\n  password: ENV['AD_SERVICE_PASSWORD']\n}\n# Connect to LDAP server\nActiveLdap::Base.setup_connection config\n\n\nclass Group &lt; ActiveLdap::Base\n  query = {\n    dn_attribute: 'cn',\n    prefix: 'ou=groups',\n    classes: %w[top group]\n  }\n  ldap_mapping query\nend\n\nclass User &lt; ActiveLdap::Base\n  query = {\n    dn_attribute: 'cn',\n    prefix: 'ou=users'\n  }\n  ldap_mapping query\nend\n\n# associate \"Joe\" to the \"employee\" group\ngroup = Group.find(:first, attribute: 'cn', value: 'employee')\nuser = User.find(:first, attribute:'cn', value:'Joe')\n\n# I used push to add the new user.dn because \"member\" should be a list of distinguished names.\ngroup.member.push(user.dn) \nbegin\n  group.save\nrescue ActiveLdap::SaveError\nputs 'Could not save group!'\nputs new_group.errors.full_messages\nend\n</code></pre>\n\n<p>I became this error message:</p>\n\n<pre><code>undefined method `push' for #&lt;ActiveLdap::DistinguishedName:0x00007f8d2054cb58&gt;\n</code></pre>\n\n<p>can anyone tell me how can I add more than one value to member ????</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "enums", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8518731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fKKrS.jpg?s=128&g=1", "display_name": "jpac", "link": "https://stackoverflow.com/users/8518731/jpac"}, "edited": false, "score": 0, "creation_date": 1576071243, "post_id": 59285820, "comment_id": 104779117, "body": "The ruby version was updated from 2.4.5 to 2.5.5. Oh so <code>#zip</code> belongs to <code>Enumerable</code>. I noticed that <code>Enumerable</code> was included in <code>ActiveRecord::Relation</code> but I didn&#39;t join the dots. Thank you @max for the clarification"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1576067622, "last_edit_date": 1576067622, "creation_date": 1576067231, "answer_id": 59285820, "question_id": 59285194, "link": "https://stackoverflow.com/questions/59285194/rails-5-2-argumenterror-when-trying-to-define-enum/59285820#59285820", "title": "Rails 5.2 - ArgumentError when trying to define enum", "body": "<p>The method in question is actually <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable#zip</a> which a part of the Ruby standard library:</p>\n\n<pre><code>irb(main):049:0&gt; ['a','b', 'c'].zip([1,2,3])\n=&gt; [[\"a\", 1], [\"b\", 2], [\"c\", 3]]\n</code></pre>\n\n<p>Which merges arrays together. <code>ActiveRecord::Relation</code> includes Enumerable which is what makes it act like an array.</p>\n\n<blockquote>\n  <p>Before the update to 5.2.4, there was no problem with this. Was there\n  any update on ActiveRecord lib that prevents creating an enum with a\n  value :zip?</p>\n</blockquote>\n\n<p>Did you have an ancient Ruby version before the update? As said previously this method is a part of Ruby and not AR. And it actually a completely irrelevant question - defining class methods that collide with enumerable is not a good idea as you sooner or later will interact with code that relies on <code>#zip</code> actually zipping arrays.</p>\n"}], "owner": {"reputation": 69, "user_id": 8518731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fKKrS.jpg?s=128&g=1", "display_name": "jpac", "link": "https://stackoverflow.com/users/8518731/jpac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 59285820, "answer_count": 1, "score": 1, "last_activity_date": 1576067622, "creation_date": 1576065063, "last_edit_date": 1576065638, "question_id": 59285194, "link": "https://stackoverflow.com/questions/59285194/rails-5-2-argumenterror-when-trying-to-define-enum", "title": "Rails 5.2 - ArgumentError when trying to define enum", "body": "<p>My class defines an <em>enum</em> with the values <code>enum source: [:pdf, :zip]</code>. Everytime I start my Rails app, the following error appears:</p>\n\n<pre><code>ArgumentError: You tried to define an enum named \"source\" on the model \"ExtractionRule\", \nbut this will generate a class method \"zip\", which is already defined by ActiveRecord::Relation.\n</code></pre>\n\n<p><strong>Before the update to 5.2.4, there was no problem with this</strong>. Was there any update on ActiveRecord lib that prevents creating an <em>enum</em> with a value <code>:zip</code>? </p>\n\n<p>There is nothing on the release notes that says otherwise. I've already looked into Rails source code but couldn't find anything that would create this issue.</p>\n\n<p><strong>Note</strong>: Changing the name of the values to something else like <code>[:pdf_type, :zip_type]</code> fixes the issue, but I would rather keep the code as it his since this was working in the past.</p>\n\n<p><strong>UPDATE</strong>\nI've managed to tackle this issue by using <code>prefix: :source</code>. This way I could keep the same values for the <em>enum</em>. Either way, I don't know why the error occurred.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1576062970, "post_id": 59284426, "comment_id": 104774768, "body": "I don&#39;t understand what you&#39;ve done. This used to be a method in a model, and now you&#39;ve moved it into <i>another class</i>? How do you expect this to work? Can you provide more context? Based on the limited information you&#39;ve provided, I don&#39;t think this makes sense -- you could move the method into a <b>module</b>, which gets <code>include</code>d into the model, but I don&#39;t know how you expect to use it as a standalone class like this."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1576063075, "post_id": 59284426, "comment_id": 104774825, "body": "You can test it just like any other method. For example, <code>expect(MyModel.for_ids_with_order).to eq (...)</code>. But again, without knowing some wider context of how this method is being used, I can&#39;t possibly write a working test case."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576064965, "post_id": 59284426, "comment_id": 104775779, "body": "\u201cclass method\u201d doesn&#39;t mean that you move a block of code into its own class. It means that you define a method on a class rather than on the instances of a class (see <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/methods_rdoc.html#label-Scope\" rel=\"nofollow noreferrer\">method scopes</a>). To extract parts of your class into separate modules, Rails provides <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\"><code>ActiveSupport::Concern</code></a>"}, {"owner": {"reputation": 314, "user_id": 2916803, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cf4d2b53d362ecf102683795a5c2d07b?s=128&d=identicon&r=PG&f=1", "display_name": "drifterOcean19", "link": "https://stackoverflow.com/users/2916803/drifterocean19"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576065659, "post_id": 59284426, "comment_id": 104776119, "body": "@Stefan Initially, this is the scope usage and how do I make a class method?<a href=\"http://rubyfiddle.com/riddles/653c0\" rel=\"nofollow noreferrer\">rubyfiddle.com/riddles/653c0</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1576066866, "post_id": 59284426, "comment_id": 104776695, "body": "@drifterOcean19 the &quot;method scopes&quot; link in my comment above contains an example of a class method. You usually just write <code>def self.method_name</code> within the class body."}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 2, "last_activity_date": 1576062986, "creation_date": 1576062986, "answer_id": 59284604, "question_id": 59284426, "link": "https://stackoverflow.com/questions/59284426/spec-for-class-method-preserving-order-and-returns-an-activerecord-relation/59284604#59284604", "title": "Spec for class method - preserving order and returns an ActiveRecord relation", "body": "<p>You can't really Unit test this, because it's tightly coupled with the database.\nSo Rails model test are not really unit tests.</p>\n\n<p>So with that out of the way, you can test it and it's pretty simple. (I'll assume you're using <a href=\"https://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md\" rel=\"nofollow noreferrer\">FactoryBot</a> and your rspec is <a href=\"https://relishapp.com/rspec/rspec-expectations/v/3-9/docs/aggregating-failures\" rel=\"nofollow noreferrer\">Aggregating failures</a> ) </p>\n\n<pre><code>let!(:order) { create(:order) }\nlet!(:other_order) { create(:order) }\n\nspecify do\n   expect(describe_class.for_ids_with_order([order.id])).to eq [order]\n   expect(describe_class.for_ids_with_order([other_order.id])).to eq [other_order]\nend\n</code></pre>\n\n<p>Then, you can do another context that will test the ordering: I'd create 3 or more items, with specified positions and make an expectation like above but you're expecting an array of few items with a particular order (I'm not 100% sure what <code>\"position((',' || id::text || ',') in ?)\"</code> is doing there, hence no example. But this should get you going).</p>\n\n<p>BTW. if it was a scope, I'd test it exactly the same way. </p>\n\n<p>EDIT: I missed the part about retutning AR relation.</p>\n\n<pre><code>expect(describe_class.for_ids_with_order([order.id])).to be_a(ActiveRecord::Relation)\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 2916803, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cf4d2b53d362ecf102683795a5c2d07b?s=128&d=identicon&r=PG&f=1", "display_name": "drifterOcean19", "link": "https://stackoverflow.com/users/2916803/drifterocean19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59284604, "answer_count": 1, "score": 1, "last_activity_date": 1576062986, "creation_date": 1576062405, "question_id": 59284426, "link": "https://stackoverflow.com/questions/59284426/spec-for-class-method-preserving-order-and-returns-an-activerecord-relation", "title": "Spec for class method - preserving order and returns an ActiveRecord relation", "body": "<p>Pretty new on Rails and currently learning out how to tackle class methods, scope and spec...\nInitially this was written as a scope in a model but it seems a bit bloated so I've taken it out and made it into class method like below:</p>\n\n<pre><code>class OrderedByIds\n\n  scope :for_ids_with_order, lambda { |ids|\n    order = sanitize_sql_array(\n      [\"position((',' || id::text || ',') in ?)\", ids.join(',') + ',']\n    )\n    where(id: ids).order(order)\n  }\n\nend\n</code></pre>\n\n<p># usage:</p>\n\n<pre><code> OrderedByIds.for_ids_with_order([1, 3, 2])\n</code></pre>\n\n<p>What's the best way to unit test for this class method?</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576300117, "post_id": 59284340, "comment_id": 104863781, "body": "&quot;<a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>&quot;"}, {"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576489598, "post_id": 59284340, "comment_id": 104902989, "body": "hi @theTinMan, thanks for coming back with an answer. i haven&#39;t been working on this for a few days, I&#39;ll try out your suggestion and come back. thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "edited": false, "score": 0, "creation_date": 1576148818, "post_id": 59290118, "comment_id": 104809044, "body": "thanks for coming back -  this results in an error : <code>undefined method sub! for #&lt;Nokogiri::XML::Document .....</code>  I get the same thing when I try <code>sub</code> and <code>gsub</code>"}, {"owner": {"reputation": 747, "user_id": 1553138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/41qKx.png?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/1553138/alex"}, "reply_to_user": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "edited": false, "score": 0, "creation_date": 1576152855, "post_id": 59290118, "comment_id": 104811146, "body": "Interesting. Perhaps gist will help. <a href=\"https://gist.github.com/bricker/3108044\" rel=\"nofollow noreferrer\">gist.github.com/bricker/3108044</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1576191077, "post_id": 59290118, "comment_id": 104829440, "body": "The gist is interesting but it&#39;s the wrong way to change nodes or markup with Nokogiri when it makes it so easy to make the changes using its built-in methods."}], "tags": [], "owner": {"reputation": 747, "user_id": 1553138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/41qKx.png?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/1553138/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1576083963, "last_edit_date": 1576083963, "creation_date": 1576081547, "answer_id": 59290118, "question_id": 59284340, "link": "https://stackoverflow.com/questions/59284340/how-to-add-an-element-to-xml-with-nokogiri-and-xpath/59290118#59290118", "title": "How to add an element to XML with Nokogiri and XPath", "body": "<p>I wonder if you can achieve this with a simple <code>sub!</code> call?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>test_runner_config.sub!('&lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;', '&lt;startup&gt;\\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.7.2\" /&gt;')\nFile.open(test_runner_path, 'w+') { |f| f.write(test_runner_config) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "edited": false, "score": 0, "creation_date": 1576495946, "post_id": 59313627, "comment_id": 104906120, "body": "thanks for this explanation - i understand it better now :)"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 2, "last_activity_date": 1576190642, "last_edit_date": 1576190642, "creation_date": 1576189852, "answer_id": 59313627, "question_id": 59284340, "link": "https://stackoverflow.com/questions/59284340/how-to-add-an-element-to-xml-with-nokogiri-and-xpath/59313627#59313627", "title": "How to add an element to XML with Nokogiri and XPath", "body": "<p>Try this on.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n  &lt;/startup&gt;\n  &lt;runtime&gt;\n    &lt;legacyUnhandledExceptionPolicy enabled=\"1\"/&gt;\n    &lt;loadFromRemoteSources enabled=\"true\"/&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;probing privatePath=\"lib;addins\"/&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n\nEOT\n\nstartup_node = doc.at('startup')\nstartup_node.delete('useLegacyV2RuntimeActivationPolicy')\nstartup_node.add_child('&lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.7.2\" /&gt;')\n</code></pre>\n\n<p><a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Searchable#at-instance_method\" rel=\"nofollow noreferrer\"><code>at</code></a> in <code>doc.at('startup')</code> tells Nokogiri to find the first <code>&lt;startup&gt;</code> node. <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#remove_attribute-instance_method\" rel=\"nofollow noreferrer\"><code>delete</code></a> is used to remove attributes of the node, and <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#add_child-instance_method\" rel=\"nofollow noreferrer\"><code>add_child</code></a> adds a sub-node consisting of the string or another Node or NodeSet.</p>\n\n<p>The <code>add_child</code> documentation says:</p>\n\n<blockquote>\n  <p>Add <code>node_or_tags</code> as a child of this Node. <code>node_or_tags</code> can be a Nokogiri::XML::Node, a ::DocumentFragment, a ::NodeSet, or a string containing markup.</p>\n</blockquote>\n\n<p>The code above results in:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>doc.to_xml\n# =&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\n\" +\n#    \"&lt;configuration&gt;\\n\" +\n#    \"  &lt;startup&gt;\\n\" +\n#    \"  &lt;supportedRuntime version=\\\"v4.0\\\" sku=\\\".NETFramework,Version=v4.7.2\\\"/&gt;&lt;/startup&gt;\\n\" +\n#    \"  &lt;runtime&gt;\\n\" +\n#    \"    &lt;legacyUnhandledExceptionPolicy enabled=\\\"1\\\"/&gt;\\n\" +\n#    \"    &lt;loadFromRemoteSources enabled=\\\"true\\\"/&gt;\\n\" +\n#    \"    &lt;assemblyBinding xmlns=\\\"urn:schemas-microsoft-com:asm.v1\\\"&gt;\\n\" +\n#    \"      &lt;probing privatePath=\\\"lib;addins\\\"/&gt;\\n\" +\n#    \"    &lt;/assemblyBinding&gt;\\n\" +\n#    \"  &lt;/runtime&gt;\\n\" +\n#    \"&lt;/configuration&gt;\\n\"\n</code></pre>\n"}], "owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59313627, "answer_count": 2, "score": 0, "last_activity_date": 1576190642, "creation_date": 1576062105, "last_edit_date": 1576189015, "question_id": 59284340, "link": "https://stackoverflow.com/questions/59284340/how-to-add-an-element-to-xml-with-nokogiri-and-xpath", "title": "How to add an element to XML with Nokogiri and XPath", "body": "<p>I have the following XML:</p>\n\n<pre><code>    ?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;configuration&gt;\n  &lt;!--\n       The .NET 2.0 build of the console runner only \n    runs under .NET 2.0 or higher. The setting\n    useLegacyV2RuntimeActivationPolicy only applies \n    under .NET 4.0 and permits use of mixed mode \n    assemblies, which would otherwise not load \n    correctly.\n    --&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;!-- Comment out the next line to force use of .NET 4.0 --&gt;\n  &lt;/startup&gt;\n  &lt;runtime&gt;\n    &lt;!-- Ensure that test exceptions don't crash NUnit --&gt;\n    &lt;legacyUnhandledExceptionPolicy enabled=\"1\"/&gt;\n    &lt;!-- Run partial trust V2 assemblies in full trust under .NET 4.0 --&gt;\n    &lt;loadFromRemoteSources enabled=\"true\"/&gt;\n    &lt;!-- Look for addins in the addins directory for now --&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;probing privatePath=\"lib;addins\"/&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Using a Rakefile, I want to add an element in the <code>&lt;startup&gt;</code> section to say:</p>\n\n<pre><code>&lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.7.2\" /&gt;\n</code></pre>\n\n<p>to be:</p>\n\n<pre><code>&lt;startup&gt;\n   &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.7.2\" /&gt;\n&lt;/startup&gt;\n</code></pre>\n\n<p>Currently I have this:</p>\n\n<pre><code>task :update_test_runner_supported_runtime do\n    test_runner_path   = 'Packages\\NUnit.Runners.2.6.4\\tools\\nunit-console-x86.exe.config'\n    test_runner_config = Nokogiri::XML(open(functional_connection_path))\n  functional_connection_config.xpath(\"//startup/\")  #to find the start up element\n  File.open(test_runner_path, 'w+') { |f| f.write(test_runner_config) } #to write the changes\nend\n</code></pre>\n\n<p>What is the actual syntax to add this detail for the supported run time. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging"], "answers": [{"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1576060151, "post_id": 59282824, "comment_id": 104773149, "body": "Why on earth is that logging at :info level grrrhhhh"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1576062583, "post_id": 59282824, "comment_id": 104774550, "body": "That&#39;s useful, but I&#39;m not too happy with monkey patching as a solution. I&#39;ve raised a Webapaker issue: <a href=\"https://github.com/rails/webpacker/issues/2392\" rel=\"nofollow noreferrer\">github.com/rails/webpacker/issues/2392</a>"}], "tags": [], "owner": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "is_accepted": false, "score": 4, "last_activity_date": 1576057425, "creation_date": 1576057425, "answer_id": 59282824, "question_id": 59282579, "link": "https://stackoverflow.com/questions/59282579/rails-webpacker-stop-logging-nothing-to-do/59282824#59282824", "title": "Rails Webpacker: Stop logging &quot;Nothing to do&quot;", "body": "<p>It's defined here:\n<a href=\"https://github.com/rails/webpacker/blob/d836e34dc85b97f8c29a02286d8c93ecef980e58/lib/webpacker/compiler.rb#L30\" rel=\"nofollow noreferrer\">https://github.com/rails/webpacker/blob/d836e34dc85b97f8c29a02286d8c93ecef980e58/lib/webpacker/compiler.rb#L30</a></p>\n\n<p>So maybe override this method, for example something simple like this:\n<code>app/config/initializers/webpacker.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Webpacker::Compiler.class_eval do\n  def compile\n    if stale?\n      run_webpack.tap do |success|\n        record_compilation_digest\n      end\n    else\n      true\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1595843691, "creation_date": 1576056610, "question_id": 59282579, "link": "https://stackoverflow.com/questions/59282579/rails-webpacker-stop-logging-nothing-to-do", "title": "Rails Webpacker: Stop logging &quot;Nothing to do&quot;", "body": "<p>Is there a way to stop Webpacker logging that there is nothing to do. I'm getting repeated entries of:</p>\n\n<pre><code>[Webpacker] Everything's up-to-date. Nothing to do\n</code></pre>\n\n<p>Which is just a waste of a log line.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1576061945, "post_id": 59282229, "comment_id": 104774196, "body": "did you tried to add:  require &#39;net/http&#39; require &#39;net/https&#39;"}, {"owner": {"reputation": 1, "user_id": 11209314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95871a8d40d91a787a0106b21da4923c?s=128&d=identicon&r=PG&f=1", "display_name": "ankh", "link": "https://stackoverflow.com/users/11209314/ankh"}, "reply_to_user": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1576117033, "post_id": 59282229, "comment_id": 104797705, "body": "@Nezir I add require &#39;net/http&#39; , but the errors is the same"}], "owner": {"reputation": 1, "user_id": 11209314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95871a8d40d91a787a0106b21da4923c?s=128&d=identicon&r=PG&f=1", "display_name": "ankh", "link": "https://stackoverflow.com/users/11209314/ankh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576055677, "creation_date": 1576055502, "last_edit_date": 1576055677, "question_id": 59282229, "link": "https://stackoverflow.com/questions/59282229/i-use-cloudinary-gem-1-5-2-throw-error-undefined-method-http-code-for-nome", "title": "I use cloudinary_gem 1.5.2 ,throw error &quot;undefined method `http_code&#39; for #&lt;NoMethodError: undefined method `code&#39; for nil:NilClass&gt;&quot;", "body": "<p>I can upload image to cloudinary.but throw error </p>\n\n<pre><code>undefined method `http_code' for #&lt;NoMethodError: undefined method `code' for nil:NilClass&gt;\".\n</code></pre>\n\n<p>Then I update gem cloudinary version to 1.13.1,It's not a problem or not solved. Throw the same exception.</p>\n\n<p><strong>Here is my code</strong></p>\n\n<pre><code>result = params[:image].collect do |image|\n  Cloudinary::Uploader.upload(image, options)\nend\n</code></pre>\n\n<p><strong>Here is my error message</strong>\n<a href=\"https://i.stack.imgur.com/vAw1p.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p><strong>My ruby version is 2.3.2\nMy rails version is5.0.3</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module", "model"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1576054765, "post_id": 59282004, "comment_id": 104770147, "body": "<code>friend_name</code> is an instance method of the <code>Car</code> class, so <code>Car.new.friend_name(type: &#39;test&#39;)</code> works, but <code>Car.friend_name(type: &#39;test&#39;)</code> does not."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576063648, "post_id": 59282004, "comment_id": 104775129, "body": "What is this code supposed to actually achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": true, "score": 3, "last_activity_date": 1576055653, "creation_date": 1576055653, "answer_id": 59282276, "question_id": 59282004, "link": "https://stackoverflow.com/questions/59282004/undefined-module-method-in-model/59282276#59282276", "title": "Undefined module method in model", "body": "<p>If <code>friend_name</code> is a class method then instead of <code>include</code> use <code>extend</code> in <code>Car</code> model</p>\n\n<pre><code>extend Modules::Type\n</code></pre>\n\n<p>More info about difference between <code>include</code> and <code>extend</code> could be found here -</p>\n\n<p><a href=\"https://stackoverflow.com/questions/156362/what-is-the-difference-between-include-and-extend-in-ruby\">What is the difference between include and extend in Ruby?</a></p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59282276, "answer_count": 1, "score": 0, "last_activity_date": 1576063501, "creation_date": 1576054678, "question_id": 59282004, "link": "https://stackoverflow.com/questions/59282004/undefined-module-method-in-model", "title": "Undefined module method in model", "body": "<p><strong>lib/modules/file_type.rb</strong></p>\n\n<pre><code>module Modules\n  module Type\n    def friend_name(type:)\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app/models/car.rb</strong></p>\n\n<pre><code>class Car &lt; ApplicationRecord\n  include Modules::Type\n\n  def self.to_array\n  ...\n  name = friend_name(type: 'test')\n  ...\n  end\nend\n</code></pre>\n\n<p>But I am getting this error:</p>\n\n<pre><code>undefined method `friend_name'\n</code></pre>\n\n<p>I am not sure why I am getting this error.</p>\n\n<p>Anyone can help me?</p>\n"}, {"tags": ["ruby", "docker-compose", "rbenv"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576051893, "post_id": 59281193, "comment_id": 104768816, "body": "Are those commands from within your container?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576051929, "post_id": 59281193, "comment_id": 104768832, "body": "There&#39;s probably a .ruby-version file in the root of your project (it&#39;s a hidden file), rbenv will check for this and use the version listed there if it&#39;s installed"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576056147, "post_id": 59281193, "comment_id": 104770948, "body": "The commands are outside the container. The .ruby-version is 2.6.2, which is what I want"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1576056201, "post_id": 59281193, "comment_id": 104770982, "body": "As the other person answering stated - when you&#39;re running the docker container it doesn&#39;t have access to anything stored outside of it - you need to setup a docker container that comes with ruby installed"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1576056221, "post_id": 59281193, "comment_id": 104770989, "body": "Check out <a href=\"https://hub.docker.com/_/ruby\" rel=\"nofollow noreferrer\">hub.docker.com/_/ruby</a>"}, {"owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "edited": false, "score": 0, "creation_date": 1603427812, "post_id": 59281193, "comment_id": 114040086, "body": "@andreheijstek I have the same issue. Did you find a solution?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "edited": false, "score": 0, "creation_date": 1576056268, "post_id": 59281498, "comment_id": 104771014, "body": "The commands are outside my container. The problem is in building the container, where the wrong version is used.     MBP-Andre:biblestudy_platform andreheijstek$ docker-compose up rails     biblestudy_platform_postgres_1 is up-to-date     biblestudy_platform_redis_1 is up-to-date.        Starting biblestudy_platform_rails_1 ... done Attaching to biblestudy_platform_rails_1 rails_1      | Your Ruby version is 2.6.3, but your Gemfile specified 2.6.2 biblestudy_platform_rails_1 exited with code 18"}, {"owner": {"reputation": 381, "user_id": 11658553, "user_type": "registered", "profile_image": "https://graph.facebook.com/2454813811242759/picture?type=large", "display_name": "H&#249;ng Nguy\u1ec5n", "link": "https://stackoverflow.com/users/11658553/h%c3%b9ng-nguy%e1%bb%85n"}, "reply_to_user": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "edited": false, "score": 0, "creation_date": 1576056497, "post_id": 59281498, "comment_id": 104771139, "body": "Have you tried my solution? as I said as well as Mark&#39;s comment, a docker container should not use anything outside of it @andreheijstek"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "edited": false, "score": 0, "creation_date": 1576059434, "post_id": 59281498, "comment_id": 104772761, "body": "The FROM ruby:2.6.2 is already in my Dockerfile. It is there as FROM ruby:$RUBY_VERSION (and I just tried to explicitly state 2.6.2 as well), But that doesn&#39;t make any difference"}], "tags": [], "owner": {"reputation": 381, "user_id": 11658553, "user_type": "registered", "profile_image": "https://graph.facebook.com/2454813811242759/picture?type=large", "display_name": "H&#249;ng Nguy\u1ec5n", "link": "https://stackoverflow.com/users/11658553/h%c3%b9ng-nguy%e1%bb%85n"}, "is_accepted": false, "score": 1, "last_activity_date": 1576056789, "last_edit_date": 1576056789, "creation_date": 1576052651, "answer_id": 59281498, "question_id": 59281193, "link": "https://stackoverflow.com/questions/59281193/docker-compose-picks-the-wrong-ruby-version/59281498#59281498", "title": "docker-compose picks the wrong ruby version", "body": "<p>You seems to misunderstood the concept of docker container. It should be standalone and use it's own environment, not anything outside of it or \n from your rbenv.\nI would suggest to build your app with <a href=\"https://github.com/docker-library/official-images/pull/5542\" rel=\"nofollow noreferrer\">ruby docker image</a>. Start with Dockerfile:</p>\n\n<pre><code>FROM ruby:2.6.2\n...\n</code></pre>\n\n<p>Depend on what you want, if you want light weight, use slim or alpine,... You don't need rbenv for this.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "edited": false, "score": 0, "creation_date": 1576056666, "post_id": 59282488, "comment_id": 104771243, "body": "Unfortunately it doesn&#39;t.   <code>$ rbenv rehash $ which ruby &#47;Users&#47;andreheijstek&#47;.rbenv&#47;shims&#47;ruby $ whereis ruby &#47;usr&#47;bin&#47;ruby $ docker-compose up rails biblestudy_platform_postgres_1 is up-to-date biblestudy_platform_redis_1 is up-to-date Starting biblestudy_platform_rails_1 ... done Attaching to biblestudy_platform_rails_1 rails_1      | Your Ruby version is 2.6.3, but your Gemfile specified 2.6.2 biblestudy_platform_rails_1 exited with code 18</code>"}], "tags": [], "owner": {"reputation": 7, "user_id": 1807808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/903577e3e67730bc1b90828c302843ac?s=128&d=identicon&r=PG", "display_name": "QuangAnh", "link": "https://stackoverflow.com/users/1807808/quanganh"}, "is_accepted": false, "score": 0, "last_activity_date": 1576056385, "creation_date": 1576056385, "answer_id": 59282488, "question_id": 59281193, "link": "https://stackoverflow.com/questions/59281193/docker-compose-picks-the-wrong-ruby-version/59282488#59282488", "title": "docker-compose picks the wrong ruby version", "body": "<p><a href=\"https://github.com/bundler/bundler/issues/4260\" rel=\"nofollow noreferrer\">https://github.com/bundler/bundler/issues/4260</a>\nI thinks add that an <code>rbenv rehash</code> solved this issue</p>\n"}], "owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1576056789, "creation_date": 1576051281, "last_edit_date": 1576056502, "question_id": 59281193, "link": "https://stackoverflow.com/questions/59281193/docker-compose-picks-the-wrong-ruby-version", "title": "docker-compose picks the wrong ruby version", "body": "<p>When running docker-compose, it seems to pick the wrong ruby program.\nUsing rbenv I have installed version 2.6.2\nBut there is also a version under /usr/bin that is at 2.6.3. I can't delete that version, also not as sudo.\nI have already uninstalled rbenv and re-installed it.</p>\n\n<p>The strange thing is this:</p>\n\n<pre><code>MBP-Andre:biblestudy_platform andreheijstek$ which ruby\n/Users/andreheijstek/.rbenv/shims/ruby\nMBP-Andre:biblestudy_platform andreheijstek$ whereis ruby\n/usr/bin/ruby\n</code></pre>\n\n<p>When I run docker-compose, it seems to pick the usr/bin/ruby, which is the wrong one!</p>\n\n<p>I've tried to take all the advise under <a href=\"https://stackoverflow.com/questions/10940736/rbenv-not-changing-ruby-version?\">rbenv not changing ruby version</a> but nothing helps.\nAny ideas?</p>\n\n<p>Maybe some more background to clarify the situation.\nI have followed this advise to dockerise my existing rails app.\n<a href=\"https://evilmartians.com/chronicles/ruby-on-whales-docker-for-ruby-rails-development\" rel=\"nofollow noreferrer\">https://evilmartians.com/chronicles/ruby-on-whales-docker-for-ruby-rails-development</a></p>\n\n<p>Here, the docker-compose wil create the docker.\nMy docker-compose.yml</p>\n\n<pre><code>version: '3.4'\n\nx-app: &amp;app\n  build:\n    context: .\n    dockerfile: ./.dockerdev/Dockerfile\n    args:\n      RUBY_VERSION: '2.6.2'\n      PG_MAJOR: '11'\n      NODE_MAJOR: '11'\n      YARN_VERSION: '1.13.0'\n      BUNDLER_VERSION: '2.0.2'\n  environment: &amp;env\n    NODE_ENV: development\n    RAILS_ENV: ${RAILS_ENV:-development}\n  image: example-dev:1.0.0\n  tmpfs:\n    - /tmp\n\nx-backend: &amp;backend\n  &lt;&lt;: *app\n  stdin_open: true\n  tty: true\n  volumes:\n    - .:/app:cached\n    - rails_cache:/app/tmp/cache\n    - bundle:/bundle\n    - node_modules:/app/node_modules\n    - packs:/app/public/packs\n    - .dockerdev/.psqlrc:/root/.psqlrc:ro\n  environment:\n    &lt;&lt;: *env\n    REDIS_URL: redis://redis:6379/\n    DATABASE_URL: postgres://postgres:postgres@postgres:5432\n    BOOTSNAP_CACHE_DIR: /bundle/bootsnap\n    WEBPACKER_DEV_SERVER_HOST: webpacker\n    WEB_CONCURRENCY: 1\n    HISTFILE: /app/log/.bash_history\n    PSQL_HISTFILE: /app/log/.psql_history\n    EDITOR: vi\n  depends_on:\n    - postgres\n    - redis\n\nservices:\n  runner:\n    &lt;&lt;: *backend\n    command: /bin/bash\n    ports:\n      - '3000:3000'\n      - '3002:3002'\n\n  rails:\n    &lt;&lt;: *backend\n    command: bundle exec rails server -b 0.0.0.0\n    ports:\n      - '3000:3000'\n\n  sidekiq:\n    &lt;&lt;: *backend\n    command: bundle exec sidekiq -C config/sidekiq.yml\n\n  postgres:\n    image: postgres:11.1\n    volumes:\n      - .dockerdev/.psqlrc:/root/.psqlrc:ro\n      - postgres:/var/lib/postgresql/data\n      - ./log:/root/log:cached\n    environment:\n      PSQL_HISTFILE: /root/log/.psql_history\n    ports:\n      - 5432\n\n  redis:\n    image: redis:3.2-alpine\n    volumes:\n      - redis:/data\n    ports:\n      - 6379\n\n  webpacker:\n    &lt;&lt;: *app\n    command: ./bin/webpack-dev-server\n    ports:\n      - '3035:3035'\n    volumes:\n      - .:/app:cached\n      - bundle:/bundle\n      - node_modules:/app/node_modules\n      - packs:/app/public/packs\n    environment:\n      &lt;&lt;: *env\n      WEBPACKER_DEV_SERVER_HOST: 0.0.0.0\n\nvolumes:\n  postgres:\n  redis:\n  bundle:\n  node_modules:\n  rails_cache:\n  packs:\n</code></pre>\n\n<p>And my Dockerfile</p>\n\n<pre><code># Taken from: https://evilmartians.com/chronicles/ruby-on-whales-docker-for-ruby-rails-development\n\nARG RUBY_VERSION\nFROM ruby:$RUBY_VERSION\n\nRUN echo RUBY_VERSION\n\nARG PG_MAJOR\nARG NODE_MAJOR\nARG BUNDLER_VERSION\nARG YARN_VERSION\n\n# Add PostgreSQL to sources list\nRUN curl -sSL https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \\\n  &amp;&amp; echo 'deb http://apt.postgresql.org/pub/repos/apt/ stretch-pgdg main' $PG_MAJOR &gt; /etc/apt/sources.list.d/pgdg.list\n\n# Add NodeJS to sources list\nRUN curl -sL https://deb.nodesource.com/setup_$NODE_MAJOR.x | bash -\n\n# Add Yarn to the sources list\nRUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n  &amp;&amp; echo 'deb http://dl.yarnpkg.com/debian/ stable main' &gt; /etc/apt/sources.list.d/yarn.list\n\n# Install dependencies\nCOPY .dockerdev/Aptfile /tmp/Aptfile\nRUN apt-get update -qq &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get -yq dist-upgrade &amp;&amp; \\\n  DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends \\\n    build-essential \\\n    postgresql-client-$PG_MAJOR \\\n    nodejs \\\n    yarn=$YARN_VERSION-1 \\\n    $(cat /tmp/Aptfile | xargs) &amp;&amp; \\\n    apt-get clean &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* &amp;&amp; \\\n    truncate -s 0 /var/log/*log\n\n# Configure bundler and PATH\nENV LANG=C.UTF-8 \\\n  GEM_HOME=/bundle \\\n  BUNDLE_JOBS=4 \\\n  BUNDLE_RETRY=3\nENV BUNDLE_PATH $GEM_HOME\nENV BUNDLE_APP_CONFIG=$BUNDLE_PATH \\\n  BUNDLE_BIN=$BUNDLE_PATH/bin\nENV PATH /app/bin:$BUNDLE_BIN:$PATH\n\n# Upgrade RubyGems and install required Bundler version\nRUN gem update --system &amp;&amp; \\\n    gem install bundler:$BUNDLER_VERSION\n\n# Create a directory for the app code\nRUN mkdir -p /app\n\nWORKDIR /app\n</code></pre>\n\n<p>When I try to create everything, this happens:</p>\n\n<pre><code>MBP-Andre:biblestudy_platform andreheijstek$ docker-compose up rails\nbiblestudy_platform_postgres_1 is up-to-date\nbiblestudy_platform_redis_1 is up-to-date\nStarting biblestudy_platform_rails_1 ... done\nAttaching to biblestudy_platform_rails_1\nrails_1      | Your Ruby version is 2.6.3, but your Gemfile specified 2.6.2\nbiblestudy_platform_rails_1 exited with code 18\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 429, "user_id": 11887947, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5pQAXxfFqFI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZs4NiEK4h3cmWvHJWbXG3Y85vMw/photo.jpg?sz=128", "display_name": "CodingSomething", "link": "https://stackoverflow.com/users/11887947/codingsomething"}, "edited": false, "score": 2, "creation_date": 1576045708, "post_id": 59279739, "comment_id": 104766439, "body": "By any chance are you using a ruby version switcher such as rbenv?"}, {"owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "edited": false, "score": 0, "creation_date": 1576046964, "post_id": 59279739, "comment_id": 104766913, "body": "Trying to remove ruby and rails and install them with rvm , Check this link  <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rvm-on-ubuntu-18-04\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10093203, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hj-o_hVh-e0/AAAAAAAAAAI/AAAAAAAAEa4/X1Ie5WEf6EU/photo.jpg?sz=128", "display_name": "JAISONDRAGNEEL", "link": "https://stackoverflow.com/users/10093203/jaisondragneel"}, "edited": false, "score": 0, "creation_date": 1591858758, "post_id": 59279739, "comment_id": 110216454, "body": "I was able to fix my issue. It turned out in bash profile the path wasn&#39;t set properly. In my case issue was ordering inside the bash profile, had to add the line at the end."}], "owner": {"reputation": 1, "user_id": 10093203, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hj-o_hVh-e0/AAAAAAAAAAI/AAAAAAAAEa4/X1Ie5WEf6EU/photo.jpg?sz=128", "display_name": "JAISONDRAGNEEL", "link": "https://stackoverflow.com/users/10093203/jaisondragneel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576045427, "creation_date": 1576044316, "last_edit_date": 1576045427, "question_id": 59279739, "link": "https://stackoverflow.com/questions/59279739/rails-command-not-found-when-i-launch-it-in-new-tab-in-console-but-if-i-go-out", "title": "Rails command not found when i launch it in new tab in console, but if i go out of that directory and come back in rails command work", "body": "<p>Rails command not found when i launch it in a new tab in console, but if i go out of that directory and come back, rails command works.</p>\n\n<p><strong>Console output.</strong></p>\n\n<pre><code>Ignoring bcrypt-3.1.13 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.13\nIgnoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11\nIgnoring binding_of_caller-0.8.0 because its extensions are not built. Try: gem pristine binding_of_caller --version 0.8.0\nIgnoring binding_of_caller-0.7.2 because its extensions are not built. Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-9.0.6 because its extensions are not built. Try: gem pristine byebug --version 9.0.6\nIgnoring concurrent-ruby-ext-1.0.5 because its extensions are not built. Try: gem pristine concurrent-ruby-ext --version 1.0.5\nIgnoring debug_inspector-0.0.3 because its extensions are not built. Try: gem pristine debug_inspector --version 0.0.3\nIgnoring debug_inspector-0.0.2 because its extensions are not built. Try: gem pristine debug_inspector --version 0.0.2\nIgnoring executable-hooks-1.6.0 because its extensions are not built. Try: gem pristine executable-hooks --version 1.6.0\nIgnoring ffi-1.11.1 because its extensions are not built. Try: gem pristine ffi --version 1.11.1\nIgnoring ffi-1.9.14 because its extensions are not built. Try: gem pristine ffi --version 1.9.14 \nIgnoring gem-wrappers-1.4.0 because its extensions are not built. Try: gem pristine gem-wrappers --version 1.4.0\nIgnoring json-1.8.6 because its extensions are not built. Try: gem pristine json --version 1.8.6\nIgnoring json-1.8.3 because its extensions are not built. Try: gem pristine json --version 1.8.3\nIgnoring mysql2-0.3.11 because its extensions are not built. Try: gem pristine mysql2 --version 0.3.11\nIgnoring nokogiri-1.9.1 because its extensions are not built. Try: gem pristine nokogiri --version 1.9.1\nIgnoring nokogiri-1.6.8.1 because its extensions are not built. Try: gem pristine nokogiri --version 1.6.8.1\nIgnoring rmagick-2.13.2 because its extensions are not built. Try: gem pristine rmagick --version 2.13.2\nIgnoring unf_ext-0.0.7.6 because its extensions are not built. Try: gem pristine unf_ext --version 0.0.7.6\nIgnoring unf_ext-0.0.7.4 because its extensions are not built. Try: gem pristine unf_ext --version 0.0.7.4\nRails is not currently installed on this system. To get the latest version, simply type:\n\n$ sudo gem install rails\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "edited": false, "score": 0, "creation_date": 1576059650, "post_id": 59278369, "comment_id": 104772892, "body": "Why the downvote?"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1576062444, "post_id": 59278369, "comment_id": 104774464, "body": "Why would you want your fist spec to pass? The e-mails is changing, so the verified flag should be false. The logic of what you&#39;re trying to do is not clear. (FYI I didn&#39;t downvote it)"}, {"owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1576096078, "post_id": 59278369, "comment_id": 104791821, "body": "We had a bug where someone wrote <code>user.update!(email: &#39;other@example.com&#39;, email_verified: true)</code> and people couldn&#39;t update their emails. I think it&#39;s reasonable to assume that <code>email_verified = true</code> after running that update statement, especially if you&#39;re not familiar with Rails"}], "answers": [{"comments": [{"owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "edited": false, "score": 0, "creation_date": 1576038556, "post_id": 59278619, "comment_id": 104764475, "body": "That looks very promising! I can&#39;t find any docs on it though, looks like it&#39;s intended to be an internal method? So it&#39;s kind of like <code>changed?</code>, except it&#39;s <code>true</code> as long as a change was attempted, even if nothing was changed?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "edited": false, "score": 0, "creation_date": 1576069285, "post_id": 59278619, "comment_id": 104777977, "body": "@LeoJiang I can&#39;t find docs on this (only the source code), it&#39;s a public method so I don&#39;t think it&#39;s intended to be only used internally, but I&#39;m not sure though."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1576102405, "post_id": 59278619, "comment_id": 104794249, "body": "I think it&#39;s here <a href=\"https://github.com/rails/rails/blob/477ec2675d2321eeaa0f5330ab5f3e12b09cb361/activemodel/lib/active_model/attribute_methods.rb#L294\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a> where it&#39;s being forwarded to (probably) <a href=\"https://apidock.com/rails/ActiveRecord/AttributeMethods/BeforeTypeCast/attribute_came_from_user%3F\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/AttributeMethods/BeforeTypeCa&zwnj;&#8203;st/&hellip;</a>"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 1, "last_activity_date": 1576035834, "creation_date": 1576035834, "answer_id": 59278619, "question_id": 59278369, "link": "https://stackoverflow.com/questions/59278369/rails-how-to-tell-the-difference-between-leaving-an-attribute-unchanged-vs-expl/59278619#59278619", "title": "Rails: how to tell the difference between leaving an attribute unchanged vs explicitly setting the new value to be the same as the old value?", "body": "<p>I think you can use the <code>email_verified_came_from_user?</code> method that ActiveRecord creates for you (it creates that method for each attribute).</p>\n\n<p>Check this for example:</p>\n\n<pre><code>user = User.find_by(email: 'test@example.com')\nuser.email_came_from_user? # =&gt; false\nuser.email = 'test@example.com' # setting the same so no change\nuser.email_came_from_user? # =&gt; true\n</code></pre>\n\n<p>So, I would do something like:</p>\n\n<pre><code>def process_new_email\n  self.email_verified = false unless email_verified_came_from_user?\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 940, "user_id": 573719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0fd8ec69a77e30cfa30a66ad8d1762fb?s=128&d=identicon&r=PG", "display_name": "dezull", "link": "https://stackoverflow.com/users/573719/dezull"}, "is_accepted": false, "score": 0, "last_activity_date": 1576041674, "creation_date": 1576041674, "answer_id": 59279317, "question_id": 59278369, "link": "https://stackoverflow.com/questions/59278369/rails-how-to-tell-the-difference-between-leaving-an-attribute-unchanged-vs-expl/59279317#59279317", "title": "Rails: how to tell the difference between leaving an attribute unchanged vs explicitly setting the new value to be the same as the old value?", "body": "<p>Try revert email_verified if it was changed.</p>\n\n<pre><code>before_save :revert_email_verified, if: :email_verified_changed?\nbefore_save :process_new_email, if: :email_changed?\n\ndef revert_email_verified\n  self.email_verified = email_verified_was\nend\n</code></pre>\n"}], "owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59278619, "answer_count": 2, "score": -1, "last_activity_date": 1576041674, "creation_date": 1576033819, "question_id": 59278369, "link": "https://stackoverflow.com/questions/59278369/rails-how-to-tell-the-difference-between-leaving-an-attribute-unchanged-vs-expl", "title": "Rails: how to tell the difference between leaving an attribute unchanged vs explicitly setting the new value to be the same as the old value?", "body": "<p>ActiveRecord <code>User</code> has <code>email</code> and <code>email_verified</code>. If an email changes, it sets <code>email_verified</code> to false using:</p>\n\n<p><code>before_save :process_new_email, if: :email_changed?</code></p>\n\n<p><code>process_new_email</code> is basically just:</p>\n\n<pre><code>def process_new_email\n   self.email_verified = false\nend\n</code></pre>\n\n<p>However, for <code>user.update(email: email, email_verified: true)</code>, this also sets <code>email_verified</code> to false if <code>email_verified</code> was previously <code>true</code>.</p>\n\n<p>I.e. this fails:</p>\n\n<pre><code>      user = create(:user, email: 'test@example.com', email_verified: true)\n      user.update!(email: 'other@example.com', email_verified: true)\n      expect(user.email_verified).to eq(true)\n</code></pre>\n\n<p>And this passes:</p>\n\n<pre><code>      user = create(:user, email: 'test@example.com', email_verified: true)\n      user.update!(email: 'other@example.com')\n      expect(user.email_verified).to eq(false)\n</code></pre>\n\n<p>How can I make both test cases pass?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mecab"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576034581, "post_id": 59278226, "comment_id": 104763580, "body": "Where is the library? On Ubuntu it&#39;s installed into <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libmecab.so</code>. What does <code>mecab-config --libs</code> return?"}, {"owner": {"reputation": 186, "user_id": 5135249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzecq.jpg?s=128&g=1", "display_name": "Savan", "link": "https://stackoverflow.com/users/5135249/savan"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576037445, "post_id": 59278226, "comment_id": 104764243, "body": "@Casper it returns <code>-L&#47;usr&#47;lib&#47;x86_64-linux-gnu -lmecab -lstdc++</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576037544, "post_id": 59278226, "comment_id": 104764260, "body": "Ok, so I don&#39;t think you need to export MECAB_PATH at all. It should work without it. But if you do, it should point to <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libmecab.so</code> instead."}, {"owner": {"reputation": 186, "user_id": 5135249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzecq.jpg?s=128&g=1", "display_name": "Savan", "link": "https://stackoverflow.com/users/5135249/savan"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576037584, "post_id": 59278226, "comment_id": 104764270, "body": "but i am not able to start rails server"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576037719, "post_id": 59278226, "comment_id": 104764298, "body": "Try <code>export MECAB_PATH=&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libmecab.so</code> and then <code>rails server</code>. Still same problem?"}], "answers": [{"comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 186, "user_id": 5135249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzecq.jpg?s=128&g=1", "display_name": "Savan", "link": "https://stackoverflow.com/users/5135249/savan"}, "edited": false, "score": 0, "creation_date": 1576111102, "post_id": 59278857, "comment_id": 104796559, "body": "@Savan Edit your <code>.bash_profile</code> and add it on the last line. That will run it for you every time you log in."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 186, "user_id": 5135249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzecq.jpg?s=128&g=1", "display_name": "Savan", "link": "https://stackoverflow.com/users/5135249/savan"}, "edited": false, "score": 0, "creation_date": 1576111605, "post_id": 59278857, "comment_id": 104796651, "body": "Actually I think you have your old <code>MECAB_PATH</code> in your <code>.bash_profile</code> already. You set it as you describe it in your question. It may be enough to delete that line from your profile file. Then log out and back in, and see if it works. If not, then add the line from my answer, which will make it permanent."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1576038040, "creation_date": 1576038040, "answer_id": 59278857, "question_id": 59278226, "link": "https://stackoverflow.com/questions/59278226/could-not-open-library-usr-lib-libmecab-so-2-usr-lib-libmecab-so-2-cannot/59278857#59278857", "title": "Could not open library &#39;/usr/lib/libmecab.so.2&#39;: /usr/lib/libmecab.so.2: cannot open shared object file: No such file or directory (LoadError)", "body": "<p>On Ununtu the mecab lib is in <code>/usr/lib/x86_64-linux-gnu/libmecab.so</code>. So this should work:</p>\n\n<pre><code>export MECAB_PATH=/usr/lib/x86_64-linux-gnu/libmecab.so\nrails server\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 5135249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzecq.jpg?s=128&g=1", "display_name": "Savan", "link": "https://stackoverflow.com/users/5135249/savan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 59278857, "answer_count": 1, "score": 1, "last_activity_date": 1576038040, "creation_date": 1576032608, "question_id": 59278226, "link": "https://stackoverflow.com/questions/59278226/could-not-open-library-usr-lib-libmecab-so-2-usr-lib-libmecab-so-2-cannot", "title": "Could not open library &#39;/usr/lib/libmecab.so.2&#39;: /usr/lib/libmecab.so.2: cannot open shared object file: No such file or directory (LoadError)", "body": "<p>when i tried to start my rails server i got an error related to mecab\nSo i followed below given instruction to install mecab and it was installed successfully\ni checked the version of mecab</p>\n\n<p>while installing mecab followed steps are </p>\n\n<pre><code>1. gem install natto\n2. sudo apt-get install mecab libmecab-dev\n3. sudo apt-get install mecab-ipadic-utf8\n4. mecab --version\n5. sudo find / -name libmecab.so*\n\n    this gives an error of permission denied\n\n6. echo 'export MECAB_PATH=/usr/lib/libmecab.so.2' &gt;&gt; ~/.bash_profile\n7. source ~/.bash_profile\n</code></pre>\n\n<p>After all, this when I tried to start rails server I got below given error</p>\n\n<pre><code>/home/admin123/.rvm/gems/ruby-2.3.1/gems/ffi-1.9.14/lib/ffi/library.rb:147:in `block in ffi_lib': Could not open library '/usr/lib/libmecab.so.2': /usr/lib/libmecab.so.2: cannot open shared object file: No such file or directory (LoadError)\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/ffi-1.9.14/lib/ffi/library.rb:100:in `map'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/ffi-1.9.14/lib/ffi/library.rb:100:in `ffi_lib'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/natto-1.1.1/lib/natto/binding.rb:64:in `&lt;module:Binding&gt;'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/natto-1.1.1/lib/natto/binding.rb:6:in `&lt;module:Natto&gt;'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/natto-1.1.1/lib/natto/binding.rb:2:in `&lt;top (required)&gt;'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/natto-1.1.1/lib/natto/natto.rb:2:in `&lt;top (required)&gt;'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/natto-1.1.1/lib/natto.rb:2:in `&lt;top (required)&gt;'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:81:in `require'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:81:in `block (2 levels) in require'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:76:in `each'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:76:in `block in require'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:65:in `each'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:65:in `require'\n    from /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/bundler.rb:114:in `require'\n    from /home/admin123/WFSGo/myproject/config/application.rb:16:in `&lt;top (required)&gt;'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:78:in `require'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:78:in `block in server'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/admin123/.rvm/gems/ruby-2.3.1/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1576024803, "post_id": 59277308, "comment_id": 104761587, "body": "Remove <code>attr_accessor :bank_name, :reason</code> from the model."}, {"owner": {"reputation": 373, "user_id": 3995544, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d35faf71dd9f28f9d98fb18df1b673fa?s=128&d=identicon&r=PG&f=1", "display_name": "wheresmyspaceship", "link": "https://stackoverflow.com/users/3995544/wheresmyspaceship"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1576026302, "post_id": 59277308, "comment_id": 104761939, "body": "@Gerry That worked. Can you shed any light on why the <code>attr_accessor</code> method blocked the attributes from being saved? Maybe in a response below so I can accept it as the answer too. I read the docs on <code>attr_accessor</code> and I can&#39;t find anything that saves it would conflict with the database columns"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1576027373, "post_id": 59277308, "comment_id": 104762184, "body": "Rails 4.x is no longer supported and may expose you to severe security risks. If this is a new project, or if this has <i>anything to do with actual money whatsoever</i> you should not use that. Likewise Ruby 2.4 is end-of-life <a href=\"https://www.ruby-lang.org/en/news/2019/03/31/support-of-ruby-2-3-has-ended/\" rel=\"nofollow noreferrer\">effective March 31, 2020</a> which is coming up fast. Switch to 2.6 if you can. It should be an easy upgrade path."}, {"owner": {"reputation": 373, "user_id": 3995544, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d35faf71dd9f28f9d98fb18df1b673fa?s=128&d=identicon&r=PG&f=1", "display_name": "wheresmyspaceship", "link": "https://stackoverflow.com/users/3995544/wheresmyspaceship"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1576029392, "post_id": 59277308, "comment_id": 104762555, "body": "Thanks @tadman. I&#39;ll def share this information with my team and make plans to upgrade"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1576027334, "creation_date": 1576027334, "answer_id": 59277641, "question_id": 59277308, "link": "https://stackoverflow.com/questions/59277308/rails-models-not-being-set-on-create-or-update/59277641#59277641", "title": "Rails models not being set on create or update", "body": "<p>You're creating accessor methods which impede access to the methods ActiveRecord already generates for you.</p>\n\n<p>Your definition should be:</p>\n\n<pre><code>class UnsupportedInstitution &lt; ActiveRecord::Base\n  validates :bank_name, presence: true\n  validates :reason, presence: true\n\n  has_many :unsupported_institution_routing_numbers\nend\n</code></pre>\n\n<p>Where <code>bank_name</code> will be auto-generated as a method <em>if</em> there is a corresponding field in the database, which there is if your migration ran successfully.</p>\n"}], "owner": {"reputation": 373, "user_id": 3995544, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d35faf71dd9f28f9d98fb18df1b673fa?s=128&d=identicon&r=PG&f=1", "display_name": "wheresmyspaceship", "link": "https://stackoverflow.com/users/3995544/wheresmyspaceship"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59277641, "answer_count": 1, "score": 0, "last_activity_date": 1576027334, "creation_date": 1576024335, "question_id": 59277308, "link": "https://stackoverflow.com/questions/59277308/rails-models-not-being-set-on-create-or-update", "title": "Rails models not being set on create or update", "body": "<p>I'm on:</p>\n\n<p>Rails v4.2.11</p>\n\n<p>Ruby v2.4.4</p>\n\n<p>MySQL 5.7</p>\n\n<p>I have the following rails model</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/models/UnsupportedInstitution.rb\n\nclass UnsupportedInstitution &lt; ActiveRecord::Base\n  attr_accessor :bank_name, :reason\n\n  validates :bank_name, presence: true\n  validates :reason, presence: true\n\n  has_many :unsupported_institution_routing_numbers\nend\n\n</code></pre>\n\n<p>Here is the migration for the model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CreateUnsupportedInstitutions &lt; ActiveRecord::Migration\n  def change\n    create_table :unsupported_institutions do |t|\n      t.string :bank_name, null: false\n      t.string :reason, null: false\n\n      t.timestamps null: false\n    end\n  end\nend\n\n</code></pre>\n\n<p>which creates the following schema</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>create_table \"unsupported_institutions\", force: :cascade do |t|\n    t.string   \"bank_name\",  limit: 255, null: false\n    t.string   \"reason\",     limit: 255, null: false\n    t.datetime \"created_at\",             null: false\n    t.datetime \"updated_at\",             null: false\n  end\n</code></pre>\n\n<p>This seems all pretty basic. However, when I enter the rails console and try to do:</p>\n\n<pre><code>UnsupportedInstitution.create!(bank_name: 'Hello', reason: 'World'})\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>INSERT INTO `unsupported_institutions` (`created_at`, `updated_at`) VALUES ('2019-12-11 00:24:22', '2019-12-11 00:24:22')\n\nActiveRecord::StatementInvalid: Mysql2::Error: Field 'bank_name' doesn't have a default value: INSERT INTO `unsupported_institutions` (`created_at`, `updated_at`) VALUES ('2019-12-11 00:24:22', '2019-12-11 00:24:22')\nfrom /usr/local/bundle/gems/mysql2-0.5.3/lib/mysql2/client.rb:131:in `_query'\n</code></pre>\n\n<p>This also happens when I try to use the update method and when I try to create a new instance, set the values, and then save the model.</p>\n\n<p>It's obvious the <code>bank_name</code> and <code>reason</code> attributes are not being set but I can't understand why. I suspect it has something to do with the \"null: false\" in the migration but I can't remove that since there may be sources other than my api accessing this particular endpoint.</p>\n\n<p>Can anyone shed light on why this may be happening and/or what I can do to fix this?</p>\n"}, {"tags": ["arrays", "ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 2458, "user_id": 1348592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f388cdc864045a88ce41e038e42fa4b?s=128&d=identicon&r=PG", "display_name": "robbpriestley", "link": "https://stackoverflow.com/users/1348592/robbpriestley"}, "edited": false, "score": 0, "creation_date": 1576029758, "post_id": 59277123, "comment_id": 104762607, "body": "You&#39;ll need to fix the formatting of your code block."}, {"owner": {"reputation": 45, "user_id": 5661085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417ffe8bfe0a8022b77f4b285fffe1e5?s=128&d=identicon&r=PG&f=1", "display_name": "Bamba", "link": "https://stackoverflow.com/users/5661085/bamba"}, "reply_to_user": {"reputation": 2458, "user_id": 1348592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f388cdc864045a88ce41e038e42fa4b?s=128&d=identicon&r=PG", "display_name": "robbpriestley", "link": "https://stackoverflow.com/users/1348592/robbpriestley"}, "edited": false, "score": 0, "creation_date": 1576031948, "post_id": 59277123, "comment_id": 104763042, "body": "@robbpriestley I just did, let me know please"}, {"owner": {"reputation": 2458, "user_id": 1348592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f388cdc864045a88ce41e038e42fa4b?s=128&d=identicon&r=PG", "display_name": "robbpriestley", "link": "https://stackoverflow.com/users/1348592/robbpriestley"}, "edited": false, "score": 0, "creation_date": 1576034865, "post_id": 59277123, "comment_id": 104763650, "body": "ok, that looks better, thanks"}, {"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 1, "creation_date": 1576041846, "post_id": 59277123, "comment_id": 104765260, "body": "why are you 1. using array for firstname, lastname, firsstchar, lastchar, username.  2. (optional) you could read employeedata.csv outside of userdata.csv block 3. use hash to hold the count of username"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 1, "creation_date": 1576049000, "post_id": 59277123, "comment_id": 104767605, "body": "@twnaing : It is not correct that the OP uses arrays for <code>firstname</code> etc. While it is correct, that he unnecessarily initializes <code>firstname</code> with an empty array, this value is thrown away immediately inside the loop and replaced by a <code>String</code>. Actually, the first 6 lines of the program should be removed completely."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5661085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417ffe8bfe0a8022b77f4b285fffe1e5?s=128&d=identicon&r=PG&f=1", "display_name": "Bamba", "link": "https://stackoverflow.com/users/5661085/bamba"}, "edited": false, "score": 0, "creation_date": 1576081349, "post_id": 59279402, "comment_id": 104785030, "body": "Perfectly done @twnaing! Just had to add .to_s after user_count[username] to get out of the error &quot;`+&#39;: no implicit conversion of Integer into String&quot;. Thanks"}], "tags": [], "owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "is_accepted": true, "score": 3, "last_activity_date": 1576118917, "last_edit_date": 1576118917, "creation_date": 1576042349, "answer_id": 59279402, "question_id": 59277123, "link": "https://stackoverflow.com/questions/59277123/add-suffix-number-to-a-username-avoid-duplicate/59279402#59279402", "title": "add suffix number to a username avoid duplicate?", "body": "<p>I would do something like this.</p>\n\n<pre><code>rows      = []\n\nCSV.foreach(\"employeedata.csv\", headers: true) do |row|  \n    rows &lt;&lt; row\nend\n\nuser_count = {}\n\nCSV.open(\"userdata.csv\", \"wb\") do |csv|  \n    rows.each do |line|\n        firstname = line[0]\n        lastname = line[1]\n        firstchar = line[0][0].downcase\n        lastchar = line[0][-1]\n\n        username = lastname + firstchar + lastchar\n        user_count[username] = user_count.fetch(username){ 0 } + 1\n        username = username + user_count[username].to_s\n\n        name = firstname + lastname\n        password = SecureRandom.hex(5)\n\n        csv &lt;&lt; [firstname] +  [lastname]  + [username] + [password]        \n    end\nend\n</code></pre>\n\n<ol>\n<li>read <em>employeedata.csv</em> outside <em>userdat.csv</em> file block</li>\n<li>use <code>user_count</code> hash to hold the number of occurrence of username (lastname + firstchar + lastchar)</li>\n<li>use <a href=\"https://apidock.com/ruby/Hash/fetch\" rel=\"nofollow noreferrer\">Hash fetch method</a> to set the number of occurrence </li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 5661085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417ffe8bfe0a8022b77f4b285fffe1e5?s=128&d=identicon&r=PG&f=1", "display_name": "Bamba", "link": "https://stackoverflow.com/users/5661085/bamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59279402, "answer_count": 1, "score": 1, "last_activity_date": 1576118917, "creation_date": 1576022771, "last_edit_date": 1576100067, "question_id": 59277123, "link": "https://stackoverflow.com/questions/59277123/add-suffix-number-to-a-username-avoid-duplicate", "title": "add suffix number to a username avoid duplicate?", "body": "<p>Add the suffix(number) to username, but if username already in the array or file increment the suffix by 1 then 2 if duplicate again so on...\nI've already added the suffix using count. But I need to increment if already exist.</p>\n\n<pre><code>firstname = []\nlastname  = []\nfirstchar = []\nlastchar  = []\nusername  = []\nrows      = []\n\nCSV.open(\"userdata.csv\", \"wb\") do |csv|  \n    CSV.foreach(\"employeedata.csv\", headers: true) do |row|  \n        rows &lt;&lt; row\n    end\n\n    count = 1\n\n    rows.each do |line|\n        firstname = line[0]\n        lastname = line[1]\n        firstchar = line[0][0].downcase\n        lastchar = line[0][-1]\n        username = lastname + firstchar + lastchar + \"#{count}\"\n        name = firstname + lastname\n        password = SecureRandom.hex(5)\n        csv &lt;&lt; [firstname] +  [lastname]  + [username] + [password]        \n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "datatables", "slim"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1576019751, "post_id": 59276669, "comment_id": 104760329, "body": "Your two screenshots are perfectly identical. Furthermore, <a href=\"https://meta.stackoverflow.com/a/285557/3784008\">images of plaintext are not appropriate on StackOverflow</a>. Please copy and paste the data into the question. You have many <a href=\"https://stackoverflow.com/help/formatting\">markdown options</a> to make it look like a table."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9179441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10105819124484977/picture?type=large", "display_name": "Brad Said", "link": "https://stackoverflow.com/users/9179441/brad-said"}, "edited": false, "score": 0, "creation_date": 1576090168, "post_id": 59280456, "comment_id": 104789205, "body": "What if the index variable?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 21, "user_id": 9179441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10105819124484977/picture?type=large", "display_name": "Brad Said", "link": "https://stackoverflow.com/users/9179441/brad-said"}, "edited": false, "score": 0, "creation_date": 1576091105, "post_id": 59280456, "comment_id": 104789596, "body": "@BradSaid then you pass the variable to slim the same way that are you doing with the other variables you use (such as <code>decorated_report</code>)"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1576048100, "creation_date": 1576048100, "answer_id": 59280456, "question_id": 59276669, "link": "https://stackoverflow.com/questions/59276669/datatables-ruby-limit-one-statement-within-an-each-block/59280456#59280456", "title": "DataTables &amp; Ruby - limit one statement within an each block?", "body": "<p>If you use <code>each_with_index</code>, then you can keep track of the index and only <em>conditionally</em> show the notes (if the index is zero):</p>\n\n<pre><code>- decorated_report.ticket_orders.each_with_index do |ticket_order, idx|\n  tr\n    / ... other stuff\n    - if idx == 0\n      td= ticket_order.notes \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9179441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10105819124484977/picture?type=large", "display_name": "Brad Said", "link": "https://stackoverflow.com/users/9179441/brad-said"}, "is_accepted": false, "score": 0, "last_activity_date": 1576092849, "creation_date": 1576092849, "answer_id": 59292829, "question_id": 59276669, "link": "https://stackoverflow.com/questions/59276669/datatables-ruby-limit-one-statement-within-an-each-block/59292829#59292829", "title": "DataTables &amp; Ruby - limit one statement within an each block?", "body": "<p>I ended up creating an array, pushing the purchaser IDs into it, and then checking to see if the ID was present more than once in the array.  If so, do nothing, if not, add the notes</p>\n\n<pre><code>    - decorated_report.ticket_orders.each do |ticket_order|\n    - ids.push(ticket_order.purchaser_id)\n    tr\n      - if decorated_report.reserved_seating?\n        td= ticket_order.table_and_seat\n      td= ticket_order.section_name\n      td data-sort=\"#{ticket_order.purchaser_last_name}, #{ticket_order.purchaser_first_name}\" #{ticket_order.purchaser_name}\n      td= ticket_order.purchaser_telephone_number\n      td= ticket_order.date_purchased\n      td= number_to_currency(ticket_order.amount_paid)\n      td= ticket_order.purchase_method\n      - if ids.count(ticket_order.purchaser_id) &gt; 1\n        td=\n      - else\n        td= ticket_order.notes\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9179441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10105819124484977/picture?type=large", "display_name": "Brad Said", "link": "https://stackoverflow.com/users/9179441/brad-said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576092849, "creation_date": 1576019431, "last_edit_date": 1576073987, "question_id": 59276669, "link": "https://stackoverflow.com/questions/59276669/datatables-ruby-limit-one-statement-within-an-each-block", "title": "DataTables &amp; Ruby - limit one statement within an each block?", "body": "<p>I want to prevent \"td= ticket_order.notes\" from listing the notes on each row, and limit the notes to the first row of that order. Currently, when a purchaser has multiple tickets (each ticket is a row), the notes are listed on each ticket.  I need the notes listed only once on the first row and I'm not sure how to go about it. Is this something I can do with DataTables?</p>\n\n<pre><code>   tbody\n  - decorated_report.ticket_orders.each do |ticket_order|\n    tr\n      - if decorated_report.reserved_seating?\n        td= ticket_order.table_and_seat\n      td= ticket_order.section_name\n      td data-sort=\"#{ticket_order.purchaser_last_name}, #{ticket_order.purchaser_first_name}\" #{ticket_order.purchaser_name}\n      td= ticket_order.purchaser_telephone_number\n      td= ticket_order.date_purchased\n      td= number_to_currency(ticket_order.amount_paid)\n      td= ticket_order.purchase_method\n      td= ticket_order.notes \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "puma"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1576017892, "post_id": 59276001, "comment_id": 104759824, "body": "<i>&quot;I would like to make sure that this is true&quot;</i> \u2013 use a mutex to limit access to one thread."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576018232, "post_id": 59276001, "comment_id": 104759930, "body": "If you want thread safety and atomicity, what exactly is wrong with Redis and INCR? I would think 130k requests/sec from Redis should be high enough performance, right?"}, {"owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576018977, "post_id": 59276001, "comment_id": 104760120, "body": "@anothermh - Redis is taking 30% of the average request time. It is fast but it could be faster if I would use internal data structure (internal vs external memory).  I am considering option to increase conter in Redis every second request (or e.g. every 1000th request)"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576019577, "post_id": 59276001, "comment_id": 104760271, "body": "Is your Redis instance not running on the same server as Rails? I can only imagine Redis taking that long for a network request."}, {"owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576072374, "post_id": 59276001, "comment_id": 104779839, "body": "@Stefan do you know .. Should something as simple as <code>@counter+=1</code> wrapped inside a semaphore?"}, {"owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1576072440, "post_id": 59276001, "comment_id": 104779872, "body": "@anothermh yes - Redis is shared. Each request is taking only few ms but time is being compounded .. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1576074180, "post_id": 59276001, "comment_id": 104780827, "body": "@knagode you probably want to wrap the entire method body in a semaphore, not just the first line."}], "owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576029055, "creation_date": 1576015209, "question_id": 59276001, "link": "https://stackoverflow.com/questions/59276001/static-counter-in-ruby-inside-multithreaded-environments", "title": "Static counter in Ruby inside multithreaded environments", "body": "<pre><code>class MyCounter\n  @counter = 0\n\n  def self.get_count\n    @counter\n  end\n\n  def self.track!\n    @counter+=1\n\n    store_to_database_and_restart_counter! if @counter == 1000\n  end\n\n  def self.store_to_database_and_restart_counter!\n    # store to database ... \n    @counter = 0\n  end\nend\n</code></pre>\n\n<p>I want to use counter like above in Rails app which runs via Puma with multiple workers &amp; threads. Because RPS will be super high I don't want to use Redis. </p>\n\n<p>I am wondering about thread safety. What should I be careful about? </p>\n\n<p>Each worker will have it's own copy of <code>@counter</code> right?\nHwever for threads, they will share same <code>@counter</code>? I wonder whether it is possible that 2 threads would call <code>store_to_database_and_restart_counter!</code> simulateneously? I think it is not possible but I would like to make sure that this is true :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576017122, "post_id": 59275615, "comment_id": 104759580, "body": "show the part of your test that creates those users"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576017231, "post_id": 59275615, "comment_id": 104759631, "body": "It looks like you are not setting an email and you don&#39;t have a validation for email presence so all users are valid, activerecord tries to save them with empty email and the database raises the uniqueness error."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576020422, "post_id": 59275615, "comment_id": 104760507, "body": "Could the error be caused by bad fixtures?"}], "owner": {"reputation": 1, "user_id": 12445889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7306608bf70beccf45b6ee224723575a?s=128&d=identicon&r=PG&f=1", "display_name": "AkselTahir", "link": "https://stackoverflow.com/users/12445889/akseltahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576013295, "creation_date": 1576013295, "question_id": 59275615, "link": "https://stackoverflow.com/questions/59275615/rails-testing-duplicates-error-message-for-all-failed-tests", "title": "Rails testing duplicates error message for all failed tests", "body": "<p>Whenever I run <code>rails test</code> it's duplicating the error messages for every single different failed test.</p>\n\n<pre><code>2019-12-10 21:22:28 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path= is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path= instead.\nRun options: --seed 19059\n\n# Running:\n\nE\n\nError:\nCommentsControllerTest#test_should_destroy_comment:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:28.988662', '2019-12-10 21:22:28.988662', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:41\n\nE\n\nError:\nCommentsControllerTest#test_should_get_edit:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.368082', '2019-12-10 21:22:29.368082', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:31\n\nE\n\nError:\nCommentsControllerTest#test_should_show_comment:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.438270', '2019-12-10 21:22:29.438270', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:26\n\nE\n\nError:\nCommentsControllerTest#test_should_create_comment:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.537555', '2019-12-10 21:22:29.537555', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:18\n\nE\n\nError:\nCommentsControllerTest#test_should_get_new:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.590334', '2019-12-10 21:22:29.590334', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:13\n\nE\n\nError:\nCommentsControllerTest#test_should_get_index:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.641851', '2019-12-10 21:22:29.641851', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:8\n\nE\n\nError:\nCommentsControllerTest#test_should_update_comment:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.694643', '2019-12-10 21:22:29.694643', 298486374)\n\n\n\nbin/rails test test/controllers/comments_controller_test.rb:36\n\nE\n\nError:\nEchosControllerTest#test_should_create_echo:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.746984', '2019-12-10 21:22:29.746984', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:18\n\nE\n\nError:\nEchosControllerTest#test_should_destroy_echo:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.809118', '2019-12-10 21:22:29.809118', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:41\n\nE\n\nError:\nEchosControllerTest#test_should_get_edit:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.877797', '2019-12-10 21:22:29.877797', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:31\n\nE\n\nError:\nEchosControllerTest#test_should_get_new:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.939092', '2019-12-10 21:22:29.939092', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:13\n\nE\n\nError:\nEchosControllerTest#test_should_get_index:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:29.995686', '2019-12-10 21:22:29.995686', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:8\n\nE\n\nError:\nEchosControllerTest#test_should_show_echo:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:30.050512', '2019-12-10 21:22:30.050512', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:26\n\nE\n\nError:\nEchosControllerTest#test_should_update_echo:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO \"users\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2019-12-10 21:22:30.103160', '2019-12-10 21:22:30.103160', 298486374)\n\n\n\nbin/rails test test/controllers/echos_controller_test.rb:36\n</code></pre>\n\n<p>The same  <code>UNIQUE constraint failed</code> message appears for all 14 errors in my tests. I thought fixing the Unique constraint failure might change the error messages to some other type, but I tried <code>rails db:reset</code> and the duplicated messages persist. </p>\n\n<p>Here are my echos_controller and comments_controller classes:</p>\n\n<pre><code>class EchosController &lt; ApplicationController\n  before_action :set_echo, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  # GET /echos\n  # GET /echos.json\n  def index\n    @echos = Echo.all\n  end\n\n  # GET /echos/1\n  # GET /echos/1.json\n  def show\n  end\n\n  # GET /echos/new\n  def new\n    @echo = current_user.echos.build\n  end\n\n  # GET /echos/1/edit\n  def edit\n  end\n\n  # POST /echos\n  # POST /echos.json\n  def create\n    @echo = current_user.echos.build(echo_params) \n\n    respond_to do |format|\n      if @echo.save\n        format.html { redirect_to @echo, notice: 'Echoed succesfully' }\n        format.json { render :show, status: :created, location: @echo }\n      else\n        format.html { render :new }\n        format.json { render json: @echo.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /echos/1\n  # PATCH/PUT /echos/1.json\n  def update\n    respond_to do |format|\n      if @echo.update(echo_params)\n        format.html { redirect_to @echo, notice: 'Echo was successfully updated.' }\n        format.json { render :show, status: :ok, location: @echo }\n      else\n        format.html { render :edit }\n        format.json { render json: @echo.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /echos/1\n  # DELETE /echos/1.json\n  def destroy\n    @echo.destroy\n    respond_to do |format|\n      format.html { redirect_to echos_url, notice: 'Echo was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  def upvote\n    @echo = Echo.find(params[:id])\n    @echo.upvote_by current_user\n    redirect_back fallback_location: root_path\n  end\n\n  def downvote\n    @echo = Echo.find(params[:id])\n    @echo.downvote_by current_user\n    redirect_back fallback_location: root_path\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_echo\n      @echo = Echo.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def echo_params\n      params.require(:echo).permit(:title, :content)\n    end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :set_comment, only: [:show, :edit, :update, :destroy]\n\n  # GET /comments\n  # GET /comments.json\n  def index\n    @comments = Comment.all\n  end\n\n  # GET /comments/1\n  # GET /comments/1.json\n  def show\n  end\n\n  # GET /comments/new\n  def new\n    @comment = Comment.new\n  end\n\n  # GET /comments/1/edit\n  #def edit\n  #end\n\n  # POST /comments\n  # POST /comments.json\n  def create\n    @echo = Echo.find(params[:echo_id])\n    @comment = @echo.comments.new(comment_params)\n    @comment.user = current_user\n\n    respond_to do |format|\n      if @comment.save\n        format.html { redirect_to @echo, notice: 'Comment was successfully created.' }\n        format.json { render json: @comment, status: :created, location: @comment }\n      else\n        format.html { render :new }\n        format.json { render json: @comment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /comments/1\n  # DELETE /comments/1.json\n  def destroy\n    @comment.destroy\n    respond_to do |format|\n      format.html { redirect_back fallback_location: root_path, notice: 'Comment was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_comment\n      @comment = Comment.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def comment_params\n      params.require(:comment).permit(:echo_id, :body, :user_id)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4936150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d647da4f614620150041568bf683a790?s=128&d=identicon&r=PG", "display_name": "Wuerfel_21", "link": "https://stackoverflow.com/users/4936150/wuerfel-21"}, "edited": false, "score": 1, "creation_date": 1576014287, "post_id": 59275574, "comment_id": 104758567, "body": "Doesn&#39;t really give the same short-circuit evaluation, but is a lot cleaner than anything I had in mind. Hash lookups are plenty fast, so it&#39;s fine"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 61, "user_id": 4936150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d647da4f614620150041568bf683a790?s=128&d=identicon&r=PG", "display_name": "Wuerfel_21", "link": "https://stackoverflow.com/users/4936150/wuerfel-21"}, "edited": false, "score": 0, "creation_date": 1576016281, "post_id": 59275574, "comment_id": 104759278, "body": "Yeah, the alternative is <code>data[attrib].nil? ? template[attrib].nil? ? ... : template[attrib] : data[attrib]</code> which is really not that readable. There was talk of Ruby introducing a <code>&#47;&#47;</code> operator that does the same as <code>||</code> but only on <code>nil</code>, not sure where that got to."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1576013065, "creation_date": 1576013065, "answer_id": 59275574, "question_id": 59275538, "link": "https://stackoverflow.com/questions/59275538/alternative-to-logical-or-where-false-is-treated-as-truthy/59275574#59275574", "title": "Alternative to logical OR, where false is treated as truthy?", "body": "<p>If you're looking for the first non-<code>nil</code> value:</p>\n\n<pre><code>instance_variable_set :\"@#{attrib}\", [ data[attrib], template[attrib], otherdata[attrib], default ].compact.first\n</code></pre>\n\n<p>Not the most efficient method, but gets the job done and works well if not exercised aggressively.</p>\n\n<p>A slightly more forgiving version:</p>\n\n<pre><code>instance_variable_set :\"@#{attrib}\", [ data[attrib], template[attrib], otherdata[attrib], default ].find { |v| !v.nil? }\n</code></pre>\n\n<p>This scans for the first non-<code>nil</code> value and returns that. It doesn't produce an intermediate array like <code>compact</code> does.</p>\n\n<p>What you really want is a more forgiving method:</p>\n\n<pre><code>def instance_variable_set_from(attrib, *sources)\n  instance_variable_set(:\"@#{attrib}\", sources.find { |v| !v.nil? }\nend\n</code></pre>\n\n<p>Which is more self-explanatory when used:</p>\n\n<pre><code>instance_variable_set_from(attrib, data[attrib], template[attrib], otherdata[attrib], default)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1576074269, "last_edit_date": 1576074269, "creation_date": 1576015161, "answer_id": 59275992, "question_id": 59275538, "link": "https://stackoverflow.com/questions/59275538/alternative-to-logical-or-where-false-is-treated-as-truthy/59275992#59275992", "title": "Alternative to logical OR, where false is treated as truthy?", "body": "<p>Assuming that <code>data</code>, <code>template</code> and <code>otherdata</code> are all hashes, you could use <a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-fetch\" rel=\"nofollow noreferrer\"><code>fetch</code></a>. It returns the value if it is contained in the hash, or the block's result otherwise: </p>\n\n<pre><code>value = data.fetch(attrib) { template.fetch(attrib) { otherdata.fetch(attrib, default) } }\n\ninstance_variable_set :\"@#{attrib}\", value\n</code></pre>\n\n<p>or alternatively <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\"><code>find</code></a> the first hash containing the key and <code>fetch</code> its result, falling back to <code>default</code>:</p>\n\n<pre><code>value = [data, template, other_data].find { |h| h.key?(attrib) }.fetch(attrib, default)\n</code></pre>\n\n<p>Note that this would also allow <code>nil</code> values.</p>\n"}], "owner": {"reputation": 61, "user_id": 4936150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d647da4f614620150041568bf683a790?s=128&d=identicon&r=PG", "display_name": "Wuerfel_21", "link": "https://stackoverflow.com/users/4936150/wuerfel-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59275574, "answer_count": 2, "score": 2, "last_activity_date": 1576074269, "creation_date": 1576012931, "question_id": 59275538, "link": "https://stackoverflow.com/questions/59275538/alternative-to-logical-or-where-false-is-treated-as-truthy", "title": "Alternative to logical OR, where false is treated as truthy?", "body": "<p>So I have some code that gets values from a couple sources in a fixed priority order. It looks like this:</p>\n\n<pre><code>{   foo: true\n    bar: 42\n}.each_pair do |attrib,default|\n    instance_variable_set :\"@#{attrib}\",data[attrib] || template[attrib] || otherdata[attrib] || default\nend\n</code></pre>\n\n<p>As you can probably tell, trying to override a true default with false won't work. How would I fix this without creating a horrible mess? (I do know how to fix it <em>with a horrible mess</em>, but I'm fairly certain there is something nice in the standard library for this exact situation, I just don't remember what it is called and can't think of a good search term)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "date", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 339, "user_id": 3705088, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/760511451f02c9b65551b912054e8d81?s=128&d=identicon&r=PG&f=1", "display_name": "Doughtz", "link": "https://stackoverflow.com/users/3705088/doughtz"}, "edited": false, "score": 0, "creation_date": 1576015079, "post_id": 59275123, "comment_id": 104758880, "body": "Do you know the time zone you are saving the time in?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1576016512, "post_id": 59275123, "comment_id": 104759367, "body": "It seems like the root problem is that you put the dates in your database in the wrong format. Why not fix that problem first?"}, {"owner": {"reputation": 125, "user_id": 12365920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA_MRquLbi8WJCSL7_S7W_5COoyl50zFkAINHteVA=k-s128", "display_name": "Chris Serv", "link": "https://stackoverflow.com/users/12365920/chris-serv"}, "edited": false, "score": 0, "creation_date": 1576049546, "post_id": 59275123, "comment_id": 104767806, "body": "How can i save it in the right format when the numbers aint even the same. The date is way different then mine."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576016509, "post_id": 59276227, "comment_id": 104759364, "body": "Saving what is obviously is a ISO8601 timestamp in a string column seems pretty stupid when pretty much every db in existence has real date/time columns."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": -1, "last_activity_date": 1576016470, "creation_date": 1576016470, "answer_id": 59276227, "question_id": 59275123, "link": "https://stackoverflow.com/questions/59275123/get-time-ago-from-an-date-that-is-saved-as-a-string-ruby-rails/59276227#59276227", "title": "Get time ago from an date that is saved as a string. ruby rails", "body": "<p>The easiest way if you want to avoid doing a bunch of math is by using <a href=\"https://api.rubyonrails.org/v5.2.3/classes/ActiveSupport/Duration.html\" rel=\"nofollow noreferrer\">ActiveSupport::Duration</a>.</p>\n\n<pre><code>irb(main):001:0&gt; time = Time.zone.parse(\"2019-12-09T11:06:37.000Z\")\n=&gt; Mon, 09 Dec 2019 11:06:37 UTC +00:00\nirb(main):002:0&gt; duration = ActiveSupport::Duration.build(Time.zone.now - time)\n=&gt; 1 day, 11 hours, 10 minutes, and 31.248518 seconds\nirb(main):003:0&gt; duration.parts\n=&gt; {:days=&gt;1, :hours=&gt;11, :minutes=&gt;10, :seconds=&gt;31.248518}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 12365920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA_MRquLbi8WJCSL7_S7W_5COoyl50zFkAINHteVA=k-s128", "display_name": "Chris Serv", "link": "https://stackoverflow.com/users/12365920/chris-serv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59276227, "answer_count": 1, "score": 0, "last_activity_date": 1576016470, "creation_date": 1576010924, "question_id": 59275123, "link": "https://stackoverflow.com/questions/59275123/get-time-ago-from-an-date-that-is-saved-as-a-string-ruby-rails", "title": "Get time ago from an date that is saved as a string. ruby rails", "body": "<p>Im still kinda new.</p>\n\n<p>I saved an date from json data, i saved it in my database as an string. Here by my quistion:</p>\n\n<p>Does anybody have a good idea of how i can calculate how many <strong>minutes,hours or days AGO</strong> the date is?</p>\n\n<p><strong><em>\"2019-12-09T11:06:37.000Z\"</em></strong></p>\n\n<p>This is what normal dates look like in my database: <strong><em>2019-12-10 18:28:38.249866</em></strong></p>\n"}, {"tags": ["ruby", "cucumber", "output", "report"], "answers": [{"tags": [], "owner": {"reputation": 525, "user_id": 12232795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAyE6gPJa2Obbe6TyBLX0bft2h6HTPvx78pjRzCbA=k-s128", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/12232795/sooraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1576060415, "creation_date": 1576060415, "answer_id": 59283762, "question_id": 59274584, "link": "https://stackoverflow.com/questions/59274584/change-the-output-path-from-the-cucumber-report/59283762#59283762", "title": "Change the output path from the cucumber report", "body": "<p>Try using:</p>\n\n<p><strong><code>html: --format html --out=reports/{variablename}/relatorio.html</code></strong></p>\n\n<p>Or:</p>\n\n<p><strong><code>html: --format html --out=reports/${variablename}/relatorio.html</code></strong></p>\n"}], "owner": {"reputation": 11, "user_id": 11588023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sbd31DZTtxc/AAAAAAAAAAI/AAAAAAAAEKA/_2L1MCrnTw4/photo.jpg?sz=128", "display_name": "Julliane Freitas", "link": "https://stackoverflow.com/users/11588023/julliane-freitas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576060415, "creation_date": 1576008379, "question_id": 59274584, "link": "https://stackoverflow.com/questions/59274584/change-the-output-path-from-the-cucumber-report", "title": "Change the output path from the cucumber report", "body": "<p>I have one question about Cucumber and Ruby. I have the cucumber.yml file in my project and I generate the reports according to this line:</p>\n\n<p><strong>html: --format html --out=reports/relatorio.html</strong></p>\n\n<p>But I need that every execution of my test create this report in a different folder. I have this path save in a variable. It is possible to do that? Can I overide this configurations from cucumber.yml file somehow?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576046191, "post_id": 59274249, "comment_id": 104766608, "body": "Does <code>range.begin</code> always equal one? If not, and <code>range = 150..375</code> do you want the decomposed ranges to be <code>150..249</code>, <code>250..349</code>, <code>350..375</code>? Is the size of each decomposed range but the last <code>100</code>, regardless of the size of the range?"}, {"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576099574, "post_id": 59274249, "comment_id": 104793230, "body": "No the range can start with any number and just goes up by whatever interval you want to specify."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576101878, "post_id": 59274249, "comment_id": 104794069, "body": "I suggest you incorporate your comment in your question and then we delete the comments."}, {"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576163705, "post_id": 59274249, "comment_id": 104817454, "body": "My understanding is ActiveSupport extends Ruby for methods common to Rails users. This may be an extension to add to ActiveSupport?"}, {"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576175186, "post_id": 59274249, "comment_id": 104823541, "body": "Good point @CarySwoveland"}], "answers": [{"comments": [{"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 0, "creation_date": 1576025923, "post_id": 59274437, "comment_id": 104761848, "body": "Woah! Whats up with the splat in the mapped arguments? I don&#39;t even understand how thats working!"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 0, "creation_date": 1576027240, "post_id": 59274437, "comment_id": 104762153, "body": "@TomRossi Basically you&#39;re splitting each element passed to the block in three parts where the first part is the first element (<code>a</code>), the third part is the last element (<code>b</code>) and all elements between the first and the last element are the second part which isn&#39;t really used here. You could also do something like this <code>|a, *x, b|</code>, in this case all the elements between <code>a</code> and <code>b</code> would be assigned to the <code>x</code> variable and you could of course use the <code>x</code> variable, which stores all the elements between <code>a</code> and <code>b</code>, inside the block."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 0, "creation_date": 1576027335, "post_id": 59274437, "comment_id": 104762176, "body": "You can try out different combinations like <code>|a, b, c ,d, *|</code> or <code>|*, a, b, c, d|</code> and see the results, I think that would demonstrate it pretty good :) For example, try printing out the value of <code>a</code>, <code>b</code>,<code>c</code> and <code>d</code> in these examples and see what happens."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1576047446, "post_id": 59274437, "comment_id": 104767089, "body": "Instead of explaining how the code works in a comment, put the explanation into the answer. That makes it obvious for others looking for the solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1576050587, "post_id": 59274437, "comment_id": 104768240, "body": "This is a nice answer but it does have the disadvantage of requiring <code>map</code> to create and discard temporary arrays <code>[2,3,...,99]</code>, <code>[101,102,...,199]</code> and so on. If there is any question that that is happening, note the following: <code>n = 1_000_000_000_000;  (1..n).each_slice(n&#47;2).map { |a,*,b| (a..b) } #=&gt; NoMemoryError (failed to allocate memory)</code>."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576055745, "post_id": 59274437, "comment_id": 104770718, "body": "@CarySwoveland Thanks for the comment, you&#39;re right, that is definitely a downside of my solution. I will leave my solution as it is as your answer provides a different approach that solves the issue."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1576057647, "post_id": 59274437, "comment_id": 104771805, "body": "It is only a downside if the range is large. It does read nicely\u2014better than my solution\u2014and would not be a problem if the range were of modest size."}, {"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 0, "creation_date": 1576163990, "post_id": 59274437, "comment_id": 104817639, "body": "How does the overhead of this solution compare to the original? I like the concise nature, but I am working with huge ranges."}], "tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": false, "score": 7, "last_activity_date": 1576008069, "last_edit_date": 1576008069, "creation_date": 1576007675, "answer_id": 59274437, "question_id": 59274249, "link": "https://stackoverflow.com/questions/59274249/how-to-break-a-range-down-into-smaller-non-overlapping-ranges/59274437#59274437", "title": "How to break a range down into smaller non-overlapping ranges", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-each_slice\" rel=\"noreferrer\"><code>#each_slice</code></a> in combination with <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-map\" rel=\"noreferrer\"><code>#map</code></a>:</p>\n\n<pre><code>(1..375).each_slice(100).map { |a,*,b| (a..b) }     \n\n#=&gt; [1..100, 101..200, 201..300, 301..375]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 1, "creation_date": 1576099541, "post_id": 59280891, "comment_id": 104793218, "body": "Is this more efficient than the solution I started with?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "edited": false, "score": 0, "creation_date": 1576102105, "post_id": 59280891, "comment_id": 104794142, "body": "Somewhat red-faced I must confess I did not read your code very carefully. My answer is only a slight variant of yours, certainly not better than yours. Your use of <code>step</code>, for one, is an improvement."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1576050974, "last_edit_date": 1576050974, "creation_date": 1576049969, "answer_id": 59280891, "question_id": 59274249, "link": "https://stackoverflow.com/questions/59274249/how-to-break-a-range-down-into-smaller-non-overlapping-ranges/59280891#59280891", "title": "How to break a range down into smaller non-overlapping ranges", "body": "<p>The following may not be the most elegant solution but it is designed to be relatively efficient, by avoiding the creation of temporary arrays.</p>\n\n<pre><code>def divide_range(range, sz)\n  start = range.begin\n  (range.size/sz).times.with_object([]) do |_,arr|\n    arr &lt;&lt; (start..start+sz-1)\n    start += sz\n  end.tap { |arr| (arr &lt;&lt; (start..range.end)) if start &lt; range.end }\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>divide_range(1..375, 100)\n  #=&gt; [1..100, 101..200, 201..300, 301..375] \ndivide_range(1..400, 100)\n  #=&gt; [1..100, 101..200, 201..300, 301..400] \ndivide_range(50..420, 50)\n  #=&gt; [50..99, 100..149, 150..199, 200..249, 250..299, 300..349,\n  #    350..399, 400..420]\nn = 1_000_000_000_000\ndivide_range(1..n, n/2)\n  #=&gt; [1..500000000000, 500000000001..1000000000000] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1576176053, "post_id": 59310719, "comment_id": 104823891, "body": "Why not just <code>range.step(interval).map {|i| i..[i+interval-1, range.last].min }</code> ?"}, {"owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1576177954, "post_id": 59310719, "comment_id": 104824667, "body": "@ChrisHeald I like the use of Array#min!"}], "tags": [], "owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "is_accepted": false, "score": 0, "last_activity_date": 1576177929, "last_edit_date": 1576177929, "creation_date": 1576175137, "answer_id": 59310719, "question_id": 59274249, "link": "https://stackoverflow.com/questions/59274249/how-to-break-a-range-down-into-smaller-non-overlapping-ranges/59310719#59310719", "title": "How to break a range down into smaller non-overlapping ranges", "body": "<p>Currently, I'm using the <code>step</code> method, but I don't like having to check the top of the range and do calculations to avoid overlapping: </p>\n\n<p>For example:</p>\n\n<pre><code>range = 1..375\ninterval = 100\nrange.step(interval).each do |start|\n  stop = [range.last, start + (interval - 1)].min\n  puts \"#{start}..#{stop}\"\nend\n</code></pre>\n\n<p>I've taken this code and extended <code>Range</code> as well:</p>\n\n<pre><code>class Range\n  def in_sub_ranges(interval)\n    step(interval).each do |start|\n      stop = [range.last, start + (interval - 1)].min\n      yield(start..stop)\n    end\n  end\nend\n</code></pre>\n\n<p>This allows me to do</p>\n\n<pre><code>range.in_sub_ranges(100) { |sub| puts sub }\n</code></pre>\n"}], "owner": {"reputation": 10050, "user_id": 431874, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/IJ6HK.png?s=128&g=1", "display_name": "Tom Rossi", "link": "https://stackoverflow.com/users/431874/tom-rossi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1576177929, "creation_date": 1576006774, "last_edit_date": 1576174967, "question_id": 59274249, "link": "https://stackoverflow.com/questions/59274249/how-to-break-a-range-down-into-smaller-non-overlapping-ranges", "title": "How to break a range down into smaller non-overlapping ranges", "body": "<p>What is the most beautiful way to break a larger range into smaller non overlapping ranges?</p>\n\n<pre><code>range = 1..375\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>1..100\n101..200\n201..300\n301..375\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-list"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12513697, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TRWlIBBD9ow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePyZOF2G4xK9Opn5cKyPAZ7YFyAg/photo.jpg?sz=128", "display_name": "mitsuka s", "link": "https://stackoverflow.com/users/12513697/mitsuka-s"}, "edited": false, "score": 0, "creation_date": 1576053573, "post_id": 59277881, "comment_id": 104769578, "body": "first suggestion cause an exception when I create a new record and does rollback    <code>ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near &quot;{&quot;)</code>    <code>Record Update All (1.0ms)  UPDATE &quot;records&quot; SET &quot;position&quot; = (&quot;records&quot;.&quot;position&quot; + 1), &quot;updated_at&quot; = &#39;2019-12-11 08:34:42.166539&#39; WHERE ({:parent_id=&gt;nil})</code>    Second is undesirable. And I pass it as hash to array because it will be changed in future to kind of [:status, parent_id: nil].  \\s  Thanks for answer."}, {"owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "reply_to_user": {"reputation": 1, "user_id": 12513697, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TRWlIBBD9ow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePyZOF2G4xK9Opn5cKyPAZ7YFyAg/photo.jpg?sz=128", "display_name": "mitsuka s", "link": "https://stackoverflow.com/users/12513697/mitsuka-s"}, "edited": false, "score": 0, "creation_date": 1576180630, "post_id": 59277881, "comment_id": 104825660, "body": "I&#39;m a bit confused as to your actual requirements. They way you&#39;ve written it, you seem to only want to maintain a list of parentless items (that&#39;s what providing the <code>nil</code> will do). The scope feature is meant to help us determine the other items that are in the same scope as the current record (thus you normally only provide the columns, not the values)."}], "tags": [], "owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "is_accepted": false, "score": 0, "last_activity_date": 1576029490, "creation_date": 1576029490, "answer_id": 59277881, "question_id": 59274134, "link": "https://stackoverflow.com/questions/59274134/acts-as-list-puts-record-at-wrong-position-with-array-scope/59277881#59277881", "title": "acts_as_list puts record at wrong position with array scope", "body": "<p>s, it looks like you're trying to pass in a hash nested within an array for the scope. Try:</p>\n\n<pre><code>acts_as_list scope: { parent_id: nil }, add_new_at: :top, top_of_list: 0\n</code></pre>\n\n<p>alternatively, if you want a list for every seperate <code>parent_id</code> then use:</p>\n\n<pre><code>acts_as_list scope: :parent, add_new_at: :top, top_of_list: 0\n</code></pre>\n\n<p><code>acts_as_list</code> will <a href=\"https://github.com/brendon/acts_as_list/blob/da3d652c34882ac97805c3949cdd35d3cc4a2661/lib/acts_as_list/active_record/acts/scope_method_definer.rb#L67\" rel=\"nofollow noreferrer\">append the <code>_id</code> for you</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12513697, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TRWlIBBD9ow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePyZOF2G4xK9Opn5cKyPAZ7YFyAg/photo.jpg?sz=128", "display_name": "mitsuka s", "link": "https://stackoverflow.com/users/12513697/mitsuka-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576029490, "creation_date": 1576006146, "last_edit_date": 1576007132, "question_id": 59274134, "link": "https://stackoverflow.com/questions/59274134/acts-as-list-puts-record-at-wrong-position-with-array-scope", "title": "acts_as_list puts record at wrong position with array scope", "body": "<p>I have a model with following setup for acts_as_list gem:\n<code>acts_as_list scope: [parent_id: nil], add_new_at: :top, top_of_list: 0</code>\nI expect having next array of records:\n<code>[Record id: 1, parent_id: nil, position: 1; Record id: 2, parent_id: nil, position: 0; Record id: 3, parent_id: 1, position: nil]</code>,\nbut it happens like it ignores parent_id: nil and actual array of records is:\n<code>[Record id: 1, parent_id: nil, position: 2; Record id: 2, parent_id: nil, position: 1; Record id: 3, parent_id: 1, position: 0]</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576008545, "post_id": 59273879, "comment_id": 104756320, "body": "If, in the &quot;Module Blocks&quot; case, you insert the line <code>puts &quot;constants = #{constants}&quot;</code> as the last line of the module definition, you will see that  <code>constants = [:SecondClass, :FirstClass]</code> is displayed. This tells you that, <i>from within the module definition</i>, you can reference the classes without the double-colons. That is, <code>FirstClass.new.meth</code> as <code>Foo::FirstClass.new.meth</code> (which could alternatively be used)."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576011235, "post_id": 59273879, "comment_id": 104757440, "body": "@CarySwoveland I&#39;m aware of the <code>Foo::FirstClass.new.meth</code> syntax, but I want to avoid doing this since I am modifying pre-existing code, so changing every reference to FirstClass (which was previously a top-level class) would be a bit time consuming and it just doesn&#39;t look very clean. For now, I am simply putting <code>include Foo</code> underneath <code>class Foo::FirstClass</code>  and in every other class within Foo."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576009637, "post_id": 59274684, "comment_id": 104756766, "body": "Excellent answer!"}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "edited": false, "score": 0, "creation_date": 1576010870, "post_id": 59274684, "comment_id": 104757274, "body": "Thanks for the answer, the Module.nesting method is very helpful. It certainly helps me understand the &quot;how&quot; but I&#39;m still curious about the &quot;why.&quot; It&#39;s not very intuitive, especially since my previous understanding was that using module blocks was the same as double colons (this is what most resources seem to suggest). The only other topic I could find regarding this was <a href=\"https://www.ruby-forum.com/t/double-colon-vs-module-block/131186/9\" rel=\"nofollow noreferrer\">here</a>, but it still doesn&#39;t answer the &quot;why&quot;"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576011368, "post_id": 59274684, "comment_id": 104757499, "body": "Your sources are really bad. <a href=\"https://github.com/rubocop-hq/ruby-style-guide#namespace-definition\" rel=\"nofollow noreferrer\">github.com/rubocop-hq/ruby-style-guide#namespace-definition</a>"}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576013947, "post_id": 59274684, "comment_id": 104758439, "body": "@max Evidently, yes, I didn&#39;t understand how it worked and I wasn&#39;t properly searching for what I needed. This is a great resource so thanks for sharing it. The style guide, however, still doesn&#39;t answer the &quot;why&quot; (nor does the <a href=\"https://cirw.in/blog/constant-lookup.html\" rel=\"nofollow noreferrer\">excellent article on constant lookup</a> the style guide references)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576014041, "post_id": 59274684, "comment_id": 104758468, "body": "Its because the scope resolution operator <code>::</code> does not reopen a module or class the same way the keywords do. Its was never intended to do so."}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576014408, "post_id": 59274684, "comment_id": 104758612, "body": "@max &quot;Its was never intended to do so&quot; - I understand that now, but I am wondering why it was designed this way and what the benefits are."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576014429, "post_id": 59274684, "comment_id": 104758623, "body": "<code>class Foo</code> opens up the class and evaluates a block  (the class body) in that nesting (classes are also modules). <code>class Foo::SecondClass</code> is like calling <code>Foo::SecondClass = Class.new do</code> so of course the module nesting is different."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1576014480, "post_id": 59274684, "comment_id": 104758640, "body": "Here is an in depth discussion on this topic, it also has a section titled &quot;Why?&quot;, that may help: <a href=\"https://medium.com/@hoffm/a-puzzle-about-ruby-constants-e958d15dbada\" rel=\"nofollow noreferrer\">medium.com/@hoffm/a-puzzle-about-ruby-constants-e958d15dbada</a>"}, {"owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1576104597, "post_id": 59274684, "comment_id": 104794930, "body": "@Casper Thanks for the link. I&#39;ve accepted your answer since it&#39;s the best possible answer to the question I asked.   @max &quot;so of course the module nesting is different&quot; - perhaps this is due to my inexperience with other languages, but I still don&#39;t see why this is so obvious. Why is <code>Foo</code> not part of the lexical scope under <code>Foo::SecondClass</code>.  I have asked a related question <a href=\"https://stackoverflow.com/questions/59295287/why-does-ruby-not-add-parent-modules-to-the-lexical-scope-for-constant-lookup-wh\">here</a> that asks about the &quot;why&quot; more specifically."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 8, "last_activity_date": 1576013868, "last_edit_date": 1576013868, "creation_date": 1576008787, "answer_id": 59274684, "question_id": 59273879, "link": "https://stackoverflow.com/questions/59273879/ruby-class-namespacing-with-modules-why-do-i-get-nameerror-with-double-colons-b/59274684#59274684", "title": "Ruby Class namespacing with modules: Why do I get NameError with double colons but not module blocks?", "body": "<p>It may seem counter-intuitive, but constant lookup in Ruby is done using current <strong>lexical scope</strong>, i.e. the current lexical nesting level (location in the source code), not the semantic nesting level.</p>\n\n<p>This can be tested by inspecting <code>Module.nesting</code>, which prints the current lexical scope:</p>\n\n<pre><code>class Foo::SecondClass\n  pp Module.nesting       # -&gt; [Foo::SecondClass]\nend\n\nmodule Foo\n  class SecondClass\n    pp Module.nesting     # -&gt; [Foo::SecondClass, Foo]\n  end\nend\n</code></pre>\n\n<p>Since Ruby uses this nesting level for symbol lookup, it means in the situation where you try to look up <code>FirstClass</code> within nesting <code>[Foo::SecondClass]</code>, Ruby will not find it. </p>\n\n<p>However when you try to look it up within nesting <code>[Foo::SecondClass, Foo]</code>, it will find <code>FirstClass</code> under <code>Foo</code>, just like you expect.</p>\n\n<p>To get around this, you could do:</p>\n\n<pre><code>class Foo::SecondClass\n  def meth\n    Foo::FirstClass.new.meth\n  end\nend\n</code></pre>\n\n<p>Which will now work as you expect, since you provided the necessary lookup hint for <code>FirstClass</code>, and told Ruby it is inside <code>Foo</code>.</p>\n"}], "owner": {"reputation": 233, "user_id": 12513465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cebfbd146641d8d7ed2c66e6776b39e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe_P", "link": "https://stackoverflow.com/users/12513465/joe-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 59274684, "answer_count": 1, "score": 5, "last_activity_date": 1576013868, "creation_date": 1576005066, "last_edit_date": 1576006013, "question_id": 59273879, "link": "https://stackoverflow.com/questions/59273879/ruby-class-namespacing-with-modules-why-do-i-get-nameerror-with-double-colons-b", "title": "Ruby Class namespacing with modules: Why do I get NameError with double colons but not module blocks?", "body": "<p>I am working with a lot of pre-existing files, classes, and modules and trying to come up with better namespacing for the different components of the framework. I've been using modules as a way to namespace mainly because this seems like the standard convention (and being able to 'include' different parts of the framework could be useful). </p>\n\n<p>The problem is that there was a ton of classes underneath the global namespace that should exist underneath a module. For example, let's say there is a class that was simply defined as:</p>\n\n<pre><code>class FirstClass\n  def meth\n    puts \"HELLO\"\n  end\nend\n</code></pre>\n\n<p>But now I want to have this class within a module:</p>\n\n<p><strong>Using Double Colons:</strong></p>\n\n<pre><code>module Foo; end\n\nclass Foo::FirstClass\n  def meth\n    puts 'HELLO'\n  end\nend\n</code></pre>\n\n<p><strong>Using Module Blocks:</strong></p>\n\n<pre><code>module Foo\n  class FirstClass\n    def meth\n      puts 'HELLO'\n    end\n  end\n</code></pre>\n\n<p>Using double colons is a lot cleaner and also a lot easier to implement since I am changing many class definitions. Both of these ways work and I <em>thought</em> that they are both effectively the same thing, but evidently they are not. The double colon method seems to result in a different namespace within each class compared to the module block. For instance, with two classes underneath \"Foo\":</p>\n\n<p><strong>Using Module Blocks:</strong></p>\n\n<pre><code>module Foo\n  class FirstClass\n    def meth\n      puts 'HELLO'\n    end\n  end\n\n  class SecondClass\n    def meth\n      FirstClass.new.meth\n    end\n  end\nend\n\nFoo::SecondClass.new.meth\n</code></pre>\n\n<p><strong>Using Double Colons:</strong></p>\n\n<pre><code>module Foo; end\n\nclass Foo::FirstClass\n  def meth\n    puts 'HELLO'\n  end\nend\n\nclass Foo::SecondClass\n  def meth\n    FirstClass.new.meth\n  end\nend\n\nFoo::SecondClass.new.meth\n\n</code></pre>\n\n<p>The code works when using module blocks, but doesn't work with double colons. With the double colons, NameError is raised because it resolves <code>FirstClass</code> as <code>Foo::SecondClass::FirstClass</code> (instead of <code>Foo::FirstClass</code>), which doesn't exist. </p>\n\n<p>This can easily be solved by including <code>Foo</code> in <code>SecondClass</code>, but how come this isn't done by default?</p>\n\n<p>Note: I'm using Ruby 2.1.5, which I know is outdated, but I get the same results on repl.it with ruby 2.5.5p157: <a href=\"https://repl.it/@joep2/Colon-vs-Block-Namespacing\" rel=\"nofollow noreferrer\">https://repl.it/@joep2/Colon-vs-Block-Namespacing</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1576004587, "post_id": 59273607, "comment_id": 104754670, "body": "<code>gets.chomp</code> <a href=\"https://stackoverflow.com/q/23193813/3784008\">stackoverflow.com/q/23193813/3784008</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1576004794, "creation_date": 1576004794, "answer_id": 59273824, "question_id": 59273607, "link": "https://stackoverflow.com/questions/59273607/cant-use-include-with-an-instance-variable-in-a-method/59273824#59273824", "title": "Can&#39;t use include? with an instance variable in a method", "body": "<p>When the user inputs text with <code>gets</code> they press Enter, which sends a newline. You need to remove the newline with <code>gets.chomp</code>:</p>\n\n<pre><code>class Game\n  attr_accessor :available_moves\n\n  def initialize\n    @available_moves = [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\"]\n  end\n\n  def play_game\n    puts (\"Welcome\")\n    while true\n      puts \"Player 1, choose a square\"\n      # Note the .chomp here to remove the newline that the user inputs\n      player1_choice = gets.chomp\n      # v this is what I can't get to work v\n      if @available_moves.include?(player1_choice) \n        puts \"yes\"\n        break\n      else\n        puts \"no\"\n      end\n    end\n  end\nend\n\ngame1 = Game.new\ngame1.play_game\n</code></pre>\n\n<p>Now you get:</p>\n\n<pre><code>game1.play_game\nWelcome\nPlayer 1, choose a square\n1\nyes\n=&gt; nil\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/23193813/3784008\">How does gets and gets.chomp in ruby work?</a> for a more in-depth explanation.</p>\n"}], "owner": {"reputation": 69, "user_id": 10757461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SFJLw9WBMSY/AAAAAAAAAAI/AAAAAAAAAKg/UFHJVnlkUNg/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/10757461/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59273824, "answer_count": 1, "score": 0, "last_activity_date": 1576004794, "creation_date": 1576003724, "question_id": 59273607, "link": "https://stackoverflow.com/questions/59273607/cant-use-include-with-an-instance-variable-in-a-method", "title": "Can&#39;t use include? with an instance variable in a method", "body": "<p>I am trying to use 'gets' to get input and then check to see if the instance variable includes the input inside of a method but I can't get it work. Here is the code: </p>\n\n<pre><code>class Game\n    attr_accessor :available_moves\n\n    def initialize\n        @available_moves = [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\"]\n    end\n\n  def play_game\n    puts (\"Welcome\")\n    while true\n        puts \"Player 1, choose a square\"\n        player1_choice = gets\n        # v this is what I can't get to work v\n        if @available_moves.include?(player1_choice) \n            puts \"yes\"\n            break\n        else\n            puts \"no\"\n        end\n    end\nend\nend\n\ngame1 = Game.new\ngame1.play_game\n</code></pre>\n\n<p>No matter what I try, the 'else' condition is met and \"no\" is printed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-api", "google-translate", "google-cloud-translate"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1576002999, "post_id": 59273317, "comment_id": 104753999, "body": "Did you not read <a href=\"https://developers.google.com/accounts/docs/application-default-credentials\" rel=\"nofollow noreferrer\">developers.google.com/accounts/docs/&hellip;</a>? It&#39;s telling you to go to that page to find out why it isn&#39;t working. And when you go to that page, it gives multiple examples of how to load your credentials into your app including <code>export GOOGLE_APPLICATION_CREDENTIALS</code>. There are even Ruby code examples on that page to show how to do it. What am I missing here?"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "edited": false, "score": 0, "creation_date": 1576091096, "post_id": 59275146, "comment_id": 104789590, "body": "I already followed all the steps from <a href=\"https://cloud.google.com/docs/authentication/production\" rel=\"nofollow noreferrer\">cloud.google.com/docs/authentication/production</a>, created a service account, a credential key and set the env variable (on Windows), then I tried testing the credential configuration with the &quot;google/cloud/storage&quot; example and it&#39;s worked fine, but when I tried with &quot;google/cloud/translate&quot; gem with <code>translate = Google::Cloud::Translate.new version: :v2, project_id: project_id</code>, I still got the same error"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "edited": false, "score": 0, "creation_date": 1576105114, "post_id": 59275146, "comment_id": 104795087, "body": "@ManuelCarrero Go back to the page and read the whole thing. There is a dead simple example of using <code>keyfile</code> during your <code>.new</code> call to tell it to load a specific keyfile. All the answers to your question are on that page."}], "tags": [], "owner": {"reputation": 5647, "user_id": 11928099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a524f2f39615e5d3ae892d001235d5?s=128&d=identicon&r=PG&f=1", "display_name": "marian.vladoi", "link": "https://stackoverflow.com/users/11928099/marian-vladoi"}, "is_accepted": false, "score": 0, "last_activity_date": 1576010996, "creation_date": 1576010996, "answer_id": 59275146, "question_id": 59273317, "link": "https://stackoverflow.com/questions/59273317/runtimeerror-could-not-load-the-default-credentials/59275146#59275146", "title": "RuntimeError: Could not load the default credentials", "body": "<ol>\n<li><p>Create a service account: </p>\n\n<pre><code>gcloud iam service-accounts create rubyruby --description \"rubyruby\" --display-name \"rubyruby\"\n</code></pre></li>\n<li><p>Get the service account name:</p>\n\n<pre><code>gcloud iam service-accounts list\n</code></pre></li>\n<li><p>Create the credential key file for your service account:</p>\n\n<pre><code>gcloud iam service-accounts keys create key.json --iam-account rubyruby@your-project.iam.gserviceaccount.com\n</code></pre></li>\n<li><p>Set the env variable:</p>\n\n<pre><code>export GOOGLE_APPLICATION_CREDENTIALS=key.json\n</code></pre></li>\n<li><p>Enable the translate API</p></li>\n<li><p>Install the library:</p>\n\n<pre><code>gem install google-cloud-translate\n</code></pre></li>\n<li><p>Edit the <code>ruby.rb</code> script </p></li>\n</ol>\n\n<pre><code>   # project_id = \"Your Google Cloud project ID\"\n   # text       = \"The text you would like to detect the language of\"\n\n   require \"google/cloud/translate\"\n   text = 'I am home'\n\n   translate = Google::Cloud::Translate.new version: :v2, project_id: project_id\n   detection = translate.detect text\n\n   puts \"'#{text}' detected as language: #{detection.language}\"  \n   puts \"Confidence: #{detection.confidence}\"\n\n</code></pre>\n\n<ol start=\"8\">\n<li><p>Run the script:</p>\n\n<pre><code>ruby ruby.rb\n</code></pre></li>\n<li><p>Output:</p>\n\n<pre><code>'I am home' detected as language: en\nConfidence: 1\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 5424261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e67135f5fb8597ed27c02beac1285f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pe&#241;aloza", "link": "https://stackoverflow.com/users/5424261/daniel-pe%c3%b1aloza"}, "is_accepted": false, "score": 0, "last_activity_date": 1600400618, "creation_date": 1600400618, "answer_id": 63949022, "question_id": 59273317, "link": "https://stackoverflow.com/questions/59273317/runtimeerror-could-not-load-the-default-credentials/63949022#63949022", "title": "RuntimeError: Could not load the default credentials", "body": "<p>Hi for doing this you will need to have your .json file with all the keys of your google service account, once that you have that file in the same path of your project you could do something like the following code:</p>\n<pre><code>    module GoogleTranslator\n        require &quot;google/cloud/translate&quot;\n        ENV[&quot;GOOGLE_APPLICATION_CREDENTIALS&quot;] = &quot;yourfile.json&quot;\n        class Translate\n            attr_reader :project_id, :location_id, :word, :target_language\n            def initialize(project_id, location_id, word, target_language)\n                @project_id         = project_id\n                @location_id        = location_id\n                @word               = word\n                @target_language    = target_language\n            end\n    \n            def translate\n                client = Google::Cloud::Translate.translation_service\n                parent = client.location_path project: project_id, location: location_id\n                response = client.translate_text(parent: parent, contents: word.words.to_a, target_language_code: target_language)\n                translate_content(response)\n            end\n    \n            def translate_content(response)\n                word.translation(response)\n            end\n        end\n    end\n    \n    class Word\n        attr_reader :words\n        def initialize(words)\n            @words = words\n        end\n    \n        def translation(words)\n            words.translations.each do |word|\n                puts word.translated_text\n            end\n        end\n    end\n    \n    module GoogleTranslatorWrapper\n        def self.translate(project_id:, location_id:, word:, target_language:)\n            GoogleTranslator::Translate.new(project_id, location_id, word, target_language)\n        end\n    end\n    \n    GoogleTranslatorWrapper.translate(project_id: &quot;your_project_id_on_google&quot;, location_id: &quot;us-central1&quot;, word: Word.new([&quot;your example word&quot;]), target_language: &quot;es-mx&quot;).translate\n</code></pre>\n<p>Hope this can be clear :)...!</p>\n"}], "owner": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1600400618, "creation_date": 1576002387, "last_edit_date": 1576091258, "question_id": 59273317, "link": "https://stackoverflow.com/questions/59273317/runtimeerror-could-not-load-the-default-credentials", "title": "RuntimeError: Could not load the default credentials", "body": "<p>i've installed <code>google/cloud/translate</code> in my project, the version in the Gemfile.lock is: </p>\n\n<pre><code>google-cloud-translate (2.1.0)\n</code></pre>\n\n<p>With the below code:</p>\n\n<pre><code>require \"google/cloud/translate\"\nproject_id = \"&lt;Project ID&gt;\" # from my Google Cloud Platform\ntranslate = Google::Cloud::Translate.new version: :v2, project_id: project_id\n</code></pre>\n\n<p>That is what the <a href=\"https://cloud.google.com/translate/docs/basic/detecting-language?authuser=1\" rel=\"nofollow noreferrer\">documentation</a> says and also what this <a href=\"https://stackoverflow.com/a/58918041/6796652\">answer</a> related suggest (please note that i'm using v2 instead of v3)</p>\n\n<pre><code>RuntimeError: Could not load the default credentials. Browse to\nhttps://developers.google.com/accounts/docs/application-default-credentials for more information\n</code></pre>\n\n<p>This part returns true:</p>\n\n<pre><code>require \"google/cloud/translate\"\n</code></pre>\n\n<p><strong>Update</strong>\nI already followed all the steps in: </p>\n\n<p><a href=\"https://cloud.google.com/docs/authentication/production\" rel=\"nofollow noreferrer\">https://cloud.google.com/docs/authentication/production</a></p>\n\n<p>Created a service account, a credential key and set the env variable (on Windows), then I tried testing the credential configuration with the <code>google/cloud/storage</code> example and it's worked fine, but when I tried with: <code>google/cloud/translate</code> gem with </p>\n\n<p><code>translate = Google::Cloud::Translate.new version: :v2, project_id: project_id</code></p>\n\n<p>I still got the same error</p>\n\n<p>What can be the error?\nThanks in advance for any help.</p>\n"}, {"tags": ["ruby", "range", "sequence"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576002309, "post_id": 59272092, "comment_id": 104753668, "body": "I suppose you could think of finite ranges as sequences, but I don&#39;t think that&#39;s helpful, and infinite ranges, such as <code>1.0..2.0</code> are certainly not sequences (though there exist sequences that include every number between <code>1.0</code> and <code>2.0</code>). Do you mean &quot;<i>real</i> ranges&quot; as opposed to, say, &quot;phantom ranges? You need to give more thought to your last two sentences."}], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1576024199, "post_id": 59272550, "comment_id": 104761450, "body": "Numeric Ranges sometimes behave like sequences; quite smart sequences: <code>(50..1000000000).sum</code> returns instantly, I guess because it is a ArithmeticSequence"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1576001301, "last_edit_date": 1576001301, "creation_date": 1575998750, "answer_id": 59272550, "question_id": 59272092, "link": "https://stackoverflow.com/questions/59272092/ruby-ranges-or-sequences/59272550#59272550", "title": "Ruby: Ranges or Sequences?", "body": "<p>The confusion stems from the fact that Ruby has two types of ranges, which are treated somewhat differently: <em>numeric ranges</em>, having numeric objects as endpoints, and <em>non-numeric ranges</em>, having non-numeric objects as endpoints. </p>\n\n<p>The doc for <a href=\"https://ruby-doc.org/core-2.6.3/Range.html#method-i-include-3F\" rel=\"nofollow noreferrer\">Range#include?</a> states, \"Returns <code>true</code> if obj is an element of the range, <code>false</code> otherwise. If begin and end are numeric, comparison is done according to the magnitude of the values.\". Therefore, </p>\n\n<pre><code>(1..10).include? 2.17 #=&gt; true\n</code></pre>\n\n<p>does not mean that <code>2.17</code> is an element of the range, merely that <code>2.17.between?(1, 10) #=&gt; true</code>.</p>\n\n<p>You have a point that the first sentence of the doc is inaccurate--or at best misleading--for numeric ranges. After all, if we write</p>\n\n<pre><code>(1..10).any? { |n| n == 2.17 } #=&gt; false\n</code></pre>\n\n<p>what does it mean that <code>2.17</code> is \"an element of the range\"? That is not an issue for non-numeric ranges.</p>\n\n<p>I think the doc for <code>Range#include?</code> should be more precise. Firstly, after having earlier defined <em>numeric</em> and <em>non-numeric</em> ranges, it would be helpful to define the concept of a <em>member</em> or <em>element</em> of a non-numeric range: \"For a non-numeric range <code>r</code>, <code>obj</code> is a member of <code>r</code> if and only if <code>r.any? { |o| o == obj } #=&gt; true</code>. I see no reason to attempt a definition of <em>member</em> for numeric ranges.</p>\n\n<p><code>Range#include?</code> might then be documented as follows: \"A numeric range <code>r</code> returns <code>true</code> if <code>r.begin &lt;= obj &lt;= r.end</code> for two-dot ranges and <code>r.begin &lt;= obj &lt; r.end</code> for three-dot ranges; else returns <code>false</code>. A non-numeric range returns <code>true</code> if <code>obj</code> is a member of the range; else <code>false</code>.\"</p>\n"}], "owner": {"reputation": 69, "user_id": 11451505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19d52381d272c448c77e0847c694497?s=128&d=identicon&r=PG", "display_name": "Kourosh Alinaghi", "link": "https://stackoverflow.com/users/11451505/kourosh-alinaghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59272550, "answer_count": 1, "score": 0, "last_activity_date": 1576069667, "creation_date": 1575996885, "last_edit_date": 1576069667, "question_id": 59272092, "link": "https://stackoverflow.com/questions/59272092/ruby-ranges-or-sequences", "title": "Ruby: Ranges or Sequences?", "body": "<p>I have a question about ruby ranges:</p>\n\n<pre><code>rng = (1..10)\nrng.include? 2.17 # =&gt; true (rng it's a real range)\nrng.each { |num| puts num } # =&gt; prints integers between 0 and 11 (rng it's sequences)\n</code></pre>\n\n<p>What are ranges in Ruby? Sequences or real Ranges? \nWhat I mean of real Ranges: Every numbers between two numbers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yarnpkg", "webpacker"], "comments": [{"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576020352, "post_id": 59271468, "comment_id": 104760490, "body": "How are you starting foreman locally? Just for a sanity check, I believe you want to specify the <code>Procile.dev</code> config file: <a href=\"https://framagit.org/tykayn/mastodon/blob/master/Procfile.dev\" rel=\"nofollow noreferrer\">framagit.org/tykayn/mastodon/blob/master/Procfile.dev</a>"}, {"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576020521, "post_id": 59271468, "comment_id": 104760537, "body": "Otherwise, if you prefer to run without the dev-server, check to be sure there&#39;s not already something listening on port 3035 since Rails won&#39;t shell out to compile if it thinks the dev-server is running. <a href=\"https://github.com/rails/webpacker/blob/96af013eed295576ac246f46dee1d01d67888801/lib/webpacker/manifest.rb#L54\" rel=\"nofollow noreferrer\">github.com/rails/webpacker/blob/&hellip;</a>"}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576056827, "post_id": 59271468, "comment_id": 104771322, "body": "i do <code>foreman start</code> and it takes correctly the Procfile.dev, not the other one, i tested it with the RUBY_ENV set to production. specifiying no RUBY_ENV runs the development one."}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576056905, "post_id": 59271468, "comment_id": 104771365, "body": "@rossta i saw there is nothing running on the port 3035 with <code>netstat -pna |grep 3035</code>"}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576056957, "post_id": 59271468, "comment_id": 104771398, "body": "the problem here is clearly a react app build problem, the manifest seems to be missing something, but i have no idea how to add it at build time"}, {"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576060665, "post_id": 59271468, "comment_id": 104773433, "body": "What output do you get when you run ./bin/webpack?"}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576061211, "post_id": 59271468, "comment_id": 104773791, "body": "more insight for @rossta , here is the complete output of my failing assets:precompile logs; it is where the build fails to join the manifest.json &quot;common&quot; part .  <a href=\"https://pastebin.com/QMZ1yCUe\" rel=\"nofollow noreferrer\">pastebin.com/QMZ1yCUe</a>"}, {"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576064021, "post_id": 59271468, "comment_id": 104775332, "body": "thanks\u2014is there no helpful output if you run straight: <code>.&#47;bin&#47;webpack</code>?"}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576077790, "post_id": 59271468, "comment_id": 104782913, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204064/discussion-between-ty-kayn-and-rossta\">continue this discussion in chat</a>."}, {"owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1576093029, "post_id": 59271468, "comment_id": 104790418, "body": "webpack builds succefully if i run it. but the ./bin/webpack-dev-server does not"}], "owner": {"reputation": 549, "user_id": 2505427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e8eadedfdfab6576f3196428ed47a94e?s=128&d=identicon&r=PG", "display_name": "Ty Kayn", "link": "https://stackoverflow.com/users/2505427/ty-kayn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581496084, "creation_date": 1575994620, "last_edit_date": 1581496084, "question_id": 59271468, "link": "https://stackoverflow.com/questions/59271468/make-a-mastodon-local-development-environment-problem-with-manifest-json-and-ya", "title": "make a Mastodon local development environment, problem with manifest.json and yarn", "body": "<p>i want to make a dev environment to make stuff for my Mastodon version. But i cannot find a way to build the react app's manifest.json\nwhen i run \"foreman start\", the services run fine, but the frontend, <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a> prompts an error message about the build. The manifest json has a problem, it is missing a \"common\" part, as webpacker says. it is full of a lot of js files references though.</p>\n\n<pre><code>Webpacker::Manifest::MissingEntryError: Webpacker can't find common in XXX/manifest.json\n</code></pre>\n\n<p>i tried reinstalling gems, wiping yarn cache, removing node_modules, changing ruby version with RVM. nothing beats that.</p>\n\n<p>here is my repo, on the branch feature-im\n<a href=\"https://framagit.org/tykayn/mastodon/tree/feature-im\" rel=\"nofollow noreferrer\">https://framagit.org/tykayn/mastodon/tree/feature-im</a>\nbut the same happens on master, which i merge regularly with the tootsuite/mastodon version from github.\n<a href=\"https://framagit.org/tykayn/mastodon\" rel=\"nofollow noreferrer\">https://framagit.org/tykayn/mastodon</a></p>\n\n<p>system info:</p>\n\n<pre><code>============\nrails version : Rails 5.2.3\nruby version : ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]\nruby env : development\nrvm version :rvm 1.29.9 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]\nnode version : v12.11.0\nnode env : \nyarn version : 1.17.3\nsystem version : Linux fatland 5.0.0-37-generic #40-Ubuntu SMP Thu Nov 14 00:14:01 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n============\n</code></pre>\n\n<p>here is the complete output of my failing assets:precompile logs; it is where the build fails to join the manifest.json \"common\" part . pastebin.com/QMZ1yCUe</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1575994499, "creation_date": 1575994499, "answer_id": 59271427, "question_id": 59271239, "link": "https://stackoverflow.com/questions/59271239/ruby-on-rails-undefined-method-valid-when-using-update/59271427#59271427", "title": "ruby on rails undefined method &#39;valid&#39; when using update", "body": "<p>Your problem is here:</p>\n\n<pre><code>@user = User.update(user_params)\n</code></pre>\n\n<p>If you put in your check after, you would see: <code>#Is this working???!! true</code>, which would ironically enough inform you that it's not working.</p>\n\n<p>That's because <code>User.update(user_params)</code> returns true or false depending on whether it is successful or not. This means your <code>@user</code> object is now simply either true or false, which you can't call <code>valid</code> on.</p>\n\n<p>If you want to handle successfully updating / failing to do so, try:</p>\n\n<pre><code>def update\n  @user = User.find(params[:id])\n  if @user.update(user_params)\n    redirect_to \"/users/#{@user.id}\"\n  else\n    flash[:errors] = @user.errors.full_messages\n    redirect_to \"/users/#{@user.id}/edit\" \n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 7785447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V9eKfr_ZbcU/AAAAAAAAAAI/AAAAAAAAKEI/UoSzOzHo6mA/photo.jpg?sz=128", "display_name": "Maur&#237;cio J&#250;nior", "link": "https://stackoverflow.com/users/7785447/maur%c3%adcio-j%c3%banior"}, "is_accepted": true, "score": 0, "last_activity_date": 1575994746, "creation_date": 1575994746, "answer_id": 59271510, "question_id": 59271239, "link": "https://stackoverflow.com/questions/59271239/ruby-on-rails-undefined-method-valid-when-using-update/59271510#59271510", "title": "ruby on rails undefined method &#39;valid&#39; when using update", "body": "<p>ActiveRecord <strong>update(id, attributes)</strong></p>\n\n<p>Updates an object (or multiple objects) <strong>and saves it to the database, if validations pass.</strong> The resulting object is returned whether the object was saved successfully to the database or not.</p>\n\n<p>Then, you can do this checking <code>if @user.update(user_params)</code></p>\n\n<pre><code>def update\n  @user = User.find(params[:id]) //Find user\n  if @user.update(user_params) // Update user if validations pass\n      redirect_to \"/users/#{@user.id}\"\n  else\n      flash[:errors] = @user.errors.full_messages\n      redirect_to \"/users/#{@user.id}/edit\" \n  end\nend\n</code></pre>\n\n<p>Or, you can call the update method directly in your model class, but the first argument must be the user ID</p>\n\n<pre><code>User.update(params[:id], user_params)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 12383992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0fc561f53edb1508f4c372b9068c38?s=128&d=identicon&r=PG&f=1", "display_name": "dbrewster", "link": "https://stackoverflow.com/users/12383992/dbrewster"}, "is_accepted": false, "score": 0, "last_activity_date": 1575997861, "last_edit_date": 1575997861, "creation_date": 1575995870, "answer_id": 59271812, "question_id": 59271239, "link": "https://stackoverflow.com/questions/59271239/ruby-on-rails-undefined-method-valid-when-using-update/59271812#59271812", "title": "ruby on rails undefined method &#39;valid&#39; when using update", "body": "<p>Thank you both for your quick answers. I was replying to tell you that I already tried that and it worked but did not validate. But as two of you told me the same thing, I decided to test it out again and the validations did indeed work this time so thank you (although I definitely have a user with an email of 'asdf' from last time). </p>\n\n<p>Intestering enough, I found another answer although I have no idea why it worked. I added another puts statement after the update and realized my object had been converted to an array so I came up with this other (worse) alternative answer-</p>\n\n<pre><code>def update\n    @user = User.find(params[:id])\n    puts \"#Is this working???!! #{@user}\"\n    @user = User.update(user_params)\n    puts \"#Is this working???!! #{@user}\" ///prints #Is this working???!! [#&lt;User id: 2, name: \"James Dean\", etc..&gt;] \n    if @user[0].valid?\n        redirect_to \"/users/#{@user[0].id}\"\n    else\n        flash[:errors] = @user[0].errors.full_messages\n        redirect_to \"/users/#{@user[0].id}/edit\" \n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 12383992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0fc561f53edb1508f4c372b9068c38?s=128&d=identicon&r=PG&f=1", "display_name": "dbrewster", "link": "https://stackoverflow.com/users/12383992/dbrewster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 59271510, "answer_count": 3, "score": 0, "last_activity_date": 1575997861, "creation_date": 1575993924, "last_edit_date": 1575994446, "question_id": 59271239, "link": "https://stackoverflow.com/questions/59271239/ruby-on-rails-undefined-method-valid-when-using-update", "title": "ruby on rails undefined method &#39;valid&#39; when using update", "body": "<p>I am using the same commands that I previously used in successful projects but now I suddenly can't validate any updates to the object(in this case, User). Everything else works fine but any attempt to check my validations for an update results in this error-</p>\n\n<p>'undefined method `valid?' for # '</p>\n\n<p>It is finding successfully finding the user and if I skip the .valid? statement then it will update, just without checking any of my model validations. I recently switched from SQLite to PostgreSQL, I am not sure if that's giving me the problem. I am new to Ruby but I couldn't find anything on this specific problem.</p>\n\n<p>Please let me know if I should include the entirety of my controller or any of my model but as my create works fine, I feel like all the relative code is just in this little section-</p>\n\n<p>class UsersController &lt; ApplicationController</p>\n\n<pre><code>def update\n    @user = User.find(params[:id])\n    puts \"#Is this working???!! #{@user}\" ///prints #Is this working???!! #&lt;User:0x00000001f24468&gt;\n    @user = User.update(user_params)\n    if @user.valid?\n        redirect_to \"/users/#{@user.id}\"\n    else\n        flash[:errors] = @user.errors.full_messages\n        redirect_to \"/users/#{@user.id}/edit\" \n    end\n  end\n private\n  def user_params\n    params.require(:user).permit(:name, :email, :password)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "twitter-bootstrap-3", "bootstrap-4"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1575996762, "post_id": 59270727, "comment_id": 104751210, "body": "What does the error actually say? The &quot;Whoops, something went wrong&quot; is the rails default error message, when running in production mode. We (the StackOverflow members) cannot possibly diagnose your problem without <i>at least</i> seeing what the error actually says. As a developer, you need to learn how to use the logs."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1576003358, "post_id": 59270727, "comment_id": 104754156, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576001934, "creation_date": 1575992160, "last_edit_date": 1576001934, "question_id": 59270727, "link": "https://stackoverflow.com/questions/59270727/can-i-change-bootstrap-3-to-bootstrap-4-in-my-rails-app", "title": "Can I change bootstrap 3 to bootstrap 4 in my rails app?", "body": "<p>I used bootstrap 3(bootstrap-sass gem) in my project. But I want to change it to a fourth bootstrap (gem 'bootstrap'). I change the line <code>gem 'bootstrap-sass', '~&gt; 3.4.1'</code> to <code>gem 'bootstrap', '~&gt; 4.4.1'</code> and do <code>bundle install</code>. \nWhen I open the site, I get an error <code>We're sorry, but something went wrong.</code>.\nCan bootstrap code 3 work correctly on bootstrap 4?</p>\n\n<p>I changed all the code in the <code>application.html.erb</code> and <code>index.html.erb</code> to simple <code>&lt;p&gt;Hello&lt;/p&gt;</code>\nBut I still get the same error.</p>\n\n<p>logs:</p>\n\n<pre><code>Processing by PostsController#index as HTML\n  Rendering posts/index.html.erb within layouts/application\n  [1m[36mPost Load (0.6ms)[0m  [1m[34mSELECT \"posts\".* FROM \"posts\" ORDER BY created_at DESC[0m\n  \u21b3 app/views/posts/index.html.erb:4\n  [1m[36mAuthor Load (0.7ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 42], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 42]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.4ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 42], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 1.2ms | Allocations: 362)\n  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 42], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 41], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 41]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.3ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 41], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.6ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 41], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 40], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 40]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.7ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 40], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 1.4ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 40], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 39], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 39]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.4ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 39], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.6ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 39], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 38], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 38]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.5ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 38], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 3.4ms | Allocations: 744)\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 38], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 37], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 37]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.5ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 37], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 4.0ms | Allocations: 744)\n  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 37], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 24], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 24]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.4ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 24], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 1.8ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 24], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 23], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 23]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.9ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 23], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.8ms | Allocations: 255)\n  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 23], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 21], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 21]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.2ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 21], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 1.0ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 21], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 20], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 20]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.4ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 20], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.9ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 20], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 13], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 13]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.3ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 13], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.9ms | Allocations: 256)\n  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 13], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.1ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 12], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 12]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.3ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 12], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  Rendered /home/vyacheslav/.rvm/gems/ruby-2.6.3/gems/actiontext-6.0.1/app/views/action_text/content/_layout.html.erb (Duration: 0.6ms | Allocations: 253)\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 12], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mAuthor Load (0.6ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 2], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 3], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 3]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.2ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 3], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 3], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  [1m[36mCACHE Author Load (0.0ms)[0m  [1m[34mSELECT \"authors\".* FROM \"authors\" WHERE \"authors\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 2], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:7\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(DISTINCT \"impressions\".\"ip_address\") FROM \"impressions\" WHERE \"impressions\".\"impressionable_id\" = $1 AND \"impressions\".\"impressionable_type\" = $2[0m  [[\"impressionable_id\", 2], [\"impressionable_type\", \"Post\"]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM \"comments\" WHERE \"comments\".\"post_id\" = $1[0m  [[\"post_id\", 2]]\n  \u21b3 app/views/posts/_post.html.erb:8\n  [1m[36mActionText::RichText Load (0.5ms)[0m  [1m[34mSELECT \"action_text_rich_texts\".* FROM \"action_text_rich_texts\" WHERE \"action_text_rich_texts\".\"record_id\" = $1 AND \"action_text_rich_texts\".\"record_type\" = $2 AND \"action_text_rich_texts\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 2], [\"record_type\", \"Post\"], [\"name\", \"content\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:21\n  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT \"active_storage_attachments\".* FROM \"active_storage_attachments\" WHERE \"active_storage_attachments\".\"record_id\" = $1 AND \"active_storage_attachments\".\"record_type\" = $2 AND \"active_storage_attachments\".\"name\" = $3 LIMIT $4[0m  [[\"record_id\", 2], [\"record_type\", \"Post\"], [\"name\", \"picture\"], [\"LIMIT\", 1]]\n  \u21b3 app/views/posts/_post.html.erb:22\n  Rendered collection of posts/_post.html.erb [14 times] (Duration: 340.3ms | Allocations: 73088)\n  Rendered posts/index.html.erb within layouts/application (Duration: 346.1ms | Allocations: 74231)\nCompleted 500 Internal Server Error in 417ms (ActiveRecord: 33.2ms | Allocations: 141446)\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575994569, "post_id": 59270782, "comment_id": 104750002, "body": "Thanks alot. Do you know why when I try run it in my terminal it seams to break?"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575994685, "post_id": 59270782, "comment_id": 104750071, "body": "@JonathanPein What exception do you get? paste it here."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575995146, "post_id": 59270782, "comment_id": 104750353, "body": "Great! Would you accept the answer @JonathanPein if this was helpful?"}, {"owner": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575998179, "post_id": 59270782, "comment_id": 104751921, "body": "Sure. I am brand new to stack overflow- how can i do that"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1576042998, "post_id": 59270782, "comment_id": 104765584, "body": "@JonathanPein at the beginning of the answer, you&#39;ll see a 0 and two arrows, up and down. Those are marking questions/answers as useful or not. Right underneath is a greyed out checkmark which marks the answer as correct."}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": true, "score": 1, "last_activity_date": 1576046235, "last_edit_date": 1576046235, "creation_date": 1575992347, "answer_id": 59270782, "question_id": 59270444, "link": "https://stackoverflow.com/questions/59270444/how-to-pass-an-array-of-urls-as-a-parameter-for-a-function/59270782#59270782", "title": "How to pass an array of URLs as a parameter for a function", "body": "<p>Since you have an Array after calling <code>fetch_recipe_urls</code>, you can iterate and call <code>scraper</code> for each URL inside:</p>\n\n<pre><code>def scraper(url)\n  html_file = open(url).read\n  html_doc = Nokogiri::HTML(html_file)\n\n  {\n    title: html_doc.css('h1.recipe-title').text.strip,\n    time: html_doc.css('span.recipe-yield-value').text.split(\"servings\")[1],\n    steps: html_doc.css('ol.recipe-steps').text.split.join(\" \"),\n    ingredients: html_doc.css('ul.recipe-ingredients').text.split.join(\" \")\n  }\nend\n\nfetch_recipe_urls.map { |url| scraper(url) }\n</code></pre>\n\n<p>But I'd actually structure the code to be something like:</p>\n\n<pre><code>BASE_URL = 'https://cooking.nytimes.com/'\n\ndef fetch_recipe_urls\n  page = Nokogiri::HTML(open(BASE_URL + 'search?q=easy'))\n  recipes = page.search('//article[@class=\"card recipe-card\"]/@data-url')\n  recipes.map { |recipe_node| BASE_URL + URI.parse(recipe_node.text).to_s }\nend\n\ndef scrape(url)\n  html_doc = Nokogiri::HTML(open(url).read)\n\n  {\n    title: html_doc.css('h1.recipe-title').text.strip,\n    time: html_doc.css('span.recipe-yield-value').text.split(\"servings\")[1],\n    steps: html_doc.css('ol.recipe-steps').text.split.join(\" \"),\n    ingredients: html_doc.css('ul.recipe-ingredients').text.split.join(\" \")\n  }\nend\n\nfetch_recipe_urls.map { |url| scrape(url) }\n</code></pre>\n\n<p>You can also call <code>scrape</code>/<code>scraper</code> inside <code>fetch_recipe_urls</code> but I recommend a single responsability approach. A better idea would be to make this OOP and construct a <code>Scraper</code> class and a <code>CookingRecipe</code> to be more idoiomatic.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576046281, "post_id": 59270865, "comment_id": 104766650, "body": "It helps more if you supply an explanation why this is the preferred solution and explain how it works. We want to educate, not just provide code."}, {"owner": {"reputation": 384, "user_id": 12498105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdda8fd4e6bd1ca3abfbc60e9c77ea04?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/12498105/sam"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576151131, "post_id": 59270865, "comment_id": 104810260, "body": "Thanks for the feedback, @theTinMan. I think you&#39;re right. I threw this up here with no explanation. I&#39;m not sure I think it&#39;s a better way to do it, just the way that occurred to me. It felt like less refactoring. Plus I&#39;m less familiar with Ruby&#39;s mapping."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576185655, "post_id": 59270865, "comment_id": 104827578, "body": "You want to be careful doing <code>css(...).text</code>. <code>css</code>, like <code>search</code> and <code>xpath</code> returns a NodeSet. Using <code>text</code> on a NodeSet concatenates all the text resulting in a mess that&#39;s usually impossible to untangle. See <a href=\"https://stackoverflow.com/q/43594656/128421\">stackoverflow.com/q/43594656/128421</a> for more information."}], "tags": [], "owner": {"reputation": 384, "user_id": 12498105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdda8fd4e6bd1ca3abfbc60e9c77ea04?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/12498105/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1575992645, "creation_date": 1575992645, "answer_id": 59270865, "question_id": 59270444, "link": "https://stackoverflow.com/questions/59270444/how-to-pass-an-array-of-urls-as-a-parameter-for-a-function/59270865#59270865", "title": "How to pass an array of URLs as a parameter for a function", "body": "<p>Or if you want to pass the array to scraper...</p>\n\n<pre><code>def fetch_recipe_urls\n  ...\n  recipes = scraper(recipes_url_array)\nend\n\n\ndef scraper(urls)\n  recipes = []\n  urls.each do |url|\n    html_file = open(url).read\n    html_doc = Nokogiri::HTML(html_file)\n    recipe = {\n      title: html_doc.css('h1.recipe-title').text.strip,\n      time: html_doc.css('span.recipe-yield-value').text.split(\"servings\")[1],\n      steps: html_doc.css('ol.recipe-steps').text.split.join(\" \"),\n      ingredients: html_doc.css('ul.recipe-ingredients').text.split.join(\" \")\n    }\n    recipes &lt;&lt; recipe\n  end\n  recipes\nend\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 59270782, "answer_count": 2, "score": -1, "last_activity_date": 1576046370, "creation_date": 1575991257, "last_edit_date": 1576046370, "question_id": 59270444, "link": "https://stackoverflow.com/questions/59270444/how-to-pass-an-array-of-urls-as-a-parameter-for-a-function", "title": "How to pass an array of URLs as a parameter for a function", "body": "<p>I want to pass an array of URLs returned by my first function into of my second function, however I am unsure of how to do this. </p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\nrequire 'byebug'\n\ndef fetch_recipe_urls\n  base_url = 'https://cooking.nytimes.com'\n  easy_recipe_url = 'https://cooking.nytimes.com/search?q=easy'\n  easy_searchpage = Nokogiri::HTML(open(easy_recipe_url))\n  recipes = easy_searchpage.search('//article[@class=\"card recipe-card\"]/@data-url')\n  recipes_url_array = recipes.map do |recipe|\n    uri = URI.parse(recipe.text)\n    uri.scheme = \"http\"\n    uri.host = \"cooking.nytimes.com\"\n    uri.query = nil\n    uri.to_s\n  end\n\nend\n\ndef scraper(url)\n  html_file = open(url).read\n  html_doc = Nokogiri::HTML(html_file)\n  recipes = Array.new\n  recipe = {\n    title: html_doc.css('h1.recipe-title').text.strip,\n    time: html_doc.css('span.recipe-yield-value').text.split(\"servings\")[1],\n    steps: html_doc.css('ol.recipe-steps').text.split.join(\" \"),\n    ingredients: html_doc.css('ul.recipe-ingredients').text.split.join(\" \")\n  }\n\n  recipes &lt;&lt; recipe\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9543286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c8hETo0xccA/AAAAAAAAAAI/AAAAAAAAAB4/3TdpGa_KI6k/photo.jpg?sz=128", "display_name": "Houssein Abil", "link": "https://stackoverflow.com/users/9543286/houssein-abil"}, "is_accepted": false, "score": 0, "last_activity_date": 1576007621, "creation_date": 1576007621, "answer_id": 59274426, "question_id": 59270335, "link": "https://stackoverflow.com/questions/59270335/admin-to-register-user-to-project/59274426#59274426", "title": "Admin to register User to project", "body": "<p>For now I'm able to do it via the rails console using the charge function</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>user_name.subscriptions.create(project: project_name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9543286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c8hETo0xccA/AAAAAAAAAAI/AAAAAAAAAB4/3TdpGa_KI6k/photo.jpg?sz=128", "display_name": "Houssein Abil", "link": "https://stackoverflow.com/users/9543286/houssein-abil"}, "is_accepted": false, "score": 0, "last_activity_date": 1576343844, "creation_date": 1576343844, "answer_id": 59337409, "question_id": 59270335, "link": "https://stackoverflow.com/questions/59270335/admin-to-register-user-to-project/59337409#59337409", "title": "Admin to register User to project", "body": "<p>Another good option that I've found is to install the gem active_admin. From there I can easily import the Subscription model and register user to a project.</p>\n"}], "owner": {"reputation": 11, "user_id": 9543286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c8hETo0xccA/AAAAAAAAAAI/AAAAAAAAAB4/3TdpGa_KI6k/photo.jpg?sz=128", "display_name": "Houssein Abil", "link": "https://stackoverflow.com/users/9543286/houssein-abil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576343844, "creation_date": 1575990867, "question_id": 59270335, "link": "https://stackoverflow.com/questions/59270335/admin-to-register-user-to-project", "title": "Admin to register User to project", "body": "<p>I have been spending some days trying to build this feature. Can you help me with some guidance please ?</p>\n\n<p>Currently I have different project on my platform. Every user can register for any project for free. But now I want to change that. Only admin can register a user to a specific project. And the user can only see the project the admin has registered him too</p>\n\n<p>This is project controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ProjectController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n      @projects = Project.all.order(:tag)\n  end\n\n  def show\n    @project = Project.find(params[:id])\n    @tasks = @project.tasks.order(:tag)\n\n    @joined = false\n\n    if !current_user.nil? &amp;&amp; !current_user.projects.nil?\n      @joined = current_user.projects.include?(@project)\n    end\n\n    @users = @project.users.order('created_at desc').first(10)\n  end\n\n  def list\n    if !current_user.nil?\n      @projects = current_user.projects\n    end\n  end\nend\n</code></pre>\n\n<p>This is my project Model</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Project &lt; ApplicationRecord\n  extend FriendlyId\n  friendly_id :name, use: [:slugged, :finders]\n\n  has_many :tasks, dependent: :destroy\n\n  has_many :subscriptions\n  has_many :users, through: :subscriptions, dependent: :destroy\n\n  validates :name, presence: true, length: { maximum: 50 }\n  validates :content, presence: true\n\n  has_one_attached :image\n\n  def shortname\n    name.length &gt; 25? name[0..24] + \"...\" : name\n  end\nend\n</code></pre>\n\n<p>This is charge controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ChargesController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def free\n    project = Project.find(params[:project_id])\n    current_user.subscriptions.create(project: project)\n\n    redirect_to project\n  end\nend\n</code></pre>\n\n<p>this is the subscriptions model</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Subscription &lt; ApplicationRecord\n  belongs_to :project\n  belongs_to :user\nend\n</code></pre>\n"}, {"tags": ["ruby", "while-loop"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575992462, "post_id": 59269997, "comment_id": 104748708, "body": "You really should indent your code properly. Then you&#39;d also see the problems quicker. You always decrease the indentation level at an <code>end</code> statement. If two <code>end</code> statements are on the same level of indentation (like you have here in your code) then you probably did something wrong. Also if the indentation is decreasing without an <code>end</code> statement close by (like it does in your code), then you also probably did something wrong."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1575993033, "last_edit_date": 1575993033, "creation_date": 1575992590, "answer_id": 59270839, "question_id": 59269997, "link": "https://stackoverflow.com/questions/59269997/ruby-countdown-loop-learn-lab/59270839#59270839", "title": "Ruby Countdown loop Learn Lab", "body": "<ul>\n<li>There is one <code>end</code> too much. Proper indentation could have told you that.</li>\n<li><code>puts \"HAPPY NEW YEAR!\"</code> should probably be the last line, out of the loop (and probably without the <code>puts</code>).</li>\n<li><code>n</code> should be <code>number</code></li>\n</ul>\n\n<p>The task is in the form of a method which returns a string . <code>puts</code> however returns <code>nil</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 12399197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8ffc4c7b3a9540aad241a91a51d202?s=128&d=identicon&r=PG&f=1", "display_name": "steveks17", "link": "https://stackoverflow.com/users/12399197/steveks17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575993033, "creation_date": 1575989725, "question_id": 59269997, "link": "https://stackoverflow.com/questions/59269997/ruby-countdown-loop-learn-lab", "title": "Ruby Countdown loop Learn Lab", "body": "<p>I am currently working on a lab to create a countdown timer using a while loop and the subtract/assign operator. So far I have the loop counting 10 and breaking to 0 and printing my string \"Happy New Year\". I am not sure why it isn't iterating from 10 down to 0. Link to lab and code below <a href=\"https://learn.co/tracks/online-software-engineering-structured/procedural-ruby/looping/countdown-to-midnight-lab\" rel=\"nofollow noreferrer\">https://learn.co/tracks/online-software-engineering-structured/procedural-ruby/looping/countdown-to-midnight-lab</a></p>\n\n<pre><code>number = 10\n while number &gt; 0\n   puts \"#{number} SECOND(S)!\"\n   number -= 1\n break if n &lt;= 0\n puts \"HAPPY NEW YEAR!\"  \nend\nend\n\n\n</code></pre>\n"}, {"tags": ["ruby", "string", "variables", "methods", "dry"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1575989223, "post_id": 59269758, "comment_id": 104746762, "body": "Please use <a href=\"https://stackoverflow.com/editing-help\">appropriate formatting</a> for your source code."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576003381, "post_id": 59269851, "comment_id": 104754163, "body": "Donald Knuth proved that the song has a complexity of <code>O(log N)</code> in his article <a href=\"https://en.wikipedia.org/wiki/The_Complexity_of_Songs\" rel=\"nofollow noreferrer\">&quot;The Complexity of Songs&quot;</a>. (You are missing &quot; bottles&quot; in one place, though that should be &quot;bottle&quot; when <code>number_of_bottles #=&gt; 2</code>. Also, shouldn&#39;t you write, say, &quot;seven&quot;, rather than &quot;7&quot;, for number_of_bottles &lt; 10`?)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1575989618, "last_edit_date": 1575989618, "creation_date": 1575989288, "answer_id": 59269851, "question_id": 59269758, "link": "https://stackoverflow.com/questions/59269758/ruby-99-bottles-of-beer-on-the-wall-dry-principle/59269851#59269851", "title": "Ruby 99 bottles of beer on the wall, DRY principle", "body": "<p>Normally, you would use <a href=\"https://ruby-doc.org/core/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\"><em>string interpolation</em></a> for this, which will use <code>to_s</code> automatically, if necessary:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts \"#{bottles_of_beer} bottles of beer on the wall #{bottles_of_beer} bottles of beer.\"\n</code></pre>\n\n<p>By the way, your code would normally be implemented more like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts 99.downto(2).map { |number_of_bottles|\n  \"#{number_of_bottles} bottles of beer on the wall #{number_of_bottles} bottles of beer.\nTake one down and pass it around, #{number_of_bottles - 1} of beer on the wall.\"\n}\n\nputs 'Take one down and pass it around, no more bottles of beer on the wall.'\nputs 'No more bottles of beer on the wall, no more bottles of beer.'\nputs 'Go to the store and buy some more, 99 bottles of beer on the wall.'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1575994656, "last_edit_date": 1575994656, "creation_date": 1575993933, "answer_id": 59271240, "question_id": 59269758, "link": "https://stackoverflow.com/questions/59269758/ruby-99-bottles-of-beer-on-the-wall-dry-principle/59271240#59271240", "title": "Ruby 99 bottles of beer on the wall, DRY principle", "body": "<p>Starting from Jorg idea with interpolation but more of a functional approach, just for fun:</p>\n\n<pre><code>def bottles_song(n)\n  if n.zero?\n    puts \"No more bottles of beer on the wall, no more bottles of beer!\\nGo to the store and buy some more, #{n} bottles of beer on the wall.\\n\"\n    return\n  end\n\n  puts \"#{n} #{ n != 1 ? 'bottles' : 'bottle'  } of beer on the wall, #{n} #{ n != 1 ? 'bottles' : 'bottle' } of beer.\\nTake one down, pass it around, #{n != 1 ? (n-1) : 'no more'} #{ n != 1 ? 'bottles' : 'bottle' } of beer on the wall!\\n\"\n\n  bottles_song(n-1)\nend\n</code></pre>\n\n<p>Improved readability but it's taking other methods, not really an improvement :)</p>\n\n<pre><code>def bottles_song(n)\n  if n.zero?\n    puts \"No more bottles of beer on the wall, no more bottles of beer!\\nGo to the store and buy some more, #{n} bottles of beer on the wall.\\n\"\n    return\n  end\n\n  puts_bottles(n)\n  bottles_song(n-1)\nend\n\ndef puts_bottles(n)\n  puts \"#{n} #{ pluralize_bottle(n)  } of beer on the wall, #{n} #{ pluralize_bottle(n) } of beer.\\nTake one down, pass it around, #{n != 1 ? (n-1) : 'no more'} #{ pluralize_bottle(n-1) } of beer on the wall!\\n\"\nend\n\ndef pluralize_bottle(n)\n  return 'bottles' if n != 1\n  'bottle'\nend\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 7244579, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8cf44183038de468e90ce3bd28369ac4?s=128&d=identicon&r=PG&f=1", "display_name": "lmc", "link": "https://stackoverflow.com/users/7244579/lmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575994656, "creation_date": 1575988991, "last_edit_date": 1575989308, "question_id": 59269758, "link": "https://stackoverflow.com/questions/59269758/ruby-99-bottles-of-beer-on-the-wall-dry-principle", "title": "Ruby 99 bottles of beer on the wall, DRY principle", "body": "<p><strong>I was wondering if there is a way for me to avoid writing .to_s method on bottles_of_beer variable? (DRY principle)</strong></p>\n\n<pre><code>bottles_of_beer = 99\n\nwhile bottles_of_beer != 1\n\nbeer_left = bottles_of_beer - 1\n\nbottles_of_beer = beer_left\n\nputs bottles_of_beer.to_s + ' bottles of beer on the wall ' + bottles_of_beer.to_s + ' bottles of beer.'\n\nputs 'Take one down and pass it around, ' + beer_left.to_s + ' of beer on the wall.'\n\nend\n\nif bottles_of_beer == 1\n\nputs bottles_of_beer.to_s + ' bottle of beer on the wall, ' + bottles_of_beer.to_s + ' bottle of beer.'\n\nputs 'Take one down and pass it around, no more bottles of beer on the wall.'\nend\n\nputs 'No more bottles of beer on the wall, no more bottles of beer.'\n\nputs 'Go to the store and buy some more, 99 bottles of beer on the wall.'\n</code></pre>\n\n<p><strong>I was wondering if there is a way for me to avoid writing .to_s method on bottles_of_beer variable?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575988273, "post_id": 59269405, "comment_id": 104746136, "body": "When you run <code>rails new appname</code> rails (since Rails 4) also generates a binstub in the bin directory. You can find <a href=\"https://github.com/rails/rails/blob/b2eb1d1c55a59fee1e6c4cba7030d8ceb524267c/railties/lib/rails/generators/rails/app/templates/bin/rails.tt\" rel=\"nofollow noreferrer\">the template</a> here."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1575988276, "post_id": 59269405, "comment_id": 104746137, "body": "This is <b>Railaties</b> gemspec. But How does it reflects on the Rails?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1575988313, "post_id": 59269405, "comment_id": 104746168, "body": "It doesn&#39;t. The <code>rails</code> command is part of railties, not Rails."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1575988343, "post_id": 59269405, "comment_id": 104746188, "body": "This is amazing."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1575988505, "post_id": 59269405, "comment_id": 104746280, "body": "When you install a gem all the dependencies of the gem are also installed. So running <code>gem install rails</code> also installs railties. <a href=\"https://github.com/rails/rails/blob/836fbf2f866ae7438548e6d6f3b2a86263ed00d9/rails.gemspec#L42\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1575987923, "creation_date": 1575987923, "answer_id": 59269405, "question_id": 59269130, "link": "https://stackoverflow.com/questions/59269130/where-is-the-pattern-of-code-that-creates-ruby-bin-rails-file/59269405#59269405", "title": "Where is the pattern of code that creates ruby/bin/rails file", "body": "<p>The <code>rails</code> command is part of the <em>railties</em> gem, not part of the <em>rails</em> gem. Therefore, you need to look in the <a href=\"https://github.com/rails/rails/blob/master/railties/railties.gemspec#L23-L24\" rel=\"nofollow noreferrer\">railties gemspec</a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>s.bindir      = \"exe\"\ns.executables = [\"rails\"]\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59269405, "answer_count": 1, "score": 1, "last_activity_date": 1575987923, "creation_date": 1575986977, "last_edit_date": 1575987889, "question_id": 59269130, "link": "https://stackoverflow.com/questions/59269130/where-is-the-pattern-of-code-that-creates-ruby-bin-rails-file", "title": "Where is the pattern of code that creates ruby/bin/rails file", "body": "<p>Today I worked with the way a system executes <code>rails</code> command. And discovered this chain</p>\n\n<p><code>ruby_instalation_dir/bin/rails</code> -> <a href=\"https://github.com/rails/rails/blob/master/railties/exe/rails\" rel=\"nofollow noreferrer\">ruby/gems/reilaties/exe/rails</a> -> <a href=\"https://github.com/rails/rails/blob/master/railties/lib/rails/cli.rb\" rel=\"nofollow noreferrer\">ruby/gems/reilaties/lib/rails/cli.rb</a></p>\n\n<p>Last two elements of this chain I able to find in the GitHub.</p>\n\n<p>Now I'm seeking what is the instructions that tell <code>RubyGem</code> how to generate <code>rails</code> file. I did not find any match of <code>railaties</code> in the <a href=\"https://github.com/rails/rails/blob/master/rails.gemspec\" rel=\"nofollow noreferrer\">rails.gemspec</a> file. But some how <code>RubyGem</code> knows that need to call <code>railaties</code> gem. Where does this information stored?</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575993163, "post_id": 59268441, "comment_id": 104749144, "body": "Jonathan, remember to upvote people that help you, and approve their answers if they solved your issue."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576046474, "post_id": 59268441, "comment_id": 104766728, "body": "&quot;<a href=\"https://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist\">Stack Overflow question checklist</a>&quot;  is your friend. Your code is missing the minimum required input data (HTML) necessary to demonstrate the problem in the question itself."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575988580, "post_id": 59269345, "comment_id": 104746344, "body": "Thank you so much- would it be possible to show me an example of what is not an article but a &#39;section&#39;. Thanks"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "edited": false, "score": 0, "creation_date": 1575988980, "post_id": 59269345, "comment_id": 104746615, "body": "@JonathanPein I am not 100% sure what you mean. If you look at the page source you will see 3 of these section tags with  id=&quot;search-paid-post-tablet-ad&quot;, id=&quot;search-paid-post-mobile-landscape-ad&quot;, id=&quot;search-paid-post-mobile-ad&quot;. All of these have the classes &quot;card recipe-card&quot;."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1575989131, "last_edit_date": 1575989131, "creation_date": 1575987746, "answer_id": 59269345, "question_id": 59268441, "link": "https://stackoverflow.com/questions/59268441/need-help-using-nokigiri-when-trying-to-retrieve-a-tags-from-the-nyt-cooking-web/59269345#59269345", "title": "Need help using Nokigiri when trying to retrieve a tags from the NYT cooking website", "body": "<p>If you change your code to just </p>\n\n<pre><code> array = recipes.map {|recipe| {recipe.name =&gt; recipe.attributes('data-url')&amp;.value} } \n</code></pre>\n\n<p>You will notice some of the nodes selected are not 'articles' but rather sections and do not have a data-url attribute (e.g. <code>nil</code>) which is your current issue.</p>\n\n<p>If you would still like to use css use <code>\"article.card.recipe-card\"</code> as your selector to ensure you are only selecting the article tags (which all have a 'data-url' attribute).</p>\n\n<p>However, I generally prefer xpath over css selectors as I feel they are more functional and offer better granularity.</p>\n\n<p>That being the case you can achieve your goal as follows </p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nbase_url = 'https://cooking.nytimes.com'\neasy_recipe_url = 'https://cooking.nytimes.com/search?q=easy'\neasy_searchpage = Nokogiri::HTML(open(easy_recipe_url))\nrecipes = easy_searchpage.search('//article[@class=\"card recipe-card\"]/@data-url')\narray = recipes.map do |recipe|\n  uri = URI.parse(recipe.text)\n  uri.scheme = \"http\"\n  uri.host = \"cooking.nytimes.com\"\n  uri.query = \"easy\"\n  uri.to_s\nend \n</code></pre>\n\n<p>The XPath will select all the article tags (<code>//article</code>) with a class of \"card recipe-card\" (<code>[@class=\"card recipe-card\"]</code>) and return just the data-url attribute (<code>/@data-url</code>). This allows you to iterate over just the data-url attributes rather than all the nodes returned with your current selector.</p>\n"}], "owner": {"reputation": 49, "user_id": 12511878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b38f66e62debf5e896796f2909a4ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Pein", "link": "https://stackoverflow.com/users/12511878/jonathan-pein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "closed_date": 1576073754, "answer_count": 1, "score": 0, "last_activity_date": 1575989131, "creation_date": 1575984880, "question_id": 59268441, "link": "https://stackoverflow.com/questions/59268441/need-help-using-nokigiri-when-trying-to-retrieve-a-tags-from-the-nyt-cooking-web", "closed_reason": "Needs details or clarity", "title": "Need help using Nokigiri when trying to retrieve a tags from the NYT cooking website", "body": "<pre><code>def fetch_recipe_urls\n  base_url = 'https://cooking.nytimes.com'\n  easy_recipe_url = 'https://cooking.nytimes.com/search?q=easy'\n  easy_searchpage = Nokogiri::HTML(open(easy_recipe_url).read)\n  recipes = easy_searchpage.search('.card.recipe-card')\n  array = recipes.map do |recipe|\n    uri = URI.parse(recipe.attributes[\"data-url\"].value)\n    uri.scheme = \"http\"\n    uri.host = \"cooking.nytimes.com\"\n    uri.query = \"easy\"\n    uri.to_s\n  end\n\nend\n</code></pre>\n\n<p>I am trying to scrape the urls in this html attached. However it is saying that there are is a undefined method `value' for nil:NilClass. I have provided a link to the website below.</p>\n\n<p><a href=\"https://cooking.nytimes.com/search?q=easy\" rel=\"nofollow noreferrer\">https://cooking.nytimes.com/search?q=easy</a></p>\n"}, {"tags": ["ruby", "kubernetes", "redis", "redmine"], "comments": [{"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "edited": false, "score": 1, "creation_date": 1576045817, "post_id": 59268404, "comment_id": 104766485, "body": "It depends upon version of Redmine (because of underlaying rails). Try following this tutorial: <a href=\"https://medium.com/@kirill_shevch/configuration-cache-and-rails-session-store-with-redis-b3ce6f64d1fc\" rel=\"nofollow noreferrer\">medium.com/@kirill_shevch/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1576094485, "creation_date": 1576094485, "answer_id": 59293212, "question_id": 59268404, "link": "https://stackoverflow.com/questions/59268404/running-redis-as-an-external-cache-server-for-redmine/59293212#59293212", "title": "Running Redis as an external cache server for Redmine", "body": "<p>Redmine doesn't store any session data in its cache. Thus, configuring your two Redmines to use the same cache won't help.</p>\n\n<p>By default Redmine stores the user sessions in a signed cookie sent to the user's browser without any server-local session storage. Since the session cookie is signed with a private key, you need to make sure that all installations using the same sessions also use the same application secret (and code and database).</p>\n\n<p>Depending on how you have setup your Redmine, this secret is typically either stored in <code>config/initializers/secret_token.rb</code> or <code>config/secrets.yml</code> (relative to your Redmine installation directory). Make sure that you use the same secret here on both your Redmines.</p>\n"}], "owner": {"reputation": 199, "user_id": 12417145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464dcc69612eb6a3ebe745dc4e4a105c?s=128&d=identicon&r=PG&f=1", "display_name": "user12417145", "link": "https://stackoverflow.com/users/12417145/user12417145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 59293212, "answer_count": 1, "score": 1, "last_activity_date": 1576094485, "creation_date": 1575984745, "last_edit_date": 1575999108, "question_id": 59268404, "link": "https://stackoverflow.com/questions/59268404/running-redis-as-an-external-cache-server-for-redmine", "title": "Running Redis as an external cache server for Redmine", "body": "<p>I have 2 pods of Redmine deployed with Kubernetes the problem due to this the issue of session management is happening so some users are unable to login due to this so I came up with the idea to store the cache of both the pods in Redis server with Kubernetes(Centralized).<br>\nI am giving the below configuration inside the Redmine pod in location.\n /opt/bitnami/redmine/config/application.rb</p>\n\n<p>configuration</p>\n\n<pre><code>config.cache_store = :redis_store, {\n  host: \"redis-headless.redis-namespace\",  #service name of redis \n  port: 6379,\n  db: 0,\n  password: \"xyz\",\n  namespace: \"redis-namespace\"\n}, {\n  expires_in: 90.minutes\n}\n</code></pre>\n\n<p>But this is not working as supposed .Need help where I am doing wrong.</p>\n"}, {"tags": ["ios", "ruby", "cocoapods", "podspec"], "comments": [{"owner": {"reputation": 29472, "user_id": 4253437, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bcBpJ.jpg?s=128&g=1", "display_name": "CodeBender", "link": "https://stackoverflow.com/users/4253437/codebender"}, "edited": false, "score": 0, "creation_date": 1575998844, "post_id": 59268321, "comment_id": 104752211, "body": "Probably because of an unsupported architecture: <code>missing required architecture i386 in file</code> If you can access the source, you can probably re-compile it to support i386 and then it will probably work (assuming no complications)"}, {"owner": {"reputation": 2599, "user_id": 421797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dc46813813af061cc28b442faaefce0d?s=128&d=identicon&r=PG", "display_name": "horseshoe7", "link": "https://stackoverflow.com/users/421797/horseshoe7"}, "reply_to_user": {"reputation": 29472, "user_id": 4253437, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bcBpJ.jpg?s=128&g=1", "display_name": "CodeBender", "link": "https://stackoverflow.com/users/4253437/codebender"}, "edited": false, "score": 0, "creation_date": 1576137137, "post_id": 59268321, "comment_id": 104803023, "body": "I have no access to the vendored_framework source so I&#39;m not sure what I need to do."}], "owner": {"reputation": 2599, "user_id": 421797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dc46813813af061cc28b442faaefce0d?s=128&d=identicon&r=PG", "display_name": "horseshoe7", "link": "https://stackoverflow.com/users/421797/horseshoe7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575984462, "creation_date": 1575984462, "question_id": 59268321, "link": "https://stackoverflow.com/questions/59268321/why-is-cocoapods-pod-spec-lint-failing-while-trying-to-build-code-when-my-pods", "title": "Why is Cocoapods pod spec lint (FAILING while) trying to build code when my podspec is only there to package a vendored_framework?", "body": "<p>So I <a href=\"https://github.com/horseshoe7/BRPtouchPrinterKit\" rel=\"nofollow noreferrer\">forked this repo to here</a> because the original didn't push its podspec anywhere.</p>\n\n<p>And now I know why that developer didn't push it... it doesn't pass <code>pod spec lint ...</code></p>\n\n<p>And why doesn't it pass pod spec lint... ?</p>\n\n<p>The .podspec is aiming to wrap a vendored_framework into a pod so it brings all dependency management under one system, hopefully thereby minimizing build-time problems.</p>\n\n<p>The issue is, if you look at this podspec, there is no source.  No Xcode project.  Just a vendored_framework and some resources.</p>\n\n<p>So I don't understand why I got this when running <code>pod spec lint --verbose BRPtouchPrinterKit.podspec</code></p>\n\n<p>I omitted <strong>a lot</strong> of console spew here.  Basically cloning the above repo and running the pod spec lint command will reproduce the issue.</p>\n\n<pre><code>    The following build commands failed:\n        Ld /Users/mhp-oconnor/Library/Developer/Xcode/DerivedData/App-hjbzfnrwnwjtowbhgukgevlhcnks/Build/Intermediates.noindex/App.build/Release-iphonesimulator/App.build/Objects-normal/x86_64/Binary/App normal x86_64\n    (1 failure)\n   Testing with `xcodebuild`. \n -&gt; BRPtouchPrinterKit (3.1.9)\n    - ERROR | [iOS] xcodebuild: Returned an unsuccessful exit code.\n    - NOTE  | xcodebuild:  note: Using new build system\n    - NOTE  | [iOS] xcodebuild:  note: Planning build\n    - NOTE  | [iOS] xcodebuild:  note: Constructing build description\n    - NOTE  | [iOS] xcodebuild:  clang: error: linker command failed with exit code 1 (use -v to see invocation)\n    - NOTE  | [iOS] xcodebuild:  ld: warning: ignoring file BRPtouchPrinterKit/Frameworks/BRPtouchPrinterKit.framework/BRPtouchPrinterKit, missing required architecture i386 in file BRPtouchPrinterKit/Frameworks/BRPtouchPrinterKit.framework/BRPtouchPrinterKit (3 slices)\n    - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (in target 'App' from project 'App')\n\nAnalyzed 1 podspec.\n\n[!] The spec did not pass validation, due to 1 error.\n\n/usr/local/lib/ruby/gems/2.5.0/gems/cocoapods-1.8.4/lib/cocoapods/command/spec/lint.rb:95:in `run'\n/usr/local/lib/ruby/gems/2.5.0/gems/claide-1.0.2/lib/claide/command.rb:334:in `run'\n/usr/local/lib/ruby/gems/2.5.0/gems/cocoapods-1.8.4/lib/cocoapods/command.rb:52:in `run'\n/usr/local/lib/ruby/gems/2.5.0/gems/cocoapods-1.8.4/bin/pod:55:in `&lt;top (required)&gt;'\n/usr/local/bin/pod:23:in `load'\n/usr/local/bin/pod:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan"], "comments": [{"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1575984602, "post_id": 59268008, "comment_id": 104743970, "body": "There is nothing wrong with your first statement. Are you sure <code>user</code> is being set correctly?"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575984704, "post_id": 59268345, "comment_id": 104744026, "body": "I would say you&#39;re butting up against the limitations of CanCanCan&#39;s DSL here though. When stuff starts getting even slightly complex it turns into a real mess. I abandoned it for Pundit years ago."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1575984550, "creation_date": 1575984550, "answer_id": 59268345, "question_id": 59268008, "link": "https://stackoverflow.com/questions/59268008/cancan-multiple-abilities-with-and-operator/59268345#59268345", "title": "Cancan: Multiple abilities with AND operator", "body": "<p>You can pass a scope as the third argument to <code>can</code>:</p>\n\n<pre><code>can :read, Bike, Bike.joins(:product).where(products: { created_by: user, company_id: user.company_id })\n</code></pre>\n\n<p>See <a href=\"https://github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities\" rel=\"nofollow noreferrer\">defining abilities</a>.</p>\n"}], "owner": {"reputation": 161, "user_id": 6670741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b899ffc6dc94e916fb0b8910bcd2e064?s=128&d=identicon&r=PG&f=1", "display_name": "Matey Johnson", "link": "https://stackoverflow.com/users/6670741/matey-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575984550, "creation_date": 1575983442, "question_id": 59268008, "link": "https://stackoverflow.com/questions/59268008/cancan-multiple-abilities-with-and-operator", "title": "Cancan: Multiple abilities with AND operator", "body": "<p>I have the following statement in my user_ability.cs class</p>\n\n<pre><code>can :read, Bike, :product =&gt; {:created_by =&gt; user.id, :company_id =&gt; user.company_id }\n</code></pre>\n\n<p>But this pops up an error: <strong>undefined \"table_name\" from Nil:class</strong> due to following statement that is under \"/cancan/lib/cancan/model_adapters/active_record_adapter.rb\"</p>\n\n<pre><code>name = model_class.reflect_on_association(name).table_name.to_sym\n</code></pre>\n\n<p>Now if we change the ability code as follows, application runs but <strong><em>OR</em></strong> is applied to the executed query.</p>\n\n<pre><code>can :read, Bike, :product =&gt; {:created_by =&gt; user.id}\ncan :read, Bike, :product =&gt; {:company_id =&gt; user.company_id }\n</code></pre>\n\n<p>And we want <strong>AND</strong> condition to work between <em>created_by</em> and <em>company_id</em></p>\n\n<ul>\n<li>Ruby version: 2.5.5p157 </li>\n<li>Rails version: 4.2.11.1 </li>\n<li>Cancan gem\nversion: 1.6.10</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1575983262, "post_id": 59267912, "comment_id": 104743243, "body": "Please give your question a title that indicates the content of your question. Your current title is not useful."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1575983338, "post_id": 59267912, "comment_id": 104743275, "body": "If you want help you need to post the exact command or line of code that is throwing the error"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1575983364, "post_id": 59267912, "comment_id": 104743296, "body": "What do you mean by &#39;when you run it&#39;?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 2, "creation_date": 1575983413, "post_id": 59267912, "comment_id": 104743323, "body": "I&#39;m guessing that you&#39;re calling <code>something.retrieve</code> without supplying the ID of what you want to retrieve"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575990039, "post_id": 59267912, "comment_id": 104747313, "body": "Please post the full error message including the full stack trace."}, {"owner": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1575990232, "post_id": 59267912, "comment_id": 104747428, "body": "Id is an internal field, see this request!. Even if I pass a fixed value the query returns with error..  <a href=\"http://dummy.restapiexample.com/api/v1/employee/1\" rel=\"nofollow noreferrer\">dummy.restapiexample.com/api/v1/employee/1</a>.  If I pass the fixed value I will have the same error!!     def retrieve(id)   self.class.get(&quot;/employees/#{&quot;147606&quot;}&quot;) end    See that!!   wrong number of arguments (given 0, expected 1) (ArgumentError)       ./features/pages/Empregados.rb:26:in `retrieve&#39;"}, {"owner": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1575990840, "post_id": 59267912, "comment_id": 104747754, "body": "I created a class CRUD  and from this class, II create a request and then need to get the id of this request automatically through a query.   #Consult employee Quando(&quot;&#233; enviada a requisi&#231;&#227;o para consultar o empregado&quot;) do   _manter_user.create   expect(_manter_user.create.code).to eq (200)    puts _manter_user.create.body    end                                                                                     Ent&#227;o(&quot;posso visualizar as informa&#231;&#245;es retornadas&quot;) do    expect(@manter_user.retrieve.code).to eq (200)    puts _manter_user.create.body"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1576006665, "post_id": 59267912, "comment_id": 104755565, "body": "Good work, @Vasilisa!"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576006816, "post_id": 59267912, "comment_id": 104755620, "body": "Thank you @CarySwoveland! Really appreciate your compliment"}], "answers": [{"comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1576036285, "post_id": 59274003, "comment_id": 104763995, "body": "@saulik I can&#39;t reproduce, your code works for me. One more time - you&#39;ve created 4 employees in the code from comment - do you really want it? If no, use manter_user.create only once and store the result in variable"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1576086214, "post_id": 59274003, "comment_id": 104787434, "body": "@saulik thank you :) If someday you&#39;ll be in Siberia - welcome! :)"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1576130862, "post_id": 59274003, "comment_id": 104800798, "body": "@saulik you should use <code>id</code> the same way as in <code>retrieve</code> and pass update parameters in <code>body</code>, like in <code>create</code>"}, {"owner": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1576161957, "post_id": 59274003, "comment_id": 104816380, "body": "sorry, but as I pass the field I want to update? .. Sorry for the simple questions but I am starting now in Ruby.                                                                   def update(id)   self.class.put(&quot;/update/#{ id }&quot;) end  my code: response = manter_user.create expect(response.code).to eq (200) puts response.body id = JSON.parse(@response.body[&#39;name&#39;])                                                                         puts manter_user.update(nome)                                                                        puts manter_user.update(id)"}, {"owner": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "edited": false, "score": 0, "creation_date": 1576162095, "post_id": 59274003, "comment_id": 104816474, "body": "I want to upgrade from gem faker name or gem fake.                                            def create    nome    = Faker::Name.first_name   salario  = Faker::Number.decimal(l_digits: 4, r_digits: 2)   idade   = Faker::Number.number(digits: 2)   body = {name: nome, salary: salario, age: idade }.to_json"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": false, "score": 3, "last_activity_date": 1576005603, "creation_date": 1576005603, "answer_id": 59274003, "question_id": 59267912, "link": "https://stackoverflow.com/questions/59267912/cant-retrieve-record-from-api-in-specs/59274003#59274003", "title": "Can&#39;t retrieve record from API in specs", "body": "<p>Problem is in multiple call to <code>create</code>, you need to store result in a variable. Also you need to retrieve instance right after creation - order of specs can change and you can get in situation when you try to retrieve before creation</p>\n\n<pre><code>Some spanish? text goes here do \n  created = manter_user.create \n  expect(created.code).to eq (200) \n  puts created.body \n\n  id = JSON.parse(created)['id']\n  retrieved = manter_user.retrieve(id)\n\n  expect(retrieved.code).to eq (200)\n  puts retrieved.body\nend    \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11686892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyHni.jpg?s=128&g=1", "display_name": "saulik", "link": "https://stackoverflow.com/users/11686892/saulik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1576005603, "creation_date": 1575983142, "last_edit_date": 1576005163, "question_id": 59267912, "link": "https://stackoverflow.com/questions/59267912/cant-retrieve-record-from-api-in-specs", "title": "Can&#39;t retrieve record from API in specs", "body": "<p>When I run <code>retrieve</code> the following error is displayed: </p>\n\n<blockquote>\n  <p>Wrong number of arguments (given 0, expected 1) (ArgumentError)</p>\n</blockquote>\n\n<p>One person here tried to help me but I think I'm being very inconvenient with my questions, it's because I really can't solve it.\nI just need this to close this problem.</p>\n\n<pre><code>class Crud\n  include HTTParty\n  base_uri 'http://dummy.restapiexample.com/api/v1'\n\n  def create \n    nome    = Faker::Name.first_name\n    salario = Faker::Number.decimal(l_digits: 4, r_digits: 2)\n    idade   = Faker::Number.number(digits: 2)\n    #note, you should pass body as JSON string\n    body = { name: nome, salary: salario, age: idade }.to_json\n\n    headers = {\n      'Accept' =&gt; 'application/vnd.tasksmanager.v2',\n      'Content-Type' =&gt; 'application/json'\n    }\n\n    self.class.post('/create', body: body, headers: headers) \n  end\n\n  def retrieve(id)\n    self.class.get(\"/employee/#{ id }\")\n  end \nend\n</code></pre>\n\n<p>I'm trying to use it in specs</p>\n\n<pre><code>Consult employee Quando(\"\u00e9 enviada a requisi\u00e7\u00e3o para consultar o empregado\") do \n  _manter_user.create \n  expect(_manter_user.create.code).to eq (200) \n  puts _manter_user.create.body \nend\n\nEnt\u00e3o(\"posso visualizar as informa\u00e7\u00f5es retornadas\") do \n  expect(@manter_user.retrieve.code).to eq (200) \n  puts _manter_user.create.body \nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1575982852, "post_id": 59267208, "comment_id": 104743037, "body": "This question is very broad with lots of sub-questions, most of which could be answered by just running <code>rails</code> and tracing the execution. For starters, here&#39;s the code of <code>rails</code>: <a href=\"https://github.com/rails/rails/blob/master/railties/exe/rails\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/master/railties/exe/rails</a>"}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575983717, "post_id": 59267208, "comment_id": 104743491, "body": "Yes,  J&#246;rg, this is the real start! Thank you.  Meanwhile I been reading <code>$Ruby&#47;bin&#47;rails</code> file and found this line <code>Gem.activate_bin_path(&#39;railties&#39;, &#39;rails&#39;, version)</code> <i>railities</i> is a real starting point."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575986561, "post_id": 59267208, "comment_id": 104745140, "body": "J&#246;rg, I already discover a chain <code>ruby&#47;bin&#47;rails -&gt; ruby&#47;gems&#47;reilaties&#47;exe&#47;rails -&gt; ruby&#47;gems&#47;reilaties&#47;lib&#47;rails&#47;cli.rb</code>. If two files at the end could be found in rails repo, how do the first one generated?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575986951, "post_id": 59267208, "comment_id": 104745364, "body": "That&#39;s just normal RubyGems installation procedure."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575987063, "post_id": 59267208, "comment_id": 104745430, "body": "Yes, but this instalation procedure must know that need to reffer to the Railaites, not ActiveRecored gem. And this information is stored somewhere."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575987105, "post_id": 59267208, "comment_id": 104745449, "body": "RubyGems information is stored in the gem spec."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575987532, "post_id": 59267208, "comment_id": 104745709, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/203988/discussion-between-dmitry-dmitriev-and-jorg-w-mittag\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1575984031, "post_id": 59267926, "comment_id": 104743650, "body": "Looks like this is really outdated information. Nevertheless I really appreciate your answer. Starting point of this journey is an Gems folder of the system. And In this folder at the <code>bin&#47;rails</code> placed a call to the RailTies gem. And Railties gem already implement the work I asked about."}, {"owner": {"reputation": 344, "user_id": 1306709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19e85eb7621b90a4ef6bde85446094c8?s=128&d=identicon&r=PG", "display_name": "Borys Pylhun", "link": "https://stackoverflow.com/users/1306709/borys-pylhun"}, "reply_to_user": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1575984427, "post_id": 59267926, "comment_id": 104743873, "body": "Oh, I see now. This is not outdated information. I think I just misunderstood what exactly you needed and answered a little different question lol. Good that you&#39;ve figured it out."}], "tags": [], "owner": {"reputation": 344, "user_id": 1306709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19e85eb7621b90a4ef6bde85446094c8?s=128&d=identicon&r=PG", "display_name": "Borys Pylhun", "link": "https://stackoverflow.com/users/1306709/borys-pylhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1575983200, "creation_date": 1575983200, "answer_id": 59267926, "question_id": 59267208, "link": "https://stackoverflow.com/questions/59267208/how-do-the-rails-executed-in-bash/59267926#59267926", "title": "How do the rails executed in bash", "body": "<p>File <code>rails</code> is placed in <code>&lt;your_application_root&gt;/bin/</code> folder. \n<code>bin/rails</code> contains someting like this:</p>\n\n<pre><code>#!/usr/bin/env ruby\nAPP_PATH = File.expand_path('../config/application', __dir__)\nrequire_relative '../config/boot'\nrequire 'rails/commands'\n</code></pre>\n\n<p>Although, this ^ might be a little outdated, this is just what I found by quick search as an example. Better you check the file in your own application with your version of rails.</p>\n\n<p>Here is some useful information about rails console utilities: \n<a href=\"https://edgeguides.rubyonrails.org/command_line.html\" rel=\"nofollow noreferrer\">https://edgeguides.rubyonrails.org/command_line.html</a></p>\n\n<p>Also, from my experience, it's good to have something like RubyMine IDE for learning Ruby on Rails: <a href=\"https://www.jetbrains.com/ruby/download/\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/ruby/download/</a>\nIt's not free, but there is a 30-days trial which might be enough for understanding most of the basics of the framework. \nThe main advantage of this IDE is that it has very good integration with ruby version managers such as RVM, where you can add ruby sources and rails gems to the search indexing and easily navigate to methods/files/constants/etc. definitions right from the code. This is much faster than searching/opening a particular file on GitHub.</p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "is_accepted": false, "score": 0, "last_activity_date": 1575989013, "last_edit_date": 1575989013, "creation_date": 1575984909, "answer_id": 59268449, "question_id": 59267208, "link": "https://stackoverflow.com/questions/59267208/how-do-the-rails-executed-in-bash/59268449#59268449", "title": "How do the rails executed in bash", "body": "<p>How to the <code>rails</code> works from the Linux shell point of view? </p>\n\n<p><strong>\"rails\" command is a part of the Railties gem</strong></p>\n\n<ul>\n<li>Start <code>rails</code> file that stored at the <code>ruby_instalation_dir/bin</code>. This file is generated by <a href=\"https://github.com/rails/rails/blob/master/railties/railties.gemspec#L23-L24\" rel=\"nofollow noreferrer\">RubyGems</a> from the <strong>Railties</strong> gemsec file. (<a href=\"https://stackoverflow.com/a/59269405/8574922\">https://stackoverflow.com/a/59269405/8574922</a>)</li>\n<li><code>rails</code> file is a Ruby file that calls <a href=\"https://github.com/rails/rails/blob/master/railties/exe/rails\" rel=\"nofollow noreferrer\">railaties/rails</a> file</li>\n<li>and the <code>railaties/rails</code> file requires <a href=\"https://github.com/rails/rails/blob/master/railties/lib/rails/cli.rb\" rel=\"nofollow noreferrer\">rails/cli.rb</a></li>\n</ul>\n\n<p>Yes <code>rails</code> is an executive file that stores in <code>ruby_destination/bin</code> folder. This is a Ruby file generated by RubyGems.</p>\n\n<p>And this files calls for another Gem called <a href=\"https://github.com/rails/rails/tree/master/railties\" rel=\"nofollow noreferrer\">Railties</a> that can be installed in the same <code>bin</code> folder, or in the <code>Gems</code> folder, that can be found by a <code>bundle show --paths</code> command. Here it is <a href=\"https://github.com/rails/rails/blob/master/railties/exe/rails\" rel=\"nofollow noreferrer\">this executable</a> file that is called from <code>rails</code>.</p>\n\n<p>So the journey begins from the <code>require \"rails/cli\"</code> of the <a href=\"https://github.com/rails/rails/tree/master/railties\" rel=\"nofollow noreferrer\">Railties</a>. </p>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575989013, "creation_date": 1575980768, "question_id": 59267208, "link": "https://stackoverflow.com/questions/59267208/how-do-the-rails-executed-in-bash", "title": "How do the rails executed in bash", "body": "<p>Today I wanted to get how do the <code>rails db:drop</code> works. How did I thought: <code>rails</code> is a name of executive file that executed by Linux system when I type <code>rails db:drop</code> and <code>db:drop</code> is an argument for this file.</p>\n\n<p>This file could be created in different languages, it even could be a binary. But I suppose it is created by a Ruby. So I went to the rails repo. And start reading the code of <code>rails.gemspec</code> but did not find any hints about how do the system parses cli requests. </p>\n\n<p>As I suppose the parsing of rails arguments is work of the <code>rake</code>. But where is the code that points that <code>rake</code> should be started when we call <code>rails</code>?</p>\n\n<p>And what is the brief structure of <code>rails</code> execution?</p>\n\n<p>There must be a <code>rails</code> file, in some directory that mentioned in the <code>PATH</code> variable. And system seek for this <code>rails</code> file, select appropriate interpreter ans start to execute code in this file.  Where is the code that create this <code>rails</code> file, and what is the code of this file itself?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1575976417, "post_id": 59264486, "comment_id": 104739456, "body": "I&#39;d say the main use for block arguments is passing the block to other methods. IMO that&#39;s the cleanest approach. However, you have to write <code>inner(&#39;haha&#39;, &amp;block)</code>, i.e. with <code>&amp;</code>."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575977781, "post_id": 59264486, "comment_id": 104740165, "body": "You are right. I had it correctly in my irb session, but picked the wrong line when pasting it into my question."}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "is_accepted": true, "score": 1, "last_activity_date": 1576352868, "creation_date": 1576352868, "answer_id": 59338575, "question_id": 59264486, "link": "https://stackoverflow.com/questions/59264486/calling-iterator-from-iterator-binding-a-parameter/59338575#59338575", "title": "Calling iterator from iterator, binding a parameter", "body": "<p>This works fine</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def inner(p)\n  %w(a b c d).each {|x| yield(\"#{p} inner #{x}\")}\nend\n\ndef outer(&amp;block)\n  inner('haha', &amp;block)\nend\n\ndef outer(&amp;block)\n  inner('haha', &amp;block)\nend\n\nouter {|haha_and_item| puts haha_and_item}\n# haha inner a\n# haha inner b\n# haha inner c\n# haha inner d\n\n</code></pre>\n\n<p><code>outer</code> seems to be just a wrapper method with the only purpose of storing the string <code>haha</code>. Then it accepts a block or a <code>Proc</code> that is going to be executed accordingly to the <code>inner</code> method definition.</p>\n\n<p>If you want to use a method your examples are the only available syntax that I'm aware of. But it seems you are looking for a <code>closure</code> maybe a <a href=\"https://ruby-doc.org/core-2.6.5/Proc.html#method-i-curry\" rel=\"nofollow noreferrer\">carried one</a>.</p>\n\n<p>Here is an example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def inner(parameter)\n  inner_closure = -&gt; (runable) do\n     %w(a b c d).each { |x| runable.(\"#{parameter} inner #{x}\") }\n  end\n  inner_closure.curry\nend\n\nparameter = 'ahah'\nrunable = proc {|haha_and_item| puts haha_and_item}\nouter = inner(parameter)\nouter[runable] \n\nouter = inner('closure')\nouter[runable]\n# ahah inner a\n# ahah inner b\n# ahah inner c\n# ahah inner d\n# closure inner a\n# closure inner b\n# closure inner c\n# closure inner d\n</code></pre>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59338575, "answer_count": 1, "score": 0, "last_activity_date": 1576352868, "creation_date": 1575971715, "last_edit_date": 1575977855, "question_id": 59264486, "link": "https://stackoverflow.com/questions/59264486/calling-iterator-from-iterator-binding-a-parameter", "title": "Calling iterator from iterator, binding a parameter", "body": "<p>For the sake of simplicity, let's assume the following method:</p>\n\n<pre><code>def inner(p)\n  %w(a b c d).each {|x| yield(\"#{p} inner #{x}\")}\nend\n</code></pre>\n\n<p>I would like a function <code>outer</code>, which is identical to <code>inner</code>, but where the parameter <code>p</code> is bound to a certain value, such as</p>\n\n<pre><code>def outer\n  inner('haha') // This is NOT correct. It's just to give you an idea.\nend\n</code></pre>\n\n<p>This does not work: If I do a </p>\n\n<pre><code>outer {|q| puts q}\n</code></pre>\n\n<p>I get a <em>LocalJumpError: yield called out of block</em>.</p>\n\n<p>One workaround is obviously:</p>\n\n<pre><code>def outer\n  inner('haha') { |x| yield(x) }\nend\n</code></pre>\n\n<p>Not very elegant, because one <em>yield</em> just yields the next <em>yield</em>. A more concise way would be to pass the block around explicitly:</p>\n\n<pre><code>def inner(p, &amp;block)\n  %w(a b c d).each {|x| block.yield(\"#{p} inner #{x}\")}\nend\n\ndef outer(&amp;block)\n  inner('haha', &amp;block)\nend\n</code></pre>\n\n<p>While one might argue that writing the block argument explicitly is the better solution anyway, because we can see from the method signature already that a block is expected, I still wonder whether there is a clean way to achieve my goal without having a <code>&amp;block</code> parameter.</p>\n\n<p><em>UPDATE</em>: Fix missing <code>&amp;</code> in code.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575985431, "post_id": 59263254, "comment_id": 104744498, "body": "Have you read <a href=\"https://apidock.com/rails/ActionView/Helpers/FormBuilder/select\" rel=\"nofollow noreferrer\">the documentation</a> for using the <code>select</code> form builder method?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575985565, "post_id": 59263254, "comment_id": 104744569, "body": "You presumably want to do something like <code>rf.select :reviews_content, @reviews.collect { |r| [ r.name, r.id ] }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": false, "score": 0, "last_activity_date": 1576058892, "creation_date": 1576058892, "answer_id": 59283293, "question_id": 59263254, "link": "https://stackoverflow.com/questions/59263254/ruby-on-rails-unable-to-display-content-of-the-instance-variables/59283293#59283293", "title": "Ruby on rails, unable to display content of the instance variables", "body": "<p>Your <code>@reviews</code> is a collection of objects, and this isn't displayed in the way you want it to be. The <code>select</code> tag that you are using, requires a two-dimensional array, for example</p>\n\n<pre><code>@reviews.pluck(:title, :id) =&gt; [[\"Sample Review\", 1], \"Another Review\", 2]]\n</code></pre>\n\n<p>This way, the first item of each array (\"title\") will be displayed in the list, where as the second item (\"id\") will be the value that's being submitted.</p>\n"}], "owner": {"reputation": 1, "user_id": 12510307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad4e17f2feda6f3abf9a0478e91d3e0?s=128&d=identicon&r=PG&f=1", "display_name": "user12510307", "link": "https://stackoverflow.com/users/12510307/user12510307"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576058892, "creation_date": 1575967576, "question_id": 59263254, "link": "https://stackoverflow.com/questions/59263254/ruby-on-rails-unable-to-display-content-of-the-instance-variables", "title": "Ruby on rails, unable to display content of the instance variables", "body": "<p>I am trying to create the application for course reviews at certain universities. Currently, I have two models which is courses and reviews. I am trying to display the content of the reviews table in courses views but it only displays the address of the content and cannot display actual values. Any help would be appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7TgIT.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Below is the controller, models and views.</p>\n\n<pre><code>course/show.html.erb\n\n&lt;div class = \"col-md-7\"&gt;\n    &lt;h2&gt;Tips from other students&lt;/h2&gt;\n    &lt;%= form_with( model: @course, local: true, class: \"col-md-7\") do |f| %&gt;\n        &lt;% f.fields_for :reviews do |rf| %&gt;\n            &lt;ul class=\"nav nav-tabs nav-stacked col-md-12 col-lg-12 col-sm-12 well ng-scope\" ng-repeat=\"tip in $ctrl.displayCourse.tips track by $index\"&gt;\n                &lt;li class=\"ng-binding\"&gt;&lt;%= rf.select :reviews_content, @reviews %&gt;&lt;/span&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre><code>/course_controller.rb\nclass CoursesController &lt; ApplicationController\n    before_action :set_course, only: [:edit, :update, :show, :destroy]\n\n    def index\n        @courses = Course.all\n        @reviews = Review.all\n    end\n\n    def new\n        @course = Course.new\n        @course.reviews.build\n    end\n\n    def create\n        @course = Course.new(course_params)\n        @course.save\n        if @course.save\n            flash[:success] = \"New course has created\"\n            redirect_to course_path(@course)\n        else \n            render 'new'\n        end\n    end\n\n    def show\n        @reviews = Review.where(course_id: params[:id])\n    end\n\n    def destroy\n        @course = Course.find(params[:id])\n        @course.destroy\n\n        flash[:danger] = \"Course was deleted\"\n        redirect_to courses_path\n    end\n\n    def edit\n        #@course = Course.find(params[:id])\n    end\n\n    def update\n        #@course = Course.find(params[:id])\n        if @course.update(course_params)\n            flash[:success] = \"Course was updated with reviews\"\n            redirect_to course_path(@course)\n        else\n            render 'edit'\n        end\n    end\n\n    private\n    def set_course\n        @course = Course.find(params[:id])\n    end\n\n    def course_params\n        params.require(:course).permit(:coursename, :course_content, :prerequisite, :proctoredexams, :groupwork, :textbook, reviews_attributes: [:reviews_content])\n    end \n\n    def review_params\n        params.require(:course).permit(reviews_attributes: [:reviews_content])\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5", "devise-invitable"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575974981, "post_id": 59262194, "comment_id": 104738739, "body": "This is way beyond the scope of what devise invitable is designed to do. Can you modify it to do this? Yeah maybe. But you would probably be better off writing something purpose built as it going to be a mess."}], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1575964254, "creation_date": 1575964254, "answer_id": 59262510, "question_id": 59262194, "link": "https://stackoverflow.com/questions/59262194/is-there-any-way-to-reuse-the-same-devise-invitation-token-on-resend-invitation/59262510#59262510", "title": "Is there any way to reuse the same devise invitation_token on resend invitation?", "body": "<p>Try tweaking <code>File 'lib/devise_invitable/models.rb', line 139</code> to get your desirable result..</p>\n"}], "owner": {"reputation": 19, "user_id": 11921967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lAjVp2vLV3Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdH_1uR3RkWgyQWkFbqYi2J0J5Wsw/photo.jpg?sz=128", "display_name": "Tanmay Bhawsar", "link": "https://stackoverflow.com/users/11921967/tanmay-bhawsar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575964254, "creation_date": 1575962738, "question_id": 59262194, "link": "https://stackoverflow.com/questions/59262194/is-there-any-way-to-reuse-the-same-devise-invitation-token-on-resend-invitation", "title": "Is there any way to reuse the same devise invitation_token on resend invitation?", "body": "<p>When someone is invited to manage multiple users, with every new invitation, the token is changed and it is invalidating previous invitations.</p>\n\n<p>It should not change the token but try to reuse it. If it is not possible, then is there any way to allow the user to use any of them until the user is signed up?</p>\n"}, {"tags": ["ruby", "csv", "parsing"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1575997576, "post_id": 59261564, "comment_id": 104751635, "body": "This is clear and well-written but you&#39;ve asked two questions. You&#39;re more likely to get high-quality answers if you post two separate questions."}], "owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575999635, "creation_date": 1575960081, "last_edit_date": 1575999635, "question_id": 59261564, "link": "https://stackoverflow.com/questions/59261564/how-can-i-strengthen-my-user-account-creation-script-to-reduce-redundancies-from", "title": "How can I strengthen my user account creation script to reduce redundancies from happening?", "body": "<p>I have a script that reads a CSV file that makes users for a Linux system. I have the code working and it does create the usernames, passwords, and the actual accounts for the system. </p>\n\n<p>What I want to do, in the case that two people have the same name (unlikely but it happens) I want to add a number to the end of the duplicate user.</p>\n\n<p>Example for CSV File: </p>\n\n<p>first_name, last_name</p>\n\n<p>john, smith</p>\n\n<p>john, smith</p>\n\n<p>Desired Usernames would be smithjn and smithjn1</p>\n\n<p>Here is my code as is:</p>\n\n<pre><code>#Import CSV and io/console\nrequire 'csv'\nrequire 'io/console'\n\n#Create Varaible for path to CSV File\nfilename = 'employeedata.csv'\n\n\n#Start the Output File New Data\nCSV.open(\"GeneratedUsers.csv\", \"w\") do |outfile|\n  # Headers for outfile\n  outfile &lt;&lt; [\"First Name\", \"Last Name:\", \"Username:\", \"Password:\"] \n\n  # Process Usernames, Passwords, and useradd command\n  CSV.foreach(filename, headers: true) do |row|\n        first_name_char = row['first_name'].strip.split('')\n        useradd_name = \"#{row['last_name']}#{first_name_char.first}#{first_name_char.last}\"\n        password = \"\"; 8.times{password &lt;&lt; ((rand(2)==1?65:97) + rand(25)).chr}\n        system(\"useradd '#{useradd_name}' -p '#{password}'\")\n\n    # Add new users and passwords to outfile\n    outfile &lt;&lt; [row['first_name'], row['last_name'], [useradd_name], [password]]\n  end\nend\n</code></pre>\n\n<p>Would I need to add a simple <code>if</code> statement to see if the username already exits and add a number if it does?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1734, "user_id": 1959005, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c0fe9de446b5f3e0d902384d609977e?s=128&d=identicon&r=PG", "display_name": "Poutrathor", "link": "https://stackoverflow.com/users/1959005/poutrathor"}, "edited": false, "score": 1, "creation_date": 1575956444, "post_id": 59260870, "comment_id": 104730397, "body": "Maybe 2 version of ruby are installed?"}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "edited": false, "score": 0, "creation_date": 1575957794, "post_id": 59260870, "comment_id": 104730801, "body": "try to reuse this answer with your version of ruby <a href=\"https://stackoverflow.com/a/54087270/4251975\">stackoverflow.com/a/54087270/4251975</a>"}, {"owner": {"reputation": 275, "user_id": 8333125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0027d7ab229778444c062f2c23a690d5?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar P", "link": "https://stackoverflow.com/users/8333125/rajkumar-p"}, "edited": false, "score": 0, "creation_date": 1575957892, "post_id": 59260870, "comment_id": 104730833, "body": "Hi @vishal aher.. If u are using rubymine please check at <code>Languages &amp; Frameworks &gt; Ruby SDK and Gems</code>. May be there will be the ruby version 2.3.3."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12504742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wlk9T9Bd_Rw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrxEYALJ9tCYAccDWfvmvgQge0Sg/photo.jpg?sz=128", "display_name": "Bilal Ahmad", "link": "https://stackoverflow.com/users/12504742/bilal-ahmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1575958365, "last_edit_date": 1575958365, "creation_date": 1575958039, "answer_id": 59261175, "question_id": 59260870, "link": "https://stackoverflow.com/questions/59260870/how-to-fix-your-ruby-version-is-2-3-3-but-your-gemfile-specified-2-5-7p206/59261175#59261175", "title": "How to fix \u201cYour Ruby version is 2.3.3, but your Gemfile specified 2.5.7p206\u201d", "body": "<ol>\n<li>First install RVM(ruby version manager) after installing </li>\n<li>run rvm install x.x.x to install a specific version. (in place of x.x.x 2.5.7)\n3.Use rvm use x.x.x --default to change your default Ruby(in your case 2.5.7)\nif you are using using ubuntu it will work.\nyou can follow these steps from this link too <a href=\"https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/nginx/oss/install_language_runtime.html\" rel=\"nofollow noreferrer\">https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/nginx/oss/install_language_runtime.html</a></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 4635366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21adc3fbe84f49e452ed43f25144f38?s=128&d=identicon&r=PG&f=1", "display_name": "vishal aher", "link": "https://stackoverflow.com/users/4635366/vishal-aher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575958365, "creation_date": 1575956290, "question_id": 59260870, "link": "https://stackoverflow.com/questions/59260870/how-to-fix-your-ruby-version-is-2-3-3-but-your-gemfile-specified-2-5-7p206", "title": "How to fix \u201cYour Ruby version is 2.3.3, but your Gemfile specified 2.5.7p206\u201d", "body": "<p>I search for some answers related to this question but didn't get a particular answer. \nI checked my ruby version.\n Ruby -v gives  2.5.7p206 as a result and in gem file also add ruby '2.5.7p206'.</p>\n\n<p>In gemfile.lock it show </p>\n\n<p>RUBY VERSION\n   ruby 2.5.7p206</p>\n\n<p>So I didn't find where the actual problem.</p>\n\n<p>thank you.</p>\n"}, {"tags": ["arrays", "ruby", "sum"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1575948243, "post_id": 59259701, "comment_id": 104728336, "body": "<a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> the greater than 10 then <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>sum</code></a> them."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1575961665, "post_id": 59259701, "comment_id": 104732139, "body": "I don&#39;t know how this question could be more clear. Would the disapprover care to provide a justification for the downvote and vote to close? Note that the asker is evidently new to Ruby."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1575973205, "post_id": 59259701, "comment_id": 104737781, "body": "@CarySwoveland: &quot;I want to do X&quot; is a wish, not a problem statement. It is unclear what the problem is. Does the OP get an error? If yes, what is the error? Does the OP get an undesired result? If yes, what is the undesired result? And so on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575988287, "post_id": 59259701, "comment_id": 104746149, "body": "@J&#246;rgWMittag, is it not a reasonable assumption that the OP would have given at least a minimal explanation of their attempted solution if they were really asking why they got an error or why their answer was incorrect?"}, {"owner": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "edited": false, "score": 0, "creation_date": 1576000528, "post_id": 59259701, "comment_id": 104752953, "body": "I understand the downvote, which is for lack of research/effort, but it&#39;s certainly not close-worthy (unless someone knows of a duplicate somewhere)."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1575956279, "creation_date": 1575956279, "answer_id": 59260867, "question_id": 59259701, "link": "https://stackoverflow.com/questions/59259701/how-to-sum-numbers-with-arrays-in-ruby/59260867#59260867", "title": "How to sum numbers with arrays in Ruby?", "body": "<pre><code>a = [15, 8.5, 19, 20, 5.5, 12.49, 17] \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>a.sum { |n| n &gt; 10 ? n : 0 }\n  #=&gt; 83.49\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1575972005, "post_id": 59261436, "comment_id": 104737121, "body": "The documentation link is wrong. As the question isn&#39;t tagged with Rails, and you&#39;re not using the <code>sum</code> method."}], "tags": [], "owner": {"reputation": 21, "user_id": 12504742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wlk9T9Bd_Rw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrxEYALJ9tCYAccDWfvmvgQge0Sg/photo.jpg?sz=128", "display_name": "Bilal Ahmad", "link": "https://stackoverflow.com/users/12504742/bilal-ahmad"}, "is_accepted": false, "score": -1, "last_activity_date": 1575959439, "creation_date": 1575959439, "answer_id": 59261436, "question_id": 59259701, "link": "https://stackoverflow.com/questions/59259701/how-to-sum-numbers-with-arrays-in-ruby/59261436#59261436", "title": "How to sum numbers with arrays in Ruby?", "body": "<pre><code>array.inject(0){|sum,x| sum + x }   \n</code></pre>\n\n<p>or see <a href=\"https://apidock.com/rails/Enumerable/sum\" rel=\"nofollow noreferrer\">https://apidock.com/rails/Enumerable/sum</a></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1575963237, "creation_date": 1575963237, "answer_id": 59262307, "question_id": 59259701, "link": "https://stackoverflow.com/questions/59259701/how-to-sum-numbers-with-arrays-in-ruby/59262307#59262307", "title": "How to sum numbers with arrays in Ruby?", "body": "<p>As an alternative to Cary's answer.</p>\n\n<pre><code>a = [15, 8.5, 19, 20, 5.5, 12.49, 17] \n\na.select { |n| n &gt; 10 }.sum\n#=&gt; 83.49\n</code></pre>\n\n<p>Cary's solution is probably a bit faster.</p>\n"}], "owner": {"reputation": 9, "user_id": 12508866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e5a71b8a8834ebab4a8fbb8c37c679?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/12508866/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1575963237, "creation_date": 1575947860, "last_edit_date": 1575958971, "question_id": 59259701, "link": "https://stackoverflow.com/questions/59259701/how-to-sum-numbers-with-arrays-in-ruby", "title": "How to sum numbers with arrays in Ruby?", "body": "<p>I have this array:</p>\n\n<pre><code>a = [15, 8.5, 19, 20, 5.5, 12.49, 17] \n</code></pre>\n\n<p>I want to sum the numeric values greater than 10</p>\n"}, {"tags": ["ios", "ruby", "xcode", "cocoapods", "macos-catalina"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575956281, "post_id": 59259662, "comment_id": 104730349, "body": "Maybe the first answer here helps? It&#39;s the same error: <a href=\"https://stackoverflow.com/questions/9243548/no-such-file-or-directory-getcwd-error-on-rubygems-on-mac-os-lion\" title=\"no such file or directory getcwd error on rubygems on mac os lion\">stackoverflow.com/questions/9243548/&hellip;</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575956527, "post_id": 59259662, "comment_id": 104730422, "body": "Another explanation: <a href=\"http://pinter.org/archives/5662\" rel=\"nofollow noreferrer\">pinter.org/archives/5662</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575956592, "post_id": 59259662, "comment_id": 104730439, "body": "How to update CocoaPods: <a href=\"https://stackoverflow.com/questions/39481636/updating-to-latest-version-of-cocoapods\" title=\"updating to latest version of cocoapods\">stackoverflow.com/questions/39481636/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 12498911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1a64fc14e4472671512cff53dd8990?s=128&d=identicon&r=PG&f=1", "display_name": "Awais Ur Rehman", "link": "https://stackoverflow.com/users/12498911/awais-ur-rehman"}, "is_accepted": false, "score": 0, "last_activity_date": 1603836884, "last_edit_date": 1603836884, "creation_date": 1603835948, "answer_id": 64563491, "question_id": 59259662, "link": "https://stackoverflow.com/questions/59259662/updated-mac-to-catalina-and-ever-since-have-had-a-cocopods-or-ruby-error-when-ru/64563491#64563491", "title": "Updated Mac to Catalina and ever since have had a Cocopods or Ruby error when runnings pod in workspace", "body": "<p>Open Terminal. Execute the following in your terminal to get the latest stable version:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>sudo gem install cocoapods\n</code></pre>\n<p>Add <code>--pre</code> to get the latest pre release:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>sudo gem install cocoapods --pre\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12169208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627952903e66f95f3b63608f53162801?s=128&d=identicon&r=PG&f=1", "display_name": "miker", "link": "https://stackoverflow.com/users/12169208/miker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1603836884, "creation_date": 1575947552, "last_edit_date": 1575947936, "question_id": 59259662, "link": "https://stackoverflow.com/questions/59259662/updated-mac-to-catalina-and-ever-since-have-had-a-cocopods-or-ruby-error-when-ru", "title": "Updated Mac to Catalina and ever since have had a Cocopods or Ruby error when runnings pod in workspace", "body": "<p>Its been a couple of weeks with this issue, I have tried everything and not sure what the issue could be and how I can solve it. I have deleted and reinstalled ruby, cocoapods, xcode tools, etc.  I am somewhat new to all of this and have looked at and tried to follow almost every similar forms that show similar issues to mine.</p>\n\n<p>For some reason, if I run pod outside of my workspace folder everything works fine.  If I CD into any folder or try to create a new xcode project and run pod init I get the same error.</p>\n\n<pre><code>Traceback (most recent call last):\n    35: from /usr/local/bin/pod:23:in `&lt;main&gt;'\n    34: from /usr/local/bin/pod:23:in `load'\n    33: from /usr/local/lib/ruby/gems/2.6.0/gems/cocoapods-1.8.4/bin/pod:36:in `&lt;top (required)&gt;'\n    32: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    31: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    30: from /usr/local/lib/ruby/gems/2.6.0/gems/cocoapods-1.8.4/lib/cocoapods.rb:8:in `&lt;top (required)&gt;'\n    29: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    28: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    27: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/core_ext/string/inflections.rb:1:in `&lt;top (required)&gt;'\n    26: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    25: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    24: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/methods.rb:3:in `&lt;top (required)&gt;'\n    23: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    22: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    21: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflections.rb:1:in `&lt;top (required)&gt;'\n    20: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    19: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    18: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/inflections.rb:3:in `&lt;top (required)&gt;'\n    17: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    16: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    15: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/i18n.rb:5:in `&lt;top (required)&gt;'\n    14: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    13: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    12: from /usr/local/lib/ruby/gems/2.6.0/gems/i18n-0.9.5/lib/i18n.rb:1:in `&lt;top (required)&gt;'\n    11: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    10: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     9: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/map.rb:3:in `&lt;top (required)&gt;'\n     8: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     7: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     6: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/synchronization.rb:5:in `&lt;top (required)&gt;'\n     5: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `load_native_extensions'\n     4: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `each'\n     3: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `block in load_native_extensions'\n     2: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:62:in `try_load_c_extension'\n     1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- concurrent/concurrent_ruby_ext (LoadError)\n    46: from /usr/local/bin/pod:23:in `&lt;main&gt;'\n    45: from /usr/local/bin/pod:23:in `load'\n    44: from /usr/local/lib/ruby/gems/2.6.0/gems/cocoapods-1.8.4/bin/pod:36:in `&lt;top (required)&gt;'\n    43: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    42: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    41: from /usr/local/lib/ruby/gems/2.6.0/gems/cocoapods-1.8.4/lib/cocoapods.rb:8:in `&lt;top (required)&gt;'\n    40: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    39: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    38: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/core_ext/string/inflections.rb:1:in `&lt;top (required)&gt;'\n    37: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    36: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    35: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/methods.rb:3:in `&lt;top (required)&gt;'\n    34: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    33: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    32: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflections.rb:1:in `&lt;top (required)&gt;'\n    31: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    30: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    29: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/inflections.rb:3:in `&lt;top (required)&gt;'\n    28: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    27: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    26: from /usr/local/lib/ruby/gems/2.6.0/gems/activesupport-4.2.11.1/lib/active_support/i18n.rb:5:in `&lt;top (required)&gt;'\n    25: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    24: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    23: from /usr/local/lib/ruby/gems/2.6.0/gems/i18n-0.9.5/lib/i18n.rb:1:in `&lt;top (required)&gt;'\n    22: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    21: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    20: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/map.rb:3:in `&lt;top (required)&gt;'\n    19: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    18: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    17: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/synchronization.rb:5:in `&lt;top (required)&gt;'\n    16: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `load_native_extensions'\n    15: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `each'\n    14: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:30:in `block in load_native_extensions'\n    13: from /usr/local/lib/ruby/gems/2.6.0/gems/concurrent-ruby-1.1.5/lib/concurrent/utility/native_extension_loader.rb:62:in `try_load_c_extension'\n    12: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:34:in `require'\n    11: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:123:in `rescue in require'\n    10: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems.rb:213:in `try_activate'\n     9: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/specification.rb:1036:in `find_by_path'\n     8: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/specification.rb:1036:in `find'\n     7: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/specification.rb:1036:in `each'\n     6: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/specification.rb:1037:in `block in find_by_path'\n     5: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:39:in `compatible?'\n     4: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:7:in `bundler_version'\n     3: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:22:in `bundler_version_with_reason'\n     2: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:68:in `lockfile_version'\n     1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:80:in `lockfile_contents'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/bundler_version_finder.rb:80:in `pwd': Operation not permitted - getcwd (Errno::EPERM)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1575944281, "post_id": 59259015, "comment_id": 104727566, "body": "You need to write the file first."}, {"owner": {"reputation": 4201, "user_id": 4177142, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/o7RE7.png?s=128&g=1", "display_name": "Dinuka Jay", "link": "https://stackoverflow.com/users/4177142/dinuka-jay"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1575944571, "post_id": 59259015, "comment_id": 104727627, "body": "Storing the data in the params to a File object? @JoshBrody is there an example I can refer to?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575945759, "post_id": 59259015, "comment_id": 104727823, "body": "can you update and post the backtrace errors in your question?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1575945915, "post_id": 59259015, "comment_id": 104727862, "body": "<code>File.write</code> is your friend here."}], "owner": {"reputation": 4201, "user_id": 4177142, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/o7RE7.png?s=128&g=1", "display_name": "Dinuka Jay", "link": "https://stackoverflow.com/users/4177142/dinuka-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575941959, "creation_date": 1575941959, "question_id": 59259015, "link": "https://stackoverflow.com/questions/59259015/rails-rename-a-binary-file-uploaded-to-api", "title": "Rails: Rename a Binary File uploaded to API", "body": "<p>I've seen a lot of threads that open up a file from a directory and rename it. But in my case, the user is uploading a file to a POST endpoint. I'd like to rename that file before uploading to my blob storage.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>def picture\n   @file = params[:file]\n   @new_file_name = generate__filename()\n\n   #this line didn't work\n   File.rename(@file, @new_file_name + File.extname(@file))\n\n   # begin upload here\nend\n</code></pre>\n\n<p>I'm testing this by selecting the form-data value as file in Postman. How do I rename this file?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1575939136, "post_id": 59258467, "comment_id": 104726532, "body": "@lurker Ruby hashes are ordered these days, they maintain insertion order just like JavaScript objects (in recent versions of JavaScript of course)."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1575939215, "post_id": 59258467, "comment_id": 104726551, "body": "@muistooshort ok thanks, I wasn&#39;t aware of that."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1575938880, "creation_date": 1575938880, "answer_id": 59258676, "question_id": 59258467, "link": "https://stackoverflow.com/questions/59258467/is-there-a-way-of-changing-the-key-of-a-hash-via-sort-sort-by/59258676#59258676", "title": "Is there a way of changing the key of a hash via sort / sort_by?", "body": "<p>Looks like you're trying to split the hash into keys and values, sort each of those separately, and then put them back together as a hash.</p>\n\n<p>In that case, you could do something like this:</p>\n\n<pre><code>hash.to_a.transpose.map(&amp;:sort).transpose.to_h\n</code></pre>\n\n<p>Step by step it works like this:</p>\n\n<pre><code># First array-ify the hash into key/value pairs\nhash.to_a\n# [[:a, 2], [:b, 5], [:c, 1]] \n\n# Then transpose to group the keys and values together\nhash.to_a.transpose\n# [[:a, :b, :c], [2, 5, 1]]\n\n# Then sort the keys and values separately\nhash.to_a.transpose.map(&amp;:sort)\n# [[:a, :b, :c], [1, 2, 5]] \n\n# And transpose again to get key/value pairs\nhash.to_a.transpose.map(&amp;:sort).transpose\n# [[:a, 1], [:b, 2], [:c, 5]] \n\n# And combine the array of key/value pairs into a hash\nhash.to_a.transpose.map(&amp;:sort).transpose.to_h\n# {:a=&gt;1, :b=&gt;2, :c=&gt;5} \n</code></pre>\n\n<p>You could also manually do the <code>hash.to_a.transpose</code> step like this:</p>\n\n<pre><code>[hash.keys, hash.values].map(&amp;:sort).transpose.to_h\n</code></pre>\n\n<p>You don't even have to assume that <code>#keys</code> and <code>#values</code> will produce arrays in any particular order since you're sorting everything anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 1, "last_activity_date": 1575938883, "creation_date": 1575938883, "answer_id": 59258678, "question_id": 59258467, "link": "https://stackoverflow.com/questions/59258467/is-there-a-way-of-changing-the-key-of-a-hash-via-sort-sort-by/59258678#59258678", "title": "Is there a way of changing the key of a hash via sort / sort_by?", "body": "<p>What's about the following approach?</p>\n\n<pre><code>{ a: 2, b: 5, c: 1 }.then { |hash| [hash.keys.sort, hash.values.sort].transpose }.to_h\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1575939362, "creation_date": 1575939362, "answer_id": 59258725, "question_id": 59258467, "link": "https://stackoverflow.com/questions/59258467/is-there-a-way-of-changing-the-key-of-a-hash-via-sort-sort-by/59258725#59258725", "title": "Is there a way of changing the key of a hash via sort / sort_by?", "body": "<pre><code>h = { a: 2, b: 5, c: 1 }\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>a = h.values.sort\n  #=&gt; [1, 2, 5] \nh.transform_values { a.shift }\n  #=&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;5} \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": false, "score": 0, "last_activity_date": 1575978454, "last_edit_date": 1575978454, "creation_date": 1575939370, "answer_id": 59258727, "question_id": 59258467, "link": "https://stackoverflow.com/questions/59258467/is-there-a-way-of-changing-the-key-of-a-hash-via-sort-sort-by/59258727#59258727", "title": "Is there a way of changing the key of a hash via sort / sort_by?", "body": "<pre><code>hash.keys.zip(h.values.sort).to_h\n#  {:a=&gt;1, :b=&gt;2, :c=&gt;5}\n</code></pre>\n\n<p>This just sorts the values, not the keys. Since your original example had pre-sorted keys, it wasn't clear from the question whether you expected those to be sorted as well if they weren't already</p>\n\n<p>If you want to sort the keys and the values and have them linked to each other, then you can <code>sort</code> the keys as well:</p>\n\n<pre><code>hash.keys.sort.zip(h.values.sort).to_h\n# {:a=&gt;1, :b=&gt;2, :c=&gt;5}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12508296, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215741566715577/picture?type=large", "display_name": "JBDR", "link": "https://stackoverflow.com/users/12508296/jbdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59258676, "answer_count": 4, "score": 4, "last_activity_date": 1575978454, "creation_date": 1575936793, "last_edit_date": 1575944627, "question_id": 59258467, "link": "https://stackoverflow.com/questions/59258467/is-there-a-way-of-changing-the-key-of-a-hash-via-sort-sort-by", "title": "Is there a way of changing the key of a hash via sort / sort_by?", "body": "<p>Currently working through a question thats trying to get me to transform the former into the later </p>\n\n<pre><code>{ a: 2, b: 5, c: 1 } =&gt; { a: 1, b: 2, c: 5 }\n</code></pre>\n\n<p>tried to do this with </p>\n\n<pre><code>hash = { a: 2, b: 5, c: 1 }.sort_by {|k,v| v}.to_h\n</code></pre>\n\n<p>this gives this => <code>{:c=&gt;1, :a=&gt;2, :b=&gt;5}</code></p>\n\n<p>how do I change the key of the hash whilst sorting the values?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 171, "user_id": 11839259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e1FhMB-N7lw/AAAAAAAAAAI/AAAAAAAABTc/P1NgYqw36yM/photo.jpg?sz=128", "display_name": "Josh Bangle", "link": "https://stackoverflow.com/users/11839259/josh-bangle"}, "edited": false, "score": 0, "creation_date": 1575933602, "post_id": 59257976, "comment_id": 104725280, "body": "After typing it out, I think my issue is in the ajax request, the JSON only has access to the image file path name, but the actual images aren&#39;t stored with the JSON being pulled in with the AJAX request. so that request can&#39;t access the actual images. I&#39;m going to try to find a workaround for this."}], "answers": [{"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 1, "last_activity_date": 1575935939, "creation_date": 1575935939, "answer_id": 59258364, "question_id": 59257976, "link": "https://stackoverflow.com/questions/59257976/how-to-attach-an-image-from-assets-to-a-ruby-object-in-rails-5/59258364#59258364", "title": "How to attach an image from assets to a ruby object in rails 5", "body": "<p>You should use <code>image_path</code> to get the path of the image in the assets. <a href=\"https://api.rubyonrails.org/v5.2.0/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-image_path\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.2.0/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-image_path</a></p>\n\n<p>Then use a data attribute on your element to set the image url, so you can retrieve it later with JavaScript.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 11839259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e1FhMB-N7lw/AAAAAAAAAAI/AAAAAAAABTc/P1NgYqw36yM/photo.jpg?sz=128", "display_name": "Josh Bangle", "link": "https://stackoverflow.com/users/11839259/josh-bangle"}, "is_accepted": false, "score": 0, "last_activity_date": 1575941334, "creation_date": 1575941334, "answer_id": 59258940, "question_id": 59257976, "link": "https://stackoverflow.com/questions/59257976/how-to-attach-an-image-from-assets-to-a-ruby-object-in-rails-5/59258940#59258940", "title": "How to attach an image from assets to a ruby object in rails 5", "body": "<p>The issue was with image fingerprinting in rails, only the hard-coded image names would be fingerprinted when compiling, and not names given as a variable or called using piece.image. I used <a href=\"https://github.com/alexspeller/non-stupid-digest-assets\" rel=\"nofollow noreferrer\">https://github.com/alexspeller/non-stupid-digest-assets</a> in order to remove the necessity for pieces to be fingerprinted, and adjusted the filepath to the images to look like <code>span.innerHTML =</code><code>;</code> and they now load properly.</p>\n"}], "owner": {"reputation": 171, "user_id": 11839259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e1FhMB-N7lw/AAAAAAAAAAI/AAAAAAAABTc/P1NgYqw36yM/photo.jpg?sz=128", "display_name": "Josh Bangle", "link": "https://stackoverflow.com/users/11839259/josh-bangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575941334, "creation_date": 1575933164, "question_id": 59257976, "link": "https://stackoverflow.com/questions/59257976/how-to-attach-an-image-from-assets-to-a-ruby-object-in-rails-5", "title": "How to attach an image from assets to a ruby object in rails 5", "body": "<p>I'm trying to build a chess game, and I currently have the pieces being initialized through the game model, as so: </p>\n\n<pre><code>    class Game &lt; ApplicationRecord\n  scope :available, -&gt; { where(white_player_id: nil).or(where(black_player_id: nil))}\n  belongs_to :user\n  has_many :pieces\n  after_create :populate_game\n\n\n  def populate_game\n    #black pieces \n\n    (0..7).each do |i|\n      Pawn.create(game_id: id, x_position: i, y_position: 6, color: \"black\", status: true, image: 'pwn_blk.png')\n    end \n</code></pre>\n\n<p>the rest of the pieces are built the same way, but for sake of space I don't have those included.</p>\n\n<p>My issue is, the image that represents the pieces is giving me trouble. I have the board being built out in javascript, one square at a time, and I am appending a span to the square that corresponds with the correct piece. I can get the piece id's to work great, but when I am trying to reference the image stored in the model (whether I am using span.setAttribute('img', \"src=${piece.image}\") or appending a seperate child to the span, or an entirely different child to the containing square) I receive an error in the console saying <code>GET http://localhost:3030/games/assets/images/pwn_blk.png 404 (Not Found)</code>so it is as if the application is trying to reach the image from a url endpoint rather than just pulling from the assets folder.</p>\n\n<p>My one thought as to why this may be is this, we have the pieces being built out as a JSON endpoint and being retreived with an ajax request, as follows: </p>\n\n<pre><code>function getGamePieces(id) {\n     $.ajax({\n        url: `/get_pieces/${id}`,\n        method: 'get',\n\n     }).then(function (data) {\n       let pieces = data; \n       // console.log(pieces);\n       pieces.forEach(function (piece) {\n        var row = $boardContainer.querySelector(`[data-x=\"${piece.x_position}\"][data-y=\"${piece.y_position}\"]`);\n\n\n         if (row){\n          var image = document.createElement('img');\n          image.setAttribute('src', `./assets/images/pwn_blk.png`); \n          var span = document.createElement('span');\n          span.className = 'piece';\n          span.setAttribute('draggable', 'true')\n          span.setAttribute('ondragstart', 'onDragStart(event);')\n          span.setAttribute('id', piece.id);\n          span.setAttribute('img', `src=${piece.image}`);\n          // span.append(piece.image);\n          row.appendChild(span);\n         }\n       })\n\n     })    \n}        \n</code></pre>\n\n<p>It's a tad messy right now because I have been experimenting a lot trying to figure out how to make it work and I'm coming up short. Any suggestions on how to get the image to pull directly from the assets folder?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "sti", "uninitialized-constant"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8709091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2407556192d07f0ff7f7f222035d158b?s=128&d=identicon&r=PG&f=1", "display_name": "Khu li fang", "link": "https://stackoverflow.com/users/8709091/khu-li-fang"}, "edited": false, "score": 0, "creation_date": 1576006353, "post_id": 59258379, "comment_id": 104755439, "body": "rails -v 6.0.1 and ruby -v 2.6.5. <code>User::Teacher</code> does it mean i have to namespace model and controller? and also  <code>config.load_paths &lt;&lt; &quot;#{RAILS_ROOT}&#47;app&#47;models&#47;users&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 8709091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2407556192d07f0ff7f7f222035d158b?s=128&d=identicon&r=PG&f=1", "display_name": "Khu li fang", "link": "https://stackoverflow.com/users/8709091/khu-li-fang"}, "edited": false, "score": 0, "creation_date": 1576007987, "post_id": 59258379, "comment_id": 104756091, "body": "<code>resources :teachers, controller: &#39;users&#39;, type: &#39;Teacher&#39;</code> in routes. And  <code>scope :teachers, -&gt; { where(role: &#39;Teacher&#39;) }</code> in user model"}], "tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575936095, "creation_date": 1575936095, "answer_id": 59258379, "question_id": 59257469, "link": "https://stackoverflow.com/questions/59257469/convert-rails-sti-type-param-to-the-actual-class-constant/59258379#59258379", "title": "Convert rails STI type param to the actual class constant?", "body": "<p>Make sure you have a type in database also by looking at <code>uninitialized constant User::teacher</code> it seems you are using a lower version somewhere. It should be <code>User::Teacher</code></p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 3491089, "user_type": "registered", "profile_image": "https://graph.facebook.com/895951850456604/picture?type=large", "display_name": "Neel Tandel", "link": "https://stackoverflow.com/users/3491089/neel-tandel"}, "is_accepted": false, "score": 0, "last_activity_date": 1578114059, "creation_date": 1578114059, "answer_id": 59588037, "question_id": 59257469, "link": "https://stackoverflow.com/questions/59257469/convert-rails-sti-type-param-to-the-actual-class-constant/59588037#59588037", "title": "Convert rails STI type param to the actual class constant?", "body": "<p>as Paula Fidalgo said to make sure you have type column as a string in User model schema</p>\n\n<p>after that, you can create new entries in the User model as below</p>\n\n<pre><code>Teacher.create(user_params)\n\nUser.create(type: 'Teacher')\n</code></pre>\n\n<p>both are same.</p>\n"}], "owner": {"reputation": 1, "user_id": 8709091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2407556192d07f0ff7f7f222035d158b?s=128&d=identicon&r=PG&f=1", "display_name": "Khu li fang", "link": "https://stackoverflow.com/users/8709091/khu-li-fang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1578114059, "creation_date": 1575929854, "last_edit_date": 1575934434, "question_id": 59257469, "link": "https://stackoverflow.com/questions/59257469/convert-rails-sti-type-param-to-the-actual-class-constant", "title": "Convert rails STI type param to the actual class constant?", "body": "<p>I am rails newbie. I create STI with the following <code>class User</code> and its <code>class Teacher &lt; User</code> subclasses. It thrown an error when I fill in the user form. </p>\n\n<h1>    NameError at /users</h1>\n\n<blockquote>\n  <p>uninitialized constant User::teacher</p>\n</blockquote>\n\n<h2>app/controllers/users_controller.rb, line 29</h2>\n\n<pre class=\"lang-rb prettyprint-override\"><code>   24     end\n   25   \n   26     # POST /users\n   27     def create \n   28       byebug \n&gt;  29       @user = User.new(user_params) \n   30       authorize @user    \n   31       if @user.save\n   32         render json: @user, status: :created, location: @user, serializer: UserSerializer\n   33       else\n   34         render json: @user.errors, status: :unprocessable_entity\n</code></pre>\n\n<h2>App backtrace</h2>\n\n<ul>\n<li>app/controllers/users_controller.rb:29:in `create'</li>\n</ul>\n\n<h2>Full backtrace</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>activerecord (6.0.1) lib/active_record/inheritance.rb:206:in    `compute_type'\nactiverecord (6.0.1) lib/active_record/inheritance.rb:233:in `find_sti_class'\nactiverecord (6.0.1) lib/active_record/inheritance.rb:263:in `subclass_from_attributes'\nactiverecord (6.0.1) lib/active_record/inheritance.rb:56:in `new'\napp/controllers/users_controller.rb:29:in `create'\nactionpack (6.0.1) lib/action_controller/metal/basic_implicit_render.rb:6:in    `send_action'\nactionpack (6.0.1) lib/abstract_controller/base.rb:196:in `process_action'\nactionpack (6.0.1) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (6.0.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'\nactivesupport (6.0.1) lib/active_support/callbacks.rb:135:in `run_callbacks'\nactionpack (6.0.1) lib/abstract_controller/callbacks.rb:41:in `process_action'\nactionpack (6.0.1) lib/action_controller/metal/rescue.rb:22:in `process_action'\nactionpack (6.0.1) lib/action_controller/metal/instrumentation.rb:33:in `block in    process_action'\nactivesupport (6.0.1) lib/active_support/notifications.rb:180:in `block in instrument'\nactivesupport (6.0.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'\nactivesupport (6.0.1) lib/active_support/notifications.rb:180:in `instrument'\nactionpack (6.0.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'\nactionpack (6.0.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'\nactiverecord (6.0.1) lib/active_record/railties/controller_runtime.rb:27:in    `process_action'\nactionpack (6.0.1) lib/abstract_controller/base.rb:136:in `process'\nactionpack (6.0.1) lib/action_controller/metal.rb:191:in `dispatch'\nactionpack (6.0.1) lib/action_controller/metal.rb:252:in `dispatch'\nactionpack (6.0.1) lib/action_dispatch/routing/route_set.rb:51:in `dispatch'\nactionpack (6.0.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'\nactionpack (6.0.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'\nactionpack (6.0.1) lib/action_dispatch/journey/router.rb:32:in `serve'\nactionpack (6.0.1) lib/action_dispatch/routing/route_set.rb:837:in `call'\n</code></pre>\n\n<p>I guess I am missing the part of constantize the string param to actual class constant. How to do it?</p>\n\n<p>Please guide. Thank you</p>\n"}, {"tags": ["ruby", "ubuntu", "apache2", "passenger", "redmine"], "comments": [{"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "edited": false, "score": 0, "creation_date": 1575988899, "post_id": 59257117, "comment_id": 104746562, "body": "@AleksandarPavi\u0107  What are you talking about? I am following the installation guide for Ubuntu Linux found on the Redmine Wiki. You do realize you can ask questions and don&#39;t have to make assumptions..."}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 12414906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD5suJdYcDeghXgTWphTBGjGZoPQQxt-xOY-16MfA=k-s128", "display_name": "Ganeshkumar K", "link": "https://stackoverflow.com/users/12414906/ganeshkumar-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1575990642, "creation_date": 1575990642, "answer_id": 59270270, "question_id": 59257117, "link": "https://stackoverflow.com/questions/59257117/missing-passenger-conf-apache2/59270270#59270270", "title": "Missing &quot;passenger.conf&quot; Apache2", "body": "<p>If you need to configure passenger, then install using this ref link from phusion passenger official site\n<a href=\"https://www.phusionpassenger.com/library/config/apache/intro.html\" rel=\"nofollow noreferrer\">https://www.phusionpassenger.com/library/config/apache/intro.html</a></p>\n"}], "owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 59270270, "answer_count": 1, "score": 0, "last_activity_date": 1576235786, "creation_date": 1575927848, "question_id": 59257117, "link": "https://stackoverflow.com/questions/59257117/missing-passenger-conf-apache2", "title": "Missing &quot;passenger.conf&quot; Apache2", "body": "<p>I am trying to deploy Redmine on my Ubuntu Linux server running Apache2. However, for my deployment of Redmine, I need to modify <code>passenger.conf</code> which is missing at the path <code>/etc/apache2/mods-available/passenger.conf</code>. I am wondering if this configuration file should have been provided during installation and how I can create this missing file?</p>\n"}, {"tags": ["regex", "ruby", "regex-greedy", "fluentd"], "comments": [{"owner": {"reputation": 141, "user_id": 12368716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47403140eb0d3323f260d785c91c569d?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/12368716/kumar"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1575988156, "post_id": 59256768, "comment_id": 104746075, "body": "Thanks.It worked."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1575926751, "creation_date": 1575926751, "answer_id": 59256884, "question_id": 59256768, "link": "https://stackoverflow.com/questions/59256768/regex-issue-when-log-format-has-multiple-ips/59256884#59256884", "title": "Regex Issue when log format has multiple ip&#39;s", "body": "<p>You need to match the IPs with a more specific pattern, like <code>[\\d.]+</code> or <code>[^, ]+</code>, and make sure you also match the last two fields (you are not matching them and <code>$</code> requires the end of line/string).</p>\n\n<p>Use a pattern like</p>\n\n<pre><code>^(?&lt;client_ip&gt;[^ ,]+)(?:, +(?&lt;proxy_ip&gt;[^ ,]+))?(?:, +(?&lt;lb_ip&gt;[^ ,]+))? (?&lt;ident&gt;[^ ]+) (?&lt;user&gt;[^ ]+) \\[(?&lt;time&gt;[^\\]\\[ ]* [^\\]\\[ ]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;\\S+) (?&lt;protocol&gt;[A-Z][^\" ]*)[^\"]*)?\" (?&lt;code&gt;\\S+) (?&lt;size&gt;\\S+) \\S+ \\S+$\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/rlCOc6/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p>The IP matching part is <code>^(?&lt;client_ip&gt;[^ ,]+)(?:, +(?&lt;proxy_ip&gt;[^ ,]+))?(?:, +(?&lt;lb_ip&gt;[^ ,]+))?</code>, see that <code>[^ ,]+</code> matches 1+ chars other than a space and <code>,</code> and <code>\\S+ \\S+</code> are added at the end of the pattern (if these are numbers, you may use <code>\\d+ \\d+</code> and capture them if needed).</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1576025754, "last_edit_date": 1576025754, "creation_date": 1576023131, "answer_id": 59277160, "question_id": 59256768, "link": "https://stackoverflow.com/questions/59256768/regex-issue-when-log-format-has-multiple-ips/59277160#59277160", "title": "Regex Issue when log format has multiple ip&#39;s", "body": "<p><strong>Example strings</strong></p>\n\n<p>Let's consider an abbreviated version of your question, focusing on the first four named ranges (as dealing with the remaining named ranges is straightforward).</p>\n\n<pre><code>str1 = \"148.165.41.129, 10.25.1.120 - - [09/Dec/2019:16:22:23 +0000]\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str2 = \"176.30.235.70, 165.225.70.200, 10.25.1.120 - - [09/Dec/2019:13:30:57 +0000]\"\n</code></pre>\n\n<p><strong>The regular expression written in free-spacing mode</strong></p>\n\n<p>The following regular expression can be used to extract the contents of the named ranges, provided the string has a valid structure. Notice that it requires IPv4 addresses and the date-time string to have valid patterns (rather than merely <code>[^ ]+</code> and <code>[^ ]+ [^ ]+</code>). I've written the regular expression in <em>free-spacing</em> mode to make it self-documenting.</p>\n\n<pre><code>r = /\n    \\A              # match the beginning of the string \n    (?&lt;client_ip&gt;   # begin a capture group named client_ip\n      \\g&lt;user_ip&gt;   # evaluate the subexpression (capture group) named user_ip\n    )               # end capture group client_ip\n    (?:             # begin a non-capture group\n      ,[ ]          # match the string ', '\n      (?&lt;lb_ip&gt;     # begin a capture group named lb_ip\n        \\g&lt;user_ip&gt; # evaluate the subexpression (capture group) named user_ip\n      )             # end capture group lb_ip\n    )?              # end non-capture group and optionally execute it\n    (?:             # begin a non-capture group\n      ,[ ]          # match the string ', '\n      (?&lt;user_ip&gt;   # begin a capture group named user_ip\n        \\d{1,3}     # match 1-3 digits \n        (?:         # begin a non-capture group\n          \\.\\d{1,3} # match a period followed by 1-3 digits\n        ){3}        # end the non-capture group and execute 3 times\n      )             # end capture group user_id\n    )               # end non-capture group\n    [ ]-[ ]-[ ]\\[   # match the string ' - - ['\n    (?&lt;time&gt;        # begin a capture group named time \n      \\d{2}\\/\\p{L}{3}\\/\\d{4}:\\d{2}:\\d{2}:\\d{2}[ ]\\+\\d{4}\n                    # match a time string\n    )               # end capture group time                    \n    \\]              # match string ']'\n    \\z              # match end of string\n    /x              # free-spacing regex definition mode\n</code></pre>\n\n<p><strong>Match the strings against the regular expression</strong></p>\n\n<p>We now confirm the two strings match this regular expression and extract the contents of the capture groups.</p>\n\n<pre><code>    m1 = str1.match(r)\n    m1.named_captures\n      #=&gt; {\"client_ip\"=&gt;\"148.165.41.129\",\n      #    \"lb_ip\"=&gt;nil,\n      #    \"user_ip\"=&gt;\"10.25.1.120\",\n      #    \"time\"=&gt;\"09/Dec/2019:16:22:23 +0000\"} \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>    m2 = str2.match(r)\n    m2.named_captures\n      #=&gt; {\"client_ip\"=&gt;\"176.30.235.70\",\n      #    \"lb_ip\"=&gt;\"165.225.70.200\",\n      #    \"user_ip\"=&gt;\"10.25.1.120\",\n      #    \"time\"=&gt;\"09/Dec/2019:13:30:57 +0000\"}\n</code></pre>\n\n<p><strong>Subexpression Calls</strong></p>\n\n<p>Rather than replicating the content of the capture group <code>user_ip</code> for each of the first two named capture groups I have simply used <code>\\g&lt;user_ip&gt;</code>, which, in effect, tells the regex engine to evaluate the contents of capture group (subexpression) <code>user_ip</code> at the location where <code>\\g&lt;user_ip&gt;</code> is referenced. Search for \"Subexpression Calls\" in the docs for <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a>.</p>\n\n<p>Notice that the subexpression calls are <em>forward-looking</em>. Suppose we instead wrote:</p>\n\n<pre><code>r = /\n    \\A \n    (?&lt;client_ip&gt;\\d{1,3}(?:\\.\\d{1,3}){3})\n    (?:,[ ](?&lt;lb_ip&gt;\\g&lt;client_ip&gt;))?\n    (?:,[ ](?&lt;user_ip&gt;\\g&lt;client_ip&gt;))\n    [ ]-[ ]-[ ]\\[\n    (?&lt;time&gt;\\d{2}\\/\\p{L}{3}\\/\\d{4}:\\d{2}:\\d{2}:\\d{2}[ ]\\+\\d{4}) \n    \\]\n    \\z\n    /x\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>    m1 = str1.match(r)\n    m1.named_captures\n      #=&gt; {\"client_ip\"=&gt;\"10.25.1.120\",\n      #    \"lb_ip\"=&gt;nil,\n      #    \"user_ip\"=&gt;\"10.25.1.120\", \n      #    \"time\"=&gt;\"09/Dec/2019:16:22:23 +0000\"}\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>    m2 = str2.match(r)\n    m2.named_captures\n      #=&gt; {\"client_ip\"=&gt;\"10.25.1.120\",\n      #    \"lb_ip\"=&gt;\"165.225.70.200\",\n      #    \"user_ip\"=&gt;\"10.25.1.120\",\n      #    \"time\"=&gt;\"09/Dec/2019:13:30:57 +0000\"} \n</code></pre>\n\n<p>As seen, the contents of the capture group <code>client_ip</code> is set equal to the contents of <code>user_ip</code>. The reason for this behaviour is explained <a href=\"https://www.rexegg.com/regex-capture.html\" rel=\"nofollow noreferrer\">here</a> (look for \"In PCRE but not Perl, one interesting twist is...\" and other referenced sections of that document).</p>\n\n<p><strong>The regular expression written conventionally</strong></p>\n\n<p>The regular expression is conventionally written as follows:</p>\n\n<pre><code>/\\A(?&lt;client_ip&gt;\\g&lt;user_ip&gt;)(?:, (?&lt;lb_ip&gt;\\g&lt;user_ip&gt;))?(?:, (?&lt;user_ip&gt;\\d{1,3}(?:\\.\\d{1,3}){3})) - - \\[(?&lt;time&gt;\\d{2}\\/\\p{L}{3}\\/\\d{4}:\\d{2}:\\d{2}:\\d{2} \\+\\d{4})\\]\\z/\n</code></pre>\n\n<p>Notice that where there are spaces in the above there are character classes containing a single space when the regex is written in free-spacing mode. That is necessary because in free-spacing mode unprotected spaces are removed before the expression is parsed. Another way to protect spaces is to escape them (<code>\\</code>). If it is desired to use whitespaces rather than spaces, <code>\\s</code> can be used.</p>\n"}], "owner": {"reputation": 141, "user_id": 12368716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47403140eb0d3323f260d785c91c569d?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/12368716/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 59256884, "answer_count": 2, "score": 2, "last_activity_date": 1576025754, "creation_date": 1575926238, "last_edit_date": 1575926981, "question_id": 59256768, "link": "https://stackoverflow.com/questions/59256768/regex-issue-when-log-format-has-multiple-ips", "title": "Regex Issue when log format has multiple ip&#39;s", "body": "<p>I have an issue with fluenTd log parser. The following config works fine when there are 2 ip\u2019s.</p>\n\n<pre><code>expression  /^(?&lt;client_ip&gt;[^ ]*)(?:, (?&lt;lb_ip&gt;[^ ]*))? (?&lt;ident&gt;[^ ]*) (?&lt;user&gt;[^ ]*) \\[(?&lt;time&gt;[^ ]* [^ ]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;[^ ]*) (?&lt;protocol&gt;[A-Z]{1,}[^ ]*)+\\S*)?\" (?&lt;code&gt;[^ ]*) (?&lt;size&gt;[^ ]*)/\n</code></pre>\n\n<p>This matches:</p>\n\n<pre><code>148.165.41.129, 10.25.1.120 - - [09/Dec/2019:16:22:23 +0000] \"GET /comet_request/44109669162/F1551019433002Y5MYEP?F155101943300742PMLG=1551019433877&amp;_=1575904426457 HTTP/1.1\" 200 0 0 0\n</code></pre>\n\n<p>When there are 3 ip\u2019s, i get a pattern not match warning.</p>\n\n<p>This doesn't match :</p>\n\n<pre><code>176.30.235.70, 165.225.70.200, 10.25.1.120 - - [09/Dec/2019:13:30:57 +0000] \\\"GET /comet_request/71142769981/F1551018730440IY5YNF?F1551018721447ZVKYZ4=1551018733078&amp;_=1575898029473 HTTP/1.1\\\" 200 0 0 0\n</code></pre>\n\n<p>I tried the following regex, but doesn't work.Can someone please help?</p>\n\n<pre><code>expression /^(?&lt;client_ip&gt;[^ ]*)(?:, (?&lt;proxy_ip&gt;[^ ]*))? (?:, (?&lt;lb_ip&gt;[^ ]*))? (?&lt;ident&gt;[^ ]*) (?&lt;user&gt;[^ ]*) \\[(?&lt;time&gt;[^ ]* [^ ]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;[^ ]*) (?&lt;protocol&gt;[A-Z]{1,}[^ ]*)+\\S*)?\" (?&lt;code&gt;[^ ]*) (?&lt;size&gt;[^ ]*)$/\n</code></pre>\n"}, {"tags": ["ruby", "curl"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1575922780, "post_id": 59255755, "comment_id": 104721493, "body": "You can use something like &#39;curb&#39; (requires libcurl) but nutshell is <a href=\"https://stackoverflow.com/q/82349/438992\">stackoverflow.com/q/82349/438992</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1575923137, "post_id": 59255755, "comment_id": 104721629, "body": "<code>kind_of?</code> compares the class of the object, not the object itself. Consider: <code>case (response)</code> and then <code>when Net::HTTPOK</code> which covers off more cases."}, {"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575926725, "post_id": 59255755, "comment_id": 104723093, "body": "@tadman Can you expand on that? I took the <code>response.kind_of?</code> code from <a href=\"https://stackoverflow.com/a/12023273/1661012\">stackoverflow.com/a/12023273/1661012</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575934286, "post_id": 59255755, "comment_id": 104725435, "body": "It&#39;s an uglier way of doing what&#39;s in the answer below that by tantrix."}, {"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575944502, "post_id": 59255755, "comment_id": 104727613, "body": "@tadman \u201cUgly\u201d is relative. <code>kind_of?</code> allows checking in one line: <code>puts &quot;URL exists: #{url}&quot; if response.kind_of? Net::HTTPOK</code>."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575963919, "post_id": 59255755, "comment_id": 104733046, "body": "How exactly do you define that a <i>website is online</i>? Must it respond with a 200 or a 2xx status code? What about a blank <code>204 No Content</code>? Or must it include a body? What about a website that responds with a redirect? I would argue that <i>online</i> must be defined first."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576005104, "post_id": 59255755, "comment_id": 104754910, "body": "That&#39;s also uglier in a way that <a href=\"https://rubocop.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">Rubocop</a> will flag. Honestly <code>Net::HTTP</code> is pretty trash and you should avoid it unless you&#39;re aiming for absolutely minimal dependencies, such as inside a published gem. In every other case tools like <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">Faraday</a> work much better."}], "answers": [{"comments": [{"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1575928266, "post_id": 59256114, "comment_id": 104723766, "body": "Could this be made shorter, I wonder? In the bash example, doing this is just an extra flag. But in Ruby that\u2019s four extra lines, including creating two extra variables. What\u2019s the shortest this could be, while still correct?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 1, "creation_date": 1575928849, "post_id": 59256114, "comment_id": 104723945, "body": "With Net::HTTP there is no shorter way. I looked at the documentation and this is the most compact form I could find. But if you use another gem, then you can likely make it shorter. HTTParty or Faraday are a couple of gems that can probably do this with 1-2 lines."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1575928954, "post_id": 59256114, "comment_id": 104723992, "body": "But nothing of course prevents you from writing your own method wrapper around this code. Then you can do it in one line."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1575923649, "last_edit_date": 1575923649, "creation_date": 1575923339, "answer_id": 59256114, "question_id": 59255755, "link": "https://stackoverflow.com/questions/59255755/check-if-webpage-is-online-with-ruby/59256114#59256114", "title": "Check if webpage is online, with Ruby", "body": "<p>The range option essentially only sets the <code>Range</code> header. So to replicate you would do the same:</p>\n\n<pre><code>url = URI.parse(...)\n\nreq = Net::HTTP::Get.new(url.request_uri)\nreq['Range'] = 'bytes=0-0'\n\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = (url.scheme == \"https\")\n\nresponse = http.request(req)\n</code></pre>\n"}], "owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 59256114, "answer_count": 1, "score": 1, "last_activity_date": 1575923649, "creation_date": 1575921569, "question_id": 59255755, "link": "https://stackoverflow.com/questions/59255755/check-if-webpage-is-online-with-ruby", "title": "Check if webpage is online, with Ruby", "body": "<p>With <code>curl</code>, I do the following to check if a webpage is online:</p>\n\n<pre><code>if curl --output /dev/null --silent --head --fail \"${url}\"; then\n  echo \"URL exists: ${url}\"\nelse\n  echo \"URL does not exist: ${url}\"\nfi\n</code></pre>\n\n<p>However, if the server refuses <code>HEAD</code> requests (or I don\u2019t know), an alternative is to request only the first byte of the file:</p>\n\n<pre><code>if curl --output /dev/null --silent --fail --range 0-0 \"${url}\"; then\n  echo \"URL exists: ${url}\"\nelse\n  echo \"URL does not exist: ${url}\"\nfi\n</code></pre>\n\n<p>The first case is easy to replicate in Ruby:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\n\nuri = URI.parse(url)\nresponse = Net::HTTP.get_response(uri)\n\nif response.kind_of? Net::HTTPOK\n  puts \"URL exists: #{url}\"\nelse\n  puts \"URL does not exist: #{url}\"\nend\n</code></pre>\n\n<p>How do I replicate the second <code>curl</code> case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 4, "last_activity_date": 1575921879, "creation_date": 1575921879, "answer_id": 59255826, "question_id": 59255712, "link": "https://stackoverflow.com/questions/59255712/rails-console-or-irb-find-out-the-rails-version-of-the-current-environment/59255826#59255826", "title": "rails console OR irb find out the RAILS_VERSION of the current environment", "body": "<p>Short info in <a href=\"https://api.rubyonrails.org/\" rel=\"nofollow noreferrer\"><code>Rails.gem_version</code></a>:</p>\n\n<pre><code>Rails.gem_version\n# =&gt; Gem::Version.new(\"6.0.1\")\n</code></pre>\n\n<p>Long info in <a href=\"https://api.rubyonrails.org/classes/Rails/Info.html\" rel=\"nofollow noreferrer\"><code>Rails::Info</code></a>:</p>\n\n<pre><code>Rails::Info\n=&gt; About your application's environment\nRails version             6.0.1\nRuby version              ruby 2....\nRubyGems version          2.7...\nRack version              2.0...\nMiddleware                UTF8Cleaner::Middleware, Rack::Cors, ActionDispatch::HostAuthorization, Rack::Sendfile, ActionDispatch::Static, Rack::Lock, ActionDispatch::Executor, ...\nApplication root          /home/aaa/bb/app\nEnvironment               development\nDatabase adapter          mysql\nDatabase schema version   20195201212345\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 1306709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19e85eb7621b90a4ef6bde85446094c8?s=128&d=identicon&r=PG", "display_name": "Borys Pylhun", "link": "https://stackoverflow.com/users/1306709/borys-pylhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1575985741, "creation_date": 1575985741, "answer_id": 59268695, "question_id": 59255712, "link": "https://stackoverflow.com/questions/59255712/rails-console-or-irb-find-out-the-rails-version-of-the-current-environment/59268695#59268695", "title": "rails console OR irb find out the RAILS_VERSION of the current environment", "body": "<p>One of possible ways is:</p>\n\n<pre><code>pry(main)&gt; Rails.version\n=&gt; \"5.1.7\"\n</code></pre>\n\n<p>or like above was suggested:</p>\n\n<pre><code>pry(main)&gt; Rails.gem_version\n=&gt; Gem::Version.new(\"5.1.7\")\n</code></pre>\n\n<p>Then you can build some conditions using this technique of versions comparisons:</p>\n\n<pre><code>[20] pry(main)&gt; Rails.version.starts_with?('5.1')\n=&gt; true\n[21] pry(main)&gt; Gem::Version.new(Rails.version) &gt; Gem::Version.new('5.1.2')\n=&gt; true\n[22] pry(main)&gt; Gem::Version.new(Rails.version) &gt; Gem::Version.new('5.2.3')\n=&gt; false\n[23] pry(main)&gt; Gem::Version.new(Rails.version) == Gem::Version.new('5.1')\n=&gt; false\n[24] pry(main)&gt; Gem::Version.new(Rails.version) == Gem::Version.new('5.1.7')\n=&gt; true\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>[28] pry(main)&gt; Rails.gem_version == Gem::Version.new('5.1.7')\n=&gt; true\n[29] pry(main)&gt; Rails.gem_version &gt;= Gem::Version.new('5.1.2')\n=&gt; true\n[30] pry(main)&gt; Rails.gem_version &lt; Gem::Version.new('5.2.2')\n=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1575985741, "creation_date": 1575921296, "last_edit_date": 1575921900, "question_id": 59255712, "link": "https://stackoverflow.com/questions/59255712/rails-console-or-irb-find-out-the-rails-version-of-the-current-environment", "title": "rails console OR irb find out the RAILS_VERSION of the current environment", "body": "<p>Somewhat related to:\n<a href=\"https://stackoverflow.com/questions/1589751/determine-ruby-version-from-within-rails\">Determine ruby version from within Rails</a></p>\n\n<p>How to find out the <code>RAILS_VERSION</code> from within <code>rails console</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1575919818, "post_id": 59255348, "comment_id": 104720349, "body": "You could check that on method create and skip if already some forum created by user. Or you can do some validations please check this page for more info and try here to find solution for your case: <a href=\"https://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Validations/ClassMethods/&hellip;</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575920474, "post_id": 59255348, "comment_id": 104720577, "body": "Welcome to SO! Read about the differences between an <a href=\"https://ruby-doc.org/core-2.6.5/Array.html\" rel=\"nofollow noreferrer\">Array</a> and a <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\">Set</a>. A Set will automatically do what you want."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12327335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8enwyAJyXuU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relXpztWaxOdLeCjJ5u36ifd2sfBg/photo.jpg?sz=128", "display_name": "Brian Murillo", "link": "https://stackoverflow.com/users/12327335/brian-murillo"}, "edited": false, "score": 0, "creation_date": 1575932956, "post_id": 59257393, "comment_id": 104725136, "body": "Thank you! yes this was the solution, it wasnt creating an additional forum. it just kept adding an entry for the same forum for user.forums , for each additional message that was created. This helped."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 0, "last_activity_date": 1575929419, "creation_date": 1575929419, "answer_id": 59257393, "question_id": 59255348, "link": "https://stackoverflow.com/questions/59255348/how-to-prevent-an-object-from-being-created-redundantly-in-a-many-to-many-relati/59257393#59257393", "title": "How to prevent an object from being created redundantly in a many-to-many relationship with a join", "body": "<p>You can define a <code>distinct</code> scope on the association:</p>\n\n<pre><code>has_many :forums, -&gt; { distinct }, through: :messages\n</code></pre>\n\n<p><a href=\"https://guides.rubyonrails.org/association_basics.html#scopes-for-has-many-distinct\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html#scopes-for-has-many-distinct</a></p>\n\n<p>EDIT: if your code is actually creating multiple forums it won't help since the forums won't be the same, if that's your case then show your form and your controller, if you are creating forums on each created message you have another problem</p>\n"}], "owner": {"reputation": 15, "user_id": 12327335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8enwyAJyXuU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relXpztWaxOdLeCjJ5u36ifd2sfBg/photo.jpg?sz=128", "display_name": "Brian Murillo", "link": "https://stackoverflow.com/users/12327335/brian-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 59257393, "answer_count": 1, "score": 0, "last_activity_date": 1575929419, "creation_date": 1575919495, "last_edit_date": 1575920798, "question_id": 59255348, "link": "https://stackoverflow.com/questions/59255348/how-to-prevent-an-object-from-being-created-redundantly-in-a-many-to-many-relati", "title": "How to prevent an object from being created redundantly in a many-to-many relationship with a join", "body": "<p>I'm building an API with Rails for a forum/chatroom. I have three models:</p>\n\n<pre><code>class User &lt; Application record\n  has_many messages\n  has_many :forums, through: :messages\n\nclass Message &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :forum\nend\n\nclass Forum &lt; ApplicationRecord\n  has_many :messages\n  has_many :users, through: :messages\nend\n</code></pre>\n\n<p>The idea is the user who is logged in can be a part of multiple different forums, and create a message in that specific forum. </p>\n\n<p>When the user creates a new message, it's also creating a new forum every time. So, the same user1 posts in the \"GENERAL\" forum multiple times resulting in:</p>\n\n<pre><code>User1.forums=[\"GENERAL\",\"GENERAL\",\"GENERAL\"]\n</code></pre>\n\n<p>This is breaking my front end. </p>\n\n<p>Is there a way to set-up the associations in a way that if the user already has this forum not to add the same one to its list of forums?</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll", "bundle", "rvm"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575920374, "post_id": 59255279, "comment_id": 104720548, "body": "Unhandled exception what? Is the last part of the error message missing?"}, {"owner": {"reputation": 11, "user_id": 9236671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f8864d67aed97ee9442f52cfcc85af1?s=128&d=identicon&r=PG&f=1", "display_name": "user9236671", "link": "https://stackoverflow.com/users/9236671/user9236671"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575999570, "post_id": 59255279, "comment_id": 104752528, "body": "No, that is the full output. The only thing I omitted was the area at the top where there&#39;s just a lot of output from the bundle install command - but I marked that with &quot;(bundle install output)&quot;."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576000181, "post_id": 59255279, "comment_id": 104752805, "body": "Why is part of the code running in <code>&#47;home&#47;nk42&#47;gems&#47;bin&#47;</code>, and another part under RVM? Do you have two separate Ruby installations on your server? In any case it looks like the sassc library is failing to load. I.e. some sort of binary incompatibility, or missing dynamic library is my guess."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576000461, "post_id": 59255279, "comment_id": 104752921, "body": "You could try to install the bundle into vendor instead of under RVM. In your project directory: <code>bundle install --path vendor</code>."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576000576, "post_id": 59255279, "comment_id": 104752969, "body": "If all else fails delete ALL ruby installations, reinstall only one, and try again. Binary incompatibilities with libraries usually happen when you build the lib for one Ruby version, and then load it with another Ruby version. It&#39;s very easy to create this situation by mistake if you have a system Ruby and an RVM Ruby running on the same machine."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1576000700, "post_id": 59255279, "comment_id": 104753022, "body": "If it still keeps failing, downgrade Ruby to a 2.5.x version and try again. If it still keeps failing after that, raise an issue on github for jekyll."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9236671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f8864d67aed97ee9442f52cfcc85af1?s=128&d=identicon&r=PG&f=1", "display_name": "user9236671", "link": "https://stackoverflow.com/users/9236671/user9236671"}, "is_accepted": false, "score": 0, "last_activity_date": 1576538080, "creation_date": 1576538080, "answer_id": 59365529, "question_id": 59255279, "link": "https://stackoverflow.com/questions/59255279/unhandled-exception-when-running-jekyll-4-0-0-using-bundler-1-17-2/59365529#59365529", "title": "Unhandled exception when running Jekyll 4.0.0 using Bundler 1.17.2", "body": "<p>It turned out to be a combination of problems. I'm still not entirely sure what the exact problem was, and unfortunately since I'm not an administrator on the server in question I can't dig too deeply into it. </p>\n\n<p>Taking the following steps resolved the problem:</p>\n\n<ol>\n<li>Run <code>gem install ffi; gem pristine --all</code>. After this, jekyll still gave a stack trace, but it looked more like the error on <a href=\"https://stackoverflow.com/questions/36828951/jekyll-fails-to-serve-ruby-incompatible-library-version\">this thread.</a></li>\n<li>Remove RVM, per the troubleshooting steps on the thread linked in #1.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9236671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f8864d67aed97ee9442f52cfcc85af1?s=128&d=identicon&r=PG&f=1", "display_name": "user9236671", "link": "https://stackoverflow.com/users/9236671/user9236671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576538080, "creation_date": 1575919115, "question_id": 59255279, "link": "https://stackoverflow.com/questions/59255279/unhandled-exception-when-running-jekyll-4-0-0-using-bundler-1-17-2", "title": "Unhandled exception when running Jekyll 4.0.0 using Bundler 1.17.2", "body": "<p>I'm trying to set up automated deploys for Jekyll on my server, based on the <a href=\"https://jekyllrb.com/docs/deployment/automated/#git-post-receive-hook\" rel=\"nofollow noreferrer\">instructions here</a>. Whenever I run Jekyll commands on the server I get the following output:</p>\n\n<pre><code>$ bundle install &amp;&amp; bundle exec jekyll -v\n(bundle install output)\nBundle complete! 6 Gemfile dependencies, 30 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n\nTraceback (most recent call last):\n    23: from /home/nk42/gems/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\n    22: from /home/nk42/gems/bin/ruby_executable_hooks:24:in `eval'\n    21: from /home/nk42/gems/bin/jekyll:23:in `&lt;main&gt;'\n    20: from /home/nk42/gems/bin/jekyll:23:in `load'\n    19: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-4.0.0/exe/jekyll:8:in `&lt;top (required)&gt;'\n    18: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-4.0.0/exe/jekyll:8:in `require'\n    17: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-4.0.0/lib/jekyll.rb:206:in `&lt;top (required)&gt;'\n    16: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-4.0.0/lib/jekyll.rb:206:in `require'\n    15: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-sass-converter-2.0.1/lib/jekyll-sass-converter.rb:4:in `&lt;top (required)&gt;'\n    14: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-sass-converter-2.0.1/lib/jekyll-sass-converter.rb:4:in `require'\n    13: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-sass-converter-2.0.1/lib/jekyll/converters/scss.rb:3:in `&lt;top (required)&gt;'\n    12: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/jekyll-sass-converter-2.0.1/lib/jekyll/converters/scss.rb:3:in `require'\n    11: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc.rb:31:in `&lt;top (required)&gt;'\n    10: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc.rb:31:in `require_relative'\n     9: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native.rb:5:in `&lt;top (required)&gt;'\n     8: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native.rb:6:in `&lt;module:SassC&gt;'\n     7: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native.rb:37:in `&lt;module:Native&gt;'\n     6: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native.rb:37:in `require_relative'\n     5: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native/lib_c.rb:3:in `&lt;top (required)&gt;'\n     4: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native/lib_c.rb:4:in `&lt;module:SassC&gt;'\n     3: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native/lib_c.rb:5:in `&lt;module:Native&gt;'\n     2: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/sassc-2.2.1/lib/sassc/native/lib_c.rb:10:in `&lt;module:LibC&gt;'\n     1: from /home/nk42/.rvm/gems/ruby-2.6.3/gems/ffi-1.11.3/lib/ffi/library.rb:275:in `attach_function'\n/home/nk42/.rvm/gems/ruby-2.6.3/gems/ffi-1.11.3/lib/ffi/library.rb:275:in `attach': unhandled exception\n</code></pre>\n\n<p>I get the same output whether I use <code>bundle exec jekyll ...</code> or just <code>jekyll ...</code>, and it happens no matter what directory I'm in.</p>\n\n<p>I'm able to run the same thing on my computer locally and it works. On both my computer and the server I'm running the following:</p>\n\n<ul>\n<li>rvm 1.29.9 (autolibs is disabled)</li>\n<li>ruby 2.6.3p62</li>\n<li>gem 3.0.3</li>\n<li>Bundler version 2.0.2</li>\n<li>Jekyll 4.0.0</li>\n</ul>\n\n<p>The server is a Dreamhost Shared Hosting account, which runs Ubuntu 18.04, and I set up RVM using the instructions on <a href=\"https://help.dreamhost.com/hc/en-us/articles/217185247-Ruby-Version-Manager-RVM-\" rel=\"nofollow noreferrer\">Dreamhost's help page</a>.</p>\n\n<p>I suspect this is an issue with the Ruby/RVM installation, since the same project works locally, but I'm not sure how to debug this or where to look for information. Any pointers would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "benchmarking", "instrumentation"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1575919386, "post_id": 59255218, "comment_id": 104720196, "body": "Well your workflow seems a little out of order. Why not reject, select uniq, and then sort in reverse order."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575919404, "post_id": 59255218, "comment_id": 104720201, "body": "<a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/logger/rdoc/index.html\" rel=\"nofollow noreferrer\">Logger</a> comes in Ruby&#39;s Standard Library. It&#39;s the best way to go about it as you can disable it easily without needing to remove all the <code>puts</code>."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1575919423, "post_id": 59255218, "comment_id": 104720210, "body": "You&#39;d be better off tackling this at the system level first; e.g., there&#39;s nothing intrinsically slow in the code fragment shown, although why you bother reversing the carts is beyond me. You&#39;re also fragmenting work that could just as easily be done in-line (rejecting). It&#39;s unlikely the slowdown is in this code, rather in making whatever API call you&#39;re making afterwards."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575919741, "post_id": 59255218, "comment_id": 104720320, "body": "May want to read this also. Some good tips, especially StackProf may suit your scenario: <a href=\"https://stackoverflow.com/questions/4092641/profiling-ruby-code\">stackoverflow.com/questions/4092641/profiling-ruby-code</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1575920437, "post_id": 59255218, "comment_id": 104720571, "body": "You can scale this down to <code>carts.select { |c| c[&#39;customer&#39;] }.uniq{|cart| cart[&#39;customer&#39;][&#39;id&#39;]}.sort {|a,b| Time.zone.parse(b[&#39;created_at&#39;]) &lt;=&gt; Time.zone.parse(a[&#39;created_at&#39;])}.each</code>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1575952268, "post_id": 59255218, "comment_id": 104729259, "body": "Use New Relic. It&#39;s a paid product."}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575919596, "creation_date": 1575918792, "last_edit_date": 1575919596, "question_id": 59255218, "link": "https://stackoverflow.com/questions/59255218/how-to-measure-ruby-statement-not-function-duration", "title": "How to measure Ruby statement, not function, duration", "body": "<p>I am told that my software runs too slowly in production. To identify the line of code that's slow, I would insert <code>puts</code> statements as shown below, and the logs would indicate timestamps for the output, by looking at the time intervals of the log I can see which statements take the most time.</p>\n\n<p>Is there a better way to go about this? I found some gems that measure at \"function\" level, but I'm aiming for \"statement level\" measurements.</p>\n\n<pre><code>def process_api_carts(shop)\n  puts \"B7BEC BCAA here2.1\"\n  pager = Pager.new(shop.shopify_client, '/admin/checkouts.json', 'checkouts') do |request|\n    request.params['updated_at_min'] = 1.day.ago.to_s(:abandoned_cart_timestamp)\n  end\n  puts \"B7BEC BCAA here2.2\"\n  carts = pager.to_a\n  puts \"B7BEC BCAA here2.3\"\n  carts.sort_by! do |cart|\n    Time.zone.parse(cart['created_at'])\n  end\n  puts \"B7BEC BCAA here2.4\"\n  carts.reverse!\n  puts \"B7BEC BCAA here2.5\"\n  # Some carts don't have a customer record attached. Don't know why\n  carts.reject! do |cart|\n    cart['customer'].nil?\n  end\n  puts \"B7BEC BCAA here2.6\"\n  carts.uniq! do |cart|\n    cart['customer']['id']\n  end\n  puts \"B7BEC BCAA here2.7\"\n  carts.each do |checkout|\n    begin\n      puts \"B7BEC BCAA here2.8\"\n      abandoned_cart = shop.abandoned_carts.create(\n        body: checkout.to_json,\n        shopify_id: checkout['id']\n      )\n      puts \"B7BEC BCAA here2.9\"\n      shop.events.create(\n        topic: Events::CartAbandoned::TOPIC,\n        body: {\n          type: 'api',\n          abandoned_cart_id: abandoned_cart.id\n        }.to_json\n      )\n      puts \"B7BEC BCAA here2.10\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "fxruby", "fox-toolkit"], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 1579771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/chkMw.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/1579771/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1598738108, "creation_date": 1598738108, "answer_id": 63652146, "question_id": 59254148, "link": "https://stackoverflow.com/questions/59254148/fxruby-foxfxtext-breaks-on-threaded-append/63652146#63652146", "title": "FXRuby Fox::FXText breaks on threaded append", "body": "<p>You should update interface elements from the UI thread, like so:</p>\n<pre><code>app.runOnUiThread do\n  @textArea.removeText(0, @textArea.length)\n  @textArea.appendText(&quot;Connected to port #{arr[1]}&quot;)\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12066324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf92425ef2dee7af96bc7f258a7bccb0?s=128&d=identicon&r=PG&f=1", "display_name": "LonelyLittleLucas", "link": "https://stackoverflow.com/users/12066324/lonelylittlelucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1598738108, "creation_date": 1575913922, "question_id": 59254148, "link": "https://stackoverflow.com/questions/59254148/fxruby-foxfxtext-breaks-on-threaded-append", "title": "FXRuby Fox::FXText breaks on threaded append", "body": "<p>I am trying to make a socket application with FXRuby, and everything works fine until the scroll bar gets added, and then the application crashes.</p>\n\n<p>doing research shows that the threading is the issue, but i dont know any work around. any ideas?</p>\n\n<p>this is the thread that causes the issue</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def listen()\n    Thread.new() do\n        begin\n            loop{\n                #gets the message from the socket\n                msg=@socket.gets()\n                arr=msg.split(' ')\n                msg=''\n                case arr[0]\n                when '/say'\n                    arr.delete_at(0)\n                    arr.each do |word|\n                        msg+=word + ' '\n                    end\n                    add(msg)\n                when '/cls'\n                    @textArea.removeText(0, @textArea.length)\n                when '/stp'\n                    abort\n                when '/conn'\n                    @socket=EzSSL::Client.new(@ip,arr[1].to_i)\n                    @textArea.removeText(0, @textArea.length)\n                    @textArea.appendText(\"Connected to port #{arr[1]}\")\n                end\n            }\n        rescue\n            #closes the ruby app on exception\n            abort\n        end\n    end\n  end\n</code></pre>\n\n<p>the add method adds the line of text to the FXText object</p>\n\n<p>the <code>EzSSL</code> module is a gem i created to make secure socket connections with openssl, and works like a normal socket connection</p>\n\n<p>i am new to the Fox-Toolkit and FXRuby, so any help is appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1575912119, "post_id": 59253668, "comment_id": 104717182, "body": "Are you aware that the password that was entered is not persisted to the database? But the password_digest is stored into the database. That means your validation for password presence will fail in each step unless the step in which the user actually enters a new password. Therefore you must validate that a password_digest exists. And the validation for the length doesn&#39;t make much sense in this context"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575914387, "post_id": 59253668, "comment_id": 104718176, "body": "<code>has_secure_password</code> already adds validations: presence, length and confirmation, you don&#39;t need to add your own validation, in your case they are enough <a href=\"https://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/SecurePassword/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 12506443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287c995bcbcd02497348a6f17f31bdb3?s=128&d=identicon&r=PG&f=1", "display_name": "byAz1ne", "link": "https://stackoverflow.com/users/12506443/byaz1ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575911747, "creation_date": 1575911747, "question_id": 59253668, "link": "https://stackoverflow.com/questions/59253668/impossible-to-encrypt-a-password-in-a-multi-step-form-with-bcrypt", "title": "impossible to encrypt a password in a multi-step form with bcrypt", "body": "<p><br>\nI'm a beginner in ruby on rails and I have a problem encrypting a password in my registration form.<br> I installed the bcrypt gem but I don't understand why the form doesn't work...<br> </p>\n\n<p><strong>my form model :</strong></p>\n\n<pre><code>module Wizard\n    module User\n        STEPS = %w(step1 step2 step3).freeze\n\n        class Base\n            include ActiveModel::Model\n            include ActiveModel::SecurePassword\n\n            attr_accessor :user    \n            has_secure_password\n\n            delegate *::User.attribute_names.map { |attr| [attr, \"#{attr}=\"] }.flatten, to: :user\n\n            def initialize(user_attributes)\n                @user = ::User.new(user_attributes)\n            end\n        end\n\n        class Step1 &lt; Base\n            validates :firstName, presence: {\n                message: 'Un pr\u00e9nom doit \u00eatre renseign\u00e9'\n            }, length: { maximum: 50, \n                too_long: '50 caract\u00e8res maximum pour le pr\u00e9nom' }\n            validates :lastName, presence: {\n                message: 'Un nom doit \u00eatre renseign\u00e9'\n            }, length: { maximum: 50, \n                too_long: '50 caract\u00e8res maximum pour le nom' }\n            VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n            validates :email, presence: true, length: { maximum: 255,\n                too_long: '255 caract\u00e8res maximum pour l\\'adresse mail' },\n                format: { with: VALID_EMAIL_REGEX,\n                message: 'Vous devez saisir une adresse mail valide' }\n        end\n\n        class Step2 &lt; Step1\n            validates :password, presence: true, length: { in: 8..15 }, length: { in: 8..15 }\n        end\n\n        class Step3 &lt; Step2\n            validates :school, presence: true\n            validates :typeOfTeacher, presence: true\n            validates :yearsOfExperience, presence: true\n        end\n    end\nend\n</code></pre>\n\n<p><strong>My model User.rb :</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n    validates :firstName, presence: true, length: { maximum: 50 }\n    validates :lastName, presence: true, length: { maximum: 50 }\n    VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n    validates :email, presence: true, length: { maximum: 255 },\n              format: { with: VALID_EMAIL_REGEX },\n              uniqueness: true\n    has_secure_password\n    validates :password, presence: true\n    validates :school, presence: true\n    validates :typeOfTeacher, presence: true\n    validates :yearsOfExperience, presence: true\nend\n</code></pre>\n\n<p><strong>My controller :</strong><br>\nWhen saving the user in my create function. The registration stops because of the password.<br> I think I'm using wrong has_secure_password.</p>\n\n<pre><code>class WizardsController &lt; ApplicationController\nbefore_action :load_user_wizard, except: %i(validate_step)\n\ndef validate_step\n    current_step = params[:current_step]\n\n    @user_wizard = wizard_user_for_step(current_step)\n    @user_wizard.user.attributes = user_wizard_params\n    session[:user_attributes] = @user_wizard.user.attributes\n\n    if @user_wizard.valid?\n        next_step = wizard_user_next_step(current_step)\n        create and return unless next_step\n\n        redirect_to action: next_step\n    else\n        render current_step\n    end\nend\n\ndef create\n    if @user_wizard.user.save\n        session[:user_attributes] = nil\n        redirect_to letsgo_path\n    else\n        redirect_to({ action: Wizard::User::STEPS.first } )\n    end\nend\n\nprivate\n\ndef load_user_wizard\n    @user_wizard = wizard_user_for_step(action_name)\nend\n\ndef wizard_user_next_step(step)\n    Wizard::User::STEPS[Wizard::User::STEPS.index(step) + 1]\nend\n\ndef wizard_user_for_step(step)\n    raise InvalidStep unless step.in?(Wizard::User::STEPS)\n\n    \"Wizard::User::#{step.camelize}\".constantize.new(session[:user_attributes])\nend\n\ndef user_wizard_params\n    params.require(:user_wizard).permit(:firstName, :lastName, :email, :password, :password_confirmation, :school, :typeOfTeacher, :yearsOfExperience)\nend\n\nclass InvalidStep &lt; StandardError; end\n</code></pre>\n\n<p>end</p>\n\n<p><strong>My view :</strong></p>\n\n<pre><code>&lt;div class=\"div_Signup\"&gt;\n    &lt;div class=\"div_SignupBlock\"&gt;\n        &lt;%= render 'navbarSignup' %&gt;\n        &lt;div class=\"div_SignupBlockInt\"&gt;\n            &lt;div class=\"div_SignupText\"&gt;\n                Inscription\n            &lt;/div&gt;\n            &lt;div class=\"div_SignupTextName\"&gt;\n                Choisissez un mot de passe\n            &lt;/div&gt;\n            &lt;div class=\"div_SignupForm\"&gt;\n                &lt;%= form_for @user_wizard, as: :user_wizard, url: validate_step_wizard_path do |f| %&gt;\n                    &lt;%= hidden_field_tag :current_step, 'step2' %&gt;\n                    &lt;div class=\"div_SignupInputPassword\"&gt;\n                        &lt;%= f.password_field :password, placeholder: 'Mot de passe', :class =&gt; field_class(@user_wizard, :password) %&gt;\n                        &lt;% @user_wizard.errors[:password].each do |message| %&gt;\n                            &lt;p style=\"color: red;\"&gt;&lt;%= message %&gt;&lt;/p&gt;\n                        &lt;% end %&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"div_SignupInputPasswordConfirmation\"&gt;\n                        &lt;%= f.password_field :password_confirmation, placeholder: 'Confirmation du mot de passe', class: 'input_Signup' %&gt;\n                    &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;%= f.submit 'Suivant', class: 'button_Signup' %&gt;\n                &lt;% end %&gt;\n        &lt;/div&gt;\n        &lt;footer class=\"footer_Signup\"&gt;\n            &lt;%= render 'footerSignup2' %&gt;\n        &lt;/footer&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I test my form when entering a password, I get error messages that show that the password cannot be empty,<br> and the password confirmation field does not work.\nHowever, I see that the password has been encrypted.<br><br>\n<strong>Thanks !!!</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "openssl"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 2, "creation_date": 1575918974, "post_id": 59252994, "comment_id": 104720026, "body": "did you try this <a href=\"https://stackoverflow.com/questions/59006602/dyld-library-not-loaded-usr-local-opt-openssl-lib-libssl-1-0-0-dylib\" title=\"dyld library not loaded usr local opt openssl lib libssl 1 0 0 dylib\">stackoverflow.com/questions/59006602/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 491758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c48c7b75cfd37131a1309b4041ce55?s=128&d=identicon&r=PG", "display_name": "eljamz", "link": "https://stackoverflow.com/users/491758/eljamz"}, "edited": false, "score": 1, "creation_date": 1588122230, "post_id": 61386487, "comment_id": 108777364, "body": "gem install mysql2 -- --with-opt-dir=&quot;$(brew --prefix openssl)&quot;  This is the correct command, is missing a quote"}, {"owner": {"reputation": 171, "user_id": 3999144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kgoyt.jpg?s=128&g=1", "display_name": "Colin Lee", "link": "https://stackoverflow.com/users/3999144/colin-lee"}, "reply_to_user": {"reputation": 116, "user_id": 491758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c48c7b75cfd37131a1309b4041ce55?s=128&d=identicon&r=PG", "display_name": "eljamz", "link": "https://stackoverflow.com/users/491758/eljamz"}, "edited": false, "score": 0, "creation_date": 1588942436, "post_id": 61386487, "comment_id": 109101190, "body": "Haha, nice catch!"}, {"owner": {"reputation": 1171, "user_id": 533290, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d191f8e5135ed79d855cd2b08503d12?s=128&d=identicon&r=PG", "display_name": "Hosang Jeon", "link": "https://stackoverflow.com/users/533290/hosang-jeon"}, "edited": false, "score": 0, "creation_date": 1610541538, "post_id": 61386487, "comment_id": 116165631, "body": "You saved my day!! Thanks."}], "tags": [], "owner": {"reputation": 171, "user_id": 3999144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kgoyt.jpg?s=128&g=1", "display_name": "Colin Lee", "link": "https://stackoverflow.com/users/3999144/colin-lee"}, "is_accepted": false, "score": 3, "last_activity_date": 1588942409, "last_edit_date": 1588942409, "creation_date": 1587642431, "answer_id": 61386487, "question_id": 59252994, "link": "https://stackoverflow.com/questions/59252994/library-not-loaded-libssl-1-0-0-dylib/61386487#61386487", "title": "Library not loaded libssl.1.0.0.dylib", "body": "<pre><code>gem uninstall mysql2\nbrew install openssl\ngem install mysql2 -- --with-opt-dir=\"$(brew --prefix openssl)\"\n</code></pre>\n\n<p>This works for me.</p>\n"}], "owner": {"reputation": 43, "user_id": 12177687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0672b4961654f8b6aa5b2cf283b68565?s=128&d=identicon&r=PG&f=1", "display_name": "ninebreaker", "link": "https://stackoverflow.com/users/12177687/ninebreaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1851, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1588942409, "creation_date": 1575909015, "question_id": 59252994, "link": "https://stackoverflow.com/questions/59252994/library-not-loaded-libssl-1-0-0-dylib", "title": "Library not loaded libssl.1.0.0.dylib", "body": "<p>I was working on trying to fix a bug I was encountering in Dragonfly with my images not having a decoding delegate, and one of the solutions I found was to remove Imagemagick and then reinstall from source. Since then whenever I try to start my rails server, bundle install, or add any ruby gems I get the following error message.</p>\n\n<pre><code>/Users/username/.rbenv/versions/2.1.2/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': dlopen(/Users/username/.rbenv/versions/2.1.2/lib/ruby/2.1.0/x86_64-darwin18.0/openssl.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib (LoadError)\n  Referenced from: /Users/username/.rbenv/versions/2.1.2/lib/ruby/2.1.0/x86_64-darwin18.0/openssl.bundle\n  Reason: image not found - /Users/username/.rbenv/versions/2.1.2/lib/ruby/2.1.0/x86_64-darwin18.0/openssl.bundle\n</code></pre>\n\n<p>I have tried removing and reinstalling openssl, brew update/upgrade. It has not budged.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1575908742, "post_id": 59252820, "comment_id": 104715592, "body": "What is &quot;the last 10 contacts&quot;? Unless there&#39;s some other code you&#39;re not showing us, like a <code>default_scope</code>, your code is essentially just fetching &quot;10 random contacts that have a message&quot;."}, {"owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575909602, "post_id": 59252820, "comment_id": 104716058, "body": "Sorry, I want to select the last 10 contacts from my messages table"}, {"owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575910090, "post_id": 59252820, "comment_id": 104716288, "body": "@spickermann I want to load the 10 contacts which got a message recently (by the created_at of the message)"}], "answers": [{"comments": [{"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1575909183, "post_id": 59252977, "comment_id": 104715842, "body": "I&#39;ve always had this doubt: At some point, does making two queries work better than  a join? Or perhaps, in some cases, an inner query instead of a join? I do not mean to doubt this answer. I believe it is the perfect one for the question. But I was hoping you could clear that doubt."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 1, "creation_date": 1575909766, "post_id": 59252977, "comment_id": 104716141, "body": "It really depends on your database schema, the table sizes and the indexes in place. My rule of thumb is that one query is most of the time faster than two queries. But you are right: When both tables are huge and have millions of rows then it might be a bad idea to JOIN them. But as long as the OP was happy with <code>Message.pluck(:contact_id).uniq.last(10)</code> (what loads all ids records into memory and then runs a seconds query) IMO it is safe to assume that the OP is dealing with tables that are small enough for the JOIN solution."}, {"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1575909844, "post_id": 59252977, "comment_id": 104716177, "body": "Yes, absolutely. This was just an added question, not particularly pertaining to the current question alone. Thanks for clearing that up."}, {"owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "edited": false, "score": 0, "creation_date": 1575910408, "post_id": 59252977, "comment_id": 104716426, "body": "sorry my english is not good @spickermann, for you, JOIN is better for huge tables? In my case I have to select the 10 or 15 last contacts that have generate a message in db (thats to say from the last messages)  without repeat the contact (uniq)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575910848, "post_id": 59252977, "comment_id": 104716618, "body": "What do you mean by <i>not working</i>? Is there an unexpected result or an error message?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575910912, "post_id": 59252977, "comment_id": 104716654, "body": "I mean: <code>JOIN</code> is better for small and midsize tables. <code>JOIN</code> is not a good idea for huge tables."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1575909195, "last_edit_date": 1575909195, "creation_date": 1575908958, "answer_id": 59252977, "question_id": 59252820, "link": "https://stackoverflow.com/questions/59252820/efficent-way-to-select-belongs-to-model-from-another-model-in-rails-5/59252977#59252977", "title": "Efficent way to select belongs_to model from another Model, in Rails 5?", "body": "<p>I would do this in one database query.</p>\n\n<pre><code>Contact\n  .distinct\n  .joins(:messages)\n  .order('messages.created_at DESC')\n  .limit(10)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1575908971, "creation_date": 1575908971, "answer_id": 59252982, "question_id": 59252820, "link": "https://stackoverflow.com/questions/59252820/efficent-way-to-select-belongs-to-model-from-another-model-in-rails-5/59252982#59252982", "title": "Efficent way to select belongs_to model from another Model, in Rails 5?", "body": "<p>You could try the following query:</p>\n\n<pre><code>Contact.where(id: Message.distinct.order(created_at: :desc).limit(10).select(:id))\n</code></pre>\n\n<p>This would produce the following SQL:</p>\n\n<pre><code>\"SELECT  DISTINCT \\\"messages\\\".\\\"id\\\" FROM \\\"messages\\\"   ORDER BY \\\"messages\\\".\\\"created_at\\\" DESC LIMIT 10\"\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575909636, "creation_date": 1575908396, "last_edit_date": 1575909636, "question_id": 59252820, "link": "https://stackoverflow.com/questions/59252820/efficent-way-to-select-belongs-to-model-from-another-model-in-rails-5", "title": "Efficent way to select belongs_to model from another Model, in Rails 5?", "body": "<p>I have 2 models: </p>\n\n<pre><code>Contact -&gt; has_many :messages \n</code></pre>\n\n<p>and </p>\n\n<pre><code>Message -&gt; belongs_to :contact\n</code></pre>\n\n<p>I want to select the last 10 contacts (as array of object, not only ids) from my messages table</p>\n\n<p>this is my attempt (and it works fine):</p>\n\n<pre><code>Contact.where(id: Message.pluck(:contact_id).uniq.last(10))\n</code></pre>\n\n<p>BUt is there another better or  rails way to do this?</p>\n\n<p><strong>EDIT</strong>\n<strong>I want to select the last 10 contacts from my messages table</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rails-console", "heroku-cli"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1575919560, "post_id": 59252617, "comment_id": 104720262, "body": "can you please check ruby and rails version installed on heroku and compare to your project versions?"}], "owner": {"reputation": 11, "user_id": 12502436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p8Kp1VhNHHk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdUIPor7XqA3gGaQ5ZlnYVOSVMmVw/photo.jpg?sz=128", "display_name": "Anthony Mazzola", "link": "https://stackoverflow.com/users/12502436/anthony-mazzola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1575907737, "creation_date": 1575907737, "question_id": 59252617, "link": "https://stackoverflow.com/questions/59252617/cannot-access-heroku-rails-console-from-terminal", "title": "Cannot access Heroku rails console from terminal", "body": "<p>I am working on a ruby-on rails application, trying to access the Heroku rails console for my production database. The current Gems I am using (that I think could be related) are: Bootsnap, Bootstrap, Devise, Carrierwave, figaro, and fog-aws.</p>\n\n<p>When I run <code>heroku run rails console</code> I get this error:</p>\n\n<pre><code>        31: from /app/bin/rails:9:in `&lt;main&gt;'\n        30: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n        29: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n        28: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n        27: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n        26: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n        25: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n        24: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/command.rb:46:in `invoke'\n        23: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/command/base.rb:69:in `perform'\n        22: from /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n        21: from /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n        20: from /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n        19: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/commands/console/console_command.rb:95:in `perform'\n        18: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/command/actions.rb:14:in `require_application_and_environment!'\n        17: from /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.4/lib/rails/command/actions.rb:22:in `require_application!'\n        16: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n        15: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n        14: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n        13: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n        12: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n        11: from /app/config/application.rb:2:in `&lt;top (required)&gt;'\n        10: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n         9: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n         8: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n         7: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n         6: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n         5: from /app/vendor/bundle/ruby/2.5.0/gems/carrierwave-2.0.2/lib/carrierwave.rb:59:in `&lt;top (required)&gt;'\n         4: from /app/vendor/bundle/ruby/2.5.0/gems/carrierwave-2.0.2/lib/carrierwave.rb:60:in `&lt;module:CarrierWave&gt;'\n         3: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'\n         2: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:79:in `rescue in load_missing_constant'\n         1: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'\n/app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:79:in `block in load_missing_constant': uninitialized constant Rails::Railtie (NameError)\n</code></pre>\n\n<p>After a bit of research there is a few things that I tried. </p>\n\n<p>to make sure I was logged in  I ran <code>heroku login</code> which <em>should</em> prompt a browser window to pop up for the CLI sign in, however that would stay in a constant loop not doing anything. With that I had to sign in with <code>sudo heroku login -i</code> and sign in through the terminal, which worked fine.</p>\n\n<p>after that I found someone on here with a slightly similar issue that got around this hangup with <code>heroku run bash</code> and <code>rails c</code>. while I was able to run bash, rails c still spit out the same error above.</p>\n\n<p>to check my loose ends I updated all my gems and the rails version and made sure that the updated versions were saved in the Gemfile as well as the Gemfile.lock.</p>\n\n<p>It is also worth noting that my local app as well as my Heroku app both are fully functional otherwise, and  I can access the usual rails console.</p>\n\n<p>any insight will be greatly appreciated, thanks ahead of time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "undefined", "mailer"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 9430067, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan Hilton", "link": "https://stackoverflow.com/users/9430067/dan-hilton"}, "is_accepted": true, "score": 0, "last_activity_date": 1575913544, "creation_date": 1575913544, "answer_id": 59254048, "question_id": 59252428, "link": "https://stackoverflow.com/questions/59252428/rspec-failing-tests-with-mailer/59254048#59254048", "title": "rspec failing tests with Mailer", "body": "<p>I believe this is happening because you haven't called <code>payment</code> to instantiate it. Therefore, there is no payment on the listings object.</p>\n\n<p>There are a number of ways around this, you can just call <code>payment</code> before your expectations or do something like </p>\n\n<pre><code>ListingMailer.sold_email(payment.listing)\n</code></pre>\n\n<p>or, have a trait in your listings factory so that it will create a complete payment object for you. Something like <code>create(:listing, :active, :complete_payment)</code></p>\n"}], "owner": {"reputation": 15, "user_id": 12447268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee00ffe9683f0f370e803846ccfdbaf2?s=128&d=identicon&r=PG&f=1", "display_name": "David Gordon", "link": "https://stackoverflow.com/users/12447268/david-gordon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 59254048, "answer_count": 1, "score": 0, "last_activity_date": 1575913544, "creation_date": 1575906954, "question_id": 59252428, "link": "https://stackoverflow.com/questions/59252428/rspec-failing-tests-with-mailer", "title": "rspec failing tests with Mailer", "body": "<p>I am getting an issue where the tests will not pass as it does not recognise <code>user</code> on <code>completed_payments</code> which is a method within the listing model. Would anyone know why this is happening?</p>\n\n<p>Error is:</p>\n\n<p>1) ListingMailer#sold_email \nFailure/Error: <p> Your item was bought by <strong>&lt;%= @listing.completed_payment.user.username %> (&lt;%= @listing.completed_payment.user.paypal_email %>)</strong> for the listed price of <strong>\u00a3&lt;%= \"%.2f\" % (@listing.price_cents/100.00) %></strong>.</p>\n     ActionView::Template::Error:\n       undefined method `user' for nil:NilClass</p>\n\n<p>Files as follows:</p>\n\n<p>listing_mailer.rb</p>\n\n<pre><code>class ListingMailer &lt; ApplicationMailer\n  def sold_email(listing)\n    @user = listing.user\n    @listing = listing\n    mail(to: listing.user_email, subject: 'You have sold one of your listings')\n  end\n</code></pre>\n\n<p>sold_email.html.erb</p>\n\n<pre><code>                        &lt;p&gt;Dear &lt;%= @user.first_name %&gt;,&lt;/p&gt;\n                        &lt;p&gt;Good news! You have made a sale:&lt;/p&gt;\n                        &lt;!-- Action --&gt;\n                        &lt;p&gt; &lt;%= link_to \"#{@listing.version_title} by #{@listing.artist_name}\", listing_url(@listing) %&gt;&lt;/p&gt;\n                        &lt;p&gt; Your item was bought by &lt;strong&gt;&lt;%= @listing.completed_payment.user.username %&gt; (&lt;%= @listing.completed_payment.user.paypal_email %&gt;)&lt;/strong&gt; for the listed price of &lt;strong&gt;\u00a3&lt;%= \"%.2f\" % (@listing.price_cents/100.00) %&gt;&lt;/strong&gt;.&lt;/p&gt;\n                        &lt;p&gt;The Paypal reference is &lt;%= @listing.completed_payment.paypal_reference %&gt;.&lt;/p&gt;\n                        &lt;p&gt;Thanks for using elvinyl,&lt;/p&gt;\n                        &lt;p&gt;Keith and the elvinyl team&lt;/p&gt;\n</code></pre>\n\n<p>listing_mailer_spec.rb</p>\n\n<pre><code>  describe '#sold_email' do\n    let(:listing) { create(:listing, :active) }\n    let(:payment) { create(:payment, status: :finished, listing: listing) }\n    let(:email)   { ListingMailer.sold_email(listing) }\n\n    it { expect(email.to).to eq([listing.user_email]) }\n    it { expect(email.from).to eq(ENV.fetch('EMAIL_FROM_ADDRESS')) }\n    it { expect(email.subject).to eq 'You have sold one of your listings' }\n  end\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker"], "comments": [{"owner": {"reputation": 13804, "user_id": 15754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DrITH.jpg?s=128&g=1", "display_name": "dbugger", "link": "https://stackoverflow.com/users/15754/dbugger"}, "edited": false, "score": 0, "creation_date": 1575905395, "post_id": 59251969, "comment_id": 104713760, "body": "Please share your docker file."}, {"owner": {"reputation": 579, "user_id": 4543241, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/gj0t4.jpg?s=128&g=1", "display_name": "Manish Nagdewani", "link": "https://stackoverflow.com/users/4543241/manish-nagdewani"}, "edited": false, "score": 0, "creation_date": 1575906656, "post_id": 59251969, "comment_id": 104714406, "body": "Can you please share docker-compose file here?"}, {"owner": {"reputation": 13804, "user_id": 15754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DrITH.jpg?s=128&g=1", "display_name": "dbugger", "link": "https://stackoverflow.com/users/15754/dbugger"}, "edited": false, "score": 0, "creation_date": 1575907560, "post_id": 59251969, "comment_id": 104714888, "body": "Don&#39;t seem to be copying the application code... Something like this after the bundle... <code>COPY . &#47;home&#47;app&#47;myapp</code>"}], "owner": {"reputation": 11, "user_id": 12467376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b88a5050b834fc1fd444a0a72adf5a0?s=128&d=identicon&r=PG&f=1", "display_name": "rappingbarley", "link": "https://stackoverflow.com/users/12467376/rappingbarley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575922277, "creation_date": 1575905319, "last_edit_date": 1575922277, "question_id": 59251969, "link": "https://stackoverflow.com/questions/59251969/docker-compose-up-keeps-looping-with-error-no-such-file-or-directory-rb-s", "title": "docker-compose up keeps looping with ERROR -- : No such file or directory @ rb_sysopen", "body": "<p>when I start my container with docker-compose up my app eventually gets stuck and repeats itself over and over with these lines:</p>\n\n<p>I, [2019-12-09T15:19:35.396147 #342]  INFO -- : Refreshing Gem list </p>\n\n<p>E, [2019-12-09T15:19:47.019123 #342] ERROR -- : No such file or directory @ rb_sysopen - /usr/src/app/config/environments/development.rb (Errno::ENOENT)</p>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>The thing is, when I open the container bash and use ls, I can see that the file is in the path that he can't seem to find. </p>\n\n<p>Any advice on how to fix this problem? Thank you!</p>\n\n<p>EDIT: Dockerfile</p>\n\n<pre><code>FROM ruby:2.6.3-alpine3.9\n\nENV APP_HOME /usr/src/app\n\nENV CONTAINERNAME_ENVIRONMENT docker\n\nEXPOSE 80\n\nWORKDIR $APP_HOME\n\nCOPY Gemfile* $APP_HOME/\n\n# general dependencies\nRUN apk update\nRUN set -ex \\\n  &amp;&amp; apk add --no-cache libpq imagemagick nodejs bash gcompat git\n\n# poltergeist, see https://github.com/Overbryd/docker-phantomjs-alpine/releases\nENV PHANHOME /usr/share\nRUN apk add --no-cache fontconfig curl &amp;&amp; \\\n  mkdir -p $PHANHOME \\\n  &amp;&amp; curl -L https://github.com/Overbryd/docker-phantomjs-alpine/releases/download/2.11/phantomjs-alpine-x86_64.tar.bz2 | tar xj -C $PHANHOME \\\n  &amp;&amp; ln -s $PHANHOME/phantomjs/phantomjs /usr/bin/phantomjs \\\n  &amp;&amp; phantomjs --version\n\n# build dependencies\nRUN set -ex \\\n   &amp;&amp; apk add --no-cache --virtual builddependencies \\\n       linux-headers \\\n       libpq \\\n       tzdata \\\n       build-base \\\n       postgresql-dev \\\n       imagemagick-dev \\\n   &amp;&amp; bundle install \\\n   &amp;&amp; apk del builddependencies\nCMD [\"bundle\", \"exec\", \"unicorn\", \"--port\", \"80\"]\n</code></pre>\n\n<p>EDIT: docker-compose.yml</p>\n\n<pre><code>version: '3'\nservices:\n  postgresql:\n    image: postgres:9.6.2-alpine\n    container_name: postgresql-dev\n    environment:\n      - APPLICATION=myapp\n      - POSTGRES_PASSWORD=myapp\n      - POSTGRES_USER=my_app\n      - POSTGRES_DB=myapp\n    ports:\n      - 5432:5432\n  imimap:\n    build: .\n    image: myapp:dev\n    container_name: myapp-dev\n    environment:\n      - APPLICATION=myapp\n      - POSTGRES_PASSWORD=myapp\n      - POSTGRES_USER=my_app\n      - POSTGRES_DB=myapp\n      - RAILS_MASTER_KEY=${RAILS_MASTER_KEY}\n      - LDAP=${LDAP}\n    depends_on:\n      - postgresql\n    volumes:\n      - ./logc:/usr/src/app/log\n      - .:/usr/src/app\n    links:\n      - postgresql\n    ports:\n      - 8080:80\n    #entrypoint:\n    #  - ci-cd/stall.sh\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "irb"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1575898093, "post_id": 59249789, "comment_id": 104709459, "body": "because <code>return</code> doesn&#39;t have a value, none at all. But you need <i>something</i> to put in an array."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1575898251, "post_id": 59249789, "comment_id": 104709546, "body": "Just use the values in the array; don&#39;t try to return from <i>within</i> an array value."}, {"owner": {"reputation": 51, "user_id": 12366414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2c768fb938a774b48e77182ff2e3ba?s=128&d=identicon&r=PG&f=1", "display_name": "mbronek7", "link": "https://stackoverflow.com/users/12366414/mbronek7"}, "edited": false, "score": 0, "creation_date": 1575898686, "post_id": 59249789, "comment_id": 104709784, "body": "but why ruby interpreter does not allow me to use return in array, like in another example: <code>def a(x)  x; end</code> a(return 1) -- also void value expression, I do not understand it"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1575898804, "post_id": 59249789, "comment_id": 104709838, "body": "Because it&#39;s non-sensical."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1575898816, "post_id": 59249789, "comment_id": 104709844, "body": "Because it doesn&#39;t make sense"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1575898543, "creation_date": 1575898543, "answer_id": 59250051, "question_id": 59249789, "link": "https://stackoverflow.com/questions/59249789/ruby-void-value-expression/59250051#59250051", "title": "ruby void value expression", "body": "<p>In order to construct the array, Ruby has to first evaluate the contents of the array. However, the contents of both arrays are a <code>return</code> expression which ends the evaluation of the method. In other words, the array will never be constructed, it is completely useless.</p>\n\n<p>Ruby syntactically detects this situation, and makes it an error instead of executing useless code.</p>\n\n<p>In Ruby, everything is an expression, which means everything has a value. However, for <code>return</code>, that puts us into a bit of a pickle: what should the value of the <code>return</code> expression be? Actually, it has no sensible value, because the current context is exited as soon as <code>return</code> is evaluated.</p>\n\n<p>So, the value of <code>return</code> is assumed to be the <em>void value</em>, and whenever you use the <em>void value</em> in an expression context, i.e. where you would expect the value to be used further, that is an error.</p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1575898572, "creation_date": 1575898572, "answer_id": 59250061, "question_id": 59249789, "link": "https://stackoverflow.com/questions/59249789/ruby-void-value-expression/59250061#59250061", "title": "ruby void value expression", "body": "<p>You're trying to return a value that the parser can't determine.  This is because the return is in the midst of an array definition.</p>\n\n<p>Better might be...</p>\n\n<pre><code>return [1]\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>def a\n  [(my_boolean_method ? 1 : 2)]\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12366414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2c768fb938a774b48e77182ff2e3ba?s=128&d=identicon&r=PG&f=1", "display_name": "mbronek7", "link": "https://stackoverflow.com/users/12366414/mbronek7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 59250051, "answer_count": 2, "score": 2, "last_activity_date": 1575898572, "creation_date": 1575897600, "question_id": 59249789, "link": "https://stackoverflow.com/questions/59249789/ruby-void-value-expression", "title": "ruby void value expression", "body": "<p>why I am getting void value expression error?</p>\n\n<p>Code</p>\n\n<pre><code>[return 1]\n</code></pre>\n\n<p>And error from rib:</p>\n\n<p><code>SyntaxError ((irb):3: void value expression)</code></p>\n\n<p>same situation here:</p>\n\n<pre><code>def a\n[\n  return 1 if true\n  2\n]\nend\n\n</code></pre>\n"}, {"tags": ["ruby", "file", "uri", "permission-denied"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1575899266, "post_id": 59248041, "comment_id": 104710115, "body": "It is possible that your OS refuses to delete open files. Try deleting the file after the block closes (which automatically closes the file)."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1575911421, "post_id": 59248041, "comment_id": 104716872, "body": "@Vishnukk Feel free to accept/upvote if it helped you :)"}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 6810066, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9a929ff73c337574f3c5c2fee84675e3?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnukk", "link": "https://stackoverflow.com/users/6810066/vishnukk"}, "edited": false, "score": 0, "creation_date": 1576045909, "post_id": 59248772, "comment_id": 104766515, "body": "The motive is to hide the original URLs from the end-users and hence I thought of uploading as a file rather than the URL directly."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1575893799, "creation_date": 1575893799, "answer_id": 59248772, "question_id": 59248041, "link": "https://stackoverflow.com/questions/59248041/file-delete-in-ruby/59248772#59248772", "title": "File delete in ruby", "body": "<p>Alternatively, this can be done as -</p>\n\n<p>Assuming there is an <code>image</code> attribute mounted for CarrierWave uploader</p>\n\n<pre><code>def store_url_image(img_url: DEFAULT_IMAGE)\n  self.remote_image_url = img_url\n  self.save\nend\n\nobject.store_url_image(img_url: \"http://apod.nasa.gov/apod/image/1407/m31_bers_960.jpg\")\n</code></pre>\n\n<p><a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Upload-remote-image-urls-to-your-seedfile\" rel=\"nofollow noreferrer\">#Reference Upload remote image url</a></p>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "is_accepted": false, "score": 1, "last_activity_date": 1575893884, "creation_date": 1575893884, "answer_id": 59248793, "question_id": 59248041, "link": "https://stackoverflow.com/questions/59248041/file-delete-in-ruby/59248793#59248793", "title": "File delete in ruby", "body": "<p>This is a  permissions issue on your /usr/local/lib/ directory &amp; you could grant the current user the necessary permissions and then try re-executing the brew cleanup command. Something along the lines of:</p>\n\n<pre><code>sudo chown -R $(whoami) /usr/local/lib\n\nbrew cleanup\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 6810066, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9a929ff73c337574f3c5c2fee84675e3?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnukk", "link": "https://stackoverflow.com/users/6810066/vishnukk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575900154, "creation_date": 1575891365, "last_edit_date": 1575900154, "question_id": 59248041, "link": "https://stackoverflow.com/questions/59248041/file-delete-in-ruby", "title": "File delete in ruby", "body": "<p>I have written a piece of code that creates a new file, downloads the contents in the image URL into the file and uploads it to carrierwave using 'mount_base64_uploader'. After this operation, I have to delete the file. My code looks like below</p>\n\n<pre><code>open(self.name + '.png', 'wb') do |readfile|\n  unless self.image_url.nil?\n    if self.image_url =~ URI::regexp\n      readfile &lt;&lt; open(self.image_url).read\n    else \n      readfile &lt;&lt; open(DEFAULT_IMAGE).read\n    end  \n  else\n    readfile &lt;&lt; open(DEFAULT_IMAGE).read\n  end\n  self.file = readfile\n  File.delete(readfile)\nend\n</code></pre>\n\n<p>where DEFAULT_IMAGE is a default image URL that serves as a placeholder. However, I get an error when it tries to delete the file as</p>\n\n<blockquote>\n  <p>Permission denied @ unlink_internal</p>\n</blockquote>\n\n<p>Could anyone guide me here if I need to change the code or add permissions explicitly.</p>\n"}, {"tags": ["ruby", "foreach", "termux"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575903384, "post_id": 59247465, "comment_id": 104712580, "body": "What is it that you&#39;re actually trying to do here?  It&#39;s not clear from your code. What is the expected behavior?"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575907667, "post_id": 59247465, "comment_id": 104714947, "body": "On linux, the expected behaviour is to get the status of processes. The string returned by <code>IO.readlines(...)[1]</code> should contain <code>&quot;Umask:\\t0022\\n&quot;</code> or <code>&quot;State:\\tZ (zombie)\\n&quot;</code>. In case of this program, it shouldn&#39;t be a zombie, because it&#39;s the current ruby process. I was going to loop through all the files, and count the number of running, sleeping, idle, and zombie processes on GNU/Linux. The actual implementation is here: <a href=\"https://github.com/Souravgoswami/cowspeak/blob/057532a8aaa0020ad4959dd216738aa0bdc9950e/cowspeak#L560\" rel=\"nofollow noreferrer\">github.com/Souravgoswami/cowspeak/blob/&hellip;</a> Here I have updated it to <code>IO.readlines</code> instead of <code>IO#foreach</code>."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575907795, "post_id": 59247465, "comment_id": 104715023, "body": "What version of ruby are you running? Also your example code use of <code>foreach</code> doesn&#39;t reflect anything what you&#39;re doing in your blob"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575908125, "post_id": 59247465, "comment_id": 104715215, "body": "The Ruby version is 2.6.2..2.6.4. This problem happens specifically with the Ruby on Termux, on GNU/Linux (Ruby 2.3..2.7) it runs fine..."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575908453, "post_id": 59247465, "comment_id": 104715404, "body": "For example <a href=\"https://imgur.com/8ilJskC\" rel=\"nofollow noreferrer\">imgur.com/8ilJskC</a>"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575889294, "creation_date": 1575889294, "question_id": 59247465, "link": "https://stackoverflow.com/questions/59247465/segmentation-fault-while-trying-to-read-a-file-with-io-foreach", "title": "Segmentation fault while trying to read a file with IO.foreach", "body": "<p>I am running Ruby on my phone with Termux to check the number of Zombie processes.</p>\n\n<p>Very weirdly, while trying to read a file with <code>IO#foreach</code>:</p>\n\n<pre><code>IO.foreach(\"/proc/#{$$}/status\").tap(&amp;:next).next\n</code></pre>\n\n<p>Ruby is crashing with <code>Segmentation fault</code>, both in a file and in <em>irb</em>.</p>\n\n<p>But I can read the file with:</p>\n\n<pre><code>IO.readlines(\"/proc/#{$$}/status\")[1]\n</code></pre>\n\n<p>Both of the codes are working on my PCs.</p>\n\n<p>What's wrong with <code>foreach</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "destroy"], "comments": [{"owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1575887689, "post_id": 59246816, "comment_id": 104704054, "body": "You need to provide more context of the relation; does the user has some content. how is it related. What is the code in the index page ? If you are referencing to the user somewhere else after it is deleted, you will get errrors."}, {"owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "reply_to_user": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1575889719, "post_id": 59246816, "comment_id": 104705085, "body": "Yes sorry, i can resolve the problem with  &gt;&gt; has_many :articles, foreign_key: &#39;author_id&#39;, class_name: &quot;Article&quot;, dependent: :destroy In fact this was cause because I got some &quot;class_name&quot; I don&#39;t take in consideration"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 1, "creation_date": 1575889606, "post_id": 59247133, "comment_id": 104705040, "body": "Thanks for your answer! I still had some problem with only dependent: :destroy, I can resolve it with foreign_key &gt;&gt; has_many :articles, foreign_key: &#39;author_id&#39;, class_name: &quot;Article&quot;, dependent: :destroy"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1575888125, "creation_date": 1575888125, "answer_id": 59247133, "question_id": 59246816, "link": "https://stackoverflow.com/questions/59246816/devise-destroy-user-create-bug-in-index-page/59247133#59247133", "title": "Devise destroy user create bug in index page", "body": "<p>Rails gives you two options, from their guide:</p>\n\n<p><a href=\"https://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_one\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_one</a></p>\n\n<pre><code>has_one :credit_card, dependent: :destroy  # destroys the associated credit card\nhas_one :credit_card, dependent: :nullify  # updates the associated records foreign key value to NULL rather than destroying it\n</code></pre>\n\n<p>As you can see from the comments, the first option, <code>dependent: :destroy</code>, will delete any associated content when the user is destroyed. <code>dependent: :nullify</code> will set the user_id for the content to null</p>\n\n<p>In your case, it appears a user has_many contents? Or has_one :content, either way the dependent: :destroy bit would be the same. To destroy the content when a user is destroyed:</p>\n\n<pre><code>has_one :content, dependent: :destroy\n</code></pre>\n\n<p>or</p>\n\n<pre><code>has_many :contents, dependent: :destroy\n</code></pre>\n\n<p>And to keep the content but set its owner to nil:</p>\n\n<pre><code>has_one :content, dependent: :mullify\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1575953011, "accepted_answer_id": 59247133, "answer_count": 1, "score": 0, "last_activity_date": 1575888125, "creation_date": 1575887058, "question_id": 59246816, "link": "https://stackoverflow.com/questions/59246816/devise-destroy-user-create-bug-in-index-page", "closed_reason": "Not suitable for this site", "title": "Devise destroy user create bug in index page", "body": "<p>I got a problem with my website in local when I delete an User with Devise on rails. The user is correctly deleted but now, when I go on the event index page, with normally a list of all the event, I got this message : </p>\n\n<blockquote>\n  <p>undefined method `pseudo' for nil:NilClass</p>\n</blockquote>\n\n<p>It's because the deleted user has created event before being destroy, but now the application couldn't find the creator of the event etc...</p>\n\n<p>I don't know how to fix it : <br/>\n - How can I do if I want to keep the content he had created?<br/>\n - should I delete all the content that the user delete in the same time?<br/></p>\n\n<p>I don't know if my problem is clear but I hope someone can help, thanks! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "answers": [{"comments": [{"owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1575885483, "post_id": 59246283, "comment_id": 104702842, "body": "Oh nope, thank you. what a stupid mistake"}, {"owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "reply_to_user": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1575885520, "post_id": 59246283, "comment_id": 104702867, "body": "who doesnt make mistakes :) no big deal"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1575888861, "post_id": 59246283, "comment_id": 104704678, "body": "@BorisKuzevanov Please accept the answer if it answered your question."}], "tags": [], "owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1575885144, "creation_date": 1575885144, "answer_id": 59246283, "question_id": 59246253, "link": "https://stackoverflow.com/questions/59246253/aws-error-production-database-is-not-configured/59246283#59246283", "title": "AWS Error: &#39;production&#39; database is not configured", "body": "<p>your database.yml file has a typo <code>prodcution</code>, shouldn't it be <code>production</code>. </p>\n"}], "owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1575931899, "accepted_answer_id": 59246283, "answer_count": 1, "score": 0, "last_activity_date": 1575885144, "creation_date": 1575885006, "question_id": 59246253, "link": "https://stackoverflow.com/questions/59246253/aws-error-production-database-is-not-configured", "closed_reason": "Not suitable for this site", "title": "AWS Error: &#39;production&#39; database is not configured", "body": "<p>I trying to deploy my app on AWS with remote mysql server but I have this error when I trying to Oper rails c or do rake db. This is nginx error:</p>\n\n<pre><code>App 14089 output: Error: The application encountered the following error: 'production' database is not configured. Available: [\"prodcution\"] (ActiveRecord::AdapterNotSpecified)\n</code></pre>\n\n<p>Also I tried to looking for in google, but articles like this doesn't help me.\n<a href=\"https://stackoverflow.com/questions/20351976/production-database-is-not-configured\">Production database is not configured</a></p>\n\n<p>My database.yml:</p>\n\n<pre><code>prodcution:\n  adapter: mysql2\n  encoding: utf8\n  database: \"mydb\"\n  username: \"mydbuser\"\n  password: \"mydbpassword\"\n  port: 3306\n  host: \"mydb.amazon.rds.amazonaws.com\"\n</code></pre>\n\n<p>What I do wrong?\nThanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11, "user_id": 12504167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a77c8c32568c61825a34992f223771b?s=128&d=identicon&r=PG&f=1", "display_name": "REV", "link": "https://stackoverflow.com/users/12504167/rev"}, "edited": false, "score": 0, "creation_date": 1576054120, "post_id": 59245981, "comment_id": 104769842, "body": "first problem solved, it was enough to do it like this: &lt;% @services.each do |service, rating| %&gt;"}], "owner": {"reputation": 11, "user_id": 12504167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a77c8c32568c61825a34992f223771b?s=128&d=identicon&r=PG&f=1", "display_name": "REV", "link": "https://stackoverflow.com/users/12504167/rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575884157, "creation_date": 1575883924, "last_edit_date": 1575884157, "question_id": 59245981, "link": "https://stackoverflow.com/questions/59245981/ruby-on-rails-iteration-of-two-tables-loading-id", "title": "Ruby on Rails Iteration of two tables, loading id", "body": "<p>learning Rails I encountered a problem. I don't know how to encrypt two tables and how to read the service ID.</p>\n\n<p>First problem. I would like to display the average of service / service ratings (rating.rate) along with the service table.</p>\n\n<p>I have 2 tables:</p>\n\n<pre><code>class Service &lt; ApplicationRecord\nbelongs_to :user\nhas_many :ratings, :foreign_key =&gt; \u201cservice_id\u201d\nend\n\nclass Rating &lt; ApplicationRecord\nbelongs_to :user\nbelongs_to :service\nend\n</code></pre>\n\n<p>and devise:</p>\n\n<pre><code>class User &lt; ApplicationRecord\ndevise :database_authenticatable, :registerable,\n:recoverable, :rememberable, :validatable\nhas_many :services, :foreign_key =&gt; \u201cuser_id\u201d\nhas_many :ratings, :foreign_key =&gt; \u201cuser_id\u201d\nend\n</code></pre>\n\n<p>I would like to enumerate Service and Rating and display them in one table. I created a variable:</p>\n\n<pre><code>@services = Service.left_outer_joins(:ratings) (I don't know if this is good, but it doesn't display an error)\n</code></pre>\n\n<p>I iterated the services like this:\n<code>&lt;% @services.each do |service| %&gt;</code> and it was good.\nUnfortunately, I do not know how to spell services with ratings with left outer join (so that where the rating is, it would display the average of all user ratings, and where there is null, it would be \"none\")</p>\n\n<p>The second problem is when adding a new rating, how to read service_id?\nuser_id from devise loading in create method:</p>\n\n<pre><code>@service.user = current_user\n</code></pre>\n\n<p>Where should the best add button be located to read service_id from there? index or show or something else?</p>\n\n<p>I hope that I described my problems quite clearly and did not mix up anything :)</p>\n"}, {"tags": ["ruby", "gcc", "nokogiri"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575883476, "post_id": 59245644, "comment_id": 104701789, "body": "Have you tried these? <a href=\"https://github.com/sparklemotion/nokogiri/issues/1257\" rel=\"nofollow noreferrer\">github.com/sparklemotion/nokogiri/issues/1257</a>"}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575883583, "post_id": 59245644, "comment_id": 104701834, "body": "@Casper yes i have <code>CC=llvm-gcc gem install nokogiri</code> did not work and since i do not have <code>apple-gcc42</code> so i did not need to uninstall it"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575884648, "post_id": 59245644, "comment_id": 104702413, "body": "What if you uninstall gcc completely? If no tricks are working, then perhaps open an issue on the nokogiri repo. You could of course also try to fix it yourself if you&#39;re not afraid of a bit of tinkering (git clone the repo, and fix the command line switches, or figure out why it sets them incorrectly for gcc on Catalina)."}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575886341, "post_id": 59245644, "comment_id": 104703334, "body": "Thanks @Casper for the tip"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575919838, "post_id": 59245644, "comment_id": 104720359, "body": "Have you installed <a href=\"https://developer.apple.com/xcode/\" rel=\"nofollow noreferrer\">XCode</a>? Its command-line tools are what gem always uses when I install anything with native code."}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575952401, "post_id": 59245644, "comment_id": 104729287, "body": "@theTinMan yes i have Xcode installed"}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575952429, "post_id": 59245644, "comment_id": 104729293, "body": "I ended up fixing this my removing the gcc completely and it worked. thanks @Casper"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575955331, "post_id": 59245644, "comment_id": 104730055, "body": "That&#39;s great. Nice. You can answer your own question and approve it, so others can see it too."}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "edited": false, "score": 0, "creation_date": 1575955589, "post_id": 59245644, "comment_id": 104730120, "body": "Yes, just added."}], "answers": [{"tags": [], "owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "is_accepted": true, "score": 0, "last_activity_date": 1576045334, "last_edit_date": 1576045334, "creation_date": 1575955553, "answer_id": 59260748, "question_id": 59245644, "link": "https://stackoverflow.com/questions/59245644/how-to-install-nokogiri-using-gcc-on-macos-catalina/59260748#59260748", "title": "How to install Nokogiri using gcc on MacOS Catalina", "body": "<p>To solve the problem I deleted the gcc I installed, located at <code>/usr/local/bin/gcc</code>, and that seems to have solved my problem. When I ran the command</p>\n\n<pre><code>which gcc\n</code></pre>\n\n<p>the output I got was:</p>\n\n<pre><code>/usr/local/bin/gcc\n</code></pre>\n\n<p>I needed the one that Apple installed located at <code>/usr/bin/gcc</code>.</p>\n"}], "owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 59260748, "answer_count": 1, "score": 0, "last_activity_date": 1576045334, "creation_date": 1575882689, "last_edit_date": 1575920014, "question_id": 59245644, "link": "https://stackoverflow.com/questions/59245644/how-to-install-nokogiri-using-gcc-on-macos-catalina", "title": "How to install Nokogiri using gcc on MacOS Catalina", "body": "<p>I am trying to install Nokogiri on my MacOS Catalina 10.15.1 system.</p>\n\n<pre><code>gem install nokogiri\n</code></pre>\n\n<p>The error in the log file is:</p>\n\n<pre><code>\"gcc -o conftest -I/Users/shairyar/.rvm/rubies/ruby-2.6.3/include/ruby-2.6.0/x86_64-darwin18 -I/Users/shairyar/.rvm/rubies/ruby-2.6.3/include/ruby-2.6.0/ruby/backward -I/Users/shairyar/.rvm/rubies/ruby-2.6.3/include/ruby-2.6.0 -I. -I/usr/local/opt/readline/include -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl@1.1/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wdivision-by-zero -Wimplicit-function-declaration -Wimplicit-int -Wpointer-arith -Wshorten-64-to-32 -Wwrite-strings -Wmissing-noreturn -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wunused-variable -Wextra-tokens  -fno-common -pipe  -I /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2 conftest.c  -L. -L/Users/shairyar/.rvm/rubies/ruby-2.6.3/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl@1.1/lib -L. -L/usr/local/opt/readline/lib -fstack-protector-strong -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl@1.1/lib     -lruby.2.6    \"\n    gcc: error: unrecognized command line option '-Wdivision-by-zero'; did you mean '-Wdiv-by-zero'?\n    gcc: error: unrecognized command line option '-Wshorten-64-to-32'\n    gcc: error: unrecognized command line option '-Wextra-tokens'; did you mean '-Wextra-semi'?\n    checked program was:\n    /* begin */\n    1: #include \"ruby.h\"\n    2:\n    3: int main(int argc, char **argv)\n    4: {\n    5:   return 0;\n    6: }\n    /* end */\n</code></pre>\n\n<p>I have been searching and tried installing gcc using <code>brew install gcc</code> and <code>brew link gcc</code> but that does not help. </p>\n\n<p>Here is the gcc version I have:</p>\n\n<pre><code>$which gcc\n/usr/local/bin/gcc\n\n$gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-apple-darwin19/9.2.0/lto-wrapper\nTarget: x86_64-apple-darwin19\nConfigured with: ../gcc-9.2.0/configure --build=x86_64-apple-darwin19 --disable-nls --enable-checking=release --with-system-zlib --disable-multilib --with-sysroot=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk --enable-languages=c,c++,fortran --with-gmp=/usr/local --with-mpc=/usr/local --with-mpfr=/usr/local\nThread model: posix\ngcc version 9.2.0 (GCC)\n</code></pre>\n\n<p>I also tried the following which did not work:</p>\n\n<ol>\n<li><code>gem install nokogiri -- --use-system-libraries</code></li>\n<li><code>CC=llvm-gcc gem install nokogiri</code></li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1575882132, "post_id": 59245409, "comment_id": 104701112, "body": "<a href=\"https://stackoverflow.com/questions/22187880/what-does-the-pipe-character-mean-in-a-regular-expression/22187948#22187948\">Alternation operator</a>."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1575882304, "post_id": 59245409, "comment_id": 104701187, "body": "That simple!! Thank you"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575881786, "creation_date": 1575881786, "question_id": 59245409, "link": "https://stackoverflow.com/questions/59245409/ruby-regex-to-split-on-multiple-delimeters", "title": "Ruby regex to split on multiple delimeters", "body": "<p>I'm trying to split a string that contains both a comma and the word 'and'.</p>\n\n<p>Example:</p>\n\n<p>'one, two and three'</p>\n\n<p>I can get a split working on the comma or the 'and', but not both.</p>\n\n<p>Could anyone help please?</p>\n\n<p>The closest I got was:</p>\n\n<pre><code>str = 'one, two and three'\n\nstr.split(/,\\W+/)\n\n&gt; [\"one\", \"two and three\"]\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1575878637, "post_id": 59244419, "comment_id": 104699675, "body": "I haven&#39;t dug into your code to know if this is even relevant, but you should consider using something like <a href=\"https://github.com/ruby-concurrency/concurrent-ruby\" rel=\"nofollow noreferrer\">github.com/ruby-concurrency/concurrent-ruby</a> for arrays that you want to be thread-safe."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575881836, "post_id": 59244419, "comment_id": 104700977, "body": "HTTParty is not thread safe: <a href=\"https://github.com/jnunemaker/httparty/issues/511\" rel=\"nofollow noreferrer\">github.com/jnunemaker/httparty/issues/511</a>"}], "answers": [{"comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1575964145, "post_id": 59250094, "comment_id": 104733135, "body": "This looks very interesting. Unfortunately I am running Ruby from within a desktop Application (SketchUp) and there are often issues with gems. A native solution would be preferred. I was thinking to wrap the call to HTTParty within a new class and then instantiate a new object for each thread. There are are just a few threads so resources should not be an issue. I&#39;ll test later on"}], "tags": [], "owner": {"reputation": 441, "user_id": 3275798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5Ypg.jpg?s=128&g=1", "display_name": "cavin kwon", "link": "https://stackoverflow.com/users/3275798/cavin-kwon"}, "is_accepted": true, "score": 1, "last_activity_date": 1575898691, "creation_date": 1575898691, "answer_id": 59250094, "question_id": 59244419, "link": "https://stackoverflow.com/questions/59244419/ruby-arrays-and-threads/59250094#59250094", "title": "Ruby arrays and Threads", "body": "<p>I recommend you <a href=\"https://github.com/ruby-concurrency/concurrent-ruby\" rel=\"nofollow noreferrer\">concurrent-ruby</a>. </p>\n\n<ul>\n<li>install <code>gem install concurrent-ruby</code></li>\n<li>sample code</li>\n</ul>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'concurrent'\n\ndef api_call(url)\n  sleep 1\n  # call api\n  puts url\n  url\nend\n\ndef async_call(urls)\n  jobs = urls.map do |url| \n    Concurrent::Promises.future { api_call(url) }\n  end\n\n  before = Time.now\n  p Concurrent::Promises.zip(*jobs).value \n  puts Time.now - before\nend\n</code></pre>\n\n<p>In the following code, the url call runs randomly asynchronously. The result is then sorted in the same order as the array.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>urls = %w(a b c d e)\nasync_call(urls)\n\nc \nd \nb \ne \na \n[\"a\", \"b\", \"c\", \"d\", \"e\"]\n1.0021356\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 569, "user_id": 6244626, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_edcXjrSTkQ/AAAAAAAAAAI/AAAAAAAAByA/OyEV5P4tYS8/photo.jpg?sz=128", "display_name": "Shivansh Gaur", "link": "https://stackoverflow.com/users/6244626/shivansh-gaur"}, "is_accepted": false, "score": 0, "last_activity_date": 1575925775, "creation_date": 1575925775, "answer_id": 59256666, "question_id": 59244419, "link": "https://stackoverflow.com/questions/59244419/ruby-arrays-and-threads/59256666#59256666", "title": "Ruby arrays and Threads", "body": "<p>None of the core data structures (except for Queue) in Ruby are thread-safe. The structures are mutable, and when shared between threads, there are no guarantees the threads won\u2019t overwrite each others\u2019 changes.</p>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 59250094, "answer_count": 2, "score": 1, "last_activity_date": 1575925775, "creation_date": 1575877150, "question_id": 59244419, "link": "https://stackoverflow.com/questions/59244419/ruby-arrays-and-threads", "title": "Ruby arrays and Threads", "body": "<p>I am populating an array with the responses from API requests. In order to speed up the process I am using threads. I know they are not (really) parallel, but they do make the overall process faster.</p>\n\n<p>To maintain the order I first define an empty array and then I populate the specific slots. This is the simplified code</p>\n\n<pre><code>instances = [array of instances]\nnumber_of_instances = instances.size\ncase_run_status[\"machine_statuses\"] = Array.new(number_of_instances){{}}\n\nthreads = []\ninstances.each_with_index do |instance, i|\n\n  threads &lt;&lt; Thread.new do \n    machine_status = {}\n\n    machine_status[\"ip\"] = instance.public_ip_address\n\n\n\n    uri = \"request....\" \n\n    response = HTTParty.get(uri)        \n    status = JSON.parse(response.body)  \n\n    machine_status[\"running\"] = status['running']\n    machine_status[\"running_node\"] = status['running_node']\n\n    case_run_status[\"machine_statuses\"][i] = machine_status\n\n  end\nend\nthreads.each{|thr| thr.join }\n</code></pre>\n\n<p>From what I understand this should be thread safe. Is this correct? However, the problem that I am having is that, apparently randomly, <code>machine_status[\"running\"]</code> and <code>machine_status[\"running_node\"]</code> get mixed up and the value <code>status['running']</code> ends up in <code>machine_status[\"running_node\"]</code>.</p>\n\n<p>If I remove the Threads and execute the code serially everything works as expected.</p>\n\n<p>Question: Is this the right way to safely populate an array with Threads? </p>\n"}, {"tags": ["ruby", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1575876789, "post_id": 59243910, "comment_id": 104698996, "body": "Rather than use the SQLite gem, I&#39;d recommend one of the ORMs that help insulate you from a DBM-specific language. SQLite is nice, but if your DB needs grow having to rewrite all your calls for a different DBM is a major pain. I like <a href=\"https://sequel.jeremyevans.net/\" rel=\"nofollow noreferrer\">Sequel</a> because it&#39;s very agnostic and very capable. <a href=\"https://sequel.jeremyevans.net/rdoc/files/doc/cheat_sheet_rdoc.html\" rel=\"nofollow noreferrer\">sequel.jeremyevans.net/rdoc/files/doc/cheat_sheet_rdoc.html</a> is a good overview."}], "answers": [{"comments": [{"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 0, "creation_date": 1575875079, "post_id": 59243953, "comment_id": 104698308, "body": "works great. I suppose it has to be <code>row[&quot;NAME&quot;]</code> and can&#39;t be made to <code>row[:NAME]</code>?"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 2, "last_activity_date": 1575874799, "creation_date": 1575874799, "answer_id": 59243953, "question_id": 59243910, "link": "https://stackoverflow.com/questions/59243910/using-sqlite3-with-ruby-is-there-a-way-to-read-each-row-as-a-hash-instead-of-ar/59243953#59243953", "title": "Using sqlite3 with Ruby, is there a way to read each row as a hash instead of array?", "body": "<p>There's <a href=\"https://www.rubydoc.info/github/luislavena/sqlite3-ruby/SQLite3%2FDatabase:results_as_hash\" rel=\"nofollow noreferrer\"><code>results_as_hash</code></a> setter to get this behavior:</p>\n\n<pre><code>db = SQLite3::Databse.open 'data.db'\ndb.results_as_hash = true\n# ...\n</code></pre>\n"}], "owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575874799, "creation_date": 1575874600, "question_id": 59243910, "link": "https://stackoverflow.com/questions/59243910/using-sqlite3-with-ruby-is-there-a-way-to-read-each-row-as-a-hash-instead-of-ar", "title": "Using sqlite3 with Ruby, is there a way to read each row as a hash instead of array?", "body": "<p>I am using sqlite3 as follows:</p>\n\n<pre><code>db = SQLite3::Database.open \"data.db\"\n\nstm = db.prepare \"SELECT * FROM COMPANIES\"\nrs = stm.execute\n\nwhile (row = rs.next) do\n    name = row[1]\n</code></pre>\n\n<p>that is, the row is an array instead of a hash. Is there a way to read it as a hash, so that</p>\n\n<pre><code>row[:name]\nrow[:address]\n</code></pre>\n\n<p>is the data. That's because in the future, if the table has a different order of columns, <code>row[3]</code> may become <code>row[5]</code>, so <code>row[:address]</code> is much more definite.</p>\n"}]