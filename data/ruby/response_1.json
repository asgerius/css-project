[{"tags": ["ruby-on-rails", "ruby", "database", "thread-safety", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 2159991, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dcFk2.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2159991/kevin"}, "is_accepted": true, "score": 0, "last_activity_date": 1421280586, "last_edit_date": 1495535229, "creation_date": 1421280586, "answer_id": 27954798, "question_id": 27954660, "link": "https://stackoverflow.com/questions/27954660/rails-activerecord-models-out-of-sync-with-database-after-thread-join/27954798#27954798", "title": "Rails ActiveRecord models out-of-sync with database after Thread.join", "body": "<p>I just realized that this has already been explained in <a href=\"https://stackoverflow.com/q/4703551/2159991\">this question</a>, with a solution found in <a href=\"https://stackoverflow.com/a/3774838/2159991\">this answer</a>. Essentially, each test case is performed in a transaction, but the threads create their records outside of that transaction. Turning off transactions for this test case worked for me:</p>\n\n<pre><code>class PersonTest &lt; ActiveSupport::TestCase\n  self.use_transactional_fixtures = false\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 2159991, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dcFk2.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2159991/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 27954798, "answer_count": 1, "score": 0, "last_activity_date": 1421280586, "creation_date": 1421279754, "question_id": 27954660, "link": "https://stackoverflow.com/questions/27954660/rails-activerecord-models-out-of-sync-with-database-after-thread-join", "title": "Rails ActiveRecord models out-of-sync with database after Thread.join", "body": "<p>Say I have an ActiveRecord model called <code>Person</code> with a table name of <code>people</code> that has <code>id</code> and <code>name</code> columns. There is a unique key constraint on the <code>name</code> column so that no two <code>Person</code> records may share a name. I am using <code>find_or_create_by_name</code> coupled with a rescue block in case two threads try to insert the same value:</p>\n\n<pre><code>def get_or_make_person(name)\n  begin\n    person = Person.find_or_create_by_name(name)\n  rescue ActiveRecord::RecordNotUnique\n    retry\n  end\n  person\nend\n</code></pre>\n\n<p>I am trying to test the thread-safety of my code. So I wrote a test:</p>\n\n<pre><code>name = 'Joe'\n\nt1 = Thread.new do\n  person = get_or_make_person name\nend\n\nt1 = Thread.new do\n  person = get_or_make_person name\nend\n\n# Wait until both threads are done\nt1.join\nt2.join\n\n# At this point, the person should be created no matter what. Let's find him:\nperson = Person.find_by_name name\nassert_not_nil person\n</code></pre>\n\n<p>However, this test fails. I used <a href=\"http://pryrepl.org/\" rel=\"nofollow\">Pry</a> to inspect my program after joining both threads, and found that my <code>Person</code> model in the main thread knows absolutely nothing about the record that was created in the other two threads. Looking in the database manually at this point shows that it is definitely in the database:</p>\n\n<pre><code>mysql&gt; select * from people;\n+----+------+\n| id | name |\n+----+------+\n| 1  | Joe  |\n+----+------+\n</code></pre>\n\n<p>I even tried using <code>Person.find_by_sql('select * from people')</code>, but that didn't return the record either.</p>\n\n<p>And once I exit my debugging session and try the test again with a different name (say 'Jane'), I am able to retrieve the first record with <code>Person.find_by_name('Joe')</code> or <code>Person.find(1)</code>.</p>\n\n<p>What's going on here? Is there any way to somehow force ActiveRecord to reload its knowledge of the <code>people</code> table?</p>\n\n<p>My use case is slightly more involved than this (which is why the example seems slightly contrived), but this should capture the essence of what I am running into.</p>\n\n<p>Additional details:</p>\n\n<p>The exact same code runs successfully and produces the expected results (using a print statement instead of <code>assert_not_nil</code> of course) if run within a standalone script, but fails when run using Test::Unit as a unit test.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "join", "unique"], "comments": [{"owner": {"reputation": 245, "user_id": 1897144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87524ec129f69dda3eed2bb325065a0f?s=128&d=identicon&r=PG", "display_name": "itsthewrongway", "link": "https://stackoverflow.com/users/1897144/itsthewrongway"}, "edited": false, "score": 0, "creation_date": 1421280177, "post_id": 27954515, "comment_id": 44304431, "body": "I think you are looking for the unique index constraint on the db. This article might help you <a href=\"http://robots.thoughtbot.com/the-perils-of-uniqueness-validations\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/the-perils-of-uniqueness-validations</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "is_accepted": true, "score": 0, "last_activity_date": 1421309343, "creation_date": 1421309343, "answer_id": 27959041, "question_id": 27954515, "link": "https://stackoverflow.com/questions/27954515/rails-unique-many-to-many-relationship/27959041#27959041", "title": "rails unique many to many relationship", "body": "<p>This happening because uniqueness validation tries to find a duplicate record, In this case for both the tags there is no record present in the actual DB. So both passes the validation and creates the tags in the DB. </p>\n\n<p>I faced a similar issue in the past.</p>\n\n<p>But I have used the approach mentioned in the following blog.</p>\n\n<p><a href=\"https://techbrownbags.wordpress.com/2014/02/05/rails-validation-of-cocoon-nested-forms/\" rel=\"nofollow\">https://techbrownbags.wordpress.com/2014/02/05/rails-validation-of-cocoon-nested-forms/</a></p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 213, "user_id": 2754548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1245476fe16264e3a485314e8708d0ec?s=128&d=identicon&r=PG", "display_name": "Lewis", "link": "https://stackoverflow.com/users/2754548/lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "accepted_answer_id": 27959041, "answer_count": 1, "score": 4, "last_activity_date": 1551441971, "creation_date": 1421278851, "last_edit_date": 1551441971, "question_id": 27954515, "link": "https://stackoverflow.com/questions/27954515/rails-unique-many-to-many-relationship", "title": "rails unique many to many relationship", "body": "<p>I am using rails 4 and have a many to many relationship using <code>:has_many :through</code> and I am trying to ensure that the join is unique such that a particular film and tag does not join each other more than once. by using <code>validates_uniqueness_of</code> I have achieved this between saves however if two or more of the same tags are added in one update the uniqueness is not ensured. please find below the relevant code:</p>\n\n<pre><code>class Film &lt; ActiveRecord::Base\n  has_many :film_tags, inverse_of: :film, dependent: :destroy\n  has_many :tags, -&gt; {uniq}, through: :film_tags\n\n  accepts_nested_attributes_for :film_tags, allow_destroy: true\nend\n\nclass FilmTag &lt; ActiveRecord::Base\n  belongs_to :film, inverse_of: :film_tags\n  belongs_to :tag, inverse_of: :film_tags, counter_cache: true\n\n  validates_uniqueness_of :tag_id, scope: :film_id, message: \"duplicate tag\"\nend\n\nclass Tag &lt; ActiveRecord::Base\n  has_many :film_tags, inverse_of: :tag, dependent: :destroy\n  has_many :films, -&gt; {uniq}, through: :film_tags\n\n  validates_uniqueness_of :name\nend\n</code></pre>\n\n<p>I have tried adding a <code>before_save</code> to film where <code>film.film_tags</code> had <code>.uniq</code> run against it (also tried <code>uniq{|film_tag| film_tag.tag_id}</code>) but this just removes all <code>film_tag</code> joins but 1 even if some tags were not duplicated.</p>\n\n<p>Can anyone provide help with this issue? Alternatively if more information is required please ask.</p>\n"}, {"tags": ["ruby", "git", "bash", "heroku", "homebrew"], "comments": [{"owner": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "edited": false, "score": 0, "creation_date": 1421320637, "post_id": 27954440, "comment_id": 44317575, "body": "<code>echo export PATH=&#39;&#47;usr&#47;local&#47;bin:$PATH&#39; &gt;&gt; ~&#47;.bash_profile</code> Use double quotes, this adds $PATH to the path without expanding."}], "answers": [{"tags": [], "owner": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1421320838, "last_edit_date": 1421320838, "creation_date": 1421279739, "answer_id": 27954657, "question_id": 27954440, "link": "https://stackoverflow.com/questions/27954440/need-to-change-path-for-git-upgrade/27954657#27954657", "title": "Need to change PATH for Git upgrade", "body": "<p>Put this in your <code>.bashrc</code> file (be sure to backup, aditing <code>.bashrc</code> can be dangerous:</p>\n\n<pre><code>export PATH=\"$PATH:/path/to/dir/to/add\"\n</code></pre>\n\n<p>This will add a dir to the <code>PATH</code> variable next time you start bash. If you want the dirs to be parsed in a different order you can manually set it. Take for instance that the variable contains <code>/bin/usr:/usr/</code> and you'd like <code>/usr</code> to precede the other dir, add this to the <code>.bashrc</code>:</p>\n\n<pre><code>export PATH='/usr:/bin/usr'\n</code></pre>\n\n<p>Note that adding this line is harmless for your  bashrc file so backup might not be necessary after all.</p>\n\n<p>Edit: be sure to restart bash before testing out the changes, they will only be applied once you open a new shell.</p>\n\n<p>Edit2: You can also just execute the line in your command line but then <code>PATH</code> will change back to the old value upon opening a new shell.</p>\n\n<p>In a nutshell (pun intended) do this: </p>\n\n<pre><code> echo 'export $PATH=/usr/local/bin:/usr/local/heroku/bin:/Users/robertrice/.rvm/gems/ruby-2.1.2/bin:/Users/robertri\u200c\u200bce/.rvm/gems/ruby-2.1.2@global/bin:/Users/robertrice/.rvm/rubies/ruby-2.1.2/bin:/bin:/usr/sbin:/sbin:usr/bin:/Users/robertrice/.rvm/bin' &gt;&gt; ~/.bashrc\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 4241008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a692b9a099735120dac6ccdca605a10?s=128&d=identicon&r=PG&f=1", "display_name": "robbo", "link": "https://stackoverflow.com/users/4241008/robbo"}, "edited": false, "score": 0, "creation_date": 1421285773, "post_id": 27954727, "comment_id": 44305943, "body": "For some reason when I change the file RVM keeps loading first anyways. I have even totally removed any .rvm scripts form ~.profile  ~/.bash_profile and ~/.bashrc. My path continues to remain     /usr/local/heroku/bin:/Users/robertrice/.rvm/gems/ruby-2.1.2&zwnj;&#8203;/bin:/Users/robertri&zwnj;&#8203;ce/.rvm/gems/ruby-2.&zwnj;&#8203;1.2@global/bin:/User&zwnj;&#8203;s/robertrice/.rvm/ru&zwnj;&#8203;bies/ruby-2.1.2/bin:&zwnj;&#8203;/usr/bin:/bin:/usr/s&zwnj;&#8203;bin:/sbin:/usr/local&zwnj;&#8203;/bin:/Users/robertri&zwnj;&#8203;ce/.rvm/bin"}, {"owner": {"reputation": 95, "user_id": 4241008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a692b9a099735120dac6ccdca605a10?s=128&d=identicon&r=PG&f=1", "display_name": "robbo", "link": "https://stackoverflow.com/users/4241008/robbo"}, "edited": false, "score": 0, "creation_date": 1421285865, "post_id": 27954727, "comment_id": 44305963, "body": "any ideas about what specific commands to add I may be missing?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1421280204, "creation_date": 1421280204, "answer_id": 27954727, "question_id": 27954440, "link": "https://stackoverflow.com/questions/27954440/need-to-change-path-for-git-upgrade/27954727#27954727", "title": "Need to change PATH for Git upgrade", "body": "<p>This is the order your path is being searched:</p>\n\n<pre><code>/usr/local/heroku/bin\n/Users/&lt;my account&gt;/.rvm/gems/ruby-2.1.2/bin\n/Users/&lt;my account&gt;/.rvm/gems/ruby-2.1.2@global/bin\n/Users/&lt;my account&gt;/.rvm/rubies/ruby-2.1.2/bin\n/usr/bin\n/bin\n/usr/sbin\n/sbin\n/usr/local/bin\n/Users/&lt;my account&gt;/.rvm/bin\n</code></pre>\n\n<p>You're going to have some problems:</p>\n\n<ul>\n<li>Your RVM initialization isn't occurring last, so RVM will start complaining at some point.</li>\n<li>Your /usr/bin is before /usr/local/bin.</li>\n</ul>\n\n<p>Look inside your ~/.bashrc and ~/.bash_profile for commands/lines that modify your PATH. Adjust those so:</p>\n\n<ul>\n<li>RVM is the last thing initialized or that can modify your path.</li>\n<li>/usr/local/bin is immediately followed by /usr/bin to allow commands you've added to override the system ones.</li>\n<li>Paths that are exclusive to specific things, like the Heroku path, can be last <em>unless</em> their commands are the same as ones in /usr/local/bin:/usr/bin. In that case, add the Heroku path immediately before /usr/local/bin.</li>\n</ul>\n\n<p>You don't have to use Vim to edit if you don't understand how to use it. Instead, try using <code>pico</code> or <code>nano</code> to edit since those are installed by default on Mac OS X, and are simple to use. (But for the long term learn how to use Vim because it's one of the most powerful editors on the planet, and is available on almost any OS you could ever use.)</p>\n"}], "owner": {"reputation": 95, "user_id": 4241008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a692b9a099735120dac6ccdca605a10?s=128&d=identicon&r=PG&f=1", "display_name": "robbo", "link": "https://stackoverflow.com/users/4241008/robbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 27954727, "answer_count": 2, "score": 0, "last_activity_date": 1421320838, "creation_date": 1421278394, "last_edit_date": 1421279741, "question_id": 27954440, "link": "https://stackoverflow.com/questions/27954440/need-to-change-path-for-git-upgrade", "title": "Need to change PATH for Git upgrade", "body": "<p>When I run <code>echo $PATH</code> I get:</p>\n\n<pre><code>/usr/local/heroku/bin:/Users/&lt;my account&gt;/.rvm/gems/ruby-2.1.2/bin:/Users/&lt;my account&gt;/.rvm/gems/ruby-2.1.2@global/bin:/Users/&lt;my account&gt;/.rvm/rubies/ruby-2.1.2/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/&lt;my account&gt;/.rvm/bin\n</code></pre>\n\n<p>I'm pretty sure the /usr/local/heroku/bin is not supposed to be first and I cannot figure out how to edit the path with Vim.</p>\n\n<p>I receive this error from brew doctor in regards to Git.</p>\n\n<pre><code>Warning: /usr/bin occurs before /usr/local/bin\n</code></pre>\n\n<p>This means that system-provided programs will be used instead of those\nprovided by Homebrew. The following tools exist at both paths:</p>\n\n<pre><code>git\ngit-cvsserver\ngit-receive-pack\ngit-shell\ngit-upload-archive\ngit-upload-pack\n\nConsider setting your PATH so that /usr/local/bin\noccurs before /usr/bin. Here is a one-liner:\n    echo export PATH='/usr/local/bin:$PATH' &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>Obviously I have tried implementing the \"one-liner\" but it does nothing:</p>\n\n<p>When I run <code>brew upgrade git</code> I receive:</p>\n\n<pre><code>Error: git 2.2.1 already installed\n</code></pre>\n\n<p>but when I run <code>git --version</code> I get:</p>\n\n<pre><code>git version 1.9.3 (Apple Git-50)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1421287101, "post_id": 27954346, "comment_id": 44306194, "body": "If you have the choice, you should not use 1.8.7. It&#39;s been sunsetted for 18 months. The current version is 2.2.0."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1421279002, "creation_date": 1421279002, "answer_id": 27954545, "question_id": 27954346, "link": "https://stackoverflow.com/questions/27954346/cannot-use-variable-in-default-parameters-of-a-method/27954545#27954545", "title": "Cannot use variable in default parameters of a method", "body": "<p>You can use variables, but the local variable <code>var</code> that you defined does not share the scope with the argument position of <code>sysout</code>'s method definition.</p>\n"}, {"comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421346800, "post_id": 27954864, "comment_id": 44333662, "body": "Thanks Jorg. Can you please explain these lines (1) define_method(:sysout)  (2) def var; &#39;one&#39; end. Thanks"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421347301, "post_id": 27954864, "comment_id": 44333933, "body": "(1) calls the method <code>define_method</code> passing the symbol <code>:sysout</code> and a block as an argument. You can probably guess what <code>define_method</code> does from its name, if not, just look up its documentation. (2) In Ruby, methods are defined with the <code>def</code> keyword, so this defines a method named <code>var</code>."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1421281033, "creation_date": 1421281033, "answer_id": 27954864, "question_id": 27954346, "link": "https://stackoverflow.com/questions/27954346/cannot-use-variable-in-default-parameters-of-a-method/27954864#27954864", "title": "Cannot use variable in default parameters of a method", "body": "<p>You can use <em>any</em> arbitrary Ruby expression as the default argument value for an optional parameter, there are absolutely no restrictions what you can put in there. It can be as simple as a single lone literal or as complex as an entire application. (Although I wouldn't recommend the latter.)</p>\n\n<p>But Ruby's scoping rules don't just magically disappear. Local variables are still local variables, global variables are still global variables, and so on.</p>\n\n<p>Blocks are the only things in Ruby which create nested scopes, so you have to use a block:</p>\n\n<pre><code>var = 'one'\n\ndefine_method(:sysout) do |str=var|\n  puts str\nend\n\nsysout('seven')\n# seven\n\nsysout\n# one\n</code></pre>\n\n<p>Alternatively, you could make the default value a method:</p>\n\n<pre><code>def var; 'one' end\n\ndef sysout(str=var)\n  puts str\nend\n\nsysout('seven')\n# seven\n\nsysout\n# one\n</code></pre>\n\n<p>Or a global variable:</p>\n\n<pre><code>$var = 'one'\n\ndef sysout(str=$var)\n  puts str\nend\n\nsysout('seven')\n# seven\n\nsysout\n# one\n</code></pre>\n"}], "owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 27954864, "answer_count": 2, "score": 0, "last_activity_date": 1421281033, "creation_date": 1421277856, "question_id": 27954346, "link": "https://stackoverflow.com/questions/27954346/cannot-use-variable-in-default-parameters-of-a-method", "title": "Cannot use variable in default parameters of a method", "body": "<p>Can I use variables in default parameters of a method ? If not, then why ? This is in ruby 1.8.7</p>\n\n<pre><code>var = \"one\"\n\ndef sysout(str=var)\n  puts str\nend\n\nsysout(\"seven\")\nsysout()\n</code></pre>\n\n<p>Error - </p>\n\n<pre><code>seven\ntest.rb:3:in `sysout': undefined local variable or method `var' for main:Object (NameError)\n        from test.rb:8\n</code></pre>\n"}, {"tags": ["ruby", "net-ssh"], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 823725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7c915304ffaa4e9a5812664484187f4?s=128&d=identicon&r=PG", "display_name": "Johan Lindskogen", "link": "https://stackoverflow.com/users/823725/johan-lindskogen"}, "edited": false, "score": 0, "creation_date": 1421834462, "post_id": 27954736, "comment_id": 44508854, "body": "I couldn&#39;t find this anywhere in the docs, and it occurs to me now that this is a <code>ssh-config</code> option, thank you for this!"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 4, "last_activity_date": 1421280274, "creation_date": 1421280274, "answer_id": 27954736, "question_id": 27954274, "link": "https://stackoverflow.com/questions/27954274/ruby-netssh-try-username-and-password-only-once/27954736#27954736", "title": "Ruby/NetSSH try username and password only once?", "body": "<p>This should restrict authentication to <code>password</code> only, and no prompts or retries:</p>\n\n<pre><code>Net::SSH.start('host', 'user',  \n               :password     =&gt; 'pass', \n               :auth_methods =&gt; [ 'password' ],\n               :number_of_password_prompts =&gt; 0)\n</code></pre>\n\n<p><strong><code>:auth_methods</code></strong> restricts SSH to only try those authentication methods which are listed in the array. In this case we only want to try password authentication.</p>\n\n<p><strong><code>:number_of_password_prompts</code></strong> only works with the <code>password</code> auth method, and if you set it to zero it will never prompt for a password, even if the authentication fails.</p>\n"}], "owner": {"reputation": 6959, "user_id": 411141, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/R4sK6.png?s=128&g=1", "display_name": "ehime", "link": "https://stackoverflow.com/users/411141/ehime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1278, "favorite_count": 2, "accepted_answer_id": 27954736, "answer_count": 1, "score": 2, "last_activity_date": 1421280274, "creation_date": 1421277540, "question_id": 27954274, "link": "https://stackoverflow.com/questions/27954274/ruby-netssh-try-username-and-password-only-once", "title": "Ruby/NetSSH try username and password only once?", "body": "<p>Is there a way to fail immediately after trying a username and password sequence with <code>Net::SSH.start()</code>? I am looking to test to see if credentials work then stop afterwards, here is the code that I have </p>\n\n<pre><code>output = 0\nNet::SSH.start('host', 'user', :password =&gt; \"pass\") do |ssh|\n   output = ssh.exec! 'echo \"1\"'\nend\nputs output\n</code></pre>\n"}, {"tags": ["ruby", "oracle", "oci8"], "answers": [{"tags": [], "owner": {"reputation": 1913, "user_id": 547341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10a0cbba661dd3521b5a35a3e7bbabcd?s=128&d=identicon&r=PG", "display_name": "Albert Catal&#224;", "link": "https://stackoverflow.com/users/547341/albert-catal%c3%a0"}, "is_accepted": false, "score": 0, "last_activity_date": 1425576011, "creation_date": 1425576011, "answer_id": 28883866, "question_id": 27954183, "link": "https://stackoverflow.com/questions/27954183/executing-an-sql-script-vi-an-oci8-connection-object/28883866#28883866", "title": "Executing an sql script vi an OCI8 connection object", "body": "<p>You can put this script in a function (<em>function_name</em>) and execute</p>\n\n<pre><code>con.exec(\"select function_name from dual\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 745512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e67c796b09dbef398668e11c0e3ff6ad?s=128&d=identicon&r=PG", "display_name": "roland", "link": "https://stackoverflow.com/users/745512/roland"}, "edited": false, "score": 0, "creation_date": 1426021757, "post_id": 28922617, "comment_id": 46199518, "body": "Thanks @Albert. In the meantime I changed the gem to connect to my instance. Right now I&#39;m using net-ssh ruby gem. And i run the following command: ssh.exec!(&quot;su - oracle -c &#39;sqlplus &lt;user&gt;/&lt;password&gt;&#39; &lt;&lt;EOF\\n#{&lt;command&gt;}\\nEOF\\n&quot;)"}], "tags": [], "owner": {"reputation": 344, "user_id": 985524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ece05caebbfa91944047629101bc5ea?s=128&d=identicon&r=PG", "display_name": "Kubo Takehiro", "link": "https://stackoverflow.com/users/985524/kubo-takehiro"}, "is_accepted": false, "score": 1, "last_activity_date": 1425783730, "creation_date": 1425783730, "answer_id": 28922617, "question_id": 27954183, "link": "https://stackoverflow.com/questions/27954183/executing-an-sql-script-vi-an-oci8-connection-object/28922617#28922617", "title": "Executing an sql script vi an OCI8 connection object", "body": "<p><code>@&lt;script_name&gt;</code> is an sqlplus command.\nWhen sqlplus find <code>@&lt;script_name&gt;</code>, it opens <code>&lt;script_name&gt;</code>, divides its contents to SQL statements and executes them.\nIf you want to run SQL statements in a script by ruby, you need to write code which opens the script, divides its contents and pass SQL statements to <code>con.exec</code> one by one.</p>\n\n<blockquote>\n  <p>I also want to run an sql script that resides in the oracle directory on the remote host. Usually I perform the following:</p>\n</blockquote>\n\n<p>No, it can't. sqlplus reads the sql script that resides on the local host.</p>\n"}], "owner": {"reputation": 417, "user_id": 745512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e67c796b09dbef398668e11c0e3ff6ad?s=128&d=identicon&r=PG", "display_name": "roland", "link": "https://stackoverflow.com/users/745512/roland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425783730, "creation_date": 1421276976, "last_edit_date": 1421335842, "question_id": 27954183, "link": "https://stackoverflow.com/questions/27954183/executing-an-sql-script-vi-an-oci8-connection-object", "title": "Executing an sql script vi an OCI8 connection object", "body": "<p>I have a locally running oracle thin client and have successfully created a ruby script to connect to a remote oracle database. I successfully make a call (select * from table_name) to the database to get the content of a table:</p>\n\n<pre><code>begin  \n    con = OCI8.new('&lt;user&gt;', &lt;password&gt;, '&lt;host&gt;:&lt;port&gt;/XE')  \n    con.exec('select name from actor') do |records|\n        puts records\n    end\nrescue OCIError\n  puts \"Database Connection Error\"\nend\n</code></pre>\n\n<p>I also want to run an sql script that resides in the oracle directory on the remote host.\nUsually I perform the following:</p>\n\n<pre><code>su - oracle\nsqlplus &lt;user&gt;/&lt;password&gt;\n&lt;SQL&gt; @&lt;script_name&gt;\n</code></pre>\n\n<p>and this will run the script</p>\n\n<p>In the ruby script I try the following:</p>\n\n<pre><code>con.exec('@&lt;script_name&gt;')\n</code></pre>\n\n<p>Yet, I get the following error:</p>\n\n<pre><code>stmt.c:230:in oci8lib_200.bundle: ORA-00900: invalid SQL statement (OCIError)    \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421276764, "post_id": 27954077, "comment_id": 44303284, "body": "You don&#39;t need to reorder the keys in <code>csv</code> that are present in <code>db</code>?"}, {"owner": {"reputation": 2499, "user_id": 3957231, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d8f8c8e808e383a52c580396c6993e?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/3957231/donato"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421276861, "post_id": 27954077, "comment_id": 44303321, "body": "@sawa the keys that are in db that are not in csv should be appended to the end of csv. The order of the keys in db does not matter, but they must all be at the end of csv hash."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421276946, "post_id": 27954077, "comment_id": 44303352, "body": "I am not asking about &quot;the keys that are in db that are not in csv&quot;, I am asking about &quot;the keys that are in db that are in csv&quot;."}, {"owner": {"reputation": 2499, "user_id": 3957231, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d8f8c8e808e383a52c580396c6993e?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/3957231/donato"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421277646, "post_id": 27954077, "comment_id": 44303589, "body": "@sawa the keys in csv must match the order of the keys in db. That is a must, but the extras in db can be tossed to the end of csv and order does not matter, as long as they are after the keys that do match between the two hashes."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421278352, "post_id": 27954077, "comment_id": 44303832, "body": "Why do you want to sort a hash? It does you no good. Instead, grab the keys, order them how you want, and then use <code>hash.values_at(*keys)</code> to grab the values in the order you need."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1421278894, "creation_date": 1421278894, "answer_id": 27954526, "question_id": 27954077, "link": "https://stackoverflow.com/questions/27954077/ruby-sort-hash-based-on-another-hash/27954526#27954526", "title": "ruby sort hash based on another hash", "body": "<p>You could do the following:</p>\n\n<pre><code>db_keys = db.keys\n  #=&gt; [\"1\", \"2\", \"5\", \"10\"] \nkeys = db_keys + (csv.keys-db_keys)\n  #=&gt; [\"1\", \"2\", \"5\", \"10\", \"7\"] \nHash[keys.zip(csv.values_at(*keys))]\n  #=&gt; { \"1\"=&gt;\"first_name\", \"2\"=&gt;\"last_name\", \"5\"=&gt;\"status\",\n  #    \"10\"=&gt;\"city\", \"7\"=&gt;\"address\"} \n</code></pre>\n"}], "owner": {"reputation": 2499, "user_id": 3957231, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d8f8c8e808e383a52c580396c6993e?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/3957231/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 27954526, "answer_count": 1, "score": 0, "last_activity_date": 1421280676, "creation_date": 1421276536, "question_id": 27954077, "link": "https://stackoverflow.com/questions/27954077/ruby-sort-hash-based-on-another-hash", "title": "ruby sort hash based on another hash", "body": "<p>I have the following two hashes:</p>\n\n<pre><code>db = {\"1\" =&gt; \"first_name\", \"2\" =&gt; \"last_name\", \"5\" =&gt; \"status\", \"10\" =&gt; \"city\"  }\ncsv = {\"1\" =&gt; \"first_name\", \"2\" =&gt; \"last_name\", \"5\" =&gt; \"status\", \"7\" =&gt; \"address\", \"10\" =&gt; \"city\" }\n</code></pre>\n\n<p>I want to order csv based on db, and if there are any keys in csv not in db, then I want to move them to the end of csv, so in the above example the result would look like this:</p>\n\n<pre><code>{\"1\" =&gt; \"first_name\", \"2\" =&gt; \"last_name\", \"5\" =&gt; \"status\", \"10\" =&gt; \"city\", \"7\" =&gt; \"address\" }\n</code></pre>\n\n<p>Since the key \"7\" wasn't in db hash, we just moved it to the end of the csv hash.</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>db = {\"1\" =&gt; \"first_name\", \"2\" =&gt; \"last_name\", \"5\" =&gt; \"status\", \"10\" =&gt; \"city\"  }\ncsv = {\"1\" =&gt; \"first_name\", \"2\" =&gt; \"last_name\", \"5\" =&gt; \"status\", \"7\" =&gt; \"address\", \"10\" =&gt; \"city\" }\nrejects = csv.reject {|k| db.include? k }\nresult = csv.keep_if {|k,_| db.include? k }\nresult.merge!(rejects)\nresult   \n=&gt; {\"1\"=&gt;\"first_name\", \"2\"=&gt;\"last_name\", \"5\"=&gt;\"status\", \"10\"=&gt;\"city\", \"7\"=&gt;\"address\"}\n</code></pre>\n\n<p>It seems to work. But is it guaranteed to work? Will the merger always put the second hash at the end, or is there  a possibility that the merger could mix the hashes together without consideration of order?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "payment"], "comments": [{"owner": {"reputation": 671, "user_id": 1599663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heccP.png?s=128&g=1", "display_name": "rogMaHall", "link": "https://stackoverflow.com/users/1599663/rogmahall"}, "edited": false, "score": 0, "creation_date": 1421277745, "post_id": 27954020, "comment_id": 44303627, "body": "What does the rescued message say?"}, {"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "reply_to_user": {"reputation": 671, "user_id": 1599663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heccP.png?s=128&g=1", "display_name": "rogMaHall", "link": "https://stackoverflow.com/users/1599663/rogmahall"}, "edited": false, "score": 0, "creation_date": 1421278180, "post_id": 27954020, "comment_id": 44303777, "body": "The server respond with &quot;Template is missing Missing template checkout/charge&quot;, but in the routes.rb archive I wrote to be only a POST request. ??"}, {"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1421279954, "post_id": 27954020, "comment_id": 44304365, "body": "<code>@charge.save</code> is included twice in the controller code; it should be there only once. Also, do you have the <code>app&#47;view&#47;checkout&#47;charge.html.erb</code> file?"}, {"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "edited": false, "score": 0, "creation_date": 1421280477, "post_id": 27954020, "comment_id": 44304522, "body": "I should leave only the &quot;if @charge.save&quot; line?, and yes I have the app/views/checkout/charge.html.erb file."}, {"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "edited": false, "score": 0, "creation_date": 1421280609, "post_id": 27954020, "comment_id": 44304576, "body": "I already deleted the extra line with @charge.save and it&#39;s the same, the method can make the payment but not insert the data to the model."}, {"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1421284904, "post_id": 27954020, "comment_id": 44305726, "body": "Could you add the full error trace - from <code>log&#47;development.log</code> file - on clicking the <code>Charge</code> button? Make sure you mask any sensitive information like acct number / password, etc. before adding the trace."}, {"owner": {"reputation": 2578, "user_id": 1478058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fdc2fbe6012548e09c652be112f9a1b?s=128&d=identicon&r=PG", "display_name": "trushkevich", "link": "https://stackoverflow.com/users/1478058/trushkevich"}, "edited": false, "score": 0, "creation_date": 1421443974, "post_id": 27954020, "comment_id": 44376941, "body": "check if there are any validation errors for <code>@charge</code> object - <code>@charge.errors.full_messages</code>"}], "owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421443492, "creation_date": 1421276231, "last_edit_date": 1421280806, "question_id": 27954020, "link": "https://stackoverflow.com/questions/27954020/why-i-cant-insert-data-in-a-model-from-a-custom-controller", "title": "Why I can&#39;t insert data in a model from a custom controller?", "body": "<p>I created a scaffold for a model called \"Charge\", but I want to insert data to the model from a custom controller I created \"Checkout\".</p>\n\n<p>I have the following code</p>\n\n<pre><code>##routes.rb\nget \"checkout/pay\", to: 'checkout#index'\npost \"checkout/charge\"\n\n## app/controllers/checkout_controler.rb\nrequire \"conekta\"\nConekta.api_key = \"xxxxxxxxxxxxxxxx\"\n\n# GET 'checkout/pay'\ndef index\n  redirect_to root_path, notice: \"your cart is empty\" if @cart.line_items.empty?\nend\n\n# POST 'checkout/charge'\ndef charge\n  redirect_to root_path, notice: \"your cart is empty\" if @cart.line_items.empty?\n\n  total_price = @cart.total_price_cart * 100\n\n  begin \n    charge = Conekta::Charge.create({\n      amount: total_pricec.to_i,\n      currency: \"MXN\",\n      description: \"Pizza Delivery\",\n      reference_id: \"sku product\",\n      card: params[:conektaTokenId]\n    })\n    #Conekta::Charge.create() runs successfully and return a hash of values\n\n    @charge = Charge.new(id: charge.id, amount: charge.amount, livemode: charge.livemode, created_at: charge.created_at, status: charge.status, currency: charge.currency, description: charge.description, reference_id: charge.reference_id, failure_code: charge.failure_code, failure_message: charge.failure_message)\n    if @charge.save\n      redirect_to products_path, notice: \"charge was created\"\n    else\n      redirect_to root_path\n    end\n  rescue Conekta::Error \n    puts e.message \n  end\n</code></pre>\n\n<p>in the app/views/checkout/index.html.erb</p>\n\n<pre><code>&lt;%= form_tag('checkout/charge, id:'card-form') do %&gt;\n    fields .....\n    &lt;button&gt;Charge&lt;/button&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Update:</strong>\nI can reach to the method charge = Conekta::Charge.create(), and it runs successfully creating the payment, but the method can't insert the data in the \"Charge\" model and save the data. \nWhen I go to '/charges' it's empty.</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1421276418, "post_id": 27953868, "comment_id": 44303135, "body": "Well, you don&#39;t need another file. You could add a marker to the source file, provided the marker is not already present (but I&#39;d rather run my fingernails down a blackboard than do that). Isn&#39;t there a direct way to to see if the external configuration has already been done?"}, {"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1421277019, "post_id": 27953868, "comment_id": 44303384, "body": "Cary is right. Anyway you need to save this information somewhere. If not in external file or the program file itself, maybe the database or webservice this program connects to? But don&#39;t try to rely on the file metadata: on some filesystem you could have something &#39;last execution&#39; meta in the file, but it will not work on every filesystem."}], "answers": [{"tags": [], "owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1421295434, "creation_date": 1421295434, "answer_id": 27956740, "question_id": 27953868, "link": "https://stackoverflow.com/questions/27953868/determine-script-has-been-ever-started-if-it-is-first-time-run/27956740#27956740", "title": "Determine script has been ever started (if it is first-time run)", "body": "<p>Make a config file, give an example (perhaps <code>config.sample</code>) in whatever documentation your program provides, and if that config file does not exist, you will know that no one has set the config at all.</p>\n\n<p>While this technically won't mean that your program has never \"started before\", it will tell you that it has not been configured.</p>\n"}], "owner": {"reputation": 7215, "user_id": 1952862, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75beeea47295bed4be7de7d8aaf365af?s=128&d=identicon&r=PG&f=1", "display_name": "TN888", "link": "https://stackoverflow.com/users/1952862/tn888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421295434, "creation_date": 1421275634, "question_id": 27953868, "link": "https://stackoverflow.com/questions/27953868/determine-script-has-been-ever-started-if-it-is-first-time-run", "title": "Determine script has been ever started (if it is first-time run)", "body": "<p>I want to run config of my program, only when it is first-time started. Can I determine somehow, did my program ever start before? I think I can create file to check it existence, but is there any more optimal way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": false, "score": 7, "last_activity_date": 1421284369, "creation_date": 1421284369, "answer_id": 27955312, "question_id": 27953848, "link": "https://stackoverflow.com/questions/27953848/devise-rendering-default-views-from-gem-instead-of-generated-ones/27955312#27955312", "title": "Devise rendering default views from gem instead of generated ones?", "body": "<p>In the <code>config/initializers/devise.rb</code> file, set <code>config.scoped_views = true</code> to make devise use the generated views for each devise model instead of the same gem views.</p>\n"}], "owner": {"reputation": 159, "user_id": 3646743, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0890e8ae9a25a587c1c2be9f93e0519f?s=128&d=identicon&r=PG&f=1", "display_name": "user3646743", "link": "https://stackoverflow.com/users/3646743/user3646743"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1421284369, "creation_date": 1421275536, "question_id": 27953848, "link": "https://stackoverflow.com/questions/27953848/devise-rendering-default-views-from-gem-instead-of-generated-ones", "title": "Devise rendering default views from gem instead of generated ones?", "body": "<p>I generated views/controllers for two user models upon installing devise. For whatever reason, the views that are included inside of the gem itself are being rendered instead of the ones that I added.</p>\n\n<pre><code>/views/users/registrations/new.html.erb\n/views/bizusers/registrations/new.html.erb\n</code></pre>\n\n<p>Current route configuration</p>\n\n<pre><code>devise_for :biz_users, path_names: { sign_in: 'login', sign_out: 'logout', sign_up: 'register' }\n  devise_for :users, path_names: { sign_in: 'login', sign_out: 'logout', sign_up: 'register' }\n  devise_for :admins, path_names: { sign_in: 'login', sign_out: 'logout', sign_up: 'register' }\n</code></pre>\n\n<p>I solved this problem before in a different way, but it was hard to manage due to the separation of concerns that needed to be in place for the users. Can help you fix this issue please? </p>\n"}, {"tags": ["ruby", "file", "io"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421276105, "post_id": 27953805, "comment_id": 44303015, "body": "What OS are you targeting? Does the code run for a single user&#39;s use, or is it a service for the machine?"}, {"owner": {"reputation": 7215, "user_id": 1952862, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75beeea47295bed4be7de7d8aaf365af?s=128&d=identicon&r=PG&f=1", "display_name": "TN888", "link": "https://stackoverflow.com/users/1952862/tn888"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421276149, "post_id": 27953805, "comment_id": 44303029, "body": "Linux - of course :D"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421276177, "post_id": 27953805, "comment_id": 44303041, "body": "Remember, Ruby runs on multiple OSes, so we can&#39;t assume anything."}, {"owner": {"reputation": 7215, "user_id": 1952862, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75beeea47295bed4be7de7d8aaf365af?s=128&d=identicon&r=PG&f=1", "display_name": "TN888", "link": "https://stackoverflow.com/users/1952862/tn888"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421276198, "post_id": 27953805, "comment_id": 44303047, "body": "Well I am targeting ONLY linux"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1421277992, "post_id": 27953805, "comment_id": 44303713, "body": "Typically, on Linux, if it&#39;s running for a single user, you&#39;d write a file in the user&#39;s $HOME directory, something like &quot;~/.myapp&quot; or &quot;~/.myapprc&quot;, where &quot;myapp&quot; is the name of your code."}], "owner": {"reputation": 7215, "user_id": 1952862, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75beeea47295bed4be7de7d8aaf365af?s=128&d=identicon&r=PG&f=1", "display_name": "TN888", "link": "https://stackoverflow.com/users/1952862/tn888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421276208, "creation_date": 1421275353, "last_edit_date": 1421276208, "question_id": 27953805, "link": "https://stackoverflow.com/questions/27953805/set-up-permanent-flag-in-os", "title": "Set up permanent flag in OS", "body": "<p>I want to create some kind of \"permanent flag\" in OS, where my program runs. It will be saved somewhere, it will be easliy to check it is set or not. I need that to check, did my program already started before. I thought to base that on just creating empty file, but I do not think it is optimal solution. Can you give me any advice what should I do?</p>\n\n<p>I am targeting only Linux.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 384, "user_id": 5282647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440bcd6dd3218f85f2619d31b5e549eb?s=128&d=identicon&r=PG&f=1", "display_name": "The Ancient", "link": "https://stackoverflow.com/users/5282647/the-ancient"}, "edited": false, "score": 0, "creation_date": 1443773134, "post_id": 27953768, "comment_id": 53634351, "body": "As a starting point just usual checklist items for S3 that rather concern the AWS side: does the user with this key and secret have s3:PutObject grant? is CORS config relevant for your case?"}, {"owner": {"reputation": 384, "user_id": 5282647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440bcd6dd3218f85f2619d31b5e549eb?s=128&d=identicon&r=PG&f=1", "display_name": "The Ancient", "link": "https://stackoverflow.com/users/5282647/the-ancient"}, "edited": false, "score": 0, "creation_date": 1443773830, "post_id": 27953768, "comment_id": 53634673, "body": "And, BTW... if I may suggest -- if you are going to use <b>only</b> S3, I would go for <code>carrierwave-aws</code> gem. Fog is a monster and I had rather a bad experience with it. <code>carrierwave-aws</code>is pretty lean and works well for me."}], "owner": {"reputation": 4778, "user_id": 1917363, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/112f39ececafcaf7321fcfc67be141dd?s=128&d=identicon&r=PG", "display_name": "applecrusher", "link": "https://stackoverflow.com/users/1917363/applecrusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421674161, "creation_date": 1421275147, "question_id": 27953768, "link": "https://stackoverflow.com/questions/27953768/amazon-s3-upload-issues-with-ruby-on-rails-using-carrierwave", "title": "Amazon S3 upload issues with Ruby on Rails using Carrierwave", "body": "<p>I can't figure out what I am doing wrong to upload my file to s3 using carrierwave. I am able to store files locally using only ruby but I need to use carrierwave to store them to s3. I am getting an error I believe deals with setting the correct aws information but I did that. I lack a lot of knowledge as I am just a beginner with ruby on rails. I want to directly upload files to a s3 bucket which I think I have configured with CarrierWave. Any help would be greatly appreciated. Thank you in advanced</p>\n\n<p>View:</p>\n\n<pre><code>%div\n  %h3 Import a CSV File\n  = form_tag import_orders_path, :class =&gt; 'order-uploads', multipart: true do\n    = file_field_tag 'upload[file]'\n    / :file for just getting param[:file] from server\n    %br\n    = submit_tag \"Import CSV\", :class =&gt; 'submit-file'\n</code></pre>\n\n<p>Initializer file(I added this manually so maybe this is a problem?)</p>\n\n<p>carrierwave.rb</p>\n\n<pre><code>require 'fog'\nrequire 'carrierwave'\n\nCarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider               =&gt; 'AWS',                        # required\n    :aws_access_key_id      =&gt; 'my_key_id',                        # required\n    :aws_secret_access_key  =&gt; 'secret_access_key',                        # required\n    :region                 =&gt; 'us-east-1',                  # optional, defaults to 'us-east-1'\n  }\n  config.fog_directory  = 'my_bucket'                          # required\n  config.fog_public     = false                                        # optional, defaults to true\n  config.fog_attributes = {'Cache-Control'=&gt;\"max-age=#{365.day.to_i}\"} # optional, defaults to {}\nend\n</code></pre>\n\n<p>What I am trying but it fails:</p>\n\n<pre><code>uploader = AvatarUploader.new\nuploader.store!(param[:upload][:file])\n</code></pre>\n\n<p>Error I get:</p>\n\n<pre><code>Completed 500 Internal Server Error in 5362ms\nCompleted 500 Internal Server Error in 5362ms\n** [Airbrake] Notice was not sent due to configuration:         \n  Environment Monitored? false         \n  API key set? false\n** [Airbrake] Notice was not sent due to configuration:         \n  Environment Monitored? false         \n  API key set? false\n\nNameError (undefined local variable or method `path' for #&lt;OrdersController:0x00000007637ea8&gt;):\n  app/controllers/orders_controller.rb:14:in `import'\n\n\n\nNameError (undefined local variable or method `path' for #&lt;OrdersController:0x00000007637ea8&gt;):\n  app/controllers/orders_controller.rb:14:in `import'\n\n\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.7ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.7ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.4ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.4ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb (892.2ms)\n  Rendered /home.rvm/gems/ruby-2.1.3/gems/actionpack-4.1.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb (892.2ms)\n</code></pre>\n\n<p>This works for local storage:</p>\n\n<pre><code> name = params[:upload][:file].original_filename\n directory = \"public/files\"\n path = File.join(directory, name)\n File.open(path, \"wb\") { |f| f.write(params[:upload][:file].read) }\n flash[:notice] = \"File uploaded\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "profiling"], "answers": [{"tags": [], "owner": {"reputation": 6890, "user_id": 2140872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d6527.jpg?s=128&g=1", "display_name": "robertjlooby", "link": "https://stackoverflow.com/users/2140872/robertjlooby"}, "is_accepted": false, "score": 1, "last_activity_date": 1426964724, "creation_date": 1426964724, "answer_id": 29186836, "question_id": 27953545, "link": "https://stackoverflow.com/questions/27953545/how-to-profile-my-rspec-tests-to-find-the-biggest-memory-hogs/29186836#29186836", "title": "How to profile my rspec tests to find the biggest memory hogs?", "body": "<p>You can use the <a href=\"https://github.com/ruby-prof/ruby-prof\" rel=\"nofollow\">ruby-prof</a> gem to profile memory usage. But first you might try running rspec with the <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-2/docs/configuration/profile-examples\" rel=\"nofollow\"><code>--profile</code> flag</a>. It will give you the 10 slowest specs which is probably a good place to start looking for specs that are consuming massive amounts of memory.</p>\n"}], "owner": {"reputation": 119, "user_id": 1180596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0ddd0594d70623783c56111324ab70c?s=128&d=identicon&r=PG", "display_name": "user1180596", "link": "https://stackoverflow.com/users/1180596/user1180596"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1426964724, "creation_date": 1421274125, "question_id": 27953545, "link": "https://stackoverflow.com/questions/27953545/how-to-profile-my-rspec-tests-to-find-the-biggest-memory-hogs", "title": "How to profile my rspec tests to find the biggest memory hogs?", "body": "<p>We use circleci as part of our deployment process.  Circleci runs our 3000 tests and sometimes fails because it hits a 4 GB memory limit.  It looks like some of our tests are creating a lot of objects and using up a ton of memory. I just don't know which ones are. </p>\n\n<p>Is there an easy way for me to profile the memory used for a given test?  If I knew how to do this, I could easily loop through each test and run it and see how much memory it uses.</p>\n"}, {"tags": ["ruby", "sinatra", "nokogiri", "gemfile", "rufus-scheduler"], "comments": [{"owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 3, "creation_date": 1421271684, "post_id": 27952921, "comment_id": 44301012, "body": "<code>require &#39;nokogiri&#39;</code> in your <code>sample.rb</code>?"}, {"owner": {"reputation": 400, "user_id": 1930510, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/KxFz0.jpg?s=128&g=1", "display_name": "Adam Labi", "link": "https://stackoverflow.com/users/1930510/adam-labi"}, "reply_to_user": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 0, "creation_date": 1421272406, "post_id": 27952921, "comment_id": 44301338, "body": "yep that worked! I think i tried with <code>require &#39;Nokogiri&#39;</code> before. Thanks for the help Dave!"}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "edited": false, "score": 0, "creation_date": 1421280582, "post_id": 27952921, "comment_id": 44304562, "body": "Dave, could you please package your answer in an &quot;answer&quot; so that Adam can accept it and the question appears as &quot;solved&quot;? Thanks in advance."}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "edited": false, "score": 0, "creation_date": 1421467422, "post_id": 27952921, "comment_id": 44382383, "body": "Adam, please accept Dave&#39;s answer below."}], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1421287224, "creation_date": 1421287224, "answer_id": 27955683, "question_id": 27952921, "link": "https://stackoverflow.com/questions/27952921/dashing-uninitialized-constant-nokogiri-exception/27955683#27955683", "title": "Dashing - uninitialized constant Nokogiri exception", "body": "<p>The error message is saying that it doesn't know anything about <code>Nokogiri</code>, which is a module defined in the nokogiri gem. In order to bring that into scope, you need to add:</p>\n\n<pre><code>require 'nokogiri'\n</code></pre>\n\n<p>to your <code>sample.rb</code> (usually at the top of the file).</p>\n"}], "owner": {"reputation": 400, "user_id": 1930510, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/KxFz0.jpg?s=128&g=1", "display_name": "Adam Labi", "link": "https://stackoverflow.com/users/1930510/adam-labi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2187, "favorite_count": 0, "accepted_answer_id": 27955683, "answer_count": 1, "score": 1, "last_activity_date": 1421287224, "creation_date": 1421271508, "question_id": 27952921, "link": "https://stackoverflow.com/questions/27952921/dashing-uninitialized-constant-nokogiri-exception", "title": "Dashing - uninitialized constant Nokogiri exception", "body": "<p>When I try to start dashing I receive the following error: </p>\n\n<pre><code>scheduler caught exception:\nuninitialized constant Nokogiri\n/Users/Adam/projects/ticker/jobs/sample.rb:2:in `block in &lt;top (required)&gt;'\n</code></pre>\n\n<p>my Gemfile is:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'nokogiri'\ngem 'dashing'\n</code></pre>\n\n<p>my jobs folder consists of one folder, sample.rb:</p>\n\n<pre><code>SCHEDULER.every '2s' do\n  oil_doc = Nokogiri::HTML(open(\"http://www.bloomberg.com/energy/\"))\n  a = oil_doc.css(\"table.std_table_module\").first\n  price = a.xpath(\"//td[3]\").first.children.text\n  send_event('valuation', { current: price })\nend\n</code></pre>\n\n<p>I have tried adding  <code>require 'open-uri'</code> to the Gemfile and sample.rb but it has not helped! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 689, "user_id": 1228901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hazhK.jpg?s=128&g=1", "display_name": "Hare Kumar", "link": "https://stackoverflow.com/users/1228901/hare-kumar"}, "edited": false, "score": 0, "creation_date": 1421271432, "post_id": 27952847, "comment_id": 44300883, "body": "That column got removed when you executed you rollback and after that your rollback got interupted. Hence it was not finished. Just try to fix it via commenting out that particular remove_column migration. And do rollback again. And after that run migrate again."}, {"owner": {"reputation": 317, "user_id": 4330536, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2fb796776fa42a1087b4090144c1c921?s=128&d=identicon&r=PG&f=1", "display_name": "Cror2014", "link": "https://stackoverflow.com/users/4330536/cror2014"}, "reply_to_user": {"reputation": 689, "user_id": 1228901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hazhK.jpg?s=128&g=1", "display_name": "Hare Kumar", "link": "https://stackoverflow.com/users/1228901/hare-kumar"}, "edited": false, "score": 0, "creation_date": 1421278429, "post_id": 27952847, "comment_id": 44303855, "body": "Thanks. It did work. But when I run rollback, shouldn&#39;t it do the opposite of remove_column? I mean shouldn&#39;t it create that column again, so when I run the migrate again, it should work?"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 4330536, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2fb796776fa42a1087b4090144c1c921?s=128&d=identicon&r=PG&f=1", "display_name": "Cror2014", "link": "https://stackoverflow.com/users/4330536/cror2014"}, "edited": false, "score": 0, "creation_date": 1421278730, "post_id": 27952947, "comment_id": 44303942, "body": "Thanks for your answer. I did based on second part of your answer. It also worked, but I have a question. When I uncomment and run the rake db:migrate, there is no message, which I think is natural. Because rails have the track of all the migrations and will not execute them again. So uncommenting should not do anything. Right?"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1421271594, "creation_date": 1421271594, "answer_id": 27952947, "question_id": 27952847, "link": "https://stackoverflow.com/questions/27952847/error-in-running-the-rolled-back-migrations/27952947#27952947", "title": "error in running the rolled back migrations", "body": "<p>Remove the migration for removing the column, migrate the database and create new migration to remove the column.</p>\n\n<p>If you edited the existed migration, comment out the line <code>remove_column</code>, run <code>rake db:migrate</code>, uncomment it back and run <code>rake db:migrate</code> again.</p>\n"}], "owner": {"reputation": 317, "user_id": 4330536, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2fb796776fa42a1087b4090144c1c921?s=128&d=identicon&r=PG&f=1", "display_name": "Cror2014", "link": "https://stackoverflow.com/users/4330536/cror2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 27952947, "answer_count": 1, "score": 0, "last_activity_date": 1421271594, "creation_date": 1421271156, "last_edit_date": 1421271411, "question_id": 27952847, "link": "https://stackoverflow.com/questions/27952847/error-in-running-the-rolled-back-migrations", "title": "error in running the rolled back migrations", "body": "<p>I am new to rails and I am working on an existing project. I had created some new migrations, then I wanted to rollback to edit them and migrate again. I made a mistake and rolled back with 1 step more than the migrations I had done. Now that I try to use <code>rake db:migrate</code>, it gives an error about the migration that was existing and I have rolledback by mistake. The error is about <code>remove_column</code> statement, and it says that a column does not exist, so it can't remove it. But before when I was doing <code>rake db:migrate</code>, before I created migrations myself, there was not such an error. For info, I would like to say that I have not done any thing related to that table.</p>\n\n<p>Could you please help?</p>\n\n<p>Thanks in Advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "get"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 1, "creation_date": 1421271268, "post_id": 27952743, "comment_id": 44300805, "body": "You really need to learn more about making a RESTful or Recourse API."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1421271328, "post_id": 27952743, "comment_id": 44300832, "body": "get values will come through <code>params</code> eg. <code>params[:order_number] #=&gt; 123</code>. Are you looking to write an <code>API</code> or some sort of single page app? Otherwise you might want to read up on <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\"><code>REST routing</code></a> as it applies to rails. Also possibly a framework like Sinatra might be more useful to you."}, {"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 2, "creation_date": 1421274146, "post_id": 27952743, "comment_id": 44302148, "body": "I&#39;m confused. Isn&#39;t this basically how all Rails apps work? You configure the routes, Rails sends the params to the controller, and you render something based on those params."}, {"owner": {"reputation": 5648, "user_id": 1492005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jLmY9.jpg?s=128&g=1", "display_name": "Jaison Brooks", "link": "https://stackoverflow.com/users/1492005/jaison-brooks"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1421341247, "post_id": 27952743, "comment_id": 44330356, "body": "thanks for the comments @TamerShlash, engineersmnky and Ajedi32 | All i need was a little direction and between you 3 i now have a more confirmed idea on what i need to do. thank you."}], "answers": [{"tags": [], "owner": {"reputation": 5648, "user_id": 1492005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jLmY9.jpg?s=128&g=1", "display_name": "Jaison Brooks", "link": "https://stackoverflow.com/users/1492005/jaison-brooks"}, "is_accepted": true, "score": 0, "last_activity_date": 1421421306, "creation_date": 1421421306, "answer_id": 27987041, "question_id": 27952743, "link": "https://stackoverflow.com/questions/27952743/best-method-for-simple-get-based-ruby-on-rails-app/27987041#27987041", "title": "Best method for simple GET based Ruby on Rails app", "body": "<p>Between the 3 comments on the first post i am going to looking into Restful routing and by that gather my params to interact with them. </p>\n"}], "owner": {"reputation": 5648, "user_id": 1492005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jLmY9.jpg?s=128&g=1", "display_name": "Jaison Brooks", "link": "https://stackoverflow.com/users/1492005/jaison-brooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 27987041, "answer_count": 1, "score": -1, "last_activity_date": 1421421306, "creation_date": 1421270736, "question_id": 27952743, "link": "https://stackoverflow.com/questions/27952743/best-method-for-simple-get-based-ruby-on-rails-app", "title": "Best method for simple GET based Ruby on Rails app", "body": "<p>Im trying to understand the best method for creating a basic Rails app that is only interfaced with via GET values in the url. Im attempting to understand how to go about starting to write logic for this as well as generally where i would want to start coding. Would this main interface code be considered a helper? or should i migrate the code to the model?</p>\n\n<p>An example of how i'd like to use this app is something like the following.</p>\n\n<pre><code>http://www.railsapp.com/?order_number=123&amp;print_label=true\n</code></pre>\n\n<p>With this example url i hope to grab the <code>order_number</code> get some information from it, determine if <code>print_label</code> is true/false and output something to the user.</p>\n\n<p>Im not looking for someone to write it all for me, i'm simply needing some guidance on the best structure on writing a rails app that is only interfaced with via a URL as well as the easiest method for gather GET values. </p>\n"}, {"tags": ["javascript", "ruby", "arrays", "json"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1421270904, "post_id": 27952695, "comment_id": 44300613, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/949449/json-spec-does-the-key-have-to-be-surrounded-with-quotes\">JSON Spec - does the key have to be surrounded with quotes?</a>"}, {"owner": {"reputation": 177, "user_id": 1096213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Bwfu5.jpg?s=128&g=1", "display_name": "Nothing", "link": "https://stackoverflow.com/users/1096213/nothing"}, "edited": false, "score": 0, "creation_date": 1421270949, "post_id": 27952695, "comment_id": 44300642, "body": "I don&#39;t know understand well the reason but you can remove the quotes whit a simple replace like <code>varStringified.replace(&#47;\\&quot;&#47;g, &quot;&quot;);</code> This is solve your answer?"}, {"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "edited": false, "score": 3, "creation_date": 1421271022, "post_id": 27952695, "comment_id": 44300681, "body": "The quotes will not prevent you from using dot notation."}, {"owner": {"reputation": 163, "user_id": 1694975, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/xySRf.jpg?s=128&g=1", "display_name": "Andrew Appleby", "link": "https://stackoverflow.com/users/1694975/andrew-appleby"}, "edited": false, "score": 0, "creation_date": 1421274571, "post_id": 27952695, "comment_id": 44302351, "body": "infused - Thanks, I did read that one. Nothing - This take out all the double quotes, they need to remain for all values. I&#39;m just trying to remove them from the keys. Travis, I tested and I think you&#39;re right on this one. So I&#39;m guessing the brackets are really just good to throw in a variable or something as the key name. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 3361622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc7fa6ba579118204140a181f3fd012?s=128&d=identicon&r=PG&f=1", "display_name": "Methos", "link": "https://stackoverflow.com/users/3361622/methos"}, "is_accepted": true, "score": 2, "last_activity_date": 1484940048, "creation_date": 1484940048, "answer_id": 41770906, "question_id": 27952695, "link": "https://stackoverflow.com/questions/27952695/trying-to-remove-quotes-from-arrayed-json-keys/41770906#41770906", "title": "Trying to remove quotes from arrayed JSON keys", "body": "<p>I was looking to do something similar to pass linting, and this regex finds all quotes before semicolons in the string: </p>\n\n<p><code>\"(\\w*)\":</code></p>\n\n<p>And replace that with just the text, excluding the quotes:</p>\n\n<p><code>$1:</code></p>\n"}], "owner": {"reputation": 163, "user_id": 1694975, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/xySRf.jpg?s=128&g=1", "display_name": "Andrew Appleby", "link": "https://stackoverflow.com/users/1694975/andrew-appleby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 0, "accepted_answer_id": 41770906, "answer_count": 1, "score": 1, "last_activity_date": 1484940048, "creation_date": 1421270524, "last_edit_date": 1421270676, "question_id": 27952695, "link": "https://stackoverflow.com/questions/27952695/trying-to-remove-quotes-from-arrayed-json-keys", "title": "Trying to remove quotes from arrayed JSON keys", "body": "<p>I have this array of javascript objects (which are actually musical notes) that are generated in my javascript front-end. In order to store it, I had to run javascript <code>JSON.stringify(objectArray)</code>before throwing it into a hidden input, but that automatically encases all my keys in double quotes like so:</p>\n\n<pre><code>[\n  {\"class\":\"barline\",\"symbol\":\"standard\",\"barline\":true,\"newSystem\":true},\n  {\"class\":\"note\",\"rhythm\":\"half\",\"duration\":0.5,\"symbol\":\"flag\",\"hand\":\"R\",\"newbar\":true,\"rebel\":false},      \n  {\"class\":\"note\",\"rhythm\":\"half\",\"duration\":0.5,\"symbol\":\"flag\",\"hand\":\"R\",\"endbar\":true,\"rebel\":false},\n  {\"class\":\"barline\",\"symbol\":\"standard\",\"barline\":true},\n  {\"class\":\"note\",\"rhythm\":\"half\",\"duration\":0.5,\"symbol\":\"flag\",\"hand\":\"R\",\"newbar\":true,\"rebel\":false}\n]\n</code></pre>\n\n<p>Before filtering my params in Rails, I run <code>JSON.parse(params[:score][:notes])</code> to turn it from a string into a proper JSON array for storage in MongoDB (I'm specifically using Mongoid)</p>\n\n<p>I know it's normally proper procedure to keep keys in quotes in most cases, but I like using the dot notation for keys to grab values in all my JS.</p>\n\n<p>Should I switch my JS to reference everything with brackets, or can you think of a simple function that would quickly parse out the keys' quotes before sending to the hidden input?</p>\n"}, {"tags": ["ruby", "ubuntu", "ubuntu-14.04", "libgosu"], "comments": [{"owner": {"reputation": 786, "user_id": 2249001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bw0ht.png?s=128&g=1", "display_name": "aspencer8111", "link": "https://stackoverflow.com/users/2249001/aspencer8111"}, "edited": false, "score": 0, "creation_date": 1421269674, "post_id": 27952413, "comment_id": 44299892, "body": "That message is a generic start to a longer error message. Can you provide the rest of the error so we can better assist please?"}, {"owner": {"reputation": 8296, "user_id": 791619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd93bf9d4f202a8233fe5235d924ab9?s=128&d=identicon&r=PG", "display_name": "WarHog", "link": "https://stackoverflow.com/users/791619/warhog"}, "edited": false, "score": 0, "creation_date": 1421269951, "post_id": 27952413, "comment_id": 44300059, "body": "take a look at <a href=\"http://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror\">this question</a>"}, {"owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "edited": false, "score": 0, "creation_date": 1421270002, "post_id": 27952413, "comment_id": 44300087, "body": "Absolutely! Added it now."}, {"owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "edited": false, "score": 0, "creation_date": 1421270194, "post_id": 27952413, "comment_id": 44300212, "body": "The error code looks almost identical. Will just read it through."}, {"owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "edited": false, "score": 0, "creation_date": 1421270936, "post_id": 27952413, "comment_id": 44300634, "body": "I have read the question and also the instructions here: <a href=\"https://github.com/jlnr/gosu/wiki/Getting-Started-on-Linux\" rel=\"nofollow noreferrer\">github.com/jlnr/gosu/wiki/Getting-Started-on-Linux</a> witch can be found in the error code. But I cannot &quot;solve&quot; it. I keep getting the same error."}, {"owner": {"reputation": 8296, "user_id": 791619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd93bf9d4f202a8233fe5235d924ab9?s=128&d=identicon&r=PG", "display_name": "WarHog", "link": "https://stackoverflow.com/users/791619/warhog"}, "edited": false, "score": 0, "creation_date": 1421274187, "post_id": 27952413, "comment_id": 44302165, "body": "Are you sure that you&#39;ve installed all needed packages noticed there? I mean libsdl2-dev, libsdl2-ttf-dev, libpango1.0-dev, libgl1-mesa-dev, libfreeimage-dev, libopenal-dev, libsndfile-dev. Just for sure double-check it - e.g. with <code>dpkg-query -l &lt;packagename&gt;</code>"}, {"owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "edited": false, "score": 0, "creation_date": 1421275076, "post_id": 27952413, "comment_id": 44302570, "body": "I installed them, now I get another error message. ERROR:  Could not find a valid gem &#39;goso&#39; (&gt;= 0) in any repository ERROR:  Possible alternatives: godo, gogo, goo, gosh, gosu"}, {"owner": {"reputation": 8296, "user_id": 791619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd93bf9d4f202a8233fe5235d924ab9?s=128&d=identicon&r=PG", "display_name": "WarHog", "link": "https://stackoverflow.com/users/791619/warhog"}, "edited": false, "score": 0, "creation_date": 1421275298, "post_id": 27952413, "comment_id": 44302670, "body": "Hmm - as I can see gem is entitled <code>gosu</code> not <code>goso</code> :)"}, {"owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "edited": false, "score": 0, "creation_date": 1421276206, "post_id": 27952413, "comment_id": 44303053, "body": "Haha, lol! Now it is working :) Thank you for all your help! :)"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3231947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bb65e5a701060706365b4f771dcc8f?s=128&d=identicon&r=PG", "display_name": "Karthikeyan A K", "link": "https://stackoverflow.com/users/3231947/karthikeyan-a-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1495167313, "creation_date": 1495167313, "answer_id": 44061357, "question_id": 27952413, "link": "https://stackoverflow.com/questions/27952413/can-not-install-gem-gosu-ubuntu/44061357#44061357", "title": "Can not install gem Gosu Ubuntu", "body": "<p>Do this</p>\n\n<p>Step 1:</p>\n\n<pre><code>sudo apt-get install build-essential libsdl2-dev libsdl2-ttf-dev libpango1.0-dev \\\n                 libgl1-mesa-dev libopenal-dev libsndfile-dev libmpg123-dev\n</code></pre>\n\n<p>Step2:</p>\n\n<pre><code>sudo apt-get install ruby-dev\n</code></pre>\n\n<p>Step 3:</p>\n\n<pre><code>gem install gosu\n</code></pre>\n"}], "owner": {"reputation": 676, "user_id": 4165235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f35ee4291fd7978fa3619b278d7a8c04?s=128&d=identicon&r=PG&f=1", "display_name": "Salviati", "link": "https://stackoverflow.com/users/4165235/salviati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1326, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1495167313, "creation_date": 1421269497, "last_edit_date": 1440697512, "question_id": 27952413, "link": "https://stackoverflow.com/questions/27952413/can-not-install-gem-gosu-ubuntu", "title": "Can not install gem Gosu Ubuntu", "body": "<p>I am trying to install Gosu on my Ubuntu computer. To install the gem i have tried \"gem install gosu\" but I am getting an Error message I cannot figure out.. It says it \"Failed to build gem native extension\".</p>\n\n<p>Anyone know what I can do?\nI am kinda new to Ruby so it might have to do something with the RVM..? Im not sure. </p>\n\n<p>Here is the full error message:</p>\n\n<pre><code>Fetching: gosu-0.8.6.gem (100%)\nBuilding native extensions.  This could take a while...\nERROR:  Error installing gosu:\nERROR: Failed to build gem native extension.\n\n/usr/bin/ruby1.9.1 extconf.rb\nThe Gosu gem requires some libraries to be installed system-wide.\nSee the following site for a list:\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\nfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\nfrom extconf.rb:63:in `&lt;main&gt;'\nhttps://github.com/jlnr/gosu/wiki/Getting-Started-on-Linux\n\nGem files will remain installed in /var/lib/gems/1.9.1/gems/gosu-0.8.6 for inspection.\nResults logged to /var/lib/gems/1.9.1/gems/gosu-0.8.6/ext/gosu/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1421269575, "creation_date": 1421269575, "answer_id": 27952435, "question_id": 27952352, "link": "https://stackoverflow.com/questions/27952352/new-rspec-3-way-to-stub-model-rails-4-2-rspec-3-1/27952435#27952435", "title": "New Rspec 3 way to stub model (Rails 4.2/Rspec 3.1)", "body": "<p>To stub a method under RSpec 3 use <code>allow/receive</code>:</p>\n\n<pre><code>allow(subject).to receive(:company_name?).and_return(true)\n</code></pre>\n\n<p>If you would to set an expectation that will fail if <code>company_name?</code> is never called:</p>\n\n<pre><code>expect(subject).to receive(:company_name?).and_return(true)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 1085629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c565e1fcf5fdaf4b9086e095458aae91?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Dund&#225;\u010dek", "link": "https://stackoverflow.com/users/1085629/tom%c3%a1%c5%a1-dund%c3%a1%c4%8dek"}, "is_accepted": true, "score": 1, "last_activity_date": 1421269665, "creation_date": 1421269665, "answer_id": 27952455, "question_id": 27952352, "link": "https://stackoverflow.com/questions/27952352/new-rspec-3-way-to-stub-model-rails-4-2-rspec-3-1/27952455#27952455", "title": "New Rspec 3 way to stub model (Rails 4.2/Rspec 3.1)", "body": "<p>It could be like this:</p>\n\n<pre><code>describe \"test on company name\" do\n\n  context \"test\" do\n    before { allow(subject).to receive(:company_name?).and_return(true) }\n\n    ...\n  end \nend\n</code></pre>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 1, "accepted_answer_id": 27952455, "answer_count": 2, "score": 0, "last_activity_date": 1485971609, "creation_date": 1421269244, "last_edit_date": 1485971609, "question_id": 27952352, "link": "https://stackoverflow.com/questions/27952352/new-rspec-3-way-to-stub-model-rails-4-2-rspec-3-1", "title": "New Rspec 3 way to stub model (Rails 4.2/Rspec 3.1)", "body": "<p>On one Rspec test (which works fine), I have a deprecation warning</p>\n\n<blockquote>\n  <p>Using <code>stub</code> from rspec-mocks' old <code>:should</code> syntax without explicitly enabling the syntax is deprecated. Use the new <code>:expect</code> syntax or explicitly enable <code>:should</code> instead. </p>\n</blockquote>\n\n<p>How should I change this test to be compliant with Rspec 3?</p>\n\n<p>I am testing that the field company name exists/is not empty, then I have to validate presence of the company phone number field. I used to use 'stub' but it does not work properly and I'd like to move to the new Rspec 3 way. </p>\n\n<p>/spec/models/company_spec.rb</p>\n\n<pre><code>describe \"test on company name\" do\n  context \"test\" do\n    before { subject.stub(:company_name?) { true } }\n    it { is_expected.to validate_presence_of(:company_phone_number) }\n  end \nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "rack", "puma", "airbrake"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421271742, "post_id": 27952350, "comment_id": 44301034, "body": "the source actually seems to suggest it fowards &quot;<i>when running as middleware</i>&quot;. You could inherit from <code>Base</code> and override."}], "owner": {"reputation": 2705, "user_id": 149416, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/48bd02a706b80b9c5ebf737ee020c247?s=128&d=identicon&r=PG", "display_name": "Anton I. Sipos", "link": "https://stackoverflow.com/users/149416/anton-i-sipos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1421271631, "creation_date": 1421269234, "last_edit_date": 1421271631, "question_id": 27952350, "link": "https://stackoverflow.com/questions/27952350/how-to-diagnose-why-a-sinatra-app-is-throwing-notfound-in-production-but-not-in", "title": "How to diagnose why a Sinatra app is throwing NotFound in production but not in development?", "body": "<p>I have a Sinatra app in production (running with Puma) that includes a not_found handler:</p>\n\n<pre><code>module MyApp\n  class Server\n    not_found do\n      [404, { 'Content-Type' =&gt; 'application/json' }, ['{\"error\":\"not found\"}']]\n    end\n  end\nend\n</code></pre>\n\n<p>In development, this does what I expect and on missing pages I see a 404 with a JSON error message. However, in production I'm seeing a NotFound exception which triggers an Airbrake alert.</p>\n\n<p>The stack trace is long, but the top line points here:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/gems/sinatra-1.4.5/lib/sinatra/base.rb:1021 in \"route_missing\"\n</code></pre>\n\n<p>Which is here:\n<a href=\"https://github.com/sinatra/sinatra/blob/v1.4.5/lib/sinatra/base.rb#L1021\" rel=\"nofollow\">https://github.com/sinatra/sinatra/blob/v1.4.5/lib/sinatra/base.rb#L1021</a> ,which does:</p>\n\n<pre><code>def route_missing\n  if @app\n    forward\n  else\n    raise NotFound\n  end\nend\n</code></pre>\n\n<p>The comments in the Sinatra source say that the error is forwarded if your app is not middleware, otherwise it is raised. Yet somehow my expectation would be that my not_found handler should be called instead. It is being called in development. How can I best debug why it isn't in production?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "ruby-2.0"], "answers": [{"comments": [{"owner": {"reputation": 2782, "user_id": 2315443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6a38bc5fa524ee7b1e320312cc1e537?s=128&d=identicon&r=PG", "display_name": "Valor_", "link": "https://stackoverflow.com/users/2315443/valor"}, "edited": false, "score": 0, "creation_date": 1421269423, "post_id": 27952372, "comment_id": 44299754, "body": "Thx i just figured it out!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1421269807, "last_edit_date": 1421269807, "creation_date": 1421269365, "answer_id": 27952372, "question_id": 27952085, "link": "https://stackoverflow.com/questions/27952085/rails-devise-gem-partial-form-submit-button-text-value-based-on-action/27952372#27952372", "title": "Rails devise gem partial form submit button text value based on action", "body": "<p>I think you are on the right way. You can also check the current action to pick the name of the button:</p>\n\n<pre><code>&lt;%= f.submit \"#{['edit', 'update'].include? params[:action] ? 'Update' : 'Sign up'}\", class: 'btn btn-default' %&gt;\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>You can actually just leave it as     <code>&lt;%= f.submit class: 'btn btn-default' %&gt;</code>  and Rails will know what action is it and call the Submit as <code>'Create User'</code> or <code>'Update User'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2782, "user_id": 2315443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6a38bc5fa524ee7b1e320312cc1e537?s=128&d=identicon&r=PG", "display_name": "Valor_", "link": "https://stackoverflow.com/users/2315443/valor"}, "is_accepted": true, "score": 0, "last_activity_date": 1421269383, "creation_date": 1421269383, "answer_id": 27952377, "question_id": 27952085, "link": "https://stackoverflow.com/questions/27952085/rails-devise-gem-partial-form-submit-button-text-value-based-on-action/27952377#27952377", "title": "Rails devise gem partial form submit button text value based on action", "body": "<p>I found out how to do that. You just simply call resource.new_record?</p>\n\n<pre><code>  &lt;%= f.submit resource.new_record? ? 'Sign up' : 'Update', class: 'btn btn-default' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2782, "user_id": 2315443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6a38bc5fa524ee7b1e320312cc1e537?s=128&d=identicon&r=PG", "display_name": "Valor_", "link": "https://stackoverflow.com/users/2315443/valor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 27952377, "answer_count": 2, "score": 0, "last_activity_date": 1431707698, "creation_date": 1421268333, "last_edit_date": 1431707698, "question_id": 27952085, "link": "https://stackoverflow.com/questions/27952085/rails-devise-gem-partial-form-submit-button-text-value-based-on-action", "title": "Rails devise gem partial form submit button text value based on action", "body": "<p>I have created a partial form which serves for register new or editing a user.\nThe problem is in submit button text value. How to do a proper check if user is creating or editing a form, so button text value could be Sign up OR Update</p>\n\n<p>I'm using</p>\n\n<pre><code>Ruby 2.1.5\nRails 4\nDevise gem\n</code></pre>\n\n<p>This is my form:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name))  do |f| %&gt;\n    &lt;%= devise_error_messages! %&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :email, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.email_field :email, autofocus: true, class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :username, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :username, class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :password, class: 'control-label' %&gt;*\n      &lt;% if @validatable %&gt;\n          &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n      &lt;% end %&gt;&lt;br /&gt;\n      &lt;%= f.password_field :password, autocomplete: 'off', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :password_confirmation, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.password_field :password_confirmation, autocomplete: 'off', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;hr&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :name, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :name, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :last_name, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :last_name, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :address, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :address, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :post_number, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :post_number, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :city, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :city, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :mobile, class: 'control-label' %&gt;*&lt;br /&gt;\n      &lt;%= f.text_field :mobile, autocomplete: 'on', class: 'form-control' %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.label :country_id, class: 'control-label' %&gt;&lt;br /&gt;\n      &lt;%= f.select(:country_id, options_from_collection_for_select(Country.all, :id, :name), {}, { :class =&gt; 'form-control'}) %&gt;\n      &lt;span class=\"help-block\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;div class=\"actions\"&gt;\n      &lt;%= f.submit 'Sign up', class: 'btn btn-default' %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So i would like to check if this is going to be new record or user just edits the record like this example:</p>\n\n<pre><code>&lt;%= f.submit @user.new_record? ? 'Sign up' : 'Update', class: 'btn btn-default' %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "nested-attributes"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4440189"}, "edited": false, "score": 0, "creation_date": 1421268045, "post_id": 27951939, "comment_id": 44299046, "body": "this is working but how can i order by DESC experience_end_date i have tried -&gt;{ order(:experience_end_date DESC ) } but it is a bad solution"}, {"owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "edited": false, "score": 0, "creation_date": 1421268265, "post_id": 27951939, "comment_id": 44299161, "body": "Mark my response as the answer, if it correctly answered your question."}], "tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": true, "score": 1, "last_activity_date": 1421268084, "last_edit_date": 1421268084, "creation_date": 1421267748, "answer_id": 27951939, "question_id": 27951922, "link": "https://stackoverflow.com/questions/27951922/rails-ordering-in-nested-form/27951939#27951939", "title": "Rails: Ordering in nested form", "body": "<p>This is how you specify the order:</p>\n\n<pre><code>has_many :experiences,\n         -&gt;{ order(:experience_end_date) },\n         dependent: :destroy\n</code></pre>\n\n<p>That will sort by ascending; for descending do this:</p>\n\n<pre><code>has_many :experiences,\n         -&gt;{ order(\"experience_end_date DESC\") },\n         dependent: :destroy\n</code></pre>\n\n<p>You can usually find answers to such questions in the <a href=\"http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many\" rel=\"nofollow\">documentation</a>, either in explanations or in the example code snippets.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4440189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 27951939, "answer_count": 1, "score": 1, "last_activity_date": 1421268084, "creation_date": 1421267670, "question_id": 27951922, "link": "https://stackoverflow.com/questions/27951922/rails-ordering-in-nested-form", "title": "Rails: Ordering in nested form", "body": "<p>I have a profile model that accept experience model as a nested attributes, and i want to order experience by experience_end_date this is my profile model</p>\n\n<pre><code>has_many :experiences, dependent: :destroy, :order =&gt; (\"experience_end_date\")\naccepts_nested_attributes_for :experiences\n</code></pre>\n\n<p>but this is don't work can some one help in how can i fix this?</p>\n\n<p>the experience_end_date is a date field column in the experience model</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "edited": false, "score": 0, "creation_date": 1421265724, "post_id": 27951346, "comment_id": 44297971, "body": "I tried another scoped_search and it worked fine, hm."}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1421270435, "post_id": 27951346, "comment_id": 44300373, "body": "Seems, latest rails version is not yet supported: <a href=\"https://github.com/wvanbergen/scoped_search/issues/115\" rel=\"nofollow noreferrer\">github.com/wvanbergen/scoped_search/issues/115</a>"}], "owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421265474, "creation_date": 1421265474, "question_id": 27951346, "link": "https://stackoverflow.com/questions/27951346/scoped-search-query-not-supported", "title": "Scoped search &quot;query not supported&quot;", "body": "<pre><code>2015-01-14T19:52:56.805276+00:00 app[web.1]: ScopedSearch::QueryNotSupported (relation 'schedule_locations' not one of requisition_plan, machine, schedule_machines, schedule_locations, requisition_plan_products, products, product_categories ):\n2015-01-14T19:52:56.805279+00:00 app[web.1]:   app/controllers/api/v1/requisition_plan_machines_controller.rb:24:in `index'\n2015-01-14T19:52:56.754434+00:00 heroku[router]: at=info method=GET path=\"/api/v1/schedules/225/requisition_plan/requisition_plan_machines.json?token=mytoken&amp;query=day%3Dmonday%26machine_type%3Dcombo\"\n</code></pre>\n\n<p>requisition_plan_machines_controller</p>\n\n<pre><code>def index\n    @requisition_plan_machines = @requisition_plan_machines.ordered_by_name.search_for(params[:query])\n  end\n</code></pre>\n\n<p>\"schedule_locations\" is not one of ...<code>schedule_locations</code>... huh? It's in the list, why isn't this searching?</p>\n\n<p>I just upgraded ruby &amp; rails to the latest and ran into this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1421265621, "creation_date": 1421265621, "answer_id": 27951395, "question_id": 27951281, "link": "https://stackoverflow.com/questions/27951281/nomethoderror-in-articlesshow-after-following-step-6-4-of-ror-guide-creating-a/27951395#27951395", "title": "NoMethodError in Articles#show after following step 6.4 of RoR Guide Creating a Blog", "body": "<p>There is a typo in your <code>routes.rb</code>. You have 3 <code>m</code> letters in word comments instead of 2 here:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :articles do\n    resources :commments\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4454851"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 27951395, "answer_count": 1, "score": 1, "last_activity_date": 1421265621, "creation_date": 1421265237, "question_id": 27951281, "link": "https://stackoverflow.com/questions/27951281/nomethoderror-in-articlesshow-after-following-step-6-4-of-ror-guide-creating-a", "title": "NoMethodError in Articles#show after following step 6.4 of RoR Guide Creating a Blog", "body": "<p>I'm new to RoR and I'm trying to follow the guide at <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a>\nI'm currently at section 6 point 4 but I'm getting stuck here.</p>\n\n<p>I'm getting the following error: NoMethodError in Articles#show</p>\n\n<pre><code>Showing /Users/riaanvanstraaten/rubyapps/blog/app/views/articles/show.html.erb where line #12 raised:\n\nundefined method `article_comments_path' for #&lt;#&lt;Class:0x007fac016d6d20&gt;:0x007fac01c05f30&gt;\nExtracted source (around line #12):\n10                   \n11 &lt;h2&gt;Add a comment:&lt;/h2&gt;\n12 &lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;\n13  &lt;p&gt;\n14    &lt;%= f.label :commenter %&gt;&lt;br&gt;\n15    &lt;%= f.text_field :commenter %&gt;\n</code></pre>\n\n<p>I've double checked the code from the guide but I cannot see where I am going wrong.</p>\n\n<p>I've searched for some advise and followed some suggestions with no positive result.\nI've one post that is very close to my problem, but the mentioned solutions does not resolve my current problem. This is the link to the similiar post: <a href=\"https://stackoverflow.com/questions/26574465/nomethoderror-in-articlesshow-undefined-method-article-comments-path\">NoMethodError in Articles#show.undefined method `article_comments_path&#39;</a></p>\n\n<p>Here is the code from the files used</p>\n\n<blockquote>\n  <p>show.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @article.title %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Text:&lt;/strong&gt;\n  &lt;%= @article.text %&gt;\n&lt;/p&gt;\n\n&lt;h2&gt;Add a comment:&lt;/h2&gt;\n&lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.label :commenter %&gt;&lt;br&gt;\n    &lt;%= f.text_field :commenter %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :body %&gt;&lt;br&gt;\n    &lt;%= f.text_area :body %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'Back', articles_path %&gt; |\n&lt;%= link_to 'Edit', edit_article_path(@article) %&gt;\n</code></pre>\n\n<blockquote>\n  <p>comments_controller.html.erb</p>\n</blockquote>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  def create\n    @article = Article.find(params[:article_id])\n    @comment = @article.comments.create(comment_params)\n    redirect_to article_path(@article)\n  end\n\n  private\n    def comment_params\n      params.require(:comment).permit(:commenter, :body)\n    end\nend\n</code></pre>\n\n<blockquote>\n  <p>routes.rb</p>\n</blockquote>\n\n<pre><code>Rails.application.routes.draw do\n\n    resources :articles do\n        resources :commments\n    end\nend\n</code></pre>\n\n<p>Here is my 'rake routes' output</p>\n\n<pre><code>               Prefix Verb   URI Pattern                                        Controller#Action\n    article_commments GET    /articles/:article_id/commments(.:format)          commments#index\n                      POST   /articles/:article_id/commments(.:format)          commments#create\n new_article_commment GET    /articles/:article_id/commments/new(.:format)      commments#new\nedit_article_commment GET    /articles/:article_id/commments/:id/edit(.:format) commments#edit\n     article_commment GET    /articles/:article_id/commments/:id(.:format)      commments#show\n                      PATCH  /articles/:article_id/commments/:id(.:format)      commments#update\n                      PUT    /articles/:article_id/commments/:id(.:format)      commments#update\n                      DELETE /articles/:article_id/commments/:id(.:format)      commments#destroy\n             articles GET    /articles(.:format)                                articles#index\n                      POST   /articles(.:format)                                articles#create\n          new_article GET    /articles/new(.:format)                            articles#new\n         edit_article GET    /articles/:id/edit(.:format)                       articles#edit\n              article GET    /articles/:id(.:format)                            articles#show\n                      PATCH  /articles/:id(.:format)                            articles#update\n                      PUT    /articles/:id(.:format)                            articles#update\n                      DELETE /articles/:id(.:format)                            articles#destroy\n</code></pre>\n\n<p>What's wrong? I copied and pasted the code from the website to see what I'm doing wrong, but I still cannot to resolve the issue.</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["sql", "ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421272549, "post_id": 27951109, "comment_id": 44301408, "body": "I would have a look at this doc on <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/querying_rdoc.html\" rel=\"nofollow noreferrer\">Sequel Queries</a>. You could even just execute your raw SQL like <code>DB[&quot;SELECT * FROM echos INNER JOIN deltas ON delta.id = echos.delta_id INNER JOIN charlies ON charlies.id = deltas.charlie_id INNER JOIN bravos ON bravos.id = charlies.bravo_id INNER JOIN alphas on alphas.id = bravos.alpha_id WHERE alphas.id = ?&quot;, 1]</code>"}], "owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1421266231, "creation_date": 1421264646, "last_edit_date": 1421266231, "question_id": 27951109, "link": "https://stackoverflow.com/questions/27951109/querying-for-distant-relations", "title": "Querying for distant relations", "body": "<p>I'm working on modeling some relational data in an app. I'm wondering mostly about how to deal with distant relations in SQL, though for context it's a Ruby app and I'm using Sequel as an ORM.</p>\n\n<p>One example relationship looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>alphas one-to-many bravos\nbravos many-to-one charlies\ncharlies one-to-many deltas\ndeltas one-to-many echoes\n</code></pre>\n\n<p>So, using the ORM and doing the work in Ruby I might naively query for all Echoes related to an Alpha like so:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>a = Alpha.where id: 1\nechoes = []\na.bravos.each do |bravo|\n  bravo.charlie.deltas.each do |delta|\n    echoes &lt;&lt; delta.echoes\n  end\nend\nechoes.flatten\n</code></pre>\n\n<p>This works but fails to take advantage of the database and rather does most of the work in the application layer. Expressing the same idea in ugly psuedo-sql subqueries it would look like:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM echoes WHERE delta_id IN\n  SELECT delta_id FROM charlies WHERE charlie_id IN\n    SELECT charlie_id FROM bravos WHERE bravo_id IN\n      SELECT id FROM bravos WHERE alpha_id = 1\n</code></pre>\n\n<p>This is essentially the same brute force approach, it seems like there must be a better way.</p>\n\n<p>So my question is:</p>\n\n<ol>\n<li><p>What is a better way to write a query for a distant relationship like this?</p></li>\n<li><p>Is there a change to the schema design that should be made to represent this kind of distant relation?</p></li>\n</ol>\n\n<p>It occurs to me that I could create an <code>alpha_id</code> column on <code>echoes</code> and use this to query directly, I then would rely on the application to always update that column if the intermediate relations change. That seems to me like a bad idea, but it would certainly make for more efficient queries in this case.</p>\n\n<p>I'd love to hear from some SQL pros, what do you do when you have distantly related data that you need to query frequently?</p>\n"}, {"tags": ["ruby", "email", "imap"], "answers": [{"comments": [{"owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "edited": false, "score": 0, "creation_date": 1421349654, "post_id": 27960978, "comment_id": 44335235, "body": "Thanks for this. However the search is duplicated against folders within the same mailbox, not different mailboxes. @arnt, any idea on this?"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "reply_to_user": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "edited": false, "score": 0, "creation_date": 1421396052, "post_id": 27960978, "comment_id": 44350906, "body": "What you call folders is called &quot;mailbox&quot; in the documents, so for &quot;mailbox&quot; in my answer, read &quot;folder&quot;."}], "tags": [], "owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "is_accepted": false, "score": 0, "last_activity_date": 1421316326, "creation_date": 1421316326, "answer_id": 27960978, "question_id": 27951058, "link": "https://stackoverflow.com/questions/27951058/ruby-mail-duplicated-search/27960978#27960978", "title": "Ruby Mail duplicated search", "body": "<p>Mailboxes can contain duplicated mail. It happens quite often, e.g. when someone sends mail to developers@example.com, uxdesigners@example.com and someone is on both teams.</p>\n\n<p>It's just a fact of life. Deal with it.</p>\n\n<p>Regarding your other problem, IMAP servers never ever return messages in other mailboxes as part of a search result. That's not syntactically possible. Here's a search command and response to illustrate:</p>\n\n<pre><code>a uid search from &lt;arnt@example.com&gt;\n* search 123 234 345 456 567 678 789\na OK search completed\n</code></pre>\n\n<p>Even if the server by mistake confuses its indexes and <em>means</em> to include message 678 from some other mailbox, the client will consider message 678 in <em>this</em> mailbox as matching the search, because that's the only way to interpret the response.</p>\n"}], "owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421316326, "creation_date": 1421264445, "last_edit_date": 1421264564, "question_id": 27951058, "link": "https://stackoverflow.com/questions/27951058/ruby-mail-duplicated-search", "title": "Ruby Mail duplicated search", "body": "<p>I am using the ruby Mail gem, which uses Net::IMAP internally to search within a mailbox. \nI am searching through a series of different folders within the mailbox. \nAt times there is a duplication in the messages. Two messages with the same message_id. \nIn addition to this, when querying a particular mailbox, another message from a different mailbox will be added in. \nBare in mind this is a massive mailbox, with thousands of messages. </p>\n\n<p>As for the code that does the search is extremely basic. It uses the default find and passes in the mailbox. </p>\n\n<p>Is there a way to prevent this? Is this an indexing issue? \nAny help is appreciated. </p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "watir", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 576891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad58fa62125fd6e73438ee57b0b5e00e?s=128&d=identicon&r=PG", "display_name": "Cheezy", "link": "https://stackoverflow.com/users/576891/cheezy"}, "edited": false, "score": 0, "creation_date": 1421283231, "post_id": 27951074, "comment_id": 44305302, "body": "Actually you only need to include page-object."}], "tags": [], "owner": {"reputation": 193, "user_id": 3513433, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac7d22c65d210c61930b8e0502865457?s=128&d=identicon&r=PG&f=1", "display_name": "Dimi", "link": "https://stackoverflow.com/users/3513433/dimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1421264515, "creation_date": 1421264515, "answer_id": 27951074, "question_id": 27950958, "link": "https://stackoverflow.com/questions/27950958/cucumber-page-object-pageobject-default-element-wait-10-giving-error/27951074#27951074", "title": "Cucumber Page object PageObject.default_element_wait = 10 giving error", "body": "<p>I found the answer. It turns you need to require 'page-object' as well as 'page-object/page_factory'</p>\n\n<pre><code>require 'rspec'\nrequire 'page-object/page_factory'\nrequire 'page-object'\n\nPageObject.default_element_wait=(10)\n\n\nWorld(PageObject::PageFactory)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 3513433, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac7d22c65d210c61930b8e0502865457?s=128&d=identicon&r=PG&f=1", "display_name": "Dimi", "link": "https://stackoverflow.com/users/3513433/dimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 27951074, "answer_count": 1, "score": 0, "last_activity_date": 1421264515, "creation_date": 1421263964, "question_id": 27950958, "link": "https://stackoverflow.com/questions/27950958/cucumber-page-object-pageobject-default-element-wait-10-giving-error", "title": "Cucumber Page object PageObject.default_element_wait = 10 giving error", "body": "<p>I'm attempting to change the default element time out to 10 second by adding PageObject.default_element_wait = 10 to the env.rb page but I receive an error after saving.</p>\n\n<p>The env.rb page</p>\n\n<pre><code>require 'rspec'\nrequire 'page-object/page_factory'\n\nPageObject.default_element_wait = 10\nPageObject.default_page_wait = 10\n\nWorld(PageObject::PageFactory)\n</code></pre>\n\n<p>The error</p>\n\n<pre><code>Dimitris-MacBook-Pro:Cucumber_Automation dimitri$ cucumber features/element_validation.feature\nundefined method `default_element_wait=' for PageObject:Module (NoMethodError)\n/Users/dimitri/git/Cucumber_Automation/features/support/env.rb:4:in `&lt;top (required)&gt;'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/rb_support/rb_language.rb:95:in `load'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/rb_support/rb_language.rb:95:in `load_code_file'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime/support_code.rb:180:in `load_file'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime/support_code.rb:82:in `each'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime/support_code.rb:82:in `load_files!'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime.rb:184:in `load_step_definitions'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/runtime.rb:42:in `run!'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/lib/cucumber/cli/main.rb:47:in `execute!'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/gems/cucumber-1.3.17/bin/cucumber:13:in `&lt;top (required)&gt;'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/bin/cucumber:23:in `load'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/bin/cucumber:23:in `&lt;main&gt;'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/bin/ruby_executable_hooks:15:in `eval'\n/Users/dimitri/.rvm/gems/ruby-2.1.5/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Is there anything that I'm doing wrong that's causing this to error out?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1421263768, "post_id": 27950883, "comment_id": 44296870, "body": "Post the welcome_controller.rb content"}, {"owner": {"reputation": 649, "user_id": 3207381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d1d7d1741b6d353fc66fa732b7af609?s=128&d=identicon&r=PG&f=1", "display_name": "Mukul215", "link": "https://stackoverflow.com/users/3207381/mukul215"}, "edited": false, "score": 0, "creation_date": 1421263773, "post_id": 27950883, "comment_id": 44296872, "body": "Please post code for welcome_controller.rb."}, {"owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "edited": false, "score": 0, "creation_date": 1421263813, "post_id": 27950883, "comment_id": 44296893, "body": "I was hoping the header would&#39;nt actually show up like that. anyway it&#39;s &lt;h1&gt;hello, rails!&lt;/h1&gt;"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1421263839, "post_id": 27950883, "comment_id": 44296907, "body": "since it&#39;s saying the <code>&lt;h1&gt;</code> is unexpected, obviously the error is somwhere BEFORE wherever you&#39;ve got that html."}, {"owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "edited": false, "score": 0, "creation_date": 1421263862, "post_id": 27950883, "comment_id": 44296920, "body": "&lt;h1&gt;Hello, Rails!&lt;/h1&gt; &lt;%= link_to &quot;My Blog&quot;, controller: &quot;posts&quot; %&gt; .... hey, like this but on seperate lines"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1421263875, "post_id": 27950883, "comment_id": 44296935, "body": "You appear to be putting markup inside your controller. That&#39;s not where your markup goes. You need to start from the beginning with whatever Rails tutorial you&#39;re following and pay attention to the paths, because replacing the content of your <i>controller</i> with markup is <i>very</i> wrong."}, {"owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "edited": false, "score": 0, "creation_date": 1421263967, "post_id": 27950883, "comment_id": 44296979, "body": "Ok.. is markup the bits inside the &lt;%=.... %&gt;?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421264009, "post_id": 27950948, "comment_id": 44297005, "body": "Make sure that the HTML is in a <code>.erb</code> file within <code>app&#47;views&#47;welcome</code>. It seems like the <code>&lt;h1&gt;</code> is actually in the controller file."}, {"owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "edited": false, "score": 0, "creation_date": 1421264406, "post_id": 27950948, "comment_id": 44297222, "body": "Hi thanks. Yes I had put it in the wrong one. my bad."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1421263906, "creation_date": 1421263906, "answer_id": 27950948, "question_id": 27950883, "link": "https://stackoverflow.com/questions/27950883/syntax-error-unexpected-expecting-end-of-input-h1hello-rails-h1/27950948#27950948", "title": "syntax error, unexpected &#39;,&#39;, expecting end-of-input &lt;h1&gt;Hello, Rails!&lt;/h1&gt; ^", "body": "<p>Markup goes in your views, in <code>app/views</code>. Your controller should contain <strong>Ruby code</strong> for definining your controller. Something along the lines of</p>\n\n<pre><code>class MyController &lt; ApplicationController\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "edited": false, "score": 0, "creation_date": 1421264477, "post_id": 27950964, "comment_id": 44297262, "body": "Hey thanks. ok so i wrote that back in and now this comes up: Circular dependency detected while autoloading constant WelcomeController"}], "tags": [], "owner": {"reputation": 649, "user_id": 3207381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d1d7d1741b6d353fc66fa732b7af609?s=128&d=identicon&r=PG&f=1", "display_name": "Mukul215", "link": "https://stackoverflow.com/users/3207381/mukul215"}, "is_accepted": false, "score": 0, "last_activity_date": 1421264019, "creation_date": 1421264019, "answer_id": 27950964, "question_id": 27950883, "link": "https://stackoverflow.com/questions/27950883/syntax-error-unexpected-expecting-end-of-input-h1hello-rails-h1/27950964#27950964", "title": "syntax error, unexpected &#39;,&#39;, expecting end-of-input &lt;h1&gt;Hello, Rails!&lt;/h1&gt; ^", "body": "<p>Add this to your welcome_controller.rb if you do not already have it:</p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n  def index\n\n  end\nend\n</code></pre>\n\n<p>and add this to your index.html.erb (found in apps>views>welcome):</p>\n\n<pre><code>&lt;h1&gt;Hello, Rails!&lt;/h1&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4416352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50945e9f823a3977061f95ed9eb604ce?s=128&d=identicon&r=PG&f=1", "display_name": "mudbone2.0", "link": "https://stackoverflow.com/users/4416352/mudbone2-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1421264019, "creation_date": 1421263664, "last_edit_date": 1421263896, "question_id": 27950883, "link": "https://stackoverflow.com/questions/27950883/syntax-error-unexpected-expecting-end-of-input-h1hello-rails-h1", "title": "syntax error, unexpected &#39;,&#39;, expecting end-of-input &lt;h1&gt;Hello, Rails!&lt;/h1&gt; ^", "body": "<p>This should be an easy easy one as I'm new to ROR but I've tried to fix the error but just not finding it. If anyone could point me in the right direction it would be great. I'm using Nitrous cloud hosting but that should not be the source of the problem. These are the steps on the tutorial:</p>\n\n<blockquote>\n  <p>This will create the welcome controller with an index action defined.\n  Next lets edit app/views/welcome/index.html.erb, and delete all of the\n  code and replace it with the following: </p>\n\n<pre><code>&lt;h1&gt;Hello, Rails!&lt;/h1&gt;\n&lt;%= link_to \"My Blog\", controller: \"posts\" %&gt;\n</code></pre>\n  \n  <p>Let's setup the route to the homepage, and add the posts resource.\n  Open the file config/routes.rb and replace the text with the\n  following:</p>\n\n<pre><code>Blog::Application.routes.draw do\n  resources :posts\n  root \"welcome#index\"\nend\n</code></pre>\n</blockquote>\n\n<p>Then when I start up the server to test it come's up with this:</p>\n\n<pre><code>/home/action/blog/app/controllers/welcome_controller.rb:1: syntax error, unexpected '&lt;' &lt;h1&gt;Hello, Rails!&lt;/h1&gt; ^ /home/action/blog/app/controllers/welcome_controller.rb:1: syntax error, unexpected ',', expecting end-of-input &lt;h1&gt;Hello, Rails!&lt;/h1&gt; ^\n</code></pre>\n\n<p>I know it's something stupid huh?</p>\n"}, {"tags": ["ruby", "overriding", "splat"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1421263178, "post_id": 27950696, "comment_id": 44296551, "body": "I cannot reproduce this. Your code works fine for me in Ruby 2.1 and 1.8.7. As far as I know, you&#39;re wrong about method signatures having to match between parents and children. There is no such requirement in Ruby. This works fine: <a href=\"http://pastebin.com/g5VgzKPX\" rel=\"nofollow noreferrer\">pastebin.com/g5VgzKPX</a>"}, {"owner": {"reputation": 8296, "user_id": 791619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd93bf9d4f202a8233fe5235d924ab9?s=128&d=identicon&r=PG", "display_name": "WarHog", "link": "https://stackoverflow.com/users/791619/warhog"}, "edited": false, "score": 0, "creation_date": 1421264254, "post_id": 27950696, "comment_id": 44297150, "body": "Exactly - in Ruby it&#39;s just a matter of run-time message dispatching."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1421264728, "post_id": 27950696, "comment_id": 44297402, "body": "It is not at all clear what you are trying to do."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1421264872, "post_id": 27950696, "comment_id": 44297494, "body": "Correct, I was wrong about the signature. However, calling the method from the parent is still an issue. I&#39;ll edit the question to clarify."}], "answers": [{"comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1421265220, "post_id": 27951241, "comment_id": 44297704, "body": "Yes, that&#39;s it. I just need to &quot;unsplat&quot; the argument. Thank you."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1421265100, "creation_date": 1421265100, "answer_id": 27951241, "question_id": 27950696, "link": "https://stackoverflow.com/questions/27950696/splat-operator-and-method-overriding/27951241#27951241", "title": "Splat operator and method overriding", "body": "<p>Your question is not clear, but I think this may be what you want:</p>\n\n<pre><code>def foobar *foo_args\n  foo(*foo_args)\nend\n</code></pre>\n\n<p>Still, <code>Child.new.foo</code> must take exactly two arguments for it to not raise an error.</p>\n"}], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1421265100, "creation_date": 1421262866, "last_edit_date": 1421264862, "question_id": 27950696, "link": "https://stackoverflow.com/questions/27950696/splat-operator-and-method-overriding", "title": "Splat operator and method overriding", "body": "<p>I have a base class with child classes that override a method that takes multiple arguments. </p>\n\n<pre><code>class Parent\n  def foo *bar\n  end\nend\n\nclass Child &lt; Parent\n  def foo bar, baz\n  end\nend\n</code></pre>\n\n<p>This works fine. However, suppose there is a method foobar in Parent that calls foo:</p>\n\n<pre><code>def foobar *foo_args\n  foo foo_args\nend\n</code></pre>\n\n<p>This raises a ArgumentError when called on a Child instance because foo_args is one single array, while Child.new.foo expects two objects. Is there a way around this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth"], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 4436671, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000195935196/picture?type=large", "display_name": "FrAn", "link": "https://stackoverflow.com/users/4436671/fran"}, "is_accepted": false, "score": 0, "last_activity_date": 1421499514, "creation_date": 1421499514, "answer_id": 27999695, "question_id": 27949203, "link": "https://stackoverflow.com/questions/27949203/oauth-token-rejected-when-authenticating-with-quickbooks-api/27999695#27999695", "title": "oauth token_rejected when authenticating with quickbooks api", "body": "<p>The error means the Access Token was not found, was expired or is invalid. I would try refreshing the Access Token.</p>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421499514, "creation_date": 1421257494, "question_id": 27949203, "link": "https://stackoverflow.com/questions/27949203/oauth-token-rejected-when-authenticating-with-quickbooks-api", "title": "oauth token_rejected when authenticating with quickbooks api", "body": "<p>I followed the directions on <a href=\"http://minimul.com/integrating-rails-and-quickbooks-online-via-the-version-3-api-part-1.html\" rel=\"nofollow\">http://minimul.com/integrating-rails-and-quickbooks-online-via-the-version-3-api-part-1.html</a> and am receiving 'token_rejected' after authentication with quickbooks:</p>\n\n<pre><code>OAuth::Problem in VendorsController#oauth_callback\n\ntoken_rejected\n\nRequest\n\nParameters:\n\n{\"oauth_token\"=&gt;\"blah\",\n \"oauth_verifier\"=&gt;\"blah\",\n \"realmId\"=&gt;\"blah\",\n \"dataSource\"=&gt;\"QBO\"}\n\n------------------------------------------------------------------------------\n\n#vendors_controller.rb:\n... \ndef oauth_callback\n  at = session[:qb_request_token].get_access_token(:oauth_verifier =&gt; params[:oauth_verifier])\n  token = at.token\n  secret = at.secret\n  realm_id = params['realmId']\n  redirect_to 'vendors/index', notice: \"Your QuickBooks account has been successfully linked.\"\nend\n...\n</code></pre>\n\n<p>The traceroute defines \"at = session[:qb_request_token]....\" as the line that throws the error. Any ideas?\nRails 3.1.3 - ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]</p>\n"}, {"tags": ["ruby", "oop", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1421258561, "creation_date": 1421258561, "answer_id": 27949500, "question_id": 27949052, "link": "https://stackoverflow.com/questions/27949052/unable-to-access-method-defined-in-child-class-from-parent-classs-inherited-me/27949500#27949500", "title": "Unable to access method defined in child class from parent class&#39;s #inherited method (Ruby)", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.0/Class.html#method-i-inherited\" rel=\"nofollow\">The documentation for <code>Class#inherited</code></a> says:</p>\n\n<blockquote>\n  <p>Callback invoked whenever a subclass of the current class is created.</p>\n</blockquote>\n\n<p>It says <strong>is created</strong>, not <strong>has been created</strong>. Presumably, this means that there are no guarantees as to how \"complete\" the class is, only that is <em>in the process</em> of being created.</p>\n"}], "owner": {"reputation": 43, "user_id": 1875447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba1fa21d8b458e8186a34c51a457de0?s=128&d=identicon&r=PG", "display_name": "vi-kun", "link": "https://stackoverflow.com/users/1875447/vi-kun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 27949500, "answer_count": 1, "score": 0, "last_activity_date": 1421258561, "creation_date": 1421257005, "question_id": 27949052, "link": "https://stackoverflow.com/questions/27949052/unable-to-access-method-defined-in-child-class-from-parent-classs-inherited-me", "title": "Unable to access method defined in child class from parent class&#39;s #inherited method (Ruby)", "body": "<p>What I'm trying to do:</p>\n\n<pre><code>class GrandFoo\n    def self.inherited(subclass)\n        puts subclass.new.respond_to? :bar  #false\n    end\nend\n\nclass Foo &lt; GrandFoo\n    def bar\n        puts 'bar'\n    end\nend\n\n# but\nputs Foo.new.respond_to? :bar  #true\n</code></pre>\n\n<p>I was unable to find info about this case and actually I'm not sure what should I look for.\nThe goal is to \"require\" a list of files found in specific directory each containing a subclass with the same 'bar' method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5654, "user_id": 1026898, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/de8006bc117d96525c475036dcfb7fbf?s=128&d=identicon&r=PG", "display_name": "Ecnalyr", "link": "https://stackoverflow.com/users/1026898/ecnalyr"}, "edited": false, "score": 2, "creation_date": 1421257078, "post_id": 27948934, "comment_id": 44293100, "body": "This didn&#39;t deserve the down-vote.  It is not a poorly written question.  The problem was very obvious to most developers, but we were all new at some point and this question is reasonable.  The error was posted, and sample code was posted.  We had all the information necessary to quickly and easily provide an answer."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4307734"}, "edited": false, "score": 0, "creation_date": 1421257354, "post_id": 27948951, "comment_id": 44293253, "body": "When I do that I lose the links that I posted on the website"}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1421260581, "post_id": 27948951, "comment_id": 44295144, "body": "Then it means you do not have an attribute (column) or method named <code>name</code> in your <code>User</code> class."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": false, "score": 2, "last_activity_date": 1421257344, "last_edit_date": 1421257344, "creation_date": 1421256681, "answer_id": 27948951, "question_id": 27948934, "link": "https://stackoverflow.com/questions/27948934/nomethoderror-in-linksindex/27948951#27948951", "title": "NoMethodError in Links#index", "body": "<p>change <code>link.created+at</code> to <code>link.created_at</code></p>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>Its still giving me this error</p>\n  \n  <p>undefined method `name' for # Extracted source (around line #5):</p>\n</blockquote>\n\n<p>Your code: <code>&lt;%= link.user.name %&gt;</code> is causing an error because there is no method named <code>name</code> for <code>link.user</code>, try troubleshooting with this information.  </p>\n\n<p>Either <code>link.user</code> is nil, so it can't call <code>name</code> on <code>user</code> or there is no method or attribute named <code>name</code> on the <code>user</code> object (the latter seems most likely).</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5103714, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZdMwoB4Bvic/AAAAAAAAAAI/AAAAAAAAABE/c4a9zUfccj0/photo.jpg?sz=128", "display_name": "aweful Brown", "link": "https://stackoverflow.com/users/5103714/aweful-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1444003461, "last_edit_date": 1444003461, "creation_date": 1443929349, "answer_id": 32929749, "question_id": 27948934, "link": "https://stackoverflow.com/questions/27948934/nomethoderror-in-linksindex/32929749#32929749", "title": "NoMethodError in Links#index", "body": "<p><code>run $ bundle exec rake db:migrate:reset</code> to clear the database. </p>\n\n<p>I'm doing the same tutorial Mackenzie Child Reddit Clone. You're receiving the error because you created a user without a name early in the tutorial. That user needs to removed or add a name to the user to eliminate the error.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8193690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7448ae46eacc2b431edc4f8e1abe211?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit", "link": "https://stackoverflow.com/users/8193690/benoit"}, "is_accepted": false, "score": 0, "last_activity_date": 1498042074, "creation_date": 1498042074, "answer_id": 44673964, "question_id": 27948934, "link": "https://stackoverflow.com/questions/27948934/nomethoderror-in-linksindex/44673964#44673964", "title": "NoMethodError in Links#index", "body": "<p>I also do the same tutorial and ran into the same problem. I realized there was no name for user in my schema so I ran :</p>\n\n<pre><code>rails g migration AddNameToUsers\n</code></pre>\n\n<p>Then I added names to my users in the database. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4307734"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1498042074, "creation_date": 1421256615, "last_edit_date": 1421257162, "question_id": 27948934, "link": "https://stackoverflow.com/questions/27948934/nomethoderror-in-linksindex", "title": "NoMethodError in Links#index", "body": "<p>undefined method `created' for #\nExtracted source (around line #5):</p>\n\n<pre><code>&lt;h2&gt;\n  &lt;% link_to link.title, link %&gt;&lt;br&gt;\n  **&lt;small class=\"author\"&gt;Submitted &lt;% time_ago_in_words(link.created+at) %&gt; by &lt;% link.user.email %&gt;&lt;/small&gt;**\n  &lt;/h2&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>After changing <code>link.created+at</code> to <code>link.created_at</code></p>\n\n<p>Its still giving me this error</p>\n\n<p>undefined method `name' for # Extracted source (around line #5):</p>\n\n<pre><code>&lt;h2&gt;\n  &lt;%= link_to link.title, link %&gt;&lt;br&gt;\n  &lt;small class=\"author\"&gt;Submitted &lt;%= time_ago_in_words(link.created_at) %&gt; by &lt;%= link.user.name %&gt;&lt;/small&gt;\n&lt;/h2&gt;\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 778, "user_id": 1693485, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ccd9a1122385e0dacffff49dfbe0b771?s=128&d=identicon&r=PG", "display_name": "LukasMac", "link": "https://stackoverflow.com/users/1693485/lukasmac"}, "edited": false, "score": 0, "creation_date": 1421257632, "post_id": 27948519, "comment_id": 44293437, "body": "a guess: so only after doing POST &#39;/&#39; <code>flash</code> variable is set. If you do GET &#39;/&#39; before doing post <code>flash</code> variable is not set by that time."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1421350785, "post_id": 27948519, "comment_id": 44335877, "body": "Shouldn&#39;t the class be &quot;error&quot; instead of &quot;notice?&quot;"}, {"owner": {"reputation": 117, "user_id": 4219550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-CSN8lVOmuD4/AAAAAAAAAAI/AAAAAAAABcg/sYHME2tuNOc/photo.jpg?sz=128", "display_name": "user4219550", "link": "https://stackoverflow.com/users/4219550/user4219550"}, "edited": false, "score": 0, "creation_date": 1421398274, "post_id": 27948519, "comment_id": 44351898, "body": "With Sinatra flash, you can use :error <a href=\"https://github.com/SFEley/sinatra-flash\" rel=\"nofollow noreferrer\">github.com/SFEley/sinatra-flash</a>"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4219550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-CSN8lVOmuD4/AAAAAAAAAAI/AAAAAAAABcg/sYHME2tuNOc/photo.jpg?sz=128", "display_name": "user4219550", "link": "https://stackoverflow.com/users/4219550/user4219550"}, "edited": false, "score": 0, "creation_date": 1421398375, "post_id": 27971582, "comment_id": 44351945, "body": "Thanks, will try that"}], "tags": [], "owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "is_accepted": false, "score": 3, "last_activity_date": 1421350565, "creation_date": 1421350565, "answer_id": 27971582, "question_id": 27948519, "link": "https://stackoverflow.com/questions/27948519/sinatra-flash-gem-isnt-working/27971582#27971582", "title": "sinatra-flash gem isn&#39;t working", "body": "<p>While the gem seems comfortable enough to use why not implement it yourself. It's in fact just a couple of lines:</p>\n\n<pre><code>#in your app.rb:\nhelpers do\n\n  #a partial helper\n  def partial(template, locals = {})\n    slim template, :layout =&gt; false, :locals =&gt; locals\n  end\n\n  #the flash helper\n  def flash\n    @flash = session.delete(:flash)\n  end\nend\n\nget '/' do\n  session[:flash] = [\"Some happy news\", \"alert-success\"]\nend\n</code></pre>\n\n<p>Then you can add a partial view which I called partial_flash.slim</p>\n\n<pre><code>-if flash\n  -message, status = @flash\n  .alert class=(status) = message\n</code></pre>\n\n<p>You call that partial usually from your layout file or any other view that needs a flash message:</p>\n\n<pre><code>==partial :partial_flash\n</code></pre>\n\n<p>So a route is called, the layout is loaded and checks <code>if flash</code>. If there is, it displays a flash message with a specified class. I use Twitter Bootstrap, so <code>alert-success</code> is a green message box.</p>\n\n<p>You can see an example app here: <a href=\"https://github.com/burningTyger/farhang-app\" rel=\"nofollow\">https://github.com/burningTyger/farhang-app</a></p>\n"}], "owner": {"reputation": 117, "user_id": 4219550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-CSN8lVOmuD4/AAAAAAAAAAI/AAAAAAAABcg/sYHME2tuNOc/photo.jpg?sz=128", "display_name": "user4219550", "link": "https://stackoverflow.com/users/4219550/user4219550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421350565, "creation_date": 1421255174, "last_edit_date": 1421256114, "question_id": 27948519, "link": "https://stackoverflow.com/questions/27948519/sinatra-flash-gem-isnt-working", "title": "sinatra-flash gem isn&#39;t working", "body": "<p>I attempted to use the sinatra-flash gem with my application and get an \"undefined local variable or method 'flash'\" error when I try to run it.</p>\n\n<p>my_app:</p>\n\n<pre><code>require 'sinatra/base'\nrequire 'sinatra/flash'\n\nclass GGInfraUserManager &lt; Sinatra::Base\nenable :sessions\nregister Sinatra::Flash\n</code></pre>\n\n<p>...(rest of app)</p>\n\n<pre><code>post '/' do\n\nflash[:error] = \"Password must be a minimum of 8 characters\" unless new_password.match /.{8}/\nlog.info \"#{Time.now} password meets policy requirements\"\nend\nredirect '/'\nend\n</code></pre>\n\n<p>In my erb view file (at the top):</p>\n\n<pre><code>&lt;div id=\"flash\" class=\"notice\"&gt;\n&lt;a class=\"close\" data-dismiss=\"alert\"&gt;&amp;#215;&lt;/a&gt;\n&lt;%= flash.now[:error] %&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p>Can someone please tell me how to correct this error so that the flash functionality will work?</p>\n"}, {"tags": ["javascript", "ruby", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "edited": false, "score": 0, "creation_date": 1421255737, "post_id": 27949138, "comment_id": 44293214, "body": "Implementation questions are best asked on StackOverflow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "edited": false, "score": 1, "creation_date": 1421256359, "post_id": 27949138, "comment_id": 44293215, "body": "It&#39;s an implementation issue, so it should go to SO.  Answers to your question will (should) be primarily code based.  ie. take the size of each row and use that to increment the index value to retrieve the column.  So if you want the the 3rd column, you&#39;ll fetch myArray[2+row_size*0], myArray[2+row_size*1], myArray[2+row_size*2], etc..."}, {"owner": {"reputation": 14671, "user_id": 2317490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ypoen.png?s=128&g=1", "display_name": "dandavis", "link": "https://stackoverflow.com/users/2317490/dandavis"}, "edited": false, "score": 2, "creation_date": 1421257381, "post_id": 27949138, "comment_id": 44293268, "body": "the non-math way is to just iterate from rowSize to length stepping rowSize, collecting the current each time."}, {"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 0, "creation_date": 1421257483, "post_id": 27949138, "comment_id": 44293342, "body": "I see your point GlenH7.  Thanks for migrating the question to SO.  Also, I realize that this question is pretty basic."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421261273, "post_id": 27949227, "comment_id": 44295529, "body": "If you are using <code>image</code> that way, then what is the point of defining the method on <code>Array</code> class?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1421268321, "post_id": 27949227, "comment_id": 44299194, "body": "The method would be more robust if <code>5</code> were an argument."}], "tags": [], "owner": {"reputation": 9484, "user_id": 1327235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c96d4ad697e78400e312fe40b23dc?s=128&d=identicon&r=PG", "display_name": "Juan Lopes", "link": "https://stackoverflow.com/users/1327235/juan-lopes"}, "is_accepted": false, "score": 1, "last_activity_date": 1421257593, "creation_date": 1421257593, "answer_id": 27949227, "question_id": 27949138, "link": "https://stackoverflow.com/questions/27949138/what-is-an-efficient-method-for-retrieving-a-column-from-an-array/27949227#27949227", "title": "What is an efficient method for retrieving a column from an array?", "body": "<pre><code>def column(index)\n    (0...5).map{|i|image[i*5+index]}\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421261329, "post_id": 27949282, "comment_id": 44295569, "body": "The OP explicitly mentioned that they want the method to be defined on the <code>Array</code> class."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421262410, "post_id": 27949282, "comment_id": 44296165, "body": "@sawa the OP simply stated <i>Let&#39;s say...</i>. I read this as I could implement this way but an open to suggestion. So I am inclined to agree with Sergio on this."}, {"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 0, "creation_date": 1421277707, "post_id": 27949282, "comment_id": 44303609, "body": "It doesn&#39;t have to be in the Array class, in fact I wouldn&#39;t even implement it that way.  It was just for example."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1421257741, "creation_date": 1421257741, "answer_id": 27949282, "question_id": 27949138, "link": "https://stackoverflow.com/questions/27949138/what-is-an-efficient-method-for-retrieving-a-column-from-an-array/27949282#27949282", "title": "What is an efficient method for retrieving a column from an array?", "body": "<pre><code>image = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5]\n\ndef column(image, n, row_length)\n  (n..image.length).step(row_length).map{|i| image[i]}\nend\n\ncolumn(image, 3, 5) # =&gt; [4, 9, 4, 9, 4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421261434, "post_id": 27949614, "comment_id": 44295628, "body": "That the column size equals the row size is your own assumption, which may not be true."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421262087, "post_id": 27949614, "comment_id": 44295978, "body": "@sawa fixed my class to allow for custom column size. Rows will be determined by columns. Also fixed row to be a proper row in the event of uneven or non-existent."}, {"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 0, "creation_date": 1421340203, "post_id": 27949614, "comment_id": 44329614, "body": "Very detailed answer.  Thank you!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 0, "creation_date": 1421343912, "post_id": 27949614, "comment_id": 44332066, "body": "@Ravenstine thank you. I have also updated my answer with a method that will return the same as your solution but is a bit more idiomatic ruby."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 4, "last_activity_date": 1421343786, "last_edit_date": 1421343786, "creation_date": 1421258932, "answer_id": 27949614, "question_id": 27949138, "link": "https://stackoverflow.com/questions/27949138/what-is-an-efficient-method-for-retrieving-a-column-from-an-array/27949614#27949614", "title": "What is an efficient method for retrieving a column from an array?", "body": "<p>Many of the other answers will work for an image that is exactly 5x5 as your question specifies but in the case where this is not implicitly true I would build a class for this such as: </p>\n\n<pre><code>class ImageMap\n  attr_reader :image\n  def initialize(image,columns=nil)\n    @image = image.each_slice(columns ||= Math.sqrt(image.size)).to_a \n  end\n  def columns\n    @image.first.size\n  end\n  def rows\n    @image.size\n  end\n  def column(n)\n    @image.map{|a| a[n]}\n  end\n  def row(n)\n    [@image[n]].concat([nil] * columns).take(columns).flatten\n  end\n  def cell(column,row)\n    column(column)[row]\n  end\n  def print\n    @image.each {|a| puts a.join}\n  end\nend\n</code></pre>\n\n<p>This will handle all images and allows you to also set the number of expected columns as well. If no column expectation is made then it tries to make it square.</p>\n\n<p><strong>Square</strong></p>\n\n<pre><code>image = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5]\nim = ImageMap.new(image)\nim.column(0)\n#=&gt; [1, 6, 1, 6, 1]\nim.column(3)\n#=&gt; [4, 9, 4, 9, 4]\nim.row(0)\n#=&gt; [1, 2, 3, 4, 5]\nim.cell(4,2)\n#=&gt; 5\n</code></pre>\n\n<p><strong>Non Square</strong></p>\n\n<pre><code>image = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5]\nim = ImageMap.new(image,4)\nim.column(0)\n#=&gt; [1, 5, 9, 3, 7, 1, 5]\nim.columns\n#=&gt; 4\nim.rows\n#=&gt; 7\n</code></pre>\n\n<p>Obviously this could use some handling for out of bounds values but you should be able to deal with that. Example with non-existent rows/columns:</p>\n\n<pre><code>im.column(7)\n#=&gt; [nil, nil, nil, nil, nil]\nim.row(7)\n#=&gt; [nil, nil, nil, nil, nil]\nim.cell(7,2)\n#=&gt; nil\n</code></pre>\n\n<p>Also note if it is not square it will still function e.g.</p>\n\n<pre><code>image = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,4] # added a 4\nim = ImageMap.new(image)\nim.column(0)\n#=&gt; [1, 6, 1, 6, 1, 4]\nim.column(1)\n#=&gt; [2, 7, 2, 7, 2, nil]\nim.image\n#=&gt; [[1, 2, 3, 4, 5], [6, 7, 8, 9, 0], [1, 2, 3, 4, 5], [6, 7, 8, 9, 0], [1, 2, 3, 4, 5], [4]]\n</code></pre>\n\n<p><strong>Update based on OP current solution</strong>\nThis method should preform the same function and is a bit more rubyesque</p>\n\n<pre><code>def column index\n  (0...@height).map { |i| pixel(index + (i * @width)) }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1421300904, "post_id": 27951969, "comment_id": 44309248, "body": "Subclassing classes like Hash and Array is almost always bad. And here&#39;s is definitely very bad, because you&#39;re redefining parent API (<code>[]</code>, for example), thus violating LSP. There are other sins too, but this one is enough :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1421305943, "post_id": 27951969, "comment_id": 44310748, "body": "Egad, @Sergio, what was I thinking??  I removed <code>&lt; Array</code> and promise to never do that again. (I guess I had <code>Array</code> on the brain.)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1421306382, "post_id": 27951969, "comment_id": 44310891, "body": "hehe.  <a href=\"http://bossip.files.wordpress.com/2011/03/robert-de-niro-bringing-his-angry-eyes-to-cannes-2011.jpg?w=535\" rel=\"nofollow noreferrer\">bossip.files.wordpress.com/2011/03/&hellip;</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421330555, "post_id": 27951969, "comment_id": 44323063, "body": "As Always nice solution. Although <code>each_with_object([])</code> seems like it would be more concise by using <code>map</code> e.g. <code>def rows_at(*indices) indices.map{ |i| row(i) } end</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421346496, "post_id": 27951969, "comment_id": 44333511, "body": "@engineersmnky, thanks smnky.  I seem to often forget about <code>map</code> in situations like this one. After reading your answer I also changed the argument <code>nrows</code> to <code>ncols</code>, which seems more sensible."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1421346320, "last_edit_date": 1421346320, "creation_date": 1421267848, "answer_id": 27951969, "question_id": 27949138, "link": "https://stackoverflow.com/questions/27949138/what-is-an-efficient-method-for-retrieving-a-column-from-an-array/27951969#27951969", "title": "What is an efficient method for retrieving a column from an array?", "body": "<p>Rather than creating new methods in the class <code>Array</code>, you might consider creating a separate class. I have assumed the size of <code>image</code> is a multiple of a number of rows--considering the example and that we are talking pixels--but the code obviously could be changed if that assumption were dropped.</p>\n\n<p>Thanks to @SergioTulentsev and @engineersmnky for their suggestions (see comments), which I've implemented.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>class Array2D\n  def initialize(arr, ncols)\n    raise ArgumentError, \"ncols must be positive\" if ncols &lt; 1\n    raise ArgumentError,\n      \"arr.size must a multiple of ncols\" unless (arr.size % ncols).zero?\n    @arr   = arr\n    @ncols = ncols\n    @nrows = arr.size/ncols\n  end\n\n  def [](r,c)           @arr[r*@ncols+c]               end\n  def row(r)            @arr[r*@ncols, @ncols]         end\n  def rows_at(*indices) indices.map { |i| row(i) }     end\n  def col(c)            @nrows.times.map { |r,a| self[r,c] } end\n  def cols_at(*indices) indices.map { |i,a| col(i) }   end\n  def array()           rows_at(*0...@nrows)           end\n  def transpose()       cols_at(*0..@ncols)            end\n  alias :to_s :array\nend\n\nArray2D.instance_methods(false)\n  #=&gt; [:[], :row, :rows_at, :col, :cols_at, :array, :transpose, :to_s]\n</code></pre>\n\n<p>Note that <code>self</code> is required in <code>self[r,c]</code> in the method <code>col</code>. Without <code>self</code>, <code>[1,2]</code> returns an array.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>image = [1,2,3,4,5,6,7,8,9,0,11,12,13,14,15,16,17,18,19,10,21,22,23,24,25]\n\nimage2D = Array2D.new(image, 5)\n\nimage2D.array\n  #=&gt; [[ 1,  2,  3,  4,  5],\n  #    [ 6,  7,  8,  9,  0],\n  #    [11, 12, 13, 14, 15],\n  #    [16, 17, 18, 19, 10],\n  #    [21, 22, 23, 24, 25]]\nimage2D[1,3]\n  #=&gt; 9 \nimage2D.row(1)\n  #=&gt; [6, 7, 8, 9, 0] \nimage2D.rows_at(1,3)\n  #=&gt; [[6, 7, 8, 9, 0], [16, 17, 18, 19, 10]]\nimage2D.col(1)\n  #=&gt; [2, 7, 12, 17, 22] \nimage2D.cols_at(1,3)\n  #=&gt; [[2, 7, 12, 17, 22],\n  #    [4, 9, 14, 19, 24]]\nimage2D.transpose\n  #=&gt; [[1, 6, 11, 16, 21],\n  #    [2, 7, 12, 17, 22],\n  #    [3, 8, 13, 18, 23],\n  #    [4, 9, 14, 19, 24],\n  #    [5, 0, 15, 10, 25]] \n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1421257296, "question_id": 270077}, "owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 27949614, "answer_count": 4, "score": 0, "last_activity_date": 1421346320, "creation_date": 1421255088, "last_edit_date": 1421340151, "question_id": 27949138, "link": "https://stackoverflow.com/questions/27949138/what-is-an-efficient-method-for-retrieving-a-column-from-an-array", "title": "What is an efficient method for retrieving a column from an array?", "body": "<p>An example in any language would help, though in the end I am going to be using either Ruby or JavaScript/CoffeeScript.</p>\n\n<p>I have an array of pixel values. For example, I have an array that represents the pixels of a 5x5 image.</p>\n\n<pre><code>image = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5]\n</code></pre>\n\n<p>The image would be like:</p>\n\n<pre><code>1 2 3 4 5\n6 7 8 9 0\n1 2 3 4 5\n6 7 8 9 0\n1 2 3 4 5\n</code></pre>\n\n<p>I already have a way of getting rows. But I want a way to also retrieve a column for an index.</p>\n\n<p>Let's say I had a method in Ruby:</p>\n\n<pre><code>class Array\n  def column(index)\n    ...\n  end\nend\n</code></pre>\n\n<p>I would like the following results:</p>\n\n<pre><code>image.column(0) #=&gt; [1,6,1,6,1]\nimage.column(3) #=&gt; [4,9,4,9,4]\n</code></pre>\n\n<p><strong>EDIT:</strong> Thanks to everyone who provided their assistance.  Here is what I went with:</p>\n\n<pre><code>def column index\n  output = []\n  i = 0\n  while i &lt; @height\n    output &lt;&lt; pixel(index + (i * @width))\n    i += 1\n  end\n  output\nend\n</code></pre>\n\n<p>Pixel is another method I have that returns an averaged value from an array of RGBA values, given an index.</p>\n\n<p>The reason this suffices is that I can safely assume that every row/column in the image is the correct size.  I also wanted to keep the process fairly simplistic as I am likely to make this a CoffeeScript application that will use typed clamped arrays(for performance reasons and the fact that canvas data is a Uint8ClampedArray), in which case the value of output would be a Uint8ClampedArray and I'd be using the index instead of push, since Uint8ClampedArray doesn't/can't support push/pop/shift/unshift.</p>\n"}, {"tags": ["ruby", "json", "api", "grape"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421255121, "post_id": 27948382, "comment_id": 44291855, "body": "Why the <code>application&#47;vnd.api+json</code> type vs. <code>application&#47;json</code>?"}, {"owner": {"reputation": 10813, "user_id": 131887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c79523c09cd590e0611a028dd8a21909?s=128&d=identicon&r=PG", "display_name": "Pete", "link": "https://stackoverflow.com/users/131887/pete"}, "edited": false, "score": 0, "creation_date": 1421255334, "post_id": 27948382, "comment_id": 44291982, "body": "I don&#39;t know Grape at all, but supporting multiple content types based on the Accept header is <i>definitely</i> the HTTP/standard way to do this, and a reasonable approach/goal as well."}, {"owner": {"reputation": 164, "user_id": 111290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7aa1f5ad4b51d57466a767d38a74222?s=128&d=identicon&r=PG", "display_name": "Kirkland", "link": "https://stackoverflow.com/users/111290/kirkland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421274226, "post_id": 27948382, "comment_id": 44302185, "body": "@tadman I&#39;m trying to use the standard documented here: <a href=\"http://jsonapi.org/\" rel=\"nofollow noreferrer\">jsonapi.org</a> , and similarly for Collection+JSON here: <a href=\"http://amundsen.com/media-types/collection/\" rel=\"nofollow noreferrer\">amundsen.com/media-types/collection</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421312355, "post_id": 27948382, "comment_id": 44313285, "body": "You may need to stick in a Rack handler that maps these to regular JSON, or decodes them properly."}], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 111290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7aa1f5ad4b51d57466a767d38a74222?s=128&d=identicon&r=PG", "display_name": "Kirkland", "link": "https://stackoverflow.com/users/111290/kirkland"}, "is_accepted": false, "score": 0, "last_activity_date": 1421867472, "creation_date": 1421867472, "answer_id": 28074944, "question_id": 27948382, "link": "https://stackoverflow.com/questions/27948382/supporting-multiple-json-content-types-in-grape/28074944#28074944", "title": "Supporting multiple JSON content types in Grape", "body": "<p>I found a reasonable way to do this that I\u2019mr reasonably happy with, but I don\u2019t think it totally aligns with how Grape expects you to do things.</p>\n\n<p>I created a custom formatter called JsonFormatter, so my server code looks like this:</p>\n\n<pre><code>class NotesServer &lt; Grape::API\n  formatter :json, JsonFormatter\n  # \u2026\nend\n</code></pre>\n\n<p>And the formatter itself:</p>\n\n<pre><code>module JsonFormatter\n  def self.call(object, env)\n    case env['HTTP_ACCEPT']\n    when 'application/vnd.api+json'\n      object.to_json_api\n    when 'application/vnd.collection+json'\n      object.to_collection_json\n    else\n      object.to_json\n    end\n  end\nend\n</code></pre>\n\n<p>So now either to_json_api or to_collection_api (or to_json) will be called on the presenter object, depending on the Accept header. One issue I haven\u2019t solved yet is that the Content-Type is set to application/json in all cases.</p>\n"}], "owner": {"reputation": 164, "user_id": 111290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7aa1f5ad4b51d57466a767d38a74222?s=128&d=identicon&r=PG", "display_name": "Kirkland", "link": "https://stackoverflow.com/users/111290/kirkland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421867472, "creation_date": 1421254715, "question_id": 27948382, "link": "https://stackoverflow.com/questions/27948382/supporting-multiple-json-content-types-in-grape", "title": "Supporting multiple JSON content types in Grape", "body": "<p>I\u2019ve been using Grape to write an Evernote-like API, and have been using Collection+JSON (MIME type \"application/vnd.collection+json\"). I now want to also support JSON API (mime type \"application/vnd.api+json\").</p>\n\n<p>(The reason I want to do this is so it will be easier to write an Ember client, since Ember Data has support for JSON API built in. It might make more sense to write client-side JavaScript to solve my problem, but I\u2019m stronger in Ruby than JavaScript.)</p>\n\n<p>My goal is to have the server support either format, and choose which one based on the Accept header. Is this a reasonable thing to do, or does it not make sense to have multiple JSON types? It appears that Grape doesn\u2019t support this. If I just have the wrong idea, then the code below is probably not relevant to that answer.</p>\n\n<p>Here are some relevant pieces of my server code:</p>\n\n<pre><code>class NotesServer &lt; Grape::API\n  content_type :json, \u2018application/json\u2019\n\n\n  content_type :json_api, 'application/vnd.api+json'\n  formatter :json_api, lambda { |object, env| object.to_json_api }\n\n  content_type :collection_json, 'application/vnd.collection+json'\n  formatter :collection_json, lambda { |object, env| object.to_collection_json }\n\n  resource :notes do\n    desc 'Get a note.'\n\n    params do\n      requires :id, type: Integer, desc: 'Note ID.'\n    end\n\n    route_param :id do\n      get do\n        NoteRepresenter.new Note.find(params[:id])\n      end\n    end\nend\n</code></pre>\n\n<p>\u2026where NoteRepresenter defines both to_json_api and to_collection_json.</p>\n\n<p>The idea is to use the same Representer in either case, but to call the appropriate method depending on the Accept header.</p>\n\n<p>When I run curl against this with any Accept header, the response has Content-Type: application/json, and \u201cto_json\u201d is called on the representer. If I leave out the <code>content_type :json, \u2018application/json\u2019</code> line, I get a 406 Not Acceptable response every time.</p>\n\n<p>I figured out that in the Grape library, in lib/grape/middleware/formatter.rb, the \"format\" of a request is considered JSON for any of these MIME types, since the vnd.collection+ or vnd.api+ parts are parsed out of the header. So my question is, is this a matter of Grape not supporting what I\u2019m trying to do, or am I trying to do something that makes no sense?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 4454242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFggu.jpg?s=128&g=1", "display_name": "mixophrygian", "link": "https://stackoverflow.com/users/4454242/mixophrygian"}, "edited": false, "score": 0, "creation_date": 1421293642, "post_id": 27948922, "comment_id": 44307641, "body": "Thanks for this.  I know that my original code is full of poor style and I appreciate that you answered my question directly anyway."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 1, "last_activity_date": 1421257118, "last_edit_date": 1421257118, "creation_date": 1421256589, "answer_id": 27948922, "question_id": 27948219, "link": "https://stackoverflow.com/questions/27948219/pig-latin-translator-parsing-qu-erratically/27948922#27948922", "title": "Pig-latin translator parsing &quot;qu&quot; erratically", "body": "<p>Your special-casing for \"qu\" is being run, but then replaced by the logic in the <code>unless</code> with this condition:</p>\n\n<pre><code>   'aeiou'.include? word[1]\n</code></pre>\n\n<p>because the condition is <code>false</code> for <code>word = \"square\"</code> (because \"q\" is not in \"aeiou\").</p>\n\n<p>A quick patch/fix is to use <code>if...elsif</code> to make the two competing conditional blocks mutually exclusive, and when the word contains \"qu\" it will not check further.</p>\n\n<pre><code>    if word.include? \"qu\"\n        start_index = word.index(\"q\")\n        prefix = word[0..(start_index+1)] + \"ay\"\n        pig_word = word[(start_index+2)..-1] + prefix\n    elsif ! 'aeiou'.include? word[1]\n        prefix = word[0..1] + \"ay\"\n        pig_word = word[2..-1] + prefix\n        unless 'aeiou'.include? word[2]\n            prefix = word[0..2] + \"ay\"\n            pig_word = word[3..-1] + prefix\n        end\n    end\n</code></pre>\n\n<p>Note this may not lead to a perfect translator, it just fixes the issue you have brought here as a question.</p>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 4454242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFggu.jpg?s=128&g=1", "display_name": "mixophrygian", "link": "https://stackoverflow.com/users/4454242/mixophrygian"}, "is_accepted": false, "score": -1, "last_activity_date": 1421298338, "creation_date": 1421298338, "answer_id": 27957126, "question_id": 27948219, "link": "https://stackoverflow.com/questions/27948219/pig-latin-translator-parsing-qu-erratically/27957126#27957126", "title": "Pig-latin translator parsing &quot;qu&quot; erratically", "body": "<p>Implementing Neil's suggested edit, here is the fully-functional code:</p>\n\n<pre><code>def translate(input)\nall_words = []\npig_word = \"\"\ninput.split.map do |word, i|\n\n    first_vowel = word.index(/[aeiou]/) #dat first vowel occurence\n\n    if first_vowel == 0 #words that begin with a vowel\n        pig_word = word + \"ay\"\n\n\n    elsif word.include? \"qu\" #words that don't begin with a vowel but include \"qu\".\n        first_vowel = word.index(/[aeio]/) #first vowel not counting \"u\"\n        start_index = word.index(\"q\")\n        prefix = word[0..(first_vowel-1)] + \"ay\"\n        pig_word = word[first_vowel..-1] + prefix\n    end\n\n\n    if first_vowel &gt;= 1 #words that don't begin with vowels or have \"qu\"\n        prefix = word[0..first_vowel-1] + \"ay\" \n        pig_word = word[first_vowel..-1] + prefix\n    end \n\n\n    all_words &lt;&lt; pig_word\nend\n\"#{[all_words].join(\" \")}\" \nend\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 4454242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFggu.jpg?s=128&g=1", "display_name": "mixophrygian", "link": "https://stackoverflow.com/users/4454242/mixophrygian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 27948922, "answer_count": 2, "score": 1, "last_activity_date": 1421298338, "creation_date": 1421254162, "last_edit_date": 1421256312, "question_id": 27948219, "link": "https://stackoverflow.com/questions/27948219/pig-latin-translator-parsing-qu-erratically", "title": "Pig-latin translator parsing &quot;qu&quot; erratically", "body": "<p>I'm working on the pig_latin_spec example from The Odin Project and having some difficulty handling special cases in which a word contains \"qu\" and those characters need to be treated as one phoneme. For example \"quiet\" => \"ietquay\" and \"square\" => \"aresquay\".</p>\n\n<p>Here's the offending <code>if</code> statement:</p>\n\n<pre><code>if word.include? \"qu\"\n    start_index = word.index(\"q\")\n    prefix = word[0..(start_index+1)] + \"ay\"\n    pig_word = word[(start_index+2)..-1] + prefix\nend\n</code></pre>\n\n<p>This produces \"ietquay\" but not \"aresquay\". Instead I get \"uaresqay\". What am I overlooking?</p>\n\n<p>Here's the entire program:</p>\n\n<pre><code>def translate(input)\nall_words = []\npig_word = \"\"\ninput.split.map do |word, i|\n    if 'aeiou'.include? word[0]\n        pig_word = word + \"ay\"\n    else\n        prefix = word[0] + \"ay\"\n        pig_word = word[1..-1] + prefix\n        if word.include? \"qu\"\n            start_index = word.index(\"q\")\n            prefix = word[0..(start_index+1)] + \"ay\"\n            pig_word = word[(start_index+2)..-1] + prefix\n        end\n        unless 'aeiou'.include? word[1]\n            prefix = word[0..1] + \"ay\"\n            pig_word = word[2..-1] + prefix\n            unless 'aeiou'.include? word[2]\n                prefix = word[0..2] + \"ay\"\n                pig_word = word[3..-1] + prefix\n            end\n        end\n    end\n    all_words &lt;&lt; pig_word\nend\n\"#{[all_words].join(\" \")}\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "http", "sinatra", "rack"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1421304273, "post_id": 27947994, "comment_id": 44310153, "body": "My initial thought is: If they&#39;re not separate, why are they mounted separately? If they are separate, then get the client to make the request."}, {"owner": {"reputation": 5190, "user_id": 601909, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fa9ebd17a2a7ceaf0f594671c58216fb?s=128&d=identicon&r=PG", "display_name": "pmerino", "link": "https://stackoverflow.com/users/601909/pmerino"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1421308443, "post_id": 27947994, "comment_id": 44311640, "body": "@iain well, they&#39;re separate. The API has been there for longer, and the frontend is just a simple client for it. I guess I&#39;ll have to make requests from the client to the API."}, {"owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "edited": false, "score": 0, "creation_date": 1421351401, "post_id": 27947994, "comment_id": 44336183, "body": "I have done this before. I just don&#39;t remember when and where or even how. I do remember I had to use Rack directly. Could have been a call function. Do check the Rack docs."}, {"owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "edited": false, "score": 0, "creation_date": 1421925098, "post_id": 27947994, "comment_id": 44551667, "body": "Found it: <a href=\"https://github.com/sinatra/sinatra#triggering-another-route\" rel=\"nofollow noreferrer\">github.com/sinatra/sinatra#triggering-another-route</a> But now that I see it it might not be what you were looking for."}], "answers": [{"tags": [], "owner": {"reputation": 5190, "user_id": 601909, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fa9ebd17a2a7ceaf0f594671c58216fb?s=128&d=identicon&r=PG", "display_name": "pmerino", "link": "https://stackoverflow.com/users/601909/pmerino"}, "is_accepted": true, "score": 0, "last_activity_date": 1422445969, "creation_date": 1422445969, "answer_id": 28191620, "question_id": 27947994, "link": "https://stackoverflow.com/questions/27947994/how-to-perform-local-requests-between-sinatra-apps/28191620#28191620", "title": "How to perform local requests between Sinatra apps", "body": "<p>In the end I decided to write a local request class. It just figures out the current protocol + host + port (since the other app is in the same host) and then makes HTTP requests to it, and then I use it from the frontend with helper methods I wrote in the class. Thanks anyways, the clues led me to this in the end!</p>\n"}], "owner": {"reputation": 5190, "user_id": 601909, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fa9ebd17a2a7ceaf0f594671c58216fb?s=128&d=identicon&r=PG", "display_name": "pmerino", "link": "https://stackoverflow.com/users/601909/pmerino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 28191620, "answer_count": 1, "score": 1, "last_activity_date": 1422445969, "creation_date": 1421253516, "question_id": 27947994, "link": "https://stackoverflow.com/questions/27947994/how-to-perform-local-requests-between-sinatra-apps", "title": "How to perform local requests between Sinatra apps", "body": "<p>I've got two Sinatra apps mounted through <code>Rack::URLMap</code>. One is mounted in the root (<code>/</code>), the API, and the other one is on <code>/frontend</code>, the Frontend.</p>\n\n<p>My question would be how to make requests from the Frontend to the API? Or just communicate between them without having to make HTTP requests (because in my current environment, that could lead to <code>ECONNREFUSED</code> because the hostname may differ from the one in development).</p>\n\n<p>I could work with being able to get the current valid host and port for the apps too, so I fallback to make HTTP requests.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421251234, "post_id": 27947164, "comment_id": 44289240, "body": "what you are asking is simple. I think your question could use a little more clarification as to what you really want and why. I have a feeling your use case is a bit more complex than the question."}, {"owner": {"reputation": 431, "user_id": 3429069, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t1mpR.jpg?s=128&g=1", "display_name": "dan-mi-sun", "link": "https://stackoverflow.com/users/3429069/dan-mi-sun"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421251815, "post_id": 27947164, "comment_id": 44289671, "body": "@engineersmnky Have tried to add some additional info. Hopefully it adds some context."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421252199, "post_id": 27947164, "comment_id": 44289936, "body": "So your desired output would be <code>{&quot;2008&quot;=&gt;{&quot;1&quot; =&gt; {&quot;ebook&quot;=&gt;&quot;1&quot;}}, &quot;a&quot;=&gt;{&quot;2&quot; =&gt; {&quot;man&quot;=&gt;&quot;1&quot;, &quot;distressed&quot;=&gt;&quot;1&quot;}}</code>? If so what is the desired output for say <code>{&quot;2008&quot;=&gt;{&quot;1&quot; =&gt; {&quot;ebook&quot;=&gt;&quot;1&quot;}}, &quot;a&quot;=&gt;{&quot;1&quot; =&gt; {&quot;man&quot;=&gt;&quot;1&quot;, &quot;distressed&quot;=&gt;&quot;1&quot;}, &quot;2&quot;=&gt;{&quot;woman&quot; =&gt; &quot;1&quot;, &quot;happy&quot; =&gt; &quot;1&quot;}}</code>? Since a Hash can only have unique keys you cannot have &quot;2&quot; twice the second result will overwrite the first."}, {"owner": {"reputation": 431, "user_id": 3429069, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t1mpR.jpg?s=128&g=1", "display_name": "dan-mi-sun", "link": "https://stackoverflow.com/users/3429069/dan-mi-sun"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421252576, "post_id": 27947164, "comment_id": 44290182, "body": "{&quot;2008&quot;=&gt;{&quot;1&quot; =&gt; {&quot;ebook&quot;=&gt;&quot;1&quot;}}, &quot;a&quot;=&gt;{&quot;2&quot; =&gt; {&quot;man&quot;=&gt;&quot;1&quot;, &quot;distressed&quot;=&gt;&quot;1&quot;}, &quot;2&quot;=&gt;{&quot;2&quot; =&gt; {&quot;woman&quot; =&gt; &quot;1&quot;, &quot;happy&quot; =&gt; &quot;1&quot;}}"}, {"owner": {"reputation": 431, "user_id": 3429069, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t1mpR.jpg?s=128&g=1", "display_name": "dan-mi-sun", "link": "https://stackoverflow.com/users/3429069/dan-mi-sun"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421252700, "post_id": 27947164, "comment_id": 44290266, "body": "@engineersmnky This is part of a map reduce job (this being part of the reducer). So the &quot;top&quot; level keys will all be uniq (top being &quot;2008&quot;, &quot;a&quot;, &quot;2&quot; in this instance.) So there should only be unique keys within each inner hash"}, {"owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "edited": false, "score": 0, "creation_date": 1421253383, "post_id": 27947164, "comment_id": 44290736, "body": "I think the reason this is still marked as a duplicate is that the dimensions of the hash don&#39;t make much difference."}, {"owner": {"reputation": 431, "user_id": 3429069, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t1mpR.jpg?s=128&g=1", "display_name": "dan-mi-sun", "link": "https://stackoverflow.com/users/3429069/dan-mi-sun"}, "reply_to_user": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "edited": false, "score": 0, "creation_date": 1421253976, "post_id": 27947164, "comment_id": 44291124, "body": "@J0e3gan thanks for that tip - had not realised it doesn&#39;t make a difference. Will continue trying out the applications in pry"}], "owner": {"reputation": 431, "user_id": 3429069, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t1mpR.jpg?s=128&g=1", "display_name": "dan-mi-sun", "link": "https://stackoverflow.com/users/3429069/dan-mi-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1421251254, "answer_count": 0, "score": 0, "last_activity_date": 1422432052, "creation_date": 1421251065, "last_edit_date": 1495540663, "question_id": 27947164, "link": "https://stackoverflow.com/questions/27947164/ruby-how-to-replace-key-within-multi-dimensional-hash-without-changing-value", "closed_reason": "Duplicate", "title": "Ruby: how to replace key within multi dimensional hash without changing value", "body": "<p>In this <a href=\"https://stackoverflow.com/questions/6210572/how-to-replace-a-hash-key-with-another-key\">thread:</a> there are many good examples of how to replace a key within a hash without changing the value.</p>\n\n<p>This current question differs in that it is relating to a multi-dimensional hash. This may be trivial for those of you with more experience, but for a newbie rubyist it has been quite confusing!</p>\n\n<p>Given:   </p>\n\n<pre><code>{\"2008\"=&gt;{\"1\" =&gt; {\"ebook\"=&gt;\"1\"}}, \"a\"=&gt;{\"1\" =&gt; {\"man\"=&gt;\"1\", \"distressed\"=&gt;\"1\"}}\n</code></pre>\n\n<p>Assuming I have \"NEW_KEY\", I would like to achieve:</p>\n\n<pre><code>{\"2008\"=&gt;{\"1\" =&gt; {\"ebook\"=&gt;\"1\"}}, \"a\"=&gt;{\"NEW_KEY\" =&gt; {\"man\"=&gt;\"1\", \"distressed\"=&gt;\"1\"}}\n</code></pre>\n\n<p>This is part of a wider attempt to loop through the inner hashes to try to figure out the number of occurrences of a word.</p>\n\n<p>In the above example I would like to set \"2\" as the key for \"a\" as \"a\" has the neighbours \"man\" and \"distressed\" one time.</p>\n\n<p>Thanks in advance for any insights.</p>\n\n<p>UPDATE:</p>\n\n<p>Of course, being tired I had not clocked that you can go one layer deeper into the Hash and then the approach is the same as has been linked to in the other SO thread.</p>\n\n<p>Out of interest life became much easier when someone suggested using <a href=\"http://www.ruby-doc.org/core-2.2.0/Struct.html\" rel=\"nofollow noreferrer\">Structs</a></p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "sass"], "comments": [{"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1421250716, "post_id": 27946932, "comment_id": 44288905, "body": "If you remove the contents of <code>application.css.sass</code> do you still get the error?"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1421251044, "post_id": 27946932, "comment_id": 44289115, "body": "@Magnuss tried doing that, but I am still getting the same error. If you notice that though the line above extract states that the error is in <code>application.css.sass</code> but it is actually in <code>application.html.erb</code>, editing the question to make that clear."}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421252017, "post_id": 27946932, "comment_id": 44289818, "body": "Is the above a copy/paste error, or is your <code>head</code> indented within your <code>html</code>...and the <code>title</code>, <code>stylesheets</code>, <code>javascripts</code>, etc indented within the <code>head</code>?"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421252473, "post_id": 27946932, "comment_id": 44290111, "body": "@JustinLicata it is the ready-made view made by rails so I don&#39;t expect there to be an error of that sort. Also, I never knew that indentation in HTML can cause errors."}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421252492, "post_id": 27946932, "comment_id": 44290123, "body": "Just had to ask :)...you never know...Are you able link us to the code on GitHub..since it&#39;s a tutorial? In order to properly help debug this with you, seeing the code will help tremendously."}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421253309, "post_id": 27946932, "comment_id": 44290688, "body": "@JustinLicata sorry can&#39;t add the link to my github, followed the tutorial to add Sass as I have never used Sass before but it is part of a bigger project and the repo is private but I have added the relevant code."}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 1, "creation_date": 1421253604, "post_id": 27946932, "comment_id": 44290898, "body": "does this help? <a href=\"http://stackoverflow.com/a/11782229/2456549\">stackoverflow.com/a/11782229/2456549</a>"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421254376, "post_id": 27946932, "comment_id": 44291399, "body": "@JustinLicata Tried that, still getting the same error :/"}, {"owner": {"reputation": 898, "user_id": 1274305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf00efa53c513b3ed5c0c42e709d82d9?s=128&d=identicon&r=PG", "display_name": "crackedmind", "link": "https://stackoverflow.com/users/1274305/crackedmind"}, "edited": false, "score": 0, "creation_date": 1421254527, "post_id": 27946932, "comment_id": 44291492, "body": "Versions of rails, ruby, etc. ?"}, {"owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "edited": false, "score": 1, "creation_date": 1421254946, "post_id": 27946932, "comment_id": 44291750, "body": "That is a very strange bug, I was getting it after creating a new Rails 4.2 app with Bootstrap with Autoprefixer. I just reloaded the app a couple of times while commenting out autoprefixer or bootstrap gem and it magically started to work."}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 898, "user_id": 1274305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf00efa53c513b3ed5c0c42e709d82d9?s=128&d=identicon&r=PG", "display_name": "crackedmind", "link": "https://stackoverflow.com/users/1274305/crackedmind"}, "edited": false, "score": 0, "creation_date": 1421255988, "post_id": 27946932, "comment_id": 44292373, "body": "@crackedmind rails 4.1.5, 1.9.3p448 (2013-06-27 revision 41675) [i686-linux]"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "edited": false, "score": 0, "creation_date": 1421256015, "post_id": 27946932, "comment_id": 44292397, "body": "@bodrovis so did you have both of them uncommented when it started to work or not?"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1421259939, "post_id": 27946932, "comment_id": 44294798, "body": "I just took my previous github file and again installed bootstrap-rails and it seems to be working fine. @JustinLicata I followed your advice and uncommented rubyracer, thanks for the help. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "edited": false, "score": 4, "creation_date": 1421325106, "post_id": 27953914, "comment_id": 44320043, "body": "Instead of downgrading <code>autoprefixer-rails</code> gem version adding <code>gem &#39;therubyracer&#39;, platforms: :ruby</code> helped me get rid of the reported error. Thanks."}, {"owner": {"reputation": 2173, "user_id": 735539, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/454864d28e37b7a2f790a1edfa4ca02e?s=128&d=identicon&r=PG", "display_name": "DivinesLight", "link": "https://stackoverflow.com/users/735539/divineslight"}, "reply_to_user": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "edited": false, "score": 0, "creation_date": 1421330287, "post_id": 27953914, "comment_id": 44322926, "body": "@JiggneshhGohel Thank you, adding &#39;therubyracer&#39; worked for me."}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "edited": false, "score": 0, "creation_date": 1421332687, "post_id": 27953914, "comment_id": 44324389, "body": "Instead of downgrading the version, installing rubyracer made it work for me as @JiggneshhGohel suggested"}], "tags": [], "owner": {"reputation": 96, "user_id": 4455185, "user_type": "registered", "profile_image": "https://graph.facebook.com/19707410/picture?type=large", "display_name": "Andrew Elster", "link": "https://stackoverflow.com/users/4455185/andrew-elster"}, "is_accepted": true, "score": 8, "last_activity_date": 1422123846, "last_edit_date": 1422123846, "creation_date": 1421275805, "answer_id": 27953914, "question_id": 27946932, "link": "https://stackoverflow.com/questions/27946932/error-on-using-bootstrap-sass-in-rails/27953914#27953914", "title": "Error on using Bootstrap Sass in rails", "body": "<p>There seems to be an issue with version 5.0 of the autoprefixer-rails gem. Try downgrading to 4.0.2.2.</p>\n\n<p><a href=\"https://github.com/ai/autoprefixer-rails/issues/47\" rel=\"nofollow noreferrer\">https://github.com/ai/autoprefixer-rails/issues/47</a></p>\n\n<p>This will pop up if you are using Node instead of RubyRacer as your JS runtime.</p>\n\n<p>EDIT - \n This has been fixed in the latest version of autoprefixer. </p>\n\n<pre><code>bundle update autoprefixer-rails\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 2958617, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100000054935616/picture?type=large", "display_name": "learning_to_swim", "link": "https://stackoverflow.com/users/2958617/learning-to-swim"}, "is_accepted": false, "score": 0, "last_activity_date": 1422119968, "creation_date": 1422119968, "answer_id": 28128131, "question_id": 27946932, "link": "https://stackoverflow.com/questions/27946932/error-on-using-bootstrap-sass-in-rails/28128131#28128131", "title": "Error on using Bootstrap Sass in rails", "body": "<p>This has been fixed in the latest release of autoprefixer. Upgrade using the following command -</p>\n\n<pre><code>bundle update autoprefixer-rails\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 1, "accepted_answer_id": 27953914, "answer_count": 2, "score": 6, "last_activity_date": 1422123846, "creation_date": 1421250416, "last_edit_date": 1421253246, "question_id": 27946932, "link": "https://stackoverflow.com/questions/27946932/error-on-using-bootstrap-sass-in-rails", "title": "Error on using Bootstrap Sass in rails", "body": "<p>I'm working on a simple ruby on rails application and I am getting the following error:</p>\n\n<p><code>TypeError: Cannot read property 'process' of undefined (in/home/saasbook/Documents/projects/Bookkeeper/app/assets/stylesheets/application.css.sass)</code></p>\n\n<p>The Extracted source is as follows:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Bookkeeper&lt;/title&gt;\n&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt; //Highlighted error line in extract\n&lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= csrf_meta_tags %&gt;\n</code></pre>\n\n<p>This error occurred after I added Bootstrap Sass by Using the Bootstrap Sass plugin and following this <a href=\"http://www.gotealeaf.com/blog/integrating-rails-and-bootstrap-part-1/\">tutorial</a></p>\n\n<p>Below the extract its stated that the error is at:</p>\n\n<p><code>app/views/layouts/application.html.erb:5:in_app_views_layouts_application_html_erb__226809778_88444660'</code> </p>\n\n<p><strong>My code</strong></p>\n\n<p><strong>application.html.erb</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n &lt;head&gt;\n &lt;title&gt;Bookkeeper&lt;/title&gt;\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;  //Highlighted error line in extract\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n &lt;/head&gt;\n &lt;body&gt;\n    &lt;%= yield %&gt;\n &lt;/body&gt;        \n&lt;/html&gt;\n</code></pre>\n\n<p><strong>application.css.sass</strong></p>\n\n<pre><code>/*\n* This is a manifest file that'll be compiled into application.css, which will include all the files\n* listed below.\n*\n* Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n* or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.\n*\n* You're free to add application-wide styles to this file and they'll appear at the bottom of the\n* compiled file so the styles you add here take precedence over styles defined in any styles\n* defined in the other CSS/SCSS files in this directory. It is generally better to create a new\n* file per style scope.\n*\n*= require_tree \n*= require_self\n*/\n\n@import \"bootstrap-sprockets\"\n@import \"bootstrap\"\n</code></pre>\n\n<p><strong>The page shows this title in the red border on top, is this any help?</strong></p>\n\n<p><code>ExecJS::ProgramError in Portal#index</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "update-attributes"], "comments": [{"owner": {"reputation": 2006, "user_id": 776481, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e454e6578a209b6f7b04cc3ec01a5083?s=128&d=identicon&r=PG", "display_name": "Bjoernsen", "link": "https://stackoverflow.com/users/776481/bjoernsen"}, "edited": false, "score": 0, "creation_date": 1421249389, "post_id": 27946447, "comment_id": 44288040, "body": "did you add <code>editor_pick</code> to your <code>photo_params</code> method?"}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1421249399, "post_id": 27946447, "comment_id": 44288046, "body": "you didn&#39;t show <code>photo_params</code> method"}, {"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1421249440, "post_id": 27946447, "comment_id": 44288074, "body": "Please see my edit. Thanks"}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1421250139, "post_id": 27946447, "comment_id": 44288546, "body": "Could you post what your <code>params</code> contain? Specifically the value of <code>params[:photo][:editor_pick]</code>"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1421250293, "post_id": 27946447, "comment_id": 44288634, "body": "and provide log of updating request"}, {"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1421250314, "post_id": 27946447, "comment_id": 44288643, "body": "Please see logs in edited question. Thanks"}, {"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1421250396, "post_id": 27946447, "comment_id": 44288709, "body": "I removed &quot;Pick&quot; from the submit button and now works... BUT, it will update ALL of the photos and not the particular photo. Maybe some ID missing?"}], "owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421250299, "creation_date": 1421249131, "last_edit_date": 1421250299, "question_id": 27946447, "link": "https://stackoverflow.com/questions/27946447/cant-get-the-value-stored-when-updating-attributes", "title": "Can&#39;t get the value stored when updating attributes", "body": "<p>I am trying to do a marking system for moderators, in which they can select each item as \"editor pick\".</p>\n\n<p>I've added a <code>:editor_pick</code> column to <code>photos</code> table(<code>boolean</code>)</p>\n\n<p>and added a form in the partial for each item to have a checkbox in it: </p>\n\n<pre><code>&lt;% if controller_name == \"photos\" %&gt;\n  &lt;%= simple_form_for [@user, @photo] do |f| %&gt;\n    &lt;%= f.input :editor_pick, label: \"Portada\" %&gt;\n    &lt;%= f.submit \"Pick\" %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>after that, I required the new param in strong parameters in <code>photos controller</code></p>\n\n<p>It's redirecting me correctly after the update, <strong>but it's not saving the new value</strong>.\nWhen I reload the page, the boolean is still <code>false</code>.</p>\n\n<p><strong>My controller actions:</strong></p>\n\n<pre><code>def by_zone\n  @photo = Photo.find_by(params[:id])\n  @user = @photo.user\n  render :index\nend\n\ndef update\n  @photo = Photo.friendly.find(params[:id])\n  if @photo.update_attributes(photo_params)\n    redirect_to [current_user, @photo], notice: 'El spot se ha actualizado.'\n  else\n    render 'edit'\n  end\nend\n</code></pre>\n\n<h3>Edit</h3>\n\n<pre><code>  def photo_params\n    params.require(:photo).permit(:editor_pick,:url,:remote_photo_url,:thumbnail_cache ,:order,:string_tags,:tag_list, :sponsored, :photo, :terms, :title,:description,:category_id,:zone_id, :crop_x, :crop_y, :crop_w, :crop_h, sponsors_attributes: [:name, :description, :web, :facebook, :twitter, :sponsored_avatar])\n  end\n</code></pre>\n\n<h3>Params Edit</h3>\n\n<pre><code>Started PATCH \"/users/enrique-isasi-12/photos/rustic-plastic-table\" for 127.0.0.1 at 2015-01-14 16:43:55 +0100\nProcessing by PhotosController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"wB2SmOT0zR0dwIIguRhzFdctY51LX333CzGYelxS4Hs=\", \"photo\"=&gt;{\"editor_pick\"=&gt;\"1\"}, \"commit\"=&gt;\"Pick\", \"user_id\"=&gt;\"enrique-isasi-12\", \"id\"=&gt;\"rustic-plastic-table\"}\n  User Load (0.5ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 5 ORDER BY \"users\".\"id\" ASC LIMIT 1\n  Notification Load (0.3ms)  SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"user_id\" = $1 AND \"notifications\".\"viewed_at\" IS NULL ORDER BY \"notifications\".\"created_at\" DESC LIMIT 30  [[\"user_id\", 5]]\n  Notification Load (0.2ms)  SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"user_id\" = $1 AND (viewed_at IS NOT NULL) ORDER BY \"notifications\".\"created_at\" DESC LIMIT 30  [[\"user_id\", 5]]\n  Photo Load (0.4ms)  SELECT \"photos\".* FROM \"photos\" WHERE \"photos\".\"slug\" = 'rustic-plastic-table' ORDER BY \"photos\".\"id\" ASC LIMIT 1\n   (0.4ms)  BEGIN\n  Category Load (0.3ms)  SELECT \"categories\".* FROM \"categories\" WHERE \"categories\".\"id\" = $1 ORDER BY \"categories\".\"id\" ASC LIMIT 1  [[\"id\", 2]]\n  Zone Load (0.3ms)  SELECT \"zones\".* FROM \"zones\" WHERE \"zones\".\"id\" = $1 ORDER BY \"zones\".\"id\" ASC LIMIT 1  [[\"id\", 6]]\n  ActsAsTaggableOn::Tag Load (0.2ms)  SELECT \"tags\".* FROM \"tags\" INNER JOIN \"taggings\" ON \"tags\".\"id\" = \"taggings\".\"tag_id\" WHERE \"taggings\".\"taggable_id\" = $1 AND \"taggings\".\"taggable_type\" = $2 AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)  [[\"taggable_id\", 26], [\"taggable_type\", \"Photo\"]]\n  SQL (0.6ms)  UPDATE \"photos\" SET \"editor_pick\" = $1, \"updated_at\" = $2 WHERE \"photos\".\"id\" = 26  [[\"editor_pick\", true], [\"updated_at\", Wed, 14 Jan 2015 15:43:55 UTC +00:00]]\nfalse  ActsAsTaggableOn::Tag Load (0.2ms)  SELECT \"tags\".* FROM \"tags\" INNER JOIN \"taggings\" ON \"tags\".\"id\" = \"taggings\".\"tag_id\" WHERE \"taggings\".\"taggable_id\" = $1 AND \"taggings\".\"taggable_type\" = $2 AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)  [[\"taggable_id\", 26], [\"taggable_type\", \"Photo\"]]\n   (6.1ms)  COMMIT\nRedirected to http://localhost:3000/users/enrique-isasi-4/photos/rustic-plastic-table\nCompleted 302 Found in 31ms (ActiveRecord: 9.7ms)\n</code></pre>\n"}, {"tags": ["java", "android", "ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 1380398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/n2wEt.jpg?s=128&g=1", "display_name": "dat_dude", "link": "https://stackoverflow.com/users/1380398/dat-dude"}, "edited": false, "score": 0, "creation_date": 1421249531, "post_id": 27946508, "comment_id": 44288131, "body": "Can you advice any tutorials then?"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "reply_to_user": {"reputation": 67, "user_id": 1380398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/n2wEt.jpg?s=128&g=1", "display_name": "dat_dude", "link": "https://stackoverflow.com/users/1380398/dat-dude"}, "edited": false, "score": 0, "creation_date": 1421249600, "post_id": 27946508, "comment_id": 44288171, "body": "Actually it is basics of rails. Just read guides, <a href=\"http://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">guides.rubyonrails.org</a> Create controller DbController#db_url if you want connect directly to DB. Or create some REST resources, guides have all necessary info."}], "tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1421249321, "creation_date": 1421249321, "answer_id": 27946508, "question_id": 27946373, "link": "https://stackoverflow.com/questions/27946373/getting-ruby-enviroment-variable-database-url-in-java-android-application/27946508#27946508", "title": "Getting ruby enviroment variable DATABASE_URL in Java Android Application", "body": "<p>I think that direct connect from Android app to DB is quite bad idea.</p>\n\n<p>If you really need it, you can fetch it from heroku app via some http api.</p>\n\n<p>But it is better to use HTTP API for all interaction between android app and db, via your ruby app.</p>\n"}], "owner": {"reputation": 67, "user_id": 1380398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/n2wEt.jpg?s=128&g=1", "display_name": "dat_dude", "link": "https://stackoverflow.com/users/1380398/dat-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 27946508, "answer_count": 1, "score": 0, "last_activity_date": 1421249321, "creation_date": 1421248926, "question_id": 27946373, "link": "https://stackoverflow.com/questions/27946373/getting-ruby-enviroment-variable-database-url-in-java-android-application", "title": "Getting ruby enviroment variable DATABASE_URL in Java Android Application", "body": "<p>I've Rails app in heroku and created database. I can see it's url when I use <code>heroku config</code>. Also I have Java android  application which has 2 activities. I create database class there as docs say:</p>\n\n<pre><code>public class Database\n{\n    public Database()\n    {\n        System.out.println(System.getenv(\"DATABASE_URL\"));\n        try {\n            Connection connection=getConnection();\n        } catch (URISyntaxException e) {\n            e.printStackTrace();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n    private static Connection getConnection() throws URISyntaxException, SQLException {\n        URI dbUri = new URI(System.getenv(\"DATABASE_URL\"));\n\n        String username = dbUri.getUserInfo().split(\":\")[0];\n        String password = dbUri.getUserInfo().split(\":\")[1];\n        String dbUrl = \"jdbc:postgresql://\" + dbUri.getHost() + ':' + dbUri.getPort() + dbUri.getPath();\n        System.out.println(username);\n        return DriverManager.getConnection(dbUrl, username, password);\n    }\n}\n</code></pre>\n\n<p>And create database object in my Activity:</p>\n\n<pre><code>   public void onCreate(Bundle savedInstanceState) {\n        Database database=new Database();\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n    }\n</code></pre>\n\n<p>But I see null instead of url. Well it's predictable because they are two different application. So what is the proprer way to get <code>DATABASE_URL</code> in my Java android app? Or I should just copy database's url in Java variable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1421249713, "post_id": 27946072, "comment_id": 44288238, "body": "According to the documentation (<a href=\"https://github.com/ryanto/acts_as_votable#the-voter\" rel=\"nofollow noreferrer\">github.com/ryanto/acts_as_votable#the-voter</a>), you should be able to call <code>@pin.find_liked_items</code>"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421357601, "post_id": 27946072, "comment_id": 44339438, "body": "I am sorry, I am relatively new in RoR, could you indicate which exact syntax I need to use in my view. Thanks in advance!!!"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421358649, "post_id": 27946072, "comment_id": 44339955, "body": "This should loop on every liked items: <code>&lt;%= @pin.find_liked_items.each do |liked_item| %&gt;</code>"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421362938, "post_id": 27946072, "comment_id": 44341843, "body": "Please could you help me, I am stuck. I don&#39;t know if I need to change the view or controller file to let this work! Please see my edit of the question!"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421396639, "post_id": 27946072, "comment_id": 44351120, "body": "I get this error message on my view page of liked items NoMethodError in Pins#mijn_favoriete_recepten  &lt;% if user_signed_in? %&gt;       &lt;div id=&quot;pins&quot; class=&quot;transitions-enabled&quot;&gt;     &lt;%= @pin.find_liked_items.each do |liked_item| %&gt;         &lt;div class=&quot;box panel panel-default&quot;&gt;             &lt;%= link_to image_tag(pin.image.url(:medium)), liked_item %&gt;               &lt;div class=&quot;panel-body&quot;&gt;"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421418516, "post_id": 27946072, "comment_id": 44363058, "body": "Is it the <code>find_liked_items</code> method called on the <code>@pin</code> instance that is generating the NoMethodError ?"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1421489351, "post_id": 27946072, "comment_id": 44386327, "body": "yes, the error is on &lt;%= @pin.find_liked_items.each do |liked_item| %&gt;"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1424532030, "post_id": 27946072, "comment_id": 45592372, "body": "I have added the following to the pins controller: def my_favorites     @pins = current_user.find_liked_items   end"}], "owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421362854, "creation_date": 1421248093, "last_edit_date": 1421362854, "question_id": 27946072, "link": "https://stackoverflow.com/questions/27946072/list-of-liked-items-with-acts-as-votable-gem", "title": "List of liked items with acts_as_votable gem", "body": "<p>I have implemented the acts_as_votable gem to like pins. </p>\n\n<p>I have the following code in my pins controller</p>\n\n<pre><code> def like\n @pin.liked_by current_user\n redirect_to :back\n end\n\n def unlike\n @pin.unliked_by current_user\n redirect_to :back\n end\n\n def mijn_favoriete_recepten\n @pins = current_user.pins\n end\n</code></pre>\n\n<p>Edit: My 'mijn favoriete recepten' view file: </p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;  \n&lt;div id=\"pins\" class=\"transitions-enabled\"&gt;\n&lt;%= @pin.find_liked_items.each do |liked_item| %&gt;\n&lt;div class=\"box panel panel-default\"&gt;\n    &lt;%= link_to image_tag(pin.image.url(:medium)), liked_item %&gt;\n      &lt;div class=\"panel-body\"&gt;\n      &lt;strong&gt;&lt;p&gt;&lt;%= pin.description %&gt;&lt;/p&gt;&lt;/strong&gt;\n      &lt;p&gt;&lt;%= link_to 'Bekijk recept', pin_path(liked_item) %&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;% else %&gt;\n&lt;%= render 'pages/login' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and the following pin model</p>\n\n<pre><code>class Pin &lt; ActiveRecord::Base\nacts_as_votable\nbelongs_to :user\nhas_attached_file :image, :styles =&gt; { :medium =&gt; \"300x300&gt;\", :thumb =&gt; \"100x100&gt;\" }\nend\n</code></pre>\n\n<p>I try to make a view to list the pins that a specific user has liked. I get stuck in finding the right syntax to put in my view (and controller) to do so. Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1421248229, "post_id": 27946047, "comment_id": 44287330, "body": "I&#39;d turn them into a pages resource, add in a simple admin system and make the pages editable in the admin system."}], "answers": [{"tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1421249518, "creation_date": 1421249518, "answer_id": 27946582, "question_id": 27946047, "link": "https://stackoverflow.com/questions/27946047/rails-routing-to-pages-that-dont-involve-a-database/27946582#27946582", "title": "Rails: routing to pages that don&#39;t involve a database", "body": "<p>You can create resource page, for example.\nIt will deal with model, containing page content.</p>\n\n<p>With such approach you will clean up your routes file</p>\n"}, {"comments": [{"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1421256176, "post_id": 27946802, "comment_id": 44292499, "body": "This will generate routes like <code>&#47;homes&#47;elearning</code>, where the asker has defined routes like <code>&#47;elearning</code>."}, {"owner": {"reputation": 1491, "user_id": 351132, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ajdSq.jpg?s=128&g=1", "display_name": "gkolan", "link": "https://stackoverflow.com/users/351132/gkolan"}, "reply_to_user": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1421256566, "post_id": 27946802, "comment_id": 44292766, "body": "updated with path: &#39;&#39; to remove /home/elearning and get only /elearning"}], "tags": [], "owner": {"reputation": 1491, "user_id": 351132, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ajdSq.jpg?s=128&g=1", "display_name": "gkolan", "link": "https://stackoverflow.com/users/351132/gkolan"}, "is_accepted": false, "score": 0, "last_activity_date": 1421256461, "last_edit_date": 1495541505, "creation_date": 1421250073, "answer_id": 27946802, "question_id": 27946047, "link": "https://stackoverflow.com/questions/27946047/rails-routing-to-pages-that-dont-involve-a-database/27946802#27946802", "title": "Rails: routing to pages that don&#39;t involve a database", "body": "<p>Check this <a href=\"https://stackoverflow.com/questions/17465335/how-to-route-controllers-without-crud-actions\">answer</a></p>\n\n<pre><code>resources :home, path:'', except: [:new, :create, :edit, :update, :destroy] do \n  collection do \n    get 'elearning'\n    get 'howitworks'\n    get 'whattypeofleader'\n    ......\n    ......\n    get 'communication'\n  end \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1777, "user_id": 1845227, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/19dd297b862b6894fe4329f537aad6b0?s=128&d=identicon&r=PG", "display_name": "moosefetcher", "link": "https://stackoverflow.com/users/1845227/moosefetcher"}, "edited": false, "score": 0, "creation_date": 1421319153, "post_id": 27948746, "comment_id": 44316884, "body": "There&#39;s obviously some details about routing I don&#39;t yet understand. If you wouldn&#39;t mind explaining; why would your solution mean &#39;losing named routes&#39; and what does that mean?"}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "reply_to_user": {"reputation": 1777, "user_id": 1845227, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/19dd297b862b6894fe4329f537aad6b0?s=128&d=identicon&r=PG", "display_name": "moosefetcher", "link": "https://stackoverflow.com/users/1845227/moosefetcher"}, "edited": false, "score": 0, "creation_date": 1421325563, "post_id": 27948746, "comment_id": 44320337, "body": "@moosefetcher, routes defined normally in <code>routes.rb</code> will generate a named route helper which can be used in other parts of your application (e.g., <code>link_to &quot;E-learning&quot;, elearning_path</code>). The first example in my answer does the routing dynamically, so you wouldn&#39;t be able to use <code>elearning_path</code>, you would have to use something like <code>url_for(controller: &#39;home&#39;, action: &#39;elearning&#39;)</code>. This only applies to the first example here. For more on Rails routing, I strongly recommend <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html</a>, which I revisit all the time."}, {"owner": {"reputation": 1777, "user_id": 1845227, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/19dd297b862b6894fe4329f537aad6b0?s=128&d=identicon&r=PG", "display_name": "moosefetcher", "link": "https://stackoverflow.com/users/1845227/moosefetcher"}, "edited": false, "score": 0, "creation_date": 1421328615, "post_id": 27948746, "comment_id": 44321989, "body": "I have been directed to that page so often, I can&#39;t tell you. I&#39;ll give it yet another look, but the Rails methods (eg url_for) do just seem to come out of nowhere. Under which class is the url_for method listed in the docs?"}], "tags": [], "owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1421256033, "creation_date": 1421256033, "answer_id": 27948746, "question_id": 27946047, "link": "https://stackoverflow.com/questions/27946047/rails-routing-to-pages-that-dont-involve-a-database/27948746#27948746", "title": "Rails: routing to pages that don&#39;t involve a database", "body": "<p>If you don't mind losing named routes, and don't want to list all of the possible actions, you can do:</p>\n\n<pre><code>get ':action', controller: 'home'\n</code></pre>\n\n<p>which will route all unmatched requests matching this pattern to the <code>Home</code> controller. You'll want to put this towards the bottom in <code>routes.rb</code> so it doesn't intercept other requests.</p>\n\n<p>Otherwise, you can do:</p>\n\n<pre><code>scope module: 'home' do\n  get 'elearning'\n  # ...\nend\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>scope module: 'home' do\n  %w{ elearning howitworks etc }.each do |r|\n    get r\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1421256983, "creation_date": 1421256983, "answer_id": 27949045, "question_id": 27946047, "link": "https://stackoverflow.com/questions/27946047/rails-routing-to-pages-that-dont-involve-a-database/27949045#27949045", "title": "Rails: routing to pages that don&#39;t involve a database", "body": "<p>So I found a cool snippet of code I use with my static pages. </p>\n\n<p>I set up a static page controller and all you need to do is in there put the name of the page.\nThen under the static page view folder you add a file with that name and in routes.rb all you have to do is </p>\n\n<pre><code>StaticPagesController.action_methods.each do |action|\n  get \"/#{action}\", to: \"static_pages##{action}\", as: \"#{action}\"\nend\n</code></pre>\n\n<p>This iterates over the controller you get and creates the routes for you. </p>\n\n<p>If you want to see an example of this you can check out this simple <a href=\"https://github.com/Salinn/blogger\" rel=\"nofollow\">blogger</a> that I did with it </p>\n\n<p>The <a href=\"https://github.com/Salinn/blogger/blob/master/app/controllers/static_pages_controller.rb\" rel=\"nofollow\">Controller</a></p>\n\n<p>The <a href=\"https://github.com/Salinn/blogger/tree/master/app/views/static_pages\" rel=\"nofollow\">View</a></p>\n\n<p>The <a href=\"https://github.com/Salinn/blogger/blob/master/config/routes.rb\" rel=\"nofollow\">Routes</a></p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1777, "user_id": 1845227, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/19dd297b862b6894fe4329f537aad6b0?s=128&d=identicon&r=PG", "display_name": "moosefetcher", "link": "https://stackoverflow.com/users/1845227/moosefetcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1421256983, "creation_date": 1421248028, "question_id": 27946047, "link": "https://stackoverflow.com/questions/27946047/rails-routing-to-pages-that-dont-involve-a-database", "title": "Rails: routing to pages that don&#39;t involve a database", "body": "<p>I've been told the routes.rb file I've put together looks like it was coded in a panic (it was coded in a panic).  </p>\n\n<p>The Rails app I'm developing is an e-learning and not all pages involve quizzing a database.  </p>\n\n<p>How do I go about including those pages? Do I NOT use routes at all? Or should pages be a resource? I'm a bit lost about this.  </p>\n\n<p>The tutorials all seem to focus on the RESTful interactions and not on the behaviour of the site in general.  </p>\n\n<p>Here's my routes file:  </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users\n\nroot :to =&gt; 'home#index'\nget \"elearning\" =&gt; \"home#elearning\"\nget \"howitworks\" =&gt; \"home#howitworks\"\nget \"leadershipstyles\" =&gt; \"home#leadershipstyles\" \nget \"whattypeofleader\" =&gt; \"home#whattypeofleader\"\nget \"showmetheskills\" =&gt; \"home#showmetheskills\"\nget \"safeguarding\" =&gt; \"home#safeguarding\"\nget \"toolsforthejob\" =&gt; \"home#toolsforthejob\"\nget \"whatnext\" =&gt; \"home#whatnext\"\nget \"congratulations\" =&gt; \"home#congratulations\"\nget \"teamwork\" =&gt; \"home#teamwork\"\nget \"presentation\" =&gt; \"home#presentation\"\nget \"planning\" =&gt; \"home#planning\"\nget \"communication\" =&gt; \"home#communication\"\n# get \"newjournal\" =&gt; \"posts#new\"\n\n# get \"profile\" =&gt; 'users#show'\n# get \"profile/edit\" =&gt; 'users#edit'\n\nresources :users do\n    resources :posts\nend\nend\n</code></pre>\n\n<p>OK, so there's a few pages under the /home route. Is that the right way to go about it? If you could explain a better alternative, I'd appreciate it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "delayed-job", "aasm"], "answers": [{"tags": [], "owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "is_accepted": true, "score": 1, "last_activity_date": 1464880833, "last_edit_date": 1464880833, "creation_date": 1421689958, "answer_id": 28030731, "question_id": 27945770, "link": "https://stackoverflow.com/questions/27945770/delayed-job-on-activerecord-model-with-aasm-failing-method-error-swallowed-th/28030731#28030731", "title": "delayed_job on ActiveRecord model with AASM - failing method error swallowed, throws &quot;wrong number of arguments&quot; instead", "body": "<p>This delayed_job code was the problem. When delayed_job encounters an error it looks for something on the object that it can call, in this case anything named \"error\":</p>\n\n<pre><code># lib/delayed/backend/base.rb: 96    \nrescue =&gt; e\n  hook :error, e\nraise e\n\n# lib/delayed/backend/base.rb: 111\ndef hook(name, *args)\n  if payload_object.respond_to?(name) # &lt;--- my object has an unrelated method \"error\"\n    method = payload_object.method(name)\n    method.arity == 0 ? method.call : method.call(self, *args)\n  end\nrescue DeserializationError\nend\n</code></pre>\n\n<p>In my case I had an aasm state named <code>error</code>. So whenever an error occurred, delayed_job rescued and then tried to call this error state as a method, which failed. This obviously only occurred when the code being called threw an error, and only when it was run via delayed_job.</p>\n"}], "owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 28030731, "answer_count": 1, "score": 2, "last_activity_date": 1464880833, "creation_date": 1421247279, "last_edit_date": 1421247900, "question_id": 27945770, "link": "https://stackoverflow.com/questions/27945770/delayed-job-on-activerecord-model-with-aasm-failing-method-error-swallowed-th", "title": "delayed_job on ActiveRecord model with AASM - failing method error swallowed, throws &quot;wrong number of arguments&quot; instead", "body": "<p>In my Rails 4 app, I have an ActiveRecord model with an AASM column. When I use a failing method with delayed_job_active_record, it swallows the error and throws something else to do with AASM.</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  include AASM\n\n  aasm do\n    # aasm setup here\n  end\n\n  def self.joberror\n    1/0 #bad code here\n  end\nend\n</code></pre>\n\n<p><code>MyModel.joberror</code> fails predictably with a <code>ZeroDivisionError</code>. However, when I run this method from inside delayed_job_active_record (<code>MyModel.delay.joberror</code>), the correct error is swallowed, and this is thrown instead:</p>\n\n<pre><code>wrong number of arguments (2 for 0)\n/Users/myhome/myproject/.gems/gems/aasm-4.0.5/lib/aasm/persistence/base.rb:67:in `block (2 levels) in state_with_scope'\n</code></pre>\n\n<p><a href=\"http://pastebin.com/294pBMgX\" rel=\"nofollow\">full stacktrace here</a></p>\n\n<p>That points to code in the aasm gem, despite this method not involving aasm at all, nor even an actual instance of <code>MyModel</code>. However, if I comment out the aasm code it goes back to the correct ZeroDivision error. </p>\n\n<p>I've read that delayed_job does some serialization of the method you want it to perform but I don't understand the consequences of that enough to know why it would cause this or how to fix it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 2350, "user_id": 1089494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UHEMI.png?s=128&g=1", "display_name": "Don Giulio", "link": "https://stackoverflow.com/users/1089494/don-giulio"}, "edited": false, "score": 0, "creation_date": 1421250967, "post_id": 27945981, "comment_id": 44289064, "body": "I tried that, but rspec says that <code>undefined local variable or method </code>response&#39;`"}], "tags": [], "owner": {"reputation": 4582, "user_id": 3587715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bb09ae2bd054b6a4d8bc7bf9b58a69?s=128&d=identicon&r=PG&f=1", "display_name": "hjing", "link": "https://stackoverflow.com/users/3587715/hjing"}, "is_accepted": false, "score": 2, "last_activity_date": 1421247867, "creation_date": 1421247867, "answer_id": 27945981, "question_id": 27945543, "link": "https://stackoverflow.com/questions/27945543/rspec-expecting-empty-routing/27945981#27945981", "title": "rspec expecting empty routing", "body": "<p>You're passing in a hash to expect:</p>\n\n<pre><code>{ :get =&gt; \"/api/v1/items/new\" }\n</code></pre>\n\n<p>but your assertion is only valid for response objects. You probably want to do something along the lines of</p>\n\n<pre><code>get \"/api/v1/items/new\"\nexpect(response).to have_http_status(404)\n</code></pre>\n\n<p>but if you haven't defined that route yet, this test will probably fail as well.</p>\n\n<p>See <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/matchers/have-http-status-matcher\" rel=\"nofollow\">this</a> for documentation on the have_http_status matcher.</p>\n"}, {"comments": [{"owner": {"reputation": 2350, "user_id": 1089494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UHEMI.png?s=128&g=1", "display_name": "Don Giulio", "link": "https://stackoverflow.com/users/1089494/don-giulio"}, "edited": false, "score": 0, "creation_date": 1421251058, "post_id": 27946069, "comment_id": 44289125, "body": "unfortunately this doesn&#39;t work, as the path get interpreted and <code>new</code> get&#39;s considered as the <code>id</code> for the <code>show</code> action: <code>expected {:get=&gt;&quot;&#47;api&#47;v1&#47;items&#47;new&quot;} not to be routable, but it routes to {:format=&gt;&quot;json&quot;, :controller=&gt;&quot;api&#47;v1&#47;items&quot;, :action=&gt;&quot;show&quot;, :id=&gt;&quot;new&quot;}</code>"}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1421253069, "last_edit_date": 1421253069, "creation_date": 1421248083, "answer_id": 27946069, "question_id": 27945543, "link": "https://stackoverflow.com/questions/27945543/rspec-expecting-empty-routing/27946069#27946069", "title": "rspec expecting empty routing", "body": "<p>You are probably looking for <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-0/docs/routing-specs/be-routable-matcher\" rel=\"nofollow\"><code>be_routable</code></a> matcher:</p>\n\n<pre><code>it { expect(get: '/api/v1/items/new').to_not be_routable }\n</code></pre>\n\n<p>From docs:</p>\n\n<blockquote>\n  <p>The be_routable matcher is best used with should_not to specify that a\n  given route should not be routable. It is available in routing specs (in\n  spec/routing) and controller specs (in spec/controllers).</p>\n</blockquote>\n\n<p>As a workaround for the issue with <code>new</code> being interpreted as <code>show</code>, you can use alternative matcher called <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-0/docs/routing-specs/route-to-matcher\" rel=\"nofollow\"><code>route_to</code></a>:</p>\n\n<pre><code>it { expect(get: '/api/v1/items/new').to_not route_to('/api/v1/items#new') }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>it { expect(get: '/api/v1/items/new').to_not route_to(controller: '/api/v1/items', action: 'new') }\n</code></pre>\n"}], "owner": {"reputation": 2350, "user_id": 1089494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UHEMI.png?s=128&g=1", "display_name": "Don Giulio", "link": "https://stackoverflow.com/users/1089494/don-giulio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 27946069, "answer_count": 2, "score": 1, "last_activity_date": 1421254640, "creation_date": 1421246535, "last_edit_date": 1421254640, "question_id": 27945543, "link": "https://stackoverflow.com/questions/27945543/rspec-expecting-empty-routing", "title": "rspec expecting empty routing", "body": "<p>I'm implementing an API on my app, and testing it with Rspec. </p>\n\n<p>my items controller doesn't have the <code>new</code> or <code>edit</code> actions, and the routes.rb has no routes for them: </p>\n\n<pre><code>namespace :api, defaults: {format: 'json'} do\n  namespace :v1 do\n    resources :items, except: [:new, :edit]\n  end\nend\n</code></pre>\n\n<p>My rspec test for them looks like: </p>\n\n<pre><code>it \"raises error on #new\" do      \n  expect(:get =&gt; \"/api/v1/items/new\").to have_http_status(404)\nend\n</code></pre>\n\n<p>but when I execute the tests on it I get: </p>\n\n<pre><code>Api::V1::ItemsController routing raises error on #new\n Failure/Error: expect(:get =&gt; \"/api/v1/items/new\").to have_http_status(404)\n   expected a response object, but an instance of Hash was received\n # ./spec/routing/items_routing_spec.rb:11:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I'm not sure how to deal with this case and get the test to pass.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 15009, "user_id": 283398, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b1cdc38a7e1707aae0699d7bacdc7095?s=128&d=identicon&r=PG", "display_name": "Gabe Kopley", "link": "https://stackoverflow.com/users/283398/gabe-kopley"}, "edited": false, "score": 0, "creation_date": 1421246865, "post_id": 27945539, "comment_id": 44286370, "body": "Please give example input and desired results."}, {"owner": {"reputation": 1019, "user_id": 1682542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c45a0736d11ac4a5d77daa00bb4be72f?s=128&d=identicon&r=PG", "display_name": "Bogdan Popa", "link": "https://stackoverflow.com/users/1682542/bogdan-popa"}, "reply_to_user": {"reputation": 15009, "user_id": 283398, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b1cdc38a7e1707aae0699d7bacdc7095?s=128&d=identicon&r=PG", "display_name": "Gabe Kopley", "link": "https://stackoverflow.com/users/283398/gabe-kopley"}, "edited": false, "score": 0, "creation_date": 1421246943, "post_id": 27945539, "comment_id": 44286424, "body": "Sure, for example, 4 9s would come off as: 99 99. But if the input consists of 5 9s, it would still come off as: 99 99 instead of 99 99 9."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1421254448, "post_id": 27945539, "comment_id": 44291442, "body": "What would be the correct grouping: <code>12 34 5</code> or <code>1 23 45</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 1682542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c45a0736d11ac4a5d77daa00bb4be72f?s=128&d=identicon&r=PG", "display_name": "Bogdan Popa", "link": "https://stackoverflow.com/users/1682542/bogdan-popa"}, "edited": false, "score": 0, "creation_date": 1421247146, "post_id": 27945651, "comment_id": 44286552, "body": "It works :) does this mean between 1 and 2 encounters of a digit?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421247182, "post_id": 27945651, "comment_id": 44286579, "body": "mudasobwa, BogdanPopa: Yes."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1421246930, "creation_date": 1421246930, "answer_id": 27945651, "question_id": 27945539, "link": "https://stackoverflow.com/questions/27945539/ruby-string-scan-method-removes-unpaired-characters/27945651#27945651", "title": "Ruby string scan method removes unpaired characters", "body": "<p>Change <code>/../</code> to <code>/.{1,2}/</code>, or better, <code>/\\d{1,2}/</code>.</p>\n"}], "owner": {"reputation": 1019, "user_id": 1682542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c45a0736d11ac4a5d77daa00bb4be72f?s=128&d=identicon&r=PG", "display_name": "Bogdan Popa", "link": "https://stackoverflow.com/users/1682542/bogdan-popa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 27945651, "answer_count": 1, "score": 1, "last_activity_date": 1421247416, "creation_date": 1421246526, "last_edit_date": 1421246866, "question_id": 27945539, "link": "https://stackoverflow.com/questions/27945539/ruby-string-scan-method-removes-unpaired-characters", "title": "Ruby string scan method removes unpaired characters", "body": "<p>I have a \"telephone\" column in a database table and I want to display it in groups of 2 numbers, no matter how the user inputs it.</p>\n\n<p>However, if it's a phone number formed from an odd number(let's say 7), the seventh character disappears.</p>\n\n<p>I have an after_create filter which does exactly this:</p>\n\n<pre><code>def phone_format\n  self.telephone = \"#{self.telephone.scan(/../).join(\" \")}\"\n  binding.pry unless self.save\nend\n</code></pre>\n\n<p>How can I prevent this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "homebrew", "sqlite3-ruby"], "answers": [{"comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1421246081, "post_id": 27945249, "comment_id": 44285856, "body": "oops did not notice, you are asking of OS X !"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1421246164, "post_id": 27945249, "comment_id": 44285908, "body": "Updated answer, please check."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1421246297, "post_id": 27945249, "comment_id": 44285993, "body": "It&#39;s not my question ;) I hope <code>joeleba</code> will see your answer."}, {"owner": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "edited": false, "score": 0, "creation_date": 1421247413, "post_id": 27945249, "comment_id": 44286737, "body": "Thanks for the reply! <code>brew install libsqlite3-dev</code>:  <code>Error: No available formula for libsqlite3-dev   Searching formulae...  Searching taps... </code> and    <code>bundle install</code> still returns the same error :-&lt;"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1421247525, "post_id": 27945249, "comment_id": 44286813, "body": "brew list -1 | while read line; do brew unlink $line; brew link $line; done  Run this command befor the brew install sqlite3"}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1421246157, "last_edit_date": 1421246157, "creation_date": 1421245681, "answer_id": 27945249, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/27945249#27945249", "title": "Error with sqlite3 when running bundle install", "body": "<p><strong>Try installing those in your console :</strong>  </p>\n\n<p>Install brew : </p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\"\n\n# Add Homebrews binary path to the front of the $PATH\necho 'export PATH=/usr/local/bin:$PATH' &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n\nbrew install sqlite3\nbrew install libsqlite3-dev\nbundle install\n</code></pre>\n\n<p>Please check <a href=\"http://www.createdbypete.com/articles/ruby-on-rails-development-setup-for-mac-osx/\" rel=\"nofollow\">this</a> link !</p>\n"}, {"comments": [{"owner": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "edited": false, "score": 1, "creation_date": 1421249154, "post_id": 27945378, "comment_id": 44287905, "body": "hi! I came across the same answer on another post, tried it out but it didn&#39;t work. For my case, I used  <code>gem install sqlite3 -- --with-sqlite3-dir=&#47;usr&#47;local&#47;</code> The same error message was displayed"}, {"owner": {"reputation": 149, "user_id": 4442990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e35bdca7ea017731ab1b1bec2d0129a?s=128&d=identicon&r=PG&f=1", "display_name": "lneb", "link": "https://stackoverflow.com/users/4442990/lneb"}, "reply_to_user": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "edited": false, "score": 0, "creation_date": 1421265012, "post_id": 27945378, "comment_id": 44297590, "body": "sorry to hear that. it worked for me. you sure you checked that your sqlite3 installation is inside /usr/local? also is the command &#39;gem install sqlite3 --&#39; working?"}, {"owner": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "edited": false, "score": 0, "creation_date": 1421369444, "post_id": 27945378, "comment_id": 44343811, "body": "I somehow got 4 different versions of sqlite3 installed on my computer. I think that was the source of confusion. So I uninstalled them all and let <code>bundle install</code> handle the sqlite3 installation and it worked fine. Thanks for your reply man!"}], "tags": [], "owner": {"reputation": 149, "user_id": 4442990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e35bdca7ea017731ab1b1bec2d0129a?s=128&d=identicon&r=PG&f=1", "display_name": "lneb", "link": "https://stackoverflow.com/users/4442990/lneb"}, "is_accepted": false, "score": 12, "last_activity_date": 1421246046, "creation_date": 1421246046, "answer_id": 27945378, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/27945378#27945378", "title": "Error with sqlite3 when running bundle install", "body": "<p>check where your sqlite is installed to and run the following command (i assume /opt/local here)</p>\n\n<pre><code>gem install sqlite3 -- --with-sqlite3-dir=/opt/local\n</code></pre>\n\n<p>then</p>\n\n<pre><code>bundle install\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "is_accepted": true, "score": 3, "last_activity_date": 1421253709, "creation_date": 1421253709, "answer_id": 27948063, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/27948063#27948063", "title": "Error with sqlite3 when running bundle install", "body": "<p>So I found the solution: Simply (manually) uninstall any existing versions of sqlite3 in your computer. What I did was:</p>\n\n<ol>\n<li>Run <code>which -a sqlite3</code> to find out the directories in which sqlite3 was installed (for me there were 4 versions O.o). Delete all those sqlite3 files (by rm)</li>\n<li>Manually delete all the sqlite-related files in <code>/usr/local/lib</code>, <code>usr/local/bin</code> and <code>usr/local/include</code></li>\n<li><p>After all the deletion, run <code>bundle install</code> again in your app dir, and the required version of sqlite3 will automatically be installed. </p>\n\n<p><code>$bundle install\nFetching gem metadata from https://rubygems.org/..........\nResolving dependencies...\n // Using a bunch of gems\n Installing sqlite3 1.3.10\n Installing turbolinks 2.5.3\n Installing uglifier 2.7.0\n Installing web-console 2.0.0\n Your bundle is complete!\n Use 'bundle show [gemname]' to see where a bundled gem is installed.</code></p></li>\n</ol>\n\n<p>I hope this saves some of your time, if you encountered the same problem as I did. Thanks!</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5017676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea88fb9f0a2c5f822cfc254e88b504f?s=128&d=identicon&r=PG&f=1", "display_name": "Onoda", "link": "https://stackoverflow.com/users/5017676/onoda"}, "is_accepted": false, "score": -1, "last_activity_date": 1444926894, "creation_date": 1444926894, "answer_id": 33153904, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/33153904#33153904", "title": "Error with sqlite3 when running bundle install", "body": "<p>When you try to create a new project, then the rails try to create by latest version of the rails. Therefor, bundle install raised some errors.</p>\n\n<p>When you create a new project, you can specify the version of the rails, which you have installed to OS X like following.</p>\n\n<pre><code>$ rails -v\nRails 4.x.x\n</code></pre>\n\n<p>After that, you can create new project like following.</p>\n\n<pre><code>$ rails _4.x.x_ new PROJECT_NAME\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 543, "user_id": 7491660, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh5.googleusercontent.com/-cGWG7agUpXU/AAAAAAAAAAI/AAAAAAAAA3M/gXMwQQmKhIY/photo.jpg?sz=128", "display_name": "richard_d_sim", "link": "https://stackoverflow.com/users/7491660/richard-d-sim"}, "is_accepted": false, "score": 0, "last_activity_date": 1530871035, "creation_date": 1530871035, "answer_id": 51207786, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/51207786#51207786", "title": "Error with sqlite3 when running bundle install", "body": "<p>I'm just adding my own solution for people other to try in case the above did not work for them.</p>\n\n<p>I had to brew uninstall sqlite3 then I had to remove the sqlite3s from the rails app directory.</p>\n\n<p>using <code>sudo rm -fr {app_route}/vendor/bundle/ruby/2.3.0/gems/sqlite3-1.3.13/</code></p>\n\n<p>then used <code>bundle install</code> to reinstall sqlite3.</p>\n"}, {"tags": [], "owner": {"reputation": 912, "user_id": 362420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BPoSl.png?s=128&g=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/362420/riccardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1610450599, "creation_date": 1610450599, "answer_id": 65682952, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install/65682952#65682952", "title": "Error with sqlite3 when running bundle install", "body": "<p>This worked for me within a <code>Dockerfile</code> context on debian flavour:</p>\n<pre><code>apt-get install -y sqlite3 libsqlite3-dev\ngem install sqlite3    # or: `bundle install`\n</code></pre>\n<p>.. and it worked!</p>\n"}], "owner": {"reputation": 176, "user_id": 4416655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/867a08e85faa73bbe4ee99264b7451e2?s=128&d=identicon&r=PG&f=1", "display_name": "joeleba", "link": "https://stackoverflow.com/users/4416655/joeleba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8513, "favorite_count": 1, "accepted_answer_id": 27948063, "answer_count": 6, "score": 6, "last_activity_date": 1610450599, "creation_date": 1421245292, "question_id": 27945123, "link": "https://stackoverflow.com/questions/27945123/error-with-sqlite3-when-running-bundle-install", "title": "Error with sqlite3 when running bundle install", "body": "<p>So I was trying to run <code>bundle install</code> in my newly created Rails app when I got this error:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20150114-6877-1x6zk4k.rb extconf.rb \nchecking for sqlite3.h... yes\nchecking for sqlite3_libversion_number() in -lsqlite3... no\nsqlite3 is missing. Try 'port install sqlite3 +universal',\n'yum install sqlite-devel' or 'apt-get install libsqlite3-dev'\nand check your shared library search path (the\nlocation where your sqlite3 shared library is located).\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n    --with-sqlite3-dir\n    --without-sqlite3-dir\n    --with-sqlite3-include\n    --without-sqlite3-include=${sqlite3-dir}/include\n    --with-sqlite3-lib\n    --without-sqlite3-lib=${sqlite3-dir}/\n    --with-sqlite3lib\n    --without-sqlite3lib\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/folders/mc/qsk02mn50x96msk9zjxgzbmh0000gn/T/bundler20150114-6877-jsv17e/sqlite3-1.3.10/gems/sqlite3-1.3.10 for inspection.\nResults logged to /var/folders/mc/qsk02mn50x96msk9zjxgzbmh0000gn/T/bundler20150114-6877-jsv17e/sqlite3-1.3.10/extensions/universal-darwin-14/2.0.0/sqlite3-1.3.10/gem_make.out\nAn error occurred while installing sqlite3 (1.3.10), and Bundler cannot continue.\nMake sure that `gem install sqlite3 -v '1.3.10'` succeeds before bundling.\n</code></pre>\n\n<p>My current sqlite3 version:</p>\n\n<pre><code>3.8.7.4 2014-12-09 01:34:36 f66f7a17b78ba617acde90fc810107f34f1a1f2e\n</code></pre>\n\n<p>Ruby: </p>\n\n<pre><code>ruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin14]\n</code></pre>\n\n<p>Brew:</p>\n\n<pre><code>0.9.5\n</code></pre>\n\n<p>Further info:</p>\n\n<pre><code>$ which sqlite3\n/usr/local/bin/sqlite3\n$ whereis sqlite3\n/usr/bin/sqlite3\n</code></pre>\n\n<p>Does this have anything to do with the clashing of Ruby 2.0 and the default Ruby 1.8 that came with my OS X? I'm using OS X 10.10.</p>\n\n<p>How can I solve this problem? Thank you very much!</p>\n"}, {"tags": ["ruby", "setter"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421246340, "post_id": 27945074, "comment_id": 44286023, "body": "Your problem is not clear. What are the special abilities that you cannot handle?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1421245808, "post_id": 27945111, "comment_id": 44285708, "body": "This would work for those attributes having setter enabled. I would do <code>self.respond_to?(&quot;#{k}=&quot;) ? self.send(&quot;#{k}=&quot;, v) : instance_variable_set(&quot;@#{k}&quot;, v)</code>."}, {"owner": {"reputation": 27605, "user_id": 29595, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ef52a258caf51abc97e22f08a955d45?s=128&d=identicon&r=PG", "display_name": "Logan Serman", "link": "https://stackoverflow.com/users/29595/logan-serman"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1421246013, "post_id": 27945111, "comment_id": 44285827, "body": "Depends on your use case obviously."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1421246282, "post_id": 27945111, "comment_id": 44285978, "body": "Sure, and I +1ed your answer, but the use of <code>instance_variable_set</code> in the original question suggests that OP does not expect raising exceptions on undefined accessors."}], "tags": [], "owner": {"reputation": 27605, "user_id": 29595, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ef52a258caf51abc97e22f08a955d45?s=128&d=identicon&r=PG", "display_name": "Logan Serman", "link": "https://stackoverflow.com/users/29595/logan-serman"}, "is_accepted": false, "score": 3, "last_activity_date": 1421245235, "creation_date": 1421245235, "answer_id": 27945111, "question_id": 27945074, "link": "https://stackoverflow.com/questions/27945074/using-setters-together-with-instance-variable-set/27945111#27945111", "title": "Using setters together with instance_variable_set", "body": "<p>You can use <code>send</code> to call the setter method on <code>self</code>:</p>\n\n<p><code>params.each { |k, v| self.send(\"#{k}=\", v) }</code></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1421246357, "post_id": 27945410, "comment_id": 44286032, "body": "Since you voluntary define accessors, why not <code>attr_acccessor name unless respond_to?(&quot;#{name}=&quot;); send &quot;#{name}=&quot;, value</code>? Currently your answer looks a bit inconsistent to me."}, {"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1421246466, "post_id": 27945410, "comment_id": 44286103, "body": "@mudasobwa that&#39;s a nice abbreviation, I like it. I think the original syntax I used is probably easier for anyone who is new to these ideas to understand, but I&#39;ll update the answer to include that more stylish alternative :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1421246555, "post_id": 27945410, "comment_id": 44286161, "body": "The syntax is only because comments do not let to paste snippets. My question is: why do you call <code>instance_variable_set</code> in the else branch? You already have an accessor, hence it\u2019s logical to use it."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421246636, "post_id": 27945410, "comment_id": 44286229, "body": "As mudasobwa writes, it is not about nice of not. Unless you do it like what mudasobwa points out, you lose the whole point."}, {"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1421246677, "post_id": 27945410, "comment_id": 44286256, "body": "@mudasobwa I meant, I agree that doing <code>attr_accessor unless</code> followed by <code>send</code> is a nicer way to write this, but I think if someone is coming to SO as a Ruby novice that will be harder to understand than the very simple <code>if else</code> form. I updated the answer to recommend your suggested form."}, {"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1421246951, "post_id": 27945410, "comment_id": 44286430, "body": "BTW I understand your point is, as it was originally written why define an accessor but then call instance variable set instead of using the accessor. I agree with your point, if you&#39;re going to freely define accessors just define the missing accessors first and then use the accessors for each param. I&#39;ve updated the answer accordingly. Thanks @mudasobwa!"}], "tags": [], "owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1421246582, "last_edit_date": 1421246582, "creation_date": 1421246170, "answer_id": 27945410, "question_id": 27945074, "link": "https://stackoverflow.com/questions/27945074/using-setters-together-with-instance-variable-set/27945410#27945410", "title": "Using setters together with instance_variable_set", "body": "<p>Expanding on Logan's answer, you could do this to use defined setters and create accessors when not defined:</p>\n\n<pre><code>params.each do |name,value|\n  if respond_to?(\"#{name}=\")\n    send \"#{name}=\", value\n  else\n    instance_variable_set \"@#{name}\",value\n  end\nend\n</code></pre>\n\n<p>Let me know if you have questions about the above and I can update the answer further.</p>\n\n<p><em>Update</em></p>\n\n<p>Or, as suggested by @mudasobwa, if you want there to be default accessor methods for all your instance variables, you could use this form:</p>\n\n<pre><code>params.each do |name,value|\n  attr_accessor(name) unless respond_to?(\"#{name}=\")\n  send \"#{name}=\", value\nend\n</code></pre>\n"}], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1421246582, "creation_date": 1421245097, "question_id": 27945074, "link": "https://stackoverflow.com/questions/27945074/using-setters-together-with-instance-variable-set", "title": "Using setters together with instance_variable_set", "body": "<p>I'm using this simple construct for initializing a class with a hash:</p>\n\n<pre><code>def initialize(params)\n  params.each { |k, v| instance_variable_set(\"@#{k}\", v) }\nend\n</code></pre>\n\n<p>But instance_variable_set doesn't use the setter and so I can't handle special abilities. \nIs there an other nice way for initializing a class AND handle some extras in setter methods?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 2, "creation_date": 1421244964, "post_id": 27944971, "comment_id": 44285177, "body": "You should try to create a new Array, then add each item from <code>array</code> in it with <code>x</code> or <code>y</code>. Because you may have problem by modifying an Array while you&#39;re iterating on it."}], "answers": [{"comments": [{"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1421245568, "post_id": 27945144, "comment_id": 44285576, "body": "Very nice - <code>flat_map</code> is obviously much better than map -&gt; flatten :)"}, {"owner": {"reputation": 1069, "user_id": 2587243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/w2LHD.jpg?s=128&g=1", "display_name": "Michael Karavaev", "link": "https://stackoverflow.com/users/2587243/michael-karavaev"}, "edited": false, "score": 0, "creation_date": 1421245727, "post_id": 27945144, "comment_id": 44285663, "body": "@toro2k you make my day! .cycle is what I want."}], "tags": [], "owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "is_accepted": true, "score": 7, "last_activity_date": 1421245354, "creation_date": 1421245354, "answer_id": 27945144, "question_id": 27944971, "link": "https://stackoverflow.com/questions/27944971/repeat-a-sequence-and-interleave-it-with-an-array/27945144#27945144", "title": "Repeat a sequence and interleave it with an array", "body": "<p>You could do something like this, using methods from the <a href=\"http://ruby-doc.org/core/Enumerable.html\" rel=\"noreferrer\"><code>Enumerable</code></a> module:</p>\n\n<pre><code>ary = ['1', 'a', '2', 'b']\nxy = ['x', 'y']\n\nary.zip(xy.cycle)\n# =&gt; [[\"1\", \"x\"], [\"a\", \"y\"], [\"2\", \"x\"], [\"b\", \"y\"]]\n\nary.zip(xy.cycle).flat_map(&amp;:reverse)\n# =&gt; [\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": 0, "last_activity_date": 1421248547, "last_edit_date": 1421248547, "creation_date": 1421245388, "answer_id": 27945146, "question_id": 27944971, "link": "https://stackoverflow.com/questions/27944971/repeat-a-sequence-and-interleave-it-with-an-array/27945146#27945146", "title": "Repeat a sequence and interleave it with an array", "body": "<p>This might help:</p>\n\n<pre><code>array.zip(['x', 'y'].cycle).map(&amp;:reverse).flatten(1) #=&gt; [\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1421247924, "post_id": 27945207, "comment_id": 44287124, "body": "@toro2k you are correct. fixed both although you method is still the most idiomatic. I just like having fun with these simple problems to see how many strange solutions there are"}, {"owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "edited": false, "score": 1, "creation_date": 1421248277, "post_id": 27945207, "comment_id": 44287362, "body": "Usually you can find zillions of them! :-)"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1421247894, "last_edit_date": 1421247894, "creation_date": 1421245582, "answer_id": 27945207, "question_id": 27944971, "link": "https://stackoverflow.com/questions/27944971/repeat-a-sequence-and-interleave-it-with-an-array/27945207#27945207", "title": "Repeat a sequence and interleave it with an array", "body": "<p>Also any of these ways will work </p>\n\n<pre><code>array = ['1','a','2','b']\n\narray.each_slice(2).map {|a| ['x','y'].zip(a)}.flatten.compact\n#=&gt;[\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n\n(['x','y'] * (array.size / 2.0).ceil).take(array.size).zip(array).flatten\n#=&gt;[\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n\narray.each_slice(2).flat_map {|a| ['x','y'].zip(a).flatten}.compact\n#=&gt;[\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n\n['x','y'].cycle(array.size / 2 + array.size % 2).take(array.size).zip(array).flatten\n#=&gt;[\"x\", \"1\", \"y\", \"a\", \"x\", \"2\", \"y\", \"b\"]\n</code></pre>\n"}], "owner": {"reputation": 1069, "user_id": 2587243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/w2LHD.jpg?s=128&g=1", "display_name": "Michael Karavaev", "link": "https://stackoverflow.com/users/2587243/michael-karavaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 27945144, "answer_count": 3, "score": 3, "last_activity_date": 1421248547, "creation_date": 1421244775, "last_edit_date": 1421246019, "question_id": 27944971, "link": "https://stackoverflow.com/questions/27944971/repeat-a-sequence-and-interleave-it-with-an-array", "title": "Repeat a sequence and interleave it with an array", "body": "<p>I have an array like this:</p>\n\n<pre><code>array = ['1','a','2','b']\n</code></pre>\n\n<p>I want to make it like this:</p>\n\n<pre><code>['x', '1', 'y', 'a', 'x', '2', 'y', 'b']\n</code></pre>\n\n<p>I tried for many hours but has no result. My best attempt was:</p>\n\n<pre><code>a = array.each_with_index do |val, index|\n  case index\n  when index == 0\n    a.insert(index, 'x')\n  when index.odd?\n    a.insert(index, 'x')\n  when index.even?\n    a.insert(index, 'y')\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api"], "comments": [{"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421244822, "post_id": 27944907, "comment_id": 44285084, "body": "What is the type of the column image in your table? Make sure its a string"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421245297, "post_id": 27944907, "comment_id": 44285407, "body": "I have the following fields in my schema  t.string   &quot;image_file_name&quot;     t.string   &quot;image_content_type&quot;     t.integer  &quot;image_file_size&quot;     t.datetime &quot;image_updated_at&quot;"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421245387, "post_id": 27944907, "comment_id": 44285456, "body": "How come your column name is &#39;image_file_name&#39; but you are using &#39;image&#39; in your user model ?"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421245438, "post_id": 27944907, "comment_id": 44285478, "body": "Change     user.image = auth.info.image  to user.image_file_name"}], "answers": [{"comments": [{"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421250192, "post_id": 27945814, "comment_id": 44288566, "body": "Where is the image being saved? In which column? Do you see a facebook URL in that column?"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421250352, "post_id": 27945814, "comment_id": 44288672, "body": "If the image URL is being saved in image_file_name, then you need to have &lt;%= link_to image_tag(user.image_file_name), user %&gt;"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421351403, "post_id": 27945814, "comment_id": 44336184, "body": "I added the full answer, please accept it and upvote so that other people benefit from it. Thanks"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "reply_to_user": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421354377, "post_id": 27945814, "comment_id": 44337768, "body": "Check! btw, my picture is a little bit fuzzy: <a href=\"https://omr-altijdheerlijk.herokuapp.com/users\" rel=\"nofollow noreferrer\">omr-altijdheerlijk.herokuapp.com/users</a> Is this because it not stored in my Paperclip S3 instance but imported directly from facebook. Do you knwo how I can upgrade the visbility of my picture?"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421354432, "post_id": 27945814, "comment_id": 44337798, "body": "I can&#39;t view your picture if I am not signed in !"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421354665, "post_id": 27945814, "comment_id": 44337922, "body": "But storing the image in s3 will not make it better quality for sure."}], "tags": [], "owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "is_accepted": false, "score": 0, "last_activity_date": 1421247380, "creation_date": 1421247380, "answer_id": 27945814, "question_id": 27944907, "link": "https://stackoverflow.com/questions/27944907/import-facebook-profile-image-via-rails-oath/27945814#27945814", "title": "Import facebook profile image via rails oath", "body": "<p>Thanks for your help. It seems I am one step further. I think the image from facebook is being imported right now. However the image is not yet shown in my view. I have the following code in my view</p>\n\n<pre><code> &lt;%= link_to image_tag(user.image.url(:medium)), user %&gt;\n</code></pre>\n\n<p>When I look into the HTML I see the following link for the image:\n<a href=\"http://s3.amazonaws.com/altijdheerlijk/users/images/000/000/019/medium/http://graph.facebook.com/10152500285363157/picture?type=square\" rel=\"nofollow\">http://s3.amazonaws.com/altijdheerlijk/users/images/000/000/019/medium/http://graph.facebook.com/10152500285363157/picture?type=square</a></p>\n"}, {"tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": true, "score": 0, "last_activity_date": 1421351367, "creation_date": 1421351367, "answer_id": 27971804, "question_id": 27944907, "link": "https://stackoverflow.com/questions/27944907/import-facebook-profile-image-via-rails-oath/27971804#27971804", "title": "Import facebook profile image via rails oath", "body": "<p>You should have </p>\n\n<pre><code>user.image_file_name = auth.info.name\n</code></pre>\n\n<p>and then in your views : </p>\n\n<pre><code>&lt;%= link_to image_tag(user.image_file_name), user %&gt;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 27971804, "answer_count": 2, "score": 1, "last_activity_date": 1421396831, "creation_date": 1421244539, "question_id": 27944907, "link": "https://stackoverflow.com/questions/27944907/import-facebook-profile-image-via-rails-oath", "title": "Import facebook profile image via rails oath", "body": "<p>I am using the oath facebook gem to authenticate users in my app: <a href=\"https://omr-altijdheerlijk.herokuapp.com/\" rel=\"nofollow\">https://omr-altijdheerlijk.herokuapp.com/</a> This is working right now. </p>\n\n<p>I have also added a name and image field to the user account in my app. The name field is automatically filled with a user's name from facebook. Now I am also trying to import a user's profile picture from facebook to an account in rails by authetication with Facebook. This is not working, see my code below:</p>\n\n<p>my user.rb file</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n# Include default devise modules. Others available are:\n# :confirmable, :lockable, :timeoutable and :omniauthable\ndevise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers =&gt; [:facebook]\n\nhas_many :pins\n\ndef self.from_omniauth(auth)\n  where(provider2: auth.provider, uid2: auth.uid).first_or_create do |user|\n    user.provider2 = auth.provider\n    user.uid2 = auth.uid\n    user.email = auth.info.email\n    user.name = auth.info.name\n    user.image = auth.info.image\n    user.password = Devise.friendly_token[0,20]\n  end\nend\n\nhas_attached_file :image, :styles =&gt; { :medium =&gt; \"300x300&gt;\", :square =&gt; \"200x200&gt;\", :thumb =&gt; \"100x100&gt;\" }, :default_url =&gt; \"/images/:style/default.jpg\"\nend\n</code></pre>\n\n<p>my application controller</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n # Prevent CSRF attacks by raising an exception.\n # For APIs, you may want to use :null_session instead.\nbefore_action :authenticate_user!\n\nprotect_from_forgery with: :exception\nbefore_filter :configure_permitted_parameters, if: :devise_controller?\n\nprotected\n\n  def configure_permitted_parameters\n  devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:name, :image, :email, :password,    :password_confirmation, :current_password) }\n  devise_parameter_sanitizer.for(:sign_in) { |u| u.permit(:name, :image, :email, :password, :password_confirmation, :current_password) }\n  devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:name, :image, :email, :password, :password_confirmation, :current_password) }\n  end\n\n end\n</code></pre>\n\n<p>btw, I am also using Devise (for regular login) and Paperclip, ImageMagic and Amazon S3 for uploading and storing images.</p>\n\n<p>Could anyone help what I am doing wrong?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1421250408, "post_id": 27944875, "comment_id": 44288717, "body": "The best solution is to use unix-based OS, if you are going to use ruby as primary language"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1421256659, "post_id": 27944875, "comment_id": 44292829, "body": "Does Gherkin (cucumber&#39;s parser) work on ruby 2.1.x?  The <a href=\"https://github.com/cucumber/gherkin\" rel=\"nofollow noreferrer\">documentation</a> says it supports 1.9.3-2.0.0.  You may want to try an older version of ruby.  YMMV."}, {"owner": {"reputation": 21, "user_id": 3826729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a19786654c356c7cea17949e4067b0?s=128&d=identicon&r=PG&f=1", "display_name": "jimi_slonecznik", "link": "https://stackoverflow.com/users/3826729/jimi-slonecznik"}, "edited": false, "score": 0, "creation_date": 1421306041, "post_id": 27944875, "comment_id": 44310778, "body": "I&#39;ve tried installing ruby in the same way on my home PC (with windows 7) and there were no issues."}, {"owner": {"reputation": 126, "user_id": 1201003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d65b15f60e8dd858ee6f603b3a223c9?s=128&d=identicon&r=PG", "display_name": "Dalar", "link": "https://stackoverflow.com/users/1201003/dalar"}, "edited": false, "score": 0, "creation_date": 1462983759, "post_id": 27944875, "comment_id": 61871560, "body": "I have the same error on Windows 7 even when running <code>gem update --system</code>"}, {"owner": {"reputation": 126, "user_id": 1201003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d65b15f60e8dd858ee6f603b3a223c9?s=128&d=identicon&r=PG", "display_name": "Dalar", "link": "https://stackoverflow.com/users/1201003/dalar"}, "edited": false, "score": 0, "creation_date": 1462985783, "post_id": 27944875, "comment_id": 61872746, "body": "Here&#39;s a temporary hotfix: <a href=\"https://gist.github.com/headius/775696\" rel=\"nofollow noreferrer\">gist.github.com/headius/775696</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1234, "user_id": 2531585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284095dcade08a98a6dbe44db5d4e99d?s=128&d=identicon&r=PG", "display_name": "Mohammed R&#233;da OUASSINI", "link": "https://stackoverflow.com/users/2531585/mohammed-r%c3%a9da-ouassini"}, "is_accepted": false, "score": 0, "last_activity_date": 1512472489, "creation_date": 1512472489, "answer_id": 47652255, "question_id": 27944875, "link": "https://stackoverflow.com/questions/27944875/error-while-installing-gem-on-windows-8-incompatible-character-encoding/47652255#47652255", "title": "Error while installing gem on Windows 8 - incompatible character encoding", "body": "<p>I get the same error on windows 7, I fixed the problem by doing the change below:</p>\n\n<p>On the file <strong>\\lib\\ruby\\{version}\\resolv.rb</strong> I changed the line below:</p>\n\n<pre><code>request[0,2] = [id].pack('n')\n</code></pre>\n\n<p>To</p>\n\n<pre><code>request[0,2] = [id].pack('U')\n</code></pre>\n\n<p>FYI: On the version 2.4.0 the line number is 772.</p>\n"}], "owner": {"reputation": 21, "user_id": 3826729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a19786654c356c7cea17949e4067b0?s=128&d=identicon&r=PG&f=1", "display_name": "jimi_slonecznik", "link": "https://stackoverflow.com/users/3826729/jimi-slonecznik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512472489, "creation_date": 1421244466, "last_edit_date": 1421407851, "question_id": 27944875, "link": "https://stackoverflow.com/questions/27944875/error-while-installing-gem-on-windows-8-incompatible-character-encoding", "title": "Error while installing gem on Windows 8 - incompatible character encoding", "body": "<p>I need to set up environment to start writing cucumber tests on Windows 8. I installed ruby 2.1.5 (from windows installer on ruby-lang.org).\nBut when I wanted to install gems I faced encoding issue and got stuck.</p>\n\n<pre><code>ERROR:  While executing gem ... (Encoding::CompatibilityError)\nincompatible character encodings: UTF-8 and ASCII-8BIT\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:771:in `[]='\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:771:in `sender'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:525:in `block in fetch_resource'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1096:in `block (3 levels) in resolv'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1094:in `each'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1094:in `block (2 levels) in resolv'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1093:in `each'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1093:in `block in resolv'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1091:in `each'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:1091:in `resolv'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:520:in `fetch_resource'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:510:in `each_resource'\n    C:/jimi/Ruby21-x64/lib/ruby/2.1.0/resolv.rb:491:in `getresource'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/remote_fetcher.rb:92:in `api_endpoint'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/source.rb:46:in `api_uri'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/source.rb:138:in `fetch_spec'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/resolver/api_specification.rb:76:in `spec'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/resolver/installer_set.rb:77:in `add_always_install'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/dependency_installer.rb:463:in `resolve_dependencies'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/commands/install_command.rb:238:in `install_gem'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/commands/install_command.rb:299:in `block in install_gems'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/commands/install_command.rb:295:in `each'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/commands/install_command.rb:295:in `install_gems'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/commands/install_command.rb:202:in `execute'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/command.rb:307:in `invoke_with_build_args'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/command_manager.rb:168:in `process_args'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/command_manager.rb:138:in `run'\n    C:/jimi/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/gem_runner.rb:54:in `run'\n    C:/jimi/Ruby21-x64/bin/gem:21:in `&lt;main&gt;'\n</code></pre>\n\n<p>Has anyone faced similar problems and found solution to it? Unluckily google wasn't helpful this time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "ruby-on-rails-4", "will-paginate"], "answers": [{"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1421245319, "creation_date": 1421245319, "answer_id": 27945132, "question_id": 27944821, "link": "https://stackoverflow.com/questions/27944821/rails-4-will-paginate-error-when-trying-to-sort-a-resource-based-on-a-calculate/27945132#27945132", "title": "Rails 4: will_paginate error when trying to Sort a Resource Based on a Calculated Value", "body": "<pre><code> def index\n  @profiles = Profile.sorted_by_completeness(params[:page])\n end\n</code></pre>\n\n<p><strong>In your model file:</strong> </p>\n\n<pre><code>def self.sorted_by_completeness(current_page)\n    Profile.all.sort_by(&amp;:completeness).reverse.paginate(page: current_page)\nend\n</code></pre>\n\n<p><strong>TO define your per_page limit use below code:</strong> </p>\n\n<pre><code> #app/config/initializers/will_paginate.rb \n  WillPaginate.per_page = 10\n</code></pre>\n\n<p><strong>Else if you want to define it in model level:</strong></p>\n\n<pre><code>  #profile.rb\n   class Profile &lt; ActiveRecord::Base\n      self.per_page = 10\n    #your other model level logic goes here.\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3347, "user_id": 1715409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4ffc5ffb046f245ba6142974eb7670c9?s=128&d=identicon&r=PG", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/1715409/rahul-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1421245928, "creation_date": 1421245928, "answer_id": 27945341, "question_id": 27944821, "link": "https://stackoverflow.com/questions/27944821/rails-4-will-paginate-error-when-trying-to-sort-a-resource-based-on-a-calculate/27945341#27945341", "title": "Rails 4: will_paginate error when trying to Sort a Resource Based on a Calculated Value", "body": "<p><code>sort_by</code> will return <code>Array</code> collection</p>\n\n<p>to test open rails console and type </p>\n\n<pre><code>Profile.all.sort_by(&amp;:completeness).reverse.class\n</code></pre>\n\n<p>for will_paginate to work with Array you need to  <code>require 'will_paginate/array'</code> \nso just change your profile_controller as</p>\n\n<pre><code>require 'will_paginate/array'\nclass ProfileController &lt; ApplicationController\n  def index\n    @profiles = Profile.sorted_by_completeness.paginate(page: params[:page], per_page: 10)\n  end \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": false, "score": 1, "last_activity_date": 1421247436, "creation_date": 1421247436, "answer_id": 27945840, "question_id": 27944821, "link": "https://stackoverflow.com/questions/27944821/rails-4-will-paginate-error-when-trying-to-sort-a-resource-based-on-a-calculate/27945840#27945840", "title": "Rails 4: will_paginate error when trying to Sort a Resource Based on a Calculated Value", "body": "<p>Two problems with your approach:</p>\n\n<ol>\n<li><p>In your view, you're probably using <code>will_paginate(@projects)</code> which fails because that method isn't for arrays.</p></li>\n<li><p>You're sorting the rows <strong>after</strong> they've been paginated. This means that however you sort them, the sorting will be applied to only one page at a time. Thus whatever solution you choose, you need to specify the order before you paginate the data.</p></li>\n</ol>\n\n<p>A solution would be to obviously use pagination on your array. Something like:</p>\n\n<pre><code>require 'will_paginate/array' # to enable pagination on an array\n@projects = Project.sorting_method.paginate(arguments)\n</code></pre>\n\n<p>However for a large number of projects, that will soon become impractical.</p>\n\n<p>The best way IMO, to enable pagination, is to have a <code>completeness</code> field in your <code>projects</code> table that gets updated anytime it should. Then, you could very easily do the following:</p>\n\n<pre><code>@projects = Project.order(\"completeness DESC\").paginate(arguments)\n</code></pre>\n\n<p>Another solution would be to use sub-queries in a SQL select statement to calculate each project's completeness. Something like:</p>\n\n<pre><code>lcq = \"SELECT COUNT(*) FROM profile_languages WHERE\n  (profile_languages.project_id = projects.id)\"\necq = \"SELECT COUNT(*) FROM educations WHERE\n  (educations.project_id = projects.id)\"\n\n@projects = \\\n  Project.select(\n    \"#{project.column_names.join(',')},\n    SELECT(\n      (CASE useravatar WHEN NULL THEN 0 ELSE 15 END) +\n      (CASE summary WHEN NULL THEN 0 ELSE 5 END) +\n      (CASE (#{lcq}) WHEN 0 THEN 0 ELSE 5 END) +\n      (CASE (#{ecq}) WHEN 0 THEN 0 ELSE 10 END)\n    ) AS completeness\").\n  order(\"completeness DESC\").\n  paginate(arguments)\n</code></pre>\n\n<p>With some debugging, that should work. I don't like it though. A bunch of code that is hard to read and sub-queries that might slow things down a lot.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4440189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1421247436, "creation_date": 1421244306, "question_id": 27944821, "link": "https://stackoverflow.com/questions/27944821/rails-4-will-paginate-error-when-trying-to-sort-a-resource-based-on-a-calculate", "title": "Rails 4: will_paginate error when trying to Sort a Resource Based on a Calculated Value", "body": "<p>I use Rails 4.1.0 I want to sort profiles based on completeness so for this i have this code in my profile model </p>\n\n<pre><code>def completeness\n    percent = 10\n\n    percent += 15 if self.useravatar.present?\n    percent += 5 if self.summary.present?\n    percent += 5 if self.profile_languages.present?\n    percent += 10 if self.educations.present?\n    return percent\nend\n\ndef self.sorted_by_completeness\n  Profile.all.sort_by(&amp;:completeness).reverse\nend\n</code></pre>\n\n<p>and this is my profiles index controller </p>\n\n<pre><code>  def index\n    @profiles = Profile.paginate(page: params[:page], per_page: 10).sorted_by_completeness\n  end \n</code></pre>\n\n<p>But when I'm trying to access profile index page I'm getting this error <code>undefined method</code>total_pages' for #` can someone tell me why i'm getting this error </p>\n"}, {"tags": ["python", "ruby", "json", "perl", "yaml"], "comments": [{"owner": {"reputation": 332, "user_id": 331401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ae61d008bef52dfff16b29df05f23f9?s=128&d=identicon&r=PG", "display_name": "recursive9", "link": "https://stackoverflow.com/users/331401/recursive9"}, "edited": false, "score": 0, "creation_date": 1421245042, "post_id": 27944794, "comment_id": 44285221, "body": "UGH, thanks, changed, works as expected."}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "edited": false, "score": 0, "creation_date": 1421245150, "post_id": 27944794, "comment_id": 44285291, "body": "Do not use <code>json</code> for variable name, it shadows (override) the <code>json</code> module."}], "answers": [{"tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": true, "score": 2, "last_activity_date": 1421245406, "last_edit_date": 1421245406, "creation_date": 1421244809, "answer_id": 27944988, "question_id": 27944794, "link": "https://stackoverflow.com/questions/27944794/yaml-json-converter-something-flawed/27944988#27944988", "title": "YAML-JSON converter; something flawed?", "body": "<p><code>yaml.load_all</code>, per the error message, is a <a href=\"https://docs.python.org/2/tutorial/classes.html#generators\" rel=\"nofollow\"><em>generator</em></a>. See the following example from <a href=\"http://pyyaml.org/wiki/PyYAMLDocumentation\" rel=\"nofollow\">the documentation</a>:</p>\n\n<pre><code>&gt;&gt;&gt; for data in yaml.load_all(documents):\n...     print data\n\n{'description': 'A set of handgear with sparks that crackle across its knuckleguards.\\n',\n'name': \"The Set of Gauntlets 'Pauraegen'\"}\n{'description': 'A set of gauntlets that gives off a foul, acrid odour yet remains untarnished.\\n',\n'name': \"The Set of Gauntlets 'Paurnen'\"}\n{'description': 'A set of handgear, freezing with unnatural cold.\\n',\n'name': \"The Set of Gauntlets 'Paurnimmen'\"}\n</code></pre>\n\n<p>Note that this code <em>iterates over</em> the generator to access its contents.</p>\n\n<p>Instead, you should <code>load</code> the data (or, to reduce security risks, <code>safe_load</code>). I think your Python version should therefore look like:</p>\n\n<pre><code>import json\n\nimport yaml\n\nwith open(\"testinput.yaml\") as stream:\n    yaml_data = yaml.safe_load(stream)\njson_data = json.dumps(yaml_data)\n\nprint(json_data)\n</code></pre>\n\n<p>Note the following:</p>\n\n<ul>\n<li><code>import</code> laid out per <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow\">the style guide</a>;</li>\n<li>Use of <code>with</code> context manager to handle the file; and</li>\n<li>Use of the name <code>json_data</code> to avoid shadowing the <code>json</code> library.</li>\n</ul>\n\n<p>If you <em>will</em> have multiple documents in the file, you could try e.g. <code>yaml_data = list(yaml.load_all(stream))</code>.</p>\n"}], "owner": {"reputation": 332, "user_id": 331401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ae61d008bef52dfff16b29df05f23f9?s=128&d=identicon&r=PG", "display_name": "recursive9", "link": "https://stackoverflow.com/users/331401/recursive9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 27944988, "answer_count": 1, "score": -1, "last_activity_date": 1421245406, "creation_date": 1421244235, "last_edit_date": 1421245038, "question_id": 27944794, "link": "https://stackoverflow.com/questions/27944794/yaml-json-converter-something-flawed", "title": "YAML-JSON converter; something flawed?", "body": "<p>I'm trying to get a simple YAML to JSON converter going in Python, but it doesn't seem correct at all. I am a native Perl/Ruby programmer so I have three scripts, and one input file:</p>\n\n<p><strong>testinput.yaml</strong></p>\n\n<pre><code>---\ndefault:\n  default:\n    line_one: '[I]&lt;description&gt;[/I]'\n    line_three: '&lt;creator&gt;'\n    line_two: '&lt;title&gt; [&lt;type&gt;]'\n    link_to: '&lt;citation&gt;'\n</code></pre>\n\n<p>and one Python/Perl/Ruby script each that do in my mind the exact same thing:</p>\n\n<p><strong>y2j.rb</strong></p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\nrequire 'yaml'\nyml = YAML.load_file('testinput.yaml')\njson = JSON.dump(yml)\n\nputs json\n</code></pre>\n\n<p><strong>y2j.pl</strong></p>\n\n<pre><code>use JSON;\nuse YAML;\nmy $filename = \"testinput.yaml\";\nmy $yaml  = YAML::LoadFile($filename);\nprint encode_json($yaml);\n</code></pre>\n\n<p><strong>y2j.py</strong></p>\n\n<pre><code>import yaml\nimport json\n\n\nstream = open(\"testinput.yaml\", 'r')\ndata = yaml.load_all(stream)\njson = json.dumps(data)\n\nprint(json)\nenter code here\n</code></pre>\n\n<p>then the output:</p>\n\n<p><strong>ruby y2j.rb</strong> </p>\n\n<pre><code>{\"default\":{\"default\":{\"link_to\":\"&lt;citation&gt;\",\"line_two\":\"&lt;title&gt; [&lt;type&gt;]\",\"line_three\":\"&lt;creator&gt;\",\"line_one\":\"[I]&lt;description&gt;[/I]\"}}}\n</code></pre>\n\n<p><strong>perl y2j.pl</strong></p>\n\n<pre><code>{\"default\":{\"default\":{\"line_three\":\"&lt;creator&gt;\",\"line_two\":\"&lt;title&gt; [&lt;type&gt;]\",\"link_to\":\"&lt;citation&gt;\",\"line_one\":\"[I]&lt;description&gt;[/I]\"}}}\n</code></pre>\n\n<p><em>(so far, so good)</em></p>\n\n<p><strong>python y2j.py</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"y2j.py\", line 7, in &lt;module&gt;\n    json = json.dumps(data)\n  File \"/usr/lib64/python2.6/json/__init__.py\", line 230, in dumps\n    return _default_encoder.encode(obj)\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 367, in encode\n    chunks = list(self.iterencode(o))\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 317, in _iterencode\n    for chunk in self._iterencode_default(o, markers):\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 323, in _    iterencode_default\n    newobj = self.default(o)\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 344, in default\n    raise TypeError(repr(o) + \" is not JSON serializable\")\nTypeError: &lt;generator object load_all at 0x15a81e0&gt; is not JSON serializable\n</code></pre>\n\n<p>Is there something completely obvious that I am missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1421245738, "post_id": 27944752, "comment_id": 44285666, "body": "Share your routes file contents please !"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1421246525, "post_id": 27944752, "comment_id": 44286135, "body": "He posted a link to the whole github project."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 2804206, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9a309c2f33c5d63b7ae66f9e1fc9d851?s=128&d=identicon&r=PG", "display_name": "user181796", "link": "https://stackoverflow.com/users/2804206/user181796"}, "edited": false, "score": 0, "creation_date": 1421263729, "post_id": 27945120, "comment_id": 44296851, "body": "Could you eloborate on what you mean @RailsOuter"}], "tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 1, "last_activity_date": 1421264107, "last_edit_date": 1421264107, "creation_date": 1421245272, "answer_id": 27945120, "question_id": 27944752, "link": "https://stackoverflow.com/questions/27944752/link-does-not-transform-to-post-request/27945120#27945120", "title": "Link does not transform to post request", "body": "<p>You need a route for action show in your favorites controller \nIn your routes.rb you have <code>resources :favorites, only: [:create, :destroy]</code>\nwhich means you don't have a route to show the post that you just submitted. You need to do this : </p>\n\n<pre><code>`resources :favorites, only: [:create, :destroy, :show]\n</code></pre>\n\n<p>and create the show action in your favoritesController, then create a view that renders that action.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 3287310, "user_type": "registered", "profile_image": "https://graph.facebook.com/1435503890/picture?type=large", "display_name": "ssjose", "link": "https://stackoverflow.com/users/3287310/ssjose"}, "is_accepted": false, "score": 0, "last_activity_date": 1421249922, "creation_date": 1421249922, "answer_id": 27946738, "question_id": 27944752, "link": "https://stackoverflow.com/questions/27944752/link-does-not-transform-to-post-request/27946738#27946738", "title": "Link does not transform to post request", "body": "<p>Your <code>favorites_controller.rb</code> is empty. You need to define your <code>create</code> and <code>destroy</code> actions.</p>\n\n<p>For the create action, grab your post and create a favorite using your <code>user</code> object.</p>\n\n<p><code>favorite = current_user.favorites.build(post: @post)</code></p>\n\n<p>Check and save it.</p>\n\n<p>Your destroy action could be something like:</p>\n\n<p><code>favorite = current_user.favorites.find(params[:id])</code></p>\n\n<p>where <code>:id</code> is the ID of a <code>favorite</code> object.</p>\n"}], "owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1421264107, "creation_date": 1421244126, "question_id": 27944752, "link": "https://stackoverflow.com/questions/27944752/link-does-not-transform-to-post-request", "title": "Link does not transform to post request", "body": "<p>I have a problem with my code which could be found here: <a href=\"https://github.com/marcvanderpeet12/bloccitfinal\" rel=\"nofollow\">https://github.com/marcvanderpeet12/bloccitfinal</a></p>\n\n<p>On app/views/_favorite.html.erb I included the following link: &lt;%= link_to [post, Favorite.new], method: :post do %></p>\n\n<p>the method: :post should make it a post but if I run the relevant page (<a href=\"http://localhost:3000/posts/48/\" rel=\"nofollow\">http://localhost:3000/posts/48/</a>)  and try to click the favorites button i still get this error</p>\n\n<p>No route matches [GET] \"/posts/48/favorites\"</p>\n\n<p>Thought im pretty sure my route are set up right Any thoughts what might go wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selector"], "comments": [{"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1421243727, "post_id": 27944548, "comment_id": 44284432, "body": "I update the main question with the page"}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421244405, "post_id": 27944724, "comment_id": 44284839, "body": "Thanks for your answer, I try different combination with have_title but nothing works.. What is the correct fonction and how to use it ? Thanks in advance"}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421249354, "post_id": 27944724, "comment_id": 44288023, "body": "I have not used Rspec in a bit (moved to Minitest late last year) but I believe <code>expect(page).to have_title(&#39;YOUR TEXT&#39;)</code> should work."}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421272451, "post_id": 27944724, "comment_id": 44301359, "body": "Bummer. When I run a spec I have that checks the page title (with the code snippet shown), it works. Note: have_title matches the entire title ... not just part of it. So, you would need to have <code>expect(page).to have_title(&quot;Simple App du Tutoriel Ruby on Rails | Accueil&quot;)</code>"}, {"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421272954, "post_id": 27944724, "comment_id": 44301618, "body": "Here is the error now... :  Failure/Error: expect(page).to have_title(&quot;Simple App du Tutoriel Ruby on Rails | Accueil&quot;)      NameError:        undefined local variable or method `page&#39; for #&lt;RSpec::ExampleGroups::PagesController::GETHome:0x00000006a&zwnj;&#8203;f3bf0&gt;"}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421273922, "post_id": 27944724, "comment_id": 44302036, "body": "My apologies ... I just now saw a comment in the OP where you&#39;re running this from a controller spec. I run tests like these from feature (i.e., integration) specs."}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1421273979, "post_id": 27944724, "comment_id": 44302071, "body": "Ensure that you add <code>require &#39;capybara&#47;rspec&#39;</code> to your rails_helper.rb file or your spec_helper.rb file so that you have access to the Capybara matchers."}, {"owner": {"reputation": 2830, "user_id": 162038, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e7c06cf1f9719dd0bdc640ebcf8727a3?s=128&d=identicon&r=PG", "display_name": "Jalil", "link": "https://stackoverflow.com/users/162038/jalil"}, "edited": false, "score": 0, "creation_date": 1425107454, "post_id": 27944724, "comment_id": 45835686, "body": "Anything new on this ?  I&#39;m having the same problem ... A simple       expect(page).to have_content &quot;success&quot;  gives me a  NameError: undefined local variable or method <code>page&#39; for #&lt;RSpec::ExampleGroups::PagesController::GETMentions:0x00000&zwnj;&#8203;006ffdc18&gt; .&#47;spec&#47;controllers&#47;pages_controller_spec.rb:15:in </code>block (3 levels) in &lt;top (required)&gt;&#39;"}], "tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1421249956, "last_edit_date": 1421249956, "creation_date": 1421244038, "answer_id": 27944724, "question_id": 27944548, "link": "https://stackoverflow.com/questions/27944548/ruby-on-rails-selector-title/27944724#27944724", "title": "Ruby on Rails selector title", "body": "<p>My sense is you will be better served using Capybara's <code>has_title</code> or <code>have_title</code> methods. It seems more semantically meaningful to use <code>xxx_title</code> anyway since that's what your looking for. </p>\n\n<p><code>expect(page).to have_title('Some Content')</code></p>\n"}], "owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421249956, "creation_date": 1421243549, "question_id": 27944548, "link": "https://stackoverflow.com/questions/27944548/ruby-on-rails-selector-title", "title": "Ruby on Rails selector title", "body": "<p>I follow the tutorial on railstutorials.org but it's a little bit older and I have a problem with the \"have_selector\"</p>\n\n<p>I have to use this command : </p>\n\n<pre><code>it \"doit avoir le bon titre\" do\n        get :home\n        expect(response).to have_selector('title', \n                                           :text =&gt; \" | Acceuil\")\n    end\n</code></pre>\n\n<p>But I have this error when I launch rspec spec/ :</p>\n\n<pre><code>1) PagesController GET home doit avoir le bon titre\n     Failure/Error: expect(response).to have_selector('title',\n       expected to find css \"title\" with text \" | Acceuil\" but there were no matches\n     # ./spec/controllers/pages_controller_spec.rb:13:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Here is the home.html.erb : </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Simple App du Tutoriel Ruby on Rails | Accueil&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Simple App&lt;/h1&gt;\n    &lt;p&gt;\n      Ceci est la page d'accueil de l'Application Exemple du\n      &lt;a href=\"http://railstutorial.org/\"&gt;Ruby on Rails Tutorial&lt;/a&gt;.\n    &lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Here is my gemfile : </p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.0'\nruby '2.2.0'\n# Gem utile pour le sample d'exemple\ngem 'gravatar_image_tag', '1.2.0'\ngem 'will_paginate', '3.0.7'\ngem 'rails_12factor'\n\ngroup :development do\n  gem 'rspec-rails', '3.1.0'\n  gem 'annotate', '2.6.5'\n  gem 'faker', '1.4.3'\nend\n\ngroup :test do\n  gem 'rspec', '3.1.0'\n  gem 'capybara'\n  gem 'webrat', '0.7.3'\n  gem 'spork', '0.9.2'\n  gem 'factory_girl_rails', '4.5.0'\nend\n\ngroup :production, :staging do\n  gem \"pg\"\nend\n\ngroup :development, :test do\n  gem \"sqlite3\"\nend\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n\n<p>Thanks a lot in advance :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "search"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1421245424, "post_id": 27944226, "comment_id": 44285474, "body": "Maybe this could help: <a href=\"http://stackoverflow.com/questions/16602028/request-uri-too-large-in-rails\" title=\"request uri too large in rails\">stackoverflow.com/questions/16602028/&hellip;</a>"}, {"owner": {"reputation": 45, "user_id": 4252379, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-3Do4t8zlL0M/AAAAAAAAAAI/AAAAAAAAAB0/pTXWMhmh5XQ/photo.jpg?sz=128", "display_name": "ingzane", "link": "https://stackoverflow.com/users/4252379/ingzane"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1421247692, "post_id": 27944226, "comment_id": 44286935, "body": "Tks Yev.. seams to be the solution."}], "answers": [{"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": true, "score": 1, "last_activity_date": 1421246952, "creation_date": 1421246952, "answer_id": 27945658, "question_id": 27944226, "link": "https://stackoverflow.com/questions/27944226/error-requesturitoolarge-searching-ruby/27945658#27945658", "title": "Error RequestURITooLarge searching ruby", "body": "<p><strong>MAX_URI_LENGTH is set to only 2083 characters for webrick server. On accessing url of length more than this limit throws WEBrick::HTTPStatus::RequestURITooLarge exception.</strong></p>\n\n<p>Try to switch to different server :</p>\n\n<pre><code>#Gemfile\ngem 'thin'\n\n$bundle install \n$ rails s\n\n=&gt; Booting Thin\n=&gt; Rails 4.2.0 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\nThin web server (v1.6.3 codename Protein Powder)\nMaximum connections set to 1024\nListening on localhost:3000, CTRL+C to stop\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4252379, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-3Do4t8zlL0M/AAAAAAAAAAI/AAAAAAAAAB0/pTXWMhmh5XQ/photo.jpg?sz=128", "display_name": "ingzane", "link": "https://stackoverflow.com/users/4252379/ingzane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 27945658, "answer_count": 1, "score": 0, "last_activity_date": 1421246952, "creation_date": 1421242482, "question_id": 27944226, "link": "https://stackoverflow.com/questions/27944226/error-requesturitoolarge-searching-ruby", "title": "Error RequestURITooLarge searching ruby", "body": "<p>Here the thing: I have multiples search fields in my form. But i got the error RequestURITooLarge when I tried to do a multiples searches...I'm wondering if it is exist a method to avoid this problem. Every time you fill the text box or date field increment the url and got the error. I also tried a reset button but just clean the text fields. Here the code for you to understand the method I use and perhaps will help you in some way. Tks!! </p>\n\n<p>View_item  </p>\n\n<pre><code>def self.search(s_codigo, s_den_cont, s_marca)\nwhere(\"codigo ilike :s_c and den_cont ilike :s_d and marca ilike :s_m\", s_c: \"%#{s_codigo}%\", s_d: \"%#{s_den_cont}%\", s_m: \"%#{s_marca}%\")\nend\n\n#Search section #2  \n\ndef self.search_fec_min(s_codigo, s_den_cont, s_marca, s_fec_min)\nwhere(\"codigo ilike :s_c and den_cont ilike :s_d and marca ilike :s_m and date_expired &gt;= :s_fmin\", s_c: \"%#{s_codigo}%\", s_d: \"%#{s_den_cont}%\", s_m: \"%#{s_marca}%\", s_fmin: \"#{s_fec_min}\")\nend  \n</code></pre>\n\n<p>index  </p>\n\n<pre><code>&lt;%= text_field_tag :s_codigo, params[:s_codigo], placeholder: \"Search for cod\" %&gt;\n&lt;%= text_field_tag :s_den_cont, params[:s_den_cont], placeholder: \"Search for Denominaci\u00f3n\" %&gt;\n&lt;%= text_field_tag :s_marca, params[:s_marca], placeholder: \"Search brand\" %&gt;\n&lt;%= date_select :s_fec_min, params[:s_fec_min], placeholder: \"Search for date\", :include_blank =&gt; true %&gt;  \n</code></pre>\n\n<p>Controller  </p>\n\n<pre><code>if self.is_date(params[:s_fec_min])\n@items = View_item.all.order(\"date_expired ASC\").page(params[:page]).per(15).search_fec_min(params[:s_codigo], params[:s_den_cont], params[:s_marca], params[:s_fec_min])     \n  elsif (params[:s_codigo] != \"\" or params[:s_den_cont] != \"\" or params[:s_marca] != \"\")\n@items = View_item.all.order(\"date_expired ASC\").page(params[:page]).per(15).search(params[:s_codigo], params[:s_den_cont], params[:s_marca])\n  else\n@items = View_item.all.order(\"date_expired ASC\").page(params[:page]).per(15)\nend  \n</code></pre>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 3332, "user_id": 1900290, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6faa40dca462409201ce09fd4f40b4d4?s=128&d=identicon&r=PG", "display_name": "Rpj", "link": "https://stackoverflow.com/users/1900290/rpj"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1421409940, "post_id": 27944050, "comment_id": 44358305, "body": "I don&#39;t want to parse, I would like to find out before parsing. How should I do that?"}], "answers": [{"comments": [{"owner": {"reputation": 3332, "user_id": 1900290, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6faa40dca462409201ce09fd4f40b4d4?s=128&d=identicon&r=PG", "display_name": "Rpj", "link": "https://stackoverflow.com/users/1900290/rpj"}, "edited": false, "score": 0, "creation_date": 1421409919, "post_id": 27944471, "comment_id": 44358296, "body": "I don&#39;t want to parse, I would like to find out before parsing. How should I do that?"}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "reply_to_user": {"reputation": 3332, "user_id": 1900290, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6faa40dca462409201ce09fd4f40b4d4?s=128&d=identicon&r=PG", "display_name": "Rpj", "link": "https://stackoverflow.com/users/1900290/rpj"}, "edited": false, "score": 0, "creation_date": 1421411137, "post_id": 27944471, "comment_id": 44358970, "body": "@Rpj I added a method to check if <code>string</code> is a valid json. I don&#39;t think there is any other way to be absolutely sure, other than trying to successfully parse it."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": true, "score": 37, "last_activity_date": 1543470178, "last_edit_date": 1543470178, "creation_date": 1421243298, "answer_id": 27944471, "question_id": 27944050, "link": "https://stackoverflow.com/questions/27944050/how-to-handle-json-parser-errors-in-ruby/27944471#27944471", "title": "How to handle JSON parser errors in ruby", "body": "<p>As @Anthony pointed out, use begin/rescue.</p>\n\n<pre><code>begin\n  ...\n  JSON.parse(response.body)\nrescue JSON::ParserError\n  # Handle error\nend\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>To check if a string is a valid json, you can create a method:</p>\n\n<pre><code>def valid_json?(string)\n  !!JSON.parse(string)\nrescue JSON::ParserError\n  false\nend\n\nvalid_json?(\"abc\") #=&gt; false\nvalid_json?(\"{}\") #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 3332, "user_id": 1900290, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6faa40dca462409201ce09fd4f40b4d4?s=128&d=identicon&r=PG", "display_name": "Rpj", "link": "https://stackoverflow.com/users/1900290/rpj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16826, "favorite_count": 1, "accepted_answer_id": 27944471, "answer_count": 1, "score": 16, "last_activity_date": 1543470178, "creation_date": 1421241949, "question_id": 27944050, "link": "https://stackoverflow.com/questions/27944050/how-to-handle-json-parser-errors-in-ruby", "title": "How to handle JSON parser errors in ruby", "body": "<p>How do I avoid parsing JSON if the response body will not be in JSON, else it throws a huge exception which I would like to handle</p>\n\n<pre><code>      def execute_method(foo)\n...\n\n        response = self.class.get(\"/foo.php\", query: query)\n        JSON.parse(response.body)\n      end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "partial"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 2, "creation_date": 1421242018, "post_id": 27944010, "comment_id": 44283364, "body": "Expected by the app or by you?  Can you post your routes please."}, {"owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "edited": false, "score": 0, "creation_date": 1421242042, "post_id": 27944010, "comment_id": 44283389, "body": "Is profiles index page inside module or namespace in your Rails app?"}], "answers": [{"tags": [], "owner": {"reputation": 1135, "user_id": 182474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f1b4c99243b0e9b58cd0b1558bd72aa5?s=128&d=identicon&r=PG", "display_name": "Gabor Garami", "link": "https://stackoverflow.com/users/182474/gabor-garami"}, "is_accepted": false, "score": 0, "last_activity_date": 1421245035, "creation_date": 1421245035, "answer_id": 27945049, "question_id": 27944010, "link": "https://stackoverflow.com/questions/27944010/using-path-helper-in-partials-generate-wrong-path-in-rails-3/27945049#27945049", "title": "Using path helper in partials generate wrong path in rails 3", "body": "<p>It is depends on what you means under \"app name\". If the app is mounted under /test with Passenger Apache/Nginx module, then Rails app will honor the server-side prefix, and will generate correct URLs automatically, only the development environment will generate urls in the root scope.</p>\n\n<p>If your app is runs standalone or via proxy setup (typical setup if the frontend webserver is an Nginx server), and you want to run it under a prefixed path then you have to use the <code>scope</code> method like this:</p>\n\n<p><code>\nRails.application.routes do\n  scope(:path =&gt; '/test') do\n    # the rest of your routes go here\n  end\nend\n</code></p>\n\n<p>See detailed info in the <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-scope\" rel=\"nofollow\">documentation</a>.</p>\n"}], "owner": {"reputation": 370, "user_id": 1980483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2744b8f2b1b869bc9ab8a62adc4?s=128&d=identicon&r=PG", "display_name": "Nikita Singh", "link": "https://stackoverflow.com/users/1980483/nikita-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421245035, "creation_date": 1421241830, "last_edit_date": 1421244444, "question_id": 27944010, "link": "https://stackoverflow.com/questions/27944010/using-path-helper-in-partials-generate-wrong-path-in-rails-3", "title": "Using path helper in partials generate wrong path in rails 3", "body": "<p>I have my application \"<a href=\"http://www.example.com/test\" rel=\"nofollow\">http://www.example.com/test</a>\".\nWhen I hit the url I get the index page, where I show list of profiles. </p>\n\n<p>To show each profile in the lists, I have used a partial. \nEach of the profiles have link to their own show page.</p>\n\n<p>To provide the link addreess I have used Rals path helper like this </p>\n\n<pre><code> profile_path(:id =&gt; whatever_id)\n</code></pre>\n\n<p>The issue is the generated url is like this:-</p>\n\n<pre><code> /profile/whatever_id\n</code></pre>\n\n<p>It completely skips the app name which is \"test\". The expected url by me is</p>\n\n<pre><code> /test/profile/whatever_id\n</code></pre>\n\n<p>Can any one tell what can be the possible cause of this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "date"], "answers": [{"tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 1, "last_activity_date": 1421242383, "creation_date": 1421242383, "answer_id": 27944194, "question_id": 27943700, "link": "https://stackoverflow.com/questions/27943700/best-date-validation-in-rails-4/27944194#27944194", "title": "Best date validation in Rails 4?", "body": "<p>Just use gem '<a href=\"https://github.com/adzap/validates_timeliness\" rel=\"nofollow\">validates_timeliness</a>'</p>\n\n<p>In your case, using this gem</p>\n\n<pre><code>validates_date :birthday, on_or_after: lambda { 125.years.ago }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 4, "last_activity_date": 1421247274, "creation_date": 1421247274, "answer_id": 27945768, "question_id": 27943700, "link": "https://stackoverflow.com/questions/27943700/best-date-validation-in-rails-4/27945768#27945768", "title": "Best date validation in Rails 4?", "body": "<p><strong>For this simple validation, I think following ruby code is enough!</strong><br>\nPlease check : </p>\n\n<pre><code>validate :is_valid_dob?\n\n  private\n  def is_valid_dob?\n    if((birthday.is_a?(Date) rescue ArgumentError) == ArgumentError)\n      errors.add(:birthday, 'Sorry, Invalid Date of Birth Entered.')\n    end\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 1584674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4086e533a1b799ab04873b5d32ec4b1a?s=128&d=identicon&r=PG", "display_name": "Victor Ch.", "link": "https://stackoverflow.com/users/1584674/victor-ch"}, "is_accepted": false, "score": 1, "last_activity_date": 1448239782, "creation_date": 1448239782, "answer_id": 33862161, "question_id": 27943700, "link": "https://stackoverflow.com/questions/27943700/best-date-validation-in-rails-4/33862161#33862161", "title": "Best date validation in Rails 4?", "body": "<p>You can easily use validates_each method\nJust put there 2 validations:</p>\n\n<p>1) For birthday in the past</p>\n\n<pre><code>    validates_each :birthday do |record, attr, value|\n      record.errors.add(attr, 'must be in the past') if value &gt;= Time.now.to_date\n    end\n</code></pre>\n\n<p>2) For birthday not more than 150 years ago</p>\n\n<pre><code>    validates_each :birthday do |record, attr, value|\n      record.errors.add(attr, 'must be less than 150 years in the past') \n                               if value &lt;= (Time.now.to_date - 125.years) \n    end\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 1887925, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UI3jX.jpg?s=128&g=1", "display_name": "avjaarsveld", "link": "https://stackoverflow.com/users/1887925/avjaarsveld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8304, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1448239782, "creation_date": 1421240819, "last_edit_date": 1421241361, "question_id": 27943700, "link": "https://stackoverflow.com/questions/27943700/best-date-validation-in-rails-4", "title": "Best date validation in Rails 4?", "body": "<p>What is the best way to validate a date in Ruby on Rails? I need to make sure the \"birthday\" is a date, is less than 125 years ago and is not in the future (today is ok).</p>\n\n<p>I have tried three methods:</p>\n\n<p>1) date_validator gem</p>\n\n<p>I used the following code (after installing the gem):</p>\n\n<pre><code>validates :birthday, \ndate: {\n  after: Proc.new {Time.now - 125.years}, message: :after,\n  before: Proc.new {Time.now}, message: :cannot_be_in_the_future\n  }\n</code></pre>\n\n<p>This worked <strong>except</strong> that I could set the date to the number 12 and pass validation.</p>\n\n<p>2) Checking if the date is in a range of dates, in a custom validation method, like so:</p>\n\n<pre><code>from = 125.years.ago.to_date\nto = Time.now.to_date\nunless (from..to).include? birthday\n  errors.add(:birthday, :custom_error_msg)\nend\n</code></pre>\n\n<p>This worked well and passed all my tests, <strong>but</strong> the drawback is that you only get one error message. I would have liked separate error messages for the case when the date is in the future, when it is too long ago and when the input is not a date.</p>\n\n<p>3) Multiple checks in a custom validation method, like so:</p>\n\n<pre><code>begin\n  birthday.to_date\nrescue\n  errors.add(:birthday, \"must be a date\")\nelse\n  if birthday &gt; Time.now\n    errors.add(:birtday, \"cannot be in the future\")\n  elsif birthday &lt; Time.now - 125.years\n    errors.add(:birthday, \"cannot be over 125 years ago\")\n  end\nend\n</code></pre>\n\n<p>This also passes all my test, and I get different messages as explained above.</p>\n\n<p>So I am wondering, is this the best method? Can it be improved at all (except that the error message text needs work)?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "command-line", "argv"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2058845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/149ed953958d2e4e56d60713e3c316d6?s=128&d=identicon&r=PG", "display_name": "Dominik Spisak", "link": "https://stackoverflow.com/users/2058845/dominik-spisak"}, "edited": false, "score": 0, "creation_date": 1421239914, "post_id": 27943263, "comment_id": 44282122, "body": "The whole application now works. I wanted to keep it tidy in command line and now I can do it. Thank you very much."}], "tags": [], "owner": {"reputation": 6299, "user_id": 809416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab5b2b16f550a99caf79758ea938147f?s=128&d=identicon&r=PG", "display_name": "ayckoster", "link": "https://stackoverflow.com/users/809416/ayckoster"}, "is_accepted": true, "score": 1, "last_activity_date": 1421239475, "creation_date": 1421239475, "answer_id": 27943263, "question_id": 27942962, "link": "https://stackoverflow.com/questions/27942962/command-line-and-argument-processing/27943263#27943263", "title": "Command line and argument processing", "body": "<p>Yes, just define your class and then call it with the arguments like this:</p>\n\n<pre><code>class MyClass\n\n  def print_me(string)\n    p string\n  end\n\nend\n\nMyClass.new.print_me(ARGV[0])\n</code></pre>\n\n<p>You can put the last line in a different file that requires your class definition. But this just changes how you manage your code.</p>\n"}], "owner": {"reputation": 93, "user_id": 2058845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/149ed953958d2e4e56d60713e3c316d6?s=128&d=identicon&r=PG", "display_name": "Dominik Spisak", "link": "https://stackoverflow.com/users/2058845/dominik-spisak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 27943263, "answer_count": 1, "score": 2, "last_activity_date": 1421239475, "creation_date": 1421238475, "question_id": 27942962, "link": "https://stackoverflow.com/questions/27942962/command-line-and-argument-processing", "title": "Command line and argument processing", "body": "<p>Good morning...evening. </p>\n\n<p>The problem is about calling method with given argument straightaway after typing in command line:</p>\n\n<pre><code>$ ruby my_class.rb someString\n</code></pre>\n\n<p>I have got a file my_class.rb with code:</p>\n\n<pre><code>class MyClass\n\n  p ARGV\n\nend\n</code></pre>\n\n<p>and that works, but I would like to use a method to print that input:</p>\n\n<pre><code>class MyClass\n\n  def print_me(string)\n    p string\n  end\n\nend\n</code></pre>\n\n<p>Is it even possible to do it without specifying class and method in command line and keep it that way?</p>\n\n<pre><code>$ ruby my_class.rb someString\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database", "postgresql"], "comments": [{"owner": {"reputation": 1392, "user_id": 325028, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/caa31faa9e88940a27c37ee758a291b3?s=128&d=identicon&r=PG", "display_name": "Robin Fisher", "link": "https://stackoverflow.com/users/325028/robin-fisher"}, "edited": false, "score": 0, "creation_date": 1421241785, "post_id": 27942911, "comment_id": 44283205, "body": "When you say &quot;own external database&quot;, do you mean one controlled by the user on a separate server to the application or do you intend to create a database for the user on your own server?"}, {"owner": {"reputation": 1036, "user_id": 2692173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ff748bb6d3ea07a823b46e8d48fe2842?s=128&d=identicon&r=PG&f=1", "display_name": "neo-code", "link": "https://stackoverflow.com/users/2692173/neo-code"}, "reply_to_user": {"reputation": 1392, "user_id": 325028, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/caa31faa9e88940a27c37ee758a291b3?s=128&d=identicon&r=PG", "display_name": "Robin Fisher", "link": "https://stackoverflow.com/users/325028/robin-fisher"}, "edited": false, "score": 0, "creation_date": 1421241971, "post_id": 27942911, "comment_id": 44283330, "body": "I mean to say database created at users own server on a separate server."}, {"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1421243925, "post_id": 27942911, "comment_id": 44284538, "body": "With multiple users?  So the application could end up connecting to many different databases?"}, {"owner": {"reputation": 1036, "user_id": 2692173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ff748bb6d3ea07a823b46e8d48fe2842?s=128&d=identicon&r=PG&f=1", "display_name": "neo-code", "link": "https://stackoverflow.com/users/2692173/neo-code"}, "edited": false, "score": 0, "creation_date": 1421244109, "post_id": 27942911, "comment_id": 44284649, "body": "Yes for multiple users."}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 2238268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5gOiU.jpg?s=128&g=1", "display_name": "Andrew Hacking", "link": "https://stackoverflow.com/users/2238268/andrew-hacking"}, "is_accepted": false, "score": 0, "last_activity_date": 1421244368, "creation_date": 1421244368, "answer_id": 27944845, "question_id": 27942911, "link": "https://stackoverflow.com/questions/27942911/rails-connect-application-with-users-own-external-data-base/27944845#27944845", "title": "Rails connect application with users own external data base", "body": "<p>Yes you can do this, though I would steer clear of ORMs like ActiveRecord which mandate their own conventions and provide limited SQL features.</p>\n\n<p>Since it sounds like you want to connect to arbitrary databases you can't use regular models anyway. </p>\n\n<p>The best known data access layer and DB utility knife for ruby,  and one which I use in my ruby projects is Sequel.</p>\n\n<p>Sequel provides full capability to express complex queries and works with quite a number of DBs.</p>\n\n<p>Above all read the documentation and determine for yourself if it meets your specific requirements.</p>\n"}], "owner": {"reputation": 1036, "user_id": 2692173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ff748bb6d3ea07a823b46e8d48fe2842?s=128&d=identicon&r=PG&f=1", "display_name": "neo-code", "link": "https://stackoverflow.com/users/2692173/neo-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421244368, "creation_date": 1421238306, "question_id": 27942911, "link": "https://stackoverflow.com/questions/27942911/rails-connect-application-with-users-own-external-data-base", "title": "Rails connect application with users own external data base", "body": "<p>I am working in the application where i am using PostgreSQL as database .I want to to provide choice to user either use application internal database or user can connect with his own external database in the application.</p>\n\n<p>If user choose application internal database all the user's related stuff will be get saved in the application's internal database and if user connects with his own database then application have to use users database for this user.</p>\n\n<p>How this can be achieved in rails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "logging", "error-handling"], "answers": [{"comments": [{"owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "edited": false, "score": 0, "creation_date": 1421237687, "post_id": 27942703, "comment_id": 44280910, "body": "I also thought of filtering the lines via regex. But does it not have a high performance cost?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "edited": false, "score": 0, "creation_date": 1421237808, "post_id": 27942703, "comment_id": 44280971, "body": "Errors are not supposed to happen under regular use. Ideally, and usually, they only occur during development, or just a once in a while during production use. Therefore, performance of error manipulation is usually not a problem. Furthermore, a backtrace usually does not exceed a few hundred lines. Regex matching with such lines will not be a major performance loss."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1421237984, "last_edit_date": 1421237984, "creation_date": 1421237554, "answer_id": 27942703, "question_id": 27942447, "link": "https://stackoverflow.com/questions/27942447/rails-error-handling-logging-simplified-backtrace/27942703#27942703", "title": "Rails error handling/logging: Simplified backtrace", "body": "<p>Reject or select certain lines by pattern match with the files/directories you want to extract or ignore. For example, if you want to ignore the steps in <code>/gems/</code>, then:</p>\n\n<pre><code>exception.backtrace.reject{|l| l =~ %r|\\A[^:]*/gems/|}\n</code></pre>\n\n<p>If you want only the steps from <code>/app/</code> directory, then:</p>\n\n<pre><code>exception.backtrace.select{|l| l =~ %r|\\A[^:]*/app/|}\n</code></pre>\n\n<p>Actually, you should be using <code>backtrace_locations</code> instead of <code>backtrace</code>, which gives direct access to paths without using regexes, but for the time being, <code>backtrace_locations</code> is full of bugs, and it is not practical to use it.</p>\n"}], "owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 27942703, "answer_count": 1, "score": 0, "last_activity_date": 1421237984, "creation_date": 1421236764, "question_id": 27942447, "link": "https://stackoverflow.com/questions/27942447/rails-error-handling-logging-simplified-backtrace", "title": "Rails error handling/logging: Simplified backtrace", "body": "<p>I am working on an <strong>error logging</strong> system for my Rails app, to pick up on any hidden bugs.</p>\n\n<p>So far, I've implemented this with a <code>rescue_from</code> on my ApplicationController: (note that I'm in the experimental phase so I'm only outputting the results to the console)</p>\n\n<pre><code>   rescue_from Exception, with: :log_exception\n\n   private\n    def log_exception exception\n      puts(\"Exception at #{Time.now.strftime('%d %b %Y, %H:%M')}\")\n      puts exception\n      puts exception.backtrace.join \"\\n\"\n      raise exception\n    end\n</code></pre>\n\n<p>The issue I'm having is with <code>exception.backtrace</code>. It outputs a whole bunch of useless deep trace that looks like this</p>\n\n<pre><code>/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activemodel-3.2.13/lib/active_model/attribute_methods.rb:407:in `method_missing'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activerecord-3.2.13/lib/active_record/attribute_methods.rb:149:in `method_missing'\n/Users/marcoprins/Desktop/Project/tillyoudrop/app/models/order.rb:105:in `cancel!'\n/Users/marcoprins/Desktop/Project/tillyoudrop/app/controllers/admin/orders_controller.rb:97:in `cancel'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:167:in `process_action'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:10:in `process_action'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:18:in `block in process_action'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:436:in `_run__4209411771832668003__process_action__2626133284113442857__callbacks'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'\n/Users/marcoprins/.rvm/gems/ruby-2.0.0-p451/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'\n</code></pre>\n\n<p>and it goes on for miles and miles.</p>\n\n<p>I want my error log file to look clean and readable, so all I want is essentialy the 3rd and 4th line of this example, or rather, the exact lines that Rails outputs in the error page, (see picture) the part that tells me exactly <strong>where in my code</strong> the error has originated from.</p>\n\n<p><img src=\"https://i.stack.imgur.com/2uAai.png\" alt=\"Rails error page\"></p>\n\n<p>How do I access these lines? Is there an attribute on the <code>exception</code> object that contains it?</p>\n"}, {"tags": ["ruby", "conditional"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 4, "creation_date": 1421235099, "post_id": 27941513, "comment_id": 44279489, "body": "Blame RubyMine. It is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421235637, "post_id": 27941738, "comment_id": 44279805, "body": "Your use of <code>case</code> statement is right, but I see your code inconsistent. If you have <code>false</code> and <code>true</code>, then why not have <code>nil</code> instead of <code>NilClass</code>? Or to put it the other way, if you are using <code>NilClass</code>, then why aren&#39;t you using <code>TrueClass</code> and <code>FalseClass</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421236771, "post_id": 27941738, "comment_id": 44280390, "body": "@sawa You are right; I wanted to show different approaches but as a result I simply messed the things up. Updated."}, {"owner": {"reputation": 23558, "user_id": 999355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZCbkS.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/999355/paul"}, "edited": false, "score": 0, "creation_date": 1421247180, "post_id": 27941738, "comment_id": 44286577, "body": "Your idea with <code>case</code> works when all the possible variable values are consumed in one place. My case is different: each single state is being checked in many places of the app and different states are checked in different places."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1421251069, "last_edit_date": 1421251069, "creation_date": 1421234554, "answer_id": 27941738, "question_id": 27941513, "link": "https://stackoverflow.com/questions/27941513/conditioning-tri-state-logic/27941738#27941738", "title": "Conditioning tri-state logic", "body": "<p><strong>TLDNR;</strong> </p>\n\n<pre><code>if FalseClass === asap\n  puts 'False'\nend\n</code></pre>\n\n<hr>\n\n<p>Tri-state usually suggests that there are three possible branches, which forces me to think that neither <code>if</code> nor ternary <code>?</code> is generally applicable.</p>\n\n<pre><code>puts case asap\n     when FalseClass then 'False' \n     when TrueClass then 'True' \n     when NilClass then 'Nil' \n     else 'You are kidding on me, aren\u2019t you?'\n     end\n</code></pre>\n\n<p>Hope it helps.</p>\n\n<p><strong>UPD:</strong> The more I think about it, the more I am inclined to think that ternary is fine as well:</p>\n\n<pre><code>puts asap.nil? ? 'Nil' : asap ? 'True' : 'False'\n</code></pre>\n\n<p><strong>UPD2:</strong> Actually, the tri-equal comparision operator, which is transparently used in <code>case</code> and which apparently evaluates to <code>true</code> for <code>false === false</code> and <code>true === true</code> might satisfy IDEA aka RubyMine as well:</p>\n\n<pre><code>if asap === false\n  puts 'False'\nend\n</code></pre>\n\n<p><strong>UPD3</strong>: As @sawa mentioned in the comment, IDEA is wrong here since <code>nil == false</code> evaluates to <code>false</code> and therefore <code>== false</code> is not generally equal to <code>unless</code>.</p>\n"}], "owner": {"reputation": 23558, "user_id": 999355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZCbkS.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/999355/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 27941738, "answer_count": 1, "score": 1, "last_activity_date": 1448213712, "creation_date": 1421233810, "last_edit_date": 1448213712, "question_id": 27941513, "link": "https://stackoverflow.com/questions/27941513/conditioning-tri-state-logic", "title": "Conditioning tri-state logic", "body": "<p>I have a variable that takes a value out of tri-state booleans:</p>\n\n<pre><code>asap = true\nasap = false\nasap = nil\n</code></pre>\n\n<p>Ruby's conditionals interpret them as truthy or falsey. Especially, <code>nil</code> is not distinguished from <code>false</code>.</p>\n\n<pre><code>asap = nil\nunless asap\n  puts 'False'\nend\n# =&gt; 'False'\n</code></pre>\n\n<p>A statement that distinguishes <code>false</code> from <code>nil</code> is:</p>\n\n<pre><code>if asap == false\n  puts 'False'\nend\n</code></pre>\n\n<p>but RubyMine 6.3.3 complains that the expression could be simplified, and suggests <code>unless asap</code>. Is there  a different (right) way to do the conditioning?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "point"], "comments": [{"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1522969922, "post_id": 27941458, "comment_id": 86377376, "body": "Do you have an answer to that?"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1522969888, "post_id": 27944351, "comment_id": 86377369, "body": "Can you be more specific?"}], "tags": [], "owner": {"reputation": 63, "user_id": 4018322, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260367744/picture?type=large", "display_name": "Stephen Mark Edwards Jr.", "link": "https://stackoverflow.com/users/4018322/stephen-mark-edwards-jr"}, "is_accepted": false, "score": 1, "last_activity_date": 1421242877, "creation_date": 1421242877, "answer_id": 27944351, "question_id": 27941458, "link": "https://stackoverflow.com/questions/27941458/use-mysql-function-for-activerecord-setter-getter-methods/27944351#27944351", "title": "use mysql function for ActiveRecord setter/getter methods", "body": "<p>For other users having similar problems I have found a solution. </p>\n\n<ul>\n<li>install gem activerecord-mysql2spatial-adapter</li>\n<li><p>factory = RGeo::Cartesian.factory</p>\n\n<p>model.Coordinates = factory.point(longitude, latitude)</p></li>\n</ul>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 63, "user_id": 4018322, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260367744/picture?type=large", "display_name": "Stephen Mark Edwards Jr.", "link": "https://stackoverflow.com/users/4018322/stephen-mark-edwards-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1421256934, "creation_date": 1421233649, "last_edit_date": 1421256934, "question_id": 27941458, "link": "https://stackoverflow.com/questions/27941458/use-mysql-function-for-activerecord-setter-getter-methods", "title": "use mysql function for ActiveRecord setter/getter methods", "body": "<p>I have a project using: Ruby on Rails and MySQL.</p>\n\n<p>I have a table with a GEOMETRY field Coordinates with the data type <code>Point</code>. I would like to set the value of this field with <code>WKT \"POINT(40 100)\"</code> but when ActiveRecord saves the field it should set the value to <code>GeomFromText(WKT)</code> and when reading from the column it should read <code>AsText(GEOMETRY)</code>.</p>\n\n<p>Is it possible to configure \"SQL-modifiers\" for the set and get methods of this field?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "owner": {"reputation": 83, "user_id": 3631056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ded584a8bf29280b7dd072fb78708bdb?s=128&d=identicon&r=PG&f=1", "display_name": "yangbin990", "link": "https://stackoverflow.com/users/3631056/yangbin990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421234149, "creation_date": 1421232684, "last_edit_date": 1421233127, "question_id": 27941160, "link": "https://stackoverflow.com/questions/27941160/ruby-on-rail-documentroot-home-rubys-work-depot-public-only-list-files", "title": "Ruby on Rail: &quot;DocumentRoot /home/rubys/work/depot/public/&quot; only list files", "body": "<p>I am very new to ROR and currently following book \"Agile Web Development with Rails v4\".</p>\n\n<p>According Iteration K1: Deploying with Phusion Passenger and MySQL (at page 233), I tried config the server using config below</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerName depot.yourhost.com\n    DocumentRoot /home/rubys/work/depot/public/\n    &lt;Directory /home/rubys/work/depot/public&gt;\n        AllowOverride all\n        Options -MultiViews\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Now I can see the server but it only shows the list of files in public folder (like below). And my public folder has no any default html file.</p>\n\n<pre><code>Index of\n   Name Last modified   Size    Description\n   404.html 2015-01-02 22:52    1.3K     \n   422.html 2015-01-02 22:52    1.3K     \n   500.html 2015-01-02 22:52    1.2K     \n   favicon.ico  2015-01-02 22:52    0    \n   robots.txt   2015-01-02 22:52    202\nApache/2.4.7 (Ubuntu) Server at 192.168.0.195 Port 80\n</code></pre>\n\n<p>Can you please give me some direction what I did wrong.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "class", "methods", "module"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1421230167, "creation_date": 1421230167, "answer_id": 27940358, "question_id": 27940232, "link": "https://stackoverflow.com/questions/27940232/can-i-call-instance-method-directly-like-in-included-module/27940358#27940358", "title": "Can I call instance method directly like in included module?", "body": "<p>You can <a href=\"http://apidock.com/rails/Module/delegate\" rel=\"nofollow\">delegate</a> <code>get_content</code> call to <code>pluggin</code>:</p>\n\n<pre><code>module Pluggin\n  delegate :get_content, to: :pluggin\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 2320, "user_id": 707729, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eb14e1b3ecc5b500ca21f75765149522?s=128&d=identicon&r=PG", "display_name": "luzny", "link": "https://stackoverflow.com/users/707729/luzny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 27940358, "answer_count": 1, "score": 0, "last_activity_date": 1421230535, "creation_date": 1421229782, "last_edit_date": 1421230535, "question_id": 27940232, "link": "https://stackoverflow.com/questions/27940232/can-i-call-instance-method-directly-like-in-included-module", "title": "Can I call instance method directly like in included module?", "body": "<p>If it is possible, How to call or rebuild <code>SomePluggin</code> class to call <code>get_content</code> method directly in included module, so as to reduce redundant <code>get_content</code> in <code>Pluggin</code> module?</p>\n\n<pre><code>module Cms\n  class SomePluggin\n    def get_content\n      puts \"please call me directly\"\n    end\n  end\n\n  module Pluggin\n    extend ActiveSupport::Concern\n\n    included do\n      after_initialize :pluggin\n    end\n\n    attr_writer :pluggin\n\n    def pluggin\n      @pluggin ||= SomePluggin.new\n    end\n\n    def get_content # Is there any possibility to do this directly?\n      pluggin.get_content\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "templates"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4150663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3841114ca3a0c9f340bc0dda98499f88?s=128&d=identicon&r=PG&f=1", "display_name": "SOF User", "link": "https://stackoverflow.com/users/4150663/sof-user"}, "edited": false, "score": 0, "creation_date": 1421301235, "post_id": 27943619, "comment_id": 44309323, "body": "<code>mailer_a</code> and <code>mailer_b</code> templates are categorised as mailers for some specific purpose and hence I clubbed them into <code>my_mailers</code> module, any new similar mailer for ex: mailer_c will be part of same module."}, {"owner": {"reputation": 41, "user_id": 4150663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3841114ca3a0c9f340bc0dda98499f88?s=128&d=identicon&r=PG&f=1", "display_name": "SOF User", "link": "https://stackoverflow.com/users/4150663/sof-user"}, "edited": false, "score": 0, "creation_date": 1421391338, "post_id": 27943619, "comment_id": 44349253, "body": "I tried removing modules <code>my_modules</code> also as suggested but still rails not picking up appropriate template."}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1421240628, "creation_date": 1421240628, "answer_id": 27943619, "question_id": 27939928, "link": "https://stackoverflow.com/questions/27939928/template-not-picked-up-correctly-for-mailers/27943619#27943619", "title": "template not picked up correctly for mailers", "body": "<p>why have you used a module for your mailers.Your code is good and i dont see any reason why your templates are not loading accordingly.<strong>Try removing the module</strong> and just use the class like this:-</p>\n\n<pre><code>class MailerA &lt; BaseMailer\n  default from: \"support@mydomain.com\"\n  ##if needed\n  ##layout 'mailer_a'\n\n\n  def registration_confirmation(user_email)\n     //do your stuff with user_email\n     mail(:to =&gt; user_email, :subject =&gt;\"Good to see you\")\n    ##in case multiple templates in same folder\n    ## mail(:to =&gt; user_email, :subject =&gt;\"Good to see you\", :template_name =&gt; \"main_2\")\n  end\n\nend##class ends\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4150663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3841114ca3a0c9f340bc0dda98499f88?s=128&d=identicon&r=PG&f=1", "display_name": "SOF User", "link": "https://stackoverflow.com/users/4150663/sof-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421240628, "creation_date": 1421228831, "question_id": 27939928, "link": "https://stackoverflow.com/questions/27939928/template-not-picked-up-correctly-for-mailers", "title": "template not picked up correctly for mailers", "body": "<p>I have two mailer classes defined inside a module as below:</p>\n\n<p><strong>1. app/mailers/my_mailers/mailer_a.rb</strong></p>\n\n<pre><code>module MyMailers\n  class MailerA &lt; BaseMailer\n    def main\n       mail(:to =&gt; 'xyz@abc.com', :subject =&gt; 'Mail Subject')\n    end\n  end\nend\n</code></pre>\n\n<p><strong>2. app/mailers/my_mailers/mailer_b.rb</strong></p>\n\n<pre><code>module MyMailers\n  class MailerB &lt; MailerA\n    def some_method\n    end\n  end\nend\n</code></pre>\n\n<p><strong>and Base Class of all mailers: app/mailers/base_mailer.rb</strong></p>\n\n<pre><code>class BaseMailer &lt; ActionMailer::Base\n    ...\n    ...\nend\n</code></pre>\n\n<p>Now template and partials of these mailers are stored in (with some html code):</p>\n\n<p><strong>mailer_a templates</strong></p>\n\n<p><code>app/views/my_mailers/mailer_a/main.html.erb</code>\n<code>app/views/my_mailers/mailer_a/_header.html.erb</code>\n<code>app/views/my_mailers/mailer_a/_body.html.erb</code>\n<code>app/views/my_mailers/mailer_a/_footer.html.erb</code></p>\n\n<p><strong>mailer_b templates</strong></p>\n\n<p><code>/app/views/my_mailers/mailer_b/some_random_templ.html.erb</code></p>\n\n<p><strong>sample content of <code>app/views/my_mailers/mailer_a/main.html.erb</code></strong></p>\n\n<pre><code>&lt;% render partial: 'header' %&gt;\n&lt;% render partial: 'body' %&gt;\n&lt;% render partial: 'footer' %&gt;\n</code></pre>\n\n<p><strong>Problem:</strong>\nWhen I try to invoke main() method of MailerB, it should invoke main() method of MailerA (as there's no main available for MailerB class), that in-turn try to call send mail via mail() method by searching for <code>main</code> template in <code>app/views/my_modules/mailer_b</code> directory. But <code>mailer_b</code> views doesn't have any <code>main</code> template, so it should fallback to parent class views that is <code>mailer_a</code> views directory and start rendering <code>main.html.erb</code></p>\n\n<p>But in my case, the mail received is always empty as if there was no template found and I think  search for template stopped at <code>app/views/mailer_b/</code> directory only and not going further up in mailer inheritance. </p>\n\n<p>I have also tried using :template_path mechanism, but result is still same (empty mail)</p>\n\n<p>Anyone who can suggest some fix/solution for such case ? please let me know if I should be giving more details.</p>\n\n<p>Using Rails Version: 3.2.1x</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mapping", "activeadmin", "has-many-through"], "answers": [{"comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1421267337, "post_id": 27944389, "comment_id": 44298711, "body": "Any idea how I can then show the tags selected in my View page or Show through activeadmin? I&#39;ve updated the code above.."}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1421268914, "post_id": 27944389, "comment_id": 44299492, "body": "Thank you so much for you help :)"}], "tags": [], "owner": {"reputation": 101, "user_id": 3459543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f107619ca07285a921203bcbb1890e2?s=128&d=identicon&r=PG&f=1", "display_name": "Archetylator", "link": "https://stackoverflow.com/users/3459543/archetylator"}, "is_accepted": true, "score": 2, "last_activity_date": 1421268721, "last_edit_date": 1421268721, "creation_date": 1421243007, "answer_id": 27944389, "question_id": 27939909, "link": "https://stackoverflow.com/questions/27939909/add-tags-to-books-in-active-admin/27944389#27944389", "title": "Add Tags to Books in Active Admin", "body": "<p>Probably you should register Book model not CommunityResource I think and please add to permit_params <code>tag_ids: []</code>. The form method could look like this:</p>\n\n<pre><code>form do |f|\n  f.inputs \"Book Detail\" do\n    f.input :title\n  end\n\n  f.inputs \"Tags\" do\n    f.input :tags, as: :check_boxes\n  end\n\n  f.actions\nend\n</code></pre>\n\n<p>When you want to display the tags on the show page you could do it for example in the sidebar.</p>\n\n<pre><code>sidebar 'Tags', only: :show, if: proc { book.tags.any? } do\n  table_for book.tags do |t|\n    t.column('Name') { |tag| tag.name } # it's depends what you want to display  \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 1, "accepted_answer_id": 27944389, "answer_count": 1, "score": 0, "last_activity_date": 1421268721, "creation_date": 1421228769, "last_edit_date": 1421267399, "question_id": 27939909, "link": "https://stackoverflow.com/questions/27939909/add-tags-to-books-in-active-admin", "title": "Add Tags to Books in Active Admin", "body": "<p>I am using ActiveAdmin gem in my project.</p>\n\n<p>I have 2 models using has_many through association. Essentially, I have a Book model that has_many Tags through a Book_Mapping Table. </p>\n\n<p><strong>I would like to be able to edit/add tags to a Book from my Book Form in Active Admin.</strong> </p>\n\n<p>But I am having trouble displaying this in my form. Can anyone help me create the proper Active Admin form structure?</p>\n\n<p><strong>MODELS</strong></p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n\n  has_many :book_mappings\n  has_many :tags, through: :book_mappings\n\n  ##Not sure if I should use this...\n  accepts_nested_attributes_for :book_mappings\n  accepts_nested_attributes_for :tags\n\nend\n\n\nclass BookMapping &lt; ActiveRecord::Base\n  belongs_to :book\n  belongs_to :tag\nend\n\nclass Tag &lt; ActiveRecord::Base\n\n  has_many :book_mappings\n  has_many :books, through: :book_mappings\n\nend\n</code></pre>\n\n<p><strong>ACTIVEADMIN</strong></p>\n\n<pre><code>ActiveAdmin.register Book do\n\n###Should this permit any other params? \npermit_params :title\n\nform do |f|\n  f.inputs \"Book Detail\" do\n    f.input :title\n  end\n\n  f.has_many :book_mappings do |app_f|\n    app_f.inputs \"Book Tags\" do\n\n      ###Other than a Create Tag button, \n      ###The actual form fields don't appear at all...\n      app_f.input :book_tag_id\n    end\n  end\nend\n\n#Show Page (Is there a way to show the selected tags here?)\n  show do |pic|\n    attributes_table do\n      row :title\n\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "model"], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "edited": false, "score": 0, "creation_date": 1421229279, "post_id": 27939871, "comment_id": 44276272, "body": "Hi, that&#39;s a part of the answer but I&#39;ll not be able to do Pro.first.surname.  Moreover, it required each time to call the database even if I call 100 users. I want to be able to load User attribute and Listworker attribute at the same time. Same for User function.  My code doesn&#39;t look like inheritance but I want to such as Pro &lt; Listworker &lt; User"}, {"owner": {"reputation": 1151, "user_id": 2468200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AKp0O.jpg?s=128&g=1", "display_name": "Ivan Kolmychek", "link": "https://stackoverflow.com/users/2468200/ivan-kolmychek"}, "reply_to_user": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "edited": false, "score": 0, "creation_date": 1421230096, "post_id": 27939871, "comment_id": 44276743, "body": "@Thounder, ok, I&#39;ll add part about Pro to answer, but to keep database queries count at minimum, you should use <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">eager loading</a> instead of trying to put everything into every model."}], "tags": [], "owner": {"reputation": 1151, "user_id": 2468200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AKp0O.jpg?s=128&g=1", "display_name": "Ivan Kolmychek", "link": "https://stackoverflow.com/users/2468200/ivan-kolmychek"}, "is_accepted": false, "score": 0, "last_activity_date": 1421230192, "last_edit_date": 1421230192, "creation_date": 1421228636, "answer_id": 27939871, "question_id": 27939752, "link": "https://stackoverflow.com/questions/27939752/inheritance-rails/27939871#27939871", "title": "Inheritance rails", "body": "<p>You can <a href=\"http://apidock.com/rails/Module/delegate\" rel=\"nofollow\">delegate</a> the method to <code>user</code> object:</p>\n\n<pre><code>class ListWorker &lt; ActiveRecord::Base\n  belongs_to :user\n  delegate :surname, to: :user\nend\n\nclass Pro &lt; ActiveRecord::Base\n  belongs_to :list_worker\n  delegate :surname, to: :list_worker\nend\n</code></pre>\n\n<p>and you will be able to call it <code>:surname</code> on ListWorker or Pro instance:</p>\n\n<pre><code>ListWorker.find(123).surname \nPro.first.surname\n</code></pre>\n\n<p>Also, the structure you provided <em>is not an inheritance</em>, but <em>associations</em>.</p>\n\n<ul>\n<li>Pro belongs_to ListWorker</li>\n<li>ListWorker belongs_to User</li>\n<li>Pro has_one User through ListWorker</li>\n</ul>\n"}], "owner": {"reputation": 295, "user_id": 4296084, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1057962333/picture?type=large", "display_name": "Thounder", "link": "https://stackoverflow.com/users/4296084/thounder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421230192, "creation_date": 1421228246, "last_edit_date": 1421229693, "question_id": 27939752, "link": "https://stackoverflow.com/questions/27939752/inheritance-rails", "title": "Inheritance rails", "body": "<p>I'm looking for an inheritance case for ruby on rails. I have a structure: <code>User</code> => <code>Listworker</code> => <code>Pro</code> so that <code>Listworker</code> has <code>user_id</code> and <code>Pro</code> has <code>listworker_id</code>, and I have ruby code like:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attrib : surname, name\nend\n\nclass Listworker &lt; ActiveRecord::Base\n  attrib : score\nend\n\nclass Pro &lt; ActiveRecord::Base\n  attrib : website\nend\n</code></pre>\n\n<p>I want to do something such as:</p>\n\n<ul>\n<li><code>Listworker.surname</code> instead of <code>Listworker.user.surname</code></li>\n<li><code>Pro.surname</code> instead of <code>Pro.listworker.user.surname</code></li>\n</ul>\n\n<p>STI isn't a solution because I have too much things to store in <code>Listworker</code> and <code>Pro</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 1, "creation_date": 1421236713, "post_id": 27939722, "comment_id": 44280364, "body": "instead of rescuing from that exception, you should not raise it in the first place. that&#39;s what <code>.save</code> and <code>.errors</code> are for. if you use a <code>respond_with</code> call, rails will automatically return a <code>unprocessable_entity</code> status and the errors as json"}], "answers": [{"tags": [], "owner": {"reputation": 607, "user_id": 345996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a7721d956003ae07097d84e690adf2?s=128&d=identicon&r=PG&f=1", "display_name": "jogaco", "link": "https://stackoverflow.com/users/345996/jogaco"}, "is_accepted": false, "score": 1, "last_activity_date": 1477067689, "creation_date": 1477067689, "answer_id": 40181561, "question_id": 27939722, "link": "https://stackoverflow.com/questions/27939722/rescue-from-an-exception-only-if-format-is-json/40181561#40181561", "title": "`rescue_from` an exception only if format is json", "body": "<p>There is a better approach.</p>\n\n<p>For example:</p>\n\n<pre><code>  rescue_from ActionController::InvalidAuthenticityToken do |exception|\n    raise unless request.xhr?\n    render nothing: true, status: :unprocessable_entity\n  end\n</code></pre>\n"}], "owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1477067689, "creation_date": 1421228140, "question_id": 27939722, "link": "https://stackoverflow.com/questions/27939722/rescue-from-an-exception-only-if-format-is-json", "title": "`rescue_from` an exception only if format is json", "body": "<p>I have an application in rails that can respond both to json and html.<br>\nI'd like that, when a record returns an error while saving, the json answer is like that:</p>\n\n<pre><code>{\n  \"errors\" : {\n    \"slug\" : [\n      \"can't be blank\"\n    ],\n    \"title\" : [\n      \"can't be blank\"\n    ]\n  }\n}\n</code></pre>\n\n<p>So I added this code to my <code>ApplicationController</code> class.</p>\n\n<pre><code>rescue_from ActiveRecord::RecordInvalid do |exception|\n  render json: { errors: exception.record.errors },\n         status: :unprocessable_entity\nend\n</code></pre>\n\n<p>I'd like that this <code>rescue_from</code> is called only when the format is json, otherwise behave in the standard way (when the format is html). How can I do something like this?</p>\n\n<p><strong>UPDATE</strong>\nI found a solution, but I don't think that it's very good:</p>\n\n<pre><code>rescue_from ActiveRecord::RecordInvalid do |exception|\n  respond_to do |format|\n    format.json do\n      render json: { errors: exception.record.errors },\n           status: :unprocessable_entity\n    end\n    format.html { fail exception }\n  end\nend\n</code></pre>\n\n<p>Is there a better approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 3168187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbd775d18e96f38533aa956ab81114a?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Goel", "link": "https://stackoverflow.com/users/3168187/nishant-goel"}, "is_accepted": false, "score": 0, "last_activity_date": 1421228403, "creation_date": 1421228403, "answer_id": 27939806, "question_id": 27939476, "link": "https://stackoverflow.com/questions/27939476/how-to-save-form-values-in-database-using-ror/27939806#27939806", "title": "How to save form values in database using ROR", "body": "<p>Validation type used for gender field is wrong ie acceptance validation is used when you want to check if a check-box is checked by user in the form. In your situation you should use</p>\n\n<pre><code>validates :gender, :presence =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4448245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797342902393cced38168229c425b91b?s=128&d=identicon&r=PG&f=1", "display_name": "subh123", "link": "https://stackoverflow.com/users/4448245/subh123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421234134, "creation_date": 1421227510, "last_edit_date": 1421234134, "question_id": 27939476, "link": "https://stackoverflow.com/questions/27939476/how-to-save-form-values-in-database-using-ror", "title": "How to save form values in database using ROR", "body": "<p>Can anybody help me to save these form values in database.I have already created one form.When I clicked on submit button the below validation message is coming.</p>\n\n<pre><code>1 error prohibited this post from being saved:\n\nGender must be accepted  \n</code></pre>\n\n<p>Please check the code and help me to save all values in DB.If any error found please make it correct.</p>\n\n<p>My code is as follows:</p>\n\n<p>views/students/index.html.erb</p>\n\n<pre><code> &lt;h1&gt;Choose the option&lt;/h1&gt;\n    &lt;p&gt;\n      &lt;%= link_to \"Enter student data\",students_new_path %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= link_to \"Display your data\",students_show_path %&gt;\n    &lt;/p&gt;\n\nviews/students/new.html.erb\n\n&lt;h1&gt;Enter your data&lt;/h1&gt;\n&lt;%= form_for @student,:url =&gt; {:action =&gt; 'create'} do |f| %&gt;\n    &lt;% if @student.errors.any? %&gt;\n        &lt;div id=\"error_explanation\"&gt;\n          &lt;h2&gt;&lt;%= pluralize(@student.errors.count, \"error\") %&gt; prohibited this post from being saved:&lt;/h2&gt;\n\n          &lt;ul&gt;\n            &lt;% @student.errors.full_messages.each do |message| %&gt;\n                &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n            &lt;% end %&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;p&gt;\n      &lt;label for=\"name\"&gt;Name:&lt;/label&gt;\n      &lt;%= f.text_field :name,placeholder:\"Enter your name\" %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;label for=\"gender\"&gt;Gender:&lt;/label&gt;&lt;br&gt;\n      &lt;%= f.radio_button :gender,'Male',:checked =&gt; true %&gt;\n      &lt;%= f.label :Male  %&gt;\n      &lt;%= f.radio_button :gender,'Female' %&gt;\n      &lt;%= f.label :Female %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;label for=\"city\"&gt;Select the City&lt;/label&gt;\n      &lt;%= f.select(:city,options_for_select([['Bhubaneswar','Bhubaneswar'],['Cuttack','Cuttack'],['Behrempur','Behrempur'],['Puri','Puri']],selected: \"Puri\")) %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= f.check_box :terms_service  %&gt; accept terms and service\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= f.submit \"Submit\" %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller/students_controller.rb</p>\n\n<pre><code>class StudentsController &lt; ApplicationController\n  def index\n\n  end\n  def show\n\n  end\n  def new\n    @student=Student.new\n\n  end\n  def create\n  @student=Student.new(users_params)\n    if @student.save\n      flash[:notice]=\"You have signed up successfully..\"\n      flash[:color]=\"valid\"\n      redirect_to :action =&gt; 'index'\n    else\n      flash[:notice]=\"You have not signed up successfully\"\n      flash[:color]=\"invalid\"\n      render :new\n    end\n  end\n  private\n  def users_params\n    params.require(:student).permit(:name,:gender,:city,:terms_service)\n  end\nend\n</code></pre>\n\n<p>model/student.rb</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  validates :name ,:presence =&gt; true,:length =&gt; { :minimum =&gt; 6 }\n  validates :gender, :acceptance =&gt; true\n  validates :terms_service, :acceptance =&gt; true\nend\n</code></pre>\n\n<p>migrate\\20150114061737_create_students.rb</p>\n\n<pre><code>class CreateStudents &lt; ActiveRecord::Migration\n  def change\n    create_table :students do |t|\n      t.string :name\n      t.string :gender\n      t.string :city\n      t.string :terms_service\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>Please help me to run this code successfully.Thanks in advance..</p>\n"}, {"tags": ["ruby", "arrays"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1421226577, "post_id": 27938991, "comment_id": 44274763, "body": "What do you mean by &quot;sort the frequency of letters by inputting array 2&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2801743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1e0af821cde1accfac5de1ac12e2d2?s=128&d=identicon&r=PG&f=1", "display_name": "user2801743", "link": "https://stackoverflow.com/users/2801743/user2801743"}, "is_accepted": false, "score": 0, "last_activity_date": 1421238562, "last_edit_date": 1421238562, "creation_date": 1421235401, "answer_id": 27942009, "question_id": 27938991, "link": "https://stackoverflow.com/questions/27938991/using-one-array-to-search-a-second-array-for-frequency-in-ruby/27942009#27942009", "title": "Using one Array to search a second array for frequency in ruby", "body": "<p>I assumed that you want to count all letters in the sentence you put in, and not array 1. Assuming that, here's my take on it:</p>\n\n<pre><code>hashy = Hash.new()\n\n['s','a','d','f','w'].each {|item| hashy[item.to_sym] = 0}\n\nputs \"give me a sentence\"\n\nsentence = gets.chomp.downcase.delete!(' ')\nsentence_array = []\nsentence.each_char do |l|\n    sentence_array.push(l)\nend\n\nhashy.each do |key, value|\n    puts \"this is key: #{key} and value #{hashy[key]}\"\n    sentence_array.each do |letter|\n        puts \"letter: #{letter}\"\n        if letter.to_sym == key\n            puts \"letter #{letter} equals key #{key}\"\n            value = value + 1\n            hashy[key] = value\n            puts \"value is now #{value}\"\n        end\n    end\nend\n\nputs hashy\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1421238562, "creation_date": 1421225821, "last_edit_date": 1421233689, "question_id": 27938991, "link": "https://stackoverflow.com/questions/27938991/using-one-array-to-search-a-second-array-for-frequency-in-ruby", "title": "Using one Array to search a second array for frequency in ruby", "body": "<p>I have an Array-1 say</p>\n\n<pre><code> arr1 =['s','a','sd','few','asdw','a','sdfeg']\n</code></pre>\n\n<p>And a second Array </p>\n\n<pre><code> arr2 = ['s','a','d','f','w']\n</code></pre>\n\n<p>I want to take arr1 and sort the frequency of letters by inputting arr2 with result</p>\n\n<pre><code>[s=&gt; 4, a=&gt; 2, d =&gt; 3] So on and so forth.\n</code></pre>\n\n<p>As far as I can muddle around.. Nothing below works, Just my thoughts on it?</p>\n\n<pre><code> hashy = Hash.new\n\n print \"give me a sentance \"\n sentance = gets.chomp.downcase.delete!(' ') \n bing = sentance.split(//)\n #how = sentance.gsub!(/[^a-z)]/, \"\") #Remove nil result\n #chop = how.to_s.split(//).uniq\n #hashy &lt;&lt; bing.each{|e|  how[e] }\n #puts how.any? {|e| bing.count(e)}\n #puts how, chop\n\n bing.each {|v| hashy.store(v, hashy[v]+1 )}\n puts bing\n</code></pre>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-3.1", "ruby-2.0"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4443990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52834fff9a3e94d0a83ea69b2b8907eb?s=128&d=identicon&r=PG&f=1", "display_name": "user4443990", "link": "https://stackoverflow.com/users/4443990/user4443990"}, "edited": false, "score": 0, "creation_date": 1421228736, "post_id": 27938974, "comment_id": 44275942, "body": "Thanks @Olivier ...Ill try this ...Even i got one article on google <a href=\"https://www.igvita.com/2009/05/13/fibers-cooperative-scheduling-in-ruby/\" rel=\"nofollow noreferrer\">igvita.com/2009/05/13/fibers-cooperative-scheduling-in-ruby</a> ... which one is good could you suggest me."}, {"owner": {"reputation": 1938, "user_id": 283481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3008d2bf2e8e7f4455d48212f99a9343?s=128&d=identicon&r=PG", "display_name": "Olivier Lance", "link": "https://stackoverflow.com/users/283481/olivier-lance"}, "reply_to_user": {"reputation": 163, "user_id": 4443990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52834fff9a3e94d0a83ea69b2b8907eb?s=128&d=identicon&r=PG&f=1", "display_name": "user4443990", "link": "https://stackoverflow.com/users/4443990/user4443990"}, "edited": false, "score": 0, "creation_date": 1421229865, "post_id": 27938974, "comment_id": 44276620, "body": "I guess Typhoeus is a good bet, probably better than handling Fibers yourself anyway... I&#39;ll update my answer with alternatives :)"}, {"owner": {"reputation": 1938, "user_id": 283481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3008d2bf2e8e7f4455d48212f99a9343?s=128&d=identicon&r=PG", "display_name": "Olivier Lance", "link": "https://stackoverflow.com/users/283481/olivier-lance"}, "reply_to_user": {"reputation": 163, "user_id": 4443990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52834fff9a3e94d0a83ea69b2b8907eb?s=128&d=identicon&r=PG&f=1", "display_name": "user4443990", "link": "https://stackoverflow.com/users/4443990/user4443990"}, "edited": false, "score": 0, "creation_date": 1421231112, "post_id": 27938974, "comment_id": 44277264, "body": "You&#39;re welcome! If my answer solves your problem, don&#39;t forget to accept it ^^"}], "tags": [], "owner": {"reputation": 1938, "user_id": 283481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3008d2bf2e8e7f4455d48212f99a9343?s=128&d=identicon&r=PG", "display_name": "Olivier Lance", "link": "https://stackoverflow.com/users/283481/olivier-lance"}, "is_accepted": true, "score": 7, "last_activity_date": 1421230520, "last_edit_date": 1421230520, "creation_date": 1421225730, "answer_id": 27938974, "question_id": 27938518, "link": "https://stackoverflow.com/questions/27938518/how-to-create-async-requests-blocker-methods-in-ruby-api/27938974#27938974", "title": "How to create async requests, blocker methods in ruby API", "body": "<p>You could use the <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"noreferrer\">Typhoeus</a> gem which is built to run HTTP requests in parallel.</p>\n\n<p>The idea is to prepare several requests with blocks for handling success/error for each request, then to run all of them in parallel. The \"run phase\" will block until all requests are completed.</p>\n\n<p>Here's a sample from the project page:</p>\n\n<pre><code>hydra = Typhoeus::Hydra.hydra\n\nfirst_request = Typhoeus::Request.new(\"http://example.com/posts/1\")\nfirst_request.on_complete do |response|\n  third_url = response.body\n  third_request = Typhoeus::Request.new(third_url)\n  hydra.queue third_request\nend\nsecond_request = Typhoeus::Request.new(\"http://example.com/posts/2\")\n\nhydra.queue first_request\nhydra.queue second_request\nhydra.run # this is a blocking call that returns once all requests are complete\n</code></pre>\n\n<p>In the event you don't want to wait for your asynchronous operation to end (but your question suggests otherwise) then it's a bit more complicated: you should have an API to run the request and return a request ID to the caller, which could later query the API for a result associated with the request ID it received.</p>\n\n<p>To be a bit more flexible, you could use <a href=\"https://github.com/lostisland/faraday\" rel=\"noreferrer\">Faraday</a>, a HTTP client lib that provides a uniform interface to several backends. Start with any backend you like, and you should be able to change the adapter to another one later on if you want to test/improve performance.</p>\n\n<p>Typhoeus provides a Faraday backend, but you can also use <a href=\"https://github.com/igrigorik/em-http-request\" rel=\"noreferrer\">EM-HTTP-Request</a> which is based on <a href=\"https://github.com/eventmachine/eventmachine\" rel=\"noreferrer\">EventMachine</a>, a well-known gem. You can leverage Ruby's Fibers with Faraday and EM-Synchrony as shown <a href=\"https://gist.github.com/igrigorik/802395\" rel=\"noreferrer\">in this example</a>.</p>\n\n<p>Here's a sample running parallel requests with Faraday and Typhoeus: <a href=\"https://github.com/lostisland/faraday/wiki/Parallel-requests\" rel=\"noreferrer\">https://github.com/lostisland/faraday/wiki/Parallel-requests</a></p>\n\n<p>Using the previous example, it should be easy to adapt to use the EM-HTTP-request adapter.</p>\n"}], "owner": {"reputation": 163, "user_id": 4443990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52834fff9a3e94d0a83ea69b2b8907eb?s=128&d=identicon&r=PG&f=1", "display_name": "user4443990", "link": "https://stackoverflow.com/users/4443990/user4443990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2298, "favorite_count": 1, "accepted_answer_id": 27938974, "answer_count": 1, "score": 2, "last_activity_date": 1421230520, "creation_date": 1421223781, "question_id": 27938518, "link": "https://stackoverflow.com/questions/27938518/how-to-create-async-requests-blocker-methods-in-ruby-api", "title": "How to create async requests, blocker methods in ruby API", "body": "<p>I am Creating API in ruby. </p>\n\n<p>Was looking into the async requests, blocker methods like wait for async operations..</p>\n\n<p>Can anybody suggest which is the best way to handle Asynchronous operations for API</p>\n"}, {"tags": ["html", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "is_accepted": false, "score": 1, "last_activity_date": 1421223169, "creation_date": 1421223169, "answer_id": 27938387, "question_id": 27938238, "link": "https://stackoverflow.com/questions/27938238/replace-only-raw-text-in-html-string/27938387#27938387", "title": "Replace only raw text in HTML string", "body": "<p>That's really simple: parse the html, replace in the text nodes, print to html.</p>\n\n<p><a href=\"http://ruby.bastardsbook.com/chapters/html-parsing/\" rel=\"nofollow\">Nokogiri</a> seems to be popular for that in Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "is_accepted": false, "score": 3, "last_activity_date": 1421230231, "creation_date": 1421230231, "answer_id": 27940376, "question_id": 27938238, "link": "https://stackoverflow.com/questions/27938238/replace-only-raw-text-in-html-string/27940376#27940376", "title": "Replace only raw text in HTML string", "body": "<p>Do not pretend to be ideal answer, just to give you a way where to go:</p>\n\n<pre><code>require 'nokogiri'\n\nhtml_string = '&lt;span&gt;&lt;span class=\"ip\"&gt;&lt;/span&gt; Do not stare &lt;span class=\"img\"&gt;&lt;/span&gt;  at the monitor continuously &lt;/span&gt;'\ndoc = Nokogiri::HTML.fragment(html_string)\nspans = doc.css('span')\nspans.each do |span|\n  span.xpath('text()').each do |text|\n    if text.content =~ /stare/\n      text.content = text.content.sub(/stare/, '&lt;span class=\"highlighted\"&gt;s&lt;/span&gt;tare')\n    end\n  end\nend\np doc.to_html.gsub(/\\&amp;lt;/, '&lt;').gsub(/\\&amp;gt;/, '&gt;')\n</code></pre>\n\n<p>Which output is:</p>\n\n<pre><code>#=&gt; \"&lt;span&gt;&lt;span class=\\\"ip\\\"&gt;&lt;/span&gt; Do not &lt;span class=\\\"highlighted\\\"&gt;s&lt;/span&gt;tare &lt;span class=\\\"img\\\"&gt;&lt;/span&gt;  at the monitor continuously &lt;/span&gt;\"\n</code></pre>\n\n<p>So, here we are looking for all <code>span</code>s and checking them for content that has <code>stare</code> word. Then we change content. That's all, and learn nokogiri.</p>\n"}], "owner": {"reputation": 464, "user_id": 1983908, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bb1997b5ce484b4b34d5de77c1ba3efc?s=128&d=identicon&r=PG", "display_name": "Kanmaniselvan", "link": "https://stackoverflow.com/users/1983908/kanmaniselvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1421230231, "creation_date": 1421222435, "last_edit_date": 1421223035, "question_id": 27938238, "link": "https://stackoverflow.com/questions/27938238/replace-only-raw-text-in-html-string", "title": "Replace only raw text in HTML string", "body": "<p>I have a string:</p>\n\n<pre><code>html_string =\n'&lt;span&gt;&lt;span class=\\\"ip\\\"&gt;&lt;/span&gt; Do not stare &lt;span class=\\\"img\\\"&gt;&lt;/span&gt;  at the monitor continuously &lt;/span&gt;\\r\\n'\n</code></pre>\n\n<p>I want to replace the character <code>s</code> in the raw text (not in the html tags) of <code>html_string</code> with <code>&lt;span class=\"highlighted\"&gt;s&lt;/span&gt;</code>.</p>\n\n<p>The result should be:</p>\n\n<pre><code>'&lt;span&gt;&lt;span class=\\\"ip\\\"&gt;&lt;/span&gt; Do not &lt;span class=\"highlighted\"&gt;s&lt;/span&gt;tare &lt;span class=\\\"img\\\"&gt;&lt;/span&gt;  at the monitor continuou&lt;span class=\"highlighted\"&gt;s&lt;/span&gt;ly &lt;/span&gt;\\r\\n'\n</code></pre>\n\n<p>What I did is:</p>\n\n<pre><code>html_string.gsub(/s/, '&lt;span class=\"highlighted\"&gt;s&lt;/span&gt;')\n</code></pre>\n\n<p>but this replaces all occurrences of the <code>s</code> character regardless of raw text or a tag. I want to replace it skipping html tags and its attributes. How it can be done?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1421223898, "post_id": 27938507, "comment_id": 44273483, "body": "Yes, gives same result, as <code>MyModel.count(group: [:col1, :col2])</code>"}, {"owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "reply_to_user": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1421223966, "post_id": 27938507, "comment_id": 44273513, "body": "You want the number of unique pairs of <code>[:col1, :col2]</code>? what are you trying to do?"}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1421224065, "post_id": 27938507, "comment_id": 44273561, "body": "Exactly! I have a list where I write the grouped result of <code>col1</code> and <code>col2</code>, and for pagination, I need the overall count of all rows"}, {"owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "reply_to_user": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1421224860, "post_id": 27938507, "comment_id": 44273924, "body": "Hmm.. not too sure then.. is this something that might be done in SQL?"}], "tags": [], "owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1421223713, "creation_date": 1421223713, "answer_id": 27938507, "question_id": 27938161, "link": "https://stackoverflow.com/questions/27938161/group-by-multiple-columns-and-count-results/27938507#27938507", "title": "Group by multiple columns and count results", "body": "<p>Have you tried </p>\n\n<pre><code>MyModel.group(:col1).group(:col2).count\n</code></pre>\n\n<p>I noticed this doesnt work with association fields, but works fine with their id columns.</p>\n"}, {"tags": [], "owner": {"reputation": 5057, "user_id": 911870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-62mEYnHkn_Q/AAAAAAAAAAI/AAAAAAAAAIs/Z5Ylc2Puq50/photo.jpg?sz=128", "display_name": "Serdar Dogruyol", "link": "https://stackoverflow.com/users/911870/serdar-dogruyol"}, "is_accepted": false, "score": 0, "last_activity_date": 1421228145, "creation_date": 1421228145, "answer_id": 27939725, "question_id": 27938161, "link": "https://stackoverflow.com/questions/27938161/group-by-multiple-columns-and-count-results/27939725#27939725", "title": "Group by multiple columns and count results", "body": "<p>You can use distinct count of each field like this.</p>\n\n<pre><code>MyModel.pluck('COUNT(DISTINCT col1) as col1, COUNT(DISTINCT col2) as col2')\n</code></pre>\n\n<p>And you receive a result like this</p>\n\n<pre><code>[[13273, 0]]\n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421228145, "creation_date": 1421222091, "last_edit_date": 1421224074, "question_id": 27938161, "link": "https://stackoverflow.com/questions/27938161/group-by-multiple-columns-and-count-results", "title": "Group by multiple columns and count results", "body": "<p>How do I group by multiple columns, and return the overall results as count with ActiveRecord (Rails 3) and MySql? I tried it with</p>\n\n<pre><code>MyModel.count(group: [:col1, :col2])\n</code></pre>\n\n<p>but this returns a big hash (there are about 75.000 records in the table), and I only need the overall row count that this query returns.</p>\n\n<p>I could do</p>\n\n<pre><code>MyModel.count(group: [:col1, :col2]).count # =&gt; 5266\n</code></pre>\n\n<p>but this would load all the stuff into Rails, which gets slow.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "unicorn"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1421225927, "creation_date": 1421225927, "answer_id": 27939026, "question_id": 27938013, "link": "https://stackoverflow.com/questions/27938013/how-is-rails-session-shared-among-unicorn-workers/27939026#27939026", "title": "How is rails session shared among unicorn workers?", "body": "<p>This partly depends on the session store used. The default is the cookie store where the entire data is serialized and stored inside the session cookie. Other stores just store an id in the session cookie and fetch the data from some other source (eg redis)</p>\n\n<p>While <code>session</code> looks like an instance of <code>Hash</code> it's not - it's an instance of <code>Request::Session</code> which contains a bunch of other things (such as the details of the current request) so it's normal for <code>session.hash</code> to be different each time. </p>\n\n<p>You can turn the session into an actual hash with <code>session.to_hash</code>, although even then you will probably find that <code>session.to_hash.hash</code> differs across processes since hash values are not guaranteed to be the same across processes (in particular, for strings they are process dependant)</p>\n"}], "owner": {"reputation": 7124, "user_id": 290284, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f87b69d5b7162593263f5e1eb3ca2202?s=128&d=identicon&r=PG", "display_name": "Cui Pengfei \u5d14\u9e4f\u98de", "link": "https://stackoverflow.com/users/290284/cui-pengfei-%e5%b4%94%e9%b9%8f%e9%a3%9e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 27939026, "answer_count": 1, "score": 1, "last_activity_date": 1421225927, "creation_date": 1421221504, "question_id": 27938013, "link": "https://stackoverflow.com/questions/27938013/how-is-rails-session-shared-among-unicorn-workers", "title": "How is rails session shared among unicorn workers?", "body": "<p>I am using unicorn as rails server, I have configured five workers for it.</p>\n\n<p>I was not sure if this would affect user session, so I did a little experiment:</p>\n\n<pre><code>puts \"------\"\nputs session[:session_id]\nputs \"session obj: #{session.hash}\"\nputs \"pid: #{Process.pid}\"\n</code></pre>\n\n<p>This is the result</p>\n\n<pre><code>------\n69db720b6620288416ae4ba6f921dfb8\nsession obj: -4054823339922854099\npid: 4396\n------\n69db720b6620288416ae4ba6f921dfb8\nsession obj: 4220002746750993661\npid: 4527\n------\n69db720b6620288416ae4ba6f921dfb8\nsession obj: 2637320844486598221\npid: 4396\n</code></pre>\n\n<p>The session id is always the same</p>\n\n<p>The session object is different every time</p>\n\n<p>The pids for the first and third requests are the same</p>\n\n<p>So I assume that rails session content(not singleton object, which can not be since each worker has its own process) is shared between different unicorn workers under the same master, but is this documented anywhere?</p>\n\n<p>And is it implemented by the rails framework? or is unicorn_rails doing this?</p>\n"}, {"tags": ["ruby", "arrays", "hash"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1421220821, "post_id": 27937753, "comment_id": 44272236, "body": "is <code>exp</code> outright neglected?"}, {"owner": {"reputation": 145, "user_id": 3336117, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f34a914ed9e9d260a20cd32eef9075ed?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen", "link": "https://stackoverflow.com/users/3336117/eugen"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1421220992, "post_id": 27937753, "comment_id": 44272298, "body": "Yes it should just keep all the key value pairs from the first hash it finds."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421223547, "post_id": 27937753, "comment_id": 44273309, "body": "What happened to <code>exp: 50</code>?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421223619, "post_id": 27937753, "comment_id": 44273350, "body": "@sawa the OP want always the old value it seems.. :) I guess"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1421223648, "post_id": 27937753, "comment_id": 44273366, "body": "@ArupRakshit It is not clear enough."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1421223663, "post_id": 27937753, "comment_id": 44273372, "body": "I know I know.. Whole post is confusing.. I read it wrong and my effort was wrong.. :("}, {"owner": {"reputation": 145, "user_id": 3336117, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f34a914ed9e9d260a20cd32eef9075ed?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen", "link": "https://stackoverflow.com/users/3336117/eugen"}, "edited": false, "score": 0, "creation_date": 1421224470, "post_id": 27937753, "comment_id": 44273738, "body": "Sorry I am not so good in explaining things."}], "answers": [{"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1421223166, "post_id": 27938160, "comment_id": 44273133, "body": "Please work on final output.. It is <code>results</code> not <code>result</code>.... Key having multiple values, should be having name like <code>results</code>..not <code>result</code>."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1421223274, "post_id": 27938160, "comment_id": 44273176, "body": "You should delete the <code>result</code> key after adding <code>results</code>."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1421223428, "post_id": 27938160, "comment_id": 44273257, "body": "Just do <code>memo.delete(:result)</code> at the end of the <code>if-else</code> block and then return <code>memo</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1421223114, "last_edit_date": 1421223114, "creation_date": 1421222088, "answer_id": 27938160, "question_id": 27937753, "link": "https://stackoverflow.com/questions/27937753/iterate-through-an-array-of-hashes-and-combine-similar-elements/27938160#27938160", "title": "Iterate through an array of hashes and combine similar elements", "body": "<pre><code>array = [ \n  {ingredients: [:t1, :t2], exp: 100, result: :t5},\n  {ingredients: [:t3, :t4], exp: 200, result: :t10},\n  {ingredients: [:t1, :t2], exp:  50, result: :t6}\n]\n\narray.reduce([]) { |memo, e|    # will build new array\n  el = memo.find { |_e| _e[:ingredients] == e[:ingredients] }\n  if el                         # already have same ingredients\n    el[:results] &lt;&lt; e[:result]   # modify \n    memo\n  else\n    e[:results] = [*e[:result]]  # append\n    e.delete :result\n    memo &lt;&lt; e\n  end \n}\n\n#=&gt; [\n#  [0] {\n#    :exp =&gt; 100,\n#    :ingredients =&gt; [\n#      [0] :t1,\n#      [1] :t2\n#    ],\n#    :results =&gt; [\n#      [0] :t5,\n#      [1] :t6\n#    ]\n#  },\n#  [1] {\n#    :exp =&gt; 200,\n#    :ingredients =&gt; [\n#      [0] :t3,\n#      [1] :t4\n#    ],\n#         :results =&gt; [\n#      [0] :t10\n#    ]\n#  }\n#]\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 145, "user_id": 3336117, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f34a914ed9e9d260a20cd32eef9075ed?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen", "link": "https://stackoverflow.com/users/3336117/eugen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 27938160, "answer_count": 1, "score": -2, "last_activity_date": 1421227549, "creation_date": 1421220495, "last_edit_date": 1421227549, "question_id": 27937753, "link": "https://stackoverflow.com/questions/27937753/iterate-through-an-array-of-hashes-and-combine-similar-elements", "title": "Iterate through an array of hashes and combine similar elements", "body": "<p>Hi I have this array for example</p>\n\n<pre><code>array = [\n  {ingredients: [:t1, :t2], exp: 100, result: :t5}, \n  {ingredients: [:t3, :t4], exp: 200, result: :t10},\n  {ingredients: [:t1, :t2], exp:  50, result: :t6}\n]\n</code></pre>\n\n<p>I want an array to look like this:</p>\n\n<pre><code>array = [\n  {ingredients: [:t1, :t2], exp: 100, results: [:t5, :t6]},\n  {ingredients: [:t3, :t4], exp: 200, results: [:t10]},\n]\n</code></pre>\n\n<p>So it should check every element in the array and combine all the results of elements which contain the same ingredients array.</p>\n\n<p>I don't really know where to start with this, so any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "include", "gem"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1421219729, "post_id": 27937490, "comment_id": 44271818, "body": "hmm, high level includes could go in application.rb"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 2, "creation_date": 1421219768, "post_id": 27937490, "comment_id": 44271837, "body": "but thinking about it - an intializer is actually a good place for it."}, {"owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1421221142, "post_id": 27937490, "comment_id": 44272365, "body": "@TarynEast So you&#39;re saying the 45 minutes I&#39;ve wasted on #rubyonrails listening to dudes pontificating on what I&#39;m doing wrong were in fact wasted and initializers is a good place to put the include? May as well get the points for the answer :("}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1421296362, "post_id": 27937490, "comment_id": 44308216, "body": "Sure thing, if you like :) Sorry you had to waste so much time on pontificators... people do like to share their opinions :("}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 1, "last_activity_date": 1421296400, "creation_date": 1421296400, "answer_id": 27956851, "question_id": 27937490, "link": "https://stackoverflow.com/questions/27937490/where-to-place-an-include-for-it-to-be-available-for-the-entire-rails-app/27956851#27956851", "title": "Where to place an Include for it to be available for the entire Rails app?", "body": "<p>high level includes could go in application.rb but an intitializer is a good enough place to put stuff like this.</p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 27956851, "answer_count": 1, "score": 0, "last_activity_date": 1421296400, "creation_date": 1421219194, "question_id": 27937490, "link": "https://stackoverflow.com/questions/27937490/where-to-place-an-include-for-it-to-be-available-for-the-entire-rails-app", "title": "Where to place an Include for it to be available for the entire Rails app?", "body": "<p>I want to use the <code>term-ansicolor</code> gem to help me out developing and debugging. </p>\n\n<p>Simply requiring it in the Gemfile isn't enough as somewhere in the app, <code>include Term::ANSIColor</code> must show up. </p>\n\n<p>I created a <code>config/initializers/colors.rb</code> and it worked as intended, but an initializer doesn't seem like the right place for it.</p>\n\n<p>Where is the ideal place for this include statement?</p>\n\n<p>I'm running rails version 4.2, if it makes any difference.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421218898, "post_id": 27937323, "comment_id": 44271471, "body": "hi, Chris, Your edit has changed my string, I don&#39;t know why, when I am taking it right now, it works fine, my string was this,a=&quot;01.    L-1-A-RA-REVENUE ACCOUNT&quot; b=&quot;01.    L-1-A-RA-REVENUE ACCOUNT&quot;"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1421224425, "post_id": 27937323, "comment_id": 44273727, "body": "Cannot be reproduced."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1421229969, "post_id": 27937323, "comment_id": 44276672, "body": "To me, it seems like there might be some strange whitespace or control characters in the strings that are not rendered properly. See <a href=\"http://meta.stackoverflow.com/q/283441/1639625\">this question on meta</a>."}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421219307, "post_id": 27937488, "comment_id": 44271647, "body": "I used same result, Hi, when I am posting, the space in B got automatically removed, I don&#39;t know why. So I couldn&#39;t properly bring my string there."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421219408, "post_id": 27937488, "comment_id": 44271685, "body": "@RAJ, I&#39;m having some trouble understanding you. Does my code work for you?"}, {"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1421219703, "post_id": 27937488, "comment_id": 44271810, "body": "So, do you say your val in b is same as a in your question..?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1421219795, "post_id": 27937488, "comment_id": 44271847, "body": "@Breenho yes b value is same as a, but it&#39;s not appearing"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421219838, "post_id": 27937488, "comment_id": 44271867, "body": "@Dbz hi,  b value is same as a while I am typing, but it&#39;s not appearing in the comment."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421219923, "post_id": 27937488, "comment_id": 44271898, "body": "@RAJ I understand. Try using my code and tell me if it works. If it doesn&#39;t work, add these lines: <code>puts a</code> and <code>puts b</code>, and see if they&#39;re outputting the same thing."}, {"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 1, "creation_date": 1421220403, "post_id": 27937488, "comment_id": 44272068, "body": "@Raj, Please copy those two strings into some other editor and try to paste here from your editor. Also, check if string a has tabs between characters and b has spaces between characters. Or try to print a and b in console and paste here as DBZ suggested.."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421221270, "post_id": 27937488, "comment_id": 44272410, "body": "@Dbz the way you suggested doesn&#39;t work, it&#39;s printing the same, however I found the problem right now, I just used to a.each_byte, First string is printing 160 and second string is printing 32 in the place of space."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1421221338, "post_id": 27937488, "comment_id": 44272429, "body": "@Breenho I replied to Dbz what&#39;s the problem and I resolved now, please read the above comment of mine."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": false, "score": -1, "last_activity_date": 1421219190, "creation_date": 1421219190, "answer_id": 27937488, "question_id": 27937323, "link": "https://stackoverflow.com/questions/27937323/string-matching-doesnt-work-as-expected/27937488#27937488", "title": "String matching doesn&#39;t work as expected", "body": "<p>Try using <code>==</code>.</p>\n\n<pre><code>a=\"01. L-1-A-RA-REVENUE ACCOUNT\"\nb=\"01. L-1-A-RA-REVENUE ACCOUNT\"\nputs a == b\n</code></pre>\n\n<p>This returned true for me.</p>\n"}, {"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421324415, "post_id": 27940744, "comment_id": 44319685, "body": "hi, Thanks,I got the answer yesterday,Yes you are right, one string consist of right spaces, another one consist of non printable special character and it&#39;s ascii values if 160."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421388724, "post_id": 27940744, "comment_id": 44348409, "body": "hi, I kept on telling people I do not know how to accept answer here, If you tell me, I would do it."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1421398260, "post_id": 27940744, "comment_id": 44351891, "body": "@RAJ Um, sure... you see that number at the top-left of the question? Below that number, there should be a grey checkmark icon. If you click that icon, it should turn green and the answer is accepted. Its also explained in the <a href=\"http://stackoverflow.com/tour\">tour</a>."}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1421231236, "last_edit_date": 1495542329, "creation_date": 1421231236, "answer_id": 27940744, "question_id": 27937323, "link": "https://stackoverflow.com/questions/27937323/string-matching-doesnt-work-as-expected/27940744#27940744", "title": "String matching doesn&#39;t work as expected", "body": "<p>After <a href=\"https://meta.stackoverflow.com/q/283441/1639625\">some research on meta</a>, it looks like the spaces in <code>a</code> are non-breaking spaces, while those in <code>b</code> are regular spaces. You can see this in the <a href=\"https://stackoverflow.com/revisions/5a86d752-504f-4cc3-8ff7-5831565a37e0/view-source\">source for revision one of your question</a>:</p>\n\n<pre><code>&lt;pre style=\"width:650px; white-space:pre-wrap\"&gt;hi I have written this small piece of code,\n\na=&amp;quot;01.&amp;#160;&amp;#160;&amp;#160;&amp;#160;L-1-A-RA-REVENUE ACCOUNT&amp;quot;\n\nb=&amp;quot;01.    L-1-A-RA-REVENUE ACCOUNT&amp;quot;\n\nputs a.eql?b\n\nThis give me the result of false while these strings are absolutely equal, Can any one tell me what&amp;#39;s the problem here? &lt;/pre&gt;\n</code></pre>\n\n<p>Not really sure how this could happen; maybe you copied those strings from some HTML document?</p>\n"}], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 27940744, "answer_count": 2, "score": 1, "last_activity_date": 1421231236, "creation_date": 1421218532, "last_edit_date": 1421224539, "question_id": 27937323, "link": "https://stackoverflow.com/questions/27937323/string-matching-doesnt-work-as-expected", "title": "String matching doesn&#39;t work as expected", "body": "<p>I wrote this piece of code,</p>\n\n<pre><code>a=\"01. L-1-A-RA-REVENUE ACCOUNT\"\nb=\"01. L-1-A-RA-REVENUE ACCOUNT\"\nputs a.eql?b\n</code></pre>\n\n<p>This give me <code>false</code> while these strings are equal. Can anyone tell me what the problem is here?</p>\n"}, {"tags": ["ruby", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421218398, "post_id": 27937268, "comment_id": 44271296, "body": "This seems so unintuitive to me. In Java and C#, this never happens."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 10, "creation_date": 1421220290, "post_id": 27937268, "comment_id": 44272033, "body": "Just use <code>line[-1]</code>. I\u2019m not sure why everyone\u2019s answering with <code>line[-1, 1]</code>."}, {"owner": {"reputation": 759, "user_id": 5275921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qxaFpqE-2Is/AAAAAAAAAAI/AAAAAAAAAE8/ZKT1vU2unAg/photo.jpg?sz=128", "display_name": "Pierre Ferry", "link": "https://stackoverflow.com/users/5275921/pierre-ferry"}, "edited": false, "score": 0, "creation_date": 1531908658, "post_id": 27937268, "comment_id": 89769393, "body": "Also, your code kinda works, the &#39;strange number&#39; you are seeing is <code>;</code> ASCII code. Every characters has a corresponding ascii code ( <a href=\"https://www.asciitable.com/\" rel=\"nofollow noreferrer\">asciitable.com</a>). You can use for conversation<code>last_char.chr</code>, it should output <code>;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421218567, "post_id": 27937321, "comment_id": 44271340, "body": "Thanks. But, can you also show me a solution which uses my logic ?"}, {"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421219256, "post_id": 27937321, "comment_id": 44271620, "body": "line.slice(line.length - 1) - Also gives the same output I was getting. It looks like this is a problem with ruby version &lt; 1.9.x. Also read Yu Hao&#39;s answer."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421219987, "post_id": 27937321, "comment_id": 44271918, "body": "yeah I read that. Sorry I was on ruby2.0 so could not validate your example."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 61, "last_activity_date": 1509442542, "last_edit_date": 1509442542, "creation_date": 1421218519, "answer_id": 27937321, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/27937321#27937321", "title": "Get last character in string", "body": "<p><strong>UPDATE:</strong>\nI keep getting constant up votes on this, hence the edit. Using <code>[-1, 1]</code> is correct, however a better looking solution would be using just <code>[-1]</code>. Check Oleg Pischicov's answer.</p>\n\n<pre><code>line[-1]\n# =&gt; \"c\"\n</code></pre>\n\n<p><strong>Original Answer</strong></p>\n\n<p>In ruby you can use <code>[-1, 1]</code> to get last char of a string. Here:</p>\n\n<pre><code>line = \"abc;\"\n# =&gt; \"abc;\"\nline[-1, 1]\n# =&gt; \";\"\n\nteststr = \"some text\"\n# =&gt; \"some text\"\nteststr[-1, 1]\n# =&gt; \"t\"\n</code></pre>\n\n<p><strong>Explanation:</strong> \nStrings can take a negative index, which count backwards from the end\nof the String, and an length of how many characters you want (one in\nthis example). </p>\n\n<p>Using <a href=\"http://ruby-doc.org/core-2.0/String.html#method-i-slice\" rel=\"noreferrer\"><code>String#slice</code></a> as in OP's example: (<em>will work only on ruby 1.9 onwards as explained in Yu Hau's answer</em>)</p>\n\n<pre><code>line.slice(line.length - 1)\n# =&gt; \";\"\nteststr.slice(teststr.length - 1)\n# =&gt; \"t\"\n</code></pre>\n\n<p><strong><em>Let's go nuts!!!</em></strong></p>\n\n<pre><code>teststr.split('').last\n# =&gt; \"t\"\nteststr.split(//)[-1]\n# =&gt; \"t\"\nteststr.chars.last\n# =&gt; \"t\"\nteststr.scan(/.$/)[0]\n# =&gt; \"t\"\nteststr[/.$/]\n# =&gt; \"t\"\nteststr[teststr.length-1]\n# =&gt; \"t\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421219428, "post_id": 27937355, "comment_id": 44271698, "body": "I had a feeling this funky behavior had something to with my old ruby version.  Thanks."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 6, "last_activity_date": 1421218985, "last_edit_date": 1421218985, "creation_date": 1421218653, "answer_id": 27937355, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/27937355#27937355", "title": "Get last character in string", "body": "<p>You can use <code>a[-1, 1]</code> to get the last character.</p>\n\n<p>You get unexpected result because the return value of <code>String#[]</code> changed. You are using Ruby 1.8.7 while referring the the document of Ruby 2.0</p>\n\n<p>Prior to Ruby 1.9, it returns an integer character code. Since Ruby 1.9, it returns the character itself.</p>\n\n<p><a href=\"http://ruby-doc.org/core-1.8.7/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[]</code> in Ruby 1.8.7</a>: </p>\n\n<blockquote>\n<pre><code>str[fixnum] =&gt; fixnum or nil\n</code></pre>\n</blockquote>\n\n<p><a href=\"http://ruby-doc.org/core-2.0/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[]</code> in Ruby 2.0</a>:</p>\n\n<blockquote>\n<pre><code>str[index] \u2192 new_str or nil\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421219395, "post_id": 27937475, "comment_id": 44271678, "body": "No. It does not help. It gives me 59"}, {"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "reply_to_user": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1421219516, "post_id": 27937475, "comment_id": 44271729, "body": "is that really a string..? what does it return if you print this &quot;your string&quot;.class ..? String or something else..?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1421242899, "post_id": 27937475, "comment_id": 44283927, "body": "This is the correct behavior for Ruby pre-1.9. The OP mentioned that he uses Ruby 1.8.7, an old, obsolete, deprecated, unmaintained version."}], "tags": [], "owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "is_accepted": false, "score": 0, "last_activity_date": 1421220048, "last_edit_date": 1421220048, "creation_date": 1421219153, "answer_id": 27937475, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/27937475#27937475", "title": "Get last character in string", "body": "<p><strong>Slice()</strong> method will do for you.</p>\n\n<p>For Ex </p>\n\n<pre><code> \"hello\".slice(-1)\n # =&gt; \"o\"\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 3632320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c5873e8c16de179502c512ed196178?s=128&d=identicon&r=PG&f=1", "display_name": "Aram", "link": "https://stackoverflow.com/users/3632320/aram"}, "is_accepted": false, "score": 1, "last_activity_date": 1421220902, "creation_date": 1421220902, "answer_id": 27937856, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/27937856#27937856", "title": "Get last character in string", "body": "<p>In ruby you can use something like this:</p>\n\n<pre><code>ending = str[-n..-1] || str\n</code></pre>\n\n<p>this return last n characters</p>\n"}, {"comments": [{"owner": {"reputation": 5654, "user_id": 553095, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Oq777.jpg?s=128&g=1", "display_name": "emeth", "link": "https://stackoverflow.com/users/553095/emeth"}, "edited": false, "score": 1, "creation_date": 1452568998, "post_id": 27944615, "comment_id": 57216349, "body": "This is much simpler than others."}], "tags": [], "owner": {"reputation": 602, "user_id": 4173097, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001533759378/picture?type=large", "display_name": "Oleg Pischicov", "link": "https://stackoverflow.com/users/4173097/oleg-pischicov"}, "is_accepted": false, "score": 44, "last_activity_date": 1421243736, "creation_date": 1421243736, "answer_id": 27944615, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/27944615#27944615", "title": "Get last character in string", "body": "<p>Just use \"-1\" index:</p>\n\n<pre><code>a = \"hello there\"\n\na[-1] #=&gt; \"e\"\n</code></pre>\n\n<p>It's the simplest solution.</p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 1262904, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/faff411a9ca427b444717ca9044a8e4f?s=128&d=identicon&r=PG", "display_name": "victorhazbun", "link": "https://stackoverflow.com/users/1262904/victorhazbun"}, "is_accepted": false, "score": 6, "last_activity_date": 1455562814, "creation_date": 1455562814, "answer_id": 35417074, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/35417074#35417074", "title": "Get last character in string", "body": "<p>If you are using Rails, then apply the method #last to your string, like this:</p>\n\n<pre><code>\"abc\".last\n# =&gt; c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 759, "user_id": 5275921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qxaFpqE-2Is/AAAAAAAAAAI/AAAAAAAAAE8/ZKT1vU2unAg/photo.jpg?sz=128", "display_name": "Pierre Ferry", "link": "https://stackoverflow.com/users/5275921/pierre-ferry"}, "is_accepted": false, "score": 0, "last_activity_date": 1531912757, "last_edit_date": 1531912757, "creation_date": 1531908906, "answer_id": 51399397, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/51399397#51399397", "title": "Get last character in string", "body": "<p>Your code kinda works, the 'strange number' you are seeing is <code>;</code> ASCII code. Every characters has a corresponding ascii code ( <a href=\"https://www.asciitable.com/\" rel=\"nofollow noreferrer\">https://www.asciitable.com/</a>). You can use for conversation<code>puts last_char.chr</code>, it should output <code>;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 553, "user_id": 1445986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b4d1041fb9cb5fb2ccf2caaf977567e?s=128&d=identicon&r=PG", "display_name": "ComDubh", "link": "https://stackoverflow.com/users/1445986/comdubh"}, "edited": false, "score": 2, "creation_date": 1589139639, "post_id": 52191322, "comment_id": 109168852, "body": "This assumes you&#39;re using Rails. The question was about Ruby."}], "tags": [], "owner": {"reputation": 1149, "user_id": 2432738, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/su3bJ.jpg?s=128&g=1", "display_name": "Jade Hamel", "link": "https://stackoverflow.com/users/2432738/jade-hamel"}, "is_accepted": false, "score": 0, "last_activity_date": 1536171773, "creation_date": 1536171773, "answer_id": 52191322, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string/52191322#52191322", "title": "Get last character in string", "body": "<p>I would use the method #last as the string is an array.</p>\n\n<p>To get the last character.</p>\n\n<pre><code>\"hello there\".last() #=&gt; \"e\"\n</code></pre>\n\n<p>To get the last 3 characters you can pass a number to #last.</p>\n\n<pre><code>\"hello there\".last(3) #=&gt; \"ere\"\n</code></pre>\n"}], "owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46838, "favorite_count": 3, "accepted_answer_id": 27937321, "answer_count": 8, "score": 33, "last_activity_date": 1536171773, "creation_date": 1421218308, "last_edit_date": 1421244077, "question_id": 27937268, "link": "https://stackoverflow.com/questions/27937268/get-last-character-in-string", "title": "Get last character in string", "body": "<p>I want to get the last character in a string MY WAY - 1) Get last index 2) Get character at last index, as a STRING. After that I will compare the string with another, but I won't include that part of code here. I tried the code below and I get a strange number instead. I am using ruby 1.8.7.</p>\n\n<p>Why is this happening and how do I do it ?</p>\n\n<pre><code>line = \"abc;\"\nlast_index = line.length-1\nputs \"last index = #{last_index}\"\nlast_char = line[last_index]\nputs last_char\n</code></pre>\n\n<p>Output-</p>\n\n<pre><code>last index = 3\n59\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.0/String.html#method-i-slice\">Ruby docs</a> told me that array slicing works this way - </p>\n\n<pre><code>a = \"hello there\"\na[1] #=&gt; \"e\"\n</code></pre>\n\n<p>But, in my code it does not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 1313, "user_id": 441960, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2aed17e12a9af477e77053aacb7ce75a?s=128&d=identicon&r=PG", "display_name": "Purplejacket", "link": "https://stackoverflow.com/users/441960/purplejacket"}, "edited": false, "score": 0, "creation_date": 1537295130, "post_id": 27938534, "comment_id": 91730191, "body": "Nowadays it&#39;s <code>FactoryBot</code>, so replace the middle line with: <code>config.include FactoryBot::Syntax::Methods</code>"}], "tags": [], "owner": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "is_accepted": true, "score": 17, "last_activity_date": 1537301793, "last_edit_date": 1537301793, "creation_date": 1421223843, "answer_id": 27938534, "question_id": 27936849, "link": "https://stackoverflow.com/questions/27936849/create-method-in-rspec/27938534#27938534", "title": "create method in Rspec", "body": "<p>It looks like <code>create</code> is called from <code>FactoryBot</code>.</p>\n\n<p>Usually you need to create object like <code>FactoryBot.create(:user)</code> but if you configure factory bot </p>\n\n<pre><code>RSpec.configure do |config|\n  config.include FactoryBot::Syntax::Methods\nend\n</code></pre>\n\n<p>(see <a href=\"https://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md#configure-your-test-suite\" rel=\"noreferrer\">this</a>) you can omit <code>FactoryBot</code> and use short variant <code>create(:user)</code>.</p>\n\n<p>So your code creates factory <code>practice</code> with creator which is created by another factory <code>physician</code>.</p>\n"}], "owner": {"reputation": 2194, "user_id": 2086124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c67773f6baa7837df50a17a42fd79b9f?s=128&d=identicon&r=PG", "display_name": "Adnan Ali", "link": "https://stackoverflow.com/users/2086124/adnan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7467, "favorite_count": 2, "accepted_answer_id": 27938534, "answer_count": 1, "score": 14, "last_activity_date": 1537301793, "creation_date": 1421216069, "last_edit_date": 1527757986, "question_id": 27936849, "link": "https://stackoverflow.com/questions/27936849/create-method-in-rspec", "title": "create method in Rspec", "body": "<p>I need to understand this line of code in Rspec. </p>\n\n<pre><code>create(:practice, creator: create(:physician, password: \"password123\", password_confirmation: \"password123\" ), phone: \"+1 (555) 555-5554\", office: \"+1 (555) 555-5555\", clinic_key: \"abc123\")\n</code></pre>\n\n<p>What is this <strong>create</strong> function. It is not built in rails or ruby function. Do we have its documentation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "edited": false, "score": 0, "creation_date": 1421213191, "post_id": 27936316, "comment_id": 44269620, "body": "Do you mean the URL exactly is &#39;facebook.com&#39; or can it be &#39;mfacebook.com&#39;, &#39;test-facebook.com&#39; etc.?"}, {"owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "reply_to_user": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "edited": false, "score": 0, "creation_date": 1421213580, "post_id": 27936316, "comment_id": 44269738, "body": "As in &quot;facebook.com/blahblahblah&quot;. I guess then someone could get passed it by inputing something like &quot;test-facebook.com&quot;, but I have no idea how to validate something like that."}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 2109033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8444780b739d772b782d7fa2c954755?s=128&d=identicon&r=PG", "display_name": "Alfonso", "link": "https://stackoverflow.com/users/2109033/alfonso"}, "is_accepted": true, "score": 4, "last_activity_date": 1421216163, "last_edit_date": 1421216163, "creation_date": 1421215373, "answer_id": 27936710, "question_id": 27936316, "link": "https://stackoverflow.com/questions/27936316/validation-to-contain-a-certain-string-rails/27936710#27936710", "title": "Validation to contain a certain string Rails", "body": "<p>The regular expression would be:</p>\n\n<pre><code>\\A((http|https):\\/\\/)?(www.)?facebook.com\\/\n</code></pre>\n\n<p>Will match a string that contains a valid facebook url:</p>\n\n<ul>\n<li>facebook.com/</li>\n<li>www.facebook.com/</li>\n<li><a href=\"https://facebook.com/\" rel=\"nofollow\">https://facebook.com/</a></li>\n<li><a href=\"https://www.facebook.com/\" rel=\"nofollow\">https://www.facebook.com/</a></li>\n<li><a href=\"http://facebook.com/\" rel=\"nofollow\">http://facebook.com/</a></li>\n<li><a href=\"http://www.facebook.com/\" rel=\"nofollow\">http://www.facebook.com/</a></li>\n</ul>\n\n<p>Now, to validate your rails model use rails validations on your model file like this:</p>\n\n<pre><code>validates :facebook_url, format: { with: /\\A((http|https):\\/\\/)?(www.)?facebook.com\\//,\nmessage: \"use a valid facebook url\" }\n</code></pre>\n\n<p>Using your example code, would be:</p>\n\n<pre><code>if self.facebook_url.match(/\\A((http|https):\\/\\/)?(www.)?facebook.com\\//)\n # valid facebook url\nelse\n # invalid facebook url\nend\n</code></pre>\n\n<p>You can test the regular expression on <a href=\"http://www.rubular.com\" rel=\"nofollow\">www.rubular.com</a></p>\n"}], "owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 0, "accepted_answer_id": 27936710, "answer_count": 1, "score": 1, "last_activity_date": 1421216163, "creation_date": 1421212911, "question_id": 27936316, "link": "https://stackoverflow.com/questions/27936316/validation-to-contain-a-certain-string-rails", "title": "Validation to contain a certain string Rails", "body": "<p>I have a parameter in one of my models called \"facebook_url\". How can I be sure the user input contains \"facebook.com\" and isn't some random website?</p>\n\n<p>Right now I have: </p>\n\n<pre><code>unless self.facebook_url[/\\Afacebook.com\\/\\//]\n  self.facebook_url = \"\" unless self.facebook_url == \"\"\nend\n</code></pre>\n\n<p>But this isn't really working how I want it.</p>\n"}, {"tags": ["ruby", "ramaze"], "answers": [{"tags": [], "owner": {"reputation": 15547, "user_id": 467722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467a3f5b33235ca4d0d4192ade76f7da?s=128&d=identicon&r=PG", "display_name": "leucos", "link": "https://stackoverflow.com/users/467722/leucos"}, "is_accepted": true, "score": 0, "last_activity_date": 1421240493, "creation_date": 1421240493, "answer_id": 27943572, "question_id": 27935766, "link": "https://stackoverflow.com/questions/27935766/most-ruby-like-way-of-combining-two-controllers-in-ramaze/27943572#27943572", "title": "Most &quot;ruby-like&quot; way of combining two controllers in Ramaze", "body": "<p>The usual way to do it is to require your controllers in <code>init.rb</code>, and define each class in it own file, and require it in init like so :</p>\n\n<p>controller/init.rb :</p>\n\n<pre><code># Load all other controllers\nrequire __DIR__('my_controller')\nrequire __DIR__('my_other_controller')\n</code></pre>\n\n<p>controller/my_controller.rb :</p>\n\n<pre><code>class MyController &lt; Ramaze::Controller\n  engine :Erubis\n\n  def index\n    @message = \"hi\"\n  end\n\n  # this will be fetched via /mycontroller/hello\n  def hello\n    @message = \"hello from MyController\"\n  end\nend\n</code></pre>\n\n<p>controller/my_other_controller.rb :</p>\n\n<pre><code>class MyOtherController &lt; Ramaze::Controller\n  engine :Erubis\n\n  def index\n    @message = \"hi\"\n  end\n\n  # this will be fetched via /myothercontroller/hello\n  def hello\n    @message = \"hello from MyOtherController\"\n  end\nend\n</code></pre>\n\n<p>You can create a base class you inherit from so you don't have to repeat <code>engine :Erubis</code> line (and probably others) in each class.</p>\n\n<p>If you want to serve <code>MyController</code> at the '/' URI, you can map it to '/' :</p>\n\n<pre><code>class MyController &lt; Ramaze::Controller\n  # map to '/' so we can call '/hello'\n  map '/'\n  ...\n</code></pre>\n\n<p>You can peek at the blog example for an example: <a href=\"https://github.com/Ramaze/ramaze/tree/master/examples/app/blog\" rel=\"nofollow\">https://github.com/Ramaze/ramaze/tree/master/examples/app/blog</a></p>\n"}], "owner": {"reputation": 1695, "user_id": 854854, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/66b2639b3ceb68d53e7ce0327d38caf6?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/854854/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 27943572, "answer_count": 1, "score": 0, "last_activity_date": 1421240493, "creation_date": 1421208896, "question_id": 27935766, "link": "https://stackoverflow.com/questions/27935766/most-ruby-like-way-of-combining-two-controllers-in-ramaze", "title": "Most &quot;ruby-like&quot; way of combining two controllers in Ramaze", "body": "<p><strong>How can I split up my codebase in Ramaze into different controller classes, and what is the most \"ruby-like\" way of doing so?</strong></p>\n\n<p>I have a basic project in Ramaze that I want to split into multiple files. Right now, I am using one controller class for everything and adding on to it with open classes. Ideally, each distinct part of the controller would be in its own class, but I don't know how to do that in Ramaze.</p>\n\n<p>I want be able to add more functionality, and more separate controller classes, without adding on too much boilerplate code. Here's what I'm doing right now:</p>\n\n<p>init.rb</p>\n\n<pre><code>require './othercontroller.rb'\n\nclass MyController &lt; Ramaze::Controller\n  map '/'\n  engine :Erubis\n\n  def index\n    @message = \"hi\"\n  end\nend\nRamaze.start :port =&gt; 8000\n</code></pre>\n\n<p>othercontroller.rb</p>\n\n<pre><code>class MyController &lt; Ramaze::Controller\n  def hello\n    @message = \"hello\"\n  end\nend\n</code></pre>\n\n<p>Any suggestions on how to split up this logic would be very appreciated.</p>\n"}, {"tags": ["ruby", "sqlite", "sinatra", "datamapper"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1421207972, "post_id": 27935447, "comment_id": 44268430, "body": "wrap signup.update in flow control.  <code>signup ? signup.update! : puts c_array[0]</code>  Your array has a value your database doesn&#39;t"}], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 1028379, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fa6d1168b18ab7a8b6af58c73bc4408f?s=128&d=identicon&r=PG", "display_name": "Sonny Parlin", "link": "https://stackoverflow.com/users/1028379/sonny-parlin"}, "edited": false, "score": 0, "creation_date": 1421228142, "post_id": 27936178, "comment_id": 44275589, "body": "Thank you @Rustam. Your solution made perfect sense. I just had to modify it slightly to do the update on one line. <code>signup.update(:created_at =&gt; c_array[1])</code> and remove <code>signup.update!</code>. It had been a long day and I needed to rest. :)"}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1421211934, "creation_date": 1421211934, "answer_id": 27936178, "question_id": 27935447, "link": "https://stackoverflow.com/questions/27935447/cant-update-database-inside-of-ruby-loop/27936178#27936178", "title": "Can&#39;t update database inside of ruby loop", "body": "<p>Seems like you don't always have <code>Signup</code> with <code>customer_id</code> from your array and sometimes it returns <code>nil</code> instead of <code>Signup</code> object. Simply add a following check:</p>\n\n<pre><code>cids.each do |c_array|\n  puts c_array[0]\n  signup = Signup.first(:customer_id =&gt; c_array[0])\n  puts \"signup is \" + signup.inspect\n  unless signup.nil?\n    signup.created_at = c_array[1]  \n    signup.update!\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 807, "user_id": 1028379, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fa6d1168b18ab7a8b6af58c73bc4408f?s=128&d=identicon&r=PG", "display_name": "Sonny Parlin", "link": "https://stackoverflow.com/users/1028379/sonny-parlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 27936178, "answer_count": 1, "score": 0, "last_activity_date": 1421213753, "creation_date": 1421206475, "last_edit_date": 1421213753, "question_id": 27935447, "link": "https://stackoverflow.com/questions/27935447/cant-update-database-inside-of-ruby-loop", "title": "Can&#39;t update database inside of ruby loop", "body": "<p>This code displays the signup, which shows data.</p>\n\n<pre><code> cids.each {|c_array|\n    puts c_array[0]\n    signup = Signup.first(:customer_id =&gt; c_array[0])\n    #signup.created_at = c_array[1]\n    puts \"signup is \" + signup.inspect\n    #signup.update!\n  }\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>signup is #&lt;Signup @id=1 @user_id=1 @customer_id=74843293 @company_id=6 @created_at=Thu, 08 Jan 2015 22:21:43 -0500 @updated_at=Thu, 08 Jan 2015 22:21:43 -0500&gt;\n\nsignup is #&lt;Signup @id=2 @user_id=1 @customer_id=67170279 @company_id=6 @created_at=Thu, 08 Jan 2015 22:21:43 -0500 @updated_at=Thu, 08 Jan 2015 22:21:43 -0500&gt;\n\nsignup is #&lt;Signup @id=3 @user_id=1 @customer_id=69079324 @company_id=6 @created_at=Thu, 08 Jan 2015 22:21:44 -0500 @updated_at=Thu, 08 Jan 2015 22:21:44 -0500&gt;\n\nsignup is #&lt;Signup @id=4 @user_id=1 @customer_id=60434274 @company_id=6 @created_at=Thu, 08 Jan 2015 22:21:44 -0500 @updated_at=Thu, 08 Jan 2015 22:21:44 -0500&gt;\n</code></pre>\n\n<p>And so forth.</p>\n\n<p>But when I uncomment the other two lines:</p>\n\n<pre><code> cids.each {|c_array|\n    puts c_array[0]\n    signup = Signup.first(:customer_id =&gt; c_array[0])\n    signup.created_at = c_array[1]\n    puts \"signup is \" + signup.inspect\n    signup.update!\n  }\n</code></pre>\n\n<p>It breaks:</p>\n\n<pre><code>NoMethodError - undefined method `created_at=' for nil:NilClass:\n    customerController.rb:49:in `block (2 levels) in &lt;class:CustomerController&gt;'\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "devise"], "comments": [{"owner": {"reputation": 20945, "user_id": 1265660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WFK9j.jpg?s=128&g=1", "display_name": "Masudul", "link": "https://stackoverflow.com/users/1265660/masudul"}, "edited": false, "score": 2, "creation_date": 1421206339, "post_id": 27935407, "comment_id": 44268037, "body": "Set the development environment to heroku and see the stack trace of error."}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "edited": false, "score": 0, "creation_date": 1421206877, "post_id": 27935407, "comment_id": 44268174, "body": "Which version of devise, ruby etc are you using?"}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "reply_to_user": {"reputation": 20945, "user_id": 1265660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WFK9j.jpg?s=128&g=1", "display_name": "Masudul", "link": "https://stackoverflow.com/users/1265660/masudul"}, "edited": false, "score": 0, "creation_date": 1421207543, "post_id": 27935407, "comment_id": 44268316, "body": "@Masud how do I go about doing that?"}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "reply_to_user": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "edited": false, "score": 0, "creation_date": 1421207572, "post_id": 27935407, "comment_id": 44268319, "body": "@heading_to_tahiti I added the version numbers. Let me know if you need anything else."}, {"owner": {"reputation": 20945, "user_id": 1265660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WFK9j.jpg?s=128&g=1", "display_name": "Masudul", "link": "https://stackoverflow.com/users/1265660/masudul"}, "edited": false, "score": 0, "creation_date": 1421207699, "post_id": 27935407, "comment_id": 44268351, "body": "<code>heroku config:set RAILS_ENV=development</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421208003, "post_id": 27935617, "comment_id": 44268440, "body": "Yeah, when I delete the User from the heroku console and reload the page I get &quot;Welcome! You have signed up successfully.&quot; in the alerts/notices section of the site. So devise seems to be working. I will edit the root URL attributes and report back. Thanks"}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421208762, "post_id": 27935617, "comment_id": 44268593, "body": "still no luck, I removed all the content from the homepage and just went to the /users/sign_up url. Once I signed up, I still get a status 500 for the &quot;/&quot; path"}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "reply_to_user": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421208988, "post_id": 27935617, "comment_id": 44268656, "body": "Ok, check your controller as well for any attribute of the User that is possibly being called and expected to be not nil."}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421209319, "post_id": 27935617, "comment_id": 44268719, "body": "I&#39;m using @user = current_user in the controller and in the root view I am using &lt;% if user_signed_in? %&gt;. I added the code explained here: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a> for the guest user."}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "reply_to_user": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421209878, "post_id": 27935617, "comment_id": 44268848, "body": "What attributes of User are you assigning when the use performs the signup action?  In your development environment go into rails console and destroy the User you have been using.  And create the fresh User through the sign_up action.  If you get 500 error there than I am right, the User you were using in dev had an extra attribute that was assigned before the problem code was put into place through your evolution of the development.  If you don&#39;t get 500 than we will move onto other possibilities."}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421210266, "post_id": 27935617, "comment_id": 44268937, "body": "Yeah I did that while trying to test. I deleted all the data from my tables to start fresh (like in production). In the console I ran User.count and it returned 0. I was able to sign up a new user on development without any problems..."}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "reply_to_user": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421210606, "post_id": 27935617, "comment_id": 44268996, "body": "Do all views fail with 500 after login or just the root?"}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421211057, "post_id": 27935617, "comment_id": 44269103, "body": "Looks like it is just the pages that display User data. I can go to static pages, but when I go to any page that relates or pulls user data to the user I get 500 errors. FYI, in my index controller I change &#39;@&#39;user = current_user to &#39;@&#39;user = current_or_guest_user to make it automatically create a guest user. It works on dev but it failed on production."}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "reply_to_user": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421252850, "post_id": 27935617, "comment_id": 44290373, "body": "Ok let&#39;s get more information from the Heroku logs as to what&#39;s failing.  Access your heroku app and perform the failing operation then run heroku logs -n 3000 to get a larger chunk of the logs.  Then store it in a doc off SO and paste the link here so I can take a look.  The log snippet you pasted above does not provide much help."}, {"owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1421276392, "post_id": 27935617, "comment_id": 44303128, "body": "I think I have it narrowed down. The problem is the way I am calling a model method in the view. Thanks for all the help."}, {"owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "reply_to_user": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "edited": false, "score": 0, "creation_date": 1423365127, "post_id": 27935617, "comment_id": 45117699, "body": "Calling a model method in the view?  What was your solution to solve this?"}], "tags": [], "owner": {"reputation": 725, "user_id": 2697490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7df5a48a0566bb81864eb8dd07fbd23?s=128&d=identicon&r=PG&f=1", "display_name": "heading_to_tahiti", "link": "https://stackoverflow.com/users/2697490/heading-to-tahiti"}, "is_accepted": false, "score": 0, "last_activity_date": 1421208033, "last_edit_date": 1421208033, "creation_date": 1421207728, "answer_id": 27935617, "question_id": 27935407, "link": "https://stackoverflow.com/questions/27935407/sign-up-with-devise-on-heroku-goes-to-a-status-500/27935617#27935617", "title": "Sign Up with Devise on Heroku goes to a status=500", "body": "<p>Since your User is being created this leads me to believe that devise may be working properly and that the error is in fact within the code for your root view.  Double check that you are not trying to call an attribute from the User that is not assigned yet.  For example in most applications on the homepage after you log in you may have a message at the top that says \"Welcome back Jim\", well if you did not create the User object with the \"first_name\" attribute it is set to nil and interpolating that string with a nil value will throw a 500 error.</p>\n\n<p>You might have missed throwing this error in development due to the evolution of your code, by assigning a value to the attribute causing the problem, before writing the code that is throwing the error on the root view.</p>\n\n<p><strong>Double check your code for any attributes of the User that are being called by the root page which were not assigned when the User was created.</strong></p>\n"}], "owner": {"reputation": 31, "user_id": 4451757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cf167a8a0a7fc3d83950b60cb537a7?s=128&d=identicon&r=PG", "display_name": "Brad Williams", "link": "https://stackoverflow.com/users/4451757/brad-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421208864, "creation_date": 1421206125, "last_edit_date": 1421208864, "question_id": 27935407, "link": "https://stackoverflow.com/questions/27935407/sign-up-with-devise-on-heroku-goes-to-a-status-500", "title": "Sign Up with Devise on Heroku goes to a status=500", "body": "<p>I have been trying to troubleshoot this all day I can't get it figured out. I have devise working on development, but when I push to Heroku it doesn't work.</p>\n\n<p>When I first push the code, the site will load and I can see the homepage. When I click the login link, I am able to go to the /users/sign_up page. </p>\n\n<p>Once I enter in the user details and hit submit I get a page that says \"We're sorry, but something went wrong.\" on the root URL.</p>\n\n<p>When I look in heroku console, the user was created. When I delete the user in the console, I can load the homepage again.. </p>\n\n<p>When I tail the logs I get the following:</p>\n\n<pre><code>    2015-01-14T03:08:35.973477+00:00 heroku[router]: at=info method=GET path=\"/\" host=herokuapp.com request_id=cd15706e-1dcf-4423-9f29-551f47b86cc3 fwd=\"99.19.1.28\" dyno=web.1 connect=0ms service=77ms status=304 bytes=732\n2015-01-14T03:08:36.139198+00:00 heroku[router]: at=info method=GET path=\"/assets/application-1dc4981637a32fd174590c5f8e6c740a.css\" host=herokuapp.com request_id=4a355fa8-1792-455f-9d7c-4af22b3592dc fwd=\"99.19.1.28\" dyno=web.1 connect=3ms service=5ms status=304 bytes=133\n2015-01-14T03:08:36.169634+00:00 heroku[router]: at=info method=GET path=\"/assets/application-6d9ad2cbcb5603db021e610fea035881.js\" host=herokuapp.com request_id=5907fef4-e1dd-4fe8-a3e8-0741d66b0675 fwd=\"99.19.1.28\" dyno=web.1 connect=2ms service=30ms status=304 bytes=133\n2015-01-14T03:08:36.677241+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=herokuapp.com request_id=7f01792c-9cad-4010-89c8-0dd632b99c34 fwd=\"99.19.1.28\" dyno=web.1 connect=17ms service=11ms status=304 bytes=133\n2015-01-14T03:14:31.571097+00:00 heroku[router]: at=info method=GET path=\"/assets/application-6d9ad2cbcb5603db021e610fea035881.js\" host=.herokuapp.com request_id=e6fd320f-bb55-41eb-8b7b-d86f9b686a7f fwd=\"99.19.1.28\" dyno=web.1 connect=0ms service=18ms status=304 bytes=133\n2015-01-14T03:14:31.393836+00:00 heroku[router]: at=info method=GET path=\"/\" host=herokuapp.com request_id=c58f55fb-93c9-45f5-8729-8732d5447c8b fwd=\"99.19.1.28\" dyno=web.1 connect=5ms service=44ms status=304 bytes=732\n2015-01-14T03:14:31.569124+00:00 heroku[router]: at=info method=GET path=\"/assets/application-1dc4981637a32fd174590c5f8e6c740a.css\" host=herokuapp.com request_id=bf530876-0d84-4b94-a0c2-f454b2dcfd99 fwd=\"99.19.1.28\" dyno=web.1 connect=1ms service=11ms status=304 bytes=133\n2015-01-14T03:14:31.822101+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=herokuapp.com request_id=c647088e-a020-4fae-96c2-902a5c04de3d fwd=\"99.19.1.28\" dyno=web.1 connect=3ms service=5ms status=304 bytes=133\n2015-01-14T03:16:05.917921+00:00 heroku[router]: at=info method=GET path=\"/users/sign_up\" host=herokuapp.com request_id=bdb7264e-cf0a-470d-849f-0456b21fdfc5 fwd=\"99.19.1.28\" dyno=web.1 connect=2ms service=20ms status=200 bytes=4637\n2015-01-14T03:16:20.955668+00:00 heroku[router]: at=info method=POST path=\"/users\" host=herokuapp.com request_id=19bf8082-f7fb-49bf-872c-54e31dee72cf fwd=\"99.19.1.28\" dyno=web.1 connect=1ms service=182ms status=302 bytes=1192\n2015-01-14T03:16:21.090669+00:00 heroku[router]: at=info method=GET path=\"/\" host=herokuapp.com request_id=8741d387-1953-4f7d-ace8-48736db9a500 fwd=\"99.19.1.28\" dyno=web.1 connect=1ms service=53ms status=500 bytes=1754\n</code></pre>\n\n<p>I have done heroku rake db:migrate a million times. </p>\n\n<p>What else can I do to try to and figure out what is going on? </p>\n\n<p>I also disabled devise :confirmable for the time being. </p>\n\n<p>ruby '2.1.5'\nrails '4.1.8'\ndevise 3.4.1\ncancancan 1.9.2</p>\n\n<p>Any of this help?</p>\n\n<pre><code>2015-01-14T04:09:45.064882+00:00 heroku[web.1]: State changed from up to starting\n2015-01-14T04:09:46.978100+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2015-01-14T04:09:47.441918+00:00 app[web.1]:    /app/vendor/ruby-2.1.5/lib/ruby/2.1.0/webrick/server.rb:170:in `select'\n2015-01-14T04:09:47.441912+00:00 app[web.1]: [2015-01-14 04:09:47] FATAL SignalException: SIGTERM\n2015-01-14T04:09:47.441940+00:00 app[web.1]:    /app/vendor/ruby-2.1.5/lib/ruby/2.1.0/webrick/server.rb:170:in `block in start'\n2015-01-14T04:09:47.441942+00:00 app[web.1]:    /app/vendor/ruby-2.1.5/lib/ruby/2.1.0/webrick/server.rb:32:in `start'\n2015-01-14T04:09:47.441946+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/rack-1.5.2/lib/rack/handler/webrick.rb:14:in `run'\n2015-01-14T04:09:47.441947+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/rack-1.5.2/lib/rack/server.rb:264:in `start'\n2015-01-14T04:09:47.441944+00:00 app[web.1]:    /app/vendor/ruby-2.1.5/lib/ruby/2.1.0/webrick/server.rb:160:in `start'\n2015-01-14T04:09:47.441954+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `server'\n2015-01-14T04:09:47.441960+00:00 app[web.1]:    bin/rails:8:in `&lt;main&gt;'\n2015-01-14T04:09:47.441955+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n2015-01-14T04:09:47.441950+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:81:in `block in server'\n2015-01-14T04:09:47.441949+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands/server.rb:69:in `start'\n2015-01-14T04:09:47.441957+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-01-14T04:09:47.481089+00:00 app[web.1]: =&gt; Rails 4.1.8 application starting in production on http://0.0.0.0:21786\n2015-01-14T04:09:47.481093+00:00 app[web.1]: =&gt; Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n2015-01-14T04:09:47.481095+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-01-14T04:09:47.481096+00:00 app[web.1]: Exiting\n2015-01-14T04:09:47.481084+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-01-14T04:09:47.441958+00:00 app[web.1]:    bin/rails:8:in `require'\n2015-01-14T04:09:47.441966+00:00 app[web.1]: [2015-01-14 04:09:47] INFO  going to shutdown ...\n2015-01-14T04:09:47.441952+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.1.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `tap'\n2015-01-14T04:09:47.441968+00:00 app[web.1]: [2015-01-14 04:09:47] INFO  WEBrick::HTTPServer#start done.\n2015-01-14T04:09:47.481091+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-01-14T04:09:48.198859+00:00 heroku[web.1]: Process exited with status 143\n2015-01-14T04:09:50.097709+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 24511 -e production`\n2015-01-14T04:09:54.054846+00:00 app[web.1]: [2015-01-14 04:09:54] INFO  ruby 2.1.5 (2014-11-13) [x86_64-linux]\n2015-01-14T04:09:54.054823+00:00 app[web.1]: [2015-01-14 04:09:54] INFO  WEBrick 1.3.1\n2015-01-14T04:09:54.055225+00:00 app[web.1]: [2015-01-14 04:09:54] INFO  WEBrick::HTTPServer#start: pid=2 port=24511\n2015-01-14T04:09:54.626003+00:00 heroku[web.1]: State changed from starting to up\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1421206475, "post_id": 27935351, "comment_id": 44268079, "body": "You should probably ask this question tagged with your editor, not with Ruby. If you get your string into Ruby, your problem is already solved. The easiest way to deal with it in Ruby itself is to load it from a file - they wouldn&#39;t need escaping that way."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1421216317, "post_id": 27935487, "comment_id": 44270570, "body": "Heredoc also interpolates strings, so if <code>#{...}</code> happens to be included in the string (for which the OP hints there is a non-zero probability), you have Trouble; it&#39;s not enough to just pick out an unlikely terminator."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1421222588, "post_id": 27935487, "comment_id": 44272901, "body": "I was lazy to write about that. I fixed it."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1421222493, "last_edit_date": 1421222493, "creation_date": 1421206785, "answer_id": 27935487, "question_id": 27935351, "link": "https://stackoverflow.com/questions/27935351/setting-a-string-of-ascii-art-to-a-variable-while-escaping-special-characters/27935487#27935487", "title": "Setting a string of ASCII-art to a variable while escaping special characters", "body": "<p>Use heredoc. That is what it is for. With heredoc, you can set the terminating string to any string that does not appear in your ASCII art. Combining that with single quotes, which inactivates interpolation, you would not need to escape.</p>\n\n<pre><code>ascii_art = &lt;&lt;'SOME_SEQUENCE_THAT_DOES_NOT_APPEAR_IN_THE_ASCII_ART'\n                                      .....'',;;::cccllllllllllllcccc:::;;,,,''...'',,'..\n                            ..';cldkO00KXNNNNXXXKK000OOkkkkkxxxxxddoooddddddxxxxkkkkOO0XXKx:.\n                      .':ok0KXXXNXK0kxolc:;;,,,,,,,,,,,;;,,,''''''',,''..              .'lOXKd'\n                 .,lx00Oxl:,'............''''''...................    ...,;;'.             .oKXd.\n              .ckKKkc'...'',:::;,'.........'',;;::::;,'..........'',;;;,'.. .';;'.           'kNKc.\n           .:kXXk:.    ..       ..................          .............,:c:'...;:'.         .dNNx.\n          :0NKd,          .....''',,,,''..               ',...........',,,'',,::,...,,.        .dNNx.\n         .xXd.         .:;'..         ..,'             .;,.               ...,,'';;'. ...       .oNNo\n         .0K.         .;.              ;'              ';                      .'...'.           .oXX:\n        .oNO.         .                 ,.              .     ..',::ccc:;,..     ..                lXX:\n       .dNX:               ......       ;.                'cxOKK0OXWWWWWWWNX0kc.                    :KXd.\n     .l0N0;             ;d0KKKKKXK0ko:...              .l0X0xc,...lXWWWWWWWWKO0Kx'                   ,ONKo.\n   .lKNKl...'......'. .dXWN0kkk0NWWWWWN0o.            :KN0;.  .,cokXWWNNNNWNKkxONK: .,:c:.      .';;;;:lk0XXx;\n  :KN0l';ll:'.         .,:lodxxkO00KXNWWWX000k.       oXNx;:okKX0kdl:::;'',;coxkkd, ...'. ...'''.......',:lxKO:.\n oNNk,;c,'',.                      ...;xNNOc,.         ,d0X0xc,.     .dOd,           ..;dOKXK00000Ox:.   ..''dKO,\n'KW0,:,.,:..,oxkkkdl;'.                'KK'              ..           .dXX0o:'....,:oOXNN0d;.'. ..,lOKd.   .. ;KXl.\n;XNd,;  ;. l00kxoooxKXKx:..ld:         ;KK'                             .:dkO000000Okxl;.   c0;      :KK;   .  ;XXc\n'XXdc.  :. ..    '' 'kNNNKKKk,      .,dKNO.                                   ....       .'c0NO'      :X0.  ,.  xN0.\n.kNOc'  ,.      .00. ..''...      .l0X0d;.             'dOkxo;...                    .;okKXK0KNXx;.   .0X:  ,.  lNX'\n ,KKdl  .c,    .dNK,            .;xXWKc.                .;:coOXO,,'.......       .,lx0XXOo;...oNWNXKk:.'KX;  '   dNX.\n  :XXkc'....  .dNWXl        .';l0NXNKl.          ,lxkkkxo' .cK0.          ..;lx0XNX0xc.     ,0Nx'.','.kXo  .,  ,KNx.\n   cXXd,,;:, .oXWNNKo'    .'..  .'.'dKk;        .cooollox;.xXXl     ..,cdOKXXX00NXc.      'oKWK'     ;k:  .l. ,0Nk.\n    cXNx.  . ,KWX0NNNXOl'.           .o0Ooldk;            .:c;.':lxOKKK0xo:,.. ;XX:   .,lOXWWXd.      . .':,.lKXd.\n     lXNo    cXWWWXooNWNXKko;'..       .lk0x;       ...,:ldk0KXNNOo:,..       ,OWNOxO0KXXNWNO,        ....'l0Xk,\n     .dNK.   oNWWNo.cXK;;oOXNNXK0kxdolllllooooddxk00KKKK0kdoc:c0No        .'ckXWWWNXkc,;kNKl.          .,kXXk,\n      'KXc  .dNWWX;.xNk.  .kNO::lodxkOXWN0OkxdlcxNKl,..        oN0'..,:ox0XNWWNNWXo.  ,ONO'           .o0Xk;\n      .ONo    oNWWN0xXWK, .oNKc       .ONx.      ;X0.          .:XNKKNNWWWWNKkl;kNk. .cKXo.           .ON0;\n      .xNd   cNWWWWWWWWKOkKNXxl:,'...;0Xo'.....'lXK;...',:lxk0KNWWWWNNKOd:..   lXKclON0:            .xNk.\n      .dXd   ;XWWWWWWWWWWWWWWWWWWNNNNNWWNNNNNNNNNWWNNNNNNWWWWWNXKNNk;..        .dNWWXd.             cXO.\n      .xXo   .ONWNWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWNNK0ko:'..OXo          'l0NXx,              :KK,\n      .OXc    :XNk0NWXKNWWWWWWWWWWWWWWWWWWWWWNNNX00NNx:'..       lXKc.     'lONN0l.              .oXK:\n      .KX;    .dNKoON0;lXNkcld0NXo::cd0NNO:;,,'.. .0Xc            lXXo..'l0NNKd,.              .c0Nk,\n      :XK.     .xNX0NKc.cXXl  ;KXl    .dN0.       .0No            .xNXOKNXOo,.               .l0Xk;.\n     .dXk.      .lKWN0d::OWK;  lXXc    .OX:       .ONx.     . .,cdk0XNXOd;.   .'''....;c:'..;xKXx,\n     .0No         .:dOKNNNWNKOxkXWXo:,,;ONk;,,,,,;c0NXOxxkO0XXNXKOdc,.  ..;::,...;lol;..:xKXOl.\n     ,XX:             ..';cldxkOO0KKKXXXXXXXXXXKKKKK00Okxdol:;'..   .';::,..':llc,..'lkKXkc.\n     :NX'    .     ''            ..................             .,;:;,',;ccc;'..'lkKX0d;.\n     lNK.   .;      ,lc,.         ................        ..,,;;;;;;:::,....,lkKX0d:.\n    .oN0.    .'.      .;ccc;,'....              ....'',;;;;;;;;;;'..   .;oOXX0d:.\n    .dN0.      .;;,..       ....                ..''''''''....     .:dOKKko;.\n     lNK'         ..,;::;;,'.........................           .;d0X0kc'.\n     .xXO'                                                 .;oOK0x:.\n      .cKKo.                                    .,:oxkkkxk0K0xc'.\n        .oKKkc,.                         .';cok0XNNNX0Oxoc,.\n          .;d0XX0kdlc:;,,,',,,;;:clodkO0KK0Okdl:,'..\n              .,coxO0KXXXXXXXKK0OOxdoc:,..\n\n                    ...\nSOME_SEQUENCE_THAT_DOES_NOT_APPEAR_IN_THE_ASCII_ART\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4181393, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/5qCpk.png?s=128&g=1", "display_name": "Socks", "link": "https://stackoverflow.com/users/4181393/socks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 27935487, "answer_count": 1, "score": 0, "last_activity_date": 1421222493, "creation_date": 1421205712, "last_edit_date": 1421206819, "question_id": 27935351, "link": "https://stackoverflow.com/questions/27935351/setting-a-string-of-ascii-art-to-a-variable-while-escaping-special-characters", "title": "Setting a string of ASCII-art to a variable while escaping special characters", "body": "<p>I'm working in Ruby and I'd like to set a huge string of ASCII-art characters to a variable, however I am running into some problems dealing with special characters.  Most ASCII-art contains octothorps and quotes and all sorts of problematic special characters that require escaping.  Is there any easy way to escape mass bulks of special characters without having to go into each and every single character one by one?</p>\n"}, {"tags": ["ruby", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1421205322, "post_id": 27935187, "comment_id": 44267834, "body": "Wait, what are you asking? What is &quot;this&quot;?"}, {"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1421205464, "post_id": 27935187, "comment_id": 44267861, "body": "Thanks, I fixed that!"}], "answers": [{"tags": [], "owner": {"reputation": 2946, "user_id": 1002965, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EHzyL.jpg?s=128&g=1", "display_name": "cedlemo", "link": "https://stackoverflow.com/users/1002965/cedlemo"}, "is_accepted": true, "score": 0, "last_activity_date": 1423338884, "creation_date": 1423338884, "answer_id": 28386647, "question_id": 27935187, "link": "https://stackoverflow.com/questions/27935187/gui-design-in-gtk/28386647#28386647", "title": "GUI design in GTK", "body": "<p>I think that you have two choices:</p>\n\n<ol>\n<li>Encapsulate different containers:</li>\n</ol>\n\n<p>Create a vertical box (Gtk::Box), add to it an horizontal box in which you add Col1 widget and Col2 widget.\nThen add your Submit button to the vertical box.</p>\n\n<p>The vertical Box should be added to the main window. This way, you can configure easily how each widgets will fill in theirs allocated spaces.</p>\n\n<ol start=\"2\">\n<li>Use a Gtk grid (which is the replacement of Gtk Table)</li>\n</ol>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 28386647, "answer_count": 1, "score": -1, "last_activity_date": 1423338884, "creation_date": 1421204395, "last_edit_date": 1421205426, "question_id": 27935187, "link": "https://stackoverflow.com/questions/27935187/gui-design-in-gtk", "title": "GUI design in GTK", "body": "<p>I am trying to use GTK with Ruby 2.0.0 to design a user interface that looks like this:</p>\n\n<pre><code>ColHead1                         ColHead2\n(box for user number input)      (box for user number input)\n\n                               SubmitBtn\n</code></pre>\n\n<p>Based on the GTK tutorials I read I got this far:</p>\n\n<pre><code>require 'gtk3'\n\nclass RubyApp &lt; Gtk::Window\n\ndef initialize\n    super   \n    init_ui\nend\n\ndef init_ui   \n\n    table = Gtk::Table.new 2, 2, true\n    submit = Gtk::Button.new :label =&gt; \"Submit Btn\"\n\n    submit.signal_connect \"clicked\" do\n        on_submit\n    end \n\n    label = Gtk::Label.new \"ColHead1\"\n\n    entry = Gtk::Entry.new\n    entry.signal_connect \"key-release-event\" do |w, e|\n        on_key_release w, e, label\n    end\n\n    set_title \"Gtk::Entry\"\n    signal_connect \"destroy\" do \n        Gtk.main_quit \n    end  \n\n    table.attach label, 0,1,0,1\n    table.attach submit, 1, 0, 1, 0\n\n        add table\n\n    set_default_size 250, 200\n    set_window_position :center\n\n    show_all        \nend  \n=begin    \ndef on_key_release sender, event, label\n    label.set_text sender.text\nend\n=end    \nend\n\nGtk.init\nwindow = RubyApp.new\nGtk.main\n</code></pre>\n\n<p>Can someone explain how to correctly implement the example gui I have shown above?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "datatables"], "comments": [{"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1421206487, "post_id": 27934883, "comment_id": 44268083, "body": "you haven&#39;t specifically identified the problem or why you have a sort issue when <code>bSortable</code> is set false"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1421206620, "post_id": 27934883, "comment_id": 44268119, "body": "I was thinking that allows the user to sort each column not default sort. I am trying to set &#39;default id desc&#39;"}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1421206878, "post_id": 27934883, "comment_id": 44268176, "body": "that is done by array , column index and direction. Sorting docs are easy to read"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1447410689, "post_id": 27987799, "comment_id": 55153148, "body": "Hey MZaragoza, I&#39;m searching for ajax/jquery sorting/searching solutions for my rails app at the moment, but most of the things I found seemed to be outdated. As of Nov 2015, could you tell me what gem/jquery-plugin/etc. I should be using?"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1447418903, "post_id": 27987799, "comment_id": 55157671, "body": "have you looked at <code>https:&#47;&#47;github.com&#47;rweng&#47;jquery-datatables-rails</code> and <a href=\"https://github.com/mislav/will_paginate\" rel=\"nofollow noreferrer\">github.com/mislav/will_paginate</a>"}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 2, "last_activity_date": 1421423658, "creation_date": 1421423658, "answer_id": 27987799, "question_id": 27934883, "link": "https://stackoverflow.com/questions/27934883/jquery-datatables-rails-not-sorting/27987799#27987799", "title": "jquery-datatables-rails not sorting", "body": "<p>on the data-tables file update the sort_column to include the columns that you want to sort </p>\n\n<pre><code>  def sort_column\n    columns = %w[id first_name company_name state email years_in_business cell work_phone equipment_desired currently_using created_by created_at id]\n    columns[params[:iSortCol_0].to_i]\n  end\n</code></pre>\n\n<p>if you just have id, its the only one that sorts </p>\n"}], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 0, "accepted_answer_id": 27987799, "answer_count": 1, "score": 0, "last_activity_date": 1421423658, "creation_date": 1421202293, "question_id": 27934883, "link": "https://stackoverflow.com/questions/27934883/jquery-datatables-rails-not-sorting", "title": "jquery-datatables-rails not sorting", "body": "<p>I am having a problem setting up default sorting on the data-tables </p>\n\n<p><strong>GEMS</strong></p>\n\n<pre><code>gem 'jquery-datatables-rails'\ngem 'will_paginate'\n</code></pre>\n\n<p><strong>CONTROLLER</strong> </p>\n\n<pre><code>  def index\n    respond_to do |format|\n      format.html\n      format.csv { send_data clients.to_csv }\n      format.xls\n      format.json {\n        render json: ClientsDatatable.new(view_context)\n       }\n    end\n  end\n</code></pre>\n\n<p><strong>datatables</strong></p>\n\n<pre><code>class ClientsDatatable\n  include Rails.application.routes.url_helpers\n  delegate :params, :h, :link_to, :mail_to, :number_to_phone, to: :@view\n\n  def initialize(view)\n    @view = view\n  end\n\n  def as_json(options = {})\n    {\n      sEcho: params[:sEcho].to_i,\n      iTotalRecords: Client.count,\n      iTotalDisplayRecords: clients.total_entries,\n      aaData: data\n    }\n  end\n\n  private\n\n  def data\n    clients.map do |client|\n      [\n        client.id.to_s + \" \" +\n        link_to('+ Equipment', new_users_equipment_path(:client_id =&gt; client), class: 'btn btn-default') +\n        link_to('+ Notes', users_add_notes_path(client), class: 'btn btn-default') +\n        link_to('+ Quote', new_users_client_document_path(client), class: 'btn btn-default'),\n        client.full_name.titleize,\n        client.company_name.titleize,\n        client.state,\n        mail_to(client.email),\n        client.years_in_business,\n        number_to_phone(client.cell),\n        number_to_phone(client.work_phone),\n        client.equipment_desired,\n        client.currently_using,\n        client.created_by_user.name,\n        client.created_at.in_time_zone('Eastern Time (US &amp; Canada)').strftime('%D %r'),\n        link_to('Edit', edit_users_client_path(client), class: 'btn btn-info') +\n        link_to('Show', users_client_path(client), class: 'btn btn-success'),\n      ]\n    end\n  end\n\n  def clients\n    @clients ||= fetch_clients\n  end\n\n  def fetch_clients\n    if params[:has_filterd] == 'true'\n      clients = User.find(params[:current_user]).created_clients.order(\"#{sort_column} #{sort_direction}\")\n    else\n      clients = Client.order(\"#{sort_column} #{sort_direction}\")\n    end\n    clients = clients.page(page).per_page(per_page)\n    if params[:sSearch].present?\n        clients = clients.where(\"\n                                  lower(first_name)         like :search or\n                                  lower(last_name)          like :search or\n                                  lower(company_name)       like :search or\n                                  lower(state)              like :search or\n                                  lower(email)              like :search or\n                                  lower(cell)               like :search or\n                                  lower(work_phone)         like :search or\n                                  lower(equipment_desired)  like :search\",\n                                  search: \"%#{params[:sSearch].downcase}%\"\n                                )\n\n    end\n    clients\n  end\n\n  def page\n    params[:iDisplayStart].to_i/per_page + 1\n  end\n\n  def per_page\n    params[:iDisplayLength].to_i &gt; 0 ? params[:iDisplayLength].to_i : 10\n  end\n\n  def sort_column\n    columns = %w[id]\n    columns[params[:iSortCol_0].to_i]\n  end\n\n  def sort_direction\n    params[:sSortDir_0] == \"asc\" ? \"asc\" : \"desc\"\n  end\nend\n</code></pre>\n\n<p><strong>Views</strong></p>\n\n<pre><code>%table#datatable.display{\"data-source\" =&gt; users_clients_url(format: \"json\", has_filterd: current_user.has_filterd, current_user: current_user, sSortDir_0: 'desc')}\n  %thead\n    %tr\n      %th\n      %th= t(:name)\n      %th= t(:company_name)\n      %th= t(:state)\n      %th= t(:email)\n      %th= t(:years_in_business)\n      %th= t(:cell)\n      %th= t(:work_phone)\n      %th= t(:equipment)\n      %th= t(:currently_using)\n      %th= t(:created_by)\n      %th= t(:created_at)\n      %th\n  %tbody\n\n:javascript\n  $(document).ready(function(){\n      console.log('moo')\n    $('#datatable').DataTable({\n      bServerSide: true,\n      sPaginationType: \"full_numbers\",\n      sAjaxSource: $('#datatable').data(\"source\"),\n      bSortable: false,\n    });\n  });\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "edited": false, "score": 0, "creation_date": 1421202943, "post_id": 27934901, "comment_id": 44267352, "body": "No luck on that. No error, but nothing returns in the view. I know there is a corresponding record, so I should get a first name back."}, {"owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "edited": false, "score": 0, "creation_date": 1421203028, "post_id": 27934901, "comment_id": 44267370, "body": "The each method also gets me nothing.  &lt;% @scouts.each do |s| %&gt;   &lt;%= s.fname %&gt; &lt;% end -%&gt;"}, {"owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "edited": false, "score": 0, "creation_date": 1421203316, "post_id": 27934901, "comment_id": 44267438, "body": "ID of the parent here is 1."}, {"owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "edited": false, "score": 0, "creation_date": 1421203579, "post_id": 27934901, "comment_id": 44267493, "body": "Fairly long output, so here&#39;s a screenshot:  <a href=\"http://cl.ly/image/3v0O1m3p2A1a/Screen%20Shot%202015-01-13%20at%209.45.09%20PM.png\" rel=\"nofollow noreferrer\">cl.ly/image/3v0O1m3p2A1a/&hellip;</a>"}, {"owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1421204286, "post_id": 27934901, "comment_id": 44267632, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/68787/discussion-between-littlerobothead-and-anthony\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1421206470, "last_edit_date": 1421206470, "creation_date": 1421202442, "answer_id": 27934901, "question_id": 27934852, "link": "https://stackoverflow.com/questions/27934852/rails-4-has-many-issue/27934901#27934901", "title": "Rails 4 has_many issue", "body": "<p>There's an issue in your controller code:</p>\n\n<pre><code>  def show\n    @parent = Parent.friendly.find(params[:id])\n    @id = @parent.id\n    @scout  = Scout.where(:scout_id =&gt; @id).all\n  end\n</code></pre>\n\n<p>You've found a parent object and stored into <code>@parent</code>.  You then take the ID of it, store it in <code>@id</code> but then do a lookup for all <code>Scout</code>'s who's <code>scout_id == @id</code> (which reads give me all scout's who's ID == parent_id ).  I think what you meant to do here is:</p>\n\n<pre><code>  def show\n    @parent = Parent.friendly.find(params[:id])\n    @id = @parent.id\n    @scout  = Scout.where(:parent_id =&gt; @id)\n  end\n</code></pre>\n\n<p>This can be refactored further though:</p>\n\n<pre><code>  def show\n    @parent = Parent.friendly.find(params[:id])\n    @scouts  = @parent.scouts\n  end\n</code></pre>\n\n<p>Now <code>@scouts</code> is an array so in your view you'll want to loop through it with something like the <code>#each</code> method.</p>\n\n<p>Update:</p>\n\n<p>As discussed in our chat there is a bit of clean up that needs to happen first.  Remove the attr_accessor lines in both the Scout and Parent model.  Also the Scout model needs a belongs_to :parent not parents.</p>\n"}], "owner": {"reputation": 443, "user_id": 7853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/628c82c5b1a9d9a1d9931c413c07970a?s=128&d=identicon&r=PG", "display_name": "nickmjones", "link": "https://stackoverflow.com/users/7853/nickmjones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 27934901, "answer_count": 1, "score": 0, "last_activity_date": 1421206470, "creation_date": 1421202085, "question_id": 27934852, "link": "https://stackoverflow.com/questions/27934852/rails-4-has-many-issue", "title": "Rails 4 has_many issue", "body": "<p>I have the following:</p>\n\n<p>in parent.rb</p>\n\n<pre><code>class Parent &lt; ActiveRecord::Base\n\n  attr_accessor :parent_id\n  has_many :scouts\n\n  # Friendly ID\n  extend FriendlyId\n  friendly_id :full_name, :use =&gt; :slugged\n\n  # Synthesize fullname for use by FriendlyID\n  def full_name\n    \"#{fname}-#{lname}\"\n  end\n  def pretty_name\n    \"#{fname} #{lname}\"\n  end\n\nend\n</code></pre>\n\n<p>in scout.rb</p>\n\n<pre><code>class Scout &lt; ActiveRecord::Base\n\n  attr_accessor :scout_id, :fname, :lname\n  belongs_to :parents\n  has_many :insignia\n\n  # Friendly ID\n  extend FriendlyId\n  friendly_id :full_name, :use =&gt; :slugged\n\n  # Synthesize fullname for use by FriendlyID\n  def full_name\n    \"#{fname}-#{lname}\"\n  end\n\n  def pretty_name\n    \"#{fname} #{lname}\"\n  end\nend\n</code></pre>\n\n<p>I want to get the first name of the scout \"owned\" by a parent, so in parent_controller.rb I have:</p>\n\n<pre><code>  def show\n    @parent = Parent.friendly.find(params[:id])\n    @id = @parent.id\n    @scout  = Scout.where(:scout_id =&gt; @id).all\n  end\n</code></pre>\n\n<p>Since I'm storing the ID of the scout in the parent model, I've made a variable out of the id to match on. Otherwise, the id's would never match because in this case params[:id] is a friendly id slug.</p>\n\n<p>Basically, how do I return single attributes on the scout model inside the parent model? For instance, I want the first name of a scout whose id matches a given parent. But when I do this in my view:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Child:&lt;/strong&gt;\n  &lt;%= @scout.fname %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>undefined method `fname' for nil:NilClass\n</code></pre>\n\n<p>I realize this is pretty elementary Rails, but it's not often that I'm building multiuser systems like this. Any help or information that might shed some light on has_many relationships is appreciated.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 1366808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mTAYo.jpg?s=128&g=1", "display_name": "gravy", "link": "https://stackoverflow.com/users/1366808/gravy"}, "edited": false, "score": 0, "creation_date": 1421697816, "post_id": 27935024, "comment_id": 44449989, "body": "Thank you. I&#39;m too new here to upvote, but your answer is very helpful!"}], "tags": [], "owner": {"reputation": 61, "user_id": 2410713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b892ac2120be2bb24bda6d0d6477b7e9?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2410713/richard"}, "is_accepted": false, "score": 0, "last_activity_date": 1421203291, "creation_date": 1421203291, "answer_id": 27935024, "question_id": 27934816, "link": "https://stackoverflow.com/questions/27934816/activerecord-query-for-joining-has-and-belongs-to-many-relation/27935024#27935024", "title": "ActiveRecord query for joining has_and_belongs_to_many relation", "body": "<p>You cannot have that result in the same query ( you can have it if you write the complete query with an <code>UNION</code>) since your conditions are being applied for the same field, you should have 2 different queries for it.</p>\n\n<p>For the General Post you can try with this</p>\n\n<pre><code>Post.where(\"group_id is null\")\n#or in scope\nscope :general_posts, lambda { where (\"group_id is null\") }\n</code></pre>\n\n<p>All the posts from the user groups</p>\n\n<pre><code>Post.where( group_id: User.uniq.pluck(:id) )\n#scope\nscope :user_groups, lambda { where( group_id:  User.uniq.pluck(:id) ) }\n</code></pre>\n\n<p>Hope this could help you</p>\n"}], "owner": {"reputation": 129, "user_id": 1366808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mTAYo.jpg?s=128&g=1", "display_name": "gravy", "link": "https://stackoverflow.com/users/1366808/gravy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448224136, "creation_date": 1421201776, "last_edit_date": 1448224136, "question_id": 27934816, "link": "https://stackoverflow.com/questions/27934816/activerecord-query-for-joining-has-and-belongs-to-many-relation", "title": "ActiveRecord query for joining has_and_belongs_to_many relation", "body": "<p>I have 3 Ruby on Rails tables: Users, Groups and Posts (plus a join table \"groups_users\" for the has_and_belongs_to_many).....</p>\n\n<p>Here are the relevant table definitions:</p>\n\n<pre><code>  create_table \"posts\", force: true do |t|\n    t.integer  \"user_id\"\n    t.integer  \"group_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"groups\", force: true do |t|\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"users\", force: true do |t|\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"groups_users\", id: false, force: true do |t|\n    t.integer \"user_id\",  null: false\n    t.integer \"group_id\", null: false\n  end\n</code></pre>\n\n<p>And the models:</p>\n\n<pre><code>Group Model:\n    has_and_belongs_to_many :users, dependent: :destroy\n    has_many :posts, inverse_of: :group, dependent: :destroy\n\nUser Model:\n    has_many :posts, inverse_of: :user, dependent: :destroy\n    has_and_belongs_to_many :groups, dependent: :destroy\n    has_many :groupposts, through: :groups, source: :posts, class_name: \"Post\"\n\nPost Model:\n    belongs_to :group, inverse_of: :posts\n    belongs_to :user, inverse_of: :posts\n</code></pre>\n\n<p>A Post's Group might be Null, so users can make general Posts without any Group (group_id == nil), or they can make Posts within one of the Groups they belong to.</p>\n\n<p>I'm trying to figure out if there is a single Active Record Query that will give me:\n(1) all general Posts (no group_id) from any user, PLUS (2) all Posts to any Group that a User belongs to.</p>\n\n<p>So something like:</p>\n\n<pre><code>Post.where(:group_id =&gt; nil)\n</code></pre>\n\n<p>uniquely joined with:</p>\n\n<pre><code>@user.groupposts\n</code></pre>\n\n<p>I think it's something in the neighborhood of:</p>\n\n<pre><code>Post.includes(:groups [:users]).where(\"(posts.group_id IS NULL) OR (posts.groups.users CONTAINS ?)\", @user.id) # THIS IS NOT CORRECT, THE SECOND HALF OF THE 'OR' STATEMENT IS GARBAGE\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2362, "user_id": 2585189, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/572230673/picture?type=large", "display_name": "Jay Killeen", "link": "https://stackoverflow.com/users/2585189/jay-killeen"}, "edited": false, "score": 0, "creation_date": 1421203803, "post_id": 27934775, "comment_id": 44267540, "body": "Thanks Prakash. I followed your advice and was able to get this to work. I have to tweak your answer though but it was based on the information in the link. &quot;If you are linking to the \u201cshow\u201d path then you can just pass the object. This will force the path to not be generated until after the condition (like a hash is done)&quot;"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1558447963, "post_id": 27934775, "comment_id": 99099172, "body": "Careful with using <code>link_to_if</code> with a <code>block</code>. Using a block doesn&#39;t render the block regardless of if the condition is <code>true</code> or <code>false</code>."}], "tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": true, "score": 4, "last_activity_date": 1421204451, "last_edit_date": 1421204451, "creation_date": 1421201480, "answer_id": 27934775, "question_id": 27934673, "link": "https://stackoverflow.com/questions/27934673/rails-link-to-if-the-association-object-is-nil/27934775#27934775", "title": "Rails link_to if the association object is nil", "body": "<p><a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_if\" rel=\"nofollow\">link_to_if</a> was created for cases similar to this. </p>\n\n<pre><code>link_to_if @contract.customer, @contract.customer_id, @contract.customer\n</code></pre>\n"}], "owner": {"reputation": 2362, "user_id": 2585189, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/572230673/picture?type=large", "display_name": "Jay Killeen", "link": "https://stackoverflow.com/users/2585189/jay-killeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 27934775, "answer_count": 1, "score": 3, "last_activity_date": 1421204451, "creation_date": 1421200658, "question_id": 27934673, "link": "https://stackoverflow.com/questions/27934673/rails-link-to-if-the-association-object-is-nil", "title": "Rails link_to if the association object is nil", "body": "<p>I'm continually getting errors where I can't link_to an object because it is not present. Usually the object, say a 'store' has a 'customer' so on the store show page I want to link to customers that have purchased there (through a 'sale' model). </p>\n\n<p>For whatever reason the customer is no longer in the database so when I am doing a <code>link_to warehouse.customer_id customer_path(warehouse)</code> I am getting a no method error on nil or <code>No route matches {:action=&gt;\"show\", :controller=&gt;\"customers\", :id=&gt;nil} missing required keys: [:id]</code></p>\n\n<p>Should I be doing <code>link_to warehouse.customer_id customer_path(warehouse) if warehouse.customer.present?</code> or putting an if statement around it so that I can show the customer_id instead of nothing so</p>\n\n<pre><code>&lt;% if @contract.customer.present? %&gt;\n  &lt;p&gt;&lt;%= link_to @contract.customer_id, customer_path(@contract.customer) %&gt;\n&lt;% else %&gt;\n  &lt;p&gt;&lt;%= @contract.customer_id %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The second option looks messy and will clutter up my view but I don't want to not show the information if the object is not present :/</p>\n\n<p>I also have a routing exception handler in place to redirect to root_url if the object does not exist in the database but that would mean making my link_to customer_path(warehouse.customer_id) instead of just customer_path(warehouse.customer).</p>\n"}, {"tags": ["ruby", "nokogiri", "scrape"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1421193673, "post_id": 27933693, "comment_id": 44265093, "body": "Open up an IRB session and go step by step.  Maybe even write the HTML out to a file.  Just because the DOM has something doesn&#39;t mean it&#39;s in the source that you&#39;re feeding Nokogiri."}, {"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1421193842, "post_id": 27933693, "comment_id": 44265146, "body": "The thing is if I try to open in IRB with Nokogiri a URL, it will think its a file:  Errno::ENOENT: No such file or directory - <a href=\"http://www2.hm.com/es_es/productpage.0250933004.html\" rel=\"nofollow noreferrer\">www2.hm.com/es_es/productpage.0250933004.html</a>"}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1421194345, "post_id": 27933693, "comment_id": 44265306, "body": "You need to <code>require &#39;open-uri&#39;</code>, etc. first."}, {"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1421194604, "post_id": 27933693, "comment_id": 44265384, "body": "Im still getting the same error on IRB... irb(main):005:0&gt; puts web.at_css(&#39;.product-item-headline&#39;).text NoMethodError: undefined method `text&#39; for nil:NilClass"}], "answers": [{"comments": [{"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1421195342, "post_id": 27933969, "comment_id": 44265558, "body": "Yes, I tried targeting the whole body, and only a JS is printed. Maybe removing all js before using Nokogiri?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1578625762, "post_id": 27933969, "comment_id": 105508465, "body": "Nokogiri makes it easy to tell if there are problems with the HTML/XML. After parsing the document like <code>doc = Nokogiri::HTML(...)</code> use <a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Document.html#errors-instance_method\" rel=\"nofollow noreferrer\"><code>doc.errors</code></a>."}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1578624413, "last_edit_date": 1578624413, "creation_date": 1421195285, "answer_id": 27933969, "question_id": 27933693, "link": "https://stackoverflow.com/questions/27933693/how-to-fix-an-undefined-method-when-trying-to-scrape-a-website-with-nokogiri/27933969#27933969", "title": "How to fix an &quot;undefined method&quot; when trying to scrape a website with Nokogiri", "body": "<p>One idea is to use IRB and go step by step:</p>\n\n<pre><code>irb\n&gt; require 'open-uri'\n&gt; html = open(product).read\n</code></pre>\n\n<p>Does the HTML contain the class name text?</p>\n\n<pre><code>&gt; html =~ /product-item-headline/\n=&gt; 56099\n</code></pre>\n\n<p>Yes it does, and here's the line:</p>\n\n<pre><code>&lt;h1 class=\"product-item-headline\"&gt;\n</code></pre>\n\n<p>So try Nokogiri:</p>\n\n<pre><code>&gt; require 'nokogiri'\nweb = Nokogiri::HTML(html)\n=&gt; success\n</code></pre>\n\n<p>Read the HTML text and try increasingly-broad queries related to your issue that take you nearer the top of the HTML, and see if they find results:</p>\n\n<pre><code>web.css(\"h1\") # on line 2217 of the HTML\n=&gt; []\n\nweb.css(\".product-detail-meta\") # on line 2215\n=&gt; []\n\nweb.css(\".wrapper\") # on line 86\n=&gt; []\n\nweb.css(\"body\") # on line 84\n=&gt; [#&lt;Nokogiri::XML::Element \u2026\n</code></pre>\n\n<p>This shows you there's a problem in the HTML. The parsing is disrupted between lines 84 and 86. </p>\n\n<p>Let's guess that line 85 may be the issue: it is a <code>&lt;header&gt;</code> tag, and we happen to know that doesn't contain your target, so we can delete it. Save the HTML to a file, then use  any text editor to delete the tag and all its contents, then re-parse. </p>\n\n<p>Does it work now?</p>\n\n<pre><code>web.css(\"h1\") # on line 359 of the HTML\n=&gt; []\n</code></pre>\n\n<p>Nope. So we repeat this process, cutting down the HTML. </p>\n\n<p>I also like to cut down the HTML by removing pieces that I know don't contain my target, such as the <code>&lt;head&gt;</code> area, <code>&lt;footer&gt;</code> areas, <code>&lt;script&gt;</code> areas etc. </p>\n\n<p>You may like to use an auto-indenting editor, because it can quickly show you that something is unbalanced with the HTML.</p>\n\n<p>Eventually we find that the HTML has many incorrect tags, such as unclosed section tags.</p>\n\n<p>You can solve this a variety of ways:</p>\n\n<ul>\n<li><p>The pure way is to fix the unclosed section tags, any way to you want. </p></li>\n<li><p>The hack way is to narrow the HTML to the area you know you need, which is in the h1 tag.</p></li>\n</ul>\n\n<p>Here's the hack way:</p>\n\n<pre><code>area = html.match(/&lt;h1 class=\"product-item-headline\\b.*?&lt;\\/h1&gt;/m)[0]\nweb = Nokogiri::HTML(area)\nputs web.at_css(\".product-item-headline\").text.strip\n=&gt; \"Funda de coj\u00edn de jacquard\"\n</code></pre>\n\n<p>Heads up that the hack way isn't truly HTML-savvy, and you can see that it will fail if the HTML page author changes to use a different tag, or uses another class name before the class name you want, etc.</p>\n\n<p>The best long-term solution is to contact the author of the HTML page and show him how to validate the HTML. A good site for this is <a href=\"http://validator.w3.org/\" rel=\"nofollow noreferrer\">http://validator.w3.org/</a> -- when you validate your URL, the site shows 100 errors and 6 warnings, and explains each one and how to solve it.</p>\n"}], "owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578624413, "creation_date": 1421193336, "last_edit_date": 1578624257, "question_id": 27933693, "link": "https://stackoverflow.com/questions/27933693/how-to-fix-an-undefined-method-when-trying-to-scrape-a-website-with-nokogiri", "title": "How to fix an &quot;undefined method&quot; when trying to scrape a website with Nokogiri", "body": "<p>I want to get some data from the HMs website,  using this scraper:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nrequire 'rmagick'\nrequire 'mechanize'\n\nproduct = \"http://www2.hm.com/es_es/productpage.0250933004.html\"\nweb = Nokogiri::HTML(open(product))\nputs web.at_css('.product-item-headline').text\n</code></pre>\n\n<p>Nokogiri returns NIL for each selector and raises <code>undefined method for nilClass</code>. I don't know if this particular website has something that can avoid scraping.</p>\n\n<p>In the URL DOM, I can see there is a <code>.product-item-headline</code> class, and I can fetch the info in the JavaScript console, but I can't with Nokogiri. </p>\n\n<p>I tried targeting the whole body text, and this is the only thing I get printed.</p>\n\n<pre><code>var callcoremetrix = function(){cmSetClientID(getCoremetricsClientId(), true, \"msp.hm.com\", \"hm.com\");};\n</code></pre>\n\n<p>Maybe some JavaScript is ruining my scrape?</p>\n"}, {"tags": ["ruby", "gem"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1421195443, "post_id": 27933958, "comment_id": 44265582, "body": "I tried <code>$ sudo gem uninstall json --version 1.8.1</code>, and it gives <code>ERROR:  While executing gem ... (Gem::InstallError)     gem &quot;json&quot; cannot be uninstalled because it is a default gem</code>."}, {"owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1421196439, "post_id": 27933958, "comment_id": 44265848, "body": "It&#39;s dangerous to uninstall default gems. That&#39;s why it&#39;s not letting you uninstall the oldest version."}], "tags": [], "owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "is_accepted": false, "score": 1, "last_activity_date": 1421195150, "creation_date": 1421195150, "answer_id": 27933958, "question_id": 27933683, "link": "https://stackoverflow.com/questions/27933683/removing-old-versions-of-gems/27933958#27933958", "title": "Removing old versions of gems", "body": "<p>It's likely that <code>gem cleanup</code> isn't working because you have something installed with dependencies on these old versions. You can check what has dependencies on your old gems by running <code>gem  dependency  your-gem-name --reverse-dependencies</code>.</p>\n\n<p>If that command doesn't show you any dependencies you can manually remove the old versions with <code>gem uninstall</code>:</p>\n\n<pre><code># remove specific version\ngem uninstall your-gem-name --version 2.1.0\n\n# remove all versions less than a certain version\ngem uninstall your-gem-name --version '&lt;2.1.0'\n</code></pre>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5070, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421198277, "creation_date": 1421193262, "last_edit_date": 1421198277, "question_id": 27933683, "link": "https://stackoverflow.com/questions/27933683/removing-old-versions-of-gems", "title": "Removing old versions of gems", "body": "<p>For some gems on my machine, there are multiple versions:</p>\n\n<pre><code>$gem list bigdecimal\nbigdecimal (1.2.6, 1.2.5)\n\n$gem list io-console\nio-console (0.4.3, 0.4.2)\n\n$gem list json\njson (1.8.2, 1.8.1)\n\n...\n</code></pre>\n\n<p>I want to remove the old versions. I tried several commands:</p>\n\n<pre><code>$gem cleanup\nCleaning up installed gems...\nClean Up Complete\n\n$sudo gem cleanup\nCleaning up installed gems...\nClean Up Complete\n\n$gem cleanup json\nCleaning up installed gems...\nClean Up Complete\n\n$sudo gem cleanup json\nCleaning up installed gems...\nClean Up Complete\n</code></pre>\n\n<p>but the old versions are not removed. Why are the old versions not detected by <code>cleanup</code>? How can I remove them?</p>\n\n<p><strong>Update</strong> Strange thing is that, I can manually uninstall the newer versions but not the old ones. For example,</p>\n\n<pre><code>$ sudo gem uninstall json --version 1.8.1\nERROR:  While executing gem ... (Gem::InstallError)\n    gem \"json\" cannot be uninstalled because it is a default gem\n\n$ sudo gem uninstall json --version 1.8.2\nSuccessfully uninstalled json-1.8.2\n</code></pre>\n\n<p><strong>Update</strong> What is a default gem? Why can't it be deleted?</p>\n\n<p><strong>Update</strong> If I have a default old version, does it mean that a newer version is not in use and the default one is called by the command <code>require</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "quickbooks"], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1421192990, "post_id": 27933452, "comment_id": 44264862, "body": "No luck. It returns: <a href=\"https://appcenter.intuit.com/Connect/%3C%=%20authenticate_quickbooks_url%20%%3E\" rel=\"nofollow noreferrer\">appcenter.intuit.com/Connect/&hellip;</a>"}, {"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1421193050, "post_id": 27933452, "comment_id": 44264881, "body": "I should mention that the link is located inside a .haml"}, {"owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "reply_to_user": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1421193347, "post_id": 27933452, "comment_id": 44264986, "body": "Yeah for haml use Direct <code>&quot;#{}</code>"}, {"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1421244492, "post_id": 27933452, "comment_id": 44284891, "body": "Thanks. However, now I receive the error: OAuth::Problem (parameter_rejected):   app/controllers/quickbooks_controller.rb:4:in `authenticate&#39;"}], "tags": [], "owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "is_accepted": true, "score": 0, "last_activity_date": 1421193718, "last_edit_date": 1421193718, "creation_date": 1421191957, "answer_id": 27933452, "question_id": 27933363, "link": "https://stackoverflow.com/questions/27933363/granturl-not-passing-the-right-params-for-quickbooks/27933452#27933452", "title": "granturl not passing the right params for quickbooks", "body": "<p>Because you are passing string as it is. Not using ruby code symbols</p>\n\n<p><code>\"#{authenticate_quickbooks_url}\"</code></p>\n\n<p>change your line to</p>\n\n<pre><code>intuit.ipp.anywhere.setup({menuProxy: '/path/to/blue-dot', grantUrl: \"#{authenticate_quickbooks_url}\"});\n</code></pre>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 27933452, "answer_count": 1, "score": 0, "last_activity_date": 1421193718, "creation_date": 1421191538, "last_edit_date": 1421193274, "question_id": 27933363, "link": "https://stackoverflow.com/questions/27933363/granturl-not-passing-the-right-params-for-quickbooks", "title": "granturl not passing the right params for quickbooks", "body": "<p>I followed this tutorial: <a href=\"https://www.youtube.com/watch?v=XCXQmFm0bFk#t=18\" rel=\"nofollow\">https://www.youtube.com/watch?v=XCXQmFm0bFk#t=18</a>\nMy path is:</p>\n\n<pre><code>intuit.ipp.anywhere.setup({menuProxy: '/path/to/blue-dot', grantUrl: 'authenticate_quickbooks_url'});\n</code></pre>\n\n<p>When I click the link it returns:\n<a href=\"https://appcenter.intuit.com/Connect/authenticate_quickbooks_url\" rel=\"nofollow\">https://appcenter.intuit.com/Connect/authenticate_quickbooks_url</a> Why doesn't rails change the path to use the token?</p>\n\n<p>When I put the path in a link_to, it returns: `quickbooks_oauth_callback_url'</p>\n\n<p>ruby 1.9.3p194 - Rails 3.1.3</p>\n"}, {"tags": ["ruby", "email", "ssl", "imap"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1421207034, "post_id": 27933098, "comment_id": 44268214, "body": "First, are you sure you&#39;re connecting to an SSL port?"}, {"owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1421208342, "post_id": 27933098, "comment_id": 44268505, "body": "Yes I am. I got it work though on an older version of ruby. 1.9.3p448, however with new versions of ruby I am still getting this error. What could this? Appreciate your help @Max"}], "owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1421190999, "creation_date": 1421190123, "last_edit_date": 1495540259, "question_id": 27933098, "link": "https://stackoverflow.com/questions/27933098/specify-ssl-version-for-netimap", "title": "Specify SSL version for Net::IMAP", "body": "<p>I am having issues with SSL when connecting to an IMAP server. </p>\n\n<pre><code>SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: sslv3 alert handshake failure (OpenSSL::SSL::SSLError)\n</code></pre>\n\n<p>After some research, I found a solution to this in \"<a href=\"https://stackoverflow.com/questions/6821051/ruby-ssl-error-sslv3-alert-unexpected-message\">Ruby SSL error - sslv3 alert unexpected message</a>\", however, is there a way to force the SSL version for IMAP?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 270, "user_id": 2819673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9c46fbd4419d27b77688991b45ab114b?s=128&d=identicon&r=PG", "display_name": "tommybernaciak", "link": "https://stackoverflow.com/users/2819673/tommybernaciak"}, "edited": false, "score": 0, "creation_date": 1421189876, "post_id": 27933014, "comment_id": 44263744, "body": "Ok, I found it, first element (trains[0]) is nil ..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1421192733, "post_id": 27933014, "comment_id": 44264793, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/editing-help\">the help for formatting your text</a>. The easier it is to read and understand, the faster and better we can help you."}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 2819673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9c46fbd4419d27b77688991b45ab114b?s=128&d=identicon&r=PG", "display_name": "tommybernaciak", "link": "https://stackoverflow.com/users/2819673/tommybernaciak"}, "edited": false, "score": 0, "creation_date": 1421312537, "post_id": 27935655, "comment_id": 44313369, "body": "Yeah, that&#39;s what I gave in the comment, I found that first element is nil. Your solution could be good, but I want to use ids for selecting each of trains, for example if I want to get one with id 5 I just use trains[5]. In your solution it will not work this way. Anyway, thanks for help. :)"}, {"owner": {"reputation": 219, "user_id": 1109390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5721ab6d152edae81199c71b26c2b259?s=128&d=identicon&r=PG", "display_name": "cdownard", "link": "https://stackoverflow.com/users/1109390/cdownard"}, "reply_to_user": {"reputation": 270, "user_id": 2819673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9c46fbd4419d27b77688991b45ab114b?s=128&d=identicon&r=PG", "display_name": "tommybernaciak", "link": "https://stackoverflow.com/users/2819673/tommybernaciak"}, "edited": false, "score": 0, "creation_date": 1421329018, "post_id": 27935655, "comment_id": 44322217, "body": "I have edited the answer to give you a different type to use for storage that accomplishes your goal of indexing with the ID. A hash would be a far better use here."}, {"owner": {"reputation": 270, "user_id": 2819673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9c46fbd4419d27b77688991b45ab114b?s=128&d=identicon&r=PG", "display_name": "tommybernaciak", "link": "https://stackoverflow.com/users/2819673/tommybernaciak"}, "edited": false, "score": 0, "creation_date": 1421329518, "post_id": 27935655, "comment_id": 44322487, "body": "Yeah, it is true, hash would be much better in most of the cases, in my situation I need array, but it is specific case."}], "tags": [], "owner": {"reputation": 219, "user_id": 1109390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5721ab6d152edae81199c71b26c2b259?s=128&d=identicon&r=PG", "display_name": "cdownard", "link": "https://stackoverflow.com/users/1109390/cdownard"}, "is_accepted": true, "score": 0, "last_activity_date": 1421328965, "last_edit_date": 1421328965, "creation_date": 1421208132, "answer_id": 27935655, "question_id": 27933014, "link": "https://stackoverflow.com/questions/27933014/undefined-method-id-for-nilnilclass-for-object-collection/27935655#27935655", "title": "Undefined method `id&#39; for nil:NilClass for object collection", "body": "<p>You're initializing the array but then adding to the trains array by specifying the index. If the id from your csv starts from 1 (or 101) then indexes 0 through your first will be initialized to nil. </p>\n\n<p>Try using <code>trains &lt;&lt;</code> instead of <code>trains[id.to_i]</code> to populate the array. </p>\n\n<p>Edit:</p>\n\n<p>Given your comment, I'd recommend using hashes instead. They're still enumerable but in this way you can iterate freely and use the id as an accessible index (key).</p>\n\n<pre><code>trains = Hash.new\nCSV.open('train.csv', encoding: \"BOM|UTF-16LE:UTF-8\", row_sep: :auto, col_sep: ';') do |csv|\n  csv.each do |id, person_id, movie_id, eval|\n    trains[id.to_i] = Train.new(id.to_i, person_id.to_i, movie_id.to_i, eval.to_i)\n  end\nend\n</code></pre>\n\n<p>So now you have a hash of the trains with the Train IDs as keys. Accessing it would still look like an array but it would return the object. Thus <code>trains[5]</code> would return the <code>Train</code> object with id of 5.</p>\n\n<p>I think that's a better solution than using an array with a bunch of nils. However, if you're going to for some reason, just use a post conditional in your iteration (though this is really awkward):</p>\n\n<pre><code>trains.each do |t|\n  puts t.id if t\nend\n</code></pre>\n\n<p>In Ruby, only false and nil are \"falsey\" meaning evaluate to false so this will get you what you want. But for convenience, I'd really recommend going the Hash route.</p>\n"}], "owner": {"reputation": 270, "user_id": 2819673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9c46fbd4419d27b77688991b45ab114b?s=128&d=identicon&r=PG", "display_name": "tommybernaciak", "link": "https://stackoverflow.com/users/2819673/tommybernaciak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 27935655, "answer_count": 1, "score": 0, "last_activity_date": 1421328965, "creation_date": 1421189656, "last_edit_date": 1421192660, "question_id": 27933014, "link": "https://stackoverflow.com/questions/27933014/undefined-method-id-for-nilnilclass-for-object-collection", "title": "Undefined method `id&#39; for nil:NilClass for object collection", "body": "<p>Here is my code:</p>\n\n<pre><code>class Train\n  attr_accessor :id, :person_id, :movie_id, :eval\n  def initialize(id, person_id, movie_id, eval)\n    @id = id\n    @person_id = person_id\n    @movie_id = movie_id\n    @eval = eval\n  end\nend\n\ntrains = Array.new\nCSV.open('train.csv', encoding: \"BOM|UTF-16LE:UTF-8\", row_sep: :auto, col_sep: ';') do    |csv|\n  csv.each do |id, person_id, movie_id, eval|\n    trains[id.to_i] = Train.new(id.to_i, person_id.to_i, movie_id.to_i, eval.to_i)\n  end\nend\n\ntrains.each do |t|\n  puts t.id\nend\n</code></pre>\n\n<p>It is just creating an array of objects from a CSV file, and printing the object's IDs, but I am getting an error:</p>\n\n<pre><code>undefined method `id' for nil:NilClass\n</code></pre>\n\n<p>Why is <code>t</code> nil when I use <code>puts t</code> it is printing objects.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1421190303, "post_id": 27933008, "comment_id": 44263911, "body": "let&#39;s say @data holds {name: &#39;alex&#39;, date: &#39;2014-14-01 12:22:10&#39;} Then what you want see in output ?"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1421190808, "post_id": 27933008, "comment_id": 44264110, "body": "@Ajay does that help -- all of this is an example made off the top of my head, so excuse me if there are errors"}], "answers": [{"comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1421191097, "post_id": 27933280, "comment_id": 44264220, "body": "So would <code>h = {{{{}}}}</code> be appropriate?"}, {"owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "reply_to_user": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1421191196, "post_id": 27933280, "comment_id": 44264248, "body": "If you just wanted <i>one</i> Hash, I&#39;d do: <code>@data.inject(Hash.new({})) { |hash, el| **do stuff here }</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1421191210, "post_id": 27933280, "comment_id": 44264254, "body": "<code>Hash.new({})</code> is a shortcut to confusion. The default value is <b>not</b> cloned."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1421192192, "post_id": 27933280, "comment_id": 44264630, "body": "Not sure what&#39;s worse, <i>n</i> level of loops, or <i>m</i> checks to see if it&#39;s initialized"}, {"owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "edited": false, "score": 0, "creation_date": 1421195005, "post_id": 27933280, "comment_id": 44265480, "body": "For your first hash, you only need one <code>Hash.new do</code> that sets the default key to {}. For your second example, you could use one <code>Hash.new do</code> that sets the hash&#39;s default to a clone of the first, thus giving you the extra level."}], "tags": [], "owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "is_accepted": false, "score": 0, "last_activity_date": 1421195146, "last_edit_date": 1421195146, "creation_date": 1421191048, "answer_id": 27933280, "question_id": 27933008, "link": "https://stackoverflow.com/questions/27933008/ruby-hash-of-hash-initialization/27933280#27933280", "title": "Ruby hash of hash initialization", "body": "<p>This will actually work, as when you try to access the key from the hash, it not only returns the default but also sets it:</p>\n\n<pre><code>Hash.new do |h, k|\n  h[k] = Hash.new do |hh, kk|\n    hh[kk] = {}\n  end\nend\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>This might be a little cleaner albeit potentially more confusing for future developers than just checking if nil.</p>\n\n<pre><code>dates = Hash.new { |hash, key| hash[key] = {} }\ngrades = Hash.new { |hash, key| hash[key] = dates.clone }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 4178778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b10a88806e7a7e8f19821d8dff64f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/4178778/luis"}, "is_accepted": false, "score": 0, "last_activity_date": 1421192073, "creation_date": 1421192073, "answer_id": 27933471, "question_id": 27933008, "link": "https://stackoverflow.com/questions/27933008/ruby-hash-of-hash-initialization/27933471#27933471", "title": "Ruby hash of hash initialization", "body": "<p>try with:</p>\n\n<pre><code>d={}\nc=Client.first\nd[c.last_name]=[]\nd[c.last_name][c.id]=//your value\n</code></pre>\n\n<p>d[c.last_name]=[], initialize an array of hash for c.last_name</p>\n"}, {"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 0, "last_activity_date": 1421192884, "creation_date": 1421192884, "answer_id": 27933626, "question_id": 27933008, "link": "https://stackoverflow.com/questions/27933008/ruby-hash-of-hash-initialization/27933626#27933626", "title": "Ruby hash of hash initialization", "body": "<p>I was able to build the dates hash like this:</p>\n\n<pre><code>arr = [{ name: 'greg', class:'science', date:'jan', grade:'a' },\n       { name: 'greg', class:'math'   , date:'jan', grade:'b' },\n       { name: 'barb', class:'history', date:'jan', grade:'a' },\n       { name: 'barb', class:'science', date:'feb', grade:'c' }]\n\n\ndates = arr.group_by { |x| x[:name] }.each_with_object({}) do |(k, v), hash|\n  dates = v.map { |i| i[:date] }.uniq\n  dates_hash = dates.each_with_object({}) { |date, h| h[date] = \"\" }\n  hash[k] = dates_hash\nend\n\nputs dates\n\n{\"greg\"=&gt;{\"jan\"=&gt;\"\"}, \"barb\"=&gt;{\"jan\"=&gt;\"\", \"feb\"=&gt;\"\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1421223277, "creation_date": 1421223277, "answer_id": 27938402, "question_id": 27933008, "link": "https://stackoverflow.com/questions/27933008/ruby-hash-of-hash-initialization/27938402#27938402", "title": "Ruby hash of hash initialization", "body": "<p><strong>Code</strong></p>\n\n<p>To obtain the unique <code>:date</code> values for each <code>:name</code>, you could use the form of <a href=\"http://www.ruby-doc.org/core-2.1.1/Hash.html#method-i-update\" rel=\"nofollow\">Hash.update</a> (same as <code>merge!</code>) that uses a hash to determine the values of keys are are contained in both hashes being merged:</p>\n\n<pre><code>def dates_by_name(arr)\n  arr.each_with_object({}) { |g,h|\n    h.update({g[:name]=&gt;[g[:date]]}) {|_,ov,nv|\n      ov.include?(nv.first) ? ov : ov + nv}}\nend\n</code></pre>\n\n<p>There are many ways to organize the results for grades by class, date and name. The following employs recursion:</p>\n\n<pre><code>def grade_by_class_date_name(arr, fields)\n  fd = fields.dup\n  f = fd.shift\n  return arr.first[:grade] if f==:grade\n  g = arr.each_with_object(Hash.new { |h,k| h[k] = [] }) { |e,g|\n    g[e[f]] &lt;&lt; e.reject { |k,_| k == f } }\n  g.each_key { |k| g[k] = grade_by_class_date_name(g[k], fd) }\n  g \nend          \n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>arr = [{ name: 'greg', class:'science', date:'jan', grade:'a' },\n       { name: 'greg', class:'math'   , date:'jan', grade:'b' },\n       { name: 'barb', class:'history', date:'jan', grade:'a' },\n       { name: 'barb', class:'science', date:'feb', grade:'c' }]\n\ndates_by_name(arr)\n  #=&gt; {\"greg\"=&gt;[\"jan\"], \"barb\"=&gt;[\"jan\", \"feb\"]} \n</code></pre>\n\n<p>The hash returned by <code>dates_by_name</code> is not in the form you requested, but you could manipulate it easily to suit your requirements.</p>\n\n<pre><code>fields = [:class, :date, :name, :grade] \n\ngrade_by_class_date_name(arr, fields)\n  #=&gt; {\"science\"=&gt;{\"jan\"=&gt;{\"greg\"=&gt;\"a\"},\n  #                \"feb\"=&gt;{\"barb\"=&gt;\"c\"}},\n  #    \"math\"   =&gt;{\"jan\"=&gt;{\"greg\"=&gt;\"b\"}},\n  #    \"history\"=&gt;{\"jan\"=&gt;{\"barb\"=&gt;\"a\"}}} \n</code></pre>\n"}], "owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1514, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1421223277, "creation_date": 1421189622, "last_edit_date": 1421190773, "question_id": 27933008, "link": "https://stackoverflow.com/questions/27933008/ruby-hash-of-hash-initialization", "title": "Ruby hash of hash initialization", "body": "<p>Consider @data is an array of ActiveRecords with fields <em>date</em>, <em>class</em>, <em>name</em>, and <em>grade</em>.  Assuming I want to end up with two hashes, one being a unique set of all the dates per name; the other broken down by class, then date, then name to reveal the grade.</p>\n\n<pre><code>dates  = {}\ngrades = {}\n\n@data.each do |d|\n   dates[ d.name ][ d.date ] = ''                              # 1\n   grades[ d.class =&gt; { d.date =&gt; { d.name =&gt; d.grade } } ]    # 2 \nend\n</code></pre>\n\n<ol>\n<li><p>results in an error:</p>\n\n<blockquote>\n  <p>undefined method `[]=' for nil:NilClass  </p>\n</blockquote>\n\n<p><code>dates[ d.name =&gt; { d.date =&gt; '' } ]</code> only stores the last record (does not merge into the older results)</p></li>\n<li><p>doesn't error, but ends with an empty hash <code>{}</code></p></li>\n</ol>\n\n<p>After getting back into Perl, I've forgotten how to initialize and add to a hash of hashes in Ruby.</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>For the first one (<em>dates</em>), it looks like I can do the following inside the loop:</p>\n\n<pre><code>dates[ d.name ] ||= { d.date =&gt; '' }\ndates[ d.name ][ d.date ] = ''\n</code></pre>\n\n<p>Looking at the docs, I don't know if this is the proper way to do it, it also seems inefficient, since it will be doing the assignment twice for the first value.  It also would suggest that for each key, I need to declare/initialize the underlying data structure, which would get lengthy the deeper the hash of hashes gets (like the <em>grades</em> hash).</p>\n\n<hr>\n\n<p>Source: </p>\n\n<pre><code>[{ name: 'greg', class:'science', date:'jan', grade:'a' },\n { name: 'greg', class:'math'   , date:'jan', grade:'b' },\n { name: 'barb', class:'history', date:'jan', grade:'a' },\n { name: 'barb', class:'science', date:'feb', grade:'c' }]\n</code></pre>\n\n<p><em>dates</em> would look something like:</p>\n\n<pre><code>{ 'greg' =&gt; { 'jan' =&gt; '' },\n  'barb' =&gt; { 'jan' =&gt; '' ,\n              'feb' =&gt; '' \n            }\n}\n</code></pre>\n\n<p><em>grades</em> would look something like:</p>\n\n<pre><code>{ 'science' =&gt; { 'jan' =&gt; { 'greg' =&gt; 'a' } ,\n                 'feb' =&gt; { 'barb' =&gt; 'c' } },\n  'math'    =&gt; { 'jan' =&gt; { 'greg' =&gt; 'b' } },\n  'history' =&gt; { 'jan' =&gt; { 'barb' =&gt; 'a' } }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railscasts", "class-method"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1421189172, "post_id": 27932860, "comment_id": 44263448, "body": "<code>ActiveRecord</code> automagically does it for you."}, {"owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1421189528, "post_id": 27932860, "comment_id": 44263599, "body": "@ptd, could you explain how it works under the covers?"}, {"owner": {"reputation": 19518, "user_id": 968969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0802303aaa5f03f4cec652171dffcbc7?s=128&d=identicon&r=PG", "display_name": "Tony Hopkinson", "link": "https://stackoverflow.com/users/968969/tony-hopkinson"}, "edited": false, "score": 0, "creation_date": 1421189697, "post_id": 27932860, "comment_id": 44263666, "body": "Best way to find that out is to look at the code. You&#39;ll find out more about the descriptive power of ruby by looking at something like ActiveRecord than you will any other way."}], "answers": [{"comments": [{"owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "edited": false, "score": 0, "creation_date": 1421190428, "post_id": 27933052, "comment_id": 44263956, "body": "Coming from C#, it blows my mind that <code>foo_instance.class_method</code> is not equal to <code>Foo.class_method</code>. I am still confused though. If <code>@project.tasks.find_incomplete</code> is not equal to <code>Task.find_incomplete</code>, what is it equal to?"}, {"owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "edited": false, "score": 0, "creation_date": 1421190613, "post_id": 27933052, "comment_id": 44264032, "body": "After your edit, I think I got it. What is happening is <code>Task.find_incomplete</code> produces a constraint of <code>complete = false</code>, and returns incomplete tasks, and then the scope for the project is added, which is something like <code>project_id = [ID]</code>. In the end <code>tasks.find_incomplete</code> is still equal to <code>Task.find_incomplete</code>. Am I correct?"}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 2, "last_activity_date": 1421193627, "last_edit_date": 1421193627, "creation_date": 1421189828, "answer_id": 27933052, "question_id": 27932860, "link": "https://stackoverflow.com/questions/27932860/calling-a-class-method-through-an-object-instance/27933052#27933052", "title": "Calling a class method through an object instance", "body": "<p>This works because scopes of ActiveRecord relations are merged. It's not that <code>find_incomplete</code> is running on individual task instances.</p>\n\n<p><code>@project.tasks</code> creates an ActiveRecord scope of the tasks for that project instance and then that scope is still in effect when your <code>find_incomplete</code> method is called.</p>\n\n<p>Take a look at the documentation here: <a href=\"http://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_querying.html#scopes</a></p>\n\n<p>Your <code>find_incomplete</code> method works in the same way as the <code>self.published</code> example in the docs.</p>\n\n<p>Think of the underlying SQL query that would run:</p>\n\n<p><code>@project.tasks</code> would create a <code>where</code> condition like <code>SELECT * FROM projects WHERE project_id = &lt;project_id&gt;</code></p>\n\n<p><code>find_all_by_complete</code> then merges in an <code>and</code> condition for <code>complete = 0</code></p>\n\n<hr>\n\n<p>I think the other piece of the puzzle that might help is that <code>@project.tasks</code> is not just a simple array array of <code>Task</code> objects, although it will have been converted to such if you type <code>project.tasks</code> in the Rails console. <code>project.tasks</code> is actually an Active Record relation object (or more precisely a proxy)\nThere are a number of reasons and benefits for this but the main 2 are that it allows chaining and it allows the underlying query to be run on demand only if/when needed.</p>\n\n<p>The relation has a sequence of rules for how method calls are delegated, one of which is to call class methods on the class of the associated objects. (the relation knows that it's a relation to <code>Tasks</code>)</p>\n\n<p>So you are correct when you wrote <code>tasks.find_incomplete</code> is still equal to <code>Task.find_incomplete</code> except that when <code>find_incomplete</code> is called through <code>project.tasks</code> a scope narrowing down to the <code>project_id</code> is already in effect.</p>\n"}], "owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 27933052, "answer_count": 1, "score": 0, "last_activity_date": 1421193627, "creation_date": 1421188987, "last_edit_date": 1421189567, "question_id": 27932860, "link": "https://stackoverflow.com/questions/27932860/calling-a-class-method-through-an-object-instance", "title": "Calling a class method through an object instance", "body": "<p>Railscasts #4 uses this sample code:</p>\n\n<pre><code>class Task &lt; ActiveRecord::Base\n  belongs_to :project\n\n  def self.find_incomplete\n    find_all_by_complete(:false, :order =&gt; \"created_at DESC\")\n  end\nend\n\nclass ProjectsController &lt; ApplicationController\n  def show\n    @project = Project.find(params[:id])\n    @tasks = @project.tasks.find_incomplete\n  end\nend\n</code></pre>\n\n<p>Using <code>@project.tasks.find_incomplete</code>, only finds incomplete orders that belong to that specific <code>Project</code> instance.</p>\n\n<p>I would expect that call to be equivalent to <code>Task.find_incomplete</code>, but it is not. How can that be? How does Rails (or Ruby) now to just invoke that method for those specific <code>Task</code>s in that <code>Project</code> instance?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4221270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96d6eb407d0d4407e2eca03414f51721?s=128&d=identicon&r=PG&f=1", "display_name": "Kozmo101", "link": "https://stackoverflow.com/users/4221270/kozmo101"}, "edited": false, "score": 0, "creation_date": 1421189584, "post_id": 27932882, "comment_id": 44263621, "body": "Thanks! rake time:zones:local gives a list of all available time-zones."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1421189121, "creation_date": 1421189121, "answer_id": 27932882, "question_id": 27932778, "link": "https://stackoverflow.com/questions/27932778/how-do-i-define-all-inputs-in-rails-to-be-read-in-one-timezone/27932882#27932882", "title": "How do I define all inputs in rails to be read in one timezone?", "body": "<p>Iin your application.rb</p>\n\n<pre><code>#application.rb\nconfig.time_zone = 'London' \nconfig.active_record.default_timezone = :local\n</code></pre>\n\n<p>Here set the value_of time_zone based on your country. \nin your rails console run below command to get list of available timezones.</p>\n\n<pre><code>ActiveSupport::TimeZone.all.map(&amp;:name)\n\nDont forget to restart your server after above changes!\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4221270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96d6eb407d0d4407e2eca03414f51721?s=128&d=identicon&r=PG&f=1", "display_name": "Kozmo101", "link": "https://stackoverflow.com/users/4221270/kozmo101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421189121, "creation_date": 1421188614, "question_id": 27932778, "link": "https://stackoverflow.com/questions/27932778/how-do-i-define-all-inputs-in-rails-to-be-read-in-one-timezone", "title": "How do I define all inputs in rails to be read in one timezone?", "body": "<p>I need some help with Timezones. I want all of my inputs for Clock.new to CREATE/POST as PST rather than UTC, but I'm not have any success with my attempts. I have two database fields one for time_start, and time_end. </p>\n\n<p>In my application.rb file I have tried setting a local timezone, based on what I found in other SO questions, but that doesn't seem to be working for me. </p>\n\n<pre><code>module Timer\n  class Application &lt; Rails::Application\n    config.time_zone = 'Pacific Time (US &amp; Canada)'\n    config.active_record.default_timezone = :local\n  end\nend\n</code></pre>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1421189092, "post_id": 27932773, "comment_id": 44263412, "body": "Run <code>rails s</code> in your terminal. Then go to <code>&#47;voices.json</code> or <code>&#47;voices.xml</code>."}, {"owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1421189976, "post_id": 27932773, "comment_id": 44263783, "body": "gives me this error : <code>No route matches [GET] &quot;&#47;voices.json&quot;</code>"}, {"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 1, "creation_date": 1421190184, "post_id": 27932773, "comment_id": 44263863, "body": "Whoops, I forgot about your namespacing. <code>&#47;api&#47;v1&#47;voices.json</code>"}, {"owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1421190608, "post_id": 27932773, "comment_id": 44264029, "body": "Thanks. Now im getting <code>uninitialized constant Api::V1::VoicesController</code>"}, {"owner": {"reputation": 473, "user_id": 2588887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c060e93f000081c298d2a112fa884f8a?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/2588887/jay"}, "edited": false, "score": 0, "creation_date": 1421195020, "post_id": 27932773, "comment_id": 44265485, "body": "The way you are namespacing your routes, you would also need to have the voices_controller.rb nested in directories.  Does you set up look like /app/controllers/api/v1/voices_controller.rb?"}, {"owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "reply_to_user": {"reputation": 473, "user_id": 2588887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c060e93f000081c298d2a112fa884f8a?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/2588887/jay"}, "edited": false, "score": 0, "creation_date": 1421204497, "post_id": 27932773, "comment_id": 44267685, "body": "@Jay that was some serious troubleshootin&#39; Thanks nailed it"}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "edited": false, "score": 0, "creation_date": 1421677571, "post_id": 27932773, "comment_id": 44438837, "body": "I&#39;m not good with making JSON apis, and I only need to use them for my own purposes, but I am very good at scraping html. So I just build structured web pages based off url parameters and scrape using nokogiri. Just a thought"}], "owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421188591, "creation_date": 1421188591, "question_id": 27932773, "link": "https://stackoverflow.com/questions/27932773/building-rails-api", "title": "Building Rails API", "body": "<p>I need some help creating a very simple API. Just trying to get the basic information on a track using the browser.</p>\n\n<p>Here is the VoicesController</p>\n\n<pre><code>class Api::V1::VoicesController &lt; ApplicationController\n  respond_to :json, :xml\n\n   def index\n     @tracks = Track.all\n     respond_with json: @tracks\n   end\n\n  def show\n    @track = Track.find_by(:id =&gt; params[:track_id]).users\n    render json: @tracks\n  end\n\nend\n</code></pre>\n\n<p>Here is my routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users\n  devise_scope :user do\n  authenticated :user do\n  root :to =&gt; 'users#show', as: :authenticated_root\nend\nunauthenticated :user do\n  root :to =&gt; 'devise/registrations#new', as: :unauthenticated_root\nend\nend\n\n  resources :songs \n\n  resources :users\n\n  resources :versions\n  get 'versions/:id/download' =&gt; 'versions#download', :as =&gt; :version_download\n  get 'versions/:id/make_master' =&gt; 'versions#make_master', :as =&gt; :make_master\n  resources :comments\n\n  resources :team_members\n\n  post '/users/search' =&gt; 'users#search'\n\n  namespace :api do\n    namespace :v1 do\n      get '/users' =&gt; 'users#index'\n      get '/team_members/:song_id' =&gt; 'users#team_members'\n      get '/versions/:id/comments' =&gt; 'comments#index'\n      post '/versions/:id/comments' =&gt; 'comments#create'\n      get '/voices' =&gt; 'voices#index'\n    end\n  end\n\n  get '/search' =&gt; 's\n</code></pre>\n\n<p>What do i need to do to make this work and get the json to show up in my browser?</p>\n"}]