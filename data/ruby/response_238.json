[{"tags": ["ruby", "function", "syntax", "parentheses"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564617501, "post_id": 57300145, "comment_id": 101094056, "body": "I don&#39;t know of any Ruby that would complain about that. Parentheses are completely optional for non-ambiguous arguments. Do you mean &quot;interpreters&quot; as in Ruby  vs. JRuby, or do you mean &quot;interpreter&quot; as in linters like <a href=\"https://rubocop.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">Rubocop</a>?"}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1577638191, "post_id": 57300145, "comment_id": 105213641, "body": "I&#39;m not talking about JRuby, I made a false assumption, thinking there are many common Ruby interpreters the same way there are many common C compilers. To be clear, sometimes it complains about the space, sometimes it doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1564617803, "post_id": 57300243, "comment_id": 101094104, "body": "And I had no idea about any of this until I researched the question."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1564618220, "post_id": 57300243, "comment_id": 101094169, "body": "@RaphaelSpoerri I&#39;ve never seen any Ruby code leave out the parens in function arguments nor use array decomposition. I expect it&#39;s a piece of early syntax that got tossed into the dustbin and left in for backwards compatibility. Some old programming styles like to put a space between everything like <code>func (args)</code> which is legal but not used in Ruby. These are syntax edge cases I&#39;d recommend you avoid, they welcome ambiguity. No parens when calling a method is fine."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1564620214, "post_id": 57300243, "comment_id": 101094512, "body": "Are you sure it is the parentheses and not the spacing? <code>def m(x)</code> is not ambiguous but <code>def m (x)</code> could be. Just like <code>m(1,2)</code> is valid but <code>m (1,2)</code> is a syntax error. You example points to this but it isn&#39;t explicit."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1564620942, "post_id": 57300243, "comment_id": 101094642, "body": "@muistooshort It&#39;s both. <code>def foo i</code>, no parens, not ambiguous. <code>def foo(i)</code>, no space, not ambiguous. <code>def foo (i)</code>, both a space and parens, ambiguous. Does it mean <code>def foo(i)</code> (an extra space between the function name and the argument list) or <code>def foo((i))</code> (no parenthesis around the argument list which includes an array decomposition)? Ruby 2.6.2 chooses to interpret it as the former, probably because array decomposition is never used but some styles like to put spaces between every token."}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1565823290, "post_id": 57300243, "comment_id": 101474839, "body": "do you mean like the ES6 equivalent &quot;object destructuring&quot; when you say &quot;array decomposition&quot;?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1565831192, "post_id": 57300243, "comment_id": 101476126, "body": "@RaphaelSpoerri Similar idea. Treat <code>foo([1,2,3])</code> as <code>foo(1,2,3)</code>. There&#39;s a link to the Ruby docs on the subject in the answer."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1564618402, "last_edit_date": 1564618402, "creation_date": 1564617627, "answer_id": 57300243, "question_id": 57300145, "link": "https://stackoverflow.com/questions/57300145/why-does-ruby-sometimes-throw-an-error-when-a-function-is-called-with-a-space-be/57300243#57300243", "title": "Why does Ruby sometimes throw an error when a function is called with a space before the parentheses?", "body": "<p>Using Ruby 2.6.3 I get the following warning when run with <code>ruby -w</code>.</p>\n\n<blockquote>\n  <p>test.rb:1: warning: parentheses after method name is interpreted as an argument list, not a decomposed argument</p>\n</blockquote>\n\n<p>This is referring to <a href=\"https://ruby-doc.org/core/doc/syntax/methods_rdoc.html#label-Array+Decomposition\" rel=\"noreferrer\">Array Decomposition</a> where you can unpack the elements of an Array argument into individual variables.</p>\n\n<pre><code>def bar((a,b))\n  puts \"a: #{a}, b: #{b}\"\nend\n\n# a: first, b: second\nbar ['first', 'second', 'third']\n</code></pre>\n\n<p>What's wrong with <code>def foo (i)</code>? <code>def foo i</code> is legal; <a href=\"https://ruby-doc.org/core-2.6.3/doc/syntax/methods_rdoc.html#label-Arguments\" rel=\"noreferrer\">parenthesis around the arguments are optional</a>. However <code>def foo (i)</code> is ambiguous. It can be interpreted as a single argument <code>def foo(i)</code> or an array decomposition <code>def foo((i))</code>.</p>\n\n<p>Because this is ambiguous, different interpreters may have different... interpretations. <a href=\"https://www.youtube.com/watch?v=_sarYH0z948\" rel=\"noreferrer\">\ud83d\ude0e</a></p>\n"}], "owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 57300243, "answer_count": 1, "score": -1, "last_activity_date": 1577638265, "creation_date": 1564616647, "last_edit_date": 1577638265, "question_id": 57300145, "link": "https://stackoverflow.com/questions/57300145/why-does-ruby-sometimes-throw-an-error-when-a-function-is-called-with-a-space-be", "title": "Why does Ruby sometimes throw an error when a function is called with a space before the parentheses?", "body": "<p>The way I've learned Ruby is that both function syntax with and without parentheses is acceptable. Why do some Ruby interpreters want specifically one over the other? </p>\n\n<pre><code>def foo(i)\n    puts \"=\" * i.length\n    puts i \n    puts \"=\" * i.length\nend\n\nfoo \"hello\" \n\n=begin\n=====\nhello\n=====\n=end\n\nfoo (\"hello\") \n# sometimes ERROR\n\n</code></pre>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564616999, "post_id": 57300093, "comment_id": 101093952, "body": "Easy answer: Benchmark it for various values of <i>N</i> and find out yourself."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564617047, "post_id": 57300093, "comment_id": 101093969, "body": "There&#39;s some irregularities in the indentation here that implies structure that isn&#39;t there."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564617497, "post_id": 57300093, "comment_id": 101094055, "body": "Thanks everyone for the input. I understand now that its O(nm) and thus very slow. Back to the drawing board."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564617524, "post_id": 57300093, "comment_id": 101094062, "body": "Hint: <code>array1 &amp; array2</code> yields overlapping elements. That method&#39;s fairly optimized, so use that as a target."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1564617879, "post_id": 57300093, "comment_id": 101094113, "body": "Please provide a link to the kata problem you are solving, or at least summarise the problem. It&#39;s annoying to be asked to read code without any explanation of the problem that is being addressed."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1564697130, "post_id": 57300093, "comment_id": 101126521, "body": "The problem is in the question. Find common elements in an array."}], "answers": [{"comments": [{"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 2, "creation_date": 1564616906, "post_id": 57300150, "comment_id": 101093939, "body": "Rather than O(n&#178;), I think it&#39;s more accurate to write O(mn), where <i>m</i> is the length of one array and <i>n</i> is the length of the other."}, {"owner": {"reputation": 2927, "user_id": 516642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb13e7476e8713f076d17121e15e8d25?s=128&d=identicon&r=PG", "display_name": "Morrison Cole", "link": "https://stackoverflow.com/users/516642/morrison-cole"}, "edited": false, "score": 1, "creation_date": 1564616920, "post_id": 57300150, "comment_id": 101093943, "body": "Since both arrays are different lengths, this is O(nm). It would be O(n^2) only if they had the same size."}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1564633385, "post_id": 57300150, "comment_id": 101096795, "body": "Since big-O is an upper bound, and <i>n</i> is the size of the input unless otherwise specified, O(n&#178;) is completely valid even if the arrays aren&#39;t assumed to be the same length."}], "tags": [], "owner": {"reputation": 3363, "user_id": 2876504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f861d39e1561dc8147fc6442d1235e8?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro C.", "link": "https://stackoverflow.com/users/2876504/alejandro-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1564617547, "last_edit_date": 1564617547, "creation_date": 1564616710, "answer_id": 57300150, "question_id": 57300093, "link": "https://stackoverflow.com/questions/57300093/is-this-kata-solution-considered-on/57300150#57300150", "title": "Is this kata solution considered O(n)?", "body": "<p>The internal implementation of <code>.include?</code> does matter, because it's likely another <code>for</code> or <code>each</code> loop, so closer to O(<em>mn</em>). </p>\n\n<p>If you knew that e.g. array1 was guaranteed to be a constant size, you could say that it's O(<em>n</em>), where <em>n</em> is the length of the other array. However, in this kind of problem, we generally assume that both arrays have variable length, so this implementation would be thought of as O(<em>mn</em>), or as O(<em>n</em><sup>2</sup>) if the two lists are known to have the same length.</p>\n"}, {"tags": [], "owner": {"reputation": 2927, "user_id": 516642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb13e7476e8713f076d17121e15e8d25?s=128&d=identicon&r=PG", "display_name": "Morrison Cole", "link": "https://stackoverflow.com/users/516642/morrison-cole"}, "is_accepted": false, "score": 0, "last_activity_date": 1564616858, "creation_date": 1564616858, "answer_id": 57300166, "question_id": 57300093, "link": "https://stackoverflow.com/questions/57300093/is-this-kata-solution-considered-on/57300166#57300166", "title": "Is this kata solution considered O(n)?", "body": "<p>Remember that 'n' just describes the size of some input. In your example, you have two inputs <code>(array1, array2)</code>.</p>\n\n<p>Looping over <code>array1</code> can be described as <code>O(n)</code> where n is the size of the array.</p>\n\n<p>But what about <code>array2</code>? How does its size affect the runtime of your algorithm? It's an array, so running a contains operation is linear too.</p>\n\n<p>What you're looking at is <code>O(nm)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "is_accepted": false, "score": 0, "last_activity_date": 1564617134, "creation_date": 1564617134, "answer_id": 57300192, "question_id": 57300093, "link": "https://stackoverflow.com/questions/57300093/is-this-kata-solution-considered-on/57300192#57300192", "title": "Is this kata solution considered O(n)?", "body": "<p>If arrays are not sorted it is proven that there is no algorithm that works faster than O(n log n).</p>\n\n<p>For each element in array1 you check if it occurs in array2. So your computer must somehow know the answer.</p>\n\n<p>Looking at .include? implementation you can easily see that it iterates through array2 and checks for the element.</p>\n\n<pre><code>       VALUE\n       rb_ary_includes(VALUE ary, VALUE item)\n       {\n            long i;\n            VALUE e;\n\n             for (i=0; i&lt;RARRAY_LEN(ary); i++) {\n             e = RARRAY_AREF(ary, i);\n             if (rb_equal(e, item)) {\n                  return Qtrue;\n              }\n         }\n         return Qfalse;\n        }\n</code></pre>\n\n<p>One call of that function is O(n) then. That is why the complexity of your algorithm is O(n^2)</p>\n\n<p>(Well, O(nm) more correctly, where n is the length of array1 and m is the length of array2)</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57300150, "answer_count": 3, "score": 0, "last_activity_date": 1564617547, "creation_date": 1564616175, "question_id": 57300093, "link": "https://stackoverflow.com/questions/57300093/is-this-kata-solution-considered-on", "title": "Is this kata solution considered O(n)?", "body": "<p>I have the following solution to a kata:</p>\n\n<pre><code>def commonalities(array1, array2)\n  in_common = false\n    array1.each do |elem|\n      if array2.include?(elem)\n        in_common = true\n        break\n      end\n    end\n  puts in_common\nend\n\n\n##### Problem: Should find common elements in an array \n\narray1 = ['a','b','c','x']\narray2 = ['z','y','i']\ncommonalities(array1, array2)\n# return false\narray1 = ['a','b','c','x']\narray2 = ['z','y','x']\n# return true\ncommonalities(array1, array2)\n</code></pre>\n\n<p>I'm relearning BigO notation and doing some job interview katas. From what I've learned so far, I would say that this implementation is O(n) notation which is considered \"fair\". Is this a correct assumption? I say that this is O(n) because I have one loop, the <code>.each</code>. The bigger the array gets the longer it would take. This to me implies a linear O. However, the <code>.include?</code> is throwing me off. I don't know how the internals of <code>.include?</code> works. Does it even matter? Am I indeed correct to say that this is O(n)? Confirmation would be appreciated. Thanks. </p>\n"}, {"tags": ["ruby", "bundle", "rbenv", "macos-high-sierra"], "comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 2, "creation_date": 1564611857, "post_id": 57299528, "comment_id": 101092942, "body": "If you say <code>ruby --version</code> in the Terminal and you don&#39;t see &quot;ruby2.5.3&quot;, you have not configured rbenv properly. You should not be seeing <code>&#47;Library</code> at all."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564612136, "post_id": 57299528, "comment_id": 101092997, "body": "As with what matt said, <code>&#47;Library&#47;Ruby</code> is the system Ruby that came with the OS. Anything installed by <code>rbenv</code> goes into <code>~&#47;.rbenv</code> usually."}, {"owner": {"reputation": 7, "user_id": 5248972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40a34f124fe803a2d162d91b9f3b6d2?s=128&d=identicon&r=PG&f=1", "display_name": "eookuro", "link": "https://stackoverflow.com/users/5248972/eookuro"}, "edited": false, "score": 0, "creation_date": 1564665307, "post_id": 57299528, "comment_id": 101112045, "body": "My ruby version comes out just fine<code>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-darwin18]</code>. I added that info to the main question."}], "answers": [{"comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1564679926, "post_id": 57313789, "comment_id": 101120110, "body": "That&#39;s not as helpful answer. Unclear how it relates to the question or what it even means. Give specifics please. How might someone else encounter this issue, and if they do, what is the correct solution? &quot;issues was a path during install was incorrect&quot; What path during the install of what? What was the wrong path and what is the right path?"}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1564680201, "post_id": 57313789, "comment_id": 101120231, "body": "You <i>might</i> be saying that after installing <code>rbenv</code> it is also important to install your gems. That&#39;s sort of trivially obvious but if that&#39;s the answer then at least you should say it."}], "tags": [], "owner": {"reputation": 7, "user_id": 5248972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40a34f124fe803a2d162d91b9f3b6d2?s=128&d=identicon&r=PG&f=1", "display_name": "eookuro", "link": "https://stackoverflow.com/users/5248972/eookuro"}, "is_accepted": false, "score": -1, "last_activity_date": 1564678786, "creation_date": 1564678786, "answer_id": 57313789, "question_id": 57299528, "link": "https://stackoverflow.com/questions/57299528/ruby-commands-give-me-a-conflicting-message-that-says-the-local-ruby-installed-i/57313789#57313789", "title": "Ruby commands give me a conflicting message that says the local ruby installed in MacOS won&#39;t give me right permissions", "body": "<p>I figured it out just fine. Basically <code>rbenv</code> was installed correctly and the issues was a path during install was incorrect so my machine wasn't able to run <code>bundle install</code> removing every single item in my environment and checking all my paths and reinstalling everything worked fine. </p>\n"}], "owner": {"reputation": 7, "user_id": 5248972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40a34f124fe803a2d162d91b9f3b6d2?s=128&d=identicon&r=PG&f=1", "display_name": "eookuro", "link": "https://stackoverflow.com/users/5248972/eookuro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564678786, "creation_date": 1564611534, "last_edit_date": 1564664951, "question_id": 57299528, "link": "https://stackoverflow.com/questions/57299528/ruby-commands-give-me-a-conflicting-message-that-says-the-local-ruby-installed-i", "title": "Ruby commands give me a conflicting message that says the local ruby installed in MacOS won&#39;t give me right permissions", "body": "<p>I am attempting to get a project running om my Mac with High Sierra computer. After using rbenv and setting the correct version it cd into the project and run bundle install. It tells me the following files may not be writeable and tells me I have the wrong version. Only thing is what it's telling me are the pre brought items from my mac machine.</p>\n\n<p>I attempted to uninstall ruby and reinstall it. I made sure my <code>~/.bash_profile</code> had the <code>eval \"$(rbenv init -)\"</code> I even attempted an alternative which another user suggested <code>export PATH=\"$HOME/.rbenv/shims:$PATH\"</code>. I made sure <code>rbenv</code> used the correct version globally and locally. Using <code>sudo</code> is dangerous although I did that too like an idiot, sure enough, my computer warned me. \nI ran <code>ruby --version</code> the output was <code>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-darwin18]</code> When I check with the rbenv-doctor </p>\n\n<pre><code>curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash\n</code></pre>\n\n<p>my output tells me everything is dandy.  </p>\n\n<pre><code>Checking for `rbenv' in PATH: /usr/local/bin/rbenv\nChecking for rbenv shims in PATH: OK\nChecking `rbenv install' support: /usr/local/bin/rbenv-install (ruby-build 20190423)\nCounting installed Ruby versions: 1 versions\nChecking RubyGems settings: OK\nAuditing installed plugins: OK \n</code></pre>\n\n<p>This is the issues I am having with <code>rbenv</code> currently.</p>\n\n<pre><code>[My-Macbook]:sf-dahlia-web username$ bundle install\nFollowing files may not be writable, so sudo is needed:\n  /Library/Ruby/Gems/2.3.0\n  /Library/Ruby/Gems/2.3.0/build_info\n  /Library/Ruby/Gems/2.3.0/cache\n  /Library/Ruby/Gems/2.3.0/doc\n  /Library/Ruby/Gems/2.3.0/extensions\n  /Library/Ruby/Gems/2.3.0/gems\n  /Library/Ruby/Gems/2.3.0/specifications\nYour Ruby version is 2.3.7, but your Gemfile specified 2.5.3\n</code></pre>\n\n<p>It should successfully run and show all the dependencies for the application I pulled.</p>\n"}, {"tags": ["ruby", "automated-tests", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564610073, "post_id": 57299238, "comment_id": 101092495, "body": "is <code>expect</code> always your last step in scenario/scenario outline? (meaning before hitting the <code>after</code> hook?"}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564610264, "post_id": 57299238, "comment_id": 101092539, "body": "yes, thats right, my expect will be always the last command.."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564630238, "post_id": 57299238, "comment_id": 101096219, "body": "Then get the validation element and change the style of element or css. You can execute <a href=\"https://www.rubydoc.info/github/jnicklas/capybara/Capybara/Node/Element#evaluate_script-instance_method\" rel=\"nofollow noreferrer\">javascript</a>  and update the element style."}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564664853, "post_id": 57299238, "comment_id": 101111751, "body": "Got it, do you have an example? I&#39;ve never used something like that before.. Thanks!"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564666579, "post_id": 57299238, "comment_id": 101112825, "body": "Let me share the js to change the style."}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564691950, "post_id": 57299238, "comment_id": 101124936, "body": "ohh, thank you, I really appreciate that :)"}], "answers": [{"comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564694051, "post_id": 57317047, "comment_id": 101125630, "body": "Just change the color and the thickness based as required."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1564693911, "creation_date": 1564693911, "answer_id": 57317047, "question_id": 57299238, "link": "https://stackoverflow.com/questions/57299238/capybara-ruby-cucumber-making-the-command-expect-to-be-highlighted-in-the/57317047#57317047", "title": "Capybara / Ruby / Cucumber - Making the command Expect to be highlighted in the evidence", "body": "<p>You can use the below javascript to highlight the border of the element before taking the screenshot.</p>\n\n<pre><code>element.style.border = '0.5em solid red';\n</code></pre>\n\n<p>Here is the sample video.\n<a href=\"https://i.stack.imgur.com/ALA4M.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ALA4M.gif\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57317047, "answer_count": 1, "score": 0, "last_activity_date": 1564693911, "creation_date": 1564609602, "question_id": 57299238, "link": "https://stackoverflow.com/questions/57299238/capybara-ruby-cucumber-making-the-command-expect-to-be-highlighted-in-the", "title": "Capybara / Ruby / Cucumber - Making the command Expect to be highlighted in the evidence", "body": "<p>I'm generating evidences every time that I run a cucumber scenario. It is working fine, however I would like to improve it a little bit more.</p>\n\n<p>My idea is highlight all the \"expect\" commands into the evidence to make clear the result.</p>\n\n<p>I'm using a hook to generate the evidence, so I think I have to do something there.</p>\n\n<pre><code>After do \n    shot_file = page.save_screenshot(\"log/screenshot.png\")\n    shot_b64 = Base64.encode64(File.open(shot_file, \"rb\").read)\n    embed(shot_b64, \"image/png\", \"Screenshot\") \n end\n</code></pre>\n\n<p>So, when I declare a expect command I would like to see it in the evidence highlighted.</p>\n\n<pre><code>expect(find(\".nav-a.nav-a-2.nav-truncate\")).to have_content \"Hello, my name\"\n</code></pre>\n\n<p>Any idea guys?</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cocoon-gem"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1564695661, "post_id": 57298980, "comment_id": 101126106, "body": "Can you show the model definition listing the associations? Do you have the <code>accepts_nested_attributes_for :household_members</code> in your parent model?"}, {"owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1565817021, "post_id": 57298980, "comment_id": 101473258, "body": "Yes here you go! sorry I took so long to respond"}, {"owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1565817239, "post_id": 57298980, "comment_id": 101473324, "body": "Household Member:      <code>class HouseholdMember &lt; ApplicationRecord   belongs_to :users, optional: true   has_one :veteran_status   has_one :disability_assistance</code>"}, {"owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1565817263, "post_id": 57298980, "comment_id": 101473335, "body": "User:      <code>class User &lt; ApplicationRecord   has_many :addresses   has_one :contact_info   has_one :household_type   has_many :household_members   accepts_nested_attributes_for :household_members, allow_destroy: true,                                 reject_if: :all_blank</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "edited": false, "score": 0, "creation_date": 1568759051, "post_id": 57521052, "comment_id": 102374599, "body": "That worked! I also had to add association to the correct form in front of text_field, label, checkbox, ect. But your explanation really helped my understand what is going on!  Thanks a lot!"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 0, "last_activity_date": 1565942984, "creation_date": 1565942984, "answer_id": 57521052, "question_id": 57298980, "link": "https://stackoverflow.com/questions/57298980/my-nested-cocoon-form-only-accepts-the-last-line-of-my-dynamic-table/57521052#57521052", "title": "My nested cocoon form only accepts the last line of my dynamic table", "body": "<p>You have to fix your nested items partial: remove the scoped name --now it will be double scoped, this explains why some attributes are in <code>household_members</code> (your scope and blocked by the strong parameters definition) and some in <code>household_members_attributes</code> (the expected scope). Also there is no need to add the hidden field <code>:id</code> (that will be automatically handled by the index in the array).  </p>\n\n<p>So write your partial as follows:</p>\n\n<pre><code>&lt;tr class= \"nested-fields\"&gt;\n  &lt;td&gt;&lt;% f.label(:name)%&gt;\n    &lt;%= text_field(:name) %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;% f.label(:birthdate)%&gt;\n    &lt;%= date_field(:birthdate) %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;% f.label(:ssn)%&gt;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57521052, "answer_count": 1, "score": 1, "last_activity_date": 1565942984, "creation_date": 1564607920, "last_edit_date": 1565817456, "question_id": 57298980, "link": "https://stackoverflow.com/questions/57298980/my-nested-cocoon-form-only-accepts-the-last-line-of-my-dynamic-table", "title": "My nested cocoon form only accepts the last line of my dynamic table", "body": "<p>I am currently creating a nested form using cocoon. I have a table that takes in information for everyone in a household. the form dynamically creates a new line when the user clicks on add new member. The problem that I am having is that when the form is submitted, only the last line of the table is passed through.</p>\n\n<p>I have tried many different things including changing the attributes of the members and also trying to isolate just the household members so I can see what is happening. I have tried giving them unique id's, but that didn't work. It might be something to do with the rails sever or just some bad code that I can't see. </p>\n\n<p>Here is where I am nesting the form</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> &lt;tbody class=\"members\"&gt;\n    &lt;%= f.fields_for :household_members do |ff|%&gt;\n      &lt;%= render 'household_member_fields', :f =&gt; ff %&gt;\n      &lt;%end%&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;%= link_to_add_association 'Add household member', f, :household_members, data: {association_insertion_node: '.members',\n      association_insertion_method: :append} %&gt;\n</code></pre>\n\n<p>This is the beginning of the households_member_fields:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;tr class= \"nested-fields\"&gt;\n  &lt;% f.hidden_field :id%&gt;\n  &lt;td&gt;&lt;% f.label(:name)%&gt;\n    &lt;%= text_field(:household_members, :name) %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;% f.label(:birthdate)%&gt;\n    &lt;%= date_field(:household_members, :birthdate) %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;% f.label(:ssn)%&gt;\n</code></pre>\n\n<p>This is my controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def create\n    addresses = params[:addresses].permit([:county]).to_h\n    contact_info = params[:contact_info].permit(params[:contact_info].keys).to_h\n    household = params[:household_type].permit([:house_type]).to_h\n    household_members = member_params\n    @workflow = CreatesUser.new(address_info: addresses,\n      contact: contact_info, household: household)\n    @workflow.create\n    redirect_to users_path\n  end\n\n  private\n\n  def member_params\n    params.require(:user).permit(household_members_attributes: [:id, :name, :birthdate, :ssn, :gender, :hispanic, :race, :or_tribe, :education, :_destroy])\n  end\n</code></pre>\n\n<p>When I currently submit two or more household members I only ever get one of them like this:</p>\n\n<pre><code>\"household_members\"=&gt;{\"name\"=&gt;\"Fake2\", \"birthdate\"=&gt;\"2019-07-21\", \"ssn\"=&gt;\"fake2\", \"gender\"=&gt;\"Female\", \"hispanic\"=&gt;\"0\", \"race\"=&gt;\"Alaska Native\", \"or_tribe\"=&gt;\"0\", \"education\"=&gt;\"Some college\"}, \"disablility_assistances\"=&gt;{\"disabled\"=&gt;\"0\", \"homebound\"=&gt;\"0\", \"snap\"=&gt;\"0\", \"ohp\"=&gt;\"0\", \"med_insurance\"=&gt;\"fake2\"}, \"veteran_statuses\"=&gt;{\"veteran\"=&gt;\"0\"}\n</code></pre>\n\n<p>I am expecting to get multiple of these. If you have any incite into what I am doing wrong I would greatly appreciate it!</p>\n\n<p>Thanks,</p>\n\n<p>Aala95</p>\n\n<p>After looking at what my code is returning a little more it looks like the nested form is being submitted but only with an ID and delete:\n<code>\"user\"=&gt;{\"household_members_attributes\"=&gt;{\"0\"=&gt;{\"_destroy\"=&gt;\"false\"}, \"1\"=&gt;{\"_destroy\"=&gt;\"false\"}}}</code></p>\n"}, {"tags": ["regex", "ruby", "regex-lookarounds"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1564605466, "post_id": 57298486, "comment_id": 101090966, "body": "You need a <b>lookahead</b>. <code>&#47;^(?!#+ ).*$&#47;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1564605862, "post_id": 57298486, "comment_id": 101091124, "body": "The pattern is invalid because you have a variable length in the assertion. Basically a quantifier after the pound sign. Aside from that,  if variable length were allowed in Ruby look behind assertions, this type of beginning <code>^(?&lt;!#)</code> will always be true because there can be <i>nothing</i> before the beginning of string <i>and</i> there is only a line-break before the beginning of line if in line mode <code>(?m)</code>."}, {"owner": {"reputation": 1146, "user_id": 4969849, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8ef156578a98474c5e459856ad268159?s=128&d=identicon&r=PG&f=1", "display_name": "JBone", "link": "https://stackoverflow.com/users/4969849/jbone"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1564605964, "post_id": 57298486, "comment_id": 101091166, "body": "just as @WiktorStribi\u017cew said. Or you can move one character and do a look behind for <code>#</code> like  /^.(?&lt;!#)/"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 2, "creation_date": 1564606069, "post_id": 57298486, "comment_id": 101091217, "body": "Basically the regex you&#39;re looking for is this <code>(?m)^(?!#).*\\S.*</code> which will match any line that does not start with a hash tag and the line must contain at least one non-whitespace character."}, {"owner": {"reputation": 37, "user_id": 1595070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aeb159991a484aec3d7eeb0aeba71b1?s=128&d=identicon&r=PG", "display_name": "rcheetah", "link": "https://stackoverflow.com/users/1595070/rcheetah"}, "edited": false, "score": 1, "creation_date": 1564608652, "post_id": 57298486, "comment_id": 101092064, "body": "Ah, I see. It\u2019s still a lookahead because it is AFTER the start of a line. That was the bug in my mind. Thank you all for your answers, also the other ones. I think I now understand the concept better. You\u2019re great!"}, {"owner": {"reputation": 455, "user_id": 11487332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWmPQ-SD44E/AAAAAAAAAAI/AAAAAAAAAAc/bBpEudhwExY/photo.jpg?sz=128", "display_name": "Hamed Ghasempour", "link": "https://stackoverflow.com/users/11487332/hamed-ghasempour"}, "edited": false, "score": 0, "creation_date": 1564635851, "post_id": 57298486, "comment_id": 101097374, "body": "does /^[^#]+/gmi make sense?"}], "owner": {"reputation": 37, "user_id": 1595070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aeb159991a484aec3d7eeb0aeba71b1?s=128&d=identicon&r=PG", "display_name": "rcheetah", "link": "https://stackoverflow.com/users/1595070/rcheetah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1564639774, "answer_count": 0, "score": 3, "last_activity_date": 1564606190, "creation_date": 1564605367, "question_id": 57298486, "link": "https://stackoverflow.com/questions/57298486/regex-invalid-pattern-in-look-behind-assertion", "closed_reason": "Duplicate", "title": "REGEX: &quot;Invalid pattern in look-behind&quot; assertion", "body": "<p>I\u2019m trying to write a regex substitution for markup-ish text. I try to catch every line that is not empty and does not start with any number of hashtags. </p>\n\n<p>I tried to catch just the content using the negative lookbehind assertion so find lines that start with any number of hashtags followed by a space.</p>\n\n<p>Here is what I tried with a negative lookbehind:</p>\n\n<p><code>/^(?&lt;!#+ )(.*?)$/i</code></p>\n\n<p>My searched text looks similar like this:</p>\n\n<pre><code># heading\n\n## part\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\n\n## part\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\nLorem ipsum dolor sit amet\n</code></pre>\n\n<p>I get the error <code>invalid pattern in look-behind</code>, and I don\u2019t understand it. Could you help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": true, "score": 4, "last_activity_date": 1564616988, "creation_date": 1564616988, "answer_id": 57300177, "question_id": 57298269, "link": "https://stackoverflow.com/questions/57298269/how-to-paginate-relations-with-ruby-on-rails/57300177#57300177", "title": "How to paginate relations with ruby \u200bon rails?", "body": "<p>You should fetch <code>followers</code> on <code>@user</code> instead of <code>follower_relationships</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def followeres\n  @user = User.find_by(username: params[:username])\n\n  @followers = @user.followers\n    .page(params[:page] || 1)\n    .per(params[:per_page] || 20)\n    .order('created_at DESC')\n\n  render json: { followers: @followers }, status: :ok\nend\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11865623, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001153112221/picture?type=large", "display_name": "Jcsreisjr", "link": "https://stackoverflow.com/users/11865623/jcsreisjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 57300177, "answer_count": 1, "score": 4, "last_activity_date": 1564616988, "creation_date": 1564604338, "question_id": 57298269, "link": "https://stackoverflow.com/questions/57298269/how-to-paginate-relations-with-ruby-on-rails", "title": "How to paginate relations with ruby \u200bon rails?", "body": "<p>I'm studying Ruby On Rails and as a learning goal I made an API with the basic functionality of Instagram.</p>\n\n<p>I have difficulty paginating the results of my follower list.</p>\n\n<p>I also wanted to display only followers and not user data as it has no return below:</p>\n\n<p>ps. I am using the kaminari gem for pagination</p>\n\n<p>Controller</p>\n\n<pre><code>def followeres\n\n    @user = User.find_by(username: params[:username])\n\n    @user.follower_relationships\n    .page(params[:page] || 1)\n    .per(1)\n    .order('created_at DESC')\n\n    render json: @user, include: [:followers]\nend\n</code></pre>\n\n<p>Model user.rb</p>\n\n<pre><code>has_many :follows\n\nhas_many :follower_relationships, foreign_key: :following_id, class_name: 'Follow', dependent: :destroy\nhas_many :followers, through: :follower_relationships, source: :follower\n\nhas_many :following_relationships, foreign_key: :user_id, class_name: 'Follow', dependent: :destroy\nhas_many :following, through: :following_relationships, source: :following\n[...]\n</code></pre>\n\n<p>user_serializer.rb</p>\n\n<pre><code>class UserSerializer &lt; ActiveModel::Serializer\n  include Rails.application.routes.url_helpers\n\n  attributes :username, :full_name, :profile_pic_url, :genre, :phone, :email, :bio, :website, :is_private, :is_verified, :followers_count, :following_count\n  has_many :followers, serializer: FollowSerializer\n    has_many :following, serializer: FollowSerializer\n\n  def profile_pic_url\n    rails_blob_path(object.image) if object.image.attachment\n  end\n\nend\n</code></pre>\n\n<p>follow_serializer.rb</p>\n\n<pre><code>class FollowSerializer &lt; ActiveModel::Serializer\n  attributes :username, :full_name, :followers_count, :following_count, :is_private\nend\n</code></pre>\n\n<p>Return</p>\n\n<pre><code>{\n    \"user\": {\n        \"username\": \"teste123\",\n        \"full_name\": \"Teste 123\",\n        \"profile_pic_url\": null,\n        \"genre\": null,\n        \"phone\": \"41922222222\",\n        \"email\": \"example@domain.com\",\n        \"bio\": null,\n        \"website\": null,\n        \"is_private\": 1,\n        \"is_verified\": 0,\n        \"followers_count\": 48,\n        \"following_count\": 31,\n        \"followers\": [\n            {\n                \"username\": \"milagro_ullrich\",\n                \"full_name\": \"Lance Bartell\",\n                \"followers_count\": 42,\n                \"following_count\": 37,\n                \"is_private\": 0\n            },\n            {\n                \"username\": \"geoffrey_howell\",\n                \"full_name\": \"Jordon Ritchie\",\n                \"followers_count\": 34,\n                \"following_count\": 38,\n                \"is_private\": 0\n            },\n            [...]\n        ]\n    }\n}\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>def followeres\n\n        @user = User.find_by(username: params[:username])\n\n        @followers = @user.follower_relationships\n        .page(params[:page] || 1)\n        .per(params[:per_page] || 20)\n        .order('created_at DESC')\n\n        render json: { followers: @followers }, status: :ok\n\nend\n</code></pre>\n\n<p>but the response</p>\n\n<pre><code>{\n    \"followers\": [\n        {\n            \"id\": 3020,\n            \"user_id\": 293,\n            \"following_id\": 2,\n            \"created_at\": \"2019-07-25T19:22:37.000Z\"\n        },\n        {\n            \"id\": 2983,\n            \"user_id\": 63,\n            \"following_id\": 2,\n            \"created_at\": \"2019-07-25T19:22:37.000Z\"\n        },\n        [....]\n    ]\n}\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "edited": false, "score": 0, "creation_date": 1564633658, "post_id": 57298027, "comment_id": 101096842, "body": "lesson learnt, thanks! what about merging all the values get get something like [&quot;list1&quot;, &quot;list1&quot;, &quot;list2&quot;, &quot;list2&quot;, &quot;list3&quot;, &quot;list3&quot;]. I can only do it by running another for loop based on your output... Thanks"}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 0, "last_activity_date": 1564603031, "creation_date": 1564603031, "answer_id": 57298027, "question_id": 57297945, "link": "https://stackoverflow.com/questions/57297945/how-to-merge-values-in-a-list-of-map-in-ruby/57298027#57298027", "title": "how to merge values in a list of map in ruby", "body": "<p>If you only have 1 key in those hashes then you can do it like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>y = x.map { |h| h.values[0] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "edited": false, "score": 0, "creation_date": 1564633652, "post_id": 57298034, "comment_id": 101096841, "body": "lesson learnt, thanks! what about merging all the values get get something like [&quot;list1&quot;, &quot;list1&quot;, &quot;list2&quot;, &quot;list2&quot;, &quot;list3&quot;, &quot;list3&quot;]. I can only do it by running another for loop based on your output... Thanks"}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "reply_to_user": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "edited": false, "score": 0, "creation_date": 1564970595, "post_id": 57298034, "comment_id": 101190833, "body": "You can just tack a <code>flatten</code> onto the end, ala: <code>y = x.flat_map(&amp;:values).flatten</code>"}], "tags": [], "owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "is_accepted": true, "score": 3, "last_activity_date": 1564603086, "creation_date": 1564603086, "answer_id": 57298034, "question_id": 57297945, "link": "https://stackoverflow.com/questions/57297945/how-to-merge-values-in-a-list-of-map-in-ruby/57298034#57298034", "title": "how to merge values in a list of map in ruby", "body": "<p>The quickest thing that comes to mind is to leverage <code>flat_map</code>.</p>\n\n<pre><code>x = [ { \"key1\" =&gt; [\"list1\", \"list1\"] }, \n      { \"key2\" =&gt; [\"list2\", \"list2\"] }, \n      { \"key3\" =&gt; [\"list3\", \"list3\"] }]\n\ny = x.flat_map(&amp;:values)\n\n=&gt; [[\"list1\", \"list1\"], [\"list2\", \"list2\"], [\"list3\", \"list3\"]]\n</code></pre>\n\n<p><code>flat_map</code> is an instance method on Enumerable (<a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-flat_map</a>)</p>\n\n<p><code>values</code> is an instance method on Hash (<a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-values\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.3/Hash.html#method-i-values</a>)</p>\n"}], "owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 57298034, "answer_count": 2, "score": 0, "last_activity_date": 1564603086, "creation_date": 1564602547, "question_id": 57297945, "link": "https://stackoverflow.com/questions/57297945/how-to-merge-values-in-a-list-of-map-in-ruby", "title": "how to merge values in a list of map in ruby", "body": "<p>say I have data structure like List&lt; MAP&lt; String, List>>, I only want to keep the List in map's value, </p>\n\n<p>Like, I want to convert following example:</p>\n\n<blockquote>\n  <p>x = [{\"key1\" => [\"list1\", \"list1\"]}, {\"key2\" => [\"list2\", \"list2\"]},\n  {\"key3\" => [\"list3\", \"list3\"]}]</p>\n</blockquote>\n\n<p>to:</p>\n\n<blockquote>\n  <p>y = [[\"list1\", \"list1\"], [\"list2\", \"list2\"], [\"list3\", \"list3\"]]</p>\n</blockquote>\n\n<p>Is there any quick way to do this? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 11750453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ukwo8wIwYxA/AAAAAAAAAAI/AAAAAAAAAIs/JAHcH6TWHBw/photo.jpg?sz=128", "display_name": "Trisma", "link": "https://stackoverflow.com/users/11750453/trisma"}, "edited": false, "score": 0, "creation_date": 1564605365, "post_id": 57298363, "comment_id": 101090929, "body": "I thought that it was directly transferred, really thanks for that"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 1, "creation_date": 1564644788, "post_id": 57298363, "comment_id": 101100705, "body": "Ya you have to provision postgres when creating the app in the resources section. Then you have to manually migrate each time you deploy. One way around that is to create a Procfile with a release script that is run each time you deploy. This can include the command to <code>rake db:migrate</code> on each deploy if needed. Also it would be <code>heroku run rake db:migrate</code> if running from the command line. You need to include the <code>run</code> command to access the toolbelt."}], "tags": [], "owner": {"reputation": 376, "user_id": 1837162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdab3d0a99e716ac420f01dafc87601?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1837162/john"}, "is_accepted": true, "score": 2, "last_activity_date": 1564604805, "creation_date": 1564604805, "answer_id": 57298363, "question_id": 57297899, "link": "https://stackoverflow.com/questions/57297899/connecting-postgresql-to-rails-in-heroku/57298363#57298363", "title": "Connecting Postgresql to Rails in Heroku", "body": "<p>It sounds like you may have run <code>rake db:migrate</code> locally and not on Heroku. As a result, when you use the Heroku CLI, it doesn't recognize the users table because it doesn't yet exist.</p>\n\n<p>I believe if you use have the <code>pg</code> gem in your Gemfile, Heroku's system will automatically setup a database for you. It's been a while since I've created a Heroku instance so don't quote me on that.</p>\n\n<p>If you're unsure if you have PostgreSQL with your app, check the app's service add-ons area. Heroku also has more <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow noreferrer\">documentation on using PostgreSQL on their platform.</a> It may be a good idea for you to reference their <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails5\" rel=\"nofollow noreferrer\">documentation for getting started with Rails</a> as well.</p>\n\n<p>Once you have your PostgreSQL database setup to work with your app, you use the Heroku CLI to migrate the database and create your users table:</p>\n\n<pre><code>heroku rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 11750453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ukwo8wIwYxA/AAAAAAAAAAI/AAAAAAAAAIs/JAHcH6TWHBw/photo.jpg?sz=128", "display_name": "Trisma", "link": "https://stackoverflow.com/users/11750453/trisma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57298363, "answer_count": 1, "score": 0, "last_activity_date": 1564604805, "creation_date": 1564602284, "question_id": 57297899, "link": "https://stackoverflow.com/questions/57297899/connecting-postgresql-to-rails-in-heroku", "title": "Connecting Postgresql to Rails in Heroku", "body": "<p>So I recently deployed my <code>Rails</code> backend server to <code>Heroku</code>.\nAfter a little struggling with passing from <code>SQLite</code> to <code>PostgreSQL</code>, I finally got everything running.\nNow the problem is, I did <code>rake db:create</code> and <code>rake db:migrate</code> and that went without any errors but now when I make a <code>REST</code> call to the server I have this error (complete) : </p>\n\n<pre><code>2019-07-31T19:42:16.534355+00:00 app[web.1]: I, [2019-07-31T19:42:16.534259 #4]  INFO -- : [047c870d-8791-4ec7-90df-a7998b8b17c5] Started POST \"/sessions\" for 91.176.204.35 at 2019-07-31 19:42:16 +0000\n2019-07-31T19:42:16.535824+00:00 app[web.1]: I, [2019-07-31T19:42:16.535063 #4]  INFO -- : [047c870d-8791-4ec7-90df-a7998b8b17c5] Processing by SessionsController#create as */*\n2019-07-31T19:42:16.535947+00:00 app[web.1]: I, [2019-07-31T19:42:16.535882 #4]  INFO -- : [047c870d-8791-4ec7-90df-a7998b8b17c5]   Parameters: {\"email\"=&gt;\"titivermeesch@gmail.com\", \"password\"=&gt;\"[FILTERED]\"}\n2019-07-31T19:42:16.566455+00:00 app[web.1]: I, [2019-07-31T19:42:16.566340 #4]  INFO -- : [047c870d-8791-4ec7-90df-a7998b8b17c5] Completed 500 Internal Server Error in 30ms (ActiveRecord: 11.2ms)\n2019-07-31T19:42:16.567845+00:00 app[web.1]: F, [2019-07-31T19:42:16.567772 #4] FATAL -- : [047c870d-8791-4ec7-90df-a7998b8b17c5]   \n2019-07-31T19:42:16.567954+00:00 app[web.1]: F, [2019-07-31T19:42:16.567879 #4] FATAL -- : [047c870d-8791-4ec7-90df-a7998b8b17c5] ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"users\" does not exist\n2019-07-31T19:42:16.567957+00:00 app[web.1]: LINE 8:                WHERE a.attrelid = '\"users\"'::regclass\n2019-07-31T19:42:16.567959+00:00 app[web.1]:                                           ^\n2019-07-31T19:42:16.567961+00:00 app[web.1]: :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n2019-07-31T19:42:16.567962+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n2019-07-31T19:42:16.567964+00:00 app[web.1]:                      c.collname, col_description(a.attrelid, a.attnum) AS comment\n2019-07-31T19:42:16.567965+00:00 app[web.1]:                 FROM pg_attribute a\n2019-07-31T19:42:16.567966+00:00 app[web.1]:                 LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n2019-07-31T19:42:16.567968+00:00 app[web.1]:                 LEFT JOIN pg_type t ON a.atttypid = t.oid\n2019-07-31T19:42:16.567969+00:00 app[web.1]:                 LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation &lt;&gt; t.typcollation\n2019-07-31T19:42:16.567971+00:00 app[web.1]:                WHERE a.attrelid = '\"users\"'::regclass\n2019-07-31T19:42:16.567972+00:00 app[web.1]:                  AND a.attnum &gt; 0 AND NOT a.attisdropped\n2019-07-31T19:42:16.567973+00:00 app[web.1]:                ORDER BY a.attnum\n2019-07-31T19:42:16.567975+00:00 app[web.1]: ):\n2019-07-31T19:42:16.568064+00:00 app[web.1]: F, [2019-07-31T19:42:16.568002 #4] FATAL -- : [047c870d-8791-4ec7-90df-a7998b8b17c5]   \n2019-07-31T19:42:16.568171+00:00 app[web.1]: F, [2019-07-31T19:42:16.568104 #4] FATAL -- : [047c870d-8791-4ec7-90df-a7998b8b17c5] app/controllers/sessions_controller.rb:5:in `create'\n</code></pre>\n\n<p>I have a <code>PostgreSQL</code> add-on installed and it is running. (Otherwise the <code>Rails</code> server wouldn't even boot).</p>\n\n<p>So why do I get this kind of errors on each request? I checked in console and if I do something like <code>User.all</code> I get this : </p>\n\n<pre><code>ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"users\" does not exist)\nLINE 1: SELECT  \"users\".* FROM \"users\" LIMIT $1\n                               ^\n: SELECT  \"users\".* FROM \"users\" LIMIT $1\n</code></pre>\n\n<p>This gets me so confused, what did I do wrong?</p>\n"}, {"tags": ["ruby-on-rails", "sql-server", "ruby", "database"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564598731, "post_id": 57297113, "comment_id": 101088350, "body": "Use an <a href=\"https://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize\" rel=\"nofollow noreferrer\">ActiveRecord serializer</a>. As simple as adding <code>serialize :field, JSON</code> to the relevant model. Rails will serialize the hash to JSON, store it in the db as a string, and when you fetch the value it&#39;ll serialize the JSON back to a hash."}], "answers": [{"tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1564645850, "creation_date": 1564645850, "answer_id": 57304213, "question_id": 57297113, "link": "https://stackoverflow.com/questions/57297113/save-key-value-pairs-from-ruby-hash-to-a-database/57304213#57304213", "title": "Save Key Value pairs from ruby Hash to a database?", "body": "<p>If all records are going to have (more or less) the same structure, I would recommend not storing the serialized JSON and explicitly describe in the table structure the columns that are going to be needed. </p>\n\n<p>However, if you really do need to store the hash in the SQL server I would recommend using a <a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/json/json-data-sql-server?view=sql-server-2017\" rel=\"nofollow noreferrer\">JSON column</a> instead of a string. Among other features, this will allow you to use indexes on some keys of the hash. </p>\n"}], "owner": {"reputation": 9, "user_id": 11821310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BIeR8kkKGWw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGVaZWbTAu0PDDTmyka3EDfTzrsw/photo.jpg?sz=128", "display_name": "Suleyman Kiani", "link": "https://stackoverflow.com/users/11821310/suleyman-kiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564645850, "creation_date": 1564598573, "question_id": 57297113, "link": "https://stackoverflow.com/questions/57297113/save-key-value-pairs-from-ruby-hash-to-a-database", "title": "Save Key Value pairs from ruby Hash to a database?", "body": "<p>\"I have developed a script that takes a json file and takes specific values from inside of it and saves them as key-value pairs in a ruby hash. Now that I have all the values i needed from the file stored in a hash, is there a method I can use to save said key-value pairs in a sql server database? </p>\n\n<p>The following is the way I have the information I need stored in a hash.\"</p>\n\n<pre><code>client_info = {\n   \"Name\" =&gt; fullName,\n   \"BirthDate\" =&gt; birthDate,\n   \"MemberId\" =&gt; memberId\n}\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564599135, "post_id": 57297108, "comment_id": 101088535, "body": "That&#39;s a lot of questions. Can you focus your post? What is it that you&#39;re actually asking?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564599863, "post_id": 57297108, "comment_id": 101088835, "body": "Also it was a pleasant surprise to see <code>[hash]</code> tag used appropriately. I <i>almost</i> auto-removed it :)"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564600763, "post_id": 57297108, "comment_id": 101089201, "body": "The question is that first of all, there&#39;s no <code>SHA1</code> constant in the <code>Digest</code> module (as <code>constants</code> method tells), but when you type <code>Digest::SHA1</code> it loads up <code>SHA1</code> class. How can I do the same for my programs?"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564601138, "post_id": 57297108, "comment_id": 101089354, "body": "Never mind, I have added added only <code>ruby</code> and <code>digest</code> in the tags. It automatically selects <code>hash</code> instead of <code>digest</code>..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564603014, "post_id": 57297108, "comment_id": 101090096, "body": "&quot;How can I do the same for my programs&#39; - one word, <code>const_missing</code>. This is how rails does it, for example."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564603516, "post_id": 57297108, "comment_id": 101090268, "body": "Actually I think loading classes like this might have to do with <code>Module#autoload</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564603735, "post_id": 57297108, "comment_id": 101090359, "body": "Ah yes, that one looks useful too."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564603773, "post_id": 57297108, "comment_id": 101090373, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/197303/discussion-between-s-goswami-and-sergio-tulentsev\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1564605764, "post_id": 57298454, "comment_id": 101091085, "body": "It was quite confusing to figure out what they were actually doing! Thanks for your answer!"}], "tags": [], "owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "is_accepted": false, "score": 2, "last_activity_date": 1564605230, "creation_date": 1564605230, "answer_id": 57298454, "question_id": 57297108, "link": "https://stackoverflow.com/questions/57297108/why-doesnt-the-digest-gem-show-all-the-class-as-constants/57298454#57298454", "title": "Why doesn&#39;t the Digest gem show all the class as constants?", "body": "<p>In the case of <code>Digest</code>, this behaviour is intentional. Depending on the hashing algorithm, different libraries are required. This is counterintuitive, but it's also expected behaviour as you can see here: <a href=\"https://github.com/ruby/ruby/blob/5ad2dfd8dce00f9fb4908adc786f12baaaf2b273/ext/digest/lib/digest.rb#L8-L25\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/master/ext/digest/lib/digest.rb#L8-L25</a>.</p>\n\n<p>To change that, Ruby Core would need according adoption.\nI hope you find this helpful.</p>\n"}, {"tags": [], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "is_accepted": true, "score": 0, "last_activity_date": 1565329636, "last_edit_date": 1565329636, "creation_date": 1565288396, "answer_id": 57418636, "question_id": 57297108, "link": "https://stackoverflow.com/questions/57297108/why-doesnt-the-digest-gem-show-all-the-class-as-constants/57418636#57418636", "title": "Why doesn&#39;t the Digest gem show all the class as constants?", "body": "<p>The magic is in the <code>const_missing</code> singleton method in the Digest module. @knugje has pointed out a very useful link in his answer which makes in clearer.</p>\n\n<p>ri documentation about <code>const_missing</code> says:</p>\n\n<blockquote>\n  <p>Invoked when a reference is made to an undefined constant in mod</p>\n</blockquote>\n\n<p>So here's the trick:</p>\n\n<pre><code>module X\n    def self.const_missing(name)\n        name\n    end\nend\n\np X.constants        # =&gt; []\np X::Y               # =&gt; :Y\np X.constants        # =&gt; []\n</code></pre>\n\n<p>So the code doesn't define the constant in the module. So we can use a fairly simple trick:</p>\n\n<pre><code>module X\n    define_singleton_method(:const_missing) { |n| const_set(n, n.id2name) }\nend\n\np X.constants      # =&gt; []\np X::Y             # =&gt; \"Y\"\np X::Z             # =&gt; \"Z\"\np X.constants      # =&gt; [:Y, :Z]\np X::Z             # \"Z\"\n</code></pre>\n\n<p>That's how <code>const_missing</code> is used here. But Instead of <code>const_set</code>, what digest does is loading up a file with the name and do some exception handling and checking if the constants exist on the file.</p>\n\n<p>Personally speaking, this may create confusion. For example, when you have no document to offline and online documents, you can't just simply run <code>Digest.constants</code> to list the available constants.</p>\n\n<p>As knugie pointed out, you can read about the <code>const_missing</code> implementation in the Digest module <a href=\"https://github.com/ruby/ruby/blob/5ad2dfd8dce00f9fb4908adc786f12baaaf2b273/ext/digest/lib/digest.rb#L8-L25\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57418636, "answer_count": 2, "score": 1, "last_activity_date": 1565329636, "creation_date": 1564598557, "last_edit_date": 1564601025, "question_id": 57297108, "link": "https://stackoverflow.com/questions/57297108/why-doesnt-the-digest-gem-show-all-the-class-as-constants", "title": "Why doesn&#39;t the Digest gem show all the class as constants?", "body": "<p>I am using the digest module for some task.</p>\n\n<p>As always, <a href=\"https://ruby-doc.org/stdlib-2.2.1/libdoc/digest/rdoc/Digest.html\" rel=\"nofollow noreferrer\">ruby-doc</a> has a very nice documentation.</p>\n\n<p>When I want to get the classes from a module or class:</p>\n\n<pre><code>module A\n    class B end\n    C = Class.new(B)\n    D ||= 1\nend\nA.const_set(:E, Math::E)\n\np A.constants                                                  # =&gt; [:B, :C, :D, :E]\np A.constants.select { |x| A.const_get(x).kind_of?(Class) }    # =&gt; [:B, :C]\n</code></pre>\n\n<p>But in Digest module, something ridiculous is happening:</p>\n\n<pre><code>require 'digest'      # =&gt; true\n\np Digest.constants    # =&gt; [:Class, :Base, :REQUIRE_MUTEX, :Instance]\np Digest::SHA1        # =&gt; Digest::SHA1\np Digest.constants    # =&gt; [:Class, :Base, :SHA1, :REQUIRE_MUTEX, :Instance]\np Digest::SHA2        # =&gt; Digest::SHA2\np Digest.constants    # =&gt; [:Class, :SHA2, :Base, :SHA1, :SHA256, :REQUIRE_MUTEX, :SHA512, :SHA384, :Instance]\n</code></pre>\n\n<p>As you can see the constant method doesn't return <code>SHA1</code> class (on line 2). Then when I write <code>Digest::SHA1</code> the program loads up the <code>SHA1</code> class. Then when you run call the <code>constants</code> method again, it returns the <code>SHA1</code> in the array.</p>\n\n<p>What's going on here? Is there a way not to load all the classes in my program the same way? Is this an efficient design?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1564598539, "post_id": 57296936, "comment_id": 101088262, "body": "This may help: <a href=\"https://stackoverflow.com/a/18576384/3784008\">stackoverflow.com/a/18576384/3784008</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": true, "score": 1, "last_activity_date": 1564601667, "creation_date": 1564601667, "answer_id": 57297777, "question_id": 57296936, "link": "https://stackoverflow.com/questions/57296936/access-params-inside-initialize-constructor-of-the-controller/57297777#57297777", "title": "access params inside initialize (constructor) of the controller", "body": "<p>You should use <code>before_action</code> without <code>initialize</code> to make it work:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MyController &lt; ApplicationController\n  before_action :my_initializer\n\n  def my_initializer \n    puts params.inspect\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2391, "user_id": 503510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c298307ae9b0824aa6c517fda9beacaa?s=128&d=identicon&r=PG&f=1", "display_name": "Tintin", "link": "https://stackoverflow.com/users/503510/tintin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57297777, "answer_count": 1, "score": 0, "last_activity_date": 1564601667, "creation_date": 1564597802, "last_edit_date": 1564598204, "question_id": 57296936, "link": "https://stackoverflow.com/questions/57296936/access-params-inside-initialize-constructor-of-the-controller", "title": "access params inside initialize (constructor) of the controller", "body": "<p>I have to change the value of keys inside params of a controller. I don't want to do it each method but do it at a constructor level. But when I access it inside initialize I get this error</p>\n\n<p>\"<em>NoMethodError (undefined method `parameters' for nil:NilClass):</em>\"</p>\n\n<pre><code> class MyController &lt; ApplicationController\n\n        def initialize\n          puts params.inspect #params is nil!\n        end\nend\n</code></pre>\n\n<p>I also tried to do that using before_action but the same error</p>\n\n<pre><code> class MyController &lt; ApplicationController\n      before_action :my_initializer\n        def initialize\n          puts params.inspect #params is nil!\n        end\n\n     def my_initializer \n       puts params.inspect #params is nil!\n     end\n  end\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "dropzone"], "owner": {"reputation": 11, "user_id": 11865228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf2376bfc5239edd98e1d782020af85?s=128&d=identicon&r=PG&f=1", "display_name": "dondaro610", "link": "https://stackoverflow.com/users/11865228/dondaro610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564593240, "creation_date": 1564593240, "question_id": 57295974, "link": "https://stackoverflow.com/questions/57295974/how-to-add-dropzone-to-exist-form-rails", "title": "How to add dropzone to exist form rails", "body": "<p>How i can easy add dropzone to my exist form and how to not skip verify auth token?\nMy old uploader images acted without accusations\nI try add column \"file\" to products base.\nI don't know how to add dropzone to my form without create new migration for only images.\nCan anyone help me?</p>\n\n<p>view:</p>\n\n<pre><code>    &lt;%= simple_form_for [:user, @product], html: {id: \"dropzone-form- \n    id\"} do |f| %&gt;\n    &lt;%= f.input :name, label: \"Nazwa\" %&gt;\n    &lt;%= f.input :description, label: \"Opis\" %&gt;\n    &lt;%= f.input :long_description, label: \"D\u0142ugi opis\" %&gt;\n    &lt;%= f.input :price, label: \"Cena\" %&gt;\n    &lt;%= f.association :category, label: \"Kategoria\" %&gt;\n    &lt;%= f.input :condition, label: \"Stan\", :collection =&gt; \n    [['Nowy','Nowy'],['U\u017cywany','U\u017cywany']] %&gt;\n\n    &lt;div id=\"files-field\"\n       class=\"dropzone\"\n       style=\"border: 2px dashed rgba(0, 0, 0, 0.3);\n              min-height: 100px !important;\"&gt;\n    &lt;div class=\"dz-message\"\n         style=\"margin: 20px\"&gt;\n      Drag your cats' pics here! Or\n      &lt;button&gt;\n        select files\n      &lt;/button&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;p&gt;\n    &lt;%= f.submit %&gt;\n    &lt;/p&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>upload-dropzone.js</p>\n\n<pre><code>// .js file\nDropzone.options.filesField = {\n  url: \"/user/products\",\n  addRemoveLinks: true,\n  autoProcessQueue: false,\n  uploadMultiple: true,\n  accept: function(file, done) {\n    $(\"div#files-field\").css({\"height\": \"auto\"});\n    done();\n  },\n  init: function() {\n    var myDropzone = this;\n\n    var form = document.getElementById('dropzone-form-id');\n    form.addEventListener('submit', function(event) {\n      // stop the form's submit event\n      if(myDropzone.getQueuedFiles().length &gt; 0){\n        event.preventDefault();\n        event.stopPropagation();\n        myDropzone.processQueue();\n      }\n    });\n\n    myDropzone.on(\"sendingmultiple\", function(file, xhr, formData) {\n      formData.append(\"name\", $('#product_name').val());\n      formData.append(\"description\", $('#product_description').val());\n      formData.append(\"long_description\", $('#product_long_description').val());\n      formData.append(\"price\", $('#product_price').val());\n      formData.append(\"category\", $('#product_category_id').val());\n      formData.append(\"condition\", $('#product_condition').val());\n    });\n  },\n  successmultiple: function(data,response) {\n    alert(response);\n  }\n};\n</code></pre>\n\n<p>products controller:</p>\n\n<pre><code>    skip_before_action :verify_authenticity_token\n\n    def create\n      @product = Product.new(product_params)\n      @product.user_id = current_user.id\n      if @product.save\n        redirect_to user_products_path, notice: \"Pomy\u015blnie dodano \n     produkt.\"\n      else\n        render action: :new\n       end\n    end\n\n    private\n\n    def product_params\n      params.require(:product).permit(\n        :name,\n        :category_id,\n        :description,\n        :long_description,\n        :price,\n        {photo: []},\n        :condition\n      )\n    end\n\nStarted POST \"/user/products\" for 127.0.0.1 at 2019-07-30 15:29:27 +0200\nProcessing by User::ProductsController#create as JSON\nParameters: {\"name\"=&gt;\"\", \"description\"=&gt;\"\", \"long_description\"=&gt;\"\", \"price\"=&gt;\"\", \"category\"=&gt;\"\", \n\"condition\"=&gt;\"\", \"file\"=&gt;{\"0\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00007fbe12aa45d8 @tempfile=# \n&lt;Tempfile:/tmp/RackMultipart20190730-32614-658ixz.png&gt;, @original_filename=\"Zrzut ekranu z 2019-03- \n05 11-37-48.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; \nname=\\\"file[0]\\\"; filename=\\\"Zrzut ekranu z 2019-03-05 11-37-48.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;}}\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? ORDER BY \"users\".\"id\" ASC \nLIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\n\u21b3 /home/dondaro/.rvm/gems/ruby-2.5.3/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98\nCompleted 400 Bad Request in 2ms (ActiveRecord: 0.2ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty: product):\n\napp/controllers/user/products_controller.rb:60:in `product_params'\napp/controllers/user/products_controller.rb:27:in `create'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "jekyll", "windows-subsystem-for-linux", "jekyll-theme"], "comments": [{"owner": {"reputation": 1135, "user_id": 464252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4781b0f9d60d927d5b477528a0d98976?s=128&d=identicon&r=PG&f=1", "display_name": "Kin", "link": "https://stackoverflow.com/users/464252/kin"}, "edited": false, "score": 0, "creation_date": 1564593310, "post_id": 57295909, "comment_id": 101086023, "body": "Maybe you need to install <code>bundler</code>?  One way to install is by running command <code>gem install bundler</code>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1564594370, "post_id": 57295909, "comment_id": 101086446, "body": "Can you try running <code>bundle exec jekyll serve --watch</code> instead?"}, {"owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "reply_to_user": {"reputation": 1135, "user_id": 464252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4781b0f9d60d927d5b477528a0d98976?s=128&d=identicon&r=PG&f=1", "display_name": "Kin", "link": "https://stackoverflow.com/users/464252/kin"}, "edited": false, "score": 0, "creation_date": 1564602713, "post_id": 57295909, "comment_id": 101089985, "body": "@Kin I ran <code>gem install bundler</code> as you suggested and received the following message: <code>Successfully installed bundler-2.0.2 Parsing documentation for bundler-2.0.2 Done installing documentation for bundler after 4 seconds 1 gem installed</code>, but I am still receiving the same errors."}, {"owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1564602866, "post_id": 57295909, "comment_id": 101090046, "body": "@JayDorsey Running the <code>bundle exec jekyll serve --watch</code> command returns the following error: <code>Traceback (most recent call last):         2: from &#47;usr&#47;local&#47;bin&#47;bundle:23:in `&lt;main&gt;&#39;         1: from &#47;usr&#47;lib&#47;ruby&#47;2.5.0&#47;rubygems.rb:308:in `activate_bin_path&#39; &#47;usr&#47;lib&#47;ruby&#47;2.5.0&#47;rubygems.rb:289:in `find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException)</code>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1564603054, "post_id": 57295909, "comment_id": 101090115, "body": "I want to say this was a known issue. There&#39;s 2 things I can think of: 1) run <code>gem update --system</code> 2) double check your bundler version with <code>bundle --version</code> and make sure it&#39;s 2.0.2; it might be defaulting to an older version. I think the system update would fix it though, if it&#39;s what I think it is"}, {"owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1564607275, "post_id": 57295909, "comment_id": 101091635, "body": "@JayDorsey I was able to confirm I am running bundler version 2.0.2. Running <code>gem update --system</code> almost fixed the issue, but I&#39;m encountering a new error. (I may have to split the error in several comments:) <code>Error: could not read file &#47;mnt&#47;c&#47;Users&#47;muyga&#47;Desktop&#47;mediumish-theme-jekyll&#47;vendor&#47;bun&zwnj;&#8203;dle&#47;gems&#47;jekyll-3.8.&zwnj;&#8203;5&#47;lib&#47;site_template&#47;&zwnj;&#8203;_posts&#47;0000-00-00-we&zwnj;&#8203;lcome-to-jekyll.mark&zwnj;&#8203;down.erb: Invalid date &#39;&lt;%= Time.now.strftime(&#39;%Y-%m-%d %H:%M:%S %z&#39;) %&gt;&#39;: Document &#39;vendor&#47;bundle&#47;gems&#47;jekyll-3.8.5&#47;lib&#47;site_template&#47;_posts&#47;00&zwnj;&#8203;00-00-00-welcome-to-&zwnj;&#8203;jekyll.markdown.erb&#39; does not have a valid date in </code>"}, {"owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1564607299, "post_id": 57295909, "comment_id": 101091646, "body": "@JayDorsey Error cont&#39;d: <code>the YAML front matter.              ERROR: YOUR SITE COULD NOT BE BUILT:                     ------------------------------------                     Invalid date &#39;&lt;%= Time.now.strftime(&#39;%Y-%m-%d %H:%M:%S %z&#39;) %&gt;&#39;: Document &#39;vendor&#47;bundle&#47;gems&#47;jekyll-3.8.5&#47;lib&#47;site_template&#47;_posts&#47;00&zwnj;&#8203;00-00-00-welcome-to-&zwnj;&#8203;jekyll.markdown.erb&#39; does not have a valid date in the YAML front matter.</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "is_accepted": false, "score": 1, "last_activity_date": 1564612420, "creation_date": 1564612420, "answer_id": 57299635, "question_id": 57295909, "link": "https://stackoverflow.com/questions/57295909/ruby-jekyll-requirement-errors-when-serving/57299635#57299635", "title": "Ruby/Jekyll requirement errors when serving", "body": "<p>I ran the <code>gem update --system</code> command and my Jekyll theme <em>almost</em> served locally.</p>\n\n<p>I received the following error:</p>\n\n<pre><code>Error: could not read file /mnt/c/Users/muyga/Desktop/mediumish-theme-jekyll/vendor/bundle/gems/jekyll-3.8.5/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb: Invalid date '&lt;%= Time.now.strftime('%Y-%m-%d %H:%M:%S %z') %&gt;': Document 'vendor/bundle/gems/jekyll-3.8.5/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb' does not have a valid date in the YAML front matter. ERROR: YOUR SITE COULD NOT BE BUILT: ------------------------------------ Invalid date '&lt;%= Time.now.strftime('%Y-%m-%d %H:%M:%S %z') %&gt;': Document 'vendor/bundle/gems/jekyll-3.8.5/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb' does not have a valid date in the YAML front matter.\n</code></pre>\n\n<p>In order to fix that error, I modified my <code>config.yml</code> file and added <code>vendor</code> to the <code>exclude:</code> category to exclude that folder within my theme folder.</p>\n\n<p>Now when I run <code>bundle exec jekyll serve --watch</code> the theme serves properly.</p>\n\n<p>Thanks to @JayDorsey and <a href=\"https://stackoverflow.com/questions/39915298/jekyll-error-site-could-not-be-built-wrong-date-format\">Jekyll: Error: Site could not be built, wrong date format\n</a> for the solutions!</p>\n"}], "owner": {"reputation": 51, "user_id": 3890022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbb32cd31c25db83eaf35857e4ef2210?s=128&d=identicon&r=PG", "display_name": "MuyGalan", "link": "https://stackoverflow.com/users/3890022/muygalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564612420, "creation_date": 1564592982, "question_id": 57295909, "link": "https://stackoverflow.com/questions/57295909/ruby-jekyll-requirement-errors-when-serving", "title": "Ruby/Jekyll requirement errors when serving", "body": "<p>I recently installed Windows Subsystem for Linux and I'm running the Ubuntu distro on my Windows 10 computer. I installed Python, pip, Ruby, and Jekyll and they are all confirmed to be installed properly when I run the --version flags.</p>\n\n<p>I am trying to run and modify a Jekyll theme called <a href=\"https://bootstrapstarter.com/bootstrap-templates/template-mediumish-bootstrap-jekyll/\" rel=\"nofollow noreferrer\">Mediumish</a> locally on my computer. When following the author's instructions (i.e. run <code>bundle</code> and run <code>jekyll serve --watch</code>), I encounter the following errors:</p>\n\n<pre><code>Traceback (most recent call last):\n        5: from /usr/local/bin/jekyll:23:in `&lt;main&gt;'\n        4: from /usr/local/bin/jekyll:23:in `load'\n        3: from /var/lib/gems/2.5.0/gems/jekyll-3.8.6/exe/jekyll:11:in `&lt;top (required)&gt;'\n        2: from /var/lib/gems/2.5.0/gems/jekyll-3.8.6/lib/jekyll/plugin_manager.rb:48:in `require_from_bundler'\n        1: from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n/usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require': cannot load such file -- bundler (LoadError)\n</code></pre>\n\n<p>I have tried submitting issues to the author's Github account, but it appears he has stopped replying (and maintaining) this theme for a few months. </p>\n\n<p>I found another Stackoverflow post titled <a href=\"https://stackoverflow.com/questions/23830263/ruby-jekyll-unknown-error-when-running-watch\">Ruby/Jekyll unknown error when running -watch</a> \u2014 which is very similar to what I'm experiencing. I have tried the recommended solutions from this post which are to run the <code>jekyll build --watch</code> and <code>jekyll serve --watch</code> commands, but the same errors occur. </p>\n\n<p>I was able to successfully run this theme a few months ago, but after reformatting my computer, reinstalling all my applications from scratch, and cloning a new copy of the theme from the author's website, I am unable to serve the website locally thus impeding me from viewing any modifications I make to the blog theme.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1564591826, "post_id": 57295571, "comment_id": 101085380, "body": "For this reason, I tend to prefer <code>each_with_object</code> with complex accumulators (hashes/arrays). Does the same thing and does not require to return new value of memo. :)"}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1564592103, "post_id": 57295571, "comment_id": 101085499, "body": "thanks - so total -&gt; b and is then accessible outside the block. So I know my example sucks - is there a killer use case for using <code>reduce</code>?  It seems like it gets mentioned as some supertool but I just don&#39;t really get it. I feel like most of the example are easily achieved with <code>each</code> or its variations.  I asked the question so certainly not asking you to justify it - more curious about what (if anything) I&#39;m missing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 2, "creation_date": 1564592704, "post_id": 57295571, "comment_id": 101085762, "body": "@timpone &quot;is there a killer use case for using reduce&quot; - &quot;reduce&quot; is also known as &quot;fold&quot; (in some other languages). So, if you want to collapse/compress a collection into a single value, that&#39;s where you don&#39;t use <code>each</code>, you use <code>reduce</code>."}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564593210, "post_id": 57295571, "comment_id": 101085976, "body": "@SergioTulentsev - thx, and looking at your other comment re <code>each_with_object</code>, it seems like reduce basically removes the need to have a tmp variable (or perhaps puts it inline). I just felt like I was missing some big concept but am not feeling that way anymore."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 2, "creation_date": 1564593890, "post_id": 57295571, "comment_id": 101086237, "body": "@timpone: The big thing about <code>inject</code> / <code>reduce</code> / <code>fold</code> / <i>catamorphisms</i> is that it is a <i>general method of iteration</i>. In other words: <i>everything</i> that can be done with a <code>for</code> loop can also be done with <code>reduce</code> <i>but without requiring side-effects</i>. A loop <i>does not work</i> without side-effects, whereas <code>reduce</code> <i>never</i> needs side-effects."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 1, "creation_date": 1564593917, "post_id": 57295571, "comment_id": 101086251, "body": "@timpone: <code>reduce</code> is about feeding the result of a calculation into itself. Given <code>f = -&gt;(m,i) { m+i }</code>, then <code>[1,2,3].reduce(0, &amp;f)</code> is <code>f[f[f[0,1],2],3]</code>. <code>reduce</code> isn&#39;t really about accumulation (IMO that&#39;s <code>each_with_object</code>&#39;s job), it is more about feedback and recursion."}], "tags": [], "owner": {"reputation": 17289, "user_id": 801544, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/70034fa76ec3ada7dc95ecb8dc01f74f?s=128&d=identicon&r=PG", "display_name": "Simone", "link": "https://stackoverflow.com/users/801544/simone"}, "is_accepted": true, "score": 0, "last_activity_date": 1564591592, "creation_date": 1564591592, "answer_id": 57295571, "question_id": 57295438, "link": "https://stackoverflow.com/questions/57295438/confused-about-using-reduce-and-what-its-actually-trying-to-do/57295571#57295571", "title": "Confused about using reduce and what it&#39;s actually trying to do", "body": "<p>The accumulation (in this case a string concatenation) doesn\u2019t happen automatically. You still need to return the new accumulator value (remember in Ruby the last statement is also implicitly the return value).</p>\n\n<p>This does what you\u2019d expect:</p>\n\n<pre><code>def say_joe(name)\n  puts \"within say_joe #{name}\"\n  \" joe #{name}\"\nend\n\na = %w(birds bees)\n\nstarting = \"some\"\n\nb = a.reduce(starting) do  |total, x|\n  puts x\n\n  total &lt;&lt; say_joe(x)\nend\n\nputs \"-----\"\n\nputs \"starting: #{starting}\"\nputs \"a: #{a}\"\nputs \"b: #{b}\u201d # some joe birds joe bees\n</code></pre>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57295571, "answer_count": 1, "score": 0, "last_activity_date": 1590782117, "creation_date": 1564591113, "last_edit_date": 1590782117, "question_id": 57295438, "link": "https://stackoverflow.com/questions/57295438/confused-about-using-reduce-and-what-its-actually-trying-to-do", "title": "Confused about using reduce and what it&#39;s actually trying to do", "body": "<p>I have done Rails development a bit but haven't for a while. </p>\n\n<p>I have never used reduce / inject other than to sum up values (which seems to be the main example I've seen online) but would like to understand better what it does (and to be honest, just its syntax). I have heard it referred to as the <code>functional</code> part of Ruby but based upon examples, not sure what that means.</p>\n\n<p>Looking at the example in the docs (the longest word example) <a href=\"https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce</a> seems to imply that it is useful for selecting a value out of a series at end but this doesn't seem very <code>functional</code>. </p>\n\n<p>My understanding is that it accumulates to the initial value passed into reduce. But in this code fragment, I'm not sure why it's not accumulating (I'm expecting \"some joe birds joe bees\" or some variation). </p>\n\n<pre><code># expect 'some joe birds joe bees'\n\ndef say_joe(name)\n  puts \"within say_joe #{name}\"\n  \" joe #{name}\"\nend\n\na = %w(birds bees)\n\nstarting = \"some\"\n\nb = a.reduce(starting) do  |total, x|\n  puts x\n  say_joe(x)\nend\n\nputs \"-----\"\n\nputs \"starting: #{starting}\"\nputs \"a: #{a}\"\nputs \"b: #{b}\"\n</code></pre>\n\n<p>with output:</p>\n\n<pre><code>birds\nwithin say_joe birds\nbees\nwithin say_joe bees\n-----\nstarting: some\na: [\"birds\", \"bees\"]\nb:  joe bees\n\n</code></pre>\n\n<p>What is the magic of reduce? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "nginx"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564597836, "post_id": 57295404, "comment_id": 101087956, "body": "You may want to consider using <a href=\"https://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow noreferrer\">ActiveJob</a> for this instead of arbitrary threads. Code like this could create thousands of untamed threads that could eventually crash your Ruby process if not the whole server."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1564597887, "post_id": 57296488, "comment_id": 101087975, "body": "Even better: <code>threads = [ params1, params2, ... ].map { |p| Thread.new { api_call(p) } }</code>"}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": true, "score": 2, "last_activity_date": 1564598417, "last_edit_date": 1564598417, "creation_date": 1564595766, "answer_id": 57296488, "question_id": 57295404, "link": "https://stackoverflow.com/questions/57295404/rails-and-threading/57296488#57296488", "title": "Rails and threading", "body": "<blockquote>\n  <p>Am I doing this right?</p>\n</blockquote>\n\n<p>There are no issues in your code but I don't think that using threads makes a lot of sense in your code example since you're executing requests one after another anyway.\nIf you want to make parallel requests then you should do it like this instead:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>threads = [params1, params2, ...].map { |p| Thread.new { api_call(p) } }\nvalues = threads.map(&amp;:value)\n</code></pre>\n\n<blockquote>\n  <p>Am I doing this right? Or am I instead supposed to call <code>join</code> on those threads somewhere?</p>\n</blockquote>\n\n<p>Both <code>join</code> and <code>value</code> calls will wait for a thread to finish but <code>value</code> is more convenient for you there if you want to retrieve a value returned from a thread. <code>value</code> is using <code>join</code> under the hood.</p>\n\n<blockquote>\n  <p>Is this safe for production or is there something I should be tweaking, maybe in the Nginx or passenger configs?</p>\n</blockquote>\n\n<p>You don't need to tweak anything to use threads and it is generally safe to use them in production (if you're using <a href=\"https://en.wikipedia.org/wiki/Ruby_MRI\" rel=\"nofollow noreferrer\">MRI</a> then <a href=\"https://en.wikipedia.org/wiki/Global_interpreter_lock\" rel=\"nofollow noreferrer\">GIL</a> prevents deadlocks). You just need to be aware that if you're using a lot of threads then you'll be using a lot of extra memory. And using threads don't always improve performance of a program. For example, due to GIL there is not much point in using threads for executing CPU-intensive code even on a multicore machine.</p>\n"}], "owner": {"reputation": 1603, "user_id": 565487, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vDTFH.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/565487/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57296488, "answer_count": 1, "score": 0, "last_activity_date": 1564598417, "creation_date": 1564590984, "question_id": 57295404, "link": "https://stackoverflow.com/questions/57295404/rails-and-threading", "title": "Rails and threading", "body": "<p>I'm trying to make a Rails 4 application that makes a lot of http requests to some API handle more traffic, originally the code in the controller looks like this:</p>\n\n<pre><code>def index\n  @var1 = api_call some_params1\n  @var2 = api_call some_params2\n  @var3 = api_call some_params3\n  @var4 = api_call some_params4\n  @var5 = api_call some_params5\nend\n</code></pre>\n\n<p>I did some googling around and ended up refactoring it as so:</p>\n\n<pre><code>def index\n  @var1 = Thread.new { api_call some_params1 }.value\n  @var2 = Thread.new { api_call some_params2 }.value\n  @var3 = Thread.new { api_call some_params3 }.value\n  @var4 = Thread.new { api_call some_params4 }.value\n  @var5 = Thread.new { api_call some_params5 }.value\nend\n</code></pre>\n\n<p>Am I doing this right? Or am I instead supposed to call <code>join</code> on those threads somewhere?</p>\n\n<p>Is this safe for production or is there something I should be tweaking, maybe in the Nginx or passenger configs?</p>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1564600299, "post_id": 57294653, "comment_id": 101088995, "body": "In CMD, running <code>ruby</code> searches the current directory (can be disabled) and <code>PATH</code> for &quot;ruby&quot; plus the <code>PATHEXT</code> extensions. It should find ruby.exe and execute the command via WINAPI <code>CreateProcessW</code>. Running <code>hello.rb</code> searches for &quot;hello.rb&quot; plus the <code>PATHEXT</code> extensions (e.g. &quot;hello.rb.EXE&quot;). If found, it tries to execute the command via <code>CreateProcessW</code>. This fails since &quot;hello.rb&quot; isn&#39;t a PE executable, so CMD tries WINAPI <code>ShellExecuteExW</code>, which searches many keys in the registry to find the user&#39;s preferred template command for &quot;.rb&quot; files, e.g. <code>&quot;C:\\Ruby22-x64\\bin\\ruby.exe&quot; &quot;%1&quot; %*</code>."}, {"owner": {"reputation": 3, "user_id": 2200608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfiL4.jpg?s=128&g=1", "display_name": "Jim P", "link": "https://stackoverflow.com/users/2200608/jim-p"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1564604401, "post_id": 57294653, "comment_id": 101090589, "body": "Thank you, eryksun.  I found the following in the registry: Application-&gt;ruby.exe-&gt;shell-&gt;open-&gt;cmd-&gt;Default.REG_SZ.&quot;C:\\&zwnj;&#8203;Ruby22-x64\\bin\\ruby.&zwnj;&#8203;exe&quot; &quot;%1&quot;.  That explains my mystery.  I have never made a change to the registry before, but changing that value of Ruby22 to a different version should be a safe change."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1564607231, "post_id": 57294653, "comment_id": 101091622, "body": "<code>Applications\\ruby.exe</code> (defined under &quot;Classes, i.e. &quot;[HKCU|HKLM]\\Software\\Classes&quot;) can be used as a ProgId for the user&#39;s &quot;.rb&quot; file association that&#39;s defined under &quot;HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Fil&zwnj;&#8203;eExts&quot;. Other associations may also be defined  by a &quot;.rb&quot; key under &quot;Classes&quot;, which can reference a single ProgId as a default value, or multiple in an &quot;OpenWithProgIds&quot; subkey. A ProgId may be defined under &quot;Classes&quot;, e.g. something like &quot;RubyFile&quot;, with a shell &quot;open&quot; command. Another location for default &quot;.rb&quot; associations is &quot;SystemFileAssociations&quot; in &quot;Classes&quot;."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1564607350, "post_id": 57294653, "comment_id": 101091664, "body": "There&#39;s even more registry spaghetti that can be involved with determining a file association. The Windows shell has accumulated a lot of cruft over the years."}], "owner": {"reputation": 3, "user_id": 2200608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfiL4.jpg?s=128&g=1", "display_name": "Jim P", "link": "https://stackoverflow.com/users/2200608/jim-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564588422, "creation_date": 1564588194, "last_edit_date": 1564588422, "question_id": 57294653, "link": "https://stackoverflow.com/questions/57294653/windows-7-difference-between-running-ruby-exe-vs-ruby", "title": "windows 7 difference between running ruby.exe vs ruby", "body": "<p>I have multiple versions of Ruby installed on my Windows 7 laptop.  I noticed that a different version of Ruby runs when I type <code>ruby hello.rb</code> vs <code>hello.rb</code>.  The first runs ruby 2.3, the second runs ruby 2.2.  I want to know why the two different ways of executing ruby runs two different versions.  I eventually want to delete ruby 2.2, but am concerned that running a ruby app without prefixing it with ruby will fail.</p>\n\n<p>See code output</p>\n\n<pre><code>#!/bin/ruby\nrequire 'tk';\n\nwhere = `where ruby`;   where = \"where ruby:\\n\" + where;\nver  = `ruby -v`;       ver  = ver[0..9];\npath = ENV['PATH'];     path = path[0..52];\n\nmsg = 'Hello from Ruby ' + RUBY_VERSION + ' -OR- ' + ver;\nprint(where + \"\\n\" + \"PATH \" + path + \"\\n\" + msg + \"\\n\");\n\nroot = TkRoot.new {title \"Hello, World!\"};\nTkLabel.new(root) do text msg; pack {padx 15; pady 15; side 'left'}; end\nTk.mainloop;\n</code></pre>\n\n<p>Running <code>ruby hello.rb</code> yields expected results:</p>\n\n<pre><code>where ruby:\nC:\\Ruby23-x64\\bin\\ruby.exe\nC:\\Ruby24-x64\\bin\\ruby.exe\n\nPATH C:\\Ruby23-x64\\bin;C:\\ActiveTcl\\bin;C:\\Ruby24-x64\\bin;\nHello from Ruby 2.3.3 -OR- ruby 2.3.3\n</code></pre>\n\n<p>Running <code>hello.rb</code> from prompt yields unexpected results. Note that <code>ruby2.2.6</code> is not even in <code>PATH</code>.</p>\n\n<pre><code>where ruby:\nC:\\Ruby23-x64\\bin\\ruby.exe\nC:\\Ruby24-x64\\bin\\ruby.exe\n\nPATH C:\\Ruby23-x64\\bin;C:\\ActiveTcl\\bin;C:\\Ruby24-x64\\bin;\nHello from Ruby 2.2.6 -OR- ruby 2.3.3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundle"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 1, "creation_date": 1564590571, "post_id": 57293245, "comment_id": 101084801, "body": "what bundler version do you have installed?"}, {"owner": {"reputation": 131, "user_id": 2030050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d4fe50ee804e73528328b4d1f48be7?s=128&d=identicon&r=PG", "display_name": "Neal Bozeman", "link": "https://stackoverflow.com/users/2030050/neal-bozeman"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1564686243, "post_id": 57293245, "comment_id": 101122846, "body": "version = 1.17.3"}], "answers": [{"tags": [], "owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "is_accepted": false, "score": 0, "last_activity_date": 1564745051, "creation_date": 1564745051, "answer_id": 57325538, "question_id": 57293245, "link": "https://stackoverflow.com/questions/57293245/bundler-could-not-find-compatible-versions-for-gem-even-though-versions-do-not/57325538#57325538", "title": "&quot;Bundler could not find compatible versions for gem&quot; even though versions do not conflict", "body": "<p>Did you install more recent Rails in this directory before? In this case bundler remembers its dependent <code>actionmailer</code> version and now this more recent <code>actionmailer</code> prevents installing the older one. Because <code>install</code> action in fact does <a href=\"https://bundler.io/v1.17/man/bundle-install.1.html#CONSERVATIVE-UPDATING\" rel=\"nofollow noreferrer\">conservative updating</a>, analyzing only changes between last <code>Gemfile.lock</code> and current <code>Gemfile</code>.</p>\n\n<p>Anyway, remove <code>Gemfile.lock</code> and run <code>bundle install</code> again.  </p>\n"}], "owner": {"reputation": 131, "user_id": 2030050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d4fe50ee804e73528328b4d1f48be7?s=128&d=identicon&r=PG", "display_name": "Neal Bozeman", "link": "https://stackoverflow.com/users/2030050/neal-bozeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564745051, "creation_date": 1564583642, "question_id": 57293245, "link": "https://stackoverflow.com/questions/57293245/bundler-could-not-find-compatible-versions-for-gem-even-though-versions-do-not", "title": "&quot;Bundler could not find compatible versions for gem&quot; even though versions do not conflict", "body": "<p><code>Bundle install</code> complains that it can't find compatible versions for gem \"actionmailer,\" even though the dependency constraints it shows in the error do not conflict.</p>\n\n<p>It gives me this output running <code>bundle install</code> which I'm so stumped by </p>\n\n<pre><code>  In Gemfile:\n    premailer-rails was resolved to 1.10.3, which depends on\n      actionmailer (&gt;= 3)\n\n    rails (&gt; 3.0, &lt; 3.2.22.1) was resolved to 3.2.22, which depends on\n      actionmailer (= 3.2.22)\n</code></pre>\n\n<p>The dependencies appear to not conflict at all.</p>\n\n<p>I have tried explicitly setting rails to '3', instead of 3.2.22.1, which seems to remove the error. But isn't 3.x.x.x equal to >3 ?</p>\n\n<p>In my Gemfile:</p>\n\n<pre><code>gem 'rails', '&lt;3.2.22.1', '&gt;3.0'\ngem 'premailer-rails'\n... #other gems\n</code></pre>\n\n<p>The output shows it resolves rails to 3.2.22, and that actionmailer >=3 is a dependency for premailer-rails, and actionmailer = 3.2.22 is a dependency for rails. </p>\n\n<p>All constraints are met. 3.2.22 is >=3, and the dependency should resolve. What am I missing?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564579804, "post_id": 57291869, "comment_id": 101078198, "body": "Looks pretty straightforward. Descend into hashes recursively, taking note of keys you visited in this branch. When you see an array, no need to recurse further. Append it to the list of keys and return."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564579932, "post_id": 57291869, "comment_id": 101078277, "body": "&quot;So kind of like traversing up through the &#39;tree&#39;&quot; - yes. I&#39;d say, this is <i>exactly</i> like traversing a tree. Only not sure why you see this as &quot;starting from the bottom&quot;."}, {"owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564580201, "post_id": 57291869, "comment_id": 101078450, "body": "@SergioTulentsev That was just to make it more &quot;clear&quot; what the output was representing, there are 5 &quot;final&quot; values which will eventually give 5 branches. It&#39;s good advice you give, however I still struggle to figure the code on how to keep track of which &quot;branch&quot; to add what values to while traversing recursively..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564580343, "post_id": 57291869, "comment_id": 101078534, "body": "Tracking is easy, just pass the temp state down to recursive calls in arguments."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1564584414, "post_id": 57291869, "comment_id": 101081319, "body": "<a href=\"https://stackoverflow.com/a/23861946/10522579\">this</a> can be best solution provided by @CarySwoveland"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564582604, "post_id": 57292875, "comment_id": 101080106, "body": "Good start, but don&#39;t roundtrip via a string. Real data won&#39;t have single-letter keys/values."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564582727, "post_id": 57292875, "comment_id": 101080188, "body": "@SergioTulentsev I agree, I just did above as per user case. I added why I round-trip via string instead of array. This satisfy user scenario but better approach is needed for sure."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564583305, "post_id": 57292875, "comment_id": 101080567, "body": "Your comment about references does not really make sense, I&#39;m afraid. If you want to create a new array, you can. If you want to pass a string by reference, you can too, just as easily."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564583561, "post_id": 57292875, "comment_id": 101080743, "body": "@SergioTulentsev Yes, got it, I updated answer, but I liked your answer :)"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1564583525, "last_edit_date": 1564583525, "creation_date": 1564582483, "answer_id": 57292875, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57292875#57292875", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>See following which will keep calling recursively till it reaches to array values.</p>\n\n<p>This recursion call will go with multiple branches and <code>op</code> should be individual copy for each branch so I used string which is always created as a new object here otherwise array will be like going with <strong>call by reference</strong>  </p>\n\n<pre><code>hash = {\"a\"=&gt;{\"b\"=&gt;[\"c\"], \"d\"=&gt;{\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]}, \"l\"=&gt;[\"m\", \"n\", \"o\", \"p\"]}, \"q\"=&gt;{\"r\"=&gt;[\"s\"]}}\n\n@output = []\n\ndef nested_array(h, op='')\n  h.map do |k,v|\n    if Hash === v\n      nested_array(v, op+k)\n    else\n      @output &lt;&lt; (op+k+v.join).chars\n    end\n  end\nend\n\nnested_array(hash)\n</code></pre>\n\n<p><code>@output</code> will be your desired array.</p>\n\n<pre><code>[\n  [\"a\", \"b\", \"c\"],\n  [\"a\", \"d\", \"e\", \"f\"],\n  [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"], \n  [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], \n  [\"q\", \"r\", \"s\"]\n]\n</code></pre>\n\n<p><strong>update:</strong> key values pair can be more than single character so following approach for <code>nested_array</code> may work better.</p>\n\n<pre><code>def nested_array(h, op=[])\n  h.map do |k,v|\n    if Hash === v\n      nested_array(v, Array.new(op) &lt;&lt; k)\n    else\n      @output &lt;&lt; ((Array.new(op) &lt;&lt; k) + v)\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "edited": false, "score": 0, "creation_date": 1564583488, "post_id": 57293086, "comment_id": 101080692, "body": "Great answer, I see!"}, {"owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "edited": false, "score": 2, "creation_date": 1564584140, "post_id": 57293086, "comment_id": 101081124, "body": "If the OP is happy with this then great, but <code>tree_flatten</code> does not return desired data structure (array)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "edited": false, "score": 0, "creation_date": 1564591451, "post_id": 57293086, "comment_id": 101085208, "body": "@ArtuX Yes, this is explicitly mentioned. Plus, it&#39;d be a good exercise."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1564583680, "last_edit_date": 1592644375, "creation_date": 1564583090, "answer_id": 57293086, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57293086#57293086", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>As hinted at in the comments:</p>\n<blockquote>\n<p>Looks pretty straightforward. Descend into hashes recursively, taking note of keys you visited in this branch. When you see an array, no need to recurse further. Append it to the list of keys and return</p>\n<p>Tracking is easy, just pass the temp state down to recursive calls in arguments.</p>\n</blockquote>\n<p>I meant something like this:</p>\n<pre><code>def tree_flatten(tree, path = [], &amp;block)\n  case tree\n  when Array\n    block.call(path + tree)\n  else\n    tree.each do |key, sub_tree|\n      tree_flatten(sub_tree, path + [key], &amp;block)\n    end\n  end\nend\n\ntree_flatten(tree_def) do |path|\n  p path\nend\n</code></pre>\n<p>This code simply prints each flattened path as it gets one, but you can store it in an array too. Or even modify <code>tree_flatten</code> to return you a ready array, instead of yielding elements one by one.</p>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "is_accepted": false, "score": 3, "last_activity_date": 1564583198, "creation_date": 1564583198, "answer_id": 57293109, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57293109#57293109", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>You can do it like that:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def flat_hash(h)\n  return [h] unless h.kind_of?(Hash)\n  h.map{|k,v| flat_hash(v).map{|e| e.unshift(k)} }.flatten(1)\nend\n\ninput = {\n  'a' =&gt; {\n    'b' =&gt; ['c'],\n    'd' =&gt; {\n      'e' =&gt; ['f'],\n      'g' =&gt; ['h', 'i', 'j', 'k']\n    },\n    'l' =&gt; ['m', 'n', 'o', 'p']\n  },\n  'q' =&gt; {\n    'r' =&gt; ['s']\n  }\n}\n\np flat_hash(input)\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>[\n  [\"a\", \"b\", \"c\"], \n  [\"a\", \"d\", \"e\", \"f\"], \n  [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"], \n  [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], \n  [\"q\", \"r\", \"s\"]\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1564583237, "creation_date": 1564583237, "answer_id": 57293120, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57293120#57293120", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>This will return an Array with all the paths.</p>\n\n<pre><code>def paths(element, path = [], accu = [])\n  case element\n  when Hash\n    element.each do |key, value|\n      paths(value, path + [key], accu)\n    end\n  when Array\n    accu &lt;&lt; (path + element)\n  end\n  accu\nend\n</code></pre>\n\n<p>For nicer printing you can do </p>\n\n<pre><code>paths(tree_def).map { |path| path.join(\".\") }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1564596918, "creation_date": 1564596918, "answer_id": 57296746, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57296746#57296746", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<blockquote>\n  <p>All the solutions here are recursive, below is a non-recursive\n  solution.</p>\n</blockquote>\n\n<pre><code>def flatten(input)\n  sol = []\n  while(input.length &gt; 0)\n    unprocessed_input = []\n    input.each do |l, r|\n      if r.is_a?(Array)\n        sol &lt;&lt; l + r\n      else\n        r.each { |k, v| unprocessed_input &lt;&lt; [l + [k], v] }\n      end\n    end\n    input = unprocessed_input\n  end\n  return sol\nend\nflatten([[[], h]])\n</code></pre>\n\n<p>Code Explanation: </p>\n\n<ul>\n<li>Hash in array form is [[k1, v1], [k2, v2]].</li>\n<li>When input_hash is presented in the above form, [[], { a: {..} }], partial_solutions of this form, [ [a], {..} ], can be generated. Index '0' holds the partial solution and Index '1' holds the yet to be processed input. </li>\n<li>As this format is easy to map partial_solution with unprocessed input and accumulate unprocessed input, converting input_hash to this format result in, [[[], input_hash]]</li>\n</ul>\n\n<p>Solution:</p>\n\n<pre><code>[[\"a\", \"b\", \"c\"], [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], [\"q\", \"r\", \"s\"], [\"a\", \"d\", \"e\", \"f\"], [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1564616766, "creation_date": 1564616766, "answer_id": 57300155, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec/57300155#57300155", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>This of course calls for a recursive solution. The following method does not mutate the original hash.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def recurse(h)\n  h.each_with_object([]) do |(k,v),arr|\n    v.is_a?(Hash) ? recurse(v).each { |a| arr &lt;&lt; [k,*a] } : arr &lt;&lt; [k,*v]\n  end \nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>h = { 'a'=&gt;{ 'b'=&gt;['c'],\n             'd'=&gt;{ 'e'=&gt;['f'], 'g' =&gt; ['h', 'i', 'j', 'k'] },\n             'l' =&gt; ['m', 'n', 'o', 'p'] },\n      'q'=&gt;{ 'r'=&gt;['s'] } }\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>recurse h\n  #=&gt; [[\"a\", \"b\", \"c\"],\n  #    [\"a\", \"d\", \"e\", \"f\"],\n  #    [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n  #    [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"],\n  #    [\"q\", \"r\", \"s\"]]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The operations performed by recursive methods are always difficult to explain. In my experience the best way is to salt the code with puts statements. However, that in itself is not enough because when viewing output it is difficult to keep track of the level of recursion at which particular results are obtained and either passed to itself or returned to a version of itself. The solution to that is to indent and un-indent results, which is what I've done below. Note the way I've structured the code and the few helper methods I use are fairly general-purpose, so this approach can be adapted to examine the operations performed by other recursive methods.</p>\n\n<pre><code>INDENT = 8\ndef indent; @col += INDENT; end\ndef undent; @col -= INDENT; end\ndef pu(s); print \" \"*@col; puts s; end\ndef puhline; pu('-'*(70-@col)); end \n@col = -INDENT\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def recurse(h)\n  begin\n    indent\n    puhline\n    pu \"passed h = #{h}\"\n    h.each_with_object([]) do |(k,v),arr|\n      pu \"  k = #{k}, v=#{v}, arr=#{arr}\"\n      if v.is_a?(Hash)\n        pu \"  calling recurse(#{v})\"\n        ar = recurse(v)\n        pu \"  return value=#{ar}\"\n        pu \"  calculating recurse(v).each { |a| arr &lt;&lt; [k,*a] }\"\n        ar.each do |a|\n          pu \"    a=#{a}\"\n          pu \"    [k, *a] = #{[k,*a]}\"\n          arr &lt;&lt; [k,*a]\n        end\n      else\n        pu \"  arr &lt;&lt; #{[k,*v]}\"\n        arr &lt;&lt; [k,*v]\n      end\n      pu \"arr = #{arr}\"\n    end.tap { |a| pu \"returning=#{a}\" }\n  ensure\n    puhline\n    undent\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>recurse h\n----------------------------------------------------------------------\npassed h = {\"a\"=&gt;{\"b\"=&gt;[\"c\"], \"d\"=&gt;{\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]},\n            \"l\"=&gt;[\"m\", \"n\", \"o\", \"p\"]}, \"q\"=&gt;{\"r\"=&gt;[\"s\"]}}\n  k = a, v={\"b\"=&gt;[\"c\"], \"d\"=&gt;{\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]},\n            \"l\"=&gt;[\"m\", \"n\", \"o\", \"p\"]}, arr=[]\n  calling recurse({\"b\"=&gt;[\"c\"], \"d\"=&gt;{\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]},\n                   \"l\"=&gt;[\"m\", \"n\", \"o\", \"p\"]})\n        --------------------------------------------------------------\n        passed h = {\"b\"=&gt;[\"c\"], \"d\"=&gt;{\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]},\n                    \"l\"=&gt;[\"m\", \"n\", \"o\", \"p\"]}\n          k = b, v=[\"c\"], arr=[]\n          arr &lt;&lt; [\"b\", \"c\"]\n        arr = [[\"b\", \"c\"]]\n          k = d, v={\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]}, arr=[[\"b\", \"c\"]]\n          calling recurse({\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]})\n                ------------------------------------------------------\n                passed h = {\"e\"=&gt;[\"f\"], \"g\"=&gt;[\"h\", \"i\", \"j\", \"k\"]}\n                  k = e, v=[\"f\"], arr=[]\n                  arr &lt;&lt; [\"e\", \"f\"]\n                arr = [[\"e\", \"f\"]]\n                  k = g, v=[\"h\", \"i\", \"j\", \"k\"], arr=[[\"e\", \"f\"]]\n                  arr &lt;&lt; [\"g\", \"h\", \"i\", \"j\", \"k\"]\n                arr = [[\"e\", \"f\"], [\"g\", \"h\", \"i\", \"j\", \"k\"]]\n                returning=[[\"e\", \"f\"], [\"g\", \"h\", \"i\", \"j\", \"k\"]]\n                ------------------------------------------------------\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>          return value=[[\"e\", \"f\"], [\"g\", \"h\", \"i\", \"j\", \"k\"]]\n          calculating recurse(v).each { |a| arr &lt;&lt; [k,*a] }\n            a=[\"e\", \"f\"]\n            [k, *a] = [\"d\", \"e\", \"f\"]\n            a=[\"g\", \"h\", \"i\", \"j\", \"k\"]\n            [k, *a] = [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]\n        arr = [[\"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]]\n          k = l, v=[\"m\", \"n\", \"o\", \"p\"],\n            arr=[[\"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]]\n          arr &lt;&lt; [\"l\", \"m\", \"n\", \"o\", \"p\"]\n        arr = [[\"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n               [\"l\", \"m\", \"n\", \"o\", \"p\"]]\n        returning=[[\"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n                   [\"l\", \"m\", \"n\", \"o\", \"p\"]]\n        --------------------------------------------------------------\n  return value=[[\"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n                [\"l\", \"m\", \"n\", \"o\", \"p\"]]\n  calculating recurse(v).each { |a| arr &lt;&lt; [k,*a] }\n    a=[\"b\", \"c\"]\n    [k, *a] = [\"a\", \"b\", \"c\"]\n    a=[\"d\", \"e\", \"f\"]\n    [k, *a] = [\"a\", \"d\", \"e\", \"f\"]\n    a=[\"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]\n    [k, *a] = [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"]\n    a=[\"l\", \"m\", \"n\", \"o\", \"p\"]\n    [k, *a] = [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"]\narr = [[\"a\", \"b\", \"c\"], [\"a\", \"d\", \"e\", \"f\"], [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n       [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"]]\n  k = q, v={\"r\"=&gt;[\"s\"]}, arr=[[\"a\", \"b\", \"c\"], [\"a\", \"d\", \"e\", \"f\"],\n    [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"], [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"]]\n  calling recurse({\"r\"=&gt;[\"s\"]})\n        --------------------------------------------------------------\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>        passed h = {\"r\"=&gt;[\"s\"]}\n          k = r, v=[\"s\"], arr=[]\n          arr &lt;&lt; [\"r\", \"s\"]\n        arr = [[\"r\", \"s\"]]\n        returning=[[\"r\", \"s\"]]\n        --------------------------------------------------------------\n  return value=[[\"r\", \"s\"]]\n----------------------------------------------------------------------\n  calculating recurse(v).each { |a| arr &lt;&lt; [k,*a] }\n    a=[\"r\", \"s\"]\n    [k, *a] = [\"q\", \"r\", \"s\"]\narr = [[\"a\", \"b\", \"c\"], [\"a\", \"d\", \"e\", \"f\"], [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n       [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], [\"q\", \"r\", \"s\"]]\nreturning=[[\"a\", \"b\", \"c\"], [\"a\", \"d\", \"e\", \"f\"], [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n           [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], [\"q\", \"r\", \"s\"]]\n----------------------------------------------------------------------\n  #=&gt; [[\"a\", \"b\", \"c\"], [\"a\", \"d\", \"e\", \"f\"], [\"a\", \"d\", \"g\", \"h\", \"i\", \"j\", \"k\"],\n  #    [\"a\", \"l\", \"m\", \"n\", \"o\", \"p\"], [\"q\", \"r\", \"s\"]] \n</code></pre>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 57293086, "answer_count": 6, "score": 1, "last_activity_date": 1564616766, "creation_date": 1564579456, "last_edit_date": 1564582274, "question_id": 57291869, "link": "https://stackoverflow.com/questions/57291869/how-do-i-flatten-a-nested-hash-recursively-into-an-array-of-arrays-with-a-spec", "title": "How do I flatten a nested hash, recursively, into an array of arrays with a specific format?", "body": "<p>I have a nested hash that looks something like this:</p>\n\n<pre><code>{\n  'a' =&gt; {\n    'b' =&gt; ['c'],\n    'd' =&gt; {\n      'e' =&gt; ['f'],\n      'g' =&gt; ['h', 'i', 'j', 'k']\n    },\n    'l' =&gt; ['m', 'n', 'o', 'p']\n  },\n  'q' =&gt; {\n    'r' =&gt; ['s']\n  }\n}\n</code></pre>\n\n<p>The hash can have even more nesting, but the values of the last level are always arrays.</p>\n\n<p>I would like to \"flatten\" the hash into a format where I get a an array of arrays representing all keys and values that makes up an entire \"path/branch\" of the nested hash all they way from lowest level value to the top of the hash. So kind of like traversing up through the \"tree\" starting from the bottom while collecting keys and values on the way.</p>\n\n<p>The output of that for the particular hash should be:  </p>\n\n<pre><code>[\n  ['a', 'b', 'c'],\n  ['a', 'd', 'e', 'f'],\n  ['a', 'd', 'g', 'h', 'i', 'j', 'k'],\n  ['a', 'l', 'm', 'n', 'o', 'p'],\n  ['q', 'r', 's']\n]\n</code></pre>\n\n<p>I tried many different things, but nothing worked so far. Again keep in mind that more levels than these might occur, so the solution has to be generic.</p>\n\n<p><strong>Note:</strong> the order of the arrays and the order of the elements in them is not important.</p>\n\n<p>I did the following, but it's not really working:</p>\n\n<pre><code>tree_def = {\n  'a' =&gt; {\n    'b' =&gt; ['c'],\n    'd' =&gt; {\n      'e' =&gt; ['f'],\n      'g' =&gt; ['h', 'i', 'j', 'k']\n    },\n    'l' =&gt; ['m', 'n', 'o', 'p']\n  },\n  'q' =&gt; {\n    'r' =&gt; ['s']\n  }\n}\nbranches = [[]]\n\ncollect_branches = lambda do |tree, current_branch|\n  tree.each do |key, hash_or_values|\n    current_branch.push(key)\n    if hash_or_values.kind_of?(Hash)\n      collect_branches.call(hash_or_values, branches.last)\n    else # Reached lowest level in dependency tree (which is always an array)\n      # Add a new branch\n      branches.push(current_branch.clone)\n      current_branch.push(*hash_or_values)\n      current_branch = branches.last\n    end\n  end\nend\n\ncollect_branches.call(tree_def, branches[0])\n\nbranches #=&gt; wrong result\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "webhooks"], "comments": [{"owner": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1564586792, "post_id": 57291840, "comment_id": 101082748, "body": "I find your question a bit unclear, but I assume you have payment intents/charges for entities you call <code>resources</code> and <code>courses</code>? And you would like to receive events to 2 different webhooks endpoint depending if for example a charge was done for a <code>course</code> or <code>resource</code>? If that is the case, that is not how it should work and I can explain further."}, {"owner": {"reputation": 11, "user_id": 10949763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2eLkJh1fYA/AAAAAAAAAAI/AAAAAAAAAys/bqC_Q-_Kfqw/photo.jpg?sz=128", "display_name": "Tidjani Happy", "link": "https://stackoverflow.com/users/10949763/tidjani-happy"}, "reply_to_user": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1564587943, "post_id": 57291840, "comment_id": 101083412, "body": "Sorry if it&#39;s not clear enough. but your understanding is good. I have two entities races and resources for which I receive payments and I want to receive the events for each entity in two different webhook endpoint I went through the documentation of stripe and especially the chapter &quot;Support for multiple signing secrets&quot; available on this link: <a href=\"https://github.com/integrallis/stripe_event\" rel=\"nofollow noreferrer\">link</a> and that&#39;s from what I put up the code snippets present above"}, {"owner": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1564590732, "post_id": 57291840, "comment_id": 101084875, "body": "TIL! I checked the gem quickly and I think all it does is allowing you to have multiple webhooks with multiple secrets (by default it is one only) and it eases processing of events by allowing you to process them with different classes easily configurable with <code>StripeEvent.configure do |events| ...</code>"}, {"owner": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1564590743, "post_id": 57291840, "comment_id": 101084882, "body": "Still, events you will receive from stripe will be the same <code>charge.captured</code> no matter if you have the charge captured for a race or resource. The way you can distinguish the two are via the event metadata, you can retrieve the charge by id from the event and it will have the metadata as described here: <a href=\"https://stripe.com/docs/api/charges/object\" rel=\"nofollow noreferrer\">stripe.com/docs/api/charges/object</a>"}, {"owner": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1564590749, "post_id": 57291840, "comment_id": 101084884, "body": "Then you configure different webhooks to process different data as described here: <a href=\"https://stripe.com/docs/api/webhook_endpoints/object\" rel=\"nofollow noreferrer\">stripe.com/docs/api/webhook_endpoints/object</a> (see enabled_events). And then Stripe sends you events you defined on the webhook URI you defined.  I really hope this helps a bit. Also, if you have Stripe engineers available to help you - use them - documentation is extensive but still some things can be confusing."}, {"owner": {"reputation": 11, "user_id": 10949763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2eLkJh1fYA/AAAAAAAAAAI/AAAAAAAAAys/bqC_Q-_Kfqw/photo.jpg?sz=128", "display_name": "Tidjani Happy", "link": "https://stackoverflow.com/users/10949763/tidjani-happy"}, "reply_to_user": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1565006015, "post_id": 57291840, "comment_id": 101202884, "body": "Ok thank you very much for the explanations, I think that&#39;s what I missed. So effectively thanks to that I could understand the system and put everything in place and currently all walks as I want it thank you."}, {"owner": {"reputation": 305, "user_id": 2153029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9169872ef5ba573ec283f0e634d225?s=128&d=identicon&r=PG", "display_name": "pazinjanka", "link": "https://stackoverflow.com/users/2153029/pazinjanka"}, "edited": false, "score": 0, "creation_date": 1565006098, "post_id": 57291840, "comment_id": 101202930, "body": "happy to help! good luck further"}], "owner": {"reputation": 11, "user_id": 10949763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2eLkJh1fYA/AAAAAAAAAAI/AAAAAAAAAys/bqC_Q-_Kfqw/photo.jpg?sz=128", "display_name": "Tidjani Happy", "link": "https://stackoverflow.com/users/10949763/tidjani-happy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564580065, "creation_date": 1564579380, "last_edit_date": 1564580065, "question_id": 57291840, "link": "https://stackoverflow.com/questions/57291840/how-to-configure-project-to-use-multiple-stripe-webhooks", "title": "How to configure project to use multiple stripe webhooks", "body": "<p>Hello I recently install the payment system stripe in my project ruby \u200b\u200bon rails and after installation configuration and test I decided to set up the return webhook that I also perform successfully. But after a few updates in the projects I realized that I finally needed two webhook endpoints instead of just one as I had before. The first had to be used to retrieve the event when a resource is purchased and the other when a course is purchased. So I created in the stripe dashboad a new endpoint that has its own signing_key. So my problem is how to cofigure my project to use both endpoints and how to specify which endpoints to go to when the specified action occurs.</p>\n\n<p><strong>config/secret.yml</strong></p>\n\n<pre><code>yml\ndevelopment:\nstripe_ressource_payement_signing_secret : 'whsec_.....'\nstripe_course_payement_signing_secret : 'whsec_.......'\n</code></pre>\n\n<p><strong>config/initializers/stripe.rb</strong></p>\n\n<pre><code>StripeEvent.signing_secrets = [\n    Rails.application.secrets.stripe_ressource_payement_signing_secret,\n    Rails.application.secrets.stripe_course_payement_signing_secret,\n]\n</code></pre>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 1, "user_id": 10812822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5TVfGNCpCsY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVMQTjGAlvLQSf5AB9LfWEPhmOiA/mo/photo.jpg?sz=128", "display_name": "philip cripps", "link": "https://stackoverflow.com/users/10812822/philip-cripps"}, "edited": false, "score": 0, "creation_date": 1564579423, "post_id": 57291786, "comment_id": 101077946, "body": "I need the node statement to execute both windows class &amp; atom class without atom complaining about the choco provider not being there, the atom class uses chocolatey to install"}], "answers": [{"tags": [], "owner": {"reputation": 3268, "user_id": 9563318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MnYi1.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9563318/jon"}, "is_accepted": false, "score": 0, "last_activity_date": 1564587046, "creation_date": 1564587046, "answer_id": 57294317, "question_id": 57291786, "link": "https://stackoverflow.com/questions/57291786/only-run-another-pp-file-after-one-has-completed/57294317#57294317", "title": "Only run another PP file after one has completed", "body": "<p>Try adding a <code>require</code> dependency, so the <code>atom</code> class is declared after the <code>windows</code> class:</p>\n\n<pre><code>class { 'windows': }\nclass { 'atom':\n  require =&gt; Class['windows'],\n}\n</code></pre>\n\n<p>or quick and dirty:</p>\n\n<pre><code>class { 'windows': }\n-&gt; class { 'atom': }\n</code></pre>\n\n<p>You'll need to remove that <code>tagged</code> condition as it isn't needed.</p>\n\n<p>I can't quite tell from your question which classes depend on which, but I'm pretty sure it is <code>require</code> you need. You may need to add a <code>require</code> for the <code>chocolatey</code> class:</p>\n\n<pre><code>class { 'atom':\n  require =&gt; Class['windows', 'chocolatey'],\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10812822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5TVfGNCpCsY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVMQTjGAlvLQSf5AB9LfWEPhmOiA/mo/photo.jpg?sz=128", "display_name": "philip cripps", "link": "https://stackoverflow.com/users/10812822/philip-cripps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564684896, "creation_date": 1564579217, "last_edit_date": 1564588447, "question_id": 57291786, "link": "https://stackoverflow.com/questions/57291786/only-run-another-pp-file-after-one-has-completed", "title": "Only run another PP file after one has completed", "body": "<p>A chocolatey provider is required, to install packages this will work but only works once another pp file finishes executing.</p>\n\n<p>The problem is that puppet evaluates both files under the node statement and errors on invalid provider; the problem is I run the first pp file by commenting the other out , then let it run &amp; uncomment it then rerun with puppet agent --test it all works. </p>\n\n<p>I have tried tags and used an if statement with the tag , but this doesn't seem to work either.</p>\n\n<pre><code>class windows::chocolatey {\n  exec { 'set_executionpolicy':\n    command  =&gt; \"set-executionpolicy unrestricted -force -scope process;\n(iex((new-object\nnet.webclient).DownloadString('https://chocolatey.org/install.ps1')))&gt;\\$null\n2&gt;&amp;1\",\n    provider =&gt; 'powershell',\n    creates  =&gt; 'C:/ProgramData/chocolatey',\n  }\n\nnode \"web-iis-02\" {\n  class { 'windows':} #chocolatey installing to allow atom.pp to work\n  class { 'atom': } # init.pp below install using chocolatey\n\n#installs package\nclass atom {\n  if tagged(windows) {\n    include atom::pakages\n    notify { \"Calling Pakagepp script\": }\n  }\n}\n\n#if tagged init.pp above calls this:\nclass atom::pakages {\n  include chocolatey\n  package { 'Atom':\n    ensure =&gt; 'latest',\n    provider =&gt; 'chocolatey',\n  }\n</code></pre>\n\n<p>I get this from pakages.pp:</p>\n\n<blockquote>\n  <p>Error: Failed to apply catalog: Parameter provider failed on\n  Package[Atom]: Invalid package provider 'chocolatey' (file:\n  /etc/puppetlabs/code/environments/production/modules/atom/manifests/pakages.pp, line: 3)</p>\n</blockquote>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564578969, "post_id": 57291492, "comment_id": 101077662, "body": "What are going to do with this array after? Maybe there&#39;s an easier way to do <i>that</i> than going through a temp array."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564594122, "post_id": 57291492, "comment_id": 101086334, "body": "Your text and your example do not match up. In your text, you say you want to insert a single value <i>between</i> items, whereas in your code example, you are adding a value <i>after</i> each item. Also, your question is confusing since you are asking about inserting a value <i>between each item</i>, which doesn&#39;t make sense, since you cannot insert something between one thing, you can only insert it between two things."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1564579143, "last_edit_date": 1564579143, "creation_date": 1564578812, "answer_id": 57291630, "question_id": 57291492, "link": "https://stackoverflow.com/questions/57291492/ruby-how-can-i-insert-a-single-value-between-each-item-in-an-array/57291630#57291630", "title": "Ruby: How can I insert a single value between each item in an array?", "body": "<p>You can try using <code>flat_map</code>, and add after each element a <code>true</code> object:</p>\n\n<pre><code>p [1, 2, 3].flat_map { |e| [e, true] } # [1, true, 2, true, 3, true]\n</code></pre>\n\n<p>Another way would be to get the product of <code>[1,2,3]</code> and <code>[true]</code>, and flatten the result:</p>\n\n<pre><code>p [1, 2, 3].product([true]).flatten # [1, true, 2, true, 3, true]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 1, "last_activity_date": 1564579677, "creation_date": 1564579677, "answer_id": 57291925, "question_id": 57291492, "link": "https://stackoverflow.com/questions/57291492/ruby-how-can-i-insert-a-single-value-between-each-item-in-an-array/57291925#57291925", "title": "Ruby: How can I insert a single value between each item in an array?", "body": "<p>Only a small tweak: Your code suffers from having to know the number of elements in the array being processed. This takes the form of the magic number 3 used to make the true array. Here is an alternative. Better? Dunno, but at least no magic numbers to break.</p>\n\n<pre><code>[1,2,3].zip([true].cycle).flatten\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>[1, true, 2, true, 3, true]\n</code></pre>\n\n<p>Curious note: Adding a space between the \"zip\" and the opening \"(\" will cause the interpreter (version 2.3.3 in my tests) to generate an error:</p>\n\n<pre><code>Error NoMethodError: undefined method `flatten' for #&lt;Enumerator: [true]:cycle&gt;\n</code></pre>\n\n<p>This may be more robust as it avoids ambiguity in Ruby's \"friendly\" parser:</p>\n\n<pre><code>([1,2,3].zip([true].cycle)).flatten\n</code></pre>\n"}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564601914, "creation_date": 1564578460, "question_id": 57291492, "link": "https://stackoverflow.com/questions/57291492/ruby-how-can-i-insert-a-single-value-between-each-item-in-an-array", "title": "Ruby: How can I insert a single value between each item in an array?", "body": "<p>I have an array <code>[1,2,3]</code> and I want to insert the same value (<code>true</code>) between each item so that it becomes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#=&gt; [1, true, 2, true, 3, true] \n</code></pre>\n\n<p>My current method is a little long-winded:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[1,2,3].zip(Array.new(3, true)).flatten\n</code></pre>\n\n<p>Can anyone suggest a more elegant way to do this?</p>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1958427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b160cf5cd58ac89713d8732b1bad00?s=128&d=identicon&r=PG", "display_name": "bansalnagesh", "link": "https://stackoverflow.com/users/1958427/bansalnagesh"}, "edited": false, "score": 0, "creation_date": 1564723563, "post_id": 57298390, "comment_id": 101131502, "body": "If I set validation action to error, the insert fails. I want the insert to go through, but just get in logs that this was not a valid document"}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 0, "last_activity_date": 1564604920, "creation_date": 1564604920, "answer_id": 57298390, "question_id": 57291005, "link": "https://stackoverflow.com/questions/57291005/get-mongodb-warnings-in-ruby-when-performing-insert-update/57298390#57298390", "title": "Get mongodb warnings in ruby when performing insert/update", "body": "<p>You can't achieve that but if you have validation warnings on insert then perhaps you should set <a href=\"https://docs.mongodb.com/manual/core/schema-validation/#accept-or-reject-invalid-documents\" rel=\"nofollow noreferrer\"><code>validationAction</code></a> to <code>\"error\"</code> (which should be by default unless you changed it)</p>\n"}], "owner": {"reputation": 11, "user_id": 1958427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b160cf5cd58ac89713d8732b1bad00?s=128&d=identicon&r=PG", "display_name": "bansalnagesh", "link": "https://stackoverflow.com/users/1958427/bansalnagesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565592480, "creation_date": 1564576921, "last_edit_date": 1565592480, "question_id": 57291005, "link": "https://stackoverflow.com/questions/57291005/get-mongodb-warnings-in-ruby-when-performing-insert-update", "title": "Get mongodb warnings in ruby when performing insert/update", "body": "<p>I am performing insert/update operation in MongoDB using Ruby. When the insert/update operation fails, I can see the errors in the resulting cursor. But when there is a warning, I don't see it in the resulting cursor. \nI only see this</p>\n\n<p><code>#&lt;Mongo::Operation::Insert::Result:0x70353913223340 documents=[{\"n\"=&gt;1, \"ok\"=&gt;1.0}]&gt;</code></p>\n\n<p>However, checking my mongo logs, I see that a warning was generated when the insert happened</p>\n\n<p><code>2019-07-31T17:43:27.959+0530 W STORAGE  [conn429] Document would fail validation collection:</code></p>\n\n<p>I want to see this error in Ruby insert operation result. </p>\n\n<p>I have tried setting the Mongo logger level to Debug</p>\n\n<p><code>Mongo::Logger.logger.level = Logger::DEBUG</code></p>\n\n<p>But this does not help either. </p>\n"}, {"tags": ["json", "ruby", "escaping", "stringify", "html-safe"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1564576698, "post_id": 57290662, "comment_id": 101076259, "body": "How are you generating your HTML? Are you using Rails with ERB or some other templating engine?"}, {"owner": {"reputation": 2779, "user_id": 2666194, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3b1056f3f1eede6e5d953447ea1ed374?s=128&d=identicon&r=PG", "display_name": "fnllc", "link": "https://stackoverflow.com/users/2666194/fnllc"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1564577399, "post_id": 57290662, "comment_id": 101076710, "body": "I&#39;m building a mobile app with Rhomobile and Framework 7. I don&#39;t have access to .html_safe from Rails."}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 0, "last_activity_date": 1564578966, "creation_date": 1564578966, "answer_id": 57291685, "question_id": 57290662, "link": "https://stackoverflow.com/questions/57290662/html-safe-json-generation-with-ruby-only/57291685#57291685", "title": "HTML Safe JSON generation with Ruby only", "body": "<p>Since you are not using a more common templating framework which automates escaping values, you need to manually ensure that ALL user-provided values you emit into your HTML are properly escaped.</p>\n\n<p>You can use the <code>CGI</code> module for that which ships with Ruby:</p>\n\n<pre><code>require 'cgi'\ndef h(value)\n  CGI.escapeHTML(value)\nend\n\njson = RubyArrayOfHashes.to_json\nhtml = \"&lt;div data-track=\\\"#{h json}\\\"&gt;something&lt;/div&gt;\n</code></pre>\n\n<p>Note that depending on how the emitted data is interpreted, you might need to use other escaping methods. If you are e.g. emitting Javascript code between <code>&lt;script&gt;</code> tags, you need to escape it differently.</p>\n\n<p>In general, you should investigate ways to automate the escaping of values similar to what Rails does in recent versions. Having to manually escape all emitted values can quickly lead to bugs when you forgot to escape some data, leading to security issues such as XSS vulnerabilities.</p>\n"}], "owner": {"reputation": 2779, "user_id": 2666194, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3b1056f3f1eede6e5d953447ea1ed374?s=128&d=identicon&r=PG", "display_name": "fnllc", "link": "https://stackoverflow.com/users/2666194/fnllc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 57291685, "answer_count": 1, "score": 0, "last_activity_date": 1564578966, "creation_date": 1564575775, "question_id": 57290662, "link": "https://stackoverflow.com/questions/57290662/html-safe-json-generation-with-ruby-only", "title": "HTML Safe JSON generation with Ruby only", "body": "<p>I need to embed a JSON object into an HTML data attribute. Using the Ruby to_json</p>\n\n<pre><code>RubyArrayOfHashes.to_json\n</code></pre>\n\n<p>generates a proper JSON string, but it is not escaped. So I get this in my HTML:</p>\n\n<pre><code>data-track=\"[{\"source_id\":7}]\"\n</code></pre>\n\n<p>The above is not valid due to the double quotes not being escaped.</p>\n\n<p>Is there an equivalent to the JS JSON.stringify() function in ruby?</p>\n\n<p>I need this in my data attribute and not in a script tag.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1564574089, "post_id": 57290132, "comment_id": 101074816, "body": "is account  model?"}, {"owner": {"reputation": 3, "user_id": 11863564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15b2a8af9ebd28c1a16043ae2b0257f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/11863564/tiago"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1564574325, "post_id": 57290132, "comment_id": 101074932, "body": "I don&#39;t have a model account"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1564575768, "post_id": 57290132, "comment_id": 101075723, "body": "Your code is inconsistent. You&#39;ve written classes called <code>Permission</code> and <code>GroupPermissions</code>, yet directly below you say the tables are <i><code>account_group_users</code></i> and <code>account_group_permissons</code>. Did you supply the wrong information above, or is there an issue with database?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1564576521, "post_id": 57290132, "comment_id": 101076168, "body": "According to <a href=\"https://guides.rubyonrails.org/association_basics.html#controlling-association-scope\" rel=\"nofollow noreferrer\">the documentation</a>, this should work fine without specifying the <code>class_name</code>. Is there anything else important that you may need to mention? E.g. You&#39;re using an old version of rails, or an &#39;unusual&#39; gem, or have added some other &#39;unusual&#39; code?"}, {"owner": {"reputation": 3, "user_id": 11863564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15b2a8af9ebd28c1a16043ae2b0257f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/11863564/tiago"}, "edited": false, "score": 0, "creation_date": 1564576633, "post_id": 57290132, "comment_id": 101076219, "body": "Tables ajusted, no I generated these models with scaffold and it&#39;s basic"}, {"owner": {"reputation": 3, "user_id": 11863564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15b2a8af9ebd28c1a16043ae2b0257f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/11863564/tiago"}, "edited": false, "score": 0, "creation_date": 1564576942, "post_id": 57290132, "comment_id": 101076402, "body": "I&#39;m using rails 5"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 4820205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5yR2j.jpg?s=128&g=1", "display_name": "Angel Huezo", "link": "https://stackoverflow.com/users/4820205/angel-huezo"}, "is_accepted": true, "score": 0, "last_activity_date": 1564595605, "creation_date": 1564595605, "answer_id": 57296456, "question_id": 57290132, "link": "https://stackoverflow.com/questions/57290132/namespace-rails-belongs-to/57296456#57296456", "title": "Namespace rails belongs_to", "body": "<p>Is there a typo in your <code>belongs_to</code>?  It should be <code>belongs_to :permission</code></p>\n\n<p>Also, use <code>permission_id</code> as your foreign key in the <code>account_group_permissions</code> table.</p>\n"}], "owner": {"reputation": 3, "user_id": 11863564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15b2a8af9ebd28c1a16043ae2b0257f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/11863564/tiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57296456, "answer_count": 1, "score": 0, "last_activity_date": 1564595605, "creation_date": 1564573985, "last_edit_date": 1564576523, "question_id": 57290132, "link": "https://stackoverflow.com/questions/57290132/namespace-rails-belongs-to", "title": "Namespace rails belongs_to", "body": "<p>I have the following configuration</p>\n\n<pre><code>module Account\n\u00a0\u00a0 class Permission &lt;ApplicationRecord\n\u00a0\u00a0 end\nend\n\nmodule Account\n\u00a0\u00a0 class GroupPermission &lt; ApplicationRecord\n\u00a0\u00a0\u00a0\u00a0 belongs_to: permission\n\u00a0\u00a0 end\nend\n\nTable: account_permissions\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name character varying,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0  \nTable: account_group_permissions\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 account_permissions_id bigint,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 account_groups_id bigint,\n</code></pre>\n\n<p>When I try to access the Account :: GroupPermission instance and through it access Account :: Permission returns nil.</p>\n\n<p>Only works if I specify class_name:</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564587707, "post_id": 57289021, "comment_id": 101083267, "body": "Note: You can also express this as <code>3.downto(1) { |i| print i }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11823992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oXIA9-jZVyQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfeGdM7WLDC1h_SzliC99AzMUloYQ/photo.jpg?sz=128", "display_name": "Elfi19", "link": "https://stackoverflow.com/users/11823992/elfi19"}, "edited": false, "score": 0, "creation_date": 1564689172, "post_id": 57289066, "comment_id": 101123954, "body": "Thanks that clarifies my confusion and the link you provided is really useful"}], "tags": [], "owner": {"reputation": 6122, "user_id": 946500, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fqdcn.jpg?s=128&g=1", "display_name": "Pavel Oganesyan", "link": "https://stackoverflow.com/users/946500/pavel-oganesyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1564570303, "creation_date": 1564570303, "answer_id": 57289066, "question_id": 57289021, "link": "https://stackoverflow.com/questions/57289021/the-syntax-about-while-loop-in-ruby/57289066#57289066", "title": "The syntax about While loop in Ruby", "body": "<p>While mandatory needs <code>end</code> in Ruby.</p>\n\n<p><a href=\"https://www.tutorialspoint.com/ruby/ruby_loops\" rel=\"nofollow noreferrer\">Syntax example</a></p>\n\n<p><code>do</code> is optional and can be omitted.</p>\n\n<p>So, it is not the case where pair <code>do - end</code> can be replaced with <code>{}</code></p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 2107463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mw2ml.jpg?s=128&g=1", "display_name": "Hazhir Derakhshi", "link": "https://stackoverflow.com/users/2107463/hazhir-derakhshi"}, "is_accepted": false, "score": 2, "last_activity_date": 1564570603, "creation_date": 1564570603, "answer_id": 57289163, "question_id": 57289021, "link": "https://stackoverflow.com/questions/57289021/the-syntax-about-while-loop-in-ruby/57289163#57289163", "title": "The syntax about While loop in Ruby", "body": "<p>As you said <code>do</code> is optional for while loop. <code>While keyword</code> is enough to define a block which is finished with end like any other block in ruby. In addition, <code>end</code> is mandatory for while block.</p>\n\n<p>If you want to use while on just one line you can do such as below:</p>\n\n<pre><code>    i = 0\n    i += 1 while i &lt; 10\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11823992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oXIA9-jZVyQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfeGdM7WLDC1h_SzliC99AzMUloYQ/photo.jpg?sz=128", "display_name": "Elfi19", "link": "https://stackoverflow.com/users/11823992/elfi19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564570603, "creation_date": 1564570077, "question_id": 57289021, "link": "https://stackoverflow.com/questions/57289021/the-syntax-about-while-loop-in-ruby", "title": "The syntax about While loop in Ruby", "body": "<p>I'm practicing the While Loop in Ruby and got a basic example as below</p>\n\n<pre><code>i = 3\nwhile i &gt; 0 do\n  print i\n  i -= 1\nend\n</code></pre>\n\n<p>My question is why I can't interchange do..end with {} as if I rewrite the above code as below it doesn't work anymore</p>\n\n<pre><code>i = 3\nwhile i &gt; 0 {\n  print i\n  i -= 1\n}\n</code></pre>\n\n<p>However, it seems to work without the first \"do\"</p>\n\n<pre><code>i = 3\nwhile i &gt; 0 \n  print i\n  i -= 1\nend\n</code></pre>\n\n<p>Could anyone explain the rule or redirect me to the right resource? Thx!</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 0, "creation_date": 1564608304, "post_id": 57288916, "comment_id": 101091956, "body": "Could you describe how it&#39;s not working? I assume you get <code>TypeError: no implicit conversion of String into Integer</code>. Is that correct?"}, {"owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "reply_to_user": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 0, "creation_date": 1564639295, "post_id": 57288916, "comment_id": 101098350, "body": "find.tree is my custom method it only works/traverse thru the path as long as it is a hash and does not encounter Array. So in the above case when i have to add one more entry to esxi which is an array so does zones my function wont work. So need your help in modifying the above code so it also works with Array."}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 0, "creation_date": 1564813019, "post_id": 57288916, "comment_id": 101161117, "body": "I see. If you are looking for a generic solution, you will need to check if the current value is a hash (keep traversing with key), an array (keep traversing with index). I think <a href=\"https://stackoverflow.com/a/57298997/1288687\">stackoverflow.com/a/57298997/1288687</a> will help you fix that. If you don&#39;t want to use <code>dig</code>, check the type of your currently traversed value using a case switch or if statement <code>.is_a?(Array)</code> to decide how to continue."}], "answers": [{"tags": [], "owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "is_accepted": false, "score": 0, "last_activity_date": 1564608000, "creation_date": 1564608000, "answer_id": 57298997, "question_id": 57288916, "link": "https://stackoverflow.com/questions/57288916/a-function-to-update-json-using-the-pathex-profile-zones-objects-object/57298997#57298997", "title": "A function to update Json using the path(ex: profile/zones/objects/object)", "body": "<p>I have no visibility of the method <code>tree()</code>, but I would approach the task like this example:</p>\n\n<pre><code>hash.dig('profile', 'zones', 0, 'esxi')[0] = data\n</code></pre>\n\n<p>When dealing with arrays, you would have to not only split <code>path</code> but also convert indexes to numbers. If <code>find.tree()</code> works properly,</p>\n\n<pre><code>key = Integer(key) if key[/^\\d+$/]\nfind.tree(path)[key] = data\n</code></pre>\n\n<p>should do the job. Please note, that the condition is useless if your paths contains numbers that are not indexes of an array. Also watch out when assigning hashes. You might want to ensure your default_proc is setup correctly: <a href=\"https://stackoverflow.com/a/34621043/1288687\">https://stackoverflow.com/a/34621043/1288687</a></p>\n\n<p>I hope you find this helpful.</p>\n"}], "owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564608000, "creation_date": 1564569735, "question_id": 57288916, "link": "https://stackoverflow.com/questions/57288916/a-function-to-update-json-using-the-pathex-profile-zones-objects-object", "title": "A function to update Json using the path(ex: profile/zones/objects/object)", "body": "<p>I want a single method which will update the content of Json which should work like below:</p>\n\n<pre><code>data = { \"id\"=&gt;7913251, \"domain\"=&gt;\"domain.com\", \"ready\"=&gt;true, \"create_starttime\"=&gt;\"2018-08-30 05:57:14 -0500\" }\n\nupdate_json(data, 'profile/zones/0/esxi/1')\n</code></pre>\n\n<p>In the above the keys zones and esxi are Array in hash. Example josn content below</p>\n\n<pre><code>{\"profile\"=&gt;\n  {\"zones\"=&gt;\n    [{\"name\"=&gt;\"cloud_group1\",\n      \"is_main\"=&gt;true,\n      \"esxi\"=&gt;\n       [{\"id\"=&gt;7923451,\n         \"domain\"=&gt;\"domain.com\",\n         \"ready\"=&gt;true,\n         \"create_starttime\"=&gt;\"2018-08-30 05:57:14 -0500\",\n         \"create_stoptime\"=&gt;\"2018-08-30 07:29:05 -0500\"}]\n    }]\n  }\n}\n</code></pre>\n\n<p>The following code works when there is no array in hash.</p>\n\n<pre><code>def update_json(data, path)\n        components = path.split('/')\n        if components.length &gt; 1\n          key = components[-1]\n          path.slice! \"/#{key}\"\n          find.tree(path)[key] = data\n        else\n          find.tree[path] = data\n        end\n        File.open(json_string, 'w') { |file| file.write(JSON.pretty_generate(find.tree)) }\n      end # update_json\n</code></pre>\n\n<p>In the above code <strong>find.tree</strong> is my method which returns value inside the path for eg., 'profile/zones', if no args passed it will return entire json content</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1564576384, "post_id": 57289065, "comment_id": 101076087, "body": "Thank you for your answer, it works but <code>scope_1</code> has already used in many place in my project and i don&#39;t want to add scope_select everywhere. I try to find a method  do the verification job inside a scope. <code>if select.exist? nothing else select end</code>"}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 0, "last_activity_date": 1564570298, "creation_date": 1564570298, "answer_id": 57289065, "question_id": 57288486, "link": "https://stackoverflow.com/questions/57288486/combine-two-scopes-have-same-select/57289065#57289065", "title": "Combine two scopes have same .select", "body": "<p>You could add a third scope that only does the <code>select</code> part. This is not very elegant though IMO, I would just write a third scope that does what you're looking for in a more sophisticated manner.</p>\n\n<pre><code>scope_1, -&gt;(date){\n     .joins(:anothertable)                                        \n     .where(\"anotertable.ended_at IS NULL OR anotertable.ended_at &gt;= ?)\", date)}\n\nscope_2, -&gt;(number){\n     .joins(:thirdtable)                                        \n     .where(\"thirdtable.quantity &gt;= ?)\", number)}\n\nscope_select, -&gt; { select(\"DISTINCT(people.id), people.*\") }\n</code></pre>\n\n<hr>\n\n<pre><code>scope = Person.scope_1('2019-01-01')\nscope = scope.scope_2(5)\nscope = scope.scope_select\n</code></pre>\n"}], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564577223, "creation_date": 1564568336, "last_edit_date": 1564577223, "question_id": 57288486, "link": "https://stackoverflow.com/questions/57288486/combine-two-scopes-have-same-select", "title": "Combine two scopes have same .select", "body": "<p>In my Model person.rb, I have two scopes, both of them are applied independent until now I should combine them.</p>\n\n<pre><code>    scope_1, -&gt;(date){\n          select(\"DISTINCT(people.id), people.*, anothertable.ended_at\")\n         .joins(:anothertable)                                        \n         .where(\"anotertable.ended_at IS NULL OR anotertable.ended_at &gt;= ?\", date)}\n\n    scope_2, -&gt;(number){\n          select(\"DISTINCT(people.id), people.*\")\n         .joins(:thirdtable)                                        \n         .where(\"thirdtable.quantity &gt;= ?\", number)}\n</code></pre>\n\n<p>I got error when I code this:</p>\n\n<pre><code>   scope = Person.scope_1('2019-01-01')\n   scope = scope.scope_2(5)\n</code></pre>\n\n<blockquote>\n  <p>ActionView::Template::Error (Mysql2::Error: You have an error in your\n  SQL syntax; check the manual that corresponds to your MariaDB server\n  version for the right syntax to use near 'DISTINCT(people.id),\n  people.*</p>\n</blockquote>\n\n<p>Because there are twice \"DISTINCT(people.id), people.*\" in SQL. </p>\n\n<p>Question:\nIn this case, how to verify if scope has already the same \"select\" ? \nIs there a method in ActiveRecord::Relation do this job ?</p>\n\n<p>Ruby 2.4\nRails 5.1.6</p>\n"}, {"tags": ["ruby", "powershell-5.0", "iis-modules"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564599485, "post_id": 57287592, "comment_id": 101088678, "body": "<i>We have tried to incorporate approach suggested in the below blog. However, we didn&#39;t got the desired outcome.</i> What <b>exactly</b> did you do and what <b>exactly</b> was the outcome and what <b>exactly</b> did not work? Be specific and include these details in your post."}, {"owner": {"reputation": 13, "user_id": 11289625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a939dbbb0bf3bdb4a720bbe87e06e1e4?s=128&d=identicon&r=PG&f=1", "display_name": "vibhor", "link": "https://stackoverflow.com/users/11289625/vibhor"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564650456, "post_id": 57287592, "comment_id": 101103733, "body": "Sure and apologies as I didn&#39;t add this piece of info in my post. Here is what I have tried- the blog suggests to use the command-  Get-WindowsOptionalFeature -Online | where FeatureName -like &#39;IIS-<i>&#39; to discover the list of all IIS feature.  &amp; we are looking for a 3rd party feature. Even though we have tried to modify the command we did not get the required feature.Command we have used-  Set-ExecutionPolicy Bypass -Scope Process #Get-WindowsOptionalFeature -Online | where FeatureName -like &#39;IIS-</i>&#39; Get-WindowsOptionalFeature -Online | where {$_.state -eq &quot;Enabled&quot;} | ft -Property"}], "owner": {"reputation": 13, "user_id": 11289625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a939dbbb0bf3bdb4a720bbe87e06e1e4?s=128&d=identicon&r=PG&f=1", "display_name": "vibhor", "link": "https://stackoverflow.com/users/11289625/vibhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564565514, "creation_date": 1564565514, "question_id": 57287592, "link": "https://stackoverflow.com/questions/57287592/how-to-enable-iis-native-modules-for-third-party-application", "title": "How to enable IIS native modules for third party application", "body": "<h1>Background-</h1>\n\n<p>We have installed a 3rd party application over the web server. This application would run seamlessly only when we enable specific modules list in 'Configure Native Modules' action over the IIS. The installation is done silently and it does list the required modules however we have to enable them manually.</p>\n\n<h1>Ask-</h1>\n\n<p>We are trying to figure out if there is any way we can enable the required modules using powershell or ruby script. This will enable us to do the needful without manual intervention.</p>\n\n<p>We have tried to incorporate approach suggested in the below blog. However, we didn't got the desired outcome.</p>\n\n<p>Blog-\n<a href=\"https://weblog.west-wind.com/posts/2017/may/25/automating-iis-feature-installation-with-powershell\" rel=\"nofollow noreferrer\">https://weblog.west-wind.com/posts/2017/may/25/automating-iis-feature-installation-with-powershell</a></p>\n"}, {"tags": ["ruby", "bundler", "rugged"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564599680, "post_id": 57287200, "comment_id": 101088765, "body": "<a href=\"https://stackoverflow.com/q/26549137/3784008\">This may help</a>."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564599734, "post_id": 57287200, "comment_id": 101088789, "body": "Please do not link to external sites that host your code. If you have code that is relevant to your question then you must include it directly in your question."}], "owner": {"reputation": 73, "user_id": 3666523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtPnn.jpg?s=128&g=1", "display_name": "Gleb Mikulko", "link": "https://stackoverflow.com/users/3666523/gleb-mikulko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564564346, "creation_date": 1564564346, "question_id": 57287200, "link": "https://stackoverflow.com/questions/57287200/how-to-fix-makefile257-recipe-for-target-rugged-so-failed-rugged", "title": "How to fix &#39;Makefile:257: recipe for target &#39;rugged.so&#39; failed&#39; (rugged)", "body": "<p>I'm trying to install <code>pronto</code> gem and one of its dependency (rugged) is failing to build.</p>\n\n<p>So, trying to run <code>gem install rugged</code> gives me such output <a href=\"https://pastebin.com/m6v2RgQt\" rel=\"nofollow noreferrer\">https://pastebin.com/m6v2RgQt</a></p>\n\n<p>I've checked that I have <code>cmake</code> installed and other optional dependencies listed here <a href=\"https://github.com/libgit2/libgit2#optional-dependencies\" rel=\"nofollow noreferrer\">https://github.com/libgit2/libgit2#optional-dependencies</a>.</p>\n\n<p>My guesses are</p>\n\n<p>1) I'm using <code>rbenv</code> and this somehow can mess with Ruby path</p>\n\n<p>2) My machine configuration</p>\n\n<p>Do you have any thoughts on how to fix this issue? </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1564566795, "post_id": 57287010, "comment_id": 101070651, "body": "<code>@user.update_attribute(:avatar)</code> no need of this line in update action"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1564566909, "post_id": 57287010, "comment_id": 101070724, "body": "and make sure that you have <code>mount_uploader :avatar, AvatarUploader</code> in your user model"}, {"owner": {"reputation": 3, "user_id": 11350608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kMyMi.png?s=128&g=1", "display_name": "Clovis Genevard", "link": "https://stackoverflow.com/users/11350608/clovis-genevard"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1564581206, "post_id": 57287010, "comment_id": 101079173, "body": "There is mount_uploader :avatar, AvatarUploader in my user model"}, {"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 0, "creation_date": 1564592669, "post_id": 57287010, "comment_id": 101085751, "body": "Could you post more of the stack trace? That will tell us which controller and action are rejecting the parameter."}, {"owner": {"reputation": 3, "user_id": 11350608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kMyMi.png?s=128&g=1", "display_name": "Clovis Genevard", "link": "https://stackoverflow.com/users/11350608/clovis-genevard"}, "edited": false, "score": 0, "creation_date": 1564738282, "post_id": 57287010, "comment_id": 101137688, "body": "thank you I posted more of the stack trace."}], "owner": {"reputation": 3, "user_id": 11350608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kMyMi.png?s=128&g=1", "display_name": "Clovis Genevard", "link": "https://stackoverflow.com/users/11350608/clovis-genevard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564738126, "creation_date": 1564563817, "last_edit_date": 1564738126, "question_id": 57287010, "link": "https://stackoverflow.com/questions/57287010/how-to-fix-unpermitted-parameter-avatar-error-in-ruby-on-rails", "title": "How to fix &quot;Unpermitted parameter: :avatar&quot; error in Ruby on Rails", "body": "<p>I'm trying to allow user to upload image with carrierwave gem from a form_for but I got this error: </p>\n\n<blockquote>\n  <p>Unpermitted parameter: :avatar</p>\n</blockquote>\n\n<p>(see full stack trace below)</p>\n\n<p>I'm using devise gem so I have to add strong parameter in application_controller as the documentation says but it doesn't work.</p>\n\n<p>application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    attributes = [:name, :email, :avatar]\n    devise_parameter_sanitizer.permit(:sign_up, keys: attributes)\n    devise_parameter_sanitizer.permit(:account_update, keys: attributes)\n  end\nend\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  before_action :ensure_admin, :except =&gt; :show\n\n  def index\n    @users = User.paginate(:page =&gt; params[:page], :per_page =&gt; 8)\n  end\n\n  def show\n    @user = User.find_by_name(params[:id])\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n    if @user.update(user_params)\n      redirect_to users_path, :notice =&gt; \"User updated.\"\n    else\n      redirect_to users_path, :alert =&gt; \"Unable to update user.\"\n    end\n  end\n\n  def destroy\n    user = User.find(params[:id])\n    user.destroy\n    redirect_to users_path, :notice =&gt; \"User deleted.\"\n  end\n\n  private\n\n  def ensure_admin\n    if(current_user.role == 'admin')\n      return\n    end\n    redirect_to root_path, :alert =&gt; \"Access denied.\"\n  end\n\n  def user_params\n    params.require(:user).permit(:avatar, :role, :email, :name, :password)\n  end\nend\n</code></pre>\n\n<p>my view:</p>\n\n  \n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :avatar %&gt;\n  &lt;%= f.file_field :avatar, class: 'form-control' %&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n  &lt;%= f.label I18n.translate('user.current_password') %&gt; &lt;i&gt;&lt;%= I18n.translate('user.needed_to_confirm') %&gt;&lt;/i&gt;\n  &lt;%= f.password_field :current_password, placeholder: I18n.translate('user.current_password'), autocomplete: \"current-password\", class: 'form-control' %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"actions\"&gt;\n  &lt;%= f.submit I18n.translate('control.update'), class: 'form-control btn sign-up-button' %&gt;\n&lt;/div&gt;\n</code></pre>\n\n  \n\n<p>user model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable,\n         :omniauthable, :omniauth_providers =&gt; [:facebook]\n\n  mount_uploader :avatar, AvatarUploader\nend\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_07_30_090404) do\n\n  enable_extension \"plpgsql\"\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"provider\"\n    t.string \"uid\"\n    t.string \"name\"\n    t.text \"image\"\n    t.string \"role\"\n    t.string \"avatar\"\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n  end\nend\n</code></pre>\n\n<p>full stack trace:</p>\n\n<blockquote>\n  <p>Started PUT \"/users?locale=en\" for 127.0.0.1 at 2019-08-02 11:23:40\n  +0200 Processing by RegistrationsController#update as HTML   Parameters: {\"utf8\"=>\"\u2713\",\n  \"authenticity_token\"=>\"k4pnLdkhc9sFOLax51vkSv0SA8SfnL7Niw3gfo60nmLfBS1I7FD25P54Q/1qzF4aHIFiBtvq5TzLKk1/LwZHzw==\",\n  \"user\"=>{\"name\"=>\"Clovis5\", \"email\"=>\"clovi@clovi.com\",\n  \"avatar\"=>#,\n  @original_filename=\"IMG_20190712_150908_155__01.jpg\",\n  @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data;\n  name=\\\"user[avatar]\\\";\n  filename=\\\"IMG_20190712_150908_155__01.jpg\\\"\\r\\nContent-Type:\n  image/jpeg\\r\\n\">, \"password\"=>\"[FILTERED]\",\n  \"password_confirmation\"=>\"[FILTERED]\",\n  \"current_password\"=>\"[FILTERED]\"}, \"commit\"=>\"Update\", \"locale\"=>\"en\"}\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" =\n  $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 15], [\"LIMIT\", 1]]   \u21b3\n  /Users/clovisgenevard/.rvm/gems/ruby-2.5.3/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" =\n  $1 LIMIT $2  [[\"id\", 15], [\"LIMIT\", 1]]   \u21b3\n  /Users/clovisgenevard/.rvm/gems/ruby-2.5.3/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98\n  Unpermitted parameter: :avatar    (0.1ms)  BEGIN   \u21b3\n  /Users/clovisgenevard/.rvm/gems/ruby-2.5.3/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98\n  (0.1ms)  COMMIT   \u21b3\n  /Users/clovisgenevard/.rvm/gems/ruby-2.5.3/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98\n  Unpermitted parameter: :avatar Unpermitted parameter: :avatar\n  Unpermitted parameter: :avatar Redirected to\n  <a href=\"http://localhost:3000/?locale=en\" rel=\"nofollow noreferrer\">http://localhost:3000/?locale=en</a> Completed 302 Found in 137ms\n  (ActiveRecord: 1.0ms)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7424605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c7ddece741a8ad2161fe4e95bd74ce?s=128&d=identicon&r=PG", "display_name": "ysz", "link": "https://stackoverflow.com/users/7424605/ysz"}, "edited": false, "score": 0, "creation_date": 1564572481, "post_id": 57287022, "comment_id": 101073921, "body": "Thank you @ray you are awesome!"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 0, "last_activity_date": 1564573015, "last_edit_date": 1564573015, "creation_date": 1564563845, "answer_id": 57287022, "question_id": 57286297, "link": "https://stackoverflow.com/questions/57286297/rails-4-2-11-1-new-does-not-load-sqlite3/57287022#57287022", "title": "rails _4.2.11.1_ new does not load &#39;sqlite3&#39;", "body": "<p>It is just because rails can't find exact version of gem needed, please provide version explicitly as below,</p>\n\n<pre><code>gem 'sqlite3', '~&gt; 1.3.6'\n</code></pre>\n\n<p>You can find reference <a href=\"https://github.com/rails/rails/commit/d9601fd622a08b8ef5346c10f00fb13328d34d76#diff-1b086e9c0c1a6b852fda7b3542d6957b\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>If it does not work, vary version and try as <code>gem 'sqlite3', '~&gt; 1.3.0'</code> in gemfile.</p>\n"}], "owner": {"reputation": 55, "user_id": 7424605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c7ddece741a8ad2161fe4e95bd74ce?s=128&d=identicon&r=PG", "display_name": "ysz", "link": "https://stackoverflow.com/users/7424605/ysz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57287022, "answer_count": 1, "score": 0, "last_activity_date": 1564573015, "creation_date": 1564561373, "question_id": 57286297, "link": "https://stackoverflow.com/questions/57286297/rails-4-2-11-1-new-does-not-load-sqlite3", "title": "rails _4.2.11.1_ new does not load &#39;sqlite3&#39;", "body": "<p>I'm new to rails and was trying with rvm</p>\n\n<pre><code>rvm use 2.4.1\nrails _4.2.11.1_ new hello_app\ncd hello_app\nrails s\n</code></pre>\n\n<p>which works with Rails 5 but fails with rails 4 and ruby 2.4.1 on my Mac </p>\n\n<pre><code>Gem::LoadError (Specified 'sqlite3' for database adapter, but the gem is not loaded. Add `gem 'sqlite3'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).):\n  activerecord (4.2.11.1) lib/active_record/connection_adapters/connection_specification.rb:177:in `rescue in spec'\n</code></pre>\n\n<p>My Gemfile which is what rails new generated without comments</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\ngem 'rails', '4.2.11.1'\ngem 'sqlite3'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\nruntimes\n\ngem 'jquery-rails'\nmore: https://github.com/rails/turbolinks\ngem 'turbolinks'\nhttps://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'byebug'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n\n  gem 'spring'\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 3, "creation_date": 1564560983, "post_id": 57286147, "comment_id": 101067292, "body": "You can&#39;t chain delete after map. Can&#39;t you explain what are you trying to do?"}, {"owner": {"reputation": 1, "user_id": 11862604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7ymJAi-ywiA/AAAAAAAAAAI/AAAAAAAAABE/H3Z86MuHOx4/photo.jpg?sz=128", "display_name": "Anson G", "link": "https://stackoverflow.com/users/11862604/anson-g"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1564561479, "post_id": 57286147, "comment_id": 101067566, "body": "i want to delete a value from array and map to same array object as new array so that i can use in different method"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564564734, "post_id": 57286147, "comment_id": 101069404, "body": "How about <code>test - [\u2018ab\u2019]</code>?"}, {"owner": {"reputation": 1, "user_id": 11862604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7ymJAi-ywiA/AAAAAAAAAAI/AAAAAAAAABE/H3Z86MuHOx4/photo.jpg?sz=128", "display_name": "Anson G", "link": "https://stackoverflow.com/users/11862604/anson-g"}, "edited": false, "score": 0, "creation_date": 1564565131, "post_id": 57286147, "comment_id": 101069634, "body": "still its not working"}, {"owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1564567874, "post_id": 57286147, "comment_id": 101071323, "body": "@AnsonG Did you tried using <code>delete_if</code>? It deletes every element of <code>self</code> for which block evaluates to true. Array gets changed instantly every time the block is called."}, {"owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1564567914, "post_id": 57286147, "comment_id": 101071352, "body": "Can you please explain what issue you are facing?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6482699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAk2k.png?s=128&g=1", "display_name": "David Kim", "link": "https://stackoverflow.com/users/6482699/david-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1564561782, "last_edit_date": 1564561782, "creation_date": 1564561395, "answer_id": 57286310, "question_id": 57286147, "link": "https://stackoverflow.com/questions/57286147/ruby-delete-a-value-from-array/57286310#57286310", "title": "Ruby - Delete a value from array", "body": "<p>I suppose you meant to use something like <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-reject\" rel=\"nofollow noreferrer\">reject</a>?</p>\n\n<p>You could do the following if you want to delete an item from the array with a matching string:</p>\n\n<pre><code>test = [\"ab\",\"cd\",\"ef\"]; test.reject{|a| a == \"ab\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11862604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7ymJAi-ywiA/AAAAAAAAAAI/AAAAAAAAABE/H3Z86MuHOx4/photo.jpg?sz=128", "display_name": "Anson G", "link": "https://stackoverflow.com/users/11862604/anson-g"}, "edited": false, "score": 0, "creation_date": 1564562122, "post_id": 57286496, "comment_id": 101067915, "body": "but when i navigate to different method and access @test, I am getting all values including deleted value (&#39;ab&#39;)."}, {"owner": {"reputation": 375, "user_id": 6729097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FnzgddTfzRE/AAAAAAAAAAI/AAAAAAAAARY/SswOUEHhS6g/photo.jpg?sz=128", "display_name": "Mohamed Najiullah", "link": "https://stackoverflow.com/users/6729097/mohamed-najiullah"}, "edited": false, "score": 1, "creation_date": 1564574445, "post_id": 57286496, "comment_id": 101075007, "body": "I tried out ray&#39;s solution and it works for me. Is the @test variable being updated somewhere else? <a href=\"https://repl.it/repls/WindyNaiveOrder\" rel=\"nofollow noreferrer\">repl.it/repls/WindyNaiveOrder</a>"}, {"owner": {"reputation": 1, "user_id": 11862604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7ymJAi-ywiA/AAAAAAAAAAI/AAAAAAAAABE/H3Z86MuHOx4/photo.jpg?sz=128", "display_name": "Anson G", "link": "https://stackoverflow.com/users/11862604/anson-g"}, "edited": false, "score": 0, "creation_date": 1564648016, "post_id": 57286496, "comment_id": 101102452, "body": "yup its been updated in other method as well, anyways thanks now fixed the issue its working"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1564562021, "creation_date": 1564562021, "answer_id": 57286496, "question_id": 57286147, "link": "https://stackoverflow.com/questions/57286147/ruby-delete-a-value-from-array/57286496#57286496", "title": "Ruby - Delete a value from array", "body": "<p><code>@test</code> is array object and <code>@test.map</code> will return enumerator object. <code>delete</code> is Array method &amp; not a Enumerator method.</p>\n\n<p>You can directly call <code>delete</code> on <code>@test</code></p>\n\n<pre><code>@test.delete('ab') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "is_accepted": false, "score": 3, "last_activity_date": 1564567624, "last_edit_date": 1564567624, "creation_date": 1564562071, "answer_id": 57286508, "question_id": 57286147, "link": "https://stackoverflow.com/questions/57286147/ruby-delete-a-value-from-array/57286508#57286508", "title": "Ruby - Delete a value from array", "body": "<p>You can also try this using <a href=\"https://apidock.com/ruby/Object/tap\" rel=\"nofollow noreferrer\">tap</a>,</p>\n\n<pre><code>irb(main):009:0&gt; test = [\"ab\",\"cd\",\"ef\"]\n=&gt; [\"ab\", \"cd\", \"ef\"]\nirb(main):010:0&gt; test.tap {|i| i.delete(\"ab\")}\n=&gt; [\"cd\", \"ef\"]\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>irb(main):019:0&gt; test = [\"ab\",\"cd\",\"ef\"]\n=&gt; [\"ab\", \"cd\", \"ef\"]\nirb(main):020:0&gt; test -= [\"ab\"]\n=&gt; [\"cd\", \"ef\"]\n</code></pre>\n\n<p>Or you can use <a href=\"https://apidock.com/ruby/Array/delete_if\" rel=\"nofollow noreferrer\">delete_if</a></p>\n\n<pre><code>irb(main):031:0&gt; @test = [\"ab\",\"cd\",\"ef\"]\n=&gt; [\"ab\", \"cd\", \"ef\"]\nirb(main):032:0&gt; @test.delete_if{|i|i==\"ab\"}\n=&gt; [\"cd\", \"ef\"]\nirb(main):033:0&gt; @test\n=&gt; [\"cd\", \"ef\"]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11862604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7ymJAi-ywiA/AAAAAAAAAAI/AAAAAAAAABE/H3Z86MuHOx4/photo.jpg?sz=128", "display_name": "Anson G", "link": "https://stackoverflow.com/users/11862604/anson-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1564567624, "creation_date": 1564560813, "last_edit_date": 1564561393, "question_id": 57286147, "link": "https://stackoverflow.com/questions/57286147/ruby-delete-a-value-from-array", "title": "Ruby - Delete a value from array", "body": "<p>When I try to delete a value from array and map with same array object to create new array but its not working getting error undefined method 'delete'.</p>\n\n<pre><code>@test = [\"ab\",\"cd\",\"ef\"]\n@test.map.delete(\"ab\")\n</code></pre>\n\n<p>NoMethodError (undefined method `delete' for #)</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "data-science"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1564557359, "post_id": 57284269, "comment_id": 101065433, "body": "Do you get row array with length 4 having actual &amp; fee value in it? Or these both value exists only in array having length 5."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564559467, "post_id": 57284269, "comment_id": 101066519, "body": "You changed the question substantially since I and others posted their answers. That&#39;s a no-no at SO, for reasons that should be obvious."}, {"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564559811, "post_id": 57284269, "comment_id": 101066681, "body": "I only added 2 more examples @CarySwoveland. Did not change the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1564560443, "post_id": 57284269, "comment_id": 101067001, "body": "The last element of #4 and #5 is to be disregarded. That was not the case for #1, #2 or #3. If you did not change the question why does my answer give the correct result for #1, #2 and #3, but not for #4 and #5? Why did @ray feel the need for his &quot;update&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564555073, "post_id": 57284472, "comment_id": 101064359, "body": "Thank you. This was my first thought as well. There are some outliers where the array ends with two array elements that are transaction values. In these cases, the second last one is the actual value and the last one is the fee value. I suppose I could do a count of each array to check and then update the index value accordingly, I was just hoping for a smarter way like some sort of regex etc."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564555596, "post_id": 57284472, "comment_id": 101064585, "body": "@HermannHH Can you elaborate with example rows, so I can better look at it."}, {"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564555919, "post_id": 57284472, "comment_id": 101064724, "body": "I have added example 4 &amp; 5 to my question. These are definitely outliers, but they do appear."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564557177, "post_id": 57284472, "comment_id": 101065344, "body": "@HermannHH I have updated answer. Of course you need to define boundary as I did above. Wish there can be better approach or I miss here something."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 3, "last_activity_date": 1564557165, "last_edit_date": 1564557165, "creation_date": 1564554195, "answer_id": 57284472, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays/57284472#57284472", "title": "Extracting transaction data from variable length arrays", "body": "<p>If you are having,</p>\n\n<pre><code>row = [\"Transaction 2\", \"Hello World\", \"3.00\"]\n</code></pre>\n\n<p>You can follow by doing,</p>\n\n<pre><code>{ description: row[0..-2].join(' - '), amt: row[-1] }\n</code></pre>\n\n<p>You have to further manipulate how these rows get iterated so further logic will vary.</p>\n\n<p><strong>update:</strong></p>\n\n<p>For condition updated specified later, it is seen to have row can have length 5 where actual amount is second last value.</p>\n\n<pre><code>data = (row.length == 5) ? [row[0..-3], row[-2]] : [row[0..-2], row[-1]]\n{ description: data[0].join(' - '), amt: data[1] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564554849, "post_id": 57284526, "comment_id": 101064254, "body": "Thank you. This only seems to match every item in the array, so doesn&#39;t really work for this problem i.e. it doesn&#39;t distinguish between different types/lengths of line items. I appreciate your answer"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11116003"}, "is_accepted": false, "score": 1, "last_activity_date": 1564554408, "creation_date": 1564554408, "answer_id": 57284526, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays/57284526#57284526", "title": "Extracting transaction data from variable length arrays", "body": "<p>Try this regex:</p>\n\n<pre><code>\"\\K[^\",\\]]+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/pEc7Pu/1\" rel=\"nofollow noreferrer\">Here is Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564556353, "last_edit_date": 1564556353, "creation_date": 1564554871, "answer_id": 57284611, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays/57284611#57284611", "title": "Extracting transaction data from variable length arrays", "body": "<pre><code>arr = [[\"Transaction 1\", \"1.00\"],\n       [\"Transaction 2\", \"Hello World\", \"3.00\"],\n       [\"Transaction 3\", \"Hello World\", \"feeffe\", \"5.00\"]]\n\narr.map {|*first, last| { description: first.join(' - '), amt: last } }\n  #=&gt; [{:description=&gt;\"Transaction 1\", :amt=&gt;\"1.00\"},\n  #    {:description=&gt;\"Transaction 2 - Hello World\", :amt=&gt;\"3.00\"},\n  #    {:description=&gt;\"Transaction 3 - Hello World - feeffe\", :amt=&gt;\"5.00\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1564557104, "last_edit_date": 1564557104, "creation_date": 1564556448, "answer_id": 57284977, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays/57284977#57284977", "title": "Extracting transaction data from variable length arrays", "body": "<p>If the number of items always determines the index of the amount element, you can do something like:</p>\n\n<pre><code>input = [\n  [\"Transaction 1\", \"1.00\"],\n  [\"Transaction 2\", \"Hello World\", \"3.00\"],\n  [\"Transaction 3\", \"Hello World\", \"feeffe\", \"5.00\"],\n  [\"Transaction 4\", \"Hello World\", \"feeffe\", \"5.00\", \"12.00\"],\n  [\"Transaction 5\", \"Hello World @ 10.00\", \"feeffe\", \"10.00\", \"12.00\"]\n]\n\nROW_LENGTH_TO_AMOUNT_INDEX = {\n  2 =&gt; 1,\n  3 =&gt; 2,\n  4 =&gt; 3,\n  5 =&gt; 3,\n}\n\n\ndef map(transactions)\n  transactions.map do |row|\n    amount_index = ROW_LENGTH_TO_AMOUNT_INDEX[row.length]\n    {\n      description: row[0],\n      amt: row[amount_index]\n    }\n  end\nend\n\n\np map(input)\n\n[{:description=&gt;\"Transaction 1\", :amt=&gt;\"1.00\"}, {:description=&gt;\"Transaction 2\", :amt=&gt;\"3.00\"}, {:description=&gt;\"Transaction 3\", :amt=&gt;\"5.00\"}, {:description=&gt;\"Transaction 4\", :amt=&gt;\"5.00\"}, {:description=&gt;\"Transaction 5\", :amt=&gt;\"10.00\"}]\n</code></pre>\n\n<p>Or, perhaps something like this?</p>\n\n<pre><code>MAPPERS = {\n  2 =&gt; lambda { |row| { description: row[0], amt: row[1]} },\n  3 =&gt; lambda { |row| { description: row[0], amt: row[2]} },\n  4 =&gt; lambda { |row| { description: row[0], amt: row[3]} },\n  5 =&gt; lambda { |row| { description: row[0], amt: row[3]} }\n}\n\n\ndef map(transactions)\n  transactions.map do |row|\n    MAPPERS[row.length].call(row)\n  end\nend\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "edited": false, "score": 0, "creation_date": 1564570962, "post_id": 57285390, "comment_id": 101073040, "body": "This is exactly the kind of thing I was hoping for. It&#39;s dynamic and smarter than manually mapping values. Thank you very much!"}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 1, "last_activity_date": 1564557988, "creation_date": 1564557988, "answer_id": 57285390, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays/57285390#57285390", "title": "Extracting transaction data from variable length arrays", "body": "<p>Assume your transaction is on a variable <code>tr</code>, i.e.</p>\n\n<pre><code> tr=[\"Transaction 5\", \"Hello World\", \"feeffe\", \"10.00\", \"12.00\"]\n</code></pre>\n\n<p>I would first separtate this into those strings which look like an amount, and those which don't:</p>\n\n<pre><code>amounts,texts= tr.partition {|el| /^\\d+[.]\\d{2}/ =~ el}\n</code></pre>\n\n<p>Here you can check that <code>!amounts.empty?</code>, to guard agains transaction without amount. Now your hash could be</p>\n\n<pre><code>{\n  transaction_name: texts.first,\n  transaction_text: \"#{texts[1]}#{amounts.size &gt; 1 ? %( @ #{amounts.first}) : ''}#{texts.size &gt; 2 ? %( - #{texts.last}) : ''}\",\n  amt: amounts.last\n}\n</code></pre>\n"}], "owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57285390, "answer_count": 5, "score": -1, "last_activity_date": 1564557988, "creation_date": 1564553289, "last_edit_date": 1564556948, "question_id": 57284269, "link": "https://stackoverflow.com/questions/57284269/extracting-transaction-data-from-variable-length-arrays", "title": "Extracting transaction data from variable length arrays", "body": "<p>I have built a small program in ruby that collects table data from my own PDF bank statements. This does so by scanning each PDF statement for tables and then filters out for transactional line item patterns.</p>\n\n<p>Everything is working great and I have managed to collect an array of line items as an array of string arrays. Getting an array of keyed objects would be better but a bit tricky with the format of the statements.</p>\n\n<p>The issue is that the line items have different lengths, so it's kind of tricky to always know the location of the correct values to map.</p>\n\n<p>For example:</p>\n\n<ol>\n<li><code>[\"Transaction 1\", \"1.00\"]</code></li>\n<li><code>[\"Transaction 2\", \"Hello World\", \"3.00\"]</code></li>\n<li><code>[\"Transaction 3\", \"Hello World\", \"feeffe\", \"5.00\"]</code></li>\n<li><code>[\"Transaction 4\", \"Hello World\", \"feeffe\", \"5.00\", \"12.00\"]</code></li>\n<li><code>[\"Transaction 5\", \"Hello World @ 10.00\", \"feeffe\", \"10.00\", \"12.00\"]</code></li>\n</ol>\n\n<p>The line items only range in between 2 and 5 array items normally.</p>\n\n<p>Is there an efficient/accurate way to map the above to:</p>\n\n<ol>\n<li><code>{ description: \"Transaction 1\", amt: \"1.00\"}</code></li>\n<li><code>{ description: \"Transaction 2 - Hello World\", amt: \"3.00\"}</code></li>\n<li><code>{ description: \"Transaction 3 - Hello World - feeffe\", amt: \"5.00\"}</code></li>\n<li><code>{ description: \"Transaction 4 - Hello World - feeffe\", amt: \"5.00\"}</code></li>\n<li><code>{ description: \"Transaction 5 - Hello World @ 10.00 - feeffe\", amt: \"10.00\"}</code></li>\n</ol>\n\n<p>-Or is the only way to write IF conditions that looks at the array length and makes a \"best guess\" effort?</p>\n"}, {"tags": ["ruby", "oop", "testing", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564557272, "post_id": 57283680, "comment_id": 101065388, "body": "For some reason it looks like <code>respond_to</code> doesn&#39;t work properly with the <code>new</code> method. It works for other custom methods though. Might be a bug."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1564559270, "post_id": 57283680, "comment_id": 101066413, "body": "<code>it { expect(Card).to respond_to(:new).with(2).arguments }</code> tests the <code>self.new</code> method inside <code>Card</code>, which is clearly not what&#39;s needed. :-/"}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1564561309, "post_id": 57285857, "comment_id": 101067475, "body": "You&#39;re correct that <code>Card.method(:new).arity</code> is <code>-1</code>, just like <code>Card.method(:initialize).arity</code>. Do you happen to know why?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564594405, "post_id": 57285857, "comment_id": 101086463, "body": "Because both <code>Class#new</code> and <code>Object#initialize</code> cannot know in advance how many arguments the user is going to pass. Note that traditionally, <code>initialize</code> is overridden in subclasses for the correct number of parameters, so this is not a problem. E.g. if you examine the <code>initialize</code> method defined by the OP instead of the default one in <code>Object</code>, it will obviously have an arity of 2."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564909624, "post_id": 57285857, "comment_id": 101178480, "body": "@J&#246;rgWMittag weird. <code>Card.method(:initialize).arity</code> returns -1. Did I miss something?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1564911093, "post_id": 57285857, "comment_id": 101178786, "body": "@EricDuminil: I don&#39;t understand your question. That is <code>Object#initialize</code> you are looking at, which is generally meant to be overridden in subclasses, so it is defined to have the maximally flexible signature. In other words, the result is exactly what you would expect, no?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1567085959, "post_id": 57285857, "comment_id": 101865129, "body": "@J&#246;rgWMittag: Okay, I think I got it. <code>Card.instance_method(:initialize).arity</code> is indeed <code>2</code>. The confusion came from the fact that the definition of <code>Card.new</code> is in <code>Card#initialize</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1567086238, "post_id": 57285857, "comment_id": 101865320, "body": "@EricDuminil: The definition of <code>Card.new</code> is in <code>Class#new</code>, not <code>Card#initialize</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1567086751, "post_id": 57285857, "comment_id": 101865641, "body": "@J&#246;rgWMittag: Thanks for your patience. <a href=\"https://stackoverflow.com/a/14328096/6419007\">stackoverflow.com/a/14328096/6419007</a> cleared my confusion."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 2, "last_activity_date": 1564559795, "creation_date": 1564559795, "answer_id": 57285857, "question_id": 57283680, "link": "https://stackoverflow.com/questions/57283680/how-to-test-initializer-number-of-arguments-in-ruby/57285857#57285857", "title": "How to test initializer number of arguments in Ruby", "body": "<p>The <code>new</code> method has an arity of <code>-1</code> which means variable number of arguments so it is okay that the spec passes.</p>\n\n<p>See: <a href=\"https://ruby-doc.org/core-2.6.3/Method.html#method-i-arity\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.3/Method.html#method-i-arity</a></p>\n\n<p>The problem is that you are testing the wrong thing/method.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1564561140, "creation_date": 1564561140, "answer_id": 57286235, "question_id": 57283680, "link": "https://stackoverflow.com/questions/57283680/how-to-test-initializer-number-of-arguments-in-ruby/57286235#57286235", "title": "How to test initializer number of arguments in Ruby", "body": "<p>The problem is that <code>Card.new</code> is defined in <code>Card.initialize</code>.</p>\n\n<p>So:</p>\n\n<pre><code>it { expect(Card).to respond_to(:new).with(2).arguments }\n</code></pre>\n\n<p>is actually trying to test:</p>\n\n<pre><code>class Card\n  def self.new(number, suit)\n    ...\n  end\nend\n</code></pre>\n\n<p>You could simply try to initialize <code>Card</code> with incorrect arguments and check that <code>ArgumentError</code> is raised:</p>\n\n<pre><code>class Card\n  attr_reader :number, :suit\n\n  def initialize(number, suit)\n    @number = number\n    @suit = suit\n  end\nend\n\ndescribe Card do\n  context 'when initialized with incorrect number of arguments' do\n    [[], [1], [1, 2, 3], [1, 2, 3, 4]].each do |args|\n      it { expect { Card.new(*args) }.to raise_error(ArgumentError) }\n    end\n  end\n\n  context 'when initialized with correct arguments' do\n    it { expect(Card.new(1, 'D')).to be_a(Card) }\n  end\nend\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>Card\n  when initialized with incorrect number of arguments\n    should raise ArgumentError\n    should raise ArgumentError\n    should raise ArgumentError\n    should raise ArgumentError\n  when initialized with correct arguments\n    should be a kind of Card\n\nFinished in 0.01455 seconds (files took 0.64291 seconds to load)\n5 examples, 0 failures\n</code></pre>\n\n<p>There might be a cleaner way, though.</p>\n"}], "owner": {"reputation": 304, "user_id": 1046317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99260bd1182482ecdd7bc522965c0da3?s=128&d=identicon&r=PG", "display_name": "Gonzalo Moreno Caballero", "link": "https://stackoverflow.com/users/1046317/gonzalo-moreno-caballero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 57286235, "answer_count": 2, "score": 2, "last_activity_date": 1564561140, "creation_date": 1564550297, "question_id": 57283680, "link": "https://stackoverflow.com/questions/57283680/how-to-test-initializer-number-of-arguments-in-ruby", "title": "How to test initializer number of arguments in Ruby", "body": "<p>I need to autograde a Ruby exercise , testing with Rspec</p>\n\n<p>The class is pure ruby and I only have to validate attributes (existence and accessibility) and the number of arguments that are received in the initializer</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># lib/card.rb\nclass Card\n  attr_reader :number, :suit\n\n  def initialize(number, suit)\n    @number = number\n    @suit = suit\n  end\nend\n\n# spec/card_spec.rb\nrequire \"spec_helper\"\nrequire_relative \"../lib/card\"\n\ndescribe Card do\n  let(:subject) do\n    Card.new(1, \"D\")\n  end\n\n  it { expect(Card).to respond_to(:new).with(4).arguments }\nend\n\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>\u279c rspec spec/card_spec.rb\n.\n\nFinished in 0.00431 seconds (files took 0.12135 seconds to load)\n1 example, 0 failure\n</code></pre>\n\n<p>Tests are passing despite the fact that the initializer receives 2 arguments and I specify 4 arguments in my test</p>\n"}, {"tags": ["ruby", "sorbet"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1564549031, "post_id": 57283411, "comment_id": 101062191, "body": "What\u2019s in it? Is it a log file?"}, {"owner": {"reputation": 632, "user_id": 7143763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0QlJUg0F-uo/AAAAAAAAAAI/AAAAAAAAAJE/4OqZ-1jLIYc/photo.jpg?sz=128", "display_name": "Connor Shea", "link": "https://stackoverflow.com/users/7143763/connor-shea"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1564549493, "post_id": 57283411, "comment_id": 101062329, "body": "it looks like this, it&#39;s just a list of errors: <a href=\"https://github.com/connorshea/VideoGameList/blob/f3e0178a0c10c5d03ac7d0ae0f5e62383a2cdbc9/sorbet/rbi/hidden-definitions/errors.txt\" rel=\"nofollow noreferrer\">github.com/connorshea/VideoGameList/blob/&hellip;</a>"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1564550322, "post_id": 57283411, "comment_id": 101062554, "body": "It does look like it should be ignored."}], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 1015863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/82j8j.jpg?s=128&g=1", "display_name": "jez", "link": "https://stackoverflow.com/users/1015863/jez"}, "is_accepted": true, "score": 2, "last_activity_date": 1564551924, "creation_date": 1564551924, "answer_id": 57283988, "question_id": 57283411, "link": "https://stackoverflow.com/questions/57283411/is-it-safe-to-exclude-the-sorbet-errors-txt-from-your-git-repo/57283988#57283988", "title": "Is it safe to exclude the Sorbet errors.txt from your git repo?", "body": "<p>Yes, it's safe to be ignored. As you mention, it's used to debug when things go wrong.</p>\n"}], "owner": {"reputation": 632, "user_id": 7143763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0QlJUg0F-uo/AAAAAAAAAAI/AAAAAAAAAJE/4OqZ-1jLIYc/photo.jpg?sz=128", "display_name": "Connor Shea", "link": "https://stackoverflow.com/users/7143763/connor-shea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57283988, "answer_count": 1, "score": 1, "last_activity_date": 1564551924, "creation_date": 1564548759, "question_id": 57283411, "link": "https://stackoverflow.com/questions/57283411/is-it-safe-to-exclude-the-sorbet-errors-txt-from-your-git-repo", "title": "Is it safe to exclude the Sorbet errors.txt from your git repo?", "body": "<p><code>errors.txt</code> tends to have a lot of changes when you run <code>srb rbi update</code>, and I've seen the Sorbet developers mention before that it's not really meant for anything other than debugging. </p>\n\n<p>So, is it safe to ignore the <code>errors.txt</code> file? Will doing so cause any negative effects?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1564538360, "post_id": 57282123, "comment_id": 101060225, "body": ":auto returns CSV::MalformedCSVError: New line must be &lt;&quot;\\r&quot;&gt; not &lt;&quot;\\n&quot;&gt; in line 3."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1564538494, "post_id": 57282123, "comment_id": 101060250, "body": "Weird, I&#39;m on a Mac, could that change things?"}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1564538634, "post_id": 57282123, "comment_id": 101060277, "body": "Okay, yeah, on Mac it thorws"}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 1, "last_activity_date": 1564538079, "creation_date": 1564538079, "answer_id": 57282123, "question_id": 57282049, "link": "https://stackoverflow.com/questions/57282049/csvmalformedcsverror-new-line-must-be-n-r/57282123#57282123", "title": "CSV::MalformedCSVError: New line must be &lt;&quot;\\n\\r&quot;&gt;", "body": "<p>Use <code>:row_sep =&gt; :auto</code> instead of <code>:row_sep =&gt; \"\\n\\r\"</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>CSV.open(file_name, \"r\", { :col_sep =&gt; \"\\t\", :row_sep =&gt; :auto }).each do |row|\n    puts row\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1564538407, "post_id": 57282148, "comment_id": 101060236, "body": "&quot;\\r\\n&quot; returns CSV::MalformedCSVError: New line must be &lt;&quot;\\r\\n&quot;&gt; not &lt;&quot;\\r&quot;&gt; in line 1."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 1, "creation_date": 1564538682, "post_id": 57282148, "comment_id": 101060286, "body": "How did you identify this so I can trouble shoot in the future?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 1, "creation_date": 1564539108, "post_id": 57282148, "comment_id": 101060370, "body": "@user2012677 Great question! I used a <a href=\"https://en.wikipedia.org/wiki/Hex_editor\" rel=\"nofollow noreferrer\">hex editor</a> to look at what&#39;s really in the file plus a <a href=\"https://hextables.com/list-of-conversion-tables/hex-to-utf-8-table/\" rel=\"nofollow noreferrer\">UTF8/ASCII hex table</a>. 09 is tab, 0d is \\r, 0a is \\n. Alternatively you can print out the lines in the file with <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-p\" rel=\"nofollow noreferrer\"><code>p</code></a> and it will show <code>\\t\\r\\r\\n</code> at the end."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1564540016, "last_edit_date": 1564540016, "creation_date": 1564538225, "answer_id": 57282148, "question_id": 57282049, "link": "https://stackoverflow.com/questions/57282049/csvmalformedcsverror-new-line-must-be-n-r/57282148#57282148", "title": "CSV::MalformedCSVError: New line must be &lt;&quot;\\n\\r&quot;&gt;", "body": "<p>Windows row_sep is <code>\"\\r\\n\"</code>, not <code>\"\\n\\r\"</code>. However this CSV is malformed. Looking at it using a hex editor it appears to be using <code>\"\\r\\r\\n\"</code>.</p>\n\n<p>It's tab-delimited.</p>\n\n<p>In addition it is not using proper quoting, line 247 has <code>600 \"B\" STREET STE. 2204</code>, so you need to turn off quote characters.</p>\n\n<pre><code>quote_char: nil, col_sep: \"\\t\", row_sep: \"\\r\\r\\n\"\n</code></pre>\n\n<p>There's an extra tab on the end, each line ends with <code>\\t\\r\\r\\n</code>. You can also look at it as using a row_sep of <code>\"\\r\\n\"</code> with an extra <code>\\r</code> field.</p>\n\n<pre><code>quote_char: nil, col_sep: \"\\t\", row_sep: \"\\r\\n\"\n</code></pre>\n\n<p>Or you can view it as having a row_sep of <code>\\t\\r\\r\\n</code> and no extra field.</p>\n\n<pre><code>quote_char: nil, col_sep: \"\\t\", row_sep: \"\\t\\r\\r\\n\"\n</code></pre>\n\n<p>Either way, it's a mess.</p>\n\n<hr>\n\n<p>I used a <a href=\"https://en.wikipedia.org/wiki/Hex_editor\" rel=\"nofollow noreferrer\">hex editor</a> to look at the file as text and raw data side by side. This let me see what's truly at the end of the line.</p>\n\n<pre><code>87654321  0011 2233 4455 6677 8899 aabb ccdd eeff  0123456789abcdef                       \n00000000: 3030 3030 3030 3139 3034 0941 4252 4148  0000001904.ABRAH\n00000010: 414d 2053 4543 5552 4954 4945 5320 434f  AM SECURITIES CO\n00000020: 5250 4f52 4154 494f 4e09 3030 3832 3934  RPORATION.008294\n00000030: 3532 0933 3732 3420 3437 5448 2053 5452  52.3724 47TH STR\n00000040: 4545 5420 4354 2e20 4e57 0920 0947 4947  EET CT. NW. .GIG\n00000050: 2048 4152 424f 5209 5741 0939 3833 3335   HARBOR.WA.98335\n00000060: 090d 0d0a 3030 3030 3030 3233 3033 0950  ....0000002303.P\n          ^^^^^^^^^\n</code></pre>\n\n<p><a href=\"https://hextables.com/list-of-conversion-tables/hex-to-utf-8-table/\" rel=\"nofollow noreferrer\">Hex 09 0d 0d 0a</a> is <code>\\t\\r\\r\\n</code>.</p>\n\n<p>Alternatively, you can print the lines with <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-p\" rel=\"nofollow noreferrer\"><code>p</code></a> and any invisible characters will be revealed.</p>\n\n<pre><code>f = File.open(file_name)\np f.readline\n\n\"0000001904\\tABRAHAM SECURITIES CORPORATION\\t00829452\\t3724 47TH STREET CT. NW\\t \\tGIG HARBOR\\tWA\\t98335\\t\\r\\r\\n\"\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 57282148, "answer_count": 2, "score": 2, "last_activity_date": 1564540016, "creation_date": 1564537301, "last_edit_date": 1564539738, "question_id": 57282049, "link": "https://stackoverflow.com/questions/57282049/csvmalformedcsverror-new-line-must-be-n-r", "title": "CSV::MalformedCSVError: New line must be &lt;&quot;\\n\\r&quot;&gt;", "body": "<p>Trying to parse this file with Ruby CSV.</p>\n\n<p><a href=\"https://www.sec.gov/files/data/broker-dealers/company-information-about-active-broker-dealers/bd070219.txt\" rel=\"nofollow noreferrer\">https://www.sec.gov/files/data/broker-dealers/company-information-about-active-broker-dealers/bd070219.txt</a></p>\n\n<p>However, I am getting an error.</p>\n\n<pre><code>CSV.open(file_name, \"r\", { :col_sep =&gt; \"\\t\", :row_sep =&gt; \"\\n\\r\" }).each do |row|\n    puts row\nend\n</code></pre>\n\n<blockquote>\n  <p>CSV::MalformedCSVError: New line must be &lt;\"\\n\\r\"> not &lt;\"\\r\"> in line\n  1.</p>\n</blockquote>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564534719, "post_id": 57281434, "comment_id": 101059623, "body": "It&#39;s not exactly clear what you want to achieve. Can you please elaborate more on what&#39;s working as expected and what&#39;s not?"}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564535264, "post_id": 57281434, "comment_id": 101059709, "body": "&#39;&#39;&#39;@feed = CSV.open(feed_name, &#39;wb+&#39;)&#39;&#39;&#39;         &#39;&#39;&#39;@feed &lt;&lt; columns&#39;&#39;&#39;"}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564535560, "post_id": 57281434, "comment_id": 101059766, "body": "Sorry, but this didn&#39;t clarify anything for me"}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564535629, "post_id": 57281434, "comment_id": 101059778, "body": "Through above code I am reading CSV data from source and parsing it into new CSV file &quot;new_feed&quot;.csv&quot;. But instead I want to display my output on terminal rather pushing it on to another CSV file. So basically source is &quot;input.csv&quot; and output is getting written to &quot;new_feed.csv&quot;. I want output in similar fashion on terminal."}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564536393, "post_id": 57281434, "comment_id": 101059897, "body": "Did I understand correctly that you just want to instantiate some object which you can call methods on (column names) and it should return a list of values of this column? Like <code>FeedGenerator.name</code> returns <code>Chris, tony</code>, <code>FeedGenerator.age</code> returns <code>43,54</code>, etc?"}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564556189, "post_id": 57281434, "comment_id": 101064843, "body": "@GProst yes exactly."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1564634863, "post_id": 57292608, "comment_id": 101097157, "body": "Thanks alot @GProst , I&#39;m progressing with meta-programming and thus quite weak in thinking out of box solutions for now. Tons of thanks."}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": true, "score": 0, "last_activity_date": 1564581677, "creation_date": 1564581677, "answer_id": 57292608, "question_id": 57281434, "link": "https://stackoverflow.com/questions/57281434/parsing-values-of-each-and-every-text-separated-by-delimiter-in-csv-file/57292608#57292608", "title": "Parsing values of each and every text separated by delimiter in CSV file", "body": "<p>Is that what you wanted?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'csv'\n\nclass Feed\n  def initialize(source_name, column_names = [])\n    if column_names.empty?\n      column_names = CSV.open(source_name, 'r', &amp;:first)\n    end\n    columns = column_names.reduce({}) { |columns, col_name| columns[col_name] = []; columns }\n\n    define_singleton_method(:columns) { column_names }\n\n    column_names.each do |col_name|\n      define_singleton_method(col_name.to_sym) { columns[col_name] }\n    end\n\n    CSV.foreach(source_name, headers: true) do |row|\n      column_names.each do |col_name|\n        columns[col_name] &lt;&lt; row[col_name]\n      end\n    end\n  end\nend\n\nfeed = Feed.new('input.csv')\nputs feed.columns # [\"name\", \"age\", \"city\"]\nputs feed.name # [\"Chris\", \"Tony\"]\nputs feed.age # [\"43\", \"54\"]\nputs feed.city # [\"Ohio\", \"NYC\"]\n\nfeed2 = Feed.new('input.csv', ['name'])\nputs feed2.columns # [\"name\"]\nputs feed2.name # [\"Chris\", \"Tony\"]\n</code></pre>\n\n<p>Note, that I just created <code>Feed</code> class instead of <code>FeedGenerator</code> since I don't see much point in creating a generator when you can achieve what you want with just <code>initialize</code> method.</p>\n\n<p>Also note, with that approach all CSV's rows will be stored in memory (not very good if you have very big CSV), if you want to read from the CSV file only when you call <code>feed.name</code>, for example, then this is another approach:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'csv'\n\nclass Feed\n  def initialize(source_name, column_names = [])\n    if column_names.empty?\n      column_names = CSV.open(source_name, 'r', &amp;:first)\n    end\n\n    define_singleton_method(:columns) { column_names }\n\n    column_names.each do |col_name|\n      define_singleton_method(col_name.to_sym) do\n        columns = []\n        CSV.foreach(source_name, headers: true) do |row|\n          columns &lt;&lt; row[col_name]\n        end\n        columns\n      end\n    end\n  end\nend\n\nfeed = Feed.new('input.csv')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57292608, "answer_count": 1, "score": -1, "last_activity_date": 1564581677, "creation_date": 1564530795, "last_edit_date": 1564535811, "question_id": 57281434, "link": "https://stackoverflow.com/questions/57281434/parsing-values-of-each-and-every-text-separated-by-delimiter-in-csv-file", "title": "Parsing values of each and every text separated by delimiter in CSV file", "body": "<p>Trying to create methods for reading and displaying each and every value in CSV file. Had assigned first row of CSV file as the name of functions, which can be called for accessing each text.\nI have also constructed an array of objects and associated each object with the row of a CSV file. \nInput for CSV file is taken as a normal text seperated by delimiters. Suppose -</p>\n\n<pre><code>    name,age,city \n    Chris,43,Ohio\n    Tony,54,NYC\n</code></pre>\n\n<p>My output is correct and it is fetch to another CSV file through a feed generator class.\n    But I am unable to parse this output on command line. Where I can call methods directly on FeedGenerator outside the class like -</p>\n\n<pre><code>        FeedGenerator.name\n        FeedGenerator.age\n        FeedGenerator.city\n</code></pre>\n\n<p>Currently my code feeds data as per accordance with attributes provided in this class -</p>\n\n<pre><code>    class StarkFeedGenerator &lt; FeedGenerator\n      def columns; %w(name); end\n    end\n</code></pre>\n\n<pre><code>    require 'csv'\n\n    class FeedGenerator\n      attr_accessor :source, :feed, :current_row\n\n      def initialize(source_name, feed_name)\n        @source = CSV.read(source_name, headers: true)\n        @current_row = Row.new\n        @feed = []\n\n        # define method by header of source file\n        @source.headers.each do |column|\n          @current_row.instance_eval do\n            define_singleton_method(column) do\n              self.row[column]\n            end\n          end\n        end\n\n        @feed = CSV.open(feed_name, 'wb+')\n        @feed &lt;&lt; columns\n      end\n\n      def columns\n         %w(name age city)\n      end\n\n      def generate_feed\n        @source.each do |row|\n          @current_row.row = row\n          @feed &lt;&lt; columns.map do |c|\n            @current_row.send(c)\n          end\n        end\n      end\n\n      def columns; raise 'unimplimented'; end\n\n      class Row\n        attr_accessor :row\n\n        # you can define unrecognized column mapping below\n        def name; name; end\n        def age; age; end\n        def city; city; end\n      end\n    end\n    class StarkFeedGenerator &lt; FeedGenerator\n      def columns; %w(name); end\n    end\n\n    StarkFeedGenerator.new('Input.csv','new_feed.csv').generate_feed\n</code></pre>\n\n<p>Expected Result :</p>\n\n<pre><code>    FeedGenerator.name : Chris, tony\n    FeedGenerator.age : 43,54\n    FeedGenerator.city : Ohio, NYC\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "apache-cocoon"], "comments": [{"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1564556375, "post_id": 57281291, "comment_id": 101064932, "body": "Ya you have to &#39;build&#39; at least one child in the new action for the form fields to show up. You would need to do that regardless of the cocoon gem afaik. What the cocoon gem does is dynamically add more fields. Then you need the nested params as well. What do your strong params look like and what do the params look like coming in?"}, {"owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "reply_to_user": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1564628172, "post_id": 57281291, "comment_id": 101095890, "body": "Thanks for your feedback Mike.  The strong params include the child-fields and match what gets submitted, but only when the child model(s) are built in the new action.  If I don\u2019t create a child then nothing gets returned even if I add the fields in the form.  What\u2019s a bit surprising is there\u2019s no mention of this requirement in the gem, nor is it present in the demo app."}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1564642380, "post_id": 57281291, "comment_id": 101099534, "body": "The requirement to build the child is a requirement of the <code>fields_for</code>. The same way you need to have <code>@model = Model.new</code> in your new action, you then need to initialize at least one of the children. Ya I had no idea either until my supervisor told me about it when I had to start working with cocoon and nested fields in general."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1564649989, "post_id": 57281291, "comment_id": 101103490, "body": "Hi, this is not what I would expect. You do not even have to explicitly build a new child item in the controller. When rendering the <code>link_to_add_new_associaction</code> a new child is created (server-side). Can you either show us some code or check out the demo-project <a href=\"https://github.com/nathanvda/cocoon_simple_form_demo\" rel=\"nofollow noreferrer\">github.com/nathanvda/cocoon_simple_form_demo</a>. If you suspect this is a bug, please open an issue on the cocoon github."}, {"owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "edited": false, "score": 0, "creation_date": 1564655565, "post_id": 57281291, "comment_id": 101106539, "body": "Hi Nathan:  Many thanks for your feedback.  Happy to open an issue if this turns out to be a bug.  I suspect not. Currently, I&#39;m leaning toward the idea that my jQuery setup is not correct.  I&#39;ll update the question with the code."}, {"owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "edited": false, "score": 0, "creation_date": 1564698915, "post_id": 57281291, "comment_id": 101126945, "body": "The only real obvious differences I found that are suspect would be      a) that my new view doesn&#39;t include a separate form partial (seems unlikely)     b) the parent model has dependent_destroy enabled for the child models"}, {"owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1564786874, "post_id": 57281291, "comment_id": 101158153, "body": "Hmmm...started debugging the gem.  Put byebug in the link_to_add_competition method.  The code stops when the page is loaded the first time (as I&#39;d expect) but if I click the Add Child link, there is no response in the rails console. From the comments in the code, shouldn&#39;t I expect a server side model to be created when the link is clicked?  @nathanvda"}, {"owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "edited": false, "score": 0, "creation_date": 1564787442, "post_id": 57281291, "comment_id": 101158241, "body": "Following on from there, adding another call to byebug in the create_object method also gets called when the form is built the first time, but clicking the Add Child button also has no effect in the rails console."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1565003280, "post_id": 57281291, "comment_id": 101201516, "body": "Hi @BrendanO&#39;Brien great you found your answer! To explain how cocoon works: the form and the about-to-be-inserted child-form/partial are all rendered server-side. Client side the form is built, so when the <code>link_to_add_association</code> is clicked, a pre-rendered child-partial is duplicated, manipulated a little (mainly to have unique id&#39;s) and then inserted into the html. So no server calls are made."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "is_accepted": true, "score": 1, "last_activity_date": 1564927855, "last_edit_date": 1564927855, "creation_date": 1564789111, "answer_id": 57334463, "question_id": 57281291, "link": "https://stackoverflow.com/questions/57281291/does-the-cocoon-gem-require-n-models-to-be-built-in-the-controller-new-action/57334463#57334463", "title": "Does the cocoon gem require n models to be built in the controller new action?", "body": "<p>Argh!  What a facepalm moment.  Turned out the <code>&lt;a&gt;</code> tag on the ckeditor description field caused all this fuss.  Removing the <code>&lt;a&gt;</code> tag allowed cocoon to operate normally.</p>\n\n<p>So, in answer to the original question: No, the cocoon gem does -not- require even one child model to be built in the new controller action to add them.</p>\n"}], "owner": {"reputation": 35, "user_id": 5748167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf538ac8a60fdcdfa1f85b9098ecd56e?s=128&d=identicon&r=PG", "display_name": "Brendan O&#39;Brien", "link": "https://stackoverflow.com/users/5748167/brendan-obrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57334463, "answer_count": 1, "score": 0, "last_activity_date": 1564927855, "creation_date": 1564529279, "last_edit_date": 1564788731, "question_id": 57281291, "link": "https://stackoverflow.com/questions/57281291/does-the-cocoon-gem-require-n-models-to-be-built-in-the-controller-new-action", "title": "Does the cocoon gem require n models to be built in the controller new action?", "body": "<p>I have installed the <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">cocoon gem</a> in my rails 4 app exactly as described. This works fantastic in the parent model form allowing the user to add/remove fields for the child model(s).  Where I'm having trouble is the submission of the child object.  If child models are built in the parent model's new action, then I am able to submit exactly however many models were created, no more. This is obvious from the parameters being submitted as they contain child_attributes (or not, if no child models were built in the controller).  </p>\n\n<p>Currently running</p>\n\n<p>rails 4.2.10</p>\n\n<p>ruby 2.5.1</p>\n\n<p>cocoon 1.2.14</p>\n\n<p>jquery-rails 4.3.3</p>\n\n<p>jquery-ui-rails 6.0.1</p>\n\n<p>CODE SNIPPETS</p>\n\n<pre><code>class EventsController &lt; ApplicationController\n  before_action :authenticate_user!, only: [:new, :create]\n\n  def new\n    @event = Event.new\n    @event.competitions.build\n  end\n\n  def create\n    @event = current_user.events.create(event_params)\n    if @event.valid?\n      flash[:notice] = \"Event created\"\n      redirect_to events_path\n    else\n      flash[:alert] = \"Event not created.  Please check for errors in the form and try again.\"\n      render :new, status: :unprocessable_entity\n    end\n  end\n\ndef event_params\n    params.require(:event).permit(\n                                  :event_name,\n                                  :event_start,\n                                  :event_end,\n                                  :event_address,\n                                  competitions_attributes: [:id, :competition_name, :maximum_participants, :type_id, :fee, :_destroy]\n    )\n  end\nend\n</code></pre>\n\n<p>Parent model</p>\n\n<pre><code>  acts_as_paranoid\n  has_and_belongs_to_many :users\n  has_many :competitions, dependent: :destroy, inverse_of: :event\n  belongs_to :address\n  accepts_nested_attributes_for :address\n  accepts_nested_attributes_for :competitions, allow_destroy: true\n</code></pre>\n\n<p>Child model</p>\n\n<pre><code>class Competition &lt; ActiveRecord::Base\n  acts_as_paranoid\n  belongs_to :event\n  has_many :participants, dependent: :destroy\n  belongs_to :type\n  accepts_nested_attributes_for :participants, allow_destroy: true  \n\n</code></pre>\n\n<p>Form (new.html.erb)</p>\n\n<pre><code>  &lt;div class=\"text-left \"&gt;\n    &lt;%= simple_form_for @event do |f| %&gt;\n        &lt;%= f.input :event_name, input_html: {maxlength: 60} %&gt;\n        &lt;%= f.input :logo, label: \"Event Logo:\", hint: 'jpg or png files allowed, max size: 1MB' %&gt;\n        &lt;a &lt;%= f.input :description, label_html: {class: \"glyphicon glyphicon-question-sign event-new\", href: \"#\", 'data-content': \"You can format your description using the editor buttons. Cutting and pasting from other text editors will not work unless they are first exported into html format. For security reasons, some html tags are not allowed and will be removed.\", rel: \"popover\", \"data-placement\": 'top', 'data-original-title': 'WYSIWYG editor help', 'data-trigger': 'hover' }, as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini' } } %&gt;&lt;/a&gt;\n        &lt;%= f.input :event_address, placeholder: \"Enter Street Address, City, State, Postal Code\" %&gt;\n        &lt;%= f.input :registration_fee, :input_html =&gt; { :value =&gt; '0.00'}, label: \"Team registration fee\" %&gt;\n\n\n        &lt;%= f.input :event_start %&gt;\n        &lt;%= f.input :event_end %&gt;\n        &lt;br /&gt;\n        &lt;h3&gt;Competitions&lt;/h3&gt;\n        &lt;div id=\"competitions\"&gt;\n          &lt;%= f.simple_fields_for :competitions do |competition| %&gt;\n            &lt;%= render 'competition_fields', f: competition %&gt;\n          &lt;% end %&gt;\n          &lt;div class=\"links\"&gt;\n            &lt;%= link_to_add_association 'add competition', f, :competitions %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;%= f.submit 'Create', :class =&gt; 'pull-right btn btn-primary' %&gt;\n    &lt;% end %&gt;\n  &lt;/div\n\n</code></pre>\n\n<p>Partial (named _competition_fields.html.erb</p>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n  &lt;%= f.input :competition_name %&gt;\n  &lt;%= f.collection_select(:type_id, @types, :id, :name, prompt: \"Select a Type\") %&gt;\n  &lt;%= f.input :fee, :input_html =&gt; { :value =&gt; '0.00'} %&gt;\n  &lt;%= f.input :maximum_participants %&gt;\n  &lt;%= link_to_remove_association \"Delete Competition\", f %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>application.js</p>\n\n<pre><code>//= require jquery\n//= require bootstrap-sprockets\n//= require jquery_ujs\n//= require dataTables/jquery.dataTables\n//= require jquery-ui/widgets/autocomplete\n//= require autocomplete-rails\n//= require moment\n//= require bootstrap-datetimepicker\n//= require ckeditor/init\n//= require google_analytics\n//= require cocoon\n//= require_tree .\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EsnZR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EsnZR.jpg\" alt=\"Image of the partial component in the form, note 2 competitions submitted\"></a></p>\n\n<p>From the Rails console (after the parent model is inserted)</p>\n\n<pre><code>\"competitions_attributes\"=&gt;{\"0\"=&gt;{\"competition_name\"=&gt;\"test1\", \"type_id\"=&gt;\"2\", \"fee\"=&gt;\"0.00\", \"maximum_participants\"=&gt;\"8\", \"_destroy\"=&gt;\"false\"}}}, \"commit\"=&gt;\"Create\"}\n\n  SQL (17.4ms)  INSERT INTO \"competitions\" (\"competition_name\", \"maximum_participants\", \"type_id\", \"fee\", \"event_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\"  [[\"competition_name\", \"test1\"], [\"maximum_participants\", 8], [\"type_id\", 2], [\"fee\", \"0.0\"], [\"event_id\", 305], [\"created_at\", \"2019-08-01 11:13:44.582299\"], [\"updated_at\", \"2019-08-01 11:13:44.582299\"]]\n</code></pre>\n\n<p>I've been through all the usual issues with the setup for the gem (accepts_nested_attributes_for, inverse_of, the naming and indentation of the child_fields partial, jQuery is installed and cocoon being called etc.) It's all to spec so far as I can tell.  And it works, as long as the child models are built in the new action.</p>\n"}, {"tags": ["ruby", "rabbitmq", "bunny"], "comments": [{"owner": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "edited": false, "score": 0, "creation_date": 1564528580, "post_id": 57281112, "comment_id": 101058553, "body": "It is weird to be passing an <code>x-</code> argument via <code>subscribe</code>. If you provide code that reproduces this reliably in a repository that I can clone and run I can investigate."}, {"owner": {"reputation": 73, "user_id": 9269000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8231fe147b873b93e28ac4bfe926b00d?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9269000/joe"}, "reply_to_user": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "edited": false, "score": 0, "creation_date": 1564529866, "post_id": 57281112, "comment_id": 101058806, "body": "I do not have any additional code that I can share publicly. - Also I did want to add, if all consumers are created at the same time and are listening it does it on a first come first serve, however if any of the consumers are restarted while theres messages in the queue waiting, they will not grab waiting messages once they are back up and listening, this is initially what causes the stacking of waiting messages."}, {"owner": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "edited": false, "score": 0, "creation_date": 1564530300, "post_id": 57281112, "comment_id": 101058887, "body": "You&#39;ve added a very important detail in your comment. Please edit your original question and give <b>exact steps</b> on how to reproduce this. If you can&#39;t share a minimal, runnable code example to reproduce the issue it is very unlikely I will spend the time to guess on how to address it."}, {"owner": {"reputation": 73, "user_id": 9269000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8231fe147b873b93e28ac4bfe926b00d?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9269000/joe"}, "reply_to_user": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "edited": false, "score": 0, "creation_date": 1564531187, "post_id": 57281112, "comment_id": 101059036, "body": "Original updated with how i duplicate the issue, the code logic we have that a consumer handles allows it to remain busy enough to have messages waiting in the queue for consumers."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9269000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8231fe147b873b93e28ac4bfe926b00d?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9269000/joe"}, "edited": false, "score": 1, "creation_date": 1564591320, "post_id": 57291444, "comment_id": 101085148, "body": "Thank you! This is exactly it. Not sure how I missed this. Added the prefetch, and things are working how I needed it."}], "tags": [], "owner": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "is_accepted": true, "score": 1, "last_activity_date": 1564578324, "creation_date": 1564578324, "answer_id": 57291444, "question_id": 57281112, "link": "https://stackoverflow.com/questions/57281112/messages-stacking-on-consumers-when-other-consumers-are-available-in-rabbitmq/57291444#57291444", "title": "Messages stacking on consumers, when other consumers are available in RabbitMQ - using bunny for rails", "body": "<p>RabbitMQ is working as intended.</p>\n\n<p>Since your code does not set <a href=\"http://rubybunny.info/articles/queues.html#qos__prefetching_messages\" rel=\"nofollow noreferrer\">QoS / prefetch</a>, RabbitMQ sends <strong>all six</strong> messages to your first consumer. Since that consumer takes time to acknowledge messages (simulated by a 45 second sleep in the code), those six remain in the \"Unacked\" state while your other two consumers don't have anything to work on. Restarting those other two consumers has no effect since all six messages are in \"Unacked\" waiting for an ack from the first consumer.</p>\n\n<p>When you restart your first consumer, RabbitMQ detects the lost connection and enqueues the six messages to the \"Ready\" state, and delivers all six (most likely) to another consumer, and the problem repeats.</p>\n\n<p>Please see <a href=\"https://github.com/lukebakken/stackoverflow-57281112\" rel=\"nofollow noreferrer\">this runnable code sample</a> for how to set prefetch. With a prefetch of <code>1</code>, RabbitMQ will at most deliver one message to a consumer and will wait for an ack before delivering another message to that consumer. In that way, messages will be distributed among your consumers.</p>\n\n<hr>\n\n<p><sub><b>NOTE:</b> the RabbitMQ team monitors the <code>rabbitmq-users</code> <a href=\"https://groups.google.com/forum/#!forum/rabbitmq-users\" rel=\"nofollow noreferrer\">mailing list</a> and only sometimes answers questions on StackOverflow.</sub></p>\n"}], "owner": {"reputation": 73, "user_id": 9269000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8231fe147b873b93e28ac4bfe926b00d?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9269000/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 57291444, "answer_count": 1, "score": 0, "last_activity_date": 1564578324, "creation_date": 1564527787, "last_edit_date": 1564531112, "question_id": 57281112, "link": "https://stackoverflow.com/questions/57281112/messages-stacking-on-consumers-when-other-consumers-are-available-in-rabbitmq", "title": "Messages stacking on consumers, when other consumers are available in RabbitMQ - using bunny for rails", "body": "<p>Queue messages in RabbitMQ are stacking and waiting on a single consumer while other consumers are available.</p>\n\n<p>We use RabbitMQ as our messenger service. We use bunny to create connections and setup queues with passing messages.</p>\n\n<p>In our rails setup using bunny, we are having an issue where we have one queue with 8 consumers listening on that queue for messages. When messages come in, ideally they should be round robin-ing the consumers example: 4 messages in the queue, consumer 1 picks up message 1, - consumer 1 is busy, consumer 2 picks up message 2, consumer 2 is busy, consumer 3 picks up message 3, and so forth.</p>\n\n<p>However the issue we are having is, 4 messages in the queue, consumer 1 picks up message 1, consumer 1 busy, consumer 2-8 are available, but messages 2-4 are stacked in the queue waiting on consumer 1 to become available and process the messages.</p>\n\n<p>I feel like i've done a bunch of research and just can't quite figure out how to stop messages from stacking and waiting on a single consumer.</p>\n\n<p>Has anyone had experience in this, or have any ideas on how to fix this issue?</p>\n\n<pre><code>conn = Bunny.new(bunny[0])\nconn.start\nch = conn.create_channel\nq = ch.queue(\"#{record_queue_name}\", :durable =&gt; true)\nq.subscribe(:manual_ack =&gt; true, :arguments =&gt; {\"x-priority\" =&gt; 10}, :block =&gt; true) do |delivery_info, properties, payload|\nch.acknowledge(delivery_info.delivery_tag, false)\n</code></pre>\n\n<p>We are wanting anytime any messages get sent to RabbitMQ, the consumer picks them up on a first come first serve basis, not multiple messages stacked waiting for a busy consumer when others are available.</p>\n\n<p>EDIT:\nHow to reproduce:\nstart 3 consumers at the same time.\npush through 6 messages - consumers 1 - 3 are now busy with 3 messages in the queue.\nrestart 2 &amp; 3, when 2 &amp; 3 are listening again, 3 messages are still waiting in queue waiting on consumer 1. consumer 2 &amp; 3 are still available.</p>\n\n<p>Restart consumer 1, now 3 queue'd messages first come first server to newly restarted consumers 2 &amp; 3.</p>\n\n<p>I need messages to first come first server regardless if consumers restart.</p>\n"}, {"tags": ["ruby", "reactjs", "heroku", "webpack", "deployment"], "comments": [{"owner": {"reputation": 592, "user_id": 2406586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4693b4eb39f13137c7687bdfee342fbe?s=128&d=identicon&r=PG", "display_name": "IT_puppet_master", "link": "https://stackoverflow.com/users/2406586/it-puppet-master"}, "edited": false, "score": 0, "creation_date": 1582752376, "post_id": 57281059, "comment_id": 106889915, "body": "Did you solve this? I have same issue"}, {"owner": {"reputation": 147, "user_id": 2090505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce07b3c2a35df3bfbf34e40b951c05d4?s=128&d=identicon&r=PG", "display_name": "Chris Hunter-Johnson", "link": "https://stackoverflow.com/users/2090505/chris-hunter-johnson"}, "reply_to_user": {"reputation": 592, "user_id": 2406586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4693b4eb39f13137c7687bdfee342fbe?s=128&d=identicon&r=PG", "display_name": "IT_puppet_master", "link": "https://stackoverflow.com/users/2406586/it-puppet-master"}, "edited": false, "score": 0, "creation_date": 1582843194, "post_id": 57281059, "comment_id": 106926678, "body": "Yes, the solution is to have react code within a client subdirectory of the RoR stack. The script section on package.json should have a commend to start the react app."}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 2090505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce07b3c2a35df3bfbf34e40b951c05d4?s=128&d=identicon&r=PG", "display_name": "Chris Hunter-Johnson", "link": "https://stackoverflow.com/users/2090505/chris-hunter-johnson"}, "is_accepted": false, "score": -1, "last_activity_date": 1564639048, "creation_date": 1564639048, "answer_id": 57302618, "question_id": 57281059, "link": "https://stackoverflow.com/questions/57281059/react-on-rails-with-webpack-on-heroku-css-not-used-works-on-local-deploymen/57302618#57302618", "title": "React on Rails with webpack on Heroku - CSS not used. - Works on local deployment", "body": "<p>Running yarn init seems to resolved most of the issues so the question has has changed to simply CSS not loading. Editing the question to reflect.</p>\n"}], "owner": {"reputation": 147, "user_id": 2090505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce07b3c2a35df3bfbf34e40b951c05d4?s=128&d=identicon&r=PG", "display_name": "Chris Hunter-Johnson", "link": "https://stackoverflow.com/users/2090505/chris-hunter-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1564653637, "creation_date": 1564527347, "last_edit_date": 1564653637, "question_id": 57281059, "link": "https://stackoverflow.com/questions/57281059/react-on-rails-with-webpack-on-heroku-css-not-used-works-on-local-deploymen", "title": "React on Rails with webpack on Heroku - CSS not used. - Works on local deployment", "body": "<p>I have an application that uses React as the front-end to rails on ruby. The React component is integrated to rails using webpack that now ships with rails.</p>\n\n<p>Versions: \nReact version 16.8\nruby-2.6.3\nrails - 5.2.3\nyarn v1.17.3</p>\n\n<p>React css is not used. This applies toi both default.css and from the PrimeReact package.</p>\n\n<p>The path locations are\napp\n  javascript\n    css  - For deafult css\n    img  - For back ground image referenced from css</p>\n\n<p>PrimeReact is loaded via package.json</p>\n\n<p>I have checked the cssLoader is in the dependencies and not devDependencies.</p>\n\n<p>Please let me know how to activate CSS on the Heroku site as it works fine on MacBook.</p>\n\n<p>Location of images\n app\n  javascript\n    img\n     park3.jpg</p>\n\n<p>package.json</p>\n\n<pre><code>{\n \"name\": \"community-aid\",\n \"private\": true,\n \"dependencies\": {\n \"@babel/core\": \"^7.0.0-0\",\n \"@babel/preset-react\": \"^7.0.0\",\n \"@fortawesome/fontawesome-svg-core\": \"^1.2.19\",\n \"@fortawesome/free-brands-svg-icons\": \"^5.9.0\",\n \"@fortawesome/free-regular-svg-icons\": \"^5.9.0\",\n \"@fortawesome/free-solid-svg-icons\": \"^5.9.0\",\n \"@fortawesome/react-fontawesome\": \"^0.1.4\",\n \"@rails/webpacker\": \"^4.0.7\",\n \"actioncable\": \"^5.2.3\",\n \"axios\": \"^0.19.0\",\n \"babel-plugin-transform-react-remove-prop-types\": \"^0.4.24\",\n \"bootstrap\": \"^4.3.1\",\n \"classnames\": \"^2.2.6\",\n \"core-js\": \"^3\",\n \"css-loader\": \"^2.1.1\",\n \"dotenv-webpack\": \"^1.7.0\",\n \"enzyme\": \"^3.10.0\",\n \"enzyme-adapter-react-16\": \"^1.14.0\",\n \"eslint\": \"^6.1.0\",\n \"file-loader\": \"^4.1.0\",\n \"final-form\": \"^4.18.2\",\n \"jquery\": \"^3.4.1\",\n \"moment\": \"^2.24.0\",\n \"popper.js\": \"^1.14.7\",\n \"primeicons\": \"^1.0.0\",\n \"primereact\": \"^3.1.7\",\n \"prop-types\": \"^15.7.2\",\n \"react\": \"^16.8.6\",\n \"react-bootstrap\": \"^1.0.0-beta.9\",\n \"react-dom\": \"^16.8.6\",\n \"react-file-reader\": \"^1.1.4\",\n \"react-file-reader-input\": \"^2.0.0\",\n \"react-final-form\": \"^6.3.0\",\n \"react-final-form-html5-validation\": \"^1.0.3\",\n \"react-moment\": \"^0.9.2\",\n \"react-router\": \"^5.0.1\",\n \"react-router-dom\": \"^5.0.1\",\n \"react-test-renderer\": \"^16.8.6\",\n \"react-transition-group\": \"^4.2.1\",\n \"resolve-url-loader\": \"^3.1.0\",\n \"store\": \"^2.0.12\",\n \"style-loader\": \"^0.23.1\",\n \"styled-components\": \"^4.3.2\",\n \"webpack\": \"^4.0.0\",\n \"webpack-cli\": \"^3.3.6\"\n},\n \"devDependencies\": {\n  \"babel-jest\": \"^24.8.0\",\n  \"babel-preset-es2015\": \"^6.24.1\",\n  \"jest\": \"^24.8.0\",\n  \"webpack-dev-server\": \"^3.7.2\"\n },\n\"jest\": {\n \"roots\": [\n   \"spec/javascript\"\n ],\n \"moduleDirectories\": [\n  \"node_modules\",\n  \"app/javascript\"\n]\n</code></pre>\n\n<p>}\n}</p>\n\n<p>When I logon the heroku hosted application it should look and behave the same as the site on my macbook</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "datetime", "types"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1564526454, "creation_date": 1564526454, "answer_id": 57280927, "question_id": 57280874, "link": "https://stackoverflow.com/questions/57280874/conversion-of-string-into-datetime-works-in-console-but-not-in-request-rails/57280927#57280927", "title": "Conversion of String into DateTime works in console but not in request (Rails)?", "body": "<p>There are over 600 elements in the returned JSON that doesn't have <code>end_date</code> or <code>start_date</code></p>\n\n<pre><code>response = HTTParty.get(\"https://data.cityofnewyork.us/resource/n4ac-3636.json\")\nresponse.find_all{|r| r['start_date'].nil? }.count\n# =&gt; 665\nresponse.find_all{|r| r['end_date'].nil? }.count\n# =&gt; 665\n</code></pre>\n\n<p>You need to handle those cases, e.g. by setting a default or by not parsing the date in this case:</p>\n\n<pre><code>  def parse_date(string)\n     return nil unless string\n     DateTime.parse(string)\n  end\n\n  result = response.map do |r| \n    created_date = parse_date(r['created_date'])\n    end_date = parse_date(r['end_date'])\n    # ...\n  end\n</code></pre>\n"}], "owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57280927, "answer_count": 1, "score": 1, "last_activity_date": 1564527552, "creation_date": 1564525983, "last_edit_date": 1564527552, "question_id": 57280874, "link": "https://stackoverflow.com/questions/57280874/conversion-of-string-into-datetime-works-in-console-but-not-in-request-rails", "title": "Conversion of String into DateTime works in console but not in request (Rails)?", "body": "<p>I'm building a wrapper from an API and if I convert a string to datetime using <code>DateTime.parse()</code>, it works fine when checking in console but not in a controller method index request. I get the classic 'no implicit conversion of nil into String datetime' error. </p>\n\n<p>Here's my code:</p>\n\n<pre><code>class SodaApi &lt; ApplicationRecord\n  include HTTParty \n\n  def self.opportunities_api \n    client = SODA::Client.new({:domain =&gt; \"data.cityofnewyork.us\", :app_token =&gt; \"&lt;my api key&gt;\"})\n    response = HTTParty.get(\"https://data.cityofnewyork.us/resource/n4ac-3636.json\") \n      result = response.map do |r| \n      created_date = DateTime.parse(r['created_date'])\n      end_date = DateTime.parse(r['end_date'])\n\n      ### I build my wrapper here ###\n    end\n  end \nend\n</code></pre>\n\n<p>in <code>rails c</code>, using <code>byebug</code>, I'm able to create a variable of <code>created_date</code> and convert from a string to <code>Datetime</code> no problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "bundler"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564528664, "post_id": 57280740, "comment_id": 101058577, "body": "Probably the same issue as <a href=\"https://stackoverflow.com/q/56793964/3784008\">here</a>. And if you&#39;re going to say &quot;I did what the logs say to do and it still happens&quot; then you should say in your post <b>exactly</b> what things you did to fix it and where you did those steps and <b>exactly</b> what the output of those things was especially when we&#39;re talking about a 242 line log. And keep your example code minimal; at least half your Gemfile is comments, whitespace, and environments not used by bundler."}, {"owner": {"reputation": 3292, "user_id": 4668975, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh4.googleusercontent.com/-CI_A3iBXjSY/AAAAAAAAAAI/AAAAAAAAAQc/adILxpm9VvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Souza", "link": "https://stackoverflow.com/users/4668975/jo%c3%a3o-souza"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564610486, "post_id": 57280740, "comment_id": 101092589, "body": "@anothermh Thank you for the suggestions. I updated the question accordingly. Unfortunately the thread you pointed isn&#39;t the solution, since BUNDLED_WITH is <a href=\"https://bundler.io/v2.0/guides/bundler_2_upgrade.html\" rel=\"nofollow noreferrer\">important information</a> and <a href=\"https://stackoverflow.com/questions/11134802/what-happens-when-modifying-gemfile-lock-directly\">editing Gemfile.lock is a known bad practice</a>."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 4650646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UbaGd.jpg?s=128&g=1", "display_name": "MUHAMMAD SOBAN", "link": "https://stackoverflow.com/users/4650646/muhammad-soban"}, "edited": false, "score": 1, "creation_date": 1564759036, "post_id": 57315921, "comment_id": 101148645, "body": "This can have negative impact on application as it will install those gems which are there without versions with latest versions.  best way is to just change bundler version in Gemile.lock in the end."}], "tags": [], "owner": {"reputation": 3292, "user_id": 4668975, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh4.googleusercontent.com/-CI_A3iBXjSY/AAAAAAAAAAI/AAAAAAAAAQc/adILxpm9VvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Souza", "link": "https://stackoverflow.com/users/4668975/jo%c3%a3o-souza"}, "is_accepted": false, "score": 0, "last_activity_date": 1564688079, "creation_date": 1564688079, "answer_id": 57315921, "question_id": 57280740, "link": "https://stackoverflow.com/questions/57280740/how-to-fix-activating-bundler-2-0-1-failed-in-heroku/57315921#57315921", "title": "How to fix &quot;Activating bundler (2.0.1) failed&quot; in Heroku?", "body": "<p>I found a solution by trial-and-error. I considered these lines from the build log:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> -----&gt; Installing dependencies using bundler 2.0.2\n [...]\n !     Activating bundler (2.0.1) failed:\n !     Could not find 'bundler' (2.0.1) required by your /tmp/build_19c87a31c0181b0ad80a21cb76d32d96/Gemfile.lock.\n</code></pre>\n\n<p>Heroku uses bundler 2.0.2 and I initially thought it would be able to install a 2.0.1 Gemfile.lock. Turns out it wasn't. I deleted the Gemfile.lock, installed bundler 2.0.2 and used it to bundle again:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>rm Gemfile.lock\ngem install bundler\nbundle --version # Make sure the output is 2.0.2\nbundle install\n</code></pre>\n\n<p>This regenerated Gemfile.lock now <code>BUNDLED WITH 2.0.2</code>, then I was able to deploy to Heroku successfully.</p>\n"}], "owner": {"reputation": 3292, "user_id": 4668975, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh4.googleusercontent.com/-CI_A3iBXjSY/AAAAAAAAAAI/AAAAAAAAAQc/adILxpm9VvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Souza", "link": "https://stackoverflow.com/users/4668975/jo%c3%a3o-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564688079, "creation_date": 1564525013, "last_edit_date": 1564609859, "question_id": 57280740, "link": "https://stackoverflow.com/questions/57280740/how-to-fix-activating-bundler-2-0-1-failed-in-heroku", "title": "How to fix &quot;Activating bundler (2.0.1) failed&quot; in Heroku?", "body": "<p>I'm trying to deploy a very basic Rails app to a brand new Heroku app. I connected the Heroku app to the GitHub repo and triggered the first deploy. Heroku can't build the app because \"Activating bundler (2.0.1) failed\".</p>\n\n<p>This is the build log with the error highlighted with <code>!</code> and some parts hidden for brevity <code>[...]</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-----&gt; Ruby app detected\n-----&gt; Compiling Ruby/Rails\n-----&gt; Using Ruby version: ruby-2.6.3\n-----&gt; Installing dependencies using bundler 2.0.2\n       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n       [...]\n       Bundle complete! 17 Gemfile dependencies, 59 gems now installed.\n       [...]\n       Bundle completed (47.25s)\n       Cleaning up the bundler cache.\n-----&gt; Installing node-v10.15.3-linux-x64\n-----&gt; Installing yarn-v1.16.0\n-----&gt; Detecting rake tasks\n !\n !     Could not detect rake tasks\n !     ensure you can run `$ bundle exec rake -P` against your app\n !     and using the production group of your Gemfile.\n !     Activating bundler (2.0.1) failed:\n !     Could not find 'bundler' (2.0.1) required by your /tmp/build_19c87a31c0181b0ad80a21cb76d32d96/Gemfile.lock.\n !     To update to the latest version installed on your system, run `bundle update --bundler`.\n !     To install the missing version, run `gem install bundler:2.0.1`\n !     Checked in 'GEM_PATH=/tmp/build_19c87a31c0181b0ad80a21cb76d32d96/vendor/bundle/ruby/2.6.0', execute `gem env` for more information\n !     \n !     To install the version of bundler this project requires, run `gem install bundler -v '2.0.1'`\n !\n       [...]\n !     Push rejected, failed to compile Ruby app.\n !     Push failed\n</code></pre>\n\n<p>I followed the instructions in the error message, but it didn't solve the problem:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> !     ensure you can run `$ bundle exec rake -P` against your app\n !     and using the production group of your Gemfile.\n\n$ bundle exec rake -P\n[...] # long output, but yes, I can run it.\n\n$ RAILS_ENV=production bundle exec rake -P\n[...] # long output, but again I can run it.\n\n !     Activating bundler (2.0.1) failed:\n !     Could not find 'bundler' (2.0.1) required by your /tmp/build_19c87a31c0181b0ad80a21cb76d32d96/Gemfile.lock.\n !     To update to the latest version installed on your system, run `bundle update --bundler`.\n !     To install the missing version, run `gem install bundler:2.0.1`\n\n# I'm already using bundler 2.0.1:\n$ bundler --version\nBundler version 2.0.1\n\n</code></pre>\n\n<p><a href=\"https://devcenter.heroku.com/changelog-items/1563\" rel=\"nofollow noreferrer\">Heroku says it supports bundler 2.X</a>:</p>\n\n<blockquote>\n  <p>The Ruby buildpack will now inspect the contents of the Gemfile.lock and use a version of bundler based on the BUNDLED WITH declaration.</p>\n</blockquote>\n\n<p>My Gemfile.lock specifies BUNDLED WITH 2.0.1:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>GEM\n  remote: https://rubygems.org/\n  specs: [...]\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  [...]\n\nRUBY VERSION\n   ruby 2.6.3p62\n\nBUNDLED WITH\n   2.0.1\n</code></pre>\n\n<p>What should I fix?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "edited": false, "score": 0, "creation_date": 1564526802, "post_id": 57280282, "comment_id": 101058137, "body": "Is the show action giving you the error or the index action?"}, {"owner": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "reply_to_user": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "edited": false, "score": 0, "creation_date": 1564527034, "post_id": 57280282, "comment_id": 101058206, "body": "It&#39;s the show action, which is weird. I checked rake routes and I don&#39;t have an index path, which I found a tad strange."}, {"owner": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "edited": false, "score": 0, "creation_date": 1564551366, "post_id": 57280282, "comment_id": 101062922, "body": "It is strange that it doesn&#39;t find an index path yes, I don&#39;t see any odd things. Do you add an id behind the fetch url like this: <a href=\"http://localhost:3000/api/v1/programs/1\" rel=\"nofollow noreferrer\">localhost:3000/api/v1/programs/1</a> for the show action?"}, {"owner": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "reply_to_user": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "edited": false, "score": 0, "creation_date": 1564598504, "post_id": 57280282, "comment_id": 101088243, "body": "I left an &#39;s&#39; off resources in my nested routes. @Changwoo Rhee had to point that out. Can&#39;t believe I spent 3hrs on that one! Lol"}, {"owner": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "edited": false, "score": 0, "creation_date": 1564599140, "post_id": 57280282, "comment_id": 101088540, "body": "Oh man, I also checked your routes file on github but didn&#39;t even spot that haha. Great that it&#39;s solved now!"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "edited": false, "score": 0, "creation_date": 1564525096, "post_id": 57280574, "comment_id": 101057710, "body": "Tried to add code but it came out jumbled. Here&#39;s a link to the file [link]<a href=\"https://github.com/koberlander/tv-list-backend/blob/master/config/routes.rb[link]\" rel=\"nofollow noreferrer\">github.com/koberlander/tv-list-backend/blob/master/con&zwnj;&#8203;fig/&hellip;</a>."}, {"owner": {"reputation": 96, "user_id": 1399891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e8249567a2c3af5b3d478a8e497c91?s=128&d=identicon&r=PG", "display_name": "Changwoo Rhee", "link": "https://stackoverflow.com/users/1399891/changwoo-rhee"}, "reply_to_user": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "edited": false, "score": 1, "creation_date": 1564552682, "post_id": 57280574, "comment_id": 101063365, "body": "&quot;resource&quot; is not equal &quot;resources&quot;"}, {"owner": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "edited": false, "score": 0, "creation_date": 1564598305, "post_id": 57280574, "comment_id": 101088143, "body": "I can&#39;t believe I left the &#39;s&#39; off of that! :facepalm:"}], "tags": [], "owner": {"reputation": 96, "user_id": 1399891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e8249567a2c3af5b3d478a8e497c91?s=128&d=identicon&r=PG", "display_name": "Changwoo Rhee", "link": "https://stackoverflow.com/users/1399891/changwoo-rhee"}, "is_accepted": true, "score": 2, "last_activity_date": 1564556688, "last_edit_date": 1564556688, "creation_date": 1564523860, "answer_id": 57280574, "question_id": 57280282, "link": "https://stackoverflow.com/questions/57280282/how-to-fix-rails-activerecordrecordnotfound-couldnt-find-program-without-an/57280574#57280574", "title": "How to fix Rails &#39;ActiveRecord::RecordNotFound (Couldn&#39;t find Program without an ID)&#39;", "body": "<p>I think your api/v1 url will be miss in routes.rb or something wrong. Can you show me your routes.rb file?</p>\n\n<blockquote>\n  <p>additionally\n  i have checked your source code in github \n  after you write comment to this answer\n  and I find wrong word\n  you have coding resource in routes.rb and it's wrong word</p>\n  \n  <p>you have to change <strong>resource</strong> to <strong>resources</strong> in config/routes.rb</p>\n  \n  <p>2.5 Singular Resources\n  Sometimes, you have a resource that clients always look up without referencing an ID. For example, you would like /profile to always show the profile of the currently logged in user. In this case, you can use a singular resource to map /profile (rather than /profile/:id) to the show action:</p>\n</blockquote>\n\n<p><a href=\"https://guides.rubyonrails.org/routing.html#singular-resources\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/routing.html#singular-resources</a></p>\n\n<p>I recommend you have to read rails guides\n<a href=\"https://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/</a></p>\n"}], "owner": {"reputation": 127, "user_id": 5476354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6LrBnu9MX_M/AAAAAAAAAAI/AAAAAAAAADQ/LmhVJYUGwSg/photo.jpg?sz=128", "display_name": "koberlander", "link": "https://stackoverflow.com/users/5476354/koberlander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 57280574, "answer_count": 1, "score": 1, "last_activity_date": 1564556688, "creation_date": 1564522233, "question_id": 57280282, "link": "https://stackoverflow.com/questions/57280282/how-to-fix-rails-activerecordrecordnotfound-couldnt-find-program-without-an", "title": "How to fix Rails &#39;ActiveRecord::RecordNotFound (Couldn&#39;t find Program without an ID)&#39;", "body": "<p>I am doing an initial test of my Rails API by performing a fetch to my backend and using console.log() to view the results in my browser console. My error appears when I make the request to my namespaced url to see a list of programs.</p>\n\n<p>I have checked the controller show method, as well as my routes and model. I know that it is returning html instead of JSON and that is why the fetch is breaking in part.</p>\n\n<p>App.js</p>\n\n<pre><code>componentDidMount(){\n    fetch('http://localhost:3000/api/v1/programs')\n    .then(res =&gt; res.json())\n    .then(json =&gt; console.log(json))\n</code></pre>\n\n<p>programs_controller.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Api::V1::ProgramsController &lt; ApplicationController\n  def index\n    @programs = Program.all\n    render json: @programs\n  end\n\n  def show\n    @program = Program.find(params[:id])\n    render json: @program\n  end\n\n  private\n\n  def program_params\n    params.require(:program).permit(:url, :name, :network, :image)\n  end\nend\n</code></pre>\n\n<p>I expected to see a list of 18 programs I placed in my seeds.rb file but I get the error from ActiveRecord that says 'Couldn't find Program without an ID'. I did try passing :id into the .permit() in my program_params method but had no luck there either.</p>\n"}, {"tags": ["arrays", "ruby", "hash", "printing", "puts"], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564549095, "post_id": 57280386, "comment_id": 101062208, "body": "Thank you very much for your answer. I have implemented what you suggested and, in fact, they are now printing in the same line. However, they are printing with some space between each other. You can see ir here: <a href=\"https://drive.google.com/file/d/1udhbQQMqJWs-S7Ze7-byZxdMKRwMJllc/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1udhbQQMqJWs-S7Ze7-byZxdMKRwMJllc/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564550291, "post_id": 57280386, "comment_id": 101062547, "body": "I don&#39;t know why are you getting that result. I used your data (<code>hash</code>) and my code to produce the desired result, which I show. First confirm that you are using the hash <code>hash</code> given in your question. If you haven&#39;t done so, cut-and-paste the expression <code>hash = { ... }</code>, then run the code."}, {"owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564550850, "post_id": 57280386, "comment_id": 101062723, "body": "Yes, I am using the exact same hash."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564553751, "post_id": 57280386, "comment_id": 101063792, "body": "When you execute <code>a1, a2 = hash.values.map { |s| s[1..-1].split(&quot;\\n&quot;) }</code> do you get the same return value as that shown in my answer? If you do, do you get the same return value as I show for <code>a1.zip(a1)</code>?"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1564523716, "last_edit_date": 1564523716, "creation_date": 1564522755, "answer_id": 57280386, "question_id": 57280164, "link": "https://stackoverflow.com/questions/57280164/printing-elements-of-array-in-one-line-in-ruby/57280386#57280386", "title": "Printing elements of array in one line in Ruby", "body": "<pre><code>a1, a2 = hash.values.map { |s| s[1..-1].split(\"\\n\") }\n  #=&gt; [[\"===\", \"@@@\", \"@ @\", \"@ @\", \"@ @\", \"@@@\", \"===\"],\n  #    [\"=\", \"@\", \"@\", \"@\", \"@\", \"@\", \"=\"]] \n</code></pre>\n\n<h1><p><p></h1>\n\n<pre><code>puts a1.zip(a1).map(&amp;:join)\n======\n@@@@@@\n@ @@ @\n@ @@ @\n@ @@ @\n@@@@@@\n======\n</code></pre>\n\n<h1><p><p></h1>\n\n<pre><code>puts a1.zip(a2).map(&amp;:join)\n====\n@@@@\n@ @@\n@ @@\n@ @@\n@@@@\n====\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>a1.zip(a1)\n  #=&gt; [[\"===\", \"===\"], [\"@@@\", \"@@@\"], [\"@ @\", \"@ @\"], [\"@ @\", \"@ @\"],\n  #    [\"@ @\", \"@ @\"], [\"@@@\", \"@@@\"], [\"===\", \"===\"]]\n\na1.zip(a2)\n  #=&gt; [[\"===\", \"=\"], [\"@@@\", \"@\"], [\"@ @\", \"@\"], [\"@ @\", \"@\"],\n  #    [\"@ @\", \"@\"], [\"@@@\", \"@\"], [\"===\", \"=\"]] \n</code></pre>\n\n<p><code>s[1..-1]</code>, which drops the first character of <code>hash[0]</code> and <code>hash[1]</code>, is needed because that character is a newline (<code>\"\\n\"</code>). Had the two lines <code>0 =&gt; \"</code> and <code>===</code> been written <code>0 =&gt;\"===</code> (similar for <code>hash[1]</code>), I could have written <code>s.split(\"\\n\")</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564529522, "post_id": 57280590, "comment_id": 101058731, "body": "Your answer seems to be the same as my earlier answer. Am I missing something?"}, {"owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564549115, "post_id": 57280590, "comment_id": 101062214, "body": "Thank you very much for your answer. I have implemented what you suggested and, in fact, they are now printing in the same line. However, they are printing with some space between each other. You can see ir here: <a href=\"https://drive.google.com/file/d/1udhbQQMqJWs-S7Ze7-byZxdMKRwMJllc/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1udhbQQMqJWs-S7Ze7-byZxdMKRwMJllc/&hellip;</a>"}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "reply_to_user": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564555639, "post_id": 57280590, "comment_id": 101064604, "body": "Hi @franciscofcosta, I realized that I found the same solution after I posted it. I think Cary and i have been typing our answers at the same time, he was simply faster :-).  I can&#39;t see where the spaces come from. For me <code>test1</code> looks like this: <code>[&quot;&quot;, &quot;======&quot;, &quot;@@@@@@&quot;, &quot;@ @@ @&quot;, &quot;@ @@ @&quot;, &quot;@ @@ @&quot;, &quot;@@@@@@&quot;, &quot;======&quot;]</code> (no spaces here), could you post your <code>test1.inspect</code> so we work backwards to find the issue?"}, {"owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564561193, "post_id": 57280590, "comment_id": 101067422, "body": "Hi @knugie, thanks for the reply. I just did <code>test1.inspect</code> and I get this: <code>[&quot;&quot;, &quot;    ===    ===&quot;, &quot;    @@@    @@@&quot;, &quot;    @ @    @ @&quot;, &quot;    @ @    @ @&quot;, &quot;    @ @    @ @&quot;, &quot;    @@@    @@@&quot;, &quot;    ===    ===&quot;]</code>. As you can see, it&#39;s not exactly the same as you have. I&#39;ve got spaces in the second and last elements of the array."}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 1, "creation_date": 1564604068, "post_id": 57280590, "comment_id": 101090478, "body": "I see what the issue is now. in your original post, the trailing spaces have been removed automatically. That&#39;s why Cary and I didn&#39;t see them. I see two sensible options of fixing that. First, remove the trailing white spaces in your original <code>hash</code> before processing it. And second, <code>strip</code> trailing whitespace of each line like so: <code>atomic = hash.values.map{ |e| e.split(&quot;\\n&quot;).map(&amp;:strip)}</code>. Does that help?"}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 0, "creation_date": 1564605548, "post_id": 57280590, "comment_id": 101090997, "body": "Because there are only trailing whitespaces but no leading ones, you could use <code>chomp</code> instead of <code>strip</code> - your choice."}, {"owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "edited": false, "score": 0, "creation_date": 1564648483, "post_id": 57280590, "comment_id": 101102681, "body": "Thank you! I was on my way to write the exact same thing. Thanks so much for your help! If I had more than 2 elements in the hash, would I be able to combine them the same way? Let&#39;s say if I had a <code>test3</code> that I would like to show up after <code>test2</code>?"}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "edited": false, "score": 0, "creation_date": 1564773124, "post_id": 57280590, "comment_id": 101154392, "body": "Yes, absolutely."}], "tags": [], "owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "is_accepted": true, "score": 3, "last_activity_date": 1564523971, "creation_date": 1564523971, "answer_id": 57280590, "question_id": 57280164, "link": "https://stackoverflow.com/questions/57280164/printing-elements-of-array-in-one-line-in-ruby/57280590#57280590", "title": "Printing elements of array in one line in Ruby", "body": "<p>You need to create a two-dimensional structure first to be able to get the wanted result.</p>\n\n<p>I suggest the following steps:</p>\n\n<ol>\n<li><p>Deconstruct the values in your <code>hash</code></p>\n\n<pre><code>atomic = hash.values.map{ |e| e.split(\"\\n\")}\n</code></pre>\n\n<p>This will give you</p>\n\n<pre><code>[[\"\",\n  \"===\",\n  \"@@@\",\n  \"@ @\",\n  \"@ @\",\n  \"@ @\",\n  \"@@@\",\n  \"===\"\n ], [\n  \"\",\n  \"=\",\n  \"@\",\n  \"@\",\n  \"@\",\n  \"@\",\n  \"@\",\n  \"=\"\n ]]\n</code></pre></li>\n<li><p>Use the new data structure to build the output you need</p>\n\n<p>first case:</p>\n\n<pre><code>test1 = atomic[0].zip(atomic[0]).map(&amp;:join)\nputs test1\n</code></pre>\n\n<p>=></p>\n\n<pre><code>======\n@@@@@@\n@ @@ @\n@ @@ @\n@ @@ @\n@@@@@@\n======\n</code></pre>\n\n<p>second case:</p>\n\n<pre><code>test2 = atomic[0].zip(atomic[1]).map(&amp;:join)\n</code></pre>\n\n<p>=></p>\n\n<pre><code>====\n@@@@\n@ @@\n@ @@\n@ @@\n@@@@\n====\n</code></pre></li>\n</ol>\n\n<p>I hope you find that helpful.</p>\n"}], "owner": {"reputation": 731, "user_id": 7170188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/710cf6e1876c352c31e53fe5a4986993?s=128&d=identicon&r=PG&f=1", "display_name": "franciscofcosta", "link": "https://stackoverflow.com/users/7170188/franciscofcosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 57280590, "answer_count": 2, "score": 2, "last_activity_date": 1564595964, "creation_date": 1564521448, "last_edit_date": 1564595964, "question_id": 57280164, "link": "https://stackoverflow.com/questions/57280164/printing-elements-of-array-in-one-line-in-ruby", "title": "Printing elements of array in one line in Ruby", "body": "<p>I have got the following Ruby hash: </p>\n\n<pre><code>hash = {\n0 =&gt; \"\n===\n@@@\n@ @\n@ @\n@ @\n@@@\n===\",\n1 =&gt; \"\n=\n@\n@\n@\n@\n@\n=\"}\n</code></pre>\n\n<p>I would like to print out some of the values of the hash in one line in the console.\nTo that effect, I have created an array with the elements I would like printed out:</p>\n\n<pre><code>test = [hash[0], hash[1]]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>test1 = [hash[0], hash[0]]\n</code></pre>\n\n<p>In case I want to print <code>test1</code> to the console, the result should be the following:</p>\n\n<pre><code>======\n@@@@@@\n@ @@ @\n@ @@ @\n@ @@ @\n@@@@@@\n======\n</code></pre>\n\n<p>In case I want to print `test2 to the console, the result should be:</p>\n\n<pre><code>====\n@@@@\n@ @@\n@ @@\n@ @@\n@@@@\n====\n</code></pre>\n\n<p>However, when I use <code>puts</code> or <code>print</code>, the result is always that one is printed after another and not in the same line.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1564527316, "post_id": 57280075, "comment_id": 101058275, "body": "A quartet of small points: 1. When referring to Ruby objects, show them as such (you need quotes around your strings); 2. Always make it clear whether you wish to modify, or <i>mutate</i>, the original object (here a string) or to create and return a new object and not mutate the original object (&quot;becomes&quot; is vague); 3. It&#39;s more accurate to say &quot;a string of <i>digits</i>&quot;; and 4) you can set off the strings, as you would code, by enclosing them in backticks."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564551083, "post_id": 57280075, "comment_id": 101062800, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 4, "last_activity_date": 1564522197, "last_edit_date": 1564522197, "creation_date": 1564521224, "answer_id": 57280117, "question_id": 57280075, "link": "https://stackoverflow.com/questions/57280075/switch-every-pair-of-characters-in-a-string-in-ruby/57280117#57280117", "title": "Switch every pair of characters in a string in Ruby", "body": "<p>You can:</p>\n\n<ul>\n<li>Get every character from the string as an array.</li>\n<li>Take each pair of elements inside.</li>\n<li>Swap/Reverse them (as they're just two).</li>\n<li>Join the result.</li>\n</ul>\n\n<p>\n\n<pre><code>'07917142299099F0'\n  .chars               #\u00a0[\"0\", \"7\", \"9\", \"1\", \"7\", \"1\", \"4\", \"2\", \"2\", \"9\", \"9\", \"0\", \"9\", \"9\", \"F\", \"0\"]\n  .each_slice(2)       #&lt;Enumerator: [\"0\", \"7\", \"9\", \"1\", \"7\", \"1\", \"4\", \"2\", \"2\", \"9\", \"9\", \"0\", \"9\", \"9\", \"F\", \"0\"]:each_slice(2)&gt;\n  .flat_map(&amp;:reverse) # [\"7\", \"0\", \"1\", \"9\", \"1\", \"7\", \"2\", \"4\", \"9\", \"2\", \"0\", \"9\", \"9\", \"9\", \"0\", \"F\"]\n  .join                # \"701917249209990F\"\n</code></pre>\n\n<p>Other way:</p>\n\n<pre><code>p str.gsub(/(.{2})/) { Regexp.last_match.to_s.reverse } # \"701917249209990F\"\n</code></pre>\n\n<hr>\n\n<p>Notice this might not work as expected with an odd number of elements in the string.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1564524633, "post_id": 57280524, "comment_id": 101057584, "body": "...or <code>str.gsub(&#47;..&#47;, &amp;:reverse)</code>. Both of these work regardless of whether the string has an even or odd number of characters, in the latter case assuming that the last character is to remain. I prefer my regex, but only because I don&#39;t like the way yours is looking at me."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 5, "last_activity_date": 1564523575, "creation_date": 1564523575, "answer_id": 57280524, "question_id": 57280075, "link": "https://stackoverflow.com/questions/57280075/switch-every-pair-of-characters-in-a-string-in-ruby/57280524#57280524", "title": "Switch every pair of characters in a string in Ruby", "body": "<p>You can use substitution with regex:</p>\n\n<pre><code>str.gsub(/(.)(.)/, '\\2\\1')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564526888, "last_edit_date": 1564526888, "creation_date": 1564526201, "answer_id": 57280907, "question_id": 57280075, "link": "https://stackoverflow.com/questions/57280075/switch-every-pair-of-characters-in-a-string-in-ruby/57280907#57280907", "title": "Switch every pair of characters in a string in Ruby", "body": "<p>Though I prefer @Sagar's solution, for the sake of variety here's another.</p>\n\n<pre><code>def reverse_each_pair(str)\n  nbr_even_chars = 2*(str.size/2)\n  nbr_even_chars.times.with_object('') do |i,s|\n    s[i] = str[i.odd? ? (i-1) : i+1]\n  end &lt;&lt; str[-1, str.size-nbr_even_chars]\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>reverse_each_pair '07917142299099F0'\n  #=&gt; \"701917249209990F\" \nreverse_each_pair '07917142299099F'\n  #=&gt; \"70191724920999F\" \n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1564541536, "creation_date": 1564520974, "question_id": 57280075, "link": "https://stackoverflow.com/questions/57280075/switch-every-pair-of-characters-in-a-string-in-ruby", "title": "Switch every pair of characters in a string in Ruby", "body": "<p>I have a string of numbers 07917142299099F0 and I want to swap every pair of characters. So the string becomes 701917249209990F. I haven't really used Ruby, so I'm not really sure if this is possible. Thanks! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "webpack", "redux"], "comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1564534501, "post_id": 57279431, "comment_id": 101059581, "body": "This looks like the error output.  On its own, it&#39;s impossible for us to determine what&#39;s wrong.  Post your source, preferably a reduced to the minimum needed to reproduce the error.  That&#39;ll let us help you get this sorted out."}, {"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "reply_to_user": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1564599168, "post_id": 57279431, "comment_id": 101088553, "body": "Hi, I was able to fix the problem with GProst&#39;s help. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564518778, "post_id": 57279561, "comment_id": 101055720, "body": "I tried it and this is what I got:  RAILS_ENV=production bin/bundle exec rake assets:precompile yarn install v1.17.3 [1/4] Resolving packages... success Already up-to-date. Done in 0.41s. Compiling\u2026 Compilation failed:"}, {"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564521121, "post_id": 57279561, "comment_id": 101056491, "body": "Thanks! with your advice, I was able to get assets to precompile locally and I get a warning message regarding exceeding asset/entry point size limit. I tried deploying on heroku again but it fails to compile there."}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "reply_to_user": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564522512, "post_id": 57279561, "comment_id": 101056939, "body": "Then don&#39;t compile it there but instead deploy compiled assets directly"}, {"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564524679, "post_id": 57279561, "comment_id": 101057592, "body": "It finally deployed to heroku successfully but still experiencing errors. Now I am getting   ActionView::Template::Error (Webpacker can&#39;t find application in /app/public/packs/manifest.json"}, {"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564524976, "post_id": 57279561, "comment_id": 101057671, "body": "I added public/assets to git and deployed it, which contains a manifest.json prefixed with sprockets, and I can see application.js in it..."}, {"owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "edited": false, "score": 0, "creation_date": 1564525457, "post_id": 57279561, "comment_id": 101057828, "body": "I renamed that file to manifest.json and everything works now but that&#39;s obviously not the best way to solve this problem. Thank you for all your help!!"}], "tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 3, "last_activity_date": 1564519052, "last_edit_date": 1564519052, "creation_date": 1564518467, "answer_id": 57279561, "question_id": 57279431, "link": "https://stackoverflow.com/questions/57279431/failure-to-precompile-assets-for-production-rails-webpacker-react-redux/57279561#57279561", "title": "Failure to precompile assets for production - rails/webpacker/react/redux", "body": "<p>Try to run <code>RAILS_ENV=production bin/bundle exec rake assets:precompile</code> on your <strong>local</strong> machine. If it works for you locally then most likely the compilation fails due to the lack of memory on your Heroku instance.\nIn that case, you could, for example, compile those assets for production on some machine with a relatively big amount of memory end then simply deploy the compiled files to Heroku server</p>\n\n<p>Also, try setting <code>webpack_compile_output: true</code> in <code>webpacker.yml</code> to be able to see detailed info</p>\n"}], "owner": {"reputation": 31, "user_id": 11860525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0d5de474f25a1427b76e7c6c53d341?s=128&d=identicon&r=PG&f=1", "display_name": "toekneeyou", "link": "https://stackoverflow.com/users/11860525/toekneeyou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564519052, "creation_date": 1564517894, "question_id": 57279431, "link": "https://stackoverflow.com/questions/57279431/failure-to-precompile-assets-for-production-rails-webpacker-react-redux", "title": "Failure to precompile assets for production - rails/webpacker/react/redux", "body": "<p>I am new to web development and I've been working on this website using rails/webpacker/react/redux. I am trying to deploy a website on heroku but am unable to precompile assets for production. I am not sure where to start looking... any help would be greatly appreciated!</p>\n\n<pre><code>-----&gt; Preparing app for Rails asset pipeline\n       Running: rake assets:precompile\n       yarn install v1.16.0\n       [1/4] Resolving packages...\n       [2/4] Fetching packages...\n       info fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\n       info \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n       [3/4] Linking dependencies...\n       warning \" &gt; @babel/preset-react@7.0.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \"@babel/preset-react &gt; @babel/plugin-transform-react-display-name@7.2.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \"@babel/preset-react &gt; @babel/plugin-transform-react-jsx@7.3.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \"@babel/preset-react &gt; @babel/plugin-transform-react-jsx-self@7.2.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \"@babel/preset-react &gt; @babel/plugin-transform-react-jsx-source@7.5.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \"@babel/preset-react &gt; @babel/plugin-transform-react-jsx &gt; @babel/plugin-syntax-jsx@7.2.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\n       warning \" &gt; react-addons-css-transition-group@15.6.2\" has incorrect peer dependency \"react@^15.4.2\".\n       warning \" &gt; webpack-dev-server@3.7.2\" has unmet peer dependency \"webpack@^4.0.0\".\n       warning \"webpack-dev-server &gt; webpack-dev-middleware@3.7.0\" has unmet peer dependency \"webpack@^4.0.0\".\n       [4/4] Building fresh packages...\n       Done in 25.09s.\n       I, [2019-07-30T19:26:51.897956 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-c563adbadc5eafb6708b610268fbd393d59ae41e220aae5aac99ca2d45a6e151.eot\n       I, [2019-07-30T19:26:51.898552 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-c563adbadc5eafb6708b610268fbd393d59ae41e220aae5aac99ca2d45a6e151.eot.gz\n       I, [2019-07-30T19:26:51.902918 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-6e70525bb429041c5ec84a81cf4733303cee90966809ed255741fa50e123ae47.eot\n       I, [2019-07-30T19:26:51.903545 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-6e70525bb429041c5ec84a81cf4733303cee90966809ed255741fa50e123ae47.eot.gz\n       I, [2019-07-30T19:26:51.910497 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-c141af323058f12f8b0bc760162f9928f6a415fa04940b486fdb4086284e6ecf.eot\n       I, [2019-07-30T19:26:51.911418 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-c141af323058f12f8b0bc760162f9928f6a415fa04940b486fdb4086284e6ecf.eot.gz\n       I, [2019-07-30T19:26:51.925980 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-f6ae6226846422df4abf64b65814d3ccd3570af5e0350983fdb01fbc0dd055d6.svg\n       I, [2019-07-30T19:26:51.927785 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-f6ae6226846422df4abf64b65814d3ccd3570af5e0350983fdb01fbc0dd055d6.svg.gz\n       I, [2019-07-30T19:26:51.934279 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-a849aa4ab8a20512c2e073ed66cf146c5615220c74da85c10909eb2c33d3317a.svg\n       I, [2019-07-30T19:26:51.935238 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-a849aa4ab8a20512c2e073ed66cf146c5615220c74da85c10909eb2c33d3317a.svg.gz\n       I, [2019-07-30T19:26:51.954168 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-7ad9caabf64ee35d113612f7bb10e531fb17ab431a51e0b088e93f89e1915549.svg\n       I, [2019-07-30T19:26:51.955542 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-7ad9caabf64ee35d113612f7bb10e531fb17ab431a51e0b088e93f89e1915549.svg.gz\n       I, [2019-07-30T19:26:51.961066 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-3b3fbc59f287f33a3870175b19eb94d7cbb546af2fdbab29df91ba834352d3ea.ttf\n       I, [2019-07-30T19:26:51.971472 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-3b3fbc59f287f33a3870175b19eb94d7cbb546af2fdbab29df91ba834352d3ea.ttf.gz\n       I, [2019-07-30T19:26:51.985214 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-418571014c9250c6197fc3ac4e8e5d96d7a49711a5d6308ca0d36b6f3045c611.ttf\n       I, [2019-07-30T19:26:51.985645 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-418571014c9250c6197fc3ac4e8e5d96d7a49711a5d6308ca0d36b6f3045c611.ttf.gz\n       I, [2019-07-30T19:26:51.992705 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-cef5dd667be89aa0b9d1bd0a2ceb7c017c7b183f81d0213f8f99bd380f042577.ttf\n       I, [2019-07-30T19:26:51.993679 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-cef5dd667be89aa0b9d1bd0a2ceb7c017c7b183f81d0213f8f99bd380f042577.ttf.gz\n       I, [2019-07-30T19:26:52.002024 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-ca734c792a24c20ff91ec878fd146b3354d4859f728f481c1089a3e2ffa2d30f.woff\n       I, [2019-07-30T19:26:52.013422 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-9064839b35308c034ecf20f0335ea37331328d962baff8e589e69d01f5a56ffe.woff\n       I, [2019-07-30T19:26:52.022468 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-1675e164e5ec88e30fb8c912cf9343c06c18fe419663b40de0a3bf92371b1d07.woff\n       I, [2019-07-30T19:26:52.026327 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-brands-400-c885e9f2017a2ed7075db9e876d40a04aa3208114443803bdb120a34afd3b1d6.woff2\n       I, [2019-07-30T19:26:52.030745 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-regular-400-e5c1d9e7bdeaf3372dee724d175d25aca879ed52ae9afd018f503e9d74e09b50.woff2\n       I, [2019-07-30T19:26:52.046853 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/font-awesome/fa-solid-900-08aa3a5ee68a21d5771a70b20495b6da1c0f996c46982cd1b0447ad2db730d11.woff2\n       I, [2019-07-30T19:26:52.051358 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/logo-7503965f57527ed84af8d8e378fbd4eac363d7c2957087df25708a271702bb5f.png\n       I, [2019-07-30T19:26:53.190381 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/application-c0f898962791bbeb2c3d9ecc3d06f92712a9140ac95df7a5df1e49734a84f0ec.js\n       I, [2019-07-30T19:26:53.190749 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/application-c0f898962791bbeb2c3d9ecc3d06f92712a9140ac95df7a5df1e49734a84f0ec.js.gz\n       I, [2019-07-30T19:26:53.193892 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/README-b1a3cc3c48f8a1a0f33b1e796b0c673ecca067c6ce0478a2e6b7743a82aaf644.md\n       I, [2019-07-30T19:26:54.955033 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/application-914724c57f90c908409a2348534a1b490dd732192748c57379b6a5e198833283.css\n       I, [2019-07-30T19:26:54.955212 #1773]  INFO -- : Writing /tmp/build_dffa9f95caf630c57973decfff8e4f94/public/assets/application-914724c57f90c908409a2348534a1b490dd732192748c57379b6a5e198833283.css.gz\n       Compiling\u2026\n       Compilation failed:\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1564517635, "post_id": 57279141, "comment_id": 101055296, "body": "Does <code>out.map(&amp;:split).select {|_,v| v.to_f &gt; 90}</code> work for you?"}, {"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564518041, "post_id": 57279141, "comment_id": 101055473, "body": "Thank you @engineersmnky , that narrows it down to this output ,  SYSTEM 98.46 SYSAUX 95.15"}, {"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564518277, "post_id": 57279141, "comment_id": 101055559, "body": "@engineersmnky , after the output , i added a line to check if the value is above 90 it should send a critical message, but im getting this error     if val &gt; 90 puts &quot;criticial&quot; end:q1"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564518340, "post_id": 57279141, "comment_id": 101055573, "body": "The result of what I provided is the tables above 90 just display the message unless that result is <code>empty?</code>"}, {"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564518493, "post_id": 57279141, "comment_id": 101055617, "body": "@engineersmnky the result is perfect, i wanted to use the output of the result and then add an If statement and send a message, which im running into error, I have added in the update now"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564518603, "post_id": 57279141, "comment_id": 101055655, "body": "<code>v.to_f &gt; 90</code> is your &quot;if statement&quot;"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1564519864, "post_id": 57279141, "comment_id": 101056088, "body": "Note, you can use the <a href=\"https://www.rubydoc.info/github/kubo/ruby-oci8\" rel=\"nofollow noreferrer\">ruby-oci8</a> gem to connect to Oracle. Much simpler than via the <code>sqlplus</code> command line. No need to parse the output."}, {"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1564520180, "post_id": 57279141, "comment_id": 101056226, "body": "@Schwern thank you , i did try writing in OCI8 , it is indeed easier and faster but due to some restriction  in our environment we had  to avoid OCI8 and write this way"}], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "edited": false, "score": 0, "creation_date": 1564597409, "post_id": 57280296, "comment_id": 101087755, "body": "Thank you @schwern that works, one more thing i wanted to check is that, how can I also display the variable eg : system : 98.46  also in the last puts statment which is above 90 ? does &quot;  puts v &quot; work ? or"}, {"owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "edited": false, "score": 0, "creation_date": 1564597692, "post_id": 57280296, "comment_id": 101087881, "body": "also i ran into errors when iwanted to give a clause in between v &gt;80 &amp; v&lt;90 , may be im mnissing the syntax"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "edited": false, "score": 0, "creation_date": 1564614075, "post_id": 57280296, "comment_id": 101093377, "body": "@anudeepks <code>stats</code> is a Hash of key/value pairs. <code>stats[&quot;SYSTEM&quot;]</code> will give you the value 98.46. Logical and in Ruby is <code>&amp;&amp;</code> so <code>80 &lt; v &amp;&amp; v &lt; 90</code>. Or you can use a <a href=\"https://ruby-doc.org/core-2.5.1/Range.html#method-i-include-3F\" rel=\"nofollow noreferrer\">Range</a>, <code>(80..90).include?(v)</code>. This is basic Ruby syntax, I recommend you review the basics like <a href=\"https://ruby-doc.com/docs/ProgrammingRuby/\" rel=\"nofollow noreferrer\">Programming Ruby</a> and <a href=\"https://learnrubythehardway.org/book/\" rel=\"nofollow noreferrer\">Learn Ruby The Hard Way</a>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1564522289, "creation_date": 1564522289, "answer_id": 57280296, "question_id": 57279141, "link": "https://stackoverflow.com/questions/57279141/ruby-command-to-split-the-output-and-check-for-a-condition/57280296#57280296", "title": "ruby command to split the output and check for a condition", "body": "<p>Once we have the output from the query, this is a straightforward parsing problem.</p>\n\n<p>Here I've simulated the output using a string, <a href=\"https://ruby-doc.org/core/IO.html#method-i-each_line\" rel=\"nofollow noreferrer\"><code>stdout.each_line</code></a> works just as well.</p>\n\n<pre><code>output = %q[TABLESPACE_NAME          PERCENTAGE_USED\n------------------------------ ---------------\nSYSTEM           98.46\nSYSAUX           95.15\nUSERS           9.32\nUNDOTBS1           3.5\nUNDOTBS2          2.93\nTEMP\n]\n\n# Skip the first two header lines and get an iterator for the rest.\niter = output.each_line.drop(2)\n\n# Iterate through each line with a hash to collect all the stats.\nstats = iter.each_with_object({}) { |line,hash|\n  # Split the line on whitespace.\n  line.split(/\\s+/, 2).each_slice(2) { |k,v|\n    # Store the key/value pair after stripping the newline and converting to a Float\n    hash[k] = v.chomp.to_f\n  }\n}\n\n# Now do whatever you want with the resulting Hash of stats.\n# {\"SYSTEM\"=&gt;98.46, \"SYSAUX\"=&gt;95.15, \"USERS\"=&gt;9.32, \"UNDOTBS1\"=&gt;3.5, \"UNDOTBS2\"=&gt;2.93, \"TEMP\"=&gt;0.0}\n\nputs \"Running out of space\" if stats.any? { |_,v| v &gt; 90 }\n</code></pre>\n\n<p>You can find most of the methods I used in the <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-drop_while\" rel=\"nofollow noreferrer\">Enumerable module</a>.</p>\n"}], "owner": {"reputation": 1028, "user_id": 4048922, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/S0gYX.jpg?s=128&g=1", "display_name": "anudeepks", "link": "https://stackoverflow.com/users/4048922/anudeepks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57280296, "answer_count": 1, "score": 0, "last_activity_date": 1564522289, "creation_date": 1564516498, "last_edit_date": 1564518442, "question_id": 57279141, "link": "https://stackoverflow.com/questions/57279141/ruby-command-to-split-the-output-and-check-for-a-condition", "title": "ruby command to split the output and check for a condition", "body": "<p>I have written a ruby script to connect to oracle database and it gets the output in the format below, I want to know how to split the output and check for condition (IF split.value>90) when the table space size is above 90% \nthen display critical message   </p>\n\n<pre><code>  def exec_query\n  stdin, stdout, stderr  = Open3.popen3(\"sqlplus -S  user/pwd@dbname\")\n  stdin.puts \"tablespace script query here;\"\n  stdin.close\n  puts \"query executd\"\n  out = []\n  until stdout.eof? do\n  -- added code val=out.map(&amp;:split).select {|_,v| v.to_f &gt; 90}\n  tmp = stdout.gets.chomp.strip\n  puts tmp\n  out.push tmp unless tmp.empty?\n  end\n\n  -- added code edit 2\n  if val &gt; 90\n  puts \"criticial\"\n  end:q1\n\n  stdout.close\n  stderr.close\n</code></pre>\n\n<p>Output </p>\n\n<pre><code>TABLESPACE_NAME          PERCENTAGE_USED\n------------------------------ ---------------\nSYSTEM           98.46\nSYSAUX           95.15\nUSERS           9.32\nUNDOTBS1           3.5\nUNDOTBS2          2.93\nTEMP\n</code></pre>\n\n<p>Edit 1:</p>\n\n<p>after the output , i added a line to check if the value is above 90 it should send a critical message, but im getting this error </p>\n\n<pre><code>if val &gt; 90\nputs \"criticial\"\nend:q1\n</code></pre>\n\n<p>Error Message</p>\n\n<pre><code>    test3.rb:34:in `exec_query': undefined method `&gt;' for [[\"SYSTEM\",     \"98.46\"],    [.    \"SYSAUX\", \"95.15\"]]:Array (NoMethodError)\nfrom test3.rb:41:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1564514530, "post_id": 57278711, "comment_id": 101054040, "body": "Put some parentheses in. <code>puts(&quot;lower&quot;)</code>. Also you&#39;re missing a quote."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1564514551, "post_id": 57278711, "comment_id": 101054047, "body": "You missed a double quote in <code>higher</code>."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564514988, "post_id": 57278711, "comment_id": 101054224, "body": "@SergioTulentsev @Sebastian Palma Even with  <code>array.each {|x| x &gt; 2 ? puts(&quot;lower)&quot; : puts(&quot;higher&quot;)}</code>, it doesn&#39;t work. Fixed the double quotation marks"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1564515033, "post_id": 57278711, "comment_id": 101054246, "body": "@the12: because you messed up this one too. Look at it closely :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564515148, "post_id": 57278711, "comment_id": 101054291, "body": "Quotes go inside the brackets. Close enough, unfortunately, does not count."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564515163, "post_id": 57278711, "comment_id": 101054300, "body": "@SergioTulentsev <code>array.each {|x| x &gt; 2 ? puts(&quot;lower&quot;) : puts(&quot;higher&quot;)} still doesn&#39;t work.</code> Lol apologize for the mistake before, and I believe this one is correct!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564515197, "post_id": 57278711, "comment_id": 101054310, "body": "@the12 It does work. Try in a new IRB session (or whatever you use to run this)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1564515241, "post_id": 57278711, "comment_id": 101054329, "body": "As a note, the single most frustrating phrase to hear on Stack Overflow is &quot;doesn&#39;t work&quot;. Instead tell us the precise error you got, or describe what happened. &quot;Doesn&#39;t work&quot; could mean &quot;I got a huge stack trace I don&#39;t understand&quot; or it could mean &quot;no output&quot;. Being overly specific is usually better than being irritatingly vague."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564515292, "post_id": 57278711, "comment_id": 101054347, "body": "@tadman Yeah normally I&#39;d post an error, but there was no error, just an incomplete line, like I mentioned previously."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564515315, "post_id": 57278711, "comment_id": 101054361, "body": "@Sergio Tulensev Ok thanks for your help!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564515345, "post_id": 57278711, "comment_id": 101054372, "body": "It might be subtle but <code>irb</code> usually indicates what sort of character it&#39;s looking for, be it a closing quotation mark or bracket."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564515420, "post_id": 57278711, "comment_id": 101054408, "body": "@SergioTulentsev Why do you need brackets though for <code>puts</code> in this case? I&#39;m using this as an approximation  for another problem I&#39;m trying to solve."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1564515509, "post_id": 57278711, "comment_id": 101054445, "body": "@the12 have you seen tadman&#39;s answer?"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564523009, "post_id": 57278851, "comment_id": 101057110, "body": "I get the feeling that every single question on <a href=\"https://stackoverflow.com\">Stack Overflow</a> about the conditional operator in Ruby can be answered with (one of) my personal pet peeve rant(s): there is absolutely no reason whatsoever in Ruby to use the conditional operator instead of the conditional expression. The conditional operator is required in C, because the conditional statement is, well, a statement, and the conditional operator is an expression. But in Ruby, the conditional expression is already an expression (duh!), so there is simply no need for the conditional operator."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1564523058, "post_id": 57278851, "comment_id": 101057124, "body": "<code>array.each {|x| if x &gt; 2 then puts &quot;lower&quot; else puts &quot;higher&quot; end}</code> works exactly as the OP expects."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564523161, "post_id": 57278851, "comment_id": 101057160, "body": "@J&#246;rgWMittag People love the ternary operator because they come from languages like C or JavaScript where <code>if</code> doesn&#39;t have the same flexibility. Personally I try to avoid the ternary operator in every situation where it can be replaced by an <code>if</code> or some kind of guard condition, but 1% of the time it&#39;s the least ugly option. When I was primarily using Perl I&#39;d use them a lot because in the land of untamed regular expressions and gnarly syntax full of symbols, the ternary operator is the least confusing part of your code."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1564522324, "last_edit_date": 1564522324, "creation_date": 1564515087, "answer_id": 57278851, "question_id": 57278711, "link": "https://stackoverflow.com/questions/57278711/in-ruby-why-doesnt-ternary-operator-work-when-using-a-puts-function-inside-an/57278851#57278851", "title": "In Ruby, why doesn&#39;t ternary operator work when using a puts function inside an each statement?", "body": "<p>This is caused by ambiguous arguments. Ruby, unlike many other languages such as JavaScript, is really lax about requiring brackets <code>puts x</code> and <code>puts(x)</code> are equivalent. Where this breaks down is when it's not clear which are arguments, and which are part of other syntax.</p>\n\n<p>For example, if <code>f</code> is a method that takes 1-3 arguments and <code>x</code> and <code>y</code> are variables, then what is the meaning of:</p>\n\n<pre><code>f x, f x, y\n</code></pre>\n\n<p>Is that <code>f(x, f(x,y))</code>, <code>f(x), f(x), y</code> or <code>f(x, f(x), y)</code>? Ruby throws an error rather than presume the wrong thing.</p>\n\n<p>Easy fix is to eliminate the duplication of effort here and use a single <code>puts</code> with a ternary used to determine the value:</p>\n\n<pre><code>array = [1,2,3]\narray.each { |x| puts x &gt; 2 ? \"lower\" : \"higher\"}\n</code></pre>\n\n<p>Now it works because there's no ambiguity on arguments, there's only one method call so it's easy.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1564526657, "creation_date": 1564526657, "answer_id": 57280962, "question_id": 57278711, "link": "https://stackoverflow.com/questions/57278711/in-ruby-why-doesnt-ternary-operator-work-when-using-a-puts-function-inside-an/57280962#57280962", "title": "In Ruby, why doesn&#39;t ternary operator work when using a puts function inside an each statement?", "body": "<p>The previous answer explains clearly what is happening.  However you may note that this syntax will also work, but here you are duplicating the method call on both sides of the ternary operator: </p>\n\n<pre><code>array.each {|x| x &gt; 2 ? (puts \"lower\") : (puts \"higher\")}\n</code></pre>\n\n<p>By wrapping the duplicate method call on both sides, that code is executed on both sides.  But it definitely is better style to do it the more correct way where you are passing the result of ternary to puts</p>\n\n<pre><code>array.each { |x| puts x &gt; 2 ? \"lower\" : \"higher\"}\n</code></pre>\n\n<p>which is the same as:</p>\n\n<pre><code>array.each { |x| puts (x &gt; 2 ? \"lower\" : \"higher\") }\n</code></pre>\n\n<p>The <code>puts</code> method takes a single string argument and that's what we are passing it.</p>\n"}], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 57278851, "answer_count": 2, "score": 1, "last_activity_date": 1564526657, "creation_date": 1564514429, "last_edit_date": 1564515845, "question_id": 57278711, "link": "https://stackoverflow.com/questions/57278711/in-ruby-why-doesnt-ternary-operator-work-when-using-a-puts-function-inside-an", "title": "In Ruby, why doesn&#39;t ternary operator work when using a puts function inside an each statement?", "body": "<p>Given that you write the code on IRB: </p>\n\n<pre><code>array = [1,2,3]\narray.each {|x| x &gt; 2 ? puts \"lower\" : puts \"higher\"}\n</code></pre>\n\n<p>The program doesn't execute the line and it somehow according to the program is an incomplete line. Any help would be appreciated. </p>\n"}, {"tags": ["html", "ruby", "forms"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 11604669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nUn6Vjvj8mc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG6n_9NfbomnKqJwn0m_cvFSDoeQ/mo/photo.jpg?sz=128", "display_name": "Gerold Astor", "link": "https://stackoverflow.com/users/11604669/gerold-astor"}, "is_accepted": true, "score": 1, "last_activity_date": 1564514295, "creation_date": 1564514295, "answer_id": 57278680, "question_id": 57278419, "link": "https://stackoverflow.com/questions/57278419/form-selecting-from-array/57278680#57278680", "title": "Form selecting from array", "body": "<p>I think you could do something like this</p>\n\n\n\n<p>You can change the .name to .date or .whateveryouwant</p>\n"}, {"tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 1, "last_activity_date": 1564520939, "last_edit_date": 1564520939, "creation_date": 1564520632, "answer_id": 57280006, "question_id": 57278419, "link": "https://stackoverflow.com/questions/57278419/form-selecting-from-array/57280006#57280006", "title": "Form selecting from array", "body": "<p>You can just pass this array as a second argument to <code>f.select</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= f.select :nealname, @outstandings %&gt;\n</code></pre>\n\n<p>Or if you want to extend some static values with dynamic ones you can do it like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= f.select :nealname, ['One Time','As Needed', 'Quarterly', 'Yearly', *@outstandings] %&gt;\n</code></pre>\n\n<p>Note, in the second example you can move <code>*@outstandings</code> to the beginning of an array or between of any of the static values.</p>\n"}], "owner": {"reputation": 23, "user_id": 11860261, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pLFpXISua1Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQCnRj5dM42oVGheOzDYKYwFAv4w/photo.jpg?sz=128", "display_name": "Joe Chan", "link": "https://stackoverflow.com/users/11860261/joe-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57278680, "answer_count": 2, "score": 2, "last_activity_date": 1564520939, "creation_date": 1564513115, "question_id": 57278419, "link": "https://stackoverflow.com/questions/57278419/form-selecting-from-array", "title": "Form selecting from array", "body": "<p>How do I input values from an array instead of typing them into the f.select. The reason I want to change this is because the list of options now changed based on other values.</p>\n\n<p>I have something called an outstanding and I want to put each outstanding into the list of things that can be selected.</p>\n\n<pre><code>@outstandings.each go into the f.select\n</code></pre>\n\n<p>or something like that. Thanks.</p>\n\n<pre><code>&lt;div class = \"well\"&gt;\n   &lt;%= form_for @userupload, html: { multipart: true } do |f| %&gt;\n      &lt;%= f.label :nealname, \"Neal's Name\" %&gt;\n      &lt;%= f.select :nealname, ['One Time','As Needed', 'Quarterly', 'Yearly'] %&gt;\n      &lt;%= f.submit \"Save\", class: \"btn btn-primary\" %&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564509640, "post_id": 57277351, "comment_id": 101051772, "body": "Have you tried setting <code>config.eager_load = true</code> in <code>config&#47;environments&#47;development</code>?"}, {"owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564511083, "post_id": 57277351, "comment_id": 101052438, "body": "@jvillian it doesn&#39;t work"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564517064, "post_id": 57277351, "comment_id": 101055085, "body": "Are you using spring, by chance?"}, {"owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564519821, "post_id": 57277351, "comment_id": 101056076, "body": "@jvillian yes, spring and all rails server was stopped/restarted after changes"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564519953, "post_id": 57277351, "comment_id": 101056134, "body": "Did you <code>spring stop</code>?"}, {"owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1564522883, "post_id": 57277351, "comment_id": 101057064, "body": "@jvillian yes :)"}, {"owner": {"reputation": 2742, "user_id": 484689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/057611f189a711cc823f75e31477f3be?s=128&d=identicon&r=PG", "display_name": "genkilabs", "link": "https://stackoverflow.com/users/484689/genkilabs"}, "edited": false, "score": 0, "creation_date": 1585600608, "post_id": 57277351, "comment_id": 107813384, "body": "I experienced this even without spring. However it only happens when my module is in a non-railsy directory and is nested. ie. I can add <code>config.autoload_paths += Dir[Rails.root.join(&#39;app&#39;, &#39;service_objects&#39;, &#39;{*&#47;}&#39;)]</code> and it will include everything in service_objects. I can also add modules to subdirectories in /app/models. However, the same does not work for files nested in a non-rails-directory."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 3878743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd282aff50a084f387d167548530d514?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Mel&#227;o", "link": "https://stackoverflow.com/users/3878743/igor-mel%c3%a3o"}, "edited": false, "score": 1, "creation_date": 1607539040, "post_id": 60880320, "comment_id": 115307297, "body": "it&#39;s worked. Thanks a lot!"}], "tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 15, "last_activity_date": 1585286263, "last_edit_date": 1585286263, "creation_date": 1585285876, "answer_id": 60880320, "question_id": 57277351, "link": "https://stackoverflow.com/questions/57277351/rails-6-zeitwerknameerror-doesnt-load-class-from-module/60880320#60880320", "title": "Rails 6: Zeitwerk::NameError doesn&#39;t load class from module", "body": "<p>I experienced this same issue when deploying a Rails 6.0.2 application to an Ubuntu 18.04 server.</p>\n\n<blockquote>\n  <p>Unable to load application: Zeitwerk::NameError: expected file /home/deploy/myapp/app/models/concerns/designation.rb to define constant Designation, but didn't</p>\n</blockquote>\n\n<p>I found out that the issue was with <strong>zeitwerk</strong>. Zeitwerk is the new code loader engine used in Rails 6. It\u2019s meant to be the new default for all Rails 6+ projects replacing the old <strong>classic</strong> engine. Zeitwerk provides the features of code autoloading, eager loading, and reloading.</p>\n\n<p><strong>Here's how I solved it</strong>:</p>\n\n<p>Navigate to the <code>config/application.rb</code> file on your project.</p>\n\n<p>Add this line within your application module to switch to <code>classic</code> mode for autoloading:</p>\n\n<pre><code>config.autoloader = :classic\n</code></pre>\n\n<p>Here's an example:</p>\n\n<pre><code>module MyApp\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 6.0\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n\n    config.autoloader = :classic\n  end\nend\n</code></pre>\n\n<p>You can read up more on <strong>zeitwerk</strong> in this article: <a href=\"https://medium.com/cedarcode/understanding-zeitwerk-in-rails-6-f168a9f09a1f\" rel=\"noreferrer\">Understanding Zeitwerk in Rails 6</a></p>\n\n<p>That's all.</p>\n\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5498, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1585286366, "creation_date": 1564508917, "last_edit_date": 1585286366, "question_id": 57277351, "link": "https://stackoverflow.com/questions/57277351/rails-6-zeitwerknameerror-doesnt-load-class-from-module", "title": "Rails 6: Zeitwerk::NameError doesn&#39;t load class from module", "body": "<p>I have a file which looks like this</p>\n\n<pre><code>#app/services/account/authenticate/base.rb\nmodule Account\n  module Authenticate\n    AuthenticateError = Class.new(StandardError)\n\n    class Base &lt; ::Account::Base\n      def self.call(*attrs)\n        raise NotImplementedError\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now when I will run the code from <code>rails c</code> I have an error</p>\n\n<pre><code>&gt; ::Account::Authenticate::AuthenticateError\n=&gt; NameError (uninitialized constant Account::Authenticate::AuthenticateError)\n&gt; ::Account::Authenticate.constants\n=&gt; [:Base, :ViaToken]\n</code></pre>\n\n<p>So rails doesn't see AuthenticateError class. But when I will create a nested class from this folder like</p>\n\n<pre><code>=&gt; Account::Authenticate::ViaToken\n&gt; ::Account::Authenticate.constants\n=&gt; [:Base, :AuthenticateError, :ViaToken]\n</code></pre>\n\n<p>AuthenticateError class is now visible</p>\n\n<pre><code>&gt; ::Account::Authenticate::AuthenticateError\n=&gt; Account::Authenticate::AuthenticateError\n</code></pre>\n\n<p>The solution for this problem is to create a separate file authenticate_error.rb which will work from the beginning but this solution is not ideal for me. Is there any solution to preload all classes or smth?</p>\n\n<p>(Ruby 2.6 with Rails 6.0.0.rc2)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1564508978, "post_id": 57273981, "comment_id": 101051496, "body": "Can you further explain why this would be needed? This would leave a large security hole in the application itself and typing <code>ssh user@host</code> is not very difficult and far more secure"}], "answers": [{"comments": [{"owner": {"reputation": 2180, "user_id": 1659807, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KzDNe.png?s=128&g=1", "display_name": "duykhoa", "link": "https://stackoverflow.com/users/1659807/duykhoa"}, "edited": false, "score": 4, "creation_date": 1564497781, "post_id": 57274069, "comment_id": 101046634, "body": "Yes, Web console should be used in Development environment only.  In fact, the question should clarify the purpose of accessing the console in production. If the purpose is to debug, I think the better way is looking at the log for a certain error."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1564496960, "creation_date": 1564496960, "answer_id": 57274069, "question_id": 57273981, "link": "https://stackoverflow.com/questions/57273981/is-there-a-way-to-have-a-view-with-a-working-rails-c-console/57274069#57274069", "title": "Is there a way to have a view with a working &#39;rails c&#39; console?", "body": "<p>There is a <a href=\"https://github.com/rails/web-console\" rel=\"nofollow noreferrer\">web-console</a> gem. Make sure you secured access, it's quite risky to enable prod console on WWW.</p>\n"}], "owner": {"reputation": 87, "user_id": 10177326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9867996e687651338bd2683e4bfcf903?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10177326/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1564514046, "answer_count": 1, "score": -1, "last_activity_date": 1564496960, "creation_date": 1564496678, "question_id": 57273981, "link": "https://stackoverflow.com/questions/57273981/is-there-a-way-to-have-a-view-with-a-working-rails-c-console", "closed_reason": "Not suitable for this site", "title": "Is there a way to have a view with a working &#39;rails c&#39; console?", "body": "<p>I'd like to be able to access the console without having to ssh into the production box...is there a way to have a view template that's just a working console?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "html-entities"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564509908, "post_id": 57272790, "comment_id": 101051879, "body": "Do you mean &quot;I want a white-list of tags that don&#39;t get escaped&quot;? <code>&lt;some&gt;</code> could be construed as a tag."}, {"owner": {"reputation": 21, "user_id": 4688734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQaW.jpg?s=128&g=1", "display_name": "atta ul mohsin", "link": "https://stackoverflow.com/users/4688734/atta-ul-mohsin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564511053, "post_id": 57272790, "comment_id": 101052423, "body": "I want html tags not escaped at all. By escape I mean html encoded. All other html entities e.g &lt;, &gt;, &lt;&lt;, &gt;&gt;, should be escaped. So if my text has characters like &lt;some text here&gt;, it should be escaped."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564511952, "post_id": 57272790, "comment_id": 101052876, "body": "The problem is that <code>&lt;some text&gt;</code> is technically valid HTML. You&#39;ll need to better define what invalid HTML is."}, {"owner": {"reputation": 21, "user_id": 4688734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQaW.jpg?s=128&g=1", "display_name": "atta ul mohsin", "link": "https://stackoverflow.com/users/4688734/atta-ul-mohsin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564513392, "post_id": 57272790, "comment_id": 101053528, "body": "Yes you are right. By valid html, I mean standard html tags."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564514622, "post_id": 57272790, "comment_id": 101054074, "body": "The trouble is that&#39;s a really loose definition, which is why I earlier asked about a white-list of tags you want to preserve as-is."}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 1, "creation_date": 1564530849, "post_id": 57272790, "comment_id": 101058984, "body": "What is the purpose of this?"}, {"owner": {"reputation": 21, "user_id": 4688734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQaW.jpg?s=128&g=1", "display_name": "atta ul mohsin", "link": "https://stackoverflow.com/users/4688734/atta-ul-mohsin"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564532901, "post_id": 57272790, "comment_id": 101059315, "body": "@GProst @tadman I am using tinymce editor that returns me formatted text including normal html tags, in it. I want to to store that text in my db. When displaying back to the user, the formatting is preserved but any html entity e.g <code>&lt;some thing&gt;</code> is treated as html tag by the editor. However, if I escape such entities then they are displayed as such in editor. But then standard html tags are also escaped and  formatting is lost."}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564534600, "post_id": 57272790, "comment_id": 101059600, "body": "Hmm... tinymce removes <code>&lt;</code> and <code>&gt;</code> for &quot;invalid&quot; tags itself, why do you need to escape anything? Just store the HTML how a user enters it or how tinymce editor returns it (I mean if you&#39;re going to use it with tinymce anyway, right?). This is a <code>valid elements</code> example which you can play with on CodePen, for me it doesn&#39;t treat any html entity as tag, only valid ones"}, {"owner": {"reputation": 21, "user_id": 4688734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQaW.jpg?s=128&g=1", "display_name": "atta ul mohsin", "link": "https://stackoverflow.com/users/4688734/atta-ul-mohsin"}, "edited": false, "score": 0, "creation_date": 1564538118, "post_id": 57272790, "comment_id": 101060182, "body": "I don&#39;t want anything to be removed from text whether it is valid or invalid for tinymce. that is my main issue."}], "owner": {"reputation": 21, "user_id": 4688734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQaW.jpg?s=128&g=1", "display_name": "atta ul mohsin", "link": "https://stackoverflow.com/users/4688734/atta-ul-mohsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564509767, "creation_date": 1564492961, "last_edit_date": 1564509767, "question_id": 57272790, "link": "https://stackoverflow.com/questions/57272790/escape-html-entities-ignoring-html-tags-in-ruby", "title": "Escape Html entities ignoring html tags - in Ruby", "body": "<p><strong>BACKGROUND:</strong> I am saving some html in database. That contains html tags and html entities. </p>\n\n<p><strong>Problem:</strong>\nI need to escape HTML entities e.g <code>&lt;</code> or <code>&gt;</code> without escaping HTML tags e.g <code>&lt;p&gt;</code> or <code>&lt;/p&gt;</code> or <code>&lt;h1&gt;</code> or <code>&lt;br/&gt;</code> etc. I need solution for escaping HTML entities without escaping HTML tags.</p>\n\n<p>I have used the following code but that escapes HTML tags too.</p>\n\n<pre><code>escaped_msg = CGI.escape_html '&lt;p&gt;&lt;some message here&gt;&lt;/p&gt;'\n</code></pre>\n\n<p>I want to get:</p>\n\n<pre><code>&lt;p&gt;&amp;lt;some message here&amp;gt;&lt;/p&gt;\n</code></pre>\n\n<p>I don't want to escape any HTML tags e.g <code>&lt;p&gt;</code> or <code>&lt;/p&gt;</code> etc</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11047387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3205d4fd2da236dc76edafdc04017f7?s=128&d=identicon&r=PG&f=1", "display_name": "AwsmDev", "link": "https://stackoverflow.com/users/11047387/awsmdev"}, "edited": false, "score": 0, "creation_date": 1565266132, "post_id": 57391757, "comment_id": 101304449, "body": "Ok thanks for the tips. Actually, that does not work but I will investigate that"}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1565171995, "creation_date": 1565171995, "answer_id": 57391757, "question_id": 57272236, "link": "https://stackoverflow.com/questions/57272236/i-need-to-display-properly-my-form-text-area-with-simple-format/57391757#57391757", "title": "I need to display properly my form.text_area with Simple_format", "body": "<p>Your code doesn't appear to be a valid <code>ERB</code> expression. You need something like:</p>\n\n<p><code>&lt;%= form.text_area(:description, value: simple_format(:description)) %&gt;</code></p>\n\n<p>Here's a link to more documentation on the <code>text_area</code> method: <a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/text_area\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/FormHelper/text_area</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11047387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3205d4fd2da236dc76edafdc04017f7?s=128&d=identicon&r=PG&f=1", "display_name": "AwsmDev", "link": "https://stackoverflow.com/users/11047387/awsmdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565171995, "creation_date": 1564491283, "last_edit_date": 1564492842, "question_id": 57272236, "link": "https://stackoverflow.com/questions/57272236/i-need-to-display-properly-my-form-text-area-with-simple-format", "title": "I need to display properly my form.text_area with Simple_format", "body": "<p>I need to display properly my form.text_area with CR (carriage return when the enter key is press(in display show)</p>\n\n<p>I have tried to use simple_format <code>(&lt;%= form.text_area :description %&gt;)</code> but it's not work. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;!-- Description --&gt;\n&lt;div class=\"field\"&gt;\n  &lt;label&gt;Description : &lt;/label&gt;\n  &lt;div class=\"&lt;%=ticket.errors[:description].empty? ? 'field' : 'field error'%&gt;\"&gt;\n    simple_format(&lt;%= form.text_area :description %&gt;)\n  /div&gt;\n &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "html", "ruby", "ajax"], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564490845, "creation_date": 1564489646, "last_edit_date": 1564490845, "question_id": 57271682, "link": "https://stackoverflow.com/questions/57271682/my-javascript-file-is-not-executing-which-includes-form-refresh", "title": "My javascript file is not executing which includes form refresh", "body": "<p>Hello I have implemented a contact form and when I submit the form it does trigger but the form in the console (but doesn't send to my inbox yet - that is another story) does not refresh. I have a create.js.erb file which is meant to tell the user if their message was sent or not and refresh the message box but it doesn't work.</p>\n\n<p><a href=\"https://github.com/Angela-Inniss/CB\" rel=\"nofollow noreferrer\">project</a></p>\n\n<p>Tried to create a variable and set it to an empty string.</p>\n\n<p>create.js.erb file: </p>\n\n<pre><code>console.log(\"This is the create.js.erb file\");\n\n$('#contact').html(\"&lt;%= j render 'contact_form' %&gt;\");\n$('#flash-message').html(\"&lt;%= j render 'flash' %&gt;\").delay(3000).fadeOut(4000);\n\nvar inputBox = document.getElementById('contact-form-text-area');\ninputBox.value = \"\";\n</code></pre>\n\n<p>messages controller</p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n  def index\n     @contact = Message.new(params[:message])\n  end\n\n  def create\n    @contact = Message.new(params[:message])\n    @contact.request = request\n\n    respond_to do |format|\n      if @contact.deliver!\n        # re-initialize Message object for cleared form\n        @contact = Message.new\n        format.html { render 'index'}\n        format.js   { flash.now[:success] = @message = \"Thank you for your message. I'll get back to you soon!\" }\n      else\n        format.html { render 'index' }\n        format.js   { flash.now[:error] = @message = \"Message did not send.\" }\n      end\n    end\n  end\nend\n\n</code></pre>\n\n<p>Message box to refresh when submitted</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "edited": false, "score": 0, "creation_date": 1564489823, "post_id": 57271369, "comment_id": 101041464, "body": "<a href=\"http://blog.plataformatec.com.br/2014/07/rails-4-and-postgresql-arrays/\" rel=\"nofollow noreferrer\">blog.plataformatec.com.br/2014/07/rails-4-and-postgresql-arr&zwnj;&#8203;ays</a> according to this. It should be t.text :tags, array: true, default: []"}], "answers": [{"comments": [{"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564490191, "post_id": 57271730, "comment_id": 101041680, "body": "Add add_column :users, :needs, :text, array: true, default: &#39;{}&#39; in the migration still results in the schema t.text &quot;needs&quot;, default: &quot;{}&quot;. I&#39;m missing the array: true."}], "tags": [], "owner": {"reputation": 3, "user_id": 3594931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0029b7bcbb59b11684cecdca8cc95ee3?s=128&d=identicon&r=PG&f=1", "display_name": "udnpico", "link": "https://stackoverflow.com/users/3594931/udnpico"}, "is_accepted": false, "score": 0, "last_activity_date": 1564489771, "creation_date": 1564489771, "answer_id": 57271730, "question_id": 57271369, "link": "https://stackoverflow.com/questions/57271369/getting-weird-format-when-trying-to-update-rails-column-array-type/57271730#57271730", "title": "Getting weird format when trying to update rails column array type", "body": "<p>It should be</p>\n\n<pre><code>t.text \"needs\", array: true,  default: \"{}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564490672, "post_id": 57271891, "comment_id": 101041976, "body": "that&#39;s what I got after doing the migration to add a default value of [] to the column."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564490840, "post_id": 57271891, "comment_id": 101042063, "body": "Perhaps you should add your migration to your question as that seems to be a part of the problem. Also, do you expect to accept any sort of user-defined need (e.g., a user could state their need as &quot;Foo&quot;)? Or, do you want the needs to be standardized?"}, {"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564491313, "post_id": 57271891, "comment_id": 101042368, "body": "I want the needs to be standardized but the needs comes from the client and the options are restricted. I managed to fix this by deleting my migrations and inserting t.text &quot;needs&quot;, array: true,  default: [] directly inside the migration that creates the table user and then deleting the schema and regenerating it and also regenerating the database."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564492143, "post_id": 57271891, "comment_id": 101042888, "body": "If needs come from the client and the options are restricted, then I really don&#39;t understand why you&#39;re using an array instead of an association. But, hey, to each their own."}, {"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1564492433, "post_id": 57271891, "comment_id": 101043055, "body": "Because I don&#39;t need to access them, it&#39;s not a main feature."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 2, "last_activity_date": 1564490634, "last_edit_date": 1564490634, "creation_date": 1564490270, "answer_id": 57271891, "question_id": 57271369, "link": "https://stackoverflow.com/questions/57271369/getting-weird-format-when-trying-to-update-rails-column-array-type/57271891#57271891", "title": "Getting weird format when trying to update rails column array type", "body": "<p>Why do you think it is weird to get <code>\"[\"</code> when doing <code>User.needs.first</code>? <code>User.needs</code> holds <code>text</code> and the first character of your sample text is <code>\"[\"</code>. Seems perfectly normal.</p>\n\n<p>What seems weird (to me) is that you're using a text datatype to store an array without any serialization. Or, alternatively, using a native <code>array</code> datatype (as with PostgreSQL) doing something like:</p>\n\n<pre><code>t.string 'needs', array: true\n</code></pre>\n\n<p>...in your migration (see the <a href=\"https://edgeguides.rubyonrails.org/active_record_postgresql.html#array\" rel=\"nofollow noreferrer\">guide</a> for more information).</p>\n\n<p>It also seems weird (to me) that the default for the supposed array appears to be a hash (<code>default: \"{}\"</code>). </p>\n\n<p>I also wonder why you're not using a <code>Need</code> model and creating a M:M relationship between <code>User</code> and <code>Need</code>. Something, perhaps, like:</p>\n\n<pre><code># == Schema Information\n#\n# Table name: needs\n#\n#  id               :bigint           not null, primary key\n#  name             :string\n#  created_at       :datetime         not null\n#  updated_at       :datetime         not null\n#\nclass Need &lt; ApplicationRecord\n  has_many :user_needs\n  has_many :users, through: :user_needs\nend\n\n# == Schema Information\n#\n# Table name: user_needs\n#\n#  id               :bigint           not null, primary key\n#  user_id          :integer\n#  need_id          :integer\n#  created_at       :datetime         not null\n#  updated_at       :datetime         not null\n#\nclass UserNeed &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :need\nend\n\nclass User &lt; ApplicationRecord\n  has_many :user_needs\n  has_many :needs, through: :user_needs\nend\n</code></pre>\n\n<p>Which will make querying easier down the road. Like, \"give me all users that have a life need\" could be something like: </p>\n\n<pre><code>Need.find_by(name: 'life').users\n</code></pre>\n"}], "owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564490634, "creation_date": 1564488679, "question_id": 57271369, "link": "https://stackoverflow.com/questions/57271369/getting-weird-format-when-trying-to-update-rails-column-array-type", "title": "Getting weird format when trying to update rails column array type", "body": "<p>I'm trying to update a column called needs that is the following:</p>\n\n<pre><code>t.text \"needs\", default: \"{}\"\n</code></pre>\n\n<p>I went through a couple migration to try and make it work and I still get the same error. It does not update the column and it looks like it reformats the data inside my api call. Here is what I get from the rails server:</p>\n\n<pre><code>Parameters: {\"user\"=&gt;{\"birthdate\"=&gt;\"2019-07-30T11:59:31.215Z\", \"needs\"=&gt;[\"relationship\", \"life\", \"general\"], \"coach_gender\"=&gt;\"\"}, \"id\"=&gt;\"15\"}\n\nUPDATE \"users\" SET \"needs\" = $1, \"updated_at\" = $2 WHERE \"users\".\"id\" = $3  [[\"needs\", \"[\\\"relationship\\\", \\\"life\\\", \\\"general\\\"]\"], [\"updated_at\", \"2019-07-30 12:08:12.013589\"], [\"id\", 15]]\n</code></pre>\n\n<p>Then when I try do get the first need from the user like so:</p>\n\n<pre><code>User.needs.first\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>\"[\"\n</code></pre>\n\n<p>My controller looks like this:</p>\n\n<pre><code>def edit\n  User.find_by(id: params[:id]).update_attributes(user_params)\nend\n\ndef user_params\n  params.require(:user).permit(:first_name, :last_name, :birthdate, :description, :email, :password, :coach_gender, :needs =&gt; [])\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 869, "user_id": 1228509, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gkgRv.jpg?s=128&g=1", "display_name": "p0rter", "link": "https://stackoverflow.com/users/1228509/p0rter"}, "edited": false, "score": 1, "creation_date": 1564490219, "post_id": 57271289, "comment_id": 101041694, "body": "Not into RoR anymore but do you use some kind of special hot module reload? Are you developing on a windows machine?"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 2, "creation_date": 1564494677, "post_id": 57271289, "comment_id": 101044536, "body": "We need to know what platform/environment you are seeing this behavior in (os/version, Windows Subsystem for Linux, Docker, etc.)"}, {"owner": {"reputation": 2180, "user_id": 1659807, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KzDNe.png?s=128&g=1", "display_name": "duykhoa", "link": "https://stackoverflow.com/users/1659807/duykhoa"}, "edited": false, "score": 0, "creation_date": 1564500371, "post_id": 57271289, "comment_id": 101048176, "body": "Do you still have Spring in your project (<a href=\"https://github.com/rails/spring\" rel=\"nofollow noreferrer\">github.com/rails/spring</a>)?"}, {"owner": {"reputation": 2360, "user_id": 147792, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/48f816ab1aaa88daa0bf270b10a99d23?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/147792/sebastian"}, "edited": false, "score": 0, "creation_date": 1564511389, "post_id": 57271289, "comment_id": 101052606, "body": "It is OSX, both in and outside Docker. Spring is included in Gemfile but starting server with or without spring doesn&#39;t change anything."}], "answers": [{"tags": [], "owner": {"reputation": 2360, "user_id": 147792, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/48f816ab1aaa88daa0bf270b10a99d23?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/147792/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1564824450, "creation_date": 1564824450, "answer_id": 57337061, "question_id": 57271289, "link": "https://stackoverflow.com/questions/57271289/long-reloading-time-in-rails-development/57337061#57337061", "title": "Long reloading time in Rails development", "body": "<p>It was not caused by the framework configuration itself. All my issues disappeared when I removed gems like <code>better_errors</code>, <code>meta_request</code> and <code>caller_binding</code> from my <code>Gemfile</code>. </p>\n"}], "owner": {"reputation": 2360, "user_id": 147792, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/48f816ab1aaa88daa0bf270b10a99d23?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/147792/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564824450, "creation_date": 1564488457, "last_edit_date": 1564511317, "question_id": 57271289, "link": "https://stackoverflow.com/questions/57271289/long-reloading-time-in-rails-development", "title": "Long reloading time in Rails development", "body": "<p>I have application, quite big on Rails 5.0.7.2 and Ruby 2.6. But for sometime local development is real pain. When I change one file and try to reload endpoint which serves only JSON response it took almost a minute to get response. I noticed that all controllers under <code>app/controllers</code> and subdirectories are getting loaded once again, like in the first request after booting the app. Serving responses without code changes is fast, only after changing something in code it took long time on first reload.</p>\n\n<p>My <code>config/environments/development.rb</code> file looks like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Webapp::Application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # In the development environment your application's code is reloaded on\n  # every request. This slows down response time but is perfect for development\n  # since you don't have to restart the web server when you make code changes.\n  config.cache_classes = false\n\n  # Do not eager load code on boot.\n  config.eager_load = false\n\n  # Show full error reports.\n  config.consider_all_requests_local = true\n  config.action_controller.perform_caching = false\n\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = false\n\n  # Allow to see previews on development.\n  config.action_mailer.show_previews = true\n  config.action_mailer.preview_path = Rails.root.join('spec', 'mailers', 'previews')\n\n  # Print deprecation notices to the Rails logger.\n  config.active_support.deprecation = :log\n\n  # Raise an error on page load if there are pending migrations.\n  config.active_record.migration_error = :page_load\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation can not be found).\n  config.i18n.fallbacks = true\n\n  # Debug mode disables concatenation and preprocessing of assets.\n  # This option may cause significant delays in view rendering with a large\n  # number of complex assets.\n  config.assets.debug = false\n\n  # Generate digests for assets URLs.\n  config.assets.digest = true\n\n  # Fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = true\n\n  # Adds additional error checking when serving assets at runtime.\n  # Checks for improperly declared sprockets dependencies.\n  # Raises helpful error messages.\n  config.assets.raise_runtime_errors = true\n\n  # Raises error for missing translations\n  # config.action_view.raise_on_missing_translations = true\n\n  # Use an evented file watcher to asynchronously detect changes in source code,\n  # caching actions and page fragments\n  # routes, locales, etc. This feature depends on the listen gem.\n  # config.file_watcher = ActiveSupport::EventedFileUpdateChecker\nend\n</code></pre>\n\n<p>I have already tried <code>EventedFileUpdateChecker</code>, but it didn't change anything.</p>\n\n<p>Most of the controllers I have under <code>app/controllers/api</code> directory in <code>Api</code> module.</p>\n\n<p>I am developing on OSX.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564502952, "post_id": 57271252, "comment_id": 101049510, "body": "If you simply want the lines in <code>file1.csv</code> that are not present in <code>file2.csv</code> you can use <a href=\"https://ruby-doc.org/core-2.6.3/IO.html#method-c-readlines\" rel=\"nofollow noreferrer\">IO#readlines</a>: <code>IO.readlines(&#39;file2.csv&#39;, chomp: true) - IO.readlines(&#39;file1.csv&#39;, chomp: true)  #=&gt; [&quot;Joe,Smith,Dallas,TX&quot;]</code> (i.e., no need for CSV methods)."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1564503342, "post_id": 57271772, "comment_id": 101049723, "body": "To be clear, this returns <code>[[&quot;Frank&quot;, &quot;Jones&quot;, &quot;Plano&quot;, &quot;TX&quot;]]</code>, whereas the corresponding lines (here just the one line) of <code>file1.csv</code> are <code>[&quot;Joe,Smith,Dallas,TX\\n&quot;]</code>. The question is not clear about which of these arrays is wanted."}], "tags": [], "owner": {"reputation": 51, "user_id": 4219131, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ll5S2_aOLwk/AAAAAAAAAAI/AAAAAAAADEQ/3SZDqxHXY24/photo.jpg?sz=128", "display_name": "dismir", "link": "https://stackoverflow.com/users/4219131/dismir"}, "is_accepted": false, "score": 2, "last_activity_date": 1564489929, "creation_date": 1564489929, "answer_id": 57271772, "question_id": 57271252, "link": "https://stackoverflow.com/questions/57271252/ruby-csv-compare-two-csv-files/57271772#57271772", "title": "Ruby CSV Compare Two CSV Files", "body": "<p>This will return an array of rows which are present in file1.csv but missed in file2.csv</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>csv1 = CSV.read(\"file1.csv\")\ncsv2 = CSV.read(\"file2.csv\")\n\ncsv1 - csv2\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 11744097, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--_CSWfqF3tQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzBBPcl2w1PZhBaW5zcKAhfur-_Q/photo.jpg?sz=128", "display_name": "Ken Jenney", "link": "https://stackoverflow.com/users/11744097/ken-jenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564489929, "creation_date": 1564488324, "question_id": 57271252, "link": "https://stackoverflow.com/questions/57271252/ruby-csv-compare-two-csv-files", "title": "Ruby CSV Compare Two CSV Files", "body": "<p>I have two CSV files with the same headers. I'd like to compare these files and return entries that are missing from the second file. Here's an example:</p>\n\n<p>file1.csv</p>\n\n<pre><code>fname,lname,city,state\nJoe,Smith,Dallas,TX\nJane,Done,Baltimore,MD\nFrank,Jones,Plano,TX\n</code></pre>\n\n<p>file2.csv</p>\n\n<pre><code>fname,lname,city,state\nJoe,Smith,Dallas,TX\nJane,Done,Baltimore,MD\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code># Returns True if a match is found\n# and False if none is found\ndef find_in_csv(csv_text,search_column,search_string)\n  csv_text.find {|row|\n    return row[search_column] == search_string\n  }\nend\n</code></pre>\n\n<p>How do I extend this function to allow returning missing lines?</p>\n"}, {"tags": ["css", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 4182533, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g2jJs9ywN6M/AAAAAAAAAAI/AAAAAAAAAD0/JZM8QG3hxZo/photo.jpg?sz=128", "display_name": "Ilya Umanets", "link": "https://stackoverflow.com/users/4182533/ilya-umanets"}, "edited": false, "score": 0, "creation_date": 1564485501, "post_id": 57270278, "comment_id": 101038881, "body": "The answer was discussed <a href=\"https://stackoverflow.com/questions/13903175/simple-form-adding-class-to-form\">here</a>."}, {"owner": {"reputation": 139, "user_id": 10968534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hHVYMhHS0wA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMy1GDpiErk5XnRZlA8on-7tXtknQ/mo/photo.jpg?sz=128", "display_name": "Hfyuu", "link": "https://stackoverflow.com/users/10968534/hfyuu"}, "reply_to_user": {"reputation": 1, "user_id": 4182533, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g2jJs9ywN6M/AAAAAAAAAAI/AAAAAAAAAD0/JZM8QG3hxZo/photo.jpg?sz=128", "display_name": "Ilya Umanets", "link": "https://stackoverflow.com/users/4182533/ilya-umanets"}, "edited": false, "score": 0, "creation_date": 1564486090, "post_id": 57270278, "comment_id": 101039206, "body": "I tried like <code>&lt;% simple_form_for(@post, class: &quot;bg-success&quot;) do |f| %&gt;</code> not working"}], "owner": {"reputation": 139, "user_id": 10968534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hHVYMhHS0wA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMy1GDpiErk5XnRZlA8on-7tXtknQ/mo/photo.jpg?sz=128", "display_name": "Hfyuu", "link": "https://stackoverflow.com/users/10968534/hfyuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1564485840, "answer_count": 0, "score": 0, "last_activity_date": 1564484995, "creation_date": 1564484995, "question_id": 57270278, "link": "https://stackoverflow.com/questions/57270278/how-to-add-class-to-ruby-simple-form", "closed_reason": "Duplicate", "title": "How to add class to ruby simple form", "body": "<p>My form starts like this,</p>\n\n<pre><code>&lt;%= simple_form_for(@post) do |f| %&gt;\n</code></pre>\n\n<p>How to add a class like, <code>bg-success</code> to this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1564487745, "post_id": 57270193, "comment_id": 101040181, "body": "You might want to have a look at Rails&#39; <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format\" rel=\"nofollow noreferrer\"><code>simple_format</code></a> helper."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "edited": false, "score": 0, "creation_date": 1564485298, "post_id": 57270287, "comment_id": 101038774, "body": "Thank you but your code for some reason displays text in one paragraph, not two."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "edited": false, "score": 0, "creation_date": 1564485541, "post_id": 57270287, "comment_id": 101038914, "body": "Try now, I&#39;ve fixed the pattern from <code>&#39;\\n\\n&#39;</code> to <code>&quot;\\n\\n&quot;</code> to match newline chars, not backslash <code>n</code>."}, {"owner": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "edited": false, "score": 0, "creation_date": 1564485653, "post_id": 57270287, "comment_id": 101038985, "body": "Sorry, I still see only one paragraph. Maybe it is something do do with my Ruby or RoR version?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "edited": false, "score": 0, "creation_date": 1564485887, "post_id": 57270287, "comment_id": 101039102, "body": "Try to take this data in the console and print it there with <code>p text</code> (it will show all the special chars). Also print the result of <code>text.split(&quot;\\n\\n&quot;)</code>"}, {"owner": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "edited": false, "score": 0, "creation_date": 1564485910, "post_id": 57270287, "comment_id": 101039113, "body": "I have it .split(&quot;\\r\\n\\r\\n&quot;) Thanks for your help!"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1564502637, "post_id": 57270287, "comment_id": 101049354, "body": "You can use <code>.split(&quot;#{$&#47;}#{&#47;$}&quot;)</code> for this to get the newline character for your system."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1564513619, "last_edit_date": 1564513619, "creation_date": 1564485024, "answer_id": 57270287, "question_id": 57270193, "link": "https://stackoverflow.com/questions/57270193/how-to-split-text-on-two-new-lines-with-ruby/57270287#57270287", "title": "How to split text on two new lines with ruby", "body": "<p>You can split it on double newline and then wrap in <code>&lt;p&gt;</code> in the view (ERB example)</p>\n\n<pre><code>&lt;% text.split(\"\\n\\n\").each do |paragraph| %&gt;\n  &lt;p&gt;\n    &lt;%= paragraph %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 1635186, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f9e61aa65074e4c81419c94af794af56?s=128&d=identicon&r=PG", "display_name": "Akash Shah", "link": "https://stackoverflow.com/users/1635186/akash-shah"}, "edited": false, "score": 0, "creation_date": 1564564622, "post_id": 57272135, "comment_id": 101069332, "body": "This seems to be a better option."}], "tags": [], "owner": {"reputation": 170, "user_id": 9735241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc1fe119487c27743fc688f1ddc9dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/9735241/ashwini"}, "is_accepted": false, "score": 9, "last_activity_date": 1564491005, "creation_date": 1564491005, "answer_id": 57272135, "question_id": 57270193, "link": "https://stackoverflow.com/questions/57270193/how-to-split-text-on-two-new-lines-with-ruby/57272135#57272135", "title": "How to split text on two new lines with ruby", "body": "<p>When you split the text field value with <code>text.split(\"\\n\\n\")</code> you will get split value in an array i.e output be like \n<code>[\"Berlin.\\nRome.\\nLondon.\", \"Paris.\\nWarsaw.\\nNew York City.\"]</code> .To print value in following way</p>\n\n<pre><code>'&lt;p&gt;Berlin. Rome. London.&lt;/p&gt;\n&lt;p&gt;Paris. Warsaw. New York City.&lt;/p&gt;'\n</code></pre>\n\n<p>need to remove <code>\"\\n\"</code> from array elements and add <code>\" \"</code> by using gsub ruby method.</p>\n\n<pre><code>&lt;% text.split(\"\\n\\n\").each do |paragraph| %&gt;\n &lt;p&gt;\n    &lt;%= paragraph.gsub(\"\\n\",\" \") %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>you may also refer <a href=\"https://stackoverflow.com/questions/4190797/how-can-i-remove-the-string-n-from-within-a-ruby-string\">How can I remove the string &quot;\\n&quot; from within a Ruby string?</a></p>\n"}], "owner": {"reputation": 23, "user_id": 9687177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d03c4e7121a5a3d5f94d5ee05cdac?s=128&d=identicon&r=PG&f=1", "display_name": "pawciorr", "link": "https://stackoverflow.com/users/9687177/pawciorr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564513619, "creation_date": 1564484700, "last_edit_date": 1564485047, "question_id": 57270193, "link": "https://stackoverflow.com/questions/57270193/how-to-split-text-on-two-new-lines-with-ruby", "title": "How to split text on two new lines with ruby", "body": "<p>In my RoR application, I have a text area and would like to split its content into separate paragraphs. The text has the following format:</p>\n\n<pre><code>Berlin.\nRome.\nLondon.\n\nParis.\nWarsaw.\nNew York City.\n</code></pre>\n\n<p>When displayed, I would like to have it formatted in paragraphs like:</p>\n\n<pre><code>&lt;p&gt;Berlin. Rome. London.&lt;/p&gt;\n&lt;p&gt;Paris. Warsaw. New York City.&lt;/p&gt;\n</code></pre>\n\n<p>How to achieve that? I suppose I need to use split method but how to target two new lines?</p>\n"}, {"tags": ["arrays", "ruby", "append"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564550983, "post_id": 57269864, "comment_id": 101062763, "body": "&quot;According to all documentation, you can append an element to an array using <code>&lt;&lt;</code> or <code>.push</code> or <code>+=</code>, <b>and the result ought to be the same</b>.&quot; \u2013 Please, tell us where you found this &quot;all documentation&quot;, so that we can eradicate it from this universe with extreme prejudice, because it is just plain wrong. And very obviously so, as you discovered. Also, please use the official documentation, which very clearly does <i>not</i> state what you claim &quot;all documentation&quot; states."}, {"owner": {"reputation": 29, "user_id": 10627795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MDickten", "link": "https://stackoverflow.com/users/10627795/mdickten"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564575717, "post_id": 57269864, "comment_id": 101075689, "body": "@J&#246;rg W Mittag: here, for instance: <a href=\"https://teamtreehouse.com/library/adding-items-to-arrays-2\" rel=\"nofollow noreferrer\">teamtreehouse.com/library/adding-items-to-arrays-2</a>. Or here: <a href=\"https://www.ruby-forum.com/t/add-element-at-end-of-array/106609\" rel=\"nofollow noreferrer\">ruby-forum.com/t/add-element-at-end-of-array/106609</a>. Just for a start."}, {"owner": {"reputation": 29, "user_id": 10627795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MDickten", "link": "https://stackoverflow.com/users/10627795/mdickten"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564576269, "post_id": 57269864, "comment_id": 101076018, "body": "...And frankly, I still don&#39;t see why it is just plain wrong; all three methods modify the array and attach the new element at the end. As Amadan wrote up so beautifully, my error was completely elsewhere."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1564580667, "post_id": 57269864, "comment_id": 101078786, "body": "Yes and no. <code>array += element</code> does <i>not</i> modify the array. It makes a new array, then discards the old array. Imagine if you need more beer in your fridge. You could buy more beer and just put it into the fridge (<code>fridge &lt;&lt; beer</code>, <code>fridge.push(beer)</code>), or you could buy a new fridge, move everything from the old one to the new one together with the beer you bought, then throw the old fridge away (<code>fridge = fridge + beer</code>, <code>fridge += beer</code>)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1564685429, "post_id": 57269864, "comment_id": 101122506, "body": "I would like to point out that neither of the two links you provided are documentation. The second one is just a discussion between a bunch of random people on a mailing list, and the first one is a course by some random guy on the Internet. Also, <i>nowhere</i> in the second link does someone claim that those three expressions are equivalent, in fact <code>+=</code> is not even mentioned once. I cannot comment on the first link as it requires me to pay to watch the video. However, if the video does not explain the difference between mutation and re-binding, I would ask for your money back."}, {"owner": {"reputation": 29, "user_id": 10627795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MDickten", "link": "https://stackoverflow.com/users/10627795/mdickten"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564730385, "post_id": 57269864, "comment_id": 101134059, "body": "@J&#246;rg W Mittag: OK, so they aren&#39;t documentation. Satisfied? In future, if I don&#39;t know how to do something in Ruby I&#39;ll go to the documentation. Which means, in particular, I may not go to Stack Exchange, since it is not documentation. And again, the problem was <i>not</i> the array manipulation, it was the initialisation of the hash that was all wrong! If I had done the initialisation of my hash correctly, all three methods for adding an element to the array would have yielded the same, correct, result."}], "answers": [{"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564484974, "post_id": 57270113, "comment_id": 101038615, "body": "I had your same advice, until I tried: <code>h = { a: [], b: [] }; 2.times { h[:a] += [1] }; 2.times { h[:b] &lt;&lt; 1 }</code>. Or my try to reproduce the issue is missing something?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564485088, "post_id": 57270113, "comment_id": 101038656, "body": "Your <code>h[:a]</code> and <code>h[:b]</code> are distinct objects. Try this for the easiest way to illustrate the difference: <code>a = [[], []]; a[0]&lt;&lt;1; p a</code> and <code>a = [[]] * 2; a[0]&lt;&lt;1; p a</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1564485445, "post_id": 57270113, "comment_id": 101038857, "body": "Also, hop <a href=\"http://www.pythontutor.com/visualize.html#mode=edit\" rel=\"nofollow noreferrer\">here</a> - the best teaching tool for this concept I know of. Choose Ruby, put in some code (e.g. the two snippets I just posted, or your original code), submit with the &quot;Visualize Execution&quot; button, then step through your code while watching what&#39;s happening in the memory."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564489897, "post_id": 57270113, "comment_id": 101041508, "body": "Still confused, see <code>b = [[]] * 2; b[0]+=[1]; p b</code>, it&#39;s the same as your first<code>a = [[], []]; a[0]&lt;&lt;1; p a</code>. Great link, by the way. Thanks!"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564490244, "post_id": 57270113, "comment_id": 101041711, "body": "When <code>result = Hash.new { |h,k| h[k] = [] }</code> there is no difference between the two methods. When <code>result = Hash.new([])</code>, the buggy method returns <code>{}</code>. I&#39;m on my way... :)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564548550, "post_id": 57270113, "comment_id": 101062066, "body": "When you&#39;re using <code>+=</code> and overwriting the array, so destructive and nondestructive methods will work the same as long as there is no reference sharing. My <code>result</code> prevents reference sharing; yours ensures it. Do execute things in the visualiser, and I believe a lot of things will become clearer."}, {"owner": {"reputation": 29, "user_id": 10627795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MDickten", "link": "https://stackoverflow.com/users/10627795/mdickten"}, "edited": false, "score": 0, "creation_date": 1564576004, "post_id": 57270113, "comment_id": 101075874, "body": "Thanks a lot! So my original error was that I didn&#39;t use the <code>.product</code> method correctly. This is a very valuable insight. Thanks again."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1564485714, "last_edit_date": 1564485714, "creation_date": 1564484413, "answer_id": 57270113, "question_id": 57269864, "link": "https://stackoverflow.com/questions/57269864/why-do-these-two-methods-yield-different-results/57270113#57270113", "title": "Why do these two methods yield different results?", "body": "<p><code>&lt;&lt;</code> and <code>#push</code> are destructive operations (they change the receiver).</p>\n\n<p><code>+</code> (and consequently <code>+=</code> as well) is a non-destructive operation (it returns a new object, leaving the receiver unchanged).</p>\n\n<p>While they seem to be doing the same thing, this apparently small difference is crucial.</p>\n\n<p>This comes into play due to another error: all of your subarrays in <code>result</code> start off as the same object. If you add to one of them, you add to all of them.</p>\n\n<p>Why is this not an issue if you use <code>+=</code>? Because <code>result[k] += [v]</code> is the same as <code>result[k] = result[k] += [v]</code> (I'm lying here, there's a subtle difference, but it is not relevant here and just accept that they're the same for now to not get more confused :D ); and as <code>+</code> is non-destructive, <code>result[k] + [v]</code> is a different object than <code>result[k]</code>; when you update the value in the array with this assignment, you are not using the starting <code>[]</code> object any more, and the reference sharing error can't bite you any more.</p>\n\n<p>A better way to create your <code>result</code> array would be one of these:</p>\n\n<pre><code>result = Array.new(keys.size) { [] }\nresult = keys.map { [] }\n</code></pre>\n\n<p>which will create a new array object for each element.</p>\n\n<p>However, I would write it all quite differently:</p>\n\n<pre><code>a_of_h.each_with_object(Hash.new { |h, k| h[k] = [] }) { |h, r|\n  h.each { |k, v| r[k] &lt;&lt; v }\n}\n</code></pre>\n\n<p><code>each_with_hash</code> will give the passed object to the block as an additional argument (here <code>r</code>, for result), and will return it when the method is done. The argument \u2014 the object that will be in <code>r</code> \u2014 will be a hash with a <code>default_proc</code>: every time we try to get a key that's not inside yet, it will insert a new array there (i.e. instead of trying to pre-populate our result object, do it on-demand). Then we just go through each of the hashes in your array, and insert the value into the result hash without worrying if the key is there or not.</p>\n"}, {"comments": [{"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1564488588, "post_id": 57270116, "comment_id": 101040645, "body": "You&#39;re stating the obvious. Your answer should explain why the two operators behave differently, and why that difference leads to the problem OP has."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 0, "last_activity_date": 1564484421, "creation_date": 1564484421, "answer_id": 57270116, "question_id": 57269864, "link": "https://stackoverflow.com/questions/57269864/why-do-these-two-methods-yield-different-results/57270116#57270116", "title": "Why do these two methods yield different results?", "body": "<p>The first one does <code>hash[key] += value</code>. The second one does <code>hash[key] &lt;&lt; value</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 10627795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MDickten", "link": "https://stackoverflow.com/users/10627795/mdickten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 57270113, "answer_count": 2, "score": 0, "last_activity_date": 1564485714, "creation_date": 1564483463, "last_edit_date": 1564483812, "question_id": 57269864, "link": "https://stackoverflow.com/questions/57269864/why-do-these-two-methods-yield-different-results", "title": "Why do these two methods yield different results?", "body": "<p>According to all documentation, you can append an element to an array using <code>&lt;&lt;</code> or <code>.push</code> or <code>+=</code>, and the result ought to be the same. I have found it isn't. Can anybody explain to me what I am getting wrong? (I am using Ruby 2.3.1.)</p>\n\n<p>I have got a number of hashes. All of them contain the same keys. I would like to combine them to form one hash with all the collected values in an array. This is straightforward, you iterate through all the hashes and make a new one, collecting all the values like this:</p>\n\n<pre><code>    # arg is array of Hashes - keys must be identical\n    return {} unless arg\n    keys = (arg[0] ? arg[0].keys : [])\n\n    result = keys.product([[]]).to_h # value for each key is empty array.\n\n    arg.each do |h|\n      h.each { |k,v| result[k] += [v] }\n    end\n\n    result\n  end\n</code></pre>\n\n<p>If <em>instead of</em> using <code>+=</code> I use <code>.push</code> or <code>&lt;&lt;</code>, I get completely weird results.</p>\n\n<p>Using the following test array:</p>\n\n<pre><code>a_of_h = [{\"1\"=&gt;10, \"2\"=&gt;10, \"3\"=&gt;10, \"4\"=&gt;10, \"5\"=&gt;10, \"6\"=&gt;10, \"7\"=&gt;10, \"8\"=&gt;10, \"9\"=&gt;10, \"10\"=&gt;10}, {\"1\"=&gt;100, \"2\"=&gt;100, \"3\"=&gt;100, \"4\"=&gt;100, \"5\"=&gt;100, \"6\"=&gt;100, \"7\"=&gt;100, \"8\"=&gt;100, \"9\"=&gt;100, \"10\"=&gt;100}, {\"1\"=&gt;1000, \"2\"=&gt;1000, \"3\"=&gt;1000, \"4\"=&gt;1000, \"5\"=&gt;1000, \"6\"=&gt;1000, \"7\"=&gt;1000, \"8\"=&gt;1000, \"9\"=&gt;1000, \"10\"=&gt;1000}, {\"1\"=&gt;10000, \"2\"=&gt;10000, \"3\"=&gt;10000, \"4\"=&gt;10000, \"5\"=&gt;10000, \"6\"=&gt;10000, \"7\"=&gt;10000, \"8\"=&gt;10000, \"9\"=&gt;10000, \"10\"=&gt;10000}] \n</code></pre>\n\n<p>I get</p>\n\n<pre><code>merge_hashes(a_of_h)\n =&gt; {\"1\"=&gt;[10, 100, 1000, 10000], \"2\"=&gt;[10, 100, 1000, 10000], \"3\"=&gt;[10, 100, 1000, 10000], \"4\"=&gt;[10, 100, 1000, 10000], \"5\"=&gt;[10, 100, 1000, 10000], \"6\"=&gt;[10, 100, 1000, 10000], \"7\"=&gt;[10, 100, 1000, 10000], \"8\"=&gt;[10, 100, 1000, 10000], \"9\"=&gt;[10, 100, 1000, 10000], \"10\"=&gt;[10, 100, 1000, 10000]} \n</code></pre>\n\n<p>as I expect, but if I use <code>h.each { |k,v| result[k] &lt;&lt; v }</code> instead I get</p>\n\n<pre><code>buggy_merge_hashes(a_of_h)\n =&gt; {\"1\"=&gt;[10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], \"2\"=&gt;[10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], \"3\"=&gt;[10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], \"4\"=&gt;[10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], \"5\"=&gt;[10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], ...}\n</code></pre>\n\n<p>(I cut the rest.)</p>\n\n<p>What is it I don't know here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564485345, "post_id": 57270170, "comment_id": 101038802, "body": "thanks for the reply. That&#39;s giving me an error: <code>ActiveRecord::RecordNotFound in LocationsController#index Couldn&#39;t find Vehicle with &#39;id&#39;=eddc57bf-845e-4854-86d9-8d3788fb33c5 </code>"}, {"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564485510, "post_id": 57270170, "comment_id": 101038890, "body": "Can you tell me how you are calling this page? You must pass vehicle id to achieve this."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564486250, "post_id": 57270170, "comment_id": 101039315, "body": "<code>vehicles&#47;4d316e4b-8542-40b6-9409-bfd0769a115d&#47;locations</code>. In my params hash in the vehicles controller i swap out <code>id</code> for <code>unique_id</code> because the api receives requests from an external server with <code>id</code> in the body. i swapped them because it conflicted with the default rails <code>id</code> column."}, {"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564486441, "post_id": 57270170, "comment_id": 101039431, "body": "Then you can find vehicle as Vehicle.find_by!(unique_id: params[:vehicle_id]), But make sure this uniqe_id should not be unique across all vehicles."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564486668, "post_id": 57270170, "comment_id": 101039568, "body": "Thanks again. What do you mean it should not be unique across all vehicles? Each vehicle has its own unique_id."}, {"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564486864, "post_id": 57270170, "comment_id": 101039688, "body": "I mean you should have validates_uniqueness_of :unique_id validation in your vehicle model."}], "tags": [], "owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "is_accepted": true, "score": 1, "last_activity_date": 1564484648, "creation_date": 1564484648, "answer_id": 57270170, "question_id": 57269752, "link": "https://stackoverflow.com/questions/57269752/how-do-i-make-my-rails-api-index-action-show-only-the-instances-from-a-certain-i/57270170#57270170", "title": "How do I make my Rails api index action show only the instances from a certain id, when I have a nested route?", "body": "<p>In the index method of LocationsController, you are fetching all locations instead of locations for the given vehicle only.</p>\n\n<p>Change LocationsController index method as below,</p>\n\n<pre><code>def index\n  @locations = Vehicle.find(params[:vehicle_id]).locations\n  render json: @locations\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1564485830, "post_id": 57270388, "comment_id": 101039067, "body": "Both these solutions give me: <code>ActiveRecord::RecordNotFound in LocationsController#index Couldn&#39;t find Vehicle with &#39;id&#39;=4d316e4b-8542-40b6-9409-bfd0769a115d</code> when I try and reach <code>vehicles&#47;4d316e4b-8542-40b6-9409-bfd0769a115d&#47;locations</code>"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1564485401, "creation_date": 1564485401, "answer_id": 57270388, "question_id": 57269752, "link": "https://stackoverflow.com/questions/57269752/how-do-i-make-my-rails-api-index-action-show-only-the-instances-from-a-certain-i/57270388#57270388", "title": "How do I make my Rails api index action show only the instances from a certain id, when I have a nested route?", "body": "<blockquote>\n  <p>I have a Rails api with a nested route that should show only the locations of vehicles with a specific id from the endpoint /vehicles/:vehicle_id/locations however that endpoint give me all locations of all vehicles. Any ideas what I am doing wrong?</p>\n</blockquote>\n\n<p>The index action of your lications controller is showing all locations because that is exactly what you've written it to do:</p>\n\n<pre><code>def index \n  @locations = Location.all.order(\"vehicle_id\") \n  render json: @locations \nend\n</code></pre>\n\n<p>Why would expect it to do something other than what you've written?</p>\n\n<p>Instead, try:</p>\n\n<pre><code>def index \n  @vehicle = Vehicle.find(params[:vehicle_id])\n  @locations = @vehicle.locations\n  render json: @locations \nend\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>def index \n  @vehicle = Vehicle.find(params[:vehicle_id])\n  render json: @vehicle.locations \nend\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 57270170, "answer_count": 2, "score": 0, "last_activity_date": 1564485401, "creation_date": 1564483071, "question_id": 57269752, "link": "https://stackoverflow.com/questions/57269752/how-do-i-make-my-rails-api-index-action-show-only-the-instances-from-a-certain-i", "title": "How do I make my Rails api index action show only the instances from a certain id, when I have a nested route?", "body": "<p>I have a Rails api with a nested route that should show only the locations of vehicles with a specific id from the endpoint <code>/vehicles/:vehicle_id/locations</code> however that endpoint give me all locations of all vehicles. Any ideas what I am doing wrong? Here is my code.</p>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :vehicles do\n    resources :locations\n  end\nend\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_07_27_224818) do\n\n  create_table \"locations\", force: :cascade do |t|\n    t.float \"lat\"\n    t.float \"lng\"\n    t.datetime \"at\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"vehicle_id\"\n  end\n\n  create_table \"vehicles\", force: :cascade do |t|\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"unique_id\"\n  end\n\nend\n</code></pre>\n\n<p>controllers/vehicles_controller.rb</p>\n\n<pre><code>class VehiclesController &lt; ApplicationController\n   skip_before_action :verify_authenticity_token\n\n  def index\n    @vehicles = Vehicle.all\n    render json: @vehicles\n  end\n\n  def create\n    @vehicle = Vehicle.new(vehicle_params)\n\n    respond_to do |format|\n      if @vehicle.save\n        format.html \n      else\n        format.html \n      end\n    end\n\n  end\n\n  def destroy\n    @vehicle.destroy\n    respond_to do |format|\n      format.html\n    end\n  end\n\n  private\n\n    def vehicle_params\n      # swap id column value with unique_id to avoid conflict with primary key\n      params[:vehicle][:unique_id] = params[:vehicle].delete(:id)\n      params.require(:vehicle).permit(:unique_id)\n    end\nend\n</code></pre>\n\n<p>locations_controller.rb</p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n\n  def index\n    @locations = Location.all.order(\"vehicle_id\")\n    render json: @locations\n  end\n\n  def create\n    @vehicle = Vehicle.find_by!(unique_id: params[:vehicle_id])\n    @location = @vehicle.locations.new(location_params)    \n\n    respond_to do |format|\n      if @location.save\n        format.html \n      else\n        format.html \n      end\n    end\n  end\n\n  private\n\n    def location_params\n      params.require(:location).permit(:lat, :lng, :at, :vehicle_id)\n    end\nend\n</code></pre>\n\n<p>models/vehicle.rb</p>\n\n<pre><code>class Vehicle &lt; ApplicationRecord\n  has_many :locations\nend\n</code></pre>\n\n<p>models/locations.rb</p>\n\n<pre><code>class Location &lt; ApplicationRecord\n  belongs_to :vehicle\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "ubuntu", "nginx"], "comments": [{"owner": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564484093, "post_id": 57269505, "comment_id": 101038180, "body": "You can get more info with <code>cat &#47;proc&#47;22824&#47;cmdline</code> (replacing the process id as necessary)."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564572339, "post_id": 57269505, "comment_id": 101073844, "body": "@kdgregory - thanks for ur reply..but there is no result when i execute this command"}, {"owner": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564575158, "post_id": 57269505, "comment_id": 101075411, "body": "If that&#39;s the case, then the process wasn&#39;t running any more. You could also look for it in the standard locations: <code>&#47;bin</code>, <code>&#47;usr&#47;bin</code>, <code>&#47;sbin</code>, <code>&#47;var&#47;lib&#47;...</code>."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 36381, "user_id": 42126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17fa4a777eb1dddf1a2c8a81a266b1e8?s=128&d=identicon&r=PG", "display_name": "kdgregory", "link": "https://stackoverflow.com/users/42126/kdgregory"}, "edited": false, "score": 0, "creation_date": 1564581157, "post_id": 57269505, "comment_id": 101079133, "body": "@kdgregory - thanks for the reply <code>22824 ubuntu    20   0  425024 364816      4 S 163.8  4.5 243992:51 lltd</code> its is still running. I will check these locations as well"}], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564484119, "creation_date": 1564482201, "last_edit_date": 1564484119, "question_id": 57269505, "link": "https://stackoverflow.com/questions/57269505/lltd-process-taking-lot-of-memory-and-cpu-time", "title": "lltd process taking lot of memory and CPU time", "body": "<p>I am running rails app on <code>nginx+unicorn</code> on <code>aws</code> 8GB server, there is one process <code>lltd</code>. I have no clue what this process is about. I am not sure should I kill it or not as it may be a system process.</p>\n\n<p>This is my <code>top</code> command log</p>\n\n<pre><code>22824 ubuntu    20   0        4 S 138.2  4.4 241156:32 lltd                                                                                                                                                                       \n23283 ubuntu    20   0     4104 R  48.5  4.2   1:26.94 ruby                                                                                                                                                                       \n31631 mysql     20   0      0 S   8.6  4.1 264:54.60 mysqld                                                                                                                                                                     \n23293 ubuntu    20   0    4288 S   1.3  6.5   2:40.30 ruby                                                                                                                                                                       \n   36 root      20   0      0 S   0.7  0.0 103:33.00 kswapd0\n</code></pre>\n\n<p>can anyone help with me with this?</p>\n\n<p>I tried google this but there are not results on this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "comments"], "comments": [{"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "edited": false, "score": 0, "creation_date": 1564482518, "post_id": 57269467, "comment_id": 101037294, "body": "where you are displaying your comments?In post detail page?"}, {"owner": {"reputation": 846, "user_id": 7171619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i0Lab.jpg?s=128&g=1", "display_name": "codeinaire", "link": "https://stackoverflow.com/users/7171619/codeinaire"}, "edited": false, "score": 0, "creation_date": 1564482911, "post_id": 57269467, "comment_id": 101037537, "body": "The error you are getting when trying to loop over the comments in the view is because <code>.each</code> is not available on a String but only on an array and hash. If you are doing <code>@comments.body.each</code> that won&#39;t work because, I&#39;m assuming, the body is a string. You could try <code>@comments.each</code>. But I&#39;m not sure where <code>@comments</code> is being defined, is it meant to be <code>@commment</code>?"}, {"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "reply_to_user": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "edited": false, "score": 0, "creation_date": 1564483757, "post_id": 57269467, "comment_id": 101037986, "body": "@KrupaSuthar I am displaying the comments in on post show page."}, {"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "reply_to_user": {"reputation": 846, "user_id": 7171619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i0Lab.jpg?s=128&g=1", "display_name": "codeinaire", "link": "https://stackoverflow.com/users/7171619/codeinaire"}, "edited": false, "score": 0, "creation_date": 1564483870, "post_id": 57269467, "comment_id": 101038054, "body": "@codeinaire that makes sense about looping over  a string. Sorry yes that should be @ comment in the view.  Do I need to turn all the strings i.e. comments into an array and then iterate over them?"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564494695, "post_id": 57270089, "comment_id": 101044551, "body": "It took a little bit of play about but this one pretty much got me there. It displays them all together, but i will have to figure something out to separate them. Many thanks."}], "tags": [], "owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "is_accepted": true, "score": 2, "last_activity_date": 1564484309, "creation_date": 1564484309, "answer_id": 57270089, "question_id": 57269467, "link": "https://stackoverflow.com/questions/57269467/unable-to-displaying-comments-on-a-post/57270089#57270089", "title": "Unable To Displaying Comments On A Post", "body": "<p>In your posts controller's show method you should fetch comments and then you can show it in html page.</p>\n\n<p>For example,</p>\n\n<pre><code>def show\n @post = Post.includes(:comments).find(params[:id])\nend\n</code></pre>\n\n<p>and in your view file, you can iterate over comments like below,</p>\n\n<pre><code>@post.comments.each do |comment|\n# you logic here\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564486256, "post_id": 57270267, "comment_id": 101039317, "body": "I feel this one is extremely close. I have tried it out and it saves I can display the post, but no comments are displaying. When getting the page with the comments the console shows the following. `   Comment Load (0.4ms)  SELECT &quot;comments&quot;.* FROM &quot;comments&quot; WHERE &quot;comments&quot;.&quot;micropost_id&quot; IS NULL   Rendered comments/_comments.html.erb (1.5ms)   Rendered microposts/show.html.erb within layouts/application (16.5ms)   Rendered layouts/_header.html.erb (1.6ms) Completed 200 OK in 93ms (Views: 88.3ms | ActiveRecord: 1.2ms)`"}, {"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564486331, "post_id": 57270267, "comment_id": 101039357, "body": "The micropost_id is showing up as null for some reason."}, {"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564486459, "post_id": 57270267, "comment_id": 101039443, "body": "If I check out the comments table there is micropost_id present <code>#&lt;ActiveRecord::Relation [#&lt;Comment id: 1, body: &quot;Testing this comment section out baby&quot;, created_at: &quot;2019-07-30 11:22:07&quot;, updated_at: &quot;2019-07-30 11:22:07&quot;, micropost_id: 1&gt;</code>"}, {"owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564487286, "post_id": 57270267, "comment_id": 101039908, "body": "If I add <code>@comments = Comment.find_by(id: params[:id])</code> to be my controller and <code>&lt;%= @comment.body %&gt;</code> to my view it will display one comment. But if I try and loop over that it doesn&#39;t work as it is string. So I am almost there. I just need to be get them in a way so as which I can loop over them."}, {"owner": {"reputation": 303, "user_id": 9479253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd34f4996365a59ad414df6950d6d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Damaniya", "link": "https://stackoverflow.com/users/9479253/ashok-damaniya"}, "reply_to_user": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "edited": false, "score": 0, "creation_date": 1564742797, "post_id": 57270267, "comment_id": 101139931, "body": "you should debug that are you getting , params[:micropost_id], if not then you should try to sort out that first, if you are not able to get that micropost_id, and you are only able to get params[:id], which is comment id , then you should write messy query like @comments = Comment.where(micropost_id: Comment.find(params[:id]).micropost_id) , but i suggest you should not follow this approach , instead you should try to get micropost_id, from params."}], "tags": [], "owner": {"reputation": 303, "user_id": 9479253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd34f4996365a59ad414df6950d6d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Damaniya", "link": "https://stackoverflow.com/users/9479253/ashok-damaniya"}, "is_accepted": false, "score": 1, "last_activity_date": 1564484945, "creation_date": 1564484945, "answer_id": 57270267, "question_id": 57269467, "link": "https://stackoverflow.com/questions/57269467/unable-to-displaying-comments-on-a-post/57270267#57270267", "title": "Unable To Displaying Comments On A Post", "body": "<p>what you are doing is fetching single comment and try to loop through that object , which is not possible.</p>\n\n<p>what you want to do is display all the comments posted on 'Micropost' so what you need to do is just pass micropost_id in params and user where query like below</p>\n\n<pre><code>@comments = Comment.where(micropost_id: params[:micropost_id])  \n</code></pre>\n\n<p>then you can loop through that object in your .erb template</p>\n\n<pre><code>&lt;% @comments.each do|comment| %&gt;\n  &lt;%= comment.body %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57270089, "answer_count": 2, "score": 0, "last_activity_date": 1564484945, "creation_date": 1564482074, "question_id": 57269467, "link": "https://stackoverflow.com/questions/57269467/unable-to-displaying-comments-on-a-post", "title": "Unable To Displaying Comments On A Post", "body": "<p>I am adding comments to a post which save fine but I have been struggling to get them show more than one comments on a post. When I save it only shows the first comment posted. </p>\n\n<p>Comments Controller:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n  def create\n    @micropost = Micropost.find_by(id: params[:micropost_id])\n    @comment = \n@micropost.comments.create(params[:comment].permit(:body))\n    if @comment.save\n      flash[:success] = \"Comment Posted\"\n    end\n    redirect_to current_user\n  end\n\nend\n\ndef show\n  @comment = Comment.find_by(id: params[:id])\nend\n</code></pre>\n\n<p>end</p>\n\n<p>In the view I have:</p>\n\n<pre><code>  &lt;%= @comments.body %&gt;\n</code></pre>\n\n<p>I can show one comment, but when I write another the first one only shows. I tried to loop over them in the view with a do loop but I then get an error stating <code>undefined method .each for \"text from comment\":String</code> </p>\n\n<p>Maybe my show @comment needs improving or is there something I have to do in the view to get them all to display. The same do loops works for the posts, but I can seem to get it working for the comments.</p>\n\n<p>I also have another minor issue when there is no comments saved, I can't view the post at all because there is no body existing. I assume I will have to write some sort of if/else to state if there is no body, display anyway.</p>\n"}, {"tags": ["javascript", "ruby", "automated-tests", "cucumber", "pageobjects"], "comments": [{"owner": {"reputation": 538, "user_id": 7626999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCjFS.jpg?s=128&g=1", "display_name": "&#220;mit Apar\u0131", "link": "https://stackoverflow.com/users/7626999/%c3%9cmit-apar%c4%b1"}, "edited": false, "score": 0, "creation_date": 1564481065, "post_id": 57269065, "comment_id": 101036476, "body": "Can you share what you already tried?"}, {"owner": {"reputation": 21, "user_id": 11831140, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zg_LM1k9xhE/AAAAAAAAAAI/AAAAAAAAAKQ/psjoZ_7-3ao/photo.jpg?sz=128", "display_name": "Vidak", "link": "https://stackoverflow.com/users/11831140/vidak"}, "reply_to_user": {"reputation": 538, "user_id": 7626999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCjFS.jpg?s=128&g=1", "display_name": "&#220;mit Apar\u0131", "link": "https://stackoverflow.com/users/7626999/%c3%9cmit-apar%c4%b1"}, "edited": false, "score": 0, "creation_date": 1564483717, "post_id": 57269065, "comment_id": 101037964, "body": "Thanks &#220;mit, this is my very first question, so I overlooked to add what I have tried."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 11830718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZFkF.png?s=128&g=1", "display_name": "dumbledore", "link": "https://stackoverflow.com/users/11830718/dumbledore"}, "is_accepted": false, "score": 1, "last_activity_date": 1564483024, "creation_date": 1564483024, "answer_id": 57269739, "question_id": 57269065, "link": "https://stackoverflow.com/questions/57269065/how-to-get-a-value-from-browser-javascript-global-variable-using-cucumber-ruby-p/57269739#57269739", "title": "How to get a value from browser JavaScript global variable using Cucumber\\Ruby\\PageObject?", "body": "<p>You could try the following Ruby\\PageObject code:</p>\n\n<pre><code>class TestPage\n  include PageObject\n\n  page_url (\"&lt;system url that you are testing&gt;\")\n\n  def get_global_variable_value\n    value = self.browser.execute_script(\"return window.global_var\")\n    puts  \"Value of \"global_var\" is: \" + value\n  end\nend ```\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 11830718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZFkF.png?s=128&g=1", "display_name": "dumbledore", "link": "https://stackoverflow.com/users/11830718/dumbledore"}, "is_accepted": false, "score": 3, "last_activity_date": 1564483249, "creation_date": 1564483249, "answer_id": 57269806, "question_id": 57269065, "link": "https://stackoverflow.com/questions/57269065/how-to-get-a-value-from-browser-javascript-global-variable-using-cucumber-ruby-p/57269806#57269806", "title": "How to get a value from browser JavaScript global variable using Cucumber\\Ruby\\PageObject?", "body": "<p>Even better, you could easily make the get_global_variable_value to be used for any global variable name by:</p>\n\n<pre><code>class TestPage\n  include PageObject\n\n  page_url (\"&lt;system url that you are testing&gt;\")\n\n  def get_global_variable_value var_name\n    value = self.browser.execute_script(\"return window.#{var_name}\")\n    puts  \"Value of #{var_name} is: \" + value\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11831140, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zg_LM1k9xhE/AAAAAAAAAAI/AAAAAAAAAKQ/psjoZ_7-3ao/photo.jpg?sz=128", "display_name": "Vidak", "link": "https://stackoverflow.com/users/11831140/vidak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564483938, "creation_date": 1564480795, "last_edit_date": 1564483938, "question_id": 57269065, "link": "https://stackoverflow.com/questions/57269065/how-to-get-a-value-from-browser-javascript-global-variable-using-cucumber-ruby-p", "title": "How to get a value from browser JavaScript global variable using Cucumber\\Ruby\\PageObject?", "body": "<p>In my automatic tests I need to get a value of JavaScript global variable.</p>\n\n<p>For example, get a value of global_var from the following HTML:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;script&gt;\nvar global_var = \"John Smith\"\n&lt;/script&gt;\n&lt;h2&gt;Test JavaScript&lt;/h2&gt;\n\n&lt;button type=\"button\"\nonclick=\"document.getElementById('demo').innerHTML = global_var\"&gt;\nClick me to display \"global_var\" value.&lt;/button&gt;\n\n&lt;p id=\"demo\"&gt;&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt; \n</code></pre>\n\n<p>This is what I tried:</p>\n\n<p>browser.execute_script(\u201cdocument.global_var\u201d)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "puma"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4542721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce120901303fddd9e2ad4170e8dd3e0f?s=128&d=identicon&r=PG", "display_name": "dounokouno", "link": "https://stackoverflow.com/users/4542721/dounokouno"}, "edited": false, "score": 0, "creation_date": 1598407923, "post_id": 58773375, "comment_id": 112446689, "body": "Thank you for your comment. Currently there is another reason to change from puma to unicorn. I will also refer to it when using puma.  I also asked a similar question on puma&#39;s GitHub repository, so I&#39;d like to point you to the URL.  <a href=\"https://github.com/puma/puma/issues/1891\" rel=\"nofollow noreferrer\">github.com/puma/puma/issues/1891</a>"}], "tags": [], "owner": {"reputation": 136, "user_id": 394335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gA6xe.jpg?s=128&g=1", "display_name": "Jordan Pickwell", "link": "https://stackoverflow.com/users/394335/jordan-pickwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1573244953, "creation_date": 1573244953, "answer_id": 58773375, "question_id": 57267425, "link": "https://stackoverflow.com/questions/57267425/in-ruby-on-rails-v5-2-and-puma-v4-after-restarting-puma-at-the-time-of-logrotat/58773375#58773375", "title": "In Ruby on Rails v5.2 and Puma v4, after restarting puma at the time of logrotate, unnecessary workers continue to remain", "body": "<p>Puma's <code>phased-restart</code> is a rolling restart. Each worker is restarted one by one. The other thing, is that the command returns before the workers have been restarted.</p>\n\n<p>I also use <code>phased-restart</code>, but I don't have <code>logrotated</code> restart Puma, but instead just have it <code>copytruncate</code> the log files. It allows the file descriptors to remain the same. Now, maybe there are unforeseen problems with my approach, but I haven't seen any issues yet.</p>\n\n<p>Example logrotate config:</p>\n\n<pre><code>/path/to/rails/app/shared/log/*.log {\n  compress\n  copytruncate\n  daily\n  dateext\n  dateformat .%Y%m%d\n  dateyesterday\n  delaycompress\n  missingok\n  notifempty\n  rotate 36\n  su app_user app_user\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4542721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce120901303fddd9e2ad4170e8dd3e0f?s=128&d=identicon&r=PG", "display_name": "dounokouno", "link": "https://stackoverflow.com/users/4542721/dounokouno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573244953, "creation_date": 1564475497, "question_id": 57267425, "link": "https://stackoverflow.com/questions/57267425/in-ruby-on-rails-v5-2-and-puma-v4-after-restarting-puma-at-the-time-of-logrotat", "title": "In Ruby on Rails v5.2 and Puma v4, after restarting puma at the time of logrotate, unnecessary workers continue to remain", "body": "<p>We are uses Ruby on Rails v5.2 and Puma v4, rotating the Rails application log with logrotate, and restarting puma when it is rotated.</p>\n\n<p>We uses puma restart with <code>pumactl phased-restart</code>, but we used to send SIGUSR1 signal to restart it.</p>\n\n<p>Specifically, it is the following code.</p>\n\n<pre><code>test -s $pid &amp;&amp; kill -USR1 \"$(cat /path/to/app/tmp/pids/puma.pid)\"\n</code></pre>\n\n<p>Refs: <a href=\"https://github.com/puma/puma/blob/master/docs/restart.md\" rel=\"nofollow noreferrer\">https://github.com/puma/puma/blob/master/docs/restart.md</a></p>\n\n<p>Although puma restarts without any problem for a while, after several restarts, unnecessary workers will be left as shown below. In the following, there are two worker 7s. Perhaps pid = 15241 seems to be an unnecessary worker.</p>\n\n<pre><code>$ ps aux | grep [p]uma\nusername     10096 22.8  3.0 3357088 1012940 ?     Sl   13:01   1:12 puma: cluster worker 0: 14749 [app]\nusername     10135 26.6  3.0 3562476 1016716 ?     Sl   13:01   1:22 puma: cluster worker 1: 14749 [app]\nusername     10196 17.9  3.4 3688000 1145328 ?     Sl   13:01   0:54 puma: cluster worker 2: 14749 [app]\nusername     10243 15.6  3.9 3753452 1287424 ?     Sl   13:01   0:46 puma: cluster worker 3: 14749 [app]\nusername     10325 16.8  3.6 3758280 1189004 ?     Sl   13:01   0:48 puma: cluster worker 4: 14749 [app]\nusername     10381 15.9  3.1 3423564 1034904 ?     Sl   13:01   0:45 puma: cluster worker 5: 14749 [app]\nusername     10420 16.6  3.2 3689844 1070112 ?     Sl   13:01   0:46 puma: cluster worker 6: 14749 [app]\nusername     10464 21.9  2.6 3155296 888148 ?      Sl   13:01   0:59 puma: cluster worker 7: 14749 [app]\nusername     14749  0.0  0.0 216884 20340 ?        Sl    7\u670819   0:56 puma 4.0.0 (tcp://0.0.0.0:9292) [app]\nusername     15241 60.7  9.2 5273704 3049272 ?     Sl   11:02  75:20 puma: cluster worker 7: 14749 [app]\n</code></pre>\n\n<p>My question is, I would like to know how to restart puma without leaving unnecessary workers.</p>\n\n<p>Or I would like to know if there is a way to find out what each worker is doing to find out why this is the case.</p>\n\n<p>Or, please tell me if there is a way to put in logs etc and check the situation after the fact.</p>\n\n<p>The main usage version is as follows.</p>\n\n<ul>\n<li>Ruby: 2.4.2</li>\n<li>Ruby on Rails: 5.2.2.1</li>\n<li>Puma: 4.0.0</li>\n</ul>\n\n<p>As mentioned above, puma restarts are performed by <code>pumactl phased-restart</code>, but the situation was the same by sending SIGUSR1 signal.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564467714, "post_id": 57265295, "comment_id": 101029570, "body": "You&#39;re trying to migrate one environment (development) from another environment (test)?"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 6340479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BQhUDTwBGuI/AAAAAAAAAAI/AAAAAAAAAZM/CmdySEA-1R4/photo.jpg?sz=128", "display_name": "Abhishek Sah", "link": "https://stackoverflow.com/users/6340479/abhishek-sah"}, "edited": false, "score": 0, "creation_date": 1564471798, "post_id": 57265493, "comment_id": 101031393, "body": "I want to assert whether <code>db:migrate</code> was called!  An expectation this method being it true won&#39;t ensure that migrations were actually called ? Correct me if I am wrong. (Think it the TDD way ! )"}, {"owner": {"reputation": 334, "user_id": 2606111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUdFG.jpg?s=128&g=1", "display_name": "Mahys116", "link": "https://stackoverflow.com/users/2606111/mahys116"}, "reply_to_user": {"reputation": 88, "user_id": 6340479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BQhUDTwBGuI/AAAAAAAAAAI/AAAAAAAAAZM/CmdySEA-1R4/photo.jpg?sz=128", "display_name": "Abhishek Sah", "link": "https://stackoverflow.com/users/6340479/abhishek-sah"}, "edited": false, "score": 1, "creation_date": 1564556642, "post_id": 57265493, "comment_id": 101065064, "body": "@AbhishekSah <code>system</code> returns true if the command gives zero exit status, false for non zero exit status. Returns nil if command execution fails. So you see if happens something wrong. But also you can check your migration version by <code>ActiveRecord::Migrator.current_version</code>"}], "tags": [], "owner": {"reputation": 334, "user_id": 2606111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUdFG.jpg?s=128&g=1", "display_name": "Mahys116", "link": "https://stackoverflow.com/users/2606111/mahys116"}, "is_accepted": false, "score": 0, "last_activity_date": 1564467898, "creation_date": 1564467898, "answer_id": 57265493, "question_id": 57265295, "link": "https://stackoverflow.com/questions/57265295/unit-test-how-to-test-if-rails-migrations-being-called/57265493#57265493", "title": "Unit test: How to test if rails migrations being called?", "body": "<p><code>system('bin/rails db:migrate RAILS_ENV=development')</code> return <code>true</code>, when it works. So <code>expect(run_migrations).to eq true</code> will be enough. </p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1564471425, "creation_date": 1564471425, "answer_id": 57266341, "question_id": 57265295, "link": "https://stackoverflow.com/questions/57265295/unit-test-how-to-test-if-rails-migrations-being-called/57266341#57266341", "title": "Unit test: How to test if rails migrations being called?", "body": "<p>I would stub that call and check if that stub was called.</p>\n\n<pre><code>before do\n  allow(Kernel).to receive(:system).and_return(true)\nend\n\nit 'runs migrations' do\n  instance.run_migrations # or however you trigger such that method to be called\n\n  expect(Kernel).to have_received(:system).with('bin/rails db:migrate RAILS_ENV=development').once\nend\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 6340479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BQhUDTwBGuI/AAAAAAAAAAI/AAAAAAAAAZM/CmdySEA-1R4/photo.jpg?sz=128", "display_name": "Abhishek Sah", "link": "https://stackoverflow.com/users/6340479/abhishek-sah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57266341, "answer_count": 2, "score": 1, "last_activity_date": 1564471425, "creation_date": 1564466971, "question_id": 57265295, "link": "https://stackoverflow.com/questions/57265295/unit-test-how-to-test-if-rails-migrations-being-called", "title": "Unit test: How to test if rails migrations being called?", "body": "<p>I have a method that runs rails migrations. (Part of installation automation of a RAILS app). </p>\n\n<p>I want to test whether this method calls the rails migrations. I don't want to check the results of running migrations because that would be testing rails migrations. Unit testing this method implies I want to check whether my method in turn called rails migration or not.</p>\n\n<p>How to unit test this method in rspec?</p>\n\n<pre><code>def run_migrations\n  system('bin/rails db:migrate RAILS_ENV=development')\nend\n</code></pre>\n"}, {"tags": ["ruby", "refinements"], "comments": [{"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1564469236, "post_id": 57265249, "comment_id": 101030225, "body": "Just to be sure, you think even just something like <code>using StrictFP</code>  is too much boilerplate?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1564471537, "post_id": 57265249, "comment_id": 101031296, "body": "Refinements are really resistant to metaprogramming, they just don&#39;t work unless you write &#39;using&#39; in the lexical scope (same file) as the original class definition. I don&#39;t know a better way to do this besides getting 100% test coverage and making your tests fail if the methods get called"}, {"owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564475248, "post_id": 57265249, "comment_id": 101033228, "body": "@maxpleaner Can you be more specific about what you mean by &quot;really resistant&quot;? Will I run into problems if both the file that defines and the file that uses the metaprogramming are in scope of the <code>using</code> statement?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564475401, "post_id": 57265249, "comment_id": 101033320, "body": "You basically can&#39;t call <code>using</code> in any metaprogramming, that&#39;s the issue. First of all you can&#39;t call it inside of any method.  Second, you can only use <code>using</code> on <code>self.</code> Third, even if you do something like <code>MyClass.class_exec { using SomePatch }</code>  the refinement won&#39;t actually be active in any other file."}, {"owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564475717, "post_id": 57265249, "comment_id": 101033497, "body": "@maxpleaner Ah ok, I misunderstood your previous comment."}, {"owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "reply_to_user": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1564476036, "post_id": 57265249, "comment_id": 101033666, "body": "@DarkWiiPlayer Yes, my application contains over 500 Ruby files. Around 100 of them use methods that I potentially want to restrict. That\u2019s a large number of lines to add. It would be problematic if I forget to add the <code>using</code> statement after starting to use e.g. <code>String#to_d</code> somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1564484162, "last_edit_date": 1564484162, "creation_date": 1564481768, "answer_id": 57269375, "question_id": 57265249, "link": "https://stackoverflow.com/questions/57265249/monkey-patching-methods-only-inside-my-own-code-by-automatically-using-refineme/57269375#57269375", "title": "Monkey-patching methods only inside my own code (by automatically using refinements?)", "body": "<p>You can monkeypatch if you're careful about it. I tried to implement it, see if it works. Obviously, you'll take a large performance hit, so I wouldn't recommend it in production :P One could speed it up quite a bit by memoising the tested locations instead of going up the directory tree each time the method is called.</p>\n\n<p>The idea is to move the original method out of the way if defined on the class, then substitute a method that will check whether or not you're calling from your code. I'm using the directory that contains <code>.git</code> directory as your project directory; if you have a <code>vendor</code> directory directly in your project directory, it is exempt, as is everything outside the project directory. If you are in a location that is exempt, just pass things along to either the saved old method or up the inheritance chain; if not, scream foul.</p>\n\n<pre><code>require 'pathname'\n\nPROJECT_CODE = Pathname.new(__dir__).ascend.find { |loc| (loc / '.git').directory? }\nVENDOR_CODE = PROJECT_CODE / 'vendor'\n\nclass ForbiddenMethodError &lt; StandardError; end\n\ndef forbid_method(klass, meth, &amp;block)\n  case\n  when klass.instance_methods(false).include?(meth)\n    old_meth = :\"forbid_method_old_#{meth}\"\n    klass.alias_method old_meth, meth\n  when klass.respond_to?(meth)\n    old_meth = nil\n  else\n    raise ArgumentError, \"No such method: #{klass}##{meth}\"\n  end\n\n  klass.define_method(meth) do |*args|\n    if !block || instance_exec(*args, &amp;block)\n      caller_loc = Pathname.new(caller_locations.first.path).expand_path\n      caller_loc.ascend do |ancestor|\n        case ancestor\n        when PROJECT_CODE\n          raise ForbiddenMethodError, \"#{klass}##{meth}\", caller[2..]\n        when VENDOR_CODE\n          break\n        end\n      end\n    end\n\n    if old_meth\n      send(old_meth, *args)\n    else\n      super(*args)\n    end\n  end\nend\n</code></pre>\n\n<p>With this, you can make <code>Float#to_d</code> and (conditionally) <code>String#to_d</code> fail in project code:</p>\n\n<pre><code>require 'bigdecimal/util'\nforbid_method(Float, :to_d)\nforbid_method(String, :to_d) { !BigDecimal(self) rescue true }\n</code></pre>\n\n<p>If you pass a block, the function is only forbidden if the block condition is truthy. (The block will get passed all the method's arguments, and will execute with the forbidden method's receiver as <code>self</code>.)</p>\n"}], "owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564484162, "creation_date": 1564466720, "question_id": 57265249, "link": "https://stackoverflow.com/questions/57265249/monkey-patching-methods-only-inside-my-own-code-by-automatically-using-refineme", "title": "Monkey-patching methods only inside my own code (by automatically using refinements?)", "body": "<p>In my Ruby (on Rails) project, I\u2019d like to forbid or restrict the usage of some methods provided by the standard library. Examples: I\u2019d like to forbid calling <code>Float#to_d</code> because I had a rounding error when someone was using that method on a Float literal. I\u2019d like to restrict <code>String#to_d</code> to work only with fully valid Strings because I had some bug resulting from <code>'string'.to_d</code> returning <code>0.0</code>.</p>\n\n<p>Monkey-patching / overriding these methods globally is of course a bad idea. It may break some dependency.</p>\n\n<p>Adding a linter rule that scans the code to not have calls to any <code>#to_d</code> method has the problem that it falsely restricts calling legit methods like <code>Integer#to_d</code>. Of course, all the legit methods could be added to the corresponding classes under a different name. But this requires adding a lot of boilerplace (for the methods) and changing all calls of these methods.</p>\n\n<p>I also considered using refinements. This would be similar to monkey-patching, but apply only to scopes where the refinement is used. However, having to add <code>using</code> statements to every file would be ugly and error-prone. Is it possible to activate a refinement automatically for every file in my project, but not for dependencies?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1564466067, "post_id": 57264902, "comment_id": 101028923, "body": "Hi, May I know why you put \\ infront of $stderr and $stdout?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1564466919, "post_id": 57264902, "comment_id": 101029228, "body": "Because it&#39;s a shell script, otherwise bash will think those are shell variables you&#39;re interpolating."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1564467260, "post_id": 57264902, "comment_id": 101029359, "body": "Try this to see <code>x=1; ruby -e &quot;puts $x&quot;</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1564468037, "post_id": 57264902, "comment_id": 101029687, "body": "I am getting this error <code>W:\\&gt;x=1; ruby -e &quot;puts $x&quot; &#39;x&#39; is not recognized as an internal or external command, operable program or batch file.</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1564469569, "post_id": 57264902, "comment_id": 101030380, "body": "@Rajagopalan ok, you&#39;re on Windows (not bash). But my point is that unintended things happen when you don&#39;t escape it."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1564464918, "creation_date": 1564464918, "answer_id": 57264902, "question_id": 57264713, "link": "https://stackoverflow.com/questions/57264713/running-rspec-with-e-parameter/57264902#57264902", "title": "running rspec with &quot;-e&quot; parameter", "body": "<p>Googling a bit, I found this issue thread on the RSpec github: <a href=\"https://github.com/rspec/rspec-core/issues/359\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-core/issues/359</a></p>\n\n<p>It seems you can run your RSpec tests from Ruby by putting </p>\n\n<pre><code>RSpec::Core::Runner::run({}, $stderr, $stdout)\n</code></pre>\n\n<p>after your definitions.</p>\n\n<p>The following minimal test works for me:</p>\n\n<pre><code>ruby -e \"require 'rspec'\ndescribe 'My behaviour' do\n  it 'should do something' do\n    expect(1).to eq(2)\n  end\nend\nRSpec::Core::Runner::run({}, \\$stderr, \\$stdout)\n\"\n</code></pre>\n"}], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57264902, "answer_count": 1, "score": 0, "last_activity_date": 1564464918, "creation_date": 1564463662, "question_id": 57264713, "link": "https://stackoverflow.com/questions/57264713/running-rspec-with-e-parameter", "title": "running rspec with &quot;-e&quot; parameter", "body": "<p>I can run the simple ruby program like</p>\n\n<pre><code>ruby -e \"puts 'raja'\"\n</code></pre>\n\n<p>but when I run Rspec file, I run this way</p>\n\n<pre><code>ruby rspec my_example_spec.rb\n</code></pre>\n\n<p>Said that, Do I have any way to pass the rspec program as parameter as I have done in the first line?</p>\n\n<p>I tried</p>\n\n<pre><code>ruby -e rspec \"require 'rspec'\nrequire 'watir'\ndescribe 'My behaviour' do\n  it 'should do something' do\n    b = Watir::Browser.new\n    b.goto 'www.google.com'\n    b.text_field(name: 'q').set 'Rajagopalan'\n    sleep 2\n    b.close\n  end\nend\"\n</code></pre>\n\n<p>But it's not running. How can I pass rspec program with '-e' parameter?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "edited": false, "score": 0, "creation_date": 1564472958, "post_id": 57265401, "comment_id": 101031967, "body": "Thanks, this way of debugging the code will be very useful for me to do more analysis for the rest of the program."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1564467472, "creation_date": 1564467472, "answer_id": 57265401, "question_id": 57264579, "link": "https://stackoverflow.com/questions/57264579/i-dont-understand-this-ruby-code-that-converts-from-base-256-to-decimal/57265401#57265401", "title": "I don&#39;t understand this ruby code that converts from base-256 to decimal", "body": "<p><code>inject</code> performs a loop, where the \"accumulating variable\" (also known as \"memo object\") is a two-element array, which is initially set to <code>[0,1]</code>. On each iteration, this object is passed as <code>[sum, pow]</code> to the loop body, together with the next element from the input array, which is stored in <code>byte</code>. The loop body calculates the updated memo object to be used on the next iteration. The result of the <code>inject</code> is the final value of the memo object.</p>\n\n<p>You can follow what is going on, by replacing the loop body by</p>\n\n<pre><code>[pow * byte.ord, pow * 256].tap do\n  |new_sum, new_pow|\n  puts \"Working on byte #{byte.inspect}\"\n  puts \"old sum and pow : #{sum},#{pow}\" \n  puts \"new sum and pow : #{new_sum}, #{new_pow}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "edited": false, "score": 0, "creation_date": 1564472952, "post_id": 57265476, "comment_id": 101031962, "body": "Thank you, your answer was very complete to understand the code. As well said @fphilipe the github guy was wrong but still your explanation is excellent."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 0, "last_activity_date": 1564471509, "last_edit_date": 1564471509, "creation_date": 1564467814, "answer_id": 57265476, "question_id": 57264579, "link": "https://stackoverflow.com/questions/57264579/i-dont-understand-this-ruby-code-that-converts-from-base-256-to-decimal/57265476#57265476", "title": "I don&#39;t understand this ruby code that converts from base-256 to decimal", "body": "<p>Let's say the string is \"AB\" (for which the ASCII codes are 65 and 66):</p>\n\n<p><code>string.reverse.bytes</code> gives you <code>[66,65]</code></p>\n\n<p><code>[66,65].inject([0,1])</code> goes through the array <code>[66,65]</code> and brings along the result array <code>[0,1]</code> into every iteration. Your loop needs to return the altered version of the array and it gets passed to the next iteration.</p>\n\n<p>Example 1:</p>\n\n<pre><code>[66,65].inject([0,1]) do |(sum, pow), byte|\n  puts \"sum: #{sum} pow: #{pow} byte: #{byte}\"\n  [sum, pow] # this gets passed to the next round\n end\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>sum: 0 pow: 1 byte: 66\nsum: 0 pow: 1 byte: 65\n</code></pre>\n\n<p>With a different kind of \"memo\" array:</p>\n\n<pre><code>memo = []\n[66,65].inject(memo) do |memo, byte|\n  memo &lt;&lt; \"byte is #{byte}\"\n  memo\n end\n puts memo.inspect\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>[\"byte is 66\", \"byte is 65\"]\n</code></pre>\n\n<p>So, inject is like <code>each</code>, but the given \"memo\" object will be passed from each round to the next.</p>\n\n<p>The method uses the memo to hold two values: the sum and the multiplier for the next byte.</p>\n\n<p>Adding debug output to the original method:</p>\n\n<pre><code>def debase256(string)\n  string.reverse.bytes.inject([0, 1]) do |(sum, pow), byte|\n    puts \"sum: #{sum} pow: #{pow} byte: #{byte}\"\n    [pow * byte.ord, pow * 256]\n  end.first\nend\n</code></pre>\n\n<p>Running this with <code>debase256(\"ABC\")</code> outputs:</p>\n\n<pre><code>sum: 0 pow: 1 byte: 67\nsum: 67 pow: 256 byte: 66\nsum: 16896 pow: 65536 byte: 65\n</code></pre>\n\n<p>So, we see that the input for the first round's <code>|(sum, pow), byte|</code> is <code>(0, 1), 67</code>.</p>\n\n<p><code>pow * byte.ord</code> is <code>1 * 67 = 67</code></p>\n\n<p><code>pow * 256</code> is <code>1 * 256 = 256</code>.</p>\n\n<p>So, the <code>|(sum, pow), byte|</code> for the second round will be: <code>(67, 256), 66</code>.</p>\n\n<p><code>pow * byte.ord</code> is <code>256 * 66 = 16896</code>.</p>\n\n<p><code>pow * 256</code> is <code>256 * 256 = 65536</code>.</p>\n\n<p>So the <code>|(sum, pow), byte|</code> for the last round is: <code>(16896, 65536), 65</code>:</p>\n\n<p><code>pow * byte.ord</code> is <code>65536 * 65 = 4259840</code>.</p>\n\n<p><code>pow * 256</code> is <code>65536 * 256 = 16777216</code>.</p>\n\n<p>Because this was the last round, the block will return the memo, which is <code>[4259840, 16777216]</code>. The first element contains the desired result and the last one is no longer needed, so <code>.first</code> is called to just get the sum.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "edited": false, "score": 1, "creation_date": 1564472947, "post_id": 57265601, "comment_id": 101031959, "body": "Thank you very much! There was indeed a mistake, good thing you noticed. The answer is 42 hehe."}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 2, "last_activity_date": 1564468392, "creation_date": 1564468392, "answer_id": 57265601, "question_id": 57264579, "link": "https://stackoverflow.com/questions/57264579/i-dont-understand-this-ruby-code-that-converts-from-base-256-to-decimal/57265601#57265601", "title": "I don&#39;t understand this ruby code that converts from base-256 to decimal", "body": "<p>The code is wrong. It's not doing the sum. The first array item in the block should be <code>sum + pow * byte.ord</code>. Also, there's no point in having <code>byte.ord</code> as <code>Integer#ord</code> just returns itself.</p>\n\n<p>Thus, the correct code would be:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def debase256(string)\n  string.reverse.bytes.inject([0, 1]) do |(sum, pow), byte|\n    [sum + pow * byte, pow * 256]\n  end.first\nend\n</code></pre>\n\n<hr>\n\n<p>This code is a bit hard to follow though. Maybe the following code (without the method declaration) helps you in understanding it better:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string.reverse.bytes.map.with_index do |byte, i|\n  byte * 256**i\nend.sum\n</code></pre>\n\n<p>Let's look at an example with the string <code>\"Test\"</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string = \"Test\"\n</code></pre>\n\n<p>First, we reverse it:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string.reverse # =&gt; \"tseT\"\n</code></pre>\n\n<p>Then we get the bytes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>string.reverse.bytes # =&gt; [116, 115, 101, 84]\n</code></pre>\n\n<p>Now we want to construct a base 10 number from this base 256 number. We do this by multiplying each slot index <code>i</code> with <code>256^i</code> where <code>i</code> starts at 0.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\"Test\".reverse.bytes.map.with_index { |byte, i| byte * 256**i }\n# =&gt; [116 * 256^0, 115 * 256^1, 101 * 256^2, 84 * 256^3]\n# =&gt; [116 * 1, 115 * 256, 101 * 65536, 84 * 16777216]\n# =&gt; [116, 29440, 6619136, 1409286144]\n</code></pre>\n\n<p>Finally, we take the sum, which is the base 10 representation of it.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\"Test\".reverse.bytes.map.with_index { |byte, i| byte * 256**i }.sum\n# =&gt; 1415934836\n</code></pre>\n\n<hr>\n\n<p>In order to understand what we are doing, let's try the same thing with a base 10 to base 10 conversion. Let's assume we have a number in base 10, e.g. <code>1234</code>. We get the digits of this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>1234.digits\n# =&gt; [4, 3, 2, 1]\n</code></pre>\n\n<p>Notice how <code>#digits</code> already returns the digits reversed.</p>\n\n<p>Now, in base 10, every slot <code>i</code> needs to be multiplied by <code>10^i</code> (compared to <code>256^i</code> above in the base 256 case):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>1234.digits.map.with_index { |byte, i| byte * 10**i }\n# =&gt; [4 * 10^0, 3 * 10^1, 2 * 10^2, 1 * 10^3]\n# =&gt; [4 * 1, 3 * 10, 2 * 100, 1 * 1000]\n# =&gt; [4, 30, 200, 1000]\n</code></pre>\n\n<p>Summing it will give us the base 10 number:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>1234.digits.map.with_index { |byte, i| byte * 10**i }.sum\n# =&gt; 1234\n</code></pre>\n\n<p>Thus, the only difference is the base, the logic is the same.</p>\n\n<hr>\n\n<p>A further example that you might have encountered is an RGB color value in hex, e.g. <code>#ac4fbe</code>. For red, green, and blue we have a value ranging from 0 to 255 encoded in hexadecimal. Hexadecimal is a fancy word for base 16. Typically, hexadecimal digits are represented as <code>0</code> to <code>9</code> and <code>a</code> to <code>f</code>:</p>\n\n<pre><code>0 1 2 3 4 5 6 7 8 9  a  b  c  d  e  f\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n</code></pre>\n\n<p>Knowing this, let's look at the red value of the color <code>#ac4fbe</code>, which is represented by the first to characters <code>ac</code>.</p>\n\n<p>The logic here is the same as above. Reversing this gives us <code>ca</code>. If we get the base 10 numbers for each character, that's <code>[12, 10]</code>. Let's multiply each slot with <code>16^i</code>:</p>\n\n<pre><code>[12 * 16^0, 10 * 16^1] == [12 * 1, 10 * 16] == [12, 160]\n</code></pre>\n\n<p>The sum <code>12 + 160</code> is <code>172</code>, which is the value for the red component in the color.</p>\n\n<p>Again, it's the same logic as in the other examples.</p>\n\n<hr>\n\n<p>I hope these examples help you understand how this works. As an exercise, try converting this binary (i.e. base 2) number to base 10:</p>\n\n<pre><code>101010\n</code></pre>\n\n<p>Remember, these are the slots:</p>\n\n<pre><code>digits: 1 0 1 0 1 0\nslot i: 5 4 3 2 1 0\n</code></pre>\n\n<p>(Hint: it's the answer to the Ultimate Question of Life, The Universe, and Everything.)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 57265601, "answer_count": 3, "score": 0, "last_activity_date": 1564471509, "creation_date": 1564462861, "question_id": 57264579, "link": "https://stackoverflow.com/questions/57264579/i-dont-understand-this-ruby-code-that-converts-from-base-256-to-decimal", "title": "I don&#39;t understand this ruby code that converts from base-256 to decimal", "body": "<p><a href=\"https://gist.github.com/jasiek/2781381\" rel=\"nofollow noreferrer\">Code in Github</a></p>\n\n<p>The objective of the code is simple: convert base-256 byte string to base-10</p>\n\n<pre><code>def debase256(string)\n  string.reverse.bytes.inject([0, 1]) do |(sum, pow), byte|\n    [pow * byte.ord, pow * 256]\n  end.first\nend\n</code></pre>\n\n<p>I tried to read it, but I only went as far as 'reverse.bytes'</p>\n\n<p>I can't imagine in my head how the bytes move and change during the process.</p>\n\n<p>An example explaining this is all I need.</p>\n"}, {"tags": ["ruby", "loops", "each"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1564461008, "post_id": 57264250, "comment_id": 101027454, "body": "Not sure what you&#39;re asking. Is it <code>account_map.values.each { |account| ... }</code> you want?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564462683, "post_id": 57264250, "comment_id": 101027915, "body": "<code>each</code> initially passes the first element of <code>records</code>, which is <code>{&quot;1&quot;=&gt;[{&quot;account_id&quot;=&gt;&quot;1&quot;, &quot;v&quot;=&gt;&quot;1&quot;}</code> to the block and sets the block variable <code>account_map</code> equal to that hash. Then <code>account_map.values</code> is computed, which is <code>[[{&quot;account_id&quot;=&gt;&quot;1&quot;, &quot;v&quot;=&gt;&quot;1&quot;}, ... , {&quot;account_id&quot;=&gt;&quot;1&quot;, &quot;v&quot;=&gt;&quot;4&quot;]]</code>. Note that this is an array of all values of that hash, which is but one, namely, an array of hashes.  Then <code>account_map.values[0]</code> is calculated which is that array of hashes that is the value of the key <code>1</code> in the hash that is the first element of <code>records</code>..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564462909, "post_id": 57264250, "comment_id": 101027965, "body": "...You then want to do something with that array of hashes, but the second element of <code>records</code>, which is a hash with a single key equal to <code>&quot;2&quot;</code> is never processed. Is that your intent? You would be better off explaining in words what you want to do. For example, &quot;given an array of hashes, <code>record</code>, where each hash has a single key whose value is an array of hashes, I wish to....&quot;."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1564464500, "post_id": 57264250, "comment_id": 101028427, "body": "Please fix, <code>records</code> is not a valid object. There is something wrong, for example here <code>{&quot;account_id&quot;=&gt;&quot;1&quot;, &quot;v&quot;=&gt;&quot;4&quot;]}</code>. Maybe you also want to add the expected result."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 6337003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bh17B.jpg?s=128&g=1", "display_name": "Jeremie Zazoun", "link": "https://stackoverflow.com/users/6337003/jeremie-zazoun"}, "is_accepted": true, "score": 0, "last_activity_date": 1565003871, "creation_date": 1565003871, "answer_id": 57357503, "question_id": 57264250, "link": "https://stackoverflow.com/questions/57264250/best-way-to-iterate-a-list-of-hash-in-ruby/57357503#57357503", "title": "Best way to iterate a list of hash in ruby", "body": "<p>Your example is quite confusing, but the regular way to iterate a hash is the following</p>\n\n<pre><code>hash.each do |key, value|\nend\n</code></pre>\n\n<p>So in your example it looks like you should do</p>\n\n<pre><code>records.each do |account_map| \n    account_map.each do |index, array|\n        array.each do |hash|\n            hash['account_id'] # This is how you access your data\n            hash['v']          # This is how you access your data\n        end\n    end\nend\n</code></pre>\n\n<p>Of course you should use better variables names than index, array and hash.</p>\n"}], "owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 57357503, "answer_count": 1, "score": 0, "last_activity_date": 1565003871, "creation_date": 1564460505, "question_id": 57264250, "link": "https://stackoverflow.com/questions/57264250/best-way-to-iterate-a-list-of-hash-in-ruby", "title": "Best way to iterate a list of hash in ruby", "body": "<p>I have data structure like List&lt; HashMap&lt; String, List>>:</p>\n\n<blockquote>\n  <p>records = [{\"1\"=>[{\"account_id\"=>\"1\", \"v\"=>\"1\"}, {\"account_id\"=>\"1\",\n  \"v\"=>\"2\"}, {\"account_id\"=>\"1\", \"v\"=>\"3\"}, {\"account_id\"=>\"1\",\n  \"v\"=>\"4\"]},  {\"2\"=>[{\"account_id\"=>\"2\", \"v\"=>\"4\"}, {\"account_id\"=>\"2\",\n  \"v\"=>\"4\"}, {\"account_id\"=>\"2\", \"v\"=>\"4\"}]}]</p>\n</blockquote>\n\n<p>I don't care about the keys in hashmap (\"1\" and \"2\" in this case), and want to iterate values of map by group:</p>\n\n<pre><code>records.each do |account_map| \n    account_record = account_map.values[0] # This line\n        for i in (0 ... account_record.size - 1)\n            #do something and update account_record[i]\n        end\n    end\nend\n</code></pre>\n\n<p>How can I merge <code>account_record = account_map.values[0]</code> into <code>each</code> loop or make it look better. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1564454185, "post_id": 57263476, "comment_id": 101026162, "body": "<code>where(start_date &lt;= start_date )</code> is not likely to do what you want. That&#39;s <code>where(true)</code>. Do you mean <code>where(&quot;start_date &lt;= ?&quot;, start_date )</code>? Similar issue with <code>and(end_date =&gt; end_date )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1620, "user_id": 3119467, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zwQvq.png?s=128&g=1", "display_name": "ramamoorthy_villi", "link": "https://stackoverflow.com/users/3119467/ramamoorthy-villi"}, "edited": false, "score": 0, "creation_date": 1564464824, "post_id": 57263581, "comment_id": 101028549, "body": "brilliant @Schwern"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1564454990, "last_edit_date": 1564454990, "creation_date": 1564453893, "answer_id": 57263581, "question_id": 57263476, "link": "https://stackoverflow.com/questions/57263476/handle-ruby-send-nil/57263581#57263581", "title": "handle ruby send nil", "body": "<p>This can be solved by using a normal <code>if</code> and taking advantage of the chaining nature of queries.</p>\n\n<p>Note that your <code>where</code> clause isn't quite right. Values need to be passed in using <a href=\"https://guides.rubyonrails.org/active_record_querying.html#array-conditions\" rel=\"nofollow noreferrer\">placeholders</a>. While there is a <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or\" rel=\"nofollow noreferrer\"><code>.or</code></a> there is no <code>.and</code>. Additional <code>.where</code> calls will go together with <code>and</code>.</p>\n\n<p>Also note that I've avoided hard coding the <code>Car</code> class name in the scope. This ensures it will work with subclasses.</p>\n\n<pre><code> scope :sold_between, -&gt; (start_date, end_date,exclude_used_cars=true){\n    query = where(\n        \"start_date &lt;= :start_date and end_date &gt;= :end_date\",\n        { start_date: start_date, end_date: end_date }\n    )\n    if exclude_used_cars\n      query = query.exclude_used_cars\n    end\n\n    query\n }  \n</code></pre>\n\n<p>Because you can chain queries and scopes like this consider whether there's a need for a special <code>exclude_used_cars</code> parameter, especially one that defaults to <code>true</code>. The user of <code>sold_between</code> can as easily add the scope themselves. This is simpler and more explicit.</p>\n\n<pre><code>scope :sold_between, -&gt; (start_date, end_date) {\n   where(\n       \"start_date &lt;= :start_date and end_date &gt;= :end_date\",\n       { start_date: start_date, end_date: end_date }\n   )\n}  \n\n# All cars\nCars.sold_between(start, end)\n\n# Without used cars\nCars.sold_between(start, end).exclude_used_cars\n</code></pre>\n"}], "owner": {"reputation": 1620, "user_id": 3119467, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zwQvq.png?s=128&g=1", "display_name": "ramamoorthy_villi", "link": "https://stackoverflow.com/users/3119467/ramamoorthy-villi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 57263581, "answer_count": 1, "score": 0, "last_activity_date": 1564457225, "creation_date": 1564452880, "last_edit_date": 1564457225, "question_id": 57263476, "link": "https://stackoverflow.com/questions/57263476/handle-ruby-send-nil", "title": "handle ruby send nil", "body": "<p>scope : </p>\n\n<pre><code>class Car &lt; ApplicationRecord\n scope :sold_between, -&gt; (start_date, end_date,exclude_used_cars=true){\n\n    _used = exclude_used_cars ? \"exclude_used_cars\" : \"\"\n\n    Car.where(\"start_date &lt;= ?\", start_date  ).and(\"end_date &lt;= ?\", end_date ).send(_used)  \n\n }  \n\n scope :exclude_used_cars, -&gt; {\n        where.not(state: :used)\n }\n</code></pre>\n\n<p>Problem: </p>\n\n<p>stuck with <code>.send(_used)</code>  I need to pass some valid symbols, but actually I have nil value <code>exclude_used_cars</code> when it is false. </p>\n\n<p>Any better way solving this. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1564453436, "post_id": 57263375, "comment_id": 101026036, "body": "Bang on in 15 minutes. Not bad."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1564453589, "last_edit_date": 1564453589, "creation_date": 1564451901, "answer_id": 57263375, "question_id": 57263288, "link": "https://stackoverflow.com/questions/57263288/delete-all-similar-keys-from-nested-hash/57263375#57263375", "title": "Delete all similar keys from nested hash", "body": "<p>You can write a function to recursively traverse Hashes and Arrays.</p>\n\n<pre><code>def delete_recursively(thing, key_to_delete)\n  case thing\n  when Hash\n    # Delete the key\n    thing.delete(key_to_delete)\n\n    # Recurse into each remaining hash value.\n    thing.each_value do |value|\n      delete_recursively(value, key_to_delete)\n    end\n  when Array\n    # Recurse into each value of the array.\n    thing.each do |value|\n      delete_recursively(value, key_to_delete)\n    end\n  end\nend\n</code></pre>\n\n<p>This can be expanded to include other data types as necessary.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564459862, "last_edit_date": 1564459862, "creation_date": 1564452795, "answer_id": 57263467, "question_id": 57263288, "link": "https://stackoverflow.com/questions/57263288/delete-all-similar-keys-from-nested-hash/57263467#57263467", "title": "Delete all similar keys from nested hash", "body": "<p>This of course calls for a recursive solution. The following method does not mutate the original hash.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def recurse(obj, key_to_delete)\n  case obj\n  when Array\n    obj.map { |e| recurse(e, key_to_delete) }\n  else # hash\n    obj.reject { |k,_| k == key_to_delete }.transform_values do |v|\n      case v\n      when Hash, Array\n        recurse(v, key_to_delete)\n      else\n        v\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>h = { id: 1, name: \"test\", children: [\n        { id: 1, name: \"kid 1\" }, { id: 2, name: \"kid 2\", grandkids: [\n            { id: 3, name: \"gkid1\" }] }\n      ]\n    }\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>recurse(h, :id)\n  #=&gt; { :name=&gt;\"test\", :children=&gt;[\n  #       {:name=&gt;\"kid 1\"}, {:name=&gt;\"kid 2\", :grandkids=&gt;[{:name=&gt;\"gkid1\"}]}\n  #     ]\n  #   }          \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The operations performed by recursive methods are always difficult to explain. In my experience the best way is to salt the code with puts statements. However, that in itself is not enough because when viewing output it is difficult to keep track of the level of recursion at which particular results are obtained and either passed to itself or returned to a version of itself. The solution to that is to indent and un-indent results, which is what I've done below. Note the way I've structured the code and the few helper methods I use are fairly general-purpose, so this approach can be adapted to examine the operations performed by other recursive methods.</p>\n\n<pre><code>INDENT = 8\n@col = -INDENT\ndef indent; @col += INDENT; end\ndef undent; @col -= INDENT; end\ndef pu(s); print \" \"*@col; puts s; end\ndef puhline; pu('-'*(70-@col)); end \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def recurse(obj, key_to_delete)      \n  begin                                                           # rem\n    indent                                                        # rem\n    puhline                                                       # rem\n    pu \"passed obj = #{obj}, key_to_delete = #{key_to_delete}\"    # rem   \n    case obj\n    when Array\n      pu \"processing Array...\"                                    # rem\n      obj.map do |e|\n        pu \"  calling recurse(#{e}, #{key_to_delete})...\"         # rem\n        recurse(e, key_to_delete)\n      end\n    else # hash\n      obj.reject { |k,_| k == :id }.\n          tap { |h| pu \"  obj with :id removed=#{h}\" }.           # rem\n          transform_values do |v| \n            pu \"  in tranform_values, v=#{v}\"                     # rem\n            case v\n            when Hash, Array\n              pu \"    v is Hash or Arrary\"                        # rem\n              pu \"    calling recurse(#{v}, #{key_to_delete})...\" # rem\n              recurse(v, key_to_delete)\n            else\n              pu \"    keeping the literal v\"                      # rem\n              v\n            end\n          end\n    end.tap { |obj| pu \"returning #{obj}\" }        \n  ensure\n    puhline                                                       # rem\n    undent\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>recurse(h, :id)\n----------------------------------------------------------------------\npassed obj = {:id=&gt;1, :name=&gt;\"test\", :children=&gt;[{:id=&gt;1, :name=&gt;\"kid 1\"},\n         {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}]},\n       key_to_delete = id\n  obj with :id removed={:name=&gt;\"test\", :children=&gt;[{:id=&gt;1, :name=&gt;\"kid 1\"},\n    {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}]}\n  in tranform_values, v=test\n    keeping the literal v\n  in tranform_values, v=[{:id=&gt;1, :name=&gt;\"kid 1\"},\n    {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}]\n    v is Hash or Arrary\n    calling recurse([{:id=&gt;1, :name=&gt;\"kid 1\"},\n      {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}], id)...\n        --------------------------------------------------------------\n        passed obj = [{:id=&gt;1, :name=&gt;\"kid 1\"},\n                 {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}],\n               key_to_delete = id\n        processing Array...\n          calling recurse({:id=&gt;1, :name=&gt;\"kid 1\"}, id)...\n                ------------------------------------------------------\n                passed obj = {:id=&gt;1, :name=&gt;\"kid 1\"}, key_to_delete = id\n                  obj with :id removed={:name=&gt;\"kid 1\"}\n                  in tranform_values, v=kid 1\n                    keeping the literal v\n                returning {:name=&gt;\"kid 1\"}\n                ------------------------------------------------------\n          calling recurse({:id=&gt;2, :name=&gt;\"kid 2\",\n            :grandkids=&gt;[{:id=&gt;3, :name=&gt;\"gkid1\"}]}, id)...\n                ------------------------------------------------------\n                passed obj = {:id=&gt;2, :name=&gt;\"kid 2\", :grandkids=&gt;\n                         [{:id=&gt;3, :name=&gt;\"gkid1\"}]},\n                       key_to_delete = id\n                  obj with :id removed={:name=&gt;\"kid 2\", :grandkids=&gt;\n                    [{:id=&gt;3, :name=&gt;\"gkid1\"}]}\n                  in tranform_values, v=kid 2\n                    keeping the literal v\n                  in tranform_values, v=[{:id=&gt;3, :name=&gt;\"gkid1\"}]\n                    v is Hash or Arrary\n                    calling recurse([{:id=&gt;3, :name=&gt;\"gkid1\"}], id)...\n                        ----------------------------------------------\n                        passed obj = [{:id=&gt;3, :name=&gt;\"gkid1\"}],\n                               key_to_delete = id\n                        processing Array...\n                          calling recurse({:id=&gt;3, :name=&gt;\"gkid1\"}, id)...\n                                --------------------------------------\n                                passed obj = {:id=&gt;3, :name=&gt;\"gkid1\"},\n                                       key_to_delete = id\n                                  obj with :id removed={:name=&gt;\"gkid1\"}\n                                  in tranform_values, v=gkid1\n                                    keeping the literal v\n                                returning {:name=&gt;\"gkid1\"}\n                                --------------------------------------\n                        returning [{:name=&gt;\"gkid1\"}]\n                        ----------------------------------------------\n                returning {:name=&gt;\"kid 2\", :grandkids=&gt;[{:name=&gt;\"gkid1\"}]}\n                ------------------------------------------------------\n        returning [{:name=&gt;\"kid 1\"},\n                   {:name=&gt;\"kid 2\", :grandkids=&gt;[{:name=&gt;\"gkid1\"}]}]\n        --------------------------------------------------------------\nreturning {:name=&gt;\"test\", :children=&gt;[{:name=&gt;\"kid 1\"},\n             {:name=&gt;\"kid 2\", :grandkids=&gt;[{:name=&gt;\"gkid1\"}]}]}\n----------------------------------------------------------------------\n  #=&gt; {:name=&gt;\"test\", :children=&gt;[{:name=&gt;\"kid 1\"},\n      {:name=&gt;\"kid 2\", :grandkids=&gt;[{:name=&gt;\"gkid1\"}]}]} \n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57263375, "answer_count": 2, "score": 2, "last_activity_date": 1564486111, "creation_date": 1564451000, "last_edit_date": 1564486111, "question_id": 57263288, "link": "https://stackoverflow.com/questions/57263288/delete-all-similar-keys-from-nested-hash", "title": "Delete all similar keys from nested hash", "body": "<p>Given a hash like this:</p>\n\n<pre><code>{\n  id: 1,\n  name: \"test\",\n  children: [\n    { id: 1, name: \"kid 1\" },\n    { id: 2, name: \"kid 2\" }\n  ]\n}\n</code></pre>\n\n<p>How can I remove <em>all</em> <code>id</code> keys recursively?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1591736358, "last_edit_date": 1591736358, "creation_date": 1564446571, "answer_id": 57262821, "question_id": 57262791, "link": "https://stackoverflow.com/questions/57262791/why-am-i-seeing-a-hash-rendered-to-the-dom/57262821#57262821", "title": "Why am I seeing a hash rendered to the DOM?", "body": "<p>Because the <code>=</code> in</p>\n\n<pre><code>&lt;%= @work_item.technologies.each do |t| %&gt;\n</code></pre>\n\n<p>indicates that you want <code>@work_item.technologies</code> to be output to the view. </p>\n\n<p>Instead, use </p>\n\n<pre><code>&lt;% @work_item.technologies.each do |t| %&gt;\n</code></pre>\n\n<p>BTW, that's not a <code>hash</code>, it's an <code>enumerable</code>. </p>\n"}], "owner": {"reputation": 127, "user_id": 10725180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ILCL.jpg?s=128&g=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/10725180/jack-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57262821, "answer_count": 1, "score": 0, "last_activity_date": 1591736358, "creation_date": 1564446238, "question_id": 57262791, "link": "https://stackoverflow.com/questions/57262791/why-am-i-seeing-a-hash-rendered-to-the-dom", "title": "Why am I seeing a hash rendered to the DOM?", "body": "<p>I am building a Portfolio website that has a simple view file for projects I have worked on. On my \"work\" view I render a collection of \"technologies\" that I used to build a particular product. This is working great, and each technology renders just fine. However, right below the  that renders the technologies the plain hash is also being rendered, and I cannot figure out why.</p>\n\n<p>I am following a tutorial for this and I have double checked that my code is the same as the instructor's.</p>\n\n<p><strong><em>Work View</em></strong></p>\n\n<pre><code>&lt;%= image_tag @work_item.main_image unless @work_item.main_image.nil?  %&gt;\n\n&lt;h1&gt;Title: &lt;%= @work_item.title %&gt;&lt;/h1&gt;\n\n&lt;em&gt;&lt;%= @work_item.subtitle %&gt;&lt;/em&gt;\n\n&lt;p&gt;&lt;%= @work_item.body %&gt;&lt;/p&gt;\n\n&lt;h2&gt;Technologies Used:&lt;/h2&gt;\n\n&lt;%= @work_item.technologies.each do |t| %&gt;\n&lt;p&gt;&lt;%= t.name %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n\n</code></pre>\n\n<p><strong><em>Schema</em></strong></p>\n\n<pre><code> create_table \"technologies\", force: :cascade do |t|\n    t.string \"name\"\n    t.bigint \"work_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"work_id\"], name: \"index_technologies_on_work_id\"\n  end\n\n</code></pre>\n\n<p><strong><em>controller method being used via def show via a before_action</em></strong></p>\n\n<pre><code>  def set_work\n    @work_item = Work.find(params[:id])\n  end\n</code></pre>\n\n<p><strong><em>Technology Model</em></strong></p>\n\n<pre><code>class Technology &lt; ApplicationRecord\n  belongs_to :work\nend\n</code></pre>\n\n<p><strong><em>Work Model</em></strong></p>\n\n<pre><code>class Work &lt; ApplicationRecord\n  has_many :technologies\n  accepts_nested_attributes_for :technologies,\n                                reject_if: lambda { |attrs| attrs['name'].blank? }\n  include Placeholder\n  validates_presence_of :title, :body, :main_image, :thumb_image\n\n  def self.react\n    where(subtitle: \"React\")\n  end\n\n  scope :ruby_on_rails, -&gt; { where(subtitle: \"Ruby on Rails\") }\n\n  after_initialize :set_defaults\n\n  def set_defaults\n    self.main_image ||= Placeholder.image_generator(height: 600, width: 400)\n    self.thumb_image ||= Placeholder.image_generator(height: 350, width: 200)\n  end\nend\n</code></pre>\n\n<p><strong><em>Here is a screenshot of what I'm seeing</em></strong></p>\n\n<p><a href=\"https://imgur.com/a/2T3SRZv\" rel=\"nofollow noreferrer\">https://imgur.com/a/2T3SRZv</a></p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1564442609, "creation_date": 1564442609, "answer_id": 57262450, "question_id": 57262429, "link": "https://stackoverflow.com/questions/57262429/unescape-string-containing-octal-bit-pattern/57262450#57262450", "title": "Unescape string containing octal bit pattern", "body": "<p>You can just evaluate it like this:</p>\n\n<pre><code>s.gsub(/\\\\(\\d+)/) { |v| $1.to_i(8).chr }\n</code></pre>\n\n<p>Where that interpolates the substitutions as octal (base 8 argument to <code>to_i</code>).</p>\n"}], "owner": {"reputation": 17, "user_id": 5786495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JdjdPlCHiys/AAAAAAAAAAI/AAAAAAAAT_A/5ZEILiCIuD0/photo.jpg?sz=128", "display_name": "sapphyrus", "link": "https://stackoverflow.com/users/5786495/sapphyrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 57262450, "answer_count": 1, "score": 0, "last_activity_date": 1564442621, "creation_date": 1564442341, "last_edit_date": 1564442621, "question_id": 57262429, "link": "https://stackoverflow.com/questions/57262429/unescape-string-containing-octal-bit-pattern", "title": "Unescape string containing octal bit pattern", "body": "<p>I'm having trouble unescaping a string containing an <a href=\"https://docs.ruby-lang.org/en/2.5.0/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">octal bit pattern</a> (<code>\"\\50\\51\"</code>) in Ruby.</p>\n\n<p>I've tried <a href=\"https://ruby-doc.org/core-2.5.0/String.html#method-i-undump\" rel=\"nofollow noreferrer\"><code>String#undump</code></a>, <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/json/rdoc/JSON.html#method-i-load\" rel=\"nofollow noreferrer\"><code>JSON#load</code></a> and <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/yaml/rdoc/YAML.html\" rel=\"nofollow noreferrer\"><code>YAML#load</code></a>. They all don't seem to unescape octal bit patterns. <a href=\"https://apidock.com/ruby/Kernel/eval\" rel=\"nofollow noreferrer\"><code>Kernel#eval</code></a> does this, but I'd like to avoid using it.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>str = '\"\\\\50\\\\51\"'\n\n# expected result (but insecure)\neval(str)\n# =&gt; \"()\"\n\n# doesn't handle octal bit patterns\nstr.undump\n# =&gt; \"\\\\50\\\\51\"\n</code></pre>\n"}, {"tags": ["ruby", "binding", "irb"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564437505, "post_id": 57261860, "comment_id": 101022885, "body": "Look into <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">github.com/pry/pry</a> for an idea of how others do similar work."}, {"owner": {"reputation": 5, "user_id": 11843356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97322b341111990382b02a7c965973aa?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11843356/abhishek"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564437952, "post_id": 57261860, "comment_id": 101023014, "body": "Thanks @anothermh for guiding me. But again I will have to use require &#39;pry&#39; and trying to open interactive session through binding.pry.                                               I am trying to avoid existing libraries."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564447932, "post_id": 57261860, "comment_id": 101025068, "body": "I meant you should look at pry to see how <i>they</i> do it."}, {"owner": {"reputation": 5, "user_id": 11843356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97322b341111990382b02a7c965973aa?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11843356/abhishek"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1564510328, "post_id": 57261860, "comment_id": 101052063, "body": "Sure I got your point."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11843356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97322b341111990382b02a7c965973aa?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11843356/abhishek"}, "edited": false, "score": 0, "creation_date": 1564509958, "post_id": 57277577, "comment_id": 101051897, "body": "Statements like x=1 ; y = 1 ; then enter x + y should fetch results inside irb, till q is pressed."}], "tags": [], "owner": {"reputation": 5, "user_id": 11843356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97322b341111990382b02a7c965973aa?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11843356/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1564509871, "creation_date": 1564509871, "answer_id": 57277577, "question_id": 57261860, "link": "https://stackoverflow.com/questions/57261860/how-can-i-create-my-own-irb-using-binding/57277577#57277577", "title": "How can I create my own irb using binding?", "body": "<p>I think I wanted something like this(IRB is created, but still unable to evaluate statements) :</p>\n\n<pre><code>class Demo\n  def initialize(n)\n    @secret = self.class.send(:define_method,n) { instance_eval\"#{n}\" }\n  end\n  def get_binding\n    binding\n  end\nend\n\nuser_input = ''\nk2 = Demo.new(user_input)\nb2 = k2.get_binding\n\nuntil user_input == 'q' do\n  user_input = gets.chomp\n  puts eval('@secret', b2)\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11843356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97322b341111990382b02a7c965973aa?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11843356/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564509871, "creation_date": 1564437326, "last_edit_date": 1564437568, "question_id": 57261860, "link": "https://stackoverflow.com/questions/57261860/how-can-i-create-my-own-irb-using-binding", "title": "How can I create my own irb using binding?", "body": "<p>Trying to write a program communicating interactively to user through the command line.\nWe can give blocks to get evaluated or leave blank as we interact with normal irb. Something like :</p>\n\n<pre><code>irb(main):001:0&gt; 1+2\n#=&gt; 3\nirb(main):002:0&gt; class Foo\nirb(main):003:1&gt;  def foo\nirb(main):004:2&gt;    print 1\nirb(main):005:2&gt;  end\nirb(main):006:1&gt; q\n[2156][giles@nikola:~]$\n#=&gt; nil\n</code></pre>\n\n<p>After typing 'q' on this interactive shell we should be able to exit irb shell as well as the complete program.</p>\n\n<p>I have created a program which opens this interactive session and we can perform certain operations on existing content of program. Like we can change the value of @var\nirb(main):001:0> @var = 'new'\n=> new</p>\n\n<p>But I want to use binding to achieve this and also do not want to call irb methods using \"#require 'irb' \" within my code.</p>\n\n<p>My solution: </p>\n\n<pre><code>require 'irb'\nclass C\n    def my_method\n        @var = 'hi'\n        $my_binding = binding\n        IRB.start(__FILE__)\n    end\nend\n\nC.new.my_method\n</code></pre>\n\n<p>Expected Result: I want to implement it in a way like -</p>\n\n<pre><code>class Bind\n  def get_binding(param)\n    binding\n  end\nend\n\n....\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "matcher"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1564433861, "post_id": 57260932, "comment_id": 101021735, "body": "I think what you are looking for is called a custom matcher and the implementation can be found here <a href=\"https://relishapp.com/rspec/rspec-expectations/v/3-8/docs/custom-matchers/define-a-custom-matcher#scoped-in-a-module\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-expectations/v/3-8/docs/&hellip;</a>"}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564440951, "post_id": 57260932, "comment_id": 101023707, "body": "thanks @engineersmnky, I will look into this."}], "answers": [{"tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": false, "score": 0, "last_activity_date": 1564591560, "creation_date": 1564591560, "answer_id": 57295561, "question_id": 57260932, "link": "https://stackoverflow.com/questions/57260932/not-able-to-use-rspec-expect-inside-module-method/57295561#57295561", "title": "not able to use RSpec expect inside module method", "body": "<p>The reason you have an error is because <code>expect</code> method is defined in <a href=\"https://www.rubydoc.info/github/rspec/rspec-expectations/RSpec%2FMatchers:expect\" rel=\"nofollow noreferrer\"><code>RSpect::Matchers</code></a> module.</p>\n\n<p>In order for methods defined in <code>MyModule</code> to have access to <code>expect</code> you can include it into rspec config like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.configure do |c|\n  c.include MyModule\nend\n</code></pre>\n\n<p>There are also ways to include it in only certain tests/groups. See more details about defining helper methods <a href=\"https://relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564591560, "creation_date": 1564431930, "question_id": 57260932, "link": "https://stackoverflow.com/questions/57260932/not-able-to-use-rspec-expect-inside-module-method", "title": "not able to use RSpec expect inside module method", "body": "<p>For one of my RSpec tests I have decided to create a module which contains a method that does the work of verifying actual and expected data. In the below module mytest function has expect matcher.</p>\n\n<pre><code>module MyModule\n   def self.mytest(actual, expected)\n       expect(actual[0]['stats']).to         eq expected[0]['stats']\n   end\nend\n</code></pre>\n\n<p>The problem I am running into now is when I execute my tests, I get following error</p>\n\n<pre><code>NoMethodError:\n       undefined method `expect' for ModuleName:Module\n       Did you mean?  exec \n</code></pre>\n\n<p>If I use above expect statement outside of the module in my tests it works fine but I want to be able to use it in the method inside the Module. Any idea why I am getting above error and how to resolve it? </p>\n"}, {"tags": ["ruby", "terminal", "failed-installation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564432699, "post_id": 57260555, "comment_id": 101021274, "body": "Seeing <code>Gemset &#39;&#39; does not exist</code> with an empty string suggests RVM is in some weird state."}, {"owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564432915, "post_id": 57260555, "comment_id": 101021369, "body": "What do you suggest ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564433165, "post_id": 57260555, "comment_id": 101021452, "body": "Switch gemsets. Reset RVM. <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow noreferrer\">Possibly use <code>rbenv</code></a>."}, {"owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564433988, "post_id": 57260555, "comment_id": 101021776, "body": "Ok i try with rbenv"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564437617, "post_id": 57260555, "comment_id": 101022922, "body": "Have you simply run <code>rvm install 2.6.3</code> followed by <code>rvm --default use 2.6.3</code>?"}, {"owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "edited": false, "score": 0, "creation_date": 1564445841, "post_id": 57260555, "comment_id": 101024702, "body": "Yes, i implode it and install it again, same prob&#39;"}, {"owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "edited": false, "score": 0, "creation_date": 1564445930, "post_id": 57260555, "comment_id": 101024718, "body": "I remove RVM and take RBENV and it&#39;s working ! Thank you tadman ! For the next step, i follow this tutorial <a href=\"https://gorails.com/setup/osx/10.14-mojave#homebrew\" rel=\"nofollow noreferrer\">gorails.com/setup/osx/10.14-mojave#homebrew</a>  in response to Cary request ;)"}], "owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564445063, "creation_date": 1564429832, "last_edit_date": 1564445063, "question_id": 57260555, "link": "https://stackoverflow.com/questions/57260555/ruby-2-6-3-install-fail-on-mac", "title": "Ruby 2.6.3 Install fail on Mac", "body": "<p>I want to proceed to install Ruby 2.6.3 on my Macbook with this :</p>\n\n<p><code>rvm use ruby --install --default</code></p>\n\n<p>The output I am receiving is : </p>\n\n<pre><code>\"ruby-2.6.3 - #extracting ruby-2.6.3 to /Users/.rvm/src/ruby-2.6.3.....\nruby-2.6.3 -     #configuring......................................................|\nruby-2.6.3 - #post-configuration.\nruby-2.6.3 - \n#compiling........................................................|\nError running '__rvm_make -j4',\nplease read /Users/.rvm/log/1564427981_ruby-2.6.3/make.log\"\n\n****There has been an error while running make. Halting the installation.\nGemset '' does not exist, 'rvm ruby-2.6.3 do rvm gemset create ' first, or \nappend '--create'.****   \n</code></pre>\n\n<p>I tried to reinstall gem and ruby but it is the same</p>\n\n<p>Have you got an idea please ?</p>\n\n<p>Thanks you guys </p>\n"}, {"tags": ["ruby", "net-ssh"], "comments": [{"owner": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564429742, "post_id": 57259611, "comment_id": 101020213, "body": "@engineersmnky thanks for your response, I did tried using exec!. Given(/^Run ESP jobs$/) do require &#39;net/ssh&#39; Net::SSH.start(&#39;host&#39;, &#39;user&#39;, :password =&gt; &quot;my_password&quot; ) do |ssh| ssh.exec!(&#39;cd /etl/dev/scripts/bin&#39;) puts ssh.exec!(&#39;pwd&#39;) ssh.exec!(&#39;startworkflow01.ksh folder_name workflow_name&#39;) end end The test is getting passed but if i check the logs they are not generating any logs. When i run thru linux manually it works."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "edited": false, "score": 0, "creation_date": 1564435383, "post_id": 57261546, "comment_id": 101022225, "body": "Thanks for the reply. I tried using the below code     Given(/^Run informatica jobs$/) do     require &#39;net/ssh&#39;     Net::SSH.start(&#39;host&#39;, &#39;user&#39;, :password =&gt; &quot;password&quot; ) do |ssh|     ssh.exec!( &#39;/etl/dev/scripts/bin/startworkflow01.ksh app_CCMLB_FPERX      wf_4100_CCML_CAP_PKG_EXT&#39;)     end     end Still i dont see any logs for it."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "edited": false, "score": 0, "creation_date": 1564435667, "post_id": 57261546, "comment_id": 101022338, "body": "And does startworkflow01.ksh expect a particular working directory? Does it expect other shell variables to be present? Note that it is NOT a login shell, so no <code>.bashrc</code> files will be run to set up your environment."}, {"owner": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "edited": false, "score": 0, "creation_date": 1564501353, "post_id": 57261546, "comment_id": 101048718, "body": "I kind of able to change the dir. When i run the test, I am getting this bash: startworkflow01.ksh: command not found. startworkflow01.ksh is present in the path above mentioned. I am not sure what it means."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "edited": false, "score": 0, "creation_date": 1564502164, "post_id": 57261546, "comment_id": 101049125, "body": "You should run it with <code>.&#47;startworkflow01.ksh</code>. Note the dot and slash. Like I said your environment will not be set up. If it does not work you would be better off using something like <code>Net::SSH::Shell</code> instead: <a href=\"https://github.com/mitchellh/net-ssh-shell\" rel=\"nofollow noreferrer\">github.com/mitchellh/net-ssh-shell</a>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1564435124, "creation_date": 1564435124, "answer_id": 57261546, "question_id": 57259611, "link": "https://stackoverflow.com/questions/57259611/running-the-workflows-thru-ruby-and-test-gets-passed-but-the-workflows-does-not/57261546#57261546", "title": "Running the workflows thru Ruby and Test gets passed but the workflows does not trigger", "body": "<p>Neither <code>exec</code> nor <code>exec!</code> will preserve state between calls, since those commands are not running on top of a shell like Bash or Zsh.</p>\n\n<p>Therefore to run a script in a certain folder you either have to address the script with an absolute path:</p>\n\n<pre><code>ssh.exec!(\"/the/path/to/my_script\")\n</code></pre>\n\n<p>Or string related commands together with <code>;</code> in the same <code>exec</code> call, to preserve state:</p>\n\n<pre><code>ssh.exec!(\"cd /the/path/to; my_script; ...\")\n</code></pre>\n\n<p>If you want to run everything on top of a real shell, then it gets more complicated. I recommend to look here for more details on that:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/5051782/ruby-net-ssh-login-shell\">ruby net-ssh login shell</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11239226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8eb65c2b5d8e5ee44e1f1051ffe9e?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/11239226/phantom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564435124, "creation_date": 1564425171, "last_edit_date": 1564435103, "question_id": 57259611, "link": "https://stackoverflow.com/questions/57259611/running-the-workflows-thru-ruby-and-test-gets-passed-but-the-workflows-does-not", "title": "Running the workflows thru Ruby and Test gets passed but the workflows does not trigger", "body": "<p>I am trying to run the informatica workflows thru ruby. Using the Net-ssh gem. When i run my test it gets passed but my jobs are not triggered when i check the logs they are not creating.</p>\n\n<p>Below is my code. </p>\n\n<pre><code>Given(/^Run ESP jobs$/) do\n  require 'net/ssh'\n  Net::SSH.start('host', 'user', :password =&gt; \"my_password\" ) do\n    # I am trying to connect to remote server.\n    ssh.exec('cd /etl/dev/scripts/bin')\n    puts ssh.exec('pwd')\n    # After changing the directory i tried to see my path but my path still \n    # shows in the home \n    # below command is in this path \"/etl/dev/scripts/bin\"\n    ssh.exec('startworkflow01.ksh folder_name workflow_name')\n  end\nend\n</code></pre>\n\n<p>I expect to run the job. Please provide me your suggestions in completing this task. Thanks for your valuable time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yarnpkg"], "comments": [{"owner": {"reputation": 1438, "user_id": 3380951, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/620df1169b41ccd28dfd9c3d5cfa994d?s=128&d=identicon&r=PG", "display_name": "XoXo", "link": "https://stackoverflow.com/users/3380951/xoxo"}, "edited": false, "score": 0, "creation_date": 1607466196, "post_id": 57258233, "comment_id": 115280873, "body": "related: <a href=\"https://github.com/rails/webpacker/issues/1135\" rel=\"nofollow noreferrer\">github.com/rails/webpacker/issues/1135</a>"}], "answers": [{"tags": [], "owner": {"reputation": 614, "user_id": 7594860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XyeJ0.png?s=128&g=1", "display_name": "ekr990011", "link": "https://stackoverflow.com/users/7594860/ekr990011"}, "is_accepted": false, "score": 0, "last_activity_date": 1566490503, "creation_date": 1566490503, "answer_id": 57613419, "question_id": 57258233, "link": "https://stackoverflow.com/questions/57258233/how-to-fix-yarn-packages-are-out-of-date-in-terminal/57613419#57613419", "title": "How to fix Yarn packages are out of date in terminal", "body": "<p>Like it suggested did you put in <code>yarn install --check-files</code> that should update any out of date packages. You can also do <code>yarn upgrade</code> to update. Unless you are certain you don't want to upgrade in which case when you install a package put in the specific version.</p>\n"}, {"tags": [], "owner": {"reputation": 4891, "user_id": 1981720, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/4Ixwb.jpg?s=128&g=1", "display_name": "lunr", "link": "https://stackoverflow.com/users/1981720/lunr"}, "is_accepted": false, "score": 13, "last_activity_date": 1566490551, "creation_date": 1566490551, "answer_id": 57613431, "question_id": 57258233, "link": "https://stackoverflow.com/questions/57258233/how-to-fix-yarn-packages-are-out-of-date-in-terminal/57613431#57613431", "title": "How to fix Yarn packages are out of date in terminal", "body": "<p>Try:</p>\n\n<ul>\n<li>Updating node and yarn</li>\n<li>Deleting <code>node_modules</code> directory and running <code>yarn install</code> again</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 9098634, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EPnb-iWtu9Q/AAAAAAAAAAI/AAAAAAAAAAc/-tqoAG4a7OU/photo.jpg?sz=128", "display_name": "okoth kongo", "link": "https://stackoverflow.com/users/9098634/okoth-kongo"}, "is_accepted": false, "score": 5, "last_activity_date": 1580190015, "last_edit_date": 1580190015, "creation_date": 1579849648, "answer_id": 59891848, "question_id": 57258233, "link": "https://stackoverflow.com/questions/57258233/how-to-fix-yarn-packages-are-out-of-date-in-terminal/59891848#59891848", "title": "How to fix Yarn packages are out of date in terminal", "body": "<p>Check your yarn version using <code>yarn --version</code>. If the version is less than 1.21.1\nUpdate using <code>curl --compressed -o- -L https://yarnpkg.com/install.sh | bash</code>.\nThe run \n<code>yarn install</code> on projects root</p>\n"}], "owner": {"reputation": 107, "user_id": 11465648, "user_type": "registered", "profile_image": "https://graph.facebook.com/1615391375247752/picture?type=large", "display_name": "Jack Van", "link": "https://stackoverflow.com/users/11465648/jack-van"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7171, "favorite_count": 2, "answer_count": 3, "score": 10, "last_activity_date": 1580190015, "creation_date": 1564419148, "last_edit_date": 1566490415, "question_id": 57258233, "link": "https://stackoverflow.com/questions/57258233/how-to-fix-yarn-packages-are-out-of-date-in-terminal", "title": "How to fix Yarn packages are out of date in terminal", "body": "<p>I am always after being installed yarn.</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 6.0.0.rc2 application starting in development \n=&gt; Run `rails server --help` for more startup options\nUsage: yarn [options]\n\nyarn: error: no such option: --integrity\n\n\n========================================\n  Your Yarn packages are out of date!\n  Please run `yarn install --check-files` to update.\n========================================\n\n\nTo disable this check, please change `check_yarn_integrity`\nto `false` in your webpacker config file (config/webpacker.yml).\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 5, "creation_date": 1564415448, "post_id": 57257320, "comment_id": 101014217, "body": "<i>&quot;I found some gems that can handle this but I don&#39;t want to use any.&quot;</i> Any particular reason why? If you do not want to use a gem then you are going to need to handwrite your own implementation (probably creating a cron job) to run this task. There is no native scheduling in ruby or rails which is why the gems exist."}, {"owner": {"reputation": 641, "user_id": 11750453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ukwo8wIwYxA/AAAAAAAAAAI/AAAAAAAAAIs/JAHcH6TWHBw/photo.jpg?sz=128", "display_name": "Trisma", "link": "https://stackoverflow.com/users/11750453/trisma"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564415671, "post_id": 57257320, "comment_id": 101014324, "body": "Oh if there isn&#39;t I&#39;ll probably use that gem then. But even in native <code>Ruby</code> isn&#39;t there anything for that?"}], "answers": [{"comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1564434987, "post_id": 57257477, "comment_id": 101022105, "body": "The answer is <b>always</b> Sidekiq."}], "tags": [], "owner": {"reputation": 2038, "user_id": 2828594, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4XNqm.jpg?s=128&g=1", "display_name": "soueuls", "link": "https://stackoverflow.com/users/2828594/soueuls"}, "is_accepted": true, "score": 5, "last_activity_date": 1564415890, "creation_date": 1564415890, "answer_id": 57257477, "question_id": 57257320, "link": "https://stackoverflow.com/questions/57257320/scheduling-stuff-in-the-future/57257477#57257477", "title": "Scheduling stuff in the future", "body": "<p>You need to create an <code>ActionJob</code> with <code>rails generate job your_job_name</code>.\nThen you can delay its execution</p>\n\n<pre><code>YourJob.set(wait_until: 1.day.from_now)\n</code></pre>\n\n<p>For this to work you indeed need a Job queue to be configured for your project. I personally recommend <a href=\"https://github.com/mperham/sidekiq\" rel=\"noreferrer\">Sidekiq</a></p>\n\n<p>Sadly, you will have a hard time avoiding setting up a gem for this.</p>\n"}], "owner": {"reputation": 641, "user_id": 11750453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ukwo8wIwYxA/AAAAAAAAAAI/AAAAAAAAAIs/JAHcH6TWHBw/photo.jpg?sz=128", "display_name": "Trisma", "link": "https://stackoverflow.com/users/11750453/trisma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57257477, "answer_count": 1, "score": 0, "last_activity_date": 1564415890, "creation_date": 1564415235, "last_edit_date": 1564415628, "question_id": 57257320, "link": "https://stackoverflow.com/questions/57257320/scheduling-stuff-in-the-future", "title": "Scheduling stuff in the future", "body": "<p>I've been doing some research but I can't figure out on how to do this in <code>Rails</code>.\nI need to execute some code after a certain amount of time. I found some <code>gems</code> that can handle this but I don't want to use any.</p>\n\n<p>I basically have a <code>create</code> function in a <code>Rails controller</code> and some stuff need to happen there after 24 hours.</p>\n\n<p>EDIT: I tried with <code>sleep</code> but it needs to be <code>async</code> and sleep will stop everything from running until it's done, even if it is in a <code>if</code> statement.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1201, "user_id": 8785865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b892309a47e8d4a61140a615f2b3337?s=128&d=identicon&r=PG&f=1", "display_name": "Aarthi", "link": "https://stackoverflow.com/users/8785865/aarthi"}, "edited": false, "score": 0, "creation_date": 1564418447, "post_id": 57257189, "comment_id": 101015580, "body": "Can&#39;t the name of the <code>item</code> be changed? and can you please share the schema.rb?"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 1201, "user_id": 8785865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b892309a47e8d4a61140a615f2b3337?s=128&d=identicon&r=PG&f=1", "display_name": "Aarthi", "link": "https://stackoverflow.com/users/8785865/aarthi"}, "edited": false, "score": 0, "creation_date": 1564440309, "post_id": 57257189, "comment_id": 101023590, "body": "It can be. If it is, then I need those quantities to combine. I&#39;ve updated the question with the items schema. @Rthi"}, {"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564537280, "post_id": 57257189, "comment_id": 101060059, "body": "Tour schema shows that Item doesn&#39;t have an ID, why is that? Also, seems like Item is a child of Quote but what is the schema of the items which a user can search for? I assume there is another table of items which are not bound to Quote and which user can search through to add to a cart, is it correct?"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564440210, "creation_date": 1564414821, "last_edit_date": 1564440210, "question_id": 57257189, "link": "https://stackoverflow.com/questions/57257189/combine-identical-nested-attributes", "title": "Combine Identical nested Attributes", "body": "<p>I have a quote form that allows you to add items. My <code>Quote</code> class <code>accepts_nested_attributes_for :items</code>. The user has the ability to search for items and if the user adds the same item again to their quote, the quote then contains two duplicate items. </p>\n\n<p>My <code>Item</code> model has an attribute <code>quantity</code>. I am trying to combine the <code>quantity</code> values if an item exists already in the cart and then reject that new item. I thought about trying something like this but I'm not entirely sure how to properly reference the exact instance of the item and also prevent selecting the same item which would prevent a save every time. </p>\n\n<pre><code>class Quote\n    accepts_nested_attributes_for :items, allow_destroy: true, :reject_if =&gt; :combine_and_reject?\n\n    def combine_and_reject?\n        item = self.quote.items.select{|i| i.name == self.name}.first\n        if item\n            item.quantity = item.quantity + self.quantity\n            return true\n        else\n            return false\n        end\n    end\nend\n</code></pre>\n\n<p>Here are my item fields.</p>\n\n<pre><code>create_table \"items\", options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.text \"name\"\n    t.decimal \"price\", precision: 12, scale: 2, default: \"0.0\"\n    t.integer \"quantity\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"quote_id\"\n    t.index [\"quote_id\"], name: \"fk_rails_e674778822\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "comments"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1564410995, "post_id": 57255827, "comment_id": 101011688, "body": "Your problem, as the error states, is that <code>@micropost</code> is <code>nil</code> and <code>nil</code> doesn&#39;t respond to <code>comments</code>. Clearly, <code>Micropost.find_by(id: params[:id])</code> is returning nil. Which means <code>params[:id]</code> is <code>nil</code> or holds a value that is not an <code>id</code> of a <code>Micropost</code>."}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1564412168, "post_id": 57255827, "comment_id": 101012402, "body": "What are your params coming into the comments_controller?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8592851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4eabda47b2ef30056fe11c32261614?s=128&d=identicon&r=PG&f=1", "display_name": "Esteban Hurtado", "link": "https://stackoverflow.com/users/8592851/esteban-hurtado"}, "is_accepted": false, "score": 1, "last_activity_date": 1564413366, "creation_date": 1564413366, "answer_id": 57256747, "question_id": 57255827, "link": "https://stackoverflow.com/questions/57255827/adding-comments-section-to-posts-in-rails/57256747#57256747", "title": "Adding Comments Section To Posts In Rails", "body": "<p>where is the form to create comments, you are not sending the parameter params [: id], and with this parameter you are looking for the @ micropost .. you must send the id in that form, a quick solution could be</p>\n\n<pre><code>&lt;% = f.hidden_field: id, value: @ micropost.id%&gt;\n</code></pre>\n\n<p>\u00a0\nin the comment creation form</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "is_accepted": false, "score": 1, "last_activity_date": 1564414495, "creation_date": 1564414495, "answer_id": 57257086, "question_id": 57255827, "link": "https://stackoverflow.com/questions/57255827/adding-comments-section-to-posts-in-rails/57257086#57257086", "title": "Adding Comments Section To Posts In Rails", "body": "<p>Okay so the answers you all gave pointed me in the right direction. I wasn't actually passing an proper id. Instead of <code>@micropost = Micropost.find_by(id: params[:id])</code> it should have been <code>@micropost = Micropost.find_by(id: params[:micropost_id])</code></p>\n\n<p>Many thanks all for getting me there.</p>\n"}], "owner": {"reputation": 157, "user_id": 7170034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b8aaf7d8c26e1623e9e74892bbf89?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Gruber", "link": "https://stackoverflow.com/users/7170034/jack-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1564414495, "creation_date": 1564410186, "last_edit_date": 1564410504, "question_id": 57255827, "link": "https://stackoverflow.com/questions/57255827/adding-comments-section-to-posts-in-rails", "title": "Adding Comments Section To Posts In Rails", "body": "<p>I am trying to add a comments section to posts on my web applications but getting an error when saving the comment</p>\n\n<p>I have been following a tutorial to add a comments section to my posts and have been modifying as I go to work with my app. I am still relatively new to rails and I am still learning. I understand what the error message is telling me, but I am unsure as to how to proceed</p>\n\n<p>Comments Controller:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n  def create\n    @micropost = Micropost.find_by(id: params[:id])\n    @comment = \n    @micropost.comments.create(params[:comment].permit(:body))   \n  end\n\nend\n</code></pre>\n\n<p>Microposts Contoller:</p>\n\n<pre><code>class MicropostsController &lt; ApplicationController\n\n  before_action :logged_in_user, :upvote, :downvote, only: \n[:create, :destroy]\n  before_action :correct_user, :upvote, :downvote,   only: \n :destroy, allow_destroy: true\n\n\n def create\n    @micropost = current_user.microposts.build(micropost_params)\n    @maximum_length = Micropost.validators_on(  :content, \n    :headline).first.options[:maximum]\n     if @micropost.save\n       flash[:success] = \"Article Posted\"\n     redirect_to root_url\n     else\n       @feed_items = []\n     render 'articles/home'\n     end\n end\n\n  def destroy\n    @micropost.destroy\n    flash[:success] = \"Micropost deleted\"\n    redirect_to request.referrer || current_user\n  end\n\n def show\n    @micropost = Micropost.find(params[:id])\n end\n\n private\n\n def micropost_params\n    params.require(:micropost).permit(:content, :headline)\n end\n\n def correct_user\n    @micropost = current_user.microposts.find_by(id: params[:id])\n    redirect_to root_url if @micropost.nil?\n end\n\nend\n</code></pre>\n\n<p>Comments Form being rendered on post:</p>\n\n<pre><code>&lt;%= form_for([@micropost, @micropost.comments.build]) do |f| %&gt;\n  &lt;br&gt;\n\n  &lt;p&gt;\n    &lt;%= current_user.name %&gt;\n    &lt;%= f.text_area :body %&gt;\n  &lt;/p&gt;\n\n  &lt;br&gt;\n    &lt;p&gt;\n    &lt;%= f.submit %&gt;\n   &lt;/p&gt;\n\n &lt;% end %&gt;\n</code></pre>\n\n<p>Comments Model:</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n   belongs_to :micropost\nend\n</code></pre>\n\n<p>Microposts Model:</p>\n\n<pre><code>class Micropost &lt; ApplicationRecord\n\n  acts_as_votable\n\n  has_many :comments\n  belongs_to :user\n  validates :user_id, presence: true\n  validates :headline, presence: true, length: { maximum: 200 }\n  validates :content, presence: true, length: { maximum: 5000 }\n\nend\n</code></pre>\n\n<p>Tables:</p>\n\n<pre><code>  create_table \"comments\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"body\"\n    t.bigint \"microposts_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"micropost_id\"\n    t.index [\"microposts_id\"], name: \n    \"index_comments_on_microposts_id\"\n  end\n\n  create_table \"microposts\", force: :cascade do |t|\n    t.text \"content\"\n    t.bigint \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.text \"headline\"\n    t.index [\"user_id\", \"created_at\"], name: \n    \"index_microposts_on_user_id_and_created_at\"\n     t.index [\"user_id\"], name: \"index_microposts_on_user_id\"\n   end\n</code></pre>\n\n<p>The form is being rendered on the micropost show view. I can see the form fine.</p>\n\n<p>When I press to save the comment on the post I get an error stating <code>undefined method comments for nil:NilClass</code> and it highlights the Comments controller and the line <code>@comment = @micropost.comments.create(params[:comment].permit(:body))</code></p>\n\n<p>I know there probably should a method somewhere for comments. The tutorial I watched didn't add anything like that. So I unsure do I need to modify some existing code, or do I need to add a method somewhere called comments?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "devise"], "comments": [{"owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564408944, "post_id": 57255460, "comment_id": 101010642, "body": "Please show the path of your partial file (relatively to the project root)"}, {"owner": {"reputation": 61, "user_id": 11599519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b606478e2f9d68ef58fee1c93c062f?s=128&d=identicon&r=PG&f=1", "display_name": "Shakered", "link": "https://stackoverflow.com/users/11599519/shakered"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564409051, "post_id": 57255460, "comment_id": 101010703, "body": "app/views/static_pages/_home.html.erb"}, {"owner": {"reputation": 61, "user_id": 11599519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b606478e2f9d68ef58fee1c93c062f?s=128&d=identicon&r=PG&f=1", "display_name": "Shakered", "link": "https://stackoverflow.com/users/11599519/shakered"}, "reply_to_user": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "edited": false, "score": 0, "creation_date": 1564409198, "post_id": 57255460, "comment_id": 101010806, "body": "it finds it properly If I don&#39;t use respond_to"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564410416, "post_id": 57255460, "comment_id": 101011413, "body": "Any reason you want to render an HTML page as part of a JSON response? That seems like and odd response."}, {"owner": {"reputation": 61, "user_id": 11599519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b606478e2f9d68ef58fee1c93c062f?s=128&d=identicon&r=PG&f=1", "display_name": "Shakered", "link": "https://stackoverflow.com/users/11599519/shakered"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564410897, "post_id": 57255460, "comment_id": 101011633, "body": "I would like to switch in one page sign up and log in with one button so I need to get somehow this partial rendered to JSON to later catch it with AJAX @engineersmnky What do you think about it? Is there other way?"}], "answers": [{"tags": [], "owner": {"reputation": 7863, "user_id": 6250385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zl6cg.jpg?s=128&g=1", "display_name": "GProst", "link": "https://stackoverflow.com/users/6250385/gprost"}, "is_accepted": true, "score": 0, "last_activity_date": 1564409417, "creation_date": 1564409417, "answer_id": 57255626, "question_id": 57255460, "link": "https://stackoverflow.com/questions/57255460/respond-to-with-format-json-doesnt-find-partials/57255626#57255626", "title": "respond_to with format.json doesn&#39;t find partials", "body": "<p>Looks like it searches for <code>json</code> partial, so try to explicitly specify the format of the partial:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>render_to_string(partial: 'static_pages/home', formats: :html)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11599519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b606478e2f9d68ef58fee1c93c062f?s=128&d=identicon&r=PG&f=1", "display_name": "Shakered", "link": "https://stackoverflow.com/users/11599519/shakered"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57255626, "answer_count": 1, "score": 1, "last_activity_date": 1564409417, "creation_date": 1564408787, "question_id": 57255460, "link": "https://stackoverflow.com/questions/57255460/respond-to-with-format-json-doesnt-find-partials", "title": "respond_to with format.json doesn&#39;t find partials", "body": "<p>I am overriding devise session controler and while trying to set specific format Rails says there's no partial while it's not true\nwhile I am trying to insert it inside respond_to</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SessionsController &lt; Devise::SessionsController\n  def new\n    self.resource = resource_class.new(sign_in_params)\n    clean_up_passwords(resource)\n    yield resource if block_given?\n    respond_to do |format|\n      format.html\n      format.json {render(json: { sign_in: render_to_string(partial: 'static_pages/home')})}\n    end\n\n  end\n</code></pre>\n\n<p>The error is:</p>\n\n<p>Missing partial static_pages/_home with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :coffee, :jbuilder]}. Searched in: * \"D:/project_traveldiary/app/views\" * \"D:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/devise-4.6.2/app/views\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "prawn"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564410551, "post_id": 57255215, "comment_id": 101011480, "body": "What is your actual error? One thing I will note is that <code>send_data</code> is going to be an issue in that class and should be left in  the controller but &quot;code is obviously errorenous&quot; does not really help us solve any other issues you may be experiencing"}], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1564416425, "post_id": 57257466, "comment_id": 101014665, "body": "hi , I tried this code and it shows  <i>Failed to Load the pdf document</i>"}, {"owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "reply_to_user": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1564418052, "post_id": 57257466, "comment_id": 101015425, "body": "@Achy97 Sorry about that. I just prototyped it locally, and realize I missed calling <code>pdf.render</code> inside of <code>PdfCreator#render</code>. I&#39;ve edited it to fix that issue."}, {"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1564503212, "post_id": 57257466, "comment_id": 101049650, "body": "hi, @Unixmonkey I encountered a problem today which i didnt notice previously..the pdf is being generated successfully BUT THE problem is when the content is much more than one page- then only First page has table header but the following oages do not have table headers can you please help me overcome the problem?"}, {"owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "reply_to_user": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 1, "creation_date": 1564511050, "post_id": 57257466, "comment_id": 101052422, "body": "@Achy97 I think you can pass <code>header: true</code> to the <code>table</code> options, and it will repeat like so: <code>pdf.table(table_data, width: 500, cell_style: { inline_format: true }, header: true)</code>"}], "tags": [], "owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1564417953, "last_edit_date": 1564417953, "creation_date": 1564415833, "answer_id": 57257466, "question_id": 57255215, "link": "https://stackoverflow.com/questions/57255215/generate-table-in-pdf-with-prawn/57257466#57257466", "title": "Generate table in pdf with prawn", "body": "<p><code>send_data</code> is a controller-level method, and won't work inside your custom class, and the <code>respond_to</code> might be needed for your route to respond appropriately.</p>\n\n<p>Let's try keeping what's needed in the controller and extract only PDF-generating logic to the new <code>PdfCreator</code> class:</p>\n\n<pre><code>def download_pdf\n  @subscribers=Subscriber.all.order(\"name ASC\")\n\n  respond_to do |format|\n    format.pdf do\n      pdf = PdfCreator.new(@subscribers)\n      send_data pdf.render, filename: 'test.pdf', type: 'application/pdf', disposition: 'inline'\n    end\n  end\nend\n\n\nclass PdfCreator\n  def initialize(subscribers)\n    @subs=subscribers\n  end\n\n  def render()\n    pdf = Prawn::Document.new\n    table_data = Array.new\n    table_data &lt;&lt; [\"Name\",\"E-mail\",\"Phone\"]\n    @subs.each do |p|\n      table_data &lt;&lt; [p.name, p.email,p.phone]\n    end\n    pdf.table(table_data, :width =&gt; 500, :cell_style =&gt; { inline_format: true })\n    pdf.render\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57257466, "answer_count": 1, "score": 0, "last_activity_date": 1564417953, "creation_date": 1564407874, "last_edit_date": 1564413807, "question_id": 57255215, "link": "https://stackoverflow.com/questions/57255215/generate-table-in-pdf-with-prawn", "title": "Generate table in pdf with prawn", "body": "<p>I have successfully generated pdf file using prawn pdf gem inside the controller , but I want to separate class files and call the method of the class to make the controller code look clean.\nHere is my in-controller method</p>\n\n<pre><code>  def download_pdf\nif Subscriber.count&lt;50\n  addSubscribers()\nelse\n  @subscribers=Subscriber.all.order(\"name ASC\")\nend\n  respond_to do |format|\n    format.pdf do\n      pdf = Prawn::Document.new\n      table_data = Array.new\n      table_data &lt;&lt; [\"Name\",\"E-mail\",\"Phone\"]\n      @subscribers.each do |p|\n        table_data &lt;&lt; [p.name, p.email,p.phone]\n      end\n      pdf.table(table_data, :width =&gt; 500, :cell_style =&gt; { :inline_format =&gt; true })\n      send_data pdf.render, filename: 'test.pdf', type: 'application/pdf', :disposition =&gt; 'inline'\n    end\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>But when I try to use the following code-></p>\n\n<pre><code>def download_pdf\n  @subscribers=Subscriber.all.order(\"name ASC\")\n  PdfCreator.new(@subscribers)\nend\n</code></pre>\n\n<p>And the PdfCreator class is -></p>\n\n<pre><code>    class PdfCreator\n\n  def initialize(subscribers)\n    @subs=subscr\n    download_pdf()\n  end\n\n  def download_pdf()\n      pdf = Prawn::Document.new\n      table_data = Array.new\n      table_data &lt;&lt; [\"Name\",\"E-mail\",\"Phone\"]\n      @subs.each do |p|\n        table_data &lt;&lt; [p.name, p.email,p.phone]\n      end\n      pdf.table(table_data, :width =&gt; 500, :cell_style =&gt; { :inline_format =&gt; true })\n    send_data pdf.render, filename: 'test.pdf', type: 'application/pdf', :disposition =&gt; 'inline'\n  end\n\nend\n</code></pre>\n\n<p>respond to is not resolving as a method. I found some codes on generating pdf from an outside class but only for normal texts not for tables- Any help regarding how to do it for tables , that will be a great help</p>\n"}, {"tags": ["ruby", "jekyll", "permalinks"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 11471450, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gxcZqEeyS3g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYtajkD0y2vF9-SYFLzW00SUmPJg/mo/photo.jpg?sz=128", "display_name": "Jacob Helton", "link": "https://stackoverflow.com/users/11471450/jacob-helton"}, "is_accepted": true, "score": 1, "last_activity_date": 1564410205, "creation_date": 1564410205, "answer_id": 57255830, "question_id": 57255155, "link": "https://stackoverflow.com/questions/57255155/does-jekyll-offer-a-way-to-create-permalinks-for-entire-folders-or-images/57255830#57255830", "title": "Does Jekyll offer a way to create permalinks for entire folders or images?", "body": "<p>Fred,</p>\n\n<p>I'm not sure exactly what your use case is, but it may not be that you need your favicons to be in your root folder. </p>\n\n<p>If you have not already specified a baseurl/permalink in your <code>config.yml</code>, it may be worth doing that and confirming that your links are pointing to the right place.</p>\n\n<p>Overall, the best solution is likely to leave your favicons in the <code>favicons</code> folder and link to that folder explicitly. The best way to do this is typically by defining a <code>baseurl</code> in your <code>config.yml</code>. You'd then link to your favicons by using links that look like <code>{{site.baseurl}}/favicons/apple-icon.png</code>. </p>\n"}], "owner": {"reputation": 185, "user_id": 10007107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-riQopGCfCLE/AAAAAAAAAAI/AAAAAAAAAAc/ZygFcKoIynM/photo.jpg?sz=128", "display_name": "Gabriel Romualdo", "link": "https://stackoverflow.com/users/10007107/gabriel-romualdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57255830, "answer_count": 1, "score": 1, "last_activity_date": 1564410205, "creation_date": 1564407671, "question_id": 57255155, "link": "https://stackoverflow.com/questions/57255155/does-jekyll-offer-a-way-to-create-permalinks-for-entire-folders-or-images", "title": "Does Jekyll offer a way to create permalinks for entire folders or images?", "body": "<p>I am building a Jekyll site with around 30 favicon files (e.g. apple-icon, android-icon, etc.) that need to be in the root directory of the compiled site.</p>\n\n<p>Putting all of the files in the root of the source Jekyll folder is possible, and would work, but produces a lot of clutter in the root directory, which I don't want. For that reason, would is it possible to put all of these files in a single separate folder, and force all of the files in that folder to compile into the root directory of the compiled folder (like a permalink).</p>\n\n<p>I know it is possible to set permalinks for individual files like <code>index.md</code>, but is it possible to set permalinks for entire folders, or every file in a folder?</p>\n\n<p>Effectively, my file structure for the source of the Jekyll site would look like this:</p>\n\n<pre><code>-- index.md\n-- _posts\n\n...\n\n-- favicons\n    -- android-icon-36x36.png\n    -- android-icon-72x72.png\n    -- apple-icon.png\n</code></pre>\n\n<p>And I'd like all of the files in the <code>favicons</code> folder to compile to the root folder, like this:</p>\n\n<pre><code>-- index.html\n\n...\n\n-- android-icon-36x36.png\n-- android-icon-72x72.png\n-- apple-icon.png\n</code></pre>\n\n<p>I'm sorry if this question was too long or too short \u2014 this is my first question, and I hope to learn how to write questions most effectively on Stack Overflow in the near future.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1564407033, "post_id": 57254938, "comment_id": 101009563, "body": "Where exactly do you get this data from? Usually, there is an easier way to get the data than by building a custom strategy, e.g. by reading a JSON or XML document directly."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11852464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326d9dea65da99a848af8e5b5edafc8a?s=128&d=identicon&r=PG&f=1", "display_name": "CrunchyBanana", "link": "https://stackoverflow.com/users/11852464/crunchybanana"}, "edited": false, "score": 0, "creation_date": 1564407389, "post_id": 57254996, "comment_id": 101009761, "body": "Thank you kindly! Roger that,  string &gt; array &gt; hash"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 11, "user_id": 11852464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326d9dea65da99a848af8e5b5edafc8a?s=128&d=identicon&r=PG&f=1", "display_name": "CrunchyBanana", "link": "https://stackoverflow.com/users/11852464/crunchybanana"}, "edited": false, "score": 0, "creation_date": 1564407516, "post_id": 57254996, "comment_id": 101009836, "body": "It&#39;s rather: array of strings =&gt; array of arrays of strings =&gt; hash maping one string to another"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1564407144, "creation_date": 1564407144, "answer_id": 57254996, "question_id": 57254938, "link": "https://stackoverflow.com/questions/57254938/convert-array-string-objects-into-hashes/57254996#57254996", "title": "Convert array string objects into hashes?", "body": "<p>You can split every string with <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-split\" rel=\"nofollow noreferrer\"><code>String#split</code></a> and then convert an array of pairs into a hash with <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a>:</p>\n\n<pre><code>a = [\"us.production =&gt; 1\", \"us.stats =&gt; 1\", \"us.stats.total_active =&gt; 1\", \"us.stats.inactive =&gt; 0\"]\npairs = a.map{|s| s.split(/\\s*=&gt;\\s*/)}\n# =&gt; [[\"us.production\", \"1\"], [\"us.stats\", \"1\"], [\"us.stats.total_active\", \"1\"], [\"us.stats.inactive\", \"0\"]]\npairs.to_h\n# =&gt; {\"us.production\"=&gt;\"1\", \"us.stats\"=&gt;\"1\", \"us.stats.total_active\"=&gt;\"1\", \"us.stats.inactive\"=&gt;\"0\"}\n</code></pre>\n\n<p><code>/\\s*=&gt;\\s*/</code> is a regular expression that matches first any number of whitespaces with <code>\\s*</code>, then <code>=&gt;</code> then again any nuber of whitespaces. As it's a <code>String#split</code> delimiter, this part of string won't be present in a string pair.</p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 2, "last_activity_date": 1564470060, "last_edit_date": 1564470060, "creation_date": 1564407217, "answer_id": 57255016, "question_id": 57254938, "link": "https://stackoverflow.com/questions/57254938/convert-array-string-objects-into-hashes/57255016#57255016", "title": "Convert array string objects into hashes?", "body": "<p>If pattern you are having is proper and constant, you can try following,</p>\n\n<pre><code>h = a.map { |x| x.split(' =&gt; ') }.to_h\n# =&gt; {\"us.production\"=&gt;\"1\", \"us.stats\"=&gt;\"1\", \"us.stats.total_active\"=&gt;\"1\", \"us.stats.inactive\"=&gt;\"0\"}\n</code></pre>\n\n<p>Instead it is better to use <code>split(/\\s*=&gt;\\s*/)</code> instead of <code>split(' =&gt; ')</code> </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1564430414, "last_edit_date": 1564430414, "creation_date": 1564423274, "answer_id": 57259180, "question_id": 57254938, "link": "https://stackoverflow.com/questions/57254938/convert-array-string-objects-into-hashes/57259180#57259180", "title": "Convert array string objects into hashes?", "body": "<p>The other answers to date are incorrect because they leave the values as strings, whereas the spec is that they be integers. That can be easily corrected. One way is to change <code>s.split(/\\s*=&gt;\\s*/)</code> in @mrzasa's answer to <code>k,v = s.split(/\\s*=&gt;\\s*/); [k,v.to_i]</code>. Another way is to tack <code>.transform_values(&amp;:to_i)</code> to the ends of the expressions given in those answers. I expect the authors of those answers either didn't notice that integers were required or intended to leave it as an exercise for the OP to do the (rather uninteresting) conversion.</p>\n\n<p>To make a single pass through the array and avoid the creation of a temporary array and local variables (other than block variables), I suggest using <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> (rather than <code>map</code> and <code>to_h</code>), and use regular expressions to extract both keys and values (rather than using <code>String#split</code>):</p>\n\n<pre><code>a = [\"us.production   =&gt; 1\", \"us.stats=&gt;1\", \"us.stats.total_active =&gt; 1\"]\n\na.each_with_object({}) { |s,h| h[s[/.*[^ ](?= *=&gt;)/]] = s[/\\d+\\z/].to_i }\n  #=&gt; {\"us.production\"=&gt;1, \"us.stats\"=&gt;1, \"us.stats.total_active\"=&gt;1} \n</code></pre>\n\n<p>The first regular expression reads, \"match zero or more characters (<code>.*</code>) followed by a character that is not a space (<code>[^ ]</code>), provided that is followed by zero or more spaces (<code>*</code>) followed by the string <code>\"=&gt;</code>\". <code>(?= *=&gt;)</code> is a <em>positive lookahead</em>.</p>\n\n<p>The second regular expression reads, \"match one or more digits (<code>\\d+</code>) at the end of the string (the <em>anchor</em> <code>\\z</code>). If that string could represent a negative integer, change that regex to <code>/-?\\d+\\z/</code> (<code>?</code> makes the minus sign optional).</p>\n"}], "owner": {"reputation": 11, "user_id": 11852464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326d9dea65da99a848af8e5b5edafc8a?s=128&d=identicon&r=PG&f=1", "display_name": "CrunchyBanana", "link": "https://stackoverflow.com/users/11852464/crunchybanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57254996, "answer_count": 3, "score": 0, "last_activity_date": 1564470060, "creation_date": 1564406936, "question_id": 57254938, "link": "https://stackoverflow.com/questions/57254938/convert-array-string-objects-into-hashes", "title": "Convert array string objects into hashes?", "body": "<p>I have an array:</p>\n\n<pre><code>a = [\"us.production =&gt; 1\", \"us.stats =&gt; 1\", \"us.stats.total_active =&gt; 1\", \"us.stats.inactive =&gt; 0\"]\n</code></pre>\n\n<p>How can I modify it into a hash object? e.g.:</p>\n\n<pre><code>h = {\"us.production\" =&gt; 1, \"us.stats\" =&gt; 1, \"us.stats.total_active\" =&gt; 1, \"us.stats.inactive\" =&gt; 0}\n</code></pre>\n\n<p>Thank you,</p>\n"}, {"tags": ["ruby", "homebrew"], "answers": [{"tags": [], "owner": {"reputation": 1329, "user_id": 111960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5c92476e067787fc7e06f5970dda22?s=128&d=identicon&r=PG", "display_name": "jonchang", "link": "https://stackoverflow.com/users/111960/jonchang"}, "is_accepted": true, "score": 0, "last_activity_date": 1564465022, "creation_date": 1564465022, "answer_id": 57264922, "question_id": 57254445, "link": "https://stackoverflow.com/questions/57254445/is-there-a-way-to-use-a-third-party-gem-in-a-custom-download-strategy-for-homebr/57264922#57264922", "title": "Is there a way to use a third party gem in a custom download strategy for homebrew", "body": "<p>Homebrew uses its own set of gems to isolate it from system or user-installed gems. To set up a gem that's visible from brew, in your custom download strategy run:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Homebrew.install_gem! \"my_gem\"\nrequire \"my_gem\"\n</code></pre>\n\n<p>If you need a binary from the gem use <code>install_gem_setup_path!</code> instead.</p>\n\n<p>Note that this is an internal Homebrew API and could change at any time. You should also ensure that the gem doesn't conflict with any gems that Homebrew itself depends on.</p>\n"}], "owner": {"reputation": 55, "user_id": 11852341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb287d7b597ebc33653772a8727c11f7?s=128&d=identicon&r=PG&f=1", "display_name": "Cedd0", "link": "https://stackoverflow.com/users/11852341/cedd0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57264922, "answer_count": 1, "score": 0, "last_activity_date": 1564465022, "creation_date": 1564405309, "question_id": 57254445, "link": "https://stackoverflow.com/questions/57254445/is-there-a-way-to-use-a-third-party-gem-in-a-custom-download-strategy-for-homebr", "title": "Is there a way to use a third party gem in a custom download strategy for homebrew", "body": "<p>I'm setting up a company internal tap for homebrew. Since the archives are uploaded to a google drive, I need to implement a custom download strategy for that. In that download strategy, I want to use a third party ruby library, but I haven't figured out how to install the gem before the download strategy is called.</p>\n\n<p>I've already tried to install the dependency with 'gem install ...', before running 'brew install my-formula'. But this does not seem to work.</p>\n\n<p>Is there a way to use third-party libraries in the custom download strategy or is this not possible at all?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring"], "comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1564406899, "post_id": 57252897, "comment_id": 101009484, "body": "I&#39;m pretty sure you can move both <code>respond_to do |format|</code> outside of the main <code>if</code> statement while still in the search method."}, {"owner": {"reputation": 5, "user_id": 11455087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ybnGsZyKU7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaeNL-qSnn9LqBNIKvEpYWubMcMg/mo/photo.jpg?sz=128", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0421\u0430\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/11455087/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%a1%d0%b0%d0%b5%d0%bd%d0%ba%d0%be"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 1, "creation_date": 1564408569, "post_id": 57252897, "comment_id": 101010430, "body": "Thank you! @Jake"}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 5, "user_id": 11455087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ybnGsZyKU7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaeNL-qSnn9LqBNIKvEpYWubMcMg/mo/photo.jpg?sz=128", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0421\u0430\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/11455087/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%a1%d0%b0%d0%b5%d0%bd%d0%ba%d0%be"}, "edited": false, "score": 0, "creation_date": 1564417599, "post_id": 57256377, "comment_id": 101015227, "body": "@\u0414\u0435\u043d\u0438\u0441\u0421\u0430\u0435\u043d\u043a\u043e You&#39;re welcome, please remember that saying thanks is not necessary (and is not encouraged) to be left as a comment. An upvote on a comment or answer is all you need to leave to show your appreciation."}], "tags": [], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "is_accepted": true, "score": -1, "last_activity_date": 1564412110, "creation_date": 1564412110, "answer_id": 57256377, "question_id": 57252897, "link": "https://stackoverflow.com/questions/57252897/provide-refactoring-code-method-for-filter/57256377#57256377", "title": "Provide refactoring code ( method for filter )", "body": "<p>To save you from writing it twice, you can move both <code>respond_to do |format|</code> outside of the <code>if</code> statement as one:</p>\n\n<pre><code>def search\n  if current_user.tutor?    \n    if params[:subject_id] == \"\"\n      @help_requests = HelpRequest.all.order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    else\n      @help_requests = HelpRequest.where(\"subject_id IN (?)\", params[:subject_id]).order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    end\n  else\n    @help_requests = HelpRequest.list_of_request params:[subject_id]\n  end\n  respond_to do |format|\n    format.js {render}\n  end\nend\n</code></pre>\n\n<p>Another thing to try is shortening <code>@help_requests = HelpRequest</code> to <code>help_requests</code> this:</p>\n\n<pre><code>def search\n  if current_user.tutor?    \n    if params[:subject_id] == \"\"\n      help_requests.all.order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    else\n      help_requests.where(\"subject_id IN (?)\", params[:subject_id]).order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    end\n  else\n    help_requests.list_of_request params:[subject_id]\n  end\n  respond_to do |format|\n    format.js {render}\n  end\nend\n\nprivate\n\n  def help_requests\n    @help_requests = HelpRequest\n  end\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11455087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ybnGsZyKU7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaeNL-qSnn9LqBNIKvEpYWubMcMg/mo/photo.jpg?sz=128", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0421\u0430\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/11455087/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%a1%d0%b0%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 57256377, "answer_count": 1, "score": -1, "last_activity_date": 1564482797, "creation_date": 1564399716, "last_edit_date": 1564438412, "question_id": 57252897, "link": "https://stackoverflow.com/questions/57252897/provide-refactoring-code-method-for-filter", "title": "Provide refactoring code ( method for filter )", "body": "<p>I wrote a function to filter entries on my site, but it looks quite cumbersome. And I am sure that this code can be written easier and less cumbersome, I will be very grateful for any help. Below is the function itself.</p>\n\n<pre><code>def search\n  if current_user.tutor?    \n    if params[:subject_id] == \"\"\n      @help_requests = HelpRequest.all.order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    else\n      @help_requests = HelpRequest.where(\"subject_id IN (?)\", params[:subject_id]).order(created_at: params[:direction] == \"1\" ? :desc : :asc)\n    end\n    respond_to do |format|\n      format.js {render}\n    end\n  else\n    @help_requests = HelpRequest.list_of_request params:[subject_id]\n    respond_to do |format|\n      format.js {render}\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564399533, "post_id": 57252409, "comment_id": 101005469, "body": "What is controller&#39;s response?"}, {"owner": {"reputation": 9, "user_id": 11578488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43996b643e80c750eaf4be0e52ef911?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/11578488/helloworld1234"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564401884, "post_id": 57252409, "comment_id": 101006668, "body": "hi @SergioTulentsev could you specify what that means? :) thanks!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564405406, "post_id": 57252409, "comment_id": 101008557, "body": "Your controller, it accepts parameters and renders a response (the &quot;json&quot;), against which you make your assertions (which fail). What is the content of that response?"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1564462395, "post_id": 57252409, "comment_id": 101027843, "body": "If you stick a <code>print json</code> right above <code>expect(json[&#39;coupon&#39;]).to eq(scooties_coupon.coupon)</code> and run your spec it should print something out (that&#39;s what Sergio is referring to). You might also want to add an assertion there <code>expect(response).to have_http_status(201)</code> (that&#39;s the status code for created, that your create worked)"}], "owner": {"reputation": 9, "user_id": 11578488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43996b643e80c750eaf4be0e52ef911?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/11578488/helloworld1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564398419, "creation_date": 1564397966, "last_edit_date": 1564398419, "question_id": 57252409, "link": "https://stackoverflow.com/questions/57252409/rails-rspec-error-expected-string-got-nil", "title": "rails rspec error expected string got nil?", "body": "<p>I am new to testing in rails, I am trying to pass the test as below where it kept throwing back errors as </p>\n\n<pre><code>/scooties_coupon POST Coupon /scooties_coupons/:coupon_id with coupon coupon_id redeemed API_KEY returns redeemed id\n     Failure/Error: expect(json['coupon']).to eq(scooties_coupon.coupon)\n\n       expected: \"6B2F5\"\n            got: nil\n\n       (compared using ==)\n</code></pre>\n\n<p>Here is the code for the test I am running:</p>\n\n<pre><code>    context 'with coupon coupon_id redeemed API_KEY' do\n      subject { post \"/api/scooties_coupons/#{scooties_coupon.id}\", headers: headers }\n\n      it \"returns redeemed id\" do\n        subject\n        expect(json['coupon']).to eq(scooties_coupon.coupon)\n        expect(json['redeemed']).to eq(scooties_coupon.redeemed)\n      end\n    end\n</code></pre>\n\n<p>my factory code:</p>\n\n<pre><code>FactoryBot.define do\n  factory :scooties_coupon do\n    coupon { \"43MDA\" }\n    redeemed { false }\n    email { \"email@host.com\" }\n\n    trait :redeemed do\n      redeemed { true }\n    end\n  end\nend\n\n</code></pre>\n\n<p>here's the model:</p>\n\n<pre><code>class ScootiesCoupon &lt; ApplicationRecord\n\n  has_paper_trail\n  before_create :set_coupon_code\n  after_update :send_activecamp_email_scootiescoupon\n\n  validates :email, presence: true, format: { with: /\\A[^@\\s]+@([^@.\\s]+\\.)+[^@.\\s]+\\z/ }\n\n  def update_redeemed(redeemed = true, email = nil)\n    email == self.email if email.present? || self.email.present?\n    self.created_at + self.expires_in.seconds &lt; DateTime.now if self.expires_in.present?\n\n    self.update_attribute(:redeemed, redeemed)\n  end\n\n  private\n\n  def set_coupon_code\n    loop do\n      self.coupon = gen_coupon\n      break unless coupon_exists?\n    end\n  end\n\n  def coupon_exists?\n    self.class.exists?(coupon: coupon)\n  end\n\n  def gen_coupon\n    return SecureRandom.hex[0..4].upcase\n  end\nend\n</code></pre>\n\n<p>I've tried to get rid of the validation on email but it doesn't seem to b e a major problem here, Could you give me a little idea of any other way to solve this problem?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 3, "creation_date": 1564396333, "post_id": 57251951, "comment_id": 101003800, "body": "Please, show us what you have already tried."}, {"owner": {"reputation": 1, "user_id": 11815096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SreNqQGLm4M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlkqhF12cFGt-3E7sGOd7xZrTh-A/photo.jpg?sz=128", "display_name": "lio oliver", "link": "https://stackoverflow.com/users/11815096/lio-oliver"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1564396561, "post_id": 57251951, "comment_id": 101003932, "body": "Sorry, I am unable to find this answer. I tried to find a maximum depth of parenthesis but this is not working for me."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1564397173, "post_id": 57251951, "comment_id": 101004275, "body": "How come <code>m -&gt; 1</code>? It&#39;s totally nested 2 times."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1564418165, "post_id": 57251951, "comment_id": 101015467, "body": "&quot;this is not working for me&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Also, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1564401724, "last_edit_date": 1564401724, "creation_date": 1564397267, "answer_id": 57252225, "question_id": 57251951, "link": "https://stackoverflow.com/questions/57251951/number-of-parenthesis-in-input-string/57252225#57252225", "title": "number of parenthesis in input string", "body": "<pre class=\"lang-rb prettyprint-override\"><code>def nesting(expression)\n  current_depth = 0\n\n  expression.\n    chars.\n    map(&amp;:strip).\n    reject(&amp;:empty?).\n    each_with_object([]) do |character, nesting|\n      if character == '('\n        current_depth += 1\n      elsif character == ')'\n        current_depth -= 1\n      else\n        nesting.push [character, current_depth]\n      end\n    end\nend\n\nnesting '(p ( g k ) ( m ) )' # =&gt; [[\"p\", 1], [\"g\", 2], [\"k\", 2], [\"m\", 2]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1564398068, "creation_date": 1564398068, "answer_id": 57252441, "question_id": 57251951, "link": "https://stackoverflow.com/questions/57251951/number-of-parenthesis-in-input-string/57252441#57252441", "title": "number of parenthesis in input string", "body": "<p>Using hashes.</p>\n\n<p>Set up:</p>\n\n<pre><code>valid_symbols = ('a'..'z')\ncounting = {'(' =&gt; 1, ')' =&gt; -1} # hash to be used for counting\ncounting.default = 0 # set default to zero\nopened = 0 # for tracking opened parenthesys\nres = {} # to store the result\n</code></pre>\n\n<p>Loop for counting:</p>\n\n<pre><code>str = '(p ( g k ) ( m ) )'\n\nstr.chars.each do |ch|\n  opened += counting[ch]\n  res[ch] = opened if valid_symbols.include? ch\nend\n\nres\n#=&gt; {\"p\"=&gt;1, \"g\"=&gt;2, \"k\"=&gt;2, \"m\"=&gt;2}\n</code></pre>\n\n<p>Yes, this is the basic idea, and can be refactored using <code>each_with_object</code> etc, etc..</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564436155, "last_edit_date": 1564436155, "creation_date": 1564432590, "answer_id": 57261046, "question_id": 57251951, "link": "https://stackoverflow.com/questions/57251951/number-of-parenthesis-in-input-string/57261046#57261046", "title": "number of parenthesis in input string", "body": "<pre><code>str = '(p ( g k ) ( m ) )'\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>count = 0\nstr.delete(' ').gsub(/\\(|\\)|[^()]+/).with_object({}) do |s,h|\n  case s\n  when '(' then count += 1\n  when ')' then count -= 1\n  else          h[s] = count\n  end\nend\n  #=&gt; {\"p\"=&gt;1, \"gk\"=&gt;2, \"m\"=&gt;2}\n</code></pre>\n\n<p>This uses the form of <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> that returns an enumerator when it has one argument and no block.<sup>1</sup></p>\n\n<p>The regular expression reads, \"match a left parenthesis or (<code>|</code>) a right parentheses or one or more characters other than left and right parentheses (<code>[^()]+</code>).</p>\n\n<p>This assumes that the parentheses in the string are balanced. One can test that as follows.</p>\n\n<pre><code>def balanced?(str)\n  stack = []\n  str.each_char do |s|\n    case s\n    when '('\n      stack &lt;&lt; s\n    when ')'\n      return false if stack.empty? || stack.last == ')'\n      stack.pop\n    end\n  end\n  stack.empty?\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>balanced? '(p ( g k ) ( m ) )'    #=&gt; true\nbalanced? '(p () g k ) (( m ) )'  #=&gt; true\nbalanced? '(p (( g k )) ( m ) )'  #=&gt; true\n\nbalanced? '(p ( g k ) ( m )'      #=&gt; false: 3 '(', 2 ')'\nbalanced? ')p ( g k ) (( m )'     #=&gt; false: ')' at beginning\nbalanced? '(p ( g k ))) (( m ) )' #=&gt; false: more ')' than '(' in '(p ( g k )))\n</code></pre>\n\n<p><sup>1. This form of <code>gsub</code> is seldom used, possibly because it has nothing to do with character replacement; nonetheless, having a method that simply generates matches can be useful. It is similar to <code>String#scan</code>, except the return value of that method depends on whether the regular expression contains capture groups; <code>gsub</code> is not affected in that way.</sup></p>\n"}], "owner": {"reputation": 1, "user_id": 11815096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SreNqQGLm4M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlkqhF12cFGt-3E7sGOd7xZrTh-A/photo.jpg?sz=128", "display_name": "lio oliver", "link": "https://stackoverflow.com/users/11815096/lio-oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1564436155, "creation_date": 1564396288, "last_edit_date": 1564426263, "question_id": 57251951, "link": "https://stackoverflow.com/questions/57251951/number-of-parenthesis-in-input-string", "title": "number of parenthesis in input string", "body": "<p>I have input string </p>\n\n<pre><code>'(p ( g k ) ( m ) )'\n</code></pre>\n\n<p>I want to calculate total number of nested parentheses for each \n   character </p>\n\n<pre><code>for example output should be for       p -&gt; 1\n                                 g and k -&gt; 2\n                                       m -&gt; 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 11574750, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E1zi-rL-XcM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfzV_oWa-uctBvQtwfs9DOSxzMpTg/mo/photo.jpg?sz=128", "display_name": "Barak", "link": "https://stackoverflow.com/users/11574750/barak"}, "edited": false, "score": 0, "creation_date": 1564396533, "post_id": 57250971, "comment_id": 101003911, "body": "thank you for your answer, but i get Property useBundler, pathToBundler, pathToRDebugIDE is not allowed."}], "tags": [], "owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564392924, "creation_date": 1564392924, "answer_id": 57250971, "question_id": 57250124, "link": "https://stackoverflow.com/questions/57250124/cant-attached-my-ruby-on-rails-project-in-vs-code/57250971#57250971", "title": "can&#39;t attached my ruby on rails project in vs code", "body": "<p>Please try to add paths of bundle and ruby-debug-ide in your <strong>launch.json</strong> :</p>\n\n<pre><code>{\n  \"name\": \"Debug Attach\",\n  \"type\": \"Ruby\",\n  \"request\": \"attach\",\n  \"cwd\": \"${workspaceRoot}\",\n  \"useBundler\": true,\n  \"pathToBundler\": \"/path/to/rubygem/wrappers/bundle\",\n  \"pathToRDebugIDE\": \"/path/to/rubygem/gems/ruby-debug-ide-x.x.x/bin/rdebug-ide\",\n  \"remoteWorkspaceRoot\": \"bin/rails\",\n  \"remoteHost\": \"127.0.0.1\",\n  \"remotePort\": \"3000\",\n  \"showDebuggerOutput\": true\n}\n</code></pre>\n\n<p>I hope that helpful</p>\n"}], "owner": {"reputation": 314, "user_id": 11574750, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E1zi-rL-XcM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfzV_oWa-uctBvQtwfs9DOSxzMpTg/mo/photo.jpg?sz=128", "display_name": "Barak", "link": "https://stackoverflow.com/users/11574750/barak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564392924, "creation_date": 1564389844, "last_edit_date": 1564390481, "question_id": 57250124, "link": "https://stackoverflow.com/questions/57250124/cant-attached-my-ruby-on-rails-project-in-vs-code", "title": "can&#39;t attached my ruby on rails project in vs code", "body": "<p>I would like to debug in Visual Studio Code my ruby on rails project, with attach debugging, but my Visual Studio Code debugger doesn't stop at breakpoints.</p>\n\n<ul>\n<li>My ruby version:2.4.4 </li>\n<li>My rails version:5.0.1</li>\n<li>My Visual Studio Code version    :1.35.1</li>\n</ul>\n\n<p>I did install</p>\n\n<ol>\n<li>ruby extension for Visual Studio Code</li>\n<li>gem install debase</li>\n<li>gem install ruby-debug-ide</li>\n</ol>\n\n<p>and my configuration in launch.json is</p>\n\n<pre><code>{\n  \"name\": \"Debug Attach\",\n  \"type\": \"Ruby\",\n  \"request\": \"attach\",\n  \"cwd\": \"${workspaceRoot}\",\n  \"remoteWorkspaceRoot\": \"bin/rails\",\n  \"remoteHost\": \"127.0.0.1\",\n  \"remotePort\": \"3000\",\n  \"showDebuggerOutput\": true\n}\n</code></pre>\n\n<p><strong><em>in debug console i get</em></strong> </p>\n\n<ul>\n<li>\"Debugger error: Client: Error: write EPIPE\"</li>\n</ul>\n\n<p>Thank you :)</p>\n"}, {"tags": ["ruby", "http"], "comments": [{"owner": {"reputation": 1067, "user_id": 3488090, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/L7ros.jpg?s=128&g=1", "display_name": "Lalit Mehra", "link": "https://stackoverflow.com/users/3488090/lalit-mehra"}, "edited": false, "score": 0, "creation_date": 1564385646, "post_id": 57249078, "comment_id": 100998329, "body": "can you share your post form as well"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1564390329, "post_id": 57249078, "comment_id": 101000602, "body": "You would put the file in the URL for a GET request, not a POST. Send the base64 as a POST param not as part of the query string."}, {"owner": {"reputation": 56, "user_id": 6093348, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WO0rGx2nfQg/AAAAAAAAAAI/AAAAAAAAAD8/8F-dx275j8A/photo.jpg?sz=128", "display_name": "Stuart Harland", "link": "https://stackoverflow.com/users/6093348/stuart-harland"}, "edited": false, "score": 0, "creation_date": 1564408936, "post_id": 57249078, "comment_id": 101010639, "body": "anothermh is right, you can&#39;t redefine how long a URI is allowed to be. If the payload is longer than the RFC allows (a[0] + d[0] in this case), you&#39;ll need to provide it within the body of the request. Besides, if you are using a HTTP post, one would expect the contents to be in the body of the request, not the URI itself."}, {"owner": {"reputation": 17, "user_id": 11844470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J5NhHab6eWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rch0DEyy2bLkHkGrkh5b5KimoCO7w/photo.jpg?sz=128", "display_name": "Kaustubh Namjoshi", "link": "https://stackoverflow.com/users/11844470/kaustubh-namjoshi"}, "edited": false, "score": 0, "creation_date": 1564465021, "post_id": 57249078, "comment_id": 101028605, "body": "Yeah, the comment was helpful. The problem was solved."}], "owner": {"reputation": 17, "user_id": 11844470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J5NhHab6eWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rch0DEyy2bLkHkGrkh5b5KimoCO7w/photo.jpg?sz=128", "display_name": "Kaustubh Namjoshi", "link": "https://stackoverflow.com/users/11844470/kaustubh-namjoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564385877, "creation_date": 1564385586, "last_edit_date": 1564385877, "question_id": 57249078, "link": "https://stackoverflow.com/questions/57249078/how-to-pass-a-base64-encoded-file-to-an-http-post-request-in-ruby-irb", "title": "How to pass a base64 encoded file to an http post request in ruby irb?", "body": "<p>I am trying to use a http post request, but the request has a base64 encoded file in it. And I am getting an error 414, uri too long. I there a woraround for this?\nd[0] contains the base64 encoded file.</p>\n\n<pre><code>Net::HTTP.post_form(URI.parse(\"https://recruit.zoho.in/recruit/private/xml/Candidates/uploadDocument?authtoken=AUTH_Token&amp;scope=recruitapi&amp;version=2&amp;country=RU&amp;fileName=#{a[0]}&amp;documentData=#{d[0]};\"), { a: 1 })\n\n&lt;head&gt;&lt;title&gt;414 Request-URI Too Large&lt;/title&gt;&lt;/head&gt;\n&lt;body bgcolor=\"white\"&gt;\n&lt;center&gt;&lt;h1&gt;414 Request-URI Too Large&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["regex", "ruby", "treetop"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11818400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8BDu1RGjfqo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJU93Q_pRWQsxqDxtFxVeRUUqGxg/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/11818400/sebastian"}, "edited": false, "score": 0, "creation_date": 1564503074, "post_id": 57251697, "comment_id": 101049570, "body": "Thank you very much for your answer! I will take a look at Rattler."}], "tags": [], "owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "is_accepted": true, "score": 0, "last_activity_date": 1564395420, "creation_date": 1564395420, "answer_id": 57251697, "question_id": 57248931, "link": "https://stackoverflow.com/questions/57248931/how-can-you-require-an-undetermined-character-to-be-repeated-consecutively-a-cer/57251697#57251697", "title": "How can you require an undetermined character to be repeated consecutively a certain number of times in Ruby Treetop?", "body": "<p>Yes, you can do it this way in Treetop. This kind of thing not generally possible with a PEG because of the way packrat parsing works; it's greedy but you need to limit its greed using semantic information from earlier in the parse. It's only the addition in Treetop of semantic predicates (<code>&amp;{...}</code>} that make it possible. So yes, it's tedious. You might consider using Rattler instead, as it has a significant number of features in addition to those available in Treetop. I can't advise (as maintainer of Treetop, but not being a user of Rattler) but I am very impressed by its feature set and I think it will handle this case better.</p>\n\n<p>If you proceed with Treetop, bear in mind that every semantic predicate should return a boolean value indicating success or failure. This is not explicit in the initialisation of <code>@indents</code> above.</p>\n"}], "owner": {"reputation": 5, "user_id": 11818400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8BDu1RGjfqo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJU93Q_pRWQsxqDxtFxVeRUUqGxg/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/11818400/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57251697, "answer_count": 1, "score": 0, "last_activity_date": 1564395420, "creation_date": 1564384953, "question_id": 57248931, "link": "https://stackoverflow.com/questions/57248931/how-can-you-require-an-undetermined-character-to-be-repeated-consecutively-a-cer", "title": "How can you require an undetermined character to be repeated consecutively a certain number of times in Ruby Treetop?", "body": "<p>I want to create a rule that requires a non-number, non-letter character to be consecutively repeated three times. The rule would look something like this:</p>\n\n<pre><code># Note, this code does not do what I want! \n\ngrammar ThreeCharacters\n\n  rule threeConsecutiveCharacters\n    (![a-zA-Z0-9] .) 3..3\n  end\n\nend\n</code></pre>\n\n<p>Is there any way to require the first character that it detects to be repeated three times?</p>\n\n<p>There was previously a similar question about detecting the number of indentations: <a href=\"https://stackoverflow.com/questions/4205442/peg-for-python-style-indentation\">PEG for Python style indentation</a></p>\n\n<p>The solution there was to first initialize the indentation stack:</p>\n\n<pre><code>&amp;{|s| @indents = [-1] }\n</code></pre>\n\n<p>Then save the indentation for the current line:</p>\n\n<pre><code>&amp;{|s|\n  level = s[0].indentation.text_value.length\n  @indents &lt;&lt; level\n  true\n}\n</code></pre>\n\n<p>Whenever a new line begins it peeks at the indentation like this:</p>\n\n<pre><code>!{|s|\n  # Peek at the following indentation:\n  save = index; i = _nt_indentation; index = save\n  # We're closing if the indentation is less or the same as our enclosing block's:\n  closing = i.text_value.length &lt;= @indents.last\n}\n</code></pre>\n\n<p>If the indentation is larger it adds the new indentation level to the stack.</p>\n\n<p>I could create something similar for my problem, but this seems like a very tedious way to solve it.\nAre there any other ways to create my rule?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "heroku", "jwt-auth"], "comments": [{"owner": {"reputation": 737, "user_id": 1514869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/433c35e11c86a56f8b227de9224517e1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1514869/will"}, "edited": false, "score": 0, "creation_date": 1564385730, "post_id": 57248783, "comment_id": 100998362, "body": "Either payload or  Rails.application.secrets.secret_key_base is nil.   In Rails 5.3    Rails.application.secrets.secret_key_base has become Rails.application.credentials.secret_key_base. Are you using the same version of rails locally and on Heroku?"}, {"owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "reply_to_user": {"reputation": 737, "user_id": 1514869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/433c35e11c86a56f8b227de9224517e1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1514869/will"}, "edited": false, "score": 0, "creation_date": 1564386084, "post_id": 57248783, "comment_id": 100998540, "body": "I tried with both of those statements i still get the same error!"}, {"owner": {"reputation": 737, "user_id": 1514869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/433c35e11c86a56f8b227de9224517e1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1514869/will"}, "edited": false, "score": 0, "creation_date": 1564386605, "post_id": 57248783, "comment_id": 100998788, "body": "you could work out which is nil by adding some code to raise a more specific error, then from there you will have more to go on.  something like:  raise StandardError.new(&quot;payload is nil&quot;) unless payload /  raise StandardError.new(&quot;secret key is nil&quot;) unless  Rails.application.secrets.secret_key_base.  This will not fix your code but will give you a more specific error"}], "answers": [{"tags": [], "owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "is_accepted": false, "score": 1, "last_activity_date": 1564392276, "creation_date": 1564392276, "answer_id": 57250808, "question_id": 57248783, "link": "https://stackoverflow.com/questions/57248783/how-to-fix-the-error-typeerror-no-implicit-conversion-of-nil-into-string-lib/57250808#57250808", "title": "How to fix the error TypeError (no implicit conversion of nil into String): lib/json_web_token.rb:5:in `encode&#39;?", "body": "<p>Try like this:</p>\n\n<pre><code>require 'jwt'\n\nclass JsonWebToken\n def self.encode(payload, expiration = Rails.application.secrets.jwt_expiration_seconds.to_i.seconds.from_now)\n   payload = payload.dup\n   payload[:exp] = expiration.to_i\n   JWT.encode(payload, Rails.application.secrets.hmac_secret_key)\n end\n\n def self.decode(token)\n   JWT.decode(token, Rails.application.secrets.hmac_secret_key)\n rescue JWT::ExpiredSignature, JWT::DecodeError\n   false\n end\n\n def self.decode_to_payload(token)\n   decode(token).first.except('exp').with_indifferent_access\n end\nend\n</code></pre>\n\n<p>I hope that work for you.</p>\n"}, {"tags": [], "owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "is_accepted": false, "score": 0, "last_activity_date": 1571075060, "creation_date": 1571075060, "answer_id": 58381709, "question_id": 57248783, "link": "https://stackoverflow.com/questions/57248783/how-to-fix-the-error-typeerror-no-implicit-conversion-of-nil-into-string-lib/58381709#58381709", "title": "How to fix the error TypeError (no implicit conversion of nil into String): lib/json_web_token.rb:5:in `encode&#39;?", "body": "<p>Replace <code>Rails.application.secrets.secret_key_base</code> with <code>ENV['SECRET_KEY_BASE']</code> in both the <code>encode</code> and <code>decode</code> methods.</p>\n\n<p>The <code>SECRET_KEY_BASE</code> environment variable should already be automatically be set by Heroku. You can make sure it is by running this in the CLI:</p>\n\n<pre><code>heroku config:get SECRET_KEY_BASE\n</code></pre>\n\n<p>If it's not set, you can do so by:</p>\n\n<pre><code>heroku config:set SECRET_KEY_BASE=$(rake secret)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 968, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571075060, "creation_date": 1564384430, "question_id": 57248783, "link": "https://stackoverflow.com/questions/57248783/how-to-fix-the-error-typeerror-no-implicit-conversion-of-nil-into-string-lib", "title": "How to fix the error TypeError (no implicit conversion of nil into String): lib/json_web_token.rb:5:in `encode&#39;?", "body": "<p>I have a simple Jwt Authentication works perfectly on local environment, but when uploaded to heroku gives the following error! </p>\n\n<p>TypeError (no implicit conversion of nil into String): lib/json_web_token.rb:5:in `encode'</p>\n\n<p>how do i take care of this?</p>\n\n<p>This is my lib/json_web_token.rb</p>\n\n<pre><code>class JsonWebToken\n class &lt;&lt; self\n   def encode(payload, exp = 24.hours.from_now)\n     payload[:exp] = exp.to_i\n     JWT.encode(payload, Rails.application.secrets.secret_key_base)\n   end\n\n   def decode(token)\n     body = JWT.decode(token, Rails.application.secrets.secret_key_base)[0]\n     HashWithIndifferentAccess.new body\n   rescue\n     nil\n   end\n end\nend\n</code></pre>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564388619, "post_id": 57248684, "comment_id": 100999749, "body": "Must the string begin with <code>\u201dTID: \u201c</code> and/or end with that shown, or do you just want what is between the first pair of brackets regardless of what comes before and after? In other words, what must be matched as opposed to what must be extracted?"}, {"owner": {"reputation": 95, "user_id": 11248253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa713fba0822736af43bb47a260bbff0?s=128&d=identicon&r=PG&f=1", "display_name": "Charith_32", "link": "https://stackoverflow.com/users/11248253/charith-32"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564389249, "post_id": 57248684, "comment_id": 101000038, "body": "@Cary I need to extract  what is between the first pair of brackets. Is there a solution without group capturing?"}], "answers": [{"tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 0, "last_activity_date": 1564384960, "last_edit_date": 1564384960, "creation_date": 1564384176, "answer_id": 57248724, "question_id": 57248684, "link": "https://stackoverflow.com/questions/57248684/extracting-only-the-first-occurance-between-square-brackets-in-a-line/57248724#57248724", "title": "Extracting only the first occurance between square brackets in a line", "body": "<p>You might capture the first occurrence in the named capturing group using a <a href=\"https://www.regular-expressions.info/charclass.html#negated\" rel=\"nofollow noreferrer\">negated character class</a>:</p>\n\n<pre><code>\\ATID: \\[(?&lt;Ten ID&gt;[^\\[\\]]+)\\]\n</code></pre>\n\n<ul>\n<li><code>\\A</code> Start of string</li>\n<li><code>TID: </code> Match literally</li>\n<li><code>\\[</code> Match <code>[</code></li>\n<li><code>(?&lt;Ten ID&gt;</code> Named capturing group Ten ID\n\n<ul>\n<li><code>[^\\[\\]]+</code> Match not <code>[</code> or <code>]</code> using a negated character class</li>\n</ul></li>\n<li><code>)</code> Close group</li>\n<li><code>\\]</code> Match <code>]</code></li>\n</ul>\n\n<p>See  <a href=\"https://rubular.com/r/4Hc80yrDxGVgvi\" rel=\"nofollow noreferrer\">https://rubular.com/r/4Hc80yrDxGVgvi</a></p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 11248253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa713fba0822736af43bb47a260bbff0?s=128&d=identicon&r=PG&f=1", "display_name": "Charith_32", "link": "https://stackoverflow.com/users/11248253/charith-32"}, "edited": false, "score": 0, "creation_date": 1564389449, "post_id": 57248771, "comment_id": 101000139, "body": "Is there a alternative to group capturing? Even though this is correct, my program(Fluentd) looks only for Match result section."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 95, "user_id": 11248253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa713fba0822736af43bb47a260bbff0?s=128&d=identicon&r=PG&f=1", "display_name": "Charith_32", "link": "https://stackoverflow.com/users/11248253/charith-32"}, "edited": false, "score": 0, "creation_date": 1564390156, "post_id": 57248771, "comment_id": 101000504, "body": "@Charith_32 If you need the named group, use <code>\\bTID:\\s*\\[(?&lt;Grp1&gt;[^\\]]+)\\]</code>. If you need to only grab the full match, use <code>\\K</code> and a lookahead: <code>\\bTID:\\s*\\[\\K[^\\]]+(?=\\])</code>, see <a href=\"https://rubular.com/r/IiYX2PkHpdixub\" rel=\"nofollow noreferrer\">this Rubular demo</a>."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1564390380, "last_edit_date": 1564390380, "creation_date": 1564384364, "answer_id": 57248771, "question_id": 57248684, "link": "https://stackoverflow.com/questions/57248684/extracting-only-the-first-occurance-between-square-brackets-in-a-line/57248771#57248771", "title": "Extracting only the first occurance between square brackets in a line", "body": "<p>Regarding</p>\n\n<blockquote>\n  <p>Is there a solution without group capturing?</p>\n</blockquote>\n\n<p>You may use</p>\n\n<pre><code>/\\bTID:\\s*\\[\\K[^\\]]+(?=\\])/\n</code></pre>\n\n<p>See the <a href=\"https://rubular.com/r/IiYX2PkHpdixub\" rel=\"nofollow noreferrer\">Rubular demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>\\bTID:</code>  - whole word <code>TID</code> followed with a colon</li>\n<li><code>\\s*</code> - 0+ whitespace chars</li>\n<li><code>\\[</code> - a <code>[</code> char</li>\n<li><code>\\K</code> - match reset operator that discards the text matched so far</li>\n<li><code>[^\\]]+</code>  - one or more chars other than <code>]</code></li>\n<li><code>(?=\\])</code> - a positive lookahead that makes sure there is a <code>]</code> char immediately to the right of the current location.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1571618683, "last_edit_date": 1571618683, "creation_date": 1564387710, "answer_id": 57249589, "question_id": 57248684, "link": "https://stackoverflow.com/questions/57248684/extracting-only-the-first-occurance-between-square-brackets-in-a-line/57249589#57249589", "title": "Extracting only the first occurance between square brackets in a line", "body": "<pre><code>str = \u201cTID:] [-1] [] [2019-07-29 10:18:41,876]  INFO\u201d\n\ni1 = str.index(\u2018[\u2018)\n  #=&gt; 6\ni2 = str.index(\u2018]\u2019, i1+1)\n  #=&gt; 9\ni1.nil? || i2.nil? ? nil : str[i1+1..i2-1]\n  #=&gt; \u201c-1\u201d\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 11248253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa713fba0822736af43bb47a260bbff0?s=128&d=identicon&r=PG&f=1", "display_name": "Charith_32", "link": "https://stackoverflow.com/users/11248253/charith-32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57248771, "answer_count": 3, "score": 2, "last_activity_date": 1571618683, "creation_date": 1564383977, "last_edit_date": 1564384653, "question_id": 57248684, "link": "https://stackoverflow.com/questions/57248684/extracting-only-the-first-occurance-between-square-brackets-in-a-line", "title": "Extracting only the first occurance between square brackets in a line", "body": "<p>I want extract the only the value between square brackets in a given line.\nFrom the text </p>\n\n<pre><code>TID: [-1] [] [2019-07-29 10:18:41,876]  INFO\n</code></pre>\n\n<p>I want to extract the first occurrence between square brackets which is <strong>-1</strong>.\nI tried using </p>\n\n<pre><code>(?&lt;Ten ID&gt;((^(?!(TID: )))*((?&lt;=\\[).*?(?=\\]))))\n</code></pre>\n\n<p>but it gives </p>\n\n<pre><code>-1, ,2019-07-29 10:18:41,876\n</code></pre>\n\n<p>as resultant matches.</p>\n\n<p>How to capture only the first occurrence?</p>\n\n<p>You can access the regex editor <a href=\"https://rubular.com/r/qnpsPUgCWoVMTj\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1564392662, "post_id": 57248524, "comment_id": 101001798, "body": "Did you consider importing the CSV as a whole file with an import tool database instead of inserting the file line by line with Ruby?"}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1564454281, "post_id": 57248524, "comment_id": 101026184, "body": "Actually, I read from CSV then insert to collection B with some filter column. For example, age must be greater than 18 and populates in a big city"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1564469988, "post_id": 57248524, "comment_id": 101030552, "body": "I understand, but even importing into a temporary table, then copying into the final table with some conditions and dropping the temp table should be magnitudes faster in pure SQL than in Ruby."}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1564541519, "post_id": 57248524, "comment_id": 101060775, "body": "That&#39;s a good idea. I will apply that to the code. Furthermore, I still keep listening about safe thread solution"}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1564384194, "post_id": 57248685, "comment_id": 100997612, "body": "As I know the Mutex only allow 1 thread run inside the content of it per time. So it&#39;s only 1 thread running at the moment,  and others will wait until this thread jump out the content of Mutex, is it right?"}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1564384357, "post_id": 57248685, "comment_id": 100997690, "body": "Assuming the CSV file have 200 million rows, the memory it takes will be very large and it might lead to memory problem"}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1564385859, "post_id": 57248685, "comment_id": 100998422, "body": "If we use Mutex in this case, It&#39;s exactly the same with using no thread"}, {"owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "reply_to_user": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1564386186, "post_id": 57248685, "comment_id": 100998589, "body": "@Peter_175: Please try Thread Pool, if you want I will create example for you. Also I am thinking in your case bulk insert is worth instead of threading."}], "tags": [], "owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "is_accepted": false, "score": -1, "last_activity_date": 1564383991, "creation_date": 1564383991, "answer_id": 57248685, "question_id": 57248524, "link": "https://stackoverflow.com/questions/57248524/ruby-safe-way-to-run-multiple-threads/57248685#57248685", "title": "ruby safe way to run multiple threads", "body": "<p>Try to use Mutex</p>\n\n<pre><code>mutex = Mutex.new\nCSV.foreach(@file.path, encoding: 'BOM|UTF-8:UTF-8', headers: true).each do |row|\n  threads = Thread.new do\n              mutex.synchronize do\n                Record.create(row)\n              end\n            end \nend\nthreads.each(&amp;:join)\n</code></pre>\n\n<p>I hope that helpful.</p>\n"}], "owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1564383991, "creation_date": 1564383177, "question_id": 57248524, "link": "https://stackoverflow.com/questions/57248524/ruby-safe-way-to-run-multiple-threads", "title": "ruby safe way to run multiple threads", "body": "<p>I have a service that read all line on the file CSV then imports to the database. The process is only read the file and write to DB, no need to find or update on DB. So that I want to speed up that process by code:</p>\n\n<pre><code>CSV.foreach(@file.path, encoding: 'BOM|UTF-8:UTF-8', headers: true).each do |row|\n  # start thread i\n  Record.create(row)\n  # end thread i\nend\n</code></pre>\n\n<p>I want it run with multiple threads and the amount of those limits by 10 threads to keep server's RAM does not take too much.\nI try with <code>Concurrent::FixedThreadPool</code>, but it sometimes loses connection from DB, event though I just set run with 5 threads</p>\n\n<p>Any idea for the safe thread running?</p>\n"}, {"tags": ["sql", "ruby", "oracle", "sql-injection"], "comments": [{"owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "edited": false, "score": 0, "creation_date": 1564383026, "post_id": 57248264, "comment_id": 100997113, "body": "Yes it did: <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Quoting.html#method-i-quote\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "edited": false, "score": 1, "creation_date": 1564383360, "post_id": 57248264, "comment_id": 100997249, "body": "Yes, it&#39;s prevent but make sure your query prevent SQL injection as well for reference please check <a href=\"http://gavinmiller.io/2015/fixing-sql-injection-vulnerabilities/\" rel=\"nofollow noreferrer\">gavinmiller.io/2015/fixing-sql-injection-vulnerabilities</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "is_accepted": true, "score": 0, "last_activity_date": 1565575116, "creation_date": 1565575116, "answer_id": 57454911, "question_id": 57248264, "link": "https://stackoverflow.com/questions/57248264/does-activerecordconnectionadaptersoracleenhancedadapterquote-protect-again/57454911#57454911", "title": "Does ActiveRecord::ConnectionAdapters::OracleEnhancedAdapter#quote protect against SQL injection?", "body": "<p>Yes, it did. We can see the documentation for evidence: <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Quoting.html#method-i-quote\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Quoting.html#method-i-quote</a></p>\n"}], "owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 57454911, "answer_count": 1, "score": 1, "last_activity_date": 1565575116, "creation_date": 1564381921, "question_id": 57248264, "link": "https://stackoverflow.com/questions/57248264/does-activerecordconnectionadaptersoracleenhancedadapterquote-protect-again", "title": "Does ActiveRecord::ConnectionAdapters::OracleEnhancedAdapter#quote protect against SQL injection?", "body": "<p>Does this method protect us against SQL injection?</p>\n\n<p><a href=\"https://www.rubydoc.info/github/rsim/oracle-enhanced/ActiveRecord%2FConnectionAdapters%2FOracleEnhancedAdapter:quote\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/rsim/oracle-enhanced/ActiveRecord%2FConnectionAdapters%2FOracleEnhancedAdapter:quote</a></p>\n"}, {"tags": ["ruby", "heroku", "jwt", "heroku-postgres", "bcrypt-ruby"], "comments": [{"owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1564397586, "post_id": 57247617, "comment_id": 101004490, "body": "There is no need to prefix your question title with &quot;How to fix the problem&quot; or &quot;How to fix the error&quot;. You&#39;re asking a question on Stack Overflow. We <i>know</i> you have a question about a problem or error. Focus on what that question is. Ideally, your title should capture your question very concisely. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "edited": false, "score": 0, "creation_date": 1564382046, "post_id": 57248124, "comment_id": 100996712, "body": "i checked the log its says : NameError (uninitialized constant AuthenticateUser::JsonWebToken) . I had this error on my local environment that was because i was missing : &quot;config.autoload_paths &lt;&lt; Rails.root.join(&#39;lib&#39;)&quot; in config/application.rb! once i added that it worked on local. what should i do on heroku ?"}, {"owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "reply_to_user": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "edited": false, "score": 0, "creation_date": 1564382625, "post_id": 57248124, "comment_id": 100996965, "body": "Yeah you can add <code>config.autoload_paths &lt;&lt; Rails.root.join(&#39;lib&#39;)</code> or <code>config.eager_load_paths &lt;&lt; Rails.root.join(&#39;lib&#39;)</code> in your config/application.rb. Let me update comment as well."}, {"owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "edited": false, "score": 0, "creation_date": 1564383944, "post_id": 57248124, "comment_id": 100997505, "body": "hey i added &quot;config.eager_load_paths &lt;&lt; Rails.root.join(&#39;lib&#39;)&quot; which took of that problem. now i have the following error :  TypeError (no implicit conversion of nil into String):                                                                                                                                                lib/json_web_token.rb:5:in `encode&#39;"}, {"owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "edited": false, "score": 0, "creation_date": 1564384043, "post_id": 57248124, "comment_id": 100997546, "body": "it would of great help if u can shed some light on it !! lib/json_web_token.rb i have uploaded the code please take a look!"}, {"owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "reply_to_user": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "edited": false, "score": 0, "creation_date": 1564384583, "post_id": 57248124, "comment_id": 100997799, "body": "Try something like that <a href=\"https://gist.github.com/piyushawasthi/a7fd9a42dd863ed1b6bb0fbc92890175\" rel=\"nofollow noreferrer\">gist.github.com/piyushawasthi/a7fd9a42dd863ed1b6bb0fbc928901&zwnj;&#8203;75</a>, If that work for you."}], "tags": [], "owner": {"reputation": 279, "user_id": 1939534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1440b992011864dc67e329354d16a2?s=128&d=identicon&r=PG", "display_name": "Piyush Awasthi", "link": "https://stackoverflow.com/users/1939534/piyush-awasthi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564382854, "last_edit_date": 1564382854, "creation_date": 1564381102, "answer_id": 57248124, "question_id": 57247617, "link": "https://stackoverflow.com/questions/57247617/how-to-fix-the-problem-when-i-try-authentication-on-local-system-its-working-pe/57248124#57248124", "title": "How to fix the problem, When I try authentication on local system its working perfectly, but when uploaded to heroku it comes back with error 500?", "body": "<p>Please check the more details log of your heroku application by using Heroku CLI.</p>\n\n<pre><code>heroku logs -t\n</code></pre>\n\n<p>If the problem with AuthenticateUser::JsonWebToken use auto loaded in your</p>\n\n<p>config/application.rb</p>\n\n<pre><code>class Application &lt; Rails::Application\n    #.....\n    config.autoload_paths &lt;&lt; Rails.root.join('lib')\n    #.....\nend\n</code></pre>\n\n<p>I hope that helpful to resolve your issue.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4892449, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ulei8cCAz4A/AAAAAAAAAAI/AAAAAAAAJH4/q-VVMi-zzPY/photo.jpg?sz=128", "display_name": "Acushla", "link": "https://stackoverflow.com/users/4892449/acushla"}, "is_accepted": false, "score": 1, "last_activity_date": 1611370073, "creation_date": 1611370073, "answer_id": 65855236, "question_id": 57247617, "link": "https://stackoverflow.com/questions/57247617/how-to-fix-the-problem-when-i-try-authentication-on-local-system-its-working-pe/65855236#65855236", "title": "How to fix the problem, When I try authentication on local system its working perfectly, but when uploaded to heroku it comes back with error 500?", "body": "<p>I had similar issues, the API works perfectly on localhost after uploading to Heroku, I still got unauthorized on secure pages even with the token on the headers.\nI added</p>\n<pre><code>production:\n   secret_key_base: &lt;%= ENV[&quot;SECRET_KEY_BASE&quot;] %&gt;\n</code></pre>\n<p>to <code>config/secrets.yml</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11849320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aeF6LikT-BE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOFoP315kBJM_VlYtibtyJsqamjw/photo.jpg?sz=128", "display_name": "sandesh b nataraj", "link": "https://stackoverflow.com/users/11849320/sandesh-b-nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1611370073, "creation_date": 1564377996, "last_edit_date": 1564379657, "question_id": 57247617, "link": "https://stackoverflow.com/questions/57247617/how-to-fix-the-problem-when-i-try-authentication-on-local-system-its-working-pe", "title": "How to fix the problem, When I try authentication on local system its working perfectly, but when uploaded to heroku it comes back with error 500?", "body": "<p>I am new to rails and react, this might be a simple one but i cant seem to figure it out.</p>\n\n<p>I am trying to implement a simple jwt authentication using ruby on rails with react as client. I followed the steps that was suggested in : \n<a href=\"https://www.pluralsight.com/guides/token-based-authentication-with-ruby-on-rails-5-api\" rel=\"nofollow noreferrer\">https://www.pluralsight.com/guides/token-based-authentication-with-ruby-on-rails-5-api</a></p>\n\n<p>It works as expected on my local system but when i uploaded my app on to heroku it always comes back with error : 500. All the other 'Post' and 'Get' requests work normally. Its only when i try to authenticate and get the auth_token back it runs into 500 error.</p>\n\n<p>this is the request format \npost: localhost:3001/api/authenticate </p>\n\n<p>and body:</p>\n\n<pre><code>{\n    \"email\": \"evin@xyz.com\",\n    \"password\": \"evin\"\n}\n</code></pre>\n\n<p>I verified that this data is available on heroku by using get which works perfectly.</p>\n\n<p>I have been working on resolving this for over 2 days now. There is very little information available online on this authentication. There was plenty of recommendations on using auth0. But i could not find much help with this form of authentication.</p>\n\n<p>This is what i have</p>\n\n<pre><code>#Path: /app/controllers/application_controller.rb\n\nclass ApplicationController &lt; ActionController::API\n  before_action :authenticate_request\n  attr_reader :current_user\n\n  private\n\n  def authenticate_request\n    @current_user = AuthorizeApiRequest.call(request.headers).result\n    render json: { error: 'Not Authorized' }, status: 401 unless @current_user\n  end\nend\n\n\n#Path: app/controllers/api/authentication_controller.rb\n\nclass Api::AuthenticationController &lt; ApplicationController\n skip_before_action :authenticate_request\n\n def authenticate\n   command = AuthenticateUser.call(params[:email], params[:password])\n\n   if command.success?\n     render json: { auth_token: command.result }\n   else\n     render json: { error: command.errors }, status: :unauthorized\n   end\n end\nend\n\n\n\n#Path: /app/commands/authenticate_user.rb\n\nclass AuthenticateUser\n  prepend SimpleCommand\n\n  def initialize(email, password)\n    @email = email\n    @password = password\n  end\n\n  def call\n    JsonWebToken.encode(user_id: user.id) if user\n  end\n\n  private\n\n  attr_accessor :email, :password\n\n  def user\n    user = User.find_by_email(email)\n    return user if user &amp;&amp; user.authenticate(password)\n\n    errors.add :user_authentication, 'invalid credentials'\n    nil\n  end\nend\n\n\n#Path:  /app/commands/authorize_api_request.rb\n\nclass AuthorizeApiRequest\n  prepend SimpleCommand\n\n  def initialize(headers = {})\n    @headers = headers\n  end\n\n  def call\n    user\n  end\n\n  private\n\n  attr_reader :headers\n\n  def user\n    @user ||= User.find(decoded_auth_token[:user_id]) if decoded_auth_token\n    @user || errors.add(:token, 'Invalid token') &amp;&amp; nil\n  end\n\n  def decoded_auth_token\n    @decoded_auth_token ||= JsonWebToken.decode(http_auth_header)\n  end\n\n  def http_auth_header\n    if headers['Authorization'].present?\n      return headers['Authorization'].split(' ').last\n    else\n      errors.add(:token, 'Missing token')\n    end\n    nil\n  end\nend\n\n\n\n\n#Path: /lib/json_web_token.rb\n\nclass JsonWebToken\n class &lt;&lt; self\n   def encode(payload, exp = 24.hours.from_now)\n     payload[:exp] = exp.to_i\n     JWT.encode(payload, Rails.application.secrets.secret_key_base)\n   end\n\n   def decode(token)\n     body = JWT.decode(token, Rails.application.secrets.secret_key_base)[0]\n     HashWithIndifferentAccess.new body\n   rescue\n     nil\n   end\n end\nend\n\n\n\n\n\n#path: /config/application.rb\n\nrequire_relative 'boot'\n\nrequire \"rails\"\n# Pick the frameworks you want:\nrequire \"active_model/railtie\"\nrequire \"active_job/railtie\"\nrequire \"active_record/railtie\"\nrequire \"active_storage/engine\"\nrequire \"action_controller/railtie\"\nrequire \"action_mailer/railtie\"\nrequire \"action_view/railtie\"\nrequire \"action_cable/engine\"\n# require \"sprockets/railtie\"\nrequire \"rails/test_unit/railtie\"\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Deveycon\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n\n    #Autoload lib for encrypt and decrypt\n    config.autoload_paths &lt;&lt; Rails.root.join('lib')\n\n    # Only loads a smaller set of middleware suitable for API only apps.\n    # Middleware like session, flash, cookies can be added back manually.\n    # Skip views, helpers and assets when generating a new resource.\n    config.api_only = true\n  end\nend\n\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1564382614, "post_id": 57247118, "comment_id": 100996959, "body": "Eh. <code>current_hash.values.reduce(&amp;:zip).join #\u21d2 &quot;keder ohulw&quot;</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1564382716, "post_id": 57247118, "comment_id": 100997000, "body": "@AlekseiMatiushkin: Nice. I guess I&#39;m guilty of premature optimisation... :P"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1564376790, "last_edit_date": 1564376790, "creation_date": 1564373563, "answer_id": 57247118, "question_id": 57247086, "link": "https://stackoverflow.com/questions/57247086/zip-all-array-values-of-hash/57247118#57247118", "title": "Zip all array values of hash", "body": "<pre><code>current_hash.values.then { |first, *rest| first.zip(*rest) }.flatten.compact.join\n</code></pre>\n\n<p>An unfortunate thing with Ruby <code>zip</code> is that the first enumerable needs to be the receiver, and the others need to be parameters. Here, I use <code>then</code>, parameter deconstruction and splat to separate the first enumerable from the rest. <code>flatten</code> gets rid of the column arrays, <code>compact</code> gets rid of the <code>nil</code> (though it's not really necessary as <code>join</code> will ignore it), and <code>join</code> turns the array into the string.</p>\n\n<hr>\n\n<p>Note that Ruby <code>zip</code> will stop at length of the receiver; so if <code>:a</code> is shorter than the others, you will likely have a surprising result. If that is a concern, please update with an example that reflects that scenario, and the desired outcome.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564380669, "last_edit_date": 1564380669, "creation_date": 1564378779, "answer_id": 57247717, "question_id": 57247086, "link": "https://stackoverflow.com/questions/57247086/zip-all-array-values-of-hash/57247717#57247717", "title": "Zip all array values of hash", "body": "<p>Here I'm fleshing out @Amadan's remark below the horizontal line in is answer. Suppose: </p>\n\n<pre><code>current_hash = { a:[\"k\",\"r\"], b:[\"e\",\" \",\"l\"], c:[\"d\",\"o\",\"w\"], d:[\"e\", \"h\"] }\n</code></pre>\n\n<p>and you wished to return <code>\"keder ohlw\"</code>. If you made <code>[\"k\",\"r\"]</code> and <code>[[\"e\",\" \",\"l\"], [\"d\",\"o\",\"w\"], [\"e\", \"h\"]]</code> <code>zip</code>'s receiver and argument, respectively, you would get <code>\"keder oh\"</code>, which omits <code>\"l\"</code> and <code>\"w\"</code>. (See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">Array#zip</a>, especially the 3<sup>rd</sup> paragraph.)</p>\n\n<p>To include those strings you would need to fill out <code>[\"k\",\"r\"]</code> with <code>nil</code>s to make it as long as the longest value, or make <code>zip</code>'s receiver an array of <code>nil</code>s of the same length. The latter approach can be implemented as follows:</p>\n\n<pre><code>vals = current_hash.values\n  #=&gt; [[\"k\", \"r\"], [\"e\", \" \", \"l\"], [\"d\", \"o\", \"w\"], [\"e\", \"h\"]] \n([nil]*vals.map(&amp;:size).max).zip(*vals).flatten.compact.join\n  #=&gt; \"keder ohlw\" \n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>a = [nil]*vals.map(&amp;:size).max\n  #=&gt; [nil, nil, nil] \n</code></pre>\n\n<p>and</p>\n\n<pre><code>a.zip(*vals)\n  #=&gt; [[nil, \"k\", \"e\", \"d\", \"e\"],\n  #    [nil, \"r\", \" \", \"o\", \"h\"],\n  #    [nil, nil, \"l\", \"w\", nil]] \n</code></pre>\n\n<p>One could alternatively use <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">Array#transpose</a> rather than <code>zip</code>.</p>\n\n<pre><code>vals = current_hash.values\nidx = (0..vals.map(&amp;:size).max-1).to_a\n  #=&gt; [0, 1, 2] \nvals.map { |a| a.values_at(*idx) }.transpose.flatten.compact.join\n  #=&gt; \"keder ohlw\" \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\">Array#values_at</a>. Note:</p>\n\n<pre><code>a = vals.map { |a| a.values_at(*idx) }\n  #=&gt; [[\"k\", \"r\", nil],\n  #    [\"e\", \" \", \"l\"],\n  #    [\"d\", \"o\", \"w\"],\n  #    [\"e\", \"h\", nil]] \na.transpose\n  #=&gt; [[\"k\", \"e\", \"d\", \"e\"],\n  #    [\"r\", \" \", \"o\", \"h\"],\n  #    [nil, \"l\", \"w\", nil]] \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7358797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d354124ffebdc8f3d9ca5ece9d904bc?s=128&d=identicon&r=PG&f=1", "display_name": "MackHalliday", "link": "https://stackoverflow.com/users/7358797/mackhalliday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57247118, "answer_count": 2, "score": 0, "last_activity_date": 1564380669, "creation_date": 1564373170, "question_id": 57247086, "link": "https://stackoverflow.com/questions/57247086/zip-all-array-values-of-hash", "title": "Zip all array values of hash", "body": "<p>I'd like to zip all the array values of a hash. I know there's a way to zip arrays together. I'd like to do that with the values of my hash below. </p>\n\n<pre><code>current_hash = {:a=&gt;[\"k\", \"r\", \"u\"],\n                :b=&gt;[\"e\", \" \", \"l\"],\n                :c=&gt;[\"d\", \"o\", \"w\"],\n                :d=&gt;[\"e\", \"h\"]\n                }\n\n desired_outcome = \"keder ohulw\"\n</code></pre>\n\n<p>I have included my desired outcome above.</p>\n"}]