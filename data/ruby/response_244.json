[{"tags": ["ruby-on-rails", "ruby", "specs"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1568249283, "post_id": 57897873, "comment_id": 102217611, "body": "run <code>rake routes</code> and you&#39;ll see all your named routes"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1568252563, "post_id": 57897873, "comment_id": 102218268, "body": "also, with a controller test you don&#39;t need the route, just do <code>get :name_of_the_action</code>"}, {"owner": {"reputation": 58, "user_id": 1847980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdzlP.jpg?s=128&g=1", "display_name": "Zahit Rios", "link": "https://stackoverflow.com/users/1847980/zahit-rios"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1568300302, "post_id": 57897873, "comment_id": 102238767, "body": "Thanks @arieljuod i will try with the routes displayed!"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1568301408, "post_id": 57897873, "comment_id": 102239395, "body": "you don&#39;t need named routes on controller specs, just use the name of the action that you are testing"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 1847980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdzlP.jpg?s=128&g=1", "display_name": "Zahit Rios", "link": "https://stackoverflow.com/users/1847980/zahit-rios"}, "is_accepted": false, "score": 0, "last_activity_date": 1568405681, "creation_date": 1568405681, "answer_id": 57929853, "question_id": 57897873, "link": "https://stackoverflow.com/questions/57897873/rubyspec-to-test-a-redirect-in-ruby-controller/57929853#57929853", "title": "RubySpec to test a redirect in Ruby controller", "body": "<p>For me the solution was call the action in spec via another controller</p>\n\n<pre><code>context 'with not allowed url' do\n  before do\n   @controller = Provider::PlansController.new\n   get :index\n  end\n  it { should redirect_to financial_dashboard_path }\nend\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 1847980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdzlP.jpg?s=128&g=1", "display_name": "Zahit Rios", "link": "https://stackoverflow.com/users/1847980/zahit-rios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568405681, "creation_date": 1568243717, "question_id": 57897873, "link": "https://stackoverflow.com/questions/57897873/rubyspec-to-test-a-redirect-in-ruby-controller", "title": "RubySpec to test a redirect in Ruby controller", "body": "<p>I'm trying to code a spec for a method who redirect to a specific path when the user access to provider/plans and provider/prospects</p>\n\n<p>I was trying with many path combinations in the before group, i was trying with this.</p>\n\n<pre><code>before { get :provider_plans_index_path }\nbefore { get :provider_index_plans_path}\nbefore { get :provider_plans_path}\nbefore { get :provider_index_path}\nbefore { get :provider_plans_path}\nbefore { get :provider_planes_path}\n</code></pre>\n\n<p>base_controller.rb</p>\n\n<pre><code>class Provider::BaseController &lt; ActionController::Base\n  layout 'provider'\n\n  before_action :allowed_pages\n\n  def allowed_pages    \n    redirect_to financial_dashboard_path if  !requested_action?(params[:controller])\n  end\n\n  def requested_action?(data)\n    regexp = %r{\n      ^(provider/plans)|      \n      (provider/prospects)$\n    }x\n    data.match?(regexp)\n  end\nend\n</code></pre>\n\n<p>base_controller_spec.rb</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe Provider::BaseController, type: :controller do\n  let(:provider) { create(:provider) }\n  let(:financial) { create(:financial, provider: provider) }\n  let(:user) { provider.user }\n  before { login_user user }\n\n  describe 'GET plans' do\n    context 'with not allowed url' do      \n      before { get :provider_planes_path}\n      it { should redirect_to financial_dashboard_path}\n    end\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>namespace :provider do\n  get '', to: 'dashboard#index'\n  get 'dashboard', to: 'dashboard#index'\n\n  resources :plans, only: [:index, :create, :update], path: 'planes'\n  resources :prospects,  only: [:index, :show, :create, :update], path: 'prospectos' do\n    get 'diagnostico', to: 'prospects#show', on: :member, as: :general\n    patch 'diagnostico', to: 'prospects#update', on: :member\n    get 'configuracion', to: 'prospects#configuration', on: :member, as: :configuration\n  end\nend\n</code></pre>\n\n<p>I'm getting this error with all the combinations</p>\n\n<p>ActionController::UrlGenerationError:\n       No route matches</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1568238427, "post_id": 57897149, "comment_id": 102215381, "body": "See <a href=\"https://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> for examples of specifying conditions on the joined tables."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1568238937, "post_id": 57897149, "comment_id": 102215489, "body": "<a href=\"https://github.com/rubocop-hq/ruby-style-guide#double-colons\" rel=\"nofollow noreferrer\">You should not use double colons to invoke methods.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1568239250, "post_id": 57897217, "comment_id": 102215561, "body": "<code>where(club: { id: club.id })</code> should be <code>where(clubs: { id: club.id })</code> since table names are used inside <code>where</code> statements."}, {"owner": {"reputation": 2005, "user_id": 765410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd722797fe9099f99cba6fcfc69f95ba?s=128&d=identicon&r=PG", "display_name": "colinross", "link": "https://stackoverflow.com/users/765410/colinross"}, "edited": false, "score": 1, "creation_date": 1568253688, "post_id": 57897217, "comment_id": 102218475, "body": "(best-practices) Don&#39;t use <code>::</code> for class methods, just use <code>Person.find(person)</code>"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1568269892, "post_id": 57897217, "comment_id": 102222305, "body": "@3limin4t0r thx, fixed :) @colinross thx, no idea why I used <code>::</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1568276578, "post_id": 57897217, "comment_id": 102225345, "body": "Probably because you copied it from the question that way."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1568276768, "post_id": 57897217, "comment_id": 102225450, "body": "yeah, but it doesn&#39;t excuse me ;)"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568319176, "post_id": 57897217, "comment_id": 102246764, "body": "I&#39;m still a Ruby-newbie (A Rewbie?) so I have an excuse. XD"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1568269860, "last_edit_date": 1568269860, "creation_date": 1568238468, "answer_id": 57897217, "question_id": 57897149, "link": "https://stackoverflow.com/questions/57897149/in-activerecord-fetch-items-by-a-belongs-to/57897217#57897217", "title": "In ActiveRecord, fetch items by a belongs_to", "body": "<p>You can use the methods provided by Rails:</p>\n\n<pre><code>def find_addresses(club)\n  club.persons.map do |person|\n    user = Person.find(person)\n    user_addresses = user.mail_addresses\n  end\nend\n</code></pre>\n\n<p>Note that you can use <code>Person</code>, there is no need to prefix the class name.</p>\n\n<p>If you want to make it more efficient (less SQL queries), you can do:</p>\n\n<pre><code>def find_addresses(club)\n  MailAddress.joins(person: :clubs).where(clubs: { id: club.id })\nend\n</code></pre>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 57897217, "answer_count": 1, "score": 0, "last_activity_date": 1568269860, "creation_date": 1568238025, "last_edit_date": 1568238755, "question_id": 57897149, "link": "https://stackoverflow.com/questions/57897149/in-activerecord-fetch-items-by-a-belongs-to", "title": "In ActiveRecord, fetch items by a belongs_to", "body": "<p>I have three Classes I don't get to edit, and one I do.</p>\n\n<pre><code>class MailingAddress &lt; ActiveRecord::Base #yes, this is singular\n    belongs_to :person\nend\n</code></pre>\n\n<p>And </p>\n\n<pre><code>class Person &lt; ActiveRecord::Base\n    has_many :mail_addresses #Yes, it's written as plural\nend\n</code></pre>\n\n<p>And </p>\n\n<pre><code>class Clubs &lt; ActiveRecord::Base\n    has_and_belongs_to_many :persons #yes, listed as plural\nend\n</code></pre>\n\n<p>Each one doesn't have any defs designed for fetching the others. </p>\n\n<p>And here's my def in the file I can edit.</p>\n\n<pre><code>def find_addresses (club)\n  club.persons.map do |person|\n    user = ActiveRecord::Base::Person::find(person)\n    p user.inspect #shows the current Person\n    user_addresses = ActiveRecord::Base::MailAddress::select(user) # &lt;-- This line doesn't work\n  end\nend\n</code></pre>\n\n<p>I've also tried replacing the problematic line with </p>\n\n<pre><code>user_addresses = ActiveRecord::joins(:mail_address).where(person: user)\n</code></pre>\n\n<p>But that doesn't work either (apparently ActiveRecord joins isn't a thing). \nHow should I write that line so I can get an array or hash with all the mail addresses for the user?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568236406, "post_id": 57896825, "comment_id": 102214813, "body": "What exactly is your question?"}, {"owner": {"reputation": 9, "user_id": 8328341, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6VOsk.png?s=128&g=1", "display_name": "bitdon", "link": "https://stackoverflow.com/users/8328341/bitdon"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568237738, "post_id": 57896825, "comment_id": 102215215, "body": "@jvillian updated for clarity"}], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "is_accepted": false, "score": 0, "last_activity_date": 1568244196, "creation_date": 1568244196, "answer_id": 57897924, "question_id": 57896825, "link": "https://stackoverflow.com/questions/57896825/how-to-approach-rendering-different-instances-of-the-same-model-from-a-dropdown/57897924#57897924", "title": "How to approach rendering different instances of the same model from a dropdown selector?", "body": "<p>I would think of these as two different pages in a web app, or really N different pages where N is the number of different trading accounts.</p>\n\n<p>You can then think of the pages that display the data as having URL paths like \"/show/trading_account/12345\", where 12345 is the ID of that account. More realistically it might be something like \"/show/user/123/account/456\", to indicate that you are showing account 456 for user with id 123.</p>\n\n<p>As far as making the dropdown menu function, you would just need a bit of Javascript that can handle the mouseup event on the <code>&lt;select&gt;</code> element, and redirect the page to the appropriate URL that was discussed above. You might pair it with a mapping of display name to URL to open. So the javascript might look like:</p>\n\n<pre><code>function switchAccount() {\n  var select = document.getElementById('account-select');\n  var url = ACCOUNT_TO_URL[select.selectedOptions[0].value];\n  window.location.href = url;\n}\n</code></pre>\n\n<p>And the HTML might look like:</p>\n\n<pre><code>  &lt;select id=\"account-select\" onchange=\"switchAccount()\"&gt;\n    &lt;option value=\"Account A\"&gt;Account A&lt;/option&gt;\n    &lt;option value=\"Account B\"&gt;Account B&lt;/option&gt;\n  &lt;/select&gt;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8328341, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6VOsk.png?s=128&g=1", "display_name": "bitdon", "link": "https://stackoverflow.com/users/8328341/bitdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568244196, "creation_date": 1568236156, "last_edit_date": 1568237717, "question_id": 57896825, "link": "https://stackoverflow.com/questions/57896825/how-to-approach-rendering-different-instances-of-the-same-model-from-a-dropdown", "title": "How to approach rendering different instances of the same model from a dropdown selector?", "body": "<p>I am looking for ways to render information belonging to an instance of a model. Let's say a User has 5 different \"Trading Account\" instances of the TradingAccount model. From my Dashboard, if there is a dropdown selector menu where I can choose an instance of my Trading Account, I want it to render the information regarding \"Trading Account A\" and if I select \"Trading Account B\", then it renders the relevant information regarding \"B\". </p>\n\n<p>The Dashboard should dynamically show the data depending on the selected instance of Trading Account. How do I render data from a specific instance of a model when a User selects an instance from a dropdown selector?</p>\n\n<p><a href=\"https://i.stack.imgur.com/3Gmpj.png\" rel=\"nofollow noreferrer\">example</a></p>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "is_accepted": false, "score": 0, "last_activity_date": 1569351723, "last_edit_date": 1569351723, "creation_date": 1569266340, "answer_id": 58068856, "question_id": 57896393, "link": "https://stackoverflow.com/questions/57896393/how-do-i-find-documents-in-a-mongo-collection-based-on-a-date-range-in-ruby/58068856#58068856", "title": "How do I find documents in a mongo collection based on a date range in ruby", "body": "<p>The problem could be the way MongoDB (Ruby driver) handle Date.</p>\n\n<p>Have a look at <a href=\"https://gist.github.com/jlecour/978307\" rel=\"nofollow noreferrer\">this issue on Github</a>.</p>\n\n<p>If I got it right you should use UTC Time instance, not a Date object.</p>\n\n<p>It may be useful to use <code>#to_mongo</code> from <a href=\"https://rdoc.info/github/jnunemaker/mongomapper/master/MongoMapper/Extensions/Date#to_mongo-instance_method\" rel=\"nofollow noreferrer\">Date#to_mongo-instance_method</a>.</p>\n\n<p>Ps:</p>\n\n<p>I did some research and it seems that the problem should be the way Date objects are deserialized in Ruby drivers.\nsee Mongo Documentation: <a href=\"https://docs.mongodb.com/ruby-driver/master/tutorials/bson-v3/index.html#special-ruby-date-classes\" rel=\"nofollow noreferrer\">Special Ruby Date Classes</a>.</p>\n\n<p>You can find an example on how to query a collection using <code>Time.utc</code> in this <a href=\"https://stackoverflow.com/questions/5969625/ruby-mongo-driver-how-to-look-for-date-intervals\">answer</a> on StackOverflow.</p>\n"}], "owner": {"reputation": 1, "user_id": 3218909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5c02e6cf6df54cde6d601387e5cdcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3218909", "link": "https://stackoverflow.com/users/3218909/user3218909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569351723, "creation_date": 1568233767, "last_edit_date": 1568234026, "question_id": 57896393, "link": "https://stackoverflow.com/questions/57896393/how-do-i-find-documents-in-a-mongo-collection-based-on-a-date-range-in-ruby", "title": "How do I find documents in a mongo collection based on a date range in ruby", "body": "<p>I have a collection in mongodb that contains a number of documents each of which contain a date field named <code>thisdate</code> - like this:</p>\n\n<pre><code>{\"_id\"=&gt;BSON::ObjectId('5d79495d5c3ce60e83b11764'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-11 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d7949785c3ce60e96502476'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-11 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d7949b95c3ce60eaa3b1ff2'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-11 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d7949c75c3ce60ebb3419e7'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-11 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a1a5c3ce611c9f5f0fe'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a1c5c3ce611d92f3844'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a1e5c3ce611e9a8bcab'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a1f5c3ce611f986611e'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a245c3ce6120a84876a'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a265c3ce6121aa462a8'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-06 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a295c3ce6122b2cc00a'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-05 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a2b5c3ce6123ce16418'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-05 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a2f5c3ce6124d52266f'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a455c3ce6126839621b'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a455c3ce6126839621c'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a455c3ce6126839621d'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a455c3ce6126839621e'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a455c3ce6126839621f'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a475c3ce61278d8d92d'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a475c3ce61278d8d92e'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a475c3ce61278d8d92f'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a475c3ce61278d8d930'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a475c3ce61278d8d931'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-09-01 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a505c3ce6128956ef46'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-22 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a505c3ce6128956ef47'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-22 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a505c3ce6128956ef48'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-22 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a505c3ce6128956ef49'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-22 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a505c3ce6128956ef4a'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-22 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a555c3ce6129b7fa3cc'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-17 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a555c3ce6129b7fa3cd'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-17 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a555c3ce6129b7fa3ce'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-17 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a555c3ce6129b7fa3cf'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-17 00:00:00 UTC}\n{\"_id\"=&gt;BSON::ObjectId('5d794a555c3ce6129b7fa3d0'), \"blah\"=&gt;\"some text\", \"thisdate\"=&gt;2019-08-17 00:00:00 UTC}\n</code></pre>\n\n<p>Using ruby and the mongo ruby gem I am trying to return a subset of the above documents based on a date range as follows.</p>\n\n<pre><code>puts \"date range\"\n\nfrom = Date.today-30 # 2019-08-12\nputs \"from #{from}\" # 2019-09-06\n\nto = Date.today-5\nputs \"to #{to}\"\n\ndbclient['testing'].find(\"$and\": [\"thisdate\": {\"$lt\": to},\"thisdate\": {\"$gt\": from}]).each {|this| puts this}\n</code></pre>\n\n<p>When I run this the documents returned are not within the date range I've requested. I was expecting to get documents where the <code>thisdate</code> is <code>$gt than 2019-08-12 and $lt than 2019-09-06</code> but as you can see I am getting documents where the date is <code>$gt than 2019-09-06</code>.</p>\n\n<p>Can someone please tell what I am doing wrong.</p>\n\n<p>I'm using \nruby v2.5.1\nmongo gem v2.8.0\nmongodb v3.6.3</p>\n"}, {"tags": ["ruby", "sockets", "timeout", "ruby-2.5"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1568235664, "post_id": 57895907, "comment_id": 102214590, "body": "&quot;The best way&quot;? Who knows. There does not appear to be a built-in way. tcp_timeout uses IO::select under the hood, so that approach definitely works. A simple thread-based timer might also work."}], "answers": [{"tags": [], "owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "is_accepted": true, "score": 0, "last_activity_date": 1568923938, "creation_date": 1568923938, "answer_id": 58018348, "question_id": 57895907, "link": "https://stackoverflow.com/questions/57895907/ruby-2-5-set-timeout-on-tcp-sockets-read/58018348#58018348", "title": "ruby 2.5: set timeout on tcp socket&#39;s read", "body": "<p>Yes, <a href=\"https://stackoverflow.com/questions/9853516/set-socket-timeout-in-ruby-via-so-rcvtimeo-socket-option?rq=1\">IO::select</a>, using <code>recvfrom</code> instead of <code>gets</code> (which might wait a while for a newline).</p>\n"}], "owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 58018348, "answer_count": 1, "score": 0, "last_activity_date": 1568923938, "creation_date": 1568231372, "last_edit_date": 1568233218, "question_id": 57895907, "link": "https://stackoverflow.com/questions/57895907/ruby-2-5-set-timeout-on-tcp-sockets-read", "title": "ruby 2.5: set timeout on tcp socket&#39;s read", "body": "<p>Ruby 2.5's <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/socket/rdoc/Socket.html\" rel=\"nofollow noreferrer\">doc</a>\nsays that for:<br>\n<code>myTCPServer = Socket.tcp(host, port, nil, nil, :connect_timeout=60)</code>,<br>\nthe only option it accepts is <code>:connect_timeout</code>.</p>\n\n<p>(Ruby 2.0's <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/socket/rdoc/Socket.html#method-c-tcp_server_sockets\" rel=\"nofollow noreferrer\">doc</a> may have a copy-paste error,\nclaiming that <code>:timeout</code> is another option, but not saying what that option does.  At any rate, that option doesn't work in 2.5.1p57 on Ubuntu 18.04 LTS.)</p>\n\n<p>Is the gem <a href=\"https://www.rubydoc.info/gems/tcp_timeout/0.1.1\" rel=\"nofollow noreferrer\">tcp_timeout</a> the best way to make a TCP socket whose connected session can <strong>timeout on read</strong> for a specified duration,  e.g via <code>mySession.gets</code>?<br>\n(Not a timeout on <a href=\"https://stackoverflow.com/q/21014272/2097284\">connect</a>.\nNot a timeout on write.)</p>\n\n<p>Or <a href=\"https://stackoverflow.com/questions/9853516/set-socket-timeout-in-ruby-via-so-rcvtimeo-socket-option?rq=1\"><code>IO::select</code></a>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568231272, "post_id": 57895487, "comment_id": 102213074, "body": "<code>start_time: DateTime.now.beginning_of_day</code> is not valid syntax"}, {"owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568300689, "post_id": 57895487, "comment_id": 102238988, "body": "@lacostenycoder it is if you require activesupport"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568301103, "post_id": 57895487, "comment_id": 102239225, "body": "I didn&#39;t know <code>something: something_else</code> was valid ruby code.  If so, since when?"}, {"owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568302024, "post_id": 57895487, "comment_id": 102239736, "body": "Ah :(, it is if you copy pate this from a object creation parameter list, sorry, updated."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568321894, "post_id": 57895487, "comment_id": 102247660, "body": "what version of ruby are you on which produced this?"}, {"owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568622256, "post_id": 57895487, "comment_id": 102317987, "body": "Latest and greatest, ruby 2.6.4"}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "edited": false, "score": 1, "creation_date": 1575452384, "post_id": 57908210, "comment_id": 104567979, "body": "I think 2.5.hours is also working. I have check this with activesupport (= 6.0.1)."}, {"owner": {"reputation": 35, "user_id": 7245279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QMSS4yyCsYc/AAAAAAAAAAI/AAAAAAAAAFU/KoPcqLoPs8s/photo.jpg?sz=128", "display_name": "Alex Damian", "link": "https://stackoverflow.com/users/7245279/alex-damian"}, "reply_to_user": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "edited": false, "score": 0, "creation_date": 1575468447, "post_id": 57908210, "comment_id": 104576963, "body": "@CodeMaker it does indeed!"}], "tags": [], "owner": {"reputation": 35, "user_id": 7245279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QMSS4yyCsYc/AAAAAAAAAAI/AAAAAAAAAFU/KoPcqLoPs8s/photo.jpg?sz=128", "display_name": "Alex Damian", "link": "https://stackoverflow.com/users/7245279/alex-damian"}, "is_accepted": false, "score": 3, "last_activity_date": 1568296189, "creation_date": 1568296189, "answer_id": 57908210, "question_id": 57895487, "link": "https://stackoverflow.com/questions/57895487/adding-bigdecimal-hours-to-datetime-is-wrong-by-1-second/57908210#57908210", "title": "Adding BigDecimal hours to DateTime is wrong by 1 second", "body": "<p>It's off by one second, not milisecond. Why not use <code>2.hours</code> instead of <code>BigDecimal(2).hours</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "edited": false, "score": 0, "creation_date": 1575463872, "post_id": 59145553, "comment_id": 104574262, "body": "Thank you, great answer."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": true, "score": 7, "last_activity_date": 1575336405, "last_edit_date": 1575336405, "creation_date": 1575315231, "answer_id": 59145553, "question_id": 57895487, "link": "https://stackoverflow.com/questions/57895487/adding-bigdecimal-hours-to-datetime-is-wrong-by-1-second/59145553#59145553", "title": "Adding BigDecimal hours to DateTime is wrong by 1 second", "body": "<p>Ultimately, it boils down to floating point errors in some of the math that ActiveSupport does internally.</p>\n\n<p>Notice that using Rational instead of BigDecimal works:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>DateTime.now.beginning_of_day + Rational(2, 1).hours\n# =&gt; Mon, 02 Dec 2019 02:00:00 -0800\nTime.now.beginning_of_day + Rational(2, 1).hours\n# =&gt; 2019-12-02 02:00:00 -0800\n</code></pre>\n\n<p>Here's the relevant code from Time/DateTime/ActiveSupport:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class DateTime\n  def since(seconds)\n    self + Rational(seconds, 86400)\n  end\n\n  def plus_with_duration(other) #:nodoc:\n    if ActiveSupport::Duration === other\n      other.since(self)\n    else\n      plus_without_duration(other)\n    end\n  end\nend\n\nclass Time\n  def since(seconds)\n    self + seconds\n  rescue\n    to_datetime.since(seconds)\n  end\n\n  def plus_with_duration(other) #:nodoc:\n    if ActiveSupport::Duration === other\n      other.since(self)\n    else\n      plus_without_duration(other)\n    end\n  end\n\n  def advance(options)\n    unless options[:weeks].nil?\n      options[:weeks], partial_weeks = options[:weeks].divmod(1)\n      options[:days] = options.fetch(:days, 0) + 7 * partial_weeks\n    end\n\n    unless options[:days].nil?\n      options[:days], partial_days = options[:days].divmod(1)\n      options[:hours] = options.fetch(:hours, 0) + 24 * partial_days\n    end\n\n    d = to_date.gregorian.advance(options)\n    time_advanced_by_date = change(year: d.year, month: d.month, day: d.day)\n    seconds_to_advance = \\\n      options.fetch(:seconds, 0) +\n      options.fetch(:minutes, 0) * 60 +\n      options.fetch(:hours, 0) * 3600\n\n    if seconds_to_advance.zero?\n      time_advanced_by_date\n    else\n      time_advanced_by_date.since(seconds_to_advance)\n    end\n  end\nend\n\nclass ActiveSupport::Duration\n  def since(time = ::Time.current)\n    sum(1, time)\n  end\n\n  def sum(sign, time = ::Time.current)\n    parts.inject(time) do |t, (type, number)|\n      if t.acts_like?(:time) || t.acts_like?(:date)\n        if type == :seconds\n          t.since(sign * number)\n        elsif type == :minutes\n          t.since(sign * number * 60)\n        elsif type == :hours\n          t.since(sign * number * 3600)\n        else\n          t.advance(type =&gt; sign * number)\n        end\n      else\n        raise ::ArgumentError, \"expected a time or date, got #{time.inspect}\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>What's happening in your case is on the <code>t.since(sign * number * 3600)</code> line, <code>number</code> is <code>BigDecimal(2)</code>, and DateTime.since does <code>Rational(seconds, 86400)</code>. So the whole expression when using DateTime is <code>Rational(1 * BigDecimal(2) * 3600, 86400)</code>.</p>\n\n<p>Since a BigDecimal is used as an argument to Rational, the result isn't rational at all:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rational(1 * BigDecimal(2) * 3600, 86400)\n# =&gt; 0.83333333333333333e-1 # Since there's no obvious way to coerce a BigDecimal into a Rational, this returns a BigDecimal\nRational(1 * 2 * 3600, 86400)\n# =&gt; (1/12)                 # A rational, as expected\n</code></pre>\n\n<p>This value makes it back to Time#advance. Here are the results of the calculations it makes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>options[:days], partial_days = options[:days].divmod(1)\n# =&gt; [0.0, 0.83333333333333333e-1] # 0 days, 2 hours\noptions[:hours] = options.fetch(:hours, 0) + 24 * partial_days\n# =&gt; 0.1999999999999999992e1 # juuuust under 2 hours.\n</code></pre>\n\n<p>And finally, 0.1999999999999999992e1 * 3600 = 7199.9999999999999712, which gets floored when it's finally converted back to a time/datetime.</p>\n\n<p>This doesn't happen with Time, since Time doesn't ever need to pass the duration's value into a Rational.</p>\n\n<p>I don't think this should be considered a bug, since if you're passing a BigDecimal then is how you should expect the code to treat your data: As a number with a decimal component, rather than as a ratio. That is, when you use BigDecimals you open yourself up to floating point errors.</p>\n"}], "owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 59145553, "answer_count": 2, "score": 6, "last_activity_date": 1575336405, "creation_date": 1568229116, "last_edit_date": 1568321831, "question_id": 57895487, "link": "https://stackoverflow.com/questions/57895487/adding-bigdecimal-hours-to-datetime-is-wrong-by-1-second", "title": "Adding BigDecimal hours to DateTime is wrong by 1 second", "body": "<p>This happens with the update to ActiveSupport 6</p>\n\n<pre><code>start_time = DateTime.now.beginning_of_day\nstart_time + BigDecimal(2).hours #=&gt;  Wed, 11 Sep 2019 01:59:59 +0000\n</code></pre>\n\n<p>Oddly enough this works fine with Time</p>\n\n<pre><code>start_time = Time.now.beginning_of_day\nstart_time + BigDecimal(2).hours #=&gt;  2019-09-11 02:00:00 +0000\n</code></pre>\n\n<p>Can anybody explain why?</p>\n"}, {"tags": ["ruby", "encoding", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "edited": false, "score": 0, "creation_date": 1568226348, "post_id": 57894834, "comment_id": 102210994, "body": "I can provide a link to the text file tonight"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1568228431, "post_id": 57894834, "comment_id": 102211903, "body": "Your <code>town_name.encode(&quot;utf-8&quot;)</code> call is a little suspicious since you say that the file is already UTF-8. What does <code>ine_file.external_encoding</code> have to say?"}, {"owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1568289623, "post_id": 57894834, "comment_id": 102232400, "body": "@mu_is_to_short <code>ine_file.external_encoding &gt;&gt; Windows-1252</code> I want to encode to UTF-8 which works fine in Scite apparently"}, {"owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1568292205, "post_id": 57894834, "comment_id": 102233861, "body": "@muistooshort comment above"}], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "edited": false, "score": 0, "creation_date": 1568292001, "post_id": 57895325, "comment_id": 102233741, "body": "I guess @Travis, the problem is that Scite&#39;s encoding functions is just more advanced than ruby&#39;s, because Scite can encode neatly into utf-8 while ruby has a problem with upper case acute-accent caracters. -"}], "tags": [], "owner": {"reputation": 3046, "user_id": 227403, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3f149861a296511ce45656426643ce68?s=128&d=identicon&r=PG", "display_name": "Travis", "link": "https://stackoverflow.com/users/227403/travis"}, "is_accepted": false, "score": 1, "last_activity_date": 1568228397, "creation_date": 1568228397, "answer_id": 57895325, "question_id": 57894834, "link": "https://stackoverflow.com/questions/57894834/text-file-encoding-properly-as-utf-8-in-scite-editor-but-fails-to-encode-to-uft/57895325#57895325", "title": "Text file encoding properly as utf-8 in Scite editor but fails to encode to uft-8 in ruby", "body": "<p>It seems like it's misinterpreting the encoding of <code>ine_spain_demographics.csv</code>. </p>\n\n<p>Looking at the doc's for <a href=\"https://ruby-doc.org/core-2.5.3/String.html#method-i-encode\" rel=\"nofollow noreferrer\">encode</a> and <a href=\"https://ruby-doc.org/core-2.6.4/IO.html#method-c-new\" rel=\"nofollow noreferrer\">open</a> you have two options:</p>\n\n<ol>\n<li>Use <code>replace</code> in encode to tell Ruby what character to use <code>town_name.encode(\"utf-8\", replace: '')</code>.</li>\n<li>Identify the correct file encoding and specify it: <code>File.open(\"../../_data/ine_spain_demographics.csv\", 'r:ISO-8859-1')</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "edited": false, "score": 0, "creation_date": 1568375459, "post_id": 57911641, "comment_id": 102263880, "body": "&quot;But the file is actually UTF-8&quot;, why? How do you know the file is UTF-8, are you talking about <code>ine_spain_demographics.csv</code> file?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "edited": false, "score": 0, "creation_date": 1568395412, "post_id": 57911641, "comment_id": 102273401, "body": "<code>ine_spain_demographics.csv</code> is the only file we&#39;re talking about and you say that &quot;the Scite editor with the encoding set to utf-8, displays all text correctly&quot; so presumably the file&#39;s bytes represent UTF-8 encoded text. But <code>external_encoding</code> says that the file is being treated as 1252 encoded text when you open it so everything goes haywire."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1568308520, "creation_date": 1568308520, "answer_id": 57911641, "question_id": 57894834, "link": "https://stackoverflow.com/questions/57894834/text-file-encoding-properly-as-utf-8-in-scite-editor-but-fails-to-encode-to-uft/57911641#57911641", "title": "Text file encoding properly as utf-8 in Scite editor but fails to encode to uft-8 in ruby", "body": "<p>You say that <code>ine_file.external_encoding</code> says <code>Windows-1252</code> so the file is being opened as a Windows-1252 encoded file. Then you say <code>town_name.encode(\"utf-8\")</code> in an attempt to encoded a string as UTF-8 and Ruby complains. But the file is actually UTF-8; reading UTF-8 bytes as Windows-1252 and then trying to recode those bytes as UTF-8 isn't going to work.</p>\n\n<p>You need to open the file in UTF-8 mode:</p>\n\n<pre><code>File.open(\"../../_data/ine_spain_demographics.csv\", 'r:UTF-8')\n</code></pre>\n\n<p>and stop trying to change the encoding of <code>town_name</code>, just use <code>town_name</code> as-is.</p>\n"}], "owner": {"reputation": 729, "user_id": 1546320, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2abb86b58cb9d198e6e2989d69ad6677?s=128&d=identicon&r=PG", "display_name": "fartagaintuxedo", "link": "https://stackoverflow.com/users/1546320/fartagaintuxedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 57911641, "answer_count": 2, "score": 0, "last_activity_date": 1568308520, "creation_date": 1568226252, "last_edit_date": 1568226683, "question_id": 57894834, "link": "https://stackoverflow.com/questions/57894834/text-file-encoding-properly-as-utf-8-in-scite-editor-but-fails-to-encode-to-uft", "title": "Text file encoding properly as utf-8 in Scite editor but fails to encode to uft-8 in ruby", "body": "<p>I have a text file which if viewed in the Scite editor with the encoding set to <code>utf-8</code>, displays all text correctly, including capital letters with an accute accent (i.e. \u00c1).</p>\n\n<p>However, if I write a ruby script and use <code>mystring.encode(\"utf-8\")</code> it will give me this error on capital letters that carry an acute accent (i.e. \u00c1):</p>\n\n<p><code>encode': \"\\x81\" to UTF-8 in conversion from Windows-1252 to UTF-8 (Encoding::UndefinedConversionError)</code></p>\n\n<p>Is this expected behaviour? How can I encode the whole text to <code>utf-8</code> using ruby, knowing that otherwise it does get successfully encoded in the Scite editor?</p>\n\n<p>Code:</p>\n\n<pre><code>ine_file = File.open(\"../../_data/ine_spain_demographics.csv\", 'r')\n\nine_towns_population_hash = Hash.new\n\nine_file.each do|line|\n    values = line.split(\";\")\n    town_name = values[3]\n    population = values[4]\n\n    begin\n        ine_towns_population_hash[town_name.encode(\"utf-8\")] = population\n    rescue\n        puts \"problematic string: \" + town_name\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "naming-conventions", "erb"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1568242860, "post_id": 57894059, "comment_id": 102216392, "body": "One reason I can think of is that changing the file name will disable yml syntax in most editors."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568223967, "post_id": 57894208, "comment_id": 102210044, "body": "It&#39;s one of those things that&#39;s been there since very early versions of Rails, possibly 1.0."}, {"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1568226055, "post_id": 57894208, "comment_id": 102210858, "body": "Thanks! Do you know if this the case for all <code>.yml</code> files in Rails, just some, or more types than just YAML?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1568242968, "post_id": 57894208, "comment_id": 102216414, "body": "Its a limited number of cases limited to configuration like database.yml and secrets and anything loaded with <code>Rails.application.configuration_for</code>."}], "tags": [], "owner": {"reputation": 527, "user_id": 8197386, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3PsfAC8lxvE/AAAAAAAAAAI/AAAAAAAAAJU/9gierdn8mII/photo.jpg?sz=128", "display_name": "sevensidedmarble", "link": "https://stackoverflow.com/users/8197386/sevensidedmarble"}, "is_accepted": true, "score": 4, "last_activity_date": 1568223345, "creation_date": 1568223345, "answer_id": 57894208, "question_id": 57894059, "link": "https://stackoverflow.com/questions/57894059/which-rails-files-are-parsed-through-erb-first/57894208#57894208", "title": "Which Rails files are parsed through ERB first?", "body": "<p>This is indeed a special case. At some point the strategy outlined <a href=\"http://urgetopunt.com/2009/09/12/yaml-config-with-erb.html\" rel=\"nofollow noreferrer\">http://urgetopunt.com/2009/09/12/yaml-config-with-erb.html</a> became the default. I tried to find where in GitHub, but didn't find the exact date of when this happened.</p>\n"}], "owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57894208, "answer_count": 1, "score": 2, "last_activity_date": 1568223345, "creation_date": 1568222638, "question_id": 57894059, "link": "https://stackoverflow.com/questions/57894059/which-rails-files-are-parsed-through-erb-first", "title": "Which Rails files are parsed through ERB first?", "body": "<p>I was looking through a new default Rails application, and in <code>config/database.yml</code> I noticed a snippet of ERB: </p>\n\n<pre><code>...\n\ndefault: &amp;default\n  adapter: sqlite3\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt; # &lt;-- ERB\n  timeout: 5000\n\n...\n</code></pre>\n\n<p>Now, I know what ERB is and how it works. What I'm confused by is the fact that the fact a file contains ERB is usually indicated in the file name. For example, a view file might be called <code>index.html.erb</code>. </p>\n\n<p>It's a sort of trivial point, and it might be that the answer is \"they just didn't feel like it, it's their package\", but why isn't this file called (say) <code>database.yml.erb</code>? The name as it stands suggests it should just contain plain YAML, and it doesn't. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1568221717, "creation_date": 1568221717, "answer_id": 57893871, "question_id": 57893732, "link": "https://stackoverflow.com/questions/57893732/automated-way-to-derive-files-within-rails-public-directory-without-knowing-the/57893871#57893871", "title": "Automated way to derive files within rails public directory without knowing the file names", "body": "<p><em>If</em>, and that's a big \"if\", your server is configured correctly and does not have directory indexing turned on then there's no way you can enumerate a list of files. In order for this to be the case you must know how to configure your server properly. Many servers, especially Apache <code>httpd</code>, turn on directory indexing by default so you must explicitly disable this. You must also periodically test that it's disabled as sometimes a simple software update can revert settings to defaults.</p>\n\n<p>This comes with the caveat that there is no guarantee that a high-impact vulnerability that allows directory traversal and enumeration may not occur in the future. Anything in <code>public</code> can be retrieved directly if the name is known. Any other file can be retrieved if there's a remote-code execution bug (RCE). Though these are very rare, it has happened to Rails before and could happen again.</p>\n\n<p>The attack you want to defend against is dictionary attacks, or brute-force enumeration if there's a pattern to your ID values. Using a random UUID creates way too huge a space to search, but a short name like <code>/profile-images/xBv.png</code> invites people to probe.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 57893871, "answer_count": 1, "score": 1, "last_activity_date": 1568221717, "creation_date": 1568221057, "last_edit_date": 1568221389, "question_id": 57893732, "link": "https://stackoverflow.com/questions/57893732/automated-way-to-derive-files-within-rails-public-directory-without-knowing-the", "title": "Automated way to derive files within rails public directory without knowing the file names", "body": "<p>Let us say that I have a rails app, and I have multiple files stored in the rails app within the <code>public/images</code> directory.</p>\n\n<p><strong>Question:</strong> Is there a way an end user could get access to images stored within the <code>public</code> directory without the user happening to brute-force guess what the image file names are?  </p>\n\n<ul>\n<li>For example: is there some trick where a user could list all the files within the <code>public</code> directory of a rails app?  </li>\n</ul>\n\n<p>I am aware that you <strong>NEVER</strong> store sensitive files inside the <code>public</code> directory because it has no access control.  I'm just curious if it is possible to access the <code>public</code> directory contents in some clever way without already knowing the directory/file structure.  I'm wondering if there is a clever way to <em>derive</em> the directory/file structure within the public directory. </p>\n"}, {"tags": ["ruby", "rake"], "answers": [{"comments": [{"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568217474, "post_id": 57892675, "comment_id": 102207130, "body": "I get NoMethodError: undefined method `do_the_thing&#39; for Foo::Bar::TheMainClass:Class ?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568217801, "post_id": 57892675, "comment_id": 102207308, "body": "could you share the backtrace? It looks that you called it on a class not on the instance"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568218087, "post_id": 57892675, "comment_id": 102207461, "body": "NoMethodError: undefined method <code>do_the_thing&#39; for Foo::Bar::TheMainClass:Class &#47;app&#47;lib&#47;tasks&#47;gottaRunThis.rake:12:in </code>block (4 levels) in &lt;top (required)&gt;&#39; /bundle/gems/rake-12.0.0/exe/rake:27:in <code>&lt;top (required)&gt;&#39; &#47;opt&#47;rh&#47;rh-ruby22&#47;root&#47;usr&#47;local&#47;share&#47;gems&#47;gems&#47;bundler-1.1&zwnj;&#8203;6.3&#47;lib&#47;bundler&#47;cli&#47;&zwnj;&#8203;exec.rb:74:in </code>load&#39; /opt/rh/rh-ruby22/root/usr/local/share/gems/gems/bundler-1.1&zwnj;&#8203;6.3/lib/bundler/cli/&zwnj;&#8203;exec.rb:74:in <code>kernel_load&#39; &#47;opt&#47;rh&#47;rh-ruby22&#47;root&#47;usr&#47;local&#47;share&#47;gems&#47;gems&#47;bundler-1.1&zwnj;&#8203;6.3&#47;lib&#47;bundler&#47;cli&#47;&zwnj;&#8203;exec.rb:28:in </code>run&#39;"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568218151, "post_id": 57892675, "comment_id": 102207501, "body": "And what is the line 12 in the rake task file?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568218448, "post_id": 57892675, "comment_id": 102207643, "body": "this_instance.do_the_thing(args.var)   &lt;--- this line"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568218513, "post_id": 57892675, "comment_id": 102207682, "body": "which is preceeded by this line: this_instance = Foo::Bar::TheMainClass.new"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568218627, "post_id": 57892675, "comment_id": 102207749, "body": "It&#39;s strange, could share the the whole new version of the code on a gist? I can&#39;t understand why the method is called on a class"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568220409, "post_id": 57892675, "comment_id": 102208545, "body": "I appreciate the offer, but that&#39;s pretty much all the applicable code already. I&#39;ll have to triple-check through, maybe I&#39;ve got a typo somewhere."}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568220550, "post_id": 57892675, "comment_id": 102208603, "body": "Ahh, yep. In bell.rb, I missed a bit when I typed, it wasn&#39;t def do_the_thing(var), it was self.def do_the_thing. Removing the self fixed it. So it was an unrelated error. Thanks!"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1568217759, "last_edit_date": 1568217759, "creation_date": 1568216750, "answer_id": 57892675, "question_id": 57892582, "link": "https://stackoverflow.com/questions/57892582/how-to-call-an-classs-included-module-function-from-a-rake/57892675#57892675", "title": "How to call an class&#39;s included module function from a rake?", "body": "<p>Included methods are available as instance methods, so you can call <code>do_the_thing</code> like this:</p>\n\n<pre><code>main_class = Foo::Bar::TheMainClass.new\nmain_class.do_the_thing(args.var)\n</code></pre>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 57892675, "answer_count": 1, "score": 1, "last_activity_date": 1568217759, "creation_date": 1568216443, "last_edit_date": 1568217596, "question_id": 57892582, "link": "https://stackoverflow.com/questions/57892582/how-to-call-an-classs-included-module-function-from-a-rake", "title": "How to call an class&#39;s included module function from a rake?", "body": "<p>I am in a task in a rake file.</p>\n\n<pre><code># gottaRunThis.rake\ntask [:var] =&gt; :environment do |t, args|\n\n    Foo::Bar::Bell::this_function(args.var)\n    #runs Bell::this_function(var) but fails to complete.\n    # errors out with the words:\n    # NoMethodError: undefined method `put' for nil:NilClass\n    # Because Bell needs a @connection variable that doesn't exist in\n    # it's context when called directly.\nend\n</code></pre>\n\n<p>The thing is, the target module and def are meant to be included in another class.</p>\n\n<pre><code># mainclass.rb\nmodule Foo\n  module Bar\n    class TheMainClass\n      include Foo::Bar::Bell\n      def initialize\n        @site = A_STATIC_SITE_VARIABLE\n        @connection = self.connection\n      end\n      def connection\n        # Connection info here, too verbose to type up\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And <code>Bell</code> looks like.</p>\n\n<pre><code># bell.rb\nmodule Foo\n  module Bar\n    module Bell\n    def do_the_thing(var)\n      #things happen here\n      #var converted to something here\n      response = @connection.put \"/some/restful/interface, var_converted\n    end\n  end\nend\n</code></pre>\n\n<p>Should I modify <code>Bell</code> so it somehow is including <code>TheMainClass</code>? (And if so, I don't know how?) Or is there some syntax I should use in my rake file like </p>\n\n<pre><code>Foo::Bar::TheMainClass::Bell::do_the_thing(args.var)\n#I don't think this works... should it? What would the equivilent but working version look like?\n</code></pre>\n"}, {"tags": ["ruby", "methods", "operator-precedence"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1568214157, "post_id": 57891862, "comment_id": 102205324, "body": "&quot;rather than the method call itself&quot; - not sure how you imagine assignment of method <i>call</i> (which is not the <i>result</i> of that call)."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1568214308, "post_id": 57891862, "comment_id": 102205396, "body": "Can you imagine what life would be like if the RHS wasn&#39;t a &quot;higher precedence&quot; than assignment?! It would make assignments useless. &quot;Rather than the method call itself&quot; -- I&#39;m not quite sure I follow what you mean here. You can assign a method <i>reference</i>, but &quot;the call itself&quot; <i>is</i> the result of that call."}, {"owner": {"reputation": 35, "user_id": 11799289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0c3190059f0fe289d1fb19dd9b6988?s=128&d=identicon&r=PG&f=1", "display_name": "Ivo Evans Storrie", "link": "https://stackoverflow.com/users/11799289/ivo-evans-storrie"}, "edited": false, "score": 0, "creation_date": 1568215162, "post_id": 57891862, "comment_id": 102205863, "body": "@3limin4t0r I&#39;m just starting to learn programming so maybe I&#39;m contravening some basic rule about what variables are, but it seems possible that every time you called var it could both print 5 and return nil, instead of only returning nil"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1568215299, "post_id": 57891862, "comment_id": 102205947, "body": "That&#39;s not how it works in (approximately) every language. When you assign a value you need to know the value to assign. The value is the RHS of the assignment statement. The RHS will be fully evaluated. For <code>puts(5)</code> the evaluation results in the side-effect of a <code>5</code> being printed, and the return value is <code>nil</code>. The assignment is of the result of the RHS, which is <code>nil</code>. That there&#39;s a side-effect is irrelevant."}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1568216372, "post_id": 57891862, "comment_id": 102206585, "body": "Usually <i>order of evaluation</i> problems can be clarified by inspecting the generated AST, I don&#39;t know how to do this in ruby :("}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1568216463, "post_id": 57891862, "comment_id": 102206631, "body": "@geckos: <a href=\"https://github.com/whitequark/parser\" rel=\"nofollow noreferrer\">github.com/whitequark/parser</a> or RubyVM::AST."}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 1, "creation_date": 1568216847, "post_id": 57891862, "comment_id": 102206829, "body": "I just found an way usign RubyVM::AbstractSyntaxTree, I think that ::AST is &lt; 2.6 and ::AbstractSyntaxTree is &gt;= 2.6"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568222967, "post_id": 57891862, "comment_id": 102209634, "body": "<a href=\"https://medium.com/rubycademy/4-interesting-examples-of-high-precedences-operations-in-ruby-bd9e49dba52b\" rel=\"nofollow noreferrer\">This article</a> may be of interest. Surely the precedence of method calls is covered in Ruby&#39;s documentation, but I&#39;ve searched for it unsuccessfully more than once."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1568214094, "creation_date": 1568214094, "answer_id": 57891946, "question_id": 57891862, "link": "https://stackoverflow.com/questions/57891862/how-do-method-calls-interact-with-operator-precedence/57891946#57891946", "title": "How do method-calls interact with operator precedence?", "body": "<p>You're overthinking this. Your expression is basically this: <code>x = something</code>. So, right-hand side <em>must</em> be evaluated first, then the assignment can be done. </p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1568218391, "last_edit_date": 1568218391, "creation_date": 1568215880, "answer_id": 57892443, "question_id": 57891862, "link": "https://stackoverflow.com/questions/57891862/how-do-method-calls-interact-with-operator-precedence/57892443#57892443", "title": "How do method-calls interact with operator precedence?", "body": "<p>I'm guessing you come from a JavaScript or similar background. Where the following is possible:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function puts(...args) { args.forEach(arg =&gt; console.log(arg)); }\r\nvar x;\r\n\r\n(x = puts)(5);\r\nputs(x);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>However in JavaScript calling <code>puts</code> without <code>()</code> will return the whole function. Which allows easy function assignment. However in Ruby calling <code>puts</code> without <code>()</code> will still call the method. Making parentheses optional. See the <a href=\"https://ruby-doc.org/core-2.6.4/doc/syntax/calling_methods_rdoc.html#label-Calling+Methods\" rel=\"nofollow noreferrer\">Calling Methods</a> documentation.</p>\n\n<p>In Ruby <code>(x = puts)(5)</code> would result in a syntax error. You can achieve the same by doing the following:</p>\n\n<pre><code>(x = method(:puts)).call(5)\n# here parentheses are still required since\nx = method(:puts).call(5)\n# will still assign the result of the puts call to x\n</code></pre>\n\n<p>The first link you provided talking about operators having a higher precedence than method calls is talking about method arguments.</p>\n\n<pre><code>puts 5 + 5\n# can be seen as\n(puts 5) + 5\n# or\nputs (5 + 5)\n</code></pre>\n\n<p>In this case <code>10</code> is printed since the operators have higher precedence than the method call itself. This also works for the <code>=</code> operator, but when used as argument.</p>\n\n<pre><code>puts x = 5\n</code></pre>\n\n<p>Will print <code>5</code>, return <code>nil</code> and have <code>5</code> assigned to <code>x</code>. When using <code>x = puts 5</code>, <code>x</code> can't be assigned without evaluating <code>puts 5</code> so that is what happens first. Precedence only comes into play if the same code could be executed in multiple ways.</p>\n\n<p>Calling methods with parentheses never yields the above issue.</p>\n\n<pre><code>puts(5 + 5)\n# or\nputs(5) + 5\n</code></pre>\n\n<p>Both speak for themself. Although the latter will raise a NoMethodError.</p>\n"}, {"comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1568218173, "post_id": 57892681, "comment_id": 102207519, "body": "Python habits, fixed :)"}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1568218372, "post_id": 57892681, "comment_id": 102207595, "body": "Yeah, we got blazing fast JIT and we can create CRUD by taking a drink with Rails, literally. Also Java fell out of favor :D"}], "tags": [], "owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "is_accepted": false, "score": 1, "last_activity_date": 1568218181, "last_edit_date": 1568218181, "creation_date": 1568216785, "answer_id": 57892681, "question_id": 57891862, "link": "https://stackoverflow.com/questions/57891862/how-do-method-calls-interact-with-operator-precedence/57892681#57892681", "title": "How do method-calls interact with operator precedence?", "body": "<p>Here is how to print AST</p>\n\n<pre><code>2.6.3 :008 &gt; RubyVM::AbstractSyntaxTree.parse('x = puts(5)')\n =&gt; #&lt;RubyVM::AbstractSyntaxTree::Node:SCOPE@1:0-1:11&gt; \n2.6.3 :009 &gt; pp _\n(SCOPE@1:0-1:11\n tbl: [:x]\n args: nil\n body:\n   (LASGN@1:0-1:11 :x\n      (FCALL@1:4-1:11 :puts (ARRAY@1:9-1:10 (LIT@1:9-1:10 5) nil))))\n =&gt; #&lt;RubyVM::AbstractSyntaxTree::Node:SCOPE@1:0-1:11&gt; \n</code></pre>\n\n<p>I'm using ruby 2.6. This way is possible to solve any parsing doubt. For this case is little obvious as other answers said if you have <code>x = expr</code>, then <code>expr</code> need to be evaluated first since we're talking about a strict language, for lazy languages you will only need to evaluate <code>expr</code> when <code>x</code> is evaluated, but this is another topic </p>\n"}], "owner": {"reputation": 35, "user_id": 11799289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0c3190059f0fe289d1fb19dd9b6988?s=128&d=identicon&r=PG&f=1", "display_name": "Ivo Evans Storrie", "link": "https://stackoverflow.com/users/11799289/ivo-evans-storrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568218391, "creation_date": 1568213827, "last_edit_date": 1568216689, "question_id": 57891862, "link": "https://stackoverflow.com/questions/57891862/how-do-method-calls-interact-with-operator-precedence", "title": "How do method-calls interact with operator precedence?", "body": "<p>I am curious about how method calls relate to operator precedence. In irb, I see this:</p>\n\n<pre><code>var = puts(5)\n5\n=&gt; nil\nvar\n=&gt; nil\n</code></pre>\n\n<p>This implies that the call to puts has higher precedence than the assignment operator, since nil (the return value of puts(5)) is assigned to var, rather than the method call itself. Because nil is assigned to var (as we can see on line 4), I would guess that puts(5) was called before the assignment operator. </p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/7722369/whats-the-precedence-of-rubys-method-call\">this</a> Stackoverflow thread, everybody agrees that method-calls have lower precedence than every operator.</p>\n\n<p>However <a href=\"https://riptutorial.com/ruby/example/13024/operator-precedence-and-methods\" rel=\"nofollow noreferrer\">this</a> website lists the . as an operator for method-calls, and says that it is the highest-precedence operator. </p>\n\n<p>If this second website is indeed accurate, I'm unsure about whether there is an implicit . operator when you call a method on main (and therefore about whether . being a high-precedence operator is sufficient to explain the irb session above). </p>\n\n<p>In general, I'm curious about the order in which Ruby does things when it encounters a line of code, so if you know of any resources that explain that in an accessible way I would be interested in reading them.</p>\n\n<p>EDIT: thanks for answers so far. Maybe I wasn't clear enough about my basic questions, which are theoretical not practical (so are arguably 'overthinking', depending on how much you like to think):</p>\n\n<ul>\n<li>is . technically an operator, or technically not an operator?</li>\n<li>is there a . somewhere behind the scenes every time you call a method?</li>\n<li>are operators the basic way that Ruby decides in what order it will evaluate a line of code, or are there factors other than operators and their precedence/associativity/arity?</li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568209699, "post_id": 57890466, "comment_id": 102202771, "body": "where did you put your <code>flash</code> message logic? Cause I think it should be in <code>app&#47;views&#47;layouts&#47;application.html.erb</code> to make sure each view can use it if necessary."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568210257, "post_id": 57890466, "comment_id": 102203087, "body": "Correct is is in layouts/application.html.erb but I put it in a partial."}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568210572, "post_id": 57890466, "comment_id": 102203263, "body": "so please show your signup and sign in views that would be helpful. Also show you controllers, that would help to solve the issue"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568211909, "post_id": 57890466, "comment_id": 102204001, "body": "yes of couse, done."}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568212182, "post_id": 57890466, "comment_id": 102204177, "body": "and also please your <code>session</code> and <code>registration</code> controllers"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568214055, "post_id": 57890466, "comment_id": 102205275, "body": "I never created them, they have been provided and hidden by devise."}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1568216545, "post_id": 57890466, "comment_id": 102206686, "body": "please check what happen if you remove <code>&lt;% if value.class == Array %&gt;</code> that can be the issue"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568212346, "creation_date": 1568209055, "last_edit_date": 1568212346, "question_id": 57890466, "link": "https://stackoverflow.com/questions/57890466/errors-not-showing-up-correctly-on-devise-sign-up", "title": "Errors not showing up correctly on Devise Sign Up", "body": "<p>Sign Up:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-4\"&gt; \n    &lt;div class=\"devise-bootstrap-form\"&gt;\n      &lt;\n      &lt;div class=\"devise-bootstrap-form-row\"&gt;\n        &lt;div class=\"devise-bootstrap-form-signup\"&gt;\n          &lt;h2 class=\"text-center\"&gt;Sign up&lt;/h2&gt;\n          &lt;%= bootstrap_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n            &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n            &lt;%= f.password_field :password,\n                  autocomplete: \"new-password\",\n                  help: \"(#{@minimum_password_length} characters minimum)\" %&gt;\n            &lt;%= f.password_field :password_confirmation,\n                  autocomplete: \"new-password\",\n                  label_class: \"required\" %&gt;\n\n            &lt;%= f.form_group do %&gt;\n              &lt;%= f.submit \"Sign up\", class: \"btn btn-primary btn-block btn-lg\" %&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n          &lt;div class=\"text-center\"&gt;\n            &lt;%= render \"devise/shared/links\" %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Log In: </p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;div class=\"row\"&gt;    \n    &lt;div class=\"col-md-6 col-md-offset-4\"&gt;\n        &lt;div class=\"devise-bootstrap-form\"&gt;\n            &lt;div class=\"devise-bootstrap-form-row\"&gt;\n                &lt;div class=\"devise-bootstrap-form-col\"&gt;\n                    &lt;h2 class=\"text-center\"&gt;Log in&lt;/h2&gt;        \n                        &lt;%= bootstrap_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n                            &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n                            &lt;%= f.password_field :password, autocomplete: \"current-password\", placeholder: 'Password' %&gt;\n\n                            &lt;% if devise_mapping.rememberable? -%&gt;\n                                &lt;%= f.form_group do %&gt;\n                                    &lt;%= f.check_box :remember_me %&gt;\n                                &lt;% end %&gt;\n                            &lt;% end -%&gt;\n\n                            &lt;%= f.form_group do %&gt;\n                                &lt;%= f.submit \"Log in\", class: \"btn btn-primary btn-block btn-lg\" %&gt;\n                            &lt;% end %&gt;\n                        &lt;% end %&gt;\n                    &lt;div class=\"text-center\"&gt;\n                      &lt;%= render \"devise/shared/links\" %&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I added a partial to my layout which devise is currently using for logging in. Flash Partial (rendered in the application layout)</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;% flash.each do |key, value| %&gt;\n    &lt;% if value.class == Array %&gt;\n        &lt;div class=\"&lt;%= flash_class(key) %&gt; text-center\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;\u00d7&lt;/button&gt;\n            &lt;% value.each do |message| %&gt;  \n                &lt;%= message %&gt;\n                &lt;/br&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;% else %&gt;\n        &lt;div class=\"&lt;%= flash_class(key) %&gt;  text-center\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;\u00d7&lt;/button&gt;\n            &lt;%= value %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>However, on the sign up it isn't using this layout and is defaulting to it's own. It never runs this partial whatsoever. What is overriding this? I want the red errors for every page as you can see by the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y809L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y809L.png\" alt=\"log-in devise\"></a></p>\n\n<p>However, this image below is obviously incorrect.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NKLD8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NKLD8.png\" alt=\"Sign Upe\"></a></p>\n\n<p>I'm trying to work out why logging in is triggering this partial and the others are not.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1568208374, "post_id": 57890238, "comment_id": 102201998, "body": "Seems like it&#39;d be a lot easier to just split into two collections, shuffle them, and re-join. That wouldn&#39;t prevent getting back one of the original names, but that&#39;s what random means. If you need to explicitly prevent getting back an original then you&#39;d need to have a set of &quot;disallowed&quot; combos and check against it, which would make a pick-and-remove operation easier."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1568208981, "post_id": 57890238, "comment_id": 102202353, "body": "Thanks so much Dave. You&#39;re comment really just helped me shift my thinking. Thank you very much, you saved me a long time in a rabbit hole."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568216264, "post_id": 57890238, "comment_id": 102206513, "body": "Please show your array as a valid Ruby object, in part so that readers can cut-and-paste to execute their code. For example, <code>names = [[\u2018Brutananadilewski\u2019, \u2018Carl\u2019],  [\u2018Crews\u2019, \u2018Xander\u2019],..]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568217175, "post_id": 57890238, "comment_id": 102206981, "body": "This is an easy problem or a hard-ish problem, depending on whether there can be duplicate first or last names. For example, could your array of names also contain <code>[\u2018Palmer\u2019, \u2018Carl\u2019]</code> or <code>[\u2018Hartman\u2019, \u2018Lois\u2019]</code>? Please edit to clarify."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568217865, "post_id": 57890238, "comment_id": 102207345, "body": "You\u2019ve said nothing about randomness or other criteria for determining if a rearrangement is valid. For example, if <code>names</code> is your array of arrays of last and first names, is <code>names</code> itself a valid answer? If not, why not? Could a rearrangement contain an element of <code>names</code> (e.g., <code>[\u2018Crews\u2019, \u2018Xander\u2019]</code>)? Lastly, your dark glasses need repair or replacement."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1568210380, "post_id": 57890468, "comment_id": 102203157, "body": "<code>surnames, forenames = names.transpose</code> See: <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>Array#transpose</code></a>"}], "tags": [], "owner": {"reputation": 1526, "user_id": 2741954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f910e8a6cae81f057b6ce881ca4337?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Brahan", "link": "https://stackoverflow.com/users/2741954/simon-brahan"}, "is_accepted": true, "score": 2, "last_activity_date": 1568212238, "last_edit_date": 1568212238, "creation_date": 1568209059, "answer_id": 57890468, "question_id": 57890238, "link": "https://stackoverflow.com/questions/57890238/how-to-efficiently-generate-a-unique-combination-of-first-and-last-name-given-an/57890468#57890468", "title": "How to efficiently generate a unique combination of first and last name given an array of full names", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>transpose</code></a> as <a href=\"https://stackoverflow.com/questions/57890238/how-to-efficiently-generate-a-unique-combination-of-first-and-last-name-given-an/57890468?noredirect=1#comment102203157_57890468\">mentioned by 3limin4tor</a>, then <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-shuffle\" rel=\"nofollow noreferrer\"><code>shuffle</code></a> and <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-zip\" rel=\"nofollow noreferrer\"><code>zip</code></a> as <a href=\"https://stackoverflow.com/questions/57890238/how-to-efficiently-generate-a-unique-combination-of-first-and-last-name-given-an#comment102201998_57890238\">mentioned by Dave Newton</a>:</p>\n\n<pre><code>surnames, forenames = names.transpose\n\nshuffled_forenames = forenames.shuffle\nshuffled_names = shuffled_forenames.zip(surnames)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1568226613, "creation_date": 1568226613, "answer_id": 57894926, "question_id": 57890238, "link": "https://stackoverflow.com/questions/57890238/how-to-efficiently-generate-a-unique-combination-of-first-and-last-name-given-an/57894926#57894926", "title": "How to efficiently generate a unique combination of first and last name given an array of full names", "body": "<p>The desired outcome isn't entirely clear from the question, but if you're trying to create all combinations of first/last names and get a subset of those, you could also use <code>product</code> and <code>uniq</code> to get all the uniq combinations:</p>\n\n<pre><code>names = [\n  %w(Brutananadilewski Carl),\n  %w(Crews Xander),\n  %w(Cartman Eric),\n  %w(Rubio Daniel),\n  %w(Daniels Julie)\n]\n\nsurnames, forenames = names.transpose\n\nall_name_combos = forenames.product(surnames).uniq\n</code></pre>\n\n<p>You could then use <code>shuffle</code> and <code>sample(INTEGER)</code> to get a subset of those name combinations</p>\n\n<pre><code>all_name_combos.shuffle.sample(5)\n</code></pre>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57890468, "answer_count": 2, "score": 1, "last_activity_date": 1568226613, "creation_date": 1568208220, "last_edit_date": 1568208476, "question_id": 57890238, "link": "https://stackoverflow.com/questions/57890238/how-to-efficiently-generate-a-unique-combination-of-first-and-last-name-given-an", "title": "How to efficiently generate a unique combination of first and last name given an array of full names", "body": "<p>I'm having a bit of difficulty with a problem I'm having. I have an array of names like so:</p>\n\n<pre><code>[Brutananadilewski, Carl]\n[Crews, Xander]\n[Cartman, Eric]\n[Rubio, Daniel]\n[Daniels, Julie]\netc. etc.\n</code></pre>\n\n<p>What I need to do is to create a list of unique names from this list without having first and last names repeated. So I would have the following as a result:</p>\n\n<pre><code>[Brutananadilewski, Daniel]\n[Crews, Erix]\n[Cartman, Xander]\n[Rubio, Carl]\n[Jill, Daniels]\n</code></pre>\n\n<p>The problem I'm having is trying to do this efficiently. My first instint was to use permutation and here is a snippet from the ruby docs</p>\n\n<pre><code>a.permutation(2).to_a #=&gt; [[1,2],[1,3],[2,1],[2,3],[3,1],[3,2]]\n</code></pre>\n\n<p>The problem is having the following from that example <code>[[1,2],[1,3]]</code></p>\n\n<p>Theoretically if this was a first/last name this wouldnt work. I couldn't have this:</p>\n\n<p><code>[Rubio Daniel, Rubio Julie, Rubio Eric]</code></p>\n\n<p>Has anyone dealt with this before? I'm having an awfully hard time with efficiency and just getting it to work. Help would be appreciated thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568201346, "post_id": 57888098, "comment_id": 102198002, "body": "Anything in your JS console in browser?"}, {"owner": {"reputation": 289, "user_id": 7797853, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454766864567927/picture?type=large", "display_name": "Radu Olteanu", "link": "https://stackoverflow.com/users/7797853/radu-olteanu"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568201549, "post_id": 57888098, "comment_id": 102198117, "body": "nothing, I think I am missing something, or just I dont understand how things are working using rails, I am a beginner."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10830926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a992058135d0f93d67fff3483012bc40?s=128&d=identicon&r=PG&f=1", "display_name": "Snkt", "link": "https://stackoverflow.com/users/10830926/snkt"}, "is_accepted": false, "score": -2, "last_activity_date": 1568205210, "last_edit_date": 1568205210, "creation_date": 1568204735, "answer_id": 57889130, "question_id": 57888098, "link": "https://stackoverflow.com/questions/57888098/how-can-i-include-javascript-file-in-the-rails-assets-pipeline/57889130#57889130", "title": "How can I include javascript file in the rails assets pipeline?", "body": "<p>If you are not install \"jquery-rails\" then first install the gem and require file also add in application.js</p>\n\n<p>//= require file_name</p>\n"}, {"comments": [{"owner": {"reputation": 289, "user_id": 7797853, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454766864567927/picture?type=large", "display_name": "Radu Olteanu", "link": "https://stackoverflow.com/users/7797853/radu-olteanu"}, "edited": false, "score": 0, "creation_date": 1568206150, "post_id": 57889284, "comment_id": 102200676, "body": "Thanks a lot, your answer helped me to find the solution in my case: I had to add : &lt;%= javascript_include_tag &#39;application&#39; %&gt; in my .erb file, because in the application.js i was requiring the whole tree."}, {"owner": {"reputation": 96, "user_id": 3815144, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000906350931/picture?type=large", "display_name": "Elayan Hamamrah", "link": "https://stackoverflow.com/users/3815144/elayan-hamamrah"}, "reply_to_user": {"reputation": 289, "user_id": 7797853, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454766864567927/picture?type=large", "display_name": "Radu Olteanu", "link": "https://stackoverflow.com/users/7797853/radu-olteanu"}, "edited": false, "score": 0, "creation_date": 1568294693, "post_id": 57889284, "comment_id": 102235303, "body": "Great to know that, I wrote the javascript_include_tag based on HAML not html.erb sorry for that but I&#39;m happy that your issue was solved."}], "tags": [], "owner": {"reputation": 96, "user_id": 3815144, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000906350931/picture?type=large", "display_name": "Elayan Hamamrah", "link": "https://stackoverflow.com/users/3815144/elayan-hamamrah"}, "is_accepted": true, "score": 2, "last_activity_date": 1568205177, "creation_date": 1568205177, "answer_id": 57889284, "question_id": 57888098, "link": "https://stackoverflow.com/questions/57888098/how-can-i-include-javascript-file-in-the-rails-assets-pipeline/57889284#57889284", "title": "How can I include javascript file in the rails assets pipeline?", "body": "<p>find: <code>config/initializers/assets.rb</code>\nThen: <code>Rails.application.config.assets.precompile += %w[your_file.js]</code></p>\n\n<p>noticing that as it's out of application.js you need to include it inside your views using:</p>\n\n<pre><code>javascript_include_tag :your_file\n</code></pre>\n\n<p>Save &amp; Restart your server :)</p>\n"}], "owner": {"reputation": 289, "user_id": 7797853, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454766864567927/picture?type=large", "display_name": "Radu Olteanu", "link": "https://stackoverflow.com/users/7797853/radu-olteanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 57889284, "answer_count": 2, "score": 0, "last_activity_date": 1568205210, "creation_date": 1568201155, "last_edit_date": 1568201686, "question_id": 57888098, "link": "https://stackoverflow.com/questions/57888098/how-can-i-include-javascript-file-in-the-rails-assets-pipeline", "title": "How can I include javascript file in the rails assets pipeline?", "body": "<p>I have created a new ruby on rails project using the command : rails new [project_name].</p>\n\n<p>Further, I want to create javascript files, so I can control my view elements.\nFor this, I've created a new js file and placed it in the app->assets->javascripts->apple_pay.js</p>\n\n<p>Currently the appe_pay.js implementation is just for testing : </p>\n\n<pre><code>console.log(\"test\")\n</code></pre>\n\n<p>Also, my application.js, used like a manifest file, looks like this :</p>\n\n<pre><code>//= require_tree .\n</code></pre>\n\n<p>When I run the project using rails server command, I'm expecting to see the message displayed on the console, but it's not, any ideea ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "activerecord", "searchkick"], "answers": [{"comments": [{"owner": {"reputation": 2875, "user_id": 1177228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f2287b6054926438eb65f8726cc77d?s=128&d=identicon&r=PG", "display_name": "Andrew Kane", "link": "https://stackoverflow.com/users/1177228/andrew-kane"}, "edited": false, "score": 0, "creation_date": 1568403209, "post_id": 57888184, "comment_id": 102276325, "body": "I agree this is the easiest way to accomplish this right now with Searchkick. A slightly better form would be <code>gsub(&#47;\\bthe|other|words\\b&#47;i, &quot;&quot;)</code> so it&#39;s case insensitive, supports multiple words, and works anywhere the words appear in the query (not just at the start)."}, {"owner": {"reputation": 25, "user_id": 12052528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f801fdf8c331b08b9a0f2a1ef6dfde?s=128&d=identicon&r=PG&f=1", "display_name": "Pseudo-Hippy", "link": "https://stackoverflow.com/users/12052528/pseudo-hippy"}, "edited": false, "score": 0, "creation_date": 1568899260, "post_id": 57888184, "comment_id": 102428187, "body": "Thanks for the answer, Shah. That&#39;s a smart, clean solution. And thanks Andrew for the idea to add regex to make it case insensitive."}], "tags": [], "owner": {"reputation": 59, "user_id": 3511175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6Bwl.png?s=128&g=1", "display_name": "Shah", "link": "https://stackoverflow.com/users/3511175/shah"}, "is_accepted": true, "score": 1, "last_activity_date": 1568201433, "creation_date": 1568201433, "answer_id": 57888184, "question_id": 57887701, "link": "https://stackoverflow.com/questions/57887701/is-there-a-way-to-exclude-words-from-a-query-in-searchkick/57888184#57888184", "title": "Is there a way to exclude words from a query in Searchkick?", "body": "<p>Did you tried it:</p>\n\n<pre><code>\"The Beatles\".gsub('The ', '')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "is_accepted": false, "score": 0, "last_activity_date": 1568207972, "creation_date": 1568207972, "answer_id": 57890159, "question_id": 57887701, "link": "https://stackoverflow.com/questions/57887701/is-there-a-way-to-exclude-words-from-a-query-in-searchkick/57890159#57890159", "title": "Is there a way to exclude words from a query in Searchkick?", "body": "<p>Elasticsearch have great solution fro solving such questions - analyzers. </p>\n\n<p>In your case you need to implement Stop analyser in your mapping. Details and docs can be found here: <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.4/analysis-stop-analyzer.html\" rel=\"nofollow noreferrer\">Stop Analyzer</a></p>\n"}], "owner": {"reputation": 25, "user_id": 12052528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f801fdf8c331b08b9a0f2a1ef6dfde?s=128&d=identicon&r=PG&f=1", "display_name": "Pseudo-Hippy", "link": "https://stackoverflow.com/users/12052528/pseudo-hippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57888184, "answer_count": 2, "score": 0, "last_activity_date": 1568207972, "creation_date": 1568199760, "question_id": 57887701, "link": "https://stackoverflow.com/questions/57887701/is-there-a-way-to-exclude-words-from-a-query-in-searchkick", "title": "Is there a way to exclude words from a query in Searchkick?", "body": "<p>I would like to exlude some terms a user may enter into the search bar as they bloat the results.</p>\n\n<p>For separate reasons I need the <code>operator: :or</code>, but if I have a search term like \"The Beatles\" it searches the whole database for \"The\" and \"Beatles\" which is way too many results. I would like to exclude \"the\" from any query received, so it would be as if the user had only searched \"Beatles\". </p>\n\n<p>Maybe this isn't possilbe. Thanks for the help \ud83d\ude4f</p>\n\n<p>I tried to add <code>exclude: [\"the\"]</code>, but this removed any ressults which had the term \"the\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "jemalloc"], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1568263222, "post_id": 57898788, "comment_id": 102220306, "body": "The heroku buildpack you reference is deprecated but there is a link to another one. I am not entirely sure why the buildpack suddenly started working for me because I did several things at the same time in the end but I was surprised to hear that my reference was not a gem. Thanks. I believe your answer will lead others in the right path as well so I mark it as the answer. For others chasing memory: Another thing that helped my memory immensely was to put MALLOC_ARENA_MAX=2 in my heroku config."}, {"owner": {"reputation": 371, "user_id": 7837101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vAayM.jpg?s=128&g=1", "display_name": "Joel Cahalan", "link": "https://stackoverflow.com/users/7837101/joel-cahalan"}, "reply_to_user": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1568332689, "post_id": 57898788, "comment_id": 102250062, "body": "Glad this was helpful.  I updated the link to point to the newer heroku buildpack."}], "tags": [], "owner": {"reputation": 371, "user_id": 7837101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vAayM.jpg?s=128&g=1", "display_name": "Joel Cahalan", "link": "https://stackoverflow.com/users/7837101/joel-cahalan"}, "is_accepted": true, "score": 2, "last_activity_date": 1568332642, "last_edit_date": 1568332642, "creation_date": 1568253304, "answer_id": 57898788, "question_id": 57887688, "link": "https://stackoverflow.com/questions/57887688/cannot-install-new-versions-of-jemalloc-gem-to-work-on-heroku/57898788#57898788", "title": "Cannot install new versions of jemalloc gem (to work on heroku)", "body": "<p>The link you reference is not a repo for a gem, so it makes sense that you are getting the message: \"Could not find gem 'jemalloc'\". </p>\n\n<p>I don't think you need a gem. Try using this <a href=\"https://github.com/gaffneyc/heroku-buildpack-jemalloc/\" rel=\"nofollow noreferrer\">heroku buildpack</a>. Make sure to set the heroku env variables: <code>JEMALLOC_ENABLED = true and JEMALLOC_VERSION = 5.2.0</code></p>\n"}], "owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 57898788, "answer_count": 1, "score": 0, "last_activity_date": 1568332642, "creation_date": 1568199714, "question_id": 57887688, "link": "https://stackoverflow.com/questions/57887688/cannot-install-new-versions-of-jemalloc-gem-to-work-on-heroku", "title": "Cannot install new versions of jemalloc gem (to work on heroku)", "body": "<p>I have been having serious memory issues on my Ruby on Rails application (<code>ruby 2.3.3, rails 4.2.10</code>) for a while now and I want to try the gem <code>jemalloc</code> as well as the buildpack <code>heroku-buildpack-jemalloc</code> as it seems to have helped others a whole lot. </p>\n\n<p>If I just add:</p>\n\n<pre><code>gem 'jemalloc' \n</code></pre>\n\n<p>in my Gemfile and run <code>bundle install</code> it works but I get the version <code>1.0.1</code> which is the latest version on rubygems.org. After (successfully) installing the buildpack on Heroku I try to upload my app but it fails with </p>\n\n<pre><code>remote:  !\nremote:  !     Could not detect rake tasks\nremote:  !     ensure you can run `$ bundle exec rake -P` against your app\nremote:  !     and using the production group of your Gemfile.\nremote:  !     rake aborted!\nremote:  !     LoadError: /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/jemalloc-1.0.1/lib/jemalloc.so: undefined symbol: Init_jemalloc - /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/jemalloc-1.0.1/lib/jemalloc.so\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:82:in `require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:82:in `block (2 levels) in require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:77:in `each'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:77:in `block in require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:66:in `each'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/runtime.rb:66:in `require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler.rb:108:in `require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/config/application.rb:7:in `&lt;top (required)&gt;'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/Rakefile:4:in `require'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/Rakefile:4:in `&lt;top (required)&gt;'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/rake_module.rb:29:in `load'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/rake_module.rb:29:in `load_rakefile'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:703:in `raw_load_rakefile'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:104:in `block in load_rakefile'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:186:in `standard_exception_handling'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:103:in `load_rakefile'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:82:in `block in run'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:186:in `standard_exception_handling'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/lib/rake/application.rb:80:in `run'\nremote:  !     /tmp/build_c49fb2d1484e39d9a1e11c3b732d5119/vendor/bundle/ruby/2.3.0/gems/rake-12.3.3/exe/rake:27:in `&lt;top (required)&gt;'\nremote:  !     vendor/bundle/bin/rake:17:in `load'\nremote:  !     vendor/bundle/bin/rake:17:in `&lt;main&gt;' \n</code></pre>\n\n<p>Considering the latest version, 1.0.1, on rubygems.org (from where I get all my other gems) is from 2015 and as far as I understand the gem (<a href=\"https://github.com/jemalloc/jemalloc\" rel=\"nofollow noreferrer\">https://github.com/jemalloc/jemalloc</a>) is at 5.1.0 (?) now it seems like rubygems.org doesn't have the latest version for some reason. Why, I wonder?</p>\n\n<p>I am assuming this is the reason my push to heroku won't work as the buildpack seems to need at least version 3.x of jemalloc to work and not the ancient one I can find on rubygems.org</p>\n\n<p>So, I tried to download the gem directly from github using:</p>\n\n<pre><code>gem 'jemalloc' , :git =&gt; \"https://github.com/jemalloc/jemalloc.git\"\n</code></pre>\n\n<p>and then run <code>bundle install</code>. This results in:</p>\n\n<pre><code>Fetching https://github.com/jemalloc/jemalloc.git\nFetching gem metadata from https://rubygems.org/.........\nFetching gem metadata from https://rubygems.org/.\nCould not find gem 'jemalloc' in https://github.com/jemalloc/jemalloc.git (at master@ea6b3e9).\nThe source does not contain any versions of 'jemalloc'\n</code></pre>\n\n<p>to my surprise. I cannot understand why this doesn't work.</p>\n\n<p>So, I am left with a version 1.0.1 that (I assume) won't work with the buildpack I need on Heroku.</p>\n\n<p>How do I bundle a newer version of jemalloc to make this work? What am I missing?</p>\n\n<p>I also found information about jemalloc being included into ruby 2.2.0, does that mean it may already in use in my application? I have made no configurations in my Rails app about that.</p>\n\n<p>Lastly, I am only interested in using jemalloc in my live production app on Heroku, and not on my development version locally on my laptop.</p>\n"}, {"tags": ["java", "ruby", "intellij-idea", "upgrade"], "comments": [{"owner": {"reputation": 555, "user_id": 5675692, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcbd2723a6bbde29f0a7f62e6651475a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashvin Sharma", "link": "https://stackoverflow.com/users/5675692/ashvin-sharma"}, "edited": false, "score": 0, "creation_date": 1568198448, "post_id": 57886964, "comment_id": 102196533, "body": "did you give the path of the <code>{path_to_java}&#47;bin</code> in IntelliJ?"}, {"owner": {"reputation": 1, "user_id": 12051734, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nG14jQ6e7s4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdad7BH9M7bs1_-7phEr3DOPlK71Q/photo.jpg?sz=128", "display_name": "Harry ", "link": "https://stackoverflow.com/users/12051734/harry"}, "reply_to_user": {"reputation": 555, "user_id": 5675692, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcbd2723a6bbde29f0a7f62e6651475a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashvin Sharma", "link": "https://stackoverflow.com/users/5675692/ashvin-sharma"}, "edited": false, "score": 0, "creation_date": 1568203221, "post_id": 57886964, "comment_id": 102199005, "body": "Yes, I gave the path in my WIndows settings"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568221399, "post_id": 57886964, "comment_id": 102208976, "body": "Tip: It&#39;s &quot;Java&quot; not &quot;JAVA&quot;."}], "owner": {"reputation": 1, "user_id": 12051734, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nG14jQ6e7s4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdad7BH9M7bs1_-7phEr3DOPlK71Q/photo.jpg?sz=128", "display_name": "Harry ", "link": "https://stackoverflow.com/users/12051734/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568221412, "creation_date": 1568197045, "last_edit_date": 1568221412, "question_id": 57886964, "link": "https://stackoverflow.com/questions/57886964/after-upgrading-java-my-tests-in-jruby-are-not-working-anymore-due-to-no-findin", "title": "After upgrading Java my tests in jruby are not working anymore, due to no finding Java anymore", "body": "<p>I upgraded Java to version jre1.8.0_221. My JAVA_HOME is also changed to the correct new location, but intelliJ gives the message: \"Cannot locate Java installation, specified by JAVA_HOME.  </p>\n\n<p>I've checked the project settings in IntelliJ: Project SDK is set correctly, Module is set correctly. Platform settings: SDK's are defined.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 2748, "user_id": 3266953, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5feb665600e276fd9c6361a5adc5cc93?s=128&d=identicon&r=PG&f=1", "display_name": "TWONEKSONE", "link": "https://stackoverflow.com/users/3266953/twoneksone"}, "edited": false, "score": 0, "creation_date": 1613465903, "post_id": 58029280, "comment_id": 117076410, "body": "Do you think it is possible to include the css/js assets via webpacker, so including them through es6 imports?"}], "tags": [], "owner": {"reputation": 123, "user_id": 11931179, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mrl6eGeoUkQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcu6xNIOvCpjOBfU0ngzYMl05Yfkw/photo.jpg?sz=128", "display_name": "Grofen", "link": "https://stackoverflow.com/users/11931179/grofen"}, "is_accepted": false, "score": 2, "last_activity_date": 1568985894, "creation_date": 1568985894, "answer_id": 58029280, "question_id": 57886802, "link": "https://stackoverflow.com/questions/57886802/how-can-i-use-action-text-on-active-admin/58029280#58029280", "title": "How can I use action text on active admin", "body": "<p>I used this <code>f.rich_text_area :content</code> inside ActiveAdmin but it didn't work for me so I added <code>&lt;trix-editor&gt;</code> tag inside a custom form following this <a href=\"https://github.com/activeadmin/activeadmin/wiki/Form-Partial-Tricks\" rel=\"nofollow noreferrer\">Form Partial Tricks\n</a> but also this didn't work so I ended up using this gem <a href=\"https://github.com/blocknotes/activeadmin_quill_editor\" rel=\"nofollow noreferrer\">ActiveAdmin Quill Editor</a> it was easy to setup and worked perfectly</p>\n\n<h2>Install</h2>\n\n<ul>\n<li><p>Add this to your Gemfile <code>gem 'activeadmin_quill_editor'</code></p></li>\n<li><p>in your <code>app/assets/stylesheets/active_admin.scss</code> file, add this:</p></li>\n</ul>\n\n<pre><code>@import 'activeadmin/quill_editor_input';\n</code></pre>\n\n<ul>\n<li>in your <code>app/assets/javascripts/active_admin.js</code> file, add this:</li>\n</ul>\n\n<pre><code>//= require activeadmin/quill_editor/quill\n//= require activeadmin/quill_editor_input\n</code></pre>\n\n<h2>Example</h2>\n\n<pre><code># ActiveAdmin article form conf:\n  form do |f|\n    f.inputs 'Article' do\n      f.input :title\n      f.input :description, as: :quill_editor\n      f.input :published\n    end\n    f.actions\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5616014, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P9tvie6JgXE/AAAAAAAAAAI/AAAAAAAAAAA/QLhYakPeudo/photo.jpg?sz=128", "display_name": "Alexey", "link": "https://stackoverflow.com/users/5616014/alexey"}, "is_accepted": false, "score": -1, "last_activity_date": 1608076361, "last_edit_date": 1608076361, "creation_date": 1608070036, "answer_id": 65314385, "question_id": 57886802, "link": "https://stackoverflow.com/questions/57886802/how-can-i-use-action-text-on-active-admin/65314385#65314385", "title": "How can I use action text on active admin", "body": "<p>Add this to your Gemfile</p>\n<pre><code>gem 'activeadmin_quill_editor'\n</code></pre>\n<p>in your app/assets/stylesheets/active_admin.scss</p>\n<pre><code>@import 'activeadmin/quill_editor/quill.snow';\n@import 'activeadmin/quill_editor_input';\n</code></pre>\n<p>in your app/assets/javascripts/active_admin.js</p>\n<pre><code>//= require activeadmin/quill_editor/quill\n//= require activeadmin/quill_editor_input\n</code></pre>\n<p>app/admin/posts.rb</p>\n<pre><code>ActiveAdmin.register Post do\n  permit_params :title, :text, :tag_list\n  form do |f|\n    f.inputs 'Article' do\n      f.input :tag_list, :input_html =&gt; {:value =&gt; f.object.tag_list.join(&quot;, &quot;) }, :label =&gt; &quot;Tags (separated by commas)&quot;.html_safe\n      f.input :title\n      f.input :text, as: :quill_editor, input_html: { data:\n        { options:\n          { modules:\n            { toolbar:\n              [%w[bold italic underline strike],\n               %w[blockquote code-block],\n               [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n               [{ 'align': [] }],\n               ['link'],\n               [{ 'size': ['small', false, 'large', 'huge'] }],\n               [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n               [{ 'indent': '-1' }, { 'indent': '+1' }],\n               [{ 'direction': 'rtl' }],\n               [{ 'color': [] }, { 'background': [] }],\n               [{ 'font': [] }],\n               ['clean'],\n               ['image'],\n               ['video']] },\n            theme: 'snow' } } }\n      # f.input :published\n    end\n    f.actions\n  end\nend\n</code></pre>\n<p><a href=\"https://github.com/cmirnow/CRUD-Blog/blob/master/app/admin/posts.rb\" rel=\"nofollow noreferrer\">It works</a>.</p>\n"}], "owner": {"reputation": 81, "user_id": 12052299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cb3dc8e952f3a6b953d5a89f688f59?s=128&d=identicon&r=PG&f=1", "display_name": "godwon", "link": "https://stackoverflow.com/users/12052299/godwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1608076361, "creation_date": 1568196441, "last_edit_date": 1568220020, "question_id": 57886802, "link": "https://stackoverflow.com/questions/57886802/how-can-i-use-action-text-on-active-admin", "title": "How can I use action text on active admin", "body": "<p>i'm using rails 6.0.0 and ruby 2.6.0, I want to know what's the best way to use ActionText in ActiveAdmin, should I have to use render?</p>\n"}, {"tags": ["ruby", "rubygems", "github-api", "github-actions"], "answers": [{"comments": [{"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1569003621, "post_id": 58003181, "comment_id": 102468973, "body": "Hey @peterevans, Thanks for the clarification on <code>GITHUB_TOKEN</code>, that makes sense now! However, I tried this method but it doesn&#39;t seem to be picking up my token (.../tokens has &#39;never used&#39; next to the new one). The error is the same. Any ideas?"}, {"owner": {"reputation": 12695, "user_id": 11934042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fd3e15c86ccfd8897e44bc97856fbe?s=128&d=identicon&r=PG", "display_name": "peterevans", "link": "https://stackoverflow.com/users/11934042/peterevans"}, "reply_to_user": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1569023480, "post_id": 58003181, "comment_id": 102474133, "body": "@StefanJCollier Have you also created a secret containing the token in the repository hosting the workflow?"}, {"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1569237066, "post_id": 58003181, "comment_id": 102518834, "body": "Yup, I did do that. Is it possible to echo/print the key (just to prove it&#39;s being used)? I assume it will not fail if you use <code>${{ secrets.THIS_DOES_NOT_EXIST }}</code> given it&#39;s not defined"}, {"owner": {"reputation": 12695, "user_id": 11934042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fd3e15c86ccfd8897e44bc97856fbe?s=128&d=identicon&r=PG", "display_name": "peterevans", "link": "https://stackoverflow.com/users/11934042/peterevans"}, "reply_to_user": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1569289201, "post_id": 58003181, "comment_id": 102539482, "body": "The way you are using the secret sounds correct to me. I believe I know what the problem is now. I&#39;ve updated the answer with an additional step. Try changing the gem reference to use HTTPS."}, {"owner": {"reputation": 12695, "user_id": 11934042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fd3e15c86ccfd8897e44bc97856fbe?s=128&d=identicon&r=PG", "display_name": "peterevans", "link": "https://stackoverflow.com/users/11934042/peterevans"}, "reply_to_user": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1569471125, "post_id": 58003181, "comment_id": 102608857, "body": "@StefanJCollier Did you try the update I suggested?"}], "tags": [], "owner": {"reputation": 12695, "user_id": 11934042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fd3e15c86ccfd8897e44bc97856fbe?s=128&d=identicon&r=PG", "display_name": "peterevans", "link": "https://stackoverflow.com/users/11934042/peterevans"}, "is_accepted": false, "score": 8, "last_activity_date": 1569289099, "last_edit_date": 1569289099, "creation_date": 1568862470, "answer_id": 58003181, "question_id": 57886790, "link": "https://stackoverflow.com/questions/57886790/how-to-bundle-install-private-gem-in-github-actions/58003181#58003181", "title": "How to bundle install private gem in github actions", "body": "<p>I'm fairly sure the default secret <code>GITHUB_TOKEN</code> in a repository is only scoped to that repository. You cannot use it to access other repositories.</p>\n\n<p>Try using a <code>repo</code> scoped token instead. Create one at <a href=\"https://github.com/settings/tokens\" rel=\"noreferrer\">https://github.com/settings/tokens</a> and then add it as a secret to the repository your workflow runs in. It will be under <a href=\"https://github.com/[username]/[repo]/settings/secrets\" rel=\"noreferrer\">https://github.com/[username]/[repo]/settings/secrets</a></p>\n\n<p>Use that secret in your workflow instead of <code>GITHUB_TOKEN</code>.</p>\n\n<pre><code>BUNDLE_GITHUB__COM: ${{ secrets.REPO_SCOPED_TOKEN }}:x-oauth-basic\n</code></pre>\n\n<p>Or, use the <code>x-access-token</code> method, which I think is preferable.</p>\n\n<pre><code>BUNDLE_GITHUB__COM: x-access-token:${{ secrets.REPO_SCOPED_TOKEN }}\n</code></pre>\n\n<p>Additionally, I think you need to change the reference to the private gem so that it uses HTTPS. The way that you are referencing it now means that it will try to use an SSH key instead of the token defined in <code>BUNDLE_GITHUB__COM</code>.</p>\n\n<pre><code>gem 'my_private_repo', git: 'https://github.com/username/my_private_repo.git'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 3714163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8aba5b3335513a9788c2435b2a34c027?s=128&d=identicon&r=PG&f=1", "display_name": "Ninad Nehete", "link": "https://stackoverflow.com/users/3714163/ninad-nehete"}, "is_accepted": false, "score": 1, "last_activity_date": 1587371671, "creation_date": 1587371671, "answer_id": 61318206, "question_id": 57886790, "link": "https://stackoverflow.com/questions/57886790/how-to-bundle-install-private-gem-in-github-actions/61318206#61318206", "title": "How to bundle install private gem in github actions", "body": "<p>So my project contained a private gems which were being accessed using the ssh key.\nWe didn't want to change the Gemfile and access it through <code>https</code>, because that would involved changing deployment procedures.</p>\n\n<p>We used this action <a href=\"https://github.com/shimataro/ssh-key-action\" rel=\"nofollow noreferrer\">ssh-key-action</a>. We added the private ssh key in <a href=\"https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets\" rel=\"nofollow noreferrer\">github secrets</a> for <code>SSH_KEY</code>.</p>\n\n<pre><code>- name: Install SSH keys\n  uses: shimataro/ssh-key-action@v2\n  with:\n    key: ${{ secrets.SSH_KEY }}\n    known_hosts: \"Add known public keys of github here\"\n\n- name: Install gems # usual step to install the gems.\n  run: |\n    bundle config path vendor/bundle \n    bundle install --jobs 4 --retry 3\n</code></pre>\n\n<p>It worked seamlessly.</p>\n\n<p>Note - Ensure that <code>key</code> parameter is <strong>not</strong> given hard coded private key. It won't work that way.</p>\n"}], "owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2905, "favorite_count": 3, "answer_count": 2, "score": 11, "last_activity_date": 1587371671, "creation_date": 1568196389, "question_id": 57886790, "link": "https://stackoverflow.com/questions/57886790/how-to-bundle-install-private-gem-in-github-actions", "title": "How to bundle install private gem in github actions", "body": "<p>I would like to run rspec on a gem (call it <code>priv_gem_a</code>) via github actions. </p>\n\n<p><code>priv_gem_a</code> depends on another gem that's in a private repo (call it <code>priv_gem_b</code>). However I cannot bundle install the <code>priv_gem_b</code> due to invalid permissions.</p>\n\n<p>Error:</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/..........\nFetching git@github.com:myorg/priv_gem_b\nHost key verification failed.\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n\nHost key verification failed.\nRetrying `git clone 'git@github.com:myorg/priv_gem_b' \"/opt/hostedtoolcache/Ruby/2.6.3/x64/lib/ruby/gems/2.6.0/cache/bundler/git/priv_gem_b-886cdb130fe04681e92ab5365f7a1c690be8e62b\" --bare --no-hardlinks --quiet` due to error (2/4): Bundler::Source::Git::GitCommandError Git error: command `git clone 'git@github.com:myorg/priv_gem_b' \"/opt/hostedtoolcache/Ruby/2.6.3/x64/lib/ruby/gems/2.6.0/cache/bundler/git/priv_gem_b-886cdb130fe04681e92ab5365f7a1c690be8e62b\" --bare --no-hardlinks --quiet` in directory /home/runner/work/priv_gem_a/priv_gem_a has failed.\n</code></pre>\n\n<p>I assume this is something to do with the runner not having access to differing private repos in the same org. </p>\n\n<p>So I tried adding environment vars to my workflow file includes <code>GITHUB_TOKEN</code>s, but that doesn't work:</p>\n\n<pre><code>name: Test Code\n\non:\n   push:\n     branches:\n     - master\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v1\n    - name: Set up Ruby 2.6\n      uses: actions/setup-ruby@v1\n      with:\n        ruby-version: 2.6.x\n    - name: Install dependencies\n      env:\n        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        BUNDLE_GITHUB__COM: ${{ secrets.GITHUB_TOKEN }}:x-oauth-basic\n      run: |\n        gem install bundler\n        gem update bundler\n        bundle install --without development --jobs 4 --retry 3\n    - name: Test with RSpec\n      run: |\n        bundle exec rspec\n</code></pre>\n\n<p>Just a snippet from the Gemfile regarding this:</p>\n\n<pre><code>gem 'priv_gem_b', '&gt;= 7.0.1', '&lt; 8', git: 'git@github.com:my_org/priv_gem_b', branch: :master\n\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1568223788, "creation_date": 1568223788, "answer_id": 57894299, "question_id": 57886657, "link": "https://stackoverflow.com/questions/57886657/translate-scss-to-css-in-ruby-cmd-for-writing-sass-code/57894299#57894299", "title": "translate scss to css in ruby cmd for writing sass code", "body": "<p>You've got spaces in your path and the shell is breaking the arguments on spaces, so either eliminate those or quote each path:</p>\n\n<pre><code>sass \"D:\\Tasks\\Bootstrap 4\\css\\style.scss\" \"D:\\Tasks\\Bootstrap 4\\compiledcss\\style.css\"\n</code></pre>\n\n<p>Spaces in filenames are super annoying, so they're best avoided if you can.</p>\n"}], "owner": {"reputation": 1, "user_id": 11832869, "user_type": "registered", "profile_image": "https://graph.facebook.com/438322463422625/picture?type=large", "display_name": "Islam Al-sawaftah", "link": "https://stackoverflow.com/users/11832869/islam-al-sawaftah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568223788, "creation_date": 1568195942, "last_edit_date": 1568223728, "question_id": 57886657, "link": "https://stackoverflow.com/questions/57886657/translate-scss-to-css-in-ruby-cmd-for-writing-sass-code", "title": "translate scss to css in ruby cmd for writing sass code", "body": "<p>i have faced this problem</p>\n\n<p>Errno::ENOENT: No such file or directory @ rb_sysopen - D:\\Tasks\\Bootstrap\n  Use --trace for backtrace.</p>\n\n<p>after i have write this command in ruby cmd:</p>\n\n<pre><code>sass D:\\Tasks\\Bootstrap 4\\css\\style.scss D:\\Tasks\\Bootstrap 4\\compiledcss\\style.css\n</code></pre>\n"}, {"tags": ["html", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1568236825, "post_id": 57886254, "comment_id": 102214948, "body": "Your approach won&#39;t work because <code>row.acDesc</code> is not a CSS class, so <code>at_css</code> definitely won&#39;t be able to use it. I would try Nokogiri&#39;s xpath syntax, which can do more complex selectors based on arbitrary attributes such as <code>bo-bind</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1586848264, "post_id": 57886254, "comment_id": 108271036, "body": "We need a minimal and accurate example of the HTML. Strip <i>everything from the HTML that is not essential</i> to the question. We also need your expected output based on that input. As is it&#39;s difficult to help because there&#39;s a lot of visual noise. &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1586850544, "creation_date": 1586850544, "answer_id": 61202964, "question_id": 57886254, "link": "https://stackoverflow.com/questions/57886254/is-there-a-way-to-parse-html-that-include-javascript-in-tags-in-ruby/61202964#61202964", "title": "Is there a way to parse html that include javascript in tags in ruby?", "body": "<p>Using CSS:</p>\n\n<pre><code>require 'nokogiri'\n\ndocument = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;div class=\"acc-list\"&gt;\n  &lt;!-- HTML for name --&gt;\n  &lt;td&gt;\n    &lt;div class=\"first-cell cellText ng-scope\"&gt;\n      &lt;div class=\"info-wrapper\"&gt;\n        &lt;!-- # value --&gt;\n        &lt;p class=\"s3 bold\"&gt;Name_value&lt;/p&gt; \n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/td&gt;\n\n\n  &lt;!-- HTML for currency --&gt;\n  &lt;td&gt;\n    &lt;div class=\"text-center cellText ng-scope\"&gt;\n      &lt;!-- # value --&gt;\n      &lt;span&gt;EUR&lt;/span&gt; \n    &lt;/div&gt;\n  &lt;/td&gt;\n\n  &lt;!-- HTML for balance --&gt;\n  &lt;td&gt;\n    &lt;div class=\"text-right cellText ng-scope\"&gt;\n      &lt;!-- # value --&gt;\n      &lt;span&gt;1 523.08&lt;/span&gt; \n    &lt;/div&gt;\n  &lt;/td&gt;\n&lt;/div&gt;\nEOT\n</code></pre>\n\n<p>Now that the DOM is loaded:</p>\n\n<pre><code>content = document.css('div.acc-list').map do |div| \n    name = div.at(\"p.s3.bold\").text.strip # =&gt; \"Name_value\"\n    currency = div.at(\"div.text-center &gt; span\").text.strip  # =&gt; \"EUR\"\n    balance = div.at(\"div.text-right &gt; span\").text.strip # =&gt; \"1 523.08\"\n  [ name, currency, balance ]\nend\n# =&gt; [[\"Name_value\", \"EUR\", \"1 523.08\"]]\n</code></pre>\n\n<p>Your HTML sample has a lot of extraneous information that obscures the trees in this particular forest. I stripped it out because it wasn't useful. (And, when submitting a question you should automatically do that as part of simplifying the non-essential information so we can all focus on the actual problem.) </p>\n\n<p>CSS doesn't care about parameters other than the node name, <code>class</code> and <code>id</code>. The <code>class</code> can chain the parameters in the definition of the class if you need that granular access, but often you can get away with a more general class selector; It just depends on the HTML.</p>\n\n<p>Most XML and HTML parsing is basically the same tactic: Find an outer placeholder, look inside it and iterate grabbing the information needed. I can't demonstrate that completely because your example only has the outer div, but you can probably imagineer the necessary code to handle an inner loop.</p>\n\n<p><code>at_css</code> is almost equivalent to <code>at</code>, and Nokogiri is smart enough 99.9% of the time to determine whether a selector is CSS or XPath, so I tend toward using <code>at</code> because my fingers are lazy.</p>\n"}], "owner": {"reputation": 190, "user_id": 12051965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa85207e8a14edc839cf79379645335b?s=128&d=identicon&r=PG&f=1", "display_name": "user12051965", "link": "https://stackoverflow.com/users/12051965/user12051965"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 61202964, "answer_count": 1, "score": 1, "last_activity_date": 1586850544, "creation_date": 1568194751, "last_edit_date": 1568194990, "question_id": 57886254, "link": "https://stackoverflow.com/questions/57886254/is-there-a-way-to-parse-html-that-include-javascript-in-tags-in-ruby", "title": "Is there a way to parse html that include javascript in tags in ruby?", "body": "<p>I am working on a web scraping problem in Ruby. I have seen multiple questions and answers related to this but in none I have seen HTML that include some JavaScript framework in it and I cannot figure out how to do it. I just want to select the HTML and return an array of objects. The following is my script and the HTML code. The HTML classes of the values like name, currency, balance are similar and the question of how can it be done? </p>\n\n<pre><code>content = document.css(\"div.acc-list\").map do |parameters| \n    name = parameters.at_css(\"p.s3.bold.row.acDesc\").text.strip, # argument?\n    currency = parameters.at_css(\".row.ccy\").text.strip, # argument?\n    balance = parameters.at_css(\".row.acyOpeningBal\").text.strip # argument?\n    Account.new name, currency, balance\nend\npp content\n</code></pre>\n\n<p>These HTML paragraphs are inside multiple other classes which I think is due to the framework. However, they are inside a <code>&lt;div class = acc-list div&gt;...&lt;/div&gt;</code> and I think I did correctly when I assigned \"div.acc-list\" to \"content\" variable.</p>\n\n<pre><code>&lt;!-- HTML for name --&gt;\n\n&lt;td bindonce=\"\" ng-repeat=\"col in gridOptions.columns\" sg-bind-html-compile=\"col.cellTemplate\" bo-class=\"col.className\" bo-style=\"{width: col.remWidth }\" \nclass=\"ng-scope icon-two-line-col\" style=\"width: 17.3333rem;\"&gt;\n  &lt;div style=\"width: 17.333333333333332rem\" class=\"first-cell cellText ng-scope\"&gt;\n    &lt;i bo-class=\"{'active':row.selected }\" class=\"i-32 active icon i-circle-account\"&gt;&lt;/i&gt;\n    &lt;div class=\"info-wrapper\" style=\"\"&gt;\n      &lt;p class=\"s3 bold\" bo-bind=\"row.acDesc\"&gt;Name_value&lt;/p&gt;   # value\n      &lt;a ui-sref=\"app.layout.ACCOUNTS.DETAILS.{ID}({id:'091601003439274'})\" href=\"/Bank/accounts/details/BG37FINV91503006938102\"&gt;\n        &lt;span bo-bind=\"row.iban\"&gt;BG37FINV91503006938102&lt;/span&gt;\n        &lt;i class=\"i-arrow-right-5x8\"&gt;&lt;/i&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n\n\n&lt;!-- HTML for currency --&gt;\n\n&lt;td bindonce=\"\" ng-repeat=\"col in gridOptions.columns\" sg-bind-html-compile=\"col.cellTemplate\" bo-class=\"col.className\" bo-style=\"{width: col.remWidth }\" \nclass=\"ng-scope\" style=\"width: 4.4rem;\"&gt;\n    &lt;div style=\"width: 4.4rem\" class=\"text-center cellText ng-scope\"&gt;\n        &lt;span bo-bind=\"row.ccy\"&gt;EUR&lt;/span&gt;   # value\n    &lt;/div&gt;\n&lt;/td&gt;\n\n\n&lt;!-- HTML for balance --&gt;\n\n&lt;td bindonce=\"\" ng-repeat=\"col in gridOptions.columns\" sg-bind-html-compile=\"col.cellTemplate\" bo-class=\"col.className\" bo-style=\"{width: col.remWidth }\" \nclass=\"ng-scope\" style=\"width: 8.73333rem;\"&gt;\n    &lt;div style=\"width: 8.733333333333333rem\" class=\"text-right cellText ng-scope\"&gt;\n        &lt;span bo-bind=\"row.acyAvlBal | sgCurrency\"&gt;1 523.08&lt;/span&gt;   # value\n    &lt;/div&gt;\n&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "soap", "savon"], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 5039866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oH8jw.jpg?s=128&g=1", "display_name": "Nirajan Pokharel", "link": "https://stackoverflow.com/users/5039866/nirajan-pokharel"}, "edited": false, "score": 0, "creation_date": 1568266198, "post_id": 57890505, "comment_id": 102221045, "body": "thanks, I played around with the authorization as well after posting question :D"}], "tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": false, "score": 1, "last_activity_date": 1568209194, "creation_date": 1568209194, "answer_id": 57890505, "question_id": 57883865, "link": "https://stackoverflow.com/questions/57883865/solved-error-reading-xmlstreamreader-unexpected-character-soap-api/57890505#57890505", "title": "Solved ! Error reading XMLStreamReader: Unexpected character SOAP API", "body": "<p>In a first step I use <a href=\"https://www.soapui.org\" rel=\"nofollow noreferrer\">SoapUI</a> to create a valid request.\nIf I can get this work then I'm creating the identical request with Savon.\nFor debugging you should include <code>log_level: :debug</code>when you create your client.</p>\n\n<p>From your question it looks like there is an oddity with the Authorization tag. There is a colon in the tag which usually splits a namespace from the identifier.</p>\n\n<p>Instead of <code>&lt;Authorization:&gt;</code> I'd expect something like <code>&lt;Authorization:identifier&gt;</code>.</p>\n"}], "owner": {"reputation": 935, "user_id": 5039866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oH8jw.jpg?s=128&g=1", "display_name": "Nirajan Pokharel", "link": "https://stackoverflow.com/users/5039866/nirajan-pokharel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3867, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568266068, "creation_date": 1568185789, "last_edit_date": 1568266068, "question_id": 57883865, "link": "https://stackoverflow.com/questions/57883865/solved-error-reading-xmlstreamreader-unexpected-character-soap-api", "title": "Solved ! Error reading XMLStreamReader: Unexpected character SOAP API", "body": "<p>I'm trying to communicate with SOAP API <code>https://www.flussituristici.servizirl.it/Turismo5/app/ws/checkinV1?wsdl</code>\nusing Savon gem.</p>\n\n<p>so far I've implemented following code:</p>\n\n<pre><code>  def client\n    client = Savon.client(\n      wsdl: \"https://www.flussituristici.servizirl.it/Turismo5/app/ws/checkinV1?wsdl\",\n      host: \"https://www.flussituristici.servizirl.it/Turismo5/app/ws/checkinV1\",\n      soap_header: { 'Authorization:' =&gt; \"Basic #{Base64.strict_encode64(\"username: password\")}\"},\n      log: true,\n      pretty_print_xml: true\n    )\n    client.call(:invia_movimentazione, message: message, soap_action: '')\n  end\n\n  def message\n    {\n      movimenti:\n      {\n        codice: \"S00352\",\n        prodotto: \"XXXXX\",\n        movimento:\n        [\n          {\n            data: \"20190911\",\n            struttura:\n              {\n                apertura: \"SI\",\n                camereoccupate: \"10\",\n                cameredisponibili: \"16\",\n                lettidisponibili: \"34\"\n              }\n          },\n          {\n            data: \"20190911\",\n            struttura:\n            {\n              apertura: \"SI\",\n              camereoccupate: \"9\",\n              cameredisponibili: \"16\",\n              lettidisponibili: \"34\"\n            }\n          }\n        ]\n      }\n    }\n  end \n</code></pre>\n\n<p>but i'm getting following error response:</p>\n\n<pre><code>D, [2019-09-11T06:45:28.544608 #12024] DEBUG -- : HTTPI /peer GET request to www.flussituristici.servizirl.it (net_http)\nI, [2019-09-11T06:45:29.557382 #12024]  INFO -- : SOAP request: https://www.flussituristici.servizirl.it/Turismo5/app/ws/checkinV1\nI, [2019-09-11T06:45:29.562181 #12024]  INFO -- : SOAPAction: \"\", Content-Type: text/xml;charset=UTF-8, Content-Length: 925\nD, [2019-09-11T06:45:29.576008 #12024] DEBUG -- : &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;env:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:tns=\"http://checkin.ws.service.turismo5.gies.it/\" xmlns:env=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;env:Header&gt;\n    &lt;Authorization:&gt;Basic TUk0OTg1231d01kTmNXKkp2N3I123&lt;/Authorization:&gt;\n  &lt;/env:Header&gt;\n  &lt;env:Body&gt;\n    &lt;tns:inviaMovimentazione&gt;\n      &lt;movimenti&gt;\n        &lt;codice&gt;S00352&lt;/codice&gt;\n        &lt;prodotto&gt;XXXXX&lt;/prodotto&gt;\n        &lt;movimento&gt;\n          &lt;data&gt;20190911&lt;/data&gt;\n          &lt;struttura&gt;\n            &lt;apertura&gt;SI&lt;/apertura&gt;\n            &lt;camereoccupate&gt;10&lt;/camereoccupate&gt;\n            &lt;cameredisponibili&gt;16&lt;/cameredisponibili&gt;\n            &lt;lettidisponibili&gt;34&lt;/lettidisponibili&gt;\n          &lt;/struttura&gt;\n        &lt;/movimento&gt;\n        &lt;movimento&gt;\n          &lt;data&gt;20190911&lt;/data&gt;\n          &lt;struttura&gt;\n            &lt;apertura&gt;SI&lt;/apertura&gt;\n            &lt;camereoccupate&gt;9&lt;/camereoccupate&gt;\n            &lt;cameredisponibili&gt;16&lt;/cameredisponibili&gt;\n            &lt;lettidisponibili&gt;34&lt;/lettidisponibili&gt;\n          &lt;/struttura&gt;\n        &lt;/movimento&gt;\n      &lt;/movimenti&gt;\n    &lt;/tns:inviaMovimentazione&gt;\n  &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n\nD, [2019-09-11T06:45:29.580471 #12024] DEBUG -- : HTTPI /peer POST request to www.flussituristici.servizirl.it (net_http)\nI, [2019-09-11T06:45:30.455910 #12024]  INFO -- : SOAP response (status 500)\nD, [2019-09-11T06:45:30.457178 #12024] DEBUG -- : &lt;?xml version=\"1.0\"?&gt;\n&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;soap:Body&gt;\n    &lt;soap:Fault&gt;\n      &lt;faultcode&gt;soap:Client&lt;/faultcode&gt;\n      &lt;faultstring&gt;Error reading XMLStreamReader: Unexpected character '&amp;gt;' (code 62) (expected a name start character)\n at [row,col {unknown-source}]: [1,289]&lt;/faultstring&gt;\n    &lt;/soap:Fault&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n\nSavon::SOAPFault: (soap:Client) Error reading XMLStreamReader: Unexpected character '&gt;' (code 62) (expected a name start character)\n at [row,col {unknown-source}]: [1,289]\nfrom /usr/local/rvm/gems/ruby-2.0.0-p648/gems/savon-2.11.2/lib/savon/response.rb:85:in `raise_soap_and_http_errors!'\n</code></pre>\n\n<p>what is this error indicating? how can I debug it?</p>\n\n<p><strong>UPDATE:</strong>\nThere was an issue when initializing the Savon client, the documentation said I need to send a Base43 encoded \"username\": \"password\" like i did previously but just sending the username &amp; password as below worked fine.</p>\n\n<pre><code>def client\n  client = Savon.client(\n      wsdl: END_POINT,\n      basic_auth: [\"username\", \"password\"],\n      log: true,\n      pretty_print_xml: true\n    )\n  client.call(:invia_movimentazione, message: message, soap_action: '')\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage", "image-upload", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 36, "user_id": 10706845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03b6505895be60547b525fcf1accb2c?s=128&d=identicon&r=PG&f=1", "display_name": "Noriode Raphael", "link": "https://stackoverflow.com/users/10706845/noriode-raphael"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568180528, "post_id": 57882367, "comment_id": 102188274, "body": "@MarkMerritt yes I did, but I get the same output, regardless. Also, I saw on the active storage Github page that it is okay to add it if the task cannot be found, I am not sure what that means since I do not get error output"}, {"owner": {"reputation": 36, "user_id": 10706845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03b6505895be60547b525fcf1accb2c?s=128&d=identicon&r=PG&f=1", "display_name": "Noriode Raphael", "link": "https://stackoverflow.com/users/10706845/noriode-raphael"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568180932, "post_id": 57882367, "comment_id": 102188396, "body": "No migration is created, so I assume there is an error somewhere but nothing shows up on the terminal"}, {"owner": {"reputation": 36, "user_id": 10706845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03b6505895be60547b525fcf1accb2c?s=128&d=identicon&r=PG&f=1", "display_name": "Noriode Raphael", "link": "https://stackoverflow.com/users/10706845/noriode-raphael"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568182051, "post_id": 57882367, "comment_id": 102188750, "body": "Still the same thing, I update my question to reflect that"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11831257"}, "edited": false, "score": 1, "creation_date": 1568190160, "post_id": 57882367, "comment_id": 102192346, "body": "Maybe the migrations are already added, can you see and confirm <code>schema.rb</code> file?"}], "owner": {"reputation": 36, "user_id": 10706845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03b6505895be60547b525fcf1accb2c?s=128&d=identicon&r=PG&f=1", "display_name": "Noriode Raphael", "link": "https://stackoverflow.com/users/10706845/noriode-raphael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568181946, "creation_date": 1568177799, "last_edit_date": 1568181946, "question_id": 57882367, "link": "https://stackoverflow.com/questions/57882367/rails-activestorage-does-not-create-migration-files", "title": "Rails activestorage does not create migration files", "body": "<p>I make an image-upload for a user profile using the activestorage gem built into rails, but it is not working, the intriguing part is that there are no errors, the migration just does not get created.</p>\n\n<p>What is wrong here, any ideas on how I can fix this?</p>\n\n<p>rails version - 6.0</p>\n\n<p>I added <code>require 'active_storage/engine'</code> to the <code>config/application.rb</code> file already\nAnd then ran <code>rails active_storage:install</code></p>\n\n<p>What is even more intriguing is that I get the same output without adding the <code>require active_storage/engine</code> to application.rb. And there are no errors</p>\n\n<p>output</p>\n\n<pre><code>** Invoke active_storage:install (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Execute active_storage:install\n** Invoke active_storage:install:migrations (first_time)\n** Execute active_storage:install:migrations\n** Invoke railties:install:migrations (first_time)\n** Invoke db:load_config (first_time)\n** Invoke environment \n** Execute db:load_config\n** Execute railties:install:migrations```\n\nI expect the migration file to be created after this but it is not. \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "time", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1568243871, "post_id": 57882088, "comment_id": 102216617, "body": "You can use select instead of map so that you don&#39;t have to reject."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1568175583, "creation_date": 1568175583, "answer_id": 57882088, "question_id": 57881974, "link": "https://stackoverflow.com/questions/57881974/trying-to-find-amount-of-saturdays-that-fall-on-the-last-day-of-each-month-in-ru/57882088#57882088", "title": "Trying to find amount of Saturdays that fall on the last day of each month in Ruby", "body": "<p>Mobile, so can't test, but something like  <code>(0..11).map.with_index { |i| date = Date.today + i.months; date.beginning_of_month if date.end_of_month.saturday? }.reject(&amp;:nil?)</code></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1568176480, "creation_date": 1568176480, "answer_id": 57882204, "question_id": 57881974, "link": "https://stackoverflow.com/questions/57881974/trying-to-find-amount-of-saturdays-that-fall-on-the-last-day-of-each-month-in-ru/57882204#57882204", "title": "Trying to find amount of Saturdays that fall on the last day of each month in Ruby", "body": "<p>You don\u2019t need any <a href=\"/questions/tagged/ruby-on-rails\" class=\"post-tag\" title=\"show questions tagged &#39;ruby-on-rails&#39;\" rel=\"tag\">ruby-on-rails</a> crap here in the first place. Plain <a href=\"/questions/tagged/ruby\" class=\"post-tag\" title=\"show questions tagged &#39;ruby&#39;\" rel=\"tag\">ruby</a> would perfectly do.</p>\n\n<pre><code>require 'date'\nbeginDate, endDate =\n  Date.parse(\"1/1/1990\"), Date.parse(\"1/1/1995\")\n(beginDate..endDate).count do |d|\n  d.saturday? &amp;&amp; d.month != (d + 1).month\nend\n#\u21d2 9\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12050856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5b101c71350ca9bc860258500d462a?s=128&d=identicon&r=PG&f=1", "display_name": "mandee_smith", "link": "https://stackoverflow.com/users/12050856/mandee-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57882204, "answer_count": 2, "score": 0, "last_activity_date": 1568176480, "creation_date": 1568174622, "question_id": 57881974, "link": "https://stackoverflow.com/questions/57881974/trying-to-find-amount-of-saturdays-that-fall-on-the-last-day-of-each-month-in-ru", "title": "Trying to find amount of Saturdays that fall on the last day of each month in Ruby", "body": "<p>I am working on a very specific problem. I need to find the number of times that Saturday falls on the last day of each month within a five year time period. </p>\n\n<p>For this example, I need to find those Saturdays from 1/1/1990 to 1/1/1995.</p>\n\n<p>I've already tried the following code.</p>\n\n<pre><code>require 'active_support/core_ext' \nrequire 'date'\n\nbeginDate = Date.parse(\"1/1/1990\")\n\nendDate = Date.parse(\"1/1/1995\")\n\nsaturdays = beginDate.upto(endDate).count(&amp;:saturday?) &amp;&amp; beginDate.upto(endDate).count.end_of_month\n\nputs saturdays\n</code></pre>\n\n<p>Does anyone have any suggestions or pointers?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1568176862, "post_id": 57881483, "comment_id": 102187200, "body": "It is absolutely unclear how the expected result is got."}, {"owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1568178169, "post_id": 57881483, "comment_id": 102187508, "body": "the first file contain the line number with the numbers. the second file consist of list of line number only. I wanted to filter the line number in the first file according to the second file list number."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1568178269, "post_id": 57881483, "comment_id": 102187534, "body": "So the correct expected result from the input you\u2019ve showed would be <i>only</i> <code>Line 4</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568190495, "post_id": 57881483, "comment_id": 102192538, "body": "I assume you want to extract lines 4, 7, 35 and so on from a file, but you&#39;ve only shown lines 1-4. Examples should be complete so readers can demonstrate how their code works. For example, show lines 1-10 and select, say <code>desired_lines = [0,2,4,5,8]</code>, where lines are indexed beginning at zero. Also, rather than showing what the file looks like, make it the string one would read from the file with <code>str = File.read(&lt;filename&gt;)</code>, say, <code>str = &quot;6728 2882 18181\\n282828 4778 2876 9393\\n...&quot;</code> (but no ...). Also, always show the desired result of an example as a valid Ruby object."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1568179061, "creation_date": 1568179061, "answer_id": 57882536, "question_id": 57881483, "link": "https://stackoverflow.com/questions/57881483/how-to-match-a-list-of-numbers-to-another-file-with-a-list-of-numbers/57882536#57882536", "title": "How to match a list of numbers to another file with a list of numbers?", "body": "<p>With a help of regular expression that would be possible.</p>\n\n<pre><code>lines = File.read('Lines.txt').split\ninput = File.read('incoming.txt')\n\nlines.map do |l|\n  # select everything starting with Line NN\n  #   till the empty line _or_ EOF\n  input[/Line #{l}.*?(?=\\n\\s*\\n|\\z)/m]\nend.compact.join($/)\n</code></pre>\n\n<hr>\n\n<p>Also, there is a flip-flop solution :)</p>\n\n<pre><code>File.readlines('incoming.txt').select do |l|\n  true if lines.include?(l[/(?&lt;=Line )\\d+/])..(l =~ /^\\s*$/)\nend.join($/)\n</code></pre>\n\n<p>More about <a href=\"http://rocket-science.ru/hacking/2018/02/22/flip-flop-real-application\" rel=\"nofollow noreferrer\">flip-flop</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 11048529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271db4644b95dbc9aca9502e63132de3?s=128&d=identicon&r=PG&f=1", "display_name": "RocheRdin", "link": "https://stackoverflow.com/users/11048529/rocherdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1568204618, "creation_date": 1568170724, "last_edit_date": 1568204618, "question_id": 57881483, "link": "https://stackoverflow.com/questions/57881483/how-to-match-a-list-of-numbers-to-another-file-with-a-list-of-numbers", "title": "How to match a list of numbers to another file with a list of numbers?", "body": "<p>I have a list of numbers :</p>\n\n<pre><code>Line 1\n6728\n2882\n18181\n\nLine 2 \n282828\n4778\n2876\n9393\n\nLine 3\n73920\n2489\n\nLine 4\n53689\n8292\n93838\n</code></pre>\n\n<p>To match to the list of the line number:</p>\n\n<pre><code>4\n7\n35\n52\n98\n148\n406\n</code></pre>\n\n<p>I have tried to read both the file and compare it but comes out error : </p>\n\n<blockquote>\n  <p>no such file or directory - 4</p>\n</blockquote>\n\n<pre><code>inc = 'incoming.txt'\ngrid = 'Lines.txt'\n\nFile.readlines(inc).each do |a|\n  File.readlines(grid).each do |line|\n   if grid == a\n      puts line\n    end\n  end\nend\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Line 4\n53689\n8292\n93838\n\nLine 7\n6272\n4441\n98754\n\nLine 35\n156\n4785\n9867\n14286\n986\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1568170118, "post_id": 57881369, "comment_id": 102185953, "body": "I&#39;ve if your operands for a <code>+</code> is nil. You&#39;ll have to do some debugging where you use <code>+</code> to figure out which one."}], "answers": [{"tags": [], "owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "is_accepted": true, "score": 0, "last_activity_date": 1568173432, "creation_date": 1568173432, "answer_id": 57881830, "question_id": 57881369, "link": "https://stackoverflow.com/questions/57881369/error-occurs-undefined-method-for-nilnilclass/57881830#57881830", "title": "Error occurs: undefined method `+&#39; for nil:NilClass", "body": "<p>There are a few potential issues. </p>\n\n<ol>\n<li><p>You are using the <code>cocoon</code> gem and should permit the <code>:_destroy</code> attribute (because you have <code>link_to_remove_association</code>). </p></li>\n<li><p>You have <code>attr_accessor</code>'s for what seems like columns in the <code>open_hours</code> table. The model inherits from <code>ApplicationRecord</code> so this is not necessary....assuming these are columns. </p></li>\n<li><p>You have a private method named <code>set_hour</code>. What is <code>self</code> in this situation? Are you wanting this to be a setter? It seems like you are trying to create a virtual attribute before the record itself is saved. </p></li>\n<li><p>Most importantly, you should store <code>weekday</code>, <code>started_at</code>, and <code>ended_at</code> individually (which I'm sure you are already doing)...then just use a view helper to display their values in your view. </p></li>\n</ol>\n"}], "owner": {"reputation": 555, "user_id": 10813827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b736f8f0de40f55f19c595a02be8b667?s=128&d=identicon&r=PG&f=1", "display_name": "k10a", "link": "https://stackoverflow.com/users/10813827/k10a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57881830, "answer_count": 1, "score": -2, "last_activity_date": 1568173432, "creation_date": 1568169876, "question_id": 57881369, "link": "https://stackoverflow.com/questions/57881369/error-occurs-undefined-method-for-nilnilclass", "title": "Error occurs: undefined method `+&#39; for nil:NilClass", "body": "<p>Working on Rails application. Actually, I'm trying to combine three data into one column. However, an error occurs...</p>\n\n<pre><code>undefined method `+' for nil:NilClass\n</code></pre>\n\n<p>apps/views/stores/new.html.erb</p>\n\n<pre><code>&lt;%= form_for(@seat) do |f| %&gt;\n  &lt;div class=\"formItem\"&gt;\n    &lt;p&gt;Hours&lt;/p&gt;\n    &lt;%= f.fields_for :open_hours do |h| %&gt;\n      &lt;div id=\"links\"&gt;\n        &lt;p class=\"addition\"&gt;&lt;%= link_to_add_association \"Add hour\", f, :open_hours, partial: 'hour' %&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;        \n  &lt;/div&gt;\n  &lt;div class=\"formBtn\"&gt;\n     &lt;%= f.submit \"Submit\", class: \"btn\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>apps/views/stores/_hour.html.erb</p>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n  &lt;div class=\"formField\"&gt;\n    &lt;%= f.select :weekday, [['Monday', 1], ['Tuesday', 2], ['Thursday', 3]] %&gt;\n    &lt;%= f.select :started_at, [['10:00 am', 1], ['11:00 am', 2], ['12:00 am', 3]] %&gt;\n    &lt;%= f.select :ended_at, [['1:00 pm', 1], ['2:00 pm', 2], ['3:00 pm', 3]] %&gt;\n    &lt;p&gt;&lt;%= link_to_remove_association \"Remove hour\", f %&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>apps/modes/open_hour.rb</p>\n\n<pre><code>class OpenHour &lt; ApplicationRecord\n  belongs_to :store\n  before_save :set_hour\n\n  attr_accessor :weekday\n  attr_accessor :started_at\n  attr_accessor :ended_at\n\n  private\n\n  def set_hour\n    self.hour = self.weekday + \"&amp;nbsp;&amp;nbsp;\" + self.started_at + \"&amp;nbsp;-&amp;nbsp;\" + self.ended_at\n  end\nend\n</code></pre>\n\n<p>What's the matter?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1568161191, "post_id": 57879510, "comment_id": 102183658, "body": "A <a href=\"https://ruby-doc.org/core-2.6.4/doc/syntax/control_expressions_rdoc.html#label-case+Expression\" rel=\"nofollow noreferrer\"><code>case</code></a> expression might fit the bill here.  YMMV."}, {"owner": {"reputation": 23, "user_id": 6196925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DpLDb.jpg?s=128&g=1", "display_name": "Laz", "link": "https://stackoverflow.com/users/6196925/laz"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1568162764, "post_id": 57879510, "comment_id": 102183899, "body": "would i need to store a <code>boolean</code> attached to the <code>quiz[&quot;question&quot;][&quot;choices&quot;]</code>, to represent if they are <code>true</code> or <code>false</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568163827, "post_id": 57879510, "comment_id": 102184038, "body": "Tip: Consider using <code>answer = gets.to_i</code> instead of the irregular <code>Integer(...)</code> casting. Also since you don&#39;t really care if it&#39;s an integer or not, compare to <code>&#39;1&#39;</code> instead, like <code>answer = gets.chomp</code> to remove newlines."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568163911, "post_id": 57879510, "comment_id": 102184045, "body": "Tip: Use <code>question.each do |quiz|</code> instead of <code>for</code> which isn&#39;t really used in Ruby. The <code>each do</code> approach gives you access to way more tools, like <code>each_with_index</code> and so on."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568163941, "post_id": 57879510, "comment_id": 102184051, "body": "Tip: Use string interpolation, like <code>&quot;You scored #{x} ...&quot;</code> instead of this highly irregular <code>String(x)</code>. I&#39;m not sure where you picked up that habit from, but no Ruby introduction I know of would ever advocate that way. That seems like Python-accented Ruby."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568164046, "post_id": 57879510, "comment_id": 102184068, "body": "The real question here is why you can&#39;t do <code>if answer == question[&#39;answer&#39;]</code>, or in more Ruby-flavoured terms, <code>if answer == question[:answer]</code> using Symbol keys."}, {"owner": {"reputation": 23, "user_id": 6196925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DpLDb.jpg?s=128&g=1", "display_name": "Laz", "link": "https://stackoverflow.com/users/6196925/laz"}, "edited": false, "score": 0, "creation_date": 1568164643, "post_id": 57879510, "comment_id": 102184167, "body": "I picked up a book for 5 bucks on epub and I guess I get what I payed for"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1568177252, "creation_date": 1568177252, "answer_id": 57882294, "question_id": 57879510, "link": "https://stackoverflow.com/questions/57879510/change-conditional-statement-into-a-loop/57882294#57882294", "title": "Change Conditional statement into a loop", "body": "<p>The best way would be to prepare the array of answers upfront and iterate through questions, collecting the number of correct answers.</p>\n\n<pre><code>answers = [1, 2, 1]\nscore =\n  quiz.zip(answers).reduce(0) do |score, (question, correct_answer)|\n    puts question[\"question_text\"]\n    puts question[\"choices\"]\n    puts \"\"\n    print \"What is your answer? \"\n    answer = gets.to_i\n\n    if answer == correct_answer\n      puts(\"You scored correctly!\")\n      score + 1\n    else    \n      puts(\"You scored incorrectly!\")\n      score\n    end\n  end\n\nputs \"Total score: #{score}\"\n</code></pre>\n\n<p>The code is untested, but it should work.</p>\n"}], "owner": {"reputation": 23, "user_id": 6196925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DpLDb.jpg?s=128&g=1", "display_name": "Laz", "link": "https://stackoverflow.com/users/6196925/laz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568177252, "creation_date": 1568160332, "last_edit_date": 1568160813, "question_id": 57879510, "link": "https://stackoverflow.com/questions/57879510/change-conditional-statement-into-a-loop", "title": "Change Conditional statement into a loop", "body": "<p>The code isn't as clean as I want it to be.</p>\n\n<p>I've been stuck thinking about how I could use a loop instead of a conditional statement. I tried using a <code>while</code> loop but to no avail since it didn't make any sense. I'm assuming another <code>for</code> loop would be the trick but I've been stuck on this for a few days now. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>x = 0\n\nfor question in quiz\n    puts(question[\"question_text\"])\n    puts(question[\"choices\"])\n    puts(\"\")\n    puts(\"What is your answer?\")\n    answer = Integer(gets())\n\n    if answer == 1 &amp;&amp; question == quiz[0]\n        puts(\"You scored correctly!\")\n        x=x+1\n    elsif answer == 2 &amp;&amp; question == quiz[1]\n        puts(\"You scored correctly!\")\n        x=x+1\n    elsif answer == 1 &amp;&amp; question == quiz[2]\n        puts(\"You scored correctly!\")\n        x=x+1\n    else    \n        puts(\"You scored incorrectly!\")\n    end\nend\n\nputs(\"You scored \" + String(x) + \" Out Of \" + String(quiz.size))\n</code></pre>\n"}, {"tags": ["ruby", "liquid", "jekyll-theme"], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "is_accepted": true, "score": 0, "last_activity_date": 1568878857, "last_edit_date": 1568878857, "creation_date": 1568512654, "answer_id": 57940566, "question_id": 57878564, "link": "https://stackoverflow.com/questions/57878564/for-tag-was-never-closed-if-elsif-else-in-liquid-logic-to-include-a-page/57940566#57940566", "title": "&#39;for&#39; tag was never closed / if elsif else in liquid logic to include a page?", "body": "<p>The file <code>collectionJSONLD.html</code> was missing <code>{% endfor %}</code></p>\n\n<pre><code>{% for member in site.data.members %}\n  {\n    \"@type\": \"ListItem\",\n    \"name\": \"{{ member.name }}\",\n    \"url\": \"{{ member.permalink }}\",\n    \"position\": \"{{ forloop.index }}\"\n    {% if forloop.first %}\n      },\n    {% elsif forloop.last %}\n      }\n    {% endif %}\n{% endfor %}\n     ],\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 1, "last_activity_date": 1568754251, "last_edit_date": 1568754251, "creation_date": 1568753661, "answer_id": 57981939, "question_id": 57878564, "link": "https://stackoverflow.com/questions/57878564/for-tag-was-never-closed-if-elsif-else-in-liquid-logic-to-include-a-page/57981939#57981939", "title": "&#39;for&#39; tag was never closed / if elsif else in liquid logic to include a page?", "body": "<p>In my tests with Jekyll 3.8.5 and Jekyll 4.0.0 both scenarios worked like a charm, no errors, no limitations:</p>\n\n<p><strong>If/else:</strong>  </p>\n\n<pre><code>{% if page.jsontype == \"page\" %}\n    {% include 1.html %}\n  {% elsif page.jsontype == \"collection\" %}\n    {% include 2.html %}\n  {% elsif page.jsontype == \"post\" %}\n    {% include 3.html %}\n  {% elsif page.jsontype == \"about\" %}\n    {% include 4.html %}\n  {% elsif page.jsontype == \"lawyer\" %}\n    {% include 5.html %}\n  {% elsif page.jsontype == \"contact\" %}\n    {% include 6.html %}\n  {% else %}\n    {% include 7.html %}\n  {% endif %}\n</code></pre>\n\n<p><strong>Case/When:</strong>   </p>\n\n<pre><code>{% case page.jsontype %}\n  {% when 'page' %}\n    {% include 1.html %}\n  {% when 'collection' %}\n    {% include 2.html %}\n  {% when 'post' %}\n    {% include 3.html %}\n  {% when 'about' %}\n    {% include 4.html %}\n  {% when 'lawyer' %}\n    {% include 5.html %}\n  {% when 'contact' %}\n    {% include 6.html %}\n  {% else %}\n    {% include 7.html %}\n {% endcase %}\n</code></pre>\n\n<p>Any missing <code>{% endfor %}</code>, also within the includes files, showed the same error message but the correct line:</p>\n\n<blockquote>\n  <p>Liquid Exception: Liquid syntax error (C:/Users/User/Desktop/ruby_projects/jekyll_test/testpage/_includes/3.html line 9): 'for' tag was never closed included in /_layouts/default.html\n  jekyll 3.8.6 | Error:  Liquid syntax error (C:/Users/User/Desktop/ruby_projects/jekyll_test/testpage/_includes/3.html line 9): 'for' tag was never closed included</p>\n</blockquote>\n\n<p>One of my last thoughts was that you added and removed a specific page, e.g. collectionJSONLD.html every time when testing this (as you confirmed).\nThere must be a specific thing we can't see as you haven't posted the complete code of the project. Nevertheless, great to read that you solved it! This was a hard one :)</p>\n"}], "owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 1, "accepted_answer_id": 57940566, "answer_count": 2, "score": 2, "last_activity_date": 1568878857, "creation_date": 1568151724, "last_edit_date": 1568161470, "question_id": 57878564, "link": "https://stackoverflow.com/questions/57878564/for-tag-was-never-closed-if-elsif-else-in-liquid-logic-to-include-a-page", "title": "&#39;for&#39; tag was never closed / if elsif else in liquid logic to include a page?", "body": "<p>My Jekyll version is 3.8.6. </p>\n\n<p>If I have too many elseif I get a for logic error where no for loop was written. If I remove one elseif, it works.</p>\n\n<p><strong>This does not work:</strong> </p>\n\n<pre><code>{% if page.jsontype == \"page\" %}\n    {% include pageJSONLD.html %}\n  {% elsif page.jsontype == \"collection\" %}\n    {% include collectionJSONLD.html %}\n  {% elsif page.jsontype == \"post\" %}\n    {% include postJSONLD.html %}\n  {% elsif page.jsontype == \"about\" %}\n    {% include aboutJSONLD.html %}\n  {% elsif page.jsontype == \"lawyer\" %}\n    {% include lawyerJSONLD.html %}\n  {% elsif page.jsontype == \"contact\" %}\n    {% include contactJSONLD.html %}\n  {% else %}\n    {% include homeJSONLD.html %}\n  {% endif %}\n</code></pre>\n\n<p><strong>This Works!</strong></p>\n\n<pre><code>{% if page.jsontype == \"page\" %}\n    {% include pageJSONLD.html %}\n  {% elsif page.jsontype == \"post\" %}\n    {% include postJSONLD.html %}\n  {% elsif page.jsontype == \"about\" %}\n    {% include aboutJSONLD.html %}\n  {% elsif page.jsontype == \"lawyer\" %}\n    {% include lawyerJSONLD.html %}\n  {% elsif page.jsontype == \"contact\" %}\n    {% include contactJSONLD.html %}\n  {% else %}\n    {% include homeJSONLD.html %}\n  {% endif %}\n</code></pre>\n\n<p>The error I get with the additional <code>elsif</code> is</p>\n\n<blockquote>\n  <p>Jekyll Feed: Generating feed for posts\n    Liquid Exception: Liquid syntax error (/home/xxxxx/repositories/legal/_includes/_head.html line 100): 'for' tag was never closed included in /_layouts/default.html\n               Error: Liquid syntax error (/home/xxxx/repositories/legal/_includes/_head.html line 100): 'for' tag was never closed included\n               Error: Run jekyll build --trace for more information.</p>\n</blockquote>\n\n<p>Line: 100 is <code>{% elsif page.jsontype == \"lawyer\" %}</code>.</p>\n\n<p><strong>Edit 1:</strong> </p>\n\n<p>I have got the same error when using case/when</p>\n\n<pre><code>{% case page.jsontype %}\n  {% when 'page' %}\n    {% include pageJSONLD.html %}\n  {% when 'collection' %}\n    {% include collectionJSONLD.html %}\n  {% when 'post' %}\n    {% include postJSONLD.html %}\n  {% when 'about' %}\n    {% include aboutJSONLD.html %}\n  {% when 'lawyer' %}\n    {% include lawyerJSONLD.html %}\n  {% when 'contact' %}\n    {% include contactJSONLD.html %}\n  {% else %}\n    {% include homeJSONLD.html %}\n {% endcase %}\n</code></pre>\n\n<p>It still shows the same error pointing to the end of the head file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1568209140, "post_id": 57878505, "comment_id": 102202449, "body": "Remove the migration file you created, then run <code>rails db:migrate</code> and inspect your db/schema.rb again (it should re-generate a new one). If you&#39;re missing a migration file that should have created that column (you should check) then you may have created it some other way; (manually, in another branch when testing and you forgot to roll back) so consider that you may need to undo what you did (delete column manually, switch back to other branch and roll back) so you can create the migration as you need"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1568183186, "last_edit_date": 1568183186, "creation_date": 1568152353, "answer_id": 57878660, "question_id": 57878505, "link": "https://stackoverflow.com/questions/57878505/why-is-this-duplicate-column-error-appearing/57878660#57878660", "title": "Why is this duplicate column error appearing?", "body": "<p>You have this column in your DB, but it wasn't dumped to your <code>schema.rb</code>. Maybe a migration was stopped after it added the column, but before it wrote to <code>schema.rb</code>?</p>\n\n<p>You can remove this column manually, running <code>rails dbconsole</code> and then:</p>\n\n<pre><code>ALTER TABLE students DROP COLUMN active\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 2, "last_activity_date": 1568152574, "creation_date": 1568152574, "answer_id": 57878693, "question_id": 57878505, "link": "https://stackoverflow.com/questions/57878505/why-is-this-duplicate-column-error-appearing/57878693#57878693", "title": "Why is this duplicate column error appearing?", "body": "<p>You may have added it somehow. Have you checked the PG database? Connect to the application database and see if there is an active field.</p>\n\n<ol>\n<li><p>List databases</p>\n\n<pre><code>\\l\n</code></pre></li>\n<li><p>Connect database</p>\n\n<pre><code>\\c your_app_database_name\n</code></pre></li>\n<li><p>List table columns</p>\n\n<pre><code>\\d+ students\n</code></pre></li>\n<li><p>Check active field, remove it if exist.</p>\n\n<pre><code>ALTER TABLE students DROP COLUMN active\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1568473384, "post_id": 57887056, "comment_id": 102289222, "body": "Id it would be the case, the column would be present om schema.rb"}], "tags": [], "owner": {"reputation": 331, "user_id": 5381106, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gxh4rssXros/AAAAAAAAAAI/AAAAAAAAERQ/HcOZQ4ijEo4/photo.jpg?sz=128", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/5381106/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1568197377, "creation_date": 1568197377, "answer_id": 57887056, "question_id": 57878505, "link": "https://stackoverflow.com/questions/57878505/why-is-this-duplicate-column-error-appearing/57887056#57887056", "title": "Why is this duplicate column error appearing?", "body": "<p>You can follow the above solutions i.e. drop the column from DB first and then run the migration. Most probably what has happened is, you created and run some migration but later deleted that migration file without doing a <code>db:rollback</code>. </p>\n\n<p>One more option that you can consider is to put a conditional migration like:</p>\n\n<pre><code>class AddActiveToStudents &lt; ActiveRecord::Migration[5.0]\n  def change\n    unless column_exists? :students, :active\n      add_column :students, :active, :boolean, default: true\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 5768940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iH5Fp.jpg?s=128&g=1", "display_name": "Rhys0h", "link": "https://stackoverflow.com/users/5768940/rhys0h"}, "is_accepted": true, "score": 2, "last_activity_date": 1568280637, "last_edit_date": 1568280637, "creation_date": 1568278395, "answer_id": 57903116, "question_id": 57878505, "link": "https://stackoverflow.com/questions/57878505/why-is-this-duplicate-column-error-appearing/57903116#57903116", "title": "Why is this duplicate column error appearing?", "body": "<p>I followed the steps that @demir posted and found that, yes, the column was in the database without being listed in the schema. <code>ALTER TABLE students DROP COLUMN active</code> did not give an error message however it also didn't remove the column.</p>\n\n<p>In the end I removed it by:</p>\n\n<ol>\n<li>Entering the console </li>\n</ol>\n\n<p><code>rails console</code></p>\n\n<ol start=\"2\">\n<li>Deleting the column</li>\n</ol>\n\n<p><code>ActiveRecord::Base.connection.remove_column :students, :active</code></p>\n"}], "owner": {"reputation": 61, "user_id": 5768940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iH5Fp.jpg?s=128&g=1", "display_name": "Rhys0h", "link": "https://stackoverflow.com/users/5768940/rhys0h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 57903116, "answer_count": 4, "score": 2, "last_activity_date": 1568280637, "creation_date": 1568151320, "last_edit_date": 1568152415, "question_id": 57878505, "link": "https://stackoverflow.com/questions/57878505/why-is-this-duplicate-column-error-appearing", "title": "Why is this duplicate column error appearing?", "body": "<p>I am trying to add a new column <code>active</code> to my table <code>students</code>.</p>\n\n<p>I ran <code>rails g migration add_active_to_students active:boolean</code> to generate this migration:</p>\n\n<pre><code>class AddActiveToStudents &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :students, :active, :boolean, default: true\n  end\nend\n</code></pre>\n\n<p>But when I run <code>rails db:migrate</code> I get this error: </p>\n\n<blockquote>\n  <p>PG::DuplicateColumn: ERROR:  column \"active\" of relation \"students\" already exists\n  : ALTER TABLE \"students\" ADD \"active\" boolean DEFAULT 't'`</p>\n</blockquote>\n\n<p>As you can see there is not actually an <code>active</code> column in <code>students</code>:</p>\n\n<pre><code>create_table \"students\", force: :cascade do |t|\n    t.integer  \"club_id\"\n    t.string   \"email\"\n    t.string   \"address_line_1\"\n    t.string   \"address_line_2\"\n    t.string   \"city\"\n    t.string   \"state\"\n    t.integer  \"postcode\"\n    t.string   \"phone1\"\n    t.string   \"phone2\"\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n    t.date     \"dob\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.string   \"picture\"\n    t.integer  \"payment_plan_id\"\n    t.string   \"parent1\"\n    t.string   \"parent2\"\n    t.string   \"size\"\n    t.text     \"notes\"\n    t.index [\"club_id\"], name: \"index_students_on_club_id\", using: :btree\n  end\n</code></pre>\n\n<p>So why would I be getting this error?</p>\n"}, {"tags": ["ruby", "callback", "callstack"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 1, "creation_date": 1568152157, "post_id": 57878454, "comment_id": 102181921, "body": "do you have a basic test suite re: the above on github etc?"}, {"owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568166485, "post_id": 57878454, "comment_id": 102185352, "body": "@BKSpurgeon test suite?  I don&#39;t even have the fundamental operating mechanism worked out, what would I be testing for?  Is there a particular piece of information missing from the question?"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568177085, "post_id": 57878454, "comment_id": 102187266, "body": "the problem (for me) is that i don&#39;t understand your question, was hoping a simple test (via expectation) would help me understand it, if that was available"}, {"owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568216741, "post_id": 57878454, "comment_id": 102206780, "body": "I&#39;m not sure how to clarify the bolded core question: <b>How can I get dynamically defined method names to appear in the <code>caller_locations</code>?</b>  I&#39;ve dynamically defined a method, and invoked it by name, but within the block that the method yields the name of the dynamically defined method does not appear in the call stack returned by <code>caller_locations</code>"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568249685, "post_id": 57878454, "comment_id": 102217681, "body": "is this on the right track? <a href=\"https://gist.github.com/BKSpurgeon/626f6685071b923c6c1a1d23a7c04e47\" rel=\"nofollow noreferrer\">gist.github.com/BKSpurgeon/626f6685071b923c6c1a1d23a7c04e47</a>"}, {"owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568307991, "post_id": 57878454, "comment_id": 102242437, "body": "That looks like it&#39;s just listing all methods, not deriving them from the stack.  I suppose if nothing was ever concurrent it might be enough to take the one with the highest ID, but this has to work asynchronously so the highest ID won&#39;t always be the right one."}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568328553, "post_id": 57878454, "comment_id": 102249332, "body": "Unfortunately, I don&#39;t full understand/appreciate the actual problem that you are trying to solve: &quot;I&#39;m trying to create a way to put messages in the stack, so callbacks can look up their context by finding the nearest message in the stack&quot;....Would you be able to demo this with a hello world code sample?"}, {"owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568333921, "post_id": 57878454, "comment_id": 102250292, "body": "The problem I&#39;m trying to solve is that some callback functions don&#39;t get adequate information from their parameters.  In particular, I have some prepends on Net::HTTP to intercept network requests made by libraries we use in a Sidekiq worker that need to have some information about what we&#39;re asking the library to do that triggered this request.  If I could demo it I wouldn&#39;t be asking how to do it."}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568356114, "post_id": 57878454, "comment_id": 102254736, "body": "it&#39;s hard to conceptualize the problem without a very basic hello world of the <i>problem</i> (not the solution). if you could post that, it would be very helpful. cheers"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568356394, "post_id": 57878454, "comment_id": 102254842, "body": "for me it is a very interesting problem, i wish to have a crack at this, i&#39;ve put in some time to solve it, but am handicapped by lack of understanding for this particular problem, and also unfamiliar with this domain"}, {"owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1568557513, "post_id": 57878454, "comment_id": 102303690, "body": "This is in a big project built on tools I haven&#39;t used to start anything from scratch, so making a hello world would have a steep learning curve; my cursory search for a sidekiq hello world didn&#39;t find one, if you can link to one I can try to build on that.  The problem may be equivalent to identifying which concurrent invocation of the same sidekiq worker is running."}], "owner": {"reputation": 1469, "user_id": 776723, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ce47adef9e11712c1625b52c7ebd3f8?s=128&d=identicon&r=PG", "display_name": "ShadSterling", "link": "https://stackoverflow.com/users/776723/shadsterling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568151039, "creation_date": 1568151039, "question_id": 57878454, "link": "https://stackoverflow.com/questions/57878454/ruby-stack-trace-not-showing-defined-method-names", "title": "Ruby stack trace not showing defined method names", "body": "<p>I'm trying to create a way to put messages in the stack, so callbacks can look up their context by finding the nearest message in the stack.</p>\n\n<p>My idea for how to do that was to dynamically create method names that are recognizable and have an ID embedded in the name, so a callback can look back up the stack and find the ID.</p>\n\n<p>I've attempted to implement that using <code>define_singleton_method</code>, and it works to the extent that the defined method is invoked and runs the block it's given, but the <code>caller_locations</code> within that block do not contain the defined method name (even though it was clearly invoked).</p>\n\n<p><strong>How can I get dynamically defined method names to appear in the <code>caller_locations</code>?</strong></p>\n\n<p>Here is the draft implementation:</p>\n\n<pre><code>class StackMessage\n    @@prefix=\"stack_message\"\n    @@next_key = 10000000\n    @@values = {}\n    def self.nest value, &amp;block\n        key = next_key\n        stack_entry_label = \"#{@@prefix}_#{key}\".to_sym\n        @@values[key] = value\n        private\n        puts \"defining method #{stack_entry_label.inspect} with body #{block.inspect}\"\n        r = define_singleton_method stack_entry_label, Proc.new do\n            yield block\n        end\n        puts \"method definition returned #{r.inspect}\"\n        begin\n            send stack_entry_label\n        ensure\n            eigenclass = class&lt;&lt;StackMessage; self; end\n            eigenclass.send :remove_method, stack_entry_label\n            @@values.delete key\n        end\n    end\n    private\n    def self.next_key\n        r = @@next_key\n        @@next_key = @@next_key.succ\n        r\n    end\nend\n\nif __FILE__ == $0\n    StackMessage.nest \"test\" do\n        puts \" ---------- IT'S ALIVE\"\n        puts caller_locations.inspect\n        puts \" ----------\"\n    end\nend\n</code></pre>\n\n<p>and its output:</p>\n\n<pre><code>defining method :stack_message_10000000 with body #&lt;Proc:0x00007fac62873c30@test.rb:32&gt;\nmethod definition returned :stack_message_10000000\n ---------- IT'S ALIVE\n[\"test.rb:16:in `nest'\", \"test.rb:32:in `&lt;main&gt;'\"]\n ----------\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1568149572, "post_id": 57878148, "comment_id": 102181159, "body": "So, what exactly is <code>GroupOfPeople</code>?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1568149695, "post_id": 57878148, "comment_id": 102181190, "body": "@red_menace I wish I knew. It&#39;s some altered extension of another thing, ActiveRecord I beleive, heavily modified."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568149845, "post_id": 57878148, "comment_id": 102181235, "body": "I think it would be helpful if you would provide (a) some sample data for <code>GroupOfPeople</code> and (b) your desired output. As it is, even if you get around the problem you describe, you will overwriting <code>A_proper_hash</code> in each iteration."}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568150050, "post_id": 57878148, "comment_id": 102181276, "body": "@Jvillian In my file, I&#39;m outputting to list. I forgot to include that."}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568150360, "post_id": 57878148, "comment_id": 102181379, "body": "@jvillian Added an example"}], "answers": [{"comments": [{"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568152135, "post_id": 57878411, "comment_id": 102181910, "body": "Shows promise, but it breaks at new_person[attr_sym] = person.try(attr_sym) saying &quot;NameError&quot;?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568152377, "post_id": 57878411, "comment_id": 102181981, "body": "NameError: undefined local variable or method `new_person&#39;"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 1, "creation_date": 1568152412, "post_id": 57878411, "comment_id": 102181992, "body": "Did you do <code>new_person = {}</code>? Do you have any typos?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568152437, "post_id": 57878411, "comment_id": 102182000, "body": "Ah, I missed that line. My bad. Thanks!"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 0, "creation_date": 1568152480, "post_id": 57878411, "comment_id": 102182012, "body": "So I&#39;m still fairly new at Ruby, what <i>is</i> %i( variables)  if you don&#39;t mind me asking?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "edited": false, "score": 1, "creation_date": 1568152779, "post_id": 57878411, "comment_id": 102182082, "body": "<code>%i()</code> turns whatever is inside of <code>()</code> into an array of symbols. So, <code>%i(foo bar)</code> yields <code>[:foo, :bar]</code>. You could just as easily use the array <code>[:foo, :bar]</code>. I just got in the habit of using <code>%i()</code>. BTW, <code>%w()</code> yields an array of strings. So, <code>%w(foo bar)</code> yields <code>[&quot;foo&quot;, &quot;bar&quot;]</code>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1568155093, "last_edit_date": 1568155093, "creation_date": 1568150799, "answer_id": 57878411, "question_id": 57878148, "link": "https://stackoverflow.com/questions/57878148/unknown-nested-variable-unable-to-determine-existence-of-nested-sub-things/57878411#57878411", "title": "Unknown nested variable unable to determine existence of nested sub.... things, always NoMethodError", "body": "<p>Quite a number of things amiss here...</p>\n\n<p><code>GroupOfPeople</code> is a non-conventional variable name in ruby. As is <code>Person</code>, <code>A_proper_hash</code> and <code>A_proper_list</code>. Check out <a href=\"https://github.com/rubocop-hq/ruby-style-guide\" rel=\"nofollow noreferrer\">the style guide</a> for more information. You should use variables like <code>group_of_people</code>, <code>person</code>, <code>a_proper_hash</code> and <code>a_proper_list</code>.</p>\n\n<p>You have a typo in a number of places where you use <code>A__proper_hash</code> instead of <code>A_proper_hash</code>.</p>\n\n<p><code>GroupOfPeople.persons do</code> should be something like: </p>\n\n<pre><code>group_of_people.persons.each do |person|\nend\n</code></pre>\n\n<p>...so you don't have to do that <code>Person = GroupOfPeople.persons</code> assignment. </p>\n\n<p>Use <code>do..end</code> instead of curly braces (<code>{}</code>) for multi-line blocks as stated in <a href=\"https://github.com/rubocop-hq/ruby-style-guide#single-line-blocks\" rel=\"nofollow noreferrer\">Single-line Blocks</a> in the style guide.</p>\n\n<p>If you want to return an <code>array</code>, you can do:</p>\n\n<pre><code>group_of_people.persons.map do |person|\nend    \n</code></pre>\n\n<p>And then you can do something like: </p>\n\n<pre><code>group_of_people.persons.map do |person|\n  %i(\n    id\n    middle_name\n    pet_name\n  ).each_with_object({}) do |attr_sym, new_person|\n    new_person[attr_sym] = person.try(attr_sym)\n  end\nend    \n</code></pre>\n\n<p>...which will give you:</p>\n\n<pre><code>[\n  {:id=&gt;1, :middle_name=&gt;\"Foo\", :pet_name=&gt;\"Fluffy\"}, \n  {:id=&gt;2, :middle_name=&gt;\"Bar\", :pet_name=&gt;nil}, \n  {:id=&gt;3, :middle_name=&gt;nil, :pet_name=&gt;\"Bunny\"}\n]\n</code></pre>\n\n<p>If you don't want those nil values, then: </p>\n\n<pre><code>group_of_people.persons.map do |person|\n  %i(\n    id\n    middle_name\n    pet_name\n  ).each_with_object({}) do |attr_sym, new_person|\n    new_person[attr_sym] = person.try(attr_sym) if person.try(attr_sym)\n  end\nend    \n</code></pre>\n\n<p>...which will give you:</p>\n\n<pre><code>[\n  {:id=&gt;1, :middle_name=&gt;\"Foo\", :pet_name=&gt;\"Fluffy\"}, \n  {:id=&gt;2, :middle_name=&gt;\"Bar\"}, \n  {:id=&gt;3, :pet_name=&gt;\"Bunny\"}\n]\n</code></pre>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 57878411, "answer_count": 1, "score": 0, "last_activity_date": 1568212181, "creation_date": 1568149226, "last_edit_date": 1568212181, "question_id": 57878148, "link": "https://stackoverflow.com/questions/57878148/unknown-nested-variable-unable-to-determine-existence-of-nested-sub-things", "title": "Unknown nested variable unable to determine existence of nested sub.... things, always NoMethodError", "body": "<p>Okay, so I have the following variable in Ruby:</p>\n\n<pre><code>GroupOfPeople\n</code></pre>\n\n<p>I am NOT able to do...</p>\n\n<pre><code>GroupOfPeople.persons |do|\n</code></pre>\n\n<p>It returns a NoMethodError. </p>\n\n<p>However, I CAN do a </p>\n\n<pre><code> Persons = GroupOfPeople.persons\n Persons.each {|n|\n # Do things\n }\n</code></pre>\n\n<p>However, each person, whatever their unknown variable type may be, may (or may not) have traits. For example, with all of them I can call...</p>\n\n<pre><code> A_proper_hash = {}\n A_proper_list = []\n Persons = GroupOfPeople.persons\n Persons.each {|n|\n   p n.id\n   A_proper_hash[:id] = n.id\n   A_proper_list &lt;&lt; A_proper_hash\n }\n</code></pre>\n\n<p>And this works fine. And if there's a chance some of the persons have a nil value, I can do...</p>\n\n<pre><code> A_proper_hash = {}\n A_proper_list = []\n Persons = GroupOfPeople.persons\n Persons.each {|n|\n   n.middle_name.nil? ? A__proper_hash[:middle_name] = nil : A__proper_hash[:middle_name] = n.middle_name\n   A_proper_list &lt;&lt; A_proper_hash\n }\n</code></pre>\n\n<p>However, some of the persons won't even have the variable, let alone assigned as nil. And that crashes the program. I have tried multiple ways to get around it.</p>\n\n<pre><code> A_proper_hash = {}\n A_proper_list = []\n Persons = GroupOfPeople.persons\n Persons.each {|n|\n   if n.key(:pet_name)\n     n.pet_name.nil? ? A__proper_hash[:pet_name] = nil : A__proper_hash[:pet_name] = n.pet_name\n   end\n   A_proper_list &lt;&lt; A_proper_hash\n }\n</code></pre>\n\n<p>The Above returns \"NoMethodError\"</p>\n\n<p>This also returns \"NoMethodError\"....</p>\n\n<pre><code> A_proper_hash = {}\n A_proper_list = []\n Persons = GroupOfPeople.persons\n Persons.each {|n|\n   @n.respond_to?(:pet_name).should n.pet_name.nil? ? A__proper_hash[:pet_name] = nil : A__proper_hash[:pet_name] = n.pet_name\n   A_proper_list &lt;&lt; A_proper_hash\n }\n</code></pre>\n\n<p>And this also returns NoMethodError...</p>\n\n<pre><code> A_proper_hash = {}\n A_proper_list = []\n Persons = GroupOfPeople.persons\n Persons.each {|n|\n   if(respond_to? n.pet_name)\n     n.pet_name.nil? ? A__proper_hash[:pet_name] = nil : A__proper_hash[:pet_name] = n.pet_name\n   end\n   A_proper_list &lt;&lt; A_proper_hash\n }\n</code></pre>\n\n<p>I have no clue how to check this variable without crashing when all the checks I know crash it if it's not there?</p>\n\n<p>Edit: An example of an \"p n.inspect\" is here: </p>\n\n<pre><code>#&lt;User id: 55, middle_name: \\\"duke\\\"&gt;\"\n</code></pre>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1568215536, "post_id": 57877781, "comment_id": 102206093, "body": "This isn&#39;t a duplicate - The OPs issue can&#39;t actually be solved by doing anything linked in the issue provided as the duplicate"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "edited": false, "score": 0, "creation_date": 1568185331, "post_id": 57878607, "comment_id": 102190012, "body": "Thanks Thomas.  The second approach is something similar to what I am after as the product needs to have both selectors to match in order to be the right assertion. The text regex won&#39;t work in my case as the each product on the page is a form element and price is an editable field where the text is the [value] attr. So I am looking for something like <code>expect(products).to have_css(&#39;product&#39;, text: {product}).and have_field(&#39;input&#39;, with: price)</code> - The issue is that both checks need to happen on the same element. BUT your answer is correct if it was to be done on text."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "edited": false, "score": 0, "creation_date": 1568215932, "post_id": 57878607, "comment_id": 102206324, "body": "@Rahul Updated to provide a solution using the optional filter block.  Given the exact HTML there may be more performant ways, but assuming you don&#39;t have 100s of product elements in the products the filter block should be fine."}, {"owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "edited": false, "score": 0, "creation_date": 1568268797, "post_id": 57878607, "comment_id": 102221917, "body": "Thanks Thomas. I have reworked my solution now another way but this is still interesting to know. The block will yield a boolean though right? Can have_field be used instead?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "edited": false, "score": 0, "creation_date": 1568309862, "post_id": 57878607, "comment_id": 102243199, "body": "@Rahul The block is used by the matcher (in this case <code>have_css</code> to filter the nodes that the matcher matched (in this case all <code>product</code> nodes containing the name text).  For the filtering to work the block needs to return a boolean (think of it as like Array#filter)"}, {"owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "edited": false, "score": 0, "creation_date": 1568375518, "post_id": 57878607, "comment_id": 102263909, "body": "Thanks Thomas. I get what you mean now. so <code>have_css(&#39;product&#39;, text: name)</code> will only match products for which the block yields true. Interesting! Never knew matchers could be used this way! Thanks again."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1568215797, "last_edit_date": 1568215797, "creation_date": 1568151977, "answer_id": 57878607, "question_id": 57877781, "link": "https://stackoverflow.com/questions/57877781/how-to-use-capybara-matchers-when-multiple-checks-are-involved/57878607#57878607", "title": "How to use Capybara Matchers when multiple checks are involved?", "body": "<p>Simplest solution assuming you have already found the &lt;products> element and don't need it to be the same product would be </p>\n\n<pre><code>expect(products).to have_css('product', text: name).and(have_css('product', text: price))\n</code></pre>\n\n<p>if it needs to be both texts in the same product element then use a regex</p>\n\n<pre><code>expect(products).to have_css('product', text: /#{product}.*#{price}/)\n</code></pre>\n\n<p>More advanced would be creating custom selector types for dealing with the types of objects in your UI.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>With the clarification of the original issue provided, the best solution is probably to use an optional filter block</p>\n\n<pre><code>expect(products).to have_css('product', text: name) { |node|\n  node.has_field?(with: price)\n}\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 1, "closed_date": 1568158514, "accepted_answer_id": 57878607, "answer_count": 1, "score": 0, "last_activity_date": 1568215797, "creation_date": 1568147164, "question_id": 57877781, "link": "https://stackoverflow.com/questions/57877781/how-to-use-capybara-matchers-when-multiple-checks-are-involved", "closed_reason": "Duplicate", "title": "How to use Capybara Matchers when multiple checks are involved?", "body": "<p>It's easy to use Capybara Matcher on an element with single check like\n<code>expect(element).to have_selector('#selector')</code>||\nBUT\nHow do I achieve the same when asserting on an element that is part of a list and multiple checks need to be done to assert. \nI want to do something like:</p>\n\n<pre><code>&lt;products&gt;\n  &lt;product&gt;\n  &lt;product&gt;\n  &lt;product&gt;\n&lt;/products&gt;\n\ndef have_product(name,price)\n products.any? {|product| product.have_text(name) &amp;&amp; product.have_text(price)} # pseudo code\nend\n</code></pre>\n\n<p>I want to be able to check whether a product with given name and price(both need to match) exists in the list.</p>\n"}, {"tags": ["ruby", "openssl", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1568134152, "post_id": 57874647, "comment_id": 102175245, "body": "This is an issue of the le gem which causes this deprecation earning. There is a pull request on their Github repo which might fix this. See <a href=\"https://github.com/rapid7/le_ruby/pull/72\" rel=\"nofollow noreferrer\">github.com/rapid7/le_ruby/pull/72</a>"}, {"owner": {"reputation": 12299, "user_id": 1112656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/urv8X.jpg?s=128&g=1", "display_name": "ipegasus", "link": "https://stackoverflow.com/users/1112656/ipegasus"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1568136155, "post_id": 57874647, "comment_id": 102176026, "body": "Thank you! I opted for removing the &#39;le&#39; gem and the issue has been fixed. Best"}], "owner": {"reputation": 12299, "user_id": 1112656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/urv8X.jpg?s=128&g=1", "display_name": "ipegasus", "link": "https://stackoverflow.com/users/1112656/ipegasus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568132007, "creation_date": 1568132007, "question_id": 57874647, "link": "https://stackoverflow.com/questions/57874647/opensslsslsslcontextmethods", "title": "OpenSSL::SSL::SSLContext::METHODS", "body": "<p>Recently I upgraded ruby and I would like to know how to solve the following warning on my rails 6 app?</p>\n\n<pre><code>gems/ruby-2.6.1/gems/le-2.7.6/lib/le/host/http.rb:203: warning: constant OpenSSL::SSL::SSLContext::METHODS is deprecated\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen", "inspec"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1568130873, "post_id": 57873959, "comment_id": 102173598, "body": "I am not familiar with InSpec at all, but it seems obvious that you have to look at its documentation and see how you can get access to the standard output of the command."}], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 4709762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6dc02128bfdf4272ec606f489c2bef?s=128&d=identicon&r=PG", "display_name": "Peter Vandivier", "link": "https://stackoverflow.com/users/4709762/peter-vandivier"}, "is_accepted": true, "score": 0, "last_activity_date": 1568148849, "last_edit_date": 1568148849, "creation_date": 1568135187, "answer_id": 57875429, "question_id": 57873959, "link": "https://stackoverflow.com/questions/57873959/coerce-commandstdout-to-integer-for-math-comparison/57875429#57875429", "title": "Coerce command(&#39;stdout&#39;) to integer for math comparison", "body": "<p>Credit to <a href=\"https://chefcommunity.slack.com/archives/C1XB6U6MN/p1568129617142800\" rel=\"nofollow noreferrer\"><code>@bodumin</code></a> in the <a href=\"https://app.slack.com/client/T0M1PBN4E/C1XB6U6MN\" rel=\"nofollow noreferrer\">chef community slack #InSpec channel</a></p>\n\n<blockquote>\n  <p>Fuzzy typing with <code>cmp</code> matching</p>\n</blockquote>\n\n<p>The simplest solution is to use the <code>cmp</code> matcher instead of the <code>be</code> matcher. While there are no explicit math operators given by example on [the official docs for <code>cmp</code>], math operations within a <code>cmp</code> match will evaluate properly</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>describe command('/tmp/foo') do \n  its('stdout') { should cmp &gt;= 0 }\n  its('stdout') { should cmp &lt; 120 }\nend\n</code></pre>\n\n<p>Per <a href=\"https://chefcommunity.slack.com/archives/C1XB6U6MN/p1568130398147200\" rel=\"nofollow noreferrer\"><code>@aaronlippold</code></a></p>\n\n<blockquote>\n  <p><code>cmp</code> is a logical compare that we do in the backend \u2026 aka 1 is true is TRUE is True. So in SSHD config as an example \u2026 you can set a prop using 1 or true or TRUE or True etc. Its a more forgiving matcher that we have built as much as a convince function etc.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 4709762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6dc02128bfdf4272ec606f489c2bef?s=128&d=identicon&r=PG", "display_name": "Peter Vandivier", "link": "https://stackoverflow.com/users/4709762/peter-vandivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1568189564, "last_edit_date": 1568189564, "creation_date": 1568136110, "answer_id": 57875615, "question_id": 57873959, "link": "https://stackoverflow.com/questions/57873959/coerce-commandstdout-to-integer-for-math-comparison/57875615#57875615", "title": "Coerce command(&#39;stdout&#39;) to integer for math comparison", "body": "<p>Credit to <code>@cwolfe</code> in the <a href=\"https://chefcommunity.slack.com/archives/C1XB6U6MN/p1568132773163200\" rel=\"nofollow noreferrer\">chef community slack #InSpec channel</a></p>\n\n<blockquote>\n  <p>Exact typing with <code>be</code> matching and method chaining</p>\n</blockquote>\n\n<p>Another approach is to try method chaining within the <code>stdout</code> literal like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>describe command(\"bash /tmp/foo\") do \n  its('stdout.strip.to_i') { should be &gt;= 5 }\nend\n</code></pre>\n\n<p>InSpec uses the <a href=\"https://relishapp.com/palfvin/rspec-its/docs/attribute-of-subject#specify-value-of-a-nested-attribute\" rel=\"nofollow noreferrer\">rspec-its library</a>, which interprets dots as method calls.</p>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 4709762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6dc02128bfdf4272ec606f489c2bef?s=128&d=identicon&r=PG", "display_name": "Peter Vandivier", "link": "https://stackoverflow.com/users/4709762/peter-vandivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1568189586, "last_edit_date": 1568189586, "creation_date": 1568146987, "answer_id": 57877749, "question_id": 57873959, "link": "https://stackoverflow.com/questions/57873959/coerce-commandstdout-to-integer-for-math-comparison/57877749#57877749", "title": "Coerce command(&#39;stdout&#39;) to integer for math comparison", "body": "<p>Credit to <code>@aaronlippold</code> the <a href=\"https://app.slack.com/client/T0M1PBN4E/C1XB6U6MN\" rel=\"nofollow noreferrer\">chef community slack #InSpec channel</a></p>\n\n<blockquote>\n  <p>Exact typing with <code>be</code> match &amp; explicit subject syntax</p>\n</blockquote>\n\n<p>The <code>stdout</code> of the InSpec <code>command</code> can be cached outside of the <code>describe</code> block and modified arbitrarily. Here we ask InSpec to run the script, grab its <code>stdout</code> and strip the line (<code>\\n</code>), then look at the result and ensure it is between the expected values using the <code>be</code> matcher syntax for strict type comparison. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>x = inspec.command(\"bash /tmp/foo\").stdout.strip.to_i\n\ndescribe x do \n  its { should be &gt;= 5 }\n  its { should be &lt; 10 }\nend\n</code></pre>\n\n<p>Alternately, you can use the <a href=\"https://relishapp.com/rspec/rspec-core/docs/subject/explicit-subject\" rel=\"nofollow noreferrer\">rspec explicit subject syntax</a> to pull the return value out to make it more clear in the code.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>describe \"The value of my EPOC is between the required values\" do\n  subject { command(\"bash /tmp/foo\").stdout.strip.to_i }\n  it { should be &gt;= 5 }\n  it { should be &lt; 10 }\nend\n</code></pre>\n\n<p>This also allows you to better report to the \u201cwhat\u201d vs the \u201chow\u201d as well.</p>\n\n<p>Another syntax option for this approach uses <code>puts()</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>cmd = command(\"bash /tmp/foo\")\nputs(cmd.inspect)\ndescribe cmd do \n  its('stdout') { expect(cmd.strip.to_i).to be &gt;= 5 }\nend\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 4709762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6dc02128bfdf4272ec606f489c2bef?s=128&d=identicon&r=PG", "display_name": "Peter Vandivier", "link": "https://stackoverflow.com/users/4709762/peter-vandivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 57875429, "answer_count": 3, "score": 0, "last_activity_date": 1568189586, "creation_date": 1568129331, "last_edit_date": 1568136426, "question_id": 57873959, "link": "https://stackoverflow.com/questions/57873959/coerce-commandstdout-to-integer-for-math-comparison", "title": "Coerce command(&#39;stdout&#39;) to integer for math comparison", "body": "<p>Given a checker script deployed to my server at path <code>/tmp/foo</code> with the following content...</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\na=`cat /tmp/a`\nb=`cat /tmp/b`\necho -n $( expr $a - $b )\n</code></pre>\n\n<p>...I have an InSpec test to evaluate if the difference between a and b are within an acceptable range.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>describe command('/tmp/foo') do \n  its('stdout') { should be &gt;= 0 }\n  its('stdout') { should be &lt; 120 }\nend\n</code></pre>\n\n<p>Sadly, the <code>be</code> <a href=\"https://www.inspec.io/docs/reference/matchers/\" rel=\"nofollow noreferrer\">matcher</a> won't coerce the input to a type that can be used with the math operators. </p>\n\n<blockquote>\n  <p>How can I coerce this value to an integer?</p>\n</blockquote>\n\n<hr>\n\n<p>So far I've tried</p>\n\n<ul>\n<li><code>('stdout').to_i</code></li>\n</ul>\n\n<pre><code>undefined method `to_i' for #&lt;Class:0x00007f8a86b91f00&gt; (NoMethodError) Did you mean?  to_s\n</code></pre>\n\n<ul>\n<li><code>('stdout').to_s</code> and <code>('stdout').to_s.to_i</code></li>\n</ul>\n\n<pre><code>   Command: `/tmp/foo`\n     \u21ba  \n     \u21ba  \n\nTest Summary: 0 successful, 0 failures, 2 skipped\n</code></pre>\n\n<ul>\n<li><code>(('stdout').to_i)</code></li>\n</ul>\n\n<pre><code>undefined method `0' for Command: `/tmp/foo`:#&lt;Class:0x00007f9a52b912e0&gt;\n</code></pre>\n\n<p>For background, <code>/tmp/a</code> and <code>/tmp/b</code> are a pair of epoch outputs from a previous InSpec test. </p>\n\n<p>I could check client side if the values are within the acceptable range, but if possible I would like to have this variance checked &amp; reported by the InSpec evaluation without regex wizardry in place of human-readable math expression.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1568139184, "post_id": 57873408, "comment_id": 102177211, "body": "This sounds like something Turbolinks would interfere with. Are you using Turbolinks?"}, {"owner": {"reputation": 63, "user_id": 11969530, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Kx3JSCfqDI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqIkKVY6QAVC8hy_9W18rqmcs_7A/photo.jpg?sz=128", "display_name": "Daniele Deltodesco", "link": "https://stackoverflow.com/users/11969530/daniele-deltodesco"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1568179316, "post_id": 57873408, "comment_id": 102187856, "body": "@JoshBrody Yes you are right. I just found a solution after much frustration... I had to add data: { turbolinks: false } to every link on the page. I even have to add it to this: &lt;%= link_to &#39;Home&#39;, root_path %&gt;  ... What is the reason for this and is there a better way to fix the issue?"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 11969530, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Kx3JSCfqDI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqIkKVY6QAVC8hy_9W18rqmcs_7A/photo.jpg?sz=128", "display_name": "Daniele Deltodesco", "link": "https://stackoverflow.com/users/11969530/daniele-deltodesco"}, "is_accepted": false, "score": 0, "last_activity_date": 1568179644, "creation_date": 1568179644, "answer_id": 57882625, "question_id": 57873408, "link": "https://stackoverflow.com/questions/57873408/anchor-links-are-generating-almost-empty-page/57882625#57882625", "title": "Anchor links are generating (almost) empty page", "body": "<p>Turbolinks was causing the issue, which I obviously need to read up on. </p>\n\n<p>Updated my link_to's like so:</p>\n\n<pre><code>&lt;%= link_to \"Eat\", root_path(anchor: \"menus\"), data: { turbolinks: false }, class: 'nav-link' %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 466413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe76522764bc5f3c78e3fd2e49df7922?s=128&d=identicon&r=PG", "display_name": "JHos", "link": "https://stackoverflow.com/users/466413/jhos"}, "is_accepted": false, "score": 0, "last_activity_date": 1587281549, "creation_date": 1587281549, "answer_id": 61300982, "question_id": 57873408, "link": "https://stackoverflow.com/questions/57873408/anchor-links-are-generating-almost-empty-page/61300982#61300982", "title": "Anchor links are generating (almost) empty page", "body": "<p>I was tearing my hair out with this problem too; any page I navigated to using Turbolinks just rendered \"2020\" (i.e. the current year) in plan text with nothing else on the page.</p>\n\n<p>It turns out that the bootstrap template I'd used in my project included this in the footer HTML:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;footer&gt;\n  ...\n  Copyright &amp;copy;&lt;script&gt;document.write(new Date().getFullYear());&lt;/script&gt;\n  ...\n&lt;/footer&gt;\n</code></pre>\n\n<p>... of course the issue was:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>document.write(new Date().getFullYear());\n</code></pre>\n\n<p>... so I just changed it to:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;footer&gt;\n  ...\n  Copyright &amp;copy;&lt;%= Date.current.year %&gt;\n  ...\n&lt;/footer&gt;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11969530, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Kx3JSCfqDI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqIkKVY6QAVC8hy_9W18rqmcs_7A/photo.jpg?sz=128", "display_name": "Daniele Deltodesco", "link": "https://stackoverflow.com/users/11969530/daniele-deltodesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1587281549, "creation_date": 1568127211, "question_id": 57873408, "link": "https://stackoverflow.com/questions/57873408/anchor-links-are-generating-almost-empty-page", "title": "Anchor links are generating (almost) empty page", "body": "<p>I have a one page design and so I want my Nav-bar items to link to the relevant sections of the page. If I type the links that output to the browser manually they work fine, but when clicking on the links they generate an empty page (except for a javascript script that is in the footer.</p>\n\n<p>Tried using different rails helpers and also tried using plain old HTML. Same problem happens when I click the links</p>\n\n<p>This is the link in: /layouts/_navbar.html.erb</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;li class=\"nav-item\"&gt;&lt;%= link_to \"Menus\", root_path(anchor: \"menus\"), class: 'nav-link' %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>This is the target in /pages/home.html.erb</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;section class=\"site-section\" id=\"menus\"&gt;\n</code></pre>\n\n<p>Expected result is for address to show : 'localhost:3000/#menus'\nand for the page to move to menus section\nActual result is the same address but the page is blank apart from text : '2019' (generated from a javscript in the footer)</p>\n\n<p>If I manually type 'localhost:3000/#menus' it works fine!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-ec2", "sidekiq", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 620, "user_id": 431488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/drCzD.png?s=128&g=1", "display_name": "mani_007", "link": "https://stackoverflow.com/users/431488/mani-007"}, "edited": false, "score": 1, "creation_date": 1589924380, "post_id": 57872843, "comment_id": 109485672, "body": "I have the same issue, have you found any solution for this?"}], "answers": [{"tags": [], "owner": {"reputation": 7059, "user_id": 298829, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/45afc5b02255db47aecea5504be609cf?s=128&d=identicon&r=PG", "display_name": "vinhboy", "link": "https://stackoverflow.com/users/298829/vinhboy"}, "is_accepted": false, "score": 2, "last_activity_date": 1600500386, "creation_date": 1600500386, "answer_id": 63966346, "question_id": 57872843, "link": "https://stackoverflow.com/questions/57872843/sidekiq-log-level-not-being-set-in-production/63966346#63966346", "title": "Sidekiq Log Level not being set in production", "body": "<p>I had a similar, but opposite problem. My production log level was set to <code>WARN</code>, my Sidekiq log level was set to <code>INFO</code>, but I kept getting only <code>WARN</code> logs in production.</p>\n<p>I finally figured out you must manually override the other loggers with <code>Sidekiq.Logging</code></p>\n<pre><code>\n    Sidekiq.configure_server do |config|\n       config.logger.level = Logger::WARN\n\n       Rails.logger = Sidekiq::Logging.logger\n       ActiveRecord::Base.logger = Sidekiq::Logging.logger\n       ActiveJob::Base.logger = Sidekiq::Logging.logger\n    end \n\n</code></pre>\n<p>Credit to: <a href=\"https://github.com/mperham/sidekiq/issues/3651\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/issues/3651</a></p>\n"}], "owner": {"reputation": 1097, "user_id": 1079996, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ece21938a6c072dd7d6d539564ceb8df?s=128&d=identicon&r=PG", "display_name": "Andrew Lynch", "link": "https://stackoverflow.com/users/1079996/andrew-lynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1600500386, "creation_date": 1568125289, "last_edit_date": 1568200265, "question_id": 57872843, "link": "https://stackoverflow.com/questions/57872843/sidekiq-log-level-not-being-set-in-production", "title": "Sidekiq Log Level not being set in production", "body": "<p>I'm running Sidekiq with Rails 5.2.3 on AWS Elastic Beanstalk. Following the instructions in the <a href=\"https://github.com/mperham/sidekiq/wiki/Logging#default-logger-and-verboseness\" rel=\"noreferrer\">Sidekiq wiki</a> in <code>initializers/sidekiq.rb</code> I've set:</p>\n\n<pre><code>Sidekiq.configure_server do |config|\n   config.logger.level = Logger::WARN\nend \n</code></pre>\n\n<p>This works in the development environment however in production Sidekiq is still generating logs at the debug level. The Rails production logger level is set to <code>config.log_level = :warn</code></p>\n"}, {"tags": ["ruby", "eigenclass"], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "edited": false, "score": 0, "creation_date": 1568128309, "post_id": 57873648, "comment_id": 102172270, "body": "Yes, <code>Object</code> includes the <code>Kernel</code> module, but <code>puts</code> et al. are not methods on <code>Kernel</code> -- they are methods on <code>Kernel</code>&#39;s singleton class, and thus should not be accessible to <code>Object</code>"}, {"owner": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "edited": false, "score": 0, "creation_date": 1568128438, "post_id": 57873648, "comment_id": 102172331, "body": "Try this: <code>module M; def self.m; end end</code> <code>Object.include M</code> <code>Object.included_modules # =&gt; [M, Kernel]</code> <code>Object.m # NoMethodError (undefined method &#39;m&#39; for Object:Class)</code>"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "edited": false, "score": 1, "creation_date": 1568129716, "post_id": 57873648, "comment_id": 102173013, "body": "I think <code>Kernel</code> works like this: <code>module M;  private;  def m;  end; end; Object.include M</code>"}, {"owner": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "edited": false, "score": 0, "creation_date": 1568130165, "post_id": 57873648, "comment_id": 102173240, "body": "aha.... it turns out that <code>#instance_methods</code> does not include private methods. I didn&#39;t realize that. <code>Kernel.private_instance_methods</code> does indeed include <code>#puts</code> and others. If you update your answer to explain that, I&#39;ll accept it. Thanks!"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 3, "last_activity_date": 1568130911, "last_edit_date": 1568130911, "creation_date": 1568128103, "answer_id": 57873648, "question_id": 57872724, "link": "https://stackoverflow.com/questions/57872724/why-am-i-able-to-use-kernel-singleton-methods-like-puts/57873648#57873648", "title": "Why am I able to use Kernel singleton methods like `puts`?", "body": "<p>\"How does the method lookup find these methods at all if # doesn't show up in the ancestor chain?\"</p>\n\n<pre><code> 1.class.included_modules #  =&gt; [Comparable, Kernel] \n</code></pre>\n\n<p>Quoting OP:</p>\n\n<p><code>Kernel.instance_methods.grep(/puts/)\n # []</code></p>\n\n<p>As you have found yourself, private instance methods don't show up, they do with <code>Kernel.private_instance_methods</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1568133969, "creation_date": 1568133969, "answer_id": 57875148, "question_id": 57872724, "link": "https://stackoverflow.com/questions/57872724/why-am-i-able-to-use-kernel-singleton-methods-like-puts/57875148#57875148", "title": "Why am I able to use Kernel singleton methods like `puts`?", "body": "<p>You are looking in the wrong place.</p>\n\n<p>Methods like <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Array\" rel=\"noreferrer\"><code>Kernel#Array</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Complex\" rel=\"noreferrer\"><code>Kernel#Complex</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Float\" rel=\"noreferrer\"><code>Kernel#Float</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Hash\" rel=\"noreferrer\"><code>Kernel#Hash</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Integer\" rel=\"noreferrer\"><code>Kernel#Integer</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Rational\" rel=\"noreferrer\"><code>Kernel#Rational</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-String\" rel=\"noreferrer\"><code>Kernel#String</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-__callee__\" rel=\"noreferrer\"><code>Kernel#__callee__</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-__dir__\" rel=\"noreferrer\"><code>Kernel#__dir__</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-__method__\" rel=\"noreferrer\"><code>Kernel#__method__</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-60\" rel=\"noreferrer\"><code>Kernel#`</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-abort\" rel=\"noreferrer\"><code>Kernel#abort</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-at_exit\" rel=\"noreferrer\"><code>Kernel#at_exit</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-autoload\" rel=\"noreferrer\"><code>Kernel#autoload</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-autoload-3F\" rel=\"noreferrer\"><code>Kernel#autoload?</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-binding\" rel=\"noreferrer\"><code>Kernel#binding</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-block_given-3F\" rel=\"noreferrer\"><code>Kernel#block_given?</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-callcc\" rel=\"noreferrer\"><code>Kernel#callcc</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-caller\" rel=\"noreferrer\"><code>Kernel#caller</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-caller_locations\" rel=\"noreferrer\"><code>Kernel#caller_locations</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-catch\" rel=\"noreferrer\"><code>Kernel#catch</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-eval\" rel=\"noreferrer\"><code>Kernel#eval</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-exec\" rel=\"noreferrer\"><code>Kernel#exec</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-exit\" rel=\"noreferrer\"><code>Kernel#exit</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-exit-21\" rel=\"noreferrer\"><code>Kernel#exit!</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-fail\" rel=\"noreferrer\"><code>Kernel#fail</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-fork\" rel=\"noreferrer\"><code>Kernel#fork</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-format\" rel=\"noreferrer\"><code>Kernel#format</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-gets\" rel=\"noreferrer\"><code>Kernel#gets</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-global_variables\" rel=\"noreferrer\"><code>Kernel#global_variables</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-initialize_clone\" rel=\"noreferrer\"><code>Kernel#initialize_clone</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-initialize_copy\" rel=\"noreferrer\"><code>Kernel#initialize_copy</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-initialize_dup\" rel=\"noreferrer\"><code>Kernel#initialize_dup</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-iterator-3F\" rel=\"noreferrer\"><code>Kernel#iterator?</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-lambda\" rel=\"noreferrer\"><code>Kernel#lambda</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-load\" rel=\"noreferrer\"><code>Kernel#load</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-local_variables\" rel=\"noreferrer\"><code>Kernel#local_variables</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-loop\" rel=\"noreferrer\"><code>Kernel#loop</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-open\" rel=\"noreferrer\"><code>Kernel#open</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-p\" rel=\"noreferrer\"><code>Kernel#p</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-pp\" rel=\"noreferrer\"><code>Kernel#pp</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-print\" rel=\"noreferrer\"><code>Kernel#print</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-printf\" rel=\"noreferrer\"><code>Kernel#printf</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-proc\" rel=\"noreferrer\"><code>Kernel#proc</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-putc\" rel=\"noreferrer\"><code>Kernel#putc</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-puts\" rel=\"noreferrer\"><code>Kernel#puts</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-raise\" rel=\"noreferrer\"><code>Kernel#raise</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-rand\" rel=\"noreferrer\"><code>Kernel#rand</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-readline\" rel=\"noreferrer\"><code>Kernel#readline</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-readlines\" rel=\"noreferrer\"><code>Kernel#readlines</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-require\" rel=\"noreferrer\"><code>Kernel#require</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-require_relative\" rel=\"noreferrer\"><code>Kernel#require_relative</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-select\" rel=\"noreferrer\"><code>Kernel#select</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-set_trace_func\" rel=\"noreferrer\"><code>Kernel#set_trace_func</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-sleep\" rel=\"noreferrer\"><code>Kernel#sleep</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-spawn\" rel=\"noreferrer\"><code>Kernel#spawn</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-sprintf\" rel=\"noreferrer\"><code>Kernel#sprintf</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-srand\" rel=\"noreferrer\"><code>Kernel#srand</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-syscall\" rel=\"noreferrer\"><code>Kernel#syscall</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-system\" rel=\"noreferrer\"><code>Kernel#system</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-test\" rel=\"noreferrer\"><code>Kernel#test</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-throw\" rel=\"noreferrer\"><code>Kernel#throw</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-trace_var\" rel=\"noreferrer\"><code>Kernel#trace_var</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-trap\" rel=\"noreferrer\"><code>Kernel#trap</code></a>, <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-untrace_var\" rel=\"noreferrer\"><code>Kernel#untrace_var</code></a>, and <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-warn\" rel=\"noreferrer\"><code>Kernel#warn</code></a> don't do anything useful with their receiver. They don't call private methods, they don't access instance variables, they in fact <em>completely ignore</em> what <code>self</code> is.</p>\n\n<p>Therefore, it would be misleading if you call them like this:</p>\n\n<pre><code>foo.puts 'Hello, World!'\n</code></pre>\n\n<p>Because a reader would be mislead into thinking that <code>puts</code> does something with <code>foo</code>, when in fact, it completely ignores it. (This applies <em>especially</em> to the printing family of methods, because there also exist <a href=\"https://ruby-doc.org/core/IO.html#method-i-puts\" rel=\"noreferrer\"><code>IO#puts</code></a> and friends, which indeed <em>do</em> care about their receiver.)</p>\n\n<p>So, in order to prevent you from misleadingly calling these methods with a receiver, they are made <code>private</code>, which means they can only be called without an explicit receiver. (Obviously, they will <em>still</em> be called on <code>self</code>, but at least that won't be so obvious visually.)</p>\n\n<p>Technically, these aren't really methods <em>at all</em>, they behave more like <em>procedures</em>, but Ruby doesn't have procedures, so this is the best way to \"fake\" them.</p>\n\n<p>The reason why they are <em>also</em> defined as <em>singleton methods</em> is so that you can still call them in contexts where <code>Kernel</code> is not in the inheritance hierarchy, e.g. something like this:</p>\n\n<pre><code>class Foo &lt; BasicObject\n  def works\n    ::Kernel.puts 'Hello, World!'\n  end\n\n  def doesnt\n    puts 'Hello, World!'\n  end\nend\n\nf = Foo.new\n\nf.works\n# Hello, World!\n\nf.doesnt\n# NoMethodError: undefined method `puts' for #&lt;Foo:0x00007f97cf918ed0&gt;\n</code></pre>\n\n<p>And the reason why they need to be defined separately at all is that the instance method versions are <code>private</code>. If they <em>weren't</em>, then you would simply be able to call <code>Kernel.puts</code> anyway, because <code>Object</code> includes <code>Kernel</code> and <code>Kernel</code> is an instance of <code>Module</code> which is a subclass of <code>Object</code>, thus <code>Kernel</code> is an indirect instance of itself. However, the methods <em>are</em> <code>private</code> and thus you would get a</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NoMethodError: private method `puts' called for Kernel:Module\n</code></pre>\n\n<p>instead. Therefore, they need to be duplicated separately. There is actually a helper method that does that: <a href=\"https://ruby-doc.org/core/Module.html#method-i-module_function\" rel=\"noreferrer\"><code>Module#module_function</code></a>. (This is also used for <a href=\"https://ruby-doc.org/core/Math.html\" rel=\"noreferrer\"><code>Math</code></a>, where you can either call e.g. <code>Math.sqrt(4)</code> or <code>include Math; sqrt(4)</code>. In this case, you have the choice of <code>include</code>ing <code>Math</code> or not, whereas <code>Kernel</code> is pre-<code>include</code>d in <code>Object</code> always.)</p>\n\n<p>So, in summary: the methods are duplicated as <code>private</code> <em>instance</em> methods of <code>Kernel</code> as well as <code>public</code> <em>singleton</em> methods (which is really just <em>instance</em> methods of <code>Kernel</code>'s <em>singleton class</em>). The reason they are defined as <code>private</code> instance methods is so they cannot be called with an explicit receiver and are forced to look more like <em>procedures</em>. The reason they are duplicated as singleton methods of <code>Kernel</code> is so that they <em>can</em> be called with an explicit receiver as long as that explicit receiver is <code>Kernel</code>, in contexts where <code>Kernel</code> is not available in the inheritance hierarchy.</p>\n\n<p>Check this out:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#ruby --disable-gems --disable-did_you_mean -e'puts Kernel.private_instance_methods(false).sort'\nArray\nComplex\nFloat\nHash\nInteger\nRational\nString\n__callee__\n__dir__\n__method__\n`\nabort\nat_exit\nautoload\nautoload?\nbinding\nblock_given?\ncaller\ncaller_locations\ncatch\neval\nexec\nexit\nexit!\nfail\nfork\nformat\ngets\nglobal_variables\ninitialize_clone\ninitialize_copy\ninitialize_dup\niterator?\nlambda\nload\nlocal_variables\nloop\nopen\np\npp\nprint\nprintf\nproc\nputc\nputs\nraise\nrand\nreadline\nreadlines\nrequire\nrequire_relative\nrespond_to_missing?\nselect\nset_trace_func\nsleep\nspawn\nsprintf\nsrand\nsyscall\nsystem\ntest\nthrow\ntrace_var\ntrap\nuntrace_var\nwarn\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "is_accepted": false, "score": 0, "last_activity_date": 1568134119, "creation_date": 1568134119, "answer_id": 57875178, "question_id": 57872724, "link": "https://stackoverflow.com/questions/57872724/why-am-i-able-to-use-kernel-singleton-methods-like-puts/57875178#57875178", "title": "Why am I able to use Kernel singleton methods like `puts`?", "body": "<p>As it turns out, the answer is that I was asking the wrong question. <strong>Why am I able use Kernel singleton methods like <code>puts</code>?</strong> The answer is: <strong>you can't</strong>.</p>\n\n<p><code>Kernel</code>'s singleton methods, like all other singleton methods on modules, are not inheritable. The trick is that they aren't singleton methods, <em>per se</em>... they're <strong>module functions</strong>.</p>\n\n<p>Creating a module function in ruby <em>creates two copies of the method</em>: <strong>a singleton method</strong> and a <strong>private instance method</strong>. That's why <code>Kernel.singleton_method(:puts)</code> and <code>Kernel.instance_method(:puts)</code> both work.</p>\n\n<p>So, because <code>Object</code> <code>include</code>s <code>Kernel</code>, it gets access to its instance methods, including <code>puts</code>.</p>\n\n<p>I made a mistake by using <code>#instance_methods</code>, which only shows public instance methods. To see private ones, I need to use <code>#private_instance_methods</code>, e.g.:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Kernel.private_instance_methods(false).grep(/puts/)\n\n# [:puts]\n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 479561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbd65597a7be64e730a9428e5c50248?s=128&d=identicon&r=PG", "display_name": "rintaun", "link": "https://stackoverflow.com/users/479561/rintaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 57875148, "answer_count": 3, "score": 6, "last_activity_date": 1568138176, "creation_date": 1568124907, "last_edit_date": 1568138176, "question_id": 57872724, "link": "https://stackoverflow.com/questions/57872724/why-am-i-able-to-use-kernel-singleton-methods-like-puts", "title": "Why am I able to use Kernel singleton methods like `puts`?", "body": "<p>In Ruby, the method <code>puts</code> is a singleton method of the <code>Kernel</code> module.</p>\n\n<p>Normally, when a module is <code>include</code>d or <code>extend</code>ed by another module, the module (but not its singleton class) is added to the inheritance tree. That effectively makes the <em>instance</em> methods of the module available to either the module or its singleton class (for <code>include</code> and <code>extend</code>, respectively)... but the <em>singleton</em> methods of a mixed-in module remain inaccessible, because the singleton class of a module isn't ever added to the inheritance tree.</p>\n\n<p>So why can I use <code>puts</code> (and other Kernel singleton methods)?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Kernel.singleton_methods(false)\n\n# =&gt; [:caller_locations, :local_variables, :require, :require_relative, :autoload, :sprintf, :format, :Integer, :Float, :String, :Array, :Hash, :test, :warn, :autoload?, :fork, :binding, :exit, :raise, :fail, :global_variables, :__method__, :__callee__, :__dir__, :URI, :eval, :iterator?, :block_given?, :catch, :throw, :loop, :gets, :sleep, :proc, :lambda, :trace_var, :untrace_var, :at_exit, :load, :Rational, :select, :Complex, :syscall, :open, :printf, :print, :putc, :puts, :readline, :readlines, :`, :p, :system, :spawn, :exec, :exit!, :abort, :set_trace_func, :rand, :srand, :trap, :caller]\n</code></pre>\n\n<p>Note that <code>puts</code> <em>does not</em> seem to be an instance method on <code>Kernel</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Kernel.instance_methods.grep(/puts/)\n\n# []\n</code></pre>\n\n<p>Although <code>Object</code> does include <code>Kernel</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Object.included_modules\n\n# [Kernel]\n</code></pre>\n\n<p>as far as I can tell, <code>Kernel</code>'s singleton class (<code>#&lt;Class:Kernel&gt;</code>) doesn't show up in the ancestors of any object. <code>is_a?</code> appears to agree with this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Object.is_a? Class.singleton_class # false\nObject.is_a? Kernel.singleton_class # false\n\nObject.singleton_class.is_a? Class.singleton_class # true\nObject.singleton_class.is_a? Kernel.singleton_class # false\n</code></pre>\n\n<p>Yet, for some reason, they show up as private methods for every object.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Object.puts \"asdf\"\n\n# NoMethodError (private method `puts' called for Object:Class)\n</code></pre>\n\n<p>How does the method lookup find these methods at all if <code>#&lt;Class:Kernel&gt;</code> doesn't show up in the ancestor chain?</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/23848667/ruby-method-lookup-path-for-an-object\">Ruby method lookup path for an object</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15475658/class-module-their-eigenclasses-and-method-lookup\">Class, Module, their eigenclasses, and method lookup</a>\n\n<ul>\n<li>Note: this is different from what I'm asking, because this is class inheritance, so <code>#&lt;Class:Class&gt;</code> inherits from <code>#&lt;Class:Module&gt;</code></li>\n</ul></li>\n<li><a href=\"https://stackoverflow.com/questions/13269271/why-a-modules-singleton-method-is-not-visible-in-downstream-eigenclasses-where\">Why a module&#39;s singleton method is not visible in downstream eigenclasses where it gets mixed?</a></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "sphinx", "thinking-sphinx"], "comments": [{"owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "edited": false, "score": 0, "creation_date": 1568158147, "post_id": 57872558, "comment_id": 102183169, "body": "Given you&#39;re dealing with many images, rather than just one\u2026 do you want to return products where there are no images? Or products that <i>do</i> have images, but at least one of those images doesn&#39;t have a photo value?"}, {"owner": {"reputation": 77, "user_id": 6908405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00c183db4df116bf5a41f42879acd35?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiy Melnikov", "link": "https://stackoverflow.com/users/6908405/georgiy-melnikov"}, "reply_to_user": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "edited": false, "score": 0, "creation_date": 1568180078, "post_id": 57872558, "comment_id": 102188113, "body": "@pat I want to get products with images where at least one photo is present (<code>IS NOT NULL</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "is_accepted": true, "score": 1, "last_activity_date": 1568530519, "creation_date": 1568530519, "answer_id": 57941837, "question_id": 57872558, "link": "https://stackoverflow.com/questions/57872558/how-check-that-associated-file-is-not-null-in-thinking-sphinx/57941837#57941837", "title": "How check that associated file is not NULL in thinking sphinx?", "body": "<p>Because you're dealing with many images for a given product, you'll need to aggregate the photo values for each image. It could be that a SUM(CASE) statement will do the job (and this <em>should</em> work in both MySQL and PostgreSQL):</p>\n\n<pre><code>has \"SUM(CASE WHEN images.photo IS NULL THEN 0 ELSE 1 END) &gt; 0\",\n  as: :has_photo, type: :boolean\n</code></pre>\n\n<p>This solution is fine for SQL-backed indices (which is what you're using). For anyone coming across this that is using real-time indices, then the solution is different\u2026 you'll want a method to refer to within your class:</p>\n\n<pre><code>def has_image_photos\n  images.any? { |image| image.photo.present? }\nend\n</code></pre>\n\n<p>And then in the index:</p>\n\n<pre><code>has has_image_photos, as: :has_photo, type: :boolean\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6908405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00c183db4df116bf5a41f42879acd35?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiy Melnikov", "link": "https://stackoverflow.com/users/6908405/georgiy-melnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57941837, "answer_count": 1, "score": 0, "last_activity_date": 1568530519, "creation_date": 1568124380, "question_id": 57872558, "link": "https://stackoverflow.com/questions/57872558/how-check-that-associated-file-is-not-null-in-thinking-sphinx", "title": "How check that associated file is not NULL in thinking sphinx?", "body": "<p>I have a <code>Product</code> model that <code>has_many :images</code></p>\n\n<p>Image model has a photo field (I use carrierwave gem to store the file):</p>\n\n<pre><code>class Image &lt; ApplicationRecord\n  mount_uploader :photo, DressingUploader\nend\n</code></pre>\n\n<p>Here is my <code>product_index.rb</code> file:</p>\n\n<pre><code>ThinkingSphinx::Index.define :product, with: :active_record do\n  indexes name\n\n  has images.pose, as: :image_pose\n\n  join images\nend\n</code></pre>\n\n<p>How can I add <code>images.photo</code> attribute to thinking sphinx which will check whether the photo is present or not?\nI could add this line <code>where \"images.photo IS NOT NULL\"</code>, but I do not need the condition to work globally.</p>\n\n<p>I tried to do something like</p>\n\n<pre><code>has \"images.photo IS NOT NULL\", as: :has_photo, type: :boolean\n</code></pre>\n\n<p>But it doesn`t work</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12046797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83414ecf48d9e3c952e8b71314ac2158?s=128&d=identicon&r=PG&f=1", "display_name": "user12046797", "link": "https://stackoverflow.com/users/12046797/user12046797"}, "edited": false, "score": 0, "creation_date": 1568204484, "post_id": 57872552, "comment_id": 102199676, "body": "Thank you Mark! It now only shows 1 error: Failures:    1) Solution#calculate_line_with_highest_frequency calculates highest count words across lines to be will, it, really      Failure/Error: expect(words_found).to match_array [&quot;will&quot;, &quot;it&quot;, &quot;really&quot;]         expected collection contained:  [&quot;it&quot;, &quot;really&quot;, &quot;will&quot;]        actual collection contained:    []        the missing elements were:      [&quot;it&quot;, &quot;really&quot;, &quot;will&quot;]      # ./spec/solution_spec.rb:39:in `block (3 levels) in &lt;top (required)&gt;&#39;"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1568124368, "creation_date": 1568124368, "answer_id": 57872552, "question_id": 57871140, "link": "https://stackoverflow.com/questions/57871140/calculate-highest-word-frequency-across-lines/57872552#57872552", "title": "Calculate highest word frequency across lines", "body": "<p>I think the mistake is here:</p>\n\n<pre><code>@highest_count_words_across_lines = analyzers.select { |k| v == @highest_count_across_lines }\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>@highest_count_words_across_lines = analyzers.select { |k, v| v == @highest_count_across_lines }\n</code></pre>\n\n<p>The Hash#select method uses two placeholders, k and v (key and value although you can call these whatever you like). If you're looking to check the value, you need to feed in both arguments.</p>\n\n<p>More reading: <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.5.1/Hash.html#method-i-select</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12046797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83414ecf48d9e3c952e8b71314ac2158?s=128&d=identicon&r=PG&f=1", "display_name": "user12046797", "link": "https://stackoverflow.com/users/12046797/user12046797"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568125971, "creation_date": 1568119599, "last_edit_date": 1568125971, "question_id": 57871140, "link": "https://stackoverflow.com/questions/57871140/calculate-highest-word-frequency-across-lines", "title": "Calculate highest word frequency across lines", "body": "<p>I am trying to figure out this problem to no success, keep getting 3 errors. Basically the program is supposed to read a text file (see below) and calculate the highest frequency words. </p>\n\n<p>My program is compared to an rspec to check my work, which is where I see the 3 errors. Where am I going wrong in the code to create the 3 errors?</p>\n\n<p><strong>Text file (test.txt) that is read:</strong></p>\n\n<p>This is a really really really cool experiment really\nCute little experiment\nWill it work maybe it will work do you think it will it will</p>\n\n<p><strong>Code I am running that shows 3 errors</strong>:</p>\n\n<pre><code>class LineAnalyzer\n      attr_accessor :highest_wf_count, :highest_wf_words, :content, :line_number #Implement the following read-only attributes in the LineAnalyzer class. \n  #* highest_wf_count - a number with maximum number of occurrences for a single word (calculated)\n  #* highest_wf_words - an array of words with the maximum number of occurrences (calculated)\n  #* content          - the string analyzed (provided)\n  #* line_number      - the line number analyzed (provided)\n\n  def initialize(content, line)   #Implement the initialize() method to:   #* take in a line of text and line number\n      @content = content   #* initialize the content and line_number attributes\n      @line_number = line   \n      @highest_wf_count = 0\n      @highest_wf_words = []\n      calculate_word_frequency()  #* call the calculate_word_frequency() method.\n  end\n\n  def calculate_word_frequency() #potentially remove self (add in self because this is an instance method)\n    word_frequency = Hash.new(0) #may have to remove parentheses zero\n    content.split.each do |word|\n      word_frequency[word.downcase] += 1\n      @highest_wf_count = word_frequency.values.max       #* (may have to do parentheses after max) calculate the maximum number of times a single word appears within provided content and store that in the highest_wf_count attribute.\n      @highest_wf_words = word_frequency.select {|k,v| v == @highest_wf_count} # (may have to do .keys at the end) can also do word_frequency.select {|k,v| v == @highest_wf_count}\n    end  \n      #* identify the words that were used the maximum number of times and store that in the highest_wf_words attribute.\n  end\nend\n\n\nclass Solution\n  #may have to 'include Enumerable' here\n  attr_reader :analyzers, :highest_count_across_lines, :highest_count_words_across_lines # Implement the following read-only attributes in the Solution class.\n  #* highest_count_across_lines - a number with the maximum value for highest_wf_words attribute in the analyzers array.\n  #* highest_count_words_across_lines - a filtered array of LineAnalyzer objects with the highest_wf_words attribute \n  #  equal to the highest_count_across_lines determined previously.\n\n  def initialize() #may need to take out analyzers and just do parentheses\n    @analyzers = [] #* analyzers - an array of LineAnalyzer objects for each line in the file. Can also do [] instead of Array.new\n    @highest_count_across_lines = nil\n    @highest_count_words_across_lines = nil\n  end\n\n  def analyze_file()\n    File.foreach('test.txt').with_index(1) do |content, line|\n      line_analyzer = LineAnalyzer.new(content, line)\n      @analyzers &lt;&lt; line_analyzer\n    end\n  end\n\n  #* calculate the maximum value for highest_wf_count contained by the LineAnalyzer objects in analyzers array\n  #  and stores this result in the highest_count_across_lines attribute.\n  #* identifies the LineAnalyzer objects in the analyzers array that have highest_wf_count equal to highest_count_across_lines \n  #  attribute value determined previously and stores them in highest_count_words_across_lines.\n  def calculate_line_with_highest_frequency()\n    @highest_count_across_lines = analyzers.sort_by { |analyzer| analyzer.highest_wf_count }.reverse.first.highest_wf_count\n    @highest_count_words_across_lines = analyzers.select { |k| v == @highest_count_across_lines }\n  end\n\n  #* print_highest_word_frequency_across_lines() - prints the values of LineAnalyzer objects in #  highest_count_words_across_lines in the specified format\n  def print_highest_word_frequency_across_lines()  #* print the values of objects in highest_count_words_across_lines in the specified format\n    \"The following words have the highest frequency per line: \\n  #{highest_count_words_across_lines} (appears in line #{line_num} \\n\"  \n  end\nend\n</code></pre>\n\n<p><strong>The three errors I get when I run the above code compared to the rspec</strong>:</p>\n\n<pre><code>  1) Solution#analyze_file creates 3 line analyzers\n     Failure/Error: expect(solution.analyzers.length).to eq 3\n\n       expected: 3\n            got: 12\n\n       (compared using ==)\n     # ./spec/solution_spec.rb:15:in `block (3 levels) in &lt;top (required)&gt;'\n\n  2) Solution#calculate_line_with_highest_frequency calculates highest count across lines to be 4\n     Failure/Error: solution.calculate_line_with_highest_frequency\n\n     NameError:\n       undefined local variable or method `v' for #&lt;Solution:0x0000000003163098&gt;\n     # ./module2_assignment.rb:56:in `block in calculate_line_with_highest_frequency'\n     # ./module2_assignment.rb:56:in `select'\n     # ./module2_assignment.rb:56:in `calculate_line_with_highest_frequency'\n     # ./spec/solution_spec.rb:27:in `block (3 levels) in &lt;top (required)&gt;'\n\n  3) Solution#calculate_line_with_highest_frequency calculates highest count words across lines to be will, it, really\n     Failure/Error: solution.calculate_line_with_highest_frequency\n\n     NameError:\n       undefined local variable or method `v' for #&lt;Solution:0x0000000003937990&gt;\n     # ./module2_assignment.rb:56:in `block in calculate_line_with_highest_frequency'\n     # ./module2_assignment.rb:56:in `select'\n     # ./module2_assignment.rb:56:in `calculate_line_with_highest_frequency'\n     # ./spec/solution_spec.rb:36:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 0.31637 seconds (files took 0.94452 seconds to load)\n19 examples, 3 failures\n\nFailed examples:\n\nrspec ./spec/solution_spec.rb:12 # Solution#analyze_file creates 3 line analyzers\nrspec ./spec/solution_spec.rb:22 # Solution#calculate_line_with_highest_frequency calculates highest count across lines to be 4\nrspec ./spec/solution_spec.rb:31 # Solution#calculate_line_with_highest_frequency calculates highest count words across lines to be will, it, really\n</code></pre>\n"}, {"tags": ["ruby", "byebug"], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568135178, "creation_date": 1568118894, "last_edit_date": 1592644375, "question_id": 57870935, "link": "https://stackoverflow.com/questions/57870935/byebug-is-going-too-deep-stepping-into-rubycore-files-on-next", "title": "ByeBug is going too deep. Stepping into RubyCore files on &#39;next&#39;", "body": "<p>I am using &quot;byebug&quot; in a Ruby program.</p>\n<p>As I &quot;next&quot; through the program &quot;ByeBug&quot; is going too deep and is steping into ruby/core.</p>\n<p>This has never happened before. Is there a setting I can adjust to make it so ByeBug doesn't 'next' into the Ruby source and stays inside the program.</p>\n<p>I call byebug with the following calls. Same results</p>\n<blockquote>\n<p>bundle exec rspec</p>\n<p>rspec</p>\n<p>ruby filename.rb</p>\n</blockquote>\n"}, {"tags": ["ruby", "string", "sorting"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1568119008, "post_id": 57870925, "comment_id": 102166773, "body": "What have you already tried?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568121892, "post_id": 57870925, "comment_id": 102168424, "body": "@RELiABLE edit your question with this info."}], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1568126602, "post_id": 57872994, "comment_id": 102171293, "body": "<code>input = &quot;euametH&quot;.chars</code> can be skipped. The <code>[]</code> syntax works fine on a string, for instance:  <code>output = keys.map{|k| &quot;euametH&quot;[k-1] }.join</code>."}, {"owner": {"reputation": 31, "user_id": 7301674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e496b5bbaac9aedf6a19fedf4fb9bf?s=128&d=identicon&r=PG&f=1", "display_name": "RELiABLE", "link": "https://stackoverflow.com/users/7301674/reliable"}, "edited": false, "score": 0, "creation_date": 1568187494, "post_id": 57872994, "comment_id": 102190991, "body": "@Yule Thanks for your answer !  What means the k-1 in your code ?"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "reply_to_user": {"reputation": 31, "user_id": 7301674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e496b5bbaac9aedf6a19fedf4fb9bf?s=128&d=identicon&r=PG&f=1", "display_name": "RELiABLE", "link": "https://stackoverflow.com/users/7301674/reliable"}, "edited": false, "score": 0, "creation_date": 1568275520, "post_id": 57872994, "comment_id": 102224869, "body": "@RELiABLE as arrays are 0 indexed, you need to take 1 away from the actual number to get the index. i.e. number 7, needs the 7th item in the array, so therefore the index is 6 (as arrays start from 0)"}], "tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 1, "last_activity_date": 1568131859, "last_edit_date": 1568131859, "creation_date": 1568125733, "answer_id": 57872994, "question_id": 57870925, "link": "https://stackoverflow.com/questions/57870925/ruby-how-to-replace-characters-in-a-string-with-custom-order/57872994#57872994", "title": "Ruby how to replace characters in a string with custom order?", "body": "<p>It seems as though you are trying to do a simple cipher where the key corresponds to the order of the letters in the input message. So, split the key and the input message into single characters and rearrange:</p>\n\n<pre><code>&gt;&gt; input = \"euametH\"\n=&gt; \"euametH\"\n&gt;&gt; keys = \"7526134\".chars.map(&amp;:to_i)\n=&gt; [7, 5, 2, 6, 1, 3, 4]\n&gt;&gt; output = keys.map{|k| input[k-1] }.join\n=&gt; \"Heuteam\"\n&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7301674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e496b5bbaac9aedf6a19fedf4fb9bf?s=128&d=identicon&r=PG&f=1", "display_name": "RELiABLE", "link": "https://stackoverflow.com/users/7301674/reliable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568131859, "creation_date": 1568118866, "last_edit_date": 1568125784, "question_id": 57870925, "link": "https://stackoverflow.com/questions/57870925/ruby-how-to-replace-characters-in-a-string-with-custom-order", "title": "Ruby how to replace characters in a string with custom order?", "body": "<p>i have a sring like this:</p>\n\n<p>INPUT-String: euametH</p>\n\n<p>and like to reorder the characters with this key: 7526134\nThat means the first char comes to the 7. position, the second char to the 5. position and so on, the third char to the 2. position and so on.</p>\n\n<p>OUTPUT-String: Heuteam</p>\n\n<p>How can i do this in Ruby ?</p>\n\n<p>I have tried the following:  i have some enrypted messages. The first message is encrypted with a two-char key: like 21. This is easy to decrypt in ruby, i do this with this code: </p>\n\n<pre><code>File.read('/home/text').lines.each do |line|\n  puts line.reverse\nend\n</code></pre>\n\n<p>Fot the encrypted text with the 7-char key this is not possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "is_accepted": true, "score": 1, "last_activity_date": 1568127397, "creation_date": 1568127397, "answer_id": 57873454, "question_id": 57870853, "link": "https://stackoverflow.com/questions/57870853/how-to-add-additional-option-to-a-select-tag-with-set-of-ids-to-be-passed-in-rai/57873454#57873454", "title": "How to add additional option to a select tag with set of ids to be passed in rails", "body": "<p>I hope I got your right.</p>\n\n<ul>\n<li>First of all it is not a good practice to call models from views. Create a helper for this.</li>\n<li>the second - it is not good to pass many ids as a single value for \"All docs\" option.</li>\n<li>Do not call method <code>all</code> if you have many(>1000) records in <code>DocumentCategory</code> table. Use <code>find_each</code> instead. You can also call do direct call of <code>pluck</code> on models <code>DocumentCategory.pluck(:name, :id)</code>.</li>\n</ul>\n\n<p>I'd recommend:</p>\n\n<p>helper:</p>\n\n<pre><code>def options_for_categories\n  options = DocumentCategory.order_name.pluck(:name, :id)\n  options &lt;&lt; ['All Docs', 'all']\n  # you can define your own logic for selected value.\n  selected = params[:doc_id].to_i &gt; 0 ? params[:doc_id] : 'all' \n  options_for_select(options, selected)\nend\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>%td= select_tag \"doc_id\", options_for_categories, class: 'form-control'\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>def your_action\n  # .. your logic ..\n  if params[:doc_id] == 'all'\n    # do something here\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 10706174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abe39094dc66a87ffe959bb40fef139?s=128&d=identicon&r=PG&f=1", "display_name": "gangothri", "link": "https://stackoverflow.com/users/10706174/gangothri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57873454, "answer_count": 1, "score": 0, "last_activity_date": 1568180682, "creation_date": 1568118596, "last_edit_date": 1568180682, "question_id": 57870853, "link": "https://stackoverflow.com/questions/57870853/how-to-add-additional-option-to-a-select-tag-with-set-of-ids-to-be-passed-in-rai", "title": "How to add additional option to a select tag with set of ids to be passed in rails", "body": "<p>i have a select tag which has doc_category name and its id passing to controller, along with this there is also a website's doc_id  passing inside option_for_select. now i have to add all docs to that list which should hold ids of all docs and also it should also send the website's doc_id and the name should be \"All docs\". </p>\n\n<pre><code>given code \ntd= select_tag \"doc_id\", options_for_select((DocumentCategory.order_name.pluck(:name, :id)), params[:doc_id]), class: 'form-control'  \n\n\nI tried with\ntd= select_tag \"doc_id\", options_for_select(DocumentCategory.order_name.pluck(:name, :id)+(['All Docs',DocumentCategory.all.pluck(:id)]), params[:doc_ids]), class: 'form-control'\n</code></pre>\n\n<p>this code is working for download operation in the controller there is a download action which validates the existence of  doc_category.id  and website. doc_category_id.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11922985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1bc75a9dff71c1612ed1065431c37c?s=128&d=identicon&r=PG&f=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/11922985/mustafa"}, "edited": false, "score": 0, "creation_date": 1568199232, "post_id": 57881646, "comment_id": 102196971, "body": "Thanks so much Tan&#233; Tachyon, this did the business."}], "tags": [], "owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "is_accepted": true, "score": 0, "last_activity_date": 1568171960, "creation_date": 1568171960, "answer_id": 57881646, "question_id": 57869851, "link": "https://stackoverflow.com/questions/57869851/why-does-this-fold-array-function-return-less-elements-than-expected/57881646#57881646", "title": "Why does this &#39;fold array&#39; function return less elements than expected?", "body": "<p>Your problem is that you're modifying the input array, which Codewars is reusing in multiple test cases. Do something like <code>arr = array.dup</code> as the first line of your function, and then change all subsequent occurrences of <code>array</code> in your code to <code>arr</code> (or whatever variable name you chose) and then you should be fine. </p>\n"}], "owner": {"reputation": 5, "user_id": 11922985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1bc75a9dff71c1612ed1065431c37c?s=128&d=identicon&r=PG&f=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/11922985/mustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57881646, "answer_count": 1, "score": 0, "last_activity_date": 1568171960, "creation_date": 1568114897, "question_id": 57869851, "link": "https://stackoverflow.com/questions/57869851/why-does-this-fold-array-function-return-less-elements-than-expected", "title": "Why does this &#39;fold array&#39; function return less elements than expected?", "body": "<p>I'm writing a function that folds an array at the middle index. It takes in an 'array' of any length. It takes in an integer for the number of fold or 'runs.'</p>\n\n<p>It aims to return an array with the elements added like so:</p>\n\n<p>Fold 1-times:\n[1,2,3,4,5] -> [6,6,3]</p>\n\n<p>A little visualisation:</p>\n\n<pre><code> Step 1         Step 2        Step 3       Step 4       Step5\n                     5/           5|         5\\          \n                    4/            4|          4\\      \n1 2 3 4 5      1 2 3/         1 2 3|       1 2 3\\       6 6 3\n----*----      ----*          ----*        ----*        ----*\n</code></pre>\n\n<p>Fold 2-times:\n[1,2,3,4,5] -> [9,6]</p>\n\n<p>This is for a codewars challenge.\nI have tried it in terminal and it works.\nI have tried tweaking the lines where the array is sliced and mapped, they don't seem to be the cause of the problem.</p>\n\n<p>I have tried adding a variable for the final array output to make sure when the do block runs multiple times it takes in the new array and not the original. This wasn't the problem either.</p>\n\n<pre><code>def fold_array(array, runs)\n runs.times do\n   if array.length == 1\n       array = array\n     elsif array.length.even?\n        arr2 = array.slice!(array.length/2..-1).reverse!\n        final1 = array.zip(arr2).map {|a| a.inject(:+)}\n        array = final1\n     else\n        mi = (array.length/2) \n        mv = array.slice(mi)\n        arr2 = array.slice!(mi..-1).reverse!\n        final2 = array.zip(arr2).map {|a| a.inject(:+)}\n        final2.push(mv)\n        array = final2\n    end\n  end\n array\nend\n</code></pre>\n\n<p>input = [ 1, 2, 3, 4, 5 ], 1\nTest Passed: Value == [6, 6, 3]</p>\n\n<p>input = [ 1, 2, 3, 4, 5 ], 2\nTest Failed: Expected: [9, 6], instead got: [3]</p>\n\n<p>input = [ 1, 2, 3, 4, 5 ], 3\nTest Failed: Expected: [15], instead got: [1]</p>\n\n<p>input = [ -9, 9, -8, 8, 66, 23 ], 1\nTest Passed: Value == [14, 75, 0]</p>\n\n<p>I get the right result when the number of runs is 1, but when it's 2 or more it goes wrong.</p>\n"}, {"tags": ["ruby", "amazon-ec2", "redis", "resque", "amazon-elasticache"], "answers": [{"tags": [], "owner": {"reputation": 1579, "user_id": 1180762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hL6v3.jpg?s=128&g=1", "display_name": "kenske", "link": "https://stackoverflow.com/users/1180762/kenske"}, "is_accepted": false, "score": 0, "last_activity_date": 1574136207, "creation_date": 1574136207, "answer_id": 58926466, "question_id": 57869424, "link": "https://stackoverflow.com/questions/57869424/resque-error-dirtyexit-child-process-received-unhandled-signal/58926466#58926466", "title": "Resque error: DirtyExit - Child process received unhandled signal", "body": "<p>Your workers might be running out of memory.</p>\n\n<p>Run <code>dmesg</code> and look for any \"out of memory\" errors.</p>\n"}], "owner": {"reputation": 11, "user_id": 12041150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cf7a14151f88842a815eb0d0fc5135?s=128&d=identicon&r=PG&f=1", "display_name": "Egli ", "link": "https://stackoverflow.com/users/12041150/egli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1579851334, "creation_date": 1568113320, "last_edit_date": 1579851334, "question_id": 57869424, "link": "https://stackoverflow.com/questions/57869424/resque-error-dirtyexit-child-process-received-unhandled-signal", "title": "Resque error: DirtyExit - Child process received unhandled signal", "body": "<p>My background jobs are all failing with the following error Resque::DirtyExit Child process received unhandled signal. After I restart the server they work for some minutes and then start failing. If I run the single jobs from Resque-schedule, they work fine.</p>\n\n<p>Below is a part of the output of the resque-pool.stderr.log: </p>\n\n<p>I've tried reducing the number of jobs to only one that only logs to a file, but the error persists. \nI've also tried rebuilding the AWS server instance and the redis instance but the error is still there. </p>\n\n<p>System details: \n- Server instance: AWS linux version ( 4.14.88-72.76.amzn1.x86_64)\n- Resque version: 1.27.4\n- Redis: AWS elastic cache\n- ruby: 2.3.8\n- rails: 4.2</p>\n\n<pre><code>* Process memory map:\n\n5613e7788000-5613e7a77000 r-xp 00000000 ca:01 170946                     /opt/rubies/ruby-2.3.8/bin/ruby\n5613e7c76000-5613e7c7c000 rw-p 002ee000 ca:01 170946                     /opt/rubies/ruby-2.3.8/bin/ruby\n5613e7c7c000-5613e7c8e000 rw-p 00000000 00:00 0 \n5613e7e33000-5613e95ce000 rw-p 00000000 00:00 0                          [heap]\n5613e95ce000-5613f2de3000 rw-p 00000000 00:00 0                          [heap]\n5613f2de3000-5613f314a000 rw-p 00000000 00:00 0                          [heap]\n5613f314a000-5613f316b000 rw-p 00000000 00:00 0                          [heap]\n7faccc000000-7faccc021000 rw-p 00000000 00:00 0 \n7faccc021000-7facd0000000 ---p 00000000 00:00 0 \n7facd0000000-7facd0021000 rw-p 00000000 00:00 0 \n7facd0021000-7facd4000000 ---p 00000000 00:00 0 \n7facd4000000-7facd4021000 rw-p 00000000 00:00 0 \n7facd4021000-7facd8000000 ---p 00000000 00:00 0 \n7facd8000000-7facd8021000 rw-p 00000000 00:00 0 \n7facd8021000-7facdc000000 ---p 00000000 00:00 0 \n7facdc000000-7facdc13c000 rw-p 00000000 00:00 0 \n7facdc13c000-7face0000000 ---p 00000000 00:00 0 \n7face4000000-7face4021000 rw-p 00000000 00:00 0 \n7face4021000-7face421b000 rw-p 00000000 00:00 0 \n7face421b000-7face4222000 rw-p 00000000 00:00 0 \n7face4222000-7face8000000 ---p 00000000 00:00 0 \n7faceb144000-7facec000000 r--s 00000000 ca:01 170946                     /opt/rubies/ruby-2.3.8/bin/ruby\n7facec000000-7facec021000 rw-p 00000000 00:00 0 \n7facec021000-7facec508000 rw-p 00000000 00:00 0 \n7facec508000-7facf0000000 ---p 00000000 00:00 0 \n7facf0890000-7facf0aa3000 r--s 00000000 ca:01 262174                     /lib64/libc-2.17.so\n7facf0aa3000-7facf0d4c000 r--s 00000000 ca:01 929288                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/grpc-1.14.2-x86_64-linux/src/ruby/lib/grpc/2.3/grpc_c.so\n7facf0d4c000-7facf1150000 rw-p 00000000 00:00 0 \n7facf1150000-7facf1151000 r-xp 00000000 ca:01 171207                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/thread.so\n7facf1151000-7facf1350000 ---p 00001000 ca:01 171207                     \n7facf1552000-7facf1553000 ---p 00000000 00:00 0 \n7facf1553000-7facf1d53000 rw-p 00000000 00:00 0 \n7facf1d53000-7facf1d54000 ---p 00000000 00:00 0 \n/opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/bootsnap-1.3.2/lib/bootsnap/bootsnap.so\n7facf3067000-7facf3266000 ---p 00003000 ca:01 917677                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/bootsnap-1.3.2/lib/bootsnap/bootsnap.so\n7facf3266000-7facf3267000 rw-p 00002000 ca:01 917677                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/bootsnap-1.3.2/lib/bootsnap/bootsnap.so\n7facf32fd000-7facf3310000 r-xp 00000000 ca:01 917623                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/msgpack-1.2.4/lib/msgpack/msgpack.so\n7facf3310000-7facf3510000 ---p 00013000 ca:01 917623                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/msgpack-1.2.4/lib/msgpack/msgpack.so\n7facf3510000-7facf3511000 rw-p 00013000 ca:01 917623                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/msgpack-1.2.4/lib/msgpack/msgpack.so\n7facf3511000-7facf3515000 r-xp 00000000 ca:01 171126                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7facf3515000-7facf3715000 ---p 00004000 ca:01 171126                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7facf3715000-7facf3716000 rw-p 00004000 ca:01 171126                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7facf3716000-7facf376d000 r-xp 00000000 ca:01 929163                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-protobuf-3.6.1-x86_64-linux/lib/google/2.3/protobuf_c.so\n7facf376d000-7facf396c000 ---p 00057000 ca:01 929163                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-protobuf-3.6.1-x86_64-linux/lib/google/2.3/protobuf_c.so\n7facf396c000-7facf3974000 r--p 00056000 ca:01 929163                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-protobuf-3.6.1-x86_64-linux/lib/google/2.3/protobuf_c.so\n7facf3974000-7facf3976000 rw-p 0005e000 ca:01 929163                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-protobuf-3.6.1-x86_64-linux/lib/google/2.3/protobuf_c.so\n7facf3976000-7facf3bdd000 r-xp 00000000 ca:01 929288                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/grpc-1.14.2-x86_64-linux/src/ruby/lib/grpc/2.3/grpc_c.so\n7facf3bdd000-7facf3ddd000 ---p 00267000 ca:01 929288                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/grpc-1.14.2-x86_64-linux/src/ruby/lib/grpc/2.3/grpc_c.so\n7facf3ddd000-7facf3df2000 r--p 00267000 ca:01 929288                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/grpc-1.14.2-x86_64-linux/src/ruby/lib/grpc/2.3/grpc_c.so\n7facf3df2000-7facf3df9000 rw-p 0027c000 ca:01 929288                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/grpc-1.14.2-x86_64-linux/src/ruby/lib/grpc/2.3/grpc_c.so\n7facf3df9000-7facf3dfe000 rw-p 00000000 00:00 0 \n7facf3dfe000-7facf3e00000 r-xp 00000000 ca:01 804772                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.3/lib/debug_inspector.so\n7facf3e00000-7facf3fff000 ---p 00002000 ca:01 804772                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.3/lib/debug_inspector.so\n7facf3fff000-7facf4000000 rw-p 00001000 ca:01 804772                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.3/lib/debug_inspector.so\n7facf4000000-7facf4054000 rw-p 00000000 00:00 0 \n7facf4054000-7facf8000000 ---p 00000000 00:00 0 \n7facf800c000-7facf810d000 rw-p 00000000 00:00 0 \n7facf810d000-7facf8110000 r-xp 00000000 ca:01 929639                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-cloud-debugger-0.32.2/lib/google/cloud/debugger/debugger_c.so\n7facf8110000-7facf8310000 ---p 00003000 ca:01 929639                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-cloud-debugger-0.32.2/lib/google/cloud/debugger/debugger_c.so\n7facf8310000-7facf8311000 rw-p 00003000 ca:01 929639                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/google-cloud-debugger-0.32.2/lib/google/cloud/debugger/debugger_c.so\n7facf8311000-7facf8313000 r-xp 00000000 ca:01 171173                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/iso_8859_1.so\n7facf8313000-7facf8512000 ---p 00002000 ca:01 171173                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/iso_8859_1.so\n7facf8512000-7facf8513000 rw-p 00001000 ca:01 171173                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/iso_8859_1.so\n7facf8513000-7facf851e000 r-xp 00000000 ca:01 171211                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/objspace.so\n7facf851e000-7facf871e000 ---p 0000b000 ca:01 171211                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/objspace.so\n7facf871e000-7facf871f000 rw-p 0000b000 ca:01 171211                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/objspace.so\n7facf871f000-7facf8722000 r-xp 00000000 ca:01 171138                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7facf8722000-7facf8921000 ---p 00003000 ca:01 171138                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7facf8921000-7facf8922000 rw-p 00002000 ca:01 171138                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7facf8922000-7facf8f43000 r-xp 00000000 ca:01 1053096                    /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.3/lib/v8/init.so\n7facf8f43000-7facf9143000 ---p 00621000 ca:01 1053096                    /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.3/lib/v8/init.so\n7facf9143000-7facf917e000 rw-p 00621000 ca:01 1053096                    /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/therubyracer-0.12.3/lib/v8/init.so\n7facf917e000-7facf9182000 rw-p 00000000 00:00 0 \n7facf9182000-7facf918c000 r-xp 00000000 ca:01 171123                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7facf918c000-7facf938b000 ---p 0000a000 ca:01 171123                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7facf938b000-7facf938c000 rw-p 00009000 ca:01 171123                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7facf938c000-7facf9392000 r-xp 00000000 ca:01 171124                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7facf9392000-7facf9591000 ---p 00006000 ca:01 171124                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7facf9591000-7facf9592000 rw-p 00005000 ca:01 171124                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7facf9592000-7facf9595000 r-xp 00000000 ca:01 171157                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/trans/utf_16_32.so\n7facf9595000-7facf9795000 ---p 00003000 ca:01 171157                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/trans/utf_16_32.so\n7facf9795000-7facf9796000 rw-p 00003000 ca:01 171157                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/trans/utf_16_32.so\n7facf9796000-7facf97a2000 r-xp 00000000 ca:01 262192                     /lib64/libnss_files-2.17.so\n7facf97a2000-7facf99a1000 ---p 0000c000 ca:01 262192                     /lib64/libnss_files-2.17.so\n7facf99a1000-7facf99a2000 r--p 0000b000 ca:01 262192                     /lib64/libnss_files-2.17.so\n7facf99a2000-7facf99a3000 rw-p 0000c000 ca:01 262192                     /lib64/libnss_files-2.17.so\n7facf99a3000-7facf99a9000 rw-p 00000000 00:00 0 \n7facf99a9000-7facf99aa000 ---p 00000000 00:00 0 \n7facf99aa000-7facfa1aa000 rw-p 00000000 00:00 0 \n7facfa1aa000-7facfa1c0000 r-xp 00000000 ca:01 262163                     /lib64/libgcc_s-7-20170915.so.1\n7facfa1c0000-7facfa3bf000 ---p 00016000 ca:01 262163                     /lib64/libgcc_s-7-20170915.so.1\n7facfa3bf000-7facfa3c0000 rw-p 00015000 ca:01 262163                     /lib64/libgcc_s-7-20170915.so.1\n7facfa3c0000-7facfa535000 r-xp 00000000 ca:01 3438                       /usr/lib64/libstdc++.so.6.0.24\n7facfa535000-7facfa735000 ---p 00175000 ca:01 3438                       /usr/lib64/libstdc++.so.6.0.24\n7facfa735000-7facfa73f000 r--p 00175000 ca:01 3438                       /usr/lib64/libstdc++.so.6.0.24\n7facfa73f000-7facfa741000 rw-p 0017f000 ca:01 3438                       /usr/lib64/libstdc++.so.6.0.24\n7facfa741000-7facfa745000 rw-p 00000000 00:00 0 \n7facfa745000-7facfa99d000 r-xp 00000000 ca:01 145026                     /usr/lib64/mysql/libmysqlclient.so.18.0.0\n7facfa99d000-7facfab9c000 ---p 00258000 ca:01 145026                     /usr/lib64/mysql/libmysqlclient.so.18.0.0\n7facfab9c000-7facfac1d000 rw-p 00257000 ca:01 145026                     /usr/lib64/mysql/libmysqlclient.so.18.0.0\n7facfac1d000-7facfac22000 rw-p 00000000 00:00 0 \n7facfac22000-7facfac32000 r-xp 00000000 ca:01 931802                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.so\n7facfac32000-7facfae32000 ---p 00010000 ca:01 931802                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.so\n7facfae32000-7facfae34000 rw-p 00010000 ca:01 931802                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.so\n7facfae34000-7facfae4b000 r-xp 00000000 ca:01 3014                       /usr/lib64/gconv/CP932.so\n7facfae4b000-7facfb04a000 ---p 00017000 ca:01 3014                       /usr/lib64/gconv/CP932.so\n7facfb04a000-7facfb04b000 r--p 00016000 ca:01 3014                       /usr/lib64/gconv/CP932.so\n7facfb04b000-7facfb04c000 rw-p 00017000 ca:01 3014                       /usr/lib64/gconv/CP932.so\n7facfb04c000-7facfb050000 r-xp 00000000 ca:01 433559                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/racc/cparse.so\n7facfb050000-7facfb24f000 ---p 00004000 ca:01 433559                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/racc/cparse.so\n7facfb24f000-7facfb250000 rw-p 00003000 ca:01 433559                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/racc/cparse.so\n7facfb250000-7facfb273000 r-xp 00000000 ca:01 3441                       /usr/lib64/liblzma.so.5.0.99\n7facfb273000-7facfb473000 ---p 00023000 ca:01 3441                       /usr/lib64/liblzma.so.5.0.99\n7facfb473000-7facfb474000 rw-p 00023000 ca:01 3441                       /usr/lib64/liblzma.so.5.0.99\n7facfb474000-7facfb695000 r-xp 00000000 ca:01 800452                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/nokogiri-1.8.5/lib/nokogiri/nokogiri.so\n7facfb695000-7facfb895000 ---p 00221000 ca:01 800452                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/nokogiri-1.8.5/lib/nokogiri/nokogiri.so\n7facfb895000-7facfb8a1000 rw-p 00221000 ca:01 800452                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/nokogiri-1.8.5/lib/nokogiri/nokogiri.so\n7facfb8a1000-7facfb8a3000 rw-p 00000000 00:00 0 \n7facfb8a3000-7facfb8a4000 r-xp 00000000 ca:01 171133                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/sha2.so\n7facfb8a4000-7facfbaa4000 ---p 00001000 ca:01 171133                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/sha2.so\n7facfbaa4000-7facfbaa5000 rw-p 00001000 ca:01 171133                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/sha2.so\n7facfbaa5000-7facfbab9000 r-xp 00000000 ca:01 171196                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/bigdecimal.so\n7facfbab9000-7facfbcb8000 ---p 00014000 ca:01 171196                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/bigdecimal.so\n7facfbcb8000-7facfbcb9000 rw-p 00013000 ca:01 171196                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/bigdecimal.so\n7facfbcb9000-7facfbcd8000 r-xp 00000000 ca:01 4202                       /usr/lib64/libyaml-0.so.2.0.4\n7facfbcd8000-7facfbed7000 ---p 0001f000 ca:01 4202                       /usr/lib64/libyaml-0.so.2.0.4\n7facfbed7000-7facfbed8000 rw-p 0001e000 ca:01 4202                       /usr/lib64/libyaml-0.so.2.0.4\n7facfbed8000-7facfbede000 r-xp 00000000 ca:01 171118                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/psych.so\n7facfbede000-7facfc0de000 ---p 00006000 ca:01 171118                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/psych.so\n7facfc0de000-7facfc0df000 rw-p 00006000 ca:01 171118                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/psych.so\n7facfc0df000-7facfc0e0000 r-xp 00000000 ca:01 171122                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/fcntl.so\n7facfc0e0000-7facfc2df000 ---p 00001000 ca:01 171122                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/fcntl.so\n7facfc2df000-7facfc2e0000 rw-p 00000000 ca:01 171122                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/fcntl.so\n7facfc2e0000-7facfc2e6000 r-xp 00000000 ca:01 171199                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7facfc2e6000-7facfc4e6000 ---p 00006000 ca:01 171199                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7facfc4e6000-7facfc4e7000 rw-p 00006000 ca:01 171199                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7facfc4e7000-7facfc4e8000 r-xp 00000000 ca:01 171132                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/md5.so\n7facfc4e8000-7facfc6e7000 ---p 00001000 ca:01 171132                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/md5.so\n7facfc6e7000-7facfc6e8000 rw-p 00000000 ca:01 171132                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/digest/md5.so\n7facfc6e8000-7facfc6f8000 r-xp 00000000 ca:01 171214                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7facfc6f8000-7facfc8f7000 ---p 00010000 ca:01 171214                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7facfc8f7000-7facfc8f8000 rw-p 0000f000 ca:01 171214                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7facfc8f8000-7facfc92e000 r-xp 00000000 ca:01 171193                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7facfc92e000-7facfcb2d000 ---p 00036000 ca:01 171193                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7facfcb2d000-7facfcb2f000 rw-p 00035000 ca:01 171193                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7facfcb2f000-7facfcb31000 rw-p 00000000 00:00 0 \n7facfcb31000-7facfcb3b000 r-xp 00000000 ca:01 930573                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/generator.so\n7facfcb3b000-7facfcd3a000 ---p 0000a000 ca:01 930573                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/generator.so\n7facfcd3a000-7facfcd3b000 rw-p 00009000 ca:01 930573                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/generator.so\n7facfcd3b000-7facfcd3c000 r-xp 00000000 ca:01 171140                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7facfcd3c000-7facfcf3c000 ---p 00001000 ca:01 171140                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7facfcf3c000-7facfcf3d000 rw-p 00001000 ca:01 171140                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7facfcf3d000-7facfcf3e000 r-xp 00000000 ca:01 171188                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7facfcf3e000-7facfd13e000 ---p 00001000 ca:01 171188                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7facfd13e000-7facfd13f000 rw-p 00001000 ca:01 171188                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7facfd13f000-7facfd140000 r-xp 00000000 ca:01 171151                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7facfd140000-7facfd340000 ---p 00001000 ca:01 171151                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7facfd340000-7facfd341000 rw-p 00001000 ca:01 171151                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7facfd341000-7facfd342000 r-xp 00000000 ca:01 171192                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7facfd342000-7facfd542000 ---p 00001000 ca:01 171192                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7facfd542000-7facfd543000 rw-p 00001000 ca:01 171192                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7facfd543000-7facfd549000 r-xp 00000000 ca:01 930581                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/parser.so\n7facfd549000-7facfd748000 ---p 00006000 ca:01 930581                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/parser.so\n7facfd748000-7facfd749000 rw-p 00005000 ca:01 930581                     /opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/json-1.8.6/lib/json/ext/parser.so\n7facfd749000-7facfd74a000 r-xp 00000000 ca:01 171127                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7facfd74a000-7facfd94a000 ---p 00001000 ca:01 171127                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7facfd94a000-7facfd94b000 rw-p 00001000 ca:01 171127                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7facfd94b000-7facfd99d000 r-xp 00000000 ca:01 171134                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7facfd99d000-7facfdb9d000 ---p 00052000 ca:01 171134                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7facfdb9d000-7facfdba1000 rw-p 00052000 ca:01 171134                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7facfdba1000-7facfdba2000 r-xp 00000000 ca:01 171125                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7facfdba2000-7facfdda2000 ---p 00001000 ca:01 171125                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7facfdda2000-7facfdda3000 rw-p 00001000 ca:01 171125                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7facfdda3000-7facfddcd000 r-xp 00000000 ca:01 171212                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/socket.so\n7facfddcd000-7facfdfcd000 ---p 0002a000 ca:01 171212                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/socket.so\n7facfdfcd000-7facfdfce000 rw-p 0002a000 ca:01 171212                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/socket.so\n7facfdfce000-7facfdfeb000 r-xp 00000000 ca:01 262220                     /lib64/libtinfo.so.5.7\n7facfdfeb000-7facfe1ea000 ---p 0001d000 ca:01 262220                     /lib64/libtinfo.so.5.7\n7facfe1ea000-7facfe1ef000 rw-p 0001c000 ca:01 262220                     /lib64/libtinfo.so.5.7\n7facfe1ef000-7facfe214000 r-xp 00000000 ca:01 262216                     /lib64/libncurses.so.5.7\n7facfe214000-7facfe414000 ---p 00025000 ca:01 262216                     /lib64/libncurses.so.5.7\n7facfe414000-7facfe415000 rw-p 00025000 ca:01 262216                     /lib64/libncurses.so.5.7\n7facfe415000-7facfe451000 r-xp 00000000 ca:01 262236                     /lib64/libreadline.so.6.2\n7facfe451000-7facfe651000 ---p 0003c000 ca:01 262236                     /lib64/libreadline.so.6.2\n7facfe651000-7facfe659000 rw-p 0003c000 ca:01 262236                     /lib64/libreadline.so.6.2\n7facfe659000-7facfe65a000 rw-p 00000000 00:00 0 \n7facfe65a000-7facfe661000 r-xp 00000000 ca:01 171128                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/readline.so\n7facfe661000-7facfe861000 ---p 00007000 ca:01 171128                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/readline.so\n7facfe861000-7facfe862000 rw-p 00007000 ca:01 171128                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/readline.so\n7facfe862000-7facfe863000 r-xp 00000000 ca:01 171204                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7facfe863000-7facfea63000 ---p 00001000 ca:01 171204                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7facfea63000-7facfea64000 rw-p 00001000 ca:01 171204                     /opt/rubies/ruby-2.3.8/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7facfea64000-7facfea82000 r-xp 00000000 ca:01 3344                       /usr/lib64/libselinux.so.1\n7facfea82000-7facfec81000 ---p 0001e000 ca:01 3344                       /usr/lib64/libselinux.so.1\n7facfec81000-7facfec82000 r--p 0001d000 ca:01 3344                       /usr/lib64/libselinux.so.1\n7facfec82000-7facfec83000 rw-p 0001e000 ca:01 3344                       /usr/lib64/libselinux.so.1\n7facfec83000-7facfec85000 rw-p 00000000 00:00 0 \n7facfec85000-7facfec9b000 r-xp 00000000 ca:01 262202                     /lib64/libresolv-2.17.so\n7facfec9b000-7facfee9a000 ---p 00016000 ca:01 262202                     /lib64/libresolv-2.17.so\n7facfee9a000-7facfee9b000 r--p 00015000 ca:01 262202                     /lib64/libresolv-2.17.so\n7facfee9b000-7facfee9c000 rw-p 00016000 ca:01 262202                     /lib64/libresolv-2.17.so\n7facfee9c000-7facfee9e000 rw-p 00000000 00:00 0 \n7facfee9e000-7facfeea1000 r-xp 00000000 ca:01 262262                     /lib64/libkeyutils.so.1.5\n7facfeea1000-7facff0a0000 ---p 00003000 ca:01 262262                     /lib64/libkeyutils.so.1.5\n7facff0a0000-7facff0a1000 rw-p 00002000 ca:01 262262                     /lib64/libkeyutils.so.1.5\n7facff0a1000-7facff0ae000 r-xp 00000000 ca:01 7456                       /usr/lib64/libkrb5support.so.0.1\n7facff0ae000-7facff2ad000 ---p 0000d000 ca:01 7456                       /usr/lib64/libkrb5support.so.0.1\n7facff2ad000-7facff2ae000 r--p 0000c000 ca:01 7456                       /usr/lib64/libkrb5support.so.0.1\n7facff2ae000-7facff2af000 rw-p 0000d000 ca:01 7456                       /usr/lib64/libkrb5support.so.0.1\n7facff2af000-7facff2df000 r-xp 00000000 ca:01 7448                       /usr/lib64/libk5crypto.so.3.1\n7facff2df000-7facff4df000 ---p 00030000 ca:01 7448                       /usr/lib64/libk5crypto.so.3.1\n7facff4df000-7facff4e1000 r--p 00030000 ca:01 7448                       /usr/lib64/libk5crypto.so.3.1\n7facff4e1000-7facff4e2000 rw-p 00032000 ca:01 7448                       /usr/lib64/libk5crypto.so.3.1\n7facff4e2000-7facff4e5000 r-xp 00000000 ca:01 3357                       /usr/lib64/libcom_err.so.2.1\n7facff4e5000-7facff6e4000 ---p 00003000 ca:01 3357                       /usr/lib64/libcom_err.so.2.1\n7facff6e4000-7facff6e5000 rw-p 00002000 ca:01 3357                       /usr/lib64/libcom_err.so.2.1\n7facff6e5000-7facff7bd000 r-xp 00000000 ca:01 7454                       /usr/lib64/libkrb5.so.3.3\n7facff7bd000-7facff9bc000 ---p 000d8000 ca:01 7454                       /usr/lib64/libkrb5.so.3.3\n7facff9bc000-7facff9ca000 r--p 000d7000 ca:01 7454                       /usr/lib64/libkrb5.so.3.3\n7facff9ca000-7facff9cd000 rw-p 000e5000 ca:01 7454                       /usr/lib64/libkrb5.so.3.3\n7facff9cd000-7facffa17000 r-xp 00000000 ca:01 7444                       \n\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n\nE0910 10:33:49.859056505   26018 sync_posix.cc:47]           assertion failed: pthread_mutex_lock(mu) == 0\nE0910 10:33:55.198436313   26035 sync_posix.cc:47]           assertion failed: pthread_mutex_lock(mu) == 0\nE0910 10:34:00.233557356   26046 sync_posix.cc:47]           assertion failed: pthread_mutex_lock(mu) == 0\nE0910 10:34:05.286323933   26069 sync_posix.cc:47]           assertion failed: pthread_mutex_lock(mu) == 0\nE0910 10:34:05.310868135   26075 sync_posix.cc:47]           assertion failed: pthread_mutex_lock(mu) == 0\n</code></pre>\n"}, {"tags": ["ruby", "microsoft-graph-api"], "comments": [{"owner": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 0, "creation_date": 1568112976, "post_id": 57869026, "comment_id": 102163387, "body": "I think you have to check Microsoft&#39;s API for this."}, {"owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "reply_to_user": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 0, "creation_date": 1568114689, "post_id": 57869026, "comment_id": 102164334, "body": "@VatsalJain I updated more source to get token. Is it ok ?"}, {"owner": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 0, "creation_date": 1568117027, "post_id": 57869026, "comment_id": 102165638, "body": "v2.0 is missing in the url and try adding the header for Content-Type"}, {"owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "reply_to_user": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 0, "creation_date": 1568120118, "post_id": 57869026, "comment_id": 102167423, "body": "Sorry, it still does not working. :("}, {"owner": {"reputation": 548, "user_id": 925271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZYYf.gif?s=128&g=1", "display_name": "Paul Schaeflein", "link": "https://stackoverflow.com/users/925271/paul-schaeflein"}, "edited": false, "score": 0, "creation_date": 1568150691, "post_id": 57869026, "comment_id": 102181466, "body": "It would help to see the source code that makes the actual call to the graph endpoint. Perhaps there is something wrong with the request and not the token..."}, {"owner": {"reputation": 918, "user_id": 829542, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ecf1521dfbcbfab38d137a79dfd571fc?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/829542/satya"}, "edited": false, "score": 0, "creation_date": 1578589734, "post_id": 57869026, "comment_id": 105496786, "body": "@RyanTran - is this resolved? could you post the answer to this pls?"}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "edited": false, "score": 0, "creation_date": 1568157198, "post_id": 57878378, "comment_id": 102182990, "body": "Thanks for your answer!  First, when I send request to get token, i got it. Response is not error and contains access_token. =&gt; Getting token is ok ? Second, i also paste this token in <a href=\"https://jwt.ms\" rel=\"nofollow noreferrer\">jwt.ms</a>. It returns many properties but it does not contain any role. =&gt; I think i missed it in AAD. But, i set all permissions about Mail for this application like picture."}, {"owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "edited": false, "score": 0, "creation_date": 1568241548, "post_id": 57878378, "comment_id": 102216109, "body": "I also update source code that makes the actual call to the graph endpoint. Can you help me review it ?"}, {"owner": {"reputation": 87, "user_id": 1307984, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7ae3d93b00b259807b26107a11b4331?s=128&d=identicon&r=PG", "display_name": "Nag Arjun", "link": "https://stackoverflow.com/users/1307984/nag-arjun"}, "reply_to_user": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "edited": false, "score": 0, "creation_date": 1611159335, "post_id": 57878378, "comment_id": 116362797, "body": "Hi @RyanTran, I am also having the same issue. Did you try to fix this issue? Please let me know your workaround for this. Thanks."}], "tags": [], "owner": {"reputation": 548, "user_id": 925271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZYYf.gif?s=128&g=1", "display_name": "Paul Schaeflein", "link": "https://stackoverflow.com/users/925271/paul-schaeflein"}, "is_accepted": false, "score": 0, "last_activity_date": 1568150614, "creation_date": 1568150614, "answer_id": 57878378, "question_id": 57869026, "link": "https://stackoverflow.com/questions/57869026/microsoft-graph-api-send-email-nopermissionsinaccesstoken/57878378#57878378", "title": "Microsoft Graph API - Send Email - NoPermissionsInAccessToken", "body": "<p>I don't know Ruby -- is the scope parameter URLEncoded when sent over the wire?</p>\n\n<p>Grab the response and have a look. Does it have an access_token property? If so, copy the value of that property and paste it in <a href=\"https://jwt.ms\" rel=\"nofollow noreferrer\">https://jwt.ms</a>.  Look for the scopes or roles in the decoded token - it should match what has been setup in the AAD portal.</p>\n"}], "owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568241481, "creation_date": 1568111913, "last_edit_date": 1568241481, "question_id": 57869026, "link": "https://stackoverflow.com/questions/57869026/microsoft-graph-api-send-email-nopermissionsinaccesstoken", "title": "Microsoft Graph API - Send Email - NoPermissionsInAccessToken", "body": "<p>I have created a Ruby App to send email using Microsoft Graph API.\nI get access token without a user based on : \n<a href=\"https://docs.microsoft.com/en-us/graph/auth-v2-service#5-use-the-access-token-to-call-microsoft-graph\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/graph/auth-v2-service#5-use-the-access-token-to-call-microsoft-graph</a></p>\n\n<pre><code>url = URI.parse(\"https://login.microsoftonline.com/common/oauth2/v2.0/token\")\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = (url.scheme == \"https\")\n\nreq = Net::HTTP::Post.new(url.request_uri)\nreq.set_form_data({\n    'client_id' =&gt; CLIENT_ID, \n    'client_secret' =&gt; CLIENT_SCERET,\n    'grant_type' =&gt; 'client_credentials',\n    'scope' =&gt; 'https://graph.microsoft.com/.default'\n})\nresponse = http.request(req)\n</code></pre>\n\n<p>I got token. </p>\n\n<p>Next, I want send mail to any user with my application on portal azure, which have api permissions for it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7uTjo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7uTjo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, I call send_mail function. </p>\n\n<pre><code>url = URI.parse(\"https://graph.microsoft.com/v1.0/users/{MYID}/sendMail\")\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = (url.scheme == \"https\")\nreq = Net::HTTP::Post.new(url.request_uri)\nreq[\"Authorization\"] = \"Bearer #{get_token_without_user}\"\nreq[\"Content-type\"] = \"application/json\"\n\nreq.set_form_data({\n    \"message\": {\n       \"subject\": \"Meet for lunch?\",\n       \"body\": {\n          \"contentType\": \"Text\",\n          \"content\": \"The new cafeteria is open.\"\n        }\n     },\n     \"toRecipients\": [\n        {\n          \"emailAddress\": {\n             \"address\": \"to_email@gmail.com\"\n          }\n     }],\n     \"saveToSentItems\": \"false\"\n})\nresponse = http.request(req)\n</code></pre>\n\n<p>I receive this error :</p>\n\n<p><a href=\"https://i.stack.imgur.com/pR9pc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pR9pc.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, can anybody guide me where is my mistake ? Thanks so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1568206712, "post_id": 57869095, "comment_id": 102201005, "body": "What does <code>@data</code> ? your solution seems to be the most reasonable but I don&#39;t know why it doesn&#39;t work. If I set in <code>old_data</code> (in your example it is the same as <code>data_hash</code> something like <code>activities: &#39;sth&#39;</code> and pass it to the excluded params in initializer - <code>excluded_params = %i[activities]</code> does not exclude him from <code>old_data</code> hash."}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1568208080, "post_id": 57869095, "comment_id": 102201833, "body": "Ohh I&#39;ve got it - the <code>EXCLUDED_PARAMS</code> shouldn&#39;t be a string but symbol"}], "tags": [], "owner": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1568112170, "creation_date": 1568112170, "answer_id": 57869095, "question_id": 57868786, "link": "https://stackoverflow.com/questions/57868786/ruby-pass-a-parameter-in-to-the-constructor-to-behave-like-a-dynamic-method/57869095#57869095", "title": "Ruby pass a parameter in to the constructor to behave like a dynamic method", "body": "<p>You can do it like this</p>\n\n<pre><code>class Foo\n\n  attr_accessor :data\n\n  EXCLUDED_PARAMS = %w(reset_password_token sign_in_count created_at updated_at)\n\n  def initialize(data_hash, excluded_params = [])\n    excluded_params += EXCLUDED_PARAMS\n    @data = data_hash.reject{ |k, v| excluded_params.include? k }\n  end\n\nend\n</code></pre>\n\n<p>Be careful with keys of type Symbol as %w will render keys with string type.</p>\n"}, {"comments": [{"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1568115166, "post_id": 57869261, "comment_id": 102164597, "body": "Thanks for your response! If I use it I&#39;ll receive <code>undefined method `-&#39; for #&lt;Hash:0x00007fb6b81f3940&gt;</code>"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1568115971, "last_edit_date": 1568115971, "creation_date": 1568112797, "answer_id": 57869261, "question_id": 57868786, "link": "https://stackoverflow.com/questions/57868786/ruby-pass-a-parameter-in-to-the-constructor-to-behave-like-a-dynamic-method/57869261#57869261", "title": "Ruby pass a parameter in to the constructor to behave like a dynamic method", "body": "<p>You can do this by using the default value:</p>\n\n<pre><code>class LogAdminData\n\n  DEFAULT_EXCLUDED_PARAMS = %i(reset_password_token sign_in_count created_at updated_at)\n\n  def initialize(old_data:, excluded_params: [])\n    all_excluded_params = excluded_params |\u00a0DEFAULT_EXCLUDED_PARAMS\n    @old_data = old_data.except(*all_excluded_params)\n  end\nend\n</code></pre>\n\n<p>Then use it like this:</p>\n\n<pre><code>LogAdminData.new(old_data: old_data, excluded_params: %i[encrypted_password nick_name])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>LogAdminData.new(old_data: old_data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 0, "last_activity_date": 1568118933, "last_edit_date": 1568118933, "creation_date": 1568116201, "answer_id": 57870180, "question_id": 57868786, "link": "https://stackoverflow.com/questions/57868786/ruby-pass-a-parameter-in-to-the-constructor-to-behave-like-a-dynamic-method/57870180#57870180", "title": "Ruby pass a parameter in to the constructor to behave like a dynamic method", "body": "<p>Answers above can already solve your problem, but because you asked for</p>\n\n<blockquote>\n  <p>Ruby pass a parameter in to the constructor to behave like a dynamic method</p>\n</blockquote>\n\n<p>... a highly dynamic way of setting values (that would be independent per instance and per class), and that it's an interesting design concept to ponder about, that you could do something like the following which passes a proc as argument, and setting up defaults in initialization:</p>\n\n<pre><code>class LogAdminData\n  attr_reader :old_data, :exclude_params\n\n  DEFAULT_EXCLUDE_PARAMS = %w[\n    reset_password_token\n    sign_in_count\n    created_at\n    updated_at\n  ].freeze\n\n  def initialize(**args)\n    @exclude_params = DEFAULT_EXCLUDE_PARAMS.clone\n\n    args.each do |key, value|\n      if value.is_a? Proc\n        instance_variable_set(\n          :\"@#{key}\",\n          value.call(self, instance_variable_get(:\"@#{key}\"))\n        )\n      else\n        instance_variable_set(:\"@#{key}\", value)\n      end\n    end\n  end\nend\n</code></pre>\n\n<h3>Usage:</h3>\n\n<pre><code>log_data = {\n  'other_param1' =&gt; 'foo1',\n  'other_param2' =&gt; 'foo2',\n  'other_param3' =&gt; 'foo3',\n  'created_at' =&gt; 'foo4',\n  'updated_at' =&gt; 'foo5'\n}\n\nlog_admin_data = LogAdminData.new(\n  # order below matters: `exclude_params` arg should be before `old_data` arg\n  # because each key-value pair gets set/evaluated to the instance variable\n  exclude_params: -&gt; (this, default) {\n    # | merges two arrays and remove duplicates\n    default | %w[other_param1 other_param2]\n  },\n  old_data: -&gt; (this, default) {\n    log_data.except(*this.exclude_params)\n  }\n)\n\nputs log_admin_data.old_data\n# =&gt; { 'other_param3' =&gt; 'foo3' }\nputs log_admin_data.exclude_params\n# =&gt; [\"reset_password_token\", \"sign_in_count\", \"created_at\", \"updated_at\", \"other_param1\", \"other_param2\"]\n</code></pre>\n\n<p>You can still pass values values just fine (non-proc):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>log_admin_data = LogAdminData.new(\n  exclude_params: %w[other_param1 other_param2],\n  old_data: -&gt; (this, default) {\n    log_data.except(*this.exclude_params)\n  }\n)\n\nputs log_admin_data.old_data\n# =&gt; {\"other_param3\"=&gt;\"foo3\", \"created_at\"=&gt;\"foo4\", \"updated_at\"=&gt;\"foo5\"}\nputs log_admin_data.exclude_params\n# =&gt; ['other_param1', 'other_param2']\n</code></pre>\n\n<p><em>P.S. If you are implementing inheritance instead, i.e. <code>class LogAdminData &lt; Base</code> instead of manually excluding defaults from your classes, then I can update my answer to suit your implementation.</em></p>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568207342, "creation_date": 1568111060, "last_edit_date": 1568207342, "question_id": 57868786, "link": "https://stackoverflow.com/questions/57868786/ruby-pass-a-parameter-in-to-the-constructor-to-behave-like-a-dynamic-method", "title": "Ruby pass a parameter in to the constructor to behave like a dynamic method", "body": "<p>In my admin logs service I want to implement method which ignore specific data from hash which I receive (e.g. admin parameters like <code>email</code> <code>password</code> which are in form - <code>AdminUser.new(form)</code>). At this moment I know which parameters I want to ignore (these are permanent - <code>exclude_params</code> below)</p>\n\n<pre><code>  def exclude_params\n    %w[\n      reset_password_token\n      sign_in_count\n      created_at\n      updated_at\n    ]\n  end\n</code></pre>\n\n<p>But I will use this service in many enpoints so I want to do more dynamically method that the call be like <code>LogAdminData.new(old_data: old_data, exclude_params: %i[encrypted_password nick_name]).call</code> in the same time I want to keep base ignored parameters (like the ones above - <code>created_at</code> <code>update_at</code> etc) of this method (so that would just be adding it to the existing array?). Sample of existing service below.</p>\n\n<pre><code>class LogAdminData\n  def initialize(old_data:)\n    @old_data = old_data.except(exclude_params)\n  end\n\n  def exclude_params\n    %w[\n      reset_password_token\n      sign_in_count\n      created_at\n      updated_at\n    ]\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "link-to", "update-attributes"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1568109025, "post_id": 57868166, "comment_id": 102161337, "body": "<code>update_attribute</code> method returns <code>true</code> or <code>false</code>, it doesn&#39;t return model. Besides, why do you perform <code>update_attribute</code> in your view instead of controller, where it should be? It&#39;s strongy disadvised."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1568109351, "post_id": 57868166, "comment_id": 102161559, "body": "Are you aware that the <code>link_to</code> method and therefore the <code>account.update_attribute</code> methods are evaluated when the view is rendered? This view tries to first sets the account&#39;s role to &#39;user&#39; and then right after to &#39;admin&#39;. Each time you load that page."}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "is_accepted": true, "score": 0, "last_activity_date": 1568112494, "creation_date": 1568112494, "answer_id": 57869189, "question_id": 57868166, "link": "https://stackoverflow.com/questions/57868166/incorrect-params-in-link-to/57869189#57869189", "title": "incorrect params in link_to", "body": "<p>You need to do update of attributes in controller, not in views. You can use link_to to go to an action and pass additional params.</p>\n\n<pre><code>%tr\n  %td \n    .dropdown\n      %button#dropdownMenuLink.btn.btn-outline.btn-sm.dropdown-toggle{\"aria-expanded\" =&gt; \"false\", \"aria-haspopup\" =&gt; \"true\", \"data-toggle\" =&gt; \"dropdown\", :type =&gt; \"button\"}\n        =account.role\n      .dropdown-menu{\"aria-labelledby\" =&gt; \"dropdownMenuButton\"}\n        .dropdown-item= link_to \"User\", path_to_your_action(id: account.id, role: :user) \n        .dropdown-item= link_to \"Admin\", path_to_your_action(id: account.id, role: :admin)\n</code></pre>\n\n<p>Anyway your controller to handle update and redirect should look like:</p>\n\n<p>accounts_controller.rb</p>\n\n<pre><code>def your_action\n  @account = Account.find(params[:id])\n  if @account.update(role: params[:role])\n    redirect_to # &lt;somewhere&gt;\n  end\nend\n</code></pre>\n\n<p>instead of <code>link_to</code>, you'd better use <code>form_for</code>.</p>\n\n<pre><code>.dropdown-item\n  = form_for account do |f|\n    = f.hidden_field :role, value: :user\n    = f.submit 'User'\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8027736, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9yQylECHK4g/AAAAAAAAAAI/AAAAAAAAAWM/NEV5CRivjg0/photo.jpg?sz=128", "display_name": "Valit Laiho ", "link": "https://stackoverflow.com/users/8027736/valit-laiho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57869189, "answer_count": 1, "score": 0, "last_activity_date": 1568112494, "creation_date": 1568108907, "question_id": 57868166, "link": "https://stackoverflow.com/questions/57868166/incorrect-params-in-link-to", "title": "incorrect params in link_to", "body": "<p>I want to click on dropdown item called \"User\" and \"Admin\" and this should update role column in my account table to this value.</p>\n\n<pre><code>      %tr\n        %td \n          .dropdown\n            %button#dropdownMenuLink.btn.btn-outline.btn-sm.dropdown-toggle{\"aria-expanded\" =&gt; \"false\", \"aria-haspopup\" =&gt; \"true\", \"data-toggle\" =&gt; \"dropdown\", :type =&gt; \"button\"}\n              =account.role\n            .dropdown-menu{\"aria-labelledby\" =&gt; \"dropdownMenuButton\"}\n              .dropdown-item #{link_to \"User\", account.update_attribute(\"role\", \"user\")} \n              .dropdown-item #{link_to \"Admin\", account.update_attribute(\"role\", \"admin\")} \n\n</code></pre>\n\n<p>And I get this error:\n<code>undefined method `to_model' for true:TrueClass Did you mean?  to_yaml</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568108287, "post_id": 57867956, "comment_id": 102160959, "body": "You don&#39;t seem to set <code>@user</code> instance variable in your controller, which is required by your view."}, {"owner": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568109103, "post_id": 57867956, "comment_id": 102161393, "body": "I already set it when I created a new user i.e during signup"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568109409, "post_id": 57867956, "comment_id": 102161593, "body": "It doesn&#39;t matter, instance variables aren&#39;t magically &#39;moved&#39; between requests."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "edited": false, "score": 0, "creation_date": 1568110148, "post_id": 57868412, "comment_id": 102161980, "body": "what is verify_action_path here?"}, {"owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "reply_to_user": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "edited": false, "score": 0, "creation_date": 1568110328, "post_id": 57868412, "comment_id": 102162077, "body": "View helper that points to verify action in the UserController. You can list paths with <code>rails routes</code> command. I wrote it as an example, you should write the correct path."}, {"owner": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "edited": false, "score": 0, "creation_date": 1568119634, "post_id": 57868412, "comment_id": 102167167, "body": "Thanks @demir it worked. Another thing is how can I access code in my verify action. Adding params besides code doesnt work."}, {"owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "reply_to_user": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "edited": false, "score": 0, "creation_date": 1568120044, "post_id": 57868412, "comment_id": 102167392, "body": "@MrMoviesTamil You can access code in your action with: <code>params[:code]</code>"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": true, "score": 0, "last_activity_date": 1568109747, "creation_date": 1568109747, "answer_id": 57868412, "question_id": 57867956, "link": "https://stackoverflow.com/questions/57867956/no-method-error-occurs-in-rails-while-creating-a-new-text-field/57868412#57868412", "title": "No method error occurs in rails while creating a new text_field", "body": "<p>The user model probably does not have a <code>code</code> field. So the application is giving an error. If you just want to send <code>code</code>, use <code>form_tag</code> instead of <code>form_for</code>.</p>\n\n<pre><code>&lt;%= form_tag verify_action_path do %&gt;\n  &lt;%= label_tag :code %&gt;\n  &lt;%= text_field_tag :code %&gt;\n  &lt;%= submit_tag \"Verify\", class: \"btn btn-large btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57868412, "answer_count": 1, "score": -1, "last_activity_date": 1568109747, "creation_date": 1568108148, "last_edit_date": 1568108228, "question_id": 57867956, "link": "https://stackoverflow.com/questions/57867956/no-method-error-occurs-in-rails-while-creating-a-new-text-field", "title": "No method error occurs in rails while creating a new text_field", "body": "<p>I am trying to add a text field via form and setting the name as code.</p>\n\n<p>My form calls a action verify in users controller. But when I run it </p>\n\n<p>shows no method error code. I am new to rails can anyone help. I need to pass code as a params. I already created a user sign up and signin page.</p>\n\n<pre><code>&lt;%= form_for(@user, :action =&gt; 'verify') do |f| %&gt;\n  &lt;%= f.label :code %&gt;\n  &lt;%= f.text_field :code  %&gt;\n&lt;%= f.submit \"Verify\", class: \"btn btn-large btn-primary\" %&gt;\n</code></pre>\n\n<p>// a action in usercontroller</p>\n\n<pre><code>def verify\nend\n</code></pre>\n"}, {"tags": ["ruby", "oop", "design-patterns", "sinatra"], "comments": [{"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1569572206, "post_id": 57867794, "comment_id": 102648043, "body": "I&#39;ll pass this question to someone more knowledgeable about the Sinatra extensions.  I&#39;ve read thethe tutorial you linked and I think your code needs more fixing and I want you to get a proper answer."}, {"owner": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 0, "creation_date": 1569840802, "post_id": 57867794, "comment_id": 102714384, "body": "What do you mean by <b>adding another extension with user_params</b>"}, {"owner": {"reputation": 320, "user_id": 9379031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812d48b828c6e4a46c2d881c363fc775?s=128&d=identicon&r=PG&f=1", "display_name": "qpzm", "link": "https://stackoverflow.com/users/9379031/qpzm"}, "edited": false, "score": 0, "creation_date": 1569846366, "post_id": 57867794, "comment_id": 102717004, "body": "I clarified it as adding another extension <b>which has a method named user_params</b>"}], "owner": {"reputation": 320, "user_id": 9379031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812d48b828c6e4a46c2d881c363fc775?s=128&d=identicon&r=PG&f=1", "display_name": "qpzm", "link": "https://stackoverflow.com/users/9379031/qpzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1569846307, "creation_date": 1568107580, "last_edit_date": 1569846307, "question_id": 57867794, "link": "https://stackoverflow.com/questions/57867794/split-routes-in-sinatra-with-private-methods", "title": "Split routes in Sinatra with private methods?", "body": "<p>I want to do these:</p>\n\n<ol>\n<li>Use rails-like <code>user_params</code> to specify allowed keys to be updated.</li>\n<li>Split routes like <a href=\"http://sinatrarb.com/extensions.html\" rel=\"nofollow noreferrer\">http://sinatrarb.com/extensions.html</a>.</li>\n</ol>\n\n<p>The code below works, but leaks <code>user_params</code> to other files. How can I keep <code>user_params</code> private?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/routes/reset_passwords.rb\n module MyApp\n   module Routes \n     module ResetPasswords \n       class &lt;&lt; self \n         def registered(app) \n           app.patch '/reset_passwords' do\n\n            # ...\n\n            if @user.update(Routes::ResetPasswords.user_params(params))\n              status 204\n            end\n          end\n\n        def user_params(params)\n          params.fetch('user', {}).slice('password')\n        end\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app.rb\nmodule MyApp\n  class App &lt; Sinatra::Base\n    register Routes::ResetPasswords\n    register Another::Modules\n  end\nend\n</code></pre>\n\n<p><strong>EDIT1</strong></p>\n\n<p>As @tukan suggests, the code below works well if <code>MyApp</code> registers only one extension. However, on adding another extension which has a method named <code>user_params</code>, it is overridden by the new <code>user_params</code>.</p>\n\n<pre><code># app/routes/reset_passwords.rb\n module MyApp\n   module Routes \n     module ResetPasswords \n       class &lt;&lt; self \n         def registered(app) \n           app.patch '/reset_passwords' do\n\n            # ...\n\n            if @user.update(user_params(params))\n              status 204\n            end\n          end\n\n        private\n        def user_params(params)\n          params.fetch('user', {}).slice('password')\n        end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 2775990, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/q0b2b.jpg?s=128&g=1", "display_name": "spectator", "link": "https://stackoverflow.com/users/2775990/spectator"}, "edited": false, "score": 0, "creation_date": 1568107272, "post_id": 57867532, "comment_id": 102160440, "body": "Hi Sebastian, I have understood the above mentioned answer. But how to ignore nil values and get only matching data"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1568107473, "last_edit_date": 1568107473, "creation_date": 1568106653, "answer_id": 57867532, "question_id": 57867319, "link": "https://stackoverflow.com/questions/57867319/how-to-fetch-specific-data-from-hash-if-there-are-multiple-matches-for-the-key/57867532#57867532", "title": "How to fetch specific data from hash if there are multiple matches for the key?", "body": "<p>When the <code>inspections</code> iteration reaches the element <code>B</code>, it results in <code>nil</code>, because there are no elements in <code>data</code> where the value of its key <code>IN</code> is <code>B</code>:</p>\n\n<pre><code>p [{\"FL\"=&gt;\"F\", \"IN\"=&gt;\"?\", \"Circ-7\"=&gt;\"HM562\"},\n   {\"FL\"=&gt;\"...\", \"IN\"=&gt;\"I\", \"Circ-7\"=&gt;\"HM563\"},\n   {\"FL\"=&gt;\"F\", \"IN\"=&gt;\"O\", \"Circ-7\"=&gt;\"HM564\"},\n   {\"FL\"=&gt;\"F\", \"IN\"=&gt;\"S\", \"Circ-7\"=&gt;\"HM565\"}].find { |e| e['IN'] == 'B' }\n# nil\n</code></pre>\n\n<p>Similar to any other element in <code>inspections</code> that doesn't exist as a key in <code>data</code>.</p>\n\n<p>Alternatively you can get the common \"IN\" values between <code>inspections</code> and <code>data</code>, iterate over each element in <code>data</code> and push to an array the values of \"Circ-7\":</p>\n\n<pre><code>DATA = [{\"FL\"=&gt;\"F\",   \"IN\"=&gt;\"?\", \"Circ-7\"=&gt;\"HM562\"},\n        {\"FL\"=&gt;\"...\", \"IN\"=&gt;\"I\", \"Circ-7\"=&gt;\"HM563\"},\n        {\"FL\"=&gt;\"F\",   \"IN\"=&gt;\"O\", \"Circ-7\"=&gt;\"HM564\"},\n        {\"FL\"=&gt;\"F\",   \"IN\"=&gt;\"S\", \"Circ-7\"=&gt;\"HM565\"}].freeze\nINSPECTIONS = ['I', 'O', 'B', 'H', 'G', 'S'].freeze\n\ndef check_inspection_data\n  common_in_values = DATA.map { |d| d['IN'] } &amp; INSPECTIONS\n  DATA.each_with_object([]) do |e, arr|\n    next unless common_in_values.include?(e['IN'])\n\n    arr &lt;&lt; e['Circ-7']\n  end\nend\n\np check_inspection_data # [\"HM563\", \"HM564\", \"HM565\"]\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 2775990, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/q0b2b.jpg?s=128&g=1", "display_name": "spectator", "link": "https://stackoverflow.com/users/2775990/spectator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57867532, "answer_count": 1, "score": 1, "last_activity_date": 1568107473, "creation_date": 1568105896, "question_id": 57867319, "link": "https://stackoverflow.com/questions/57867319/how-to-fetch-specific-data-from-hash-if-there-are-multiple-matches-for-the-key", "title": "How to fetch specific data from hash if there are multiple matches for the key?", "body": "<p>I have a hash of arrays through which I need to fetch certain data from it by iterating with each key matching value from an another array. The below code is working if I have only one matching criteria and If am using multiple keys it is throwing an error. How can I fetch if there are multiple key matches?</p>\n\n<p>Below is the code for the above problem:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Sample\n    def check_inspection_data\n        data = [{\"FL\"=&gt;\"F\", \"IN\"=&gt;\"?\", \"Circ-7\"=&gt;\"HM562\"}, {\"FL\"=&gt;\"...\", \"IN\"=&gt;\"I\", \"Circ-7\"=&gt;\"HM563\"}, {\"FL\"=&gt;\"F\", \"IN\"=&gt;\"O\", \"Circ-7\"=&gt;\"HM564\"}, {\"FL\"=&gt;\"F\", \"IN\"=&gt;\"S\", \"Circ-7\"=&gt;\"HM565\"}]\n        inspections = ['I', 'O', 'B', 'H', 'G', 'S']\n        puts inspections.each { |i| data.find { |d| d['IN'] == i }.fetch('Circ-7') } --&gt; But it throws an error\n        # puts data.find { |d| d['IN'] == 'I' }.fetch('Circ-7') --&gt; This is working\n    end\nend\n\nsample = Sample.new\nsample.check_inspection_data\n</code></pre>\n\n<p>Below is the error am getting for the above code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>NoMethodError: undefined method `fetch' for nil:NilClass\n  block in check_inspection_data at sample.rb:5\n                            each at org/jruby/RubyArray.java:1801\n           check_inspection_data at sample.rb:5\n                          &lt;main&gt; at sample.rb:10\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "hyperstack"], "comments": [{"owner": {"reputation": 375, "user_id": 5308751, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6019ff43b0bbd60b0cd6f7b1e9a37017?s=128&d=identicon&r=PG&f=1", "display_name": "BarrieH", "link": "https://stackoverflow.com/users/5308751/barrieh"}, "edited": false, "score": 0, "creation_date": 1568533168, "post_id": 57867070, "comment_id": 102298768, "body": "Hi @koyaChan - this is an excellent question, well laid out and well asked. I don&#39;t have an easy solution for you, but just a suggestion that you can abstract complex database operations into a <code>server_method</code> which will only operate on the server, hence all the back and forth required between the client and server in this complex relationship. I am hoping someone else will give you a better answer though."}, {"owner": {"reputation": 3, "user_id": 12033185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf43c789e9d897596fff95471491e08?s=128&d=identicon&r=PG&f=1", "display_name": "KoyaChan", "link": "https://stackoverflow.com/users/12033185/koyachan"}, "reply_to_user": {"reputation": 375, "user_id": 5308751, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6019ff43b0bbd60b0cd6f7b1e9a37017?s=128&d=identicon&r=PG&f=1", "display_name": "BarrieH", "link": "https://stackoverflow.com/users/5308751/barrieh"}, "edited": false, "score": 0, "creation_date": 1570096426, "post_id": 57867070, "comment_id": 102809316, "body": "Finally this issue was resolved by using ServerOp as advised from adamcreekroad and <a href=\"https://stackoverflow.com/users/5308751/barrieh\">BarrieH</a> in the <a href=\"https://app.slack.com/client/THRP7BEA2/CHFJ8AR5X/thread/CHFJ8AR5X-1568533199.009600\" rel=\"nofollow noreferrer\">hyperstack slack thread</a>."}], "owner": {"reputation": 3, "user_id": 12033185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf43c789e9d897596fff95471491e08?s=128&d=identicon&r=PG&f=1", "display_name": "KoyaChan", "link": "https://stackoverflow.com/users/12033185/koyachan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568337011, "creation_date": 1568104983, "last_edit_date": 1568337011, "question_id": 57867070, "link": "https://stackoverflow.com/questions/57867070/on-hyperstack-deletion-of-has-many-through-association-fails-only-the-first", "title": "On hyperstack, deletion of &quot;has_many :through&quot; association fails only the first time", "body": "<p>On hyperstack, Assignment#destroy method fails with \"Bad request\" only on the first trial, where the Assignment is a model through which \"has_many\" relationship is made. The #destroy succeeds on the second trial.</p>\n\n<p>I have installed the rails-hyperstack gem of 'edge' branch.</p>\n\n<p>I am trying to make a many to many relationship between Issue and Agent models through Assignment model as below :</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Assignment &lt; ApplicationRecord\n  belongs_to :agent\n  belongs_to :issue\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Issue &lt; ApplicationRecord\n  has_many :assignments, foreign_key: :issue_id\n  has_many :agents, through: :assignments\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Agent &lt; ApplicationRecord\n  has_many :assignments, foreign_key: :agent_id\n  has_many :issues, through: :assignments\n\n  def deassign(number)\n    issue = issues.find_by(number: number)\n    assignments.find_by(issue_id: issue.id).destroy.then do |result|\n      if result[:success]\n        issues.delete(issue)\n        return true \n      end\n      puts \"deassign failed #{result[:message]}\"\n      return false\n    end\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Main &lt; HyperComponent\n\n  before_mount do\n    @agent = Agent.first\n  end\n\n  render(UL) do\n    @agent.issues.pluck(:number).each do |num|\n      LI { num.to_s }\n      .on(:click) do\n        @agent.deassign(num)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Issue numbers are listed on the page.</p>\n\n<p>When a number is clicked, Agent#deassign(number) is called, and it calls Assignment#destroy. This way, I am trying to delete the association on the hyperstack, because issues.delete(issue).save can't be used in this case.</p>\n\n<p>Assignment#destroy fails only on the first time when the number is clicked. It succeeds on the second time, and the relationship is deleted successfully.</p>\n\n<p>The error and the call stack displayed in the chrome developer console when the #destroy fails : </p>\n\n<pre><code>http.rb:193 POST http://localhost:5040/hyperstack/execute_remote 400 (Bad Request)\nsend    @   http.rb:193\npost    @   http.rb:126\nrun @   server_op.rb:14\ndestroy @   isomorphic_base.rb:560\nOpal.send   @   runtime.self-a59b728\u2026763d.js?body=1:1605\ndestroy @   instance_methods.rb:161\ndeassign    @   agent.rb:7\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 7837101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vAayM.jpg?s=128&g=1", "display_name": "Joel Cahalan", "link": "https://stackoverflow.com/users/7837101/joel-cahalan"}, "is_accepted": true, "score": 3, "last_activity_date": 1568165532, "creation_date": 1568165532, "answer_id": 57880904, "question_id": 57867028, "link": "https://stackoverflow.com/questions/57867028/uninitialized-constant-activerecordconnectionadaptersconnectionmanagement-n/57880904#57880904", "title": "uninitialized constant ActiveRecord::ConnectionAdapters::ConnectionManagement (NameError) in Rails 6 upgrade", "body": "<p>Somewhere in your code you are calling the deprecated constant: <code>ActiveRecord::ConnectionAdapters::ConnectionManagement</code>. From your stack trace I suspect is in the outdated version of the airbrake gem you are using. Try updating airbrake to a more recent version. Let me know if this sorts it out for you.</p>\n\n<p>You can see more about this <a href=\"https://github.com/rails/rails/issues/26947\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 5443, "user_id": 818094, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f93ac57e4452df30894e5db2f589cf31?s=128&d=identicon&r=PG", "display_name": "Montells", "link": "https://stackoverflow.com/users/818094/montells"}, "is_accepted": false, "score": 4, "last_activity_date": 1589599114, "creation_date": 1589599114, "answer_id": 61831445, "question_id": 57867028, "link": "https://stackoverflow.com/questions/57867028/uninitialized-constant-activerecordconnectionadaptersconnectionmanagement-n/61831445#61831445", "title": "uninitialized constant ActiveRecord::ConnectionAdapters::ConnectionManagement (NameError) in Rails 6 upgrade", "body": "<p>I had the same problem. I fixed it upgrading airbrake gem</p>\n\n<pre><code>gem 'airbrake', '~&gt; 10.0.3'\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 6594606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-AYVZ66MaaGE/AAAAAAAAAAI/AAAAAAAAHgA/MNrNFUCyo10/photo.jpg?sz=128", "display_name": "Shubham", "link": "https://stackoverflow.com/users/6594606/shubham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 57880904, "answer_count": 2, "score": 3, "last_activity_date": 1589599114, "creation_date": 1568104802, "question_id": 57867028, "link": "https://stackoverflow.com/questions/57867028/uninitialized-constant-activerecordconnectionadaptersconnectionmanagement-n", "title": "uninitialized constant ActiveRecord::ConnectionAdapters::ConnectionManagement (NameError) in Rails 6 upgrade", "body": "<p>I am currently in the middle of upgrading a rails project from v5.2.3 to v6.0. I am following this <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"nofollow noreferrer\">guide</a> to upgrade rails. But i am stuck on just first step.\nAs soon i changed the rails version in gemfile and updated rails nothing is working. Running <code>rails server</code> is giving me this error <code>uninitialized constant ActiveRecord::ConnectionAdapters::ConnectionManagement (NameError)</code></p>\n\n<p>Below is the full stacktrace:</p>\n\n<pre><code>53: from bin/rails:4:in `&lt;main&gt;'\n52: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n51: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n50: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n49: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n48: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n47: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands.rb:18:in `&lt;main&gt;'\n46: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/command.rb:46:in `invoke'\n45: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/command/base.rb:65:in `perform'\n44: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n43: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n42: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n41: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands/server/server_command.rb:138:in `perform'\n40: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands/server/server_command.rb:138:in `tap'\n39: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n38: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands/server/server_command.rb:37:in `start'\n37: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/commands/server/server_command.rb:77:in `log_to_stdout'\n36: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:354:in `wrapped_app'\n35: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:219:in `app'\n34: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:319:in `build_app_and_options_from_config'\n33: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:40:in `parse_file'\n32: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `new_from_string'\n31: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `eval'\n30: from config.ru:in `&lt;main&gt;'\n29: from config.ru:in `new'\n28: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `initialize'\n27: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `instance_eval'\n26: from config.ru:3:in `block in &lt;main&gt;'\n25: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/zeitwerk-2.1.10/lib/zeitwerk/kernel.rb:23:in `require'\n24: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n23: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n22: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n21: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n20: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n19: from /Volumes/gitdisk/PAC/codephod2/config/environment.rb:5:in `&lt;main&gt;'\n18: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/application.rb:363:in `initialize!'\n17: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:60:in `run_initializers'\n16: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'\n15: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'\n14: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'\n13: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `call'\n12: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each'\n11: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'\n10: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'\n 9: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n 8: from /Users/shubham/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'\n 7: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n 6: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:32:in `run'\n 5: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:32:in `instance_exec'\n 4: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/airbrake-5.8.1/lib/airbrake/rails/railtie.rb:26:in `block in &lt;class:Railtie&gt;'\n 3: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'\n 2: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:79:in `rescue in load_missing_constant'\n 1: from /Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'\n/Users/shubham/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/active_support.rb:79:in `block in load_missing_constant': uninitialized constant ActiveRecord::ConnectionAdapters::ConnectionManagement (NameError)\n</code></pre>\n"}, {"tags": ["ruby", "libgosu"], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "is_accepted": false, "score": 1, "last_activity_date": 1569941367, "creation_date": 1569941367, "answer_id": 58187407, "question_id": 57866969, "link": "https://stackoverflow.com/questions/57866969/shape-moves-out-of-the-window-area/58187407#58187407", "title": "Shape moves out of the window area", "body": "<p>Assuming WIDTH is Window width, you must use <code>&lt;</code> and <code>&gt;</code>, instead of <code>!=</code></p>\n\n<pre><code>  def update\n\n    if button_down?(Gosu::KbRight)\n      if @shape_x &lt; (WIDTH - SHAPE_DIM)\n        @shape_x += 3\n      end\n    end\n    if button_down?(Gosu::KbLeft) \n      if @shape_x &gt; (WIDTH - SHAPE_DIM)\n        @shape_x -= 3\n      end\n    end\n    if button_down?(Gosu::KbUp) \n      @shape_y -= 3\n    end\n    if button_down?(Gosu::KbDown) \n      @shape_y += 3\n    end\n\n  end\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12008089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jFoBbA07ZfE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd_hIcq-tFl2veXnuFM4rqMdmJeTw/photo.jpg?sz=128", "display_name": "jack ", "link": "https://stackoverflow.com/users/12008089/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569945487, "creation_date": 1568104595, "last_edit_date": 1569945487, "question_id": 57866969, "link": "https://stackoverflow.com/questions/57866969/shape-moves-out-of-the-window-area", "title": "Shape moves out of the window area", "body": "<p>I want my shape not to go out of the window area. for example when I press the left button the shape moves out of the window area but I want it to hit the side and stay there.</p>\n\n<pre><code> def update\n\n    if button_down?(Gosu::KbRight)\n      if @shape_x != (WIDTH - SHAPE_DIM)\n        @shape_x += 3\n      end\n    end\n    if button_down?(Gosu::KbLeft) \n      if @shape_x != (WIDTH - SHAPE_DIM)\n        @shape_x -= 3\n      end\n    end\n    if button_down?(Gosu::KbUp) \n      @shape_y -= 3\n  end\n  if button_down?(Gosu::KbDown) \n    @shape_y += 3\nend\n\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1568139718, "post_id": 57866940, "comment_id": 102177406, "body": "Don&#39;t hardcode your Redis URL. Use the provided ENV variable <code>heroku config</code> will provide it. Heroku doesn&#39;t pick up <code>hardworker</code>. See <a href=\"https://devcenter.heroku.com/articles/procfile\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/procfile</a> for what supported process types it supports."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1568161223, "post_id": 57866940, "comment_id": 102183667, "body": "I did also add it to the config.  Does hardcoding it override it"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1568161647, "post_id": 57866940, "comment_id": 102183726, "body": "Can you provide the entire contents of your Procfile?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1568177225, "post_id": 57866940, "comment_id": 102187289, "body": "I only added <code>hardworker: bundle exec sidekiq -t 25</code> ... there is nothing else atm"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1568178137, "post_id": 57866940, "comment_id": 102187500, "body": "this might be stupid but looks like i needed to turn on the workeer wthin heorku.  also using t -25 went over the redis.  Using c -2 works...."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1575861234, "post_id": 57866940, "comment_id": 104695285, "body": "@uno you should answer your own question below :)"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568105068, "creation_date": 1568104503, "last_edit_date": 1568105068, "question_id": 57866940, "link": "https://stackoverflow.com/questions/57866940/using-sidekiq-redistogo-with-heroku", "title": "Using sidekiq/redistogo with heroku?", "body": "<p>I followed the sideqik gem tutorial docs and heroku Redistogo addon docs </p>\n\n<p><strong>initializers/sidekiq.rb:</strong></p>\n\n<pre><code>Sidekiq.configure_server do |config|\n  config.redis = { url: 'redis://redistogo:xxx.redistogo.com:10076/' }\nend\n\nSidekiq.configure_client do |config|\n  config.redis = { url: 'redis://redistogo:xxx.redistogo.com:10076/' }\nend\n</code></pre>\n\n<p><strong>app/workers/hard_woker.rb:</strong></p>\n\n<pre><code>class HardWorker\n  include Sidekiq::Worker\n  def perform(shop_domain, webhook)\n   #performing stuffs\nend\n</code></pre>\n\n<p><strong>Webhook I am putting into background job (trying to at least):</strong></p>\n\n<pre><code>class OrdersCreateJob &lt; ActiveJob::Base\n  def perform(shop_domain:, webhook:)\n    shop = Shop.find_by(shopify_domain: shop_domain)\n    shop.with_shopify_session do\n      HardWorker.perform_async(shop_domain, webhook)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Procfile:</strong></p>\n\n<pre><code>hardworker: bundle exec sidekiq -t 25\n</code></pre>\n\n<p>There are no errors in console.</p>\n\n<p>Is something wrong here, did I miss something?</p>\n\n<p><strong>My queue:</strong></p>\n\n<pre><code>irb(main):003:0&gt; Sidekiq::Queue.all\n=&gt; [#&lt;Sidekiq::Queue:0x000055b53a2d0920 @name=\"default\", @rname=\"queue:default\"&gt;]\n</code></pre>\n\n<p>I assume this means nothing is in the queue?</p>\n\n<p>My goal is to take all my my CreateOrderWebhook code (which is almost 500 lines) into a background job to put less strain on the app and allow webhooks /prevent webhooks from being blocked</p>\n"}, {"tags": ["ruby", "docker", "ruby-on-rails-4", "docker-compose"], "comments": [{"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568101471, "post_id": 57866056, "comment_id": 102157528, "body": "you need to expose ports 5432:5432 in the compose"}, {"owner": {"reputation": 3537, "user_id": 8993347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492e636297981371c8ef6bf4fff972c1?s=128&d=identicon&r=PG", "display_name": "Jakub Bujny", "link": "https://stackoverflow.com/users/8993347/jakub-bujny"}, "edited": false, "score": 0, "creation_date": 1568101643, "post_id": 57866056, "comment_id": 102157596, "body": "could you please provide logs from <code>docker-compose logs db</code>"}, {"owner": {"reputation": 3537, "user_id": 8993347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492e636297981371c8ef6bf4fff972c1?s=128&d=identicon&r=PG", "display_name": "Jakub Bujny", "link": "https://stackoverflow.com/users/8993347/jakub-bujny"}, "edited": false, "score": 0, "creation_date": 1568101682, "post_id": 57866056, "comment_id": 102157625, "body": "also <code>docker-compose ps</code> would be helpful"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 3537, "user_id": 8993347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492e636297981371c8ef6bf4fff972c1?s=128&d=identicon&r=PG", "display_name": "Jakub Bujny", "link": "https://stackoverflow.com/users/8993347/jakub-bujny"}, "edited": false, "score": 0, "creation_date": 1568103996, "post_id": 57866056, "comment_id": 102158732, "body": "@JakubBujny I updated the question for the details what you asked"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1568104867, "post_id": 57866056, "comment_id": 102159197, "body": "can you share your <code>config&#47;database.yml</code> please? by the way you don&#39;t need to expose port 5432 because containers inside docker-compose&#39;s network are already available to each other. you only need to expose a port if you want access something from a host machine"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1568105525, "post_id": 57866056, "comment_id": 102159523, "body": "@user3309314 updated the same. I tried with expose also but it didn&#39;t worked for me"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1568105856, "post_id": 57866056, "comment_id": 102159702, "body": "you can also try the command <code>docker-compose exec db psql -U postgres</code> to get into postgres console just to make sure your database container is up and postgres is runnning"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1568209589, "post_id": 57866056, "comment_id": 102202708, "body": "Have you tried using a script like <a href=\"https://github.com/vishnubob/wait-for-it\" rel=\"nofollow noreferrer\">wait-for-it</a> to wrap so that postgres starts before rails tries to connect? Could be a timing issue"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1568436533, "post_id": 57866056, "comment_id": 102281877, "body": "@JayDorsey thanks for your suggestion, yes the db container is started before the web container. I resolved this issue thanks"}], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "is_accepted": false, "score": 0, "last_activity_date": 1568436890, "creation_date": 1568436890, "answer_id": 57932571, "question_id": 57866056, "link": "https://stackoverflow.com/questions/57866056/docker-postgres-container-is-not-starting-for-rails-application/57932571#57932571", "title": "Docker Postgres container is not starting for Rails Application", "body": "<p>I resolved my issue with the help of @jayDosrsey suggestion.\nThe DB container get started before the main web container and hence it always gets failed to start the container and I again need to restart the web container.</p>\n\n<p>Resolved this issue by adding the health check condition while starting the rails server.</p>\n\n<pre><code>XYZ:\n  build: .\n  command: bash -c \"while !&lt;/dev/tcp/db/5432; do sleep 1; done; rm -f tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'\"\n\n  ...\n\nNow I am able to start the container in sequence.\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568436890, "creation_date": 1568100844, "last_edit_date": 1568105491, "question_id": 57866056, "link": "https://stackoverflow.com/questions/57866056/docker-postgres-container-is-not-starting-for-rails-application", "title": "Docker Postgres container is not starting for Rails Application", "body": "<p>I am facing an issue on docker container. When I execute the <code>docker-compose up</code> to start the application the Postgres container is not starting.</p>\n\n<p><strong>Error which I get after docker-compose up</strong></p>\n\n<p><code>/usr/local/bundle/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `initialize': could not translate host name \"db\" to address: Name or service not known (PG::ConnectionBad)</code></p>\n\n<p>Now it is frequently happing. I tried with few steps as add ports for <code>db</code> container i.e <code>5432:5432</code>. I used to start-stop the specific db container so that the connection should get re-established but it is not working.</p>\n\n<p>Application details:</p>\n\n<p>Rails Version: 4.2.0 Ruby version: 2.2.0</p>\n\n<p><code>docker-compose.yml</code></p>\n\n<pre><code>version: '3.7'\n\nservices:\n  selenium:\n    image: selenium/standalone-chrome-debug:3.141.59-krypton\n    ports: ['4444:4444', '5900:5900']\n    logging:\n      driver: none\n  redis:\n    image: redis:3.0.0\n  elastic:\n    image: elasticsearch:1.5.2\n  db:\n    image: postgres:9.3.10\n    volumes:\n      - ./tmp/db:/var/lib/postgresql/data\n      - .:/home\n  XYZ:\n    build: .\n    command: bash -c \"rm -f tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'\"\n    stdin_open: true\n    tty: true\n    volumes:\n      - XYZ-sync:/home:nocopy\n    ports:\n      - \"3000:3000\"\n    depends_on:\n      - db\n      - redis\n      - elastic\n      - selenium\n    environment:\n      - REDIS_URL=redis://redis:6379/0\n      - ELASTICSEARCH_URL=elastic://elastic:9200/0\n      - SELENIUM_HOST=selenium\n      - SELENIUM_PORT=4444\n      - TEST_APP_HOST=XYZ\n      - TEST_PORT=3000\n</code></pre>\n\n<p>db log</p>\n\n<pre><code>db_1          | LOG:  database system was shut down at 2019-09-10 07:37:08 UTC\ndb_1          | LOG:  MultiXact member wraparound protections are now enabled\ndb_1          | LOG:  database system is ready to accept connections\ndb_1          | LOG:  autovacuum launcher started\ndb_1          | LOG:  received smart shutdown request\ndb_1          | LOG:  autovacuum launcher shutting down\ndb_1          | LOG:  shutting down\ndb_1          | LOG:  database system is shut down\ndb_1          | LOG:  database system was shut down at 2019-09-10 07:37:50 UTC\ndb_1          | LOG:  MultiXact member wraparound protections are now enabled\ndb_1          | LOG:  database system is ready to accept connections\ndb_1          | LOG:  autovacuum launcher started\ndb_1          | LOG:  database system was interrupted; last known up at 2019-09-10 07:38:31 UTC\ndb_1          | LOG:  received smart shutdown request\ndb_1          | LOG:  database system was interrupted; last known up at 2019-09-10 07:38:31 UTC\ndb_1          | LOG:  database system was not properly shut down; automatic recovery in progress\ndb_1          | LOG:  record with zero length at 0/1D8F0120\ndb_1          | LOG:  redo is not required\ndb_1          | LOG:  MultiXact member wraparound protections are now enabled\ndb_1          | LOG:  autovacuum launcher started\ndb_1          | LOG:  database system is ready to accept connections\ndb_1          | LOG:  stats_timestamp 2019-09-10 08:02:39.288642+00 is later than collector's time 2019-09-10 08:02:39.189551+00 for database 0\ndb_1          | LOG:  database system was interrupted; last known up at 2019-09-10 08:18:02 UTC\ndb_1          | FATAL:  the database system is starting up\n</code></pre>\n\n<p><code>docker-compose ps</code> output</p>\n\n<pre><code>xyz_db_1           /docker-entrypoint.sh postgres   Up       5432/tcp                                      \nxyz_elastic_1      /docker-entrypoint.sh elas ...   Up       9200/tcp, 9300/tcp                            \nxyz_xyz_1   bash -c rm -f tmp/pids/ser ...   Exit 1                                                 \nxyz_redis_1        /entrypoint.sh redis-server      Up       6379/tcp                                      \nxyz_selenium_1     /opt/bin/entry_point.sh          Up       0.0.0.0:4444-&gt;4444/tcp, 0.0.0.0:5900-&gt;5900/tcp\n</code></pre>\n\n<p><code>database.yml</code></p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  pool: 5\n  username: postgres\n  password:\n  host: db\n\ndevelopment:\n  &lt;&lt;: *default\n  database: XYZ_development\n\ntest:\n  &lt;&lt;: *default\n  database: XYZ_test\n\ndevelopment_migrate:\n  adapter: mysql2\n  encoding: utf8\n  database: xyz_ee\n  username: root\n  password:\n  host: localhost\n  pool: 5\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1568104338, "post_id": 57865621, "comment_id": 102158923, "body": "IMHO all your assumptions are correct. But it feels to me like you miss the most obvious answer to how to keep the memory consumption low: <i>Do not load all records into memory at the same time.</i> Use pagination in views and if you need to iterate through all records use <code>find_each</code> or <code>find_in_batches</code> instead of <code>all.each</code>."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1568104691, "post_id": 57865621, "comment_id": 102159110, "body": "I agree with @spickermann. It doesn&#39;t make sense to load 400k objects because on server side it will consume a lot of memory and client&#39;s browser will just stuck trying to render all these objects. Also you could use <code>Product.pluck(:id)</code> because it will return a plain Array rather not array of ActiveRecord objects"}, {"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1568109344, "post_id": 57865621, "comment_id": 102161555, "body": "Thanks, and I know. I could have made it more clear that I have simplified my question in order to make the point of the question be more clear. I do not load all those products into view! I heavily use pluck and find_each, this is merely to be certain of some principles so I know how to trouble shoot."}], "owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1568100202, "creation_date": 1568099081, "last_edit_date": 1568100202, "question_id": 57865621, "link": "https://stackoverflow.com/questions/57865621/will-many-attributes-use-much-more-memory-in-a-rails-app", "title": "Will many attributes use (much) more memory in a Rails app?", "body": "<p>As a Ruby on Rails-programmer I am constantly struggling with memory problems and my apps on Heroku often hit the 100% mark. As I have learned RoR by learning-by-doing and mostly by myself I believe I have missed quite a lot of conventions and best practises in terms of, specifically, memory conservation.</p>\n\n<p>Measuring memory usage is difficult, even using great gems as <code>derailed</code> as it will only give me very indirect pointers to code that will use too much memory.</p>\n\n<p>I tend to use a lot of gems and a lot of attributes on my major models. My most important one, my Product model, holds some 40 attributes and there are about 400.000 objects in my database. Which brings me to my question, or rather clarifications.</p>\n\n<p>A. I assume that if I do a <code>Product.all</code> request in the controller it will load some (400.000*40 = ) 16M \"fields\" (not sure what to call it) into memory, right?</p>\n\n<p>B. If I do <code>Product.where(&lt;query that brings up half of the objects&gt;)</code> will load 200.000*40= 8M \"fields\" into memory, right?</p>\n\n<p>C. If I do <code>Product.select(:id,:name, :price)</code> would bring 400.000*3= 1.2M \"fields\" into memory, right?</p>\n\n<p>D. I also assume that if I do selections of attributes that are integers (such as price) it will be less expensive than strings (such as name) which in term will be less expensive than text (such as description). In other word a <code>Product.select(:id)</code> will use less memory than <code>Product.select(:long_description_with_1000_characters)</code>, right?</p>\n\n<p>E. I also assume that if I do a search such as <code>Product.all.limit(30)</code>, it will use less memory than a <code>Product.all.limit(500)</code>, right?</p>\n\n<p>F. Considering all this, and assuming the answer is YES on all of the above I assume it would be worth the time to go through my code to find \"fat and greedy\" requests of the 16M type. In that case, what would be the most effective way, or tool, of understanding how many \"fields\" a certain request will use? At the moment, I think I will just go through the code and try to picture, and trouble shoot, each database request to see if it can be slimmed down.</p>\n\n<p>Edit: Another way of phrasing the (F) question: If I do a change to a certain database-request. How can I tell if it is using less memory, or not? My current approach is to upload to Heroku on my production app and check the total memory usage, which is VERY blunt obviously.</p>\n\n<p>FYI: I am using Scout on Heroku to find memory bloats which is useful to some extent. I also use <code>bullet</code> gem to find N+1 issues, which helps to speed up requests but I am not sure if it affects memory issues.</p>\n\n<p>Any pointers to blog posts or similar that discuss this would be interesting as well. In addition, any comments on how to make sure requests like the above will not bloat or use too much memory would be highly appreciated.</p>\n"}, {"tags": ["ruby", "google-chrome", "watir", "user-agent"], "owner": {"reputation": 246, "user_id": 1811914, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b70e80b7591b23ed17fbefd0502120d5?s=128&d=identicon&r=PG", "display_name": "Allan", "link": "https://stackoverflow.com/users/1811914/allan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568093507, "creation_date": 1568093507, "question_id": 57864543, "link": "https://stackoverflow.com/questions/57864543/how-to-pass-chrome-options-in-webdriver-user-agent-gem-for-watir", "title": "How to pass Chrome options in webdriver-user-agent gem for watir", "body": "<p>I am trying to pass cookies option for Chrome Drive using Watir gem</p>\n\n<p>From Watir documentation i can do <code>Watir::Browser.new :chrome, opts</code></p>\n\n<p>So for cookies I can do: </p>\n\n<pre><code>    browser = Watir::Browser.new :chrome, options: {args: ['--user-data-dir=/cookies']} \n</code></pre>\n\n<p>When using the webdriver-user-agent gem for mobile testing, their documentation tells me to start the browser like this:</p>\n\n<pre><code>driver = Webdriver::UserAgent.driver(browser: :chrome, agent: :iphone)\nbrowser = Watir::Browser.new driver\n</code></pre>\n\n<p>But now I don't know how I can pass the option for the Chrome</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium-webdriver", "rubygems"], "comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1604419837, "post_id": 57863565, "comment_id": 114339278, "body": "I had to update my <code>puma</code> gem from <code>4.x</code> to <code>5.x</code> and then removed <code>preload_app!</code> from <code>config&#47;puma.rb</code>."}], "answers": [{"comments": [{"owner": {"reputation": 898, "user_id": 33866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ce7965fcb4f0c75bc5b30c88506a88fa?s=128&d=identicon&r=PG", "display_name": "jmaxyz", "link": "https://stackoverflow.com/users/33866/jmaxyz"}, "edited": false, "score": 0, "creation_date": 1610995590, "post_id": 57949414, "comment_id": 116303814, "body": "We&#39;re having trouble with this too, but we&#39;re trying to make parallel testing work, because it&#39;s supposed to. We get the Bad file descriptor (Errno::EBADF) after a handful of tests are run if we run it against mysql 8.0, but mysql 5.7 doesn&#39;t exhibit the issue. Not sure that is a mysql version difference, a homebrew-default-mysql-configuration issue, or a mysql2 gem compilation issue."}, {"owner": {"reputation": 898, "user_id": 33866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ce7965fcb4f0c75bc5b30c88506a88fa?s=128&d=identicon&r=PG", "display_name": "jmaxyz", "link": "https://stackoverflow.com/users/33866/jmaxyz"}, "edited": false, "score": 0, "creation_date": 1612189074, "post_id": 57949414, "comment_id": 116681190, "body": "I&#39;ve opened an issue with Rails for this issue: <a href=\"https://github.com/rails/rails/issues/41176\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/41176</a>"}], "tags": [], "owner": {"reputation": 58, "user_id": 5503276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be3f5c63b5ffcc114dc5526f50250d0?s=128&d=identicon&r=PG&f=1", "display_name": "chrismaltais", "link": "https://stackoverflow.com/users/5503276/chrismaltais"}, "is_accepted": true, "score": 4, "last_activity_date": 1568597277, "creation_date": 1568597277, "answer_id": 57949414, "question_id": 57863565, "link": "https://stackoverflow.com/questions/57863565/running-rails-test-is-throwing-bad-file-descriptor-errnoebadf-error/57949414#57949414", "title": "Running &quot;rails test&quot; is throwing Bad file descriptor (Errno::EBADF) error", "body": "<p>In your <code>/test/test_helper.rb</code> file, remove parallel testing. Your file should look something like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ENV['RAILS_ENV'] ||= 'test'\nrequire_relative '../config/environment'\nrequire 'rails/test_help'\n\nclass ActiveSupport::TestCase\n  # Run tests in parallel with specified workers\n  # OLD: parallelize(workers: :number_of_processors)  &lt;--\n  parallelize(workers: 1) # i.e don't run tests in parallel via forked processes\n  # OR just comment the line above out completely &lt;--\n\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  # Add more helper methods to be used by all tests here...\nend\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7737406, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/828ef115d41d607e39d022984c6d7227?s=128&d=identicon&r=PG&f=1", "display_name": "deepak asai", "link": "https://stackoverflow.com/users/7737406/deepak-asai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1398, "favorite_count": 0, "accepted_answer_id": 57949414, "answer_count": 1, "score": 3, "last_activity_date": 1568597277, "creation_date": 1568085256, "question_id": 57863565, "link": "https://stackoverflow.com/questions/57863565/running-rails-test-is-throwing-bad-file-descriptor-errnoebadf-error", "title": "Running &quot;rails test&quot; is throwing Bad file descriptor (Errno::EBADF) error", "body": "<p>I am using rails 6. I followed the tutorial in \"<a href=\"https://www.learnenough.com/ruby-on-rails-4th-edition-tutorial\" rel=\"nofollow noreferrer\">https://www.learnenough.com/ruby-on-rails-4th-edition-tutorial</a>\" to develop a sample rails application. However, when I try to run \"rails test\", it is throwing <strong>Bad file descriptor (Errno::EBADF) error</strong>. </p>\n\n<p>My GEM file:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.0'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 6.0.0'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5'\n# Transpile app-like JavaScript. Read more: https://github.com/rails/webpacker\ngem 'webpacker', '~&gt; 4.0'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.7'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use Active Model has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Active Storage variant\n# gem 'image_processing', '~&gt; 1.2'\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.4.2', require: false\n\ngroup :development, :test do\n\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do \n# Use mysql2 as the database for Active Record\n  gem 'mysql2', '~&gt; 0.5.2'\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15'\n  gem 'selenium-webdriver'\n  # Easy installation and use of web drivers to run system tests with browsers\n  gem 'webdrivers'\nend\n\ngroup :production do\n  gem 'pg', '~&gt; 1.1', '&gt;= 1.1.4'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>The error that I got when running \"rails test\" is </p>\n\n<pre><code>Running via Spring preloader in process 6349\nRun options: --seed 17984\n\n# Running:\n\n.Traceback (most recent call last):\nTraceback (most recent call last):\n        28: from -e:1:in `&lt;main&gt;'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        28: from -e:1:in `&lt;main&gt;'\n        25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\n        26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n        25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\n        24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\n        23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\n        20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n        19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n        20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n        18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\nTraceback (most recent call last):\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n        28: from -e:1:in `&lt;main&gt;'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friend'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friend'\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n        26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n        25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n        24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n        23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\n         1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable'  20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n:        1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\nBad file descriptor/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable':  (Bad file descriptor      19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n (Errno::EBADFErrno::EBADF      18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\n)\n)\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friTraceback (most recent call last):\nTraceback (most recent call last):\nend'\nTraceback (most recent call last):\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n        28: from -e:1:in `&lt;main&gt;'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n        28: from -e:1:in `&lt;main&gt;'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n        28: from -e:1:in `&lt;main&gt;'\n        26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n        27: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n         1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable'  26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n:       25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        26: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\nBad file descriptor (   23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n        25: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\nErrno::EBADF    24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n        23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n)\n        20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\n        19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n        24: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `run'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n        18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\n        19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n        23: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:139:in `loop'\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friend'\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n        22: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:145:in `block in run'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n        21: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `serve'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n        20: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/spring-2.1.0/lib/spring/application.rb:175:in `fork'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n        19: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n        18: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:133:in `run'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friend'\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n         1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable': Bad file descriptor (Errno::EBADF)\n         1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable': Bad file descriptor (Errno::EBADF)\n        17: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `start'\n        16: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `map'\n        15: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `each'\n        14: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:74:in `times'\n        13: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `block in start'\n        12: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:75:in `fork'\n        11: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:95:in `block (2 levels) in start'\n        10: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1139:in `method_missing'\n         9: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1159:in `with_friend'\n         8: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1140:in `block in method_missing'\n         7: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `open'\n         6: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1214:in `synchronize'\n         5: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `block in open'\n         4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1217:in `each'\n         3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1219:in `block (2 levels) in open'\n         2: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1263:in `alive?'\n         1: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `alive?'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/2.5.0/drb/drb.rb:1006:in `wait_readable': Bad file descriptor (Errno::EBADF)\nTraceback (most recent call last):\n        5: from -e:1:in `&lt;main&gt;'\n        4: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        3: from /Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        2: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'\n        1: from /Users/deepak/.rvm/gems/ruby-2.5.0/gems/minitest-5.11.3/lib/minitest.rb:140:in `run'\n/Users/deepak/.rvm/rubies/ruby-2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-6.0.0/lib/active_support/testing/parallelization.rb:118:in `shutdown': Queue not empty, but all workers have finished. This probably means that a worker crashed and 8 tests were missed. (RuntimeError)\n</code></pre>\n\n<p>Note: I have set the default environment as Test and then ran my application.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "logging"], "comments": [{"owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1568082362, "post_id": 57863166, "comment_id": 102152302, "body": "how you start you application in Dockerfile? better to post your dockerfile"}, {"owner": {"reputation": 1134, "user_id": 2247108, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d601cc9ee5b85a468724e8d0d29a0da9?s=128&d=identicon&r=PG", "display_name": "Justin Adkins", "link": "https://stackoverflow.com/users/2247108/justin-adkins"}, "reply_to_user": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1568083183, "post_id": 57863166, "comment_id": 102152437, "body": "@Adiii I don&#39;t think that has anything to do with it but my docker-compose command is <code>&quot;bundle&quot;, &quot;exec&quot;, &quot;rails&quot;, &quot;s&quot;, &quot;-b&quot;, &quot;0.0.0.0&quot;, &quot;-p&quot;, &quot;5000&quot;</code>"}, {"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568088307, "post_id": 57863166, "comment_id": 102153363, "body": "I&#39;d take a look at <a href=\"https://blog.eq8.eu/til/ruby-logs-and-puts-not-shown-in-docker-container-logs.html\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 1134, "user_id": 2247108, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d601cc9ee5b85a468724e8d0d29a0da9?s=128&d=identicon&r=PG", "display_name": "Justin Adkins", "link": "https://stackoverflow.com/users/2247108/justin-adkins"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568088917, "post_id": 57863166, "comment_id": 102153472, "body": "@MarkMerritt, sorry I should have mentioned that tried that as well. If you look in the comments, I&#39;m the Justin Adkins that commented the other day lol. Since that wasn&#39;t able to solve my problem, it led me to believe the the issue wasn&#39;t with docker but with rails itself. Docker is picking up logs just fine. It seems rails isn&#39;t outputting them correctly for some reason."}], "answers": [{"tags": [], "owner": {"reputation": 1134, "user_id": 2247108, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d601cc9ee5b85a468724e8d0d29a0da9?s=128&d=identicon&r=PG", "display_name": "Justin Adkins", "link": "https://stackoverflow.com/users/2247108/justin-adkins"}, "is_accepted": false, "score": 1, "last_activity_date": 1568090212, "creation_date": 1568090212, "answer_id": 57864116, "question_id": 57863166, "link": "https://stackoverflow.com/questions/57863166/rails-not-logging-requests/57864116#57864116", "title": "Rails not logging requests", "body": "<p>Ugh. I feel like the biggest schmuck but I've figured out the issue. </p>\n\n<p>I went back though source-control to see what has changed recently. In addition to the <code>elastic-apm</code> gem, I also added the <a href=\"https://github.com/Unleash/unleash-client-ruby\" rel=\"nofollow noreferrer\">Unleash</a> gem. </p>\n\n<p>I went to check out it's configuration and it looks like following their recommenced <a href=\"https://github.com/Unleash/unleash-client-ruby/blob/master/README.md#add-initializer\" rel=\"nofollow noreferrer\">configuration</a> causes logging to break. The line that was specifically causing offense was in the unleash initializer setting <code>config.logger = Rails.logger</code></p>\n"}], "owner": {"reputation": 1134, "user_id": 2247108, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d601cc9ee5b85a468724e8d0d29a0da9?s=128&d=identicon&r=PG", "display_name": "Justin Adkins", "link": "https://stackoverflow.com/users/2247108/justin-adkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568090212, "creation_date": 1568081440, "last_edit_date": 1568089023, "question_id": 57863166, "link": "https://stackoverflow.com/questions/57863166/rails-not-logging-requests", "title": "Rails not logging requests", "body": "<p>I'm <em>utterly</em> stumped as to why I'm not able to see the Rails controller outputs in my development log. I've spent days beating my head against a wall trying to figure this out and I'm not sure what else to try.</p>\n\n<p><strong>Setup:</strong> Rails <code>5.2.3</code> app running ruby <code>2.6.3</code> via <code>docker-compose</code>. </p>\n\n<p>It started with me not being able to see my app logs when running <code>docker logs &lt;container-name&gt;</code>. However, I soon realized that I was able to see the output from <code>puma</code> starting and a <code>shell</code> script that ran <code>rake</code> tasks that the issue might be with <code>rails</code>.</p>\n\n<p>To help assist with finding the issue:</p>\n\n<ul>\n<li>Tore down and rebuilt the docker environment, <em>several times</em></li>\n<li>Stopped writing via <code>STDOUT</code> in favor of <code>logs/development.log</code></li>\n<li>Disabled <code>lograge</code> and <code>elastic-apm</code>, just in case</li>\n<li>Reverted my <code>development.rb</code> config back to what's generated with a <code>rails new</code></li>\n<li>Followed the suggestions <a href=\"https://blog.eq8.eu/til/ruby-logs-and-puts-not-shown-in-docker-container-logs.html\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n\n<p>However, when running the rails console via <code>docker exec -it &lt;container-name&gt;</code>:</p>\n\n<ul>\n<li>Running <code>Rails.logger.level</code> returns <code>2</code> which is <code>warn</code>, despite the default logging level being <code>dev</code></li>\n<li>I'm able to see log output when running <code>Rails.logger.warn 'foo'</code></li>\n<li>After setting <code>Rails.logger.level = 0</code> I'm able to see output when running <code>Rails.logger.debug 'foo'</code></li>\n</ul>\n\n<p>I tried setting the value explicitly as <code>config.log_level = :debug</code> in <code>development.rb</code> yet it still set itself to the <code>warn</code> level.</p>\n\n<p>However, I'm still not able to see any logs when navigating the application. Any thoughts?</p>\n"}, {"tags": ["ruby", "rubygems", "spreadsheet"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1568090385, "post_id": 57863046, "comment_id": 102153781, "body": "This could be Excel not wrapping cells. Not sure if you can set that from your program. Also you could try <code>book.row(i + 1).push book.author, book.titles.join(&quot;\\n&quot;)</code>"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1568090678, "post_id": 57863046, "comment_id": 102153835, "body": "Or possibly even <code>book.titles.join(&quot;\\r\\n&quot;)</code> for Windows if it wants carriage-return line-feed instead of just a new line."}], "owner": {"reputation": 396, "user_id": 1814518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f1ad1dbc8cfc1c40988a6b6bec9c5a2?s=128&d=identicon&r=PG", "display_name": "Glenn", "link": "https://stackoverflow.com/users/1814518/glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568089871, "creation_date": 1568080055, "last_edit_date": 1568089871, "question_id": 57863046, "link": "https://stackoverflow.com/questions/57863046/write-excel-spreadsheet-with-spreadsheet-gem", "title": "Write Excel Spreadsheet with Spreadsheet Gem", "body": "<p>I am writing a spreadsheet with the Ruby Spreadsheet gem.</p>\n\n<p>Mostly, it works, but the gem apparently removes carriage returns from the strings that I am putting into the spreadsheet.</p>\n\n<p>I am using Windows, Ruby v 2.3.3 and the Spreadsheet gem v1.1.7.</p>\n\n<p>I have an array of objects for a bunch of books. Each element contains a book object which contains information on the titles of the book. The titles have carriage returns -- \\n -- and I want those to show as carriage returns in the spreadsheet that gets created. But the titles just come out as one long string. </p>\n\n<pre><code>require \"spreadsheet\"\n\nmy_home_library = Spreadsheet::Workbook.new\nsheet1 = my_home_library.create_worksheet :name =&gt; 'Books'\n\nsheet1.row(0).concat [\"Author\", \"Titles\"]\n\nbooks.each_with_index do |book, i|\n  book.row(i + 1).push book.author, book.titles\nend\n\nmy_home_library.write \"./My_Home_Library.xls\"\n</code></pre>\n\n<p>I get the spreadsheet. Everything seems fine, except that, for multi-line book titles, I get one long string and no line breaks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "testing"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1568077662, "post_id": 57862642, "comment_id": 102151519, "body": "What have you tried? What has worked? What hasn&#39;t?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568078558, "post_id": 57862642, "comment_id": 102151660, "body": "further to @jvillian &#39;s point, please see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568079574, "post_id": 57862642, "comment_id": 102151830, "body": "@lacostenycoder I updated my question with my actual attempt"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568079589, "post_id": 57862642, "comment_id": 102151833, "body": "@jvillian just updated the question with my actual attempt"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1568091270, "post_id": 57862642, "comment_id": 102153959, "body": "@Alecsander: Hint: For instance in the case <code>n == 5</code>, persons equals 4 and the loop goes from 0 to 4, hence the highest value for the variable <code>person</code> will be 4. You use <code>person+1</code>, i.e. 5, to index the arrray <code>direction</code> and since there is no element 5, <code>directions[5]</code>  will return <code>nil</code>. Same for <code>time[person+1], which will also be </code>nil` in this case."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1568091431, "post_id": 57862642, "comment_id": 102153999, "body": "@Alecsander: Also, as jvillian pointed out, it is not sufficient that you post your attempt, but also what hastn&#39;t worked, i.e. which output you expected."}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1568123314, "post_id": 57862642, "comment_id": 102169354, "body": "@user1934428 What not worked in this case is, Person 0 go out/enter in time 2, but i cant figure out how to, for person[0] discover what time he is going out or enter"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1568125136, "post_id": 57862642, "comment_id": 102170431, "body": "In your example 2, according to your specification, person 0 uses the turnstile at time[0], that is at time 0."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568145908, "post_id": 57862642, "comment_id": 102179838, "body": "Why the downvotes? The question seems clear. This is yet another example of the absence of a comment accompanying a downvote providing no direction for how the question can be clarified or improved."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568188232, "post_id": 57862642, "comment_id": 102191360, "body": "I get different results for your examples for <code>n=4</code> and <code>n=5</code>. Consider <code>n=4</code>. See the ordering I obtained for that example in my answer: <code>[{:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;0, :pass_time=&gt;1},  {:person=&gt;2, :direction=&gt;:EXIT,  :arrival_time=&gt;1, :pass_time=&gt;2},  {:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0, :pass_time=&gt;3},   {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;5, :pass_time=&gt;6}]</code>. Persons 1 and 0 arrive at time 0. Both are exiting, so there is no priority. I have person 1 leaving at time 0, emerging from the turnstile at time 1..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568188619, "post_id": 57862642, "comment_id": 102191545, "body": "At time 1 person 0 is still waiting and person 2 arrives. Even though person 0 arrived first, person 1 has priority, as person 1, like person 1 before, is exiting. Hence, person 2 goes through the turnstile and emerges at time 2. At time 2 person 0 is the only person waiting so person 0 goes through the turnstile, emerging at time 3. Person 3 then arrives at time 5, sees the turnstile is free and no one is waiting, so person 3 enters the turnstile and emerges at time 6. Is that not the correct interpretation?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568402373, "post_id": 57862642, "comment_id": 102276005, "body": "Did you find the provided answers correct/helpful? You might consider accepting/upvoting."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568145453, "post_id": 57876724, "comment_id": 102179672, "body": "Your answer looks interesting. I don&#39;t have time to read it now but will do so later."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568145777, "post_id": 57876724, "comment_id": 102179782, "body": "Thanks @CarySwoveland. I&#39;ll look forward to your comments with a mix of anticipation and some trepidation. Cheers!"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1568157618, "post_id": 57876724, "comment_id": 102183077, "body": "OOo thanks @jvillian, thanks for using comments in your code. I will read then and ask if I dont understand something.."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568255470, "post_id": 57876724, "comment_id": 102218785, "body": "I haven&#39;t gone through this thoroughly, but is there not a problem if <code>time = [1,1,1]</code> and <code>direction = [0,0,1]</code>, in which case the person wanting to exit has priority (but your initial values for <code>p1</code> and <code>p2</code> correspond to the two persons who are entering)?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568264230, "post_id": 57876724, "comment_id": 102220549, "body": "@CarySwoveland By golly, by gum, I think you might just be right! I considered doing a proper queue (as you have done), but abandoned that notion along the way. I think that was a mistake. In a queue situation, the third person would be the first person in their queue and would, therefore, be in the first pair-wise comparison. Yes? Then the result would be <code>[1,2,0]</code>. Yes? I may take another run at it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568267305, "post_id": 57876724, "comment_id": 102221441, "body": "Yes. Here&#39;s an idea. Each time a person emerges from the turnstile at time <code>v</code> replace each of the remaining arrival times <code>t</code> with <code>t = [t,v].max</code>, then select all the next persons with the same time <code>t</code>, and examine them as a group to determine which will next go through the turnstile."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569048623, "post_id": 57876724, "comment_id": 102477020, "body": "We still seem to be interpreting the process differently. Consider your example with <code>time = [0,0,1,5]</code>, <code>direction = [0,1,1,0]</code>. Your expected pass times are <code>[2,0,1,5]</code>. Persons <code>0</code> and <code>1</code> both arrive at time <code>0</code>. Person <code>1</code> has priority because they are exiting (direction = 1) whereas  Person 0 is entering (direction = 0). Person <code>1</code> emerges from the gate at time <code>1</code>. At that time Person <code>0</code> is still waiting to enter and Person 2 has just arrived. Since Person 1 exited, Person 2, who also wishes to exit, has priority of Person 0, who wishes to enter..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569049091, "post_id": 57876724, "comment_id": 102477094, "body": "...Person 2 exits at time 3. At that time Person 0 is the only one waiting so that person enters the gates and emerges at time 4. Lastly, person 3 arrives at time 5 and, being the only one in line passes through the gate, emerging at time 6. I therefore compute the emerging-from-the gate times to be <code>[4, 1, 2, 6]</code> and the entering-the-gate times to be <code>[3, 0, 1, 5]</code>. No?"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1568279479, "last_edit_date": 1568279479, "creation_date": 1568141586, "answer_id": 57876724, "question_id": 57862642, "link": "https://stackoverflow.com/questions/57862642/learning-ruby-how-to-solve-this-problem-with-ruby/57876724#57876724", "title": "Learning ruby: How to solve this problem with ruby?", "body": "<p>stackoverflow isn't usually a code writing service. But, it turns out this was an interesting problem. </p>\n\n<p>So, I wrote some code for you. Here it is:</p>\n\n<pre><code>def calculate_turnstile_times(time, direction)\n  current_time    = 0\n  dir = direction.map { |d| d.zero? ? :enter : :exit }\n  enter_queue, exit_queue = time.each_index.map do |i|\n                              {person: i, time: time[i], direction: dir[i]}\n                            end.partition do |h| \n                              h[:direction] == :enter\n                            end.map do |arr| \n                              arr.sort_by { |h| h[:time] }\n                            end  \n\n  enterer         = enter_queue.shift\n  exiter          = exit_queue.shift\n\n  time.each_with_object([]) do |_t, to_return|\n    person_to_go        = nil\n    enterer           ||= enter_queue.shift\n    exiter            ||= exit_queue.shift\n    current_time        = [[enterer,exiter].map{|p|p.try(:[],:time)}.compact.min,current_time].max\n\n    enterer_arrived     = enterer &amp;&amp; enterer[:time] &lt;= current_time\n    exiter_arrived      = exiter &amp;&amp; exiter[:time] &lt;= current_time\n\n    person_to_go    = :enterer if enterer_arrived &amp;&amp; !exiter_arrived\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; !enterer_arrived\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; to_return.empty?\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; ((to_return.last.try(:[],:time)||-2) != (current_time-1))\n    person_to_go  ||= :enterer if enterer_arrived &amp;&amp; to_return.last.try(:[],:direction) == :enter\n    person_to_go  ||= :exiter  if exiter_arrived\n\n    case person_to_go\n    when :exiter\n      person_to_go = exiter \n      exiter = nil\n    when :enterer \n      person_to_go = enterer\n      enterer = nil\n    end\n\n    person_to_go[:time] = current_time\n    to_return &lt;&lt; person_to_go\n    current_time += 1\n\n  end.sort_by{|p| p[:person]}.map{|p| p[:time]}\nend\n</code></pre>\n\n<p>Here's an RSpec test in case you want to try it out:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe \"Turnstiles\" do\n  it \"using calculate_turnstile_times\" do \n    %i(calculate_turnstile_times).each do |method_sym|\n      test_cases.each do |test_case|\n        expect(send(method_sym,test_case[0],test_case[1])).to eq(test_case[2])\n      end\n    end\n  end\nend\n\ndef test_cases\n  [\n    [[10],[1],[10]],\n    [[0,0,0],[0,0,1],[1,2,0]],\n    [[0,0,1,5],[0,1,1,0],[2,0,1,5]],\n    [[0,0],[0,1],[1,0]],\n    [[0,0],[1,1],[0,1]],\n    [[0,0],[1,0],[0,1]],\n    [[4,4],[0,1],[5,4]],\n    [[0,0,0],[0,1,1],[2,0,1]],\n    [[0,0,0],[0,0,0],[0,1,2]],\n    [[0,0,0,0],[0,1,1,1],[3,0,1,2]],\n    [[0,0,0,5],[0,1,1,1],[2,0,1,5]],\n    [[0,1,1,3,3],[0,1,0,0,1],[0,2,1,4,3]],\n    [[0,1,1,3,3],[0,1,1,0,1],[0,1,2,4,3]],\n    [[0,1,1,6,7],[0,1,1,0,1],[0,1,2,6,7]],\n    [[0,1,1,3,6],[0,1,1,0,1],[0,1,2,3,6]],\n    [[0,0,1,5],[0,1,1,0],[2,0,1,5]],\n    [[0,1,1,3,3],[0,1,0,0,1],[0,2,1,4,3]]\n  ]\nend\n\ndef calculate_turnstile_times(time, direction)\n  current_time    = 0\n  dir = direction.map { |d| d.zero? ? :enter : :exit }\n  enter_queue, exit_queue = time.each_index.map do |i|\n                              {person: i, time: time[i], direction: dir[i]}\n                            end.partition do |h| \n                              h[:direction] == :enter\n                            end.map do |arr| \n                              arr.sort_by { |h| h[:time] }\n                            end  \n\n  enterer         = enter_queue.shift\n  exiter          = exit_queue.shift\n\n  time.each_with_object([]) do |_t, to_return|\n    person_to_go    = nil\n    enterer           ||= enter_queue.shift\n    exiter            ||= exit_queue.shift\n    current_time        = [[enterer,exiter].map{|p|p.try(:[],:time)}.compact.min,current_time].max\n\n    enterer_arrived     = enterer &amp;&amp; enterer[:time] &lt;= current_time\n    exiter_arrived      = exiter &amp;&amp; exiter[:time] &lt;= current_time\n\n    person_to_go    = :enterer if enterer_arrived &amp;&amp; !exiter_arrived\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; !enterer_arrived\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; to_return.empty?\n    person_to_go  ||= :exiter  if exiter_arrived  &amp;&amp; ((to_return.last.try(:[],:time)||-2) != (current_time-1))\n    person_to_go  ||= :enterer if enterer_arrived &amp;&amp; to_return.last.try(:[],:direction) == :enter\n    person_to_go  ||= :exiter  if exiter_arrived\n\n    case person_to_go\n    when :exiter\n      person_to_go = exiter \n      exiter = nil\n    when :enterer \n      person_to_go = enterer\n      enterer = nil\n    end\n\n    person_to_go[:time] = current_time\n    to_return &lt;&lt; person_to_go\n    current_time += 1\n\n  end.sort_by{|p| p[:person]}.map{|p| p[:time]}\nend\n</code></pre>\n\n<p>Which gives me:</p>\n\n<pre><code>11:44:24 - INFO - Running: spec/so/turnstiles_spec.rb\n\nTurnstiles\n  using calculate_turnstile_times\n\nFinished in 0.14996 seconds (files took 1.06 seconds to load)\n1 example, 0 failures\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568147059, "post_id": 57877411, "comment_id": 102180303, "body": "Hi there. When I run the first provided case, I get <code>[1, 2, 3, 6]</code> where the expected is <code>[2, 0, 1, 5]</code>. When I run the second provided case, I get <code>[1, 2, 3, 4, 5]</code> where the expected is <code>[0, 2, 1, 4, 3]</code>. Do you get different results? Perhaps I&#39;ve munged my RSpec test set up..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1568150353, "post_id": 57877411, "comment_id": 102181377, "body": "@jvillian, I just noticed your comment. I may have addressed that with a fix I made awhile ago (I had <code>arr = c.map { |h| h[:pass_time] }</code> in the last line), but I just noticed another problem that I&#39;ll fix in awhile. Stay tuned."}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1568157525, "post_id": 57877411, "comment_id": 102183055, "body": "Thanks @CarySwoveland I will read your code to understand it. Than I ask if I dont understand something."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568189082, "post_id": 57877411, "comment_id": 102191778, "body": "@jvillian, I think I fixed my answer, but you can see that for the examples from the question for <code>n = 4</code> and <code>n = 5</code> I get results that are different than both what you got and the expected results. See my comments on the question for the <code>n = 4</code> example. Maybe they will show how our interpretations of the rules may differ."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1568279684, "post_id": 57877411, "comment_id": 102226957, "body": "Updated my answer - now handles the case you posed in comments. I <i>borrowed</i> some stuff from you. But, yours is still much better. (Except that mine actually returns the results given in the question. ;-} ) Now if I could only figure out how to actually get paid for programming..."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1569048258, "last_edit_date": 1569048258, "creation_date": 1568145272, "answer_id": 57877411, "question_id": 57862642, "link": "https://stackoverflow.com/questions/57862642/learning-ruby-how-to-solve-this-problem-with-ruby/57877411#57877411", "title": "Learning ruby: How to solve this problem with ruby?", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def pass_times(time, direction)\n  dir = direction.map { |d| d.zero? ? :ENTER : :EXIT }\n  enter, exit = time.each_index.map do |i|\n    { person: i, direction: dir[i], arrival_time: time[i] }\n  end.partition { |h| h[:direction] == :ENTER }.\n      map { |arr| arr.sort_by { |h| h[:arrival_time] } }  \n  time.each_index.with_object([]) do |_i,arr|\n    last_pass = last_pass_time(arr)\n    next_enter_time = enter.empty? ? Float::INFINITY :\n      [enter.first[:arrival_time], last_pass].max \n    next_exit_time  = exit.empty?  ? Float::INFINITY :\n      [exit.first[:arrival_time], last_pass].max\n    h = case\n    when last_pass_time(arr) &lt; [next_enter_time, next_exit_time].min\n      g = next_exit_time &lt;= next_enter_time ? exit.shift : enter.shift\n      add_pass_time(g, g[:arrival_time] + 1) \n    when next_enter_time &lt; next_exit_time\n      add_pass_time(enter.shift, last_pass + 1)\n    when next_exit_time &lt; next_enter_time\n      add_pass_time(exit.shift, last_pass + 1)\n    else\n      add_pass_time(arr.last[:direction] == :ENTER ?\n        enter.shift : exit.shift, last_pass + 1)\n    end\n    arr &lt;&lt; h \n  end.sort_by { |h| h[:person] }.map { |h| h[:pass_time] }\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def last_pass_time(arr)\n  arr.empty? ? -1 : arr.last[:pass_time]\nend\n\ndef add_pass_time(g, pass_time)\n  g.merge(:pass_time =&gt; pass_time)\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>time = [0,1,1,3,3]\ndirection = [0,1,0,0,1]\n\npass_times(time, direction)\n  #=&gt; [1, 3, 2, 5, 4] (compares with [0,2,1,4,3] from the question)\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>time = [0,0,1,5]\ndirection = [0,1,1,0]\n\npass_times(time, direction)\n  #=&gt; [3, 1, 2, 6] (compares with [2,0,1,5] from the question)\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>n = 10\ntime = n.times.map { rand 13 }\n  #=&gt; [3, 5, 1, 12, 7, 3, 9, 3, 9, 0] \ndirection = n.times.map { rand 2 }\n  #=&gt; [0, 0, 0, 1, 0, 0, 0, 1, 1, 1] \n\npass_times(time, direction)\n  #=&gt; [5, 7, 2, 13, 8, 6, 11, 4, 10, 1] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The following are the steps for the first example above.</p>\n\n<pre><code>time = [0,1,1,3,3]\ndirection = [0,1,0,0,1]\n</code></pre>\n\n<p>Firstly, to improve readability and avoid the problem of getting zero and one mixed up for entering and exiting, I've chosen to use the array <code>dir</code> in place of <code>direction</code>:</p>\n\n<pre><code>dir = direction.map { |d| d.zero? ? :ENTER : :EXIT }\n  #=&gt; [:ENTER, :EXIT, :ENTER, :ENTER, :EXIT] \n</code></pre>\n\n<p>Next, create an array of hashes that contain essential information for each person approaching the turnstle.</p>\n\n<pre><code>a = time.each_index.map do |i|\n  { person: i, direction: dir[i], arrival_time: time[i] }\nend\n  #=&gt; [{:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0},\n  #    {:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;1},\n  #    {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1},\n  #    {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;3},\n  #    {:person=&gt;4, :direction=&gt;:EXIT,  :arrival_time=&gt;3}] \n</code></pre>\n\n<p>Now partition these hashes into arrivals and departures.</p>\n\n<pre><code>b = a.partition { |h| h[:direction] == :ENTER }\n  #=&gt; [[{:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0},\n  #     {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1},\n  #     {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;3}],\n  #    [{:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;1},\n  #     {:person=&gt;4, :direction=&gt;:EXIT,  :arrival_time=&gt;3}]]\n</code></pre>\n\n<p>Now sort arrivals and departures into queues.</p>\n\n<pre><code>enter, exit = b.map { |arr| arr.sort_by { |h| h[:arrival_time] } }  \nenter\n  #=&gt; [{:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0},\n  #    {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1},\n  #    {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;3}] \nexit \n  #=&gt; [{:person=&gt;1, :direction=&gt;:EXIT, :arrival_time=&gt;1},\n  #    {:person=&gt;4, :direction=&gt;:EXIT, :arrival_time=&gt;3}] \n</code></pre>\n\n<p>We now process the two queues, saving the results into an array <code>c</code>. Note that <code>time.each_index</code> does nothing more than process every person in the queues. I could have instead written, for example, <code>dir.size.times</code>.</p>\n\n<pre><code>c = time.each_index.with_object([]) do |_i,arr|\n  last_pass = last_pass_time(arr)\n  next_enter_time = enter.empty? ? Float::INFINITY :\n    [enter.first[:arrival_time], last_pass].max \n  next_exit_time  = exit.empty?  ? Float::INFINITY :\n    [exit.first[:arrival_time], last_pass].max\n  # Note next_enter_time and next_exit_time cannot both be infinite\n  h = case\n  when last_pass_time(arr) &lt; [next_enter_time, next_exit_time].min\n    # if the turnstile was not used in the last second, FIFO with exit\n    # having priority in ties\n    g = next_exit_time &lt;= next_enter_time ? exit.shift : enter.shift\n    add_pass_time(g, g[:arrival_time] + 1) \n  when next_enter_time &lt; next_exit_time\n    # next entering person arrives before or when last person passes\n    # through turnstile and next exiting person has not yet joined the queue. \n    add_pass_time(enter.shift, last_pass + 1)\n  when next_exit_time &lt; next_enter_time\n    # next exiting person arrives before or when last person passes\n    # through turnstile and next entering person has not yet joined the queue. \n    add_pass_time(exit.shift, last_pass + 1)\n  else\n    # next entering and exiting persons both arrive arrive before or when last\n    # person passes through turnstile. Person who passes next depends if last\n    # person passing through the turnstile was entering or exiting.\n    add_pass_time(arr.last[:direction] == :ENTER ?\n      enter.shift : exit.shift, last_pass +1)\n  end\n  arr &lt;&lt; h \nend\n  #=&gt; [{:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0, :pass_time=&gt;1},\n  #    {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1, :pass_time=&gt;2},\n  #    {:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;1, :pass_time=&gt;3},\n  #    {:person=&gt;4, :direction=&gt;:EXIT,  :arrival_time=&gt;3, :pass_time=&gt;4},\n  #    {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;3, :pass_time=&gt;5}] \n</code></pre>\n\n<p>This shows that  person 0 was the first to arrive, at time 0, so that person went through the turnstile immediately, emerging at time (<code>:pass_time</code>) 1. Persons 2 and 1 both arrive at time 1, just as person 0 emerges from the turnstile. Person 2 next goes through the turnstile (emerging at time 2), because that person, like person 0, is entering, and therefore has priority over person 1, who wishes to exit.</p>\n\n<p>Person 1 next goes through the turnstile, emerging at time 3, because no one else was waiting at time 2. Persons 4 and 3 both arrive at time 3, as person 1 is emerging from the turnstile. This time person 4 has priority as that person, like person 1 immediately before, is exiting. Person 4 emerges from the turnstile at time 4, at which time person 3, the last person to go through, enters the turnstile and emerges at time 5.</p>\n\n<p>It remains to create that an array <code>arr</code> such that <code>arr[i]</code> returns the pass time for person <code>i</code>.</p>\n\n<pre><code>arr = c.sort_by { |h| h[:person] }.map { |h| h[:pass_time] }\n  #=&gt; [1, 3, 2, 5, 4]\n</code></pre>\n\n<p>Example #2 results in the following turnstile passage order.</p>\n\n<pre><code>[{:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;0, :pass_time=&gt;1},\n {:person=&gt;2, :direction=&gt;:EXIT,  :arrival_time=&gt;1, :pass_time=&gt;2},\n {:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0, :pass_time=&gt;3}, \n {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;5, :pass_time=&gt;6}] \n</code></pre>\n\n<p>Example #3 results in the following turnstile passage order.</p>\n\n<pre><code>[{:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;0, :pass_time=&gt;1},\n {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1, :pass_time=&gt;2}, \n {:person=&gt;1, :direction=&gt;:EXIT,  :arrival_time=&gt;1, :pass_time=&gt;3}, \n {:person=&gt;4, :direction=&gt;:EXIT,  :arrival_time=&gt;3, :pass_time=&gt;4}, \n {:person=&gt;3, :direction=&gt;:ENTER, :arrival_time=&gt;3, :pass_time=&gt;5}] \n</code></pre>\n\n<p>Example #4 results in the following turnstile passage order.</p>\n\n<pre><code>[{:person=&gt;9, :direction=&gt;:EXIT,  :arrival_time=&gt;0,  :pass_time=&gt;1},\n {:person=&gt;2, :direction=&gt;:ENTER, :arrival_time=&gt;1,  :pass_time=&gt;2},\n {:person=&gt;7, :direction=&gt;:EXIT,  :arrival_time=&gt;3,  :pass_time=&gt;4}, \n {:person=&gt;0, :direction=&gt;:ENTER, :arrival_time=&gt;3,  :pass_time=&gt;5}, \n {:person=&gt;5, :direction=&gt;:ENTER, :arrival_time=&gt;3,  :pass_time=&gt;6}, \n {:person=&gt;1, :direction=&gt;:ENTER, :arrival_time=&gt;5,  :pass_time=&gt;7}, \n {:person=&gt;4, :direction=&gt;:ENTER, :arrival_time=&gt;7,  :pass_time=&gt;8}, \n {:person=&gt;8, :direction=&gt;:EXIT,  :arrival_time=&gt;9,  :pass_time=&gt;10}, \n {:person=&gt;6, :direction=&gt;:ENTER, :arrival_time=&gt;9,  :pass_time=&gt;11}, \n {:person=&gt;3, :direction=&gt;:EXIT,  :arrival_time=&gt;12, :pass_time=&gt;13}] \n</code></pre>\n\n<p>I will leave it to the reader to verify these ordering.</p>\n"}, {"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1568533842, "last_edit_date": 1568533842, "creation_date": 1568532540, "answer_id": 57942041, "question_id": 57862642, "link": "https://stackoverflow.com/questions/57862642/learning-ruby-how-to-solve-this-problem-with-ruby/57942041#57942041", "title": "Learning ruby: How to solve this problem with ruby?", "body": "<p>Here's an implementation focused on data modelling for readability and traceability. </p>\n\n<pre><code>class Turnstile\n  DIRECTIONS = { IN: 0, OUT: 1 }\n\n  Person = Struct.new(:index, :arrival_time, :direction, :enter_turnstile_time) do\n    def has_not_exited?\n      !enter_turnstile_time\n    end\n  end\n\n  State = Struct.new(:time, :entry_queue, :exit_queue, :person_in_turnstile) do\n    def build_next\n      State.new(time + 1, entry_queue.dup, exit_queue.dup, person_in_turnstile)\n    end\n  end\n\n  def initialize(time, direction)\n    @people = time.map.with_index { |t, ix| Person.new(ix, t, direction[ix], nil) }\n    @states = [State.new(-1, Array.new, Array.new, nil)]\n  end\n\n  def process\n    while @people.any?(&amp;:has_not_exited?)\n      @states &lt;&lt; process_next_state(@states)\n    end\n\n    @people.map(&amp;:enter_turnstile_time)\n  end\n\n  def process_next_state(states)\n    current_state = states.last.build_next\n\n    log_str = \"Time: #{current_state.time}\"\n\n    @people.each do |person|\n      next unless person.arrival_time == current_state.time\n\n      case person.direction\n      when DIRECTIONS[:IN]\n        log_str += \", Person #{person.index} queued for entry\"\n        current_state.entry_queue &lt;&lt; person\n      when DIRECTIONS[:OUT]\n        log_str += \", Person #{person.index} queued for exit\"\n        current_state.exit_queue &lt;&lt; person\n      end\n    end\n\n    if current_state.person_in_turnstile\n      log_str += \", Person #{current_state.person_in_turnstile.index} exited turnstile\"\n\n      turnstile_direction_priority = current_state.person_in_turnstile.direction\n      current_state.person_in_turnstile = nil\n    end\n\n    turnstile_direction_priority ||= DIRECTIONS[:OUT]\n\n    prioritized_queues =\n      case turnstile_direction_priority\n      when DIRECTIONS[:IN]\n        [current_state.entry_queue, current_state.exit_queue]\n      when DIRECTIONS[:OUT]\n        [current_state.exit_queue, current_state.entry_queue]\n      end\n\n    if current_state.person_in_turnstile = prioritized_queues.first.pop || prioritized_queues.last.pop\n      current_state.person_in_turnstile.enter_turnstile_time = current_state.time\n      log_str += \", Person #{current_state.person_in_turnstile.index} entered turnstile\"\n    end\n\n    puts log_str\n    current_state\n  end\nend\n\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>2.5.5 :049 &gt; Turnstile.new([0,1,1,3,3], [0,1,0,0,1]).process\nTime: 0, Person 0 queued for entry, Person 0 entered turnstile\nTime: 1, Person 1 queued for exit, Person 2 queued for entry, Person 0 exited turnstile, Person 2 entered turnstile\nTime: 2, Person 2 exited turnstile, Person 1 entered turnstile\nTime: 3, Person 3 queued for entry, Person 4 queued for exit, Person 1 exited turnstile, Person 4 entered turnstile\nTime: 4, Person 4 exited turnstile, Person 3 entered turnstile\n =&gt; [0, 2, 1, 4, 3]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "accepted_answer_id": 57876724, "answer_count": 3, "score": 1, "last_activity_date": 1569048258, "creation_date": 1568075758, "last_edit_date": 1568102643, "question_id": 57862642, "link": "https://stackoverflow.com/questions/57862642/learning-ruby-how-to-solve-this-problem-with-ruby", "title": "Learning ruby: How to solve this problem with ruby?", "body": "<p><strong><em>Problem Statement</em></strong></p>\n\n<p>A university has exactly one turnstile. It can be used either as an exit or an entrance. Unfortunately, sometimes many people want to pass through the turnstile and their directions can be different. The ith person comes to the turnstile at time[i] and wants to either exit the university if direction[i] = 1 or enter the university if direciton[i] = 0. People form 2 queues, one to exit and one to enter. They are ordered by the time when they came to the turnstile and, if the times are equal, by their indices.\nIf some person wants to enter the university and another person wants to leave the university at the same moment, there are three cases:</p>\n\n<pre><code>\u2022 If in the previous second the turnstile was not used (maybe it was used before, but not at the previous second), then the person who wants to leave goes first.\n\u2022 If in the previous second the turnstile was used as an exit, then the person who\nwants to leave goes first\n\u2022 If in the previous second the turnstile was used as an entrance, then the person \nwho wants to enter goes first\n</code></pre>\n\n<p>Passing through the turnstile takes 1 second</p>\n\n<p>For each person, find the time when they will pass through the turnstile</p>\n\n<p>The function must return an array of n integers where the value at index[i] is the same when the ith person will pass the turnstile</p>\n\n<p>The function has the following params:</p>\n\n<pre><code>\u2022 time: an array of n integers where the value at index i is the time when the \nith person will came to the turnstile\n\u2022 direction: an array of n  integers where the value at index i is the direction \nof the ith  person\n</code></pre>\n\n<p>Constraints</p>\n\n<pre><code>\u2022 1 &lt;= n &lt;= 105\n\u2022 0 &lt;= time[i] &lt;= 109 for 0 &lt;= i &lt;= n \u2013 1\n\u2022 time[i] &lt;= time[i+1] for 0 &lt;= i &lt;= n - 2\n\u2022 0 &lt;= direction [i] &lt;= 1 for 0 &lt;= i &lt;= n \u2013 1\n</code></pre>\n\n<p>Example:</p>\n\n<p><strong>n = 4</strong></p>\n\n<p><strong>time = [0,0,1,5]</strong></p>\n\n<p><strong>direction = [0,1,1,0]</strong></p>\n\n<p><strong>Output = [2,0,1,5]</strong></p>\n\n<p>Example 2</p>\n\n<p><strong>n = 5</strong></p>\n\n<p><strong>time = [0,1,1,3,3]</strong></p>\n\n<p><strong>direction = [0,1,0,0,1]</strong></p>\n\n<p><strong>Output = [0,2,1,4,3]</strong></p>\n\n<hr>\n\n<p><strong>This is my actual trying</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def getTimes(time, direction)\n  persons = time.size - 1\n  exits = []\n  (0..persons).each do |person|\n    if time[person] == time[person + 1]\n      exits[person + 1] = time[person] if direction[person + 1] == 1 and direction[person] == 0\n    else\n      exits[person] = time[person] if direction[person] != direction[person + 1]\n    end\n  end\n\n  p exits\nend\n</code></pre>\n\n<p>And my response <strong>[nil, 0, 1, 5]</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1568078024, "post_id": 57862769, "comment_id": 102151563, "body": "Thanks @jvillian...I&#39;m going to try to get this to render in the view. At first try, this works in console"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1568079396, "post_id": 57862769, "comment_id": 102151786, "body": "Yep, I understand. I was just trying to suggest how you might use <code>.each</code> and <code>.each_with_object</code>. Like I said, you would need to take this idea, and translate it into <code>erb</code>, where you could do whatever manipulation you like."}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1568080633, "post_id": 57862769, "comment_id": 102151993, "body": "Much appreciated @jvillian"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1568077136, "creation_date": 1568077136, "answer_id": 57862769, "question_id": 57862506, "link": "https://stackoverflow.com/questions/57862506/ruby-use-index-from-loop-to-lookup-jsonb/57862769#57862769", "title": "Ruby use index from loop to lookup JSONB", "body": "<p>Given:</p>\n\n<pre><code>@store = OpenStruct.new({business_hours: {\"monday_opens_at\"=&gt;\"08:00:00\", \"sunday_opens_at\"=&gt;\"09:00:00\", \"monday_closes_at\"=&gt;\"20:00:00\", \"sunday_closes_at\"=&gt;\"18:00:00\"}})\n</code></pre>\n\n<p>How about something along the lines of:</p>\n\n<pre><code>I18n.t('date.day_names').each do |day|\n  %w(opens_at closes_at).each_with_object([]) do |time_type, to_return|\n    to_return &lt;&lt; @store.business_hours[\"#{day.downcase}_#{time_type}\"]\n  end.compact.tap do |hours|\n    unless hours.blank?\n      puts day\n      puts hours.join(' - ')\n    end\n  end\nend\n</code></pre>\n\n<p>I realise that isn't in <code>erb</code> format, sorry about that. I don't use <code>erb</code> anymore and am rusty at the syntax. But, the logic works in console, giving: </p>\n\n<pre><code>sunday\n09:00:00 - 18:00:00\nmonday\n08:00:00 - 20:00:00\n</code></pre>\n\n<p>...and getting it into <code>erb</code> ought not to be too heavy of a lift.</p>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57862769, "answer_count": 1, "score": 0, "last_activity_date": 1589296789, "creation_date": 1568074004, "last_edit_date": 1568084934, "question_id": 57862506, "link": "https://stackoverflow.com/questions/57862506/ruby-use-index-from-loop-to-lookup-jsonb", "title": "Ruby use index from loop to lookup JSONB", "body": "<p>I have a JSONB column that holds the business hours of a <code>store</code>. As seen below, it doesn't seem to maintain the order in which it was inputted (sunday opens/closes at, monday opens/closes at). </p>\n\n<p>I wanted to iterate over the days of the week to produce results by day, and use the <code>day</code> to look up the respective <code>#{day}_opens_at</code> time to display. But I'm unsure how to do this using the loops index. Rather than <code>sunday 09:00:00 - 18:00:00</code>, it prints out all of the hours:</p>\n\n<pre><code>sunday\n08:00:00 09:00:00 20:00:00 18:00:00\n\nmonday\n08:00:00 09:00:00 20:00:00 18:00:00\n\ntuesday\n08:00:00 09:00:00 20:00:00 18:00:00\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;% I18n.t('date.day_names').each_with_index do |day, wday| %&gt;\n  &lt;p&gt;#{day.downcase}&lt;/p&gt;\n  &lt;% @store.business_hours.each do |day, hour| %&gt;\n    &lt;%= hour %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<pre><code>&gt;&gt; @store.business_hours\n=&gt; {\"monday_opens_at\"=&gt;\"08:00:00\", \"sunday_opens_at\"=&gt;\"09:00:00\", \"monday_closes_at\"=&gt;\"20:00:00\", \"sunday_closes_at\"=&gt;\"18:00:00\"}\n&gt;&gt; @store.business_hours.first\n=&gt; [\"monday_opens_at\", \"08:00:00\"]\n</code></pre>\n\n<p>EDIT</p>\n\n<p>I was able to get it working with the help of @jvillian and a custom helper method to induce a readable time <code>Sunday 09:00 AM - 06:00 PM</code></p>\n\n<pre><code>- I18n.t('date.day_names').each do |day|\n  - %w[opens_at closes_at].each_with_object([]) do |time_type, to_return|\n    - @hours = to_return &lt;&lt; @store.business_hours[\"#{day.downcase}_#{time_type}\"]\n      - @hours.compact.tap do |hours|\n        - unless hours.blank?\n          %p= day\n          %p= time_helper(hours)\n</code></pre>\n\n<pre><code>def time_helper(time)\n  times = []\n  time.each do |n|\n    times &lt;&lt;  Time.parse(n).strftime(\"%I:%M %p\")\n  end\n  times.join(' - ')\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568078979, "post_id": 57861987, "comment_id": 102151727, "body": "you said you <code>puts</code> but from when and where are you doing it?  How /where are your environment variables defined?  Are you sure also <code>ENV[&#39;SPOTIFY_CLIENT_SECRET&#39;]</code> is defined ?"}, {"owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568116554, "post_id": 57861987, "comment_id": 102165360, "body": "the puts is in the initializer <code>puts ENV[&quot;SPOTIFY_CLIENT_ID&quot;]</code> brings back the correct key from <code>config&#47;env.yml</code>"}, {"owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568121528, "post_id": 57861987, "comment_id": 102168198, "body": "Updated with a bit more detail on the error"}], "owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568121489, "creation_date": 1568068802, "last_edit_date": 1568121489, "question_id": 57861987, "link": "https://stackoverflow.com/questions/57861987/rails-omniauth-undefined-method-for-nilnilclass", "title": "Rails + Omniauth: undefined method `[]&#39; for nil:NilClass", "body": "<p>I'm trying to use the Spotify API to sign up/in a user via Devise but I'm getting: </p>\n\n<p><code>undefined method</code>[]' for nil:NilClass` </p>\n\n<p>in: </p>\n\n<p><strong>pages_controller.rb</strong></p>\n\n<p><code>@spotify_user = RSpotify::User.new(request.env['omniauth.auth'])</code></p>\n\n<p>===</p>\n\n<p>Here's my stack:</p>\n\n<p><strong>home.html.erb</strong></p>\n\n<pre><code>&lt;li&gt;&lt;%= link_to 'Sign in with Spotify', user_spotify_omniauth_authorize_path %&gt;&lt;/li&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; 'callbacks' }  \n</code></pre>\n\n<p><strong>callbacks_controller.rb</strong></p>\n\n<pre><code>class CallbacksController &lt;  Devise::OmniauthCallbacksController\n  skip_before_action :verify_authenticity_token\n  def spotify\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n    sign_in_and_redirect @user\n  end\nend\n</code></pre>\n\n<p><strong>initializers/devise.rb</strong></p>\n\n<pre><code>  RSpotify.authenticate(ENV[\"SPOTIFY_CLIENT_ID\"], ENV[\"SPOTIFY_CLIENT_SECRET\"])\n  config.omniauth :spotify, ENV[\"SPOTIFY_CLIENT_ID\"], ENV[\"SPOTIFY_CLIENT_SECRET\"], scope: 'user-read-email playlist-modify-public user-library-read user-library-modify'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 862, "user_id": 1600046, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5rxUl.jpg?s=128&g=1", "display_name": "Vibol", "link": "https://stackoverflow.com/users/1600046/vibol"}, "edited": false, "score": 3, "creation_date": 1568068510, "post_id": 57861803, "comment_id": 102149943, "body": "You code block missing <code>end</code> but I assume you have it in your local, the code seems to be fine but can you share us your execution and error output?"}, {"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568071929, "post_id": 57861803, "comment_id": 102150521, "body": "Can you show the error? Also, where are you getting <code>Customers</code> from?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1568131823, "post_id": 57861803, "comment_id": 102174103, "body": "@MarkMerritt /bundle/gems/activemodel-4.1.16/lib/active_model/attribute_m&zwnj;&#8203;ethods.rb:435:in `method_missing&#39; is the error I&#39;m getting. And I have output right before and after that code, so I know that&#39;s where it&#39;s breaking."}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 862, "user_id": 1600046, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5rxUl.jpg?s=128&g=1", "display_name": "Vibol", "link": "https://stackoverflow.com/users/1600046/vibol"}, "edited": false, "score": 0, "creation_date": 1568132069, "post_id": 57861803, "comment_id": 102174230, "body": "@Coco I added in the end. Yes, it&#39;s in my local."}, {"owner": {"reputation": 862, "user_id": 1600046, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5rxUl.jpg?s=128&g=1", "display_name": "Vibol", "link": "https://stackoverflow.com/users/1600046/vibol"}, "edited": false, "score": 0, "creation_date": 1568132421, "post_id": 57861803, "comment_id": 102174401, "body": "what is <code>Customers</code>? is it array of object or class name?"}, {"owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "reply_to_user": {"reputation": 862, "user_id": 1600046, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5rxUl.jpg?s=128&g=1", "display_name": "Vibol", "link": "https://stackoverflow.com/users/1600046/vibol"}, "edited": false, "score": 0, "creation_date": 1568139136, "post_id": 57861803, "comment_id": 102177179, "body": "@Coco array I believe, although I&#39;ve had a dickens of a time finding an easy way to confirm that."}], "answers": [{"tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 2, "last_activity_date": 1568101315, "creation_date": 1568101315, "answer_id": 57866175, "question_id": 57861803, "link": "https://stackoverflow.com/questions/57861803/assigning-a-ruby-hash-by-map-do-where-values-dont-consistantly-exist/57866175#57866175", "title": "Assigning a ruby hash by map do where values don&#39;t consistantly exist", "body": "<p>Even if ipv4 and ipv6 are nil, it should not throw error. I think the syntax here is incorrect or <code>Customers</code> is nil. Try this way:</p>\n\n<pre><code>mailList = Customer.all.map do |customer|\n  {\n    username: customer.name,\n    email: customer.email,\n    last_ip_v4: customer.ipv4,\n    last_ip_v6: customer.ipv6\n  }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 11783290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlGx9ULUMjU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJA-MisgP4VaKBwQ_pJjJDEsOZNg/photo.jpg?sz=128", "display_name": "deepakumar m", "link": "https://stackoverflow.com/users/11783290/deepakumar-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1568138744, "creation_date": 1568138744, "answer_id": 57876149, "question_id": 57861803, "link": "https://stackoverflow.com/questions/57861803/assigning-a-ruby-hash-by-map-do-where-values-dont-consistantly-exist/57876149#57876149", "title": "Assigning a ruby hash by map do where values don&#39;t consistantly exist", "body": "<p>If  you are sure that this line,</p>\n\n<pre><code>mailList = Customers.map do |customer|\n</code></pre>\n\n<p>will work fine (may be incase of using a wrong convention), then try to check the nil cases for ipv4 and ipv6 and construct the list as,</p>\n\n<pre><code>    mailList = construct_list Customers\n    def construct_list data\n      list = []\n      hash ={}\n      data.map do |customer|\n        hash[:username] = customer.name\n        hash[:email] = customer.email\n        customer.ipv4.nil? ? hash[:last_ip_v4] = nil : hash[:last_ip_v4] = customer.ipv4\n        customer.ipv6.nil? ? hash[:last_ip_v6] = nil : hash[:last_ip_v6] = customer.ipv6\n        list &lt;&lt; hash\n      end\n      list\n    end\n</code></pre>\n\n<p>Though it may not be optimal, it will help you for a while.</p>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57876149, "answer_count": 2, "score": 0, "last_activity_date": 1568138744, "creation_date": 1568067255, "last_edit_date": 1568131859, "question_id": 57861803, "link": "https://stackoverflow.com/questions/57861803/assigning-a-ruby-hash-by-map-do-where-values-dont-consistantly-exist", "title": "Assigning a ruby hash by map do where values don&#39;t consistantly exist", "body": "<p>I have an map that I have to assemble before using...</p>\n\n<pre><code>mailList = Customers.map do |customer|\n{\n  :username =&gt; customer.name,\n  :email =&gt; customer.email,\n  :last_ip_v4 =&gt; customer.ipv4,\n  :last_ip_v6 =&gt; customer.ipv6\n}\nend\n</code></pre>\n\n<p>This works for a number of test users, but not all users have a last ipv4 AND a last ipv6. When they don't, ruby errors out, but I'd rather it just assign a nil. How do I do that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 11703825, "user_type": "registered", "profile_image": "https://graph.facebook.com/2351448831580777/picture?type=large", "display_name": "IbunHabibu Salim", "link": "https://stackoverflow.com/users/11703825/ibunhabibu-salim"}, "edited": false, "score": 0, "creation_date": 1568059570, "post_id": 57859925, "comment_id": 102147327, "body": "How about lint errors C: Style/IfInsideElse: Convert <code>if</code> nested inside <code>else</code> to <code>elsif</code>."}, {"owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "edited": false, "score": 0, "creation_date": 1568140845, "post_id": 57859925, "comment_id": 102177875, "body": "I&#39;ve updated my answer."}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "is_accepted": false, "score": 0, "last_activity_date": 1568140736, "last_edit_date": 1568140736, "creation_date": 1568058615, "answer_id": 57860391, "question_id": 57859925, "link": "https://stackoverflow.com/questions/57859925/creating-my-own-enumerable-method-my-none-for-ruby/57860391#57860391", "title": "creating my own Enumerable method my_none? for Ruby", "body": "<p><code>my_none?</code> method, as you defined it, does not accept any arguments. It can only accept block.</p>\n\n<p>I think you meant:</p>\n\n<pre><code>%w{ant bear cat}.my_none?{|e| e =~ /d/ }\n[1, 3.14, 42].my_none?(&amp;:to_f)\n</code></pre>\n\n<p><code>&amp;:to_f</code> is a way to create a <a href=\"https://ruby-doc.org/core-2.6.4/Proc.html\" rel=\"nofollow noreferrer\">Proc</a> - see <a href=\"https://stackoverflow.com/questions/1217088/what-does-mapname-mean-in-ruby\">this question</a> for more info.</p>\n\n<p>To get rid of the lint errors you can change <code>my_none?</code> implementation to:</p>\n\n<pre><code>def my_none?\n  my_each do |item|\n    return false if block_given? &amp;&amp; yield(item) || !block_given? &amp;&amp; item\n  end\n  true\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11703825, "user_type": "registered", "profile_image": "https://graph.facebook.com/2351448831580777/picture?type=large", "display_name": "IbunHabibu Salim", "link": "https://stackoverflow.com/users/11703825/ibunhabibu-salim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568140736, "creation_date": 1568056312, "last_edit_date": 1568139548, "question_id": 57859925, "link": "https://stackoverflow.com/questions/57859925/creating-my-own-enumerable-method-my-none-for-ruby", "title": "creating my own Enumerable method my_none? for Ruby", "body": "<p>I have created my own <code>Enumerable</code> method <code>my_none?</code>. It gives me lint error:</p>\n\n<blockquote>\n  <p>Convert <code>if</code> nested inside <code>else</code> to <code>elsif</code>.</p>\n</blockquote>\n\n<p>Also two of the test cases are not working. Can anyone help me to resolve these issues?</p>\n\n<pre><code>module Enumerable\n  def my_each\n    i = 0\n    while i &lt; size\n      yield self[i]\n      i += 1\n    end\n  end\n\n  def my_none?\n    my_each do |item|\n      if block_given?\n        return false if yield item\n       else\n         return false if item\n      end\n    end\n    true\n  end\nend\n</code></pre>\n\n<pre><code>%w{ant bear cat}.my_none? { |word| word.length == 5 } #=&gt; true\n%w{ant bear cat}.my_none? { |word| word.length &gt;= 4 } #=&gt; false\n</code></pre>\n\n<pre><code>[].my_none?                                           #=&gt; true\n[nil].my_none?                                        #=&gt; true\n[nil, false].my_none?                                 #=&gt; true\n[nil, false, true].my_none?                           #=&gt; false\n</code></pre>\n\n<p>The below two test cases are not working:</p>\n\n<pre><code>%w{ant bear cat}.my_none?(/d/)                        #=&gt; true &gt; gives me wrong no of argument given 1 expected 0\n[1, 3.14, 42].my_none?(Float)                         #=&gt; false &gt; gives me wrong number of argument \n</code></pre>\n"}, {"tags": ["ruby", "httparty"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1568055757, "post_id": 57859656, "comment_id": 102145830, "body": "What&#39;s <code>LimitValidatorClient</code>? This is something <i>surrounding</i> your request that we cannot see: it has nothing to do with the request itself; obviously the URL is valid (ignoring the redundant turning-of-a-string-into-a-string etc)."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 1, "creation_date": 1568106155, "post_id": 57859656, "comment_id": 102159877, "body": "It seems that this code is working correctly. It&#39;s calling an API and the API is returning an error. Look at the code behind <code>&#39;http:&#47;&#47;192.168.1.1&#47;api&#47;v1&#47;special_limits&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "is_accepted": true, "score": 0, "last_activity_date": 1568113373, "creation_date": 1568113373, "answer_id": 57869443, "question_id": 57859656, "link": "https://stackoverflow.com/questions/57859656/invalid-param-path-httparty-ruby/57869443#57869443", "title": "Invalid Param &quot;path&quot;=&gt;&quot;/&quot; (HTTParty Ruby)", "body": "<p>Thanks Dave and Yule, both are right. The url was right and this is a API response. Nothing wrong with the method.</p>\n\n<p>I'll try new things in the API to solve this.</p>\n"}], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57869443, "answer_count": 1, "score": 0, "last_activity_date": 1612575024, "creation_date": 1568054827, "last_edit_date": 1612575024, "question_id": 57859656, "link": "https://stackoverflow.com/questions/57859656/invalid-param-path-httparty-ruby", "title": "Invalid Param &quot;path&quot;=&gt;&quot;/&quot; (HTTParty Ruby)", "body": "<p>I'm trying to make a httparty post on my automation, but I get a error and, believe me, I tried to find in internet a solution, but don't find it.</p>\n<pre><code>8:   @special_test_url = 'http://192.168.1.1/api/v1/special_limits'\n9:\n10:   special_test = HTTParty.post(@special_test_url.to_str,\n11:     {\n12:     :body =&gt; [ { &quot;documents&quot;: &quot;#{document}&quot;, &quot;limit&quot;: 0, &quot;main_account_id&quot;: 3} ].to_json,\n13:     :headers =&gt; {  'Content-Type': 'application/json', 'Accept': 'application/json'}     \n14:     })\n15:\n =&gt; 16:   binding.pry\n    17:   \n    18: end\n</code></pre>\n<p>The error I get is:</p>\n<pre><code>[1] pry(#&lt;LimitValidatorClient&gt;)&gt; special_test\n=&gt; {&quot;_embedded&quot;=&gt;{&quot;errors&quot;=&gt;[{&quot;logref&quot;=&gt;&quot;INVALID&quot;, &quot;message&quot;=&gt;&quot;Invalid params&quot;, &quot;path&quot;=&gt;&quot;/&quot;}]}}\n</code></pre>\n<p>What I think is the error:</p>\n<pre><code>&quot;message&quot;=&gt;&quot;Invalid params&quot;, &quot;path&quot;=&gt;&quot;/&quot;\n(so, the &quot;/&quot; in the url)\n</code></pre>\n<p>What I tried:</p>\n<p>I already tried to made the url a global variable and use #{url} to replace the @special_test_url, I tried to remove the to_str and use the address directly with &quot; &quot;, and I tried to remove the body and header, and already tried to put a &quot;/&quot; after the special_limits, but nothing, the problem is the &quot;/&quot; in the URL, but I don't know why.</p>\n<p>Thanks for ur time. I know this can be a stupid question, but I don't have any clue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration"], "answers": [{"tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": false, "score": 2, "last_activity_date": 1568055996, "creation_date": 1568055996, "answer_id": 57859874, "question_id": 57859472, "link": "https://stackoverflow.com/questions/57859472/backfilling-6-million-records-in-ruby-on-rails-using-migration/57859874#57859874", "title": "Backfilling 6 million records in Ruby on Rails using migration", "body": "<p>Your backfilling is quite inefficient. But even with improvement, you shouldn't run the backfilling in a migration. <a href=\"https://github.com/ankane/strong_migrations#backfilling-data\" rel=\"nofollow noreferrer\">You can read a bit more here on how to best backfill data</a>.</p>\n\n<p>Now onto your code, I am assuming that this is how your models look like:</p>\n\n<pre><code>class SKU &lt; ApplicationRecord\n  has_many :products\n  has_many :product_histories, through: :products\nend\n\nclass Product &lt; ApplicationRecord\n  has_many :product_histories\nend\n</code></pre>\n\n<p>You backfilling logic could be:</p>\n\n<pre><code># use find_each instead of each to not load everything in memory\nSKU.find_each do |sku|\n  sku.product_histories.update_all(price: sku.price)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 2, "creation_date": 1568113122, "post_id": 57868672, "comment_id": 102163471, "body": "A raw query is best for updating millions of records, but I would wrap a <code>find_in_batches</code> around this, so it processes something like 10K or 100K records at a time, which is safer as you can see it make progress and resume if there&#39;s any error. It also means you can take it a step further and process multiple batches simultaneously using Parallel gem, Sidekiq, or other techniques."}, {"owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "reply_to_user": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 2, "creation_date": 1568180314, "post_id": 57868672, "comment_id": 102188193, "body": "Totally agree with you."}], "tags": [], "owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1568111500, "last_edit_date": 1568111500, "creation_date": 1568110668, "answer_id": 57868672, "question_id": 57859472, "link": "https://stackoverflow.com/questions/57859472/backfilling-6-million-records-in-ruby-on-rails-using-migration/57868672#57868672", "title": "Backfilling 6 million records in Ruby on Rails using migration", "body": "<p>I would recommend you to write a raw sql query for this. For ex: </p>\n\n<pre><code>UPDATE product_histories\nSET product_histories.price = skus.price\nFROM product_histories\nINNER JOIN products ON products.id = product_histories.product_id\nINNER JOIN skus ON skus.id = products.sku_id\n</code></pre>\n\n<p>Now there are multiple ways to execute this query, one of them being:</p>\n\n<pre><code>ActiveRecord::Base.connection.execute(\"#{query_written_above}\")\n</code></pre>\n\n<p>This should definitely speed up the process.</p>\n\n<p>Solution provided by AbM also looks good.</p>\n"}], "owner": {"reputation": 85, "user_id": 8595759, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x6T5EQATvks/AAAAAAAAAAI/AAAAAAAAAAc/z1bJaRSZqlk/photo.jpg?sz=128", "display_name": "chloewlin", "link": "https://stackoverflow.com/users/8595759/chloewlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568111500, "creation_date": 1568053988, "last_edit_date": 1568054306, "question_id": 57859472, "link": "https://stackoverflow.com/questions/57859472/backfilling-6-million-records-in-ruby-on-rails-using-migration", "title": "Backfilling 6 million records in Ruby on Rails using migration", "body": "<p>I have three tables in PostgreSQL: SKU, Product and ProductHistory. I added a new column, <code>price</code>, to the ProductHistory table, and need to backfill data on that column based on the <code>price</code> column in SKU. Here is their relationship:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EcdFT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EcdFT.png\" alt=\"data relationship\"></a></p>\n\n<p>A SKU has many Products, and each Product has many ProductHistories. But the <code>price</code> attribute is only available on SKU, not on Product. I have to somehow pass it to ProductHistory.</p>\n\n<p>I tried running the code below in the rails console, but this script is super inefficient since I have over 6 million records to backfill. It ran many hours and still didn't finish, so I killed the process.</p>\n\n<pre><code>// Find all SKU ids and prices\n@all_SKU_array = SKU.all.pluck(:id, :price)\n\n@all_SKU_array.each do |sku|\n  @sku_id = sku[0]\n  @sku_price = sku[1]\n\n  // Find all Products that belong to that SKU\n  @all_products = SKU.find(@sku_id).products\n\n  // Find all product histories of each product\n  // I flatten them because some products do not have any product histories, all we need is just the ids. All products that belong to the same SKU have the same price.\n  @all_product_histories = @all_products.map { |p| p.product_history_ids }.flatten(1)\n\n  // Update the price\n  @all_product_histories.map do |ph_id| \n     PH.find(ph_id).update_attributes!(:price =&gt; @productPrice)\n   end\nend\n</code></pre>\n\n<p>Should I use a rails migration to update the data? How can I join SKU and Product so that passing the <code>price</code> attribute to ProductHistory is easier? </p>\n\n<p>Furthermore, I am updating 6 million rows of data. I am planning to use <code>self.up</code> and <code>self.down</code> to roll back if anything goes wrong. Right now, the default value of \"price\" on ProductHistory is nil, so I'd probably just reset them back to nil if something is wrong, but I'd appreciate any solution that the community recommends.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-sdk", "aws-sdk-ruby"], "answers": [{"tags": [], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1568052971, "creation_date": 1568052971, "answer_id": 57859245, "question_id": 57858768, "link": "https://stackoverflow.com/questions/57858768/ruby-aws-sdk-how-to-list-the-parent-checks-of-a-health-check/57859245#57859245", "title": "Ruby AWS-SDK: How to list the parent checks of a health check", "body": "<p>My solution was to collect all the health checks in route53 and parse them for any that matched the <code>CALCULATED</code> config type:</p>\n\n<p><code>check[:health_check_config][:type] == \"CALCULATED\"</code></p>\n\n<p>Then after getting the <code>Aws::Route53::Errors::InvalidInput</code> error during health check deletion, I would search through my parent check collection to see if any parent check included the failed check in its <code>child_health_checks</code> array:</p>\n\n<pre><code>parent_checks = parents.select{|parent_check| \n  parent_check[:health_check_config][:child_health_checks].include?(check[:id])\n}\n</code></pre>\n\n<p>I could then delete all the matching parent checks and retry the regular deletion after. </p>\n"}], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568052971, "creation_date": 1568050744, "question_id": 57858768, "link": "https://stackoverflow.com/questions/57858768/ruby-aws-sdk-how-to-list-the-parent-checks-of-a-health-check", "title": "Ruby AWS-SDK: How to list the parent checks of a health check", "body": "<p>I have a job that cleans out unused health checks. Some of them cant be deleted if they have a parent check resulting in the error:</p>\n\n<p><code>Invalid parameter : Health check SOMEHEALTHCHECKID is still referenced from parent health check(s): SOMEHEALTHCHECKID-PARENT</code></p>\n\n<p>How can I list the parents of a health check? I would like to be able to obtain the id of the parent check in a method that is more stable than parsing the error message string.   </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "updatedate"], "comments": [{"owner": {"reputation": 159, "user_id": 9722060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6af43aa5acad3d7111cc6be4d835bb?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Rendevski", "link": "https://stackoverflow.com/users/9722060/stefan-rendevski"}, "edited": false, "score": 1, "creation_date": 1568050255, "post_id": 57858246, "comment_id": 102143522, "body": "if these are associations defined on an object, you can use <code>touch: true</code> on them in order to update the product&#39;s timestamp whenever they are updated/created/created"}, {"owner": {"reputation": 23, "user_id": 6901737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9d9b04721a4dd0d70fe87b2f6b02cd?s=128&d=identicon&r=PG&f=1", "display_name": "dfosah", "link": "https://stackoverflow.com/users/6901737/dfosah"}, "reply_to_user": {"reputation": 159, "user_id": 9722060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6af43aa5acad3d7111cc6be4d835bb?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Rendevski", "link": "https://stackoverflow.com/users/9722060/stefan-rendevski"}, "edited": false, "score": 0, "creation_date": 1568175632, "post_id": 57858246, "comment_id": 102186924, "body": "Thanks, Stephan. I&#39;ll use this for future updates."}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 2457762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d564360e73796c7b491b0d07619a7813?s=128&d=identicon&r=PG", "display_name": "Jonathan Bennett", "link": "https://stackoverflow.com/users/2457762/jonathan-bennett"}, "is_accepted": true, "score": 0, "last_activity_date": 1568052498, "creation_date": 1568052498, "answer_id": 57859142, "question_id": 57858246, "link": "https://stackoverflow.com/questions/57858246/how-do-i-optimize-the-search-for-changed-object-and-its-dependencies-records/57859142#57859142", "title": "How do I optimize the search for changed object and its dependencies records", "body": "<p>If these are active record associations you can do this entirely at the database layer:</p>\n\n<pre><code>products\n  .joins(:specs, :content, :images)\n  .where('products.updated_at &gt; :date OR specs.updated_at &gt; :date OR contents.updated_at &gt; :date OR images.updated_at &gt; :date', date: update_date)\n\n\nproducts\n  .joins(:translations)\n  .where('products.updated_at &gt; :date OR translations.updated_at &gt; :date', date: update_date)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6901737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9d9b04721a4dd0d70fe87b2f6b02cd?s=128&d=identicon&r=PG&f=1", "display_name": "dfosah", "link": "https://stackoverflow.com/users/6901737/dfosah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 57859142, "answer_count": 1, "score": 2, "last_activity_date": 1568052498, "creation_date": 1568048164, "question_id": 57858246, "link": "https://stackoverflow.com/questions/57858246/how-do-i-optimize-the-search-for-changed-object-and-its-dependencies-records", "title": "How do I optimize the search for changed object and its dependencies records", "body": "<p>I am searching for active record objects that have changed since a given date. My code below works but I would like to make these calls more effectively. Any ideas?</p>\n\n<pre><code> # product_controller.rb file\n  @products = products.select {|product| product.any_update_since(update_date)}\n\n # product.rb file\n  def any_update_since(date)\n    return true if self.updated_since(date) ||\n      self.specs.any?{|t| t.updated_since(date)} ||\n      self.content.any?{|t| t.updated_since(date)} ||\n      self.images.any?{|t| t.updated_since(date)}\n    return false\n  end\n\n  def updated_since(date)\n    Time.zone = 'UTC'\n    update_date = Time.zone.parse(date)\n    return true if (self.updated_at &gt; update_date)\n    return true if (self.translations.any?{|t| t.updated_at &gt; update_date})\n    return false\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spring", "docker"], "comments": [{"owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1568046076, "post_id": 57857741, "comment_id": 102141761, "body": "are you using shared volume? or also better to shared Dockerfile"}, {"owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "reply_to_user": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1568048779, "post_id": 57857741, "comment_id": 102142928, "body": "@Adiii, yes, NFS. Updated the post."}, {"owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "reply_to_user": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1568191788, "post_id": 57857741, "comment_id": 102193176, "body": "I tested the app with the <code>autoload_path</code> hack, and it works. Clearly, not a Docker issue, right? Updated the post again"}], "owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1568191730, "creation_date": 1568045898, "last_edit_date": 1568191730, "question_id": 57857741, "link": "https://stackoverflow.com/questions/57857741/custom-folders-not-auto-reloading-in-rails-6", "title": "Custom folders not auto-reloading in Rails 6", "body": "<p>In Rails 5 and below, I used to have the following line in <code>application.rb</code>:</p>\n\n<pre><code>config.autoload_paths += Dir[\"#{config.root}/app/services/**/\"]\n</code></pre>\n\n<p>The guides for Rails 6 <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoload-paths\" rel=\"nofollow noreferrer\">state</a> that \"nowadays this is discouraged\". So after upgrading to <code>config.load_defaults 6.0</code> I deleted these autoload instructions from my config.</p>\n\n<p>Indeed, all my services are found automatically and are loaded during the initial boot sequence. But when I change these files, they are not reloaded.</p>\n\n<p>If I put the above line back into <code>application.rb</code>, everything becomes fine again. Since this practice is discouraged, how do I make them auto-reloaded in a Rails 6 way? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "actionmailer", "mailgun"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1568039312, "post_id": 57854609, "comment_id": 102138306, "body": "Would not <code>ActionMailer.const_set(:DeliveryJob, ::ActionMailer::MailDeliveryJob)</code> somewhere in the initializer help?"}, {"owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1568041302, "post_id": 57854609, "comment_id": 102139477, "body": "@AlekseiMatiushkin Unfortunately not. Still using MailDeliveryJob. [ActiveJob] Enqueued ActionMailer::MailDeliveryJob"}], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "is_accepted": true, "score": 0, "last_activity_date": 1568102592, "creation_date": 1568102592, "answer_id": 57866473, "question_id": 57854609, "link": "https://stackoverflow.com/questions/57854609/upgrade-to-rails-6-broke-my-actionmailer-test/57866473#57866473", "title": "Upgrade to Rails 6 broke my ActionMailer test", "body": "<p>I tried wrapping the call method of sending mail in</p>\n\n<pre><code>assert_emails 1 do\n  click_button \"Send\"\nend\n</code></pre>\n\n<p>After that, <code>ActionMailer::Base.deliveries</code> populated correctly.</p>\n"}], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 57866473, "answer_count": 1, "score": 0, "last_activity_date": 1568102592, "creation_date": 1568034123, "last_edit_date": 1568039165, "question_id": 57854609, "link": "https://stackoverflow.com/questions/57854609/upgrade-to-rails-6-broke-my-actionmailer-test", "title": "Upgrade to Rails 6 broke my ActionMailer test", "body": "<p>I used version 5.2.3 and my tests were successful.</p>\n\n<p>Upgraded to version 6.0.0. Specified <code>config.load_defaults 6.0</code> and <code>config.autoloader = :classic</code>.</p>\n\n<p>Because of this, all tests where <code>ActionMailer::Base</code> is used fail.</p>\n\n<p>Example:</p>\n\n<pre><code>test \"send email\" do\n    VCR.use_cassette('mailgun api key') do\n\n      ActionMailer::Base.deliveries.clear\n      item = items(:saved)\n      visit item_path(item)\n      click_button \"Send\"\n\n      assert_equal 1, ActionMailer::Base.deliveries.count\n    end\nend\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>Expected: 1\n  Actual: 0\n</code></pre>\n\n<p>I noticed that <code>ActionMailer::DeliveryJob</code> changed to <code>ActionMailer::MailDeliveryJob</code>.</p>\n\n<p>Maybe the problem is because of this? How then to solve it?</p>\n"}, {"tags": ["regex", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1568042029, "post_id": 57854649, "comment_id": 102139855, "body": "I was not even aware that <code>StringScanner</code> existed! Unfortunately I can accept only one answer as correct, and for my application, the solution proposed by Aleksei looks a tiny bit more natural for my application."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1568045153, "post_id": 57854649, "comment_id": 102141341, "body": "I didn&#39;t know about it until today :-)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568091769, "post_id": 57854649, "comment_id": 102154075, "body": "I knew about <code>ScreenScanner</code> before today, but only vaguely. I think you want <code>scan_until</code> or <code>skip_until</code>, and while that returns a non-<code>nil</code> value, <code>matched</code> is to follow, which returns the match of the pattern. Both <code>scan_until</code> and <code>skip_until</code> attempt to match the pattern and advance the <i>scan pointer</i> to the end of the match. If successful, <code>scan_until</code> returns a string comprised of the substring beginning just after the previous position of the scan pointer and ending at the end of the match; <code>skip_until</code> returns the size of that the string..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568092122, "post_id": 57854649, "comment_id": 102154159, "body": "...The important thing is that a truthy value is returned by both methods. Here is an example taken from my answer. <code>str = &#39;bacdefaghi&#39;; reg =  &#47;(?&lt;=a)..&#47;; ss = StringScanner.new str  #=&gt; #&lt;StringScanner 0&#47;10 @ &quot;bacde...&quot;&gt;; while ss.scan_until reg; puts ss.matched; end</code>, which displays <code>&quot;cd&quot;</code> and <code>&quot;gh&quot;</code> on separate lines, and returns <code>nil</code> (or replace <code>scan_until</code> with <code>skip_until</code>)."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568096095, "post_id": 57854649, "comment_id": 102155241, "body": "Thanks @CarySwoveland :). I prefer assigning <code>scan_until</code> result than using internal state in <code>matched</code>, it&#39;s personal though. OTH <code>StringScanner</code> is all about using internal state, so I shouldn&#39;t mind"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568099829, "post_id": 57854649, "comment_id": 102156755, "body": "...but with my example and your code, <code>&quot;ba&quot;</code> and <code>&quot;efa&quot;</code> are displayed (but I think you could replace <code>s.gsub(reg,&#39;&#39;)</code> with <code>s[reg]</code>)."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568218026, "post_id": 57854649, "comment_id": 102207430, "body": "@CarySwoveland it seems that I assumed that regex is a separator (as in <code>split</code>) and you, that it&#39;s the content (like in <code>scan</code>). I&#39;ve checked that OP wanted the <code>scan</code> behaviour,"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 4, "last_activity_date": 1568034243, "creation_date": 1568034243, "answer_id": 57854649, "question_id": 57854457, "link": "https://stackoverflow.com/questions/57854457/ruby-building-a-token-generator-on-top-of-a-string/57854649#57854649", "title": "Ruby: Building a token generator on top of a string", "body": "<p>You can use <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/strscan/rdoc/StringScanner.html#method-i-scan_until\" rel=\"nofollow noreferrer\"><code>StringScanner#scan_until</code></a> and then remove the part matching the pattern with <code>String#split</code> or <code>String#gsub</code>:</p>\n\n<pre><code>ss = StringScanner.new('a-b-c-d-e-f-g')\n#=&gt; #&lt;StringScanner 0/13 @ \"a-b-c...\"&gt;\nwhile s = ss.scan_until(/-/)\n   puts s.gsub(/-/, '') # or s.split(/-/)\nend  \n#a\n#b\n#c\n#d\n#e\n#f\n#=&gt; nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1568039545, "creation_date": 1568039545, "answer_id": 57856105, "question_id": 57854457, "link": "https://stackoverflow.com/questions/57854457/ruby-building-a-token-generator-on-top-of-a-string/57856105#57856105", "title": "Ruby: Building a token generator on top of a string", "body": "<p>You are nearly there. You need <em>an enumerator instance</em>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Tokenizer\n  def initialize(str, reg)\n    #             THIS   \u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\n    @tokenized_str = str.enum_for(:scan, reg)\n  end\n  def next_token\n   @tokenized_str.next\n  end\nend\n</code></pre>\n\n<p>Beware that <a href=\"https://ruby-doc.org/core/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\"><code>Enumerator#next</code></a> raises <code>StopIteration</code> if there is nothing left to iterate, so you probably want to handle it somehow.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1568049786, "last_edit_date": 1568049786, "creation_date": 1568048445, "answer_id": 57858300, "question_id": 57854457, "link": "https://stackoverflow.com/questions/57854457/ruby-building-a-token-generator-on-top-of-a-string/57858300#57858300", "title": "Ruby: Building a token generator on top of a string", "body": "<p>You can use the method <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a>.</p>\n\n<pre><code>class Tokenizer\n  def initialize(str, reg)\n    @token_enum = str.gsub(reg)\n  end\n\n  def next_token\n   @token_enum.next\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>t = Tokenizer.new('bacdefaghi', /(?&lt;=a)../)\n  #=&gt; #&lt;Tokenizer:0x00005af867bfc6f0 @tokenized_str=\n  #     #&lt;Enumerator: \"bacdefaghi\":gsub(/(?&lt;=a)../)&gt;&gt; \n\nt.next_token  #=&gt; \"cd\" \nt.next_token  #=&gt; \"gh\" \nt.next_token  #=&gt; StopIteration (iteration reached an end)\n</code></pre>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57856105, "answer_count": 3, "score": 2, "last_activity_date": 1568049786, "creation_date": 1568033560, "last_edit_date": 1568034278, "question_id": 57854457, "link": "https://stackoverflow.com/questions/57854457/ruby-building-a-token-generator-on-top-of-a-string", "title": "Ruby: Building a token generator on top of a string", "body": "<p>I would like to create a class which can be instantiated on a String and a Regex (which describes how to tokenize a string), and provides a method <code>next_token</code>, which returns the respectively next part of the string matching the regex, in the way that <code>String#scan</code> is working. For instance, if I do a</p>\n\n<pre><code>t = Tokenizer.new('abcdefgh', /.../)\na = t.next_token\nb = t.next_token\nc = t.next_token\n</code></pre>\n\n<p>should set <code>a</code> to <code>'abc'</code> and <code>b</code> to <code>'def'</code> and <code>c</code> to <code>nil</code>. This is an obvious and simple solution:</p>\n\n<pre><code>class Tokenizer\n  def initialize(str, reg)\n     @tokenized_str = str.scan(reg)\n     @next_ind = 0\n  end\n  def next_token\n     @tokenized_str[@next_ind].tap { @next_ind += 1 }\n  end\nend\n</code></pre>\n\n<p>This solution requires that the whole string is split apart into an array in the constructor. I would like to implement a \"lazy\" approach, where the next token is calculated only when the call to <code>next_token</code> is issued. Can someone suggest how to do it? Actually, <code>String#scan</code> must have such a generator already built in, because we can call it with a block, but I don't see how to make use of it in my case.</p>\n\n<p>I wonder whether this is a good way to use a <code>Fiber</code>, because what I'm doing here smells like co-routines, but perhaps there is an easier solution for this kind of problem. Performance will also be an issue, because my application will make heavy use of the <code>Tokenizer</code> class.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "html5-video", "rails-activestorage"], "comments": [{"owner": {"reputation": 193, "user_id": 6559094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591b4f7a0a640b6a1d2a1360bfd5d653?s=128&d=identicon&r=PG", "display_name": "Zavitoski", "link": "https://stackoverflow.com/users/6559094/zavitoski"}, "edited": false, "score": 0, "creation_date": 1568034122, "post_id": 57854202, "comment_id": 102135390, "body": "It looks like the URL you are providing as source is not a video, or at least isn&#39;t recognized as one. The url apparently ends with a &#39;/vid&#39;  So, 2 questions: What is the output of <code>url_for(@play.clip)</code>? Have you tried just <code>video_tag( @video.clip )</code> ?"}, {"owner": {"reputation": 39, "user_id": 4509803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef900639a5f2fd79e8dccf09383ac317?s=128&d=identicon&r=PG&f=1", "display_name": "pride", "link": "https://stackoverflow.com/users/4509803/pride"}, "reply_to_user": {"reputation": 193, "user_id": 6559094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591b4f7a0a640b6a1d2a1360bfd5d653?s=128&d=identicon&r=PG", "display_name": "Zavitoski", "link": "https://stackoverflow.com/users/6559094/zavitoski"}, "edited": false, "score": 0, "creation_date": 1568042424, "post_id": 57854202, "comment_id": 102140039, "body": "to your questions : 1- url_for(@play.clip) result is rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBa&zwnj;&#8203;HBJQT09IiwiZXhwIjpud&zwnj;&#8203;WxsLCJwdXIiOiJibG9iX&zwnj;&#8203;2lkIn19--a44730f58a0&zwnj;&#8203;7282f626737b6a541d57&zwnj;&#8203;fa9dc11c4/vid   2- i get &quot; The asset &quot;&quot; is not present in the asset pipeline.&quot;    I don&#39;t think it comes from the extension.Already tried a workaround to add the extension in the url but that wasn&#39;t the problem"}, {"owner": {"reputation": 193, "user_id": 6559094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591b4f7a0a640b6a1d2a1360bfd5d653?s=128&d=identicon&r=PG", "display_name": "Zavitoski", "link": "https://stackoverflow.com/users/6559094/zavitoski"}, "edited": false, "score": 0, "creation_date": 1568050084, "post_id": 57854202, "comment_id": 102143455, "body": "Could you please provide a little more code then? Like the Play model."}, {"owner": {"reputation": 39, "user_id": 4509803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef900639a5f2fd79e8dccf09383ac317?s=128&d=identicon&r=PG&f=1", "display_name": "pride", "link": "https://stackoverflow.com/users/4509803/pride"}, "reply_to_user": {"reputation": 193, "user_id": 6559094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591b4f7a0a640b6a1d2a1360bfd5d653?s=128&d=identicon&r=PG", "display_name": "Zavitoski", "link": "https://stackoverflow.com/users/6559094/zavitoski"}, "edited": false, "score": 0, "creation_date": 1568193952, "post_id": 57854202, "comment_id": 102194256, "body": "@Zavitoski: replied in the comment"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 4509803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef900639a5f2fd79e8dccf09383ac317?s=128&d=identicon&r=PG&f=1", "display_name": "pride", "link": "https://stackoverflow.com/users/4509803/pride"}, "is_accepted": true, "score": 1, "last_activity_date": 1568202582, "last_edit_date": 1568202582, "creation_date": 1568193890, "answer_id": 57886011, "question_id": 57854202, "link": "https://stackoverflow.com/questions/57854202/rails-active-storage-video-tag-not-showing-video/57886011#57886011", "title": "Rails Active Storage : video_tag not showing video", "body": "<p>fixed. The issue wasn't coming from the active storage itself. The get request to play the video was stopped by a line i wrote in routes.rb to make all \"unknown routes\" redirect to root_path : </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>get '*path' =&gt; redirect('/')\n</code></pre>\n\n<p>Now t hat the video playing video has been fixed i have to deal with \"redirecting unknown paths to root without causing a problem with the GET \" </p>\n"}], "owner": {"reputation": 39, "user_id": 4509803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef900639a5f2fd79e8dccf09383ac317?s=128&d=identicon&r=PG&f=1", "display_name": "pride", "link": "https://stackoverflow.com/users/4509803/pride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 57886011, "answer_count": 1, "score": 1, "last_activity_date": 1568202582, "creation_date": 1568032586, "question_id": 57854202, "link": "https://stackoverflow.com/questions/57854202/rails-active-storage-video-tag-not-showing-video", "title": "Rails Active Storage : video_tag not showing video", "body": "<p>I m trying to implement some upload then play video in my app using Rails 5.2.3 and Active Storage. After fighting with active storage for a while i m finally sure that my attachment is containing the file i want to attach => after inspecting the src is correct\nThe problem here is that i keep getting those warnings from firefox console :</p>\n\n<blockquote>\n  <p>HTTP \"Content-Type\" of \"text/html\" is not supported. Load of media resource <a href=\"http://localhost:3000/rails/active_storage/blobs/eyJfcmFpbHM\" rel=\"nofollow noreferrer\">http://localhost:3000/rails/active_storage/blobs/eyJfcmFpbHM</a>\u2026JibG9iX2lkIn19--a44730f58a07282f626737b6a541d57fa9dc11c4/vid failed. 23\n  Cannot play media. No decoders for requested formats: text/html</p>\n</blockquote>\n\n<p>and a video area with the following message \" <br>\nNo video with supported format and MIME type found\"</p>\n\n<p>Now, the console warnings are only showing up in Firefox but the video isn't playable in all the browsers that i tested so i think that my problem got something to do with the warning. I m new to rails so i ve tried all what i have found in google without solving my problem.</p>\n\n<p>I m showing the video with the video_tag this way : </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> &lt;%= video_tag(url_for(@play.clip), style: \"width:100%;height:auto\", :controls =&gt; true) if @play.clip.attached? %&gt;\n</code></pre>\n\n<p>And added a meme_types.rb in initializers with the following code </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rack::Mime::MIME_TYPES.merge!({\n                                \".mp4\" =&gt; \"video/mp4\",\n                              })\n</code></pre>\n\n<p>I have tried to display the video using plain html5 ( which is the same) and i m naturally getting the same warnings...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "cryptography", "rsa"], "answers": [{"tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1568250682, "creation_date": 1568250682, "answer_id": 57898509, "question_id": 57853968, "link": "https://stackoverflow.com/questions/57853968/how-to-verify-a-webhook-with-ruby/57898509#57898509", "title": "How to verify a webhook with Ruby?", "body": "<p>I can't explain it completely but I think the false is related to your signature or data_serialized parameter, I use the same digest. Another difference is that sign is called on the key in the example below:</p>\n\n<p><strong>verify(digest, signature, data)</strong></p>\n\n<p>from: <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/openssl/rdoc/OpenSSL/PKey/PKey.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.6.3/libdoc/openssl/rdoc/OpenSSL/PKey/PKey.html</a></p>\n\n<blockquote>\n  <p>To verify the String signature, digest, an instance of OpenSSL::Digest, must be provided to re-compute the message digest of the original data, also a String. The return value is true if the signature is valid, false otherwise. A PKeyError is raised should errors occur. Any previous state of the Digest instance is irrelevant to the validation outcome, the digest instance is reset to its initial state during the operation.</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>data = 'Sign me!'\ndigest = OpenSSL::Digest::SHA256.new\npkey = OpenSSL::PKey::RSA.new(2048)\nsignature = pkey.sign(digest, data)\npub_key = pkey.public_key\nputs pub_key.verify(digest, signature, data) # =&gt; true`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "edited": false, "score": 0, "creation_date": 1568380007, "post_id": 57911685, "comment_id": 102265968, "body": "Hi Vasfed, thanks! Is there a way to do this in Ruby, without PHP? PHP.serialize(data_sorted, true)"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "edited": false, "score": 0, "creation_date": 1568380074, "post_id": 57911685, "comment_id": 102266009, "body": "@userden yes, mentioned php_serialize gem does that"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "edited": false, "score": 0, "creation_date": 1568388013, "post_id": 57911685, "comment_id": 102270210, "body": "do not be deceived by <code>PHP</code> - it&#39;s a ruby class from that gem"}, {"owner": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "edited": false, "score": 0, "creation_date": 1568478641, "post_id": 57911685, "comment_id": 102290508, "body": "Thanks Vasfed! I had a problem with Rails, had to do some tweaking there, but now all works. Thanks!"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 2, "last_activity_date": 1568308726, "creation_date": 1568308726, "answer_id": 57911685, "question_id": 57853968, "link": "https://stackoverflow.com/questions/57853968/how-to-verify-a-webhook-with-ruby/57911685#57911685", "title": "How to verify a webhook with Ruby?", "body": "<p>Example in paddle documentation that you've linked to suggests serializing data to PHP format before verification using <code>php-serialize</code> gem, that differs from regular json:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># ... data = ...\ndata_sorted.to_json\n =&gt; \"[[\\\"alert_id\\\",\\\"1\\\"],[\\\"alert_name\\\",\\\"alert_created\\\"],[\\\"cancel_url\\\",\\\"https://...\\\"],[\\\"checkout_id\\\",\\\"1\\\"],[\\\"user_id\\\",\\\"1\\\"]]\"\nPHP.serialize(data_sorted, true)\n =&gt; \"a:5:{s:8:\\\"alert_id\\\";s:1:\\\"1\\\";s:10:\\\"alert_name\\\";s:13:\\\"alert_created\\\";s:10:\\\"cancel_url\\\";s:11:\\\"https://...\\\";s:11:\\\"checkout_id\\\";s:1:\\\"1\\\";s:7:\\\"user_id\\\";s:1:\\\"1\\\";}\"\n</code></pre>\n\n<p>as you can see - it gives different result, so obviously signature will not match.</p>\n\n<p>Actually, you can take their whole ruby example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'base64'\nrequire 'php_serialize' # https://github.com/jqr/php-serialize\nrequire 'openssl'\n\npublic_key = '-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqh...'\n\n# 'data' represents all of the POST fields sent with the request.\nsignature = Base64.decode64(data['p_signature'])\ndata.delete('p_signature')\ndata.each {|key, value|data[key] = String(value)}\ndata_sorted = data.sort_by{|key, value| key}\ndata_serialized = PHP.serialize(data_sorted, true)\n\ndigest    = OpenSSL::Digest::SHA1.new\npub_key   = OpenSSL::PKey::RSA.new(public_key).public_key\nverified  = pub_key.verify(digest, signature, data_serialized)\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 57911685, "answer_count": 2, "score": 0, "last_activity_date": 1568308726, "creation_date": 1568031609, "last_edit_date": 1568220011, "question_id": 57853968, "link": "https://stackoverflow.com/questions/57853968/how-to-verify-a-webhook-with-ruby", "title": "How to verify a webhook with Ruby?", "body": "<p>I'm using Ruby 2.5.5 and Rails 5.2. I'm trying to verify a <a href=\"https://developer.paddle.com/webhook-reference/verifying-webhooks\" rel=\"nofollow noreferrer\">Paddle webhook</a>, but can't get the verification to work. I tried various ways, here is one of them. I'll go through it on my console:</p>\n\n<p>Here is the data:</p>\n\n<pre><code>data = {\n\"alert_id\"=&gt;\"1\", \n\"alert_name\"=&gt;\"alert_created\", \n\"cancel_url\"=&gt;\"https://...\", \n\"checkout_id\"=&gt;\"1\", \n\"user_id\"=&gt;\"1\", \n\"p_signature\"=&gt;\"fwWXqR9C...\"\n} \n\npublic_key = \"-----BEGIN PUBLIC KEY-----\nFAKEdfsdfsdfsdfsdfsdfsdf23423423423423KCAgEAnyBxU0cUW9NGQU1Ur0MD\n/M+VxdMsv7PMXsZFAKEKEYlskdfjlskdjflsjlskdj8i7+D9xZT57VhIfv8hInGy\nIQFmJRrWxgmHjSW4cKbjg6Qg0NgOEuPdEIixsQZ/AfIar4KNObDul0EXL92B6ru/\n...\n-----END PUBLIC KEY-----\"\n</code></pre>\n\n<p>Then I do the following:</p>\n\n<pre><code>signature = Base64.decode64(data['p_signature'])\n\ndata.delete('p_signature')\n\ndata.each {|key, value|data[key] = String(value)}\n\ndata_sorted = data.sort_by{|key, value| key}\n\ndata_serialized = data_sorted.to_json\n\ndigest    = OpenSSL::Digest::SHA1.new\n\npub_key   = OpenSSL::PKey::RSA.new(public_key)\n\nverified  = pub_key.verify(digest, signature, data_serialized)\n</code></pre>\n\n<p>In the end <em>verified</em> is always <em>false</em>. What am I doing wrong? I asked a related question <a href=\"https://stackoverflow.com/questions/57444778/how-to-verify-a-webhook-with-ruby-in-rails\">here</a>, but couldn't get it yet to work. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 5, "last_activity_date": 1568032078, "creation_date": 1568032078, "answer_id": 57854087, "question_id": 57853816, "link": "https://stackoverflow.com/questions/57853816/ignore-two-parameters-from-hash/57854087#57854087", "title": "Ignore two parameters from hash", "body": "<p>You can use <a href=\"https://apidock.com/rails/Hash/except\" rel=\"noreferrer\"><code>Hash#except</code></a></p>\n\n<pre><code>form.except('created_at', 'updated_at')\n</code></pre>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57854087, "answer_count": 1, "score": 1, "last_activity_date": 1568032107, "creation_date": 1568031130, "last_edit_date": 1568032107, "question_id": 57853816, "link": "https://stackoverflow.com/questions/57853816/ignore-two-parameters-from-hash", "title": "Ignore two parameters from hash", "body": "<p>In my logs method I want to implement some kind of mechanism which ignore two parameters <code>created_at</code> and <code>updated_at</code> (in other place it will be e.g. password) from <code>new_data: form</code>. <code>form</code> is a hash of admin parameters - <code>AdminUser.new(form)</code> (like email, name, password etc.)</p>\n\n<p>Method below:</p>\n\n<pre><code>def log_admin_data\n  admin_user = AdminUser.last\n  AdminPanelLog.update(\n    admin_email: admin_user.email,\n    admin_role: admin_user.role,\n    type: 'Create new Admin User',\n    new_data: form, #some kind of method like ignore_attribute(created_at, updated_at)\n  )\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chart.js", "chartkick"], "comments": [{"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1568025376, "post_id": 57851369, "comment_id": 102130987, "body": "May you check <code>@line_items_sold.group_by_day(&amp;:created_at).sum(:total)</code> works?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1568025544, "post_id": 57851369, "comment_id": 102131068, "body": "Could you update with some sample data please? The result of <code>@line_items_sold.group_by_day(:created_at)</code> would be very handy."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1568083112, "post_id": 57851369, "comment_id": 102152423, "body": "@RishiPithadiya sorry for delay::: That gives error: <code>ActionView::Template::Error (undefined method </code>+&#39; for :store_fulfillable_quantity:Symbol)`"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1568083211, "post_id": 57851369, "comment_id": 102152442, "body": "@SRack Error: <code>ActionView::Template::Error (PG::GroupingError: ERROR:  column &quot;line_items.id&quot; must appear in the GROUP BY clause or be used in an aggregate function</code> ..... @line_items_sold is LineItem.all"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1568083800, "post_id": 57851369, "comment_id": 102152547, "body": "Currently, my only work around is making this a decimal in the dtabase itself on Record Creation but eh.  Any thoughts?"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1568021732, "creation_date": 1568021732, "question_id": 57851369, "link": "https://stackoverflow.com/questions/57851369/using-sum-with-chartkick-on-multiple-attributes", "title": "Using sum with chartkick on multiple attributes", "body": "<p>I want to display the chart of revenue which is <code>total * quantity</code></p>\n\n<p>I can do charts like this to display the total:</p>\n\n<pre><code>&lt;%= line_chart @line_items_sold.group_by_day(:created_at).sum(:total) %&gt;\n</code></pre>\n\n<p>Although doing sum with multiple attributes:</p>\n\n<pre><code>&lt;%= line_chart @line_items_sold.group_by_day(:created_at).sum{|li| li.store_price.to_d * li.store_fulfillable_quantity} %&gt;\n</code></pre>\n\n<p>doesn't work...</p>\n\n<p>error:\nActionView::Template::Error (PG::GroupingError: ERROR:  column \"line_items.id\" must appear in the GROUP BY clause or be used in an aggregate function</p>\n\n<p>Doing:</p>\n\n<pre><code>&lt;%= line_chart @line_items_sold.sum{|li| li.store_price.to_d * li.store_fulfillable_quantity}.group_by_day(:created_at) %&gt;\n</code></pre>\n\n<p>Error: Can't group_by <em>n</em>BigDecimal</p>\n\n<p>Any ideas on how I can accomplish this?</p>\n\n<p>I want to show the revenue (price * quantity) on a per day basis.</p>\n"}, {"tags": ["java", "ruby", "ruby-on-rails-4", "jruby"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568026152, "post_id": 57851097, "comment_id": 102131318, "body": "Have you done <code>bundle install</code>?"}, {"owner": {"reputation": 1, "user_id": 11243104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LA9GklFOR4E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnCGq1Xx_K3MPzk2dnv1ITaZITpQ/mo/photo.jpg?sz=128", "display_name": "shubham kundra", "link": "https://stackoverflow.com/users/11243104/shubham-kundra"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568107901, "post_id": 57851097, "comment_id": 102160770, "body": "I did bundle install..I got this error         &quot;Could not find gem &#39;foc-common-assets java&#39; in any of the gem sources listed in your Gemfile.&quot;   Gem I created is &quot;foc-common-assets&quot; but it&#39;s adding platform at the gemname end. I tried &quot;bundle lock --add-platform ruby&quot;. Then I got &quot;Could not find gem &#39;foc-common-assets&#39; in any of the gem sources listed in your Gemfile.&quot; Error.  So basically it&#39;s not able to find gems which were created before."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568196888, "post_id": 57851097, "comment_id": 102195785, "body": "Where is foc-common-assets hosted, on rubygems? Does your Gemfile have a <code>source</code> line?"}, {"owner": {"reputation": 1, "user_id": 11243104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LA9GklFOR4E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnCGq1Xx_K3MPzk2dnv1ITaZITpQ/mo/photo.jpg?sz=128", "display_name": "shubham kundra", "link": "https://stackoverflow.com/users/11243104/shubham-kundra"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568207776, "post_id": 57851097, "comment_id": 102201647, "body": "They are in other packages. It don&#39;t have source line of foc-common-assets. Actually foc-common-assets is the gem created in other package and I use many such gems in many other packages. So do I need to give the source of all the gems?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568282131, "post_id": 57851097, "comment_id": 102228308, "body": "I&#39;m not sure what you mean by &quot;package&quot;?"}, {"owner": {"reputation": 1, "user_id": 11243104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LA9GklFOR4E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnCGq1Xx_K3MPzk2dnv1ITaZITpQ/mo/photo.jpg?sz=128", "display_name": "shubham kundra", "link": "https://stackoverflow.com/users/11243104/shubham-kundra"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1568299440, "post_id": 57851097, "comment_id": 102238221, "body": "Basically, in my rails website I have multiple packages which are rendering different page. So package you can treat as for different page there are gems located at different places."}], "owner": {"reputation": 1, "user_id": 11243104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LA9GklFOR4E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnCGq1Xx_K3MPzk2dnv1ITaZITpQ/mo/photo.jpg?sz=128", "display_name": "shubham kundra", "link": "https://stackoverflow.com/users/11243104/shubham-kundra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568020729, "creation_date": 1568020729, "question_id": 57851097, "link": "https://stackoverflow.com/questions/57851097/build-failing-after-adding-jruby-in-ruby-project", "title": "build failing after adding jruby in ruby project", "body": "<p>I have setup my java package where I have written few java methods.\nI want to call those methods from Ruby on Rails website but it's not working. I'm trying to do one POC for it but it's not working.</p>\n\n<p>I installed jruby for it but build is failing. It's not able to find gems.</p>\n\n<p>ruby gems environment:</p>\n\n<p>gem env</p>\n\n<p>RubyGems Environment:</p>\n\n<ul>\n<li><p>RUBYGEMS VERSION: 3.0.6</p></li>\n<li><p>RUBY VERSION: 2.5.3 (2019-09-09 patchlevel 0) [java]</p></li>\n<li><p>INSTALLATION DIRECTORY: /local/home/skkundra/.rvm/gems/jruby-9.2.6.0</p></li>\n<li><p>USER INSTALLATION DIRECTORY: /home/skkundra/.gem/jruby/2.5.0</p></li>\n<li><p>RUBY EXECUTABLE: /local/home/skkundra/.rvm/rubies/jruby-9.2.6.0/bin/jruby</p></li>\n<li><p>GIT EXECUTABLE: /usr/bin/git</p></li>\n<li><p>EXECUTABLE DIRECTORY: /local/home/skkundra/.rvm/gems/jruby-9.2.6.0/bin</p></li>\n<li><p>SPEC CACHE DIRECTORY: /home/skkundra/.gem/specs</p></li>\n<li><p>SYSTEM CONFIGURATION DIRECTORY: </p></li>\n</ul>\n\n<p>/local/home/skkundra/.rvm/rubies/jruby-9.2.6.0/etc\n  - RUBYGEMS PLATFORMS:</p>\n\n<pre><code>- ruby\n\n- universal-java-1.8\n</code></pre>\n\n<ul>\n<li><p>GEM PATHS:</p>\n\n<ul>\n<li><p>/local/home/skkundra/.rvm/gems/jruby-9.2.6.0</p></li>\n<li><p>/local/home/skkundra/.rvm/rubies/jruby-\n9.2.6.0/lib/ruby/gems/shared</p></li>\n</ul></li>\n<li><p>GEM CONFIGURATION:</p>\n\n<ul>\n<li><p>:update_sources => true</p></li>\n<li><p>:verbose => true</p></li>\n<li><p>:backtrace => false</p></li>\n<li><p>:bulk_threshold => 1000</p></li>\n<li><p>\"install\" => \"--no-rdoc --no-ri\"</p></li>\n<li><p>\"update\" => \"--no-rdoc --no-ri\"</p></li>\n</ul></li>\n<li><p>REMOTE SOURCES:</p>\n\n<ul>\n<li><a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a></li>\n</ul></li>\n<li><p>SHELL PATH:</p>\n\n<ul>\n<li><p>/home/skkundra/.rvm/gems/jruby-9.2.6.0/bin</p></li>\n<li><p>/home/skkundra/.rvm/gems/jruby-9.2.6.0@global/bin</p></li>\n<li><p>/home/skkundra/.rvm/rubies/jruby-9.2.6.0/bin</p></li>\n<li><p>/home/skkundra/.rvm/bin</p></li>\n<li><p>/home/skkundra/.toolbox/bin</p></li>\n<li><p>/usr/NX/bin</p></li>\n<li><p>/usr/local/bin</p></li>\n<li><p>/bin</p></li>\n<li><p>/usr/bin</p></li>\n<li><p>/home/skkundra/bin</p></li>\n<li><p>/usr/local/sbin</p></li>\n<li><p>/usr/sbin</p></li>\n<li><p>/sbin</p></li>\n</ul></li>\n</ul>\n\n<p>I'm getting </p>\n\n<p>/home/skkundra/VPSInvoiceCentralWebsite/env/VPSInvoiceCentralWebsite-1.0/runtime/ruby2.3.x/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'thread_safe' (~> 0.1) - did find: [thread_safe-0.3.6-java] (Gem::LoadError)</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568020114, "post_id": 57850854, "comment_id": 102128512, "body": "Try <code>(?:-?(T))?</code> instead of <code>-?(T)?</code>. BTW, are you sure you did not miss the anchors like <code>\\A</code> at the start and <code>\\z</code> at the end? Try <code>&#47;\\A(ST)([A-Z])?(CA1)(?:-?(T))?\\z&#47;</code>, the anchors are crucial here as they signal the start/end of string."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1568021460, "post_id": 57850854, "comment_id": 102129190, "body": "Do you really need all these capture groups?They slow down the process."}, {"owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1568021551, "post_id": 57850854, "comment_id": 102129241, "body": "@Toto any other suggestions ? how can i handle this in a better way ?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568022119, "post_id": 57850854, "comment_id": 102129507, "body": "@code_t Toto means 1) remove unnecessary (redundant) groups, 2) convert those groupings you need to accommodate alternative patterns into non-capturing groups."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573459059, "post_id": 57850854, "comment_id": 103875600, "body": "You could insert <code>(?!.*-\\z).*</code> at the beginning of the regex. Note that, since you are defining the regex in free-spacing mode (<code>&#47;x</code>) all spaces will be stripped out before the regex is parsed, including that space in <code>([A-Z]) ?</code>. If that spaces is to be retained it must be escaped (<code>\\ </code>), put in a character class (<code>[ ]</code>) or, if matching a whitespace is OK, replaced with <code>\\s</code>, <code>\\p{Space}</code> or <code>[[:space&#39;]]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1568021612, "creation_date": 1568021612, "answer_id": 57851344, "question_id": 57850854, "link": "https://stackoverflow.com/questions/57850854/how-to-group-a-special-character-and-a-letter-in-regex-in-ruby/57851344#57851344", "title": "how to group a special character and a letter in regex in ruby?", "body": "<p>You may use</p>\n\n<pre><code>/\\AST[A-Z]?(#{A_VAL})(?:-?T)?\\z/\n</code></pre>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>\\A</code> - start of string</li>\n<li><code>ST</code> - an <code>ST</code> substring </li>\n<li><code>[A-Z]?</code> - an optional ASCII letter</li>\n<li><code>(#{A_VAL})</code> - Group 1 (if there is a single alternative, just one string, and you do not need this value later, you may omit the capturing parentheses): a pattern inside <code>A_VAL</code> variable</li>\n<li><code>(?:-?T)?</code> - an optional non-capturing group that matches an optional <code>-</code> and an obligatory <code>T</code> (i.e. it matches <code>-T</code> or <code>T</code> 1 or 0 times)</li>\n<li><code>\\z</code> - end of string.</li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 2, "accepted_answer_id": 57851344, "answer_count": 1, "score": 2, "last_activity_date": 1568021612, "creation_date": 1568019821, "question_id": 57850854, "link": "https://stackoverflow.com/questions/57850854/how-to-group-a-special-character-and-a-letter-in-regex-in-ruby", "title": "how to group a special character and a letter in regex in ruby?", "body": "<p>I have regular expression like this in ruby</p>\n\n<pre><code>%r{\n  (ST)\n  ([A-Z]) ?\n  (#{A_VAL})\n  -?\n  (T)?\n}x\n</code></pre>\n\n<p>Now ,I don't want my regex to accept any string that ends with \"-\" .So, for example it should accept <br/>\n1)\"STCA1-T\" <br/>\n2)\"STCA1T\"  <br/>\nBut it shouldn't accept \"STCA1-\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "jemalloc"], "answers": [{"comments": [{"owner": {"reputation": 4009, "user_id": 375960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2d844f88c7eda26c4a42df32569fb1cf?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/375960/kevin"}, "edited": false, "score": 0, "creation_date": 1615925960, "post_id": 57920663, "comment_id": 117842499, "body": "It needs two dashes in the &quot;rvm reinstall&quot; command --with-jemalloc.  Also beware - many comment platforms automatically replace two dashes with an mdash - which caused me an hour of confusion since it looks similar :)  ALSO - the command to test has changed, you need to use MAINLIBS instead of LIBS"}], "tags": [], "owner": {"reputation": 349, "user_id": 3489470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGGCF.png?s=128&g=1", "display_name": "ste26054", "link": "https://stackoverflow.com/users/3489470/ste26054"}, "is_accepted": false, "score": 3, "last_activity_date": 1568366051, "creation_date": 1568366051, "answer_id": 57920663, "question_id": 57850471, "link": "https://stackoverflow.com/questions/57850471/how-to-add-jemalloc-to-existing-rails-server-using-rvm/57920663#57920663", "title": "How to add jemalloc to existing rails server using rvm?", "body": "<p>I managed to add jemalloc using the following steps:</p>\n\n<p>Install the Jemalloc library:</p>\n\n<pre><code>sudo apt install libjemalloc-dev\n</code></pre>\n\n<p>Reinstall the currently installed ruby version with a compilation argument to include Jemalloc support:</p>\n\n<pre><code>rvm reinstall 2.5.1 -C -with-jemalloc\n</code></pre>\n\n<p>Then check that Jemalloc support has been added properly:</p>\n\n<pre><code>ruby -r rbconfig -e \"puts RbConfig::CONFIG['LIBS']\"\n</code></pre>\n\n<p>It should output something like:</p>\n\n<pre><code>-lpthread -ljemalloc -lgmp -ldl -lcrypt -lm\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4673, "user_id": 1460496, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8abec4cad47a5e4447813cb76dfdd76c?s=128&d=identicon&r=PG", "display_name": "techvineet", "link": "https://stackoverflow.com/users/1460496/techvineet"}, "is_accepted": false, "score": 0, "last_activity_date": 1599148472, "last_edit_date": 1599148472, "creation_date": 1599147979, "answer_id": 63727214, "question_id": 57850471, "link": "https://stackoverflow.com/questions/57850471/how-to-add-jemalloc-to-existing-rails-server-using-rvm/63727214#63727214", "title": "How to add jemalloc to existing rails server using rvm?", "body": "<p>Updates to @ste20654 answer</p>\n<p>For me this command</p>\n<pre><code>ruby -r rbconfig -e &quot;puts RbConfig::CONFIG['LIBS']&quot;\n</code></pre>\n<p>returned</p>\n<pre><code>-lm\n</code></pre>\n<p>What worked is this</p>\n<pre><code>ruby -r rbconfig -e &quot;puts RbConfig::CONFIG['MAINLIBS']&quot;\n</code></pre>\n<p>OR</p>\n<pre><code>ruby -r rbconfig -e &quot;puts RbConfig::CONFIG['SOLIBS']&quot;\n</code></pre>\n<p>which returned ( if ruby is correctly compiled with jemalloc )</p>\n<pre><code>-lz -lpthread -lrt -lrt -ljemalloc -lgmp -ldl -lcrypt -lm\n</code></pre>\n"}], "owner": {"reputation": 2250, "user_id": 5706413, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EzLdI1Z_Msg/AAAAAAAAAAI/AAAAAAAAABo/mRe-nK_u4x0/photo.jpg?sz=128", "display_name": "Jose Kj", "link": "https://stackoverflow.com/users/5706413/jose-kj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1599148472, "creation_date": 1568018348, "question_id": 57850471, "link": "https://stackoverflow.com/questions/57850471/how-to-add-jemalloc-to-existing-rails-server-using-rvm", "title": "How to add jemalloc to existing rails server using rvm?", "body": "<p>how to add jemalloc in a working ruby on rails server?We installed ruby using rvm. </p>\n\n<p><code>Rails version:5.2\n Ruby version:2.5.1</code></p>\n\n<p>I tried</p>\n\n<pre><code>ruby -r rbconfig -e \"puts RbConfig::CONFIG['LIBS']\"\n</code></pre>\n\n<p>whose output i got as</p>\n\n<pre><code>-lpthread -lgmp -ldl -lcrypt -lm\n</code></pre>\n\n<p>I saw an article <a href=\"https://bubblin.io/blog/jemalloc\" rel=\"nofollow noreferrer\">Lower Memory Usage of your Rails App with Jemalloc</a> but its using rbenv</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1568016406, "post_id": 57849504, "comment_id": 102126711, "body": "What does your user model look like?"}, {"owner": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1568024541, "post_id": 57849504, "comment_id": 102130633, "body": "class Like &lt; ApplicationRecord                                                          belongs_to :term                                                                      belongs_to :user                                                                      scope :publics, -&gt; (user_id, term_id) { where(user_id: user_id, term_id: term_id) }    end ```"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "edited": false, "score": 0, "creation_date": 1568015131, "post_id": 57849673, "comment_id": 102126213, "body": "Couldn&#39;t find Term without an ID"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1568025666, "post_id": 57849673, "comment_id": 102131127, "body": "This has a nasty N+1 issue in the loop @Mark."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "edited": false, "score": 1, "creation_date": 1568026321, "post_id": 57849673, "comment_id": 102131391, "body": "@vinduongtang How are your params coming through? Please put a binding.pry point in your index action of the controller and post the output of <code>params</code>"}, {"owner": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "edited": false, "score": 0, "creation_date": 1568171231, "post_id": 57849673, "comment_id": 102186111, "body": "It must be : <code>&lt;% @likes.each do |like| %&gt;   &lt;tr&gt;     &lt;th scope=&quot;row&quot;&gt;&lt;%= like.id %&gt;&lt;&#47;th&gt;     &lt;td&gt;&lt;&#47;strong&gt;&lt;%= like.user.username %&gt;&lt;&#47;strong&gt;&gt;&lt;&#47;td&gt;   &lt;&#47;tr&gt; &lt;% end %&gt;</code> anyway thanks you so much :)"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1568014721, "creation_date": 1568014721, "answer_id": 57849673, "question_id": 57849504, "link": "https://stackoverflow.com/questions/57849504/how-to-display-user-liked-term/57849673#57849673", "title": "How to display User liked &quot;Term&quot;?", "body": "<p>Try:</p>\n\n<pre><code># likes_controller.rb\n\ndef index\n  @term = Term.find(params[:id]\n  @likes = @term.likes\nend\n\n</code></pre>\n\n<pre><code>## likes/index.html.erb\n\n&lt;% @likes.each do |like| %&gt;\n  &lt;tr&gt;\n    &lt;th scope=\"row\"&gt;&lt;%= @like.id %&gt;&lt;/th&gt;\n    &lt;td&gt;&lt;/strong&gt;&lt;%= @like.user.username %&gt;&lt;/strong&gt;&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1568026380, "post_id": 57852489, "comment_id": 102131426, "body": "But I think his params will be coming through as <code>term_id</code> from his routes file (despite my earlier attempt :D )"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1568026601, "post_id": 57852489, "comment_id": 102131535, "body": "Thanks @Mark - this is something of pseudocode answer as the question&#39;s missing a bit of vital info, though you&#39;re likely right there. Hope my comment didn&#39;t come across has harsh rather than helpful by the way - it was meant to be the latter, though not always the simplest to get across via text :)"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1568028627, "post_id": 57852489, "comment_id": 102132471, "body": "The joys of trying your best not to sound rude online :D All fair points and well made :)"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "edited": false, "score": 0, "creation_date": 1568037597, "post_id": 57852489, "comment_id": 102137355, "body": "Thanks @vinduongtang - really helpful. Looks like the above (perhaps with some slight tweaks - check you&#39;ve got the right params in <code>Term.find(params[:id])</code>) should work. Give it a pop and let me know how you get on or if you&#39;ve any question :)"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 2, "last_activity_date": 1568047776, "last_edit_date": 1568047776, "creation_date": 1568026118, "answer_id": 57852489, "question_id": 57849504, "link": "https://stackoverflow.com/questions/57849504/how-to-display-user-liked-term/57852489#57852489", "title": "How to display User liked &quot;Term&quot;?", "body": "<p>It's hard to be precise with this without you updating the question to show the relationships setup in the three models, but you could do something like:</p>\n\n<pre><code>#term.rb\nhas_many :users, through: :likes\n</code></pre>\n\n<p>That'll give you access to <code>term.users</code> directly, returning all those that have liked the term.</p>\n\n<p>You could then load the term in your controller (be sure to eager load the users):</p>\n\n<pre><code>def index\n  @term = Term.find(params[:id]).includes(:users)\nend\n</code></pre>\n\n<p>And then in the view:</p>\n\n<pre><code>&lt;% @term.users.each do |user| %&gt;\n  &lt;tr&gt;\n    &lt;td scope=\"row\"&gt;&lt;%= user.like_id %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;strong&gt;&lt;%= user.username %&gt;&lt;/strong&gt;&gt;&lt;/td&gt;\n  &lt;tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Please note I've switched to use two <code>td</code> tags in the loop - the <code>th</code> tag should be used for the header row.</p>\n\n<p>Hope that helps - let me know how you get on or if you have any questions :)</p>\n"}], "owner": {"reputation": 13, "user_id": 12028287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBKOwcmvmr4UMGdOgGp4dQTpH-z30TLpHQpClWs=k-s128", "display_name": "vinduong tang", "link": "https://stackoverflow.com/users/12028287/vinduong-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57852489, "answer_count": 2, "score": 0, "last_activity_date": 1568047776, "creation_date": 1568014003, "last_edit_date": 1568031688, "question_id": 57849504, "link": "https://stackoverflow.com/questions/57849504/how-to-display-user-liked-term", "title": "How to display User liked &quot;Term&quot;?", "body": "<blockquote>\n  <p>I want to show to all users who like \"Term\", how do I do it?</p>\n</blockquote>\n\n<p>And this is what I did.</p>\n\n<p>likes_controller.rb</p>\n\n<pre><code> def index\n    @likes = Like.all\n end\n\n</code></pre>\n\n<p>index.html.erb (like)</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n  &lt;thead class=\"thead-dark\"&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;STT&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;UserName&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;% @likes.each do |like| %&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"row\"&gt;&lt;%= @like.id %&gt;&lt;/th&gt;\n      &lt;td&gt;&lt;/strong&gt;&lt;%= @like.user.username %&gt;&lt;/strong&gt;&gt;&lt;/td&gt;\n      &lt;tr&gt;\n      &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n</code></pre>\n\n<p>like.rb</p>\n\n<pre><code>id, term_id, user_id\n</code></pre>\n\n<p>routes </p>\n\n<pre><code>resources :terms do\n    resources :likes\nend\n</code></pre>\n\n<p>term</p>\n\n<pre><code>belong_to :user\nhas_many :likes\n</code></pre>\n\n<p>user :</p>\n\n<pre><code>has_many :likes\nhas_many :terms\n</code></pre>\n\n<p>like :</p>\n\n<pre><code>belong_to :user\nbelong_to :term\n</code></pre>\n\n<p>I'm not sure if I have provided enough documents, if not, please leave me a comment</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1568014557, "creation_date": 1568014557, "answer_id": 57849633, "question_id": 57849372, "link": "https://stackoverflow.com/questions/57849372/running-ansible-playbooks-within-ruby-wrapper/57849633#57849633", "title": "Running ansible playbooks within ruby wrapper", "body": "<p>If you want to read the output of a command you need to use <a href=\"https://ruby-doc.org/stdlib-2.6.0.preview2/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a>.</p>\n\n<p>For example:</p>\n\n<pre><code>require 'open3'\n\noutput, status = Open3.capture2('ansible', '...')\n</code></pre>\n\n<p>Where you split out the arguments to the <code>ansible</code> command separately to avoid ugly shell-interpolation issues.</p>\n\n<p>There's a variety of tools in the <code>Open3</code> module that help with things like streaming output, checking STDERR and more.</p>\n"}, {"tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1568026278, "creation_date": 1568026278, "answer_id": 57852530, "question_id": 57849372, "link": "https://stackoverflow.com/questions/57849372/running-ansible-playbooks-within-ruby-wrapper/57852530#57852530", "title": "Running ansible playbooks within ruby wrapper", "body": "<p>If you don't mind a dependency then you can use <a href=\"https://github.com/piotrmurach/tty-command\" rel=\"nofollow noreferrer\">tty-command</a>:</p>\n\n<pre><code>require 'tty-command'\n\ncmd = TTY::Command.new\n\nresult = cmd.run('ansible ...')\n\nputs result.out.chomp\n</code></pre>\n"}], "owner": {"reputation": 600, "user_id": 1511249, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bsiOA.jpg?s=128&g=1", "display_name": "Andrew White", "link": "https://stackoverflow.com/users/1511249/andrew-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568026308, "creation_date": 1568013384, "last_edit_date": 1568026308, "question_id": 57849372, "link": "https://stackoverflow.com/questions/57849372/running-ansible-playbooks-within-ruby-wrapper", "title": "Running ansible playbooks within ruby wrapper", "body": "<p>I'm trying to find a simple method of running an ansible playbook from within a ruby script.</p>\n\n<p>My script checks various conditions, and - if those conditions a met - runs an ansible playbook.</p>\n\n<p>I thought I could run the playbook via backticks using the kernel module. However I'm unsure how I could parse the output to tell if I had success. Does anyone have a method, wrapper or library to do this? Searching the web only resulted in information about how to deploy ruby with ansible playbooks, not the other way around.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6", "actiontext"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568011032, "post_id": 57848776, "comment_id": 102124612, "body": "&quot;After going through the documentation and watching some videos, I removed the body column from my Story table to be stored by ActionText.&quot; I don&#39;t understand why did you do this? Where do you want this <code>body</code> content to be stored?"}, {"owner": {"reputation": 45, "user_id": 4623187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b160407d38ca304afccd057065ba4863?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lee", "link": "https://stackoverflow.com/users/4623187/sam-lee"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1568011627, "post_id": 57848776, "comment_id": 102124802, "body": "The <code>body</code> is the content of the story. Initially it was in the Story table as <code>body:text</code>. After learning that ActionText has its own table when watching this <a href=\"https://www.youtube.com/watch?v=HJZ9TnKrt7Q&amp;t=662s\" rel=\"nofollow noreferrer\">video</a>, I decided to let ActionText store the body by declaring <code>has_rich_text :body</code> in the Story model as it seemed to be the best practice."}, {"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1568012687, "post_id": 57848776, "comment_id": 102125207, "body": "Actually, you only show GET for show and no log for create. That might be more useful."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4623187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b160407d38ca304afccd057065ba4863?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lee", "link": "https://stackoverflow.com/users/4623187/sam-lee"}, "edited": false, "score": 0, "creation_date": 1568012321, "post_id": 57849127, "comment_id": 102125045, "body": "Thanks for pointing that out! I didn&#39;t copy-paste my code properly. Unfortunately still doesn&#39;t work."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 45, "user_id": 4623187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b160407d38ca304afccd057065ba4863?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lee", "link": "https://stackoverflow.com/users/4623187/sam-lee"}, "edited": false, "score": 0, "creation_date": 1568012417, "post_id": 57849127, "comment_id": 102125079, "body": "@SamLee I noticed something else, so I edited my answer. Check this out please."}, {"owner": {"reputation": 45, "user_id": 4623187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b160407d38ca304afccd057065ba4863?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lee", "link": "https://stackoverflow.com/users/4623187/sam-lee"}, "edited": false, "score": 1, "creation_date": 1568012588, "post_id": 57849127, "comment_id": 102125156, "body": "Thank you so much! That solved the problem, silly mistake."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 0, "last_activity_date": 1568012391, "last_edit_date": 1568012391, "creation_date": 1568012151, "answer_id": 57849127, "question_id": 57848776, "link": "https://stackoverflow.com/questions/57848776/data-being-sent-to-the-wrong-table-when-using-action-text/57849127#57849127", "title": "Data being sent to the wrong table when using Action Text?", "body": "<p>You should actually use your <code>story_params</code> method:</p>\n\n<pre><code>@story = Story.new(story_params)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4623187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b160407d38ca304afccd057065ba4863?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lee", "link": "https://stackoverflow.com/users/4623187/sam-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 57849127, "answer_count": 1, "score": 0, "last_activity_date": 1568012391, "creation_date": 1568010291, "last_edit_date": 1568012275, "question_id": 57848776, "link": "https://stackoverflow.com/questions/57848776/data-being-sent-to-the-wrong-table-when-using-action-text", "title": "Data being sent to the wrong table when using Action Text?", "body": "<p>Using Ruby on Rails 6, after the user saves their story(using Action Text to type their story), they will be redirected to the <code>show</code> view where the story can be read. However, nothing is showing up and when checking the database, nothing seems to be saved.</p>\n\n<p>After going through the documentation and watching some videos, I removed the <code>body</code> column from my <code>Story</code> table to be stored by ActionText.</p>\n\n<p>The model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Story &lt; ApplicationRecord\n    # declare that body has a rich text field\n    has_rich_text :body\nend\n</code></pre>\n\n<p>The controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def new\n        @story = Story.new\n    end\n\n    def create\n        @story = Story.new(params[:story_params])\n        if @story.save\n          redirect_to @story\n        else\n          render 'new'\n        end\n    end\n\n    def show\n        @story = Story.find(params[:id])\n    end\n\n    private\n\n    def story_params\n        params.require(:story).permit(:heading, :summary, :body)\n    end\n</code></pre>\n\n<p>The form from new.html.erb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_with(model: @story) do |form| %&gt;\n    &lt;%= form.label :heading %&gt; &lt;br&gt;\n    &lt;%= form.text_area :heading %&gt;\n    &lt;br&gt;\n    &lt;%= form.label :summary %&gt; &lt;br&gt;\n    &lt;%= form.text_area :summary %&gt; \n    &lt;br&gt;\n    &lt;%= form.label :body %&gt;\n    &lt;%= form.rich_text_area :body %&gt;\n    &lt;br&gt;\n    &lt;%= form.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I expected the <code>heading</code> and <code>summary</code> to be stored in the Story table while ActionText handles the <code>body</code>.\nHere's what <a href=\"https://i.stack.imgur.com/GassT.png\" rel=\"nofollow noreferrer\">happens</a> when creating and saving a story.\nAs seen <a href=\"https://i.stack.imgur.com/O17yu.png\" rel=\"nofollow noreferrer\">here</a>, nothing is saved in the Story table.</p>\n"}, {"tags": ["ruby", "functional-programming", "ruby-2.6"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1568010864, "post_id": 57848235, "comment_id": 102124556, "body": "<code>(pr&gt;&gt;pr).call</code> is equivalent to <code>pr.call(pr.call)</code>, so if <code>pr</code> takes no argument it naturally will raise an exception. You speak of using a phony argument, which quells the exception but doesn&#39;t provide a useful construct. For if example, <code>@foo =  0.253; pr = -&gt;(x) { @foo }; (pr&gt;&gt;pr).call(0) #= &gt; 0.253</code>, the same as <code>pr.call(0)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1568010427, "creation_date": 1568010427, "answer_id": 57848806, "question_id": 57848235, "link": "https://stackoverflow.com/questions/57848235/composition-of-functions-without-arguments-wrong-number-of-arguments-given-1/57848806#57848806", "title": "Composition of functions without arguments: wrong number of arguments (given 1, expected 0)", "body": "<p>Function composition is only defined for unary functions, the term doesn't even make sense for nullary functions. (Actually, a nullary function itself doesn't make sense, it is exactly the same thing as a constant.)</p>\n\n<p>The definition of \"function composition\" is <em>literally</em> \"passing the return value of one function as an argument to the next function\". You simply <em>cannot do</em> function composition with nullary functions.</p>\n"}], "owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568010427, "creation_date": 1568006390, "question_id": 57848235, "link": "https://stackoverflow.com/questions/57848235/composition-of-functions-without-arguments-wrong-number-of-arguments-given-1", "title": "Composition of functions without arguments: wrong number of arguments (given 1, expected 0)", "body": "<p>Ie:</p>\n\n<pre><code>[1] pry(main)&gt; @foo = rand\n=&gt; 0.46682153267547954\n[6] pry(main)&gt; multiply = -&gt; () {@foo*2}\n=&gt; #&lt;Proc:0x000000000121ac18@(pry):6 (lambda)&gt;\n[7] pry(main)&gt; (multiply&gt;&gt;multiply).call\nArgumentError: wrong number of arguments (given 1, expected 0)\nfrom (pry):6:in `block in __pry__'\n</code></pre>\n\n<p>Is there an elegant way around this? :-)</p>\n\n<p>Before I get attacked by functional purists, this is not code golf even though I must admit I'm enjoying myself :P - I'm trying to see if there's a nice way to use function composition to ie disable event tracing in integration tests when using a callback-based infrastructure whose job it is to go around a web page, it's ONLY job is manipulating global state in that sense and do things like</p>\n\n<pre><code>    do_client_roundtrip around_client_return: method(:dont_trace_events) &gt;&gt; -&gt; () {\n      click_on \"Continue\"\n      assert_invalid_session_page\n    }\n</code></pre>\n\n<p>Ruby's \"Everything returns something\" bites here since none of the methods take any arguments and arity checks get upset by this. Adding arguments that do nothing just to satisfy my desire to play with <code>&gt;&gt;</code> / <code>&lt;&lt;</code> is silly, so I'm wondering if there's something I should be doing different?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 0, "creation_date": 1568059556, "post_id": 57846992, "comment_id": 102147323, "body": "Can you please post the full <code>config&#47;routes.rb</code> and the full path of AddressingController ?"}, {"owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "reply_to_user": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 0, "creation_date": 1568063655, "post_id": 57846992, "comment_id": 102148744, "body": "thanks @DimitriusLachi, well it was an error because it must AddressingsController, but now is detecting my param but is not working well, i have this error No template found for Events::Checkouts::AddressingsController#create, rendering head :no_content"}], "owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568059422, "creation_date": 1567993448, "last_edit_date": 1568059422, "question_id": 57846992, "link": "https://stackoverflow.com/questions/57846992/send-params-in-data-by-ajax-in-checkout-in-rails", "title": "Send Params in data by Ajax in Checkout in Rails", "body": "<p>I'm adding a form with address to connect to my checkout form, I have a collection of radio buttons that give me the possibility to send one answer and store the data in my model and checkout, but when I'm pressing anyone, I saw the parameters in my checkout and are <code>nil</code> and debugging in web-console told me that my post petition is not working as you can see in the first image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/o30Ig.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o30Ig.png\" alt=\"JavaScript console\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/osrnj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/osrnj.png\" alt=\"events/:id/checkout/new view\"></a></p>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>ActionController::RoutingError (uninitialized constant Events::Checkouts::AddressingsController)</p>\n</blockquote>\n\n<p>I am currently doing the following:</p>\n\n<ul>\n<li>First I create all the relations, I have two models EventCheckout and Addressing with a polymorphic relation because I need addressing in Order too.</li>\n<li><p>Second  I did a controller with POO inside Checkouts controller with a create action whose responsibility is responds to JSON success or error, when I create an Addressing, after it create a route with a POST action inside the routes.</p></li>\n<li><p>Third create a form who receives inside a radio button an action from JavaScript</p></li>\n<li><p>Fourth create a JavaScript with a remote action in AJAX to pass the parameters and see the URL.</p></li>\n</ul>\n\n<pre><code>class Addressing &lt; ApplicationRecord\n  belongs_to :address\n  belongs_to :addressable, polymorphic: true\n\n\n  def self.for_addressable(addressable, address)\n    addressable.address = address\n    true\n  rescue StandardError =&gt; error\n    addressable.errors.add(:base, error.message)\n    false\n  end\nend\n\nclass EventCheckout &lt; Application Record\n  has_one :addressing, as: :addressable\n  has_one :address, through: :addressing\n\n  # ...\nend\n</code></pre>\n\n<pre><code>module Events\n  module Checkouts\n    class AddressingController &lt; Events::ApplicationController\n      before_action :set_checkout, except: :new\n\n      def create\n        respond_to do |format|\n          format.json do\n            if Addressing.for_addressable(@checkout, @address){\n              render json: {status: 'success', checkout: @checkout.to_json}\n              }\n            else\n              render json: {status: 'error',\n                            message: @checkout.errors.full_messages.to_sentence},\n                     status: :unprocessable_entity\n            end\n          end\n        end\n      end\n\n      private\n\n      def set_address\n        @address = Address.find(addressing_params[:address_id])\n      end\n\n      def addressing_params\n        params.require(:adressing).permit(:address_id)\n      end\n    end\n  end\nend\n</code></pre>\n\n<pre><code>resource :addressing, only: :create, module: :checkouts\n</code></pre>\n\n<pre><code>&lt;div class=\"radio_buttons\"&gt;\n&lt;%= bootstrap_form_with(model: address, url: event_checkout_path(event),  data: { url: event_checkout_addressing_path(event) }, method: :patch, local: true, html: {novalidate: true, class: 'needs-validation js-address-method-select'}) do |f| %&gt;\n  &lt;% address.map do |address| %&gt;\n    &lt;div class=\"rounded border p-2 hover:cursor-pointer flex items-center mb-2 text-blue-darker\"&gt;\n      &lt;%= f.radio_button_without_bootstrap :address, address.id, class:'mr-4 form-radio js-address-method-option' %&gt;\n      &lt;%= address_checkout_icon(address.address_type) %&gt;\n      &lt;%= f.label address.address, class:'text-base font-medium mr-4 cursor-pointer' %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>JavaScript with action</p>\n\n<pre><code>import $ from 'jquery'\n\nexport default class AddressMethodSelect {\n  constructor() {\n    this.attachEvents()\n    $('.js-address-method-option').prop('disabled', false)\n  }\n\n  attachEvents() {\n    $(document).on('change', '.js-address-method-option', event =&gt;\n      this.handleChange(event)\n    )\n  }\n\n  handleChange(event) {\n    event.preventDefault()\n    let url = $('.js-address-method-select').data('url')\n    let val = $(event.target).val()\n    console.log(url)\n    console.log(val)\n\n    $.ajax({\n      url: url,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        authenticity_token: $('[name=\"csrf-token\"]')[0].content,\n        addressing: {\n          address_id: val\n        }\n      },\n      success: data =&gt; {\n\n      },\n      error: data =&gt; {\n\n      }\n    })\n  }\n}\n\ndocument.addEventListener('turbolinks:load', () =&gt; {\n  new AddressMethodSelect()\n})\n</code></pre>\n\n<ul>\n<li>When I press an option of radiobutton im getting the data about the ID of address that im passing in the controller, and the URl when I debug in console of the browser. but my petition has an error SENDING post params in ajax</li>\n<li>Second I dont know how to do a validation that, when I press the radio button generate the JSON response :success and can generate and alert in HTML.</li>\n</ul>\n"}, {"tags": ["ruby", "validation", "ruby-on-rails-4", "testing", "rspec"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1567990564, "post_id": 57846203, "comment_id": 102120705, "body": "This question should be at <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> since it&#39;s just about refactoring a working code."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1568006454, "post_id": 57846203, "comment_id": 102123293, "body": "basically what you want to do is change the variable declarations to <code>let</code> blocks, and change the <code>.new</code> calls on the models to use Factory bot&#39;s <code>build</code> method instead"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1568007592, "post_id": 57846203, "comment_id": 102123564, "body": "Btw <code>factory_girl</code> is deprecated. You might want to update to <code>factory_bot</code>."}], "owner": {"reputation": 1, "user_id": 7574951, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208457119449380/picture?type=large", "display_name": "Vladan Petrovic", "link": "https://stackoverflow.com/users/7574951/vladan-petrovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567981685, "creation_date": 1567981685, "question_id": 57846203, "link": "https://stackoverflow.com/questions/57846203/how-to-refactor-on-easy-way-simple-rspec-test-to-use-subject-let-it-and-factoryg", "title": "How to refactor on easy way simple rspec test to use subject/let/it and FactoryGirl?", "body": "<p>Basically i am having very simple test where i check if account_id from Grant (so id of his parent) is equal to account_id of Role model.\nTest seems ok, but i need to refactor it to use subject/let and to use FactoryGirl and i can't do that even with all the info on this subject i found.\nSo, test is fine i just need help with refactoring.\nIt's first time for me working with rails and writing test on it, so i am forced to ask this type of question here.</p>\n\n<p>describe \"validations\" do</p>\n\n<pre><code>it \"should have equal account_id\" do\n  first_acc, second_acc = Account.new, Account.new\n  first_acc.id, second_acc.id = 10, 11\n  vlada_role, vlada_grant = Role.new, Grant.new\n  vlada_role1, vlada_grant1 = Role.new, Grant.new\n\n  vlada_role.account_id = first_acc.id\n  vlada_grant.account_id = second_acc.id\n  vlada_role.id, vlada_grant.id = 8000, 255\n\n  rg = RoleGrant.new\n  rg1 = RoleGrant.new\n\n  rg.role, rg1.role = vlada_role, vlada_role1\n  rg.grant, rg1.grant = vlada_grant, vlada_grant1\n\n  expect(rg.role.account_id).not_to eql(rg.grant.account_id)\n  expect(rg1.role.account_id).to eql(rg1.grant.account_id)\nend\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "erb"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "edited": false, "score": 0, "creation_date": 1567982316, "post_id": 57846207, "comment_id": 102119662, "body": "Hey, the Index.js is just a file where my other code for SweetAlert etc. goes. It&#39; in the Javascript/packs directory, so not related to my action. The name is kind of misleading, sorry. In the update.js.erb i Just want to call the swal.fire method, nur then it tells me swal is not defined. If I try to Import it like I did in the Index.js it doesn&#39;t work unfortunately."}, {"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "edited": false, "score": 0, "creation_date": 1567982578, "post_id": 57846207, "comment_id": 102119703, "body": "As I said: The problem is not that NO Code in update.js.erb is executed - alerts for example do work. Just third party libraries where I need imports don&#39;t"}], "tags": [], "owner": {"reputation": 409, "user_id": 1566971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac751c8553a13462093f0ff7d3edf1?s=128&d=identicon&r=PG", "display_name": "bananas123", "link": "https://stackoverflow.com/users/1566971/bananas123"}, "is_accepted": false, "score": 0, "last_activity_date": 1567981712, "creation_date": 1567981712, "answer_id": 57846207, "question_id": 57846025, "link": "https://stackoverflow.com/questions/57846025/adding-sweetalert2-to-update-js-erb/57846207#57846207", "title": "Adding SweetAlert2 to update.js.erb", "body": "<p>What page is your form on? Is it on the index page? If so, then your JavaScript code will need to be in <code>index.js</code> and not <code>update.js</code>. You can't have your JavaScript code check if the form has been submitted AFTER the form has already been submitted. </p>\n\n<p>Does this answer your question?</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 5826167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b219166671feaaddf2da1fde65d62a?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja ", "link": "https://stackoverflow.com/users/5826167/pooja"}, "is_accepted": false, "score": 0, "last_activity_date": 1568008862, "creation_date": 1568008862, "answer_id": 57848555, "question_id": 57846025, "link": "https://stackoverflow.com/questions/57846025/adding-sweetalert2-to-update-js-erb/57848555#57848555", "title": "Adding SweetAlert2 to update.js.erb", "body": "<p>You may make one function and keep it in common file like application.js and call that function whenever you need. So, you don't require to import sweetalert2 everywhere.</p>\n\n<pre><code>function popupSweetAlert(title, text, type) {\n  swal.fire({\n    title: title,\n    text: text,\n    type: type\n  });\n}\n</code></pre>\n\n<p>I hope, this is helpful for you.</p>\n"}], "owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1568008862, "creation_date": 1567979527, "last_edit_date": 1567982445, "question_id": 57846025, "link": "https://stackoverflow.com/questions/57846025/adding-sweetalert2-to-update-js-erb", "title": "Adding SweetAlert2 to update.js.erb", "body": "<p>I'm stuck in developing my rails application - I'm relatively new to Rails and trying to get comfortable with javascript.\nSo, I just added SweetAlert2 via Webpacker and it's working fine. \nI have a form which I am submitting via Javascript, which is also working. </p>\n\n<p>Here is my controller action:</p>\n\n<pre><code>def update\n    @user = @card.user\n    day = Date.today\n    if @card.update(card_params)\n      respond_to do |format|\n        format.js {}\n    end\n  end\nend \n</code></pre>\n\n<p>So when this is executed and the form is submitted, I'm calling a JS-function from an index.js-file which I imported in application.js.</p>\n\n<p>Index.js:</p>\n\n<pre><code>import swal from 'sweetalert2'\nimport Rails from '@rails/ujs'\n\n$(function() {\n    $('#vollkostForm').submit(function(){\n            swal.fire({\n                title: \"Bestellung abgeschlossen!\",\n                text: \"Die Mahlzeit wurde erfolgreich bestellt\",\n                type: \"success\"\n            });\n        $('#vollkostModal').modal('hide');\n    });\n});\n</code></pre>\n\n<p>This is working correctly, the alert is showing up.\nBut what I would like to achieve (since this should only run if the form was successfully submitted), is that this function is in the corresponding update.js.erb file, which belongs to the <code>format.js {}</code> block.</p>\n\n<p>I tried everything but I can't figure out how to import this SweetAlert library to the update.js.erb.</p>\n\n<p>I'm always getting the error message \"swal is not defined\" - if I just use something like alert(\"Hello!\"), this is working fine.</p>\n\n<p>I just can't use or import third-party plugins to work aswell.</p>\n\n<p>Thanks for any advice! :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "data-migration", "schema-migration"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1567973935, "post_id": 57845377, "comment_id": 102118174, "body": "what does user.rb look like?"}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 1566971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac751c8553a13462093f0ff7d3edf1?s=128&d=identicon&r=PG", "display_name": "bananas123", "link": "https://stackoverflow.com/users/1566971/bananas123"}, "is_accepted": true, "score": 2, "last_activity_date": 1567980717, "creation_date": 1567980717, "answer_id": 57846121, "question_id": 57845377, "link": "https://stackoverflow.com/questions/57845377/when-i-run-a-schema-migration-before-a-data-migration-with-activerecord-data-d/57846121#57846121", "title": "When I run a schema migration before a data migration, with ActiveRecord, data does not properly update in DB", "body": "<p>You're assuming after the first migration runs (<code>change_column :users, :status, :string, default: User::Status::ACTIVE</code>) you can still fetch the old values from the <code>status</code> column which is not the case. When you change the type of that column to string all the integer values are invalid so I suspect your database just changes all the invalid values to be \"0\" instead. </p>\n\n<p>If I was told to make this change to an application that is heavily used in production, I would be roll out this change in a few separate pull requests/migrations. I'd create a whole new separate column, iterate through all the users, set the value of the new column depending on what the value in the old column is, and then delete the old column. This is a much safer way to make this change. </p>\n"}], "owner": {"reputation": 13, "user_id": 8990743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d9NiH.jpg?s=128&g=1", "display_name": "space_pir8", "link": "https://stackoverflow.com/users/8990743/space-pir8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 57846121, "answer_count": 1, "score": 1, "last_activity_date": 1567980717, "creation_date": 1567973175, "last_edit_date": 1567975897, "question_id": 57845377, "link": "https://stackoverflow.com/questions/57845377/when-i-run-a-schema-migration-before-a-data-migration-with-activerecord-data-d", "title": "When I run a schema migration before a data migration, with ActiveRecord, data does not properly update in DB", "body": "<p>As of now, I have a users table with columns \n<code>id, name, email, status</code></p>\n\n<p><code>status</code> field is an integer type with values 1 and 2 representing an Active and Inactive user, respectively.</p>\n\n<p>I would like to change the <code>status</code> field to a string type and migrate the data -- Convert 1 to \"Active\" and 2 to \"Inactive\"</p>\n\n<p>I generated 2 migration files with <code>rails g migration</code></p>\n\n<p><code>user.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n  module Status\n    ACTIVE = 'Active'.freeze\n    INACTIVE = 'Inactive'.freeze\n\n    ALL = [ACTIVE, INACTIVE].freeze\n  end\n\n  validates :status, presence: true\n  validates :status, inclusion: Status::ALL\nend\n</code></pre>\n\n<p><code>db/migrate/20190906115523_update_user_status_type.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def UpdateUserStatusType &lt; ActiveRecord::Migration[5.2]\n  def up\n    change_column :users, :status, :string, default: User::Status::ACTIVE, \n  end\n\n  def down\n    User.where(status: User::Status::ACTIVE).update_all(status: 1)\n    User.where(status: User::Status::INACTIVE).update_all(status: 2)\n    change_column :users, :status, :integer, default: 1\n  end\nend\n</code></pre>\n\n<p><code>db/migrate/20190906115828_update_user_statuses.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def UpdateUserStatuses &lt; ActiveRecord::Migration[5.2]\n  def data\n    User.where(status: 1).update_all(status: User::Status::ACTIVE)\n    User.where(status: 2).update_all(status: User::Status::INACTIVE)  \n  end\nend\n</code></pre>\n\n<p>After running <code>rails db:migrate</code></p>\n\n<p><code>Expected:</code> Each user's status should be converted to either \"Active\" or \"Inactive\" after migrations are finished.</p>\n\n<p><code>Actual Results:</code> Each user's status are converted to <code>\"0\"</code> of string type.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many-through"], "comments": [{"owner": {"reputation": 8529, "user_id": 359120, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c9050235309e5978628bd70ee98d7b2?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/359120/salil"}, "edited": false, "score": 1, "creation_date": 1567989968, "post_id": 57844671, "comment_id": 102120628, "body": "Can you check what me.id is? If it is nil, it will return all objects."}, {"owner": {"reputation": 595, "user_id": 3632472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e431a79c8cf18fc5c29ebb94a721dda?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/3632472/rakesh"}, "edited": false, "score": 0, "creation_date": 1568011779, "post_id": 57844671, "comment_id": 102124857, "body": "Can you provide attributes/column_name of Project and Participant table"}, {"owner": {"reputation": 77, "user_id": 890270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/953612644fef1906d400645c486ed3a6?s=128&d=identicon&r=PG", "display_name": "nurbs999", "link": "https://stackoverflow.com/users/890270/nurbs999"}, "edited": false, "score": 0, "creation_date": 1568018020, "post_id": 57844671, "comment_id": 102127482, "body": "me.id is 2 I added my schema.rb to the question"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1568021080, "post_id": 57844671, "comment_id": 102128980, "body": "It&#39;s weird, Can u check <code>me.projects</code>?"}, {"owner": {"reputation": 77, "user_id": 890270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/953612644fef1906d400645c486ed3a6?s=128&d=identicon&r=PG", "display_name": "nurbs999", "link": "https://stackoverflow.com/users/890270/nurbs999"}, "edited": false, "score": 0, "creation_date": 1568055898, "post_id": 57844671, "comment_id": 102145888, "body": "This throws an error: ActiveRecord::HasManyThroughSourceAssociationNotFoundError (Could not find the source association(s) &quot;project&quot; or :projects in model Assignment. Try &#39;has_many :projects, :through =&gt; :assignments, :source =&gt; &lt;name&gt;&#39;. Is it one of participent?)"}], "owner": {"reputation": 77, "user_id": 890270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/953612644fef1906d400645c486ed3a6?s=128&d=identicon&r=PG", "display_name": "nurbs999", "link": "https://stackoverflow.com/users/890270/nurbs999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581429416, "creation_date": 1567967239, "last_edit_date": 1581429416, "question_id": 57844671, "link": "https://stackoverflow.com/questions/57844671/rails-model-where-clause-for-has-many-through-relation", "title": "Rails model where clause for has_many_through relation", "body": "<p>I have the following model setup:</p>\n\n<pre><code>class Project &lt; ApplicationRecord\n    has_many :assignments\n    has_many :participents, through: :assignments\nend\n</code></pre>\n\n<pre><code>class Participent &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n  has_many :assignments\n  has_many :projects, through: :assignments\nend\n</code></pre>\n\n<pre><code>class Client &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n  has_many :assignments\n  has_many :projects, through: :assignments\nend\n</code></pre>\n\n<pre><code>class Assignment &lt; ApplicationRecord\n    # belongs_to :client\n    belongs_to :participent\nend\n</code></pre>\n\n<p>In my ParticipentsController I want to find projects that I did not participate to. But my code always returns all projects:</p>\n\n<pre><code>me = current_participent #current logged in user\nProject.joins(:participents).where.not(participents: {id: me.id})\n</code></pre>\n\n<p>Can anyone point me to my mistake?</p>\n\n<p>EDIT: me.id is not nil, it's a number object.\nI also can reproduce this in rails console. For more context I post my schema.rb:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_09_03_173831) do\n\n  create_table \"articles\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"text\"\n    t.datetime \"created_at\", precision: 6, null: false\n    t.datetime \"updated_at\", precision: 6, null: false\n  end\n\n  create_table \"assignments\", force: :cascade do |t|\n    t.integer \"client_id\"\n    t.integer \"participent_id\"\n    t.integer \"project_id\"\n    t.datetime \"created_at\", precision: 6, null: false\n    t.datetime \"updated_at\", precision: 6, null: false\n    t.index [\"client_id\"], name: \"index_assignments_on_client_id\"\n    t.index [\"participent_id\"], name: \"index_assignments_on_participent_id\"\n  end\n\n  create_table \"clients\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.datetime \"created_at\", precision: 6, null: false\n    t.datetime \"updated_at\", precision: 6, null: false\n    t.index [\"email\"], name: \"index_clients_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_clients_on_reset_password_token\", unique: true\n  end\n\n  create_table \"participents\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", precision: 6, null: false\n    t.datetime \"updated_at\", precision: 6, null: false\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.index [\"email\"], name: \"index_participents_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_participents_on_reset_password_token\", unique: true\n  end\n\n  create_table \"projects\", force: :cascade do |t|\n    t.string \"title\"\n    t.integer \"client_id\"\n    t.datetime \"published_at\"\n    t.datetime \"created_at\", precision: 6, null: false\n    t.datetime \"updated_at\", precision: 6, null: false\n    t.index [\"client_id\"], name: \"index_projects_on_client_id\"\n  end\n\n  add_foreign_key \"projects\", \"clients\"\nend\n</code></pre>\n\n<p><strong>SOLUTION</strong>: <a href=\"https://stackoverflow.com/a/58001556/890270\">https://stackoverflow.com/a/58001556/890270</a></p>\n"}, {"tags": ["javascript", "ruby", "recursion"], "comments": [{"owner": {"reputation": 5884, "user_id": 4283738, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb938f3ad5a68706c055de350612b01?s=128&d=identicon&r=PG", "display_name": "joyBlanks", "link": "https://stackoverflow.com/users/4283738/joyblanks"}, "edited": false, "score": 1, "creation_date": 1567967144, "post_id": 57844654, "comment_id": 102116469, "body": "Hope this is not an interview question. Please put here what you have tried so far, its better to put up a working snippet"}, {"owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "reply_to_user": {"reputation": 5884, "user_id": 4283738, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb938f3ad5a68706c055de350612b01?s=128&d=identicon&r=PG", "display_name": "joyBlanks", "link": "https://stackoverflow.com/users/4283738/joyblanks"}, "edited": false, "score": 0, "creation_date": 1567967400, "post_id": 57844654, "comment_id": 102116534, "body": "It&#39;s a homework question"}, {"owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "reply_to_user": {"reputation": 5884, "user_id": 4283738, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb938f3ad5a68706c055de350612b01?s=128&d=identicon&r=PG", "display_name": "joyBlanks", "link": "https://stackoverflow.com/users/4283738/joyblanks"}, "edited": false, "score": 0, "creation_date": 1567967659, "post_id": 57844654, "comment_id": 102116592, "body": "function numSteps(n, m) {     if (n === 0) return 1      let begin = 0     let end = 1     let result = 0     for (let i = 1; i &lt;= n; i++) {         while (m &lt; n) {         result = begin + end         begin = end         end = result         }     }      return result };"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1567967969, "post_id": 57844654, "comment_id": 102116658, "body": "Your code is <code>JavaScript</code> but you tagged he question with <code>Ruby</code>. What language should you use for your homework?"}, {"owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "edited": false, "score": 0, "creation_date": 1567967997, "post_id": 57844654, "comment_id": 102116666, "body": "I tagged both because either of the languages would suffice, they&#39;re just the ones i happen to know"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1567968470, "post_id": 57844654, "comment_id": 102116768, "body": "Am I correct in my understanding of the problem: &quot;Starting at step 0, how many ways can a person reach step n in no more than m steps, each step being 1 up or 1 down&quot;?"}, {"owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "edited": false, "score": 0, "creation_date": 1567968649, "post_id": 57844654, "comment_id": 102116811, "body": "From what I understand of the question, it&#39;s from a textbook, you start at 0, N is the total amount of steps from 0 to N, and M is a dynamic number that dictates the maximum amount of steps a person can take in one given step.  i.e if there are 50 steps, you start at 0 and if M is 3, you can take 3 steps at a time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1567969077, "post_id": 57844654, "comment_id": 102116924, "body": "So one can only go to a &quot;higher&quot; step? You need to edit your question to state the problem clearly at the beginning. Having done so you could simplify the title somewhat."}, {"owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "edited": false, "score": 0, "creation_date": 1567969152, "post_id": 57844654, "comment_id": 102116936, "body": "I mean, Cary Swoveland, I apologize that it wasn&#39;t implied that you can&#39;t go lower, it seemed a little obvious that since you are going from level 0 to N, it would be higher.         I&#39;ve also tried a method of tabulation:                    function steps(n, m) {     let table = new Array(n + 1).fill(false);     table[0] = true;     let total = 0     for (let i = 0; i &lt; table.length; i++) {         if (table[i] === true) {             for (let j = 1; j &lt;= m; j++) {                 table[j] = true                 total += 1             }         }     }     return total; }"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1567971035, "post_id": 57844654, "comment_id": 102117428, "body": "While it may be obvious that one could not go lower than step zero (imagining an actual staircase), that does not imply that one could never go down one step. My initial interpretation is that if <code>n = 3</code> and <code>m = 6</code>, one valid sequence would be <code>UUDUU</code>, which requires 5 steps (5 &lt;= 6), but not <code>UUDDUUU</code>, which requires 7 (7 &gt; 6) steps. If I interpreted that way, others may as well (and others may have different interpretations). Again, I advise you to clarify your question with an edit."}], "answers": [{"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 1, "last_activity_date": 1567971639, "last_edit_date": 1567971639, "creation_date": 1567969477, "answer_id": 57844954, "question_id": 57844654, "link": "https://stackoverflow.com/questions/57844654/when-given-n-num-of-steps-and-m-max-possible-steps-return-the-total-number-possi/57844954#57844954", "title": "When given N num of steps and M max possible steps return the total number possible sequences where the person can go (higher) from level 0 to level N", "body": "<p>Generators are probably the best way to solve permutation and combination problems in JavaScript. You will learn a lot by tracing the evaluation step-by-step on paper or in a text editor -</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const waysToClimb = function* (n, m, seq = [])\r\n{ if (n &gt; 0)\r\n    for (let i = 1; i &lt;= m; i++)\r\n      if (i &gt; n)\r\n        return\r\n      else\r\n        yield* waysToClimb (n - i, m, [ i, ...seq ])\r\n  else\r\n    yield seq\r\n}\r\n\r\nconst result =\r\n  Array.from (waysToClimb (10, 3))\r\n\r\nconsole.log (JSON.stringify (result))\r\n// [ [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ]\r\n//   , ...\r\n//   , [ 1, 3, 3, 3 ]\r\n// ]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1567970453, "last_edit_date": 1567970453, "creation_date": 1567969741, "answer_id": 57844978, "question_id": 57844654, "link": "https://stackoverflow.com/questions/57844654/when-given-n-num-of-steps-and-m-max-possible-steps-return-the-total-number-possi/57844978#57844978", "title": "When given N num of steps and M max possible steps return the total number possible sequences where the person can go (higher) from level 0 to level N", "body": "<p>Here is a recursive solution in Ruby.</p>\n\n<pre><code>def steps(max_steps, steps_remaining)\n   (1..max_steps).sum do |n|\n     case n &lt;=&gt; steps_remaining\n     when -1\n       steps(max_steps, steps_remaining-n)      \n     when 0\n       1\n     else\n       0\n     end\n   end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>steps(2, 4)\n  #=&gt; 5    \nsteps(3, 10)\n  #=&gt; 274\nsteps(5, 15)\n  #=&gt; 13624\n\nrequire 'time'\nt = Time.now\nputs steps(8, 25)\n16_190_208\n(Time.now-t).round\n  #=&gt; 22 seconds \n</code></pre>\n\n<p>In the first example the 5 possible sequences are as follows:</p>\n\n<pre><code>[[1,1,1,1], [1,1,2], [1,2,1], [2,1,1], [2,2]]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a9079ea9bcf1447f1d6905d8224b51?s=128&d=identicon&r=PG&f=1", "display_name": "programmerInTraining04", "link": "https://stackoverflow.com/users/5847365/programmerintraining04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567971639, "creation_date": 1567967062, "last_edit_date": 1567969348, "question_id": 57844654, "link": "https://stackoverflow.com/questions/57844654/when-given-n-num-of-steps-and-m-max-possible-steps-return-the-total-number-possi", "title": "When given N num of steps and M max possible steps return the total number possible sequences where the person can go (higher) from level 0 to level N", "body": "<p>I feel like this is very similar to the staircase problem where you can use the fibonacci recursive call, but what's throwing me off is the second argument of M steps, I'm not sure how to apply it.  Help?</p>\n\n<p>I can solve this very similarly to the staircase problem which is just a fibonacci application then transitioning using that fib helper function.</p>\n\n<p>I can't seem to get it at all to work</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function numSteps(n, m) {\r\n    if (n === 0) return 1\r\n\r\n    let begin = 0\r\n    let end = 1\r\n    let result = 0\r\n    for (let i = 1; i &lt;= n; i++) {\r\n        while (m &lt; n) {\r\n          result = begin + end\r\n          begin = end\r\n          end = result\r\n        }\r\n    }\r\n\r\n    return result\r\n};\r\n\r\nconsole.log(numSteps(2, 6))\r\n\r\nfunction steps(n, m) {\r\n    let table = new Array(n + 1).fill(false);\r\n    table[0] = true;\r\n    let total = 0\r\n    for (let i = 0; i &lt; table.length; i++) {\r\n        if (table[i] === true) {\r\n            for (let j = 1; j &lt;= m; j++) {\r\n                table[j] = true\r\n                total += 1\r\n            }\r\n        }\r\n    }\r\n    return total;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7558228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad52c045a6c0425c1de5b72ae056a6b6?s=128&d=identicon&r=PG&f=1", "display_name": "Hemaraj", "link": "https://stackoverflow.com/users/7558228/hemaraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1567969705, "creation_date": 1567969705, "answer_id": 57844971, "question_id": 57844163, "link": "https://stackoverflow.com/questions/57844163/no-route-matches-get-password-resets/57844971#57844971", "title": "No route matches [GET] &quot;/password_resets&quot;", "body": "<p>The problem is with my wrong path specified new_password_reset is the correct one in the case of password_resets_path</p>\n"}], "owner": {"reputation": 19, "user_id": 7558228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad52c045a6c0425c1de5b72ae056a6b6?s=128&d=identicon&r=PG&f=1", "display_name": "Hemaraj", "link": "https://stackoverflow.com/users/7558228/hemaraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1567969705, "creation_date": 1567963294, "last_edit_date": 1567965941, "question_id": 57844163, "link": "https://stackoverflow.com/questions/57844163/no-route-matches-get-password-resets", "title": "No route matches [GET] &quot;/password_resets&quot;", "body": "<p>I am new to rails. I am creating twitter like clone app. I am adding forgot password functionality to my app. After following the steps from the internet. I am getting routing error. I tried all the possible ways to solve it. But it still shows the same. I tried rake route command and I think there is no problem with the routes.</p>\n\n<pre><code>Rake routes:\n\n    password_resets POST   /password_resets(.:format)          password_resets#create\n    edit_password_reset GET    /password_resets/:id/edit(.:format) password_resets#edit\n     password_reset PUT    /password_resets/:id(.:format)      password_resets#update\n     cancel_request PUT    /requests/:id/cancel(.:format)      \n\n     edit.html.erb\n\n&lt;h1&gt;Reset Password&lt;/h1&gt;\n\n//here I tried changing to password_resets_path still the same error occurs.\n\n&lt;%= form_for @user, url: password_reset_path(params[:id]) do |f| %&gt;\n  &lt;% if @user.errors.any? %&gt;\n    &lt;div class='error_messages'&gt;\n      &lt;h2&gt;Form is invalid&lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;% for message in @user.errors.full_messages %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class='field'&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;%= f.password_field :password %&gt;\n  &lt;/div&gt;\n  &lt;div class='field'&gt;\n    &lt;%= f.label :password_confirmation %&gt;\n    &lt;%= f.password_field :password_confirmation %&gt;\n  &lt;/div&gt;\n  &lt;div class='actions'&gt;&lt;%= f.submit 'Update password' %&gt;&lt;/div&gt;\n&lt;% end %&gt;\n\npassword_reset controller:\n\ndef create\n  user = User.find_by_email(params[:email])\n  user.send_password_reset if user\n  flash[:notice] = 'E-mail sent with password reset instructions.'\n  redirect_to new_session_path\nend\n\n\ndef edit\n  @user = User.find_by_password_reset_token!(params[:id])\nend\n\n\ndef update\n  @user = User.find_by_password_reset_token!(params[:id])\n  if @user.password_reset_sent_at &lt; 2.hour.ago\n    flash[:notice] = 'Password reset has expired'\n    redirect_to new_password_reset_path\n  elsif @user.update(user_params)\n    flash[:notice] = 'Password has been reset!'\n    redirect_to new_session_path\n  else\n    render 'edit'\n  end\nend\n\nprivate\n\n  def user_params\n    params.require(:user).permit(:password)\n  end\n</code></pre>\n\n<p>//invokes password_reset controller\n   <p>&lt;%= link_to \"Forgot_password?\", password_resets_path %></p>  </p>\n\n<p>I found similar questions on stackoverflow but none answers my question. Tried all the existing answers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1568047028, "last_edit_date": 1568047028, "creation_date": 1568032992, "answer_id": 57854307, "question_id": 57843818, "link": "https://stackoverflow.com/questions/57843818/render-a-collection-of-forms-using-partial/57854307#57854307", "title": "Render a collection of forms using partial", "body": "<p>In your case you can't use the <code>render partial: 'path', collection: @list</code> method.</p>\n\n<p>If you unfold your first example:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;%= render partial: 'erb_partials/post', collection: @users, as: :user %&gt;\n</code></pre>\n\n<p>You get:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;% @users.each do |user| %&gt;\n  &lt;%= render 'erb_partials/post', user: user %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The above is such a common action that the <a href=\"https://api.rubyonrails.org/classes/ActionView/PartialRenderer.html\" rel=\"nofollow noreferrer\"><code>render</code></a> method included the <code>:partial</code> option to wrap the <code>render</code> call in an each loop. <code>render</code> doesn't include any other iteration wrapper options at this moment.</p>\n"}], "owner": {"reputation": 6478, "user_id": 946478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/734044a1d5aa692f00c28b6999bd0240?s=128&d=identicon&r=PG", "display_name": "sparkle", "link": "https://stackoverflow.com/users/946478/sparkle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1568047028, "creation_date": 1567960847, "question_id": 57843818, "link": "https://stackoverflow.com/questions/57843818/render-a-collection-of-forms-using-partial", "title": "Render a collection of forms using partial", "body": "<p>Rails has this pretty way to render a collection using partial</p>\n\n<pre><code>&lt;%= render partial: 'erb_partials/post', collection: @users, as: :user %&gt;\n</code></pre>\n\n<p>How can I apply this in my loop of forms?</p>\n\n<pre><code>&lt;%= profile_form.fields_for :item_groups, @item_groups do |item_form| %&gt;\n   &lt;%=render partial: 'item_groups/item_group', locals: {item_form: item_form}%&gt;\n&lt;% end %&gt;\n\n&lt;%=profile_form.submit%&gt;\n</code></pre>\n"}, {"tags": ["ruby", "concurrency", "concurrent-ruby"], "answers": [{"tags": [], "owner": {"reputation": 2291, "user_id": 1752333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1009edfa56c5a71d0e6de2738342bee7?s=128&d=identicon&r=PG", "display_name": "scorix", "link": "https://stackoverflow.com/users/1752333/scorix"}, "is_accepted": true, "score": 0, "last_activity_date": 1571212141, "creation_date": 1571212141, "answer_id": 58408306, "question_id": 57842823, "link": "https://stackoverflow.com/questions/57842823/how-can-i-call-a-block-within-the-execute-method-of-a-scheduledtask/58408306#58408306", "title": "How can I call a block within the execute method of a ScheduledTask?", "body": "<p>Both <code>Concurrent::ScheduledTask#new</code> and <code>Concurrent::ScheduledTask#execute</code> returns a [ScheduledTask] object, then the main thread exits. </p>\n\n<p>That's why <code>\"hai from event x\"</code> is never shown.</p>\n\n<pre><code>require 'concurrent'\n##\n# A basic Event\nclass Event\n  attr_accessor :ticks\n  # @param ticks [Numeric] The amount of ticks we wait before executing this event\n  def initialize(ticks = 1.0)\n    @ticks = ticks\n    puts \"Event created with #{@ticks} ticks\"\n  end\n\n  # Calls the block of this event for execution.\n  def execute(&amp;block)\n    if !block_given?\n      raise AbstractEventExecution.new(self)\n    else\n      task = Concurrent::ScheduledTask.execute(@ticks *= 0.75) { block.call }\n      puts \"Executed in #{@ticks} ticks\"\n      task\n    end\n  end\nend\n\nclass AbstractEventExecution &lt; StandardError\n  attr_accessor :event\n\n  def initialize(event)\n    @event = event\n    super(\"The Event #{event} was not provided an execution block and is abstract.\")\n  end\nend\n\nevent1 = Event.new(1)\nevent2 = Event.new(2)\nevent3 = Event.new(3)\nt1 = event1.execute { puts \"hai from event 1\" }\nt2 = event2.execute { puts \"hai from event 2\" }\nt3 = event3.execute { puts \"hai from event 3\" }\n\n# waiting for all threads to finish\n[t1, t2, t3].map(&amp;:wait)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12037827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b709f91adb129c347c48c29cadbdbe?s=128&d=identicon&r=PG&f=1", "display_name": "NicholeDavenport", "link": "https://stackoverflow.com/users/12037827/nicholedavenport"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 58408306, "answer_count": 1, "score": 0, "last_activity_date": 1571212141, "creation_date": 1567952915, "question_id": 57842823, "link": "https://stackoverflow.com/questions/57842823/how-can-i-call-a-block-within-the-execute-method-of-a-scheduledtask", "title": "How can I call a block within the execute method of a ScheduledTask?", "body": "<p>I'm trying to call a block within the <code>Concurrent::ScheduledTask#execute</code> method, but the block itself never is executed.</p>\n\n<p>I also tried using <code>Concurrent::ScheduledTask#new</code> method, but the results are the same. I feel there may be a fundamental issue here that I'm missing. Any help would be much appreciated!</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'concurrent'\n##\n# A basic Event\nclass Event\n  attr_accessor :ticks\n  # @param ticks [Numeric] The amount of ticks we wait before executing this event\n  def initialize(ticks = 1.0)\n    @ticks = ticks\n    puts \"Event created with #{@ticks} ticks\"\n  end\n  # Calls the block of this event for execution.\n  def execute(&amp;block)\n    if !block_given?\n      raise AbstractEventExecution.new(self)\n    else\n      Concurrent::ScheduledTask.execute(@ticks *= 0.75) { block.call }\n      puts \"Executed in #{@ticks} ticks\"\n    end\n  end\nend\n\nclass AbstractEventExecution &lt; StandardError\n  attr_accessor :event\n  def initialize(event)\n    @event = event\n    super(\"The Event #{event} was not provided an execution block and is abstract.\")\n  end\nend\n\nevent1 = Event.new(105)\nevent2 = Event.new(1000)\nevent3 = Event.new(50)\nevent1.execute { puts \"hai from event 1\" }\nevent2.execute { puts \"hai from event 2\" }\nevent3.execute { puts \"hai from event 3\" }\n</code></pre>\n\n<p>the output is as follows:</p>\n\n<pre><code>Event created with 105 ticks\nEvent created with 1000 ticks\nEvent created with 50 ticks\nexecuting an event...\nExecuted in 78.75 ticks\nexecuting an event...\nExecuted in 750.0 ticks\nexecuting an event...\nExecuted in 37.5 ticks\n</code></pre>\n\n<p>I'm not sure why <code>puts \"hai from event x\"</code> is never shown at all. Additionally, there is no delay when this executes. There should be a 78.75, 750.0, and 37.5 second delay respectively and there's none at all!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vue.js", "webpacker", "ruby-on-rails-6"], "answers": [{"tags": [], "owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "is_accepted": false, "score": 0, "last_activity_date": 1573569977, "creation_date": 1573569977, "answer_id": 58821013, "question_id": 57842312, "link": "https://stackoverflow.com/questions/57842312/rails-6-webpacker-vuejs-vue-warn-error-in-v-on-handler-referenceerror-r/58821013#58821013", "title": "Rails 6+ webpacker+ VueJs: [Vue warn]: Error in v-on handler: &quot;ReferenceError: Rails is not defined&quot;", "body": "<p>You'll need to <code>import</code> any module you want to access from within your Vue components. So, for <code>Rails</code> inside the <code>Plan.vue</code>:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script&gt;\nimport Rails from 'rails/ujs';\n\n//...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 7068514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nutz8DCvmuQ/AAAAAAAAAAI/AAAAAAAAEOM/9yQVWpKR5YU/photo.jpg?sz=128", "display_name": "Andrew Losseff", "link": "https://stackoverflow.com/users/7068514/andrew-losseff"}, "is_accepted": false, "score": 0, "last_activity_date": 1598557078, "creation_date": 1598557078, "answer_id": 63623090, "question_id": 57842312, "link": "https://stackoverflow.com/questions/57842312/rails-6-webpacker-vuejs-vue-warn-error-in-v-on-handler-referenceerror-r/63623090#63623090", "title": "Rails 6+ webpacker+ VueJs: [Vue warn]: Error in v-on handler: &quot;ReferenceError: Rails is not defined&quot;", "body": "<p>In your <code>Plans.vue</code> inside <code>&lt;script&gt;</code> add next line <code>import Rails from &quot;@rails/ujs&quot;;</code></p>\n<p>It didn't work  for me without <code>@</code> before &quot;rails/ujs&quot;</p>\n"}], "owner": {"reputation": 635, "user_id": 8439462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/boggA.jpg?s=128&g=1", "display_name": "Talha Junaid", "link": "https://stackoverflow.com/users/8439462/talha-junaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1598557078, "creation_date": 1567948804, "question_id": 57842312, "link": "https://stackoverflow.com/questions/57842312/rails-6-webpacker-vuejs-vue-warn-error-in-v-on-handler-referenceerror-r", "title": "Rails 6+ webpacker+ VueJs: [Vue warn]: Error in v-on handler: &quot;ReferenceError: Rails is not defined&quot;", "body": "<p>I have created a brand new application with rails 6, webpacker and VueJs. \nVue, vue-sweetalert and vue-loader are working fine. This error Occurs When I try to send ajax request from <code>Vue Component</code> to rails controller using <code>Rails.ajax</code>. </p>\n\n<p>Here is my <strong>application.js</strong> where I am initializing rails_ujs and other global things</p>\n\n<pre><code>require(\"@rails/ujs\").start()\nrequire(\"@rails/activestorage\").start()\nrequire(\"channels\")\n\nimport Vue from 'vue/dist/vue.esm'\nimport VueSweetalert2 from 'vue-sweetalert2';\n\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport 'sweetalert2/dist/sweetalert2.min.css';\n\nimport Plans from '../plans.vue'\n\nVue.use(VueSweetalert2);\n\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n  const app = new Vue({\n    el: '#vue-container',\n    components: { Plans }\n  })\n})\n</code></pre>\n\n<p><strong>Plans.vue( Vue Component)</strong></p>\n\n<pre><code>&lt;template&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"plan_section\"&gt;\n        &lt;div class=\"plan_heading_section\"&gt;\n          &lt;h1&gt;Plan / Pricing &lt;/h1&gt;\n          &lt;p&gt;Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"bs-five-area bs-radius\"&gt;\n          &lt;Loading :active.sync=\"isLoading\"\n          :is-full-page=\"false\"\n          :height=\"40\"\n          :width=\"40\"\n          :color=\"color\"&gt;\n          &lt;/Loading&gt;\n          &lt;div v-for='plan in plans' v-bind:key=\"plan.id\" class=\"col-md-4 no-padding\" v-bind:class=\"activePlanClass(plan, shop)\"&gt;\n            &lt;div class=\"bs-five\"&gt;\n              &lt;h3 class=\"text-uppercase\"&gt;Plan&lt;/h3&gt;\n              &lt;h1 class=\"bs-caption\"&gt;&lt;sup&gt;$&lt;/sup&gt;{{ plan.price }}&lt;/h1&gt;\n              &lt;ul&gt;\n                &lt;li&gt;&lt;b&gt;{{ planDescription(plan) }}&lt;/b&gt;&lt;/li&gt;\n              &lt;/ul&gt;\n              &lt;button class=\"btn btn-success subscribe-plan btn-round m-top-40\" @click=\"subscribePlan\" :disabled=\"isDisabled(plan, shop)\"&gt;{{ planButtonText(plan, shop) }}&lt;/button&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n\nimport Loading from 'vue-loading-overlay';\n\nexport default {\n  name: 'Plans',\n  props: ['plans', 'shop', 'url'],\n  components: { Loading }, \n  data: function () {\n    return {\n      isLoading: false,\n      color: '#3BB9FF',\n    }\n  },\n  methods: {\n    activePlanClass: function(plan, shop){\n      return plan.id == shop.plan_id ? 'active-plan' : ''\n    },\n    planDescription: function(plan){\n      name = ''\n      switch(plan.plan_type) {\n        case 0:\n          name = \"One Fan Page\"\n          break;\n        case 1:\n          name = \"Two Fan Pages\"\n        case 2:\n          name = \"Four Fan Pages\"\n        case 3:\n          name = \"Eight Fan Pages\"\n        case 4:\n          name = \"Unlimited\"\n          break;\n      }\n      return name;\n    },\n    planButtonText: function(plan, shop){\n      return plan.id == shop.plan_id ? 'Subscribed Plan' : 'Subscribe'\n    },\n    isDisabled: function(plan, shop){\n      if (plan.id == shop.plan_id || plan.id &lt; parseInt(shop.plan_id)) { return true; }\n      return false;\n    },\n    subscribePlan: function(event){\n      this.isLoading = true;\n      debugger;\n      Rails.ajax({\n        url: this.url,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n          if (data.success) {\n            if (data.message) { toastr.success(data.message) }\n            window.location.href = data.url\n          }\n          else {\n            removeIcon(clicked_ele)\n            toastr.error(data.message)\n          }\n        },\n        error: function(){\n          removeIcon(clicked_ele)\n          toastr.error('Server Error, Please contact with support team.');\n        }\n      })\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>Error Ouccrs in <code>subscribePlan</code> function where I am trying to call <code>Rails.ajax</code>. I am rendering this component in <code>plans/index.html.erb</code> and passing props from there</p>\n\n<p><strong>plans/index.html.erb</strong></p>\n\n<pre><code>&lt;Plans :plans=\"&lt;%= @plans.to_json %&gt;\" :shop=\"&lt;%= @current_shop.to_json %&gt;\"&gt;&lt;/Plans&gt;`enter code here`\n</code></pre>\n\n<p>I am unable to find out what I am missing here. I have googled it but couldn't find any support/help for rails 6 with Vue.</p>\n"}, {"tags": ["ruby", "jekyll", "liquid", "jekyll-theme"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1567949893, "post_id": 57841980, "comment_id": 102112292, "body": "Do you care about the keys? (<code>&quot;attorney1&quot;</code> in this example) Since the <i>for</i>-loop might loop through the key/value pairs. Could you try <code>for member in site.data.members.values</code> instead and see if that works?"}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567951031, "post_id": 57841980, "comment_id": 102112542, "body": "@3limin4t0r there are other keys in this data file. Just stuck! It works calling a specific key. Just not in a for loop."}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567951374, "post_id": 57841980, "comment_id": 102112642, "body": "@3limin4t0r if I switch data file format to <code>- author: attorney1</code> with values 2 spaces below, the loop works and the author page stops working for <code>{% assign member = site.data.members[page.author] %}</code>"}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567951965, "post_id": 57841980, "comment_id": 102112816, "body": "@3limin4t0r <code>{% assign author = site.data.members | where: &quot;author&quot;, &quot;{{page.author}}&quot; %}</code> doesn&#39;t work, either, on the author page."}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1568113606, "post_id": 57841980, "comment_id": 102163728, "body": "Vote for my question?"}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 0, "creation_date": 1567966421, "post_id": 57843875, "comment_id": 102116333, "body": "I read <a href=\"https://jekyllrb.com/docs/datafiles/\" rel=\"nofollow noreferrer\">jekyllrb.com/docs/datafiles</a> I have the single YML file your example  and exampled in the docs. The loop works. But, <code>{% assign member = site.data.members[page.author]</code> will not work even with the frontmatter defining which lawyer to output."}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 1, "creation_date": 1567969041, "post_id": 57843875, "comment_id": 102116916, "body": "Again, use the inspect filter to &quot;check&quot; the data object. <code>{{ site.data.members | inspect }}</code> and <code>{{ page.author | inspect }}</code> should give you the necessary insights."}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 0, "creation_date": 1567971072, "post_id": 57843875, "comment_id": 102117438, "body": "<code>--- layout: attorney author: attorney2 --- {% assign member = site.data.members[page.author] %}  &lt;!-- Main --&gt; &lt;article id=&quot;main&quot;&gt;   &lt;header class=&quot;special container&quot;&gt;     &lt;span class=&quot;icon fas fa-user-circle&quot;&gt;&lt;&#47;span&gt;     &lt;h2&gt;About {{ member.name }}&lt;&#47;h2&gt;     {{ member.web | markdownify }} {{ page.author | inspect }}{{ site.data.members | inspect }}  </code> shows attorney2 as author and the jsonify [{~~}] values of datafile."}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 0, "creation_date": 1567971693, "post_id": 57843875, "comment_id": 102117613, "body": "<code>{{ site.data.members[page.author] | inspect | jsonify }} {{ page.author | inspect }}</code> produces <code>&quot;nil&quot; &quot;attorney2&quot;</code> on /lawyers/attorney2.html"}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 1, "creation_date": 1568031743, "post_id": 57843875, "comment_id": 102134093, "body": "I&#39;ve edited the answer with the solution to extract a member based on given key. Basically, you&#39;re trying to do two different things with one data: <i>iterate and render each member</i> and <i>select a particular member and render that</i>. So there are two different types of solutions"}, {"owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "edited": false, "score": 0, "creation_date": 1568151160, "post_id": 57843875, "comment_id": 102181608, "body": "Please +1 my question?"}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": true, "score": 2, "last_activity_date": 1568031560, "last_edit_date": 1568031560, "creation_date": 1567961268, "answer_id": 57843875, "question_id": 57841980, "link": "https://stackoverflow.com/questions/57841980/how-can-i-loop-from-a-data-file-to-display-content/57843875#57843875", "title": "How can I loop from a data file to display content?", "body": "<p>To successfully <em>iterate</em> through a given list, all you need is a properly structured data.</p>\n\n<p>For <code>{% for member in site.data.members %}</code> to loop properly, <code>site.data.members</code> has to be an <em>array of members</em>. But from the info you have posted, it looks like the resulting data is a <code>Hash</code> (or <em>dictionary</em>) of key-value pairs instead of an <code>Array</code>.</p>\n\n<p><br/></p>\n\n<h2>Investigation</h2>\n\n<p>To confirm, you may simply \"inspect\" the data first. Insert the following snippet into your template to get a JSON representation of your data:</p>\n\n<pre><code>&lt;pre&gt;\n{{ site.data.members | inspect }}\n&lt;/pre&gt;\n</code></pre>\n\n<p>To iterate successfully, <strong>the resulting JSON</strong> should begin and end with square brackets (<code>[</code>, <code>]</code>):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>[\n  {\n    \"attorney1\": {\n      \"birth_country\": \"United States of America\",\n      \"birth_city\": \"Paso Robles\"\n    }\n  },\n  {\n    \"attorney2\": {\n      \"birth_country\": \"United States of America\",\n      \"birth_city\": \"Paso Robles\"\n    }\n  },\n]\n</code></pre>\n\n<p>But instead, your <code>members.yml</code> would yield something similar to:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n  \"attorney1\": {\n    \"birth_country\": \"United States of America\",\n    \"birth_city\": \"Paso Robles\"\n  },\n  \"attorney2\": {\n    \"birth_country\": \"United States of America\",\n    \"birth_city\": \"Paso Robles\"\n  }\n}\n</code></pre>\n\n<p><br/></p>\n\n<h2>Solutions</h2>\n\n<h3>Single file</h3>\n\n<p>If you'd like to have all the attorney info in one YAML file, then the structure would be:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code># _data/members.yml\n\n- attorney1:\n    birth_country: \"United States of America\"\n    birth_city: \"Paso Robles\"\n- attorney2:\n    birth_country: \"United States of America\"\n    birth_city: \"Paso Robles\"\n</code></pre>\n\n<h3>Individual files</h3>\n\n<p>Or if you'd like organize individual info separately:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code># _data/members/attorney1.yml\n\nbirth_country: \"United States of America\"\nbirth_city: \"Paso Robles\"\n</code></pre>\n\n<pre class=\"lang-yaml prettyprint-override\"><code># _data/members/attorney2.yml\n\nbirth_country: \"United States of America\"\nbirth_city: \"Paso Robles\"\n</code></pre>\n\n<hr>\n\n<h2>Selection</h2>\n\n<p>To select a particular dataset based on a given key, you can pass the data and key to the <code>where</code> filter and the <code>first</code> or <code>last</code> filters:</p>\n\n<pre><code>{% assign member = site.data.members | where: 'author', page.author | first %}\n</code></pre>\n\n<p>With the above, first another array of members is generated where <code>member.author</code> equals <code>page.author</code> and then the very first entry is extracted via the <code>first</code> filter.</p>\n"}], "owner": {"reputation": 114, "user_id": 2445290, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/522c2.jpg?s=128&g=1", "display_name": "Denver Prophit Jr.", "link": "https://stackoverflow.com/users/2445290/denver-prophit-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 2, "accepted_answer_id": 57843875, "answer_count": 1, "score": 1, "last_activity_date": 1568031560, "creation_date": 1567945755, "last_edit_date": 1567953057, "question_id": 57841980, "link": "https://stackoverflow.com/questions/57841980/how-can-i-loop-from-a-data-file-to-display-content", "title": "How can I loop from a data file to display content?", "body": "<p>Data <strong>can</strong> display if I specify <code>{% assign member = site.data.members[page.author] %}</code> and insert <code>author: valuehere</code> in a page's frontmatter. It will not loop if I specify <code>{% for member in site.data.members %} ~~~ {{ member.name }} ~~~ {% endfor %}</code></p>\n\n<p>== members.yml</p>\n\n<pre><code>attorney1:\n  birth_country: \"United States of America\"\n  birth_city: \"Paso Robles\"\n  birth_region: CA\n  birth_zip: 93446\n  birth_date: \"05/1968\"\n  education: \"Southeastern University: B.A. History \u2013 2008, University of Florida Levin College of Law: Juris Doctor \u2013 2001\"\n  image: attorney1.jpg\n  nationality: \"United States of America\"\n  name: \"Attorney One Esq\"\n  first_name: \"Attorney\"\n  last_name: \"One\"\n  honorary: Esquire\n  email: email@example.com\n  home_country: \"United States of America\"\n  home_city: \"Ocala\"\n  home_region: \"FL\"\n  home_zip: \"34482\"\n  gender: Male\n  permalink: \"/lawyers/attorney1.html\"\n  ext: \"02\"\n  practices: \"Personal Injury &amp;middot; Insurance Litigation\"\n  web: \"Lawyer One Esq is a past member of the Hillsborough County Bar Association and Young Lawyers Division, the Lakeland Bar Association, and Emerge. Jon was also served on the Board of Directors for Tri-County Human services, which serves Polk, Hardee, and Highlands counties. Lawyer One Esq is currently a member of the Jacksonville Bar Association.\"\n</code></pre>\n\n<p>I've tried reformatting data file like this:</p>\n\n<pre><code>- author: attorney1\n  name: \"Attorney One\"\n~~~\n</code></pre>\n\n<p>Then recode author page like this:</p>\n\n<pre><code>---\nlayout: attorney\ntitle: \"Attorney One\"\ncrumbtitle: \"Attorney One\"\npermalink: \"/lawyers/attorney1.html\"\njsontype: lawyer\ngenre: Law\nheadline: \"Affordable Marion County Legal Representation\"\nauthor: attorney1\n---\n{% assign author = site.data.members | where: \"author\", \"{{page.author}}\" %}\n&lt;!-- Main --&gt;\n&lt;article id=\"main\"&gt;\n  &lt;header class=\"special container\"&gt;\n    &lt;span class=\"icon fas fa-user-circle\"&gt;&lt;/span&gt;\n    &lt;h2&gt;About {{ author.name }}&lt;/h2&gt;\n    {{ author.web | markdownify }}\n  &lt;/header&gt;\n  &lt;!-- One --&gt;\n</code></pre>\n\n<p>The goal is to be able to use a for loop and to pull data for an author page. If I format data file like:</p>\n\n<pre><code>attorney1:\n    name: \"Attorney one\"\n</code></pre>\n\n<p>the author page works with <code>{% assign author = site.data.members[page.author] %}</code> and breaks the for-loop.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1567945782, "post_id": 57841940, "comment_id": 102111392, "body": "You&#39;ll want to use <code>||</code> rather than <code>or</code> for conditioning"}, {"owner": {"reputation": 550, "user_id": 4612071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cda66985f822d7bfdee5d90e505379c3?s=128&d=identicon&r=PG&f=1", "display_name": "arcadeblast77", "link": "https://stackoverflow.com/users/4612071/arcadeblast77"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1567945904, "post_id": 57841940, "comment_id": 102111427, "body": "@\u0412\u0438\u043a\u0442\u043e\u0440 What is the reason for that?"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 550, "user_id": 4612071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cda66985f822d7bfdee5d90e505379c3?s=128&d=identicon&r=PG&f=1", "display_name": "arcadeblast77", "link": "https://stackoverflow.com/users/4612071/arcadeblast77"}, "edited": false, "score": 2, "creation_date": 1567946219, "post_id": 57841940, "comment_id": 102111508, "body": "@arcadeblast77 <code>or</code> has lower precedence than the <code>||</code> operator or even the <code>=</code> operator, so you sometimes get results you probably didn&#39;t intend to get like <code>bool = false or true</code> what do you think the value of <code>bool</code> is here ?"}], "answers": [{"tags": [], "owner": {"reputation": 550, "user_id": 4612071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cda66985f822d7bfdee5d90e505379c3?s=128&d=identicon&r=PG&f=1", "display_name": "arcadeblast77", "link": "https://stackoverflow.com/users/4612071/arcadeblast77"}, "is_accepted": false, "score": 0, "last_activity_date": 1567947047, "creation_date": 1567947047, "answer_id": 57842116, "question_id": 57841940, "link": "https://stackoverflow.com/questions/57841940/if-statement-doesnt-get-executed-in-ruby/57842116#57842116", "title": "if statement doesn&#39;t get executed in Ruby", "body": "<p>If I understand the problem correctly, you do not need to loop at all here. You just need to check the first letter, and not all of the letters.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def translate (str)\n  if str[0] == 'a' or str[0] == 'e' or str[0] == 'o' or str[0] == 'u' or str[0] == 'i'\n    str + 'ay'\n  else\n    temp = str[0...1]\n    str = str[1...str.length]\n    str = str + temp\n    str + 'ay'\n  end\nend\n</code></pre>\n\n<p>By the way, I was able to figure this out with the debugger. Did you try that at all? Also, with your original code it turns out that for some inputs (like <code>'baaan'</code>), your <code>else</code> statement <em>does</em> execute.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12037422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d-hemyNWW9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2xEADf8XWxdPDq313GM7mK32cEA/photo.jpg?sz=128", "display_name": "Hussien Idris", "link": "https://stackoverflow.com/users/12037422/hussien-idris"}, "edited": false, "score": 0, "creation_date": 1568016517, "post_id": 57842154, "comment_id": 102126757, "body": "my while loop was for when the constant sound is more than one letter, but when i put it in my code works, i think i should&#39;ve stated that in more detail in Rule 2 : to move the whole constant sound"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 3, "user_id": 12037422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d-hemyNWW9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2xEADf8XWxdPDq313GM7mK32cEA/photo.jpg?sz=128", "display_name": "Hussien Idris", "link": "https://stackoverflow.com/users/12037422/hussien-idris"}, "edited": false, "score": 0, "creation_date": 1568017414, "post_id": 57842154, "comment_id": 102127193, "body": "Even if you wanted to move 2 letters at the end of the word, you still wouldn&#39;t use a while loop, you&#39;d just make a condition to check if you&#39;re moving 1 or 2 letters :) Something like <code>new_string = old_string[2..-1] + old_string[0..1]</code>"}], "tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": true, "score": 0, "last_activity_date": 1567956502, "last_edit_date": 1567956502, "creation_date": 1567947494, "answer_id": 57842154, "question_id": 57841940, "link": "https://stackoverflow.com/questions/57841940/if-statement-doesnt-get-executed-in-ruby/57842154#57842154", "title": "if statement doesn&#39;t get executed in Ruby", "body": "<p>Aside from my suggestion to use <a href=\"https://stackoverflow.com/questions/2083112/difference-between-or-and-in-ruby\"><code>||</code> instead of <code>or</code></a>, your method doesn't need a <code>#while</code> iterator since you're checking only for the first letter. The if/else statement should be executed only once.</p>\n\n<p>You can also replace all the checks with a single <code>#include?</code> method like this:</p>\n\n<pre><code>def translate (str)\n   if %w[a e i o u].include?(str[0])\n       str + \"ay\"\n   else\n       str[1..-1] + str[0] + \"ay\"\n   end\nend\n</code></pre>\n\n<p>Notice that I've also removed the <code>return</code> statement since the last executed line will be returned, so either line 3 or line 5 in the method above.\nYou can also add a ternary operator to make it in one line:</p>\n\n<pre><code> %w(a e i o u).include?(str[0]) ? str + \"ay\" : str[1..-1] + str[0] + \"ay\"\n</code></pre>\n\n<blockquote>\n  <p>Rule 1: If a word begins with a vowel sound, add an \"ay\" sound to the\n  end of the word.</p>\n</blockquote>\n\n<pre><code>translate(\"ana\")\n# ~&gt; \"anaay\"\n</code></pre>\n\n<blockquote>\n  <p>Rule 2: If a word begins with a consonant sound, move it to the end of\n  the word, and then add an \"ay\" sound to the end of the word.</p>\n</blockquote>\n\n<pre><code>translate(\"banana\")\n# ~&gt; \"ananabay\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1567970317, "post_id": 57843879, "comment_id": 102117222, "body": "While there might not be a problem with using <code>or</code> and <code>and</code> in this example, they&#39;re <a href=\"https://github.com/rubocop-hq/ruby-style-guide/commit/5920497452c1f6f604742a735f5684e86d4c0003\" rel=\"nofollow noreferrer\">banned by the official ruby style guide</a>. I don&#39;t think OP is aware of both <code>or</code> and <code>||</code> and chose <code>or</code> for some reason, I think it&#39;s quite the opposite, he&#39;s probably learning Ruby as his first language or comes from a language where <code>or</code> has the same effect like <code>||</code> in Ruby. While your answer works and is correct I still don&#39;t see any reason to use <code>or</code> over <code>||</code>, just my opinion :)"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 1, "creation_date": 1568012575, "post_id": 57843879, "comment_id": 102125148, "body": "@\u0412\u0438\u043a\u0442\u043e\u0440 I agree with you, just in this case it doesn&#39;t prevent the code from working."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1567961313, "creation_date": 1567961313, "answer_id": 57843879, "question_id": 57841940, "link": "https://stackoverflow.com/questions/57841940/if-statement-doesnt-get-executed-in-ruby/57843879#57843879", "title": "if statement doesn&#39;t get executed in Ruby", "body": "<p>I don't see a problem with <code>or</code> or <code>||</code> in this case.\nThe problem I see is that if the start letter is a consonant, you changing str rotating it's letters at each iteration (<strong>see the commented part of the code</strong>), so the starting letter is never a vowel.</p>\n\n<p>Then you are missing a returning value at the end so it returns <code>nil</code> and <code>puts</code> nothing.</p>\n\n<pre><code>def translate (str)\n    i = 0\n    while i &lt; str.length\n        p str[i] # it's never a vowel\n        if (str[i] == \"a\" or str[i] == \"e\" or str[i] == \"o\" or str[i] == \"u\" or str[i] == \"i\")\n            str = str + \"ay\"\n            return str\n        else # here you are rotating the word\n            temp = str[0...1]\n            str = str[1...str.length]\n            str = str + temp\n            p str\n        end\n        i = i + 1\n    end\n    # missing a return value\nend\n\ns = translate(\"banana\")\np s\n</code></pre>\n\n<p>So it prints out:</p>\n\n<pre><code># \"b\"\n# \"ananab\"\n# \"n\"\n# \"nanaba\"\n# \"n\"\n# \"anaban\"\n# \"b\"\n# \"nabana\"\n# \"n\"\n# \"abanan\"\n# \"n\"\n# \"banana\"\n# nil\n</code></pre>\n\n<p>The code works correctly in case the first letter is a vowel, so it enters the <code>if true</code>:</p>\n\n<pre><code>s = translate(\"ananas\")\np s\n#=&gt; \"ananasay\"\n</code></pre>\n\n<p>By the way, as already posted by others, you <strong>don't need any while loop</strong>. Just checking the first letter with an <code>if</code> statement is enough.</p>\n"}], "owner": {"reputation": 3, "user_id": 12037422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d-hemyNWW9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2xEADf8XWxdPDq313GM7mK32cEA/photo.jpg?sz=128", "display_name": "Hussien Idris", "link": "https://stackoverflow.com/users/12037422/hussien-idris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57842154, "answer_count": 3, "score": 0, "last_activity_date": 1567963661, "creation_date": 1567945411, "last_edit_date": 1567963661, "question_id": 57841940, "link": "https://stackoverflow.com/questions/57841940/if-statement-doesnt-get-executed-in-ruby", "title": "if statement doesn&#39;t get executed in Ruby", "body": "<p>I'm new to Ruby programming language and i am asked to make a small program that does the following:\nRule 1: If a word begins with a vowel sound, add an \"ay\" sound to the end of the word.</p>\n\n<p>Rule 2: If a word begins with a consonant sound, move it to the end of the word, and then add an \"ay\" sound to the end of the word. </p>\n\n<p>but in my if else statement it doesn't go into the if even if its true it stays at the else statement  </p>\n\n<p>i have tried taking the string and converting it into an array and work on the array and tried working on the string as is</p>\n\n<pre><code>def translate (str)\n    i = 0\n    while i &lt; str.length\n        if (str[i] == \"a\" or str[i] == \"e\" or str[i] == \"o\" or str[i] == \"u\" or str[i] == \"i\")\n            str = str + \"ay\"\n            return str\n        else\n            temp = str[0...1]\n            str = str[1...str.length]\n            str = str + temp\n        end\n        i = i + 1\n    end\n\nend\n\ns = translate(\"banana\")\nputs s\n</code></pre>\n\n<p>the program doesn't enter the if statement at all and keeps getting into the else statement until the word returns the same with out any changes</p>\n"}, {"tags": ["ruby", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 1928896, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ad63be0c09f16ea40d160b4177a551b?s=128&d=identicon&r=PG", "display_name": "user1928896", "link": "https://stackoverflow.com/users/1928896/user1928896"}, "edited": false, "score": 0, "creation_date": 1567953491, "post_id": 57842396, "comment_id": 102113150, "body": "Thanks, yes, it is a square matrix. Thanks for a solution. I&#39;m wondering if there is a simpler solution involving array functions such reduce, map, etc. so that the custom code can be reduced"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1567958560, "last_edit_date": 1567958560, "creation_date": 1567949325, "answer_id": 57842396, "question_id": 57841583, "link": "https://stackoverflow.com/questions/57841583/two-dimensional-array-processing-in-ruby/57842396#57842396", "title": "Two dimensional array processing in Ruby", "body": "<p>If I understand the question.</p>\n\n<p>The <code>ary</code> should be a square matrix, so there is a 1 to 1 relation between (x,y) and (y,x). Since on the diagonal <code>ary(x, y) == ary(y, x)</code> is always true, I left it untouched (or its easy to set it to <code>0</code>).</p>\n\n<p>So, given the matrix:</p>\n\n<pre><code>ary = \n      [\n        [1,  5,  5,  1, 5],\n        [1,  1,  1,  1, 1],\n        [1,  1,  1,  1, 1 ],\n        [1,  1,  1,  1, 1 ],\n        [5,  10, 10,  1, 10]\n      ]\n</code></pre>\n\n<p>Let's defina a method which return the upper triangle indexes, excluded the diagonal:</p>\n\n<pre><code>def top_triangle_idxs(ary)\n  n = ary.size - 1\n  res = []\n  (0..n).each do |m|\n    (1..n).each do |n|\n      res &lt;&lt; [m,n] unless m == n || m &gt; n\n    end\n  end\n  res\nend\n</code></pre>\n\n<p>So, for that case:</p>\n\n<pre><code>idxs = top_triangle_idxs(ary)\n#=&gt; [[0, 1], [0, 2], [0, 3], [0, 4], [1, 2], [1, 3], [1, 4], [2, 3], [2, 4], [3, 4]]\n</code></pre>\n\n<p>Now, lets iterate over <code>idxs</code> doing the logic:</p>\n\n<pre><code>idxs.each do |x,y|\n  ary[x][y] -= ary[y][x] if ary[x][y] &gt; ary[y][x]\n  ary[y][x] -= ary[x][y] if ary[x][y] &lt; ary[y][x]\n  ary[x][y] = ary[y][x] = 0 if ary[x][y] == ary[y][x]\nend\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>ary.each(&amp;method(:p))\n# [1, 4, 4, 0, 0]\n# [1, 1, 0, 0, 1]\n# [1, 0, 1, 0, 1]\n# [0, 0, 0, 1, 0]\n# [0, 9, 9, 0, 10]\n</code></pre>\n\n<p><hr>\nYou can get the same result using <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\">Enumerable#each_with_index</a> and <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a>, but building a new matrix:</p>\n\n<pre><code>res = ary.each_with_index.with_object(Array.new(ary.size) { [] }) do |(row, x), new_ary|\n  row.each_with_index do |e, y|\n    new_ary[x][y] = e\n    new_ary[x][y] = e - ary[y][x] if ary[x][y] &gt; ary[y][x]\n    new_ary[x][y] = 0 if e == ary[y][x] &amp;&amp; x != y\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 328, "user_id": 1928896, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ad63be0c09f16ea40d160b4177a551b?s=128&d=identicon&r=PG", "display_name": "user1928896", "link": "https://stackoverflow.com/users/1928896/user1928896"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567958560, "creation_date": 1567942644, "last_edit_date": 1567943789, "question_id": 57841583, "link": "https://stackoverflow.com/questions/57841583/two-dimensional-array-processing-in-ruby", "title": "Two dimensional array processing in Ruby", "body": "<p>I've a two-dimensional array of integer values. I want to process the array in the most efficient way. The processing logic is:</p>\n\n<p>if summary[row][col] is greater than summary[col][row], then summary[row][col] -= summary[col][row] and vice versa. If both are equal, then make both positions zero. Basically, calculating the absolute difference between the two positions.</p>\n\n<p>Here is the logic I built. Is there a cleaner, efficient way to do this using Array functions?</p>\n\n<pre><code>  row_ix = 0\n  summary.each do |row|\n    col_ix = 0\n    row.each do |row_to_col_amt|\n      if row_ix == col_ix\n        col_ix += 1\n        next\n      end\n      col_to_row_amt = summary[col_ix][row_ix]\n      if row_to_col_amt &gt;  col_to_row_amt\n        summary[row_ix][col_ix] -= col_to_row_amt\n        summary[col_ix][row_ix] = 0\n      elsif row_to_col_amt &lt;  col_to_row_amt\n        summary[col_ix][row_ix] -= row_to_col_amt\n        summary[row_ix][col_ix] = 0\n      else\n        summary[row_ix][col_ix] = 0\n        summary[col_ix][row_ix] = 0\n      end\n      col_ix += 1\n    end\n    row_ix += 1\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1567951667, "post_id": 57841103, "comment_id": 102112743, "body": "as the Puma output says, its running in development mode, not production, so I&#39;m guessing that you don&#39;t have puma &amp; nginx configured properly.  I would search for pump and nginx rails server - and follow a tutorial."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1568030973, "post_id": 57841103, "comment_id": 102133626, "body": "Also note that in the tutorial you linked there is a typo about the db port 5432 in the testing environment (see the comments at the end of the tutorial)."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "edited": false, "score": 1, "creation_date": 1568213979, "post_id": 57843455, "comment_id": 102205217, "body": "I ran the ifconfig command and you&#39;re right, the address wasn&#39;t listed (it&#39;s using 10. IP addresses rather than 192.168 addresses).  I bound the server to the address listed, which was the local IP of the server, and it worked. However, I couldn&#39;t see the site when I navigated to the address. I am accessing the server through SSH, but the computer I&#39;m using is on the same network as the server. Not sure what&#39;s going on here."}, {"owner": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "edited": false, "score": 0, "creation_date": 1568214108, "post_id": 57843455, "comment_id": 102205299, "body": "Here is my config/puma.rb file:  threads_count = ENV.fetch(&quot;RAILS_MAX_THREADS&quot;) { 5 } threads threads_count, threads_count port        ENV.fetch(&quot;PORT&quot;) { 3000 } environment ENV.fetch(&quot;RAILS_ENV&quot;) { &quot;development&quot; } plugin :tmp_restart"}, {"owner": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "edited": false, "score": 0, "creation_date": 1568214403, "post_id": 57843455, "comment_id": 102205449, "body": "Also, I tried binding to another address on the 10.0.0 subnet, but got the same error message. Now I get the same error message when binding to the original address."}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "reply_to_user": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "edited": false, "score": 0, "creation_date": 1568217010, "post_id": 57843455, "comment_id": 102206901, "body": "It&#39;s impossible to do this sort of thing in comments.  You said that my suggestion solved <i>this</i> problem (ie, your server now starts).  So, mark this as Accepted answer, and then create a new question with the new problem you have."}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1567957936, "creation_date": 1567957936, "answer_id": 57843455, "question_id": 57841103, "link": "https://stackoverflow.com/questions/57841103/ruby-on-rails-5-2-3-error-binding-address-errornoeaddrnotavail/57843455#57843455", "title": "Ruby on Rails (5.2.3) error binding address (Errorno::EADDRNOTAVAIL)", "body": "<p>Looks like you're trying to bind to an address is not an address on your machine.  Ie. if you run <code>ifconfig | grep \"inet \"</code> you won't see that <code>192.168.7.202</code> address?</p>\n\n<p>What's your <code>config/puma.rb</code> look like?</p>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "edited": false, "score": 0, "creation_date": 1568214435, "post_id": 57849221, "comment_id": 102205471, "body": "Here is my /etc/hosts file:   127.0.0.1       localhost   10.0.0.250      coruscant    # The following lines are desirable for IPv6 capable hosts   ::1     ip6-localhost ip6-loopback   ff02::1 ip6-allnodes   ff02::2 ip6-allrouters"}], "tags": [], "owner": {"reputation": 595, "user_id": 3632472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e431a79c8cf18fc5c29ebb94a721dda?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/3632472/rakesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1568012608, "creation_date": 1568012608, "answer_id": 57849221, "question_id": 57841103, "link": "https://stackoverflow.com/questions/57841103/ruby-on-rails-5-2-3-error-binding-address-errornoeaddrnotavail/57849221#57849221", "title": "Ruby on Rails (5.2.3) error binding address (Errorno::EADDRNOTAVAIL)", "body": "<p>I faced similar issue and I think issue has to do with having both 127.0.0.0 and ::1 pointing to localhost on /etc/hosts. I downgraded to Puma 3.4.0 and it resolved the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1568030911, "creation_date": 1568030911, "answer_id": 57853742, "question_id": 57841103, "link": "https://stackoverflow.com/questions/57841103/ruby-on-rails-5-2-3-error-binding-address-errornoeaddrnotavail/57853742#57853742", "title": "Ruby on Rails (5.2.3) error binding address (Errorno::EADDRNOTAVAIL)", "body": "<p><code>Cannot assign requested address - bind(2) for \"192.168.7.202\" port 5432 (Errno::EADDRNOTAVAIL</code></p>\n\n<p>To me it looks as if puma tries to bind to the port that is configured as database (postgresql) port.</p>\n\n<p>On a typical Linux system you can use <code>netstat -tlpn</code> to see which processes (web server, ssh daemon, ...) are bound to which IP adress (<code>0.0.0.0</code>means <strong>all</strong>, <code>127.0.0.1</code> is what can usually be referred to as <strong>localhost</strong>) and ports (22: typically sshd, 3000: typically rails dev server, 5432: usually postgresql).</p>\n\n<p>How do you start puma? How does the configuration look like?</p>\n\n<pre><code>$ rails server --help                                                                          Usage:\n  rails server [puma, thin etc] [options]\n\nOptions:\n  -p, [--port=port]                        # Runs Rails on the specified port - defaults to 3000.\n  -b, [--binding=IP]                       # Binds Rails to the specified IP - defaults to 'localhost' in development and '0.0.0.0' in other environments'.\n</code></pre>\n\n<p>You could try to start it like <code>rails s -b 0.0.0.0 -p 3000</code>.\nBut be careful with this, as this opens the development server to be accessible at port 3000 also from all other computers in the network (<code>0.0.0.0</code>). If you see that this works, switch to <code>127.0.0.1</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 4914224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QrqZ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4914224/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568030911, "creation_date": 1567938631, "question_id": 57841103, "link": "https://stackoverflow.com/questions/57841103/ruby-on-rails-5-2-3-error-binding-address-errornoeaddrnotavail", "title": "Ruby on Rails (5.2.3) error binding address (Errorno::EADDRNOTAVAIL)", "body": "<p>I've been doing some Ruby on Rails development on my local machine, and I want to host a Rails app on my own web server, which I set up from scratch. It is running Ubuntu 18.04 and using nginx as a server. I followed the instructions on <a href=\"https://www.howtoforge.com/tutorial/ubuntu-ruby-on-rails/\" rel=\"nofollow noreferrer\">this site</a> to set up Rails on my server and created a test app. This is my config/database.yml file:</p>\n\n<pre><code># PostgreSQL. Versions 9.1 and up are supported.\n\ndefault: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n\ndevelopment:\n  &lt;&lt;: *default\n  database: myapp_development\n\n  username: &lt;my username&gt;\n  password: &lt;my password&gt;\n  host: localhost\n  port: 5432\ntest:\n  &lt;&lt;: *default\n  database: myapp_test\n  host: localhost\n  port: 5432\n  username: &lt;my username&gt;\n  password: &lt;my password&gt;\nproduction:\n  &lt;&lt;: *default\n  database: myapp_production\n  username: myapp\n  password: &lt;%= ENV['MYAPP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>However, when I try and run the rails server, it comes up with the following:</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.2.3 application starting in development\n=&gt; Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.12.1 (ruby 2.6.3-p62), codename: Llamas in Pajamas\n* Min threads: 5, max threads: 5\n* Environment: development\nExiting\nTraceback (most recent call last):\n        29: from bin/rails:9:in `&lt;main&gt;'\n        28: from /home/username/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\n        27: from /home/username/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\n        26: from /home/username/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\n        25: from /home/username/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n        24: from /home/username/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n        23: from /home/username/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n        22: from /home/username/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n        21: from /home/username/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n        20: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands.rb:18:in `&lt;main&gt;'\n        19: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/command.rb:46:in `invoke'\n        18: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/command/base.rb:65:in `perform'\n        17: from /home/username/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n        16: from /home/username/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n        15: from /home/username/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n        14: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `perform'\n        13: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `tap'\n        12: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n        11: from /home/username/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:53:in `start'\n        10: from /home/username/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/server.rb:297:in `start'\n         9: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/rack/handler/puma.rb:73:in `run'\n         8: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/launcher.rb:186:in `run'\n         7: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/single.rb:98:in `run'\n         6: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/runner.rb:153:in `load_and_bind'\n         5: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:90:in `parse'\n         4: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:90:in `each'\n         3: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:106:in `block in parse'\n         2: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:273:in `add_tcp_listener'\n         1: from /home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:273:in `new'\n/home/username/.rvm/gems/ruby-2.6.3/gems/puma-3.12.1/lib/puma/binder.rb:273:in `initialize': Cannot assign requested address - bind(2) for \"192.168.7.202\" port 5432 (Errno::EADDRNOTAVAIL)\n</code></pre>\n\n<p>I've googled the error but nothing has helped. My IPv6 is turned on (the lines that are supposed to be commented out are). I've tried different local IP addresses and different port numbers (3000, 3001, 5432, 8080) and nothing works. </p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["ruby", "variables"], "comments": [{"owner": {"reputation": 148, "user_id": 9533591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1977695792258579/picture?type=large", "display_name": "Tomasz S", "link": "https://stackoverflow.com/users/9533591/tomasz-s"}, "edited": false, "score": 0, "creation_date": 1567934396, "post_id": 57840544, "comment_id": 102109146, "body": "The <code>insert</code> function is changing original string. That&#39;s the way it works, usually in Ruby if you wan&#39;t to change original object you need to add <code>!</code> to the method but <code>insert</code> acts as it had one by default."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1567937282, "post_id": 57840544, "comment_id": 102109703, "body": "You get the expected result duplicating <code>b</code>: <code>c = b.dup.insert(2, &quot;oo&quot;)</code>, see @J&#246;rg W Mittag answer here below."}, {"owner": {"reputation": 11, "user_id": 12037028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeb8B72OJIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4lBH-XyFhe52MiU8lu864zAgS0Q/photo.jpg?sz=128", "display_name": "Pramesh Rogbeer", "link": "https://stackoverflow.com/users/12037028/pramesh-rogbeer"}, "edited": false, "score": 0, "creation_date": 1568717683, "post_id": 57840544, "comment_id": 102355328, "body": "Thanks to you both -- very valuable insight"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1567934487, "last_edit_date": 1592644375, "creation_date": 1567934487, "answer_id": 57840660, "question_id": 57840544, "link": "https://stackoverflow.com/questions/57840544/manipulating-strings-in-ruby-with-and-insert/57840660#57840660", "title": "Manipulating strings in Ruby with &#39;+&#39; and &#39;insert&#39;", "body": "<pre><code>a = 'Python'\nb = a + 'xyz'\n</code></pre>\n<p>As <a href=\"https://ruby-doc.org/core/String.html#method-i-2B\" rel=\"nofollow noreferrer\">the documentation says</a>, <code>String#+</code> returns a <em>new</em> string that is the concatenation of the receiver and the argument (<strong>bold</strong> emphasis mine):</p>\n<blockquote>\n<h1><code>str + other_str</code> \u2192 <code>new_str</code></h1>\n<p>Concatenation\u2014<strong>Returns a new String</strong> containing <code>other_str</code> concatenated to <code>str</code>.</p>\n</blockquote>\n<p>So, <code>a</code> and <code>b</code> reference <em>different</em> strings.</p>\n<pre><code>c = b.insert(2, 'oo')\n</code></pre>\n<p>As <a href=\"https://ruby-doc.org/core/String.html#method-i-insert\" rel=\"nofollow noreferrer\">the documentation says</a>, <code>String#insert</code> <em>modifies</em> the string, so the string is still the same one, just with different content (<strong>bold</strong> emphasis mine):</p>\n<blockquote>\n<h1><code>insert(index, other_str)</code> \u2192 <code>str</code></h1>\n<p>Inserts <code>other_str</code> before the character at the given <code>index</code>, <strong>modifying <code>str</code></strong>. [\u2026]</p>\n</blockquote>\n<p>So, <code>b</code> and <code>c</code> reference <em>the same</em> string.</p>\n<p>In other words, there are in total <em>two</em> strings in your code. One is referenced by <code>a</code> and the other is referenced by both <code>b</code> and <code>c</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 12037028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeb8B72OJIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4lBH-XyFhe52MiU8lu864zAgS0Q/photo.jpg?sz=128", "display_name": "Pramesh Rogbeer", "link": "https://stackoverflow.com/users/12037028/pramesh-rogbeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567935670, "creation_date": 1567933560, "last_edit_date": 1567935670, "question_id": 57840544, "link": "https://stackoverflow.com/questions/57840544/manipulating-strings-in-ruby-with-and-insert", "title": "Manipulating strings in Ruby with &#39;+&#39; and &#39;insert&#39;", "body": "<p>I have the following Ruby code: </p>\n\n<pre><code>a = \"Python\"\nb = a.+\"xyz\"\nc = b.insert(2, \"oo\")\nputs a\nputs b\nputs c\n</code></pre>\n\n<p>I was expecting :</p>\n\n<pre><code>Python\nPythonxyz\nPyoothonxyz\n</code></pre>\n\n<p>but I get: </p>\n\n<pre><code>Python\nPyoothonxyz\nPyoothonxyz\n</code></pre>\n\n<p>Anybody can help me ? I have just started with Ruby and this is a bit puzzling. Thxs for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1567931826, "post_id": 57840020, "comment_id": 102108686, "body": "Please provide your full controller(s) code, as the solution lies there."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1567953384, "post_id": 57840020, "comment_id": 102113124, "body": "The <code>params</code> you post, that is what you should use/investigate to find how to access the posted <code>braintree_subscription</code>. Then, furthermore: make sure that your strong params do not block the required fields (but that seems to be ok)."}], "answers": [{"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1567953422, "post_id": 57842787, "comment_id": 102113132, "body": "Also easy to verify against the posted params, imho this is correct."}], "tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": true, "score": 1, "last_activity_date": 1567952635, "creation_date": 1567952635, "answer_id": 57842787, "question_id": 57840020, "link": "https://stackoverflow.com/questions/57840020/how-to-access-form-for-nested-attributes-on-controller-after-form-submit/57842787#57842787", "title": "How to access form_for nested attributes on controller after form submit?", "body": "<p>Because this is a has one, and not a has many, you won't have more than 1 nested object in your attributes.  The array syntax is only necessary if there is expected to be more than 1 child.</p>\n\n<pre><code>braintree_account_params[:braintree_subscription_attributes][:plan_token]\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "accepted_answer_id": 57842787, "answer_count": 1, "score": 0, "last_activity_date": 1567952635, "creation_date": 1567928499, "question_id": 57840020, "link": "https://stackoverflow.com/questions/57840020/how-to-access-form-for-nested-attributes-on-controller-after-form-submit", "title": "How to access form_for nested attributes on controller after form submit?", "body": "<p>I need to access the fields_for nested attribute but I keep getting this error:</p>\n\n<p><code>undefined method '[]' for nil:NilClass</code></p>\n\n<p><strong>For line:</strong></p>\n\n<p><code>braintree_account_params[:braintree_subscription_attributes][0][:plan_token]</code></p>\n\n<p><strong>I have tried:</strong></p>\n\n<pre><code>params[:braintree_subscription_attributes][0][:plan_token]\nparams[\"braintree_subscription_attributes\"][0][\"plan_token\"]\nbraintree_account_params[:braintree_subscription_attributes][0][:plan_token]\nbraintree_account_params[\"braintree_subscription_attributes\"][0][\"plan_token\"]\n\nparams[:braintree_subscription_attributes]['0'][:plan_token]\nparams[\"braintree_subscription_attributes\"]['0'][\"plan_token\"]\nbraintree_account_params[:braintree_subscription_attributes]['0'][:plan_token]\nbraintree_account_params[\"braintree_subscription_attributes\"]['0'][\"plan_token\"]\n</code></pre>\n\n<p>None have worked</p>\n\n<p>This:\n<code>params[:braintree_account][:braintree_subscription_attributes].first[:plan_token]</code></p>\n\n<p>Error: <code>Undefined method first # for ActionController</code></p>\n\n<p><strong>My params:</strong></p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"braintree_account\"=&gt;{\"first_name\"=&gt;\"asfd\", \"last_name\"=&gt;\"asfd\", \"braintree_subscription_attributes\"=&gt;{\"plan_token\"=&gt;\"4zfr\"}}, \"user_id\"=&gt;\"1\"}\n</code></pre>\n\n<p>Strong Params:</p>\n\n<p>params.require(:braintree_account).permit(..., braintree_subscription_attributes: [:id, :plan_token])</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>class BraintreeAccount &lt; ApplicationRecord\n  has_one :braintree_subscription\n  accepts_nested_attributes_for :braintree_subscription\nend\n\nclass BraintreeSubscription &lt; ApplicationRecord\n  belongs_to :braintree_account\nend\n</code></pre>\n\n<p>How can I access <code>plan_token</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1567922506, "post_id": 57839340, "comment_id": 102107300, "body": "My money is on &quot;no&quot;. I&#39;m curious: why do you want to do that and why do you need better performance? I&#39;d think your code would split 100,000 strings in the blink of an eye."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1567924310, "post_id": 57839340, "comment_id": 102107536, "body": "You&#39;ll end up with a lot of substring creation and copying. You might want to try this on an implementation like Rubinius, which AFAIK uses <i>ropes</i> instead of <i>strings</i> to implement the <code>String</code> class. The operations you are performing, are what ropes are very good at."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1567930551, "post_id": 57839340, "comment_id": 102108455, "body": "do you need to return an array always or just a string output as you&#39;ve shown in your sample output?"}, {"owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1568019292, "post_id": 57839340, "comment_id": 102128115, "body": "@CarySwoveland I was just curious whether there is a better way to do this"}, {"owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1568019316, "post_id": 57839340, "comment_id": 102128124, "body": "@lacostenycoder Yes, I need to return array"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1567927156, "creation_date": 1567927156, "answer_id": 57839905, "question_id": 57839340, "link": "https://stackoverflow.com/questions/57839340/split-string-into-multiple-arrays-fast/57839905#57839905", "title": "Split string into multiple arrays fast", "body": "<p>What is your definition of \"fast\" ?  Did you bench mark it?</p>\n\n<pre><code>require 'benchmark'\nrequire 'SecureRandom'\n\narr = []\n\n100_000.times { arr &lt;&lt; SecureRandom.hex(5)}\n\ndef breakdown(str)\n  [\n    [str],\n    [str[0..4], str[5..9]],\n    [str[0..3], str[4..9]],\n    [str[0..5], str[6..9]],\n    [str[0..2], str[3..5], str[6..9]],\n    [str[0..2], str[3..6], str[7..9]],\n    [str[0..3], str[4..6], str[7..9]],\n    [str[0..2], str[3..9]],\n    [str[0..6], str[7..9]]\n  ]\nend\n\nBenchmark.bm do |x|\n  x.report { arr.each{|a| breakdown a} }\nend\n\n       user     system      total        real\na  0.337387   0.001583   0.338970 (  0.341292)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 2, "creation_date": 1567938543, "post_id": 57841036, "comment_id": 102109967, "body": "Yes, you are correct.  My benchmark test shows about 25% faster ."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 2, "last_activity_date": 1567938025, "creation_date": 1567938025, "answer_id": 57841036, "question_id": 57839340, "link": "https://stackoverflow.com/questions/57839340/split-string-into-multiple-arrays-fast/57841036#57841036", "title": "Split string into multiple arrays fast", "body": "<p>I suppose you could gain a bit of speed storing repetitive slices in variables:</p>\n\n<pre><code>def breakdown(str)\n  s_0_2 = str[0..2]\n  s_0_3 = str[0..3]\n  s_6_9 = str[6..9]\n  s_7_9 = str[7..9]\n  [\n    [str],\n    [str[0..4], str[5..9]],\n    [s_0_3, str[4..9]],\n    [str[0..5], s_6_9],\n    [s_0_2, str[3..5], s_6_9],\n    [s_0_2, str[3..6], s_7_9],\n    [s_0_3, str[4..6], s_7_9],\n    [s_0_2, str[3..9]],\n    [str[0..6], s_7_9]\n  ]\nend\n</code></pre>\n"}], "owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57841036, "answer_count": 2, "score": 2, "last_activity_date": 1567938025, "creation_date": 1567919447, "last_edit_date": 1567919864, "question_id": 57839340, "link": "https://stackoverflow.com/questions/57839340/split-string-into-multiple-arrays-fast", "title": "Split string into multiple arrays fast", "body": "<p>I have 100,000 strings of length 10, which needs to be split in 9 ways as shown below</p>\n\n<pre><code>10 # the whole string\n5 x 5 # 2 strings of length 5 each\n4 x 6 # and so on...\n6 x 4\n3 x 3 x 4\n3 x 4 x 3\n4 x 3 x 3\n3 x 7\n7 x 3\n</code></pre>\n\n<p>So for example the string <code>WGWJAWMPPJ</code> would turn into </p>\n\n<pre><code>WGWJAWMPPJ\nWGWJA WMPPJ\nWGWJ AWMPPJ\nWGWJAW MPPJ\nWGW JAW MPPJ\nWGW JAWM PPJ\nWGWJ AWM PPJ\nWGW JAWMPPJ\nWGWJAWM PPJ\n</code></pre>\n\n<p>The code I wrote is below</p>\n\n<pre><code>def breakdown(str)\n  [\n    [str],\n    [str[0..4], str[5..9]],\n    [str[0..3], str[4..9]],\n    [str[0..5], str[6..9]],\n    [str[0..2], str[3..5], str[6..9]],\n    [str[0..2], str[3..6], str[7..9]],\n    [str[0..3], str[4..6], str[7..9]],\n    [str[0..2], str[3..9]],\n    [str[0..6], str[7..9]]\n  ]\nend\n</code></pre>\n\n<p>Is there any way to improve the performance of the above method?</p>\n"}]