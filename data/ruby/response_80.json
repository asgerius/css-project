[{"tags": ["ruby-on-rails", "ruby", "forms", "has-many-through"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469062073, "post_id": 38492511, "comment_id": 64387289, "body": "hi and welcome to stack overflow. So - I notice that there isn&#39;t any form-field for that number of sections at all. What have you tried to put in your form to make that work and what, if any, errors did you see when you tried that?"}, {"owner": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469063510, "post_id": 38492511, "comment_id": 64387613, "body": "@TarynEast Well, I have tried several stack overflow answers, the problem is that they use nested fields, not something we are using in our implementation. In fact, we have no idea what the field should be named because when we save it, it does not appear."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469064981, "post_id": 38492511, "comment_id": 64387917, "body": "so... show us what you tried (edit your question and put it there), and we can help you fix it so that it does appear :) AFAICT it&#39;s just another field... so add another field named what you want."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469065075, "post_id": 38492511, "comment_id": 64387938, "body": "Also - have you heard of <code>fields_for</code> ? <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/FormHelper/fields_for</a> It might be better to use that for your sections..."}, {"owner": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469120590, "post_id": 38492511, "comment_id": 64418150, "body": "@TarynEast I have updated the answer, now I&#39;m getting a TypeError when I try to update the join table record, even when I do it from the console. Do you know why this is happening?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1469147754, "post_id": 38492511, "comment_id": 64429415, "body": "Sounds like a new question ;) Create a new one and show the error and code there... (you can copy the URL as a reply to this comment to get our attention when you&#39;re done)"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "edited": false, "score": 0, "creation_date": 1469120631, "post_id": 38493572, "comment_id": 64418173, "body": "This solutions is great, the only problem is that I need to show all the checkboxes every time, even when the user is editing the records"}, {"owner": {"reputation": 418, "user_id": 1612648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec33534bfc77e02779b4954cbe6a4ab7?s=128&d=identicon&r=PG", "display_name": "Jorge Vargas", "link": "https://stackoverflow.com/users/1612648/jorge-vargas"}, "reply_to_user": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "edited": false, "score": 0, "creation_date": 1469126903, "post_id": 38493572, "comment_id": 64421582, "body": "Hi! you can do a selective build on create to build just the records for the sections that aren&#39;t selected. Look <a href=\"https://github.com/afromankenobi/nested_attr_demo/blob/master/app/controllers/random_exams_controller.rb#L22\" rel=\"nofollow noreferrer\">this</a> method <a href=\"https://github.com/afromankenobi/nested_attr_demo/blob/master/app/controllers/random_exams_controller.rb#L22\" rel=\"nofollow noreferrer\">github.com/afromankenobi/nested_attr_demo/blob/master/app/&hellip;</a>"}, {"owner": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "edited": false, "score": 0, "creation_date": 1469143151, "post_id": 38493572, "comment_id": 64428409, "body": "I used another work around but your answer was very good, thanks. I&#39;ll mark it as the correct answer. It would be great if you could up vote the question, I think many people are struggling with this. Thank you for your time."}], "tags": [], "owner": {"reputation": 418, "user_id": 1612648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec33534bfc77e02779b4954cbe6a4ab7?s=128&d=identicon&r=PG", "display_name": "Jorge Vargas", "link": "https://stackoverflow.com/users/1612648/jorge-vargas"}, "is_accepted": true, "score": 1, "last_activity_date": 1469065781, "creation_date": 1469065781, "answer_id": 38493572, "question_id": 38492511, "link": "https://stackoverflow.com/questions/38492511/has-many-through-access-join-table-attribute-in-form/38493572#38493572", "title": "has_many through access join table attribute in form", "body": "<p>If you use nested_attributes you can do something like this:</p>\n\n<pre><code>#form\n&lt;h4&gt;Selected exams&lt;/h4&gt;\n&lt;%= f.fields_for :random_exam_sections do |b| %&gt;\n  &lt;%= b.hidden_field :section_id %&gt;\n  &lt;%= b.label :selected, b.object.section.name %&gt;\n  &lt;%= b.check_box :selected, { checked: !b.object.id.blank? } %&gt;\n  &lt;br&gt;\n  &lt;%= b.label :question_numbers %&gt;\n  &lt;%= b.text_field :questions_number %&gt;\n &lt;% end %&gt;\n\n#RandomExamModel\nclass RandomExam &lt; ApplicationRecord\n  has_many :random_exam_sections, inverse_of: :random_exam\n  has_many :sections, :through =&gt; :random_exam_sections\n\n  accepts_nested_attributes_for :random_exam_sections, reject_if: :is_not_selected\n\n\n  private\n  def is_not_selected(attr)\n    attr[\"selected\"] == '0'\n  end\nend\n\n# RandomExam\nclass RandomExamSection &lt; ApplicationRecord\n  belongs_to :random_exam\n  belongs_to :section\n\n  attr_accessor :selected\nend\n\n# Controller\n# GET /random_exams/new\n  def new\n    @random_exam = RandomExam.new\n    @random_exam.random_exam_sections.build(Section.all.map{|s| {section_id: s.id}})\n  end\n</code></pre>\n\n<p>The idea basically is</p>\n\n<pre><code>- Build on controller the random_exam_sections to be selected\n- Write a form that allows to you 'select' one option and assign the number\n- Then, validate if the random_exam_section of a sections was selected (this why i made that `attr_accessor :selected`, i need a place to write if user select the exam_section)\n- If was selected, save.\n</code></pre>\n\n<p>The trick here is build on the controller, then select on the view and validate the selected on the model. Here i made an example if you need help: <a href=\"https://github.com/afromankenobi/nested_attr_demo\" rel=\"nofollow\">https://github.com/afromankenobi/nested_attr_demo</a></p>\n\n<p>To add sections when the random_exam_sections is already created you should probably use javascript. Maybe this railscasts can help you <a href=\"http://railscasts.com/episodes/196-nested-model-form-part-1\" rel=\"nofollow\">http://railscasts.com/episodes/196-nested-model-form-part-1</a></p>\n"}], "owner": {"reputation": 83, "user_id": 4383719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac363f24abed8762acf7ce4dbb9ef67d?s=128&d=identicon&r=PG&f=1", "display_name": "Dazt", "link": "https://stackoverflow.com/users/4383719/dazt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 38493572, "answer_count": 1, "score": 1, "last_activity_date": 1469143111, "creation_date": 1469057747, "last_edit_date": 1469143111, "question_id": 38492511, "link": "https://stackoverflow.com/questions/38492511/has-many-through-access-join-table-attribute-in-form", "title": "has_many through access join table attribute in form", "body": "<p>I have the following models:</p>\n\n<pre><code>class RandomExam &lt; ActiveRecord::Base\n  has_many :random_exam_sections\n  has_many :sections, :through =&gt; :random_exam_sections\nend\n\nclass Section &lt; ActiveRecord::Base\n  has_many :random_exam_sections\n  has_many :random_exams, :through =&gt; :random_exam_sections\n\nclass RandomExamSection &lt; ActiveRecord::Base\n  belongs_to :random_exam\n  belongs_to :section\nend\n</code></pre>\n\n<p>The idea is to have certain configurations to create random exams, so this tables help to select which sections do you need and then also select the number of questions per section, here are the attributes of each table:</p>\n\n<p>RandomExam: name(string), created_at(datetime), updated_at(datetime)</p>\n\n<p>Section: name(string), created_at(datetime), updated_at(datetime)</p>\n\n<p>RandomExamSection: random_exam_id(integer), section_id(integer), questions_number(integer)</p>\n\n<p>As you can see the number of questions per section attribute is inside the RandomExamSections table and I want to access it in a form that is displayed from the RandomExam controller, here is my form:</p>\n\n<pre><code>&lt;%= form_for (@random_exam) do |f|  %&gt;\n    &lt;div class=\"row\"&gt;\n\n        &lt;div class=\"input-field col s12\"&gt;\n            &lt;%= f.label :name, 'Name' %&gt;\n            &lt;%= f.text_field :name, placeholder: 'Enter the name of the       configuration' %&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n\n    &lt;% @sections.each do |section| %&gt;\n\n        &lt;div class=\"row &lt;%= dom_id(section) %&gt;\"&gt;\n            &lt;div class=\"col s4\"&gt;\n                &lt;%= check_box_tag 'random_exam[section_ids][]',  section.id,\n                @random_exam.section_ids.include?(section.id), id:     dom_id(section), class: \"section-checkbox #{dom_id(section)}\" %&gt;\n                &lt;%= label_tag dom_id(section), (raw sanitize     section.name, tags: %w(h2 p strong em a br b i small u ul ol li     blockquote), attributes: %w(id class href)),\n                class: \"name #{dom_id(section)}\" %&gt;\n            &lt;/div class=\"col s4\"&gt;\n            &lt;div&gt;\n                &lt;%= text_field_tag \"random_exam[random_questions_numbers][#{section.id}][]\", nil,\n                                   :placeholder =&gt; 'Enter the number of questions' %&gt;\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n    &lt;% end %&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.submit class: \"btn waves-effect waves-light green\"  %&gt;\n    &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>def create\n  @random_exam = RandomExam.new(random_exam_params)\n  if @random_exam.save\n  assign_random_questions_number\n  flash[:success] = 'Random configuration created successfully'\n  redirect_to @random_exam\nelse\n  flash.now[:danger] = @random_exam.errors.full_messages.to_sentence\n  render 'new'\nend\n\ndef assign_random_questions_number\n  if params[:random_exam][:'random_questions_numbers'] == nil\n    return\n  end\n\n\nparams[:random_exam][:'section_ids'].each do |key, value|\n  record = RandomExamSection.search_ids(@random_exam.id, key)\n\n  record.each do |random_exam_section_record|\n    number_of_questions = params[:random_exam][:'random_questions_numbers'][key].first.to_i\n    random_exam_section_record.update(questions_number: number_of_questions)\n  end\nend\n</code></pre>\n\n<p>end</p>\n\n<p>I'm getting a TypeError: <code>TypeError: nil is not a symbol nor a string</code> when I update the record in the method <code>assign_random_questions_number</code></p>\n\n<p>This error even appears when I run this on the console</p>\n\n<pre><code>random = RandomExamSection.first\nrandom.update(questions_number: 10)\n</code></pre>\n\n<p>Or when I run:</p>\n\n<pre><code>random = RandomExamSection.first\nrandom.questions_number = 10\nrandom.save\n</code></pre>\n\n<p>EDIT</p>\n\n<p>I ended up deleting the association in RandomExamSection and recreating it inside 'assign_random_questions_number' with the questions_number</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 0, "creation_date": 1469053559, "post_id": 38491854, "comment_id": 64385170, "body": "<code>Barber.find(params[:id).lists</code>?"}, {"owner": {"reputation": 65, "user_id": 5828685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f78e30f5fa440ca92807a509c3d79d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5828685/bryan"}, "reply_to_user": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 0, "creation_date": 1469053717, "post_id": 38491854, "comment_id": 64385217, "body": "I tried it but didn&#39;t work. @potashin Any more suggestions?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5828685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f78e30f5fa440ca92807a509c3d79d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5828685/bryan"}, "edited": false, "score": 0, "creation_date": 1469110999, "post_id": 38492205, "comment_id": 64411939, "body": "Thank You! it worked!! How can I do this now in my index? @blnc"}], "tags": [], "owner": {"reputation": 4168, "user_id": 737275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f7198e2f8a5bce446aafc6acc85c3b?s=128&d=identicon&r=PG&f=1", "display_name": "blnc", "link": "https://stackoverflow.com/users/737275/blnc"}, "is_accepted": true, "score": 1, "last_activity_date": 1469055421, "creation_date": 1469055421, "answer_id": 38492205, "question_id": 38491854, "link": "https://stackoverflow.com/questions/38491854/how-to-lists-all-names-from-a-specific-category-in-rails/38492205#38492205", "title": "How to lists all names from a specific category in Rails?", "body": "<p><strong>Lists Model:</strong></p>\n\n<pre><code>class List &lt; ActiveRecord::Base\n  # REMOVE THIS: has_one :barber\n  belongs_to :barber\nend\n</code></pre>\n\n<p><strong>Show.html.erb:</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-10 list center-block\"&gt;\n      &lt;div class=\"col-md-6 center-block names panel-default panel\"&gt;\n        &lt;h1&gt;&lt;%= @barber.name %&gt;&lt;/h1&gt;\n        &lt;% for list in @barber.lists %&gt;\n            &lt;p&gt;&lt;%= list.name %&gt;&lt;/p&gt;\n        &lt;% end %&gt;\n        &lt;hr&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-md-2 center-block\"&gt;\n        &lt;%= link_to \"edit\", edit_barber_path(@barber), class: \"btn btn-default btn-edit\"%&gt;\n        &lt;%= link_to \"Delete\", barber_path(@barber), method: :delete, data: {confirm: \"Are you sure you want to delete this Barber?\"}, class: \"btn btn-default btn-delete\"%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5828685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f78e30f5fa440ca92807a509c3d79d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5828685/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 38492205, "answer_count": 1, "score": 0, "last_activity_date": 1469055421, "creation_date": 1469053438, "question_id": 38491854, "link": "https://stackoverflow.com/questions/38491854/how-to-lists-all-names-from-a-specific-category-in-rails", "title": "How to lists all names from a specific category in Rails?", "body": "<p>I have been looking for the right answer, but no success. So I have a list where people can sign the list and select a specific barber. I want to display all the names under a specific Barber in my views/barbers/show.html.erb\nI am new to rails so I would really appreciate anyone's help. Thank You :)</p>\n\n<p>Here is my lists controller:</p>\n\n<pre><code>class ListsController &lt; ApplicationController\n  before_action :find_list, only: [:show, :edit, :update, :destroy]\n  def index\n    @list = List.all.order(\"created_at asc\")\n  end\n\n  def new\n    @list = List.new\n  end\n\n  def create\n    @list = List.new list_params\n\n    if @list.save\n      redirect_to root_path, notice: \"#{@list.name}, You have been added to the List!\"\n    else\n      render 'new', notice: \"Oh No! Not Saved!\"\n    end\n  end\n\n  def show\n\n  end\n\n  def edit\n\n  end\n\n  def update\n    if @list.update list_params\n      redirect_to @list, notice: \"#{@list.name}, has been updated!\"\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @list.destroy\n    redirect_to root_path, notice: \"#{@list.name}, has been deleted!\"\n  end\n\n  private\n\n  def list_params\n    params.require(:list).permit(:name, :barber_id)\n  end\n\n  def find_list\n    @list = List.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>Barbers Controller:</p>\n\n<pre><code>class BarbersController &lt; ApplicationController\n  before_action :find_barber, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!\n  def index\n    @barber = Barber.all.order(\"created_at desc\")\n  end\n\n  def new\n    @barber = Barber.new\n  end\n\n  def create\n    @barber = Barber.new barber_params\n\n    if @barber.save\n      redirect_to @barber, notice: \"#{@barber.name} has been saved!\"\n    else\n      render 'new', notice: \"Oh No!#{@barber.name} couldn't save!\"\n    end\n  end\n\n  def show\n\n  end\n\n  def edit\n\n  end\n\n  def update\n    if @barber.update barber_params\n      redirect_to @barber, notice: \"#{@barber.name} has been updated\"\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @barber.destroy\n    redirect_to barbers_path\n  end\n\n  private\n\n  def barber_params\n    params.require(:barber).permit(:name, :barber_id)\n  end\n\n  def find_barber\n    @barber = Barber.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>Barbers Model:</p>\n\n<pre><code>class Barber &lt; ActiveRecord::Base\n  has_many :lists\nend\n</code></pre>\n\n<p>Lists Model:</p>\n\n<pre><code>class List &lt; ActiveRecord::Base\n  has_one :barber\n  belongs_to :barber\nend\n</code></pre>\n\n<p>Show.html.erb:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-10 list center-block\"&gt;\n      &lt;div class=\"col-md-6 center-block names panel-default panel\"&gt;\n        &lt;h1&gt;&lt;%= @barber.name %&gt;&lt;/h1&gt;\n        &lt;hr&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-md-2 center-block\"&gt;\n        &lt;%= link_to \"edit\", edit_barber_path(@barber), class: \"btn btn-default btn-edit\"%&gt;\n        &lt;%= link_to \"Delete\", barber_path(@barber), method: :delete, data: {confirm: \"Are you sure you want to delete this Barber?\"}, class: \"btn btn-default btn-delete\"%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And here is my form just in case:</p>\n\n<pre><code>&lt;%= form_for @list do |f| %&gt;\n  &lt;% if @list.errors.any?%&gt;\n    &lt;h2&gt;&lt;%= pluralize(@list.errors.count, \"error\") %&gt; prevented this list from saving:&lt;/h2&gt;\n    &lt;ul&gt;\n      &lt;% @list.errors.full_messages.each do |msg| %&gt;\n        &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n      &lt;%end%&gt;\n    &lt;/ul&gt;\n  &lt;%end%&gt;\n\n  &lt;div class=\"form-group \"&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name, {class: 'form-control'} %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label \"Choose a Barber\" %&gt;\n\n    &lt;div class=\"classic-select\"&gt;\n      &lt;%= f.collection_select :barber_id, Barber.all, :id, :name %&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;button type=\"submit\" class=\"btn-add-to-list\"&gt;Submit&lt;/button&gt;\n&lt;%end%&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1469050608, "post_id": 38491217, "comment_id": 64384090, "body": "it is the input array @sagarpandya82"}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 1, "last_activity_date": 1469051241, "last_edit_date": 1469051241, "creation_date": 1469050876, "answer_id": 38491323, "question_id": 38491217, "link": "https://stackoverflow.com/questions/38491217/get-all-truthy-values-in-an-array-within-a-given-limit/38491323#38491323", "title": "get all truthy values in an array within a given limit", "body": "<p>You can use <code>#take_while</code></p>\n\n<pre><code>limit = 9\nresult = []\na.take_while do |i| \n  result &lt;&lt; i if i\n  result.length - 1 &lt; limit\nend\n</code></pre>\n\n<p>In Ruby every object is <em>truthy</em> except <code>nil</code> and <code>false</code>. So truthy check is being made by <code>if i</code> like that.</p>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1469052043, "post_id": 38491335, "comment_id": 64384632, "body": "<code>lazy.select(&amp;:itself).first(10)</code> for first 10 truthy values."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1469050929, "creation_date": 1469050929, "answer_id": 38491335, "question_id": 38491217, "link": "https://stackoverflow.com/questions/38491217/get-all-truthy-values-in-an-array-within-a-given-limit/38491335#38491335", "title": "get all truthy values in an array within a given limit", "body": "<p>This could be achieved with <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-lazy\" rel=\"nofollow\"><code>lazy</code></a> and <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-first\" rel=\"nofollow\"><code>first</code></a> - both methods are defined on <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html\" rel=\"nofollow\"><code>Enumerable</code></a>:</p>\n\n<pre><code>(1..20).lazy.select do |n|\n  puts \"value #{n}\"\n  n.is_a? Numeric\nend.first(10)\n#=&gt; value 1\n#=&gt; value 2\n#=&gt; value 3\n#=&gt; value 4\n#=&gt; value 5\n#=&gt; value 6\n#=&gt; value 7\n#=&gt; value 8\n#=&gt; value 9\n#=&gt; value 10\n#=&gt; [1,2,3,4,5,6,7,8,9,10]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1469051042, "creation_date": 1469051042, "answer_id": 38491364, "question_id": 38491217, "link": "https://stackoverflow.com/questions/38491217/get-all-truthy-values-in-an-array-within-a-given-limit/38491364#38491364", "title": "get all truthy values in an array within a given limit", "body": "<p>You can use until or while</p>\n\n<pre><code>b = []\ni = 0\nuntil i &gt; 10 || i = a.length\n  if a[i].is_a? Numeric\n    b &lt;&lt; a[i]\n    i += 1\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 38491335, "answer_count": 3, "score": 0, "last_activity_date": 1469051241, "creation_date": 1469050379, "question_id": 38491217, "link": "https://stackoverflow.com/questions/38491217/get-all-truthy-values-in-an-array-within-a-given-limit", "title": "get all truthy values in an array within a given limit", "body": "<p>I want to get all truthy values in an array (in this example that would be numeric values). But once the limit has been reached I do not want to continue looking for truthy values. My initial thought was to do this:</p>\n\n<pre><code>a.select do |n|\n  puts \"value #{n}\"\n  n.is_a? Numeric\nend.slice(0..9)\n\nvalue 1\nvalue 2\nvalue 3\nvalue 4\nvalue 5\nvalue 6\nvalue 7\nvalue 8\nvalue 9\nvalue 10\nvalue 11\nvalue 12\nvalue 13\nvalue 14\nvalue 15\n =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] \n</code></pre>\n\n<p>While it gives me the correct results, it still searches through every record. I want it to stop searching when I hit the limit.</p>\n\n<p>How can I achieve this in Ruby?</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "edited": false, "score": 0, "creation_date": 1469823916, "post_id": 38603981, "comment_id": 64714808, "body": "Thanks, this works, but I believe I need a class that contains the default hash, and is initialized with the merged hash (default + input).  The reason is that I want to include additional methods that process the content of the hash.  I am working on it with your code and will post it if I find something.  Why is it a bad idea to subclass OpenStruct?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "reply_to_user": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "edited": false, "score": 0, "creation_date": 1469824036, "post_id": 38603981, "comment_id": 64714842, "body": "It shouldn&#39;t be too hard to have a class that holds the default hash.  You can leave the code in this post as-is, and make a class that uses it internally."}, {"owner": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "edited": false, "score": 0, "creation_date": 1469824237, "post_id": 38603981, "comment_id": 64714904, "body": "I did that.  But I am struggling with the methods of that class that would access the merged hash"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "reply_to_user": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "edited": false, "score": 0, "creation_date": 1469825642, "post_id": 38603981, "comment_id": 64715447, "body": "Store the hash in an instance variable, add a method like <code>def hash; @hash; end</code>."}, {"owner": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "edited": false, "score": 0, "creation_date": 1470233784, "post_id": 38603981, "comment_id": 64866015, "body": "I still have some issues.  I will post them today."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 1, "last_activity_date": 1469595132, "creation_date": 1469595132, "answer_id": 38603981, "question_id": 38491195, "link": "https://stackoverflow.com/questions/38491195/ruby-initialize-a-ruby-class-with-a-nested-hash-and-some-pre-defined-default-va/38603981#38603981", "title": "Ruby: initialize a Ruby Class with a nested Hash and some pre-defined default values", "body": "<p>Here is some code that does what you want, except I threw away the idea of subclassing OpenStruct because I wasn't sure if it was a good idea.  Also, I implemented deep_merge myself because it was pretty easy to do, but you could try using the version from ActiveSupport if you wanted.</p>\n\n<pre><code>require 'ostruct'\n\n# Merges two hashes that could have hashes inside them.  Default\n# values/procs of the input hashes are ignored.  The output hash will\n# not contain any references to any of the input hashes, so you don't\n# have to worry that mutating the output will affect the inputs.\ndef deep_merge(h1, h2)\n  result = {}\n  deep_update(result, h1)\n  deep_update(result, h2)\n  result\nend\n\ndef deep_update(dest, src)\n  src.each do |key, value|\n    if value.is_a?(Hash)\n      dest[key] = {} if !dest[key].is_a?(Hash)\n      deep_update(dest[key], value)\n    else\n      dest[key] = value\n    end\n  end\nend\n\ndef deep_open_struct(hash)\n  result = OpenStruct.new\n  hash.each do |key, value|\n    if value.is_a?(Hash)\n      result[key] = deep_open_struct(value)\n    else\n      result[key] = value\n    end\n  end\n  result\nend\n\ninput_hash = {a: {b: 1}}\ndefaults = {a: {dc: 2}, dd: {de: 4}}\nobject = deep_open_struct(deep_merge(defaults, input_hash))\np object.a.b\np object.a.dc\np object.a.to_h\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 1121445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27b04796bd887824e62a9a311b4549bc?s=128&d=identicon&r=PG", "display_name": "JMor", "link": "https://stackoverflow.com/users/1121445/jmor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1470245359, "creation_date": 1469050279, "last_edit_date": 1495540859, "question_id": 38491195, "link": "https://stackoverflow.com/questions/38491195/ruby-initialize-a-ruby-class-with-a-nested-hash-and-some-pre-defined-default-va", "title": "Ruby: initialize a Ruby Class with a nested Hash and some pre-defined default values", "body": "<p>Here is my problem.  I like <a href=\"http://andreapavoni.com/blog/2013/4/create-recursive-openstruct-from-a-ruby-hash/#.V3KVp5MkpR0\" rel=\"nofollow noreferrer\" title=\"Andrea Pavoni\">Andrea Pavoni</a>'s way of allowing a nested hash to be used to initialize a class. </p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'ostruct'\n\nclass DeepStruct &lt; OpenStruct\n  def initialize(hash=nil)\n    @table = {}\n    @hash_table = {}\n\n    if hash\n      hash.each do |k,v|\n        @table[k.to_sym] = (v.is_a?(Hash) ? self.class.new(v) : v)\n        @hash_table[k.to_sym] = v\n\n        new_ostruct_member(k)\n      end\n    end\n  end\n\n  def to_h\n    @hash_table\n  end\n\nend\n</code></pre>\n\n<p>But I can't find a way to include a hash (in the class) with specific default values, so that the behavior would be as follows:</p>\n\n<p><strong>Original behavior without default (with above code):</strong></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>input_hash = {a: {b: 1}}\nnew_object = DeepStruct.new hash\nnew_object.a      # =&gt; #&lt;DeepStruct b=1&gt;\nnew_object.a.b    # =&gt; 1\nnew_object.a.to_h # =&gt; {b: 1}\n</code></pre>\n\n<p>With the following default_h defined inside the class: </p>\n\n<pre><code>default_h = {a: {dc: 2}, dd: {de: 4}}\n</code></pre>\n\n<p>input_hash and default_h should merge as follows\n(actually using <a href=\"https://stackoverflow.com/questions/9381553/ruby-merge-nested-hash\" title=\"deep_merge\">deep_merge</a> for nested hash)</p>\n\n<pre><code>{:a=&gt;{:dc=&gt;2, :b=&gt;1}, :dd=&gt;{:de=&gt;4}}\n</code></pre>\n\n<p><strong>The behavior with default hash should be:</strong></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>new_object = DeepStruct.new hash\nnew_object.a.b    # =&gt; 1\nnew_object.a.dc   # =&gt; 2\nnew_object.a.to_h # =&gt; {:dc=&gt;2, :b=&gt;1}\n</code></pre>\n\n<p>I can't find a way to implement this behavior inside the class.  I would really appreciate any help in this matter.</p>\n\n<p><strong>Edit: Now trying to use David's code in a class:</strong></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class CompMedia\n    require 'ostruct'\n    attr_accessor :merged_h\n\n    def initialize(hash)\n        defaults = {a: {dc: 2}, dd: {de: 4}}\n      @merged_h = {}\n      deep_update(merged_h, defaults)\n      deep_update(merged_h, hash)\n      @merged_h\n    end\n\n    def deep_update(dest, src)\n      src.each do |key, value|\n        if value.is_a?(Hash)\n          dest[key] = {} if !dest[key].is_a?(Hash)\n          deep_update(dest[key], value)\n        else\n          dest[key] = value\n        end\n      end\n    end\n\n    def deep_open_struct(hash)\n      result = OpenStruct.new\n      hash.each do |key, value|\n        if value.is_a?(Hash)\n          result[key] = deep_open_struct(value)\n        else\n          result[key] = value\n        end\n      end\n        result\n    end\n\nend # class CompMedia\n\ninput_hash = {a: {b: 1}}\n\ncm = CompMedia.new(input_hash)\n\nobject = cm.deep_open_struct(cm.merged_h)\n\np object.marshal_dump    # {:a=&gt;#&lt;OpenStruct dc=2, b=1&gt;, :dd=&gt;#&lt;OpenStruct de=4&gt;}\np object.a               # &lt;OpenStruct dc=2, b=1&gt;\np object.a.marshal_dump  # {:dc=&gt;2, :b=&gt;1}\np object.a.b             # 1\np object.a.dc            # 2\np object.dd              # &lt;OpenStruct de=4&gt;\n</code></pre>\n\n<p>Obviously, I haven't found a way to retrieve in a simple fashion the nested hash elements from the  openstruct object.\nMy objective is to create a class that would be initialized with a default (nested) hash contained in the class, and a (nested) input hash.  In addition, I want to be able to add methods that would process the hash inside the class. I am not there yet.</p>\n\n<p>On the other hand, I could just use the merged hash and this would work albeit with slightly more cumbersome notations:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class CompMedia\n    attr_accessor :merged_h\n\n    def initialize(hash)\n        defaults = {a: {dc: 2}, dd: {de: 4}}\n      @merged_h = {}\n      deep_update(merged_h, defaults)\n      deep_update(merged_h, hash)\n      @merged_h\n    end\n\n    def deep_update(dest, src)\n      src.each do |key, value|\n        if value.is_a?(Hash)\n          dest[key] = {} if !dest[key].is_a?(Hash)\n          deep_update(dest[key], value)\n        else\n          dest[key] = value\n        end\n      end\n    end\n\n    def multiply_by(k)\n        merged_h[:a][:dc] * k\n    end\n\nend\n\ninput_hash = {a: {b: 1}}\n\ncm = CompMedia.new(input_hash)\np cm.merged_h           # {:a=&gt;{:dc=&gt;2, :b=&gt;1}, :dd=&gt;{:de=&gt;4}}\np cm.merged_h[:a]       # {:dc=&gt;2, :b=&gt;1}\np cm.merged_h[:a][:dc]  # 2\np cm.merged_h[:dd]      # {:de=&gt;4}\np cm.multiply_by(10)    # 20\n</code></pre>\n\n<p>I will consider the last version as my solution unless someone can make the code with OpenStruct work, which I would prefer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "xml-builder"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1469047351, "post_id": 38490382, "comment_id": 64382589, "body": "Have you tried <code>xml.tag!(&#39;g:id&#39;, p.id)</code>?"}, {"owner": {"reputation": 41, "user_id": 4351893, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e536cb57018260dfd1537489ff9ecdd?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Leslie", "link": "https://stackoverflow.com/users/4351893/grant-leslie"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469047834, "post_id": 38490382, "comment_id": 64382835, "body": "NOPE!  That&#39;s it!  I tried almost everything but that.  Thanks so much, Mladen!"}], "owner": {"reputation": 41, "user_id": 4351893, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e536cb57018260dfd1537489ff9ecdd?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Leslie", "link": "https://stackoverflow.com/users/4351893/grant-leslie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469046945, "creation_date": 1469046945, "question_id": 38490382, "link": "https://stackoverflow.com/questions/38490382/rails-builder-xml-im-changing-namespace-but-the-injected-value-is-removed", "title": "rails builder xml: I&#39;m changing namespace but the injected value is removed?", "body": "<p>So I have an xml doc being generated based on product info in rails (using the builder markup (<a href=\"http://builder.rubyforge.org/classes/Builder/XmlMarkup.html\" rel=\"nofollow\">http://builder.rubyforge.org/classes/Builder/XmlMarkup.html</a>), but when I use builders namespace syntax, the value I want to print is absent.  Here's the code:</p>\n\n<pre><code>xml.tag!(\"rrs\", {\"xmlns:g\"=&gt;\"http://base.google.com/ns/1.0\"}) do\n @products.each do |p|\n   xml.item do\n     xml.id p.id                  # This works and prints: &lt;id&gt;123&lt;/id&gt;\n     xml.tag!(\"g:id\") { p.id }    # This DOESN'T work and prints: &lt;g:id&gt;&lt;/g:id&gt;\n    end\n  end\nend \n</code></pre>\n\n<p>Notice that the p.id isn't printed when I use the .tag! as the docs say to. </p>\n\n<p>Is this a simple syntax issue I'm screwing up?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-2", "ruby-2.3"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469047737, "post_id": 38490319, "comment_id": 64382794, "body": "try <code>super(*args)</code> instead"}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469049128, "post_id": 38490319, "comment_id": 64383435, "body": "It tried it. Updated question with results."}], "answers": [{"comments": [{"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1469115860, "post_id": 38492217, "comment_id": 64415266, "body": "I tried passing <code>field, *args</code>, but unfortunately this code will not run on ruby &gt;= <code>2.1</code> apparently. Passing the arguments explicitly simply gives a <code>Stack Level Too Deep</code> error. So there is no way to make this old 2.3 application run on a newer version of ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469153849, "post_id": 38492217, "comment_id": 64430733, "body": "I especially appreciate the last sentence. I was wondering about that."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1469055481, "creation_date": 1469055481, "answer_id": 38492217, "question_id": 38490319, "link": "https://stackoverflow.com/questions/38490319/how-can-i-change-this-super-call-to-pass-the-arguments-explicitly/38492217#38492217", "title": "How can I change this super call to pass the arguments explicitly?", "body": "<p><code>super</code> without an argument list resends the current message, starting message dispatch at the superclass, passing along the exact same arguments that were passed to the current method.</p>\n\n<p>In your case, the arguments being passed to the current method are <code>(field, *args)</code>, so <code>super</code> without an argument list would pass along <code>(field, *args)</code>, but unfortunately <code>super</code> without an argument list doesn't work inside <code>define_method</code>, so you have to pass along the arguments explicitly using <code>super(field, *args)</code>.</p>\n\n<p>This will call the method with the name given by <code>name</code> in the superclass passing along <code>(field, *args)</code> just as if you had called <code>super</code> without an argument list.</p>\n\n<blockquote>\n  <p>Looking at the code, I'm not sure how to change it.</p>\n</blockquote>\n\n<p>Simple: since <code>super</code> without an argument list implicitly passes along the arguments exactly as they were passed, the <em>explicit</em> equivalent to that is to just copy&amp;paste the parameter list from the method definition into the argument list of <code>super</code>. In this case the method definition is <code>define_method(name) do |field, *args| \u2026 end</code>, so the parameter list is <code>(field, *args)</code>, and you just copy that into the argument list for <code>super</code>: <code>super(field, *args)</code>.</p>\n\n<p>It may or may not be possible (and desirable) to pass <em>different</em> arguments, depending on how the method is designed, and how you process the arguments, but this <em>always</em> works. (Or, put it another way: if this doesn't work, then the original code using just <code>super</code> also doesn't work. The only exception is when you want to pass along a block and you don't capture that block into a <code>Proc</code>, you will have to modify the method signature to add an <code>&amp;blk</code> parameter.)</p>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1762, "favorite_count": 0, "accepted_answer_id": 38492217, "answer_count": 1, "score": 0, "last_activity_date": 1469057407, "creation_date": 1469046719, "last_edit_date": 1469057407, "question_id": 38490319, "link": "https://stackoverflow.com/questions/38490319/how-can-i-change-this-super-call-to-pass-the-arguments-explicitly", "title": "How can I change this super call to pass the arguments explicitly?", "body": "<p>I'm running a legacy <code>Rails 2.3</code> (yes, I know) application on a new VM. It's running <code>Ruby v2.3.1</code>. I've made all of the recommended changes to get this old app running on this version. Everything runs great, and much faster, except for this code. This code is from the old <code>Advanced Recipes for Rails</code> book and is <code>error_handling_form_builder.rb</code>.</p>\n\n<p>First, here's the form declaration:</p>\n\n<pre><code>&lt;% form_for(:review, :builder =&gt; ErrorHandlingFormBuilder) do |f| %&gt;\n    &lt;%= f.collection_select :system_id, @systems, :id, :name, { :include_blank =&gt; \"Select a Standard\"}, { :onchange =&gt; remote_function(:url =&gt; { :action =&gt; :makes }, :submit =&gt; :text, :method =&gt; 'post') } %&gt;\n    &lt;div id=\"categoriesdiv\"&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This code works fine if I remove the builder param. Here's the code from <code>ErrorHandlingFormBuilder</code>:</p>\n\n<pre><code>helpers = field_helpers +\n          %w(date_select datetime_select calendar_date_select time_select collection_select) +\n          %w(collection_select select country_select time_zone_select) -\n          %w(label fields_for)\n\nhelpers.each do |name|\n  # We don't want to have a label for a hidden field\n  next if name==\"hidden_field\"\n  define_method name do |field, *args|\n    options = args.detect {|argument| argument.is_a?(Hash)} || {}\n    build_shell(field, options) do\n      super # This call fails\n    end\n  end\nend\n</code></pre>\n\n<p>The call to <code>super</code> above fails with following error:</p>\n\n<pre><code>implicit argument passing of super from method defined by define_method()\nis not supported. Specify all arguments explicitly.\n</code></pre>\n\n<p>Looking at the code, I'm not sure how to change it.</p>\n\n<p>I know I have to call super with the explicit arguments, but I tried this:</p>\n\n<pre><code>super(field, options)\n</code></pre>\n\n<p>and I get:</p>\n\n<pre><code>wrong number of arguments (given 2, expected 4..6)\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>build_shell(field, options) do\n  super(*args)\nend\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>undefined method `map' for :id:Symbol\nDid you mean?  tap\n</code></pre>\n\n<p>It seems like it's looking for the <code>collection</code> attribute 2nd in the list of <code>*args</code>. But it's first. If i pass <code>field</code> as the first argument though, I get a <code>Stack Level Too Deep</code>.</p>\n"}, {"tags": ["ruby", "algorithm", "knapsack-problem"], "comments": [{"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "edited": false, "score": 0, "creation_date": 1469051491, "post_id": 38490031, "comment_id": 64384464, "body": "Do you really want <code>sum</code> from the final iteration of <code>bars</code> to compare to <code>capacity</code>? I don&#39;t know the algorithm. Just asking. Maybe <code>bars</code> is arranged a certain way."}, {"owner": {"reputation": 553, "user_id": 3605456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1381440100/picture?type=large", "display_name": "Michael Gabay", "link": "https://stackoverflow.com/users/3605456/michael-gabay"}, "reply_to_user": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "edited": false, "score": 0, "creation_date": 1469058941, "post_id": 38490031, "comment_id": 64386589, "body": "Bars can be any combination of postive integers. For example, 4 1 1 2 1. Each integer represents the weight of the object, they all have equal value. The capacity in this case could be 7."}], "owner": {"reputation": 553, "user_id": 3605456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1381440100/picture?type=large", "display_name": "Michael Gabay", "link": "https://stackoverflow.com/users/3605456/michael-gabay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1469045648, "creation_date": 1469045648, "question_id": 38490031, "link": "https://stackoverflow.com/questions/38490031/how-can-i-improve-this-algorithm-for-a-variation-of-the-unbounded-knapsack-in-ru", "title": "How can I improve this algorithm for a variation of the unbounded knapsack in Ruby", "body": "<p>The problem is a variation of the unbounded knapsack problem, where you have items of equal value but different weights. This algorithm solves the problem, but I would like to optimize its performance. Does anyone have any recommendations?</p>\n\n<pre><code>def knapsack(capacity, bars)\n    if capacity == 0 || bars.nil? || bars[0].nil?\n        return 0\n    end\n\n    solutions = []\n    sum = 0\n    (1..capacity).each do |i|\n        break if sum &gt; capacity\n        bars.combination(i).lazy.each do |comb|\n            sum = comb.reduce(&amp;:+)\n            solutions &lt;&lt; sum\n        end\n    end\n\n    solutions.select{|i| i &lt;= capacity}.max\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "json", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1469050272, "post_id": 38489950, "comment_id": 64383937, "body": "We&#39;d like to see your effort toward solving this. Without that it looks like you haven&#39;t written anything and want us to do it, which is off-topic for SO. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 1964320, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3c2ad4841578dac172935bfb2cdeba3?s=128&d=identicon&r=PG", "display_name": "Curious_Bop", "link": "https://stackoverflow.com/users/1964320/curious-bop"}, "edited": false, "score": 0, "creation_date": 1469047778, "post_id": 38490122, "comment_id": 64382809, "body": "apologies that was my mistake when I was fudging the response data. I can successfully parse but what I want to do is now pull specific values out of the parsed response"}], "tags": [], "owner": {"reputation": 28208, "user_id": 630654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7cb81a13e53fb639079a2c0a93a737c?s=128&d=identicon&r=PG", "display_name": "Candide", "link": "https://stackoverflow.com/users/630654/candide"}, "is_accepted": false, "score": 0, "last_activity_date": 1469045962, "creation_date": 1469045962, "answer_id": 38490122, "question_id": 38489950, "link": "https://stackoverflow.com/questions/38489950/ruby-iterate-through-json-response-and-return-values/38490122#38490122", "title": "Ruby iterate through JSON response and return values", "body": "<p>The value <code>54a52</code> is not valid. You probably need to ecapsulate it in quotations <code>\"54a52\"</code>. If you change that, it will parse the string correctly.</p>\n\n<pre><code>JSON.parse('{\"summary\":{\"Id\":\"54a52\",\"IdOutcome\":\"Scored\",\"Results\":[{\"test\":\"car\",\"value\":10.0,\"num\":0},{\"test\":\"carz\",\"value\":0.0,\"num\":0},{\"test\":\"bars\",\"value\":10.0,\"num\":1}]}}')\n=&gt; {\"summary\"=&gt;{\"Id\"=&gt;\"54a52\", \"IdOutcome\"=&gt;\"Scored\", \"Results\"=&gt;[{\"test\"=&gt;\"car\", \"value\"=&gt;10.0, \"num\"=&gt;0}, {\"test\"=&gt;\"carz\", \"value\"=&gt;0.0, \"num\"=&gt;0}, {\"test\"=&gt;\"bars\", \"value\"=&gt;10.0, \"num\"=&gt;1}]}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 0, "last_activity_date": 1469049649, "creation_date": 1469049649, "answer_id": 38491051, "question_id": 38489950, "link": "https://stackoverflow.com/questions/38489950/ruby-iterate-through-json-response-and-return-values/38491051#38491051", "title": "Ruby iterate through JSON response and return values", "body": "<p>You want to use <code>Enumerable#max_by</code>:</p>\n\n<pre><code>max_result = data[\"summary\"][\"Results\"].max_by {|r| r[\"num\"] }\n# =&gt; { \"test\" =&gt; \"bars\",\n#      \"value\" =&gt; 10.0,\n#      \"num\" =&gt; 1\n#    }\n\nmax_result[\"test\"]\n# =&gt; \"bars\"\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 1964320, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3c2ad4841578dac172935bfb2cdeba3?s=128&d=identicon&r=PG", "display_name": "Curious_Bop", "link": "https://stackoverflow.com/users/1964320/curious-bop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 38491051, "answer_count": 2, "score": -1, "last_activity_date": 1469049649, "creation_date": 1469045393, "last_edit_date": 1469049228, "question_id": 38489950, "link": "https://stackoverflow.com/questions/38489950/ruby-iterate-through-json-response-and-return-values", "title": "Ruby iterate through JSON response and return values", "body": "<p>I am trying to iterate through JSON and I keep falling foul of the following error:</p>\n\n<pre><code>no implicit conversion of String into Integer (TypeError)\n</code></pre>\n\n<p>What I want to do is iterate through my response and based my rules return a segment of data. My response is as follows:</p>\n\n<pre><code>data = JSON.parse(response)\n\ndata = (whats below)\n\n{\n        \u201csummary\u201d: {\n          \u201cId\u201d: 5452,\n          \u201cIdOutcome\u201d: \"Scored\",\n          \u201cResults\u201d: [\n            {\n              \u201ctest\u201d: \"car\",\n              \u201cvalue\u201d: 10.0,\n              \u201cnum\u201d: 0\n            },\n            {\n              \u201ctest\u201d: \"carz\",\n              \u201cvalue\u201d: 0.0,\n              \u201cnum\u201d: 0\n            },\n            {\n              \u201ctest\u201d: \"bars\",\n              \u201cvalue\u201d: 10.0,\n              \u201cnum\u201d: 1\n            }\n          ]\n        }\n      }\n</code></pre>\n\n<p>So in the example response above I want to iterate through \"Results\" and return back either \"test\" or heck even all of the block for the highest num value. So in the example below I would be returned</p>\n\n<pre><code>\"bars\",\n10.0,\n1\n</code></pre>\n\n<p>or just </p>\n\n<pre><code>\"bars\"\n</code></pre>\n\n<p>SO essentially I just need to iterate through the returned array data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "comments": [{"owner": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1469045663, "post_id": 38489945, "comment_id": 64381681, "body": "Have you try in this way? <a href=\"http://stackoverflow.com/questions/24496657/rails-remove-controller-path-from-the-url\" title=\"rails remove controller path from the url\">stackoverflow.com/questions/24496657/&hellip;</a>"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "reply_to_user": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1469046810, "post_id": 38489945, "comment_id": 64382301, "body": "I saw that post, but I didn&#39;t really understand it. I&#39;ll put more time into comprehending, but I&#39;m kind of looking for a reference on the concept. I looked through the rails docs, but didn&#39;t see something that resembled what I want."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469046663, "post_id": 38490029, "comment_id": 64382219, "body": "What about the other views?"}], "tags": [], "owner": {"reputation": 1, "user_id": 6615598, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/75bd90627e37ab3503e384e8f3184df0?s=128&d=identicon&r=PG", "display_name": "user6615598", "link": "https://stackoverflow.com/users/6615598/user6615598"}, "is_accepted": false, "score": -1, "last_activity_date": 1469046379, "last_edit_date": 1469046379, "creation_date": 1469045646, "answer_id": 38490029, "question_id": 38489945, "link": "https://stackoverflow.com/questions/38489945/rails-remove-controller-from-url/38490029#38490029", "title": "Rails: Remove Controller from URL", "body": "<p>I would just replace it with this:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root '#index'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469048995, "post_id": 38490194, "comment_id": 64383375, "body": "How would I link this?"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 1, "creation_date": 1469049795, "post_id": 38490194, "comment_id": 64383723, "body": "<code>&lt;%= link_to &quot;text&quot;, services_path %&gt;</code>, you can run <code>rake routes &gt; routing.log</code> and then <code>vi routing.log</code>. in the log, you can find path name."}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469049970, "post_id": 38490194, "comment_id": 64383798, "body": "Got it! I had it right, but it wasn&#39;t until I noticed that I didn&#39;t change all of the paths, that it worked. Thanks!"}], "tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": true, "score": 5, "last_activity_date": 1469047696, "last_edit_date": 1469047696, "creation_date": 1469046202, "answer_id": 38490194, "question_id": 38489945, "link": "https://stackoverflow.com/questions/38489945/rails-remove-controller-from-url/38490194#38490194", "title": "Rails: Remove Controller from URL", "body": "<p>Try this: </p>\n\n<pre><code>match 'services' =&gt; \"pages#services\", :as =&gt; :services\n</code></pre>\n\n<p>You can specify a name for any route using the :as option.</p>\n\n<p>See <a href=\"http://guides.rubyonrails.org/routing.html#naming-routes\">here</a></p>\n"}], "owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 1, "accepted_answer_id": 38490194, "answer_count": 2, "score": 0, "last_activity_date": 1469047696, "creation_date": 1469045370, "question_id": 38489945, "link": "https://stackoverflow.com/questions/38489945/rails-remove-controller-from-url", "title": "Rails: Remove Controller from URL", "body": "<p>I've read a couple of posts, but I haven't found a clear solution.</p>\n\n<p>I want to remove the controller from the URL. I'm getting this: </p>\n\n<pre><code>localhost:3000/pages/services\n</code></pre>\n\n<p>But I want this:</p>\n\n<pre><code>localhost:3000/services\n</code></pre>\n\n<p>This is my routes file right now:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'pages#index'\n\n  get 'pages/services'\n\n  get 'pages/specials'\n\n  get 'pages/events'\n\n  get 'pages/about'\n\nend\n</code></pre>\n\n<p>I suspect that I need to do something here, but I haven't been able to find a decent tutorial. Any suggestions?</p>\n"}, {"tags": ["ruby", "methods", "rails-activerecord"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469046578, "post_id": 38489896, "comment_id": 64382167, "body": "Use simply <code>B.find_by</code>."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1469046593, "post_id": 38489896, "comment_id": 64382177, "body": "I&#39;m not totally sure I understand your question, but <code>#find_by</code> is only going to return one record. You probably want to use <code>#where</code>"}], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1469051832, "creation_date": 1469051832, "answer_id": 38491527, "question_id": 38489896, "link": "https://stackoverflow.com/questions/38489896/calling-a-class-method-from-a-class-with-a-has-many-relationship/38491527#38491527", "title": "Calling a class method from a class with a has many relationship", "body": "<p>Not fully understood but I think, you need to use <code>#where</code> and <code>#update_all</code> instead of <code>#find_by</code> and <code>#update_attribute</code>. Something like</p>\n\n<pre><code>self.bs.where(identifier: b_identifier).update_all(attribute: update)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6552873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deaa107b001e177e4742c65f9b66e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Devon", "link": "https://stackoverflow.com/users/6552873/devon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469051832, "creation_date": 1469045213, "last_edit_date": 1469046420, "question_id": 38489896, "link": "https://stackoverflow.com/questions/38489896/calling-a-class-method-from-a-class-with-a-has-many-relationship", "title": "Calling a class method from a class with a has many relationship", "body": "<p>I have two classes, <code>A</code> and <code>B</code>.  B belongs to A and A has many Bs.</p>\n\n<p>I want to call a method in A that affects multiple, but not necessarily all of the instances of B that belong to it.  </p>\n\n<p>I attempted to put the method in B and call it like this:</p>\n\n<pre><code>class A\n\n    has_many :bs\n\n    def method_to_update_many(array_of_the_many_attributes)\n        array_of_the_many_attributes.each{ |n| self.bs.find_by(attribute:n).method_to_edit(update)\n    end\nend\n\n\nclass B\n\n    belongs_to :a\n\n    def method_to_edit(update)\n\n    update_attribute(:attribute, update)\n\n    end\n\n   end\n</code></pre>\n\n<p>and by putting the method in A like this:</p>\n\n<pre><code>class A\n    has_many :bs\n    def update_a_b(b_identifier, update)\n        the_b = self.bs.find_by(identifier: b_identifier)\n        the_b.update_attribute(:attribute, update)\n    end\nend\n\nclass b\n    belongs_to :a\nend\n</code></pre>\n\n<p>It seems that everything I try fails because B is accessed through a CollectionProxy when called in relation to A. </p>\n"}, {"tags": ["ruby", "bigdecimal", "floating-accuracy"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469045002, "post_id": 38489547, "comment_id": 64381317, "body": "Is your question why the BigDecimal gives the error, or why the Float doesn&#39;t?"}, {"owner": {"reputation": 320, "user_id": 312163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20bffe332e5534f3ea328698ecb0a938?s=128&d=identicon&r=PG", "display_name": "Phil R", "link": "https://stackoverflow.com/users/312163/phil-r"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469045768, "post_id": 38489547, "comment_id": 64381737, "body": "Why does BigDecimal give the error?  And does this example mean that we can no longer trust BigDecimal with our floating point calculations?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1469046570, "post_id": 38489547, "comment_id": 64382163, "body": "See <a href=\"http://stackoverflow.com/q/588004/128421\">stackoverflow.com/q/588004/128421</a>. You misunderstand floating point math."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469206165, "post_id": 38489547, "comment_id": 64457102, "body": "FWIW, if you can, first multiply before you divide: <code>BigDecimal(&quot;50&quot;) * BigDecimal(&quot;0.6&quot;) * BigDecimal(&quot;33&quot;) &#47; BigDecimal(&quot;360&quot;)</code> and you get your desired result. The answer by @Mladen already tells you why you don&#39;t get an exact result if you do it your way. If you first multiply, <b>the chances are higher</b> you get an exact result. The line above does <code>990 &#47; 360</code> (or <code>(11 * 90) &#47; (4 * 90)</code>), which does not produce any repeating decimals."}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1469047312, "post_id": 38490150, "comment_id": 64382573, "body": "Since 2.1 the <code>r</code> suffix can be used: <code>50r * Rational(0.6) &#47; 360r * 33r</code>."}, {"owner": {"reputation": 320, "user_id": 312163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20bffe332e5534f3ea328698ecb0a938?s=128&d=identicon&r=PG", "display_name": "Phil R", "link": "https://stackoverflow.com/users/312163/phil-r"}, "edited": false, "score": 0, "creation_date": 1469048274, "post_id": 38490150, "comment_id": 64383064, "body": "Thank you Mladen.  I&#39;m writing a financial app, and considered all the following types for representing money:  * Integer, storing amounts in cents: no good because we need to be able to store fractions of a cent.  * Money gem: uses integer, so same problem as integer.  * Float: prone to floating point errors.  * BigDecimal: less prone to floating point errors (but now I find, still prone to errors in one of our use cases!)  Maybe Rational is the answer then.."}, {"owner": {"reputation": 320, "user_id": 312163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20bffe332e5534f3ea328698ecb0a938?s=128&d=identicon&r=PG", "display_name": "Phil R", "link": "https://stackoverflow.com/users/312163/phil-r"}, "edited": false, "score": 1, "creation_date": 1469051606, "post_id": 38490150, "comment_id": 64384503, "body": "Another solution which seems to work for me: BigDecimal(&quot;50&quot;) * BigDecimal(&quot;0.6&quot;) * BigDecimal(&quot;33&quot;) / BigDecimal(&quot;360&quot;) This is based on a comment in the thread that Jordan marked this a duplicate of: Actually, the key to doing such calculations accurately isn&#39;t using fixed-point arithmetic, but rather arranging calculations to avoid having to round values which are going to be scaled up. For example, to charge someone for 17 days of a 30 day month, multiply the monthly amount by 17 and then divide by 30, rather than dividing by 30 and multiplying by 17. \u2013 supercat Oct 1 &#39;14 at 15:13"}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": true, "score": 3, "last_activity_date": 1469046065, "creation_date": 1469046065, "answer_id": 38490150, "question_id": 38489547, "link": "https://stackoverflow.com/questions/38489547/floating-point-error-in-rubys-bigdecimal-class/38490150#38490150", "title": "floating point error in Ruby&#39;s BigDecimal class?", "body": "<p>Let's simplify your example, and use this one instead:</p>\n\n<pre><code>BigDecimal(1) / BigDecimal(3) * BigDecimal(3)\n# =&gt; #&lt;BigDecimal:19289d8,'0.9999999999 99999999E0',18(36)&gt;\n</code></pre>\n\n<p>How did it get there?</p>\n\n<pre><code>BigDecimal(1) / BigDecimal(3)\n# =&gt; #&lt;BigDecimal:1921a70,'0.3333333333 33333333E0',18(36)&gt;\n</code></pre>\n\n<p>BigDecimal does not provide rational numbers, so when you divide 1 by 3, you get 0, following by a lot of 3s. A lot, but not infinitely many. When you then multiply that by 3, you will get 0 followed by equally many 9s.</p>\n\n<p>I believe you misread the BigDecimal's advertisement (although I am not sure it is anywhere advertised as the solution to floating point errors). It just provides arbitrary precision. It is still a floating point number. If you really want exact numbers when dividing numbers, you might take a look at <code>Rational</code> class:</p>\n\n<pre><code>(Rational(50) * Rational(0.6) / Rational(360) * Rational(33)).to_f\n# =&gt; 2.75\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 312163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20bffe332e5534f3ea328698ecb0a938?s=128&d=identicon&r=PG", "display_name": "Phil R", "link": "https://stackoverflow.com/users/312163/phil-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "closed_date": 1469049689, "accepted_answer_id": 38490150, "answer_count": 1, "score": 1, "last_activity_date": 1469046680, "creation_date": 1469043937, "last_edit_date": 1469046680, "question_id": 38489547, "link": "https://stackoverflow.com/questions/38489547/floating-point-error-in-rubys-bigdecimal-class", "closed_reason": "Duplicate", "title": "floating point error in Ruby&#39;s BigDecimal class?", "body": "<p>The universal advice to avoid floating point errors in ruby is to use BigDecimal.  I must be overlooking something, because I think I've found a case where BigDecimal math is returning an error where a Float does not:</p>\n\n<p>using Float gives the correct answer of 2.75:</p>\n\n<pre><code>&gt; 50.0 * 0.6 / 360.0 * 33\n=&gt; 2.75\n</code></pre>\n\n<p>using BigDecimal gives the incorrect answer of 2.74999999:</p>\n\n<pre><code>&gt; BigDecimal(\"50\") * BigDecimal(\"0.6\") / BigDecimal(\"360\") * BigDecimal(\"33\")\n=&gt; #&lt;BigDecimal:7efe74824c80,'0.2749999999 999999989E1',27(36)&gt;\n</code></pre>\n\n<p>Someone please tell me what I'm missing here?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "capistrano", "capistrano3", "ruby-2.3"], "comments": [{"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 0, "creation_date": 1469050777, "post_id": 38489364, "comment_id": 64384167, "body": "Could you post your deploy.rb?"}], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1469054335, "creation_date": 1469054335, "answer_id": 38492031, "question_id": 38489364, "link": "https://stackoverflow.com/questions/38489364/cannot-deploy-with-capistrano-3-5-0-after-upgrade-to-ruby-2-3-1p112-2016-04-26/38492031#38492031", "title": "Cannot deploy with Capistrano 3.5.0 after upgrade to Ruby 2.3.1p112 (2016-04-26 revision 54768)", "body": "<p>OK, this is really weird but after I deleted by /opt/app_name/* folder and redeployed this started working.  Sorry to have posted silly question.  </p>\n"}], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469054335, "creation_date": 1469043302, "last_edit_date": 1469047350, "question_id": 38489364, "link": "https://stackoverflow.com/questions/38489364/cannot-deploy-with-capistrano-3-5-0-after-upgrade-to-ruby-2-3-1p112-2016-04-26", "title": "Cannot deploy with Capistrano 3.5.0 after upgrade to Ruby 2.3.1p112 (2016-04-26 revision 54768)", "body": "<p>Worked with Ruby 2.1. This happens only when deploying to multiple servers at once. Server is Ubuntu 14.04. Rails 4.2.6. Same behaviour with Cap 3.2 and master.</p>\n\n<p>It is creating log symlink inside log folder instead of inside main app folder.  Same is for log/log, public/system/system, tmp/sockets/sockets, tmp/pids/pids, tmp/cache/cache, vendor/bundle/bundle</p>\n\n<p>Has anyone experienced this?  Any advice would be appreciated.  </p>\n\n<p>my gemfile</p>\n\n<pre><code>gem 'capistrano', '3.5.0'\ngem 'capistrano-sidekiq'\ngem 'capistrano-rvm'\ngem 'capistrano-bundler'\ngem 'capistrano-scm-copy'\n</code></pre>\n\n<p>Detailed errors</p>\n\n<pre><code>cap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as ubuntu@stg1.server.com: ln exit status: 1\nln stdout: Nothing written\nln stderr: ln: failed to create symbolic link \u2018/opt/.../releases/20160720180448/log/log\u2019: File exists\nSSHKit::Command::Failed: ln exit status: 1\nln stdout: Nothing written\nln stderr: ln: failed to create symbolic link \u2018/opt/.../releases/20160720180448/log/log\u2019: File exists\nTasks: TOP =&gt; deploy:symlink:linked_dirs\n(See full trace by running task with --trace)\nThe deploy has failed with an error: Exception while executing as ubuntu@stg1.server.com: ln exit status: 1\nln stdout: Nothing written\nln stderr: ln: failed to create symbolic link \u2018/opt/.../releases/20160720180448/log/log\u2019: File exists\n\n** DEPLOY FAILED\n** Refer to log/capistrano.log for details. Here are the last 20 lines:\n</code></pre>\n\n<p>capistrano.log</p>\n\n<pre><code>INFO [87787bde] Finished in 5.780 seconds with exit status 0 (successful).\nINFO [70bb86bb] Running ~/.rvm/bin/rvm 2.3.1 do bundle exec rake assets:clean as dmitry@localhost\nINFO [70bb86bb] Finished in 17.418 seconds with exit status 0 (successful).\nINFO [1812e625] Running ~/.rvm/bin/rvm 2.3.1 do bundle exec rake assets:precompile as dmitry@localhost\nINFO [1812e625] Finished in 56.384 seconds with exit status 0 (successful).\nINFO [bcc87542] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared /opt/amplo/stg/releases as ubuntu@stg1.server.com\nINFO [3c49af83] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared /opt/amplo/stg/releases as ubuntu@stg2.server.com\nINFO [ab6ee55a] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared /opt/amplo/stg/releases as ubuntu@stg3.server.com\nINFO [3c49af83] Finished in 0.433 seconds with exit status 0 (successful).\nINFO [ab6ee55a] Finished in 0.477 seconds with exit status 0 (successful).\nINFO [bcc87542] Finished in 0.479 seconds with exit status 0 (successful).\nINFO [d0a5aafb] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared/log /opt/amplo/stg/shared/tmp/pids /opt/amplo/stg/shared/tmp/cache /opt/amplo/stg/shared/tmp/sockets /opt/amplo/stg/shared/vendor/bundle /opt/amplo/stg/shared/public/system as ubuntu@stg2.server.com\nINFO [036d4589] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared/log /opt/amplo/stg/shared/tmp/pids /opt/amplo/stg/shared/tmp/cache /opt/amplo/stg/shared/tmp/sockets /opt/amplo/stg/shared/vendor/bundle /opt/amplo/stg/shared/public/system as ubuntu@stg1.server.com\nINFO [69145663] Running /usr/bin/env mkdir -p /opt/amplo/stg/shared/log /opt/amplo/stg/shared/tmp/pids /opt/amplo/stg/shared/tmp/cache /opt/amplo/stg/shared/tmp/sockets /opt/amplo/stg/shared/vendor/bundle /opt/amplo/stg/shared/public/system as ubuntu@stg3.server.com\nINFO [d0a5aafb] Finished in 0.038 seconds with exit status 0 (successful).\nINFO [69145663] Finished in 0.039 seconds with exit status 0 (successful).\nINFO [036d4589] Finished in 0.042 seconds with exit status 0 (successful).\nINFO [791ddedf] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 as ubuntu@stg2.server.com\nINFO [01ac821d] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 as ubuntu@stg3.server.com\nINFO [3a5af02f] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 as ubuntu@stg1.server.com\nINFO [3a5af02f] Finished in 0.028 seconds with exit status 0 (successful).\nINFO [01ac821d] Finished in 0.031 seconds with exit status 0 (successful).\nINFO [791ddedf] Finished in 0.031 seconds with exit status 0 (successful).\nINFO Uploading archive.tar.gz 10.02%\nINFO Uploading archive.tar.gz 10.02%\nINFO Uploading archive.tar.gz 10.02%\nINFO Uploading archive.tar.gz 20.05%\nINFO Uploading archive.tar.gz 30.01%\nINFO Uploading archive.tar.gz 20.05%\nINFO Uploading archive.tar.gz 20.05%\nINFO Uploading archive.tar.gz 40.03%\nINFO Uploading archive.tar.gz 30.01%\nINFO Uploading archive.tar.gz 30.01%\nINFO Uploading archive.tar.gz 50.05%\nINFO Uploading archive.tar.gz 40.03%\nINFO Uploading archive.tar.gz 60.02%\nINFO Uploading archive.tar.gz 50.05%\nINFO Uploading archive.tar.gz 40.03%\nINFO Uploading archive.tar.gz 70.04%\nINFO Uploading archive.tar.gz 60.02%\nINFO Uploading archive.tar.gz 50.05%\nINFO Uploading archive.tar.gz 80.01%\nINFO Uploading archive.tar.gz 70.04%\nINFO Uploading archive.tar.gz 90.03%\nINFO Uploading archive.tar.gz 80.01%\nINFO Uploading archive.tar.gz 60.02%\nINFO Uploading archive.tar.gz 100.0%\nINFO [5b4b855e] Running /usr/bin/env tar -xzf /tmp/tmp.kv2Vm4c575 -C /opt/amplo/stg/releases/20160720191724 as ubuntu@stg3.server.com\nINFO Uploading archive.tar.gz 90.03%\nINFO [5b4b855e] Finished in 0.614 seconds with exit status 0 (successful).\nINFO [ef4235a4] Running /usr/bin/env rm /tmp/tmp.kv2Vm4c575 as ubuntu@stg3.server.com\nINFO [ef4235a4] Finished in 0.080 seconds with exit status 0 (successful).\nINFO Uploading archive.tar.gz 70.04%\nINFO Uploading archive.tar.gz 100.0%\nINFO [13660674] Running /usr/bin/env tar -xzf /tmp/tmp.xNKgZ200Pm -C /opt/amplo/stg/releases/20160720191724 as ubuntu@stg1.server.com\nINFO [13660674] Finished in 0.596 seconds with exit status 0 (successful).\nINFO [51117c6c] Running /usr/bin/env rm /tmp/tmp.xNKgZ200Pm as ubuntu@stg1.server.com\nINFO [51117c6c] Finished in 0.047 seconds with exit status 0 (successful).\nINFO Uploading archive.tar.gz 80.01%\nINFO Uploading archive.tar.gz 90.03%\nINFO Uploading archive.tar.gz 100.0%\nINFO [e6e1a785] Running /usr/bin/env tar -xzf /tmp/tmp.uJQfuNoStV -C /opt/amplo/stg/releases/20160720191724 as ubuntu@stg2.server.com\nINFO [e6e1a785] Finished in 0.559 seconds with exit status 0 (successful).\nINFO [96bb1493] Running /usr/bin/env rm /tmp/tmp.uJQfuNoStV as ubuntu@stg2.server.com\nINFO [96bb1493] Finished in 0.038 seconds with exit status 0 (successful).\nINFO [d95f701a] Running /usr/bin/env echo \"\" &gt;&gt; REVISION as ubuntu@stg2.server.com\nINFO [92fc67ba] Running /usr/bin/env echo \"\" &gt;&gt; REVISION as ubuntu@stg3.server.com\nINFO [a5752527] Running /usr/bin/env echo \"\" &gt;&gt; REVISION as ubuntu@stg1.server.com\nINFO [d95f701a] Finished in 0.026 seconds with exit status 0 (successful).\nINFO [92fc67ba] Finished in 0.031 seconds with exit status 0 (successful).\nINFO [a5752527] Finished in 0.028 seconds with exit status 0 (successful).\nINFO [214b97cd] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 /opt/amplo/stg/releases/20160720191724/tmp /opt/amplo/stg/releases/20160720191724/vendor /opt/amplo/stg/releases/20160720191724/public as ubuntu@stg1.server.com\nINFO [4dd15166] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 /opt/amplo/stg/releases/20160720191724/tmp /opt/amplo/stg/releases/20160720191724/vendor /opt/amplo/stg/releases/20160720191724/public as ubuntu@stg2.server.com\nINFO [c4aa42d6] Running /usr/bin/env mkdir -p /opt/amplo/stg/releases/20160720191724 /opt/amplo/stg/releases/20160720191724/tmp /opt/amplo/stg/releases/20160720191724/vendor /opt/amplo/stg/releases/20160720191724/public as ubuntu@stg3.server.com\nINFO [4dd15166] Finished in 0.032 seconds with exit status 0 (successful).\nINFO [214b97cd] Finished in 0.031 seconds with exit status 0 (successful).\nINFO [c4aa42d6] Finished in 0.034 seconds with exit status 0 (successful).\nINFO [a0e1582d] Running /usr/bin/env ln -s /opt/amplo/stg/shared/log /opt/amplo/stg/releases/20160720191724/log as ubuntu@stg2.server.com\nINFO [ff0ea545] Running /usr/bin/env ln -s /opt/amplo/stg/shared/log /opt/amplo/stg/releases/20160720191724/log as ubuntu@stg1.server.com\nINFO [fae235dc] Running /usr/bin/env ln -s /opt/amplo/stg/shared/log /opt/amplo/stg/releases/20160720191724/log as ubuntu@stg3.server.com\nINFO [a0e1582d] Finished in 0.028 seconds with exit status 0 (successful).\nINFO [fae235dc] Finished in 0.030 seconds with exit status 0 (successful).\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1469043261, "post_id": 38489293, "comment_id": 64380327, "body": "Please post code as <b>plain text</b> in the body of your question. Adding it as an image makes it very difficult for people to adapt your code to an answer, you can&#39;t copy-paste it, and it&#39;s hostile to those dependent on screen-readers."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1469043301, "creation_date": 1469043301, "answer_id": 38489362, "question_id": 38489293, "link": "https://stackoverflow.com/questions/38489293/how-can-i-call-methods-from-a-class-in-ruby/38489362#38489362", "title": "How can I call methods from a class in Ruby?", "body": "<p>Whenever you need to print something:</p>\n\n<pre><code>temp = Celcius.new(120)\n\nputs temp.to_s\n</code></pre>\n\n<p>Now <code>puts</code> likes to convert things to string, and <code>to_s</code> is the default way of doing this, so this should work:</p>\n\n<pre><code>puts temp\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6332345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469044027, "creation_date": 1469043078, "last_edit_date": 1469044027, "question_id": 38489293, "link": "https://stackoverflow.com/questions/38489293/how-can-i-call-methods-from-a-class-in-ruby", "title": "How can I call methods from a class in Ruby?", "body": "<p>How can I print this method from the class? </p>\n\n<p>I'm new to Ruby so I'm not sure who to print this. I essentially need to enter a number into this method and print. </p>\n\n<p>Similar to a JS function, I know I must use <code>puts</code>, but that's pretty much about it. </p>\n\n<pre><code>class Celcius\n  def initialize(temperature)\n    @temperature = temperature\n  end\n\n  def fahrenheit\n    (@temperature * 1.8 + 32).round\n  end\n\n  def to_s\n    \"#{@temperature} degrees C\"\n  end\nend \n</code></pre>\n"}, {"tags": ["python", "ruby", "avro"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 692896, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d40ce87af84c994a62f0414b991314ff?s=128&d=identicon&r=PG", "display_name": "mottosan", "link": "https://stackoverflow.com/users/692896/mottosan"}, "is_accepted": true, "score": 0, "last_activity_date": 1469048479, "creation_date": 1469048479, "answer_id": 38490778, "question_id": 38489137, "link": "https://stackoverflow.com/questions/38489137/write-avro-in-ruby-and-read-in-python/38490778#38490778", "title": "Write Avro in ruby and read in Python", "body": "<p>Modifying the code this way solved the problem</p>\n\n<pre><code>bytes_reader = io.BytesIO(msg.value)\nreader = DataFileReader(bytes_reader, DatumReader())\nfor r in reader:\n    print r\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 692896, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d40ce87af84c994a62f0414b991314ff?s=128&d=identicon&r=PG", "display_name": "mottosan", "link": "https://stackoverflow.com/users/692896/mottosan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 38490778, "answer_count": 1, "score": 1, "last_activity_date": 1469048479, "creation_date": 1469042534, "question_id": 38489137, "link": "https://stackoverflow.com/questions/38489137/write-avro-in-ruby-and-read-in-python", "title": "Write Avro in ruby and read in Python", "body": "<p>I'm facing issues trying to decode Avro bytes written in Ruby to a Kafka topic. On eyeballing the avro byte string I can see that it looks fine. But when I try to decode, I get a 'UnicodeDecodeError: 'utf8' codec can't decode byte 0x98 in position 32: invalid start byte'. </p>\n\n<pre><code>import avro.schema\nimport avro.io\nimport io\n\nbytes_reader = io.BytesIO(m.value)\ndecoder = avro.io.BinaryDecoder(bytes_reader)\nreader = avro.io.DatumReader(schema)\nprint reader.read(decoder)\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "linux", "ubuntu", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1469056705, "creation_date": 1469056705, "answer_id": 38492396, "question_id": 38489013, "link": "https://stackoverflow.com/questions/38489013/ubuntu-kernelsystem-fails-returns-nil-when-running-the-unix-hash-command/38492396#38492396", "title": "Ubuntu: Kernel#system fails (returns nil) when running the Unix &quot;hash&quot; command", "body": "<p><code>Kernel#system</code> uses the system shell, i.e. <code>/bin/sh</code> to execute. <code>hash</code> was only added to the Base System in POSIX.2013, before that, it was optional. I believe <code>dash</code>, the default system shell Ubuntu uses is not yet POSIX.2013 compliant, and thus does not have <code>hash</code> (yet).</p>\n\n<p>macOS / OSX uses Bash as its system shell, which <em>does</em> have <code>hash</code>.</p>\n"}], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 38492396, "answer_count": 1, "score": 0, "last_activity_date": 1469056705, "creation_date": 1469042076, "question_id": 38489013, "link": "https://stackoverflow.com/questions/38489013/ubuntu-kernelsystem-fails-returns-nil-when-running-the-unix-hash-command", "title": "Ubuntu: Kernel#system fails (returns nil) when running the Unix &quot;hash&quot; command", "body": "<p>I ran into an interesting problem while developing a gem that only seems to happen on Ubuntu. My Ruby is version 2.2.2 installed with the rbenv tool. I am building a CLI (Tool A) that depends on another utility (Tool B) being installed on the machine. At the point when Tool B is called there is a guard clause that prints an error message if Tool B isn't found, like this:</p>\n\n<p><code>fail \"Can't do it: missing 'Tool B' utility\" unless system(\"hash tool-b\")</code></p>\n\n<p>I had no problems with this on OSX, but on Ubuntu <code>system(\"hash tool-b\")</code> always returns <code>nil</code> (command failed). When printing the exit code from within a Ruby interpreter (<code>$?</code>), I get <code>127</code> instead of <code>0</code>.</p>\n\n<p>The strange thing is that if I run <code>hash tool-b</code> directly from the command line, the process exits successfully with a status of <code>0</code>. This seems to happen for me when checking for <em>any</em> utility on Ubuntu from within Ruby with <code>system(\"hash &lt;utility&gt;\")</code>. I've changed the program to use <code>system(\"which tool-b\")</code> instead of <code>hash</code> but am still interested to know if there is something particular to my setup that might be doing this (it's a vanilla Ubuntu 14.04 box on Amazon EC2 with pretty much nothing but rbenv, Ruby 2.2.2, and my gems), or something about Ubuntu + Ruby that I don't get.</p>\n\n<p>Summary of the commands I'm running on the different platforms:</p>\n\n<pre><code>fail \"Can't create cartridge: missing 'cartridge' utility\" unless system(\"hash cartridge\") # offending Ruby code\n\n### UBUNTU COMMAND LINE\n$ hash cartridge\n$ echo $?\n=&gt; 0\n\n### UBUNTU IRB\nsystem(\"hash cartridge\")\n=&gt; nil\nputs $?\n=&gt; ... exit 127\n\n### OSX IRB\nsystem(\"hash cartridge\")\n=&gt; true\nputs $?\n=&gt; ... exit 0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "missing-template"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1469044124, "post_id": 38488804, "comment_id": 64380834, "body": "How did <code>format: :txt</code> get in there in the first place?"}, {"owner": {"reputation": 636, "user_id": 2694172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9b08042bbef3d3b7a759bd1d34bb090e?s=128&d=identicon&r=PG", "display_name": "hansottowirtz", "link": "https://stackoverflow.com/users/2694172/hansottowirtz"}, "edited": false, "score": 0, "creation_date": 1469050435, "post_id": 38488804, "comment_id": 64384011, "body": "If you include <code>format: :txt</code>, Rails will only look for .txt files, and your file is a <code>.html.erb</code>, which is <code>format: :html</code>, and that&#39;s the default."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1469041592, "creation_date": 1469041592, "answer_id": 38488893, "question_id": 38488804, "link": "https://stackoverflow.com/questions/38488804/missing-show-template-in-rails/38488893#38488893", "title": "Missing &#39;Show&#39; Template in Rails", "body": "<p>I think it's the <code>defaults: {format: 'txt'}</code> option that's causing the lookup to fail.</p>\n\n<p>You can see in this error:</p>\n\n<pre><code>Missing template syndication/show, application/show with {:locale=&gt;[:en], :formats=&gt;[:text], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: * \"Projects/PlanoSyndication/app/views\"\n</code></pre>\n\n<p>That the \"formats\" list doesn't contain <code>html</code>. You could remove the <code>defaults</code> option and the lookup should succeed if your files are placed &amp; named correctly. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5900658"}, "is_accepted": false, "score": 0, "last_activity_date": 1469043984, "creation_date": 1469043984, "answer_id": 38489558, "question_id": 38488804, "link": "https://stackoverflow.com/questions/38488804/missing-show-template-in-rails/38489558#38489558", "title": "Missing &#39;Show&#39; Template in Rails", "body": "<p>NO need to have defaults: {format: 'txt'} in your routes.rb</p>\n"}], "owner": {"reputation": 13, "user_id": 6580738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pofITPIP9nM/AAAAAAAAAAI/AAAAAAAAACA/BUM6j7IpWPI/photo.jpg?sz=128", "display_name": "Jared Powers", "link": "https://stackoverflow.com/users/6580738/jared-powers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 38488893, "answer_count": 2, "score": 0, "last_activity_date": 1469043984, "creation_date": 1469041348, "last_edit_date": 1469041693, "question_id": 38488804, "link": "https://stackoverflow.com/questions/38488804/missing-show-template-in-rails", "title": "Missing &#39;Show&#39; Template in Rails", "body": "<p>I am getting an error message stating </p>\n\n<blockquote>\n  <p>Missing template syndication/show, application/show with\n  {:locale=>[:en], :formats=>[:text], :variants=>[], :handlers=>[:erb,\n  :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: *\n  \"Projects/PlanoSyndication/app/views\"</p>\n</blockquote>\n\n<p>Here is my Route:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n    get 'syndication/:name', to: 'syndication#show', defaults: {format: 'txt'}\n\nend\n</code></pre>\n\n<p>Here is my model:</p>\n\n<pre><code>class Syndication &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Here is my Controller:</p>\n\n<pre><code>class SyndicationController &lt; ApplicationController\n\n  def show\n    @syndications = Syndication.find_by name: 'tour_urls.txt'\n  end\n\nend\n</code></pre>\n\n<p>and in <code>views/syndication/show.html.erb</code> sits</p>\n\n<pre><code>&lt;div&gt;\n  &lt;%= @syndications.each do |syn| %&gt;\n    &lt;%= syn.body %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated.  This is a very simple problem, I am just having real trouble finding it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging"], "answers": [{"comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469044100, "post_id": 38488752, "comment_id": 64380817, "body": "I said probably, so I haven&#39;t tried that myself. Quick googling suggests it&#39;s not trivial: <a href=\"http://stackoverflow.com/questions/7842511/safe-to-have-multiple-processes-writing-to-the-same-file-at-the-same-time-cent\" title=\"safe to have multiple processes writing to the same file at the same time cent\">stackoverflow.com/questions/7842511/&hellip;</a> <a href=\"http://blogs.perl.org/users/vyacheslav_matjukhin/2011/05/suprisingly-hard-task-of-writing-logs.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/vyacheslav_matjukhin/2011/05/&hellip;</a>"}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1469041209, "creation_date": 1469041209, "answer_id": 38488752, "question_id": 38488416, "link": "https://stackoverflow.com/questions/38488416/rails-logger-rotation-can-other-processes-write-to-the-same-log-file/38488752#38488752", "title": "Rails logger rotation =&gt; Can other processes write to the same log file?", "body": "<p>No, Ruby does rotation only on own write:</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/ruby_2_3/lib/logger.rb#L648\" rel=\"nofollow\">https://github.com/ruby/ruby/blob/ruby_2_3/lib/logger.rb#L648</a></p>\n\n<p>Also, it's probably not a good idea to write to the same file from different processes.</p>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469041209, "creation_date": 1469040124, "question_id": 38488416, "link": "https://stackoverflow.com/questions/38488416/rails-logger-rotation-can-other-processes-write-to-the-same-log-file", "title": "Rails logger rotation =&gt; Can other processes write to the same log file?", "body": "<p>In my config/environments/production.rb, I have the following:</p>\n\n<pre><code>config.logger = Logger.new(\"log/production.log\", 10, 1000.megabytes)\nconfig.log_formatter = ::Logger::Formatter.new\n</code></pre>\n\n<p>Let's suppose I never ever write to this log/production.log anywhere in my code. However, I have another process (say a Java process) that writes to this same log file. Assuming Rails is up and running, will Rails automatically do the autorotation, even if Rails never writes to this log file? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469044735, "post_id": 38488239, "comment_id": 64381195, "body": "If you haven&#39;t already, take a look at the Rails guide to associations: <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a> There are really simple examples around many to many associations that should help you out."}], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 1650668, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7hdzg.jpg?s=128&g=1", "display_name": "Shaun", "link": "https://stackoverflow.com/users/1650668/shaun"}, "is_accepted": true, "score": 2, "last_activity_date": 1469040123, "creation_date": 1469040123, "answer_id": 38488415, "question_id": 38488239, "link": "https://stackoverflow.com/questions/38488239/rails-model-has-many-through-relationship/38488415#38488415", "title": "Rails model has_many :through relationship", "body": "<p>You just need to add the connection in the middle.</p>\n\n<pre><code># User.rb\nhas_many :cars\nhas_many :parts, through: :cars\nhas_many :tires, through: :parts\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 6349791, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/db88090f21ef18fe5f123c4fe1ea0d3c?s=128&d=identicon&r=PG&f=1", "display_name": "JoHksi", "link": "https://stackoverflow.com/users/6349791/johksi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 38488415, "answer_count": 1, "score": 0, "last_activity_date": 1469040123, "creation_date": 1469039478, "question_id": 38488239, "link": "https://stackoverflow.com/questions/38488239/rails-model-has-many-through-relationship", "title": "Rails model has_many :through relationship", "body": "<p><code>User</code>, <code>Car</code>, <code>Part</code>, <code>Tire</code>.\n<code>User</code> has many <code>Car</code>s. <code>Car</code> has many <code>Part</code>s. <code>Part</code> has many <code>Tire</code>s.</p>\n\n<p>In user.rb, I have </p>\n\n<pre><code>has_many :tires, through: :cars\n</code></pre>\n\n<p>However, it seems like this is not a correct way of doing it since there is another model <code>Part</code> in the middle.</p>\n\n<p>How should I successfully do to make has_many relationships between <code>User</code> and <code>Tire</code>?</p>\n"}, {"tags": ["ruby", "ubuntu-14.04", "jekyll"], "comments": [{"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1469211514, "post_id": 38488010, "comment_id": 64459648, "body": "Does your project have a Gemfile? What happens if in your home folder, you run <code>irb</code>, and <code>require &#39;rmagick&#39;</code>? Does that work?"}, {"owner": {"reputation": 23, "user_id": 6614783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a633733def1fa5b2104cd781dc8a7cc2?s=128&d=identicon&r=PG&f=1", "display_name": "tmorgan", "link": "https://stackoverflow.com/users/6614783/tmorgan"}, "reply_to_user": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1469301385, "post_id": 38488010, "comment_id": 64482917, "body": "My project does not have a Gemfile. In my home folder, <code>irb</code> then <code>require &#39;rmagick&#39;</code> returns <code>=&gt; true </code> `"}], "owner": {"reputation": 23, "user_id": 6614783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a633733def1fa5b2104cd781dc8a7cc2?s=128&d=identicon&r=PG&f=1", "display_name": "tmorgan", "link": "https://stackoverflow.com/users/6614783/tmorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 953, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1469211247, "creation_date": 1469038776, "last_edit_date": 1469211247, "question_id": 38488010, "link": "https://stackoverflow.com/questions/38488010/ruby-cannot-load-such-file-rmagick", "title": "Ruby &#39;cannot load such file --RMagick&#39;", "body": "<p>I have a default installation of a jekyll project (created with <code>jekyll new sample</code>) and have included a plugin, <a href=\"https://github.com/mattvh/JekyllGalleryTag\" rel=\"nofollow\">JekyllGalleryTag</a>. </p>\n\n<p>The plugin depends upon ImageMagick and RMagick. I have installed ImageMagick and RMagick successfully on Xubuntu 14.04 using these commands. </p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install imagemagick --fix-missing\nsudo apt-get install libmagickcore-dev\nsudo apt-get install libmagickwand-dev\n</code></pre>\n\n<p>ImageMagick commands are functional, eg <code>convert logo.gif logo.jpg</code> works as expected.</p>\n\n<p>I am running ruby-2.3.0 via rvm 1.27.0</p>\n\n<pre><code>gem install rmagick\n</code></pre>\n\n<p>RMagick installs without any error messages.</p>\n\n<p>JekyllGalleryTag needs galleries.rb put in /_plugins, which I have done. The first line of galleries.rb reads ...</p>\n\n<pre><code>require 'RMagick'\n</code></pre>\n\n<p>The plugin requires some code in _config.yml, which looks like this...</p>\n\n<pre><code>gallerytag:\n    dir: images/galleries\n    url: /images/galleries\n    thumb_width: 150\n    thumb_height: 150\n    columns: 4\n</code></pre>\n\n<p>My gallery images are located in /images/galleries/dig/</p>\n\n<p>I created an html file with some Liquid code to display the result. Here's the code in dig.html</p>\n\n<pre><code>---\nlayout: default\ntitle: Dig In Italy\n---\n{% gallery dig %}\ndig/current001.jpg:: A caption goes here!\n{% endgallery %}\n</code></pre>\n\n<p>When I preview the site, with <code>jekyll serve</code>, I get this error message...</p>\n\n<pre><code>Configuration file: /mnt/hgfs/proj/practice/jekyll/sample/_config.yml\nDependency Error: Yikes! It looks like you don't have /mnt/hgfs/proj/practice/jekyll/sample/_plugins/galleries.rb or one of its dependencies installed. \nIn order to use Jekyll as currently configured, you'll need to install this gem. \nThe full error message from Ruby is: 'cannot load such file -- RMagick' \nIf you run into trouble, you can find helpful resources at http://jekyllrb.com/help/! \njekyll 3.1.6 | Error:  /mnt/hgfs/proj/practice/jekyll/sample/_plugins/galleries.rb\n</code></pre>\n\n<p>I am new to ruby, jekyll, and linux generally.  I have googled and read and experimented for hours searching for a fix. The summarized sequence above is a result of all that research. I have installed every suggested library. </p>\n\n<p>Other fixes I tried and discarded were:</p>\n\n<ul>\n<li>including <code>require 'rubygems'</code> as the first line in galleries.rb (in addition to <code>require 'RMagick'</code>)</li>\n<li><code>require 'rmagick'</code> instead of <code>require 'RMagick'</code></li>\n<li>all 4 combinations of these require statements</li>\n</ul>\n\n<p>Additional wrinkles that may be relevant or not;</p>\n\n<ul>\n<li>Xubuntu 14.04 is running in VMware Player 7.1.2 </li>\n<li>The host OS is Windows 7 Pro 64 bit. </li>\n<li>My jekyll files are on the host NTFS filesystem, and I've been editing them with Notepad++ (a windows editor). The files are shared with the guest OS via VMware Player's Shared Folders option. This arrangement works fine for static sites and WordPress sites.</li>\n<li>I am using the terminal in the guest OS, Xubuntu, for all command line work. The Xubuntu OS contains the AMP stack, along with rvm and ruby.</li>\n<li>Though bundler is installed, I did not use it to install RMagick.</li>\n</ul>\n\n<p>How do I fix this?</p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>I have verified that RMagick is working properly.  I made a couple of small .rb scripts from the code on the RMagick Usage page. Two identical script sets were stored, one in the linux filesystem, and one in the NTFS filesystem. Both execute as expected without errors. This demonstrates that ruby works and can find and use RMagick, and that RMagick can find and use ImageMagick. And that the location of the files doesn't make a difference.</p>\n\n<p>Yet file location does matter. I copied identical sample jekyll projects so there was one on the linux filesystem one on NTFS. \nOn linux <code>jekyll serve</code> executes but the plugin is not generating the thumbnail file version that jekyll is expecting. The build completes but with errors due to the missing thumbnail file.  So the build wont complete when the files reside on NTFS, but will when the files are on linux.</p>\n\n<p>At this point my theories are 1) weirdness caused by VMware Player file sharing (but one that does not affect ruby &amp; gems consistently) or 2) something in the plugin code, which I don't have the skill to assess.</p>\n\n<p>Any comments, ideas? </p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469040687, "post_id": 38487958, "comment_id": 64378885, "body": "There are no JOINs in MongoDB so you&#39;re stuck querying a single collection at a time; your choices are to do the JOINs by hand in Ruby or denormalize (i.e. maintain multiple copies of the data so that your JOINs are precomputed and you only have to access one collection at a time), both of these options tend to be a bit unpleasant and error prone. Are the <code>embeds_many :images</code> and <code>belongs_to :content</code> right? I don&#39;t think you&#39;re supposed to be mixing embedding and relations like that."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469052389, "post_id": 38487958, "comment_id": 64384763, "body": "My bad! The Image is actually <code>embedded_in :content</code>. I&#39;ll correct that."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469053026, "post_id": 38487958, "comment_id": 64384987, "body": "You&#39;re still stuck with multiple queries because there are multiple connections. Or you could keep a copy of the site name in the <code>web_pages</code> collection (and keep it synchronized with the name in <code>sites</code>) so that you&#39;d still be in just one collection."}], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "is_accepted": false, "score": 0, "last_activity_date": 1470197030, "creation_date": 1470197030, "answer_id": 38734201, "question_id": 38487958, "link": "https://stackoverflow.com/questions/38487958/with-mongoid-how-to-grab-a-collection-of-collections-via-subdocuments/38734201#38734201", "title": "With Mongoid, how to grab a collection of collections (via subdocuments)?", "body": "<p>Since I still need to iterate over the multiple collections, the best I've come up with is:</p>\n\n<pre><code>def build_image_details(site)\n  {}.tap do |hash|\n    pages = WebPage.where(site: site)\n    images = pages.collect { |page| page.content.images }.flatten\n    images.each { |image| hash[image.title] = image.bytes }\n  end # tap\nend\n</code></pre>\n\n<p>That method returns a hash that looks like:</p>\n\n<pre><code>{\n  \"Some Image Title\" =&gt; 2346435,\n  \"Another Image Title\" =&gt; 598438\n  # etc.\n}\n</code></pre>\n\n<p>I have to query to get the pages, then query each page to gather the images (via the content). But it works.</p>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470197030, "creation_date": 1469038562, "last_edit_date": 1469052416, "question_id": 38487958, "link": "https://stackoverflow.com/questions/38487958/with-mongoid-how-to-grab-a-collection-of-collections-via-subdocuments", "title": "With Mongoid, how to grab a collection of collections (via subdocuments)?", "body": "<p>I have a Mongoid structure that looks sort of like this:</p>\n\n<pre><code>class Site\n  has_many :web_pages\n  field :name, type: String\n  # ... other stuff\nend      \n\nclass WebPage\n  belongs_to :site\n  embeds_one :content\n  # ... other stuff\nend\n\nclass Content\n  embeds_many :images\n  # ... other stuff\nend\n\nclass Image\n  embedded_in :content\n  field :title, type: String\n  field :bytes, type: Integer\n  # ... other stuff\nend\n</code></pre>\n\n<p>What I want to do is have a Mongoid query that given a Site name, pull out a collection of Image records, but only the title and bytes fields.</p>\n\n<p>I know I can do this iteratively via Ruby... i.e. I can grab all the WebPages for a given Site (by name), iterate through them and for each, grab it's one Content record and then all the Images for that Content, plucking only the title and bytes fields.  But that's an N+1 query whereas I'm sure there must be a way in a single query to pull out all the Images for all the WebPages for a given Site (by title).</p>\n\n<p>I welcome any suggestions on how to arrange this with Mongoid.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "bundler"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1469038420, "post_id": 38487872, "comment_id": 64377579, "body": "Is <code>gem &#39;rake&#39;</code> included of your <code>Gemfile</code>?"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469038971, "post_id": 38487872, "comment_id": 64377914, "body": "try <code>bundle exec gem list | grep rake</code> and see if you have more than one version installed and what order the versions are listed. Then you use <code>gem uninstall rake</code> and pick the version(s) you want to remove until you only have the correct one in play."}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1469046381, "post_id": 38487872, "comment_id": 64382060, "body": "@Holger -- I&#39;ve tried it 3 ways: without &#39;rake&#39; in the Gemfile, with it in the Gemfile but without a specified version, and with it and also with a version specified. Nothing works."}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469046457, "post_id": 38487872, "comment_id": 64382094, "body": "@jaydel -- if I run &quot;bundle exec gem list&quot; I simply get the error message: &quot;Could not find rake-11.2.2 in any of the sources&quot;"}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "edited": false, "score": 0, "creation_date": 1469046563, "post_id": 38487872, "comment_id": 64382160, "body": "If I run &quot;bundle install&quot; then in the output I see &quot;Using rake 11.2.2&quot;. So the &quot;bundle&quot; command sees rake when Bundler is doing the &quot;install&quot; task, but not when it is doing the &quot;exec&quot; task."}, {"owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "edited": false, "score": 0, "creation_date": 1469053199, "post_id": 38487872, "comment_id": 64385046, "body": "can you remove <code>BUNDLE_DISABLE_SHARED_GEMS: &#39;1&#39;</code> from .bundler/config  and try"}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "reply_to_user": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "edited": false, "score": 0, "creation_date": 1469059799, "post_id": 38487872, "comment_id": 64386770, "body": "@Nikhil -- I think that problem was solved. I&#39;m dealing with a new problem now. I mention it in the update. Maybe I should start a new question? The problem now is that &quot;gem&quot; and &quot;bundle&quot; and rbenv all seem to use different paths."}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "edited": false, "score": 0, "creation_date": 1469059903, "post_id": 38487872, "comment_id": 64386793, "body": "This is the problem I have now: <a href=\"https://github.com/thoughtbot/paperclip/issues/1127\" rel=\"nofollow noreferrer\">github.com/thoughtbot/paperclip/issues/1127</a>"}], "answers": [{"tags": [], "owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "is_accepted": false, "score": 0, "last_activity_date": 1469061150, "creation_date": 1469061150, "answer_id": 38492960, "question_id": 38487872, "link": "https://stackoverflow.com/questions/38487872/rake-is-in-my-gem-path-and-yet-bundler-can-not-find-it/38492960#38492960", "title": "Rake is in my Gem path and yet Bundler can not find it", "body": "<p>I guess this is fixed now. Deleting all of .bashrc and .bash_profile and .zshrc and changing the default shell back to bash and deleting all mentions of rvm and reinstalling rbenv and reinstalling \"gem\" and then \"Bundler\" seemed to fix at least some of the problems with paths. And I fixed the issue with Paperclip by doing \"gem install paperclip\" which I guess installed paperclip globally, but at least it works on my local Mac. Very fragile, but things are working. </p>\n\n<p>I wish I could use Clojure for this project. Every time I tangle with Ruby I end up wrestling with this endless maze of path problems. With Clojure, I am protected by Leiningen, which seems to figure this stuff out with pure magic. </p>\n"}, {"tags": [], "owner": {"reputation": 1885, "user_id": 567479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a333b55dd9945ec0c19d0ac6d0964634?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/567479/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1469128749, "creation_date": 1469128749, "answer_id": 38512666, "question_id": 38487872, "link": "https://stackoverflow.com/questions/38487872/rake-is-in-my-gem-path-and-yet-bundler-can-not-find-it/38512666#38512666", "title": "Rake is in my Gem path and yet Bundler can not find it", "body": "<p>I just ran <code>gem update bundler</code> to fix this issue.</p>\n"}], "owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1596, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1469128749, "creation_date": 1469038278, "last_edit_date": 1469052676, "question_id": 38487872, "link": "https://stackoverflow.com/questions/38487872/rake-is-in-my-gem-path-and-yet-bundler-can-not-find-it", "title": "Rake is in my Gem path and yet Bundler can not find it", "body": "<p>Bundler can not find Rake. </p>\n\n<p>How do I fix my Gem path so that my Ruby gems get installed in a place where Bundler can find it? </p>\n\n<p>If I do:</p>\n\n<pre><code>  gem env\n</code></pre>\n\n<p>I see: </p>\n\n<pre><code>  RubyGems Environment:\n    - RUBYGEMS VERSION: 2.0.14\n    - RUBY VERSION: 2.0.0 (2015-04-13 patchlevel 645) [universal.x86_64-darwin15]\n    - INSTALLATION DIRECTORY: /Library/Ruby/Gems/2.0.0\n    - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n    - EXECUTABLE DIRECTORY: /usr/local/bin\n    - RUBYGEMS PLATFORMS:\n      - ruby\n      - universal-darwin-15\n    - GEM PATHS:\n       - /Library/Ruby/Gems/2.0.0\n       - /Users/lkrubner/.gem/ruby/2.0.0\n       - /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/gems/2.0.0\n    - GEM CONFIGURATION:\n       - :update_sources =&gt; true\n       - :verbose =&gt; true\n       - :backtrace =&gt; false\n       - :bulk_threshold =&gt; 1000\n       - \"install\" =&gt; \"--no-ri --no-rdoc\"\n       - \"update\" =&gt; \"--no-ri --no-rdoc\"\n    - REMOTE SOURCES:\n       - https://rubygems.org/\n</code></pre>\n\n<p>And Rake is there: </p>\n\n<pre><code>   ls -al /Library/Ruby/Gems/2.0.0/gems \n\n   rake-0.9.6\n   rake-10.4.2\n   rake-11.2.2\n   rdoc-4.0.0\n   test-unit-2.0.0.0\n</code></pre>\n\n<p>But none of this matters for the current project.</p>\n\n<p>I am taking over a Rails project from another developer. </p>\n\n<p>Rails 4.2</p>\n\n<p>Rake 11..2.2</p>\n\n<p>Ruby 2.0.0</p>\n\n<p>If I look in </p>\n\n<pre><code>  .bundler/config\n</code></pre>\n\n<p>I see: </p>\n\n<pre><code>  BUNDLE_PATH: vendor/cache\n  BUNDLE_DISABLE_SHARED_GEMS: '1'\n</code></pre>\n\n<p>If I use \"find\" I can see that I've installed several versions of Rake:</p>\n\n<pre><code>  vendor/cache/rake-11.2.2.gem\n  vendor/cache/ruby/2.1.0/gems/rake-10.5.0/\n  vendor/cache/ruby/2.1.0/gems/rake-11.2.2\n  vendor/cache/ruby/2.1.0/gems/rake-10.4.2\n</code></pre>\n\n<p>But most of these are going to a ruby 2.1 folder, instead of 2.0. </p>\n\n<p>But if I try: </p>\n\n<pre><code>  bundle exec rake db:setup\n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>  Could not find rake-11.2.2 in any of the sources\n</code></pre>\n\n<p>I've tried \"bundle install\". </p>\n\n<p>I've tried deleting Gemfile.lock.</p>\n\n<p>I've tried to avoid using \"bundle exec\".</p>\n\n<p>I can't get anything to work.</p>\n\n<p>I just need to get the system to use one path. The versions are not very important. </p>\n\n<p>How do I get everything to agree on one path? </p>\n\n<p>If I run \"bundle install\" then in the output I see \"Using rake 11.2.2\". So the \"bundle\" command sees rake when Bundler is doing the \"install\" task, but not when it is doing the \"exec\" task.</p>\n\n<p>By the way:</p>\n\n<pre><code>  which rake\n  /usr/local/bin/rake\n</code></pre>\n\n<p>This is hard-coded to the 2.0 version of Ruby: </p>\n\n<pre><code>  #!/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n  #\n  # This file was generated by RubyGems.\n  #\n  # The application 'rake' is installed as part of a gem, and\n  # this file is here to facilitate running it.\n  #\n\n  require 'rubygems'\n\n  version = \"&gt;= 0\"\n\n  if ARGV.first\n    str = ARGV.first\n    str = str.dup.force_encoding(\"BINARY\") if str.respond_to? :force_encoding\n    if str =~ /\\A_(.*)_\\z/\n      version = $1\n      ARGV.shift\n    end\n  end\n\n  gem 'rake', version\n  load Gem.bin_path('rake', 'rake', version)\n</code></pre>\n\n<p>[[  UPDATE ]]</p>\n\n<p>[[  UPDATE ]]</p>\n\n<p>I deleted: </p>\n\n<p>.bashrc</p>\n\n<p>.bash_profile</p>\n\n<p>.zshrc</p>\n\n<p>and I ran: </p>\n\n<pre><code>   chsh -s /bin/bash\n</code></pre>\n\n<p>I am on a Mac. This should have changed my shell from zsh to bash. </p>\n\n<p>I then started over in a terminal window, to be sure all changes were loaded.</p>\n\n<p>Now, if I run \"bundle install\" the gems seem to install into vendor/cache/ but I get this error:</p>\n\n<pre><code>  Installing paperclip 5.0.0\n  Gem::InstallError: paperclip requires Ruby version &gt;= 2.1.0.\n</code></pre>\n\n<p>So I run: </p>\n\n<pre><code>  rbenv install 2.1.0\n</code></pre>\n\n<p>and I run \"bundle install\" again, and I get the same error.</p>\n\n<p>The ruby version is: </p>\n\n<pre><code>  ruby -v\n  ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\n</code></pre>\n\n<p>Any advice? </p>\n\n<p>If I run:</p>\n\n<pre><code>  gem env\n</code></pre>\n\n<p>I see: </p>\n\n<pre><code> - GEM PATHS:\n   - /Users/lkrubner/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n   - /Users/lkrubner/.gem/ruby/2.3.0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469050568, "post_id": 38487682, "comment_id": 64384069, "body": "Welcome to Stack Overflow. We&#39;d like to see evidence of your effort toward solving this. As is it looks like you didn&#39;t try and want us to write it for you, which isn&#39;t what SO is for. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages. <a href=\"http://meta.stackoverflow.com/q/261592/12842\">meta.stackoverflow.com/q/261592/12842</a> is useful to read too."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 4865310, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9e3ac6507cc4d2c3ba0827dc211bd639?s=128&d=identicon&r=PG&f=1", "display_name": "Reinier", "link": "https://stackoverflow.com/users/4865310/reinier"}, "edited": false, "score": 0, "creation_date": 1469038107, "post_id": 38487743, "comment_id": 64377395, "body": "Hoped that there would be some ruby magic to do this, but this is also quite an elegant solution! Thanks"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 185, "user_id": 4865310, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9e3ac6507cc4d2c3ba0827dc211bd639?s=128&d=identicon&r=PG&f=1", "display_name": "Reinier", "link": "https://stackoverflow.com/users/4865310/reinier"}, "edited": false, "score": 0, "creation_date": 1469038333, "post_id": 38487743, "comment_id": 64377528, "body": "FWIW I&#39;ve edited my answer with a slightly more terse solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469045217, "post_id": 38487743, "comment_id": 64381438, "body": "It;s worth noting that if you package that in a method you need to add <code>my_array</code> as the last line."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1469038297, "last_edit_date": 1469038297, "creation_date": 1469037928, "answer_id": 38487743, "question_id": 38487682, "link": "https://stackoverflow.com/questions/38487682/how-can-i-delete-certain-indeces-defined-in-an-array-from-an-other-array-in-ruby/38487743#38487743", "title": "How can I delete certain indeces defined in an array from an other array in ruby", "body": "<p>How about this?</p>\n\n<pre><code>my_array = [0, 1, 2, 3, 4, 5, 6, 7]\ndelete_these_indices = [1, 2, 5]\n\ndelete_these_indices.sort.reverse_each {|i| my_array.delete_at(i) }\n\np my_array\n# =&gt; [0, 3, 4, 6, 7, 8]\n</code></pre>\n\n<p>It's important to delete from the end of the array, since deleting an item will change the indices of all subsequent items, ergo <code>sort.reverse_each</code>. If you know the array is already sorted, you can just do <code>reverse_each</code>.</p>\n\n<p>If you don't care bout modifying the <code>delete_these_indices</code> array, you can be somewhat more terse:</p>\n\n<pre><code>delete_these_indices.sort!\nmy_array.delete_at(i) while (i = delete_these_indices.pop)\n</code></pre>\n\n<p>Again, you can skip <code>sort!</code> if you know <code>delete_these_indices</code> is already sorted.</p>\n"}, {"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469039812, "post_id": 38487798, "comment_id": 64378364, "body": "Do the indexes change on each iteration? Meaning if you are trying to delete at indexes, 3 and 5, and delete index 3 first, has the content at index 5 moved to index 4?"}, {"owner": {"reputation": 4446, "user_id": 6079412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5e6c2756113d7289e80bed137251db?s=128&d=identicon&r=PG&f=1", "display_name": "larz", "link": "https://stackoverflow.com/users/6079412/larz"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469040293, "post_id": 38487798, "comment_id": 64378656, "body": "@jaydel yes they do! Can be troublesome if you aren&#39;t expecting it"}], "tags": [], "owner": {"reputation": 4446, "user_id": 6079412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5e6c2756113d7289e80bed137251db?s=128&d=identicon&r=PG&f=1", "display_name": "larz", "link": "https://stackoverflow.com/users/6079412/larz"}, "is_accepted": false, "score": 0, "last_activity_date": 1469038068, "creation_date": 1469038068, "answer_id": 38487798, "question_id": 38487682, "link": "https://stackoverflow.com/questions/38487682/how-can-i-delete-certain-indeces-defined-in-an-array-from-an-other-array-in-ruby/38487798#38487798", "title": "How can I delete certain indeces defined in an array from an other array in ruby", "body": "<pre><code>delete_these_indexes.each_with_index do |val, i|\n    my_array.delete_at(val - i)\nend\n</code></pre>\n\n<p>deletes at the desired index taking into account how many have previously been deleted and adjusting for that</p>\n\n<p><a href=\"https://repl.it/CeHZ\" rel=\"nofollow\">https://repl.it/CeHZ</a></p>\n"}, {"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469040846, "post_id": 38488267, "comment_id": 64378974, "body": "the - operator doesn&#39;t  work on indexes but on objects. it&#39;s a set operator on the content objects, not indexes"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469043947, "post_id": 38488267, "comment_id": 64380720, "body": "@jaydel, that&#39;s <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-2D\" rel=\"nofollow noreferrer\">Array#-</a>."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469044347, "post_id": 38488267, "comment_id": 64380978, "body": "I don&#39;t follow. <code>to_a</code> returns an Array object, so your snippet <code>my_array.each_index.to_a - delete_these_indexes</code> isn&#39;t returning the difference by index but by value. Sorry if I&#39;m being thick here. late in the day..."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 1, "creation_date": 1469044405, "post_id": 38488267, "comment_id": 64381016, "body": "Oh, I think I follow you. I&#39;m not wrong but I misunderstood what you&#39;re trying to do. you&#39;re identifying which <i>indexes</i> you want to keep, not which values. Apologies"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1469039565, "creation_date": 1469039565, "answer_id": 38488267, "question_id": 38487682, "link": "https://stackoverflow.com/questions/38487682/how-can-i-delete-certain-indeces-defined-in-an-array-from-an-other-array-in-ruby/38488267#38488267", "title": "How can I delete certain indeces defined in an array from an other array in ruby", "body": "<pre><code>keep_these_indexes = my_array.each_index.to_a - delete_these_indexes\n  #=&gt; [0, 3, 4, 6, 7]\n</code></pre>\n\n<p>If you wish to modify <code>my_array</code> (which appears to be the case):</p>\n\n<pre><code>my_array.replace(my_array.values_at(*keep_these_indexes))\n  #=&gt; [0, 3, 4, 6, 7]\n</code></pre>\n\n<p>If not:</p>\n\n<pre><code>new_array = my_array.values_at(*keep_these_indexes)\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-values_at\" rel=\"nofollow\">Array#values_at</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469040919, "post_id": 38488552, "comment_id": 64379020, "body": "one corner case I&#39;ve ignored unintentionally is if the any of the indices to delete are bigger than the size of the array to clean out."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1469046030, "post_id": 38488552, "comment_id": 64381876, "body": "Might I suggest <code>my_array.compact!</code> instead of <code>my_array.delete(nil)</code>?"}], "tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": false, "score": 0, "last_activity_date": 1469040558, "creation_date": 1469040558, "answer_id": 38488552, "question_id": 38487682, "link": "https://stackoverflow.com/questions/38487682/how-can-i-delete-certain-indeces-defined-in-an-array-from-an-other-array-in-ruby/38488552#38488552", "title": "How can I delete certain indeces defined in an array from an other array in ruby", "body": "<p>Probably not the best answer, but you can do this as well:</p>\n\n<pre><code>delete_at_indices.each {|ind| my_array[ind] = nil }\nmy_array.delete(nil)\n</code></pre>\n\n<p>Takes a first pass to conceptually invalidate the data at the specified indices, then the call to .delete will blow out any values that match what's passed in.</p>\n\n<p>This solution assumes that you can define a value that isn't valid for your array. Using nil will be problematic if you're treating this as a sparsely populated array (where nil is a valid value)</p>\n\n<p>Technically you're iterating through each array once, but that Gentleman's Agreement on what your deletable value might make some people uncomfortable    </p>\n"}], "owner": {"reputation": 185, "user_id": 4865310, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9e3ac6507cc4d2c3ba0827dc211bd639?s=128&d=identicon&r=PG&f=1", "display_name": "Reinier", "link": "https://stackoverflow.com/users/4865310/reinier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 38487743, "answer_count": 4, "score": 0, "last_activity_date": 1469040558, "creation_date": 1469037686, "question_id": 38487682, "link": "https://stackoverflow.com/questions/38487682/how-can-i-delete-certain-indeces-defined-in-an-array-from-an-other-array-in-ruby", "title": "How can I delete certain indeces defined in an array from an other array in ruby", "body": "<p>I have a method that iterates over an array, does a bunch of stuff under certain conditions and depending on these conditions I would ALSO like to delete some of the elements. In order to keep track of the indexes I like to delete I converted the each in to an each_with_index loop and store the index of the elements that I like to delete in an array index_array. How can I delete exactly the items on those indexes in my original array? Looping over the index_array and using delete_at would change the original index. Please see below description of the scenario:</p>\n\n<pre><code>&gt; my_array = [0,1,2,3,4,5,6,7]\n&gt; delete_these_indexes = [1,2,5]\nthe desired result is:\n&gt; my_array =&gt; [0,3,4,6,7,8]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "numbers", "decimal"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1469035933, "post_id": 38487037, "comment_id": 64376030, "body": "Your second sentence is unclear: &quot;I want that if number is 1.000 then three zeros should and if number 1.00 then two zeros show.&quot; What do you mean by this? Can you edit your question to include some examples of input and the output you want? Have you tried the <code>:precision</code> option, <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency\" rel=\"nofollow noreferrer\">as mentioned in the docs</a>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1469036552, "post_id": 38487037, "comment_id": 64376392, "body": "In the floating point world, 1.0, 1.00, 1.000 are all identical. What numbers are you formatting? Can you give concrete examples?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1469038216, "post_id": 38487037, "comment_id": 64377464, "body": "your question is about <code>number_to_currency</code> currency will have 2 trailing zeros because that is currency formatting if you just want to add a dollar sign then just do that instead. <code>&quot;$#{number}&quot;</code>. @tadman I think is a bad example and rather he is talking about numbers like 1.1, 1.01, and 1.001"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469039441, "post_id": 38487037, "comment_id": 64378182, "body": "@engineersmnky 1.001 is often represented internally as something like 1.00099999999938238 so that&#39;s not going to work either."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469039488, "post_id": 38487037, "comment_id": 64378200, "body": "@haseeb Are these numbers or strings? If they&#39;re numbers there is <b>no difference</b> between 1.0 and 1.00 or 1.0000000000000. The numbers after the decimal place are only displayed if necessary as a convenience for humans. The computer does not care. There is a <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency\" rel=\"nofollow noreferrer\"><code>precision</code> option for <code>number_to_currency</code></a> but you must specify it in advance."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1469045006, "post_id": 38487037, "comment_id": 64381322, "body": "possible use case: gasoline prices where they show the tenth of pennies as well. so 3.399, for example. I scratched my head at this for a few moments, stuck firmly on the &#39;why&#39;"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469047443, "post_id": 38487037, "comment_id": 64382635, "body": "@tadman yes float would be a bad choice for sure preferably integer money in pennies or BigDecimal implementation for sure my point was more advocating for the OP that may his examples were poor and he was not talking about truey equivalent numbers."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469051291, "post_id": 38487037, "comment_id": 64384373, "body": "@engineersmnky Absolutely, you need to use a fixed-place representation or you&#39;re in trouble in a hurry. I haven&#39;t seen systems with variable BigDecimal precision in the database, though, that&#39;s usually impossible."}], "answers": [{"tags": [], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "is_accepted": false, "score": -1, "last_activity_date": 1469036355, "creation_date": 1469036355, "answer_id": 38487251, "question_id": 38487037, "link": "https://stackoverflow.com/questions/38487037/how-to-number-to-currency-precision-in-rails/38487251#38487251", "title": "How to number_to_currency precision in rails", "body": "<p>You can use </p>\n\n<pre><code>sprintf('%.3f', 1.00)\n# =&gt; \"1.000\"\n</code></pre>\n\n<p>It would help you</p>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 6443490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2530f5fd2198d2f0b1a21afd7311a7?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woodward", "link": "https://stackoverflow.com/users/6443490/joe-woodward"}, "is_accepted": false, "score": 0, "last_activity_date": 1469037307, "last_edit_date": 1495540427, "creation_date": 1469037307, "answer_id": 38487559, "question_id": 38487037, "link": "https://stackoverflow.com/questions/38487037/how-to-number-to-currency-precision-in-rails/38487559#38487559", "title": "How to number_to_currency precision in rails", "body": "<p>I believe this is what you are looking for <a href=\"https://stackoverflow.com/questions/3320051/using-a-dynamic-precision-value-in-number-to-currency-based-on-the-decimal-value\">Using a dynamic precision value in number_to_currency based on the decimal value</a></p>\n\n<p>You'll need to modify the method to return dynamic precision values and also use bigdecimals instead of floats</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469037307, "creation_date": 1469035603, "last_edit_date": 1469036966, "question_id": 38487037, "link": "https://stackoverflow.com/questions/38487037/how-to-number-to-currency-precision-in-rails", "title": "How to number_to_currency precision in rails", "body": "<p>When I convert any number through number_to_currency it show only two zeros after dot. I want that if number is 1.000 then three zeros should  and if number 1.00 then two zeros show.</p>\n\n<p>I want if number is 1.0 then after precision 1t becomes 1.00 , I want it remains 1.0. If number is 1.000 it become 1.00 after precision, i want it remins 1.000</p>\n\n<p>Is it possible? </p>\n"}, {"tags": ["ruby", "oop", "dependency-injection"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469037549, "post_id": 38486803, "comment_id": 64377021, "body": "How about calling the <code>Bar</code> factory elsewhere then initializing <code>Foo</code> with a <code>Bar</code> instance, storing it as an instance variable? Removes the necessity to call the factory inside your instance method. If your instance method needs to use the factory dynamically, what you&#39;re doing here makes sense although with the code you&#39;ve shown it doesn&#39;t seem necessary to use a factory at all, since there&#39;s not much logic changed from the <code>Foo</code> initializer."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469039291, "post_id": 38486803, "comment_id": 64378095, "body": "Maybe I did not make it clear enough, but the bar created inside the method,  needs input from the method.  So for example the parameter passed to the create method of the bar_factory in some_method is generated by some_method.  If this were not the case, I would have done as you suggest and pass a bar into the constructor."}], "answers": [{"comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1469045079, "post_id": 38489692, "comment_id": 64381369, "body": "I agree, it does smell like java, which is partly why I asked the question, I think what you show here will work nicely.  Let me play with it a bit first before I check it off."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1469053053, "post_id": 38489692, "comment_id": 64384997, "body": "I guess it&#39;s really just the normal constructor dependency injection, but as you say, in ruby classes are objects as well, so no reason they should be treated differently."}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": true, "score": 3, "last_activity_date": 1469044478, "creation_date": 1469044478, "answer_id": 38489692, "question_id": 38486803, "link": "https://stackoverflow.com/questions/38486803/is-there-a-more-ruby-idiomatic-way-to-remove-creation-of-configurable-object-dep/38489692#38489692", "title": "Is there a more ruby idiomatic way to remove creation of configurable object dependencies?", "body": "<p>I am not seeing any benefit of having a dedicated factory class in Ruby, i.e. it smells of Java-style patterns (working around the fact that classes are not first-class objects there). Why wouldn't you simply:</p>\n\n<pre><code>class Bar\n  def initialize parameter\n    @parameter = parameter\n  end\nend\n\nclass Foo\n  attr_reader :barlike_class\n  def initialize some_parameter, barlike_class: Bar\n    @barlike_class = barlike_class  \n    @some_parameter = some_parameter\n  end\n  def some_method\n    ...\n    ...\n    bar = barlike_class.new parameter\n    ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6909431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxRGw-MzbP0/AAAAAAAAAAI/AAAAAAAAAp8/LsfJr1zyXf8/photo.jpg?sz=128", "display_name": "Vincent Auriac", "link": "https://stackoverflow.com/users/6909431/vincent-auriac"}, "is_accepted": false, "score": 1, "last_activity_date": 1475494346, "creation_date": 1475494346, "answer_id": 39830599, "question_id": 38486803, "link": "https://stackoverflow.com/questions/38486803/is-there-a-more-ruby-idiomatic-way-to-remove-creation-of-configurable-object-dep/39830599#39830599", "title": "Is there a more ruby idiomatic way to remove creation of configurable object dependencies?", "body": "<p>What about depending on a role instead of a concrete class, so you can change the object composition (the objects graph) at runtime.\nMaybe something like :</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class DefaultBar\n  def initialize params\n    @params = params\n  end\n\n  def do_that\n  end\nend\n\nclass AdvancedBar\n  def initialize params\n    @params = params\n  end\n\n  def do_that\n  end\nend\n\nclass Foo\n  def self.default params\n    new params, bareable: DefaultBar.new params\n  end\n\n  def self.advanced params\n    new params, bareable: AdvancedBar.new params\n  end\n\n  def initialize params, bareable:\n    @bareable = bareable  \n    @params   = params\n  end\n\n  def do_this\n    @bareable.do_that\n  end\nend\n\n# it can be used like\nFoo.default.do_this\nFoo.advanced.do_this\n</code></pre>\n\n<p>Here the factories are implemented with class methods, and allow to build the different object graphs.\nYou can even inject the dependency (a mock for example) at construction time if you need it.</p>\n"}], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38489692, "answer_count": 2, "score": 3, "last_activity_date": 1475494346, "creation_date": 1469034809, "last_edit_date": 1469050587, "question_id": 38486803, "link": "https://stackoverflow.com/questions/38486803/is-there-a-more-ruby-idiomatic-way-to-remove-creation-of-configurable-object-dep", "title": "Is there a more ruby idiomatic way to remove creation of configurable object dependencies?", "body": "<p>I am trying to clean up some old code, remove dependencies, and make it more testable.</p>\n\n<p>When I find situations like the following, where a parameterized object is being created in a method. For example in this code:</p>\n\n<pre><code>class Bar\n  def initialize parameter\n    @parameter = parameter\n  end\nend\n\nclass Foo\n  def initialize some_parameter\n    @some_parameter = some_parameter\n  end\n  def some_method\n    ...\n    ...\n    bar = Bar.new parameter  ## here is the dependency I would like to remove\n    ...\n  end\nend \n</code></pre>\n\n<p>I have been creating a factory class and injecting it into the constructor and then using that to create the instance, as shown here:</p>\n\n<pre><code>class Bar\n  def initialize parameter\n    @parameter = parameter\n  end\nend\n\nclass BarFactory\n  def create parameter \n    Bar.new parameter\n  end\nend\n\nclass Foo\n  attr_reader :bar_factory\n  def initialize some_parameter, bar_factory: nil\n    @bar_factory = bar_factory || BarFactory.new  \n    @some_parameter = some_parameter\n  end\n  def some_method\n    ...\n    ...\n    bar = bar_factory.create parameter\n    ...\n  end\nend\n</code></pre>\n\n<p>I think this is an improvement, in that I can inject a different factory for test, or inject a different factory in the future if needed.  But since I find myself doing this more often, I am wondering if I am falling into some anti-pattern, or if there is a more ruby idiomatic way to do the same thing?</p>\n\n<p>Most of the research I did on this generally turns up injecting dependencies into a constructor, which is what I am doing here, but in this case I am injecting a factory rather than a simple object.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "loops"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1469033121, "post_id": 38486149, "comment_id": 64374437, "body": "What is the value of <code>url</code>? And what kind of check you want to to here? Do you want to check if <code>url</code> starts with any of the value in array or you want to check whether url starts with all entries in array?"}, {"owner": {"reputation": 203, "user_id": 4907159, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b50d09a26961049edad0be666d93c7f?s=128&d=identicon&r=PG&f=1", "display_name": "GoYoshi", "link": "https://stackoverflow.com/users/4907159/goyoshi"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1469033219, "post_id": 38486149, "comment_id": 64374490, "body": "url is just an address like www.example.com/content1/test.html and I want to test if the url starts with one of the array values"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1521333680, "post_id": 38486149, "comment_id": 85687018, "body": "FYI, it&#39;s <code>start_with?</code>, not <code>starts_with?</code> It probably should be <code>starts_with?</code> though."}], "answers": [{"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 2, "creation_date": 1469045804, "post_id": 38486389, "comment_id": 64381756, "body": "to dive deeper and understand how/why this works, check out <a href=\"http://blog.honeybadger.io/ruby-splat-array-manipulation-destructuring/\" rel=\"nofollow noreferrer\">blog.honeybadger.io/ruby-splat-array-manipulation-destructur&zwnj;&#8203;ing</a>"}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": true, "score": 17, "last_activity_date": 1469033434, "creation_date": 1469033434, "answer_id": 38486389, "question_id": 38486149, "link": "https://stackoverflow.com/questions/38486149/ruby-passing-an-array-to-starts-with/38486389#38486389", "title": "Ruby: Passing an array to starts_with?", "body": "<p>You can try putting array with splat operator(<code>*</code>) like so:</p>\n\n<pre><code>url = 'www.example.com/content1/test.html'# =&gt; \"www.example.com/content1/test.html\"\narray = [\"www.example.com/content1\", \"www.example.com/content2\", \"www.example.com/content3\"]\nsave_url = url.starts_with?(*array) #=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 1621998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d0641164c77ee079d25c110d4a7e6a?s=128&d=identicon&r=PG", "display_name": "Pragash", "link": "https://stackoverflow.com/users/1621998/pragash"}, "is_accepted": false, "score": 4, "last_activity_date": 1469033480, "creation_date": 1469033480, "answer_id": 38486403, "question_id": 38486149, "link": "https://stackoverflow.com/questions/38486149/ruby-passing-an-array-to-starts-with/38486403#38486403", "title": "Ruby: Passing an array to starts_with?", "body": "<p>You could pass the array of URLs as follows to the <strong>start_with?</strong> method.</p>\n\n<pre><code>save_url = url.start_with?(*array)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 6067360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00049c2c118b987b5984fea212f80580?s=128&d=identicon&r=PG", "display_name": "Mazaz", "link": "https://stackoverflow.com/users/6067360/mazaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1469033915, "creation_date": 1469033915, "answer_id": 38486531, "question_id": 38486149, "link": "https://stackoverflow.com/questions/38486149/ruby-passing-an-array-to-starts-with/38486531#38486531", "title": "Ruby: Passing an array to starts_with?", "body": "<p>start_with accepts multiple strings as arguments, but not an array of multiple strings I don't think.</p>\n\n<p>Why don't you loop array and call start_with inside the loop;</p>\n\n<pre><code>array.each do | valid_url |\n  save_url = url.starts_with? valid_url\n  return unless save_url\n  DBTable.create(url: url)\nend\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 4907159, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b50d09a26961049edad0be666d93c7f?s=128&d=identicon&r=PG&f=1", "display_name": "GoYoshi", "link": "https://stackoverflow.com/users/4907159/goyoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4274, "favorite_count": 2, "accepted_answer_id": 38486389, "answer_count": 3, "score": 8, "last_activity_date": 1539885613, "creation_date": 1469032687, "last_edit_date": 1539885613, "question_id": 38486149, "link": "https://stackoverflow.com/questions/38486149/ruby-passing-an-array-to-starts-with", "title": "Ruby: Passing an array to starts_with?", "body": "<p>I want to check if my url starts with certain strings to save it on to a database afterwards. The strings are stored in an array and since <code>starts_with?</code> accepts multiple values, I want to get all array values in <code>starts_with?</code>.</p>\n\n<pre><code>array = [\"www.example.com/content1\", \"www.example.com/content2\", \"www.example.com/content3\"]\n\nsave_url = url.starts_with?() #here I want to insert all array values, but how?\n\nif save_url #I want to check if save_url is true so my entries are somewhat filtered\nDBTable.create(url: url)\n</code></pre>\n\n<p>So my question is how to pass the array values to starts_with? And how to check if save_url is true. I'm not that good at arrays and loops in Ruby so any help is appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "edited": false, "score": 0, "creation_date": 1469038339, "post_id": 38486063, "comment_id": 64377531, "body": "Can you provide an example of the data you&#39;re sending to your controller as well as the implementation of <code>appointment_params</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 456791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FpYCJ.png?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/456791/bek"}, "is_accepted": false, "score": 0, "last_activity_date": 1469039295, "creation_date": 1469039295, "answer_id": 38488169, "question_id": 38486063, "link": "https://stackoverflow.com/questions/38486063/rails-api-saving-belongs-to-association/38488169#38488169", "title": "Rails API saving belongs_to association", "body": "<p>Try just setting the ID.  It would be helpful to see your model file, though.</p>\n\n<pre><code>appointment.service_id = params[:service][:id]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>appointment.service_id = Service.find(params[:service][:id]).id # if you know service exists...\n</code></pre>\n"}], "owner": {"reputation": 8564, "user_id": 841090, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/CYTJH.jpg?s=128&g=1", "display_name": "Passionate Engineer", "link": "https://stackoverflow.com/users/841090/passionate-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469039295, "creation_date": 1469032403, "question_id": 38486063, "link": "https://stackoverflow.com/questions/38486063/rails-api-saving-belongs-to-association", "title": "Rails API saving belongs_to association", "body": "<p>I'm trying to have below in more of a Rails way.</p>\n\n<p>Given appointment belongs to service:</p>\n\n<pre><code>appointment = Appointment.new(appointment_params)\nappointment.service = Service.find(params[:service][:id])\nappointment.save\n</code></pre>\n\n<p>What I've tried so far:</p>\n\n<pre><code>appointment = Appointment.new(appointment_params)\nappointment.build_service(params[:service])\nappointment.save\n</code></pre>\n\n<p>However with this approach I'm getting <code>ForbiddenAttributesError</code></p>\n\n<p>I cannot use <code>accepts_nested_attributes_for</code> because in strong params I need to use <code>service_attributes</code> but my UI application sends AJAX request without <code>_attributes</code> but rather just <code>service</code> with its attributes.</p>\n\n<p>I don't really like where Rails enforces you to use <code>_attributes</code> popular Javascript frameworks like Angular.js and React.js does not enforce or encourage this pattern after all. Is there a way to override this and still use strong parameters with benefit of using <code>accepts_nested_attributes_for</code>?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1469031467, "post_id": 38485712, "comment_id": 64373513, "body": "\u201cStart of a string\u201d means <i>\u201cstart of a string\u201d</i>, which is not a \u201cstart of word,\u201d nor \u201cstart of something else.\u201d"}], "answers": [{"tags": [], "owner": {"reputation": 2256, "user_id": 461823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95715a2c76d47d0006c0e512dbcc6e0?s=128&d=identicon&r=PG", "display_name": "MrWillihog", "link": "https://stackoverflow.com/users/461823/mrwillihog"}, "is_accepted": true, "score": 4, "last_activity_date": 1469031446, "creation_date": 1469031446, "answer_id": 38485758, "question_id": 38485712, "link": "https://stackoverflow.com/questions/38485712/ruby-regex-unexpected-result/38485758#38485758", "title": "Ruby regex unexpected result", "body": "<p>The start of your string is \"test\" so it doesnt match. You could use the word boundary operator:</p>\n\n<pre><code>/\\bb.../\n</code></pre>\n\n<p>In case you weren't aware there is a neat tool to test regular expressions:</p>\n\n<p><a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n\n<p>A relevant quote from <a href=\"http://www.regular-expressions.info/anchors.html\" rel=\"nofollow\">Regex Tutorial</a>:</p>\n\n<blockquote>\n  <p>\\A only ever matches at the start of the string. Likewise, \\Z only\n  ever matches at the end of the string. These two tokens never match at\n  line breaks. This is true in all regex flavors discussed in this\n  tutorial, even when you turn on \"multiline mode\". In EditPad Pro and\n  PowerGREP, where the caret and dollar always match at the start and\n  end of lines, \\A and \\Z only match at the start and the end of the\n  entire file.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 6054465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e0b16993934b668310023bafafc468?s=128&d=identicon&r=PG&f=1", "display_name": "Phpinter", "link": "https://stackoverflow.com/users/6054465/phpinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 38485758, "answer_count": 1, "score": -1, "last_activity_date": 1469031831, "creation_date": 1469031276, "last_edit_date": 1469031831, "question_id": 38485712, "link": "https://stackoverflow.com/questions/38485712/ruby-regex-unexpected-result", "title": "Ruby regex unexpected result", "body": "<p>In this code,</p>\n\n<pre><code>\"test bold bind abcd\".scan(/\\Ab.../) {|x| puts x}\n</code></pre>\n\n<p>I used <code>\\A</code>, which indicates start of a string, then <code>b</code>, and three any characters. In my opinion, it should output:</p>\n\n<pre><code>bold\nbind\n</code></pre>\n\n<p>but it outputs nothing. Can someone explain why this regex behaves different from what I expect?</p>\n"}, {"tags": ["ruby", "command-line", "ubuntu-14.04", "executable"], "comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 1, "creation_date": 1469030830, "post_id": 38485386, "comment_id": 64373107, "body": "Assuming some *nix variant, you&#39;d need to make it executable (<code>chmod +x sampleapp</code>), and have it live in a directory that&#39;s in your (or more generally the caller&#39;s) <code>$PATH</code>. As the already given answer suggests, one way to do this is to put it in <code>&#47;usr&#47;local&#47;bin</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1469031070, "post_id": 38485386, "comment_id": 64373264, "body": "@DerrellDurrett I doubt you understand how ruby classpath works."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469034712, "post_id": 38485386, "comment_id": 64375370, "body": "There are great libraries for this take a look at <a href=\"https://github.com/erikhuda/thor\" rel=\"nofollow noreferrer\"><code>thor</code></a> or <a href=\"https://github.com/leejarvis/slop\" rel=\"nofollow noreferrer\"><code>slop</code></a> they can make this task much easier and far more friendly when scope creep causes &quot;Simple&quot; to all of sudden change to &quot;Complex&quot;."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469051904, "post_id": 38485386, "comment_id": 64384591, "body": "This is an OS question, not Ruby. The file has to be in the executable path to do what you want."}], "answers": [{"comments": [{"owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 0, "creation_date": 1469030841, "post_id": 38485530, "comment_id": 64373117, "body": "I have created a gem too but I&#39;m not sure how I&#39;d run it as a console application. I&#39;m updating the question with dependencies."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 1, "creation_date": 1469030940, "post_id": 38485530, "comment_id": 64373178, "body": "Read how to create executables and ship them with a gem in the article I linked (section \u201cADDING AN EXECUTABLE\u201d.)"}, {"owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 0, "creation_date": 1469031643, "post_id": 38485530, "comment_id": 64373611, "body": "The question remains. How and what should I ship so that it runs on another machine as stated in the question?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 0, "creation_date": 1469032588, "post_id": 38485530, "comment_id": 64374140, "body": "A gem. When the gem will be installed on another machine, dependencies will be resolved and the executables will be automatically made available for the execution. <b>Please read the article I linked, instead of asking questions, that are perfectly answered there.</b>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469052082, "post_id": 38485530, "comment_id": 64384650, "body": "There is no need to copy the file to a directory, just make sure the directory is in the PATH."}, {"owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 0, "creation_date": 1469087161, "post_id": 38485530, "comment_id": 64395996, "body": "Thank you @mudasobwa. For some reason, it worked only when the folder was copied to /usr/local/bin. I do want to create a gem for such a small test app so I guess I&#39;ll ask them to follow the same steps to make the script executable."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469088202, "post_id": 38485530, "comment_id": 64396630, "body": "Welcome. You might also want to just tune the <code>$PATH</code> variable as suggested by @theTinMan above."}, {"owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 0, "creation_date": 1469091063, "post_id": 38485530, "comment_id": 64398532, "body": "It doesn&#39;t seem to have any effect. I added the directory path to /usr/local/bin but then removed it to understand what worked. It seems just by copying the folder as you suggested, it is working as expected. By folder I mean a script without any extension containing ruby code. Now when I type, &gt; sampleapp some_param, it works fine."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469121254, "post_id": 38485530, "comment_id": 64418471, "body": "You shouldn&#39;t copy a <i>folder</i> to /usr/local/bin, only individual files, or create a symlink in /usr/local/bin to the file in its original location. &quot;added the directory path to /usr/local/bin&quot; doesn&#39;t make sense. Did you add <code>&#47;usr&#47;local&#47;bin</code> to your PATH because it didn&#39;t exist already? A folder isn&#39;t a script, just as a folder isn&#39;t a file. Whether a file has an extension or not doesn&#39;t change it into a folder, it remains a file."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1469030726, "creation_date": 1469030726, "answer_id": 38485530, "question_id": 38485386, "link": "https://stackoverflow.com/questions/38485386/simple-command-line-ruby-application/38485530#38485530", "title": "simple command line Ruby application", "body": "<p>If this script does not depend on any 3rd party library (what is unlikely) and runs smoothly with system <code>ruby</code>, the easiest way would be to copy it to <code>/usr/local/bin</code> folder:</p>\n\n<pre><code>sudo cp ./sampleapp /usr/local/bin/\n</code></pre>\n\n<p>If it depends on other libraries, the preferred way would be to build a gem out of it, and install it with system <code>ruby</code>. There are many tutorials on how to produce a <code>gem</code>, <a href=\"http://guides.rubygems.org/make-your-own-gem/\" rel=\"nofollow\">the canonical one is likely this</a>.</p>\n"}], "owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 38485530, "answer_count": 1, "score": 0, "last_activity_date": 1469079325, "creation_date": 1469030360, "last_edit_date": 1469079325, "question_id": 38485386, "link": "https://stackoverflow.com/questions/38485386/simple-command-line-ruby-application", "title": "simple command line Ruby application", "body": "<p>I have been asked to develop a simple command line Ruby application that retrieves results from an external API with a specified search query. I have created a script to do that and made it executable using <code>#!/usr/bin/env ruby</code>. My script name is <strong>sampleapp.rb</strong>. So I can run it from console as </p>\n\n<pre><code>$&gt; ./sampleapp some_argument\n</code></pre>\n\n<p>That is only when I am inside the file directory.</p>\n\n<p>In the example given to me, the script/app was supposed to run like this:</p>\n\n<pre><code>$&gt; sampleapp some_argument\n</code></pre>\n\n<p>I did a lot of research but couldn't find a way to achieve this. Please guide me here.</p>\n\n<p>Also, how can I make this sampleapp global so it can be called from anywhere.</p>\n\n<p>Update:</p>\n\n<p><strong>sampleapp.rb</strong></p>\n\n<pre><code>require 'net/https'\nrequire 'openssl'\nrequire 'json'\nrequire 'uri'\nrequire 'cgi'\n\nmodule Someapp\n\n  class SampleApp\n\n    def search(query =\"\")\n     ...some code here ...\n    end\n\n  if ARGV.size == 0 || ARGV[0].strip == \"\"\n    puts \"Please provide search query as an argument\"\n  else\n    query = ARGV[0].strip\n    SampleApp.new.search(query)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "mongoid", "factory-bot"], "comments": [{"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469049530, "post_id": 38485181, "comment_id": 64383615, "body": "Update - this issue seems related to my problem <a href=\"https://github.com/mongoid-rspec/mongoid-rspec/issues/135\" rel=\"nofollow noreferrer\">github.com/mongoid-rspec/mongoid-rspec/issues/135</a>"}], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469031109, "post_id": 38485340, "comment_id": 64373296, "body": "It works when I take off all of the password validations, but it doesn&#39;t look like it&#39;s validating presence anymore."}, {"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469031126, "post_id": 38485340, "comment_id": 64373306, "body": "<code>user = build(:user, password: &quot;      &quot;).valid?</code> returns true"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469031285, "post_id": 38485340, "comment_id": 64373404, "body": "Weird, it should according to the rails api.  You can always add the presence validation back in if you can&#39;t track down why it&#39;s not working."}, {"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469031737, "post_id": 38485340, "comment_id": 64373673, "body": "Oh, I should&#39;ve mentioned -- the moment I add the presence validation back, the original issue starts to occur again"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 0, "last_activity_date": 1469030262, "creation_date": 1469030262, "answer_id": 38485340, "question_id": 38485181, "link": "https://stackoverflow.com/questions/38485181/error-using-factorygirl-with-has-secure-password-in-feature-spec/38485340#38485340", "title": "Error using FactoryGirl with has_secure_password in feature spec", "body": "<p>You're always running your additional validation.  <code>has_secure_password</code> already checks for the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow\">password</a>.  So you don't need the presence validation.  </p>\n\n<p>You could simply make your validation conditional</p>\n\n<pre><code>validates :password, length: { minimum: 6 }, if: Proc.new{|u| u.password_changed? }\n</code></pre>\n\n<p>Should work I think using ActiveModel::Dirty</p>\n\n<p>If not you can just run the validation if it's present.</p>\n\n<pre><code>validates :password, length: { minimum: 6 }, if: Proc.new{|u| u.password.present? }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469049485, "post_id": 38490195, "comment_id": 64383595, "body": "Doesn&#39;t work, even after changing the order. I think I found an unresolved github issue about the problem I&#39;m having that I added to the post."}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469051194, "post_id": 38490195, "comment_id": 64384325, "body": "@ben-muschol can you please add a link to the Github issue in case other users are experiencing the same problem? Thank you."}, {"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469054677, "post_id": 38490195, "comment_id": 64385488, "body": "It&#39;s in a comment on the post, here&#39;s the link: <a href=\"https://github.com/mongoid-rspec/mongoid-rspec/issues/135\" rel=\"nofollow noreferrer\">github.com/mongoid-rspec/mongoid-rspec/issues/135</a>"}], "tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 0, "last_activity_date": 1469046453, "last_edit_date": 1469046453, "creation_date": 1469046209, "answer_id": 38490195, "question_id": 38485181, "link": "https://stackoverflow.com/questions/38485181/error-using-factorygirl-with-has-secure-password-in-feature-spec/38490195#38490195", "title": "Error using FactoryGirl with has_secure_password in feature spec", "body": "<p>I decided to take a look at the <a href=\"https://www.railstutorial.org/book/modeling_users#sec-adding_a_secure_password\" rel=\"nofollow\">\"Rails Tutorial - Adding a secure password\"</a> section by Michael Hartl. I saw that he wrote the code with <code>has_secure_password</code> <strong>before</strong> <code>validates</code>, as shown below:</p>\n\n<pre><code>has_secure_password\nvalidates :password, presence: true, length: { minimum: 6 }\n</code></pre>\n\n<p>Try changing the order of and see if that works. I have note tested it but this is one of the main resources I used when I was starting out and it worked for me in the past. Good Luck. </p>\n"}, {"comments": [{"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "edited": false, "score": 0, "creation_date": 1469215378, "post_id": 38520544, "comment_id": 64461563, "body": "This pretty much solves it, thanks! One thing to add is that the default validation still allows empty strings to be submitted via a password reset, so there should be an additional validation that checks that <code>password.nil? || password.present?</code> is true"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1563800276, "last_edit_date": 1563800276, "creation_date": 1469172323, "answer_id": 38520544, "question_id": 38485181, "link": "https://stackoverflow.com/questions/38485181/error-using-factorygirl-with-has-secure-password-in-feature-spec/38520544#38520544", "title": "Error using FactoryGirl with has_secure_password in feature spec", "body": "<p>It is important to understand how <code>has_secure_password</code> works internally: </p>\n\n<p>When a user is created or its password should be changed, its <code>password</code> (and \u2013 depending on the configuration \u2013 a <code>password_confirmation</code>) attribute has to be set. But internally the <code>password</code> field is <em>not</em> stored in the database, but its value is hashed and stored in a database field named <code>password_digest</code>.</p>\n\n<p>That means: When you load an existing user from the database, its <code>password</code> attribute will be <code>nil</code> (but <code>password_digest</code> should still be present). Therefore it will not be valid when you check such a user for the presence of a <code>password</code>.</p>\n\n<p>To avoid this problem only validate for the presence of a password when creating a new user or if the user has a <code>password</code> that is not blank which means the user tries to update its password:</p>\n\n<pre><code># there must be a password on create\nvalidates :password, presence: true, on: :create\n\n# the password must follow conventions when present (of example on update)\nvalidates :password, length: { minimum: 6 }, allow_blank: true\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 38520544, "answer_count": 3, "score": 1, "last_activity_date": 1563800276, "creation_date": 1469029802, "question_id": 38485181, "link": "https://stackoverflow.com/questions/38485181/error-using-factorygirl-with-has-secure-password-in-feature-spec", "title": "Error using FactoryGirl with has_secure_password in feature spec", "body": "<p>Also using mongoid if that's relevant.</p>\n\n<p>When I create a user with factory girl, it says the user is valid. However, when I access that user via ActiveRecord, is says it's invalid. Here's an overview of the issue:</p>\n\n<pre><code>user = create(:user, :activated)\nuser.valid? # =&gt; true\nUser.count # =&gt; 1\ndb_user = User.first\ndb_user == user # =&gt; true\ndb_user.valid? # =&gt; false\ndb_user.errors.count # =&gt; 0\n# it only shows the error messages once I try to modify an attribute\ndb_user.email = \"user@example.com\"\ndb_user.save # =&gt; false\ndb_user.errors # =&gt; @messages={:password=&gt;[\"is too short (minimum is 6 characters)\", \"can't be blank\"]}\n</code></pre>\n\n<p>Here's my factory:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n    name { Faker::Name.name }\n    email { \"#{name.gsub(/[^0-9a-zA-Z]/i, '')}@example.com\" }\n    phone { Faker::Base.numerify(\"#{\"#\" * 10}\") }\n    admin false\n    password \"password\"\n    password_confirmation \"password\"\n  end\nend\n</code></pre>\n\n<p>Here's the relevant parts of the User model:</p>\n\n<pre><code>class User\n  include Mongoid::Document\n  include ActiveModel::SecurePassword\n\n  field :name,              type: String\n  field :email,             type: String\n  validates :password, length: { minimum: 6 },\n                      presence: true\n  has_secure_password\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1469029613, "post_id": 38484987, "comment_id": 64372229, "body": "There is no calculation for the answer."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1469029920, "post_id": 38484987, "comment_id": 64372439, "body": "Poor form but simple solution as long as you can trust the people entering is <code>&quot;answer: #{eval(problem)}&quot;</code> but do not do this. Also no need to pipe in <code>|problem|</code> as this would be <code>n</code> in times but you are just ignoring it anyway."}, {"owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469030123, "post_id": 38484987, "comment_id": 64372568, "body": "Why should I not use eval if it works? @engineersmnky"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1469030207, "post_id": 38484987, "comment_id": 64372629, "body": "because <code>eval</code> will evaluate anything the user puts in there without prejudice this means a knowledgeable user can do a lot of damage and falls under the rule of <b>NEVER TRUST USER INPUT</b>. for a non damaging example type the question raise StandardError."}], "answers": [{"comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1469031486, "post_id": 38485348, "comment_id": 64373524, "body": "Watch out - ^$ are end of line markers, so your code would accept as a valid problem strings such as <code>&quot;1+2\\nputs(&#39;hello&#39;)&quot;</code>"}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1469086780, "post_id": 38485348, "comment_id": 64395705, "body": "You&#39;re right. But in his case, the <code>problem</code> string comes from a user input, where he cannot type return without ending the input string."}, {"owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "edited": false, "score": 0, "creation_date": 1469116033, "post_id": 38485348, "comment_id": 64415378, "body": "Thanks your code worked but could you explain the problem_is_ok line to me? I&#39;ve never seen the =~ operator before and I would also like to include parentheses in that statement because parentheses cause an error. @Caillou"}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "edited": false, "score": 0, "creation_date": 1469177699, "post_id": 38485348, "comment_id": 64439461, "body": "<code>=~</code> is Ruby&#39;s basic pattern-matching operator. When it is used between a regular expression and a string, then the regular expression is used as a pattern to match against the string. Here is the very well explained ruby documentation about Regexp and this operator : <a href=\"http://ruby-doc.org/core-2.3.0/Regexp.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.0/Regexp.html</a>"}], "tags": [], "owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "is_accepted": true, "score": 0, "last_activity_date": 1469087128, "last_edit_date": 1469087128, "creation_date": 1469030285, "answer_id": 38485348, "question_id": 38484987, "link": "https://stackoverflow.com/questions/38484987/how-to-solve-ruby-string/38485348#38485348", "title": "How to solve ruby string", "body": "<p>Inside your loop, instead of:</p>\n\n<pre><code>problem = gets.chomp\nputs \"answer: #{problem}\"\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>problem = gets.chomp\nsolved_problem = eval(problem)\nputs \"answer : #{solved_problem}\"\n</code></pre>\n\n<p><code>eval</code> will take care of interpreting your string as a Ruby instruction. But it's very messy, because anyone could write any Ruby program in your input  and <code>eval</code> will make it run, so it's not safe at all.</p>\n\n<p>If you only want to take care of simple operations, you can use a <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow\">regex</a> first to check if the input string looks like what you want:</p>\n\n<pre><code>problem_is_ok = (problem =~ /^\\d+ *[+-] *\\d+$/)\n</code></pre>\n\n<p>This will be <code>true</code> if the string starts with a number, followed by 0 to many spaces, followed by either a <code>+</code> or <code>-</code> sign, followed by 0 or more spaces, followed by another number and nothing else. Then you raise an error if this is not true.</p>\n\n<p>Your loop now look like this:</p>\n\n<pre><code>questions.times do |problem|\n    puts \"question: \"\n    problem = gets.chomp\n    problem_is_ok = (problem =~ /^\\d+ *[+-] *\\d+$/)\n    if problem_is_ok\n        puts \"answer: #{eval(problem)}\"\n    else\n        #I raise an error, but you might aswell just print it instead for your simple program\n        raise ArgumentError(\"Can't compute this\")\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1469052527, "post_id": 38488693, "comment_id": 64384813, "body": "When answering please provide some explaination of the code. Instead of handing someone the answer, teach them why it is the answer so they can build upon it."}], "tags": [], "owner": {"reputation": 6127, "user_id": 1783588, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mU0bj.png?s=128&g=1", "display_name": "jasonleonhard", "link": "https://stackoverflow.com/users/1783588/jasonleonhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1469722897, "last_edit_date": 1469722897, "creation_date": 1469041018, "answer_id": 38488693, "question_id": 38484987, "link": "https://stackoverflow.com/questions/38484987/how-to-solve-ruby-string/38488693#38488693", "title": "How to solve ruby string", "body": "<p>Add and subtract can be simple ruby definitions</p>\n\n<p>We pass in 5 and 1</p>\n\n<p>The lower portion of the code is the clear user interface implementation</p>\n\n<p>when we loop we do it 3 times</p>\n\n<p>It outputs 3 options for the user to select from</p>\n\n<p>We read in with chomp, standard in, the keyboard, chooses 1, 2, or 3</p>\n\n<p>If elsif statements conditionally select for each case</p>\n\n<p>Using string interpolation we render the variables a and b into a new string,\nand run their respective methods (add or subtract)</p>\n\n<p>Converting that methods integer output to a string, and concatenate it.</p>\n\n<p>Outputting that to the users screen</p>\n\n<p>The 3rd option does no calculation, </p>\n\n<p>instead it prints to users screen a simple string</p>\n\n<p>our else condition catches the case when people don't enter one of the choices of 1, 2 or 3</p>\n\n<p>It tells you to correct your choice to the options provided</p>\n\n<p>Hope this helps</p>\n\n<pre><code>#!/usr/bin/env ruby\nquestions = 3\na, b = 5, 1\n\ndef add(a,b)\n  a + b\nend\n\ndef subtract(a,b)\n  a - b\nend\n\nquestions.times do |questions|\n    puts \"Please choose:\n      1. add\n      2. subtract \n      3. exit\"\n    questions = gets.chomp\n\n    if questions == '1'\n      puts \"#{a} + #{b} = \" + add(a,b).to_s\n    elsif questions == '2'\n      puts \"#{a} - #{b} = \" + subtract(a,b).to_s\n    elsif questions == '3'\n      puts 'exiting, goodbye.'\n      exit\n    else\n      p 'please choose again'\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1469087445, "accepted_answer_id": 38485348, "answer_count": 2, "score": -4, "last_activity_date": 1469722897, "creation_date": 1469029298, "last_edit_date": 1469029458, "question_id": 38484987, "link": "https://stackoverflow.com/questions/38484987/how-to-solve-ruby-string", "closed_reason": "Needs details or clarity", "title": "How to solve ruby string", "body": "<p>I'm new to ruby, and I'm trying to make a simple calculator in which a user types in a simple problem (such as addition or subtraction) and the answer is returned. The problem is when the user types in a question, the question itself is being returned instead of the answer to that question.</p>\n\n<pre><code>puts \"How many Questions?\"\nquestions = gets.chomp.to_i\n\nquestions.times do |problem|\n    puts \"question: \"\n    problem = gets.chomp\n    puts \"answer: #{problem}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org", "fixtures"], "comments": [{"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469057690, "post_id": 38484939, "comment_id": 64386330, "body": "what does the is_logged_in? method in the test look like"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6495201"}, "reply_to_user": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469121767, "post_id": 38484939, "comment_id": 64418758, "body": "# Returns true if a test user is logged in.    def is_logged_in?     !session[:user_id].nil?   end"}], "owner": {"user_type": "does_not_exist", "display_name": "user6495201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469029833, "creation_date": 1469029147, "last_edit_date": 1469029833, "question_id": 38484939, "link": "https://stackoverflow.com/questions/38484939/fixture-error-when-running-test-hartl-chapter-8", "title": "Fixture error when running test Hartl Chapter 8", "body": "<p>I'm at the last section of Chapter 8 and need my last test suite to be green before pushing to Heroku. For some reason I'm getting an error that I think dates back to Chapter 6 when I was creating users (had some issues then).</p>\n\n<p>Here's the following error:</p>\n\n<pre><code>  1) Failure:\nSessionsHelperTest#test_current_user_returns_right_user_when_session_is_nil\n[/Users/carlosgrijalva/workspace/sample_app/test/helpers/sessions_helper_test.rb:11]:\n--- expected\n+++ actual\n@@ -1 +1 @@\n-#&lt;User id: 762146111, name: \"Michael Hartl\", email: \"mhartl@example.com\", \ncreated_at: \"2016-07-20 14:56:07\", updated_at: \"2016-07-20 14:56:12\", \npassword_digest: \"$2a$04$ll9WRPhi4/y65RgRqiMwiO4evjbp8mR1FwCTIkdZsMA...\", \nremember_digest: \"$2a$04$IOc/zghNtUBNFi45l96DwOc7YYUT2f2BJsob5wLg/c0...\"&gt;\n+nil\n</code></pre>\n\n<p><strong>users_login_test.rb</strong></p>\n\n<pre><code>require 'test_helper'\n\nclass SessionsHelperTest &lt; ActionView::TestCase\n\n  def setup\n    @user = users(:michael)\n    remember(@user)\n  end\n\n  test \"current_user returns right user when session is nil\" do\n    assert_equal @user, current_user\n    assert is_logged_in?\n  end\n\n  test \"current_user returns nil when remember digest is wrong\" do\n    @user.update_attribute(:remember_digest, User.digest(User.new_token))\n    assert_nil current_user\n  end\nend\n</code></pre>\n\n<p><strong>users.yml</strong></p>\n\n<pre><code>michael:\n  name: Michael Hartl\n  email: mhartl@example.com\n  password_digest: &lt;%= User.digest('password') %&gt;\n</code></pre>\n\n<p>Now, I think this goes back to Chapter 6 when I was playing around with users. I ended up deleting the first one I created and ended up making 2 users with different names/emails:</p>\n\n<p><em>first user</em></p>\n\n<pre><code>2.3.1 :001 &gt; User.first\n  User Load (0.6ms)  SELECT  \"users\".* FROM \"users\"  ORDER BY \"users\".\"id\" ASC LIMIT 1\n =&gt; #&lt;User id: 1, name: \"Rails Tutorial\", email: \"example@railstutorial.com\", \ncreated_at: \"2016-07-05 21:54:47\", \nupdated_at: \"2016-07-05 21:54:47\", \npassword_digest: \"$2a$10$KH0GTDtLldSCWy6xAUebZuFH11U7DPmkT6uZAZQ0xf2...\", \nremember_digest: nil&gt;\n</code></pre>\n\n<p><em>second user</em></p>\n\n<pre><code>2.3.1 :002 &gt; User.second\n  User Load (1.2ms)  SELECT  \"users\".* FROM \"users\"  ORDER BY \"users\".\"id\" ASC LIMIT 1 OFFSET 1\n =&gt; #&lt;User id: 2, name: \"Example User2\", email: \"example2@railstutorial.com\", \ncreated_at: \"2016-07-07 18:17:20\", updated_at: \"2016-07-19 21:40:31\",   \npassword_digest: \"$2a$10$GzAoNK2GDp5ne1hTb70jDuO8m1ydthy879Xto/gJpWx...\", \nremember_digest: \"$2a$10$I/yQhO/HLNkGF9aUk9ldMeZvuBHYK2akM1b0at1n1bk...\"&gt;\n</code></pre>\n\n<p>I'm not sure if this has anything to do with the error but it seemed relevant. Any advice would be appreciated, thanks.</p>\n"}, {"tags": ["ruby", "encryption", "openssl"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1469031910, "post_id": 38484724, "comment_id": 64373757, "body": "Your <code>openssl</code> command is generating a signed MD5 digest from the data. Your Ruby code is generating an (unsigned) MD5 digest and then encrypting the hex digest with RSA. Those are really different things."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1469034061, "creation_date": 1469034061, "answer_id": 38486574, "question_id": 38484724, "link": "https://stackoverflow.com/questions/38484724/creating-a-digital-signature-in-ruby-without-command-line/38486574#38486574", "title": "Creating a digital signature in Ruby without command line", "body": "<p>Your <code>openssl</code> command and your Ruby code do very different things. Your <code>openssl</code> command says \"generate an MD5 digest signed with my RSA key and print it in hex format.\" Your Ruby code says \"generate an (unsigned) MD5 digest in hex format and then encrypt it with my RSA key.\" Digest generation and encryption are not the same thing and are not going to give you the same result.</p>\n\n<p>The Ruby equivalent to your <code>openssl</code> command is this:</p>\n\n<pre><code>data = 'loremipsum'\ndigest = OpenSSL::Digest::MD5.new\npkey = OpenSSL::PKey::RSA.new(File.read(\"keys/#02299991.privKey.pem\"))\nsignature = pkey.sign(digest, data)\nhex_signature = signature.unpack('H*').first\n</code></pre>\n\n<p>The first four lines are practically verbatim from the docs for <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/openssl/rdoc/OpenSSL/PKey/PKey.html#method-i-sign\" rel=\"nofollow\"><code>OpenSSL::PKey::PKey#sign</code></a>. That method returns a binary string (I couldn't find a way to get a hex string directly; if anyone knows a way please leave a comment), so we have to use <a href=\"http://ruby-doc.org/core-2.3.1/String.html\" rel=\"nofollow\"><code>String#unpack</code></a> to turn it into a hex string. (<code>unpack</code> returns an array, ergo <code>.first</code>.)</p>\n"}], "owner": {"reputation": 25, "user_id": 3415841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a92799b478bd4f012886452587a6f3?s=128&d=identicon&r=PG&f=1", "display_name": "FlappyBird", "link": "https://stackoverflow.com/users/3415841/flappybird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 1, "accepted_answer_id": 38486574, "answer_count": 1, "score": 1, "last_activity_date": 1469034061, "creation_date": 1469028587, "question_id": 38484724, "link": "https://stackoverflow.com/questions/38484724/creating-a-digital-signature-in-ruby-without-command-line", "title": "Creating a digital signature in Ruby without command line", "body": "<p>I'd like to migrate this unix script o ruby:</p>\n\n<pre><code>echo -n \"loremipsum\" | openssl dgst -md5 -hex -sign keys/#02299991.privKey.pem\n</code></pre>\n\n<p>The result is the following:</p>\n\n<pre><code>(stdin)= 08d9d6496a5146bc1955ad35c884e3b843d441eebc9ed7908b220e9414132dad57dc0f4744e5ec4a9a819e20f4099e2c90186b4684b3b52d1409dd4ca5bc86e7c16dbb64e6cf41d695a7e979744616fe92e5347a7acbb1e1da902d3cfc629927adf3e119f33d2cbc89f90f9494d44becbf93855d09460a67e2615e7d8df7e4f8\n</code></pre>\n\n<p>I'm using the following code:</p>\n\n<pre><code>key = OpenSSL::PKey::RSA.new(File.read(\"keys/#02299991.privKey.pem\"))\nmd5_hash = Digest::MD5.hexdigest 'loremipsum' # result: 65a73f29730d3519bd7dd98ab954ed56\nkey.private_encrypt md5_hash \n</code></pre>\n\n<p>And this is the problem private_encrypt creates a very different hash from the one that i generated with command line:</p>\n\n<pre><code>\"B62\\xDA\\x80\\xF9\\xFF]\\xCE;\\a\\xB3)fC\\xA8v\\x9EM5\\xF8Z\\xA9\\x00\\b\\xA4\\x95 \\x84\\x8A\\xD6:\\xDA\\xCE\\x1D\\x01\\x9F&amp;\\xEB\\xD5\\xD6\\xDF\\xC0\\v\\xD8i\\xA0\\x86\\x8E\\e`\\x98\\xB9\\x19\\xEC\\xA7\\x8A\\\\.\\xD1\\xCC\\xFC\\x93\\x1C\\xFF\\xFFh\\xAFw\\t\\xFF\\xC8Z\\xEC\\xBDP\\x9C_\\x03%\\x85:\\x04\\x1C=\\xF3\\xAC\\xE1\\x917TO\\x94\\xB2\\x9Fd`3\\x98\\x04\\x93\\xBFS\\\\\\xD1Z\\xF9\\xBD\\x91\\xE3\\xA1:\\xA3B22U_FI'`0i\\x8D(\\x9B`\"\n</code></pre>\n\n<p>what's wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1469028432, "post_id": 38484063, "comment_id": 64371440, "body": "The error seems to originate in <code>app&#47;services&#47;create_programa_api.rb</code>. Please include the contents of that file in your post."}, {"owner": {"reputation": 3, "user_id": 6610766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOsMp.jpg?s=128&g=1", "display_name": "Thiago Amaral", "link": "https://stackoverflow.com/users/6610766/thiago-amaral"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1469033122, "post_id": 38484063, "comment_id": 64374439, "body": "@TomLord Hello , I &#39;ve edited the post and added the contents of the file create_programa_api.rb  Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 1805815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a0f6ad7b9695817dc6c193508dbc8?s=128&d=identicon&r=PG", "display_name": "Konstantin Ilchenko", "link": "https://stackoverflow.com/users/1805815/konstantin-ilchenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1469039626, "creation_date": 1469039626, "answer_id": 38488287, "question_id": 38484063, "link": "https://stackoverflow.com/questions/38484063/activerecordassociationtypemismatch-gotnilclass/38488287#38488287", "title": "ActiveRecord::AssociationTypeMismatch gotNilClass", "body": "<p>You have <code>nil</code> object in <code>params[:estados]</code>, and Rails can't save this association.\nEasiest way to remove them is to call <code>params[:estados].compact!</code> after line 14</p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1469047903, "creation_date": 1469047903, "answer_id": 38490631, "question_id": 38484063, "link": "https://stackoverflow.com/questions/38484063/activerecordassociationtypemismatch-gotnilclass/38490631#38490631", "title": "ActiveRecord::AssociationTypeMismatch gotNilClass", "body": "<p>This block of code is your problem:</p>\n\n<pre><code>params[:estados] = []\nif programa_api[:estados].size == 27\n  params[:estados] &lt;&lt; Estado.find_by(sigla: 'Todos')\nelse\n  programa_api[:estados].each do |e|\n    params[:estados] &lt;&lt; Estado.find_by(sigla: e)\n  end\nend\n</code></pre>\n\n<p>If no record is found, the <code>#find_by</code> returns <code>nil</code>. This is why you are getting the error:</p>\n\n<pre><code>ActiveRecord::AssociationTypeMismatch: Estado(#47392639701120) expected, got NilClass\n</code></pre>\n\n<p>When calling <code>Programa.create!(params)</code>.</p>\n\n<p>One solution would be to call <code>params[:estados].compact!</code> after the <code>if</code> statement (this is using <a href=\"http://ruby-doc.org/core/Array.html#method-i-compact-21\" rel=\"nofollow\"><code>Array#compact!</code></a> to remove any <code>nil</code> values).</p>\n\n<p>Or, you could instead write that section of code like this:</p>\n\n<pre><code>params[:estados] = Estadio.where(\n  sigla: (programa_api[:estados].size == 27 ? 'Todos' : programa_api[:estados])\n)\n</code></pre>\n\n<p>With this code, there is no longer a need to call <code>compact!</code> since we already end up with an <em>empty</em> array if no records are found (i.e. there are no <code>nil</code> values).</p>\n\n<p>Note that the behaviour here isn't <em>quite</em> the same - what happens if there are multiple <code>Estado</code> records with the <code>sigla</code> equal to one of <code>programa_api[:estados]</code> or <code>'Todos'</code>? Previously you were only fetching the \"first\" such record, whereas now you'd be fetching <em>all</em> of them. This may not be an issue (or may even be the correct behaviour!!) - it's just something to be aware of, at least.</p>\n"}], "owner": {"reputation": 3, "user_id": 6610766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOsMp.jpg?s=128&g=1", "display_name": "Thiago Amaral", "link": "https://stackoverflow.com/users/6610766/thiago-amaral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 38488287, "answer_count": 2, "score": 0, "last_activity_date": 1469047903, "creation_date": 1469024927, "last_edit_date": 1469047021, "question_id": 38484063, "link": "https://stackoverflow.com/questions/38484063/activerecordassociationtypemismatch-gotnilclass", "title": "ActiveRecord::AssociationTypeMismatch gotNilClass", "body": "<p>I am a beginner programmer in Ruby and Ruby on Rails , I'm trying to run a rake command in my task , but when I do the following happens:</p>\n\n<pre><code>rake daily_tasks:process_api\n\nrake aborted!\nActiveRecord::AssociationTypeMismatch: Estado(#47392639701120) expected, got NilClass(#47392580444120)\n/home/thiagoamaralr/Desktop/proponente-master-4f8a3b2ddb02a90b2c173cf31383505018d02dd/app/services/create_programa_api.rb:21:in `call'\n/home/thiagoamaralr/Desktop/proponente-master-74f8a3b2ddb02a90b2c173cf31383505018d02dd/lib/tasks/daily_tasks.rake:7:in `block (3 levels) in &lt;top (required)&gt;'\n/home/thiagoamaralr/Desktop/proponente-master-74f8a3b2ddb02a90b2c173cf31383505018d02dd/lib/tasks/daily_tasks.rake:5:in `each'\n/home/thiagoamaralr/Desktop/proponente-master-74f8a3b2ddb02a90b2c173cf31383505018d02dd/lib/tasks/daily_tasks.rake:5:in `block (2 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; daily_tasks:process_api\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Follow the task I'm trying to run:</p>\n\n<pre><code>namespace :daily_tasks do\n  desc \"Process the day to day tasks\"\n  task process_api: :environment do\n\n    SiconvApi::Programa.find.each do |programa|\n      if programa.data_inicio_recebimento_propostas &amp;&amp; (programa.data_inicio_recebimento_propostas.to_date &gt;= Date.parse(\"2015/06/01\"))\n        CreateProgramaApi.call(SiconvApi::Serializers::Programa.new(programa))\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And this is content create_programa_api.rb:</p>\n\n<pre><code>class CreateProgramaApi\n  def self.call(programa_api)\n    params = programa_api.to_h\n    params[:orgao] = Orgao.where(\"lower(name) = ?\", programa_api[:orgao][:nome].mb_chars.downcase).first_or_create(name: programa_api[:orgao][:nome])\n    params[:orgao_vinculado] = Orgao.where(\"lower(name) = ?\", programa_api[:orgao_vinculado][:nome].mb_chars.downcase).first_or_create(name: programa_api[:orgao_vinculado][:nome])\n    params[:orgao_executor] = Orgao.where(\"lower(name) = ?\", programa_api[:orgao_executor][:nome].mb_chars.downcase).first_or_create(name: programa_api[:orgao_executor][:nome])\n    params[:estados] = []\n    if programa_api[:estados].size == 27\n      params[:estados] &lt;&lt; Estado.find_by(sigla: 'Todos')\n    else\n      programa_api[:estados].each do |e|\n        params[:estados] &lt;&lt; Estado.find_by(sigla: e)\n      end\n    end\n    params[:atendes] = [Atende.where(\"lower(name) = ?\", programa_api[:atende_a].mb_chars.downcase).first_or_create(name: programa_api[:atende_a])] if programa_api[:atende_a]\n    params.delete(:atende_a)\n    programa = Programa.find_by(codigo: programa_api[:codigo])\n    if programa\n      programa.update(params)\n    else\n      Programa.create! params\n    end\n  end\nend\n</code></pre>\n\n<p>Thanks for your attention!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 628, "user_id": 1816282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4401d7dedb7d1d493ce36894446881b?s=128&d=identicon&r=PG", "display_name": "macool", "link": "https://stackoverflow.com/users/1816282/macool"}, "edited": false, "score": 0, "creation_date": 1469028312, "post_id": 38483957, "comment_id": 64371378, "body": "use secrets.yml AND use environment variables. you&#39;ll store your secrets.yml as base so that you remember what secrets you need but store the secrets in env variables. take a look: <a href=\"https://github.com/GrowMoi/moi/blob/master/config/secrets.yml\" rel=\"nofollow noreferrer\">github.com/GrowMoi/moi/blob/master/config/secrets.yml</a>"}, {"owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "reply_to_user": {"reputation": 628, "user_id": 1816282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4401d7dedb7d1d493ce36894446881b?s=128&d=identicon&r=PG", "display_name": "macool", "link": "https://stackoverflow.com/users/1816282/macool"}, "edited": false, "score": 0, "creation_date": 1469031869, "post_id": 38483957, "comment_id": 64373741, "body": "Where are my environement variables exported to store the password in ubuntu-linux system?"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1469025895, "creation_date": 1469025895, "answer_id": 38484455, "question_id": 38483957, "link": "https://stackoverflow.com/questions/38483957/using-secret-passwords-in-rails-app/38484455#38484455", "title": "Using secret passwords in Rails App", "body": "<p>You shouldn't commit the <code>secret.yml</code> to your git repository. A <code>secret.yml</code> that includes production secrets should only exist on the servers (and only be accessible to server administrators). </p>\n\n<p>Furthermore you might want to use an API token instead of your username and password, because API tokens are easier to change.</p>\n"}, {"comments": [{"owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469031774, "post_id": 38484498, "comment_id": 64373690, "body": "If I use ubuntu-linux, what steps should I follow? If I write <code>&lt;%= ENV[&quot;PASS&quot;] %&gt;</code> then where should I export and write my password? Another problem, what if I am collaborating with someone and he wants to use the app?"}, {"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "reply_to_user": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469040525, "post_id": 38484498, "comment_id": 64378787, "body": "<a href=\"https://help.ubuntu.com/community/EnvironmentVariables\" rel=\"nofollow noreferrer\">Here&#39;s</a> a very thurough tutorial on environmental variables and <a href=\"http://askubuntu.com/questions/730/how-do-i-set-environment-variables\">here&#39;s</a> a good AskUbuntu question on it. I would recommend editing your <code>~&#47;.profile</code> file for session-wide variables. I would also recommend a more detailed variable name such as <code>GITHUB_PASSWORD</code> so you know which password it is, in case you have multiple."}, {"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "reply_to_user": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469040548, "post_id": 38484498, "comment_id": 64378798, "body": "And if you&#39;re collaborating, just have the other person set up an environmental variable with the same name and value."}, {"owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469100762, "post_id": 38484498, "comment_id": 64404826, "body": "How do I pass my travis ci tests with this configuration? Travis can&#39;t know my password and act accordingly"}, {"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "reply_to_user": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469101029, "post_id": 38484498, "comment_id": 64405024, "body": "Travis CI has <a href=\"https://docs.travis-ci.com/user/environment-variables/#Defining-Variables-in-Repository-Settings\" rel=\"nofollow noreferrer\">a section in their documentation</a> on how to define environmental variables for your tests. And if you don&#39;t trust Travis CI with your GitHub password, you probably shouldn&#39;t be using their service."}, {"owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469651126, "post_id": 38484498, "comment_id": 64630699, "body": "This link to the section mentions that such defined environment variables in travis are not available for pull request with forks. Then if I am collaborating and sending a pull request, how can I access these variables?"}, {"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "reply_to_user": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1469707214, "post_id": 38484498, "comment_id": 64654464, "body": "Is you application designed to reach out to a single GitHub account or is it supposed to reach out to whoever run&#39;s it&#39;s GitHub account? If it&#39;s the former, give them the password. Otherwise, let them set their own environmental variables."}], "tags": [], "owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "is_accepted": true, "score": 2, "last_activity_date": 1469026002, "creation_date": 1469026002, "answer_id": 38484498, "question_id": 38483957, "link": "https://stackoverflow.com/questions/38483957/using-secret-passwords-in-rails-app/38484498#38484498", "title": "Using secret passwords in Rails App", "body": "<p>2 options:</p>\n\n<ol>\n<li><p>Set it as an <a href=\"https://en.wikipedia.org/wiki/Environment_variable\" rel=\"nofollow\">environmental variable</a>. How you exactly do so is highly dependent on which operating system you use. There are plenty of tutorials on how to do so and how to access it from a Rails application. These variables are visible only locally and won't be seen when you push your code to GitHub.</p></li>\n<li><p>Add your <code>secrets.yml</code> to your <code>.gitignore</code> file. If you don't have a <code>.gitignore</code> file, create one in the root directory of your project. Then, simply add <code>secrets.yml</code> to that file. Once you do that, git will forever ignore that file in any commit, push, etc. and won't show up if you push your code to GitHub. However, if you already have a <code>secrets.yml</code> file and it has been tracked previously by git, you need to remove that file's history. Details on how to do so can be found <a href=\"https://en.wikipedia.org/wiki/Environment_variable\" rel=\"nofollow\">here</a>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 6443490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2530f5fd2198d2f0b1a21afd7311a7?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Woodward", "link": "https://stackoverflow.com/users/6443490/joe-woodward"}, "is_accepted": false, "score": 0, "last_activity_date": 1469040135, "creation_date": 1469040135, "answer_id": 38488421, "question_id": 38483957, "link": "https://stackoverflow.com/questions/38483957/using-secret-passwords-in-rails-app/38488421#38488421", "title": "Using secret passwords in Rails App", "body": "<p>This is probably a good solution for you. </p>\n\n<p><a href=\"https://github.com/attr-encrypted/attr_encrypted\" rel=\"nofollow\">https://github.com/attr-encrypted/attr_encrypted</a></p>\n\n<p>You can encrypt the password and save it to the db assigned to the user (if you have one of course). </p>\n\n<p>If you don't have a user then you'll be stuck with environment variables and secrets.yml or another similar solution </p>\n"}], "owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 1, "accepted_answer_id": 38484498, "answer_count": 3, "score": 1, "last_activity_date": 1469040135, "creation_date": 1469024647, "last_edit_date": 1469025744, "question_id": 38483957, "link": "https://stackoverflow.com/questions/38483957/using-secret-passwords-in-rails-app", "title": "Using secret passwords in Rails App", "body": "<p>I am working on a rails application, on which I need to send an issue on github if a certain process takes place. To send a post request, I need to use my github username and password. I can't use my password in open. What should I do?</p>\n\n<p>I know something about <code>secrets.yml</code> file in rails config but I can't even put my password there. I will put my app on github and anyone can hence access. How should I use secrets.yml file to store my password and use it in my rails app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": true, "score": 0, "last_activity_date": 1469033177, "creation_date": 1469033177, "answer_id": 38486308, "question_id": 38483820, "link": "https://stackoverflow.com/questions/38483820/testing-successful-seed-with-minitest-rspec/38486308#38486308", "title": "Testing successful seed with minitest / rspec", "body": "<p>In your test file, instead of writing </p>\n\n<pre><code>assert_nothing_raised(Exception) { load Rails.root.join('db/seeds.rb') }\n</code></pre>\n\n<p>try</p>\n\n<pre><code>assert_nothing_raised(Exception) {load \"#{Rails.root}/db/seeds.rb\"}\n</code></pre>\n"}], "owner": {"reputation": 1471, "user_id": 1213904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QKy0Q.jpg?s=128&g=1", "display_name": "user1213904", "link": "https://stackoverflow.com/users/1213904/user1213904"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "accepted_answer_id": 38486308, "answer_count": 1, "score": 0, "last_activity_date": 1469033177, "creation_date": 1469024287, "last_edit_date": 1469025724, "question_id": 38483820, "link": "https://stackoverflow.com/questions/38483820/testing-successful-seed-with-minitest-rspec", "title": "Testing successful seed with minitest / rspec", "body": "<p>I'm trying to test if a seed is successfully run. I currently have the following:</p>\n\n<pre><code>require 'test_helper'\n\nclass SeedsTest &lt; ActiveSupport::TestCase\n  test 'it should successfully run the seeds' do\n    assert_nothing_raised(Exception) { load Rails.root.join('db/seeds.rb') }\n  end\nend\n</code></pre>\n\n<p>However the load expression simply returns true and does not invoke the seed.\nIs there a way to do this?</p>\n\n<p><strong>edit:</strong>\nI tried running it as a rake test, but it gave me the same.</p>\n\n<pre><code>assert_nothing_raised(Exception) { Rake::Task[\"db:seed\"].invoke }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec", "controller"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469025015, "post_id": 38483810, "comment_id": 64370421, "body": "Add a breakpoint in the <code>accept</code> method and see if <code>@app.name == &#39;test&#39;</code>. If it is, then check if <code>current_dev.id == 1</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469025331, "post_id": 38483810, "comment_id": 64370630, "body": "My initial guess is that the <code>Invite</code> you created doesn&#39;t have an id of 1. If that is the case, then just add it as an argument to the <code>Invite.create</code> call in the spec."}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469025875, "post_id": 38483810, "comment_id": 64371043, "body": "wait, the 1 that you see as the :get parameter is due to my route for the method is:  apps/:id/requests/accept"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469026199, "post_id": 38483810, "comment_id": 64371190, "body": "OK, still - what are the values of <code>@app.name</code> and <code>current _dev.id</code> in <code>accept</code>?"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469028151, "post_id": 38483810, "comment_id": 64371283, "body": "i get app.name == &quot;test&quot; but developer.id != 1"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469028360, "post_id": 38483810, "comment_id": 64371403, "body": "there you go, now enlighten us what is <code>current_dev</code> :)"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469028496, "post_id": 38483810, "comment_id": 64371471, "body": "due to login i have this:  \tbefore :each do \t\tdeveloper = FactoryGirl.create(:developer) \t\tsign_in developer  \tend that i use to login a developer and use the function"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469028951, "post_id": 38483810, "comment_id": 64371766, "body": "or did you just asked to get the current_dev id?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469028990, "post_id": 38483810, "comment_id": 64371788, "body": "Ok, so now what is <code>developer.id</code> in the test?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029296, "post_id": 38483810, "comment_id": 64372000, "body": "Ok, then in the <code>Invite.create</code> don&#39;t use <code>:receiver =&gt; &quot;1&quot;</code>, instead do <code>:receiver =&gt; developer.id</code>."}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029392, "post_id": 38483810, "comment_id": 64372064, "body": "done, but test is still failing, same error"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029453, "post_id": 38483810, "comment_id": 64372116, "body": "What is <code>current_dev.id</code> in <code>accept</code>?"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029663, "post_id": 38483810, "comment_id": 64372258, "body": "do i need to check the value into the controller or in the test? because if i try to do it in the test (after get :accept) i get the error of course"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029701, "post_id": 38483810, "comment_id": 64372292, "body": "Not after <code>accept</code> but in the middle of the method. Add a breakpoint/print/something."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469029774, "post_id": 38483810, "comment_id": 64372348, "body": "It basically boils down to the value of <code>developer.id</code> in the test is not equal to the value of <code>current_dev.id</code>, we are trying to understand why, we need to know what both values are."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469030027, "post_id": 38483810, "comment_id": 64372502, "body": "Ok, so to double check so far - <code>@app.name</code> is <code>&#39;test&#39;</code> and <code>current_dev.id</code> equals <code>developer.id</code> equals 5?"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469030411, "post_id": 38483810, "comment_id": 64372782, "body": "no wait: in my controller app name is something completely different from &quot;test&quot;, it is a name like &quot;Sheila Wilms&quot; (OMG) while in the test i get the exact value &quot;test&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469030510, "post_id": 38483810, "comment_id": 64372858, "body": "Ok, so what is the id of the <code>App</code> that has the <code>name</code> of <code>&quot;test&quot;</code> (if it exists) and how did you create it (if you have)?"}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469030806, "post_id": 38483810, "comment_id": 64373092, "body": "i did not create the app &quot;test&quot;, i just assigned the :app value for invite to have name &quot;test&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469030954, "post_id": 38483810, "comment_id": 64373185, "body": "There you go. Create an <code>App</code> with name of <code>&quot;test&quot;</code> in <code>before :each</code> and pass it&#39;s id similarly to how you did it with <code>developer</code>."}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031187, "post_id": 38483810, "comment_id": 64373349, "body": "do i need to something like: invite = Invite.create(:app =&gt; @app.name, etc.) ?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031281, "post_id": 38483810, "comment_id": 64373402, "body": "More like <code>let(:app) { App.create(:name =&gt; &#39;test&#39;) }</code> and then in the actual test - <code>get :accept, :id =&gt; app.id</code>."}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031525, "post_id": 38483810, "comment_id": 64373547, "body": "it worked!!! thanks a lot! :) last thing, i get redirect code (302) but i guess is fine because i use redirect_to @app in the controller right?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031598, "post_id": 38483810, "comment_id": 64373579, "body": "Exactly, http 302 is used for redirects."}, {"owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031794, "post_id": 38483810, "comment_id": 64373697, "body": "That&#39;s perfect. Thanks again!"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469031948, "post_id": 38483810, "comment_id": 64373776, "body": "Ok, now if you are perfectly satisfied with this resolution, create an answer to your question that explains what the issue was, how you debugged it and how you fixed it to cement your understanding and so that developers that come upon this question with a similar issue will find the post helpful."}], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1469036869, "post_id": 38486781, "comment_id": 64376595, "body": "Nicely done, accept it in two days once the system allows you to."}], "tags": [], "owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "is_accepted": true, "score": 1, "last_activity_date": 1469036849, "last_edit_date": 1469036849, "creation_date": 1469034741, "answer_id": 38486781, "question_id": 38483810, "link": "https://stackoverflow.com/questions/38483810/getting-nilclass-error-while-testing-with-rspec/38486781#38486781", "title": "Getting nilClass error while testing with rspec", "body": "<p>SOLVED:</p>\n\n<ul>\n<li>Main reason things weren't working: mismatch between created invite parameters and current parameters (<code>app</code>, <code>current_developer</code>)</li>\n<li>Debug: setting breakpoints/printing values of what was needed in the controller and what was needed in the model. </li>\n<li>Fixing: created objects that were missing in order to match parameters; correct solution was</li>\n</ul>\n\n<p><br></p>\n\n<pre><code>it \"should accept an invite (1)\" do\n  invite = Invite.create(:app =&gt; @app.name, :sender =&gt; \"2\", :receiver =&gt; @developer.id)\n  get :accept, :id =&gt; @app.id\n  assert_response :redirect\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6614196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209165687373584/picture?type=large", "display_name": "AlterEchoes", "link": "https://stackoverflow.com/users/6614196/alterechoes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 38486781, "answer_count": 1, "score": 2, "last_activity_date": 1469037069, "creation_date": 1469024263, "last_edit_date": 1469037069, "question_id": 38483810, "link": "https://stackoverflow.com/questions/38483810/getting-nilclass-error-while-testing-with-rspec", "title": "Getting nilClass error while testing with rspec", "body": "<p>I'm testing my project with rspec and now I'm up to the controllers part. I'm testing this method: </p>\n\n<pre><code>def accept\n  @app = App.find(params[:id])\n  @invite = Invite.find_by(app: @app.name, receiver: current_dev.id)\n  @dev = Developer.find(@invite.sender)\n  @app.developers &lt;&lt; @dev\n  respond_to do |format|\n    if @invite.destroy\n      format.html { redirect_to @app, notice: 'A new developer joined your team!' }\n      format.json { render :show, status: :destroyed, location: @app }\n    else\n      format.html { render :back }\n      format.json { render json: @invite.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n\n<p>and this is the test part:</p>\n\n<pre><code>it \"should accept an invite (1)\" do\n  invite = Invite.create(:app =&gt; \"test\", :sender =&gt; \"2\", :receiver =&gt; \"1\")\n  get :accept, :id =&gt; 1\n  assert_response :success\nend\n</code></pre>\n\n<p>but when I run the rspec command I get this error:</p>\n\n<pre><code>InvitesController should accept an invite (1)\nFailure/Error: @dev = Developer.find(@invite.sender)\n\nNoMethodError:\n  undefined method `sender' for nil:NilClass\n</code></pre>\n\n<p>So I am assuming that the invite object is <code>nil</code> but I can't figure out why this happens. I test the function via browser and everything works fine. This is also causing same errors in different controller methods, every time just because my invite object is <code>nil</code>. Why is this happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1469024917, "post_id": 38483590, "comment_id": 64370339, "body": "Does your CSV include valid user_ids in the user_id column? Or do you want to use the user_id you provided in the method call?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6164594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_WoJOBdSibY/AAAAAAAAAAI/AAAAAAAAIQc/9TaZgncLnYI/photo.jpg?sz=128", "display_name": "Tony Bagalini", "link": "https://stackoverflow.com/users/6164594/tony-bagalini"}, "edited": false, "score": 0, "creation_date": 1469031198, "post_id": 38484730, "comment_id": 64373357, "body": "thanks!  I am still getting:      NameError in InventoriesController#import undefined local variable or method `user&#39; for #&lt;Class:0x007fe9a2a9e320&gt;  Extracted source (around line #12): 10 11 12 13 14 15                    inventory = find_by_id(row[&quot;id&quot;]) || new     inventory.attributes = row.to_hash.select { |k,v| allowed_attributes.include? k }     inventory.user = user     inventory.save!   end end"}], "tags": [], "owner": {"reputation": 628, "user_id": 1816282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4401d7dedb7d1d493ce36894446881b?s=128&d=identicon&r=PG", "display_name": "macool", "link": "https://stackoverflow.com/users/1816282/macool"}, "is_accepted": true, "score": 1, "last_activity_date": 1469028599, "creation_date": 1469028599, "answer_id": 38484730, "question_id": 38483590, "link": "https://stackoverflow.com/questions/38483590/importing-a-csv-and-assign-to-current-user-ruby/38484730#38484730", "title": "importing a CSV and assign to current user ruby", "body": "<p><code>(...)\ninventory = (...)\ninventory.user_id = user_id\ninventory.save!</code></p>\n\n<p>however it's better you send along the user rather than it's id:</p>\n\n<p>controller:\n<code>Inventory.import(params[:file], current_user)</code></p>\n\n<p>model:</p>\n\n<pre><code> def import(file, user)\n  inventory = Inventory.new\n  inventory.attributes = {}\n  inventory.user = user\n  inventory.save!\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6164594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_WoJOBdSibY/AAAAAAAAAAI/AAAAAAAAIQc/9TaZgncLnYI/photo.jpg?sz=128", "display_name": "Tony Bagalini", "link": "https://stackoverflow.com/users/6164594/tony-bagalini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 38484730, "answer_count": 1, "score": 1, "last_activity_date": 1555894898, "creation_date": 1469023665, "question_id": 38483590, "link": "https://stackoverflow.com/questions/38483590/importing-a-csv-and-assign-to-current-user-ruby", "title": "importing a CSV and assign to current user ruby", "body": "<p>I am trying to import a CSV file and assign the import to the current user.  So, it will add the user_id to the each row of the csv import.</p>\n\n<p>I am missing something because it still doesn't find the user and add it to the row...</p>\n\n<p><strong>Controller :</strong></p>\n\n<pre><code> def import\n    Inventory.import(params[:file], current_user.id)\n    redirect_to root_url, notice: \"Inventory imported.\"\n  end\n</code></pre>\n\n<p><strong>Method:</strong></p>\n\n<pre><code>class Inventory &lt; ApplicationRecord\n    belongs_to :user\n\ndef self.import(file, user_id)\n  allowed_attributes = [ \"user_id\", \"id\",\"description\",\"part_number\",\"price\",\"created_at\",\"updated_at\", \"alternate_part_number\", \"condition_code\", \"qty\", \"mfg_code\", \"serial_number\", \"part_comments\"]\n  spreadsheet = open_spreadsheet(file)\n  header = spreadsheet.row(1)\n  (2..spreadsheet.last_row).each do |i|\n    row = Hash[[header, spreadsheet.row(i)].transpose]\n    inventory = find_by_id(row[\"id\"]) || new\n    inventory.attributes = row.to_hash.select { |k,v| allowed_attributes.include? k }\n    inventory.save!\n  end\nend\n</code></pre>\n\n<p>I end up with this error:\n<a href=\"http://i.stack.imgur.com/5CaZL.png\" rel=\"nofollow\">import error ruby</a></p>\n\n<p><strong>Thank you for any help!!</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "database-view"], "comments": [{"owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 1, "creation_date": 1469024143, "post_id": 38483534, "comment_id": 64369690, "body": "Did you add the reports folder to autoload_paths? If not, try adding <code>config.autoload_paths += %W(#{config.root}&#47;app&#47;models&#47;reports)</code> to <code>config&#47;application.rb</code>"}, {"owner": {"reputation": 4969, "user_id": 2853555, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab76d9518f7477e3f6162b16811affc9?s=128&d=identicon&r=PG&f=1", "display_name": "agusgambina", "link": "https://stackoverflow.com/users/2853555/agusgambina"}, "reply_to_user": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 0, "creation_date": 1469024742, "post_id": 38483534, "comment_id": 64370190, "body": "Thank you @user3033467 I tried that but it did not work, but it helped me to realize that the problem was that I was misspelling  Report in the revenue.rb file, I should write Reports."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1469025507, "last_edit_date": 1469025507, "creation_date": 1469025240, "answer_id": 38484203, "question_id": 38483534, "link": "https://stackoverflow.com/questions/38483534/rails-how-to-pass-parse-data-from-sql-view-to-model/38484203#38484203", "title": "Rails how to pass parse data from sql view to model?", "body": "<p>Rails expects module names and folder names to match. Note that you mixed singular and plural.</p>\n\n<p>That said: you have to change your model to:</p>\n\n<pre><code>class Reports::Revenue &lt; ApplicationRecord\n  self.table_name = 'report_revenues'\nend\n</code></pre>\n\n<p><em>Or</em> move your model into a folder named <code>models/report/revenue.rb</code>.</p>\n"}], "owner": {"reputation": 4969, "user_id": 2853555, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab76d9518f7477e3f6162b16811affc9?s=128&d=identicon&r=PG&f=1", "display_name": "agusgambina", "link": "https://stackoverflow.com/users/2853555/agusgambina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 38484203, "answer_count": 1, "score": 0, "last_activity_date": 1469025507, "creation_date": 1469023502, "question_id": 38483534, "link": "https://stackoverflow.com/questions/38483534/rails-how-to-pass-parse-data-from-sql-view-to-model", "title": "Rails how to pass parse data from sql view to model?", "body": "<p>I followed the excellent <a href=\"https://rietta.com/blog/2015/03/30/adding-rake-db-views-for-sql-views-to-a-rails-project/\" rel=\"nofollow\">post</a> from <a href=\"https://rietta.com/about/#frank-rietta\" rel=\"nofollow\">Frank Rietta</a> about \"Adding a Rake Task for SQL Views to a Rails Project\". I like his point of view about database views in rails and his dry approach.</p>\n\n<p>I am able to do <code>rake db:views</code> and my view is created but I am not able to get the information in the model, this is my <code>models/reports/revenue.rb</code></p>\n\n<pre><code>class Report::Revenue &lt; ApplicationRecord\n  self.table_name = 'report_revenues'\nend\n</code></pre>\n\n<p>I changed the extension because I am using Rails 5.0.0</p>\n\n<p>If I execute the <code>rails console --sandbox</code> and there I execute <code>Report::Revenue</code> I get the following</p>\n\n<pre><code>2.3.1 :004 &gt; Report::Revenue\nNameError: uninitialized constant Report\n</code></pre>\n\n<p>I am not sure what I am missing</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "reform", "trailblazer"], "answers": [{"tags": [], "owner": {"reputation": 7140, "user_id": 68611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa1edfe6c395f58eec93377424cba897?s=128&d=identicon&r=PG", "display_name": "Praveen Angyan", "link": "https://stackoverflow.com/users/68611/praveen-angyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1555049601, "creation_date": 1555049601, "answer_id": 55645513, "question_id": 38483314, "link": "https://stackoverflow.com/questions/38483314/reform-dry-validation-matchers/55645513#55645513", "title": "Reform: Dry-Validation Matchers", "body": "<p>There is this: <a href=\"http://There%20is%20this:%20https://github.com/bloom-solutions/dry-validation-matchers%20%20I&#39;ve%20enjoyed%20using%20shoulda%20matchers%20in%20the%20past.%20It%20helps%20to%20greatly%20cut%20down%20on%20the%20repetitive%20code%20where%20you%20first%20create%20a%20valid%20object%20and%20then%20change%20the%20attribute%20affected%20by%20the%20validation%20to%20an%20invalid%20value%20to%20carry%20out%20the%20test.%20%20In%20the%20end%20this%20is%20just%20a%20matter%20of%20taste.\" rel=\"nofollow noreferrer\">https://github.com/bloom-solutions/dry-validation-matchers</a></p>\n\n<p>I've enjoyed using shoulda matchers in the past. It helps to greatly cut down on the repetitive code where you first create a valid object and then change the attribute affected by the validation to an invalid value to carry out the test.</p>\n\n<p>In the end this is just a matter of taste.</p>\n"}], "owner": {"reputation": 308, "user_id": 5033316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ac3b9e68e73cbb34658a3fa9a15ce28?s=128&d=identicon&r=PG", "display_name": "Arvinje", "link": "https://stackoverflow.com/users/5033316/arvinje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1555049601, "creation_date": 1469022917, "last_edit_date": 1469023358, "question_id": 38483314, "link": "https://stackoverflow.com/questions/38483314/reform-dry-validation-matchers", "title": "Reform: Dry-Validation Matchers", "body": "<p>I'm looking for a convenient way to test validations of a <a href=\"https://github.com/apotonick/reform\" rel=\"nofollow\">Reform</a>-based form object.</p>\n\n<p>Are there any matchers (like shoulda matchers for testing ActiveModel::Validations) to test <a href=\"http://dry-rb.org/gems/dry-validation/\" rel=\"nofollow\">dry-validations</a>? Is this even the way to go?</p>\n"}, {"tags": ["ruby", "implicit-conversion"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469022150, "post_id": 38482973, "comment_id": 64368157, "body": "Ary you passing params as an <code>Array</code> instead of a <code>Hash</code> because <code>Array#[]</code> wants an integer. Also assuming it is a typo but ruby doesn&#39;t give out <b>clocks</b>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6613716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e320440578f9debfac0f094669edbf5d?s=128&d=identicon&r=PG&f=1", "display_name": "shube", "link": "https://stackoverflow.com/users/6613716/shube"}, "edited": false, "score": 0, "creation_date": 1469023339, "post_id": 38483281, "comment_id": 64369098, "body": "Here is the part where I call RubyCommand.   \tip = &quot;{WAGO_IP}&quot;         port = &quot;{WAGO_PORT}&quot; \tstep.cmd = Litu::RubyCommand.new(&quot;switch_wago_do&quot;) do |cmd, context|"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 3, "user_id": 6613716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e320440578f9debfac0f094669edbf5d?s=128&d=identicon&r=PG&f=1", "display_name": "shube", "link": "https://stackoverflow.com/users/6613716/shube"}, "edited": false, "score": 0, "creation_date": 1469023849, "post_id": 38483281, "comment_id": 64369499, "body": "@shube that will do it. You can&#39;t call it with a <code>String</code>. <code>String#[]</code> is also looking for an integer value. This answer is more or less correct other than the fact that the poster did not include the required block"}], "tags": [], "owner": {"reputation": 379, "user_id": 2604889, "user_type": "registered", "profile_image": "https://graph.facebook.com/809550496/picture?type=large", "display_name": "Jean Meyer", "link": "https://stackoverflow.com/users/2604889/jean-meyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1469022841, "creation_date": 1469022841, "answer_id": 38483281, "question_id": 38482973, "link": "https://stackoverflow.com/questions/38482973/no-implicit-conversion-of-symbol-into-integer-ruby/38483281#38483281", "title": "no implicit conversion of Symbol into Integer, Ruby", "body": "<p>Pretty sure you're passing an array instead of a hash. You should call it like this:</p>\n\n<pre><code>RubyCommand.new({killProc:1,name:\"test\"})\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6613716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e320440578f9debfac0f094669edbf5d?s=128&d=identicon&r=PG&f=1", "display_name": "shube", "link": "https://stackoverflow.com/users/6613716/shube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1072, "favorite_count": 0, "closed_date": 1469092988, "answer_count": 1, "score": -1, "last_activity_date": 1469022841, "creation_date": 1469022039, "last_edit_date": 1469022698, "question_id": 38482973, "link": "https://stackoverflow.com/questions/38482973/no-implicit-conversion-of-symbol-into-integer-ruby", "closed_reason": "Duplicate", "title": "no implicit conversion of Symbol into Integer, Ruby", "body": "<p>I am new to ruby, and have no idea, how to fix this error. when i run my script containing the code below, i always get the error: 'no implicit conversion of Symbol into Integer. I think the Problem is in the lines @killProc..., @Name=..., and @working_directory.\nCan you tell me whats wrong? </p>\n\n<p>Thanks for your help</p>\n\n<pre><code>class RubyCommand\n      include Patir::Command\n      attr_reader :cmd,:working_directory,:killProc\n      def initialize params,&amp;block\n        @killProc=params[:killProc]\n        @name=params[:name]\n        @working_directory=params[working_directory]||\".\"\n        if block_given?\n          @cmd=block\n        else\n          raise \"You Need to provide a block\"\n        end\n      end \n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rake", "google-spreadsheet-api"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "edited": false, "score": 0, "creation_date": 1469078661, "post_id": 38483644, "comment_id": 64391331, "body": "Sorry for misstyping, but it worked now by adding auto load to config/application.rb config.autoload_paths += %W(#{config.root}/lib)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1469024369, "last_edit_date": 1469024369, "creation_date": 1469023789, "answer_id": 38483644, "question_id": 38482797, "link": "https://stackoverflow.com/questions/38482797/rake-aborted-nameerror-uninitialized-constant-even-add-enviroment-to-task/38483644#38483644", "title": "rake aborted! NameError: uninitialized constant even add :enviroment to task", "body": "<p>Capitalisation is important.</p>\n\n<p><code>Spreadsheet</code> is defined; <code>SpreadSheet</code> is not.</p>\n\n<p>This is why your code is throwing an error when trying to define <code>SpreadSheet::Importer</code>.</p>\n\n<p>...Or at least, that's what it <em>looks like</em> based on the limited information I have. If <code>Speadsheet</code> is not actually defined anywhere else in your code, then instead you can write:</p>\n\n<pre><code>module Spreadsheet # Can be a class, and can instead be SpreadSheet - as long as you're consistent!!\n  class Import\n    # ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1246, "user_id": 2262005, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5535295c69d23b872494f6b137badf4d?s=128&d=identicon&r=PG", "display_name": "AndolaSoft Inc", "link": "https://stackoverflow.com/users/2262005/andolasoft-inc"}, "is_accepted": true, "score": 0, "last_activity_date": 1469079706, "creation_date": 1469079706, "answer_id": 38495723, "question_id": 38482797, "link": "https://stackoverflow.com/questions/38482797/rake-aborted-nameerror-uninitialized-constant-even-add-enviroment-to-task/38495723#38495723", "title": "rake aborted! NameError: uninitialized constant even add :enviroment to task", "body": "<p>Yes..you can add it auto load, but an alternative is to add inside the rake file by \"require\"</p>\n\n<p>Here is another way,</p>\n\n<p>lib/spreadsheet/importer.rb</p>\n\n<pre><code>module Spreadsheet\n    class Importer\n      def initialize\n        @session = GoogleDrive.saved_session(\"#{Rails.root}/config/google_drive/config.json\")\n      end\n\n      def exec(table_name)\n        #do something\n      end\n    end\nend\n</code></pre>\n\n<p>lib/tasks/spreadsheet.rake</p>\n\n<p>You need to incude the file by using 'reqire'</p>\n\n<pre><code>namespace :spreadsheet do\n  task :get =&gt; :environment do\n    require \"#{Rails.root}/lib/spreadsheet/importer\"  \n    importer = Spreadsheet::Importer.new\n    importer.exec\n  end\nend\n</code></pre>\n\n<p>Happy Coding!!!!!</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "accepted_answer_id": 38495723, "answer_count": 2, "score": 0, "last_activity_date": 1469079706, "creation_date": 1469021596, "last_edit_date": 1469024142, "question_id": 38482797, "link": "https://stackoverflow.com/questions/38482797/rake-aborted-nameerror-uninitialized-constant-even-add-enviroment-to-task", "title": "rake aborted! NameError: uninitialized constant even add :enviroment to task", "body": "<p>I'm newbie to RoR and trying to create a task to import database from google spreadsheet by creating an Importer under lib/spreadsheet. but rake cannot find my importer even I added :environment to task according to some others issues in SOF. here are my files</p>\n\n<p>lib/spreadsheet/importer.rb</p>\n\n<pre><code>class SpreadSheet::Importer\n  def initialize\n    @session = GoogleDrive.saved_session(\"#{Rails.root}/config/google_drive/config.json\")\n  end\n\n  def exec(table_name)\n    #do something\n  end\nend\n</code></pre>\n\n<p>lib/tasks/spreadsheet.rake</p>\n\n<pre><code>namespace :spreadsheet do\n  task :get =&gt; :environment do\n    importer = Spreadsheet::Importer.new\n    importer.exec\n  end\nend\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>rake aborted!</p>\n  \n  <p>NameError: uninitialized constant <code>SpreadSheet</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/lib/tasks/spreadsheet.rake:1:in <code>&lt;top (required)&gt;</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0\n  /gems/railties-5.0.0/lib/rails/engine.rb:654:in <code>block in run_tasks_blocks</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0/gems/railties-5.0.0/lib/rails/engine.rb:654:in <code>each</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0/gems/railties-5.0.0/lib/rails/engine.rb:654:in <code>run_tasks_blocks</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0/gems/railties-5.0.0/lib/rails/application.rb:443:in <code>run_tasks_blocks</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0/gems/railties-5.0.0/lib/rails/engine.rb:457:in <code>load_tasks</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/rakefile:6:in <code>&lt;top (required)&gt;</code></p>\n  \n  <p>/home/vagrant/workspace/ruby/kuwata-summer/vendor/bundle/ruby/2.3.0/gems/rake-11.2.2/exe/rake:27:in <code>&lt;top (required)&gt;</code></p>\n  \n  <p>/home/vagrant/.rbenv/versions/2.3.1/bin/bundle:23:in <code>load</code></p>\n  \n  <p>/home/vagrant/.rbenv/versions/2.3.1/bin/bundle:23:in <code>&lt;main&gt;</code></p>\n  \n  <p>(See full trace by running task with --trace)</p>\n</blockquote>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "cucumber", "cucumber-jvm"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1469042949, "post_id": 38481512, "comment_id": 64380169, "body": "What is your specific question?  You want to create the step definitons?"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1469059149, "post_id": 38481512, "comment_id": 64386639, "body": "<a href=\"https://blog.jcoglan.com/2009/10/03/getting-started-with-cucumber-rspec-webrat-and-multiruby/\" rel=\"nofollow noreferrer\">blog.jcoglan.com/2009/10/03/&hellip;</a> and <a href=\"https://github.com/cucumber/cucumber-eclipse\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-eclipse</a> - you didn&#39;t put much effort into the question, maybe you can work on the answer."}, {"owner": {"reputation": 613, "user_id": 3462955, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/9ohKz.jpg?s=128&g=1", "display_name": "tsivarajan", "link": "https://stackoverflow.com/users/3462955/tsivarajan"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1469088678, "post_id": 38481512, "comment_id": 64396908, "body": "@orde My question describes i need to implement the cucumber step definitions into ruby class for automation."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6614830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7824fdf4c5ec28c46ebb6d39d541bb?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/6614830/jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1469182233, "creation_date": 1469182233, "answer_id": 38523786, "question_id": 38481512, "link": "https://stackoverflow.com/questions/38481512/i-want-to-automate-the-cucumber-steps-using-ruby-class/38523786#38523786", "title": "I want to automate the cucumber steps using ruby class", "body": "<p>Sample folder structure for a cucumber project:</p>\n\n<blockquote>\n  <ul>\n  <li>cucumber\n  \n  <ul>\n  <li>features</li>\n  <li>step_definitions</li>\n  <li>support</li>\n  </ul></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 613, "user_id": 3462955, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/9ohKz.jpg?s=128&g=1", "display_name": "tsivarajan", "link": "https://stackoverflow.com/users/3462955/tsivarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469182233, "creation_date": 1469018215, "last_edit_date": 1469088839, "question_id": 38481512, "link": "https://stackoverflow.com/questions/38481512/i-want-to-automate-the-cucumber-steps-using-ruby-class", "title": "I want to automate the cucumber steps using ruby class", "body": "<p>Login.feature    </p>\n\n<pre><code>Background:\n      Given I am on Google\n\n    Scenario: Search for a term\n      When I fill in \"q\" found by \"name\" with \"TestingBot\"\n      And I submit\n      Then I should see title \"TestingBot - Google Search\"\n</code></pre>\n\n<p>Here i added some sample cucumber steps. File name is login.feature. I want to create the automation ruby script for above steps.</p>\n\n<p>Give the folder structure in eclipse.</p>\n"}, {"tags": ["ruby", "macos", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1469020344, "post_id": 38482228, "comment_id": 64366676, "body": "you can see all the installed rubies by running <code>rvm list</code>"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1469020114, "creation_date": 1469020114, "answer_id": 38482228, "question_id": 38481459, "link": "https://stackoverflow.com/questions/38481459/switch-to-ruby-version-installed-through-rvm/38482228#38482228", "title": "switch to ruby version installed through RVM", "body": "<p>To switch to using 2.3.0, do</p>\n\n<pre><code>rvm use 2.3.0\n</code></pre>\n\n<p>To make it default, do</p>\n\n<pre><code>rvm use --default 2.3.0\n</code></pre>\n"}], "owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 38482228, "answer_count": 1, "score": 0, "last_activity_date": 1540260764, "creation_date": 1469018036, "last_edit_date": 1540260764, "question_id": 38481459, "link": "https://stackoverflow.com/questions/38481459/switch-to-ruby-version-installed-through-rvm", "title": "switch to ruby version installed through RVM", "body": "<p>my macbook is OSX El Capitan. It has Apple pre-installed universal <strong>Ruby version 2.0.0</strong>.</p>\n\n<p>Now, I want to use latest <strong>Ruby 2.3.0</strong>. I managed to use <strong>rvm</strong> to install Ruby 2.3.0. I see the following message after <strong>rvm</strong> finished installing ruby 2.3.0:</p>\n\n<pre><code>Ruby was built without documentation, to build it run: rvm docs generate-ri\n/Users/John/.rvm/bin/rvm: line 66: shell_session_update: command not found\nCreating alias default for ruby-2.3.0...\n\n  * To start using RVM you need to run `source /Users/John/.rvm/scripts/rvm`\n    in all your open shell windows, in rare cases you need to reopen all shell windows.\n</code></pre>\n\n<p>I followed this message, &amp; run command </p>\n\n<pre><code>source /Users/John/.rvm/scripts/rvm\n</code></pre>\n\n<p>but when I run <code>ruby -v</code>, the version is still Apple pre-installed Ruby 2.0.0. How can I switch to the ruby I installed through <strong>rvm</strong>?</p>\n\n<p>(under path <code>.rvm/rubies</code> I can find ruby-2.3.0)</p>\n"}, {"tags": ["ruby", "http", "net-http", "httpie"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1469017707, "post_id": 38481214, "comment_id": 64364607, "body": "Your question as is (asking us to recommend or find a book, tool, software library, tutorial or other off-site resource), is off-topic. You may be able to make it on-topic by asking &quot;how you can do it&quot;."}, {"owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1469024219, "post_id": 38481214, "comment_id": 64369762, "body": "the question is clear enought to be understood and their is an example that specifies what I am using. thnks for sharing your idea though"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1469018056, "creation_date": 1469018056, "answer_id": 38481467, "question_id": 38481214, "link": "https://stackoverflow.com/questions/38481214/request-only-the-header-in-http-call/38481467#38481467", "title": "Request only the header in http call", "body": "<p>You might use <code>rest-client</code> gem and in particular <code>head</code> method.\n<a href=\"http://www.rubydoc.info/github/rest-client/rest-client/RestClient#head-class_method\" rel=\"nofollow\">http://www.rubydoc.info/github/rest-client/rest-client/RestClient#head-class_method</a></p>\n"}, {"tags": [], "owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "is_accepted": false, "score": 0, "last_activity_date": 1469030789, "creation_date": 1469030789, "answer_id": 38485553, "question_id": 38481214, "link": "https://stackoverflow.com/questions/38481214/request-only-the-header-in-http-call/38485553#38485553", "title": "Request only the header in http call", "body": "<p>This can be done using 'Net::HTTP::Head' in the net-http library. other libraries also support it, just remember to look for the <code>HEAD</code> method instead of the <code>Get</code> method</p>\n"}], "owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1469030789, "creation_date": 1469017414, "last_edit_date": 1469017670, "question_id": 38481214, "link": "https://stackoverflow.com/questions/38481214/request-only-the-header-in-http-call", "title": "Request only the header in http call", "body": "<p>Is there a ruby library, with which I can request the web server to return only the header response and no content? This will help me speed up a script in which all I care is the response code.</p>\n\n<p>I am now using this</p>\n\n<pre><code>Net::HTTP.get_response(URI(url))\n</code></pre>\n\n<p>but the server generates all the assert files and so on, which I do not want.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469017658, "post_id": 38481081, "comment_id": 64364575, "body": "is this how i should add it? <code>get &#39;&#47;products&#47;:category_id =&gt; product.category_id&#47;:id&#47;&#39;, to: &#39;products#show&#39;, as: &#39;product&#39;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469018498, "post_id": 38481081, "comment_id": 64365235, "body": "Just replace your &lt;%= link_to product, class: &quot;card&quot; do %&gt; with this &lt;%= link_to product(categoty_id: product.category_id, id: product.id), class: &quot;card&quot; do %&gt;"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469018616, "post_id": 38481081, "comment_id": 64365331, "body": "this breaks and bringa undefined method `product&#39; for"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469018751, "post_id": 38481081, "comment_id": 64365434, "body": "replace product with product_path(categoty_id: product.category_id, id: product.id)"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469018944, "post_id": 38481081, "comment_id": 64365562, "body": "after remoing the <code>as: &#39;product&#39; </code>from routes now its returning routes like this instead of the slug name <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;3?categoty_id=2</code> while hardcoding this in the browser works <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;clothing&#47;virgin-hair</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469019407, "post_id": 38481081, "comment_id": 64365926, "body": "sorry typo mistake, Just try this &lt;%= link_to product_path(category_id: product.category_id, id: product.id), class: &quot;card&quot; do %&gt;"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469019819, "post_id": 38481081, "comment_id": 64366253, "body": "it returns the url as <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;3?category_id=2</code> instead of <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;clothing&#47;virgin-hair</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469020044, "post_id": 38481081, "comment_id": 64366455, "body": "just replace your ids with slugs"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469020298, "post_id": 38481081, "comment_id": 64366634, "body": "when i add slug to category id returs undefined method `category_slug&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469021025, "post_id": 38481081, "comment_id": 64367193, "body": "I think the routing issue is solved, now just try use your slugs properly and please accept the answer if so."}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469097578, "post_id": 38481081, "comment_id": 64402846, "body": "this the right answer. change my routes into  ` get &#39;/products/:category_name/:id/&#39;, to: &#39;products#show&#39;, as: &#39;product&#39;` and also <code>get &#39;&#47;products&#39;, to:  &#39;products#index&#39;, as: &#39;product_path&#39;</code> then in my views have it like <code>link_to product_path(id: product.slug, category_name: product.category.name)</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6612064"}, "is_accepted": true, "score": 1, "last_activity_date": 1469017056, "creation_date": 1469017056, "answer_id": 38481081, "question_id": 38480964, "link": "https://stackoverflow.com/questions/38480964/no-route-match-rails-5/38481081#38481081", "title": "no route match rails 5", "body": "<p>You are passing <strong>product</strong> object in place of category_id.\nTry this,</p>\n\n<pre><code> :category_id =&gt; product.category_id\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469021379, "post_id": 38482566, "comment_id": 64367496, "body": "well i want to archive something like /products/categoryname/produtcsname i can archive this when i hardcode it in my browser <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;clothing&#47;virgin-hair</code> but the routes return as <code>http:&#47;&#47;10.0.0.19:3000&#47;products&#47;3?category_id=2</code> when its dynamic on index page"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469021646, "post_id": 38482566, "comment_id": 64367750, "body": "Then you&#39;re not doing it the rails way, it&#39;s the best way to handle routes like I described in the answer. (Plus google loves these paths, helps you indexing better) To make it search for the name not the id, you can change your controller code. (see edit)"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469021776, "post_id": 38482566, "comment_id": 64367848, "body": "this rails way as its on rails route guideline <code>get &#39;&#47;products&#47;:category_id&#47;:id&#47;&#39;, to: &#39;products#show&#39;, as: &#39;product_path&#39;</code> the only issue am having is to make it work in the views since i can acces it in the browser"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469022116, "post_id": 38482566, "comment_id": 64368131, "body": "Go to the 2 links I posted.. where do you see such a think as <code>get &#39;&#47;products&#47;:category_id&#47;:id&#47;&#39;, to: &#39;products#show&#39;, as: &#39;product_path&#39;</code> ?!"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469022223, "post_id": 38482566, "comment_id": 64368228, "body": "here <code>get &#39;&#47;patients&#47;:id&#39;, to: &#39;patients#show&#39;, as: &#39;patient&#39;</code> you can do this for resource routes."}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469022263, "post_id": 38482566, "comment_id": 64368262, "body": "yes but what you&#39;re trying to achieve are NESTED RESOURCES! see here: <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#nested-resources</a> What you just posted is the &quot;dumb&quot; way to write: <code>resources :patients, only: [:show]</code>"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1469023325, "post_id": 38482566, "comment_id": 64369085, "body": "you still dont understand what am trying to do,  this works fine <a href=\"http://10.0.0.19:3000/products/clothing/virgin-hair\" rel=\"nofollow noreferrer\">10.0.0.19:3000/products/clothing/virgin-hair</a> only issue am having is to get it work in my views"}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": false, "score": 0, "last_activity_date": 1469021749, "last_edit_date": 1469021749, "creation_date": 1469021022, "answer_id": 38482566, "question_id": 38480964, "link": "https://stackoverflow.com/questions/38480964/no-route-match-rails-5/38482566#38482566", "title": "no route match rails 5", "body": "<p>What you're trying to do is called <code>nested routing</code>.</p>\n\n<p>And this is how you make it right:</p>\n\n<pre><code># config/routes.rb\nresources :categories do\n  resources :products\nend\n</code></pre>\n\n<p>in your controller:</p>\n\n<pre><code># app/controllers/products_controller.rb\n...\n  def show\n    @category = Category.find(params[:category_id])\n    @product = @category.products.find(params[:id])\n  end\n...\n</code></pre>\n\n<p>and in your view (to link the above controller action):</p>\n\n<pre><code>&lt;%= link_to 'Awesome Product!', category_product_path(@category, @product) %&gt;\n</code></pre>\n\n<p>Defining routes like above will let you make paths like this:</p>\n\n<p><code>/categories/123/products/1</code></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To find a record using the name you could do something like this in your controller:</p>\n\n<pre><code># app/controllers/products_controller.rb\n...\n  def show\n    @category = Category.find_by!(name: params[:category_id])\n    @product = @category.products.find_by!(name: params[:id])\n  end\n...\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "accepted_answer_id": 38481081, "answer_count": 2, "score": 0, "last_activity_date": 1469021749, "creation_date": 1469016678, "question_id": 38480964, "link": "https://stackoverflow.com/questions/38480964/no-route-match-rails-5", "title": "no route match rails 5", "body": "<p>am trying to add routes to my rails app but everytime i try to load the index page it returns no route match.\nmy </p>\n\n<p><strong>product.rb</strong></p>\n\n<pre><code>belongs_to :category\nextend FriendlyId\nfriendly_id :name, use: [:slugged, :finders]\n default_scope { where(active: true) }\nend\n</code></pre>\n\n<p>and here is my category.rb </p>\n\n<pre><code>has_many :products\n  extend FriendlyId\n friendly_id :name, use: [:slugged, :finders]\n</code></pre>\n\n<p>and my routes are setup like this </p>\n\n<pre><code>    resources :categories\n    get '/products/:category_id/:id/', to: 'products#show', as: 'product'\n    resources :products\n</code></pre>\n\n<p>in my index page i have it like this</p>\n\n<pre><code>&lt;%= link_to product, class: \"card\" do %&gt;\n&lt;div class=\"product-image\"&gt;\n&lt;%= image_tag product.productpic.url if product.productpic? %&gt;\n    &lt;/div&gt;\n\n      &lt;div class=\"product-text\"&gt;\n        &lt;h2 class=\"product-title\"&gt; &lt;%= product.name %&gt;&lt;/h2&gt;\n          &lt;h3 class=\"product-price\"&gt;\u00a3&lt;%= product.price %&gt;&lt;/h3&gt;\n      &lt;/div&gt;\n\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>but when ever i load the page in my broser i get </p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :category_id=&gt;#&lt;Product id: 4, name: \"virgin hair\", price: #&lt;BigDecimal:7fd0af3ffb10,'0.3E3',9(18)&gt;, created_at: \"2016-07-19 12:34:34\", updated_at: \"2016-07-19 12:41:36\", slug: \"virgin-hair\", productpic: \"longhair.jpg\", pdescription: \"this a brazilian virgin hair\", active: true, category_id: 2&gt;, :controller=&gt;\"products\"} missing required keys: [:id]\n</code></pre>\n\n<p>what am i doing wrong here as i am a novice</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1469016501, "creation_date": 1469016501, "answer_id": 38480888, "question_id": 38480740, "link": "https://stackoverflow.com/questions/38480740/ruby-which-method-to-use-for-array-of-hashes-to-get-a-string-with-all-hash-valu/38480888#38480888", "title": "Ruby: which method to use for array of hashes to get a string with all hash values?", "body": "<p>Working for 0, 1, 2 and 2+ names:</p>\n\n<pre><code>arr = [{name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"}]\nnames = arr.map { |h| h[:name] }\nstr = [names.length&gt;1 ? names[0..-2].join(\", \") : nil, \n       names[-1]].compact.join(\" and \")\n</code></pre>\n\n<p>Saw the \"more than 5\" case too late - left as an excercise to yourself. :)</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1469016694, "creation_date": 1469016694, "answer_id": 38480969, "question_id": 38480740, "link": "https://stackoverflow.com/questions/38480740/ruby-which-method-to-use-for-array-of-hashes-to-get-a-string-with-all-hash-valu/38480969#38480969", "title": "Ruby: which method to use for array of hashes to get a string with all hash values?", "body": "<p>I would do something like this:</p>\n\n<pre><code>def names_to_sentence(array)\n  names = array.map { |hash| hash[:name] }\n\n  case names.length\n  when (0..1)\n    names.first.to_s\n  when (2..5)\n    \"#{names[0...-1].join(', ')} and #{names[-1]}\"\n  else\n    \"#{names[0..4].join(', ')} etc\"\n  end\nend\n\nnames_to_sentence([{name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"nilash\"},{name:\"ganesh\"},{name: \"foobar\"}])\n#=&gt; \"vivek, ramesh, suresh, nilash, ganesh etc\"\nnames_to_sentence([{name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"}])\n#=&gt; \"vivek, ramesh, suresh and ganesh\"\nnames_to_sentence([{name: \"vivek\"},{name: \"ramesh\"}])\n#=&gt; \"vivek and ramesh\"\nnames_to_sentence([{name: \"vivek\"}])    \n#=&gt; \"vivek\"\nnames_to_sentence([])    \n#=&gt; \"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469017247, "last_edit_date": 1469017247, "creation_date": 1469016853, "answer_id": 38481018, "question_id": 38480740, "link": "https://stackoverflow.com/questions/38480740/ruby-which-method-to-use-for-array-of-hashes-to-get-a-string-with-all-hash-valu/38481018#38481018", "title": "Ruby: which method to use for array of hashes to get a string with all hash values?", "body": "<pre><code>\u03bb = -&gt;(input) do\n  output = input.flat_map(&amp;:values)\n  if output.size &gt; 5\n    output.take(5).join(', ') &lt;&lt; ' etc.'\n  else\n    [output.pop, output.join(', ')].reverse.join(' and ')\n  end\nend\n\n\u03bb.([{name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"}])\n#\u21d2 \"vivek, ramesh, suresh and ganesh\"\n\n\u03bb.([{name: \"vivek\"},{name:\"ramesh\"}])\n#\u21d2 \"vivek and ramesh\"\n\ninput = [\n  {name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"},\n  {name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"}\n]\n\u03bb.(input)\n#\u21d2 \"vivek, ramesh, suresh, ganesh, vivek etc.\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1469033664, "last_edit_date": 1469033664, "creation_date": 1469032906, "answer_id": 38486224, "question_id": 38480740, "link": "https://stackoverflow.com/questions/38480740/ruby-which-method-to-use-for-array-of-hashes-to-get-a-string-with-all-hash-valu/38486224#38486224", "title": "Ruby: which method to use for array of hashes to get a string with all hash values?", "body": "<pre><code>def convert(arr)\n  case arr.size\n  when 0 then \"\"\n  when 1 then arr.first[:name]\n  else    \n    *first, last = arr.map { |h| h[:name] }\n    first.join(', ') &lt;&lt; (arr.size &lt;= 5 ? \" and #{last}\" : \", #{last} ..etc\")\n  end\nend\n\narr = []\nconvert arr  #=&gt; \"\" \n\narr = [{name: \"vivek\"}]\nconvert arr  #=&gt; \"vivek\" \n\narr = [{name: \"vivek\"}, {name:\"ramesh\"}]\nconvert arr  #=&gt; \"vivek and ramesh\" \n\narr = [{name: \"vivek\"}, {name:\"ramesh\"}, {name: \"suresh\"}]\nconvert arr  #=&gt; \"vivek, ramesh and suresh\" \n\narr = [{name: \"vivek\"}, {name:\"ramesh\"}, {name: \"suresh\"}, {name:\"ganesh\"}]\nconvert arr  #=&gt; \"vivek, ramesh, suresh and ganesh\" \n\narr = [{name: \"vivek\"}, {name:\"ramesh\"}, {name: \"suresh\"}, {name:\"ganesh\"},\n       {name: \"dog\"}, {name: \"cat\"}]\nconvert arr  #=&gt; \"vivek, ramesh, suresh, ganesh, cat, dog ..etc\" \n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 6608034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuD0f.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/6608034/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 2, "accepted_answer_id": 38480969, "answer_count": 4, "score": -2, "last_activity_date": 1469033664, "creation_date": 1469016049, "last_edit_date": 1469016129, "question_id": 38480740, "link": "https://stackoverflow.com/questions/38480740/ruby-which-method-to-use-for-array-of-hashes-to-get-a-string-with-all-hash-valu", "title": "Ruby: which method to use for array of hashes to get a string with all hash values?", "body": "<p>i have an array </p>\n\n<pre><code>[{name: \"vivek\"},{name:\"ramesh\"},{name: \"suresh\"},{name:\"ganesh\"}]\n</code></pre>\n\n<p>i want to create a method that return output as </p>\n\n<pre><code>\"vivek,ramesh,suresh and ganesh\".\n</code></pre>\n\n<p>if there are only two hashs like </p>\n\n<pre><code>[{name: \"vivek\"},{name: \"ramesh\"}]\n</code></pre>\n\n<p>output should be </p>\n\n<pre><code>\"vivek and ramesh\"\n</code></pre>\n\n<p>if names are more than 5 output should be \"vivek, ramesh, suresh , nilash,ganesh etc ..\" </p>\n\n<pre><code>arr=[{name: 'vivek'},{name: 'Ganesh'},{name: 'Suresh'},{name: 'Ramesh'},{name: 'Bavesh'}]#,{name: 'Mukesh'}]\na = arr.size\n\ncase a \n\nwhen 1 \n  puts arr[0][:name]\n\n\nwhen 2 \n  puts arr[0][:name]+\" and \"+arr[1][:name]\n\n\n\nwhen 3..5\n  ar = []\n  i=0\n  while i&lt;arr.size-2\n    ar &lt;&lt; arr[i]\n    i += 1\n  end\n\nar.each{|hash| printf \"#{hash[:name]}\"+\",\"}\n\nprintf \"#{arr[-2][:name]} and #{arr[-1][:name]}.\"\n\nputs \"\"\n\n\nwhen 6..100\n  ar = []\n  i=0\n  while i&lt;4\n    ar &lt;&lt; arr[i]\n    i += 1\n  end\n\nar.each{|hash| printf \"#{hash[:name]}\"+\",\"}\n\nprintf \"#{arr[4][:name]}  etc...\"\n\nputs \"\"\n\nelse \n  puts \"Error\"\nend\n</code></pre>\n\n<p>i did like this..but i know there should be a better way to do this with suitable methods can anybody help ..</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1469017087, "post_id": 38480690, "comment_id": 64364166, "body": "Is there a reason to not use the newest version?"}, {"owner": {"reputation": 1619, "user_id": 709627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab99fe65b45016b2db44dddbfdf55664?s=128&d=identicon&r=PG", "display_name": "sylvain.joyeux", "link": "https://stackoverflow.com/users/709627/sylvain-joyeux"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1469017142, "post_id": 38480690, "comment_id": 64364209, "body": "That&#39;s basically what I am wondering. And how to have a workflow that ensures that I and my coworkers do use the latest (or the to-be-specified) version. Bundler gives us this workflow for all the other gems, but what about bundler itself ?"}], "answers": [{"comments": [{"owner": {"reputation": 1619, "user_id": 709627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab99fe65b45016b2db44dddbfdf55664?s=128&d=identicon&r=PG", "display_name": "sylvain.joyeux", "link": "https://stackoverflow.com/users/709627/sylvain-joyeux"}, "edited": false, "score": 0, "creation_date": 1469133157, "post_id": 38503443, "comment_id": 64424710, "body": "My question was really unclear, I&#39;ve edited it to add more details about what I was looking for."}], "tags": [], "owner": {"reputation": 1528, "user_id": 1616697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pwa5t.jpg?s=128&g=1", "display_name": "Lahiru", "link": "https://stackoverflow.com/users/1616697/lahiru"}, "is_accepted": false, "score": 1, "last_activity_date": 1469102368, "last_edit_date": 1469102368, "creation_date": 1469101646, "answer_id": 38503443, "question_id": 38480690, "link": "https://stackoverflow.com/questions/38480690/how-to-manage-rubys-bundler-own-version/38503443#38503443", "title": "how to manage ruby&#39;s bundler own version?", "body": "<p>I hope this might be of some help to you here.</p>\n\n<p>First, you need to install the appropriate version of bundler:</p>\n\n<pre><code>% gem install bundler -v '~&gt; 1.12.5'\nSuccessfully installed bundler-1.12.5\n</code></pre>\n\n<p>Then force RubyGems to use the version you want.</p>\n\n<pre><code>% bundle _1.12.5_ install\n</code></pre>\n\n<hr>\n\n<p>This pattern <code>gem-binary _gem-version_</code> works for any gem binary.</p>\n\n<p>You can check the available versions for Bundler from <a href=\"https://rubygems.org/gems/bundler/versions\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1619, "user_id": 709627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab99fe65b45016b2db44dddbfdf55664?s=128&d=identicon&r=PG", "display_name": "sylvain.joyeux", "link": "https://stackoverflow.com/users/709627/sylvain-joyeux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469133133, "creation_date": 1469015929, "last_edit_date": 1469133133, "question_id": 38480690, "link": "https://stackoverflow.com/questions/38480690/how-to-manage-rubys-bundler-own-version", "title": "how to manage ruby&#39;s bundler own version?", "body": "<p>I use bundler to manage my dependencies' versions.</p>\n\n<p>The question I am asking myself now, is: how to manage bundler's version itself. I mean, \"bundler install/update/outdated\" helps me understand what I am holding back, update them optimistically or pessimistically ... but I am not sure what's the best practice / procedure to decide about bundler itself.</p>\n\n<p>In other words, is there a gem- or bundler-based workflow that ensures that I and my coworkers do use the latest (or the to-be-specified) version. Bundler gives us this workflow for all the other gems, but what about bundler itself ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "gemfile"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1469015622, "post_id": 38480568, "comment_id": 64363104, "body": "gem install nio4r -v &#39;1.2.1&#39; run and/ it will solve your error"}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1469015874, "post_id": 38480568, "comment_id": 64363303, "body": "it returns this : <a href=\"http://pastebin.com/czfiV0Gb\" rel=\"nofollow noreferrer\">pastebin.com/czfiV0Gb</a>"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1469015955, "post_id": 38480568, "comment_id": 64363361, "body": "When asking questions, please always include the error full log directly into the question. Please don&#39;t link to external pastie sites since the logs there tend to vanish quickly, making the question way less useful in the future."}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 2438869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566da8b08a1273b08290fac1fd9f697?s=128&d=identicon&r=PG", "display_name": "gizotti", "link": "https://stackoverflow.com/users/2438869/gizotti"}, "edited": false, "score": 1, "creation_date": 1482496242, "post_id": 38480622, "comment_id": 69805424, "body": "This is highly unrecommended. It might end up update gems you don&#39;t want to."}, {"owner": {"reputation": 2461, "user_id": 1171227, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccba7dcb97b614dda12f03aaad98e347?s=128&d=identicon&r=PG", "display_name": "Grilse", "link": "https://stackoverflow.com/users/1171227/grilse"}, "edited": false, "score": 0, "creation_date": 1497252108, "post_id": 38480622, "comment_id": 75980459, "body": "Updating the gem nio4r from v2.0.0 to v2.1.0 resolved the problem for me."}, {"owner": {"reputation": 7856, "user_id": 79068, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FNeR0.png?s=128&g=1", "display_name": "Ben Hull", "link": "https://stackoverflow.com/users/79068/ben-hull"}, "reply_to_user": {"reputation": 126, "user_id": 2438869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566da8b08a1273b08290fac1fd9f697?s=128&d=identicon&r=PG", "display_name": "gizotti", "link": "https://stackoverflow.com/users/2438869/gizotti"}, "edited": false, "score": 1, "creation_date": 1543842503, "post_id": 38480622, "comment_id": 94051413, "body": "To expand on @gizotti&#39;s comment, Gemfile.lock is the file which stores the gem dependency tree and the precise versions of each gem your project uses. If <code>Gemfile</code> is the recipe, <code>Gemfile.lock</code> is the cake you baked from the recipe. If you remove it, Bundler will rebuild a new one based on your Gemfile, which means you may end up with different versions of any gem in the tree in your project. For serious projects, that means lots of testing and validation, and not something you want to &#39;just do&#39;. In any case, you can achieve basically the same thing by running <code>bundle update</code>."}, {"owner": {"reputation": 1326, "user_id": 766307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cce7ef3952b8640d906473d04ece217?s=128&d=identicon&r=PG", "display_name": "\u0414\u0430\u043d\u0438\u0438\u043b \u041f\u0440\u043e\u043d\u0438\u043d", "link": "https://stackoverflow.com/users/766307/%d0%94%d0%b0%d0%bd%d0%b8%d0%b8%d0%bb-%d0%9f%d1%80%d0%be%d0%bd%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 7856, "user_id": 79068, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FNeR0.png?s=128&g=1", "display_name": "Ben Hull", "link": "https://stackoverflow.com/users/79068/ben-hull"}, "edited": false, "score": 1, "creation_date": 1581482781, "post_id": 38480622, "comment_id": 106444617, "body": "@BenHull this comment is the greatest text about lockfiles I ever read"}], "tags": [], "owner": {"reputation": 141, "user_id": 6459059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EISYOPuhTRc/AAAAAAAAAAI/AAAAAAAAABc/cMW60q5k3FY/photo.jpg?sz=128", "display_name": "Hemanthkumar Naik", "link": "https://stackoverflow.com/users/6459059/hemanthkumar-naik"}, "is_accepted": false, "score": 0, "last_activity_date": 1469015765, "creation_date": 1469015765, "answer_id": 38480622, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/38480622#38480622", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>Remove the Gemfile.lock and run bundle install command</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469016740, "post_id": 38480673, "comment_id": 64363884, "body": "i installed it and ran the setup and marked every thing in the setup , but when it finished and i tried again it gave me the same result.   did i do something wrong in the installation  of  DefKit ?"}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469017138, "post_id": 38480673, "comment_id": 64364207, "body": "should i install a certain version of DefKit  ? i have installed version 2.2.5"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 0, "last_activity_date": 1469015883, "creation_date": 1469015883, "answer_id": 38480673, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/38480673#38480673", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>To quote from your log output:</p>\n\n<blockquote>\n  <p>The compiler failed to generate an executable file. (RuntimeError)\n  You have to install development tools first.</p>\n</blockquote>\n\n<p>On windows, you need to <a href=\"http://rubyinstaller.org/add-ons/devkit/\" rel=\"nofollow\">install the DevKit</a> in order to be able to compile gems.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 1, "creation_date": 1469141943, "post_id": 38507114, "comment_id": 64428135, "body": "i can&#39;t thank you enough my friend , some people told me before about DevKit ,but with no instructions so i couldn&#39;t bend it to ruby . of course there were other problems ,but they are solved now . thank you again"}, {"owner": {"reputation": 359, "user_id": 5937038, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/50fcb410cc1ce14fd893cc43aec859f7?s=128&d=identicon&r=PG", "display_name": "Melvin", "link": "https://stackoverflow.com/users/5937038/melvin"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469160432, "post_id": 38507114, "comment_id": 64432046, "body": "Downgrade to Ruby 2.2.5 if you are having issues. In my case, Rails 5.0.0 doesn&#39;t play well with Ruby 2.3.1."}, {"owner": {"reputation": 2387, "user_id": 4717992, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SRrvm.jpg?s=128&g=1", "display_name": "Jonathan Soifer", "link": "https://stackoverflow.com/users/4717992/jonathan-soifer"}, "edited": false, "score": 0, "creation_date": 1478090817, "post_id": 38507114, "comment_id": 68012393, "body": "@MelvinCh&#39;ng I&#39;m also having issues with Rails 5 + Ruby 2.3.1 and some gems (nio4r, pg, puma, websocker-driver). Is this a known issue?"}, {"owner": {"reputation": 359, "user_id": 5937038, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/50fcb410cc1ce14fd893cc43aec859f7?s=128&d=identicon&r=PG", "display_name": "Melvin", "link": "https://stackoverflow.com/users/5937038/melvin"}, "reply_to_user": {"reputation": 2387, "user_id": 4717992, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SRrvm.jpg?s=128&g=1", "display_name": "Jonathan Soifer", "link": "https://stackoverflow.com/users/4717992/jonathan-soifer"}, "edited": false, "score": 0, "creation_date": 1478381141, "post_id": 38507114, "comment_id": 68133343, "body": "@JonathanSoifer If you are having that issues on Windows, it is recommended to downgrade your Ruby to 2.2.3. Many people have issues when running Ruby 2.3.1 on Windows. Latest version of Ruby works well on Mac."}, {"owner": {"reputation": 2387, "user_id": 4717992, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SRrvm.jpg?s=128&g=1", "display_name": "Jonathan Soifer", "link": "https://stackoverflow.com/users/4717992/jonathan-soifer"}, "edited": false, "score": 0, "creation_date": 1478382375, "post_id": 38507114, "comment_id": 68133681, "body": "@MelvinCh&#39;ng Mac :)"}], "tags": [], "owner": {"reputation": 359, "user_id": 5937038, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/50fcb410cc1ce14fd893cc43aec859f7?s=128&d=identicon&r=PG", "display_name": "Melvin", "link": "https://stackoverflow.com/users/5937038/melvin"}, "is_accepted": true, "score": 7, "last_activity_date": 1469111647, "creation_date": 1469111647, "answer_id": 38507114, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/38507114#38507114", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>I am facing the same issue while I was trying to upgrade my Rails to V5.0.0, I follow this instruction and it works perfectly. Read the section \"Install the Ruby DevKit\" here >> <a href=\"http://jekyll-windows.juthilo.com/1-ruby-and-devkit/\" rel=\"noreferrer\">http://jekyll-windows.juthilo.com/1-ruby-and-devkit/</a></p>\n"}, {"comments": [{"owner": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1480017284, "post_id": 38543239, "comment_id": 68809602, "body": "I did it the other way..! installed x64 ruby with x32 devkit, realised it only when I tried to go see the gems in their directory for inspection,,, And saved my day :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 6477530, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210270015092475/picture?type=large", "display_name": "Hezzy Okello", "link": "https://stackoverflow.com/users/6477530/hezzy-okello"}, "is_accepted": false, "score": 1, "last_activity_date": 1469286642, "creation_date": 1469286642, "answer_id": 38543239, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/38543239#38543239", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>I came across this problem as i was setting up rails too. (looking for an alternative to php).</p>\n\n<ul>\n<li>I realized that i had installed x86 ruby with x64 Devkit, so i first downloaded x64 ruby which i installed and uninstalled the x86 version. I made sure my path variables were well set.</li>\n<li>Then i installed devkit using the instructions on this page <a href=\"http://rubyonwindowsguides.github.io/book/ch02-04.html\" rel=\"nofollow\">http://rubyonwindowsguides.github.io/book/ch02-04.html</a></li>\n<li>Finally i installed rails and it worked fine without the errors this time</li>\n</ul>\n\n<p>Hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 1481, "user_id": 1103530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5880ea2fb9d6f65e608a59b9cb7615a4?s=128&d=identicon&r=PG", "display_name": "Jimbali", "link": "https://stackoverflow.com/users/1103530/jimbali"}, "edited": false, "score": 0, "creation_date": 1493386840, "post_id": 41776488, "comment_id": 74409420, "body": "lol tried various things for 2 hours and this was the solution. \ud83d\ude02 Well done that boy!"}], "tags": [], "owner": {"reputation": 79, "user_id": 7371431, "user_type": "registered", "profile_image": "https://graph.facebook.com/951326888335984/picture?type=large", "display_name": "David Hernandez", "link": "https://stackoverflow.com/users/7371431/david-hernandez"}, "is_accepted": false, "score": 1, "last_activity_date": 1484980887, "creation_date": 1484980887, "answer_id": 41776488, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/41776488#41776488", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>My son fixed this problem for me. The problem was that I installed first, Ruby and then the Rails installer. So I had to uninstall Ruby and reinstall with the Rails installer only. </p>\n"}, {"tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": false, "score": 2, "last_activity_date": 1495454593, "creation_date": 1495454593, "answer_id": 44112395, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/44112395#44112395", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>I had a similar problem and running this command solved my issue.</p>\n\n<pre><code>bundle config build.nio4r --with-cflags=\"-std=c99\"\n</code></pre>\n\n<p>Now you can successfully run <code>bundle install</code> afterwards.</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 3825134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RridN.png?s=128&g=1", "display_name": "lord5et", "link": "https://stackoverflow.com/users/3825134/lord5et"}, "is_accepted": false, "score": 4, "last_activity_date": 1498763905, "creation_date": 1498763905, "answer_id": 44833307, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/44833307#44833307", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>Solution for Fedora 64bit</p>\n\n<pre><code>sudo dnf install redhat-rpm-config\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 6150434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ceecbb8c5908b4675fe7b1120759084?s=128&d=identicon&r=PG&f=1", "display_name": "keke", "link": "https://stackoverflow.com/users/6150434/keke"}, "is_accepted": false, "score": 1, "last_activity_date": 1499133163, "creation_date": 1499133163, "answer_id": 44895823, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/44895823#44895823", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>Had this same issue on Ubuntu 16.04.\nWhat I did to fix this :</p>\n\n<p>Remove Gemfile.lock : sudo rm Gemfile.lock\nInstalled Ruby-Dev: </p>\n\n<p>sudo apt-add-repository ppa:brightbox/ruby-ng\nsudo apt-get update\nsudo apt-get install  ruby2.4-dev</p>\n\n<p>and the important step : REBOOT!</p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 3486976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdd5a5ce545cc34b79c1e834359ad7a?s=128&d=identicon&r=PG&f=1", "display_name": "SkipIntro", "link": "https://stackoverflow.com/users/3486976/skipintro"}, "is_accepted": false, "score": 0, "last_activity_date": 1506385342, "creation_date": 1506385342, "answer_id": 46416033, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/46416033#46416033", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>If you use Windows and installed ruby with RubyInstaller with version more or equal to 2.4, than you should not install DevKit from RubyInstaller website and only use 'msys64' which is installed after Ruby with RubyInstaller (make sure you type number 3 to install both msys and mingw). Delete devkit directory and its path from PATH environment variable, so when rubygems will try to install nio4r and call C compilers, it will call msys ones.\nRead here <a href=\"https://rubyinstaller.org/2017/05/25/rubyinstaller-2.4.1-1-released.html\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/2017/05/25/rubyinstaller-2.4.1-1-released.html</a> for more info about MSYS2 and DevKit in RubyInstaller </p>\n"}, {"tags": [], "owner": {"reputation": 12200, "user_id": 473040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2713a4959692f16d27d2553fb06cc4b?s=128&d=identicon&r=PG", "display_name": "equivalent8", "link": "https://stackoverflow.com/users/473040/equivalent8"}, "is_accepted": false, "score": 1, "last_activity_date": 1612985354, "creation_date": 1612985354, "answer_id": 66143732, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension/66143732#66143732", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>this may be related: <a href=\"https://stackoverflow.com/questions/56567095/gcc-compilation-error-when-installing-nokogiri\">GCC compilation error when installing Nokogiri</a></p>\n<blockquote>\n<p>I found a error. i had a 2 gcc versions installed on my system and I just run <code>brew unlink gcc</code> and that solved the problem.</p>\n</blockquote>\n<p>this was my case too. <code>benw unlink gcc</code> worked</p>\n"}], "owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18572, "favorite_count": 3, "accepted_answer_id": 38507114, "answer_count": 10, "score": 11, "last_activity_date": 1612985354, "creation_date": 1469015570, "last_edit_date": 1537337968, "question_id": 38480568, "link": "https://stackoverflow.com/questions/38480568/rails-5-0-0-when-installing-nio4r-failed-to-build-gem-native-extension", "title": "rails 5.0.0 when installing &quot;nio4r&quot; : Failed to build gem native extension", "body": "<p>Here is the logs: <a href=\"http://pastebin.com/CAgur9xd\" rel=\"noreferrer\">http://pastebin.com/CAgur9xd</a></p>\n\n<pre><code>Installing nio4r 1.2.1 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    C:/RailsInstaller/Ruby2.2.0/bin/ruby.exe -r ./siteconf20160720-8272-c88sgk.rb extconf.rb --with-cflags=-std=c99\nchecking for unistd.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/RailsInstaller/Ruby2.2.0/bin/$(RUBY_BASE_NAME)\nC:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:587:in `try_cpp'\n         from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:1060:in `block in have_header'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:911:in `block in checking_for'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:351:in `block (2 levels) in postpone'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:351:in `block in postpone'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:347:in `postpone'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:910:in `checking_for'\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/mkmf.rb:1059:in `have_header'\n        from extconf.rb:3:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n</code></pre>\n\n<p>when installing bundle it returns(starts at line 117 in the logs ):</p>\n\n<pre><code>Installing nio4r 1.2.1 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n</code></pre>\n\n<p>So the bundle can't be installed. It returns at the end :</p>\n\n<pre><code>An error occurred while installing nio4r (1.2.1), and Bundler cannot continue.\nMake sure that `gem install nio4r -v '1.2.1'` succeeds before bundling.\n</code></pre>\n\n<p>Note :I have tried the solutions in other questions, but it is still the same.\nIf it is possible to install \"nio4r\" manually please tell me how .</p>\n"}, {"tags": ["ruby", "sorting"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 0, "last_activity_date": 1469016288, "last_edit_date": 1469016288, "creation_date": 1469015929, "answer_id": 38480689, "question_id": 38480331, "link": "https://stackoverflow.com/questions/38480331/logic-behind-hashsort-in-ruby/38480689#38480689", "title": "Logic behind Hash#sort in Ruby", "body": "<p>Your first question is not clear. If it is to be made clear, it would probably going to be opinion based, which does not have a correct answer.</p>\n\n<p>Regarding your second question, a hash would be converted to an array with <code>to_a</code>, and that guarantees that you get an array of arrays, where each sub-array has a key and the corresponding value of the original hash in this order. You always get:</p>\n\n<pre><code>{:a =&gt; :b, :c =&gt; :d}.to_a # =&gt; [[:a, :b], [:c, :d]]\n</code></pre>\n\n<p>and not:</p>\n\n<pre><code>{:a =&gt; :b, :c =&gt; :d}.to_a # =&gt; [[:b, :a], [:d, :c]]\n</code></pre>\n\n<p>Then, <code>sort</code> applies to the result. When an array of arrays is sorted, it is first sorted by the first element of the subarrays, i.e., <code>:a</code> and <code>:c</code> above, which correspond to the keys, not the values, of the original hash. So you can rely on the behavior you are mentioning.</p>\n"}, {"tags": [], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "is_accepted": false, "score": 1, "last_activity_date": 1469016545, "creation_date": 1469016545, "answer_id": 38480906, "question_id": 38480331, "link": "https://stackoverflow.com/questions/38480331/logic-behind-hashsort-in-ruby/38480906#38480906", "title": "Logic behind Hash#sort in Ruby", "body": "<h3>Short answer</h3>\n\n<pre><code>h = {:john =&gt; 18, :anne =&gt; 24, :beth =&gt; 35, :paul =&gt; 33}\n</code></pre>\n\n<p><strong>Sort by key</strong></p>\n\n<pre><code>h.sort.to_h  # Output:  =&gt; {:anne=&gt;24, :beth=&gt;35, :john=&gt;18, :paul=&gt;33}\n</code></pre>\n\n<p><strong>Sort by value</strong></p>\n\n<pre><code>h.sort_by {|_,v| v}.to_h  # Output:  =&gt; {:john=&gt;18, :anne=&gt;24, :paul=&gt;33, :beth=&gt;35}\n</code></pre>\n\n<p>Both sort and sort_by methods return arrays, hence the need to convert the result back into a hash with to_h.</p>\n\n<h3>Long answer (learn more abour sort)</h3>\n\n<p>Unlike the Array class, which provides its own implementation of the sort method, the Hash class uses the sort method implemented in the Enumerable module.</p>\n\n<pre><code>Array.instance_method(:sort)  # Output: =&gt; #&lt;UnboundMethod: Array#sort&gt;\nHash.instance_method(:sort)  # Output: =&gt; #&lt;UnboundMethod: Hash(Enumerable)#sort&gt;\n</code></pre>\n\n<p>Objects such as numbers and strings, which can be compared (amongst themselves) in terms of being greater or smaller than others, provide the &lt;=> method, also known as the spaceship method. When comparing two objects, &lt;=> returns -1 if the first object is lesser than the second (a &lt; b), 0 in case they are equal (a == b) and 1 when the first object is greater than the second (a > b).</p>\n\n<pre><code>5 &lt;=&gt; 8  # Output:  =&gt; -1\n5 &lt;=&gt; 5  # Output: =&gt; 0\n8 &lt;=&gt; 5  # Output: =&gt; 1\n</code></pre>\n\n<p>Most comparable or sortable object classes, such as Integer, Float, Time and String, include a mixin called Comparable, which provides the following comparison operators: &lt; (less than), &lt;= (less than or equal), == (equal), > (greater than), >= (greater than or equal). These methods use the spaceship operator under the hood.</p>\n\n<p>Let's find out which classes include the Comparable mixin:</p>\n\n<pre><code>ObjectSpace.each_object(Class).select { |c| c.included_modules.include? Comparable }\n# Output: =&gt; [Complex, Rational, Time, File::Stat, Bignum, Float, Fixnum, Integer, Numeric, Symbol, String, Gem::Version, IRB::Notifier::NoMsgNotifier, IRB::Notifier::LeveledNotifier]\n</code></pre>\n\n<p>Comparison operators can be used in objects of all the above classes, as in the following examples.</p>\n\n<pre><code># String\n\"a\" &lt; \"b\" # Output: =&gt; true\n\"a\" &gt; \"b\" # Output: =&gt; false\n\n# Symbol\n:a &lt; :b  # Output: =&gt; true\n:a &gt; :b  # Output: =&gt; false\n\n# Fixnum (subclass of Integer)\n1 &lt; 2  # Output: =&gt; true\n2 &gt;= 2  # Output: =&gt; true\n\n# Float\n1.0 &lt; 2.0 # Output: =&gt; true\n2.0 &gt;= 2.0 # Output: =&gt; true\n\n# Time\nTime.local(2016, 5, 28) &lt; Time.local(2016, 5, 29) # Output: =&gt; true\n</code></pre>\n\n<p>Most sorting operations use the spaceship (&lt;=>) operator.</p>\n"}], "owner": {"reputation": 33, "user_id": 5084407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0200ff76cee7fea5fe9f1bcf02810dc?s=128&d=identicon&r=PG&f=1", "display_name": "AlexGL", "link": "https://stackoverflow.com/users/5084407/alexgl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 38480689, "answer_count": 2, "score": 2, "last_activity_date": 1469016545, "creation_date": 1469014873, "last_edit_date": 1469015748, "question_id": 38480331, "link": "https://stackoverflow.com/questions/38480331/logic-behind-hashsort-in-ruby", "title": "Logic behind Hash#sort in Ruby", "body": "<p>Hash may be sorted by the key with the <code>Enumerable#sort</code> method. Internally, in C, it is described as:</p>\n\n<pre><code>return rb_ary_sort(enum_to_a(0, 0, obj));\n</code></pre>\n\n<ul>\n<li>Is <code>#sort</code> intended to be used on <code>Hash</code>?</li>\n<li>May I rely on its \"collect keys and sort\" behavior, or should I expect it to be changed for \"sort by value\" at any moment?</li>\n</ul>\n"}, {"tags": ["ruby", "rspec", "sinatra", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1469036472, "post_id": 38478948, "comment_id": 64376330, "body": "If you pause the test after the <code>visit</code> what url is the browser attempting to connect to?"}, {"owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1469086660, "post_id": 38478948, "comment_id": 64395612, "body": "Your right with the Proxy matter. I forgot to show that Info. But Localhost (127.0.0.1) should not be affected. And i manually disabled it and still not working.  Window of the Browser is always blank so capybara can open the browser but then it fails to go to any url in my opinion.  My current FF version is 40.0.3, maybe a reason i will try this out as last, because in my opionion it is not to old. Selenium gem is 2.53.4    Thx for the Capybara.server_* config stuff i didn&#39;t know that but it is still failing."}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "edited": false, "score": 0, "creation_date": 1469109694, "post_id": 38487486, "comment_id": 64410979, "body": "It has todo with some very weird stuff in my setup.  I have babun (cygwin) installed and always running tests from that point. When i do it in a plain cmd of Windows its working...why ever but it is a solution for me now.  I will give you right answer anyway because my setup was broken and your answer gives me some new information i can do to setup capybara. THX."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1469037116, "creation_date": 1469037116, "answer_id": 38487486, "question_id": 38478948, "link": "https://stackoverflow.com/questions/38478948/integrate-capybara-in-sinatra-app-with-rspec-result-always-in-504-tests/38487486#38487486", "title": "Integrate Capybara in SInatra app with rspec result always in 504 tests", "body": "<p>Running the exact code posted works fine for me, which I'm guessing means one of two things.  Either the version of Firefox you're using is outdated (make sure you're using 47.0.1) or you're on a machine that has a proxy server or firewall that is interfering with requests to 127.0.0.1:&lt;some random port>.  The default Capybara config starts up a server on 127.0.0.1:&lt;random port> to handle requests for the app under test.  If those connections are blocked or proxied elsewhere it will obviously prevent things from working properly.  If you need to bind to a different interface or set a fixed port to get around corporate firewall/proxy restrictions you can do that by setting Capybara.server_host and Capybara.server_port</p>\n"}], "owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 38487486, "answer_count": 1, "score": -1, "last_activity_date": 1469037116, "creation_date": 1469011041, "question_id": 38478948, "link": "https://stackoverflow.com/questions/38478948/integrate-capybara-in-sinatra-app-with-rspec-result-always-in-504-tests", "title": "Integrate Capybara in SInatra app with rspec result always in 504 tests", "body": "<p>I don't get capybara working with my modular sinatra app. I created a small test app and have the same issue. I get always a 504 Timeout Error and i think that the app isn't really loaded by Capybara regardless the Line <code>Capybara.app = Testapp</code> in the acceptance_helper.</p>\n\n<p>Browser Firefox opens when test is running but don't go to any URL and shows always a blank site.</p>\n\n<p>When i do the same test only with rspec it works (second one). </p>\n\n<p>What i'm doing wrong?</p>\n\n<p><strong>My Setup:</strong></p>\n\n<pre><code>OS: Win 7 Professional 64-bit\nRuby version: ruby 2.2.2p95 (2015-04-13 revision 50295) [x64-mingw32]\nFirefox version: 40.0.3\n\ngem versions\n- sinatra (1.4.6)\n- rspec (3.3.0)\n- capybara (2.7.1)\n- selenium-webdriver (2.53.4)\n- thin (1.5.1)  \n- rack (1.6.4)\n- rack-test (0.6.3)  \n</code></pre>\n\n<p><strong>App structure:</strong></p>\n\n<pre><code>test_sinatra_capybara\n |\n |- testapp.rb\n |- spec\n |    |- spec_helper.rb\n |    |- acceptance_helper.rb\n |    |- testapp_spec.rb\n |- views\n |    |- index.slim\n</code></pre>\n\n<p><strong>testapp.rb</strong></p>\n\n<pre><code>require 'sinatra'\nrequire 'sinatra/base'\nrequire 'slim'\n\nclass Testapp &lt; Sinatra::Base\n  get '/' do\n    slim :index\n  end\nend\n</code></pre>\n\n<p><strong>index.slim</strong></p>\n\n<pre><code>#test-id\n  | Willkommen\n</code></pre>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code>require 'rspec'\nrequire 'rack/test'\nrequire_relative '../testapp'\nTestapp.environment = :test\n\nmodule RSpecMixin\n  include Rack::Test::Methods\n  def app() Testapp end\nend\n\nRSpec.configure do |config|\n  config.include RSpecMixin\n  # Use color in STDOUT\n  config.color = true\n\n  # Use the specified formatter\n  config.formatter = :documentation\n\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\nend \n</code></pre>\n\n<p><strong>acceptance_helper.rb</strong></p>\n\n<pre><code>require File.dirname(__FILE__) + '/spec_helper'\n\nrequire 'capybara'\nrequire 'capybara/rspec'\n\nCapybara.default_driver = :selenium\n\nCapybara.app = Testapp\n\nRSpec.configure do |config|\n  config.include Capybara::DSL\n  config.include Capybara::RSpecMatchers\nend\n</code></pre>\n\n<p><strong>testapp_spec.rb</strong></p>\n\n<pre><code>require File.dirname(__FILE__) + '/acceptance_helper'\n\ndescribe 'URLs that require login' do\n  it \"start page capybara\" do\n    # I tried both\n    visit '/'\n    # visit 'http:localhost:4567'\n\n    page.should have_content(\"Willkommen\")\n  end\n\n  it \"start page rspec\" do\n    get \"/\"\n\n    expect(last_response.body).to include(\"Willkommen\")\n  end\nend\n</code></pre>\n\n<p>So as i said, last test is working:</p>\n\n<pre><code>Finished in 12.91 seconds (files took 2.54 seconds to load)\n2 examples, 1 failure\n\nFailed examples:\n\nrspec ./spec/testapp_spec.rb:4 # URLs that require login start page capybara\n</code></pre>\n\n<p>Error on First test:</p>\n\n<pre><code>Selenium::WebDriver::Error::WebDriverError:\nunexpected response, code=504, content-type=\"text/html\"\n</code></pre>\n"}, {"tags": ["ruby", "mixins"], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "edited": false, "score": 1, "creation_date": 1469015780, "post_id": 38480382, "comment_id": 64363233, "body": "Thank you Josh for answer, but it little bit unclear what do you mean hear:  I would recommend you use composition instead (e.g. pass in Connection/Request) as it makes more sense to me in this case and has stronger encapsulation."}, {"owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "edited": false, "score": 0, "creation_date": 1469016792, "post_id": 38480382, "comment_id": 64363926, "body": "What Josh means is that you should create a Connection/Request class that is useable within your Customer class. When you instantiate your Customer you can pass in your Request class or you could instantiate a Request in your initializer for Customer. Personally I prefer doing something with composition b/c then I can test the individual objects easily."}, {"owner": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "edited": false, "score": 0, "creation_date": 1469017466, "post_id": 38480382, "comment_id": 64364446, "body": "Unflores can you please provide an example?"}, {"owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "reply_to_user": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "edited": false, "score": 0, "creation_date": 1469023387, "post_id": 38480382, "comment_id": 64369141, "body": "@user525717 I added an example. In order to retain the <code>Customer.all</code> interface you&#39;d have to bind the connection to the class at some point (which is probably more effort than it&#39;s worth, so a mixin approach might just make things simpler)"}], "tags": [], "owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "is_accepted": false, "score": 5, "last_activity_date": 1469023328, "last_edit_date": 1469023328, "creation_date": 1469015018, "answer_id": 38480382, "question_id": 38478720, "link": "https://stackoverflow.com/questions/38478720/ruby-mixins-looking-for-a-best-practice/38480382#38480382", "title": "Ruby mixins looking for a best practice", "body": "<p>Mixins are a strange beast. Best practices vary depending on who you talk to. As far as reuse goes, you've achieved that here with mixins, and you have a nice separation of concerns.</p>\n\n<p>However, mixins are a form of inheritance (you can take a peek at <code>#ancestors</code>). I would challenge you saying that you shouldn't use inheritance here because a <code>Customer</code> doesn't have an \"is-a\" relationship with <code>Connection</code>. I would recommend you use composition instead (e.g. pass in <code>Connection/Request</code>) as it makes more sense to me in this case and has stronger encapsulation.</p>\n\n<p>One guideline for writing mixins is to make everything end in \"-able\", so you would have <code>Enumerable</code>, <code>Sortable</code>, <code>Runnable</code>, <code>Callable</code>, etc. In this sense, mixins are generic extensions that provide some sort of helpers that are depending on a very specific interface (e.g. <code>Enumerable</code> depends on the class to implement <code>#each</code>).</p>\n\n<p>You could also use mixins for cross-cutting concerns. For example, we've used mixins in the past in our background jobs so that we could add logging for example without having to touch the source code of the class. In this case, if a new job wants logging, then they just mixin the concern which is coupled to the framework and will inject itself properly.</p>\n\n<p>My general rule of thumb is don't use them if you don't have to. They make understanding the code a lot more complicated in most cases</p>\n\n<p>EDIT: Adding an example of composition. In order to maintain the interface you have above you'd need to have some sort of global connection state, so it may not make sense. Here's an alternative that uses composition</p>\n\n<pre><code>class CustomerConnection\n  # CustomerConnection is composed of a Connection and retains isolation\n  # of responsibilities. It also uses constructor injection (e.g. takes\n  # its dependencies in the constructor) which means easy testing.\n  def initialize(connection)\n    @connection = connection\n  end\n\n  def all_customers\n    @connection.get('v1/customers').map { |res| Customer.new(res) }\n  end\nend\n\nconnection = Connection.new\nCustomerConnection.new(connection).all_customers\n</code></pre>\n"}], "owner": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1469023328, "creation_date": 1469010354, "question_id": 38478720, "link": "https://stackoverflow.com/questions/38478720/ruby-mixins-looking-for-a-best-practice", "title": "Ruby mixins looking for a best practice", "body": "<p>I'm writing Ruby Gem where I have <code>Connection</code> module for <code>Faraday</code> configuration</p>\n\n<pre><code>module Example\n  module Connection\n    private\n\n    def connection\n      Faraday.new(url: 'http://localhost:3000/api') do |conn|\n        conn.request  :url_encoded             # form-encode POST params\n        conn.response :logger                  # log requests to STDOUT\n        conn.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n        conn.use      Faraday::Response::ParseJson\n        conn.use      FaradayMiddleware::RaiseHttpException\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Second module which makes API requests looks like this:</p>\n\n<pre><code>module Example\n  module Request\n    include Connection\n\n    def get(uri)\n      connection.get(uri).body\n    end\n\n    def post(url, attributes)\n      response = connection.post(url) do |request|\n        request.body = attributes.to_json\n      end\n    end\n\n    def self.extended(base)\n      base.include(InstanceMethods)\n    end\n\n    module InstanceMethods\n      include Connection\n\n      def put(url, attributes)\n        response = connection.put(url) do |request|\n          request.body = attributes.to_json\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Class <code>Cusomer</code> where I use <code>Request</code> looks like this:</p>\n\n<pre><code>module Example\n  class Customer\n    extend  Request\n\n    attr_accessor :id, :name, :age\n\n    def initialize(attrs)\n      attrs.each do |key, value|\n        instance_variable_set(\"@#{key}\", value)\n      end\n    end\n\n    def self.all\n      customers = get('v1/customer')\n      customers.map { |cust| new cust }\n    end\n\n    def save\n      params = {\n        id:   self.id,\n        age:  self.age\n        name: self.name,\n      }\n\n      put(\"v1/customers/#{self.id}\", params)\n    end\n  end\nend\n</code></pre>\n\n<p>So here you see in <code>Customer#all</code> class method I'm calling <code>Request#get</code>  method which is available because I extended <code>Request</code> in <code>Customer</code>. then I'm using self.extended method in <code>Request</code> module to be make <code>Request#put</code> available in <code>Customer</code> class, so I have question is this good approach to use mixins like this, or do you have any suggestion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline"], "comments": [{"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1469010618, "post_id": 38478572, "comment_id": 64359805, "body": "try <code>spring stop</code> and than run <code>rails s</code> again and check."}], "answers": [{"tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1469010912, "creation_date": 1469010912, "answer_id": 38478903, "question_id": 38478572, "link": "https://stackoverflow.com/questions/38478572/how-can-i-force-rails-to-reload-application-js/38478903#38478903", "title": "How can I force Rails to reload application.js?", "body": "<p>To invalidate all assets you should change the following value</p>\n\n<pre><code># config/initializers/assets.rb\nRails.application.config.assets.version = '1.0'\n</code></pre>\n\n<p>and then restart the server.</p>\n"}], "owner": {"reputation": 175, "user_id": 6595360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5198bf63cc50bb23a9e50a9b5efbb52d?s=128&d=identicon&r=PG&f=1", "display_name": "Matudi", "link": "https://stackoverflow.com/users/6595360/matudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 38478903, "answer_count": 1, "score": 3, "last_activity_date": 1469010912, "creation_date": 1469009993, "question_id": 38478572, "link": "https://stackoverflow.com/questions/38478572/how-can-i-force-rails-to-reload-application-js", "title": "How can I force Rails to reload application.js?", "body": "<p>I've made some change in application.js, but even after restarting rails, I still have the same error and the source code the error show is the old one, it's not been changed. How can I force Rails to reload application.js?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "blogs", "delete-method"], "comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 3, "creation_date": 1469008893, "post_id": 38477729, "comment_id": 64358661, "body": "How exactly is it not working?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1469009646, "post_id": 38477729, "comment_id": 64359144, "body": "what is the html ouput on front? by the way, what happens when you click that link?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1469014594, "post_id": 38477729, "comment_id": 64362410, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1469009131, "post_id": 38478121, "comment_id": 64358846, "body": "Rails will just guess <code>@post</code> resolves to <code>post_path(@post)</code> so this is no different to the OPs code"}, {"owner": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "edited": false, "score": 0, "creation_date": 1470395234, "post_id": 38478121, "comment_id": 64945465, "body": "It is just reloads the page, but doesnt delets the post or redirects"}], "tags": [], "owner": {"reputation": 181, "user_id": 2771513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94646e0805b7c79994f76cd7c51b5c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Meri Alvarado", "link": "https://stackoverflow.com/users/2771513/meri-alvarado"}, "is_accepted": false, "score": 0, "last_activity_date": 1469008800, "creation_date": 1469008800, "answer_id": 38478121, "question_id": 38477729, "link": "https://stackoverflow.com/questions/38477729/ruby-delete-method-does-not-work/38478121#38478121", "title": "Ruby delete method does not work", "body": "<p>try this query for the link:</p>\n\n<pre><code>&lt;div class=\"btn\"&gt;\n&lt;%= link_to \"Delete\", @post, :confirm =&gt; \"Are you sure?\", :method =&gt; :delete %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I think the problem just lies on the post_path(@post). Hope that this works.</p>\n"}, {"tags": [], "owner": {"reputation": 2906, "user_id": 1076207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54676eedfb0abdbfbf501a05e273bc83?s=128&d=identicon&r=PG", "display_name": "SoAwesomeMan", "link": "https://stackoverflow.com/users/1076207/soawesomeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1469014879, "creation_date": 1469014879, "answer_id": 38480337, "question_id": 38477729, "link": "https://stackoverflow.com/questions/38477729/ruby-delete-method-does-not-work/38480337#38480337", "title": "Ruby delete method does not work", "body": "<p>If the routes are resourceful and the delete is happening in the DB, the problem is probably that the <code>redirect_to</code> route is not plural.</p>\n\n<p><em>see: <a href=\"http://guides.rubyonrails.org/routing.html#path-and-url-helpers\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html#path-and-url-helpers</a></em></p>\n\n<p>Corrected:</p>\n\n<pre><code>def destroy\n  @post.destroy\n  redirect_to posts_path\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "edited": false, "score": 0, "creation_date": 1470395005, "post_id": 38483724, "comment_id": 64945312, "body": "It still says &quot;No route matches&quot; and gives me the following route as suggestion: DELETE\t/posts/:id(.:format)\t posts#destroy"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6434940"}, "reply_to_user": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "edited": false, "score": 0, "creation_date": 1470489247, "post_id": 38483724, "comment_id": 64978147, "body": "Hi @MatthiasCordes can you please post your <code>rake routes</code> output or routes.rb file content. Maybe restful routes are not presented."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6434940"}, "reply_to_user": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "edited": false, "score": 0, "creation_date": 1470585021, "post_id": 38483724, "comment_id": 64998913, "body": "Yes I saw it seems routes all in order. I searched the issue further and came across one entry on stackoverflow <a href=\"http://stackoverflow.com/questions/9945441/link-to-method-delete-not-routing-to-destroy-in-rails-3-with-jquery\">@link</a> and one blog entry <a href=\"https://www.viget.com/articles/delete-in-rails-without-jquery-and-ujs\" rel=\"nofollow noreferrer\">@link</a> if you are using JQuery it can cause some issues with delete method if so pls make sure you add these lines  <code>&#47;&#47;= require jquery &#47;&#47;= require jquery_ujs &#47;&#47;= require_tree . </code> into <code>app&#47;assets&#47;javascripts&#47;application.js</code> I hope this helps."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6434940"}, "reply_to_user": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "edited": false, "score": 0, "creation_date": 1470658294, "post_id": 38483724, "comment_id": 65023287, "body": "Hi @MatthiasCordes thank you for your comment and I am glad to hear that it worked. Kindly consider accepting this or any other solution by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this. Happy coding!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6434940"}, "is_accepted": true, "score": 0, "last_activity_date": 1469024002, "creation_date": 1469024002, "answer_id": 38483724, "question_id": 38477729, "link": "https://stackoverflow.com/questions/38477729/ruby-delete-method-does-not-work/38483724#38483724", "title": "Ruby delete method does not work", "body": "<p>Please try adding a mechanism to find the @post since http is stateless <code>@post</code> needs to be assigned. <code>@post = Post.find(params[:id])</code> part has been added for you to try. Thank you.</p>\n\n<pre><code>def destroy\n  @post = Post.find(params[:id])\n  @post.destroy\n  redirect_to posts_path\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6586362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1352579308089954/picture?type=large", "display_name": "Matthias Cordes", "link": "https://stackoverflow.com/users/6586362/matthias-cordes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 38483724, "answer_count": 3, "score": -1, "last_activity_date": 1470521336, "creation_date": 1469007788, "last_edit_date": 1470521336, "question_id": 38477729, "link": "https://stackoverflow.com/questions/38477729/ruby-delete-method-does-not-work", "title": "Ruby delete method does not work", "body": "<p>For my blog, the <strong>delete method</strong> doesn't work (edit, update, create... are fine).</p>\n\n<p>I already tried different ways of defining the link, but it all didn't help yet. Now at the moment, my html.erb code looks  like the following:</p>\n\n<pre><code>&lt;div class=\"btn\"&gt;\n&lt;%= link_to \"Delete\", post_path(@post), :confirm =&gt; \"Are you sure?\", :method =&gt; :delete %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And the controller like this:</p>\n\n<pre><code>def destroy\n    @post.destroy\n    redirect_to post_path\nend\n</code></pre>\n\n<p>Rake routes:</p>\n\n<pre><code>                    posts GET    /posts(.:format)                    posts#index\n                          POST   /posts(.:format)                    posts#create\n                 new_post GET    /posts/new(.:format)                posts#new\n                edit_post GET    /posts/:id/edit(.:format)           posts#edit\n                     post GET    /posts/:id(.:format)                posts#show\n                          PATCH  /posts/:id(.:format)                posts#update\n                          PUT    /posts/:id(.:format)                posts#update\n                          DELETE /posts/:id(.:format)                posts#destroy\n</code></pre>\n"}, {"tags": ["ruby", "templates", "chef-infra", "exists", "cookbook"], "answers": [{"comments": [{"owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "reply_to_user": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "edited": false, "score": 0, "creation_date": 1469004308, "post_id": 38476289, "comment_id": 64355483, "body": "@pulpet112 can you specify which extension of your template?"}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "edited": false, "score": 0, "creation_date": 1469004485, "post_id": 38476289, "comment_id": 64355581, "body": "Sure. It&#39;s .erb file"}, {"owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "reply_to_user": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "edited": false, "score": 0, "creation_date": 1469004571, "post_id": 38476289, "comment_id": 64355641, "body": "@pulpet112 yes you can use this constructions in your file <code>&lt;% %&gt;</code>"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469004660, "post_id": 38476289, "comment_id": 64355707, "body": "Do not do this in a Chef template! It&#39;s a <i>template</i>!"}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "edited": false, "score": 0, "creation_date": 1469004883, "post_id": 38476289, "comment_id": 64355859, "body": "@farhatmihalko Great! And the last question: my path to this directory is wrote in attributes. For instance, i have in attribute file this line: default[&#39;temp&#39;][&#39;path&#39;] = &quot;/folder1/folder2&quot; And there, I&#39;m looking for html files. So how can I replace &#39;filename&#39; in your example? It could be like that?? &lt;% if File.exist?(node[&#39;temp&#39;][&#39;path&#39;]/*.html) -%&gt;   cp &lt;%= node[&#39;temp&#39;][&#39;path&#39;]%&gt;/*.html node[some path] &lt;% end -%&gt;"}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469004895, "post_id": 38476289, "comment_id": 64355873, "body": "@StephenKing - why?"}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469008377, "post_id": 38476289, "comment_id": 64358339, "body": "@StephenKing ok, i think you&#39;re right. I wrote this if statement in recipe, not in template. It almost works. In the if condition, i put sth like this: &quot;#{node[......]}/*.html&quot; but the value of this condition is always false. What is wrong??"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469015175, "post_id": 38476289, "comment_id": 64362793, "body": "Are the files put there during the chef run? Then this is because the <code>if</code> condition is evaluated earlier. Read more about that here in <a href=\"https://coderanger.net/two-pass/\" rel=\"nofollow noreferrer\">@coderanger&#39;s blog</a>."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469015208, "post_id": 38476289, "comment_id": 64362818, "body": "Bad idea in a template because separation of concerns. No logic in templates."}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1469017672, "post_id": 38476289, "comment_id": 64364585, "body": "@StephenKing of course this files are there, even before running the whole chef cookbok. It&#39;s interesting, that when i put a real filename instead of &quot; * &quot;, for example &quot;#{node[..]}/aaa.html, everything is fine and the if condition have true state when this aaa.html file exists and false if not. So the problem is only with &quot; * &quot;"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "edited": false, "score": 0, "creation_date": 1469029541, "post_id": 38476289, "comment_id": 64372180, "body": "@pulpet112 try (untested) <code>if !Dir.glob(&quot;#{node[&#39;temp&#39;][&#39;path&#39;]}&#47;*.html&quot;).empty?</code> instead of <code>File.exists?</code> File as it name implies works with 1 file... But really you&#39;re doing something weird with those cp calls within a template, if you say a word about what you&#39;re trying to achieve we may probably offer better alternatives."}], "tags": [], "owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "is_accepted": false, "score": -1, "last_activity_date": 1469003841, "creation_date": 1469003841, "answer_id": 38476289, "question_id": 38475980, "link": "https://stackoverflow.com/questions/38475980/do-nothing-if-the-file-doesnt-exist-chef-template/38476289#38476289", "title": "Do nothing if the file doesn&#39;t exist - Chef Template", "body": "<p>You can use <code>if</code> statement. </p>\n\n<p>Code wrapped in <code>&lt;% %&gt;</code> or <code>&lt;% -%&gt;</code> is a statement that is evaluated.</p>\n\n<p>So you can write something like this:</p>\n\n<pre><code>&lt;% if File.exist?('filename') -%&gt;\n  # do something\n&lt;% end -%&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 708, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469003841, "creation_date": 1469002803, "question_id": 38475980, "link": "https://stackoverflow.com/questions/38475980/do-nothing-if-the-file-doesnt-exist-chef-template", "title": "Do nothing if the file doesn&#39;t exist - Chef Template", "body": "<p>I create a cookbook for copying some folders to others. In template, I wrote linux commands like:</p>\n\n<pre><code>cp -r [some path] [some path]\ncp -r [some path] [some path]\ncp -r [some path] [some path]\n...\n</code></pre>\n\n<p>But the last command copy files with specific extension .html. So I wrote command like this:</p>\n\n<pre><code>cp [some path]/*.html [some path]\n</code></pre>\n\n<p>Everything works fine but I have to wrote some if statement to the last command because there are cases, when there are no html files in this directory. \nHow to write it in my template?</p>\n"}, {"tags": ["ruby", "string", "escaping"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469001835, "post_id": 38475648, "comment_id": 64354006, "body": "Have you tried to write a pattern for that? Please share your attempt(s)."}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 0, "creation_date": 1469002001, "post_id": 38475648, "comment_id": 64354114, "body": "Could you tell, what you want to get as a result?"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469002259, "post_id": 38475648, "comment_id": 64354270, "body": "@WiktorStribi\u017cew I am trying this <a href=\"https://repl.it/CdvP/1\" rel=\"nofollow noreferrer\">repl.it/CdvP/1</a>"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 2, "creation_date": 1469002310, "post_id": 38475648, "comment_id": 64354302, "body": "@SergeyGuide something that i can use in eval to create a ruby array <code>[&quot;foo&quot;,&quot;bar&quot;,&quot;foo\\&quot;bar\\&quot;baz&quot;]</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469002361, "post_id": 38475648, "comment_id": 64354335, "body": "so did you try the backslash?"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469002584, "post_id": 38475648, "comment_id": 64354482, "body": "@maxpleaner backlash put the backlash with all double qoutes, I want to escape the inner ones only. <code>&quot;hello &quot;World&quot;.&quot;</code> -&gt; <code>&quot;hello \\&quot;Workd\\&quot;.&quot;</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469003213, "post_id": 38475648, "comment_id": 64354839, "body": "How did you ever get into this situation? I.e, why would you not just manually escape the inner quote?"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469003462, "post_id": 38475648, "comment_id": 64354976, "body": "@maxpleaner Fixing someone else&#39;s code. Cant change the whole implementation (which definitely needs a revamp)."}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1469003368, "post_id": 38476104, "comment_id": 64354917, "body": "Or <code>.gsub(&#47;\\b&quot;\\b&#47;,&#39;\\&quot;&#39;)</code>"}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469003705, "post_id": 38476104, "comment_id": 64355117, "body": "Yeah, this is much more elegant solution"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469004090, "post_id": 38476104, "comment_id": 64355347, "body": "I think it won&#39;t fix all the cases, unfortunately. What about <code>&#39;[&quot;foo&quot;,&quot;foo&quot;b ar&quot;baz&quot;,&quot;&quot;an&quot;t&quot;on&quot;&quot;]&#39;</code>?"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "edited": false, "score": 0, "creation_date": 1469004358, "post_id": 38476104, "comment_id": 64355516, "body": "Thanks @SergeyGuide"}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469004390, "post_id": 38476104, "comment_id": 64355534, "body": "@WiktorStribi\u017cew Thanks for your solution and I am testing with  <code>eval(&#39;[&quot;foo&quot;,&quot;bar&quot;,&quot;foo &quot;bar&quot; baz&quot;]&#39;.gsub(&#47;\\b&quot;\\b&#47;,&#39;\\&quot;&#39;))</code>  and it is not working. Both of the solutions, unfortunately."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469004481, "post_id": 38476104, "comment_id": 64355578, "body": "The problem is that it cannot be fixed in 100%. What if the field has <code>&quot;,&quot;</code> <i>inside</i>? There is no 100% safe way to fix that text. It should be fixed before you get it."}, {"owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469004695, "post_id": 38476104, "comment_id": 64355732, "body": "@WiktorStribi\u017cew What would be your preferred way to include space characters before and after the qouted text."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469005344, "post_id": 38476104, "comment_id": 64356189, "body": "Sorry, I cannot help further, it has no right solution."}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469006575, "post_id": 38476104, "comment_id": 64357104, "body": "@WiktorStribi\u017cew, I&#39;ve added a solution below which seems to be correct for all possible variants."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469006630, "post_id": 38476104, "comment_id": 64357149, "body": "@SergeyGuide: Sorry, it might work in 95%, but there will still be cases when it won&#39;t work."}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469006734, "post_id": 38476104, "comment_id": 64357227, "body": "@WiktorStribi\u017cew, can you give a negative example?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1469006852, "post_id": 38476104, "comment_id": 64357322, "body": "<i>What if the field has <code>&quot;,&quot;</code> inside?</i> Here is one: <code>[&quot;foo&quot;,&quot;&quot;Cool&quot;,&quot;Great&quot; are synonyms&quot;]</code> where the second item must be <code>&quot;\\&quot;Cool\\&quot;,\\&quot;Great\\&quot; are synonyms&quot;</code>."}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 0, "creation_date": 1469007013, "post_id": 38476104, "comment_id": 64357445, "body": "It will be rearranged into <code>[&quot;foo&quot;, &quot;\\&quot;Cool&quot;, &quot;Great\\&quot; are synonyms&quot;]</code> without any exception."}], "tags": [], "owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "is_accepted": true, "score": 3, "last_activity_date": 1469003221, "creation_date": 1469003221, "answer_id": 38476104, "question_id": 38475648, "link": "https://stackoverflow.com/questions/38475648/replace-inner-double-quotes-in-a-string-in-an-array/38476104#38476104", "title": "Replace inner double quotes in a string in an array", "body": "<p>I think you can try something like</p>\n\n<pre><code>eval('[\"foo\",\"bar\",\"foo\"bar\"baz\"]'.gsub(/(\\w)\\\"(\\w)/, '\\1\\\"\\2'))\n</code></pre>\n\n<p>if I got what you have meant</p>\n"}, {"tags": [], "owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "is_accepted": false, "score": 1, "last_activity_date": 1469006296, "creation_date": 1469006296, "answer_id": 38477195, "question_id": 38475648, "link": "https://stackoverflow.com/questions/38475648/replace-inner-double-quotes-in-a-string-in-an-array/38477195#38477195", "title": "Replace inner double quotes in a string in an array", "body": "<p>This might work for all possible variants. This would fix all quotes except of appearing near commas and brackets</p>\n\n<pre><code>.gsub(/(?&lt;!\\,)(?&lt;!\\[)(?&lt;!\\])\\\"(?!\\,)(?!\\[)(?!\\])/, '\\\"')\n</code></pre>\n"}], "owner": {"reputation": 825, "user_id": 902991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lJwoi.jpg?s=128&g=1", "display_name": "Farhan Salam", "link": "https://stackoverflow.com/users/902991/farhan-salam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 38476104, "answer_count": 2, "score": 0, "last_activity_date": 1469014900, "creation_date": 1469001753, "last_edit_date": 1469014900, "question_id": 38475648, "link": "https://stackoverflow.com/questions/38475648/replace-inner-double-quotes-in-a-string-in-an-array", "title": "Replace inner double quotes in a string in an array", "body": "<p>I have strings in an array:</p>\n\n<pre><code>[\"foo\",\"bar\",\"foo\"bar\"baz\"]\n</code></pre>\n\n<p>I am using <code>eval</code> method to form an array with this string, but the inner double quotes are not escaped:</p>\n\n<pre><code>eval('[\"foo\",\"bar\",\"foo\"bar\"baz\"]') # =&gt; SyntaxError\n</code></pre>\n\n<p>Is there a way to escape only the ones inside an array element?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "gitlab"], "comments": [{"owner": {"reputation": 347, "user_id": 4152804, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/36b6a8d8cdbbc7b60d7f3606732fa6b8?s=128&d=identicon&r=PG", "display_name": "colttt", "link": "https://stackoverflow.com/users/4152804/colttt"}, "edited": false, "score": 0, "creation_date": 1473837388, "post_id": 38475223, "comment_id": 66287404, "body": "hi, do you have any solutions for this?"}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 4000287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bb0df0a8973c7d4f4c2dea9cf93627?s=128&d=identicon&r=PG", "display_name": "Qrzy", "link": "https://stackoverflow.com/users/4000287/qrzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1474627668, "creation_date": 1474627668, "answer_id": 39658897, "question_id": 38475223, "link": "https://stackoverflow.com/questions/38475223/gitlab-api-access-failed-to-connect-to-internal-api/39658897#39658897", "title": "GitLab API Access: Failed to connect to internal API", "body": "<p>I've had the same problem.\nWhat finally solved the issue was changing defaults:</p>\n\n<p>increasing <code>unicorn['worker_processes']</code></p>\n\n<p>changing <code>unicorn['listen']</code> from <code>127.0.0.1</code> to the IP that GitLab listens on.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3620486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bb8ae017f26379983ef1778d1c7441?s=128&d=identicon&r=PG", "display_name": "Xeno", "link": "https://stackoverflow.com/users/3620486/xeno"}, "is_accepted": false, "score": 0, "last_activity_date": 1481720088, "creation_date": 1481720088, "answer_id": 41143196, "question_id": 38475223, "link": "https://stackoverflow.com/questions/38475223/gitlab-api-access-failed-to-connect-to-internal-api/41143196#41143196", "title": "GitLab API Access: Failed to connect to internal API", "body": "<p>Instead of:</p>\n\n<p>http+unix: \"/run/gitlab/gitlab.socket\"</p>\n\n<p>try:</p>\n\n<p>gitlab_url: \"http+unix://%2Frun%2Fgitlab%2Fgitlab.socket\"</p>\n"}], "owner": {"reputation": 31, "user_id": 4956653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2498d703ec2fb8e3ce88124460d541d?s=128&d=identicon&r=PG&f=1", "display_name": "falkseidl", "link": "https://stackoverflow.com/users/4956653/falkseidl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3139, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1481720088, "creation_date": 1469000489, "question_id": 38475223, "link": "https://stackoverflow.com/questions/38475223/gitlab-api-access-failed-to-connect-to-internal-api", "title": "GitLab API Access: Failed to connect to internal API", "body": "<p>I'm getting this error after I configured Gitlab on Arch Linux:</p>\n\n<p>sudo -u gitlab bundle exec rake gitlab:check RAILS_ENV=production</p>\n\n<pre><code>Check GitLab API access: FAILED: Failed to connect to internal API\ngitlab-shell self-check failed\n  Try fixing it:\n  Make sure GitLab is running;\n  Check the gitlab-shell configuration file:\n  sudo -u gitlab -H editor /usr/share/webapps/gitlab-shell/config.yml\n  Please fix the error above and rerun the checks.\n</code></pre>\n\n<p>unicorn.stderr.log:</p>\n\n<pre><code>INFO -- : Refreshing Gem list\nINFO -- : listening on addr=/run/gitlab/gitlab.socket fd=12\nINFO -- : worker=0 ready\nINFO -- : worker=1 ready\nINFO -- : master process ready\nINFO -- : worker=2 ready\n</code></pre>\n\n<p>Permissions:</p>\n\n<pre><code>srwxrwxrwx 1 gitlab gitlab 0 Jul 20 09:20 gitlab.socket\n-rw-r--r-- 1 gitlab gitlab 6 Jul 20 09:20 unicorn.pid\n</code></pre>\n\n<p>gitlab-shell/config.yml</p>\n\n<pre><code>http+unix: \"/run/gitlab/gitlab.socket\"\ngitlab_url: \"http://127.0.0.1:8080\"\n</code></pre>\n\n<p>gitlab/unicorn.rb</p>\n\n<pre><code>listen \"/run/gitlab/gitlab.socket\", :backlog =&gt; 1024\n# listen \"127.0.0.1:8080\", :tcp_nopush =&gt; true\n</code></pre>\n\n<p>gitlab/gitlab.yml</p>\n\n<pre><code>host: localhost\nport: 3000\nhttps: false\n</code></pre>\n\n<p>nginx serverblock</p>\n\n<pre><code>server\n{\n        listen 80;\n        server_name code.example.com;\n\n        charset utf-8;\n\n        location /\n        {\n                proxy_read_timeout 300;\n                proxy_connect_timeout 300;\n                proxy_redirect off;\n\n                proxy_set_header X-Forwarded-Proto $scheme;\n                proxy_set_header Host $http_host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-Ssl on;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_set_header X-Forwarded-Proto $scheme;\n\n                proxy_pass http://127.0.0.1:3000;\n        }\n\n        server_tokens off;\n}\n</code></pre>\n\n<p>I tried many things, nginx is showing a blank page or 502 Bad Gateway, and the gitlab check command is saying \"Failed to connect to internal API\" or \"Error 500\".</p>\n"}, {"tags": ["ruby", "json", "activerecord", "serialization", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1469002780, "creation_date": 1469002780, "answer_id": 38475974, "question_id": 38474890, "link": "https://stackoverflow.com/questions/38474890/how-to-call-custom-serializers-in-sinatra-application/38475974#38475974", "title": "how to call custom serializers in sinatra application", "body": "<p>A good way to do it is to write an instance method on the model:</p>\n\n<pre><code>class Notification &lt; ActiveRecord::Base \n  def public_attributes # or call it whatever\n    attributes_hash = attributes\n    # in activerecord, the attributes method turns a model instance into a hash\n    # do some modifications to the hash here\n    return attributes_hash\n  end\nend\n</code></pre>\n\n<p>then say you're returning json in a controller:</p>\n\n<pre><code>get '/some_route' do\n  @notifications = Notification.all # or whatever\n  serialized_notifications = @notifications.map(&amp;:public_attributes)\n  # For a single record, you could do @notification.public_attributes\n  json_data = serialized_notifications.to_json # a serialized array of hashes\n  content_type :json\n  return json_data\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3324004, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730675294/picture?type=large", "display_name": "Asim Adnan", "link": "https://stackoverflow.com/users/3324004/asim-adnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469002780, "creation_date": 1468999590, "question_id": 38474890, "link": "https://stackoverflow.com/questions/38474890/how-to-call-custom-serializers-in-sinatra-application", "title": "how to call custom serializers in sinatra application", "body": "<p>I am working on a backend of an application written in Sinatra.\nIt has a route \"/notifications\"</p>\n\n<p>which renders all the notifications in JSON.\nI want to change the json structure and wrote some custom serializer and it is failing now.\nthe error i get is </p>\n\n<pre><code>\"{\"message\":\"undefined method  `read_attribute_for_serialization' for nil:NilClass\"}\"\n</code></pre>\n\n<p>I have a file called webservice/notification.rb \nwhich selects a notification serializer.\nthe code is something like this</p>\n\n<pre><code>serializer = NotificationSerializer\njson serialize(notifications, root: :notifications, each_serializer: serializer)\n</code></pre>\n\n<p>The NotificationSerializer is something like this.</p>\n\n<pre><code>class NotificationSerializer &lt; Serializer\n  attributes :id, :tag, :event, :time, :read\n\n  has_one :reference, polymorphic: true, include: true\n</code></pre>\n\n<p>The reference here can be a lot of things.</p>\n\n<p>the notification model defines reference as</p>\n\n<pre><code>  def reference\ncompany || contact || deal || invitation || meeting || todo || reference_email || reference_user ||\ncontact_import_job\n  end\n</code></pre>\n\n<p>now all of these models in reference have there Serializer implements in directory Serializer/*\nI want to make custom Serializers for all of these which will render limited information.\nhow can I call my custom Serializer for things inside reference.</p>\n\n<p>I wrote a custom serializer for notifications and called it like this inside my refernce function and it worked.</p>\n\n<pre><code>...|| UserNotificationSerializer.new(reference_user) || ...\n</code></pre>\n\n<p>but if i do the same for my other models i get the error given above.\nwhat would be the correct way to call my custom serializers.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 6602420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1218311724868288/picture?type=large", "display_name": "Yogi ", "link": "https://stackoverflow.com/users/6602420/yogi"}, "edited": false, "score": 0, "creation_date": 1469000557, "post_id": 38474948, "comment_id": 64353247, "body": "the folder backupFiles should not be visable via CL nor within the project via text editor"}], "tags": [], "owner": {"reputation": 1223, "user_id": 4342960, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/96e01544cf25e5e7dffbdb341998c896?s=128&d=identicon&r=PG", "display_name": "fahrradflucht", "link": "https://stackoverflow.com/users/4342960/fahrradflucht"}, "is_accepted": true, "score": 0, "last_activity_date": 1468999753, "creation_date": 1468999753, "answer_id": 38474948, "question_id": 38474666, "link": "https://stackoverflow.com/questions/38474666/hide-directory-in-rails-project/38474948#38474948", "title": "hide directory in rails project", "body": "<p><em>This will be hard to answer correctly without any clarification on what you mean by \"hidden\" (I would have asked that in a comment, but reputation you know). I'll try anyway.</em></p>\n\n<p>What I understand is that your application creates a directory in your app directory that you don't want to see. </p>\n\n<p>If you don't want to see it in the Finder/Nautilus/Windows Explorer, then the easiest way should be to name the directory beginning with period. For your example that would translate to:</p>\n\n<p><code>FileUtils.mkdir_p '.backupFiles' unless File.exists?('.backupFiles')</code></p>\n\n<p>This wouldn't affect the accessibility of that folder via the commandline or your app in any way. (Accept that it's name starts with a period obviously) </p>\n"}, {"tags": [], "owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1469009659, "last_edit_date": 1490005098, "creation_date": 1469009659, "answer_id": 38478441, "question_id": 38474666, "link": "https://stackoverflow.com/questions/38474666/hide-directory-in-rails-project/38478441#38478441", "title": "hide directory in rails project", "body": "<p>Maybe that might be possible using SELinux Extended Security Attributes but it sounds pretty hard to implement.</p>\n\n<p>Take a look at this:</p>\n\n<p><a href=\"https://superuser.com/questions/738392/completely-hide-files-on-linux\">https://superuser.com/questions/738392/completely-hide-files-on-linux</a></p>\n"}], "owner": {"reputation": 175, "user_id": 6602420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1218311724868288/picture?type=large", "display_name": "Yogi ", "link": "https://stackoverflow.com/users/6602420/yogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 38474948, "answer_count": 2, "score": 0, "last_activity_date": 1469009659, "creation_date": 1468998890, "last_edit_date": 1469000639, "question_id": 38474666, "link": "https://stackoverflow.com/questions/38474666/hide-directory-in-rails-project", "title": "hide directory in rails project", "body": "<p>I have create a new directory with</p>\n\n<pre><code>        FileUtils.mkdir_p 'backupFiles' unless File.exists?('backupFiles')\n</code></pre>\n\n<p>how ever i like this folder to be hidden from CL and within the text editor visualisation of the rails project.\nAny hints or advise how to do so?\nand if the folder is hidden would it still be accessible by my program ? (e.g. with <code>FileUtils.cp_r \"./app\", \"backupFiles/\"</code>)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rake"], "comments": [{"owner": {"reputation": 794, "user_id": 1839692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3pZBl.jpg?s=128&g=1", "display_name": "Raphael Pr", "link": "https://stackoverflow.com/users/1839692/raphael-pr"}, "edited": false, "score": 0, "creation_date": 1469000072, "post_id": 38474256, "comment_id": 64352910, "body": "You can provide hook to your rake tasks : <a href=\"http://stackoverflow.com/questions/15707940/rake-before-task-hook\" title=\"rake before task hook\">stackoverflow.com/questions/15707940/rake-before-task-hook</a>. Howeber, I am not sure you can access the rake name/arguments of the task invoqued."}], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "edited": false, "score": 0, "creation_date": 1468999445, "post_id": 38474792, "comment_id": 64352550, "body": "i dont want to update my existing rake tasks. What i need is only a common point which can be called before every tasks"}], "tags": [], "owner": {"reputation": 104, "user_id": 3185654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33cod.jpg?s=128&g=1", "display_name": "Twizty", "link": "https://stackoverflow.com/users/3185654/twizty"}, "is_accepted": false, "score": -1, "last_activity_date": 1468999286, "creation_date": 1468999286, "answer_id": 38474792, "question_id": 38474256, "link": "https://stackoverflow.com/questions/38474256/a-general-method-to-be-invoked-before-every-rake-execution/38474792#38474792", "title": "A General Method to be invoked before every rake execution", "body": "<p>When you create rake task, you can pass a parent task which will run before your task:</p>\n\n<pre><code>task my_task: :my_parent_task do\n  # ...\nend\n</code></pre>\n\n<p>If your task depends from more than 1 task, you can pass an array of parent tasks</p>\n\n<pre><code>task my_task: [:my_prev_task, :my_another_prev_task] do\n  # ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "edited": false, "score": 0, "creation_date": 1469003615, "post_id": 38475370, "comment_id": 64355061, "body": "It does not solve my problem, i want a method to be executed before every rake with out existing my rake tasks"}, {"owner": {"reputation": 156, "user_id": 2862476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KA9y.jpg?s=128&g=1", "display_name": "Xeeshan", "link": "https://stackoverflow.com/users/2862476/xeeshan"}, "reply_to_user": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "edited": false, "score": 0, "creation_date": 1469006279, "post_id": 38475370, "comment_id": 64356885, "body": "We need to move our rake task in a name space and in before hook just called your method.  You don&#39;t need to update your existing tasks, but you need to update rake file to add namespace and before hook."}, {"owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "edited": false, "score": 0, "creation_date": 1469013572, "post_id": 38475370, "comment_id": 64361711, "body": "seems to be okay , but my requirement is that , one method should be called irrespective of every rake task in the lib/tasks. if added a new new rake task, it should be called this method. But this hooks should be active only for the mentioned tasks in the rake file. The main aim is to record the rake task name, arguments, and its start and end time to a database table."}], "tags": [], "owner": {"reputation": 156, "user_id": 2862476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KA9y.jpg?s=128&g=1", "display_name": "Xeeshan", "link": "https://stackoverflow.com/users/2862476/xeeshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1469000964, "creation_date": 1469000964, "answer_id": 38475370, "question_id": 38474256, "link": "https://stackoverflow.com/questions/38474256/a-general-method-to-be-invoked-before-every-rake-execution/38475370#38475370", "title": "A General Method to be invoked before every rake execution", "body": "<p>Try this\n<a href=\"https://github.com/guillermo/rake-hooks\" rel=\"nofollow\">https://github.com/guillermo/rake-hooks</a></p>\n\n<pre><code>For example in your Rakefile\n\nrequire 'rake/hooks'\n\ntask :say_hello do\n  puts \"Good Morning !\"\nend\n\nbefore :say_hello do\n  puts \"Hi !\"\nend\n\n#For multiple tasks\n\nnamespace :greetings do \n  task :hola    do puts \"Hola!\" end ;\n  task :bonjour do puts \"Bonjour!\" end ;\n  task :gday    do puts \"G'day!\" end ;  \nend \n\nbefore \"greetings:hola\", \"greetings:bonjour\", \"greetings:gday\" do\n  puts \"Hello!\"\nend\n\nrake greetings:hola # =&gt; \"Hello! Hola!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469025584, "post_id": 38484157, "comment_id": 64370842, "body": "Thanks for the info"}], "tags": [], "owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "is_accepted": true, "score": 0, "last_activity_date": 1497245139, "last_edit_date": 1497245139, "creation_date": 1469025126, "answer_id": 38484157, "question_id": 38474256, "link": "https://stackoverflow.com/questions/38474256/a-general-method-to-be-invoked-before-every-rake-execution/38484157#38484157", "title": "A General Method to be invoked before every rake execution", "body": "<p>This seems to be a bit awkward, But it may help others.</p>\n\n<pre><code>Rake.application.top_level_tasks\n</code></pre>\n\n<p>will return an array of information including <strong>Rake name</strong> and its <strong>arguments</strong>.\nReference attached below.</p>\n\n<pre><code>pry(main)&gt; a = Rake.application.top_level_tasks\n=&gt; [\"import_data[client1,\", \"data.txt]\"]\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 38484157, "answer_count": 3, "score": 3, "last_activity_date": 1497245139, "creation_date": 1468997613, "last_edit_date": 1468999303, "question_id": 38474256, "link": "https://stackoverflow.com/questions/38474256/a-general-method-to-be-invoked-before-every-rake-execution", "title": "A General Method to be invoked before every rake execution", "body": "<p>In my rails project (<code>Rails 3.1</code>, <code>Ruby 1.9.3</code>) there are around 40 rake tasks defined. The requirement is that I should be able to create an entry (the rake details) in a database table right when we start each rake. The details I need are the <code>rake name</code>, <code>arguments</code>, <code>start time</code> and <code>end time</code>. For this purpose, I don't want rake files to be updated with the code. Is it possible to do this outside the scope of rake files. </p>\n\n<p>Any help would be greatly appreciated!!</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1468999021, "post_id": 38474270, "comment_id": 64352283, "body": "That&#39;s true and a real source of annoyance but the actual issue is <code>[\\s]</code> instead of <code>\\s</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1468999146, "post_id": 38474270, "comment_id": 64352367, "body": "@cremno: Where did you get <code>[\\s*]</code>? I checked the post history, OP never had that pattern. Please let me know if I should explain anything else, or if everything is clear."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1468999323, "post_id": 38474270, "comment_id": 64352475, "body": "Just a typo. grep and sed are line based. <code>^</code> / <code>$</code> work the same way as in Ruby. But grep&#39;s <code>[\\s]</code> is equivalent to Ruby&#39;s <code>[\\\\s]</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1468999498, "post_id": 38474270, "comment_id": 64352586, "body": "Oh, if you do not use <code>-P</code> (PCRE) option with <code>grep</code>, you cannot use shorthand character classes inside bracket expressions, they are parsed as literal symbol combinations. That is a completely different story since regex engines are of different flavors. Note that Ruby uses <a href=\"https://github.com/geoffgarside/oniguruma/blob/master/Syntax.txt\" rel=\"nofollow noreferrer\">Oniguruma regex flavor</a>."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1468997683, "creation_date": 1468997683, "answer_id": 38474270, "question_id": 38474119, "link": "https://stackoverflow.com/questions/38474119/why-this-regular-expression-gets-true-in-ruby/38474270#38474270", "title": "Why this regular expression gets true in ruby?", "body": "<p>The reason is that in Ruby regex, <code>^</code> and <code>$</code> match the start/end of a <em>line</em>. Change to <code>\\A</code> and <code>\\z</code> and you will get a <code>false</code> result.</p>\n\n<p>See <a href=\"https://ideone.com/G9ws8d\" rel=\"nofollow\">this Ruby demo at Ideone</a>. The <code>/\\A\\s*\\z/</code> will only match <em>strings</em> that are either empty or have whitespace symbols only.</p>\n\n<p>As for <code>\\s</code>, it is a synonym for <code>[ \\t\\r\\n\\f]</code>, not just <code>[ \\t\\n]</code>. See this <a href=\"http://ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow\">Ruby Character Class reference</a>:</p>\n\n<blockquote>\n  <p><code>/\\s/</code> - A whitespace character: <code>/[ \\t\\r\\n\\f]/</code></p>\n</blockquote>\n"}], "owner": {"reputation": 139, "user_id": 6448275, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/927c5d4b5c6dc32808dfe751faa10afb?s=128&d=identicon&r=PG&f=1", "display_name": "suresh", "link": "https://stackoverflow.com/users/6448275/suresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 38474270, "answer_count": 1, "score": 4, "last_activity_date": 1469015472, "creation_date": 1468997174, "last_edit_date": 1469015472, "question_id": 38474119, "link": "https://stackoverflow.com/questions/38474119/why-this-regular-expression-gets-true-in-ruby", "title": "Why this regular expression gets true in ruby?", "body": "<p>I was started learning the regular expressions in ruby. In that I had one problem. The problem is the below regular expression does not work as expected.</p>\n\n<pre><code>/^[\\s]*$/  -- This will match only if the input contains white spaces or the input contains empty.\n</code></pre>\n\n<p>For example, </p>\n\n<pre><code>str = \"      \n\n        abc\n\n            \"\nif str =~ /^[\\s]*$/\n        puts \"Condition is true\"\nelse\n        puts \"Condition is false\"\nend\n</code></pre>\n\n<p>My expectation is this condition will gets false. But it gets true. I don't know why ?</p>\n\n<p>In sed or grep it will work as expected. But why it does not works in ruby.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chef-solo"], "answers": [{"comments": [{"owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "edited": false, "score": 0, "creation_date": 1469816555, "post_id": 38474010, "comment_id": 64711305, "body": "i get your point. but all those sites are blocked on my company laptop :("}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "edited": false, "score": 0, "creation_date": 1469818788, "post_id": 38474010, "comment_id": 64712585, "body": "That is harsh, my usual recommendation in those cases is to make it clear to your boss and the higher ups that restricting access to Chef&#39;s volunteer support means they need to go buy a commercial support contract. If they aren&#39;t okay with that, they need to allow our volunteer support team to do its thang in the most efficient way as we don&#39;t have spare resources to offset their IT policy."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": -1, "last_activity_date": 1468996806, "creation_date": 1468996806, "answer_id": 38474010, "question_id": 38473803, "link": "https://stackoverflow.com/questions/38473803/node-run-state-giving-error-undefined-method-for-nilnilclass/38474010#38474010", "title": "node.run_state giving ERROR: undefined method `[]&#39; for nil:NilClass", "body": "<p>The run state is not like node attributes which auto-vivify undefined levels. More to the point it's an advanced internal feature that you probably shouldn't be using without more knowledge of Chef and context for how it works.</p>\n\n<p>I've said this before to you and I'll say it again: stop asking these one-off questions on StackOverflow. You are clearly trying to accomplish something specific that reaches back over the dozen or so questions you've asked. This is not a good place for that, ask on IRC, Slack, or Discourse where the answerers can have unified context and a better idea of your actual goals.</p>\n"}], "owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468996806, "creation_date": 1468996064, "question_id": 38473803, "link": "https://stackoverflow.com/questions/38473803/node-run-state-giving-error-undefined-method-for-nilnilclass", "title": "node.run_state giving ERROR: undefined method `[]&#39; for nil:NilClass", "body": "<p>I have created a ruby block within my recipe as follows:  </p>\n\n<pre><code>ruby_block 'load_databag_secret' do\n  block do\n    value = data_bag_item(\"tokens\", \"masterkey\", IO.read(\"/etc/chef/encrypted_data_bag_secret\") )\n    node.run_state['docker']['password'] = value['key']\n  end\nend\n</code></pre>\n\n<p>Now, I am trying to use <code>node.run_state['docker']['password']</code> as follows:  </p>\n\n<pre><code>token2_hash = lambda { token1_hash.deep_merge({ \"value\" =&gt; node.run_state['docker']['password'] } ) }\n</code></pre>\n\n<p>However, I am getting the below error:  </p>\n\n<pre><code>ERROR: undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>Please suggest correct way to use <code>node.run_state['docker']['password']</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468995597, "post_id": 38473466, "comment_id": 64350216, "body": "Sorry, Jagdeep. I forgot to mention that I only wanted to set this action if the devise current_user.id != 1. I tried this, saying    self.status = 2 if current_user.id != 1, got an error"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468995706, "post_id": 38473466, "comment_id": 64350275, "body": "you won&#39;t find <code>current_user</code> in the model. So, above wont work."}, {"owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468995767, "post_id": 38473466, "comment_id": 64350306, "body": "Exactly. So how can I implement this? In the controller? This works for my create method, but I need it to work for my update method as well."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468996060, "post_id": 38473466, "comment_id": 64350454, "body": "Few suggestions: you can skip the irrelevant code in the question like <code>index</code>, <code>new</code>, <code>show</code>, <code>edit</code>, and <code>destroy</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468996152, "post_id": 38473466, "comment_id": 64350505, "body": "Also, to set something in DB based on <code>current_user</code>&#39;s id is not a great way. You should use some other attribute from <code>current_user</code> which will never change e.g. <code>email</code>. Because ids may differ."}, {"owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1468996668, "post_id": 38473466, "comment_id": 64350818, "body": "And I will change the id to email as well"}, {"owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1469222370, "post_id": 38473466, "comment_id": 64464520, "body": "Jagdeep, this code was working, but today I got a missing template error whenever I update my pieces. What is going on? I edited my question so you can see the method"}, {"owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1469236204, "post_id": 38473466, "comment_id": 64467741, "body": "Got it working, I thought you would be interested. I added validations to my pieces fields, and so to fix this I added <code>else</code> and  <code>reder :edit</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "edited": false, "score": 0, "creation_date": 1469431051, "post_id": 38473466, "comment_id": 64514030, "body": "Cool. Way to go. :)"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1468995953, "last_edit_date": 1468995953, "creation_date": 1468994804, "answer_id": 38473466, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails/38473466#38473466", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<pre><code>class PiecesController &lt; ApplicationController\n  def update\n    @piece.attributes = piece_params\n    @piece.status = 2 if current_user.id != 1\n    if @piece.save\n      flash[:notice] = 'Piece was successfully updated.'\n      respond_with(@piece)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "is_accepted": false, "score": 0, "last_activity_date": 1468998374, "creation_date": 1468998374, "answer_id": 38474498, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails/38474498#38474498", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<p>Try this one.</p>\n\n<pre><code>def update\n  @piece = current_user.pieces.find(params[:id])\n  @piece.status = 2 if current_user.id != 1\n  if @piece.save\n    flash[:notice] = 'Piece was successfully updated.'\n    respond_with(@piece)\n  end \n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 2666049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0c9f68f875bf135b7fcca0c33b16c4c0?s=128&d=identicon&r=PG", "display_name": "palash-kulkarni", "link": "https://stackoverflow.com/users/2666049/palash-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1469010343, "creation_date": 1469010343, "answer_id": 38478719, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails/38478719#38478719", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<ol>\n<li>Create a migration file to add payload field in peices.</li>\n</ol>\n\n<p><code></p>\n\n<pre><code>class AddPayloadToPeices &lt; ActiveRecord::Migration\n    def change\n        add_column :peices, :payload, :jsonb\n    end\nend\n</code></pre>\n\n<p></code>\n 2. Now set payload in your Controller's action :</p>\n\n<p><code></p>\n\n<pre><code>peice.payload = { current_user_id: current_user.id }\n</code></pre>\n\n<p></code>\n3. Now in Peice Model :</p>\n\n<p><code></p>\n\n<pre><code>before_save :set_status, if: 'payload[:current_user_id] &amp;&amp; payload[:current_user_id] != 1'\n\ndef set_status\n    status = 2\nend\n</code></pre>\n\n<p></code></p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 3793427, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/S3t8p.jpg?s=128&g=1", "display_name": "DR_", "link": "https://stackoverflow.com/users/3793427/dr"}, "is_accepted": false, "score": 0, "last_activity_date": 1469010990, "creation_date": 1469010990, "answer_id": 38478934, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails/38478934#38478934", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<p>Read more about Callbacks: <a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_callbacks.html</a></p>\n\n<p>You can define methods before and after save or update.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "is_accepted": false, "score": 0, "last_activity_date": 1469236014, "creation_date": 1469236014, "answer_id": 38537167, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails/38537167#38537167", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<p>Ok guys. @Jagdeep Singh 's answer helped a lot, and was working until I added validations for the fields of my pieces. Whenever these fields did not meet their validations in the update action, I would get a no template error. So, the best way to do this is the following:</p>\n\n<pre><code>def update\n  @piece.attributes = piece_params\n  @piece.status = 2 if current_user.id != 1\n  if @piece.save\n    flash[:notice] = 'Piece was successfully updated.'\n    respond_with(@piece)\n  else\n    render :edit\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 6598830, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f54267e1bed77a8f2f1fde71d360c87f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Singla", "link": "https://stackoverflow.com/users/6598830/a-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 38473466, "answer_count": 5, "score": 0, "last_activity_date": 1469236056, "creation_date": 1468994631, "last_edit_date": 1469236056, "question_id": 38473431, "link": "https://stackoverflow.com/questions/38473431/setting-a-model-parameter-whenever-it-is-updated-ruby-on-rails", "title": "Setting a model parameter whenever it is updated ruby on rails", "body": "<p>new to rails here. I have an RoR app, which has a model called pieces. The pieces have an integer parameter called status. Whenever a piece is created or updated, I want the piece.status to be set to 2 if the devise current_user.id method is not equal to 1. This works for my create method, but when I put a similar line into my update method, nothing happens. What should I do?</p>\n\n<p>Here is my controller</p>\n\n<pre><code>class PiecesController &lt; ApplicationController\n  before_action :set_piece, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n  respond_to :html\n\ndef index\n    @pieces = Piece.all\n    respond_with(@pieces)\n  end\n\n  def show\n    respond_with(@piece)\n  end\n\n  def new\n    @piece = current_user.pieces.build\n    respond_with(@piece)\n  end\n\n  def edit\n  end\n\n  def create\n    @piece = current_user.pieces.build(piece_params)\n    @piece.status = 2 if current_user.id != 1\n    flash[:notice] = 'Piece was successfully created.' if @piece.save\n    respond_with(@piece)\n  end\n\n  def update\n    flash[:notice] = 'Piece was successfully updated.' if @piece.update(piece_params)\n    respond_with(@piece)\n  end\n\n  def destroy\n    flash[:notice] = 'Piece was successfully deleted.' if @piece.destroy\n    respond_with(@piece)\n  end\n\n  private\n    def set_piece\n      @piece = Piece.find(params[:id])\n    end\n\n    def piece_params\n      params.require(:piece).permit(:title, :image, :genre, :size, :price,   :description, :status)\n    end\nend\n</code></pre>\n\n<p>Thanks guys!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1468994451, "post_id": 38473313, "comment_id": 64349656, "body": "are you using <code>rvm</code>? If so then select a <code>default</code> ruby version. Then try"}, {"owner": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1468994507, "post_id": 38473313, "comment_id": 64349682, "body": "Yes I am using rvm .And default ruby version is already selected"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1468994498, "creation_date": 1468994498, "answer_id": 38473393, "question_id": 38473313, "link": "https://stackoverflow.com/questions/38473313/getting-error-when-creating-new-rails-project/38473393#38473393", "title": "Getting error when creating new rails project", "body": "<p>Seems like you don't have gem dependencies installed</p>\n\n<pre><code>Could not find 'activesupport' (= 4.2.5) - did find: [activesupport-4.2.4,activesupport-4.2.3 ..... activesupport-3.0.3] (Gem::LoadError)\n</code></pre>\n\n<p>specify rails version while creating new rails app</p>\n\n<pre><code>rails _4.2.16_ new my_app # change the version accordingly\n# You must have rails 4.2.16 installed \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": true, "score": 0, "last_activity_date": 1468995501, "last_edit_date": 1468995501, "creation_date": 1468994778, "answer_id": 38473460, "question_id": 38473313, "link": "https://stackoverflow.com/questions/38473313/getting-error-when-creating-new-rails-project/38473460#38473460", "title": "Getting error when creating new rails project", "body": "<p>Seems like you are getting this error because updated version of ruby is not being used by rvm .<br/>\nRun this command </p>\n\n<blockquote>\n  <p><code>rvm list</code> <br/>\n  Which will give you all the ruby version installed on your system and which version of ruby is being used by your computer  .Then select the latest version of ruby by this command </p>\n</blockquote>\n\n<pre><code>rvm use ruby version\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 38473460, "answer_count": 2, "score": 0, "last_activity_date": 1468995501, "creation_date": 1468994190, "question_id": 38473313, "link": "https://stackoverflow.com/questions/38473313/getting-error-when-creating-new-rails-project", "title": "Getting error when creating new rails project", "body": "<p>When I am trying to create a new rails project I am getting this error .I have never got this error .</p>\n\n<pre><code>/usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/dependency.rb:315:in `to_specs': Could not find 'activesupport' (= 4.2.5) - did find: [activesupport-4.2.4,activesupport-4.2.3,activesupport-4.2.1,activesupport-4.2.0,activesupport-4.1.5,activesupport-4.1.4,activesupport-4.1.1,activesupport-4.0.13,activesupport-4.0.4,activesupport-4.0.0,activesupport-3.2.16,activesupport-3.2.13,activesupport-3.2.11,activesupport-3.2.9,activesupport-3.2.2,activesupport-3.1.3,activesupport-3.0.3] (Gem::LoadError)\nChecked in 'GEM_PATH=/home/techbirds/.rvm/gems/ruby-2.2.1:/home/techbirds/.rvm/gems/ruby-2.2.1@global', execute `gem env` for more information\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1311:in `block in activate_dependencies'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1300:in `each'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1300:in `activate_dependencies'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1282:in `activate'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:67:in `block in gem'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:66:in `synchronize'\n    from /usr/share/rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:66:in `gem'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/bin/rails:22:in `&lt;main&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `eval'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 425, "user_id": 819466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab046eb5657cca6e273599f6c3aa5c8?s=128&d=identicon&r=PG", "display_name": "jirka", "link": "https://stackoverflow.com/users/819466/jirka"}, "edited": false, "score": 0, "creation_date": 1468994201, "post_id": 38473243, "comment_id": 64349544, "body": "Which part will always be in the input string - <code>something</code> or <code>specialstring=360256</code>? Ideally, can you provide more examples of input and output?"}, {"owner": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "reply_to_user": {"reputation": 425, "user_id": 819466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab046eb5657cca6e273599f6c3aa5c8?s=128&d=identicon&r=PG", "display_name": "jirka", "link": "https://stackoverflow.com/users/819466/jirka"}, "edited": false, "score": 0, "creation_date": 1468995573, "post_id": 38473243, "comment_id": 64350201, "body": "specialstring=360256 is the element to be replaced."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "edited": false, "score": 0, "creation_date": 1468998348, "post_id": 38473428, "comment_id": 64351821, "body": "Thankyou, you were the only one who understood the question before I edited it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "edited": false, "score": 0, "creation_date": 1469002558, "post_id": 38473428, "comment_id": 64354463, "body": "As a matter of fact, that is not great and you probably should try to state questions more precise."}, {"owner": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "edited": false, "score": 0, "creation_date": 1469086061, "post_id": 38473428, "comment_id": 64395170, "body": "Hey, thankyou for letting me know. I changed the title and question to reflect that I wanted to extract a value and to use it to replace a substring. Do you feel I can improve the question further?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "edited": false, "score": 0, "creation_date": 1469086642, "post_id": 38473428, "comment_id": 64395602, "body": "Since we are all building a knowledge base for future readers, and especially taking into account that your edits were done after the answer was accepted, I would remove all these \u201cEdit:\u201c annotations; but the main point was: whether you want, say, the value to be extracted and reused, this is to be mentioned explicitly. The main advise would be: <i>please, be as explicit as possible</i>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1468994621, "creation_date": 1468994621, "answer_id": 38473428, "question_id": 38473243, "link": "https://stackoverflow.com/questions/38473243/replace-a-keywordvalue-with-a-string-infront-and-behind-the-value/38473428#38473428", "title": "Replace a keyword+value with a string infront and behind the value", "body": "<pre><code>\u25b6 input = %|something...\n\u25b7 specialstring=360256\n\u25b7 something...|\n#\u21d2 \"something...\\nspecialstring=360256\\nsomething...\"\n\u25b6 out_tmpl = '&lt;script src=\"https://gist.github.com/someuser/%{tmpl}.js\"&gt;&lt;/script&gt;'\n\u25b6 puts input.gsub(/^specialstring=(.*)$/) { out_tmpl % { tmpl: $1.strip }}\n#\u21d2 something...\n#  &lt;script src=\\\"https://gist.github.com/someuser/360256.js\\\"&gt;&lt;/script&gt;\n#  something...\n</code></pre>\n\n<p>This is more-or-less generic solution, that parses input for occurrences of <code>specialstring=ANYTHING</code>, and then, using string formatting, injects this <code>ANYTHING</code> into the template, substituting the original pattern.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "edited": false, "score": 0, "creation_date": 1468996221, "post_id": 38473469, "comment_id": 64350544, "body": "I&#39;m afraid it is not, you are closer with the second one. I want to extract the number (360256) and put it in the second text. I don&#39;t know how to do that.      &lt;script src=&quot;<a href=\"https://gist.github.com/someuser/putthenumberhere.js&quot;&gt;&lt;/script\" rel=\"nofollow noreferrer\">gist.github.com/someuser/putthenumberhere.js&quot;&gt;&lt;/&hellip;</a>&gt;"}], "tags": [], "owner": {"reputation": 425, "user_id": 819466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab046eb5657cca6e273599f6c3aa5c8?s=128&d=identicon&r=PG", "display_name": "jirka", "link": "https://stackoverflow.com/users/819466/jirka"}, "is_accepted": false, "score": 0, "last_activity_date": 1468997505, "last_edit_date": 1468997505, "creation_date": 1468994825, "answer_id": 38473469, "question_id": 38473243, "link": "https://stackoverflow.com/questions/38473243/replace-a-keywordvalue-with-a-string-infront-and-behind-the-value/38473469#38473469", "title": "Replace a keyword+value with a string infront and behind the value", "body": "<p>Not a ruby expert myself but I'll give it a shot.</p>\n\n<p>If <code>something...</code> is your search patter and want to replace whatever's in between, use this as matching regex for replacement:</p>\n\n<pre><code>/(?&lt;=something\\.\\.\\.)[\\s\\r\\n]*(.+?)[\\s\\r\\n]*(?=something\\.\\.\\.)/\n</code></pre>\n\n<p>If, however , <code>specialstring=360256</code> is what you look for and want to replace it, as per the other answer this is your regex:</p>\n\n<pre><code>/specialstring=360256/\n</code></pre>\n\n<p>Both tested with <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n\n<p><strong>Update 1</strong></p>\n\n<p>Right, got it now:</p>\n\n<pre><code>\"something\u00ad...\\nspeci\u00adalstring=3\u00ad60256\\nsom\u00adething...\"\u00ad.gsub(/spe\u00adcialstring\u00ad=(\\d+)/, '&lt;script src=\"\u00adhttps://gist.githu\u00adb.com/some\u00aduser/\\1.js\u00ad\"&gt;&lt;/script\u00ad&gt;')\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 1613327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f3495ca865d8dc0ec71b4c4dcb94?s=128&d=identicon&r=PG", "display_name": "John Wyatt", "link": "https://stackoverflow.com/users/1613327/john-wyatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 38473428, "answer_count": 2, "score": -3, "last_activity_date": 1472060999, "creation_date": 1468993927, "last_edit_date": 1472060999, "question_id": 38473243, "link": "https://stackoverflow.com/questions/38473243/replace-a-keywordvalue-with-a-string-infront-and-behind-the-value", "title": "Replace a keyword+value with a string infront and behind the value", "body": "<p>Using Ruby, in a string I want to replace</p>\n\n<pre><code>something...\nspecialstring=360256\nsomething...\n</code></pre>\n\n<p>with</p>\n\n<pre><code>something...\n&lt;script src=\"https://gist.github.com/someuser/360256.js\"&gt;&lt;/script&gt;\nsomething...\n</code></pre>\n\n<p>I believe it can be done with a Regex (maybe gsub), but I am afraid I am just not that proficient.</p>\n\n<p>Edit: \"something... \" indicates text that should not be changed. I want to replace all instances of</p>\n\n<pre><code>specialstring=10000\n</code></pre>\n\n<p>with the below in the string (extract the number)</p>\n\n<pre><code>&lt;script src=\"https://gist.github.com/someuser/10000.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Where 10000 can be any number terminated by a newline.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1468994158, "post_id": 38473082, "comment_id": 64349530, "body": "This sounds like a <a href=\"http://meta.stackexchange.com/a/66378/284887\">xy problem</a> to me."}, {"owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1468994924, "post_id": 38473082, "comment_id": 64349871, "body": "thanks for response @spickermann but my question is a straight shoot that Can we use multiple tables(created on fly) for a single model in rails? I gave a little bit of history of my question just because if it can help stackoverflowers to get the more clear context of my problem."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1468996261, "post_id": 38473082, "comment_id": 64350573, "body": "Why don&#39;t you just add a column like <code>current_user_id</code> to the table to identify which user the subset belongs to?"}], "answers": [{"tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1468997500, "creation_date": 1468997500, "answer_id": 38474225, "question_id": 38473082, "link": "https://stackoverflow.com/questions/38473082/can-we-use-multiple-tablescreated-on-fly-for-a-single-model-in-rails/38474225#38474225", "title": "Can we use multiple tables(created on fly) for a single model in rails?", "body": "<p>I see no problem in doing something like</p>\n\n<pre><code>temp_model = Class.new(TempUser) do\n  set_table_name your_dynamically_created_table_name\nend\n\ntemp_model.find(...blah...)\n</code></pre>\n\n<p>But I agree with @spickermann, this definitely looks like XY problem.</p>\n"}], "owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468997500, "creation_date": 1468993169, "question_id": 38473082, "link": "https://stackoverflow.com/questions/38473082/can-we-use-multiple-tablescreated-on-fly-for-a-single-model-in-rails", "title": "Can we use multiple tables(created on fly) for a single model in rails?", "body": "<p>I have a model <code>TempUser</code> that is used for data crunching using lots of queries to narrow down the result.  Its a replica of User Model. For narrowing down the result it copies the all the records from users_table into <code>temp_users_table</code> and keeps deleting record according to filters applied on it so that in the end I only have filtered users in TempUser model where I can perform more active record operations on the residual data.</p>\n\n<p>I am trying to make dynamic tables for TempUser Model so that If more than one user request for TempUser Model then he should have different temp_user_dynamic_table to perform operations on it. Is it possible?</p>\n\n<p>something like:-</p>\n\n<pre><code>class TempUser &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>which has multiple dynamic tables created on fly when new request comes in like:- <code>temp_users_table1</code>,<code>temp_users_table2</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 1521, "user_id": 1747662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6og92.jpg?s=128&g=1", "display_name": "Anuj", "link": "https://stackoverflow.com/users/1747662/anuj"}, "edited": false, "score": 0, "creation_date": 1468990536, "post_id": 38472562, "comment_id": 64348340, "body": "You get the date as a string or a Date Object"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "reply_to_user": {"reputation": 1521, "user_id": 1747662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6og92.jpg?s=128&g=1", "display_name": "Anuj", "link": "https://stackoverflow.com/users/1747662/anuj"}, "edited": false, "score": 0, "creation_date": 1468990774, "post_id": 38472562, "comment_id": 64348423, "body": "@SpunkyLive String"}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1468991415, "post_id": 38472654, "comment_id": 64348601, "body": "It produce the following error. <code>d.rb:6:in valid_date?&#39;: wrong number of arguments (2 for 3..4) (ArgumentError)</code>"}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1468991650, "post_id": 38472654, "comment_id": 64348662, "body": "Which Rails version do you use?"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1468991713, "post_id": 38472654, "comment_id": 64348680, "body": "ruby 1.9.3p0 (2011-10-30 revision 33570) [i686-linux]"}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1468991826, "post_id": 38472654, "comment_id": 64348707, "body": "Ok, my fault it&#39;s overlaps with <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-c-valid_date-3F\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/&hellip;</a> Please have a look on updated section."}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1468993283, "post_id": 38472654, "comment_id": 64349193, "body": "Welcome :) Glad was able to help."}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 2, "last_activity_date": 1468993301, "last_edit_date": 1468993301, "creation_date": 1468990849, "answer_id": 38472654, "question_id": 38472562, "link": "https://stackoverflow.com/questions/38472562/date-validation-in-ruby/38472654#38472654", "title": "Date validation in Ruby", "body": "<p>I'm not pretend on the best solution ever, but this should work.</p>\n\n<pre><code>def valid_date?(date)\n  Date.parse(date).strftime(\"%d %b %Y %a\") == date\nend\n\n[55] pry(main)&gt; valid_date?(\"20 Jul 2016 Wed\")\n=&gt; true\n[56] pry(main)&gt; valid_date?(\"20 Jul 2016 Mon\")\n=&gt; false\n[57] pry(main)&gt;\n</code></pre>\n\n<p>If you have many formats you may pass format as a second argument</p>\n\n<pre><code>def valid_date?(date, fmt)\n  Date.parse(date).strftime(fmt) == date\nend\n\n=&gt; :valid_date?\n[59] pry(main)&gt; valid_date?(\"20 Jul 2016 Wed\", \"%d %b %Y %a\")\n=&gt; true\n</code></pre>\n\n<p>Hope this will help.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As I mentioned in comment that method name overlaps with existing method <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-c-valid_date-3F\" rel=\"nofollow\">valid_date?</a></p>\n\n<p>So, you may just rename the custom method</p>\n\n<pre><code>def date_valid?(date, fmt)\n  Date.parse(date).strftime(fmt) == date\nend\n\n[2] pry(main)&gt; date_valid?(\"20 Jul 2016 Wed\", \"%d %b %Y %a\")\n=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1468992388, "creation_date": 1468992388, "answer_id": 38472943, "question_id": 38472562, "link": "https://stackoverflow.com/questions/38472562/date-validation-in-ruby/38472943#38472943", "title": "Date validation in Ruby", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>dates = ['20 Jul 2016 Wed', '20 Jul 2016 Mon']\ndates.map do |date|\n  Date.parse(date).public_send(\n    Date.instance_methods.detect do |m|\n      m.to_s =~ /\\A#{date[-3..-1].downcase}.*day\\?\\z/\n    end)\nend\n#\u21d2 [ true, false ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1468999401, "creation_date": 1468999401, "answer_id": 38474827, "question_id": 38472562, "link": "https://stackoverflow.com/questions/38472562/date-validation-in-ruby/38474827#38474827", "title": "Date validation in Ruby", "body": "<pre><code>require 'date'\n\ndates = ['20 Jul 2016 Wed', '20 Jul 2016 Mon']\n\ndates.select do |s|\n  d = Date.strptime(s[0,11], \"%d %b %Y\") rescue nil\n  d.nil? ? false : (Date::ABBR_DAYNAMES[d.wday] == s[-3,3])\nend\n  #=&gt; [\"20 Jul 2016 Wed\"]\n</code></pre>\n\n<p>This reads, \"select strings <code>'dd mmm yyyy'</code> that represent valid dates and whose day-of-week matches the day-of-week given by the last three characters of the string\". </p>\n"}], "owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 38472654, "answer_count": 3, "score": 1, "last_activity_date": 1468999401, "creation_date": 1468990307, "question_id": 38472562, "link": "https://stackoverflow.com/questions/38472562/date-validation-in-ruby", "title": "Date validation in Ruby", "body": "<p>How to check if the date is valid date in ruby. Many of the methods are check only the range. But, I need to check the date with day of\nweek to check whether the date is valid or not. For Ex:</p>\n\n<pre><code>    20 Jul 2016 Wed --&gt; Valid\n    20 Jul 2016 Mon --&gt; Not-Valid\n</code></pre>\n\n<p>How to do this in ruby ?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chef-solo"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1469016798, "post_id": 38472514, "comment_id": 64363933, "body": "<code>--secret-file PATH_TO_SECRET</code> which path did you use ? are you sure the file you did use there is really the same as on your nodes ?"}], "owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468990048, "creation_date": 1468990048, "question_id": 38472514, "link": "https://stackoverflow.com/questions/38472514/bad-decrypt-while-decrypting-data-bag-using-data-bag-item-api", "title": "Bad Decrypt while decrypting data bag using data_bag_item API", "body": "<p>I am using the following key to create encrypted data bag. The key is loaded on the sever node in file <code>/etc/chef/encrypted_data_bag_secret</code>:  </p>\n\n<pre><code>ERKYMi6xbv36xkrg1N4eXOuKbI6f5zogCXOGNyrs66fjRXI7wtOvK7eA5A9XJcJGdcAt0EuTQcZKtwY5mmTGn21OEOEZlcxWBekB/2NmmVSJJSoA2xlya2dm3CZ97gLES8g4z/XKfNJHP07/cDOnmpCjFWMRSE/qEld/a+YgmW2oTF4zqTHteik0ePclebh7SXSd4lf+GL1oip2aM3yXY6ZJBd6yraXm8CPWfvrswk7VmqnmMGFqR0xi7pSPCOFrmHRs1gxskrqKfbnts0Zy0UU+MNzp5rDIlKHmLL5KO014vDkukV4dIiR2CxjeldJsaqGvRvPC7VIVC2HyMJvAqW772dpi0y5wiBd5HhcjAIQrfqIvVXNLg7Zjk6Eh1xxESe2YJUF7djHAJfru6Hv5b8DsQq/z6OgLJtTkToILRNmd4sBV66CAvw3m0xC4PUhi4c+7pTBiqV1/q+dTQhx2k7G0GM9hsRosCP0Erz7H3jfyUroUPPEMWMsgqXP33fNEz3txBHDPM2L1PcObzT2FHXjHQMgsaTH+oIqlLXWmnqBAtZTIMkG49DVIjj9NrkiN5267+rlIJORAGV6CY7QX4TKuTZqcReYmLpcdMA33Tzius/ife3TOZoN8IoPb1RFLQfn3KFAwI50eOQ0KyEYDKjzwmJOkra5jcEww4GNlzd4=\n</code></pre>\n\n<p>I created the data bag using following command:  </p>\n\n<pre><code>knife data bag create tokens masterkey --secret-file PATH_TO_SECRET\n</code></pre>\n\n<p>Now, within the recipe, I am using <code>data_bag_items API</code> to retrieve value of the data bag item as follows:  </p>\n\n<pre><code>value = data_bag_item(\"tokens\", \"masterkey\", \"/etc/chef/encrypted_data_bag_secret\")\n\ntoken2_hash = lambda { token1_hash.deep_merge({ \"value\" =&gt; value['key'] } ) }\n</code></pre>\n\n<p>However, I am getting below compile time error:  </p>\n\n<pre><code>ERROR: Error decrypting data bag value: 'bad decrypt'. Most likely the provided key is incorrect\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "exotel-api"], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1468994592, "post_id": 38473076, "comment_id": 64349726, "body": "yes <code>Generator::configuration.sid</code> is accessible within specs, but its still not working and i tried with plain url also and got the same error."}, {"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1468999553, "post_id": 38473076, "comment_id": 64352616, "body": "well thanks for reply, i figured out what was the problem. it was my response that i am returning, not the url. anyways +1 for reply."}], "tags": [], "owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "is_accepted": false, "score": 1, "last_activity_date": 1468993137, "creation_date": 1468993137, "answer_id": 38473076, "question_id": 38472497, "link": "https://stackoverflow.com/questions/38472497/having-issue-with-webmock-in-stubbing-request/38473076#38473076", "title": "Having issue with webmock in stubbing request", "body": "<p>You cannot make external http requests with webmock, as rightly said by various posts that you mentioned. I notice your stubbed urls have interpolated variables in them ie <code>\"https://test_sid:test_token@twilix.exotel.in/v1/Accounts/#{Generator::configuration.sid}/Sms/send\"</code>. You need to:</p>\n\n<ol>\n<li>Make sure <code>Generator::configuration.sid</code> is accessible within the specs</li>\n<li>If it's not accessible then just return a plain url which is perfectly fine</li>\n</ol>\n"}], "owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1522135016, "creation_date": 1468989918, "last_edit_date": 1522135016, "question_id": 38472497, "link": "https://stackoverflow.com/questions/38472497/having-issue-with-webmock-in-stubbing-request", "title": "Having issue with webmock in stubbing request", "body": "<p>I am writin specs for my gem and I am using webmock to mock http requests. But i keep on getting this weird error. </p>\n\n<p>Here is my specs code</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe 'Generator::Exotel' do\n\n  describe '#success' do\n    let(:resps) { {\"Status\"=&gt;\"200\", \"Message\"=&gt;\"Success\"} }\n\n    before do\n      stub_request(:post, \"https://test_sid:test_token@twilix.exotel.in/v1/Accounts/#{Generator::configuration.sid}/Sms/send\").\n        with(:body =&gt; {:To =&gt; 1234, :Body =&gt; \"test sms\"}, :headers =&gt; {'Accept'=&gt;'*/*', 'User-Agent'=&gt;'Ruby'}).\n          to_return(:body =&gt; resps.to_json, :headers =&gt; {})\n    end\n\n    it 'returns response object for success' do\n      response = Generator::Exotel.send(:to =&gt; 1234, :body =&gt; \"test sms\")\n      expect(response.to_json).to eq (resps.to_json)\n    end\n  end  \n\n  describe '#failure' do\n    let(:resp) { {\"Status\"=&gt;\"401\", \"Message\"=&gt;\"Not Authenticated\"} }\n\n    before do\n      stub_request(:post, \"https://test_sid:test_token@twilix.exotel.in/v1/Accounts/#{Generator::configuration.sid}/Sms/send\").\n        with(:body =&gt; {:To =&gt; 1234, :Body =&gt; \"test sms\"}, :headers =&gt; {'Accept'=&gt;'*/*', 'User-Agent'=&gt;'Ruby'}).\n          to_return(:body=&gt; resp.to_json, :headers =&gt; {})\n    end\n\n    it 'returns response object for failure' do\n      response = Generator::Exotel.send(:to =&gt; 1234, :body =&gt; \"test sms\")\n      expect(response.to_json).to eq (resp.to_json)\n    end\n  end\nend\n</code></pre>\n\n<p>Whenever i run <code>rspec</code>, i am getting this following error</p>\n\n<pre><code>Generator::Exotel #success returns response object for success\n     Failure/Error: response = self.class.post(\"/#{Generator::configuration.sid}/Sms/send\",  {:body =&gt; params, :basic_auth =&gt; auth })\n\n     WebMock::NetConnectNotAllowedError:\n       Real HTTP connections are disabled. Unregistered request: POST https://twilix.exotel.in/v1/Accounts/test_sid/Sms/send with body 'To=1234&amp;Body=test%20sms' with headers {'Accept'=&gt;'*/*', 'Accept-Encoding'=&gt;'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'Authorization'=&gt;'Basic dGVzdF9zaWQ6dGVzdF90b2tlbg==', 'User-Agent'=&gt;'Ruby'}\n\n       You can stub this request with the following snippet:\n\n       stub_request(:post, \"https://twilix.exotel.in/v1/Accounts/test_sid/Sms/send\").\n         with(:body =&gt; \"To=1234&amp;Body=test%20sms\",\n              :headers =&gt; {'Accept'=&gt;'*/*', 'Accept-Encoding'=&gt;'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'Authorization'=&gt;'Basic dGVzdF9zaWQ6dGVzdF90b2tlbg==', 'User-Agent'=&gt;'Ruby'}).\n         to_return(:status =&gt; 200, :body =&gt; \"\", :headers =&gt; {})\n\n       registered request stubs:\n\n       stub_request(:post, \"https://test_sid:test_token@twilix.exotel.in/v1/Accounts/test_sid/Sms/send\").\n         with(:body =&gt; {\"Body\"=&gt;\"test sms\", \"To\"=&gt;1234},\n              :headers =&gt; {'Accept'=&gt;'*/*', 'User-Agent'=&gt;'Ruby'})\n\n       ============================================================\n</code></pre>\n\n<p>I have googled a lot and found some solutions, i.e,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23159588/webmock-stub-request-with-any-body-and-header\">Solution 1</a></p>\n\n<p><a href=\"https://www.relishapp.com/webmock/webmock/docs/stubbing/stubbing-requests\" rel=\"nofollow noreferrer\">Relish Documentation</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5980856/trying-to-get-selenium-working-in-rails-3-webmocknetconnectnotallowederror\">\u201cWebMock::NetConnectNotAllowedError\u201d</a></p>\n\n<p>Also i had a look at this <a href=\"https://robots.thoughtbot.com/how-to-stub-external-services-in-tests\" rel=\"nofollow noreferrer\">post</a> , But in vain.</p>\n\n<p>Also i tried using <code>WebMock.disable_net_connect!(:allow_localhost =&gt; true)</code>\nbut got the same result. Anyone know what am i doing wrong? I am really new to ruby and for first time i am writing specs and its really confusing me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468988324, "post_id": 38472018, "comment_id": 64347728, "body": "See <a href=\"http://stackoverflow.com/questions/37317317/actioncable-one-channel-per-user\">http://stackoverflow.com/questions/37317317/actioncable-one-&zwnj;&#8203;channel-per-user</a>"}, {"owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469017208, "post_id": 38472018, "comment_id": 64364263, "body": "I followed your given link but this is not working. @maxpleaner"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469037311, "post_id": 38472018, "comment_id": 64376875, "body": "This isn&#39;t a super simple problem you&#39;re facing. Probably not going to be a cut-and-paste solution. I&#39;m sure people would be willing to help if you update your question with your latest attempt."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 1015333, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6ea32c6e128543189c081f938d86b0e8?s=128&d=identicon&r=PG", "display_name": "Daya Sharma", "link": "https://stackoverflow.com/users/1015333/daya-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1487008940, "creation_date": 1487008940, "answer_id": 42210542, "question_id": 38472018, "link": "https://stackoverflow.com/questions/38472018/i-am-trying-to-create-chat-between-two-friends-in-rails-5-using-action-cable-but/42210542#42210542", "title": "I am trying to create chat between two friends in rails 5 using action cable but the message is viewed by all users which in either friends or not", "body": "<p>The Channel, Connection and Subscriptions model of ActionCable IIUC is on one Connection multiple Channels can be broadcasted but the User only sees data sent on Subscribed channels only. </p>\n\n<p>Therefore if you want to create chat between two friends, its akin to creating a private Channel, so in your <code>chat_create</code> method you can try this</p>\n\n<pre><code>ActionCable.server.broadcast \"message_channel_#{current_user.id}_#{params[:friend_id]}\"\n</code></pre>\n\n<p>basically you want to broadcast on a private Channel. Obviously for this to work you will have to Subscribe both users/friends to the same private channel.</p>\n"}], "owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1487008940, "creation_date": 1468986620, "question_id": 38472018, "link": "https://stackoverflow.com/questions/38472018/i-am-trying-to-create-chat-between-two-friends-in-rails-5-using-action-cable-but", "title": "I am trying to create chat between two friends in rails 5 using action cable but the message is viewed by all users which in either friends or not", "body": "<p>In the channel </p>\n\n<blockquote>\n  <p>javascripts/channel/message.js</p>\n</blockquote>\n\n<pre><code>App.message = App.cable.subscriptions.create('MessageChannel', {  \n  received: function(data) {\n\n    return $('#messages').append(this.renderMessage(data));\n  },\n  renderMessage: function(data) {\n    return \"&lt;p&gt; &lt;b&gt;\" + data.message + \"&lt;/p&gt;\";\n  }\n});\n</code></pre>\n\n<blockquote>\n  <p>Routes</p>\n</blockquote>\n\n<pre><code>  post 'messages/chat_create/:friendship_id/:friend_id' =&gt;'messages#chat_create' , as:\"chat_create\"\n</code></pre>\n\n<p>My Chatcontroller</p>\n\n<blockquote>\n  <p>class MessagesController &lt; ApplicationController</p>\n</blockquote>\n\n<pre><code>def chat_create\n\n        @chat = current_user.messages.new(msg: params[:message][:msg],friend_id:params[:friend_id])\n\n\n        if @chat.save\n            ActionCable.server.broadcast 'message_channel',message: @chat.msg\n            redirect_to chat_path(params[:friendship_id])\n        end\n    end\n</code></pre>\n\n<blockquote>\n  <p>messages/chat.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;div id=\"messages\"&gt;\n\n&lt;%=form_for :message, url: chat_create_path(params[:friendship_id],params[:friend_id]) , method: :post  do |f|%&gt;\n&lt;%=f.text_field :msg %&gt;\n&lt;%=f.submit%&gt;\n&lt;%end%&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<blockquote>\n  <p>How can I Improve this Please Provide me solutions</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "edited": false, "score": 0, "creation_date": 1468988080, "post_id": 38471950, "comment_id": 64347687, "body": "have you tried by running <code>bundle update</code> and <code>bundle install</code> after changing the Gemfile.?"}, {"owner": {"reputation": 1096, "user_id": 2087549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd60e923b026b22045450ec26adca1?s=128&d=identicon&r=PG", "display_name": "Andreas Gnyp", "link": "https://stackoverflow.com/users/2087549/andreas-gnyp"}, "edited": false, "score": 0, "creation_date": 1469060428, "post_id": 38471950, "comment_id": 64386906, "body": "What does <code>uru ls</code>say within your rails directory?"}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "edited": false, "score": 0, "creation_date": 1469061978, "post_id": 38471950, "comment_id": 64387265, "body": "<code>224p230     : ruby 2.2.4p230 (2015-12-16 revision 53155) [i386-mingw32]                    231p112     : ruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]</code>"}, {"owner": {"reputation": 1096, "user_id": 2087549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd60e923b026b22045450ec26adca1?s=128&d=identicon&r=PG", "display_name": "Andreas Gnyp", "link": "https://stackoverflow.com/users/2087549/andreas-gnyp"}, "edited": false, "score": 0, "creation_date": 1469063611, "post_id": 38471950, "comment_id": 64387633, "body": "There should be something like a <code>=&gt;</code> symbol, which shows you, which ruby is currently selected. I haven&#39;t worked with <code>uru</code> before, but I suspect you need a <code>.ruby-version</code> file, which sets the correct ruby version within your rails project. At least, that&#39;s how it works with <code>rvm</code> and <code>rbenv</code>."}], "owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1469062188, "creation_date": 1468986205, "last_edit_date": 1469062188, "question_id": 38471950, "link": "https://stackoverflow.com/questions/38471950/rails-wont-use-my-version-of-ruby-on-my-environment-windows-using-uru-not-rvm", "title": "Rails won&#39;t use my version of Ruby on my environment [Windows, using uru not rvm]", "body": "<p><strong>Problem:</strong> I needed use <code>ruby 2.3.1</code> from what I currently use which is <code>ruby 2.2.4</code>. When I do <code>ruby -v</code>, it shows <code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]</code>. I use uru as an alternative for rvm.</p>\n\n<p>However, when I do <code>rails s</code>, it tells me <code>Your Ruby version is 2.2.4, but your Gemfile specified 2.3.1</code>. <code>bundle</code> tells me the same thing.</p>\n\n<p><code>uru ls</code> shows:\n<code>\n224p230     : ruby 2.2.4p230 (2015-12-16 revision 53155) [i386-mingw32]\n231p112     : ruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]\n</code></p>\n\n<p>I've gone through every thread before posting. I have the latest version of Rails and Ruby from RailsInstallers. </p>\n\n<p>Here's what I've tried:</p>\n\n<ol>\n<li>Delete the Ruby folder from RailsInstaller directory. => <code>rails s is not recognized as an internal or external command, operable program or batch file.</code></li>\n<li>Delete and replace the old Ruby with the new Ruby directory => same thing</li>\n</ol>\n\n<p>Contemplating that this is a RailsInstaller error. </p>\n\n<p><strong>Edit:</strong> I've changed the Gemfile to use my version of Ruby. It's a sloppy solution for now, but I'm gonna reinstall Rails altogether when I'm finished with this project. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "edited": false, "score": 0, "creation_date": 1468984643, "post_id": 38471706, "comment_id": 64346945, "body": "Did your micropost is inside the loop?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3451733, "user_type": "registered", "profile_image": "https://graph.facebook.com/1581890868/picture?type=large", "display_name": "MikeK", "link": "https://stackoverflow.com/users/3451733/mikek"}, "edited": false, "score": 0, "creation_date": 1469020586, "post_id": 38472042, "comment_id": 64366856, "body": "Yup.  That was the issue.  Somehow my seed data is not populating Times right.  Thanks!"}], "tags": [], "owner": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "is_accepted": true, "score": 1, "last_activity_date": 1468986813, "creation_date": 1468986813, "answer_id": 38472042, "question_id": 38471706, "link": "https://stackoverflow.com/questions/38471706/datetime-showing-as-nil-in-rails-4/38472042#38472042", "title": "DateTime showing as nil in Rails 4", "body": "<p>I think you are trying it inside loop and any of micropost duration is nil. Try this</p>\n\n<pre><code>Duration &lt;%= micropost.duration.strftime(\"%H:%M:%S\") if micropost.duration.present? %&gt;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3451733, "user_type": "registered", "profile_image": "https://graph.facebook.com/1581890868/picture?type=large", "display_name": "MikeK", "link": "https://stackoverflow.com/users/3451733/mikek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 38472042, "answer_count": 1, "score": 1, "last_activity_date": 1468986813, "creation_date": 1468984428, "last_edit_date": 1495542769, "question_id": 38471706, "link": "https://stackoverflow.com/questions/38471706/datetime-showing-as-nil-in-rails-4", "title": "DateTime showing as nil in Rails 4", "body": "<p>I'm working in Rails 4 and trying to format a datetime being pulled from the SQLite DB.  I'm working in the model but the object class is behaving very strangely.</p>\n\n<p>If I type:\n<code>Duration &lt;%= micropost.duration %&gt;</code></p>\n\n<p>then it prints the full datetime.  I only want the time.</p>\n\n<p>If I type:\n<code>Duration &lt;%= micropost.duration.strftime(\"%H:%M:%S\") %&gt;</code></p>\n\n<p>then I get the error: \n<code>undefined method</code>strftime' for nil:NilClass`</p>\n\n<p>So I try typing:\n<code>Duration &lt;%= micropost.duration.class %&gt;</code></p>\n\n<p>and it returns the type: <code>ActiveSupport::TimeWithZone</code></p>\n\n<p>It looks like it sometimes recognizes the type and sometimes not.  To compound the issue, in the IRB the <code>strftime(\"%H:%M:%S\")</code> method works.</p>\n\n<p>There was a similar issue raised in <a href=\"https://stackoverflow.com/questions/21249048/how-to-format-time-and-date-from-dbdatetime-record-in-rails-4\">How to format time and date from db:datetime record in Rails 4</a> but that solution did not work. Am I even looking in the right place?</p>\n"}, {"tags": ["ruby", "net-http"], "answers": [{"tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 1, "last_activity_date": 1468980578, "last_edit_date": 1468980578, "creation_date": 1468980225, "answer_id": 38471166, "question_id": 38471114, "link": "https://stackoverflow.com/questions/38471114/how-to-use-nethttps-get-print-method/38471166#38471166", "title": "How to use Net::HTTP&#39;s `get_print` method", "body": "<p>You've stored an instance of the class<code>Net::HTTP</code> in your <code>HTTPClient</code> constant. But <code>get_print</code> isn't an instance method of <code>Net::HTTP</code> (<a href=\"http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/Net/HTTP.html#method-c-get_print\" rel=\"nofollow\">see the docs</a>),  it's a singleton method of the class object <code>Net::HTTP</code> itself. Therefore, you cannot call <code>get_print</code> on an instance.</p>\n\n<p>Here's how you might use <code>get_print</code> appropriately:</p>\n\n<pre><code>require 'net/http'\n\nNet::HTTP.get_print('www.google.com', '/')\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 2465510, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cff70fdd727409e7fff364a42a384f7f?s=128&d=identicon&r=PG", "display_name": "user2465510", "link": "https://stackoverflow.com/users/2465510/user2465510"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 38471166, "answer_count": 1, "score": 0, "last_activity_date": 1468980655, "creation_date": 1468979792, "last_edit_date": 1468980655, "question_id": 38471114, "link": "https://stackoverflow.com/questions/38471114/how-to-use-nethttps-get-print-method", "title": "How to use Net::HTTP&#39;s `get_print` method", "body": "<p>I'm trying to create and initialize an instance of <code>Net::HTTP</code> as HTTPClient. When I get to the get_print method, though, it is telling me that it doesn't exist. What am I doing incorrectly?</p>\n\n<pre><code>require 'Net/HTTP'\n\nprint \"Enter address for HTTP request: \"\nURL = gets.chomp\nputs ''\n\nHTTPClient = Net::HTTP.new(URL, 80)\n\nHTTPClient.get_print URI(URL)\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "xpath", "selenium-webdriver"], "comments": [{"owner": {"reputation": 15849, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "edited": false, "score": 0, "creation_date": 1468971128, "post_id": 38469915, "comment_id": 64344123, "body": "Hope this helps - <a href=\"http://elementalselenium.com/tips/25-tables\" rel=\"nofollow noreferrer\">elementalselenium.com/tips/25-tables</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468978361, "post_id": 38469915, "comment_id": 64345628, "body": "Are you sure <code>find_elements</code> will raise an error when nothing is found, not an empty array? I&#39;d double check your xpath."}], "answers": [{"comments": [{"owner": {"reputation": 5366, "user_id": 3122133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WGob2.jpg?s=128&g=1", "display_name": "Madhan", "link": "https://stackoverflow.com/users/3122133/madhan"}, "edited": false, "score": 0, "creation_date": 1468999915, "post_id": 38472075, "comment_id": 64352818, "body": "The OP wanted it in ruby.You have posted in java"}, {"owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "edited": false, "score": 0, "creation_date": 1469009851, "post_id": 38472075, "comment_id": 64359291, "body": "Translating to Ruby should be easily possible with the complexity of the posted code."}], "tags": [], "owner": {"reputation": 1, "user_id": 6611591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GVBR2AKpPks/AAAAAAAAAAI/AAAAAAAABFg/GNaR-ELBiGg/photo.jpg?sz=128", "display_name": "ANSHUL CHAUHAN", "link": "https://stackoverflow.com/users/6611591/anshul-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1479130279, "last_edit_date": 1479130279, "creation_date": 1468987035, "answer_id": 38472075, "question_id": 38469915, "link": "https://stackoverflow.com/questions/38469915/how-to-iterate-over-a-table/38472075#38472075", "title": "How to iterate over a table?", "body": "<p>You can traverse the WebTable easily using for loops on Table Data and Table Row's XPaths. See the Sample program - </p>\n\n<pre><code>public class WebTable {\n    WebDriver driver;\n\n    @BeforeTest\n    public void openWebSite() {\n\n        // Open Raddif Gainer page\n        driver = new FirefoxDriver();\n        driver.get(\"http://money.rediff.com/gainers/bse/daily/groupa?src=gain_lose\");\n        driver.manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);\n    }\n\n    @Test\n    public void CountRowsTest() {\n\n        // Store all rows in the List\n        List&lt;WebElement&gt; allRows = driver.findElements(By\n                .xpath(\"//*[@id='leftcontainer']/table/tbody/tr\"));\n\n        // To get the all present rows in the Table\n        System.out.println(\"Totoal rows are -- \" + allRows.size());\n    }\n\n    @Test\n    public void printallrowsTest() {\n\n        // Store all rows in the List\n        List&lt;WebElement&gt; allRows = driver.findElements(By\n                .xpath(\"//*[@id='leftcontainer']/table/tbody/tr\"));\n\n        // To Print the whole content of the table\n        for (int i = 0; i &lt; allRows.size(); i++) {\n            System.out.println(allRows.get(i).getText());\n        }\n }\n</code></pre>\n\n<p>For more details, you can refer this amazing tutorial:</p>\n\n<p><a href=\"http://www.seleniumbix.com/#!handle-webtables-in-selenium/c329\" rel=\"nofollow noreferrer\">http://www.seleniumbix.com/#!handle-webtables-in-selenium/c329</a></p>\n"}], "owner": {"reputation": 159, "user_id": 6536238, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/9c74af66c84dd87a63775616be5358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny Peppers", "link": "https://stackoverflow.com/users/6536238/jonny-peppers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 791, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479130279, "creation_date": 1468969480, "last_edit_date": 1468970177, "question_id": 38469915, "link": "https://stackoverflow.com/questions/38469915/how-to-iterate-over-a-table", "title": "How to iterate over a table?", "body": "<p>I have a table in the following structure:</p>\n\n<pre><code>&lt;table&gt;\n &lt;tbody&gt;\n   &lt;tr&gt;\n     &lt;td&gt; Name: &lt;/td&gt;\n     &lt;td&gt; Juan &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n     &lt;td&gt; Name: &lt;/td&gt;\n     &lt;td&gt; Alex &lt;/td&gt;\n   &lt;/tr&gt;\n  &lt;/tbody&gt;\n</code></pre>\n\n<p>I want to iterate through the second <code>td</code> in the <code>tr</code> and grab the name (Juan, Alex) \nI wrote the following code to do it:</p>\n\n<pre><code>   driver.find_elements(:xpath =&gt; \"//table/tbody/tr/td[2]\").each do |r|\n            puts  r.text\n    end\n</code></pre>\n\n<p>It doesn't produce any errors, no <code>unable to find element</code>. anything. It just skips over these lines of code. It's not printing out any blanks either. I put a test for it inside the do loop and did not reach in there. I know the xpath is correct, I checked in firebug. What am I doing wrong here?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 0, "last_activity_date": 1468978033, "last_edit_date": 1468978033, "creation_date": 1468977359, "answer_id": 38470822, "question_id": 38469760, "link": "https://stackoverflow.com/questions/38469760/searching-for-specific-values-with-an-array-of-hashes/38470822#38470822", "title": "Searching for specific values with an array of hashes", "body": "<p>Because of Ruby being helpful</p>\n\n<pre><code>rules_list = [\n  1 =&gt; {rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50},\n  2 =&gt; {rule_type: \"item\", item_code: 2, number_of_items: 4, new_item_price: 7.50}\n]\n</code></pre>\n\n<p>ends up being:</p>\n\n<pre><code> =&gt; [{\n  1=&gt;{:rule_type=&gt;\"item\", :item_code=&gt;1, :number_of_items=&gt;2, :new_item_price=&gt;8.5},\n  2=&gt;{:rule_type=&gt;\"item\", :item_code=&gt;2, :number_of_items=&gt;4, :new_item_price=&gt;7.5}\n}] \n</code></pre>\n\n<p>which is an array of length 1 containing a hash of length 2. You're better off doing this:</p>\n\n<pre><code>rules_list = [\n  {rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50},\n  {rule_type: \"item\", item_code: 2, number_of_items: 4, new_item_price: 7.50}\n]\n</code></pre>\n\n<p>and query it like this:</p>\n\n<pre><code>rules_list.select { |rule| rule[:item_code] == 1 &amp;&amp; rule[:number_of_items] == 2 }\n\n =&gt; [{:rule_type=&gt;\"item\", :item_code=&gt;1, :number_of_items=&gt;2, :new_item_price=&gt;8.5}] \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468978033, "creation_date": 1468968702, "question_id": 38469760, "link": "https://stackoverflow.com/questions/38469760/searching-for-specific-values-with-an-array-of-hashes", "title": "Searching for specific values with an array of hashes", "body": "<p>I'm trying to find a way to pass the following test but i keep end up using loops within loops which are awful. Can anyone help? Here is the test:</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Promotion_Check do\n\n  let(:check) { Promotion_Check.new rules_list }\n  let(:item_rule) { {rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50} }\n  let(:total_rule)  { {rule_type: \"total\", total_price_break: 60.00, discount_percentage: 10} }\n  let(:rules_list) { [ 1 =&gt; item_rule, 2 =&gt; total_rule ] }\n\n  describe \"#applicable_item_rules\" do\n    it \"finds the rules that apply to the baskets items\" do\n      item_code = 1\n      count = 2\n      expect(check.applicable_item_rules(item_code, count)).to eq [item_rule]\n    end\n  end\nend\n</code></pre>\n\n<p>Basically, I want to search an array of hashes like so:</p>\n\n<pre><code>rules_list = [ 1 =&gt; {rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50}, 2 =&gt; {rule_type: \"item\", item_code: 2, number_of_items: 4, new_item_price: 7.50}]\n</code></pre>\n\n<p>for anything that has a value with a matching :item_code and :number_of_items and push that value into an array.</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["php", "html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1468978810, "last_edit_date": 1495541694, "creation_date": 1468978810, "answer_id": 38470987, "question_id": 38469755, "link": "https://stackoverflow.com/questions/38469755/running-php-script-from-html-erb-form/38470987#38470987", "title": "Running php script from html.erb form", "body": "<p>This question is similar to <a href=\"https://stackoverflow.com/questions/8341363/run-a-php-script-in-ruby-on-rails\">Run a php script in ruby on rails</a>, although that question asks how to run php from the controller while yours runs from the view. The other question has an accepted answer, though, which is to run the PHP script from the Ruby server through system commands (backticks).</p>\n\n<p>So, the steps you should take are as follows:</p>\n\n<p>Submit your form over AJAX to a Rails controller endpoint which runs your php script like so:</p>\n\n<pre><code>@script_result_string = `php script` \nrender json: { result: @script_result_string }.to_json\n</code></pre>\n\n<p>Then in your AJAX callback, read <code>response.result</code> to get the result as a string. </p>\n\n<p>This might not be an acceptable solution if you're trying to run browser code using PHP. I don't think it will be easy to do so. In other words, you'd have to restrict your php code to server-only stuff.</p>\n"}], "owner": {"reputation": 937, "user_id": 1042906, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6f36fc042a9829fbc6b7b970f0e45041?s=128&d=identicon&r=PG", "display_name": "AIntel", "link": "https://stackoverflow.com/users/1042906/aintel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 38470987, "answer_count": 1, "score": 2, "last_activity_date": 1469121152, "creation_date": 1468968685, "last_edit_date": 1469121152, "question_id": 38469755, "link": "https://stackoverflow.com/questions/38469755/running-php-script-from-html-erb-form", "title": "Running php script from html.erb form", "body": "<p>Hi I am trying to post data from an html.erb file (in my ruby on rails website) to a php script and I'm wondering if this is even possible. So far I get \"Missing Template\" when I try this code from my html.erb file</p>\n\n<pre><code>  &lt;form method=\"POST\" action=\"uam_handle_form\"&gt;\n          &lt;input type=\"text\" name=\"email\" placeholder=\"Enter email address\" id=\"email\" class=\"email-input\"&gt;\n          &lt;input type=\"hidden\" name=\"password\"&gt;\n          &lt;%= hidden_field_tag :authenticity_token, form_authenticity_token %&gt;\n\n          &lt;div class=\"connect\"&gt;\n            &lt;button type=\"submit\"&gt;CONNECT&lt;/button&gt;\n            &lt;label class=\"control control--checkbox\"&gt;Opt in all marketing communications from X\n              &lt;input type=\"checkbox\" checked=\"checked\"/&gt;\n              &lt;div class=\"control__indicator\"&gt;&lt;/div&gt;\n            &lt;/label&gt;\n          &lt;/div&gt;\n        &lt;/form&gt;\n</code></pre>\n\n<p>where \"umm_handle_form\" is a php file. I believe I have my routing set up correctly on rails, since if I change the file extension to html.erb the page renders albeit plain-text php. </p>\n\n<p>Is there any way I can post, receive and run a php file from this form submission? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "asset-pipeline"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1468969538, "post_id": 38469690, "comment_id": 64343754, "body": "Unfortunately that didn&#39;t work, anytime that I try to use one of those helpers I get errors and precompile doesn&#39;t work."}, {"owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "reply_to_user": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1468969681, "post_id": 38469690, "comment_id": 64343782, "body": "just to be sure, you have the gem &#39;sass-rails&#39;?"}, {"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1468975395, "post_id": 38469690, "comment_id": 64345036, "body": "Yes it&#39;s definitely sass-rails"}, {"owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "reply_to_user": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1468975646, "post_id": 38469690, "comment_id": 64345085, "body": "could you try without double quotes? I had some problems before using double quotes in scss"}, {"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1468979343, "post_id": 38469690, "comment_id": 64345823, "body": "That did the trick! However I used something more along the lines of this <code>background: image-url(&#39;header_background.png&#39;);</code>"}], "tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": true, "score": 1, "last_activity_date": 1468969956, "last_edit_date": 1468969956, "creation_date": 1468968272, "answer_id": 38469690, "question_id": 38469625, "link": "https://stackoverflow.com/questions/38469625/actioncontrollerroutingerror-no-route-matches-get-assets-blah-png-herok/38469690#38469690", "title": "ActionController::RoutingError (No route matches [GET] &quot;/assets/blah.png&quot;) Heroku", "body": "<p>You need to change in your scss to use the sass helpers that the gem provides, like:</p>\n\n<pre><code>image-path('roses-right.png')\n</code></pre>\n\n<p>Check the docs at <a href=\"https://github.com/rails/sass-rails#asset-helpers\" rel=\"nofollow\">https://github.com/rails/sass-rails#asset-helpers</a></p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 6007339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J02Mqzgjdpc/AAAAAAAAAAI/AAAAAAAAAQ4/H73JV43UgYA/photo.jpg?sz=128", "display_name": "Peter Ramm", "link": "https://stackoverflow.com/users/6007339/peter-ramm"}, "is_accepted": false, "score": 0, "last_activity_date": 1477567879, "creation_date": 1477567879, "answer_id": 40283534, "question_id": 38469625, "link": "https://stackoverflow.com/questions/38469625/actioncontrollerroutingerror-no-route-matches-get-assets-blah-png-herok/40283534#40283534", "title": "ActionController::RoutingError (No route matches [GET] &quot;/assets/blah.png&quot;) Heroku", "body": "<p>I had one remaining problem in Rails 5 in production mode using engines as gems with images below /vendor/assets/.. :</p>\n\n<ul>\n<li>Images are referenced from untouched vendor's css-code (e.g. jquery-ui) and therefore are without any scss conversion code for asset pipeline like \"image-path\", \"image-url\", \"asset-path\" or \"asset-url\"</li>\n<li><p>All these vendors images are also precompiled to /public/assets by \"rake asset:precompile\" if you add this to config/initializers/assets.rb</p>\n\n<pre><code>Rails.application.config.assets.precompile += %w( *.ico *.gif *.png *.jpg )</code></pre></li>\n<li><p>runtime references from css already uses native image names instead of precompiled hashed names and therefore end up in \"no route for ...\"</p></li>\n</ul>\n\n<p>My workaround solution was to copy asset pipeline's objects in /public/assets down to its native names so there are two versions of each file. \nThe native and the hashed name.</p>\n\n<ul>\n<li><p>Native names are gotten from sprockets manifest file so I mustn't know the real location of these files in gem path</p></li>\n<li><p>Copy is done as part of \"rake assets:precompile\"</p></li>\n</ul>\n\n<p>Create a file \"lib/tasks/precompile.rake\"</p>\n\n<pre><code>require 'json'\nrequire 'fileutils'\n\nnamespace :assets do\n  task :precompile do\n    puts '####### Task assets:precompile extended in lib/tasks/precompile.rake !'\n    puts '####### Add native files to public/assets if requested outside from asset pipeline'\n\n    Dir.glob(\"public/assets/.sprockets-manifest*.json\").each do |fname|\n      manifest = IO.read(fname)\n      mhash = JSON.parse(manifest)\n      mhash['files'].each do |key, value|\n        source = \"public/assets/#{key}\"\n        target = \"public/assets/#{value['logical_path']}\"\n\n        puts \"# create #{target}\"\n        FileUtils.cp(source, target)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This way this cloning code is executed at the end of \"assets:precompile\" rake task.</p>\n"}], "owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "accepted_answer_id": 38469690, "answer_count": 2, "score": 2, "last_activity_date": 1477567879, "creation_date": 1468967886, "question_id": 38469625, "link": "https://stackoverflow.com/questions/38469625/actioncontrollerroutingerror-no-route-matches-get-assets-blah-png-herok", "title": "ActionController::RoutingError (No route matches [GET] &quot;/assets/blah.png&quot;) Heroku", "body": "<p>I've seen this error run into a few times in multiple different threads here but although after trying almost all of the mentioned solutions I'm still hitting multiple of these errors within my <code>heroku logs</code>. </p>\n\n<blockquote>\n  <p>It should be noted that I'm using rails 4.2.</p>\n</blockquote>\n\n<p>The interesting thing is the images within the <code>HTML</code> load fine, <strong>however</strong> the images that are attempting to be accessed from my <code>SCSS</code> files do not load at all and I hit the following error on those files.</p>\n\n<p><code>ActionController::RoutingError (No route matches [GET] \"/assets/roses-right.png\"):</code></p>\n\n<p>As I've said I've tried multiple solutions including running <code>rake assets:precompile</code> both locally and on the heroku server. I've also attempted setting <code>config.serve_static_files = true</code> within <code>config/environments/production.rb</code> and still no dice. And lastly within my gemfile I do have the following block:</p>\n\n<pre><code>group :production do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n</code></pre>\n\n<p>Any help here would be greatly appreciated, thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "undefined", "token"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6360311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128daf9c89396ae3d4075837c3fa951d?s=128&d=identicon&r=PG&f=1", "display_name": "Siamak Kosari", "link": "https://stackoverflow.com/users/6360311/siamak-kosari"}, "edited": false, "score": 0, "creation_date": 1479593647, "post_id": 39026592, "comment_id": 68626142, "body": "Good eye! I went over that code a few times but I guess it wasn&#39;t enough. Thanks for the fix."}, {"owner": {"reputation": 11, "user_id": 6360311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128daf9c89396ae3d4075837c3fa951d?s=128&d=identicon&r=PG&f=1", "display_name": "Siamak Kosari", "link": "https://stackoverflow.com/users/6360311/siamak-kosari"}, "edited": false, "score": 0, "creation_date": 1480841395, "post_id": 39026592, "comment_id": 69123267, "body": "Just did but I&#39;m so new it doesn&#39;t show a public view of my up vote."}], "tags": [], "owner": {"reputation": 1048, "user_id": 5527646, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/28d6209af26307872aa4efc6fcd79452?s=128&d=identicon&r=PG", "display_name": "gwydion93", "link": "https://stackoverflow.com/users/5527646/gwydion93"}, "is_accepted": false, "score": 1, "last_activity_date": 1471550479, "creation_date": 1471550479, "answer_id": 39026592, "question_id": 38469561, "link": "https://stackoverflow.com/questions/38469561/stripe-rails-no-such-token-undefined/39026592#39026592", "title": "Stripe/Rails: &quot;No such token: undefined&quot;", "body": "<p>It appears that we were working on a similar project because I had this same issue using the method you are using. After trying the same fixes that you did (and still getting the same error), I finally discovered a small error in the directions that we both may have used to set up Stripe. The first clue is to look at the variable values in your <code>users.js</code> file. I noticed a typo right off the bat in yours. You have </p>\n\n<pre><code>var ccNum = $('#card-number').val(),  //storing variables\n        cvcNum = $('#card_code').val(),\n        expMonth = $('#card_month').val(),\n        expYear = $('#card_year').val();\n</code></pre>\n\n<p>Notice that you have <code>#card-number</code> when it should be <code>#card_number</code> (with an _ not a -). While you don't have it listed, you also need to check the <code>_pro_form.html.erb</code> file, or it's equivalent. In my case, I had</p>\n\n<pre><code> &lt;%= label_tag :card_code, \"Credit Card Number\" %&gt;\n</code></pre>\n\n<p>when it should have been</p>\n\n<pre><code> &lt;%= label_tag :card_number, \"Credit Card Number\" %&gt;\n</code></pre>\n\n<p>Make sure, that those values in the <code>_pro_form.html.erb</code> (or equivalent) file are matching to those in the <code>users.js</code> file. Hope that helps. </p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 11909109, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uBziafmGc90/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF9gb9YGjtvtKyrUm1NuJ2bMVgfA/photo.jpg?sz=128", "display_name": "Beulah Akindele", "link": "https://stackoverflow.com/users/11909109/beulah-akindele"}, "is_accepted": false, "score": 0, "last_activity_date": 1568758636, "last_edit_date": 1568758636, "creation_date": 1568757615, "answer_id": 57982584, "question_id": 38469561, "link": "https://stackoverflow.com/questions/38469561/stripe-rails-no-such-token-undefined/57982584#57982584", "title": "Stripe/Rails: &quot;No such token: undefined&quot;", "body": "<p>Your error is probably caused by an invalid card number.</p>\n\n<p>Comment out your <code>f.get(0).submit</code> and use </p>\n\n<pre><code>console.log(`status: ${status}, response: ${response}`);\n</code></pre>\n\n<p>At the beginning of <code>stripeResponseHandler</code> function to get the actual error being sent from Stripe. An error code will be returned in status. </p>\n\n<p>Just lookup <code>stripe error YOUR_ERROR_CODE</code> and you'll find a solution.\nA pretty common one is <code>402</code>, which means your card number is invalid. <a href=\"https://stripe.com/docs/error-codes\" rel=\"nofollow noreferrer\">Here</a> is a list of some stripe errors.</p>\n"}], "owner": {"reputation": 11, "user_id": 6360311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128daf9c89396ae3d4075837c3fa951d?s=128&d=identicon&r=PG&f=1", "display_name": "Siamak Kosari", "link": "https://stackoverflow.com/users/6360311/siamak-kosari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1568758636, "creation_date": 1468967454, "last_edit_date": 1495539932, "question_id": 38469561, "link": "https://stackoverflow.com/questions/38469561/stripe-rails-no-such-token-undefined", "title": "Stripe/Rails: &quot;No such token: undefined&quot;", "body": "<p>I have been trying to get Stripe to return a token to my rails app but I keep getting this error:</p>\n\n<p>Stripe::InvalidRequestError in Users::RegistrationsController#create\nNo such token: undefined</p>\n\n<p>Chrome highlights this line:</p>\n\n<pre><code>customer = Stripe::Customer.create(description: email, plan: plan_id, card: stripe_card_token)\n</code></pre>\n\n<p>I have also tried changing \"card\" to \"source\" and still it comes back as token undefined:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"returns a token :)\",\n \"plan\"=&gt;\"2\",\n \"user\"=&gt;{\"email\"=&gt;\"sljkdfhgvbdlvb@ae;klfgjbearfgvkujb.com\",\n \"password\"=&gt;\"[FILTERED]\",\n \"password_confirmation\"=&gt;\"[FILTERED]\",\n \"stripe_card_token\"=&gt;\"undefined\"}}\n</code></pre>\n\n<p>I also get a 'block in create' &amp; 'create' in the application trace</p>\n\n<p>app/models/user.rb:11:in <code>save_with_payment'\napp/controllers/users/registrations_controller.rb:8:in</code>block in create'\napp/controllers/users/registrations_controller.rb:4:in `create'</p>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController  #given to us by Devise\n    #creating a class Users and inheriting devise\n    def create  #When the user submits their form\n       super do |resource| #importing to create action code that is inside the devise gem\n          if params[:plan] #when user submits basic or pro form\n              resource.plan_id = params[:plan] #were going to cath that form and see if param :plan was submitted and if yes then we save to resource.plan_id\n              if resource.plan_id == 2 # if User.first_plan.id = 2\n                  resource.save_with_payment # if id does = 2 then we save_with_payment defined in models/user.rb otherwise\n              else  #if id = 1\n                  resource.save #just do a regular save to resources\n              end\n          end\n       end\n    end\n\nend\n</code></pre>\n\n<p>I tried restarting the server\nI tried a bundle update\nHere are some posts I've read:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27449180/stripe-integration-dynamically-adding-attr-value-in-to-the-hidden-field\">Stripe Integration - Dynamically adding attr value in to the hidden_field</a></p>\n\n<p><a href=\"https://github.com/tyler-johnson/stripe-meteor/issues/25\" rel=\"nofollow noreferrer\">https://github.com/tyler-johnson/stripe-meteor/issues/25</a></p>\n\n<p>I've also tried 4 different card #'s according to </p>\n\n<p><a href=\"https://stripe.com/docs/testing\" rel=\"nofollow noreferrer\">https://stripe.com/docs/testing</a></p>\n\n<p>Any help would be greatly appreciated :)</p>\n\n<p>FOR REFERENCE:</p>\n\n<p>application.yml</p>\n\n<pre><code>stripe_api_key: test key\nstripe_publishable_key: pk test key\n#\nproduction:\n  stripe_api_key: test key\n  stripe_publishable_key: pk test key\n</code></pre>\n\n<p>users.js</p>\n\n<pre><code>/* global $ */\n$(document).ready(function() {      //The .ready just means that the document will get loaded before teh JS runs\n    Stripe.setPublishableKey($('meta[name=\"stripe-key\"]').attr('content'));    //Lets grab generic meta tag contents. We can use it because we loaded the JS Stripe file\n    // Watch for a form submission:\n    $(\"#form-submit-btn\").click(function(event) {  //When the user clicks on submit, we add an event listener to \"next line\"\n        event.preventDefault();  //Dont send anything to the server just yet\n        $('input[type=submit]').prop('disabled', true);  //This disables the button\n        var error = false;  //establishing a variable false\n        var ccNum = $('#card-number').val(),  //storing variables\n            cvcNum = $('#card_code').val(),\n            expMonth = $('#card_month').val(),\n            expYear = $('#card_year').val();\n\n        if (!error) {   //if there are no errors\n            //Get the Stripe token:\n            Stripe.createToken({ //Ship off the data entered to STRIPE\n                number: ccNum,\n                cvc: cvcNum,\n                exp_month: expMonth,\n                exp_year: expYear\n            }, stripeResponseHandler);  //Once stripe returns TOKEN\n        }\n        return false;\n    }); //form submission\n\n    function stripeResponseHandler(status, response) {  //response coming back from server\n        //Get a reference to the form:\n        var f = $(\"#new_user\"); //Lets use this form we made\n\n        //Get the token from the response:\n        var token = response.id;  //coming from response above and gives us card TOKEN\n\n        //Add the token to the form:\n        f.append('&lt;input type=\"hidden\" name=\"user[stripe_card_token]\" value=\"' + token + '\" /&gt;'); //and append the value for the field\n\n        //Submit the form:\n        f.get(0).submit(); //f.get(0) means we only want to the first forn incase there are multiple forms returned and submit\n    }\n});\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  belongs_to :plan\n  attr_accessor :stripe_card_token #stripe_card_token hidden field value\n\n  def save_with_payment #method used in /app/controllers/users/registrations_controller.rb\n    if valid? #If user filled out form properly\n      customer = Stripe::Customer.create(description: email, plan: plan_id, source: stripe_card_token)\n      self.stripe_customer_token = customer.id #setting property of user to user id returned from stripe\n      save! #saving entire user object to database by creating new migration file\n    end\n  end\nend\n</code></pre>\n\n<p>stripe.rb</p>\n\n<pre><code>Stripe.api_key = ENV[\"stripe_api_key\"]\nSTRIPE_PUBLIC_KEY = ENV[\"stripe_publishable_key\"] #The ENV comes from the figaro file\n</code></pre>\n\n<p>migration file (rails generated)</p>\n\n<pre><code>class AddStripeCustomerTokenToUsers &lt; ActiveRecord::Migration\n  def change\n      add_column :users, :stripe_customer_token, :string \n  end #add a column to the user database and call it stripe ciutomer token as a string\nend #bundle exec rake db:migrate after you created this\n</code></pre>\n\n<p>application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;DevMatch&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all' %&gt;\n  &lt;%= javascript_include_tag \"https://js.stripe.com/v2/\", type: 'text/javascript' %&gt;\n  &lt;%= javascript_include_tag 'application'%&gt;\n  &lt;%= tag :meta, :name =&gt; \"stripe-key\", :content =&gt; STRIPE_PUBLIC_KEY %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;nav class=\"navbar navbar-inverse navbar-static-top\" role=\"navigation\"&gt;\n    &lt;div class='container'&gt;\n      &lt;div class='navbar-header'&gt;\n        &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#main-nav-collapse\"&gt;\n          &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n          &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n          &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n          &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;/button&gt;\n        &lt;%= link_to root_path, class: 'navbar-brand' do %&gt;\n          &lt;i class=\"fa fa-users\"&gt;&lt;/i&gt;\n          DevMatch\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"collapse navbar-collapse\" id=\"main-nav-collapse\"&gt;\n        &lt;div class=\"navbar-nav navbar-right\"&gt;\n          &lt;% if current_user %&gt;\n            &lt;%= button_to \"Sign Out\", destroy_user_session_path, method: :delete, class: 'btn btn-primary navbar-btn' %&gt;\n          &lt;% else %&gt;\n            &lt;%= link_to \"Log In\", new_user_session_path, class: 'btn btn-primary navbar-btn', method: :get %&gt;\n        &lt;/div&gt;\n        &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n          &lt;li&gt;&lt;%= link_to \"About\", about_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"New Contact\", new_contact_path %&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;\n    &lt;/div&gt;\n  &lt;/nav&gt;\n\n&lt;div class=\"container\"&gt;\n  &lt;% flash.each do |key, value| %&gt;\n    &lt;%= content_tag :div, value, class: \"alert alert-#{key}\" %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= yield %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "edited": false, "score": 0, "creation_date": 1468968496, "post_id": 38469470, "comment_id": 64343441, "body": "this other answer may help you <a href=\"http://stackoverflow.com/questions/12683222/are-there-console-commands-to-look-at-whats-in-the-queue-and-to-clear-the-queue\" title=\"are there console commands to look at whats in the queue and to clear the queue\">stackoverflow.com/questions/12683222/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 3, "last_activity_date": 1468972037, "creation_date": 1468972037, "answer_id": 38470260, "question_id": 38469470, "link": "https://stackoverflow.com/questions/38469470/sidekiq-count-the-number-of-available-threads/38470260#38470260", "title": "Sidekiq: Count the number of available threads", "body": "<p>You are looking for <code>Sidekiq::ProcessSet#each</code>.</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/api.rb#L719\" rel=\"nofollow\">https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/api.rb#L719</a></p>\n\n<pre><code>Sidekiq::ProcessSet.new.each do |pro| \n  puts \"I have #{pro['concurrency'] - pro['busy']} threads free\"\nend\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 2604889, "user_type": "registered", "profile_image": "https://graph.facebook.com/809550496/picture?type=large", "display_name": "Jean Meyer", "link": "https://stackoverflow.com/users/2604889/jean-meyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "accepted_answer_id": 38470260, "answer_count": 1, "score": 2, "last_activity_date": 1468972037, "creation_date": 1468966919, "question_id": 38469470, "link": "https://stackoverflow.com/questions/38469470/sidekiq-count-the-number-of-available-threads", "title": "Sidekiq: Count the number of available threads", "body": "<p>I'd like to count from the Rails console the <strong>total number of available Sidekiq threads/processors.</strong></p>\n\n<p><code>threads != workers</code></p>\n\n<pre><code>Sidekiq::Workers.size doesn't work\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "xpath", "capybara", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 3950092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c377c84eac0e363168c0b07a7aab15de?s=128&d=identicon&r=PG&f=1", "display_name": "dylankb", "link": "https://stackoverflow.com/users/3950092/dylankb"}, "edited": false, "score": 0, "creation_date": 1469133449, "post_id": 38470034, "comment_id": 64424865, "body": "Appreciate the answer, but I ended up just scraping the html with Capybara and processing with Nokogiri. I needed to navigate through many results pages, and the combination of parsing with slow Capybara nodes and strange JS effects made the script usually throw a StaleElementReferenceError."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1500471045, "last_edit_date": 1500471045, "creation_date": 1468970348, "answer_id": 38470034, "question_id": 38469267, "link": "https://stackoverflow.com/questions/38469267/how-to-find-an-elements-text-in-capybara-while-ignoring-inner-element-text/38470034#38470034", "title": "How to find an element&#39;s text in Capybara while ignoring inner element text", "body": "<p>There is no single statement way to do this with Capybara since the DOMs concept of innerText doesn't really support what you want to do. Assuming <code>p</code> is the '.price' element, two ways you could get what you want are as follows:</p>\n\n<ol>\n<li><p>Since you know the node you want to ignore just subtract that text from the whole text</p>\n\n<pre><code>p.find('span.sale').text.sub(p.find('span.sale-text').text, '')\n</code></pre></li>\n<li><p>Grab the innerHTML string and parse that with Nokogiri or Capybara.string (which just wraps Nokogiri elements in the Capybara DSL)</p>\n\n<pre><code>doc = Capybara.string(p['innerHTML'])\nnokogiri_fragment = doc.native\n#do whatever you want with the nokogiri fragment\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 932, "user_id": 3950092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c377c84eac0e363168c0b07a7aab15de?s=128&d=identicon&r=PG&f=1", "display_name": "dylankb", "link": "https://stackoverflow.com/users/3950092/dylankb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3468, "favorite_count": 0, "accepted_answer_id": 38470034, "answer_count": 1, "score": 0, "last_activity_date": 1613427399, "creation_date": 1468965747, "last_edit_date": 1613427399, "question_id": 38469267, "link": "https://stackoverflow.com/questions/38469267/how-to-find-an-elements-text-in-capybara-while-ignoring-inner-element-text", "title": "How to find an element&#39;s text in Capybara while ignoring inner element text", "body": "<p>In the HTML example below I am trying to grab the $16.95 text in the outer <code>span.price</code> element and exclude the text from the inner <code>span.sale</code> one.</p>\n<pre><code>&lt;div class=&quot;price&quot;&gt;\n  &lt;span class=&quot;sale&quot;&gt;\n    &lt;span class=&quot;sale-text&quot;&gt;&quot;Low price!&quot;&lt;/span&gt;\n    &quot;$16.95&quot;\n  &lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n<p>If I was using Nokogiri this wouldn't be too difficult.</p>\n<pre><code>price = doc.css('sale')\nprice.search('.sale-text').remove\nprice.text\n</code></pre>\n<p>However Capybara navigates rather than removes nodes. I knew something like <code>price.text</code> would grab text from all sub elements, so I tried to use xpath to be more specific. <code>p.find(:xpath, &quot;//span[@class='sale']&quot;, :match =&gt; :first).text</code>. However this grabs text from the inner element as well.</p>\n<p>Finally, I tried looping through all spans to see if I could separate the results but I get an Ambiguous error.</p>\n<pre><code>p.find(:css, 'span').each { |result| puts result.text }\nCapybara::Ambiguous: Ambiguous match, found 2 elements matching css &quot;span&quot;\n</code></pre>\n<p>I am using Capybara/Selenium as this is for a web scraping project with authentication complications.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sidekiq", "rails-activejob"], "comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1468971857, "post_id": 38469082, "comment_id": 64344280, "body": "Put the perform_async at the bottom of your sidekiq.rb initializer."}, {"owner": {"reputation": 13120, "user_id": 1119545, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4286adf321deb46fa5663232c6db3033?s=128&d=identicon&r=PG", "display_name": "Marcel N.", "link": "https://stackoverflow.com/users/1119545/marcel-n"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1468994759, "post_id": 38469082, "comment_id": 64349803, "body": "@Mike: OK, so that&#39;s where you usually put the jobs initialization code. Will try it soon, thanks!"}], "owner": {"reputation": 13120, "user_id": 1119545, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4286adf321deb46fa5663232c6db3033?s=128&d=identicon&r=PG", "display_name": "Marcel N.", "link": "https://stackoverflow.com/users/1119545/marcel-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468969368, "creation_date": 1468964911, "last_edit_date": 1468969368, "question_id": 38469082, "link": "https://stackoverflow.com/questions/38469082/activejob-cannot-schedule-jobs-in-the-future-although-sidekiq-is-set-as-queue-a", "title": "ActiveJob cannot schedule jobs in the future, although Sidekiq is set as queue adapter", "body": "<p>I have an <code>ActiveJob</code> job which I would like to run sometime in the future. I'm using <a href=\"https://github.com/mattbrictson/rails-template\" rel=\"nofollow\">this template</a> with Sidekiq integrated. Sidekiq web UI is up and running, Redis is setup, etc. The app starts up fine. </p>\n\n<p>I'm trying to schedule inside <code>application.rb</code>, so maybe this is where it's going wrong. The code is:</p>\n\n<pre><code>class Application &lt; Rails::Application\n  config.active_job.queue_adapter = :sidekiq\n  ...\n  SomeJob.new.enqueue(wait: 10.seconds)\nend\n</code></pre>\n\n<p>The error and stacktrace are:</p>\n\n<blockquote>\n  <p>Uncaught exception: Use a queueing backend to enqueue jobs in the\n  future. Read more at\n  <a href=\"http://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_job_basics.html</a>\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/queue_adapters/inline_adapter.rb:18:in\n  <code>enqueue_at'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/enqueuing.rb:69:in\n  </code>block in enqueue'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:117:in\n  <code>call'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:555:in\n  </code>block (2 levels) in compile'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:505:in\n  <code>call'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:498:in\n  </code>block (2 levels) in around'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:343:in\n  <code>block (2 levels) in simple'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/logging.rb:14:in\n  </code>block (3 levels) in '\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/logging.rb:43:in\n  <code>block in tag_logger'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:68:in\n  </code>block in tagged'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:26:in\n  <code>tagged'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:68:in\n  </code>tagged'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/logging.rb:43:in\n  <code>tag_logger'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/logging.rb:13:in\n  </code>block (2 levels) in '\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:441:in\n  <code>instance_exec'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:441:in\n  </code>block in make_lambda'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:342:in\n  <code>block in simple'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:497:in\n  </code>block in around'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:505:in\n  <code>call'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:92:in\n  </code><strong>run_callbacks</strong>'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:778:in\n  <code>_run_enqueue_callbacks'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:81:in\n  </code>run_callbacks'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/enqueuing.rb:67:in\n  <code>enqueue'\n    /home/user/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-4.2.6/lib/active_job/configured_job.rb:13:in\n  </code>perform_later'</p>\n</blockquote>\n\n<p>If anybody has any hints, that would be great. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468965112, "post_id": 38468682, "comment_id": 64342335, "body": "Welcome to Stack Overflow. I&#39;d recommend reading <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a>. We don&#39;t really care whether you&#39;re new to programming, we just want well-researched and well-asked questions."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1468965290, "post_id": 38468682, "comment_id": 64342398, "body": "You probably want <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\"><code>has_many :through</code></a>."}, {"owner": {"reputation": 1, "user_id": 5965740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d17c4b2e8e3637ccb97ba64af815b13?s=128&d=identicon&r=PG", "display_name": "Riggs", "link": "https://stackoverflow.com/users/5965740/riggs"}, "edited": false, "score": 0, "creation_date": 1468967195, "post_id": 38468682, "comment_id": 64343049, "body": "I thought of has_many :through, but at the end I can&#39;t picture it well, since Product will have Videocard one time, then in another situation it will be linked to Memory, then to Processor in another...  I also think that by inverting that association making Videocard has_one :product I&#39;d be messing with other associations that has_one :product via the polymorphic association (such as Builds and Stores)."}, {"owner": {"reputation": 1, "user_id": 5965740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d17c4b2e8e3637ccb97ba64af815b13?s=128&d=identicon&r=PG", "display_name": "Riggs", "link": "https://stackoverflow.com/users/5965740/riggs"}, "edited": false, "score": 0, "creation_date": 1468967699, "post_id": 38468682, "comment_id": 64343222, "body": "When I say I&#39;m new to programming it isn&#39;t to grovel or any thing like that, but actually to put things in a context where people will know there might be a lack of strictly technical questions and terms due to that situation (although I have researched about the related subject)."}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1468973380, "post_id": 38468682, "comment_id": 64344641, "body": "what you are saying about the model only having one other model makes no sense. There are more than one video cards, right? Just because there is only one video card model does not make it a has_one relationship."}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1468973474, "post_id": 38468682, "comment_id": 64344667, "body": "Search for has_many :through"}, {"owner": {"reputation": 1, "user_id": 5965740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d17c4b2e8e3637ccb97ba64af815b13?s=128&d=identicon&r=PG", "display_name": "Riggs", "link": "https://stackoverflow.com/users/5965740/riggs"}, "edited": false, "score": 0, "creation_date": 1468974156, "post_id": 38468682, "comment_id": 64344804, "body": "Well, I thought has_one association meant that one instance of a Model can only have one instance of a certain other Model. One product can only have one single list of specifications (since it relates to one single part number)"}], "owner": {"reputation": 1, "user_id": 5965740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d17c4b2e8e3637ccb97ba64af815b13?s=128&d=identicon&r=PG", "display_name": "Riggs", "link": "https://stackoverflow.com/users/5965740/riggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468967820, "creation_date": 1468962979, "last_edit_date": 1468967820, "question_id": 38468682, "link": "https://stackoverflow.com/questions/38468682/associating-two-models-in-a-way-both-models-attributes-are-always-pulled-togeth", "title": "Associating two models in a way both models&#39; attributes are always pulled together in any view", "body": "<p>I'm building a tech-specific pricegrabber-like web app, and I have a model that carries params that are common in all products. This model is called Product. Then I have one model for each type of product that I'm going to work with, for example, I'm now trying to build the first specific model, which is Videocard. So, the Product model always must have one Specific model, in this case Product-Videocard.</p>\n\n<p>At this moment I'm stuck finding a way to make a product and a specific model always come tied together whenever I reach to them, be it in an index view, show view, <code>form_for</code>, a search, etc. But I can't picture in my head  how a form will create an item and its specifications and insert a foreign key into another model with only one submit request.</p>\n\n<p>Below are both models and the migrations for each:</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  #belongs_to :productable, :polymorphic =&gt; true\n\n  has_one :videocard, dependent: :destroy\n\n  # Comment for this Stackoverflow question: the way I'm thinking I      \n  # should have to make tons of has_one associations, for the other\n  # products. Is there a DRY way to do this?\n\n\n  has_many :prices, through: :stores\n\n  validates :platform, presence: { message: \"should be specified.\" }\n  validates :name, presence: { message: \"should be specified.\" }\n\n  validates_associated :videocard\nend\n\nclass Videocard &lt; ApplicationRecord\n  belongs_to :product\nend\n</code></pre>\n\n<p>Migrations (shortened to make this question as clear as possible):</p>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :products do |t|\n\n      t.references :productable, polymorphic: true, index: true\n\n      t.string :name\n      t.string :image\n      t.string :partnum\n      t.string :manufacturer\n      t.string :platform #mobile, desktop, server, laptop\n\n      t.timestamps\n    end\n  end\nend\n\nclass CreateVideocards &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :videocards do |t|\n\n      t.references :product, index: true\n\n      t.integer :memory\n      t.string :interface\n\n      # [...lots of attributes...]\n\n      t.integer :displayport \n      t.integer :minidisplayport\n      t.integer :tdp\n\n      t.timestamps\n\n    end\n  end\nend\n</code></pre>\n\n<p>Also how can I make it so that Product only needs one <code>has_one</code> association, instead of using multiple ones. Remember that Videocard will have one type of specification, Memory will have other, and so on.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4875406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f352d064158cffd79c24b4f10712dec3?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel K", "link": "https://stackoverflow.com/users/4875406/daniel-k"}, "edited": false, "score": 0, "creation_date": 1468983434, "post_id": 38470723, "comment_id": 64346710, "body": "Well, your hideous looks concise and functional to me. To your point, if I do put in a separator and split by it, I get the same result. e.g., <code>...&lt;% user = pwd.split(&quot;:&quot;).first + &quot;&#47;&quot; %&gt;&lt;% users = user.split(&quot;&#47;&quot;).join(&quot;,&quot;) %&gt;...</code>. I trimmed it down because I saw that when I was omitting the join altogether (just splitting), I seemed to get correct output; <code>[&quot;root&quot;][&quot;bin&quot;][&quot;daemon&quot;]...</code> But, your solution works great, thank you!"}], "tags": [], "owner": {"reputation": 2341, "user_id": 6047960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a37bc0cc9fe7dd8dda91e4f4de592ae?s=128&d=identicon&r=PG&f=1", "display_name": "Karen B", "link": "https://stackoverflow.com/users/6047960/karen-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1468976305, "creation_date": 1468976305, "answer_id": 38470723, "question_id": 38468572, "link": "https://stackoverflow.com/questions/38468572/chef-join-method-separator-not-recognized-in-erb-template-file/38470723#38470723", "title": "Chef - join method separator not recognized in erb template file", "body": "<pre><code>&lt;%= IO.readlines('/etc/passwd').reject {|l| l.start_with?('#')}.map {|l| l.split(':')[0]}.join(',') %&gt;\n</code></pre>\n\n<p>which is hideously ugly, but works.</p>\n\n<p>This line <code>users = user.split.join(\",\")</code> is trying to split <code>user</code>, which is a string that only has the username of the current iteration.  And because you're writing the content of <code>users</code> (which is just <code>user</code> from that iteration) in each iteration, it just appended without a space. (<code>join</code>ing a single string means the character never gets introduced.)</p>\n\n<p>For code like this, especially since it does not require either Chef's environment nor an ERB, it's easier to see what it's doing by putting it in its own script file or running with <code>irb</code> and then adding <code>puts</code> lines to debug.</p>\n"}], "owner": {"reputation": 115, "user_id": 4875406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f352d064158cffd79c24b4f10712dec3?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel K", "link": "https://stackoverflow.com/users/4875406/daniel-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 38470723, "answer_count": 1, "score": 0, "last_activity_date": 1468976305, "creation_date": 1468962550, "question_id": 38468572, "link": "https://stackoverflow.com/questions/38468572/chef-join-method-separator-not-recognized-in-erb-template-file", "title": "Chef - join method separator not recognized in erb template file", "body": "<p>New to Ruby, I'm trying to list system users (on one row, comma separated) in an erb file, with the following code:</p>\n\n<pre><code>&lt;% IO.readlines(\"/etc/passwd\").each do |pwd| %&gt;&lt;% user = pwd.split(\":\").first %&gt;&lt;% users = user.split.join(\",\") %&gt;&lt;%= users %&gt;&lt;% end %&gt;\n</code></pre>\n\n<p>but it's not joining with comma, just pasting the strings from the array consecutively with no spaces. same result if I leave the (\",\") off the join.</p>\n\n<p>Any idea what's going wrong, or a better way to do this?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468963973, "post_id": 38468560, "comment_id": 64341854, "body": "<a href=\"https://relishapp.com/rspec/rspec-mocks/docs/verifying-doubles/using-an-object-double\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-mocks/docs/verifying-doubles/&hellip;</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468966100, "post_id": 38468560, "comment_id": 64342720, "body": "Why are you trying to double a bunch of Hashes? Perhaps something deep inside <code>double</code> is assuming that you&#39;ll only use Hashes with string and symbol keys."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468968200, "post_id": 38468560, "comment_id": 64343370, "body": "your right thank you, i fixed it now"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "is_accepted": false, "score": 0, "last_activity_date": 1468968251, "creation_date": 1468968251, "answer_id": 38469685, "question_id": 38468560, "link": "https://stackoverflow.com/questions/38468560/undefined-method-to-sym-for-1fixnum-or-rspec-test/38469685#38469685", "title": "undefined method `to_sym&#39; for 1:Fixnum or rspec test", "body": "<p>fixed with the following:</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Promotion_Check do\n\n  let(:check) { Promotion_Check.new rules_list }\n  let(:item_rule) { {rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50} }\n  let(:total_rule)  { {rule_type: \"total\", total_price_break: 60.00, discount_percentage: 10} }\n  let(:rules_list) { [ 1 =&gt; item_rule, 2 =&gt; total_rule ] }\n\n  describe \"#initialize\" do\n    it \"starts with a list of the rules\" do\n      expect(check.rules_list).to eq( [ 1 =&gt; item_rule, 2 =&gt; total_rule ] )\n    end\n  end\n</code></pre>\n\n<p>Thanks</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468968251, "creation_date": 1468962496, "question_id": 38468560, "link": "https://stackoverflow.com/questions/38468560/undefined-method-to-sym-for-1fixnum-or-rspec-test", "title": "undefined method `to_sym&#39; for 1:Fixnum or rspec test", "body": "<p>I am getting the following error for an rspec test but figure out how to fix it:</p>\n\n<pre><code>1) Promotion_Check#initialize starts with a list of the rules\n   Failure/Error: rules_list = double( { 1 =&gt; item_rule, 2 =&gt; total_rule } )\n\n   NoMethodError:\n     undefined method `to_sym' for 1:Fixnum\n   # ./spec/Promotion_Check_spec.rb:10:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Here is the test:</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Promotion_Check do\n\n\n  describe \"#initialize\" do\n    it \"starts with a list of the rules\" do\n      item_rule = double({rule_type: \"item\", item_code: 1, number_of_items: 2, new_item_price: 8.50})\n      total_rule = double( {rule_type: \"total\", total_price_break: 60.00, discount_percentage: 10} )\n      rules_list = double( { 1 =&gt; item_rule, 2 =&gt; total_rule } )\n      let(:check) { Promotion_Check.new rules_list }\n      expect(check.rules_list).to eq( { 1 =&gt; item_rule, 2 =&gt; total_rule } )\n    end\n  end\nend\n</code></pre>\n\n<p>And what i will be testing:</p>\n\n<pre><code>class Promotion_Check\n\n  attr_reader :rules_list\n\n  def initialize rules_list = {}\n    @rules_list = rules_list\n  end\nend\n</code></pre>\n\n<p>Any help would be great thanks.</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1468962299, "post_id": 38468492, "comment_id": 64341054, "body": "You are comparing a number with a character.  Change <code>gets.chomp</code> to <code>gets.chomp.to_i</code> (or just <code>gets.to_i</code>) or <code>number = rand(10).to_s</code> would do it."}], "answers": [{"comments": [{"owner": {"reputation": 1522, "user_id": 2063786, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yeza2.jpg?s=128&g=1", "display_name": "Kevinvhengst", "link": "https://stackoverflow.com/users/2063786/kevinvhengst"}, "edited": false, "score": 0, "creation_date": 1468962426, "post_id": 38468514, "comment_id": 64341121, "body": "I knew it was something very obvious. Strings don&#39;t compare to ints even if the string only consist out if nummeric values. Didn&#39;t think of that. Thx!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1522, "user_id": 2063786, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yeza2.jpg?s=128&g=1", "display_name": "Kevinvhengst", "link": "https://stackoverflow.com/users/2063786/kevinvhengst"}, "edited": false, "score": 0, "creation_date": 1468962462, "post_id": 38468514, "comment_id": 64341141, "body": "No problem. It&#39;s custom to accept the answer if it solved your problem."}, {"owner": {"reputation": 1522, "user_id": 2063786, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yeza2.jpg?s=128&g=1", "display_name": "Kevinvhengst", "link": "https://stackoverflow.com/users/2063786/kevinvhengst"}, "edited": false, "score": 0, "creation_date": 1468962573, "post_id": 38468514, "comment_id": 64341191, "body": "I know. I will be able to do so in exactly 9 minutes :P"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1468962293, "creation_date": 1468962293, "answer_id": 38468514, "question_id": 38468492, "link": "https://stackoverflow.com/questions/38468492/ruby-until-always-validates-as-false/38468514#38468514", "title": "Ruby until always validates as false?", "body": "<p>The reason is simple, and that is you're failing to cast the user input into an integer.</p>\n\n<p>i.e. if I write</p>\n\n<pre><code>number = gets.chomp\n</code></pre>\n\n<p>and I type <code>1</code> for the number, then the <code>number</code> variable will equal the <em>string</em> <code>\"1\"</code>, not the <em>integer</em> <code>1</code>.</p>\n\n<p>To fix this, just use <code>guess = gets.chomp.to_i</code></p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6483534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e412bcc5112603d95c87d380a48f43c?s=128&d=identicon&r=PG&f=1", "display_name": "PS.", "link": "https://stackoverflow.com/users/6483534/ps"}, "is_accepted": false, "score": 1, "last_activity_date": 1468962896, "creation_date": 1468962896, "answer_id": 38468662, "question_id": 38468492, "link": "https://stackoverflow.com/questions/38468492/ruby-until-always-validates-as-false/38468662#38468662", "title": "Ruby until always validates as false?", "body": "<p>Instead of <code>guess = gets.chomp</code>(which will return a string of the user input), use <code>guess = gets.to_i</code> (which will convert user input into integer)\n<code>to_i</code> method will convert the element into integer and will drop <code>/n</code> character since it's not part of the integer. Don't need to add <code>.chomp</code> method. </p>\n"}], "owner": {"reputation": 1522, "user_id": 2063786, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yeza2.jpg?s=128&g=1", "display_name": "Kevinvhengst", "link": "https://stackoverflow.com/users/2063786/kevinvhengst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 38468514, "answer_count": 2, "score": 0, "last_activity_date": 1468964904, "creation_date": 1468962203, "question_id": 38468492, "link": "https://stackoverflow.com/questions/38468492/ruby-until-always-validates-as-false", "title": "Ruby until always validates as false?", "body": "<p>So I've written this piece of code to play around with numbers and the until loop:</p>\n\n<pre><code>number = rand(10)\nputs number\n\nputs \"Guess the number\"\nguess = gets.chomp\n\n\nuntil guess == number\n  puts \"Guess again!\"\n  guess = gets.chomp\nend\n\nputs \"You've guessed it right! The number is #{guess}\n</code></pre>\n\n<p>But for some reason it it always stuck in the until loop and I am not sure why. I puts the random number to know that i guess right and try out the code. I'm completely new to Ruby, So I guess it's a very obvious thing I am missing, but I just dont see it.</p>\n\n<p>From my point of view, whenever I prompt for the guess again, that guess that validated by the until loop with <code>until guess == number</code>.</p>\n\n<p>Who can help me clear this up?</p>\n"}, {"tags": ["arrays", "ruby", "comparison"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1468973307, "last_edit_date": 1468973307, "creation_date": 1468962352, "answer_id": 38468523, "question_id": 38468332, "link": "https://stackoverflow.com/questions/38468332/ruby-match-elements-from-the-first-with-second-array/38468523#38468523", "title": "Ruby match elements from the first with second array", "body": "<p>Here is how I would do this:</p>\n\n<pre><code>a1 = [\"ASLK 50\", \"BSKD 150\", \"ZZZZ 100\", \"BSDF 50\"]\na2 = [\"B\", \"Z\"]\na3 = a1.each_with_object(Hash.new(0)) do |a,obj|\n  obj[a[0]] += a.split.last.to_i if a2.include?(a[0]) \nend.map {|a| a.join(\" = \")}\n#=&gt;[\"B = 200\", \"Z = 100\"]\n</code></pre>\n\n<p>First step adds them all into a <code>Hash</code> by summing the values by each first letter that is contained in the second Array.</p>\n\n<p>Second step provides the desired output</p>\n\n<p>If you want a Hash instead just take off the last call to map and you'll have. </p>\n\n<pre><code>{\"B\" =&gt; 200, \"Z\" =&gt; 100}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1468962815, "creation_date": 1468962815, "answer_id": 38468634, "question_id": 38468332, "link": "https://stackoverflow.com/questions/38468332/ruby-match-elements-from-the-first-with-second-array/38468634#38468634", "title": "Ruby match elements from the first with second array", "body": "<p>Running with your requirements, that you want to turn this:</p>\n\n<pre><code>a1 = [\"ASLK 50\", \"BSKD 150\", \"ZZZZ 100\", \"BSDF 50\"]\na2 = [\"B\", \"Z\"]\n</code></pre>\n\n<p>into this: <code>a3 = [\"B = 200\", \"Z = 100\"]</code></p>\n\n<pre><code>a3 = a2.map do |char|\n  sum = a1.reduce(0) do |sum, item|\n    name, price = item.split(\" \")\n    sum += price.to_i if name[0].eql?(char)\n    sum\n  end\n  \"#{char} = #{sum}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "edited": false, "score": 0, "creation_date": 1468967122, "post_id": 38468639, "comment_id": 64343024, "body": "I didn&#39;t think of using hash. This is a great idea!! If I didn&#39;t ask to return for an array specifically, I would have gone with this. I will keep this in mind!"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1468962845, "creation_date": 1468962845, "answer_id": 38468639, "question_id": 38468332, "link": "https://stackoverflow.com/questions/38468332/ruby-match-elements-from-the-first-with-second-array/38468639#38468639", "title": "Ruby match elements from the first with second array", "body": "<p>Rather than defining an <code>Array</code> like <code>[\"B = 200\", \"Z = 100\"]</code>, it would be more sensible to define this as a <em>mapping</em> - i.e. the following <code>Hash</code> object:</p>\n\n<pre><code>{\"B\" =&gt; 200, \"Z\" =&gt; 100}\n</code></pre>\n\n<p>As for the implementation, there are many ways to do it. Here is just one approach:</p>\n\n<pre><code>a1 = [\"ASLK 50\", \"BSKD 150\", \"ZZZZ 100\", \"BSDF 50\"]\na2 = [\"B\", \"Z\"]\nresult = a2.map do |letter|\n  [\n    letter,\n    a1.select {|str| str[0] == letter}\n      .inject(0) {|sum, str| sum += str[/\\d+/].to_i}\n  ]\nend.to_h\n\nputs result # =&gt; {\"B\"=&gt;200, \"Z\"=&gt;100}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>At the top level, I've used <a href=\"http://ruby-doc.org/core/Array.html#method-i-to_h\" rel=\"nofollow\"><code>Array#to_h</code></a> to convert the array of pairs: <code>[[\"B\", 200], [\"Z\", 100]]</code> into a <code>Hash</code>: <code>{\"B\" =&gt; 200, \"Z\" =&gt; 100}</code>.</li>\n<li><code>a1.select {|str| str[0] == letter}</code> selects only the elements from <code>a1</code> whose first letter is that of the hash key.</li>\n<li><code>inject(0) {|sum, str| sum += str[/\\d+/].to_i}</code> adds up all the numbers, with safe-guards to default to zero (rather than having <code>nil</code> thrown around unexpectedly).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469021544, "post_id": 38472698, "comment_id": 64367654, "body": "I like the regex implementation nice work Cary but <code>.map { |k,v| &quot;#{k} = #{v}&quot; % [k,v] }</code> seems like it should be <code>.map { |k,v| &quot;%s = %d&quot; % [k,v] }</code> if we are using format or <code>.map { |k,v| &quot;#{k} = #{v}&quot;}</code> to just use interpolation because right now you are interpolating and then formatting nothing. The only way this would work is something like <code>k2 = %s; v2 = %d; &quot;#{k2} = #{v2}&quot; % [k,v]</code> because the interpolation will occur prior to formatting."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1469029474, "post_id": 38472698, "comment_id": 64372127, "body": "@engineersmnky, thanks for pointing that out. I changed the formatting from <code>%</code> to <code>#{...}</code> midstream and neglected to remove  <code>% [k,v]</code>. Fixed it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1469025151, "last_edit_date": 1469025151, "creation_date": 1468991115, "answer_id": 38472698, "question_id": 38468332, "link": "https://stackoverflow.com/questions/38468332/ruby-match-elements-from-the-first-with-second-array/38472698#38472698", "title": "Ruby match elements from the first with second array", "body": "<p>This is quite similar to @engineersmnky's answer.</p>\n\n<pre><code>r = /\n    \\A[A-Z] # match an upper case letter at the beginning of the string\n    |       # or\n    \\d+     # match one or more digits\n    /x      # free-spacing regex definition mode\n\na1.each_with_object(Hash.new(0)) do |s,h|\n  start_letter, value = s.scan(r)\n  h[start_letter] += value.to_i if a2.include?(start_letter)\nend.map { |k,v| \"#{k} = #{v}\" }\n  #=&gt; [\"B = 200\", \"Z = 100\"] \n</code></pre>\n\n<p><code>Hash.new(0)</code> is often referred to as a \"counting hash\". See the doc for the class method <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-c-new\" rel=\"nofollow\">Hash::new</a> for an explanation.</p>\n\n<p>The regex matches the first letter of the string or one or more digits. For example,</p>\n\n<pre><code>\"ASLK 50\".scan(r)\n  #=&gt; [\"A\", \"50\"]\n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 38468634, "answer_count": 4, "score": 0, "last_activity_date": 1469025151, "creation_date": 1468961591, "question_id": 38468332, "link": "https://stackoverflow.com/questions/38468332/ruby-match-elements-from-the-first-with-second-array", "title": "Ruby match elements from the first with second array", "body": "<p>I have two arrays. The first one will be an array of string with a name and the amount. The second is an array of letters.</p>\n\n<pre><code>a1 = [\"ASLK 50\", \"BSKD 150\", \"ZZZZ 100\", \"BSDF 50\"]\na2 = [\"B\", \"Z\"]\n</code></pre>\n\n<p>I want to create a third array to sort the contents from a1 based off a2 and return the number based on the information from first array. Since a2 has \"B\" and \"Z\", I need to scan first array for all entry starting with letter B and Z and add up the numbers.</p>\n\n<p>My ultimate goal is to return the sum on third array, something like this:</p>\n\n<pre><code>a3 = [\"B = 200\", \"Z = 100\"]\n</code></pre>\n\n<p>Since \"A\" was not on a2, it is not counted. </p>\n\n<p>I was able to extract the information from a1:</p>\n\n<pre><code>arr = a1.map{|el| el[0] + \" : \" + el.gsub(/\\D/, '\\1')}\n#=&gt; [\"A : 50\", \"B : 150\", \"Z : 100\", \"B : 50\"]\n</code></pre>\n\n<p>I am having trouble comparing a1with a2. I have tried different methods, such as:</p>\n\n<pre><code>a1.find_all{|i| i[0] == a2[0]} #=&gt; only returns the first element of a2. How can I iterate through a2?\n</code></pre>\n\n<p>alternatively,</p>\n\n<pre><code>i = 0\narr_result = []\nwhile i &lt; (arr.length + 1)\n    #(append to arr_result the number from  a1 if a1[i][0] matches a2[i])\n</code></pre>\n\n<p>I think either would solve it, but I can't put neither idea down to working code. How can I implement either method? Is there a more efficient way to do it?</p>\n"}, {"tags": ["ruby", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 916371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ce2a9bfa133e5b21f23cc1e7560f4bca?s=128&d=identicon&r=PG", "display_name": "Karl Tryggvason", "link": "https://stackoverflow.com/users/916371/karl-tryggvason"}, "edited": false, "score": 1, "creation_date": 1469091261, "post_id": 38491039, "comment_id": 64398665, "body": "I&#39;ve updated question with more details. But it is just these two tags that Jekyll is changing in the output file. Rest of the file/feed is valid.  In general Jekyll tries to &quot;fix&quot; the casing of the tags, but <code>pubDate</code> is the only camelCased tag there which explains why it gets changed into <code>pubdate</code>. Wondering if there is a flag or config issue I could pass to prevent this, have not found it in the documentation  As for the <code>link</code> tag, I&#39;m not sure why that is happening."}], "tags": [], "owner": {"reputation": 667, "user_id": 528096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/y6fUP.png?s=128&g=1", "display_name": "Vallieres", "link": "https://stackoverflow.com/users/528096/vallieres"}, "is_accepted": false, "score": 0, "last_activity_date": 1469049608, "creation_date": 1469049608, "answer_id": 38491039, "question_id": 38468277, "link": "https://stackoverflow.com/questions/38468277/jekyll-for-podcast-xml-processing-changes-tag-cases-and-content/38491039#38491039", "title": "Jekyll for podcast/xml - processing changes tag cases and content", "body": "<p>You must have broken XML somewhere else. Please post the complete file or else it would be hard to be very specific.</p>\n\n<p>Here's what I have in mine:</p>\n\n<p>Podcast:</p>\n\n<pre><code>&lt;pubDate&gt;{{ site.time | date: \"%a, %d %b %Y %H:%M:%S GMT\" }}&lt;/pubDate&gt;\n&lt;link&gt;{{ site.url }}&lt;/link&gt;\n</code></pre>\n\n<p>Podcast Episode:</p>\n\n<pre><code>&lt;link&gt;{{ site.url }}{{ post.url }}&lt;/link&gt;\n&lt;pubDate&gt;{{ post.date | date: \"%a, %d %b %Y %H:%M:%S EST\" }}&lt;/pubDate&gt;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 916371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ce2a9bfa133e5b21f23cc1e7560f4bca?s=128&d=identicon&r=PG", "display_name": "Karl Tryggvason", "link": "https://stackoverflow.com/users/916371/karl-tryggvason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469091048, "creation_date": 1468961428, "last_edit_date": 1469091048, "question_id": 38468277, "link": "https://stackoverflow.com/questions/38468277/jekyll-for-podcast-xml-processing-changes-tag-cases-and-content", "title": "Jekyll for podcast/xml - processing changes tag cases and content", "body": "<p>I'm trying to use Jekyll to create a valid podcast feed using certain blog posts of mine. However I'm having trouble with Jekyll changing the casing and formatting of some xml tags</p>\n\n<p>This is the template I have for each individual <code>item</code> of the feed: </p>\n\n<pre><code>    {% for post in site.posts %}\n    {% if post.layout == \"podcast\" %}\n    &lt;item&gt;\n        &lt;title&gt;{{post.title}}&lt;/title&gt;\n        &lt;description&gt;\n            {{post.title}}\n\n            {{ post.overview | xml_escape}}\n        &lt;/description&gt;\n        &lt;content:encoded&gt;\n            {{post.title}}&lt;br /&gt;\n            {{ post.overview | xml_escape}}&lt;br /&gt;\n            {{ post.content }}\n        &lt;/content:encoded&gt;\n        &lt;guid&gt;{{ site.url }}{{ post.url }}&lt;/guid&gt;\n        &lt;link&gt;{{ site.url }}{{ post.url }}&lt;/link&gt;\n        &lt;pubDate&gt;{{ post.date | date: \"%a, %d %b %Y %H:%M:%S GMT\" }}&lt;/pubDate&gt;\n        &lt;itunes:image href=\"{{ site.url }}{{ post.thumb }}\" /&gt;\n        &lt;enclosure url=\"{{ post.mp3link }}\" length=\"{{ post.length }}\" type=\"audio/mpeg\" /&gt;\n    &lt;/item&gt;\n    {% endif %}\n    {% endfor %}\n</code></pre>\n\n<p>The relevant parts are these two tags:</p>\n\n<pre><code>&lt;link&gt;{{ post.url }}&lt;/link&gt;\n&lt;pubDate&gt;{{ post.date | date: \"%a, %d %b %Y %H:%M:%S GMT\" }}&lt;/pubDate&gt;\n</code></pre>\n\n<p>In the output however they come out like so: </p>\n\n<pre><code>&lt;link /&gt;http://www.example.com/\n&lt;pubdate&gt;Fri, 30 Oct 2015 00:00:00 GMT&lt;/pubdate&gt;\n</code></pre>\n\n<p>Link seems to be formatted as if it were a <code>link</code> tag in the <code>head</code> section of html and <code>pubDate</code> is no longer camel cased and thus invalid according to the rss standard: <a href=\"https://validator.w3.org/feed/docs/rss2.html#hrelementsOfLtitemgt\" rel=\"nofollow\">https://validator.w3.org/feed/docs/rss2.html#hrelementsOfLtitemgt</a></p>\n\n<p>Is there some sort of flag I need to pass or some functionality I'm missing?</p>\n\n<p>Other tags are being processed just fine (image, enclosure, guid etc). </p>\n\n<p>I'm using: </p>\n\n<ul>\n<li>jekyll 2.5.3</li>\n<li>ruby 1.9.3p484</li>\n<li>Linux Mint 17</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "docx"], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": -1, "last_activity_date": 1468963660, "creation_date": 1468963660, "answer_id": 38468826, "question_id": 38468228, "link": "https://stackoverflow.com/questions/38468228/extract-images-in-a-docx-file-in-ruby/38468826#38468826", "title": "Extract images in a .docx file in Ruby", "body": "<p>Using Jasper report, you can generate in a variety of document formats including HTML, PDF, Excel, OpenOffice and Word(DOCX).</p>\n\n<p>In my opinion, you don't need gem, It's simple to Integrate jasper report to your project. following : <a href=\"https://www.sitepoint.com/create-great-reports-jasperreports/\" rel=\"nofollow\">https://www.sitepoint.com/create-great-reports-jasperreports/</a>\nThis example is for rails, but it works well for a ruby project too.</p>\n\n<p>Notice: You need a Java Virtual Machine installed in server side.</p>\n"}, {"comments": [{"owner": {"reputation": 1321, "user_id": 1025695, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8980c65a94bb9a9a5526d464791b7644?s=128&d=identicon&r=PG", "display_name": "Huliax", "link": "https://stackoverflow.com/users/1025695/huliax"}, "edited": false, "score": 0, "creation_date": 1585940439, "post_id": 38504597, "comment_id": 107951965, "body": "Some of the images can be in <code>word&#47;media&#47;embeddings</code> also.  This is at least true for embedded Visio files."}], "tags": [], "owner": {"reputation": 16252, "user_id": 1993501, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8aff1b9e8079997cca12f8f08cacbb62?s=128&d=identicon&r=PG", "display_name": "edi9999", "link": "https://stackoverflow.com/users/1993501/edi9999"}, "is_accepted": false, "score": 1, "last_activity_date": 1469104976, "creation_date": 1469104976, "answer_id": 38504597, "question_id": 38468228, "link": "https://stackoverflow.com/questions/38468228/extract-images-in-a-docx-file-in-ruby/38504597#38504597", "title": "Extract images in a .docx file in Ruby", "body": "<p>It is quite easy without any library (or at least not a gem specific for this purpose)</p>\n\n<p>You should : </p>\n\n<ul>\n<li>unzip the document (preferably in memory)</li>\n<li>You can then extract the content of : <code>word/media/*</code></li>\n</ul>\n\n<p>where * would be all files.</p>\n\n<p>For example, you will have : </p>\n\n<pre><code>word/media/image1.png\nword/media/image2.png\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469104976, "creation_date": 1468961279, "question_id": 38468228, "link": "https://stackoverflow.com/questions/38468228/extract-images-in-a-docx-file-in-ruby", "title": "Extract images in a .docx file in Ruby", "body": "<p>How to extract images in a docx file line by line in Ruby?</p>\n\n<p>Couldn't find any gem that does this.</p>\n"}, {"tags": ["ruby", "gnuplot"], "comments": [{"owner": {"reputation": 1867, "user_id": 4483861, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2dtp8.jpg?s=128&g=1", "display_name": "Jonatan &#214;str&#246;m", "link": "https://stackoverflow.com/users/4483861/jonatan-%c3%96str%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1469136699, "post_id": 38468173, "comment_id": 64426405, "body": "You should give this the gnuplot tag so that people knowing gnuplot will see it."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 2604213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ThK.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/2604213/christoph"}, "is_accepted": true, "score": 2, "last_activity_date": 1469360408, "creation_date": 1469360408, "answer_id": 38551612, "question_id": 38468173, "link": "https://stackoverflow.com/questions/38468173/cannot-format-chart-title-in-gnuplotrb-ruby/38551612#38551612", "title": "Cannot format chart title in gnuplotrb (ruby)", "body": "<ol>\n<li><p>The title's font is set with <code>title_font</code>, but you must include additional quotes around the value:</p>\n\n<pre><code>title_font: '\",20\"'\n</code></pre>\n\n<p>The values of some options (like <code>title</code>, <code>xlabel</code> etc are automatically wrapped with a pair of double quotes by <code>gnuplotrb</code>).</p>\n\n<p>To set the title color, use e.g.</p>\n\n<pre><code>title_tc_rgb: '\"red\"'\n</code></pre></li>\n<li><p>Escape the backslash of the newline to get a line break in the output</p>\n\n<pre><code>title: \"First line\\\\nSecond line\"\n</code></pre></li>\n<li><p>Labels can be set like other options</p>\n\n<pre><code>label: \"at graph 0.1, graph 0.8 'My Label'\"\n</code></pre></li>\n<li><p>I haven't found an option to redirect the commands to a file.</p></li>\n</ol>\n\n<p>So, a working example based on your script is</p>\n\n<pre><code>require 'gnuplotrb'\ninclude GnuplotRB\n\ntitles = %w{decade Build Test Deploy Overall}\ndata = [\n  [1,  312, 525,  215, 1052],\n  [2,  630, 1050, 441, 2121],\n  [3,  315, 701,  370, 1386],\n  [4,  312, 514,  220, 1046]\n]\nx = data.map(&amp;:first)\ndatasets = (1..4).map do |col|\n  y = data.map { |row| row[col] }\n  Dataset.new([x, y], using: '2:xtic(1)', title: titles[col], file: true)\nend\n\nplot = Plot.new(\n  *datasets,\n  style_data: 'histograms',\n  style_fill: 'pattern border',\n  yrange: 0..2200,\n  xlabel: 'Number of test',\n  ylabel: 'Time, s',\n  label: 'at graph 0.1, graph 0.8 \"MyLabel\"',\n  title: \"Time spent\\\\nto run deploy pipeline\",\n  title_font: '\",20\"',\n  title_tc_rgb: '\"red\"'\n)\n\nplot.to_png(\"test.png\")\n</code></pre>\n\n<p>with the output file</p>\n\n<p><a href=\"https://i.stack.imgur.com/kWDwL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kWDwL.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 172, "user_id": 3254976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/22debaef821af7abb0af2c5d5c4d7341?s=128&d=identicon&r=PG&f=1", "display_name": "bambino350", "link": "https://stackoverflow.com/users/3254976/bambino350"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 38551612, "answer_count": 1, "score": 1, "last_activity_date": 1469360408, "creation_date": 1468961050, "last_edit_date": 1469295057, "question_id": 38468173, "link": "https://stackoverflow.com/questions/38468173/cannot-format-chart-title-in-gnuplotrb-ruby", "title": "Cannot format chart title in gnuplotrb (ruby)", "body": "<p>I'm using gnuplotrb (0.3.4) and want to set the font and color of the title independently from the rest of the plot. So far without success.</p>\n\n<p>The example below is a slightly modified version of the <a href=\"https://github.com/dilcom/gnuplotrb/blob/master/examples/use_multi_word_option_keys/plot.rb\" rel=\"nofollow\">sample code</a>.\n(I added a \\n to the title and added the title_font option).</p>\n\n<p>Here are my questions with regards to gnuplotrb:</p>\n\n<ol>\n<li>How do I set title's font, color, etc.?</li>\n<li>Can I use multi-line titles (I added '\\n' to the title, but this just truncates the string)?</li>\n<li>How do I set labels in my plot with gnuplotrb?</li>\n<li>Is there a way to inspect the generated gnuplot script (not the resulting plot, but the actual gnuplot script that is piped to gnuplot)?</li>\n</ol>\n\n<p>`</p>\n\n<pre><code>require 'gnuplotrb'\ninclude GnuplotRB\n\ntitles = %w{decade Build Test Deploy Overall}\ndata = [\n  [1,  312, 525,  215, 1052],\n  [2,  630, 1050, 441, 2121],\n  [3,  315, 701,  370, 1386],\n  [4,  312, 514,  220, 1046]\n]\nx = data.map(&amp;:first)\ndatasets = (1..4).map do |col|\n  y = data.map { |row| row[col] }\n  Dataset.new([x, y], using: '2:xtic(1)', title: titles[col], file: true)\nend\n\nplot = Plot.new(\n  *datasets,\n  style_data: 'histograms',\n  style_fill: 'pattern border',\n  yrange: 0..2200,\n  xlabel: 'Number of test',\n  ylabel: 'Time, s',\n  title: \"Time spent\\nto run deploy pipeline\",\n  title_font: 'System,20'\n)\n\nplot.to_png(\"test.png\")\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "enumerable"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 1, "creation_date": 1468959980, "post_id": 38467713, "comment_id": 64339793, "body": "Is <code>first_names</code> supposed to be <code>names</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1468961860, "post_id": 38467835, "comment_id": 64340813, "body": "Let me get this straight, the return value for each iteration is <code>new_empty_array </code> and because the last iteration of the <code>.map</code> returns an array with 3 elements, what gets returned from the map is <code>new_empty_array</code> in it&#39;s last state 3 times"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 1, "creation_date": 1469001507, "post_id": 38467835, "comment_id": 64353824, "body": "@AndrewKim  <code>new_empty_array</code> is reference to an array, and you return reference to it in map and hence, end up with 3 references to it as array - all 3 references point to same physical array which at the end of iteration has 3 elements"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 5, "last_activity_date": 1468966262, "last_edit_date": 1468966262, "creation_date": 1468959815, "answer_id": 38467835, "question_id": 38467713, "link": "https://stackoverflow.com/questions/38467713/why-does-map-enumerable-return-value-not-return-expected-value/38467835#38467835", "title": "Why does map enumerable return value not return expected value", "body": "<p>The result of <code>map</code>, in your case, is an array which consists of references to same array <code>new_empty_array</code> multiple times.  You are not creating three different arrays, but modifying the same array in the <code>map</code> block.</p>\n\n<p>To get the output you are expecting, you need to do:</p>\n\n<pre><code>new_names_array = first_names.map do |name|\n  (new_empty_array &lt;&lt; name).dup\nend\n</code></pre>\n\n<hr>\n\n<p>As a side note, you could use this code, which is more obvious than the code above, for the output you desire:</p>\n\n<pre><code>(1..first_names.size).map do |num|\n  first_names.take(num)\nend\n#=&gt; [[\"Donald\"], [\"Donald\", \"Daisy\"], [\"Donald\", \"Daisy\", \"Daffy\"]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468967641, "post_id": 38468096, "comment_id": 64343201, "body": "@the Tin Man, thnx again for the edit, You must be investing a lot of time in correcting non english speaking people like me"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1469001591, "post_id": 38468096, "comment_id": 64353864, "body": "May be you meant <code>non english writing people</code> ;-)"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1468966355, "last_edit_date": 1468966355, "creation_date": 1468960776, "answer_id": 38468096, "question_id": 38467713, "link": "https://stackoverflow.com/questions/38467713/why-does-map-enumerable-return-value-not-return-expected-value/38468096#38468096", "title": "Why does map enumerable return value not return expected value", "body": "<pre><code>new_names_array = first_names.map do |name|\n  name\nend\n</code></pre>\n\n<p>would give <code>[\"Donald\", \"Daisy\", \"Daffy\"]</code>.</p>\n\n<p>Each element of <code>first_names</code> returns a value to the new array created by <code>map</code> but instead you return for each element a new array, <code>new_empty_array</code>.</p>\n\n<p>This object is <code>&lt;&lt;</code> three times and at the end has the three names, so 3 x 3 elements:</p>\n\n<pre><code>[new_empty_array, new_empty_array, new_empty_array] = [[\"Donald\", \"Daisy\", \"Daffy\"], [\"Donald\", \"Daisy\", \"Daffy\"], [\"Donald\", \"Daisy\", \"Daffy\"]]\n</code></pre>\n"}], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38467835, "answer_count": 2, "score": 3, "last_activity_date": 1468966355, "creation_date": 1468959353, "last_edit_date": 1468966139, "question_id": 38467713, "link": "https://stackoverflow.com/questions/38467713/why-does-map-enumerable-return-value-not-return-expected-value", "title": "Why does map enumerable return value not return expected value", "body": "<p>I'm pretty familiar with the Ruby Enumerable module, or at least so I thought. Take the following code snippet:</p>\n\n<pre><code>names = [ \"Donald\", \"Daisy\", \"Daffy\" ]\n\nnew_empty_array = []\n\nnew_names_array = names.map do |name|\n  new_empty_array &lt;&lt; name\nend\n\nputs new_names_array.inspect\n# prints [[\"Donald\", \"Daisy\", \"Daffy\"], [\"Donald\", \"Daisy\", \"Daffy\"], [\"Donald\", \"Daisy\", \"Daffy\"]]\n</code></pre>\n\n<p>I know I'm not using <code>map</code> correctly, but I was teaching a lesson on Ruby enumerables and came across this example when a student was testing <code>map</code> out. The return value of the shovel (<code>&lt;&lt;</code>) operator is the array after an element has been added. Shouldn't the result instead be:</p>\n\n<pre><code>[[\"Donald\"], [\"Donald\", \"Daisy\"], [\"Donald\", \"Daisy\", \"Daffy\"]]\n</code></pre>\n\n<p>It seems that the entire loop processes and the final return value of the shovel operator is processed? What gives?</p>\n"}, {"tags": ["ruby", "rspec", "appium", "rake-task", "rakefile"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1469019564, "post_id": 38467533, "comment_id": 64366055, "body": "I don&#39;t understand &quot;the args I passed is overwritten by the default&quot;. <code>start_driver</code> doesn&#39;t use <code>arg</code>. Are you trying to not run <code>start_driver</code> when it&#39;s called somewhere else when you run rspec, or are you trying to pass <code>arg</code> into something called by rspec?"}, {"owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1469021428, "post_id": 38467533, "comment_id": 64367547, "body": "i created this method to receive args: <code>def start_driver(options= {})     if options.empty?       capabilities = caps     else       capabilities = caps(options)     end     $appium = Appium::Driver.new(caps: capabilities)     $browser = $appium.start_driver     Appium.promote_appium_methods RSpec::Core::ExampleGroup   end</code>"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "is_accepted": true, "score": 0, "last_activity_date": 1469209632, "last_edit_date": 1469209632, "creation_date": 1469208440, "answer_id": 38532198, "question_id": 38467533, "link": "https://stackoverflow.com/questions/38467533/how-to-share-a-rake-variable-in-the-code-it-invokes/38532198#38532198", "title": "how to share a rake variable in the code it invokes?", "body": "<p>So, i found a way to do it. Its not beautiful though. I save a file with the args I want when run rake:</p>\n\n<pre><code>    desc 'uninstall app to run tests'\n      task :uninstall_and_run, [:arg] do |t, arg|\n        send_custom_caps(fullReset: true)\n        oi = arg.to_s.split('\"')[1]\n        file_dir = (project_home + '/spec/' + oi)\n        exec \"rspec #{file_dir}\"\n      end\n</code></pre>\n\n<p>and the <code>send_custom_caps</code> method is:</p>\n\n<pre><code>  def send_custom_caps(*opts)\n    file = File.new(custom_caps_file, \"w+\")\n    File.open(file, 'w') do |f|\n      f.write(opts)\n    end\n  end\n</code></pre>\n\n<p>now the ruby code itself (in this case, my spec config) will check if there is custom args before <code>start_driver</code>. Here is my custom <code>start_driver</code> method (which I renamed):</p>\n\n<pre><code>  def start_appium_driver (options= {})\n    if options.empty?\n      get_caps\n      if $custom_args\n        capabilities = caps($custom_args)\n      else\n        capabilities = caps\n      end\n    else\n      capabilities = caps(options)\n    end\n    $appium = Appium::Driver.new(caps: capabilities)\n    $browser = $appium.start_driver\n    Appium.promote_appium_methods RSpec::Core::ExampleGroup\n  end\n</code></pre>\n\n<p>and <code>get_caps</code></p>\n\n<pre><code>  def get_caps\n    if File.exist?(custom_caps_file) #$custom_args\n      file = File.read(custom_caps_file)\n      $custom_args = eval(file)\n      File.delete (custom_caps_file)\n    end\n    $custom_args unless $custom_args.defined?\n  end\n</code></pre>\n\n<p>probably this is not the best solution, but it is working ok for me :) </p>\n"}], "owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 38532198, "answer_count": 1, "score": 0, "last_activity_date": 1469209632, "creation_date": 1468958692, "last_edit_date": 1469023163, "question_id": 38467533, "link": "https://stackoverflow.com/questions/38467533/how-to-share-a-rake-variable-in-the-code-it-invokes", "title": "how to share a rake variable in the code it invokes?", "body": "<p>What I need is basically send a target argument and use it in my RSpec tests, e.g.:</p>\n\n<pre><code>$ rake unistall_and_run[test_spec.rb]\n</code></pre>\n\n<p>Rakefile:</p>\n\n<pre><code>desc 'uninstall app to run tests'\n  task :uninstall_and_run, [:arg] do |t, arg|\n    #note this, i will explain later\n    start_driver(fullReset: true)\n\n    oi = arg.to_s.split('\"')[1]\n    file_dir = (project_home + '/spec/' + oi)\n    exec \"rspec #{file_dir}\"\n  end\n</code></pre>\n\n<p><code>start_driver</code> is called on that line, but when I run the tests (<code>exec \"rspec ...\"</code>), it is called again and the args I passed is overwritten by the default (because its on RSpec config). </p>\n\n<p>What I'd like to do is, on my RSpec file check if it was already called and don't run again.</p>\n\n<p>Here is the start_driver method:</p>\n\n<p><code>def start_driver(options= {})\n    if options.empty?\n      capabilities = caps\n    else\n      capabilities = caps(options)\n    end\n    $appium = Appium::Driver.new(caps: capabilities)\n    $browser = $appium.start_driver\n    Appium.promote_appium_methods RSpec::Core::ExampleGroup\n  end</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 4768368, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2f70eb2f9e416551b5289f6708d1e41e?s=128&d=identicon&r=PG&f=1", "display_name": "Stuart Pontins", "link": "https://stackoverflow.com/users/4768368/stuart-pontins"}, "edited": false, "score": 0, "creation_date": 1468964139, "post_id": 38468137, "comment_id": 64341910, "body": "what do I pass in to get the registrations controller? I have tried <code>-c registrations</code>, <code>-c</code> but it keeps giving me <code>No value provided for option &#39;--controllers&#39;</code>"}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1468960933, "creation_date": 1468960933, "answer_id": 38468137, "question_id": 38467500, "link": "https://stackoverflow.com/questions/38467500/setting-up-automatic-password-with-devise/38468137#38468137", "title": "Setting up automatic password with Devise", "body": "<p>You can access the devise controllers after installing Devise by running the following on your command line: </p>\n\n<pre><code>rails generate devise:controllers\n</code></pre>\n\n<p>This will generate a 'Devise' folder in your controllers folder.  You can then modify the controllers as needed.  It sounds like you would like to modify the registration controller to add the auto-setting password.</p>\n\n<p>You can find more docs on their .git page here:  <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">https://github.com/plataformatec/devise</a></p>\n"}], "owner": {"reputation": 255, "user_id": 4768368, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2f70eb2f9e416551b5289f6708d1e41e?s=128&d=identicon&r=PG&f=1", "display_name": "Stuart Pontins", "link": "https://stackoverflow.com/users/4768368/stuart-pontins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468960933, "creation_date": 1468958557, "question_id": 38467500, "link": "https://stackoverflow.com/questions/38467500/setting-up-automatic-password-with-devise", "title": "Setting up automatic password with Devise", "body": "<p>I have setup Devise, I have set up the below code in my user.rb file</p>\n\n<pre><code>def self.create_auto_password\n    generated_password = Devise.friendly_token.first(8)\n    self.create(password: generated_password, password_confirmation: generated_password)\n  end\n</code></pre>\n\n<p>How can I get into the Devise registration controller to then call my new method which I have set up to auto generate a password?</p>\n"}, {"tags": ["ruby", "web-scraping", "mechanize"], "comments": [{"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 1, "creation_date": 1468958184, "post_id": 38467341, "comment_id": 64338767, "body": "right click the element and select inspect element and look for the name attribute in dev tools."}, {"owner": {"reputation": 3, "user_id": 5017752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498afdf66b9cd83c89461ee00bc24289?s=128&d=identicon&r=PG&f=1", "display_name": "awald", "link": "https://stackoverflow.com/users/5017752/awald"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1468958263, "post_id": 38467341, "comment_id": 64338811, "body": "Already did. It is blank."}, {"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1468959272, "post_id": 38467341, "comment_id": 64339398, "body": "are there any other attributes on the element that you could use? ie id, class, element type"}, {"owner": {"reputation": 3, "user_id": 5017752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498afdf66b9cd83c89461ee00bc24289?s=128&d=identicon&r=PG&f=1", "display_name": "awald", "link": "https://stackoverflow.com/users/5017752/awald"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1468959310, "post_id": 38467341, "comment_id": 64339417, "body": "I am a relative noob. So I am sure there are but I don&#39;t know how to reference them in the code."}, {"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1468959384, "post_id": 38467341, "comment_id": 64339465, "body": "if you inspect element again and edit your question to have the exact line of the element your trying to target then I&#39;d be able to help. ie <code>&lt;input type=text id=&#39;foo&#39; &#47;&gt;</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468961054, "post_id": 38467341, "comment_id": 64340351, "body": "There is a &quot;copy css selector button&quot; in chrome. see <a href=\"http://stackoverflow.com/questions/4500572/how-can-i-get-the-css-selector-in-chrome\">how-can-i-get-the-css-selector-in-chrome</a>"}, {"owner": {"reputation": 3, "user_id": 5017752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498afdf66b9cd83c89461ee00bc24289?s=128&d=identicon&r=PG&f=1", "display_name": "awald", "link": "https://stackoverflow.com/users/5017752/awald"}, "edited": false, "score": 0, "creation_date": 1468966340, "post_id": 38467341, "comment_id": 64342802, "body": "Already did that. Now I am getting an error."}], "answers": [{"tags": [], "owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "is_accepted": false, "score": 0, "last_activity_date": 1505229607, "last_edit_date": 1505229607, "creation_date": 1469104292, "answer_id": 38504404, "question_id": 38467341, "link": "https://stackoverflow.com/questions/38467341/find-field-without-a-name-in-mechanize/38504404#38504404", "title": "Find field without a name in Mechanize", "body": "<p>From the docs <a href=\"http://mechanize.rubyforge.org/Mechanize/Form.html\" rel=\"nofollow noreferrer\">here</a> I was able to find the following snippet.</p>\n\n<pre><code>form = page.form_with(:id =&gt; \"find_loc\")\n</code></pre>\n\n<p>This should target the form element you want.</p>\n"}, {"tags": [], "owner": {"reputation": 865, "user_id": 1745687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMIhP.jpg?s=128&g=1", "display_name": "Fernando Irarr&#225;zaval G", "link": "https://stackoverflow.com/users/1745687/fernando-irarr%c3%a1zaval-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1469114191, "creation_date": 1469114191, "answer_id": 38508087, "question_id": 38467341, "link": "https://stackoverflow.com/questions/38467341/find-field-without-a-name-in-mechanize/38508087#38508087", "title": "Find field without a name in Mechanize", "body": "<p>You have to fix two issues:</p>\n\n<ul>\n<li><p>Find the proper form. For this you should use the id:</p>\n\n<p><code>form = page.form_with(:id =&gt; \"find_loc\")</code></p></li>\n<li><p>Use the correct way to set the altZip field:</p>\n\n<p><code>wendy_form['altZip'] = '10013'</code></p></li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 5017752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498afdf66b9cd83c89461ee00bc24289?s=128&d=identicon&r=PG&f=1", "display_name": "awald", "link": "https://stackoverflow.com/users/5017752/awald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505229607, "creation_date": 1468957958, "last_edit_date": 1468964617, "question_id": 38467341, "link": "https://stackoverflow.com/questions/38467341/find-field-without-a-name-in-mechanize", "title": "Find field without a name in Mechanize", "body": "<p>I am trying to do the following scrape, but am having trouble finding the name of the form to input the zip codes.  </p>\n\n<pre><code>require 'mechanize'\n\nagent = Mechanize.new\n\npage = agent.get('https://www.wendys.com/en-us/Location')\n\nwendy_form = page.form('find_loc') #name of the form\n\nwendy_form.altZip = '10013' \n#altZip is the input form name\n\npage = agent.submit(wendy_form)\n\npage.search('p.store_address').each do |li|\n  puts li.content\nend\n</code></pre>\n\n<p>This is the form I am trying to get.</p>\n\n<pre><code>&lt;form data-bind=\"submit: destinationFinder.huntViaAddressForm, visible: destinationFinder.isShowingResultsView() || ! routePlanner.destination.exists()\" id=\"find_loc\" style=\"\"&gt;\n</code></pre>\n\n<p>Getting the following error:</p>\n\n<pre><code>2.rb:9:in `&lt;main&gt;': undefined method `altZip=' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1468960571, "post_id": 38467166, "comment_id": 64340095, "body": "I see that you found the duplicate, but there are other seemingly valid workarounds listed as alternate answers. Have you tried editing <code>registry.rb</code>?"}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1468967871, "post_id": 38467166, "comment_id": 64343277, "body": "i actually have put &quot;LOCALE = Encoding::UTF_8&quot; in line 71 in registry.rb . the problem is that i have done many changes , and i am afraid that they might cause failure  to each other ."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1468968899, "post_id": 38467166, "comment_id": 64343572, "body": "In matter of fact ,Every time i do something new i get different response from rails ,but it still doesn&#39;t work . now it gives me this when I try to make new app with &quot;rails new&quot; :  &quot;  An error occurred while installing nio4r (1.2.1), and Bundler cannot continue.Make sure that <code>gem install nio4r -v &#39;1.2.1&#39;</code> succeeds before bundling.&quot;                                            But when I try to run &quot;bundle install &quot; it says :   &quot; C:\\Users\\admin&gt;bundler install The system cannot find the path specified. &quot;                                                       i am really confused now LOL ."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1468977736, "post_id": 38467166, "comment_id": 64345493, "body": "Can you open <code>C:\\RailsInstaller\\Ruby2.2.0\\bin\\bundle.bat</code> and search for the string <code>emachnic</code>. If you can find it, we can do some editing to get you on your feet."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469007180, "post_id": 38467166, "comment_id": 64357556, "body": "thank you for your concern . That string was in  bundle.bat  and i edited it and put &quot;C:\\RailsInstaller\\Ruby2.2.0\\bin\\ruby.exe&quot; &quot;%~dpn0&quot; %* &quot;.                         I think that the problem is different now , maybe if I could install &quot; nio4r &quot;  the &quot; bundle install &quot;  might work , honestly i am not sure what &quot;nio4r&#39;&#39; is ,but i am going to try anyway . Now i am having a course on &quot;coursera&quot; ,but in the video of installation which is about 10 m these problems didn&#39;t happen ."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469007623, "post_id": 38467166, "comment_id": 64357850, "body": "I wanted to ask you if it was normal to see this when I open the command prompt : &quot; C:\\Sites&gt; &quot;   , because in the video there was only &quot;  C:\\&gt; &quot;"}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469008267, "post_id": 38467166, "comment_id": 64358272, "body": "note that now i have rails 5.0.0    , ruby 2.2.4     , git 1.9.4"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469021432, "post_id": 38467166, "comment_id": 64367551, "body": "nio4r is <a href=\"https://github.com/celluloid/nio4r\" rel=\"nofollow noreferrer\">New Input/Output for Ruby</a>. You could try <code>bundle update nio4r</code> to address that issue. Also, the <code>emachnic</code> string exists in a number of <code>.bat</code> files and has to be corrected in each."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469037272, "post_id": 38467166, "comment_id": 64376850, "body": "should i remove all syntax that have &quot;  emachnic &quot; in it and put &quot;C:\\RailsInstaller\\Ruby2.2.0\\bin\\ruby.exe&quot; &quot;%~dpn0&quot; %* &quot; ?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469045372, "post_id": 38489031, "comment_id": 64381518, "body": "I reinstalled rails and did as you said , now it returns this when i type bundle install :                                                                                                                          &quot; C:\\Sites\\nein&gt;bundle install C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/win32/registry.rb&zwnj;&#8203;:71:in `find&#39;: unknown encoding name - CP720 (ArgumentError) &quot;                                  do you think I should change the encoding name by &quot;  chcp 1252 &quot; ?"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469045706, "post_id": 38489031, "comment_id": 64381694, "body": "Yeah. We&#39;ve been working backwards trying to resolve related problems, and now we&#39;re back to the original, so do what you did when CP720 was the top error."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469048871, "post_id": 38489031, "comment_id": 64383314, "body": "I noticed something strange , every line starts with &quot;  C:\\Sites&gt; &quot; , when i saw videos on rails there was only &quot; C:\\&gt; &quot;  , is that normal ?"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469048946, "post_id": 38489031, "comment_id": 64383346, "body": "&quot;Every line &quot; where? Help a brother out, I can&#39;t see your terminal from here. ;) If you&#39;re talking about your command prompt, it just means you&#39;re in your Sites directory."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469049505, "post_id": 38489031, "comment_id": 64383605, "body": "yes my command prompt , it looks like that :    &quot; The system cannot find the path specified.  C:\\Sites&gt;   &quot;   , but what is &quot;Sites directory &quot; ? , I know it is probably a stupid question , but I am still a beginner and there is so much to learn ."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469052529, "post_id": 38489031, "comment_id": 64384815, "body": "c:\\ is the root directory of your hard drive (the very top). c:\\Sites means you&#39;ve moved into a folder called Sites that&#39;s immediately inside your hard drive. The tutorial you saw with c:\\ just means that the presenter wasn&#39;t in any folders and was saving data at the top of the hard drive. Now, is bundle install working? I&#39;d like to resolve this question ASAP, since it&#39;s dragging out far beyond the norm and you probably want to get back to work."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469053929, "post_id": 38489031, "comment_id": 64385285, "body": "at first it was returning &quot; unknown encoding name  argument error &quot; or something  like that ,so i typed &quot; gem install rails &quot; ,but it returned at the end &quot;  ERROR: Failed to build gem native extension. &quot; , so i typed &quot; gem install rails -v 4.2.3 &quot; and it worked fine with no errors , then I typed &quot;rails new my_project5&quot; , but the bundle install couldn&#39;t continue , and it says that nio4r isn&#39;t couldn&#39;t be installed because of native extensions once again , here are the logs : <a href=\"http://pastebin.com/X9sH6zH3\" rel=\"nofollow noreferrer\">pastebin.com/X9sH6zH3</a> , it was going well until line 117 ."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469055663, "post_id": 38489031, "comment_id": 64385756, "body": "Really sorry, but your questions are way too disorganized. Stack Overflow is meant to provide specific answers to specific questions, but you&#39;ve made at least two posts where you ask the same series of things in each question. I cannot continue until you properly organize things. Ask one question. Solicit answers for that one question. Apply the suggestions. Move on only when the problem of that moment is resolved. What I&#39;d do is delete all of your Ruby and Rails stuff and start over again using Vagrant. Using Windows at your level is asking for trouble."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469075791, "post_id": 38489031, "comment_id": 64390490, "body": "Ok my friend , sorry if I had been annoying . Thank you for your help and advice . I will try to be better than that in the future ."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469079929, "post_id": 38489031, "comment_id": 64391782, "body": "Sorry if that sounded more harsh than I meant -- it can be difficult to convey nuance in writing. What I mean is that we need to stick to one question at a time before jumping down the rabbit hole. So far, I can&#39;t really tell which of my suggestions you&#39;ve implemented and what the results were because as soon as I think we&#39;ve moved on to the next thing, we&#39;re back to the first. Really though, wiping your project clean and installing Vagrant will give you a unix style environment where you won&#39;t run into these problems. Many libraries were written for unix, so Windows produces problems."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469142047, "post_id": 38489031, "comment_id": 64428162, "body": "it finally worked , I now understand how this works , thank you for your help . this was the thing i never tried and it was the solution : <a href=\"http://jekyll-windows.juthilo.com/1-ruby-and-devkit/\" rel=\"nofollow noreferrer\">jekyll-windows.juthilo.com/1-ruby-and-devkit</a>"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "reply_to_user": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469142596, "post_id": 38489031, "comment_id": 64428276, "body": "Hmm. All this time, I thought you&#39;d tried to install DevKit already. Well, glad it&#39;s resolved for you. Best of luck on your project."}, {"owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "edited": false, "score": 0, "creation_date": 1469149662, "post_id": 38489031, "comment_id": 64429812, "body": "actually what was confusing to me is that every time i close the command prompt and open it again i have to do every thing from the start , i mean that i have to change the encoding name , some times reinstall the bundle . but i just knew that after every thing worked . before it worked i thought that i was facing a new error so i got confused and thought that the first solution was wrong. Any way , I am glad it is finally over after three days i am finally able to run the server LOL . Best wishes to you too ."}], "tags": [], "owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "is_accepted": false, "score": 0, "last_activity_date": 1469042147, "creation_date": 1469042147, "answer_id": 38489031, "question_id": 38467166, "link": "https://stackoverflow.com/questions/38467166/ruby-on-rails-when-making-new-app-it-says-unknown-encoding-name-on-windows-7/38489031#38489031", "title": "ruby on rails when making new app it says unknown encoding name . on windows 7, rails 4.2", "body": "<p>RailsInstaller seems to include an unresolved (and continuing) <a href=\"https://github.com/railsinstaller/railsinstaller-windows/issues/70\" rel=\"nofollow\">problem</a> with their builds. If you look in your <code>.bat</code> files, you'll find the following lines, which indicate that RailsInstaller is using a hardcoded path that refers to the machine of a specific RailsInstaller developer:</p>\n\n<pre><code>@ECHO OFF\nIF NOT \"%~f0\" == \"~f0\" GOTO :WinNT\n@\"C:\\Users\\emachnic\\GitRepos\\railsinstaller-windows\\stage\\Ruby2.2.0\\bin\\ruby.exe\" \"C:/Users/emachnic/GitRepos/railsinstaller-windows/stage/Ruby2.2.0/bin/rails\" %1 %2 %3 %4 %5 %6 %7 %8 %9\nGOTO :EOF\n:WinNT\n@\"C:\\Users\\emachnic\\GitRepos\\railsinstaller-windows\\stage\\Ruby2.2.0\\bin\\ruby.exe\" \"%~dpn0\"\n</code></pre>\n\n<p>Any instance of the previous code should be replaced with the following:</p>\n\n<pre><code>@ECHO OFF\nIF NOT \"%~f0\" == \"~f0\" GOTO :WinNT\nECHO.This version of Ruby has not been built with support for Windows 95/98/Me.\nGOTO :EOF\n:WinNT\n@\"%~dp0ruby.exe\" \"%~dpn0\" %*\n</code></pre>\n\n<p>If all else fails and you just don't want to deal with it, the RailsInstaller <a href=\"http://railsinstaller.org/en\" rel=\"nofollow\">web page</a> includes multiple versions, so you can just go back and use an earlier version (particularly if you're starting a new project).</p>\n"}], "owner": {"reputation": 113, "user_id": 6610313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdda1abddf2b5bb06ba4869aa8a82806?s=128&d=identicon&r=PG&f=1", "display_name": "Mfms99", "link": "https://stackoverflow.com/users/6610313/mfms99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469042147, "creation_date": 1468957317, "last_edit_date": 1495540372, "question_id": 38467166, "link": "https://stackoverflow.com/questions/38467166/ruby-on-rails-when-making-new-app-it-says-unknown-encoding-name-on-windows-7", "title": "ruby on rails when making new app it says unknown encoding name . on windows 7, rails 4.2", "body": "<p>When I type \"<code>rails new ...</code>\" it goes well until it reaches:</p>\n\n<pre><code>run  bundle install\n</code></pre>\n\n<blockquote>\n  <p>C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/win32/registry.rb:71:in\n  `find':unknown encoding name - CP720 (ArgumentError)</p>\n</blockquote>\n\n<p>I have already changed the encoding name by \" <code>chcp 1252</code> \" which I found in <a href=\"https://stackoverflow.com/questions/22815542/rails4-unknown-encoding-name-cp720\">another answer</a>, because it was giving me</p>\n\n<blockquote>\n  <p>unknown   encoding name - CP720 (ArgumentError)</p>\n</blockquote>\n\n<p>When I was trying to know the version of the rails through \" <code>rails -v</code> \"</p>\n\n<p>If anyone knows how to solve this please tell me , and if you need more information tell me what you need to know and I will type it in a comment .</p>\n\n<p>Update : it doesn't do that any more , it now says: </p>\n\n<blockquote>\n  <p>Installing nio4r 1.2.1 with native extensions  Gem::Ext::BuildError:\n  ERROR: Failed to build gem native extension.</p>\n</blockquote>\n\n<p>And at the end it says:</p>\n\n<blockquote>\n  <p>An error occurred while installing nio4r (1.2.1), and Bundler cannot\n  continue. Make sure that <code>gem install nio4r -v '1.2.1'</code> succeeds\n  before bundling.</p>\n</blockquote>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1468956151, "post_id": 38466776, "comment_id": 64337709, "body": "Do you mean to say that you want all ten to be entirely unique, or that you do not want a number to repeat the previous one?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468960196, "post_id": 38466776, "comment_id": 64339895, "body": "When asking it&#39;s important to show us what you tried. Without that it looks like you want us to write the code for you. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is good to read, along with &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and its linked pages."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1468961835, "post_id": 38466776, "comment_id": 64340796, "body": "Sidenote: <code>Random.new</code> creates a PRNG, a Pseudo Random Number Generator. This generator generates just one number and then an new generator is constructed. Just <code>Random.rand(1..100)</code> or even plain <code>rand(1..100)</code>  is better."}], "answers": [{"comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1468956177, "post_id": 38466858, "comment_id": 64337728, "body": "Even better, just chop off the first ten all at once:  <code>(1..100).to_a.shuffle[0,10]</code>"}], "tags": [], "owner": {"reputation": 858, "user_id": 1875195, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3ed18248b30a2d90cf49ea9393097425?s=128&d=identicon&r=PG", "display_name": "user1875195", "link": "https://stackoverflow.com/users/1875195/user1875195"}, "is_accepted": false, "score": 2, "last_activity_date": 1468956145, "creation_date": 1468956145, "answer_id": 38466858, "question_id": 38466776, "link": "https://stackoverflow.com/questions/38466776/how-to-check-if-theres-a-repeat/38466858#38466858", "title": "How to check if there&#39;s a repeat?", "body": "<p>You could just shuffle and array of the given set to guarantee no dups. </p>\n\n<pre><code>randomized = (1..100).to_a.shuffle \n</code></pre>\n\n<p>You can then just pop them off </p>\n\n<pre><code>next_r = randomized.pop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 6, "last_activity_date": 1468956877, "last_edit_date": 1468956877, "creation_date": 1468956515, "answer_id": 38466947, "question_id": 38466776, "link": "https://stackoverflow.com/questions/38466776/how-to-check-if-theres-a-repeat/38466947#38466947", "title": "How to check if there&#39;s a repeat?", "body": "<p><a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-sample\" rel=\"noreferrer\">Array#sample</a> takes an argument:</p>\n\n<pre><code>randomized = (1..100).to_a.sample(10) #=&gt; [52, 100, 92, 93, 33, 66, 78, 84, 36, 98]\n</code></pre>\n\n<p>From the docs: \" The elements are chosen by using random and unique indices into the array in order to ensure that an element doesn\u2019t repeat itself unless the array already contained duplicate elements.\" </p>\n"}], "owner": {"reputation": 73, "user_id": 6279214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2d81bd520a69949093e5a1e61ad37a4?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/6279214/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 38466947, "answer_count": 2, "score": 0, "last_activity_date": 1468956877, "creation_date": 1468955864, "question_id": 38466776, "link": "https://stackoverflow.com/questions/38466776/how-to-check-if-theres-a-repeat", "title": "How to check if there&#39;s a repeat?", "body": "<pre><code>    randomized = 10.times.map { Random.new.rand(1..100) }\n</code></pre>\n\n<p>I wanted to make 10 randomized numbers that do not repeat twice. How do I check it? I don't want to do the long one such as</p>\n\n<pre><code>    puts randomized[0] != randomized[1]\n    puts randomized[1] != randomized[2]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 2420206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b265e4eb7c20ec2555265dcfffd157?s=128&d=identicon&r=PG", "display_name": "texdevelopers", "link": "https://stackoverflow.com/users/2420206/texdevelopers"}, "is_accepted": false, "score": 0, "last_activity_date": 1471971943, "last_edit_date": 1495542180, "creation_date": 1471971943, "answer_id": 39107014, "question_id": 38466718, "link": "https://stackoverflow.com/questions/38466718/activemodel-serializer-wont-look-up-serializer-class-implicitly-to-get-json-se/39107014#39107014", "title": "ActiveModel Serializer won&#39;t look up serializer class implicitly, to get json serialized correctly the serializer has to be explicitly passed", "body": "<p>I had the same problem , and I was also doing name spacing. I think <a href=\"https://stackoverflow.com/a/15464369/2420206\">this answer and comments</a> are still relevant</p>\n\n<p>As I really did want to namespace my serializers (api:v1) so I could swap in new serializers in the next version, I just kept the explicit call. If there is a better answer I would love to hear about it</p>\n"}], "owner": {"reputation": 44, "user_id": 2826911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e51f7dbb595799e71ed9d23cc1cd438?s=128&d=identicon&r=PG&f=1", "display_name": "user2826911", "link": "https://stackoverflow.com/users/2826911/user2826911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471971943, "creation_date": 1468955639, "question_id": 38466718, "link": "https://stackoverflow.com/questions/38466718/activemodel-serializer-wont-look-up-serializer-class-implicitly-to-get-json-se", "title": "ActiveModel Serializer won&#39;t look up serializer class implicitly, to get json serialized correctly the serializer has to be explicitly passed", "body": "<p>I'm having an issue in my Rails 4.2.6 project with ActiveModel Serializers (v0.10.2). The issue I'm having is if no serializer is passed to the render call in the controller, rails won't use any serializer and render the object as it would normally. However, passing it the serializer class name works as expected.</p>\n\n<pre><code>render json: @tag  # renders the whole object as if just to_json was called\nrender json: @tag, serializer: API::V1::TagSerializer # renders it correctly through the serializer\n</code></pre>\n\n<p>Currently, the controller this is in a versioned api namespace <code>API::V1::Tags</code></p>\n\n<p>I have a action_model_serializers initializer, and it's contents are:</p>\n\n<pre><code>ActiveModelSerializers.config.adapter = :json_api\nActiveModelSerializers.config.key_transform = :camel_lower\nActiveModelSerializers.config.serializer_lookup_enabled = true\n</code></pre>\n\n<p>And my serializer located in <code>app/serializers/api/v1/tag_serializer.rb</code>:</p>\n\n<pre><code>class API::V1::TagSerializer &lt; ApplicationSerializer\n  attributes :id, :name, :created_at, :updated_at\n\n  has_many :taggings, serializer: API::V1::TaggingSerializer\n\n  link :self do\n    api_v1_tag_url(object, host: 'localhost:3000')\n  end\nend\n</code></pre>\n\n<p>I'm not quite sure what is wrong, I have tried restarting everything, I have included <code>ActionController::Serialization</code> in my application controller, nothing I try works.</p>\n\n<p>Unsure if this is a related problem, but even after added <code>include: 'taggings'</code> to the render function, and the <code>has_many :taggings, serializer: API::V1::TaggingSerializer</code> in the serializer, the only thing being rendered in the relationships is the tagging id and <code>type: 'taggings'</code></p>\n"}, {"tags": ["arrays", "ruby", "algorithm", "time"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468955726, "post_id": 38466692, "comment_id": 64337501, "body": "Might more than 2 timeslices overlap? Is an input sorted by <code>&quot;timefrom&quot;</code>?"}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468956320, "post_id": 38466692, "comment_id": 64337808, "body": "@mudasobwa in theory they could all overlap. Super unlikely but they COULD. And yes, sorted by <code>timefrom</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1468960058, "post_id": 38466692, "comment_id": 64339829, "body": "Welcome to Stack Overflow. We&#39;d like to see your effort toward solving the problem. Without that it looks like you&#39;re asking us to write the code for you. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages. Also <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is useful to read."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1468960170, "post_id": 38466692, "comment_id": 64339886, "body": "What is the Ruby issue you are facing in solving this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1468969279, "post_id": 38467456, "comment_id": 64343685, "body": "Nice! Following your solution, I was able to improve a perl solution I was working on."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1468961674, "last_edit_date": 1468961674, "creation_date": 1468958415, "answer_id": 38467456, "question_id": 38466692, "link": "https://stackoverflow.com/questions/38466692/find-and-flatten-overlapping-time-intervals-in-ruby-array/38467456#38467456", "title": "Find and flatten overlapping time intervals in ruby array", "body": "<p>I understand the elements <code>g</code> (hashes) of <code>times</code> are ordered by <code>g[\"timefrom\"]</code>.</p>\n\n<pre><code>def combine_times(times)\n  times[1..-1].each_with_object([times.first]) do |g,a|\n    if g[\"timefrom\"] &lt; a.last[\"timeto\"]\n      a[-1][\"timeto\"] = [ a[-1][\"timeto\"], g[\"timeto\"] ].max\n    else\n      a &lt;&lt; g\n    end\n  end\nend\n\ntimes = [{\"timefrom\"=&gt;1461693247, \"timeto\"=&gt;1461693307},\n\n         {\"timefrom\"=&gt;1462363987, \"timeto\"=&gt;1462364607},\n         {\"timefrom\"=&gt;1462364037, \"timeto\"=&gt;1462366037}]\n</code></pre>\n\n<p>The line spacing shows how the elements of <code>times</code> should be grouped.</p>\n\n<pre><code>combine_times(times)\n  #=&gt; [{\"timefrom\"=&gt;1461693247, \"timeto\"=&gt;1461693307}, (times[0])\n  #    {\"timefrom\"=&gt;1462363987, \"timeto\"=&gt;1462366037}] (combines times[1..2])\n</code></pre>\n\n<p>Another example:</p>\n\n<pre><code>times = [{\"timefrom\"=&gt;10, \"timeto\"=&gt;20},\n         {\"timefrom\"=&gt;12, \"timeto\"=&gt;15},\n\n         {\"timefrom\"=&gt;22, \"timeto\"=&gt;30},\n         {\"timefrom\"=&gt;28, \"timeto\"=&gt;32},\n         {\"timefrom\"=&gt;29, \"timeto\"=&gt;29},\n\n         {\"timefrom\"=&gt;32, \"timeto\"=&gt;40},\n\n         {\"timefrom\"=&gt;42, \"timeto\"=&gt;50},\n         {\"timefrom\"=&gt;43, \"timeto\"=&gt;46}]\n\ncombine_times(times)\n  #=&gt; [{\"timefrom\"=&gt;10, \"timeto\"=&gt;20}, (combines times[0..1])\n  #    {\"timefrom\"=&gt;22, \"timeto\"=&gt;32}, (combines times[2..4])\n  #    {\"timefrom\"=&gt;32, \"timeto\"=&gt;40}, (times[5])\n  #    {\"timefrom\"=&gt;42, \"timeto\"=&gt;50}] (combines times[6..7])\n</code></pre>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 38467456, "answer_count": 1, "score": 0, "last_activity_date": 1468961674, "creation_date": 1468955520, "last_edit_date": 1468960227, "question_id": 38466692, "link": "https://stackoverflow.com/questions/38466692/find-and-flatten-overlapping-time-intervals-in-ruby-array", "title": "Find and flatten overlapping time intervals in ruby array", "body": "<p>I am trying to do some downtime calculations for an application. What I have is a giant array of hashes that show when different parts of the application were down. The hash includes a Start time and an End time. The problem is that some of these downtimes can overlap. How can I go through the array of hashes and find time intervals which overlap. </p>\n\n<pre><code>times = [{\"timefrom\"=&gt;1461693247, \"timeto\"=&gt;1461693307},\n         {\"timefrom\"=&gt;1462363987, \"timeto\"=&gt;1462364607},\n         {\"timefrom\"=&gt;1462364037, \"timeto\"=&gt;1462366037}]\n</code></pre>\n\n<p>So for example, given the array above, <code>times[1]</code> and <code>times[2]</code> overlap. So ideally what I would like to do is merge them so that they form one long outage. I.E. </p>\n\n<pre><code>times[1] = { \"timefrom\" =&gt; times[1][\"timefrom\"], \"timeto\" =&gt; times[2][\"timeto\"] }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468956371, "post_id": 38466664, "comment_id": 64337839, "body": "Is there a stack trace to go with that error? Sounds like something is trying to instantiate a <code>Guest</code> or lookup the <code>Guest</code> class structure while the app is setting itself up to run <code>db:migrate</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469138591, "post_id": 38466664, "comment_id": 64427099, "body": "What exactly is a stack trace? And how would I find that?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469139031, "post_id": 38466664, "comment_id": 64427244, "body": "The exception should come with list of the method calls so that you can see the path that triggered the exception. This should be in your logs or on the standard error output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469141470, "post_id": 38466664, "comment_id": 64427997, "body": "<a href=\"http://imgur.com/WWDZD5Q\" rel=\"nofollow noreferrer\">imgur.com/WWDZD5Q</a> is the error output from my terminal. Is this what you&#39;re looking for?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469142687, "post_id": 38466664, "comment_id": 64428295, "body": "Yes, you&#39;re probably better off pasting that into your question as text before someone complains about it. What is <code>config&#47;initializes&#47;ApiLoader.rb</code> all about and why is it doing a <code>Guest.where(...).exists?</code> query?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469144547, "post_id": 38466664, "comment_id": 64428727, "body": "That file loads API tokens and gets access rights for the calls I&#39;m going to make. It also creates a null guest, though, for the case where the guest of the site doesn&#39;t log in. The exists? call is there to make sure the null guest isnt created twice."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469144614, "post_id": 38466664, "comment_id": 64428748, "body": "Can I not reference the guest class in an initializer file? That seems like it could be what&#39;s wrong. But if so, why would it work before trying to migrate to heroku?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469155265, "post_id": 38466664, "comment_id": 64430999, "body": "Probably worked before Heroku because you had the <code>guests</code> table in your database before you added <code>ApiLoader.rb</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "edited": false, "score": 0, "creation_date": 1468959531, "post_id": 38466901, "comment_id": 64339548, "body": "I have tried this, and it doesn&#39;t change anything for me"}], "tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": false, "score": 0, "last_activity_date": 1468956290, "creation_date": 1468956290, "answer_id": 38466901, "question_id": 38466664, "link": "https://stackoverflow.com/questions/38466664/bizarre-pgundefinedtable-error-with-rails-app-on-heroku/38466901#38466901", "title": "Bizarre PG::UndefinedTable Error with Rails app on Heroku", "body": "<p>Your postgres user doesnt have permission to create or drop databases, you need to use pg:reset</p>\n\n<pre><code>heroku pg:reset DATABASE_URL\n</code></pre>\n\n<p><a href=\"https://devcenter.heroku.com/articles/heroku-postgresql#using-the-cli\" rel=\"nofollow\">This</a> is what I followed and it worked for me.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1469155215, "post_id": 38516185, "comment_id": 64430989, "body": "Right. If you try to <code>Guest.where(...)</code> then AR will query the database to see what <code>Guest</code> looks like, that&#39;s the funny looking <code>::regclass</code> query you saw in the stack trace. But if there is no <code>guests</code> table in the database (i.e. the migration hasn&#39;t run yet) then the <code>&#39;&quot;guests&quot;&#39;::regclass</code> type cast will fail and you end up with a <code>PG::UndefinedTable</code> error. Initializers shouldn&#39;t reference the database: doing so results in these dependency loops."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "is_accepted": true, "score": 2, "last_activity_date": 1469145660, "creation_date": 1469145660, "answer_id": 38516185, "question_id": 38466664, "link": "https://stackoverflow.com/questions/38466664/bizarre-pgundefinedtable-error-with-rails-app-on-heroku/38516185#38516185", "title": "Bizarre PG::UndefinedTable Error with Rails app on Heroku", "body": "<p>I FIGURED IT OUT</p>\n\n<p>Thanks a ton, mu is too short. I think my issue was that I was referencing my guest class in my initializer file. I moved that bit of code to the controller method that it was relevant to, pushed to heroku, and everything is working fine now.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6610172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 38516185, "answer_count": 2, "score": 1, "last_activity_date": 1469145660, "creation_date": 1468955376, "last_edit_date": 1469144740, "question_id": 38466664, "link": "https://stackoverflow.com/questions/38466664/bizarre-pgundefinedtable-error-with-rails-app-on-heroku", "title": "Bizarre PG::UndefinedTable Error with Rails app on Heroku", "body": "<p>I built an app with Rails that scrapes twitter for phone numbers. It's up on heroku, and it was running fine until I added a model for different guests using the app. Now whenever I attempt to db:migrate, db:reset, or db:create, I am getting the error \"ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"guests\" does not exist\". I have read every stack overflow article on this topic, but every solution uses commands that I can't run without getting the error.</p>\n\n<p>Everything with the program worked great locally. I could migrate to the database, drop and recreate it if I needed to, and use the app to its full functionality. The issue was in migrating to the postgres Heroku database. I pushed to Heroku without any errors, but when I tried to run the app online, it told me it couldn't access its database. I went to migrate my database changes to Heroku, and when I did, I got the error. I tried resetting the Heroku database and migrating again, but I got the same error on migration. </p>\n\n<p>Guest is a model that I created when I added sign in to the app. Users are twitter accounts, and Guests are people logged in with the scraper. Users belong to guests via a \"has_many\" \"belongs_to\" relation. </p>\n\n<p>Also, after getting the error with heroku, when I try to migrate to my local database, I get the error. Like I said, I can't db:reset, db:create, or db:migrate locally any more. I can only db:drop.</p>\n\n<p>I use postgres locally as well as in production. My tables all look good. I have checked the timestamps on my migration files and tried creating guests first and creating users first. Here's a screenshot of my <a href=\"http://i.stack.imgur.com/6VZWt.png\" rel=\"nofollow\">schema file</a>.</p>\n\n<p>This is a screenshot of my <a href=\"http://imgur.com/a/2BZio\" rel=\"nofollow\">error message</a>.</p>\n\n<p>Any help is hugely appreciated. I have been stuck on this for a week. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailgun"], "answers": [{"tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": false, "score": 2, "last_activity_date": 1468955841, "creation_date": 1468955841, "answer_id": 38466769, "question_id": 38466642, "link": "https://stackoverflow.com/questions/38466642/creating-easy-to-use-parameters-for-this-method/38466769#38466769", "title": "Creating easy to use parameters for this method", "body": "<p>Sure, here is one way to do it:</p>\n\n<pre><code>message_params = {\n  from: {\n    email: 'bob@sending_domain.com',\n    name: {\n      'first' =&gt; 'Bob',\n      'last' =&gt; 'Doe'\n    }\n  },\n  to:   'sally@example.com',\n  subject: 'The Ruby SDK is awesome!',\n  text:    'It is really easy to send a message!'\n}\n</code></pre>\n\n<p>Then, in your <code>send_mail</code> method:</p>\n\n<pre><code>def send_email(params)\n  # ...\n\n  builder.set_from_address(params[:from][:email], params[:from][:name]);\n\n  # ...\n  client.send_message(domain, builder)\nend\n</code></pre>\n"}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468955841, "creation_date": 1468955311, "question_id": 38466642, "link": "https://stackoverflow.com/questions/38466642/creating-easy-to-use-parameters-for-this-method", "title": "Creating easy to use parameters for this method", "body": "<p>I have a API that I am using that I want to create a helper method.</p>\n\n<pre><code>def send_email( ??????????? )\n   client = Mailgun::Client.new\n   builder = Mailgun::MessageBuilder.new\n\n   builder.set_from_address(\"test@example.com\", {\"first\" =&gt;\"John\", \"last\" =&gt; \"Doe\"});\n\n   builder.set_subject(\"hello world\")\n   builder.set_text_body(\"this is the body\")\n\n   client.send_message(domain, builder)\nend\n</code></pre>\n\n<p>I want to use a params hash, but not sure how I can embed the \"from address\" first and last name in it:</p>\n\n<pre><code>message_params = { from: 'bob@sending_domain.com',\n                    to:   'sally@example.com',\n                    subject: 'The Ruby SDK is awesome!',\n                    text:    'It is really easy to send a message!'\n}\n</code></pre>\n\n<p>Is there a way I can embed the first/last in the params?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1468951429, "post_id": 38465449, "comment_id": 64334997, "body": "Your question isn&#39;t as clear and straightforward as you seem to think. Could you try and update it with that you&#39;re trying to do, and what error you receive when you do it inside the text body?"}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "reply_to_user": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1468951725, "post_id": 38465449, "comment_id": 64335200, "body": "At a meta level, I&#39;m trying to come to a solution that I can use any time I want to offer a drop-down selection on a <code>has_many</code> relationship."}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "edited": false, "score": 0, "creation_date": 1469285404, "post_id": 38465642, "comment_id": 64477955, "body": "Turns out this was a bug somewhere; when your answer made it clear that it was supposed to work as expected, I created a new app on a fresh vm, and it did work. Cheers."}], "tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": true, "score": 0, "last_activity_date": 1468951806, "creation_date": 1468951806, "answer_id": 38465642, "question_id": 38465449, "link": "https://stackoverflow.com/questions/38465449/rails-undefined-method-map-for-nilnilclass-on-collection-select-the-referen/38465642#38465642", "title": "Rails undefined method `map&#39; for nil:NilClass on collection_select - The reference called may be nil", "body": "<p>You don't have to use the condition in your view. Even if there are no items in <code>@tag.tagged</code>, it is still an <code>ActiveRecord::Relation</code> instance, so you can go ahead and just call <code>map</code> on it:</p>\n\n<pre><code>&lt;%= f.collection_select(:tagged, \n  Artefact.all.sort { |a,b| a.name &lt;=&gt; b.name }, \n  :id,\n  :name,\n  options = {\n    :prompt =&gt; \"Please Select an Item\",\n    :selected =&gt; @tag.tagged.map(&amp;:id)\n  },\n  html_options = {\n    :multiple =&gt; true,\n    :class=&gt;\"search\"\n  }) \n%&gt;\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 38465642, "answer_count": 1, "score": 0, "last_activity_date": 1468951806, "creation_date": 1468951123, "question_id": 38465449, "link": "https://stackoverflow.com/questions/38465449/rails-undefined-method-map-for-nilnilclass-on-collection-select-the-referen", "title": "Rails undefined method `map&#39; for nil:NilClass on collection_select - The reference called may be nil", "body": "<p>After reading through the other SO answers, it's pretty clear that there are some common themes.</p>\n\n<p>Mostly this type of error seems to happen when the object called is not defined yet, but in this case we have a <code>has_many</code> relationship that may not have a referenced entry when building the selection.</p>\n\n<pre><code>Class Tag\n  property :name, type: String\n  has_many :in, :tagged, type: :CONCEPTUAL_TAG, model_class: :Artefact\nend\n</code></pre>\n\n<p>One option is to do something like this:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :tagged_id %&gt;&lt;br&gt;\n\n  &lt;% if !@tag.tagged.empty? %&gt;\n    &lt;%= f.collection_select(:tagged, Artefact.all.sort { |a,b| a.name &lt;=&gt; b.name }, :id, :name, options = {:prompt =&gt; \"Please Select an Item\", :selected =&gt; @tag.tagged.map(&amp;:id)}, html_options = {:multiple =&gt; true, :class=&gt;\"search\"}) %&gt;\n  &lt;% else %&gt;\n    &lt;%= f.collection_select(:tagged, Artefact.all.sort { |a,b| a.name &lt;=&gt; b.name }, :id, :name, options = {:prompt =&gt; \"Please Select an Item\"}, html_options = {:multiple =&gt; true, :class=&gt;\"search\"}) %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But this is definitely not DRY.</p>\n\n<p>Is there a way to select nothing when there is no association, and pre-populate when there is while keeping to a single <code>f.collection_select</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1468954945, "post_id": 38465137, "comment_id": 64337081, "body": "Remember &quot;doesn&#39;t work&quot; is about as meaningless a description as you can give."}, {"owner": {"reputation": 1, "user_id": 6583130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db297a871521a8f8e367500234206f85?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby User", "link": "https://stackoverflow.com/users/6583130/ruby-user"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1468955699, "post_id": 38465137, "comment_id": 64337487, "body": "@tadman Oh.Thanks and sorry"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6583130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db297a871521a8f8e367500234206f85?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby User", "link": "https://stackoverflow.com/users/6583130/ruby-user"}, "edited": false, "score": 0, "creation_date": 1468950988, "post_id": 38465269, "comment_id": 64334734, "body": "I really thank you for the suggestion you gave but it would really be of great help if you can give me the code"}], "tags": [], "owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "is_accepted": false, "score": 0, "last_activity_date": 1468950597, "creation_date": 1468950597, "answer_id": 38465269, "question_id": 38465137, "link": "https://stackoverflow.com/questions/38465137/waitr-and-jira-integration-not-producing-desired-output/38465269#38465269", "title": "Waitr and Jira integration not producing desired output", "body": "<p>You could simply change the value for <code>event</code> key in JIRA_DATA_LAYER, but I guess it has to be that way.</p>\n\n<p>Try to expand <code>if</code> sentence when checking key for this hash and use <code>is_a?</code> method to check whether value for particular key is array or not. If so, loop through <code>each</code> member of this array.</p>\n"}], "owner": {"reputation": 1, "user_id": 6583130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db297a871521a8f8e367500234206f85?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby User", "link": "https://stackoverflow.com/users/6583130/ruby-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468954925, "creation_date": 1468950049, "last_edit_date": 1468954925, "question_id": 38465137, "link": "https://stackoverflow.com/questions/38465137/waitr-and-jira-integration-not-producing-desired-output", "title": "Waitr and Jira integration not producing desired output", "body": "<p>I wrote a Ruby script to check if the layer found in DOM in Firebug for the page www.jira.com is matching with the hash values declared in my script. Below is the Ruby script I have written:</p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new(:chrome)\n\nbrowser.goto('https://jira.com')\n\nJIRA_DATA_LAYER = {\n    'jira' =&gt; {\n               'event'     =&gt; ['gtm.js', 'gtm.load'],\n               'gtm.start' =&gt; '1468949036556',\n              }\n}\n\ndef get_jira_data_layer(get_data_layer)\n    result = []\n\n    get_data_layer.each do |data_layer|\n        data_layer.each do |data_layer_key, data_layer_value|\n            result &lt;&lt; {\"#{data_layer_key}\" =&gt; data_layer_value}\n        end\n    end\n\n    return result\nend\n\ndef compare_jira_data_layer(layer, jira_name)\n    message = []\n    index = 0\n\n    JIRA_DATA_LAYER[jira_name].each do |jira_key, jira_value|\n        if layer.include?({jira_key =&gt; jira_value})\n            result = 'matches - PASS'\n        else\n            result = 'matches - FAIL'\n        end\n\n        index += 1\n        message.push(\"'#{jira_key} =&gt; #{jira_value}' #{result}\")\n    end\n\n    return message.join(\"\\n\")\nend\n\ndata_layer = browser.execute_script(\"return dataLayer\")\nget_data_layer = get_jira_data_layer(data_layer)\ncompare_data_layer = compare_jira_data_layer(get_data_layer, \"jira\")\nputs compare_data_layer\n</code></pre>\n\n<p>I am getting the following output:</p>\n\n<pre><code>'event =&gt; [\"gtm.js\", \"gtm.load\"]' matches - FAIL\n'gtm.start =&gt; 1468949036556' matches - FAIL\n</code></pre>\n\n<p>I want the following to be achieved:</p>\n\n<pre><code>'event =&gt; gtm.js' matches - FAIL\n'gtm.start =&gt; 1468949036556' matches - FAIL\n</code></pre>\n"}]