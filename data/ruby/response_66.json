[{"tags": ["ruby", "literals"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460591197, "post_id": 36611347, "comment_id": 60819740, "body": "This is pretty much the same as <a href=\"http://stackoverflow.com/q/8675206/479863\"><b>Is there any difference between the <code>:key =&gt; \u201cvalue\u201d</code> and <code>key: \u201cvalue\u201d</code> hash notations?</b></a>, isn&#39;t it? Not quite a duplicate but fairly close."}], "answers": [{"tags": [], "owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "is_accepted": false, "score": 0, "last_activity_date": 1460590854, "creation_date": 1460590854, "answer_id": 36611386, "question_id": 36611347, "link": "https://stackoverflow.com/questions/36611347/ruby-syntax-with-hash-keys-and-symbols/36611386#36611386", "title": "Ruby syntax with hash keys and symbols", "body": "<p>Writing <code>has_many :orders, dependent: :destroy</code> is the same as <code>has_many(:orders, {:dependent =&gt; :destroy})</code></p>\n\n<p><code>:dependent</code> is the key, <code>:destroy</code> the value of the hash passed as an argument to <code>has_many</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1460590870, "creation_date": 1460590870, "answer_id": 36611389, "question_id": 36611347, "link": "https://stackoverflow.com/questions/36611347/ruby-syntax-with-hash-keys-and-symbols/36611389#36611389", "title": "Ruby syntax with hash keys and symbols", "body": "<p>The notation introduced in Ruby 1.9 is just a shortcut, and you can see what it means using <code>irb</code>:</p>\n\n<pre><code>h = { dependent: :destroy }\n# =&gt; { :dependent =&gt; :destroy }\n</code></pre>\n\n<p>They're both symbols. Don't forget that a hash can be keyed by <em>any object</em>, not necessarily a symbol or a string. This is completely different from most languages where the key will be coerced into something consistent.</p>\n\n<p>Using that example you can see what the types of the keys and values are:</p>\n\n<pre><code>h.keys\n# =&gt; [:dependent]\n\nh.values\n# =&gt; [:destroy]\n</code></pre>\n\n<p>They're all symbols in this case.</p>\n"}], "owner": {"reputation": 173, "user_id": 5675944, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b47e6599f1708eadc1b310570a9f9a2?s=128&d=identicon&r=PG&f=1", "display_name": "jlog", "link": "https://stackoverflow.com/users/5675944/jlog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 36611389, "answer_count": 2, "score": 0, "last_activity_date": 1460615313, "creation_date": 1460590514, "last_edit_date": 1460615313, "question_id": 36611347, "link": "https://stackoverflow.com/questions/36611347/ruby-syntax-with-hash-keys-and-symbols", "title": "Ruby syntax with hash keys and symbols", "body": "<p>With the Rails expression <code>dependent: :destroy</code>, is <code>dependent</code> the hash key and <code>destroy</code> just a symbol?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1460589167, "post_id": 36610991, "comment_id": 60819067, "body": "Does it work when you change <code>require</code> to <code>require_relative</code>?  If so, and you want to know what the difference is, <a href=\"http://stackoverflow.com/q/3672586/567863\">this SO Q&amp;A</a> is a great resource."}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 4687343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/870b033794b3eb53d0017f571beb9945?s=128&d=identicon&r=PG&f=1", "display_name": "powerup7", "link": "https://stackoverflow.com/users/4687343/powerup7"}, "is_accepted": false, "score": 0, "last_activity_date": 1460593126, "creation_date": 1460593126, "answer_id": 36611714, "question_id": 36610991, "link": "https://stackoverflow.com/questions/36610991/the-require-method-in-modules-mix-ins/36611714#36611714", "title": "The #require method in modules mix-ins", "body": "<p>require_relative requires files from a relative path</p>\n\n<p>require file needs you to specify the exact(absolute) path</p>\n\n<p>for ex.\nI have an app.rb and a module.rb in one directory(c:/users/ruby/app/this_app/)\nrequire_relative looks for the module file where you ran app.rb\n<code>require_relative \"module\"</code> looks into the directory where I ran app.rb(this_app/)</p>\n\n<p>require \"module(.rb)\" might even need you to specify the full path and extension name I believe. I'm not sure on the extension name but I'm 100% sure it needs the full absolute path</p>\n\n<p><code>require \"/users/ruby/app/this_app/module(.rb)\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": false, "score": 0, "last_activity_date": 1460594586, "creation_date": 1460594586, "answer_id": 36611907, "question_id": 36610991, "link": "https://stackoverflow.com/questions/36610991/the-require-method-in-modules-mix-ins/36611907#36611907", "title": "The #require method in modules mix-ins", "body": "<p><code>require</code> needs an absolute path, but you can use require from the current directory with <code>require \"./stacklike\"</code>. <code>require_relative</code> uses a path relative to the current directory, so <code>require_relative \"stacklike\"</code> would also work.</p>\n\n<p>Generally speaking source files are loaded by adding a directory to the Ruby load path, then doing <code>require \"source_file\"</code>. Rubygems enhances <code>require</code> so that it can load files from your installed gems; that is why the error message:</p>\n\n<p><code>rubygems/core_ext/kernel_require.rb:54:in 'require': cannot load such file -- stacklike.rb (LoadError)</code></p>\n\n<p>comes from Rubygems, which assumes you are trying to load a gem named 'stacklike'.</p>\n"}], "owner": {"reputation": 127, "user_id": 5468974, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1109899445687723/picture?type=large", "display_name": "Jason Chu", "link": "https://stackoverflow.com/users/5468974/jason-chu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460594586, "creation_date": 1460588243, "question_id": 36610991, "link": "https://stackoverflow.com/questions/36610991/the-require-method-in-modules-mix-ins", "title": "The #require method in modules mix-ins", "body": "<pre><code>#stacklike.rb file\nmodule Stacklike\n  def stack\n    @stack ||= []\n  end\n\u200b\n  def add_to_stack(obj)\n    stack.push(obj)\n  end\n\u200b\n  def take_from_stack\n    stack.pop\n  end\nend\n\u200b\n#stack.rb file\nrequire \"stacklike\"\n\u200b\nclass Stack\n  include Stacklike\nend\n\u200b\ns = Stack.new\n\u200b\ns.add_to_stack(\"item one\")\ns.add_to_stack(\"item two\")\ns.add_to_stack(\"item three\")\n\u200b\nputs \"Objects currently on the stack:\"\nputs s.stack\n\u200b\ntaken = s.take_from_stack\nputs \"Removed this object:\"\nputs taken\n\u200b\nputs \"Now on stack:\"\nputs s.stack\n\u200b\n\u200b\nruby stack.rb\n=&gt;\n/Users/jchu773/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- stacklike.rb (LoadError)\n    from /Users/jchu773/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from stack.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Hi all, Im reading David Black's Well Grounded Rubyist right now and I'm currently learning Modules. I'm following along in his exercise examples but whenever I use the #require method, the above error pops up, anyone know why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "seeding"], "comments": [{"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1460587334, "post_id": 36610776, "comment_id": 60818425, "body": "Similar question to <a href=\"http://stackoverflow.com/q/1170148/567863\">Run rake task in controller</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1460588220, "post_id": 36610922, "comment_id": 60818739, "body": "I am limiting this use to dev/test environments. We are also using Amazon SES in Sandbox mode, so we only have a limited number of email addresses that will work, and to test again our subscription processes/flow it&#39;s just so convenient to wipe collections. FactoryGirl factories also become quite handy when we need to test creation of new objects fast (atm we don&#39;t have many automated tests, and some people test manually)"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1460904074, "post_id": 36610922, "comment_id": 60945735, "body": "Thanks for your answer. In the end I have exported the code and the requires to a specific method of an utility module."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1460587816, "creation_date": 1460587816, "answer_id": 36610922, "question_id": 36610776, "link": "https://stackoverflow.com/questions/36610776/executing-seeds-rb-from-rails-application/36610922#36610922", "title": "Executing seeds.rb from Rails application", "body": "<p>Assuming you're aware that this isn't a good idea, and it may involve security concerns, you can use <code>Rake::Task[\"&lt;rake_command&gt;\"].execute</code></p>\n\n<p>Where <code>&lt;rake_command&gt;</code> is the statement you'd run after <code>rake</code> from the command line.</p>\n\n<pre><code>require 'rake'\nrequire 'rake/task'\n\n# We want to make sure tasks are loaded without running them more than once:\nRake::Task.clear  \n&lt;AppName&gt;::Application.load_tasks\n\n\nclass SeedsController &lt; ApplicationController\n\n   def run\n     Rake::Task[\"db:seed\"].execute\n\n     redirect_to \"/\" # Or wherever...\n   end\n\nend\n</code></pre>\n\n<p>Out of curiosity, why do you want to do this?</p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 36610922, "answer_count": 1, "score": 1, "last_activity_date": 1460588496, "creation_date": 1460587039, "last_edit_date": 1460588496, "question_id": 36610776, "link": "https://stackoverflow.com/questions/36610776/executing-seeds-rb-from-rails-application", "title": "Executing seeds.rb from Rails application", "body": "<p>I have some buttons to purge collections so it's easy to restore the website to pristine state during development/test, without even restarting the server.</p>\n\n<p>How can I execute the content of seeds.rb inside a controller action ?</p>\n\n<pre><code>def purge\n  if Rails.env.production?\n    should_not_happen(severity: :armageddon)\n  else\n    # Well at least restore one admin account !\n    User.all.each(&amp;:destroy)\n    regenerate_main_admin_accounts # Here I need to replay the content of `seeds.rb`\n    redirect_to(admin_dashboard_path)\n  end\nend\n</code></pre>\n\n<p>Note : the contents of my seeds.rb file make extensive use of conditionals and methods that check for the presence of data, I could run it a billion times there would be no duplicated data in the DB, so I can just run it even if only to restore 1% of what is gone (we're talking dev/test environments here, no time/resource pressure).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api"], "comments": [{"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460589783, "post_id": 36610709, "comment_id": 60819294, "body": "Can you provide your whole form? Above is not showing the beginning of a form, just the inside fields."}, {"owner": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460700545, "post_id": 36610709, "comment_id": 60873302, "body": "Thanks, Check the edit"}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460739536, "post_id": 36610709, "comment_id": 60898928, "body": "Post the exact error you get. I think I know the problem."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "edited": false, "score": 0, "creation_date": 1460756842, "post_id": 36653164, "comment_id": 60907654, "body": "I followed everything you did, even created a new rails app to make sure it wasn&#39;t something else I had messed up... I am getting this error in both applications <code>undefined method `firstName&#39; for #&lt;RecordCheck id: nil, created_at: nil, updated_at: nil&gt;</code>"}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "reply_to_user": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "edited": false, "score": 0, "creation_date": 1460771695, "post_id": 36653164, "comment_id": 60911399, "body": "I had made a mistake with my form, which I revised--had the wrong field names. I also added my schema so you can see my exact database fields, which I suspect is your issue, since your controller does not recognize your method &#39;firstName&#39;. I suspect that&#39;s the issue. Make sure the methods in the form, match the controller. You&#39;ll notice I&#39;m not saving anything to the database for RecordSet, just instantiating the @record_set object."}, {"owner": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "edited": false, "score": 0, "creation_date": 1460785160, "post_id": 36653164, "comment_id": 60913727, "body": "Wow thank you so much @carson you&#39;ve helped me tremendously. Currently a junior dev working solo and I cannot tell you enough how much I appreciate your help."}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "reply_to_user": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "edited": false, "score": 0, "creation_date": 1460822381, "post_id": 36653164, "comment_id": 60924568, "body": "Its always something simple. Good luck @steviepinero!"}], "tags": [], "owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "is_accepted": true, "score": 0, "last_activity_date": 1460771561, "last_edit_date": 1460771561, "creation_date": 1460740477, "answer_id": 36653164, "question_id": 36610709, "link": "https://stackoverflow.com/questions/36610709/how-would-you-assign-variables-to-an-api-call-in-a-rails-controller/36653164#36653164", "title": "How would you assign variables to an api call in a rails controller?", "body": "<p>Looks like you are missing the primary object in your params:</p>\n\n<p>Your @options variable should use <strong>params[:record_check][:attribute]</strong>  instead of <strong>params[:attribute]</strong>.</p>\n\n<p>So params[:firstName] => params[:record_check][:firstName]</p>\n\n<p>Here is my controller record_checks_controller.rb:</p>\n\n<pre><code>class RecordChecksController &lt; ApplicationController\n\n  def new\n    @record_check = RecordCheck.new\n  end\n\n  def create\n    @options = {\n    :credentials =&gt; {\n    :account_id =&gt; \"XXXXXX\",\n    :api_key =&gt; \"MCYTAzCBbulF6X2M2H9tP5lOlsWXX\"\n    },\n    :product =&gt; \"criminal_database\",\n      :data =&gt; {\n      :FirstName =&gt; params[:record_check][:first_name],\n      :LastName =&gt; params[:record_check][:last_name],\n      :MiddleName =&gt; params[:record_check][:middle_name],\n      :Address =&gt; params[:record_check][:address],\n      :City =&gt; params[:record_check][:city],\n      :State =&gt; params[:record_check][:state],\n      :Zip =&gt; params[:record_check][:zip],\n      :County =&gt; params[:record_check][:county],\n      :DOB =&gt; params[:record_check][:dob],\n      :AgeMin =&gt; 0,\n      :AgeMax =&gt; 120,\n      :Limit =&gt; 1,\n      :ExactMatch =&gt; \"yes\"\n      }\n  }\n  @opt = JSON.generate(@options)\n  @url = 'https://api.imsasllc.com/v3/'\n  @response = HTTParty.post(@url, body: @opt, :headers =&gt; {'Content-Type' =&gt; 'application/json' })\n  @parsed = JSON.parse(@response.body)\n  #byebug\n  p @parsed\n  end\nend\n</code></pre>\n\n<p>My model record_check.rb</p>\n\n<pre><code>class RecordCheck &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>And my form new.html.erb:</p>\n\n<pre><code>&lt;%= form_for(@record_check) do |f| %&gt;\n  &lt;%= f.text_field :first_name, :placeholder =&gt; \"First Name\" %&gt;\n  &lt;%= f.text_field :last_name, :placeholder =&gt; \"Last Name\" %&gt;\n  &lt;%= f.text_field :middle_name, :placeholder =&gt; \"Middle Name (optional)\" %&gt;\n  &lt;%= f.text_field :address, :placeholder =&gt; \"Address (optional)\" %&gt;\n  &lt;%= f.text_field :city, :placeholder =&gt; \"City (optional)\" %&gt;\n  &lt;%= f.text_field :state, :placeholder =&gt; \"State (optional)\" %&gt;\n  &lt;%= f.text_field :zip, :placeholder =&gt; \"Zip Code (optional)\" %&gt;\n  &lt;%= f.text_field :county, :placeholder =&gt; \"County (optional)\" %&gt;\n  &lt;%= f.date_select :dob, {order: [:month, :day, :year], prompt: { day: 'Select day', month: 'Select month', year: 'Select year' }, start_year: Date.today.year - 18, end_year: Date.today.year - 100}, {required: true} %&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Get Background Check\", class: \"btn-submit\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My create.html.erb view:</p>\n\n<pre><code>&lt;%= @parsed %&gt;\n</code></pre>\n\n<p>My schema for RecordCheck:</p>\n\n<pre><code>  create_table \"record_checks\", force: :cascade do |t|\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n    t.string   \"middle_name\"\n    t.string   \"address\"\n    t.string   \"city\"\n    t.string   \"state\"\n    t.string   \"zip\"\n    t.string   \"county\"\n    t.date     \"dob\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n</code></pre>\n\n<p>Resulting view:</p>\n\n<pre><code>{\"Results\"=&gt;{\"Time\"=&gt;0.20036697387695, \"Message\"=&gt;\"NO RECORDS FOUND\", \"TotalRecords\"=&gt;0, \"Inputs\"=&gt;{\"Account\"=&gt;\"128006\", \"FirstName\"=&gt;\"John\", \"LastName\"=&gt;\"Doe\", \"AgeMin\"=&gt;1, \"AgeMax\"=&gt;120, \"ExactMatch\"=&gt;\"yes\", \"Limit\"=&gt;1}, \"Product\"=&gt;\"criminal_database\", \"Records\"=&gt;[]}}\n</code></pre>\n\n<p>That's a pretty good API. I don't have any criminal records, thank god.</p>\n"}], "owner": {"reputation": 3, "user_id": 5910638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kibr-q2SjuE/AAAAAAAAAAI/AAAAAAAACPg/EcFLBiyNtb0/photo.jpg?sz=128", "display_name": "stevie pinero", "link": "https://stackoverflow.com/users/5910638/stevie-pinero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 36653164, "answer_count": 1, "score": 0, "last_activity_date": 1460771561, "creation_date": 1460586613, "last_edit_date": 1460610249, "question_id": 36610709, "link": "https://stackoverflow.com/questions/36610709/how-would-you-assign-variables-to-an-api-call-in-a-rails-controller", "title": "How would you assign variables to an api call in a rails controller?", "body": "<p>I'm trying to get input from the user and assign that input to a variable and then post to an API. </p>\n\n<pre><code>     @options = {\n  :credentials =&gt; {\n    :account_id =&gt; \"12345\",\n    :api_key =&gt; \"mysecretapikey123456\"\n  },\n  :product =&gt; \"criminal_database\",\n  :data =&gt; {\n  :FirstName =&gt; params[:firstName],\n  :LastName =&gt; params[:lastName],\n  :MiddleName =&gt; params[:middleName],\n  :Address =&gt; params[:address],\n  :City =&gt; params[:city],\n  :State =&gt; params[:state],\n  :Zip =&gt; params[:zip],\n  :County =&gt; params[:county],\n  :DOB =&gt; params[:DOB],\n  :AgeMin =&gt; 0,\n  :AgeMax =&gt; 120,\n  :Limit =&gt; 1,\n  :ExactMatch =&gt; \"yes\"\n}\n}\n  @opt = JSON.generate(@options)\n@url = 'https://api.imsasllc.com/v3/'\n@response = HTTParty.post(@url, body: @opt, :headers =&gt; {'Content-Type' =&gt; 'application/json' })\n@parsed = JSON.parse(@response.body)\n#byebug\np @parsed\n</code></pre>\n\n<p>Above is how I'm attempting to send everything.</p>\n\n<p>Below is the form that I'm using.</p>\n\n<pre><code>   &lt;%= form_for(@record_check) do |f| %&gt;\n  &lt;% if @record_check.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@record_check.errors.count, \"error\") %&gt; prohibited this record_check from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @record_check.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n     &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n  &lt;%= f.text_field :firstName, :placeholder =&gt; \"First Name\" %&gt;\n  &lt;%= f.text_field :lastName, :placeholder =&gt; \"Last Name\" %&gt;\n  &lt;%= f.text_field :middleName, :placeholder =&gt; \"Middle Name (optional)\" %&gt;\n  &lt;%= f.text_field :address, :placeholder =&gt; \"Address (optional)\" %&gt;\n  &lt;%= f.text_field :city, :placeholder =&gt; \"City (optional)\" %&gt;\n  &lt;%= f.text_field :state, :placeholder =&gt; \"State (optional)\" %&gt;\n  &lt;%= f.text_field :zip, :placeholder =&gt; \"Zip Code (optional)\" %&gt;\n  &lt;%= f.text_field :county, :placeholder =&gt; \"County (optional)\" %&gt;\n  &lt;%= f.date_select :DOB, {order: [:month, :day, :year], prompt: { day: 'Select day', month: 'Select month', year: 'Select year' }, start_year: Date.today.year - 18, end_year: Date.today.year - 100}, {required: true} %&gt;\n  &lt;div class=\"actions\"&gt;\n  &lt;%= f.submit \"Get Background Check\", class: \"btn-submit\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Whenever I submit the form, the API returns an error stating that nothing was posted to it. I'm stumped; I've been working on this for a couple of days... How am I supposed to submit the form input to the method in my controller?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "decimal"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1460586217, "creation_date": 1460586217, "answer_id": 36610635, "question_id": 36610487, "link": "https://stackoverflow.com/questions/36610487/rails-mysql-errors-out-of-range-value-even-though-the-range-should-be-ok/36610635#36610635", "title": "Rails - MySQL errors &quot;Out of range value&quot; even though the range should be ok?", "body": "<p>A <code>DECIMAL(10,6)</code> allows for 4 places before the decimal, 6 after, for a total of 10, but 14,400 requires 5. You'll need <code>DECIMAL(11,6)</code> or <code>DECIMAL(10,5)</code> to handle that value.</p>\n\n<p>If you're dealing with time-zone offsets, <code>DECIMAL(10,2)</code> should be more than sufficient if this is in hours. If in seconds you don't need any decimal places at all.</p>\n\n<p>Additionally, remember that time-zone offsets change wildly over the course of the year and are not fixed things, and in many cases are not even predictable. The whims of politicians can change them at any time.</p>\n"}, {"tags": [], "owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1460586238, "creation_date": 1460586238, "answer_id": 36610640, "question_id": 36610487, "link": "https://stackoverflow.com/questions/36610487/rails-mysql-errors-out-of-range-value-even-though-the-range-should-be-ok/36610640#36610640", "title": "Rails - MySQL errors &quot;Out of range value&quot; even though the range should be ok?", "body": "<p><code>DECIMAL(10,6)</code> means 10 digits, <em>including</em> 6 after the decimal point.  That is, +/-9999.999999 is the limit.</p>\n\n<p>If that is supposed to be minutes, then you have 10 days; is that what you wanted?</p>\n\n<p>For seconds, 86400 is one day, so <code>DECIMAL(11,6)</code> might be what you wanted.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 36610635, "answer_count": 2, "score": 0, "last_activity_date": 1460586238, "creation_date": 1460585512, "question_id": 36610487, "link": "https://stackoverflow.com/questions/36610487/rails-mysql-errors-out-of-range-value-even-though-the-range-should-be-ok", "title": "Rails - MySQL errors &quot;Out of range value&quot; even though the range should be ok?", "body": "<p>This is my column:</p>\n\n<pre><code>t.decimal  \"update_timezone_offset\",     precision: 10, scale: 6\n</code></pre>\n\n<p>This is the value I am trying to save:</p>\n\n<pre><code>-14400\n</code></pre>\n\n<p>And I get this error:</p>\n\n<pre><code>Mysql2::Error: Out of range value for column 'update_timezone_offset' at row 1:\n</code></pre>\n\n<p>I also tried <code>variable_with_the_amount.to_f</code>, but the result was the same.</p>\n\n<p>What am I overlooking?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460586404, "post_id": 36610642, "comment_id": 60818024, "body": "This errors out since. title is not a constant or not defined in the scope"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460586508, "post_id": 36610642, "comment_id": 60818062, "body": "If that is the case, then the OP&#39;s question doesn&#39;t make sense. The OP&#39;s code assumes that he can call a method named <code>title</code> on the object referenced by the variable <code>post</code>. My answer merely makes the exact same assumptions as the OP&#39;s question does. The OP&#39;s question is solely about how to get a reference to the object, it is not about how to define a method named <code>title</code>. I&#39;m assuming the OP already knows how to define methods."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460586676, "post_id": 36610642, "comment_id": 60818136, "body": "No, I haven&#39;t. I won&#39;t install Rails just to test one line of code. I have, however, tested an equivalent piece of code that shows that my solution works under the assumptions made in the OP&#39;s code, namely that there exists a method <code>title</code> whose implementation is missing from the question. Maybe, the model has a <code>title</code> column in the database, maybe the method is defined in another file, I don&#39;t know. All I know is: the method exists in the question, therefore I can also assume that it exists in the answer. Again: the question is <i>not</i> about how to define a method named <code>title</code>, that method \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460586849, "post_id": 36610642, "comment_id": 60818214, "body": "\u2026 is already assumed to exist by the code in the OP&#39;s question. The question is about how to get a reference to the receiver in a singleton method."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460587104, "post_id": 36610642, "comment_id": 60818330, "body": "well, thats why I used @title in my answer"}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1460591764, "post_id": 36610642, "comment_id": 60819929, "body": "I do see <code>self</code> returns <code>#&lt;Class:#&lt;PaymentRequestx::PaymentRequest:0x0000000ca6d4a0&gt;&gt;</code> which is the instance. However how can I retrieve the value of field such as <code>id</code>? Type <code>id</code> in debug returns <code>undefined local variable or method </code>id&#39; for #&lt;Class:0x0000000b391b00&gt;`"}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1460592400, "post_id": 36610642, "comment_id": 60820096, "body": "Under <code>self.columns</code> there are names of the attributes. But I did not find the value of the attribute."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1460586259, "creation_date": 1460586259, "answer_id": 36610642, "question_id": 36610411, "link": "https://stackoverflow.com/questions/36610411/possible-to-retrieve-value-of-instance-which-singleton-class-is-attached-to/36610642#36610642", "title": "Possible to retrieve value of instance which singleton class is attached to?", "body": "<p>Yes. Inside a method, the special variable <code>self</code> holds a reference to the receiver of the message:</p>\n\n<pre><code>class MyPost &lt; ActiveRecord::Base\n  def initialize(title)\n    @title = title\n  end\nend\n\npost = MyPost.new(title: 'post title')\n\ndef post.some_method\n  my_post_title = title\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1460587164, "post_id": 36610645, "comment_id": 60818359, "body": "The downvoter can you specify whats wrong with program?"}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1460592336, "post_id": 36610645, "comment_id": 60820079, "body": "<code>title</code> returns <code>nil</code> in debug."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1460639620, "post_id": 36610645, "comment_id": 60844341, "body": "I have two ways of doing it.. please see which one works for you"}], "tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": true, "score": 1, "last_activity_date": 1460639632, "last_edit_date": 1460639632, "creation_date": 1460586269, "answer_id": 36610645, "question_id": 36610411, "link": "https://stackoverflow.com/questions/36610411/possible-to-retrieve-value-of-instance-which-singleton-class-is-attached-to/36610645#36610645", "title": "Possible to retrieve value of instance which singleton class is attached to?", "body": "<p>There are errors: \n1. unending single quote in the title.\n2. when you are inside the <code>post</code> then you can access directly @title, you cannot call it <code>post.title</code></p>\n\n<pre><code>class MyPost &lt; ActiveRecord::Base\n  def initialize(title)\n    @title = title\n  end\nend\n\npost = MyPost.new(:title =&gt; 'post title')\n\ndef post.some_method\n  my_post_title = @title\nend\n\npost.some_method\n</code></pre>\n\n<p>or if you have set your attr_accessor for your <code>title</code></p>\n\n<pre><code>require 'active_record'\n\nclass MyPost &lt; ActiveRecord::Base\n  attr_accessor :title\n  def initialize(title)\n    @title = title\n  end\nend\n\npost = MyPost.new(:title =&gt; 'post title')\n\ndef post.some_method\n  my_post_title = title\nend\n</code></pre>\n"}], "owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 36610645, "answer_count": 2, "score": 0, "last_activity_date": 1460639632, "creation_date": 1460585064, "last_edit_date": 1460594876, "question_id": 36610411, "link": "https://stackoverflow.com/questions/36610411/possible-to-retrieve-value-of-instance-which-singleton-class-is-attached-to", "title": "Possible to retrieve value of instance which singleton class is attached to?", "body": "<p>Here is a example of singleton class:</p>\n\n<pre><code>class MyPost &lt; ActiveRecord::Base\n  def initialize(title)\n    @title = title\n  end\nend\n\npost = MyPost.new(:title =&gt; 'post title')\n\ndef post.some_method\n  #is it possible to retrieve value of `post`?\n  my_post_title = post.title #???. Not working now\nend\n</code></pre>\n\n<p>Is it possible to refer back to <code>post</code> in <code>def post.some_method</code>?</p>\n"}, {"tags": ["ruby", "ajax", "xmlhttprequest", "google-chrome-devtools"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1460589013, "post_id": 36610339, "comment_id": 60819014, "body": "Welcome to Stack Overflow. &quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it.&quot;"}, {"owner": {"reputation": 45, "user_id": 4761362, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036148259745849/picture?type=large", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/4761362/chintan-vadgama"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1460590580, "post_id": 36610339, "comment_id": 60819549, "body": "I have a host <a href=\"http://www.shopstyle.com\" rel=\"nofollow noreferrer\">www.shopstyle.com</a>  Now, I have a regression test plan in which I have to validate <code>Request Headers</code> <code>Response Headers</code> &amp; <code>Request Payload</code> manually everytime. Currently, I am using Chrome Dev Tools--&gt; Network utility. So, I am trying to develop a proxy script which will trace all HTTP requests &amp; give me <code>Request Headers</code> <code>Response Headers</code> &amp; <code>Request Payload</code> for particular filter. I have researched on <code>mechanize</code> &amp; <code>HTTParty</code> gem but both are not giving appropriate o/ps acc to my application."}], "owner": {"reputation": 45, "user_id": 4761362, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036148259745849/picture?type=large", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/4761362/chintan-vadgama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460584675, "creation_date": 1460584675, "question_id": 36610339, "link": "https://stackoverflow.com/questions/36610339/how-to-validate-xhr-header-information", "title": "How to validate XHR Header information?", "body": "<p>I am testing a regression test suite manually. In that, I am validation various <code>xmlHTTPrequests</code> header information.</p>\n\n<p>As of now I am using <code>Chrome Developer Tools</code> to inspect the web traffic but it seem like it's taking too long to test the suite manually. I want to automate that. I am a new to <code>AJAX</code> &amp; really don't know what are the libraries available to do that.</p>\n\n<p>I want to get all the <code>XHR Payload</code> information &amp; store it into some format like <code>JSON</code>.</p>\n\n<p>Is there any <code>ruby gem</code> available to do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 1274, "user_id": 2056908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377dc7a85bd71485eb514a49d64e362?s=128&d=identicon&r=PG", "display_name": "mattsch", "link": "https://stackoverflow.com/users/2056908/mattsch"}, "edited": false, "score": 1, "creation_date": 1481559242, "post_id": 36610268, "comment_id": 69414050, "body": "I&#39;ve also run into this problem @john-hamlett-iv - did you end up solving this?"}, {"owner": {"reputation": 5648, "user_id": 1492005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jLmY9.jpg?s=128&g=1", "display_name": "Jaison Brooks", "link": "https://stackoverflow.com/users/1492005/jaison-brooks"}, "edited": false, "score": 1, "creation_date": 1493676706, "post_id": 36610268, "comment_id": 74498264, "body": "im running into this problem as well. its baffling how many others have this same issue. i&#39;ve recreated the environment and still the issue persists."}, {"owner": {"reputation": 121, "user_id": 1391412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd87b13b005b39968024203329f9d91?s=128&d=identicon&r=PG", "display_name": "Minto Tsai", "link": "https://stackoverflow.com/users/1391412/minto-tsai"}, "edited": false, "score": 0, "creation_date": 1593871867, "post_id": 36610268, "comment_id": 110931240, "body": "For me, modifying the nginx config by replacing &quot;/assets&quot; with &quot;^assets&quot; worked. See <a href=\"https://stackoverflow.com/a/35489137/1391412\">stackoverflow.com/a/35489137/1391412</a>"}], "answers": [{"tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": false, "score": 0, "last_activity_date": 1553187520, "creation_date": 1553187520, "answer_id": 55285597, "question_id": 36610268, "link": "https://stackoverflow.com/questions/36610268/elastic-beanstalk-not-loading-assets-for-ruby-on-rails/55285597#55285597", "title": "Elastic Beanstalk not loading assets for Ruby on Rails", "body": "<p>This is due to Nginx config (in <code>/etc/nginx/conf.d/webapp_healthd.conf</code>).<br>\nWhen a request for /assets/anything is made, Nginx will look by itself in <code>/var/app/current/public/assets</code>.<br>\nThis means any asset not present in /public/assets won't load</p>\n\n<p>My ugly solution:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config/application.rb\nconfig.assets.prefix = '/some_other_path'\n</code></pre>\n\n<p>Note that this will slow assets requests as those will be processed by Puma and not directly by Nginx.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11342385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52aa2c3bc36f64d1ba75d9c7fd3ace4e?s=128&d=identicon&r=PG&f=1", "display_name": "g4k13", "link": "https://stackoverflow.com/users/11342385/g4k13"}, "is_accepted": false, "score": 0, "last_activity_date": 1555426780, "creation_date": 1555426780, "answer_id": 55711196, "question_id": 36610268, "link": "https://stackoverflow.com/questions/36610268/elastic-beanstalk-not-loading-assets-for-ruby-on-rails/55711196#55711196", "title": "Elastic Beanstalk not loading assets for Ruby on Rails", "body": "<p>I encountered a similar error when deploying my React on Rails 5 application to Elastic Beanstalk for production (was previously in Heroku in production). I came to solution from a different angle, adjusting the nginx default configuration. My problem was content from <code>public/packs/</code> was not being served as <code>packs/</code>, which is how the <code>&lt;%= javascript_pack_tag 'application' %&gt;</code>  was producing the link in <code>app/views/layouts/application.html.erb</code>. I added the following location directive at the end of /etc/nginx/conf.d/webapp_healthd.conf to remedy the issue:</p>\n\n<pre><code>  location /packs {\n    alias /var/app/current/public/packs;\n    gzip_static on;\n    expires 1y;\n    add_header Cache-Control public;\n    add_header Last-Modified \"\";\n    add_header ETag \"\";\n  }\n</code></pre>\n\n<p>After ssh-ing into the app server, adding this directive, and <code>sudo su; service nginx restart</code>, static content from <code>public/packs/</code> was correctly served as <code>packs/</code>. I believe this location directive can be added through a config file in <code>.ebextensions</code> to automate this change to the default elastic beanstalk nginx conf file. </p>\n"}], "owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 879, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1555426780, "creation_date": 1460584395, "question_id": 36610268, "link": "https://stackoverflow.com/questions/36610268/elastic-beanstalk-not-loading-assets-for-ruby-on-rails", "title": "Elastic Beanstalk not loading assets for Ruby on Rails", "body": "<p>I have a ruby on rails application that works locally in production locally but will not work when I upload it to EB, It breaks everything. </p>\n\n<p>When it is local it looks like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/3iXpd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3iXpd.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here is my eb site, I have included on with the errors form the console, but you get the idea</p>\n\n<p><a href=\"https://i.stack.imgur.com/EEZCf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EEZCf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my production.rb</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Enable Rack::Cache to put a simple HTTP cache in front of your application\n  # Add `rack-cache` to your Gemfile before enabling this.\n  # For large-scale production use, consider using a caching reverse proxy like\n  # NGINX, varnish or squid.\n  # config.action_dispatch.rack_cache = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.serve_static_files = true\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = true\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  # config.log_tags = [ :subdomain, :uuid ]\n\n  # Use a different logger for distributed setups.\n  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>I have tried making</p>\n\n<pre><code>  config.serve_static_files = true\n  config.assets.compile = true\n</code></pre>\n\n<p>False and it still doesn't work.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1460607456, "post_id": 36610223, "comment_id": 60824240, "body": "do u want to understand the concept of serialization? or what"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1460617749, "post_id": 36610223, "comment_id": 60828510, "body": "I want to pass params from controller to serializer. Thats all I expect"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460618749, "post_id": 36616170, "comment_id": 60829144, "body": "I use <code>render json: @books, each_serializer: BookSerializer</code> and I would like to pass addition param along with @books. Something like <code>render json: @books, name: &#39;John&#39;, each_serializer: BookSerializer</code> and then have access in to <code>title</code> in serializer to <code>name</code> but above doesnt work or I cant fetch this param then"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460618886, "post_id": 36616170, "comment_id": 60829232, "body": "do you know what I want now?"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460618928, "post_id": 36616170, "comment_id": 60829268, "body": "yes i know what you want know the link which i have provided will solve your problem if it doesn&#39;t tell me"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460619591, "post_id": 36616170, "comment_id": 60829720, "body": "well I could use scope but how to pass more than one param then?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460620372, "post_id": 36616170, "comment_id": 60830234, "body": "still dont know how to pass params"}], "tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1460618867, "last_edit_date": 1460618867, "creation_date": 1460618114, "answer_id": 36616170, "question_id": 36610223, "link": "https://stackoverflow.com/questions/36610223/rails-serializer-passing-parametr/36616170#36616170", "title": "Rails - serializer passing parametr", "body": "<p>This is the link which will help you with it <a href=\"https://www.youtube.com/watch?v=XrpcuRCaAuA\" rel=\"nofollow\">link</a>\nFirst create a serializer in the serializer folder.<br></p>\n\n<pre><code>class AttachmentSerializer &lt; ActiveModel::Serializer\n    attributes :id, :attachment_url\n\n    def attachment_url\n        object.attachment_url\n    end\n\nend\n</code></pre>\n\n<p><br>\nThen in your controller you can do something like this <br></p>\n\n<pre><code>params.require(:model-name).permit( :attachment)\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460618867, "creation_date": 1460584248, "question_id": 36610223, "link": "https://stackoverflow.com/questions/36610223/rails-serializer-passing-parametr", "title": "Rails - serializer passing parametr", "body": "<p>I use <code>active_model_serializers (0.9.2)</code>. I've been studying documention, stack and source code and still cant find some way to pass some parameter to serializer. The only one workaround is using <code>default scope</code></p>\n\n<pre><code>def default_serializer_options\n  {\n    scope: some_param\n  }\nend\n</code></pre>\n\n<p>@options, options orserialization_options seems to be not working for me.</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1460589298, "post_id": 36609762, "comment_id": 60819113, "body": "Are you sure it works with the missing end tag (clicking the button, not just pressing enter)? I think what is happening is that the missing <code>&gt;</code> is causing the browser to parse the closing <code>&lt;&#47;form&gt;</code> as  two attributes to the input: <code>&lt;</code>  (which isn\u2019t valid) and <code>form</code> (it seems to ignore the <code>&#47;</code> altogether). In HTML, <code>input</code> elements can have a <code>form</code> attribute, and so the result is the submit button is being associated with a non-existent form instead of the parent form, so clicking it has effect."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1460589354, "post_id": 36609762, "comment_id": 60819135, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your code has syntax errors; Both occurrences of <code>first_names</code> are undefined, however <code>@first_names</code> is only assigned in your <code>get</code> handler. As @matt says, you&#39;re missing the trailing <code>&gt;</code>, however browsers might be able to do some fix-up and render the page correctly. Still, you should make your HTML be syntactically correct too."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1460592197, "post_id": 36609762, "comment_id": 60820043, "body": "I just put the relevant code that was part of the problem. I can extend my question, i understand, i was trying to be Minimal."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1460592222, "post_id": 36609762, "comment_id": 60820050, "body": "@matt thanks, that makes sense"}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1460592750, "post_id": 36609762, "comment_id": 60820185, "body": "but clicking it submits a request (with the missing <code>&gt;</code>) when its the right action. thats the weird part. But doesn&#39;t throw an error when its the wrong action. just doesn&#39;t submit any request"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1460594470, "post_id": 36609762, "comment_id": 60820586, "body": "What browser are you using? When I try with Chrome, Firefox or Safari it <i>doesn\u2019t</i> work by clicking the button when the <code>&lt;</code> is missing (it does work if you press enter)."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1460597525, "post_id": 36609762, "comment_id": 60821409, "body": "I&#39;m using chrome, i think what was happening was i was hitting enter to submit the form. Which does work, but doesn&#39;t throw an error when i submit the form with enter with the wrong action."}], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1460592660, "post_id": 36610306, "comment_id": 60820166, "body": "<code>first_names</code> is just instantiated in the <code>app.rb</code> as an empty array."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1460639905, "post_id": 36610306, "comment_id": 60844581, "body": "not if the action is wrong, the problem is that it isn&#39;t giving me a problem."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3183124"}, "is_accepted": false, "score": 0, "last_activity_date": 1460584559, "creation_date": 1460584559, "answer_id": 36610306, "question_id": 36609762, "link": "https://stackoverflow.com/questions/36609762/why-does-this-post-request-work-and-not-work/36610306#36610306", "title": "Why does this `POST` request work and not work", "body": "<p>If you close the input tag and try to misspell action as <code>'/addd_name'</code> you'll get that ditty error :)</p>\n\n<p>It that case, browser do not handle your \"form\" as a form. Check your network tab from developer console. You'll see that nothing happens when you click submit button. </p>\n\n<p>Btw, if you've not declared  (e.g. in <code>configure do ... end</code> block) <code>first_names</code> array, you'll get another error - nilClass or sth like that. </p>\n"}], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460592436, "creation_date": 1460582385, "last_edit_date": 1460592436, "question_id": 36609762, "link": "https://stackoverflow.com/questions/36609762/why-does-this-post-request-work-and-not-work", "title": "Why does this `POST` request work and not work", "body": "<p>I was demoing an app for a class I was teaching and ran into a bug. I was demo'ing <code>POST</code> requests in a Sinatra application. Here's my routes:</p>\n\n<pre><code>require \"bundler/setup\"\nrequire \"sinatra\"\nrequire \"sinatra/reloader\"\nfirst_names = []\nget '/' do\n  @first_names = first_names\n  erb :index\nend\n\npost '/add_name' do\n  first_names &lt;&lt; params[:first_name]\n  redirect \"/\"\nend\n</code></pre>\n\n<p>In the <code>index.erb</code>:</p>\n\n<pre><code>&lt;h1&gt;All Names&lt;/h1&gt;\n&lt;% @first_names.each do |name| %&gt;\n  &lt;div&gt;&lt;%= name %&gt;&lt;/div&gt;\n&lt;% end %&gt;\n&lt;h2&gt;Enter New Name Here and Hit Enter&lt;/h2&gt;\n&lt;form action=\"add_name\" method=\"post\"&gt;\n  &lt;input name='first_name'&gt;\n  &lt;input type=\"submit\" value=\"Add First Name\"\n&lt;/form&gt;\n</code></pre>\n\n<p>Gemfile: </p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem \"sinatra\"\ngem \"sinatra-contrib\"\n</code></pre>\n\n<p>Notice the unclosed <code>input</code> tag in the form. THIS actually works. Which is fine, HTML is buggy? But the part, that trips me up, is if I change the <code>action</code> of the form to <code>addd_name</code>(mispelled). It doesn't give me the error I expect. \"Sinatra doesn't know this diddy....\" It just does nothing. Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1460583671, "post_id": 36609727, "comment_id": 60816850, "body": "Try <code>&lt;%= link_to &quot;delete contact&quot;, contact_path(contact), method: :delete,                                     data: { confirm: &quot;You sure?&quot; } %&gt;</code>"}, {"owner": {"reputation": 108, "user_id": 3092696, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4288f364962a1a1cc477dde8a93fbf9d?s=128&d=identicon&r=PG&f=1", "display_name": "ncarroll", "link": "https://stackoverflow.com/users/3092696/ncarroll"}, "reply_to_user": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1460590575, "post_id": 36609727, "comment_id": 60819548, "body": "Same routing error, unfortunately."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3803385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1078b3d35e80b57857d36bd6fd997697?s=128&d=identicon&r=PG&f=1", "display_name": "regulation_d", "link": "https://stackoverflow.com/users/3803385/regulation-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1460594706, "creation_date": 1460594706, "answer_id": 36611923, "question_id": 36609727, "link": "https://stackoverflow.com/questions/36609727/rails-missing-routes-helper-prefix/36611923#36611923", "title": "Rails - missing routes helper prefix", "body": "<p>you may have a conflict between the routes set by </p>\n\n<pre><code> resources :contacts\n</code></pre>\n\n<p>and</p>\n\n<pre><code>get 'contact' =&gt; 'static_pages#contact'\n</code></pre>\n\n<p>The easiest solution is probably to change the static page's links. Best to keep the resources together if you can.</p>\n"}, {"tags": [], "owner": {"reputation": 982, "user_id": 6554662, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154470556032446/picture?type=large", "display_name": "Andy", "link": "https://stackoverflow.com/users/6554662/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1482230639, "creation_date": 1482230639, "answer_id": 41240430, "question_id": 36609727, "link": "https://stackoverflow.com/questions/36609727/rails-missing-routes-helper-prefix/41240430#41240430", "title": "Rails - missing routes helper prefix", "body": "<p>I just came across this same error.</p>\n\n<p>the fix to my issue was that 's' at the end of resources</p>\n\n<p>I had 'resource', and getting the same problem as you.</p>\n\n<p>I changed it to 'resources' and it fixed my problem</p>\n\n<p>in my case was just a typo.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 5790261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/225b212bb482ad5456e4fa6a1a43593a?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/5790261/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1493392870, "creation_date": 1493392870, "answer_id": 43683694, "question_id": 36609727, "link": "https://stackoverflow.com/questions/36609727/rails-missing-routes-helper-prefix/43683694#43683694", "title": "Rails - missing routes helper prefix", "body": "<p>This error showed up for me yesterday. What fixed it was deleting helper files that were not being used. Might be worth a try for you.</p>\n"}], "owner": {"reputation": 108, "user_id": 3092696, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4288f364962a1a1cc477dde8a93fbf9d?s=128&d=identicon&r=PG&f=1", "display_name": "ncarroll", "link": "https://stackoverflow.com/users/3092696/ncarroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 36611923, "answer_count": 3, "score": 2, "last_activity_date": 1493392870, "creation_date": 1460582231, "question_id": 36609727, "link": "https://stackoverflow.com/questions/36609727/rails-missing-routes-helper-prefix", "title": "Rails - missing routes helper prefix", "body": "<p>I am missing the contacts#show prefix 'contact' as seen below.</p>\n\n<p>rake routes</p>\n\n<pre><code>               contacts GET    /contacts(.:format)                     contacts#index\n                        POST   /contacts(.:format)                     contacts#create\n            new_contact GET    /contacts/new(.:format)                 contacts#new\n           edit_contact GET    /contacts/:id/edit(.:format)            contacts#edit\n                        GET    /contacts/:id(.:format)                 contacts#show\n                        PATCH  /contacts/:id(.:format)                 contacts#update\n                        PUT    /contacts/:id(.:format)                 contacts#update\n                        DELETE /contacts/:id(.:format)                 contacts#destroy\n</code></pre>\n\n<p>I am thinking this is the reason why I am getting a dot instead of a slash when clicking the following link. </p>\n\n<p>_contact.html.erb</p>\n\n<pre><code>&lt;%= link_to \"delete contact\", contact, method: :delete,\n                                    data: { confirm: \"You sure?\" } %&gt;\n</code></pre>\n\n<p>The server logs the proper DELETE request, however, cannot render /contact.26 instead of the correct /contacts/26.</p>\n\n<pre><code>Started DELETE \"/contact.26\" for 128.177.12.30 at 2016-04-13 21:04:30 +0000\n\nActionController::RoutingError (No route matches [DELETE] \"/contact.26\"):\n</code></pre>\n\n<p>Every post I've come across with a dot instead of a slash seems to stem from a pluralization error, however, I don't believe this is the case here.  </p>\n\n<p>In addition, I've removed resources :contacts from my routes file, run $ rake routes, added resources :contacts, run $ rake routes, and the problem persists. </p>\n\n<p>This problem seems to be unique to the contacts model, as the rest of my models aren't missing any prefixes or having this error when deleting.</p>\n\n<p>How do I add the 'contact' prefix back to 'contacts#show'?</p>\n\n<p>routes.rb file for reference:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'static_pages#home'\n  get 'help' =&gt; 'static_pages#help'\n  get 'about' =&gt; 'static_pages#about'\n  get 'contact' =&gt; 'static_pages#contact'\n  get 'signup' =&gt; 'users#new'\n  get 'login' =&gt; 'sessions#new'\n  get 'newevent' =&gt; 'events#new'\n  get 'newteam' =&gt; 'teams#new'\n  get 'newperformance' =&gt; 'performances#new'\n  get 'newhotel' =&gt; 'hotels#new'\n  get 'newcontact' =&gt; 'contacts#new'\n  get 'newflight' =&gt; 'flights#new'\n  get 'newground' =&gt; 'grounds#new'\n  get 'newguest' =&gt; 'guests#new'\n  post 'login' =&gt; 'sessions#create'\n  delete 'logout' =&gt; 'sessions#destroy'\n  resources :users\n  resources :events\n  resources :teams do\n    member do\n      get :events\n    end\n  end\n  resources :performances\n  resources :hotels\n  resources :contacts\n  resources :flights\n  resources :grounds\n  resources :guests\n  resources :account_activations, only: [:edit]\n  resources :password_resets, only: [:new, :create, :edit, :update]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1460581350, "post_id": 36609169, "comment_id": 60815628, "body": "Is it throwing an error when you try to access those routes"}, {"owner": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "edited": false, "score": 1, "creation_date": 1460582735, "post_id": 36609169, "comment_id": 60816371, "body": "Have you read the rails source code?"}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460590905, "post_id": 36609169, "comment_id": 60819635, "body": "I think you have something else going on in your routes file, since your rake routes are not outputting normally. You shouldn&#39;t have &#39;signups_index&#39; or &#39;new_signups&#39;. I&#39;d figure it out since their is nothing unusual about &#39;signups&#39; as a resource which would require any special inflection."}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460592667, "post_id": 36609169, "comment_id": 60934546, "body": "I suspect if you look in your routes, you&#39;ll find that you have get &#39;signups/index&#39; which is why you have a route name of &quot;signups_index&quot;, instead of &quot;signups&quot;. The same likely goes for the other deviations in route names. Paste your whole routes here and we can take a look."}, {"owner": {"reputation": 318, "user_id": 2959090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecab5392ceea34c60ad3d723617d127a?s=128&d=identicon&r=PG&f=1", "display_name": "siopao", "link": "https://stackoverflow.com/users/2959090/siopao"}, "edited": false, "score": 0, "creation_date": 1460655022, "post_id": 36609169, "comment_id": 60934547, "body": "I mentioned in the post that I removed every other route except signups to isolate it."}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1460666468, "post_id": 36609169, "comment_id": 60934548, "body": "All I&#39;m saying is that your routes are not what you should be getting if all you have in your routes is &#39;resources :signups&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "edited": false, "score": 0, "creation_date": 1460582571, "post_id": 36609699, "comment_id": 60816291, "body": "you should add more context, i don&#39;t think the poster understands."}], "tags": [], "owner": {"reputation": 309, "user_id": 2403892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07419a5b0760e65a14ef9cf5c9cfbf9?s=128&d=identicon&r=PG", "display_name": "Stuart Hannig", "link": "https://stackoverflow.com/users/2403892/stuart-hannig"}, "is_accepted": true, "score": 1, "last_activity_date": 1460582124, "creation_date": 1460582124, "answer_id": 36609699, "question_id": 36609169, "link": "https://stackoverflow.com/questions/36609169/upgrading-rails-3-2-to-4-2-6-routes-generates-wrong-pathnames-for-resources/36609699#36609699", "title": "Upgrading Rails 3.2 to 4.2.6, routes generates wrong pathnames for resources", "body": "<p>Add <code>inflect.irregular('signup', 'signups')</code> to <code>config/initializers/inflections.rb</code></p>\n"}], "owner": {"reputation": 318, "user_id": 2959090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecab5392ceea34c60ad3d723617d127a?s=128&d=identicon&r=PG&f=1", "display_name": "siopao", "link": "https://stackoverflow.com/users/2959090/siopao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 2, "accepted_answer_id": 36609699, "answer_count": 1, "score": 1, "last_activity_date": 1460592667, "creation_date": 1460580043, "question_id": 36609169, "link": "https://stackoverflow.com/questions/36609169/upgrading-rails-3-2-to-4-2-6-routes-generates-wrong-pathnames-for-resources", "title": "Upgrading Rails 3.2 to 4.2.6, routes generates wrong pathnames for resources", "body": "<p>I'm upgrading from Rails 3.2 to 4.2.6 and, for some reason, one model suddenly has it's rails generated resources path names all wrong. Resources for all the other models is working fine.</p>\n\n<p>routes.rb  (commented out all the other routes to isolate the faulty model)</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :signups\nend\n</code></pre>\n\n<p>rails 3.2 rake routes output (what it should look like)</p>\n\n<pre><code>signups     GET     /signups(.:format)          signups#index\n            POST    /signups(.:format)          signups#create\nnew_signup  GET     /signups/new(.:format)      signups#new\nedit_signup GET     /signups/:id/edit(.:format) signups#edit\nsignup      GET     /signups/:id(.:format)      signups#show\n            PUT     /signups/:id(.:format)      signups#update\n            DELETE  /signups/:id(.:format)      signups#destroy\n</code></pre>\n\n<p>rails 4.2.6 rake routes output  </p>\n\n<pre><code>signups_index GET    /signups(.:format)          signups#index\n              POST   /signups(.:format)          signups#create\n  new_signups GET    /signups/new(.:format)      signups#new\n edit_signups GET    /signups/:id/edit(.:format) signups#edit\n      signups GET    /signups/:id(.:format)      signups#show\n              PATCH  /signups/:id(.:format)      signups#update\n              PUT    /signups/:id(.:format)      signups#update\n              DELETE /signups/:id(.:format)      signups#destroy\n</code></pre>\n\n<p>Any idea what could've caused this one model to have it's path name changed?</p>\n"}, {"tags": ["ruby", "xpath", "rspec"], "comments": [{"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1460581594, "post_id": 36609035, "comment_id": 60815773, "body": "The quickest guess would be that you have not required your step definitions in your testing environment.  Check cucumber-rails and/or rspec-rails gems for their installation procedure which takes care of the most common setup tasks."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1460589490, "post_id": 36609035, "comment_id": 60819190, "body": "<code>&#47;^: i am on</code> there is a space between the <code>:</code> at the beginning of this and the <code>i</code> - it might not be relevant, but it also might - worth trying to remove the extra space, just in case it matters."}, {"owner": {"reputation": 163, "user_id": 5176631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a45e7fbeee3c4e110871efcbd30641?s=128&d=identicon&r=PG&f=1", "display_name": "Justyna J", "link": "https://stackoverflow.com/users/5176631/justyna-j"}, "edited": false, "score": 0, "creation_date": 1460615274, "post_id": 36609035, "comment_id": 60827072, "body": "This is my code to environment&quot;"}, {"owner": {"reputation": 163, "user_id": 5176631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a45e7fbeee3c4e110871efcbd30641?s=128&d=identicon&r=PG&f=1", "display_name": "Justyna J", "link": "https://stackoverflow.com/users/5176631/justyna-j"}, "edited": false, "score": 0, "creation_date": 1460615442, "post_id": 36609035, "comment_id": 60827168, "body": "Thanks. I installed ruby-rails gem now and deleted spaces, but still the same.link to screen: <a href=\"https://postimg.org/image/4pacpmakd/\" rel=\"nofollow noreferrer\">postimg.org/image/4pacpmakd</a>"}], "owner": {"reputation": 163, "user_id": 5176631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a45e7fbeee3c4e110871efcbd30641?s=128&d=identicon&r=PG&f=1", "display_name": "Justyna J", "link": "https://stackoverflow.com/users/5176631/justyna-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460581415, "creation_date": 1460579553, "last_edit_date": 1592644375, "question_id": 36609035, "link": "https://stackoverflow.com/questions/36609035/according-to-tutorial-does-not-work-rubymine-cucumber-rspec", "title": "according to tutorial does not work - rubymine cucumber rspec", "body": "<p>I created two files according to some tutorial(I could not find now)\nfirst is steps:</p>\n<pre><code>Given(/^: i am on &quot;([^&quot;]*)&quot;$/) do |path_to|\n  visit path_to # Write code here that turns the phrase above into concrete actions\nend\n\nWhen(/^: I type &quot;.*?&quot; in search field$/) do |string_search|\n  TXT_SEARCH= &quot;.//*[@id='masthead-search-term']&quot; # Write code here that turns the phrase above into concrete actions\n  BTN_SEARCH= &quot;.//*[@id='search-btn']&quot;\n  find(:xpath,TXT_SEARCH).set string_search\n  find(:xpath,BTN_SEARCH).click\nend\n\nThen(/^: i should see install cucumber$/) do |string_expectation|\n  page.should have_content string_expectation # Write code here that turns the phrase above into concrete actions\nend\n</code></pre>\n<p>and second one is feature</p>\n<pre><code>Feature: as a consumer, i want to search th in yt\n\nScenario: search dth on yt\n  Given : i am on &quot;http://youtube.com&quot;\n  When : I type install cucumber in search field\n  Then : i should see install cucumber\n</code></pre>\n<p>but when I try to run it does not work..I got an error</p>\n<blockquote>\n<p>You can implement step definitions for undefined steps with these snippets:</p>\n<p>Given(/^: i am on &quot;([^&quot;]*)&quot;$/) do |arg1|\n(...)</p>\n</blockquote>\n<p>Why? Everything is like on YT</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1460582070, "post_id": 36609067, "comment_id": 60816022, "body": "Fantastic. Thanks for the in-depth answer!"}], "tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": true, "score": 2, "last_activity_date": 1460579660, "creation_date": 1460579660, "answer_id": 36609067, "question_id": 36608906, "link": "https://stackoverflow.com/questions/36608906/optimizing-has-many-record-association-query/36609067#36609067", "title": "Optimizing has many record association query", "body": "<p>So first, make sure <code>enrollments.user_id</code> has an index.</p>\n\n<p>Second, you can speed this up by not loading all the enrollments, and doing your filtering in SQL:</p>\n\n<pre><code>User.where(&lt;&lt;-EOQ)\n  NOT EXISTS (SELECT 1\n              FROM   enrollments e\n              WHERE  e.user_id = users.id\n              AND    NOT e.preview)\nEOQ\n</code></pre>\n\n<p>By the way here I'm simplifying your two conditions into one: \"no enrollments or no real enrollments\" is the same as \"no real enrollments\".</p>\n\n<p>If you want you can put this condition into a <code>scope</code> so it is more reusable.</p>\n\n<p>Third, this is still going to be slow if you're instantiating thousands of <code>User</code> objects. So I would look into paginating if that makes sense, or <code>find_each</code> if this is an offline script. Or use raw SQL to avoid all the object instances.</p>\n\n<p>Oh by the way: even though you are saying <code>includes(:enrollments)</code>, this will still go back to the database, giving you an n+1 problem:</p>\n\n<pre><code>user.enrollments.where(preview: false)\n</code></pre>\n\n<p>That is because the <code>where</code> means ActiveRecord can't use the already-loaded association. You can avoid that by using <code>select</code> instead of <code>where</code>. But not loading the <code>enrollments</code> in the first place is even better.</p>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 36609067, "answer_count": 1, "score": 1, "last_activity_date": 1460579660, "creation_date": 1460579144, "question_id": 36608906, "link": "https://stackoverflow.com/questions/36608906/optimizing-has-many-record-association-query", "title": "Optimizing has many record association query", "body": "<p>I have this query that I've built using <code>Enumerable#select</code>. The purpose is to find records thave have no <code>has many</code> associated records or if it does have those records select only those with it's <code>preview</code> attribute set to true. The code below works perfectly for that use case. However, this query does not scale well. When I test against thousands of records it takes several hundred seconds to complete. How can this query be improved upon?</p>\n\n<pre><code># User has many enrollments\n# Enrollment belongs to user.\n\nusers_with_no_courses = User.includes(:enrollments).select {|user| user.enrollments.empty? || user.enrollments.where(preview: false).empty?}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "capybara", "capybara-webkit"], "answers": [{"comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1517519811, "post_id": 36609304, "comment_id": 84140478, "body": "I&#39;ve done that (OSX High Sierra) and the gem install still isn&#39;t working: &quot;which qmake&quot; =&gt; &quot;/usr/local/opt/qt@5.5/bin/qmake&quot; but installing the Gem gives me &quot;Command &#39;qmake &#39; failed&quot;"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1517520127, "post_id": 36609304, "comment_id": 84140637, "body": "@sixty4bit That&#39;s not the error this question deals with which was <code>Command &#39;qmake &#39; not available</code> - so this really isn&#39;t the place to ask about it.  Open your own question with way more details than you&#39;ve provided here."}, {"owner": {"reputation": 371, "user_id": 7573223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIuXz.jpg?s=128&g=1", "display_name": "SMAG", "link": "https://stackoverflow.com/users/7573223/smag"}, "edited": false, "score": 0, "creation_date": 1561740902, "post_id": 36609304, "comment_id": 100175500, "body": "if you get the error: <code>Error: qt@5.5: unknown version :mountain_lion</code> make sure you follow the Note in the documentation:  NOTE: If you get Error: qt@5.5: unknown version :mountain_lion, comment line #25 in Formula/qt@5.5.rb"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 14, "last_activity_date": 1461512171, "last_edit_date": 1461512171, "creation_date": 1460580544, "answer_id": 36609304, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/36609304#36609304", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>Installation instructions are in the capybara-webkit wiki - <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit\" rel=\"noreferrer\">https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit</a> .  You'll want to install Qt 5.5.1 (5.6 is only supported if you build the QtWebKit module separately)</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1970625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eizH5.png?s=128&g=1", "display_name": "Murat", "link": "https://stackoverflow.com/users/1970625/murat"}, "is_accepted": false, "score": 0, "last_activity_date": 1519347230, "last_edit_date": 1519347230, "creation_date": 1487132432, "answer_id": 42240700, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/42240700#42240700", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>I have OS X El Capitan system.\nI tracked on this link :</p>\n\n<p><a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit</a></p>\n\n<p>then</p>\n\n<pre><code>gem install capybara-webkit -- --with-opt-include=/usr/local/bin/qmake\n</code></pre>\n\n<p>This problem has been solved.</p>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 3980206, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001191098031/picture?type=large", "display_name": "Syed Shibli", "link": "https://stackoverflow.com/users/3980206/syed-shibli"}, "is_accepted": false, "score": 10, "last_activity_date": 1521022452, "creation_date": 1521022452, "answer_id": 49275003, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/49275003#49275003", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>Ubuntu </p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install qt5-default libqt5webkit5-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 4110918, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/56b55a59fa807eb72ded315c4d53b8a3?s=128&d=identicon&r=PG&f=1", "display_name": "Chimed Palden", "link": "https://stackoverflow.com/users/4110918/chimed-palden"}, "is_accepted": false, "score": 1, "last_activity_date": 1547810254, "last_edit_date": 1547810254, "creation_date": 1547806685, "answer_id": 54251874, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/54251874#54251874", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p><code>'qmake' is not recognized</code> likely means that Qt is not installed</p>\n\n<pre><code>brew update\ncd $( brew --prefix )/Homebrew/Library/Taps/homebrew/homebrew-core\ngit checkout 9ba3d6ef8891e5c15dbdc9333f857b13711d4e97 Formula/qt@5.5.rb\nbrew install qt@5.5\necho 'export PATH=\"$(brew --prefix qt@5.5)/bin:$PATH\"' &gt;&gt; ~/.bashrc\n</code></pre>\n\n<p>Complete installation process is <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#ubuntu-trusty-1404\" rel=\"nofollow noreferrer\">here</a> </p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 7573223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIuXz.jpg?s=128&g=1", "display_name": "SMAG", "link": "https://stackoverflow.com/users/7573223/smag"}, "is_accepted": false, "score": 0, "last_activity_date": 1561741706, "creation_date": 1561741706, "answer_id": 56810839, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/56810839#56810839", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>I had to run: </p>\n\n<pre><code>QMAKE=\"$(brew --prefix qt@5.5)/bin/qmake\" gem install capybara-webkit\n</code></pre>\n\n<p>in order to get the gem to install after I got Error: <code>qt@5.5: unknown version :mountain_lion</code> and followed the commenting step from the <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#homebrew\" rel=\"nofollow noreferrer\">Homebrew instructions</a>:</p>\n\n<p>NOTE: If you get Error: qt@5.5: unknown version :mountain_lion, comment line #25 in Formula/qt@5.5.rb</p>\n"}, {"tags": [], "owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "is_accepted": false, "score": 0, "last_activity_date": 1568912460, "creation_date": 1568912460, "answer_id": 58015813, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4/58015813#58015813", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>For <a href=\"http://altlinux.org\" rel=\"nofollow noreferrer\">AltLinux</a> it should be done the following:</p>\n\n<ol>\n<li><p>As of root install <em>gem-capybara-webkit-devel</em> package:</p>\n\n<pre><code># apt-get install gem-capybara-webkit-devel\n</code></pre></li>\n<li><p>export the PATH's additionals required for the compilation:</p>\n\n<pre><code>$ export PATH=/usr/share/qt5/bin:$PATH\n</code></pre></li>\n<li><p>install the gem with bundler</p>\n\n<pre><code>$ bundle\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20889, "favorite_count": 1, "accepted_answer_id": 36609304, "answer_count": 6, "score": 16, "last_activity_date": 1568912460, "creation_date": 1460578595, "last_edit_date": 1495535486, "question_id": 36608732, "link": "https://stackoverflow.com/questions/36608732/not-able-to-install-capybara-webkit-using-bundle-install-command-in-rails-4", "title": "Not able to install capybara-webkit using bundle install command in Rails 4", "body": "<p>I am getting following error while executing command <code>bundle install</code> in my Rails 4 application.</p>\n\n<pre><code>&gt; ruby -v\nruby 2.1.8p440 (2015-12-16 revision 53160) [i386-mingw32]\n\n&gt; rails --version\nCould not find gem 'capybara-webkit x86-mingw32' in any of the gem sources listed in your Gemfile or available on this machine.\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p><strong>My Gemfile</strong></p>\n\n<pre><code>...\n.....\ngroup :development, :localtesting, :test do\n  gem 'sqlite3',     '1.3.11'\n  gem 'byebug',      '3.4.0'\n  #gem 'web-console', '2.0.0.beta3'\n  gem 'spring',      '1.1.3'\n  gem 'i18n-tasks'\n  gem 'capybara'\n  gem 'selenium-webdriver'\n  gem 'rspec'\n  gem 'rspec-rails'\n  gem 'rspec_junit_formatter'\n  gem 'capybara-webkit'\nend\n.....\n...\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>Installing capybara-webkit 1.10.1 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    C:/RailsInstaller/Ruby2.1.0/bin/ruby.exe extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/RailsInstaller/Ruby2.1.0/bin/ruby\n        --with-gl-dir\n        --without-gl-dir\n        --with-gl-include\n        --without-gl-include=${gl-dir}/include\n        --with-gl-lib\n        --without-gl-lib=${gl-dir}/lib\n        --with-zlib-dir\n        --without-zlib-dir\n        --with-zlib-include\n        --without-zlib-include=${zlib-dir}/include\n        --with-zlib-lib\n        --without-zlib-lib=${zlib-dir}/lib\nCommand 'qmake ' not available\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/capybara-webkit-1.10.1 for inspection.\nResults logged to C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/extensions/x86-mingw32/2.1.0/capybara-webkit-1.10.1/gem_make.out\nUsing guard-minitest 2.3.1\nUsing actionview 4.2.2\nUsing composite_primary_keys 8.1.2\nUsing friendly_id 5.1.0\nUsing paper_trail 4.0.2\nAn error occurred while installing capybara-webkit (1.10.1), and Bundler cannot\ncontinue.\nMake sure that `gem install capybara-webkit -v '1.10.1'` succeeds before\nbundling.\n</code></pre>\n\n<p>Note: I already tried to look into a post with similar problem <a href=\"https://stackoverflow.com/questions/14638051/cannot-install-capybara-webkit-gem\">Cannot install capybara-webkit gem</a> and tried to follow the solution by executing the following command. But got following error.</p>\n\n<pre><code>&gt; qmake -v\n'qmake' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 1, "creation_date": 1460579053, "post_id": 36608633, "comment_id": 60814415, "body": "If I understand your question correctly, you don&#39;t need an ajax call for simply changing the button text. Have a look at <a href=\"http://stackoverflow.com/a/5580652/2968762\">this post</a> if it helps."}], "answers": [{"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460579379, "post_id": 36608927, "comment_id": 60814583, "body": "Thanks! anyway you could code an example for my situation I&#39;m having trouble understanding some of the tuts."}], "tags": [], "owner": {"reputation": 4583, "user_id": 1053731, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41bb59ab7cd41e81715b22ef00da17ef?s=128&d=identicon&r=PG", "display_name": "Axxiss", "link": "https://stackoverflow.com/users/1053731/axxiss"}, "is_accepted": true, "score": 0, "last_activity_date": 1460579226, "creation_date": 1460579226, "answer_id": 36608927, "question_id": 36608633, "link": "https://stackoverflow.com/questions/36608633/implementing-ajax-into-a-rails-form/36608927#36608927", "title": "Implementing AJAX into a rails form.", "body": "<p>I suggest you to read <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#form-for\" rel=\"nofollow\">Working with javascript in Rails</a>, there it explain several things about javascript and AJAX.</p>\n\n<p>Basically, you need to tag your form as <code>remote</code> and hook with javascript to AJAX events (success, complete, error, etc) to perform any animation/transition you want.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36608927, "answer_count": 1, "score": 0, "last_activity_date": 1460579226, "creation_date": 1460578283, "question_id": 36608633, "link": "https://stackoverflow.com/questions/36608633/implementing-ajax-into-a-rails-form", "title": "Implementing AJAX into a rails form.", "body": "<p>I have a from in which a user can send out a message via SMS. The form functions with the capability of scheduling out a message. Right now I have a static button that says \"send message\" and it works but when a user schedules a message I'd like the button to switch the inside text to read \"schedule message\" by an onlcick type action. I think this should be an esay thing to implement using ajax but I've never used it before in a rails app. I'll show a screen shot and some code, hopefully this will be enough info. let me know if you need anymore provided code than I initially show.</p>\n\n<p>Here is my form screenshot, so when a user clicks on the calender glyphicon it will initiate the ajax and switch the \"Send Message\" button to say \"Schedule Message\" \n<a href=\"https://i.stack.imgur.com/HqNRU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HqNRU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code for my form</p>\n\n<pre><code>&lt;div class=\"container text-center\"&gt;\n &lt;div class=\"row\"&gt;\n  &lt;div class=\"col-lg-8 col-lg-offset-2 well\"&gt;\n     &lt;%= form_for @message do |form| %&gt;\n       &lt;div class=\"form-group\"&gt;\n         &lt;%= form.label :body, \"Enter a Message:\", class: \"message_label\"%&gt;\n         &lt;%= form.text_field :body, class: \"form-control\", placeholder: \"New things are happening!\" %&gt;\n       &lt;/div&gt;\n       &lt;%= form.submit \"Send Message\", class: \"btn btn-primary\" %&gt;\n       &lt;h3&gt;Groups:&lt;/h3&gt;\n       &lt;div class=\"radio\"&gt;\n         &lt;div class=\"row col-span10\"&gt;\n           &lt;% Group.all.each do |group| %&gt;\n             &lt;div class=\"col-md-3\"&gt;\n               &lt;label&gt;\n                 &lt;input id=\"message_group_&lt;%= group.id %&gt;\" name=\"message[group_ids][]\" value=\"&lt;%= group.id %&gt;\" type=\"checkbox\"&gt;\n                 &lt;%= group.name %&gt;\n               &lt;/label&gt;\n            &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;h3&gt;Scheduled Text Message:&lt;/h3&gt;\n      &lt;div class=\"row\"&gt;\n        &lt;div class='col-sm-4 col-sm-offset-4'&gt;\n          &lt;div class=\"form-group\"&gt;\n            &lt;div class='input-group date' id='datetimepicker'&gt;\n              &lt;%= form.text_field :send_at, class: \"form-control\" %&gt;\n              &lt;span class=\"input-group-addon\"&gt;\n                  &lt;span class=\"glyphicon glyphicon-calendar\"&gt;&lt;/span&gt;\n              &lt;/span&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>\n</p>\n"}, {"tags": ["ruby", "pipedrive-api"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1460578379, "post_id": 36608488, "comment_id": 60814037, "body": "I don&#39;t see a base case here..."}, {"owner": {"reputation": 6121, "user_id": 470925, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9a876909984def202886ad7f9b48a219?s=128&d=identicon&r=PG", "display_name": "Ken Bellows", "link": "https://stackoverflow.com/users/470925/ken-bellows"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1460578546, "post_id": 36608488, "comment_id": 60814139, "body": "@Anthony the base case looks to be when there aren&#39;t any more items in the collection, in which case <code>parsed_response.dig(...)</code> will return <code>false</code>; I think Andrey meant to put the <code>puts data.count; data</code> in an <code>else</code> block"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1460579266, "post_id": 36608488, "comment_id": 60814528, "body": "So after the edit <code>all</code> now returns <code>data</code>, but you don&#39;t do anything with the return value from your recursive call.  In other words, you return <code>data</code> but then drop it on the kitchen floor."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1460579525, "post_id": 36608488, "comment_id": 60814656, "body": "got it working, finally! thx @pjs"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1460579561, "post_id": 36608488, "comment_id": 60814672, "body": "If all you want is the updated <code>data</code>, take out <code>data</code> right before the final <code>end</code> statement.  With the if-else, you&#39;ll either get the <code>data</code> returned by the recursive call to <code>all</code>, or the <code>data</code> handled by the <code>else</code> case.  Otherwise, save the return from <code>all</code> and do something with it before leaving the current invocation."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1460580180, "post_id": 36608488, "comment_id": 60815009, "body": "You&#39;re welcome!  Glad to hear it&#39;s working now."}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1460578836, "post_id": 36608644, "comment_id": 60814277, "body": "thx for reply! my main problem not in puts (puts is only to try tracing), - the issue is that method returns 100 instead of 3991 (as I do <code>Pipedrive::Customer.all.count</code>).."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1460578970, "post_id": 36608644, "comment_id": 60814362, "body": "@AndreyDeineko That&#39;s nowhere to be found in your question, you only discussed the unraveling as illustrated by the printed output.  Clarifying your question would appear to be in order."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1460579069, "post_id": 36608644, "comment_id": 60814423, "body": "my bad, sorry for not being clear - edited the question!"}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 2, "last_activity_date": 1460578318, "creation_date": 1460578318, "answer_id": 36608644, "question_id": 36608488, "link": "https://stackoverflow.com/questions/36608488/cant-get-recursive-method-to-work/36608644#36608644", "title": "Can&#39;t get recursive method to work", "body": "<p>You only need and want one <code>puts</code> statement in the method.  Right now you're telling it to <code>puts data.count</code>, then do recursive calculations, and after returning from those recursive calculations <code>puts data.count</code> again.  In between those two <code>puts</code>, the recursive call(s) will have injected their own <code>puts</code> results coming and going.  That's why it appears to build up, then unravel.  The build-up is the <code>puts</code>'s going in, and the rewind is from the <code>puts</code>'s after the recursive call.</p>\n"}, {"tags": [], "owner": {"reputation": 6121, "user_id": 470925, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9a876909984def202886ad7f9b48a219?s=128&d=identicon&r=PG", "display_name": "Ken Bellows", "link": "https://stackoverflow.com/users/470925/ken-bellows"}, "is_accepted": false, "score": 2, "last_activity_date": 1460578361, "creation_date": 1460578361, "answer_id": 36608656, "question_id": 36608488, "link": "https://stackoverflow.com/questions/36608488/cant-get-recursive-method-to-work/36608656#36608656", "title": "Can&#39;t get recursive method to work", "body": "<p>The problem is that you're not exiting the function after your recursive call, so when it returns from the recursive call it goes on and finished the function, thus calling <code>puts data.count</code> a second time for each recursive call on its way out. The reversed order has to do with the function stack. your code is structured something like this:</p>\n\n<pre><code>all:\n  puts 100\n  all:\n    puts 200\n    all:\n      puts 300\n      all:\n        ...\n      puts 300\n    puts 200\n  puts 100\ndone\n</code></pre>\n\n<p>Based on your code I think you meant to put the second <code>puts</code> and the <code>data</code> in an <code>else</code> maybe? that should do what you want I think, though I don't fully grok your code</p>\n"}], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460579053, "creation_date": 1460577868, "last_edit_date": 1460579053, "question_id": 36608488, "link": "https://stackoverflow.com/questions/36608488/cant-get-recursive-method-to-work", "title": "Can&#39;t get recursive method to work", "body": "<p>I have the following method:</p>\n\n<pre><code>def all(response = nil, options = {}, data = [])\n  response ||= get(resource_path, options)\n  parsed_response = JSON.parse(response.body)\n  return bad_response(response) unless response.code == '200'\n\n  data += parsed_response['data'].nil? ? [] : parsed_response['data'].map { |obj| new(obj) }\n  puts data.count\n  if parsed_response.dig('additional_data', 'pagination', 'more_items_in_collection')\n\n    options[:start] = parsed_response.dig('additional_data', 'pagination', 'next_start')\n    all(nil, options, data) # recursively calls itself, passing cumulated data\n  end\n  puts data.count # WHY WOULD IT NOT JUST RETURN ONCE, BUT INSTEAD GO DOWN TO INITIAL VALUE?\n  data\nend\n</code></pre>\n\n<p>My problem with this method, is that when it's time to exit the method:\n (<code>if parsed_response.dig('additional_data', 'pagination', 'more_items_in_collection')</code> returns <code>false</code> and the last method's line should be fired), it starts to rewind..</p>\n\n<p>The output is:</p>\n\n<pre><code>Pipedrive::Customer.all.count\n100\n200\n300\n400\n500\n600\n700\n800\n900\n1000\n1100\n1200\n1300\n1400\n1500\n1600\n1700\n1800\n1900\n2000\n2100\n2200\n2300\n2400\n2500\n2600\n2700\n2800\n2900\n3000\n3100\n3200\n3300\n3400\n3500\n3600\n3700\n3800\n3900\n3991\n3991\n3900\n3800\n3700\n3600\n3500\n3400\n3300\n3200\n3100\n3000\n2900\n2800\n2700\n2600\n2500\n2400\n2300\n2200\n2100\n2000\n1900\n1800\n1700\n1600\n1500\n1400\n1300\n1200\n1100\n1000\n900\n800\n700\n600\n500\n400\n300\n200\n100\n=&gt; 100\n</code></pre>\n\n<p>This looks insane, but I hope I'm just missing something extremely simple (indeed I am, but what exactly :) ).</p>\n\n<h1>EDIT</h1>\n\n<p>My problem is with the <strong>result of the method</strong>, not with puts itself. I would expect the <code>Pipedrive::Customer.all.count</code> to return <code>3991</code>, but it returns <code>100</code> instead... Any ideas? I already tried to put last line (<code>data</code>) in <code>else</code></p>\n\n<pre><code>  def all(response = nil, options = {}, data = [])\n    response ||= get(resource_path, options)\n    parsed_response = JSON.parse(response.body)\n    return bad_response(response) unless response.code == '200'\n\n    data += parsed_response['data'].nil? ? [] : parsed_response['data'].map { |obj| new(obj) }\n    if parsed_response.dig('additional_data', 'pagination', 'more_items_in_collection')\n\n      options[:start] = parsed_response.dig('additional_data', 'pagination', 'next_start')\n      all(nil, options, data)\n    else\n      data\n    end\n    data \n  end\n</code></pre>\n\n<p>- it still returns <code>100</code>..</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460576015, "post_id": 36607766, "comment_id": 60812590, "body": "what you show comes from an <code>erb</code> view ? could you show it with the surrounding <code>erb</code> tags please ?"}, {"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "reply_to_user": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460576135, "post_id": 36607766, "comment_id": 60812653, "body": "Yes its an erb view, unsure what you mean by erb tags?"}, {"owner": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460576185, "post_id": 36607766, "comment_id": 60812694, "body": "sorry <code>&lt;%=</code>, <code>&lt;%</code>, <code>%&gt;</code>, ..."}, {"owner": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1460576200, "post_id": 36607766, "comment_id": 60812710, "body": "what happens if you change <code>y.street</code> to <code>y[:street]</code>?"}, {"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "reply_to_user": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1460576300, "post_id": 36607766, "comment_id": 60812778, "body": "@iamjhu nothing same output as my effort."}, {"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "reply_to_user": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460576451, "post_id": 36607766, "comment_id": 60812882, "body": "@VonD I updated the question with tags"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460577315, "post_id": 36607766, "comment_id": 60813411, "body": "<code>address=&gt;[...]</code> is not a Ruby object. You need to delete <code>address=&gt;</code> (or better, change to <code>address = [...]</code>, so that readers can reference the variable <code>address</code> without having to define it). Perhaps that&#39;s obvious, but you can save yourself some downvotes by taking my advice."}, {"owner": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460577514, "post_id": 36607766, "comment_id": 60813540, "body": "tags look ok. as iamjhu pointed it should be y[&#39;street&#39;] and so on. But anyway it&#39;s strange that it does not raise an error and that it returns the array."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "edited": false, "score": 0, "creation_date": 1460590855, "post_id": 36608357, "comment_id": 60819619, "body": "I like your solution about the Presenter class. I have more logic then I would like in my view. I may use your solution in a refactoring of my project. Thanks"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": false, "score": 1, "last_activity_date": 1460577857, "last_edit_date": 1460577857, "creation_date": 1460577475, "answer_id": 36608357, "question_id": 36607766, "link": "https://stackoverflow.com/questions/36607766/getting-a-value-from-an-array-of-hashes-in-ruby/36608357#36608357", "title": "Getting a value from an array of hashes in Ruby", "body": "<p>For your first question something like this should suffice:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'ostruct'\n\naddress = [\n  {\n    'data'    =&gt; { \n                   'zip'    =&gt; '60628',\n                   'state'  =&gt; 'IL',\n                   'city'   =&gt; 'chicago',\n                   'street' =&gt;'123 Main St. Apt 2'\n                 },\n    'primary' =&gt; true\n   }\n]\n\nclass AddressPresenter\n  def initialize(address)\n     @address = OpenStruct.new(address)\n  end\n\n  def to_s\n    \"#{@address.street} \\n#{@address.city} #{@address.state} #{@address.zip}\"\n  end\nend\n\naddress.each do |a|\n  puts AddressPresenter.new(a['data'])\nend\n</code></pre>\n\n<p>Now, for the second question, I would implement a <strong>Presenter</strong> class whose only goal is to \"present\" the data in whatever format you need in the view, this allows you to keep your views with 0 presentation logic. So in this case the class <code>AddressPresenter</code> could be reworked to return in the <code>to_s</code> the right HTML you need in your view. And you would do something like:</p>\n\n<pre><code>&lt;% @applicant.address.each do |address| %&gt;\n  &lt;%= AddressPresenter.new(address['data']).to_s %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>By having a separated presenter class, you get the following benefits:</p>\n\n<ol>\n<li>Your models don't worry about how to present/render stuff because that's not their job</li>\n<li>You can test this presenter to confirm it returns whatever you're expecting in the view </li>\n<li>Your views don't contain any complicated logic</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "edited": false, "score": 0, "creation_date": 1460588742, "post_id": 36608456, "comment_id": 60818929, "body": "Worked like a charm! Thanks!"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1460624336, "last_edit_date": 1460624336, "creation_date": 1460577768, "answer_id": 36608456, "question_id": 36607766, "link": "https://stackoverflow.com/questions/36607766/getting-a-value-from-an-array-of-hashes-in-ruby/36608456#36608456", "title": "Getting a value from an array of hashes in Ruby", "body": "<p>The map gives you a new array and if you use hashes you need to access the values with the hash[:key] or hash[\"key\"] operator, try this:</p>\n\n<pre><code>&lt;% @applicant.address.each do |address_hash| %&gt;\n  &lt;% address = address_hash[\"data\"] %&gt;\n  &lt;%= address[\"street\"] %&gt;&lt;br&gt;&lt;%= address[\"city\"] %&gt;, &lt;%= address[\"state\"] %&gt; &lt;%= address[\"zip\"] %&gt; &lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But if I were you , I'd put the data in an array of structs, it's more readable.</p>\n\n<p>In your model or helper:</p>\n\n<pre><code>address = Struct.new(:street, :city, :state, :zip)\naddress.street = ..\n...\n@addresses &lt;&lt; address\netc\n</code></pre>\n\n<p>In your view:</p>\n\n<pre><code>&lt;% @addresses.each do |address| %&gt;\n  &lt;%= address.street %&gt;&lt;br&gt;&lt;%= address.city %&gt;, &lt;%= address.state %&gt; &lt;%= address.zip %&gt; &lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 36608456, "answer_count": 2, "score": 1, "last_activity_date": 1460624336, "creation_date": 1460575454, "last_edit_date": 1460589717, "question_id": 36607766, "link": "https://stackoverflow.com/questions/36607766/getting-a-value-from-an-array-of-hashes-in-ruby", "title": "Getting a value from an array of hashes in Ruby", "body": "<p>I have an array:</p>\n\n<pre><code>address =&gt; [{\"data\"=&gt;{\"zip\"=&gt;\"60628\", \"state\"=&gt;\"IL\", \"city\"=&gt;\"chicago\", \"street\"=&gt;\"123 Main St. Apt 2\"}, \"primary\"=&gt;true}]\n</code></pre>\n\n<p>I want to show each piece in the right format on my view like:</p>\n\n<pre><code>123 Main St. Apt 2\nChicago, IL 60628\n</code></pre>\n\n<p>I am having trouble getting the logic correct to show this.</p>\n\n<p>Where should this logic go, as a method in my model or in the actual view?</p>\n\n<p>I tried:</p>\n\n<pre><code>&lt;% @applicant.address.map{|x| x[:data]}.each do |address| %&gt;\n  &lt;%= address.street %&gt;&lt;br&gt;&lt;%= address.city %&gt;, &lt;%= address.state %&gt; &lt;%= address.zip %&gt; &lt;br&gt;\n      &lt;% end %&gt;\n</code></pre>\n\n<p>but got:</p>\n\n<pre><code>=&gt; [{\"zip\"=&gt;\"60628\", \"state\"=&gt;\"IL\", \"city\"=&gt;\"chicago\", \"street\"=&gt;\"123 main st Apt 2\"}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wkhtmltopdf", "pdfkit"], "owner": {"reputation": 31, "user_id": 5379845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bca3e885cf5955d8828bd19fac77753?s=128&d=identicon&r=PG&f=1", "display_name": "wrayjs", "link": "https://stackoverflow.com/users/5379845/wrayjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1460576223, "creation_date": 1460575125, "last_edit_date": 1460576223, "question_id": 36607656, "link": "https://stackoverflow.com/questions/36607656/pdfkit-on-rails-cant-find-my-html-footer", "title": "PDFKit on Rails can&#39;t find my html footer", "body": "<p>I'm using PDFKit gem with Rails 4.2 (slim templates) and I'm having difficulty including an html template for my footer. I need styled text to appear at the end of every page.</p>\n\n<p>When I put it in the head of my pdf template, as directed in the <a href=\"https://github.com/pdfkit/pdfkit/wiki/Configuration:-Global,-and-Per-Page\" rel=\"nofollow\">PDFKit Wiki</a>, this line fails:</p>\n\n<p><code>meta name=\"pdfkit-footer_html\" content=\"#{request.protocol}#{request.host_with_port}/pdfs/footer.html\"</code></p>\n\n<p>but this works fine, I just can't style it so it is not adequate for my needs:</p>\n\n<p><code>meta name=\"pdfkit-footer_right\" content=\"Footer text goes here\"</code></p>\n\n<p>My files: </p>\n\n<p><code>pdfs_controller.rb</code></p>\n\n<pre><code>class PDFsController &lt; ApplicationController\n  def footer\n    render layout: false\n  end\nend\n</code></pre>\n\n<p><code>config/routes.rb</code></p>\n\n<pre><code>get 'pdfs/footer', to: 'pdfs#footer'\n</code></pre>\n\n<p><code>views/pdfs/footer.html.slim</code></p>\n\n<pre><code>doctype html\n| Footer text goes here\n</code></pre>\n\n<p>Both my baseurl/pdfs/footer and baseurl/pdfs/footer.html successfully give me \"Footer text goes here\".</p>\n\n<p>The PDF works fine without the footer.</p>\n\n<p>When I try to include it I get this error:</p>\n\n<p>command failed (exitstatus=): /usr/local/bin/wkhtmltopdf --quiet --page-size Letter --margin-top 0.75in --margin-right 0.75in --margin-bottom 0.75in --margin-left 0.75in --encoding UTF-8 --footer-html (mybaseurl)/pdfs/footer.html - -</p>\n\n<p>and in the console</p>\n\n<p>Error: Failed loading page (mybaseurl)/pdfs/footer.html?page=1&amp;section=Search&amp;sitepage=1&amp;title=True&amp;subsection=Mike Rasic&amp;frompage=1&amp;subsubsection=&amp;isodate=2016-04-13&amp;topage=4&amp;doctitle=True&amp;sitepages=4&amp;webpage=-&amp;time=3:10 PM&amp;date=4/13/16 (sometimes it will work just to ignore this error with --load-error-handling ignore)</p>\n\n<p>I know wkhtmltopdf needs exact URLs and I am trying to provide them.  I suspect it's getting messed up by the params that are getting tacked on at the end (in the console error message.)  But I don't know how to prevent that.  What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "simple-form"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 1, "creation_date": 1460574302, "post_id": 36607243, "comment_id": 60811556, "body": "Validate uniqueness based on multiple attributes."}, {"owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "edited": false, "score": 0, "creation_date": 1460574498, "post_id": 36607243, "comment_id": 60811682, "body": "a suggestion unrelated to activerecord would be to add a &quot;confirm submission&quot; button so users can see their typos before submitting"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "edited": false, "score": 0, "creation_date": 1460574777, "post_id": 36607410, "comment_id": 60811861, "body": "Just deleted my answer, yours 1 minute earlier :) +1"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460575077, "post_id": 36607410, "comment_id": 60812022, "body": "Validating uniqueness inside the model is insufficient, the uniqueness logic has to be inside the database or you&#39;re subject to race conditions."}], "tags": [], "owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1460574403, "creation_date": 1460574403, "answer_id": 36607410, "question_id": 36607243, "link": "https://stackoverflow.com/questions/36607243/prevent-record-duplication-in-rails/36607410#36607410", "title": "Prevent record duplication in Rails", "body": "<p>In the record's Model, add a uniqueness validation as detailed in <a href=\"http://guides.rubyonrails.org/active_record_validations.html#uniqueness\" rel=\"nofollow\">this Rails Guide</a>. You can apply a scope on that validation, so that the uniqueness is determined using multiple record attributes.</p>\n\n<p>Alternatively, if you really don't want to mark these records as unique, add an easy way for the user to update their submission to the post record creation page. i.e. they add a new record, the ability to edit that record immediately pops up in their view so that, rather than hitting back and creating a new record, they update the one they just made.</p>\n"}], "owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 36607410, "answer_count": 1, "score": 0, "last_activity_date": 1460574496, "creation_date": 1460573931, "question_id": 36607243, "link": "https://stackoverflow.com/questions/36607243/prevent-record-duplication-in-rails", "title": "Prevent record duplication in Rails", "body": "<p>I don't really have any examples, but I have forms that create new records in my ActiveRecord database that do not really have any unique attributes other than their given ID. It has come to my attention that Users are submitting their form, but realized they mistyped something, so they have been pressing the browser's back button and resubmitting the same content, which causes duplication of that record.</p>\n\n<p>I want to prevent this from happening, there is no need to post code, I would just like some suggestions. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rake"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1460574544, "post_id": 36607125, "comment_id": 60811708, "body": "sounds like you&#39;re after <a href=\"http://stackoverflow.com/questions/577944/how-to-run-rake-tasks-from-within-rake-tasks\" title=\"how to run rake tasks from within rake tasks\">stackoverflow.com/questions/577944/&hellip;</a>"}, {"owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1460579612, "post_id": 36607125, "comment_id": 60814709, "body": "That definitely looks like what I&#39;m after, but I&#39;m still missing something because <code>Rake::Task[&#39;spec&#39;].invoke</code> and <code>Rake::Task[&#39;default&#39;].invoke</code> still do nothing."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1460589558, "post_id": 36607125, "comment_id": 60819222, "body": "Have you tried just <code>RUN_ALL_TESTS=true rake spec</code> ?"}, {"owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "edited": false, "score": 0, "creation_date": 1460646654, "post_id": 36607125, "comment_id": 60850291, "body": "Thanks, that works. I&#39;d still love to figure out how to call this inside of a rake task, if anyone has any more suggestions. I was able to successfully invoke other rake tasks using the method from the link, but <code>Rake::Task[&#39;spec&#39;].invoke</code> returns nil, and <code>Rake::Task[&#39;default&#39;].invoke</code> just returns <code>&quot;test&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "edited": false, "score": 0, "creation_date": 1461006866, "post_id": 36683527, "comment_id": 60992609, "body": "Thanks! That did it."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 5, "last_activity_date": 1461428514, "last_edit_date": 1461428514, "creation_date": 1460937283, "answer_id": 36683527, "question_id": 36607125, "link": "https://stackoverflow.com/questions/36607125/how-to-invoke-rspec-inside-a-rake-task/36683527#36683527", "title": "How to invoke RSpec inside a rake task?", "body": "<p>To run RSpec through its rake integration, you need to both define a task and invoke it:</p>\n\n<pre><code># all_tests.rake\nrequire 'rspec/core/rake_task'\n\n# Define the \"spec\" task, at task load time rather than inside another task\nRSpec::Core::RakeTask.new(:spec)\n\ndesc 'Run all tests, even those usually excluded.'\ntask all_tests: :environment do\n  ENV['RUN_ALL_TESTS'] = 'true'\n  Rake::Task['spec'].invoke\nend\n</code></pre>\n\n<p><code>Rake::Task['spec'].invoke</code> did nothing when you tried it because rake turns a task name which is not a name of a defined task but is a file name into a <a href=\"https://github.com/ruby/rake/blob/master/lib/rake/file_task.rb\" rel=\"noreferrer\"><code>Rake::FileTask</code></a>, both on the command line and in <code>Rake::Task</code>. You had no <code>'spec'</code> task defined, but you have a <code>spec</code> directory, so <code>rake spec</code> ran without error and did nothing.</p>\n"}, {"comments": [{"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "edited": false, "score": 0, "creation_date": 1527203166, "post_id": 50519354, "comment_id": 88051236, "body": "(Noting this as an answer here because it&#39;s the only place I&#39;ve seen the <code>spec</code> \u2192 <code>FileTask</code> problem discussed on StackOverflow.)"}], "tags": [], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "is_accepted": false, "score": 0, "last_activity_date": 1527203119, "creation_date": 1527203119, "answer_id": 50519354, "question_id": 36607125, "link": "https://stackoverflow.com/questions/36607125/how-to-invoke-rspec-inside-a-rake-task/50519354#50519354", "title": "How to invoke RSpec inside a rake task?", "body": "<p>I had a similar problem where <code>bundle exec rake default</code> would properly create an <code>RSpec::Core::RakeTask</code>, but <code>bundle exec rake spec</code> would instead create a a <code>Rake::FileTask</code> on the <code>spec</code> directory, with with <code>bundle exec rake spec --trace</code> outputting:</p>\n\n<pre><code>** Invoke spec (first_time, not_needed)\n</code></pre>\n\n<p>It turned out that <code>rspec-rails</code> was in the <code>:test</code> gem group, where it needed (<a href=\"https://relishapp.com/rspec/rspec-rails/docs\" rel=\"nofollow noreferrer\">per the docs</a>) to be in both <code>:test</code> and <code>:development</code>.</p>\n\n<p>Interestingly (?), once I did that, gems that had previously only been in the <code>:test</code> group were also available from the specs even when launched with <code>RAILS_ENV=development</code>. I assume that <code>rspec-rails</code> engages in some magic environment shenanigans behind the scenes.</p>\n"}], "owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "accepted_answer_id": 36683527, "answer_count": 2, "score": 1, "last_activity_date": 1527203119, "creation_date": 1460573606, "last_edit_date": 1460937297, "question_id": 36607125, "link": "https://stackoverflow.com/questions/36607125/how-to-invoke-rspec-inside-a-rake-task", "title": "How to invoke RSpec inside a rake task?", "body": "<p>We wrote some tests that are necessary, but very slow. So we configured RSpec to exclude them except on Solano, where we set up an ENV variable.</p>\n\n<pre><code># spec_helper\nunless ENV['RUN_ALL_TESTS'] == 'true'\n  config.filter_run_excluding :slow\nend\n</code></pre>\n\n<p>That works, but I'm trying to write a rake task we can call to run every test locally by setting that same ENV variable and then running the suite. I'm having trouble figuring out how to trigger RSpec. This is what I've got now:</p>\n\n<pre><code># all_tests.rake\nrequire 'rspec/core/rake_task'\n\ndesc 'Run all tests, even those usually excluded.'\ntask all_tests: :environment do\n  ENV['RUN_ALL_TESTS'] = 'true'\n  RSpec::Core::RakeTask.new(:spec)\nend\n</code></pre>\n\n<p>When I run it, it doesn't run any tests.</p>\n\n<p>Most of the stuff I found is for triggering a rake task inside of a test, testing a rake task, or setting up a Rakefile. We're using <code>rspec-rails</code>, our default rake task is already set up.</p>\n"}, {"tags": ["ruby", "temporary-files"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 6169522, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b87f89ff9b2a870ce14912a7d0d00d1f?s=128&d=identicon&r=PG&f=1", "display_name": "JasonBorne", "link": "https://stackoverflow.com/users/6169522/jasonborne"}, "is_accepted": true, "score": 0, "last_activity_date": 1460837788, "creation_date": 1460837788, "answer_id": 36669235, "question_id": 36607091, "link": "https://stackoverflow.com/questions/36607091/error-while-rewriting-from-temp-file/36669235#36669235", "title": "Error while rewriting from temp file", "body": "<p>I fixed it, for some reason the program was adding a <code>#</code> to the path, so I <code>gsub</code>ed out the <code>#</code> and it works.</p>\n"}], "owner": {"reputation": 77, "user_id": 6169522, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b87f89ff9b2a870ce14912a7d0d00d1f?s=128&d=identicon&r=PG&f=1", "display_name": "JasonBorne", "link": "https://stackoverflow.com/users/6169522/jasonborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 36669235, "answer_count": 1, "score": 0, "last_activity_date": 1460837788, "creation_date": 1460573499, "question_id": 36607091, "link": "https://stackoverflow.com/questions/36607091/error-while-rewriting-from-temp-file", "title": "Error while rewriting from temp file", "body": "<p>I'm writing to a file from a temp file, when I try to read the file that has been written from the temp file, it seems to be adding an extra character to the directory called <code>tmp</code>. (file is passed in through optparse)</p>\n\n<p>Source:</p>\n\n<pre><code>require 'tempfile'\n\nPATH = Dir.pwd\n\ndef format_file\n  puts 'Writing to temporary file..'\n  if File.exists?(OPTIONS[:file])\n    file = Tempfile.new('file')\n    IO.read(OPTIONS[:file]).each_line do |s|\n      File.open(file, 'a+') { |format| format.puts(s) unless s.chomp.empty? }\n    end\n    IO.read(file).each_line do |file|\n      File.open(\"#{PATH}/tmp/#sites.txt\", 'a+') { |line| line.puts(file) }\n    end\n    puts \"File: #{OPTIONS[:file]}, has been formatted and saved as #sites.txt in the tmp directory.\"\n  else\n    puts &lt;&lt;-_END_\n                       Woah now my friend! I know you're eager to get those vulns;\n\n                       But file: #{OPTIONS[:file]} doesn't exist or in this directory at least!\n\n                       What I'm gonna need you to do is go move that file over here.\n                       It's okay, you're forgiven, I'll wait until you return..\n    _END_\n\n  end\nend\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>ruby whitewidow.rb -f sites.txt\n\n[12:40:43 INFO]Formatting file\n[12:40:43 INFO]Writing to temporary file..\n[12:40:43 INFO]File: tmp/sites.txt, has been formatted and saved as #sites.txt in the tmp directory.\n[12:40:43 INFO]Let's check out this file real quick like..\nwhitewidow.rb:224:in `read': No such file or directory @ rb_sysopen - C:/Users/Justin/MyScripts/RubySQL/whitewidow/#tmp/#sites.txt (Errno::ENOENT)\n#&lt;= Correct path but the '#' in tmp shouldn't be there..\n</code></pre>\n\n<p>What it does is format the file to remove any empty lines within it (this program doesn't like empty lines) from there it should write to a temp file, rewrite from the temp file back to the original directory (whitewidow/tmp/) and delete the temp file (I know how to do this part).</p>\n\n<p>It seems to me like while rewriting back to the original directory it's adding a <code>#</code> to the directory name (<code>#tmp</code> is actually <code>tmp</code>) is there a reason that it's adding this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1460572817, "post_id": 36606836, "comment_id": 60810601, "body": "Are categories set? or are they user generated?"}], "answers": [{"tags": [], "owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "is_accepted": true, "score": 2, "last_activity_date": 1460573661, "last_edit_date": 1460573661, "creation_date": 1460573350, "answer_id": 36607037, "question_id": 36606836, "link": "https://stackoverflow.com/questions/36606836/how-to-add-a-label-class-with-different-colors-to-each-category/36607037#36607037", "title": "How to add a .label class with different colors to each category?", "body": "<p><em>Disclaimer</em> This works if your category title's are pretty much set, because you will have to add each title in the hash in the solution below.</p>\n\n<p>I would personally use something like <a href=\"https://github.com/drapergem/draper\" rel=\"nofollow\">draper</a> or just roll my own presenter, but this <em>could</em> go in your model...I am not putting this in a helper, because I try to avoid helpers if I can, as they clutter up your view scope.</p>\n\n<pre><code>def label_class\n  label_class_map[title]\nend\n\nprivate\n\ndef label_class_map\n  {\n    'title-one' =&gt; 'red',\n    'Site News' =&gt; 'blue'\n  }\nend\n</code></pre>\n\n<p>Hashes are fast and not as ugly as conditionals. That is why I choose them for this sort of logic. Obviously if statements, case statements, etc would all work, but I try to avoid them at all costs.</p>\n\n<pre><code>$ category.title = 'Site News'\n$ category.label_class\n# =&gt; 'blue'\n</code></pre>\n\n<p>Now, in your view, you can apply it as follows.</p>\n\n<pre><code># view\n\n&lt;div class=\"category label &lt;%= topic.category.label_class %&gt;\"&gt;\n  &lt;%= link_to...\n&lt;/div&gt;\n</code></pre>\n\n<p><em>Update</em></p>\n\n<p>If you would rather go about this without adding something like draper or your own presenter pattern, the below will get the job done as a helper.</p>\n\n<pre><code>module CategoriesHelper\n  def label_class_for(category)\n    label_class_map[category.title]\n  end\n\n  private\n\n  def label_class_map\n    {\n      'title-one' =&gt; 'red',\n      'Site News' =&gt; 'blue'\n    }\n  end\nend\n\n# your view\n&lt;div class=\"category label &lt;%= label_class_for(topic.category) %&gt;\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3338886, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75b47755e1a595760e9bce7e4eefa2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wesly", "link": "https://stackoverflow.com/users/3338886/wesly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 36607037, "answer_count": 1, "score": 0, "last_activity_date": 1460578743, "creation_date": 1460572685, "last_edit_date": 1460578743, "question_id": 36606836, "link": "https://stackoverflow.com/questions/36606836/how-to-add-a-label-class-with-different-colors-to-each-category", "title": "How to add a .label class with different colors to each category?", "body": "<p>I have a forum that has many categories. I want to label each category with different colors. I'm using Foundation 6 .label class for each category name which I'm going to set another class like <code>.red</code> <code>.blue</code> and so on to go with the specific category. How would i go if i have a category like \"Site News\" and i want to set it to be red?</p>\n\n<p>The code below shows you a list of the topics with the category it belongs to.</p>\n\n<pre><code>&lt;% @topics.each do |topic| %&gt;\n &lt;div class='title'&gt;\n  &lt;%= link_to topic.title, topic %&gt;\n &lt;/div&gt;\n &lt;div class=\"category label\"&gt;\n  &lt;%= link_to topic.category.title, category_path(topic.category.id) %&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["c", "ruby", "macos", "openmp", "ruby-c-extension"], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 2600779, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002398587067/picture?type=large", "display_name": "Raphael Ottoni", "link": "https://stackoverflow.com/users/2600779/raphael-ottoni"}, "is_accepted": false, "score": 1, "last_activity_date": 1460574075, "last_edit_date": 1460574075, "creation_date": 1460572799, "answer_id": 36606867, "question_id": 36606629, "link": "https://stackoverflow.com/questions/36606629/requiring-lib-openmp-in-ruby-c-extension-gem-osx/36606867#36606867", "title": "Requiring lib (openmp) in ruby C extension gem [OSX]", "body": "<p>To solve this issue, I end up creating a link on /usr/local/bin/gcc to gcc-5:</p>\n\n<pre><code> ln -s /usr/local/bin/gcc-5 /usr/local/bin/gcc\n</code></pre>\n\n<p>and removing the following line from extconf.rb:</p>\n\n<p>CONFIG[\"CC\"] = \"gcc-5\"</p>\n"}], "owner": {"reputation": 476, "user_id": 2600779, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002398587067/picture?type=large", "display_name": "Raphael Ottoni", "link": "https://stackoverflow.com/users/2600779/raphael-ottoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1460574094, "creation_date": 1460572059, "last_edit_date": 1592644375, "question_id": 36606629, "link": "https://stackoverflow.com/questions/36606629/requiring-lib-openmp-in-ruby-c-extension-gem-osx", "title": "Requiring lib (openmp) in ruby C extension gem [OSX]", "body": "<p>I am starting to develop ruby gem extensions in C and I am stuck with a problem that appears to be simple.</p>\n<p>What I am trying to do is to create a simple gem extension that will execute some code in C that uses openmp.</p>\n<p>Here are my  extconf.rb and my c code:</p>\n<p><strong>extconf.rb</strong></p>\n<pre><code>require &quot;mkmf&quot;\nextension_name = &quot;visualize_helper&quot;\ndir_config(&quot;visualize_helper&quot;)\nCONFIG[&quot;CC&quot;] = &quot;gcc-5&quot;\n$CXXFLAGS += ' -fopenmp '\n$CFLAGS += ' -fopenmp '\nhave_library('gomp', &quot;main&quot;)\ncreate_makefile &quot;visualize_helper/visualize_helper&quot;\n</code></pre>\n<p>I needed to change the compiler <em>CONFIG[&quot;CC&quot;]</em> because OSX default gcc compiler is a CLANG one, so a installed gcc-5 through brew.</p>\n<p><strong>visualize_helper.c</strong></p>\n<pre><code>#include &lt;ruby.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;omp.h&gt;\n\nstatic VALUE openmp_test(VALUE self, VALUE string) {\n\n  int nthreads, tid;\n  FILE *f = fopen(&quot;/tmp/open_mp&quot;, &quot;w&quot;);\n\n  /* Fork a team of threads giving them their own copies of variables */\n  #pragma omp parallel private(nthreads, tid)\n  {\n\n     /* Obtain thread number */\n     tid = omp_get_thread_num();\n     fprintf(f,&quot;Hello World from thread = %d\\n&quot;, tid);\n\n     /* Only master thread does this */\n     if (tid == 0)\n     {\n       nthreads = omp_get_num_threads();\n       fprintf(f,&quot;Number of threads = %d\\n&quot;, nthreads);\n     }\n\n  }  /* All threads join master thread and disband */\n\n  fclose(f);\n  return string;\n}\n\n// Main function called when the gem is loaded\nvoid Init_visualize_helper(void) {\n\n  // Register the method openmp_test as a singleton for the class\n  rb_define_singleton_method(mVisualizeHelper, &quot;openmp_test&quot;,openmp_test, 1 );\n}\n</code></pre>\n<p>When a try to compile, at the first step which is to create the Makefile:</p>\n<pre><code>ruby extconf.rb\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>checking for Init_visualize_helper() in -lgomp... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.        \nYou may need configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/rapha/.rvm/rubies/ruby-2.1.5/bin/ruby\n    --with-visualize_helper-dir\n    --without-visualize_helper-dir\n    --with-visualize_helper-include\n    --without-visualize_helper-include=${visualize_helper-dir}/include\n    --with-visualize_helper-lib\n    --without-visualize_helper-lib=${visualize_helper-dir}/lib\n    --with-gomplib\n    --without-gomplib\n/Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:456:in  `try_do': The compiler failed to generate an executable file.   (RuntimeError)\nYou have to install development tools first.\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:541:in `try_link0'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:556:in `try_link'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:742:in `try_func'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:973:in `block in have_library'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:918:in `block in checking_for'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:351:in `block (2 levels) in postpone'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:321:in `open'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:351:in `block in postpone'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:321:in `open'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:347:in `postpone'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:917:in `checking_for'\n    from /Users/rapha/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/mkmf.rb:968:in `have_library'\n    from extconf.rb:7:in `&lt;main&gt;'\n</code></pre>\n<p><strong>mkmf.log</strong></p>\n<pre><code>&quot;gcc -o conftest -I/Users/rapha/.rvm/rubies/ruby-2.1.5/include/ruby-2.1.0/x86_64-darwin14.0 -I/Users/rapha/.rvm/rubies/ruby-2.1.5/include/ruby-2.1.0/ruby/backward -I/Users/rapha/.rvm/rubies/ruby- 2.1.5/include/ruby-2.1.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE - D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 - I/Users/mpapis/.sm/pkg/active/include -fPIC -mmacosx-version-min=10.7 - pipe -fopenmp  conftest.c  -L. -L/Users/rapha/.rvm/rubies/ruby-2.1.5/lib  -L. -L/Users/mpapis/.sm/pkg/active/lib -fPIC -Bstatic -fstack-protector    -arch x86_64   -lruby-static -framework CoreFoundation  -lpthread -ldl - lobjc &quot;\nld: warning: directory not found for option '- L/Users/mpapis/.sm/pkg/active/lib'\nld: library not found for -lgomp\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nchecked program was:\n/* begin */\n1: #include &quot;ruby.h&quot;\n2:\n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n<p><strong>Things I have tried</strong></p>\n<p>The very first three things that comes to my eyes are:</p>\n<ul>\n<li>&quot;--with-gomplib&quot;</li>\n<li>&quot;You have to install development tools first.&quot;</li>\n<li>the fact the mkmf.log shows gcc (which is CLANG) instead of gcc-5 that I specified in extconf.rb</li>\n</ul>\n<p>I updated my Xcode version to 7.2.1, my RVM to 1.27.0, I even tried to compile ruby 2.1.5 and 2.3.0 through rvm  instead of using the binaries.</p>\n<p><strong>A little more info</strong></p>\n<p>If I remove both lines  of <em>have_lib('gomp',X)</em> the I compile and generate the makefile, and if a check the makefile I see the:</p>\n<pre><code>CC = gcc-5 \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "rspec", "capybara"], "comments": [{"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "edited": false, "score": 0, "creation_date": 1460577426, "post_id": 36606496, "comment_id": 60813481, "body": "Do you necessarily need to check that specific URL? Otherwise you can just check that you are downloading a csv file like this: <code>expect(page.response_headers[&#39;Content-Type&#39;]).to be(&quot;text&#47;csv&quot;)</code> and you can further test the contents of the csv file like it&#39;s described on this other <a href=\"http://stackoverflow.com/questions/29309324/how-to-test-csv-file-download-in-capybara-and-rspec\">post</a>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1460591014, "post_id": 36606496, "comment_id": 60819677, "body": "If the intent is that you want to be sure the user has actually downloaded the CSV,  You could even do something like: <code>expect_any_instance(DownloadCsvController).to receive(:send_data).with(...)</code>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1460591104, "post_id": 36606496, "comment_id": 60819700, "body": "Also consider the options presented in: <a href=\"http://stackoverflow.com/questions/29309324/how-to-test-csv-file-download-in-capybara-and-rspec\" title=\"how to test csv file download in capybara and rspec\">stackoverflow.com/questions/29309324/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/19164255/downloading-a-csv-using-capybara\" title=\"downloading a csv using capybara\">stackoverflow.com/questions/19164255/&hellip;</a>"}], "owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460571681, "creation_date": 1460571681, "question_id": 36606496, "link": "https://stackoverflow.com/questions/36606496/how-to-test-if-a-url-is-fired-when-the-user-clicks-on-a-button-using-rspec-capyb", "title": "How to test if a URL is fired when the user clicks on a button using Rspec/Capybara?", "body": "<p>I have a button in my Rails application <code>Download CSV</code>. On clicking that, a CSV file gets downloaded on the user's machine in the \"Downloads\" folder. The browser url does not change but through <code>HttpFox</code> (an Http sniffer tool) I can see following url getting fired</p>\n\n<p><strong>URL 1 : Download CVS Button click URL</strong></p>\n\n<pre><code>GET /csv.csv?utf8=%E2%9C%93&amp;csv_export_limit=10000&amp;commit=Download+CSV HTTP/1.1\n</code></pre>\n\n<p><strong>URL 2: Browser URL</strong></p>\n\n<p><code>http://localhost:3000/search?utf8=%E2%9C%93&amp;start_time=04%2F01%2F2016+12%3A00+AM&amp;end_time=04%2F30%2F2016+12%3A00+AM&amp;store_id=&amp;payment_session_id=&amp;account_id=&amp;transaction_amount=&amp;iso_currency_code=&amp;commit=Search&amp;show_results=true</code></p>\n\n<p>In my rspec/capybara test how can I test if <code>URL 1</code> is getting fired? So far I have the following spec already written but have not been able to figure out the last step.</p>\n\n<p><strong>download_csv_spec.rb</strong></p>\n\n<pre><code>require 'rails_helper'\nrequire 'capybara/rspec'\n\nRSpec.feature 'Transaction Search' do\n\n  scenario ' - Download CSV scenario' do\n    visit '/signin'\n    fill_in 'Email', :with =&gt; 'user@payments.org'\n    fill_in 'Password', :with =&gt; 'Password123'\n    page.find('#login').click\n\n    # search page\n    visit '/search'\n    expect(page).to have_content(\"Search\")\n    click_button 'Search'\n    puts 'Search button clicked'\n    click_button 'Download CSV'\n    puts 'Download CSV button clicked'\n\n  end\n\nend\n</code></pre>\n\n<p><strong>download_csv_controller.rb</strong></p>\n\n<pre><code> def csvexport\n    respond_to do |format|\n      format.csv { send_data export_to_csv(fetch_csv_records), filename: \"transactions-#{Date.today}.csv\" }\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572074, "post_id": 36606571, "comment_id": 60810160, "body": "The current relationship is a one-to-many; A User can only have one company, but a company can have many Users. When I try using .push() I get an No Method error. Hmm, so I could eg. retrieve the string object from the model, then join it with the latest ID and update it?"}, {"owner": {"reputation": 52, "user_id": 3013947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2efe9952c865336ed718a7227983122?s=128&d=identicon&r=PG", "display_name": "RoyX", "link": "https://stackoverflow.com/users/3013947/royx"}, "reply_to_user": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572207, "post_id": 36606571, "comment_id": 60810236, "body": "If it is one to many there is no need to put columns in Company table. the normal way to do this is put a column named company_id in User table."}, {"owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572405, "post_id": 36606571, "comment_id": 60810334, "body": "Aha! I&#39;m pretty new to this. In the User class; belongs_to :company - and in the Company class; has_many :users. I already have a column called t.string :company_name in the User model, how can I link these together?"}, {"owner": {"reputation": 52, "user_id": 3013947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2efe9952c865336ed718a7227983122?s=128&d=identicon&r=PG", "display_name": "RoyX", "link": "https://stackoverflow.com/users/3013947/royx"}, "reply_to_user": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460574561, "post_id": 36606571, "comment_id": 60811723, "body": "It will automatically create relationship for you, no need to modify the database by yourself. You can read more about this by <a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_basics.html</a> ."}], "tags": [], "owner": {"reputation": 52, "user_id": 3013947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2efe9952c865336ed718a7227983122?s=128&d=identicon&r=PG", "display_name": "RoyX", "link": "https://stackoverflow.com/users/3013947/royx"}, "is_accepted": false, "score": 0, "last_activity_date": 1460571913, "creation_date": 1460571913, "answer_id": 36606571, "question_id": 36606492, "link": "https://stackoverflow.com/questions/36606492/pushing-to-an-array-in-ruby-on-rails/36606571#36606571", "title": "Pushing to an Array in Ruby on Rails", "body": "<p>I wonder if here you want to build many to many relationship, the best way to do this is using a many to many table instead of store all ids as an array string in databases;</p>\n\n<p>If you do want to store like this, the best way should be form a string instead of put array directly. For this things like array.join() would be very helpful for you.</p>\n\n<p>If you still insist your way, maybe you should try array.push() instead of &lt;&lt;</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572490, "post_id": 36606743, "comment_id": 60810396, "body": "I see! So is it enough to simply add a company_id column to the Users table? And how would I be able to later get all the users who belong to a Company?"}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572602, "post_id": 36606743, "comment_id": 60810471, "body": "You need to fill all the 3 steps I described. Then you&#39;ll be able to call <code>company.users</code> and ActiveRecord will do a query and return an ActiveRecord::Relation object wich acts mostly like an array of users."}, {"owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460572747, "post_id": 36606743, "comment_id": 60810556, "body": "Aha! Currently I&#39;m creating a new Company in the User class, when a new User is created. (with the code above) How would I then link them?"}, {"owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460573090, "post_id": 36606743, "comment_id": 60810788, "body": "Thank you! Please see the code in my updated question - could I then set the parameters of the company (such as ID)?"}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460573301, "post_id": 36606743, "comment_id": 60810907, "body": "yes, you can just set the company_id (and you don&#39;t need to call <code>c.users &lt;&lt; @user.id</code>), although I really don&#39;t understand why would you use SecureRandom to generate primary keys. and also you might use <code>if @user.valid?</code> instead of <code>if @user.save</code> to avoid saving the same object twice and possibly messing up the database."}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "edited": false, "score": 0, "creation_date": 1460573383, "post_id": 36606743, "comment_id": 60810970, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109078/discussion-between-almaron-and-dark-knight\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "is_accepted": true, "score": 4, "last_activity_date": 1460572973, "last_edit_date": 1460572973, "creation_date": 1460572385, "answer_id": 36606743, "question_id": 36606492, "link": "https://stackoverflow.com/questions/36606492/pushing-to-an-array-in-ruby-on-rails/36606743#36606743", "title": "Pushing to an Array in Ruby on Rails", "body": "<p>If you're trying to build a one-to-many relationship, what you should do is add a <code>company_id</code> field to the <code>users</code> table, add <code>belongs_to :company</code> to your <code>app/models/user.rb</code> and add <code>has_many :users</code> to your <code>app/models/company.rb</code>. </p>\n\n<p>Then you'd be able to access the users just like you need.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>If you want to create a company with the user you can just go like this.</p>\n\n<pre><code>@user.company = Company.create name: 'Some name'\n</code></pre>\n\n<p>Or even better to avoid duplication.</p>\n\n<pre><code>@user.company = Company.find_or_create_by name: 'Some name'\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5276603, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8468a768c23366a96ec4ec1dd25a84d7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Knight", "link": "https://stackoverflow.com/users/5276603/dark-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 36606743, "answer_count": 2, "score": 2, "last_activity_date": 1460573006, "creation_date": 1460571669, "last_edit_date": 1460573006, "question_id": 36606492, "link": "https://stackoverflow.com/questions/36606492/pushing-to-an-array-in-ruby-on-rails", "title": "Pushing to an Array in Ruby on Rails", "body": "<p>I am trying to create a string array inside my model, where I can push new strings (IDs) into the string array - but it's not pushing the correct values.</p>\n\n<p>Here is how the model looks:</p>\n\n<pre><code>class CreateCompanies &lt; ActiveRecord::Migration\n  def change\n  create_table :companies do |t|\n\n  t.string :name\n  t.string :email\n  t.string :users, array: true, default: []\n  t.timestamps null: false\n  end\n end\nend\n</code></pre>\n\n<p>And here is how I'm adding the new values to the array in the Controller:</p>\n\n<pre><code>c = Company.new\nc.users &lt;&lt; @user.id\nc.save\n</code></pre>\n\n<p>A value does indeed get added to the array, but it's not the ID but just some random value like this:</p>\n\n<pre><code>users: \"--- []\\n\\u{478A6}\"\n</code></pre>\n\n<p>Been stuck at this for a couple of days now - does anyone know what I'm missing?</p>\n\n<p><strong>UPDATE:</strong>\nAdded the code where I create a new Company</p>\n\n<pre><code> def create\n@user = User.new(user_params)\nif @user.save\n\n  @user.id = SecureRandom.random_number(999999)\n  session[:user_id] = @user.id\n\n  c = Company.new\n  c.id = SecureRandom.random_number(999999)\n  c.name = @user.company_name\n  c.email = \"email goes here\"\n  c.users &lt;&lt; @user.id\n  c.save\n\n  @user.company_id = c.id\n  @user.save\n\n  redirect_to '/dashboard'\nelse\n  redirect_to '/'\nend\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "whenever"], "comments": [{"owner": {"reputation": 1002, "user_id": 5479988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z_oUVK4Wkuo/AAAAAAAAAAI/AAAAAAAAABA/vn2BD49K67M/photo.jpg?sz=128", "display_name": "Jim Van Fleet", "link": "https://stackoverflow.com/users/5479988/jim-van-fleet"}, "edited": false, "score": 0, "creation_date": 1460572211, "post_id": 36606417, "comment_id": 60810238, "body": "what does <code>crontab -l</code> report?"}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 0, "creation_date": 1460573406, "post_id": 36606417, "comment_id": 60810997, "body": "What does send_daily_reports look like? Is it possible that there is some kind of time zone issue that prevents send_daily_reports from having any data to report on at 11:20pm?"}, {"owner": {"reputation": 170, "user_id": 3495146, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4597ccc281ad36d81eea480cf24cfba0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Gopinath", "link": "https://stackoverflow.com/users/3495146/nikhil-gopinath"}, "reply_to_user": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 1, "creation_date": 1460610131, "post_id": 36606417, "comment_id": 60825043, "body": "@msergeant I recieved the mail at 4.20 am when the time set was &quot;11.20pm&quot;. So I guess there was an error with the timezone setting in linux. I changed the timezone and now its working. Previously the default timezone was in utc and i thought the system would automatically set itself according to the timezone. Once I changed the time zone it is working now."}], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 3495146, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4597ccc281ad36d81eea480cf24cfba0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Gopinath", "link": "https://stackoverflow.com/users/3495146/nikhil-gopinath"}, "is_accepted": true, "score": 2, "last_activity_date": 1460611357, "last_edit_date": 1460611357, "creation_date": 1460610560, "answer_id": 36614286, "question_id": 36606417, "link": "https://stackoverflow.com/questions/36606417/whenever-gem-not-working-for-every-1-day-tasks-but-working-for-other-arguments-i/36614286#36614286", "title": "Whenever gem not working for every 1.day tasks but working for other arguments in rails", "body": "<p>I recieved the mail at <code>4.20 am</code> when the time set was <code>11.20 pm</code>. So I guess <code>timezone</code> setting was set to <code>utc</code> default in <code>amazon linux</code>. </p>\n\n<p>I changed the <code>timezone</code> and now its working and I referred this link <a href=\"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/set-time.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/set-time.html</a></p>\n\n<p>Previously the default timezone was in <code>utc</code> and I thought the system would automatically set itself according to the <code>timezone</code>. Once I changed the time zone it is working now.</p>\n"}], "owner": {"reputation": 170, "user_id": 3495146, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4597ccc281ad36d81eea480cf24cfba0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Gopinath", "link": "https://stackoverflow.com/users/3495146/nikhil-gopinath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 36614286, "answer_count": 1, "score": 1, "last_activity_date": 1460611357, "creation_date": 1460571449, "question_id": 36606417, "link": "https://stackoverflow.com/questions/36606417/whenever-gem-not-working-for-every-1-day-tasks-but-working-for-other-arguments-i", "title": "Whenever gem not working for every 1.day tasks but working for other arguments in rails", "body": "<p>I am using whenever gem and I have written a rake task to send emails.\nIn my schedule.rb when I use this code</p>\n\n<pre><code>set :environment, \"development\"\nset :output, {:error =&gt; \"log/cron_error_log.log\",\n:standard =&gt;\"log/cron_log.log\"}\n\nevery :day, :at =&gt; '11:20pm' do \n  rake \"send_daily_reports\"\nend\n</code></pre>\n\n<p>I am not getting mails but when i use something like this</p>\n\n<pre><code>every 5.minutes do\n  rake \"send_daily_reports\"\nend\n</code></pre>\n\n<p>I get mails for 5 every minutes.</p>\n\n<p>I tried replacing</p>\n\n<pre><code>every :day\n</code></pre>\n\n<p>with</p>\n\n<pre><code>every 1.day\n</code></pre>\n\n<p>but still its not working.\nI have followed every step. When I pull the code into the cloud I use the command</p>\n\n<pre><code>whenever -w\n</code></pre>\n\n<p>to update the crontab and then restart the server. I thought that there might be an issue with the linux system time.But when i used the \n    date \ncommand in the terminal I got the correct date and time.I also checked the cron_error log but there are no errors logged. Can anyone please help me out here?</p>\n"}, {"tags": ["ruby", "wordpress"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 6200292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812070c2eb32ab2039deb0a02af9217a?s=128&d=identicon&r=PG", "display_name": "Ron Holmes", "link": "https://stackoverflow.com/users/6200292/ron-holmes"}, "is_accepted": true, "score": 2, "last_activity_date": 1460570476, "creation_date": 1460570476, "answer_id": 36606116, "question_id": 36605941, "link": "https://stackoverflow.com/questions/36605941/create-wordpress-plugins-using-ruby/36606116#36606116", "title": "Create WordPress plugins using Ruby", "body": "<p>based on previous experience and some reviews of similar questions on SO, there are ways you can call Ruby from within your Wordpress code. The simplest and elegant solution I've seen to this is here : <a href=\"http://code.tutsplus.com/tutorials/build-a-custom-api-to-connect-wordpress-with-ruby-on-rails--cms-21189\" rel=\"nofollow\">http://code.tutsplus.com/tutorials/build-a-custom-api-to-connect-wordpress-with-ruby-on-rails--cms-21189</a></p>\n\n<p>There are loads of arguments for going with both solutions at the same time, but probably the easiest read is this <a href=\"https://bernardic.ca/2012/07/08/rails-vs-wordpress/\" rel=\"nofollow\">https://bernardic.ca/2012/07/08/rails-vs-wordpress/</a></p>\n\n<p>Enjoy!</p>\n"}], "owner": {"reputation": 235, "user_id": 2953161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae68cccacab5333f25cb8afd4748b655?s=128&d=identicon&r=PG", "display_name": "Casey Anderson", "link": "https://stackoverflow.com/users/2953161/casey-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 36606116, "answer_count": 1, "score": 0, "last_activity_date": 1460570476, "creation_date": 1460569826, "question_id": 36605941, "link": "https://stackoverflow.com/questions/36605941/create-wordpress-plugins-using-ruby", "title": "Create WordPress plugins using Ruby", "body": "<p>I would like to create a WordPress plugin using Ruby (language). I understand that PHP is the primary server-side language used with WP. I don't know PHP, but know a great deal about Ruby, which is also a server-side language. Can anybody help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "resque"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1460569326, "post_id": 36605755, "comment_id": 60808492, "body": "You can&#39;t. There is no easy solution to make two incompatible pieces of software just work. Upgrade one, or downgrade the other."}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1460571170, "post_id": 36605755, "comment_id": 60809594, "body": "do you insist on resque ? there are alternatives like delayed_job, beanneater(using beanstalkd) and others."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1460579583, "post_id": 36605755, "comment_id": 60814690, "body": "The gemspec for that gem only requires sinatra &gt;= 0.9.2 - are you sure there isn&#39;t something else stopping a more recent version being used?"}, {"owner": {"reputation": 5277, "user_id": 3045515, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/azkoB.jpg?s=128&g=1", "display_name": "Sambhav Sharma", "link": "https://stackoverflow.com/users/3045515/sambhav-sharma"}, "edited": false, "score": 0, "creation_date": 1460580879, "post_id": 36605755, "comment_id": 60815389, "body": "I did a dependency check, and it stated that sinatra 1.0 is required by resque"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 2, "last_activity_date": 1460569647, "creation_date": 1460569647, "answer_id": 36605879, "question_id": 36605755, "link": "https://stackoverflow.com/questions/36605755/how-to-make-a-gem-work-with-newer-version-of-dependencies/36605879#36605879", "title": "How to make a gem work with newer version of dependencies?", "body": "<p>Fork the project on GitHub. Replace the dependency version <a href=\"https://github.com/resque/resque/blob/master/resque.gemspec#L24\" rel=\"nofollow\">here</a>. Run the test and if everything passes create a pull request.</p>\n\n<pre><code>s.add_dependency \"sinatra\", \"&gt;= 0.9.2\"\n\n# to this\ns.add_dependency \"sinatra\", \"~&gt; 1.4\"\n</code></pre>\n\n<p>Alternatively, you will have to your own gem and use it in your project. But that obviously has its disadvantages! That should be your last resort.</p>\n"}], "owner": {"reputation": 5277, "user_id": 3045515, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/azkoB.jpg?s=128&g=1", "display_name": "Sambhav Sharma", "link": "https://stackoverflow.com/users/3045515/sambhav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 36605879, "answer_count": 1, "score": 1, "last_activity_date": 1460569647, "creation_date": 1460569228, "question_id": 36605755, "link": "https://stackoverflow.com/questions/36605755/how-to-make-a-gem-work-with-newer-version-of-dependencies", "title": "How to make a gem work with newer version of dependencies?", "body": "<p>I am using <a href=\"https://github.com/resque/resque\" rel=\"nofollow\">resque</a> gem and it requires sinatra (>= 0.9.2)</p>\n\n<p>This installs Sinatra 1.0 gem which produces an error like <code>loadError: cannot load such file -- rack/showexceptions</code></p>\n\n<p>This is an issue fixed in Sinatra version 1.4.7, but I can't make resque to work with 1.4.7, even if version 1.4.7 is installed, bundle install still install version 1.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 4, "last_activity_date": 1460568958, "creation_date": 1460568958, "answer_id": 36605668, "question_id": 36605348, "link": "https://stackoverflow.com/questions/36605348/time-datatype-in-rails/36605668#36605668", "title": "Time datatype in Rails", "body": "<p>As the documentation states, it is not.</p>\n\n<blockquote>\n  <p>Time is an abstraction of dates and times. Time is stored internally\n  as the number of seconds with fraction since the Epoch, January 1,\n  1970 00:00 UTC.</p>\n</blockquote>\n\n<p>There are several things you can do:</p>\n\n<ul>\n<li>Store it as a string and do regex validation.</li>\n<li>If you are using Postgres and don't mind depending on it, you can use <code>time</code> type. This would allow you do things like: <code>YourModel.where(\"stime &gt; '13:00:00'\")</code>.</li>\n<li>Store the time of the day in seconds since midnight. This will require you to add some helper methods for creating and scopes for querying data. You might find ActiveSupport's <a href=\"http://edgeguides.rubyonrails.org/active_support_core_extensions.html#time\" rel=\"nofollow\">extension on numeric values</a> helpful.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 3, "last_activity_date": 1460570732, "last_edit_date": 1460570732, "creation_date": 1460569393, "answer_id": 36605809, "question_id": 36605348, "link": "https://stackoverflow.com/questions/36605348/time-datatype-in-rails/36605809#36605809", "title": "Time datatype in Rails", "body": "<p>One way of handling this issue, to exemplify Uzbekjon's third point, is storing the time as seconds since midnight in an integer column:</p>\n\n<pre><code>stime = Time.now\n# =&gt; 2016-04-13 10:58:13 -0700\nseconds = stime.seconds_since_midnight.to_i\n# =&gt; 39493\n</code></pre>\n\n<p>You can then retrieve this value and parse it into the time of day when needed:</p>\n\n<pre><code>time = Time.at(seconds).utc\n# =&gt; 1970-01-01 10:58:13 UTC\nresult = time.strftime(\"%I:%M\")\n# =&gt; \"10:58\"\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 33, "user_id": 4387542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSfMG.jpg?s=128&g=1", "display_name": "FawzY", "link": "https://stackoverflow.com/users/4387542/fawzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2254, "favorite_count": 0, "accepted_answer_id": 36605668, "answer_count": 2, "score": 2, "last_activity_date": 1460570732, "creation_date": 1460567959, "last_edit_date": 1460568849, "question_id": 36605348, "link": "https://stackoverflow.com/questions/36605348/time-datatype-in-rails", "title": "Time datatype in Rails", "body": "<p>I created a database using rails with <code>stime</code> attribute (referring to the starting time). Its type is <code>Time</code>. When I added a record with:</p>\n\n<pre><code>stime = \"10:10\"\n</code></pre>\n\n<p>it has been added as:</p>\n\n<pre><code>\"stime\":\"2000-0101T10:10:00.000Z\"\n</code></pre>\n\n<p>I only want the time, not the date. I thought it's the difference between <code>Time</code> and <code>DateTime</code>. Could anyone tell me what the problem is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1460567888, "post_id": 36605291, "comment_id": 60807656, "body": "It seems like you does not have any Category or Listing instances."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460567919, "post_id": 36605291, "comment_id": 60807670, "body": "On wich do you get that error?"}, {"owner": {"reputation": 11, "user_id": 6039249, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-S2cBcLM4ISw/AAAAAAAAAAI/AAAAAAAAABs/4er3ZUcDOuI/photo.jpg?sz=128", "display_name": "kim talya", "link": "https://stackoverflow.com/users/6039249/kim-talya"}, "edited": false, "score": 0, "creation_date": 1460568235, "post_id": 36605291, "comment_id": 60807848, "body": "i have fix the error"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460568314, "post_id": 36605291, "comment_id": 60807901, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 4687343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/870b033794b3eb53d0017f571beb9945?s=128&d=identicon&r=PG&f=1", "display_name": "powerup7", "link": "https://stackoverflow.com/users/4687343/powerup7"}, "is_accepted": false, "score": 0, "last_activity_date": 1460593679, "creation_date": 1460593679, "answer_id": 36611792, "question_id": 36605291, "link": "https://stackoverflow.com/questions/36605291/when-i-am-creating-a-listing-i-am-getting-this-error/36611792#36611792", "title": "when i am creating a listing , i am getting this error", "body": "<p>Undefined method map for nil class means you're calling the method on something that's nil. Nil class does not have that method.</p>\n\n<p>debug your code to find out what is causing the object to be nil class</p>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 7617067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFENc.jpg?s=128&g=1", "display_name": "Mohammad Shahnawaz", "link": "https://stackoverflow.com/users/7617067/mohammad-shahnawaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1515072848, "creation_date": 1515072848, "answer_id": 48096483, "question_id": 36605291, "link": "https://stackoverflow.com/questions/36605291/when-i-am-creating-a-listing-i-am-getting-this-error/48096483#48096483", "title": "when i am creating a listing , i am getting this error", "body": "<p>You can remove this error before assigning the value to select option tag if its nil or not by the below code</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n   &lt;% unless @locations.empty? %&gt;\n    &lt;%= select_tag(:location_id,options_for_select(@locations), :prompt=&gt;\"select your location\")%&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form-group\"&gt;\n  &lt;% unless @categories.empty? %&gt;\n    &lt;%= select_tag(:category_id,options_for_select(@categories), :prompt=&gt;\"select a category\")%&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6039249, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-S2cBcLM4ISw/AAAAAAAAAAI/AAAAAAAAABs/4er3ZUcDOuI/photo.jpg?sz=128", "display_name": "kim talya", "link": "https://stackoverflow.com/users/6039249/kim-talya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1515072848, "creation_date": 1460567764, "last_edit_date": 1460570576, "question_id": 36605291, "link": "https://stackoverflow.com/questions/36605291/when-i-am-creating-a-listing-i-am-getting-this-error", "title": "when i am creating a listing , i am getting this error", "body": "<p>undefined method `map' for nil:NilClass</p>\n\n<pre><code>  &lt;% end %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= select_tag(:location_id,options_for_select(@locations), :prompt=&gt;\"select your location\")%&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= select_tag(:category_id,options_for_select(@categories), :prompt=&gt;\"select a category\")%&gt;\n</code></pre>\n\n<p>listing_controller.rb</p>\n\n<pre><code>def new\n  @listing = Listing.new\n  @categories = Category.all.map{|c| [c.name, c.id]}\n\n  @locations= Location.all.map{|c| [c.name, c.id]}\nend\n\n\ndef edit\n   @categories = Category.all.map{|c| [c.name, c.id]}\n    @locations= Location.all.map{|c| [c.name, c.id]}\nend\n\n\ndef create\n  @listing = Listing.new(listing_params)\n\n  @listing.category_id = params[:category_id]\n  @listing.location_id = params[:location_id]\n\n  @listing.user_id = current_user.id\n\n\n  respond_to do |format|\n    if @listing.save\n      format.html { redirect_to @listing, notice: 'Listing was successfully created.' }\n      format.json { render :show, status: :created, location: @listing }\n    else\n      format.html { render :new }\n      format.json { render json: @listing.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1460570770, "post_id": 36606143, "comment_id": 60809363, "body": "i basically just want to test that scenarios method in my show action.....but to do that I have to get the fund id from the params that is being passed through to my GET request in my javascript......I am unsure how to get that fund_id param in my specs though =("}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1460570935, "post_id": 36606143, "comment_id": 60809450, "body": "When you query add <code>?report[fund_id]=1</code> to the URL. A better way would be to mock your model&#39;s <code>.find()</code> method to return or not to return a Fund."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1460570825, "last_edit_date": 1460570825, "creation_date": 1460570619, "answer_id": 36606143, "question_id": 36604761, "link": "https://stackoverflow.com/questions/36604761/how-to-test-this-rspec-ajax-request/36606143#36606143", "title": "How to test this Rspec Ajax request", "body": "<p>Well, if I understood you correctly, you want to test if your ajax calls. You can use acceptance tests frameworks like <a href=\"http://jnicklas.github.io/capybara/\" rel=\"nofollow\">Capybara</a> or simply test your call to <code>/reports/geodistribution.js</code> URL just like any other controller call. Setup the required environment (with <code>Fund</code>, without <code>Fund</code>) and check it behaves correctly.</p>\n\n<p>I would also refactor your code a bit:</p>\n\n<pre><code>def scenarios\n  @scenarios ||= fund.try(:scenarios) : []\nend\n\ndef fund\n  # if there is no fund found, let it throw an exception\n  @fund ||= Funds.find(params[:report][:fund_id])\nend\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460570825, "creation_date": 1460565998, "last_edit_date": 1460569855, "question_id": 36604761, "link": "https://stackoverflow.com/questions/36604761/how-to-test-this-rspec-ajax-request", "title": "How to test this Rspec Ajax request", "body": "<p>I'm trying to test the scenarios method in my show action</p>\n\n<pre><code>def scenarios\n  @scenarios ||= fund.present? ? fund.scenarios : []\nend\n\ndef fund\n  @fund ||= funds.find_by(id: fund_id)\nend\n\ndef fund_id\n  return nil unless params.fetch(:report, false)\n  params.fetch(:report).fetch(:fund_id, 0)\nend\n</code></pre>\n\n<p>I feel like i need to get the ajax request and grab the params of fund_id out of it but I am unsure how to do that or if that is what I am suppose to do </p>\n\n<p>this is my my ajax request in my js file</p>\n\n<pre><code>$('#geodistributions-filter-form-container')\n  .on('change', 'select#report_fund_id', function() {\n  $.get('/reports/geodistribution.js',                            \n  $(this).parents('form').serialize());\n});\n</code></pre>\n\n<p>I want to test two contexts </p>\n\n<p>context 'scenario when a fund is not present'</p>\n\n<p>context 'scenario when a fund is present'</p>\n\n<p>I am unsure how to start off testing this if someone can point me in the right direction that would be great.</p>\n"}, {"tags": ["ruby", "object"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1460565661, "post_id": 36604549, "comment_id": 60806231, "body": "What is your question?"}, {"owner": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1460565860, "post_id": 36604549, "comment_id": 60806351, "body": "How to create the class House, in order to have the class Window and Door inside of it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460566119, "post_id": 36604549, "comment_id": 60806510, "body": "mareiou, please edit your question to include your comment that answers mudsie&#39;s question, and delete the comment."}], "answers": [{"comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460567692, "post_id": 36604775, "comment_id": 60807535, "body": "Upvoting and adding my 2 cents. @mareiou I would suggest also looking into object oriented programming principles. In this specific case you would want to create methods in <code>House</code> class like <code>#open_door</code> or <code>#close_window</code> instead of calling them on returned objects. This is guided by <a href=\"https://www.google.com/search?q=Law+of+Demeter\" rel=\"nofollow noreferrer\">Law of Demeter</a>. Alternatively, create another class that takes instances of your classes and do operations on them, like <code>HomeManager</code>. This is guided by <a href=\"https://www.google.com/search?q=SRP\" rel=\"nofollow noreferrer\">SRP principle</a>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1460566594, "last_edit_date": 1460566594, "creation_date": 1460566044, "answer_id": 36604775, "question_id": 36604549, "link": "https://stackoverflow.com/questions/36604549/how-to-create-an-object-class-made-by-objects-classes-in-ruby/36604775#36604775", "title": "How to create an object (class) made by objects (classes) in ruby?", "body": "<p>Though I do not understand, why you decided to ask this question here instead of reading some introduction to Ruby language, the answer follows:</p>\n\n<pre><code>class Door\n  def open; end\n  def close; end\nend\nclass Window\n  def open; end\n  def close; end\nend\nclass House\n  attr_reader :door, :window\n  def initialize door, window\n    @door, @window = door, window\n  end\nend\n\nhouse = House.new Door.new, Window.new\nhouse.door.open\nhouse.window.close\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1460569112, "answer_count": 1, "score": -4, "last_activity_date": 1460566594, "creation_date": 1460565396, "question_id": 36604549, "link": "https://stackoverflow.com/questions/36604549/how-to-create-an-object-class-made-by-objects-classes-in-ruby", "closed_reason": "Needs details or clarity", "title": "How to create an object (class) made by objects (classes) in ruby?", "body": "<p>Imagine I have an object \"House\". Inside the \"House\" I have want to have an object \"Door\" and an object \"Window\" with its different methods, lets say open and close doors/windows. \nMy main goal is to have code that looks like this:</p>\n\n<pre><code>my_house = House.new\nneighbor_house = House.new\n\nmy_house.Door.open\nneighbor_house.Window.close\nneighbor_house.Door.open\nneighbor_house.Door.close\nmy_house.Door.close\n</code></pre>\n"}, {"tags": ["ruby", "security", "if-statement", "slim-lang"], "answers": [{"tags": [], "owner": {"reputation": 17289, "user_id": 801544, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/70034fa76ec3ada7dc95ecb8dc01f74f?s=128&d=identicon&r=PG", "display_name": "Simone", "link": "https://stackoverflow.com/users/801544/simone"}, "is_accepted": false, "score": 0, "last_activity_date": 1460565438, "creation_date": 1460565438, "answer_id": 36604563, "question_id": 36604367, "link": "https://stackoverflow.com/questions/36604367/is-using-if-then-in-views-a-reasonable-security-practice/36604563#36604563", "title": "Is using if/then in VIEWS a reasonable security practice?", "body": "<p>Your example is perfectly fine IMHO, but it really depends on your requirements. If you think that someday there will be the need for more kinds of users and you're afraid the views could get messy, I'd recommend looking into an ACL library. Alternatively you can always roll your own authorization layer.</p>\n"}, {"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1460568176, "creation_date": 1460568176, "answer_id": 36605417, "question_id": 36604367, "link": "https://stackoverflow.com/questions/36604367/is-using-if-then-in-views-a-reasonable-security-practice/36605417#36605417", "title": "Is using if/then in VIEWS a reasonable security practice?", "body": "<p>Your view is fine, but obviously, it is in no way secure. You have to check the privileges in your \"controller\" (if you have one) or in that request's receiving end.</p>\n\n<p>Also, that logic will probably be used in more than one place. You might consider extracting it into a helper method.</p>\n\n<pre><code>form action='/12345/destroy', method='POST'\n  = render_destroy_action_for @current_user\n</code></pre>\n\n<p>Once you have that logic hidden in a method, it will be easier to change later.</p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460606680, "creation_date": 1460564878, "last_edit_date": 1460606680, "question_id": 36604367, "link": "https://stackoverflow.com/questions/36604367/is-using-if-then-in-views-a-reasonable-security-practice", "title": "Is using if/then in VIEWS a reasonable security practice?", "body": "<p>I'm guessing no. Here's the situation I have in mind:</p>\n\n<pre><code>form action='/12345/destroy', method='POST'\n  - if @current_user.kind_of? Admin\n    button\n  - else\n    span You cant do that\n</code></pre>\n\n<p>What's the better way to go about constructing a page like this? Create a controller for those \"in charge\" and have the buttons there? What if the admin chooses to disallow some users from using the delete button, are we back to square one? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "routing", "routes"], "comments": [{"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1460941746, "post_id": 36604011, "comment_id": 60957397, "body": "How different are Firefighter, Chief and Captain models? Normally you would have one User model and distinguish between &quot;types&quot; of user via written attributes."}, {"owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "reply_to_user": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1460941868, "post_id": 36604011, "comment_id": 60957421, "body": "@PetrGazarov they all inherit from User class, but each of them has individual dashboards, account options and settings, etc. I&#39;m just not sure how to organize routes so that it&#39;s not such a mess."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1460942916, "post_id": 36604011, "comment_id": 60957648, "body": "Alternatively, you can write path helpers for your specific situations. For example, current_user_dashboard_path <code>link_to &#39;Link to Dashboard&#39;,  current_user_dashboard_path(yesterday)</code>. Inside the helper you can find who is currently logged in and return the appropriate url."}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3101782, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a7f2da739317a5199362dd7b998ad967?s=128&d=identicon&r=PG", "display_name": "Disha", "link": "https://stackoverflow.com/users/3101782/disha"}, "is_accepted": true, "score": 1, "last_activity_date": 1460964775, "creation_date": 1460964775, "answer_id": 36687880, "question_id": 36604011, "link": "https://stackoverflow.com/questions/36604011/managing-urls-when-logged-in-users-change-the-base-of-the-url/36687880#36687880", "title": "Managing URLs when logged in users change the base of the URL", "body": "<p>As far as I have understood your question : You are trying to create role specific URLs. <br/>\nI usually use <a href=\"https://github.com/RolifyCommunity/rolify/\" rel=\"nofollow\">Rolify</a> gem for maintaining roles and have used its function to find role of that user in my code.</p>\n\n<p>You could do something like this : </p>\n\n<p>1) Assuming you are creating in model User, create a app/libraries/dynamic_router.rb</p>\n\n<pre><code>class DynamicRouter\n  def self.load\n    ComingSoon::Application.routes.draw do\n      User.all.each do |pg|\n        puts \"Routing #{pg.roles.first}\"\n        get \"/dashboard\", :to =&gt; \"#{pg.roles.first}#dashboard\", :as =&gt; \"#{pg.roles.first}_dashboard\"\n      end\n    end\n  end\n\n  def self.reload\n    ComingSoon::Application.routes_reloader.reload!\n  end\nend\n</code></pre>\n\n<p>With this you can call dashboard from all your roles like this : \nfirefighters_dashboard_path or police_dashboard_path.</p>\n\n<p>2) Let UserController know about your dynamic router :</p>\n\n<pre><code>class UserController &lt; ActiveRecord::Base\n\n  before_action :reload_routes\n\n  def reload_routes\n    DynamicRouter.reload\n  end\nend\n</code></pre>\n\n<p>3) To get the dynamic routes generating, the config/routes.rb file was edited to replace the catch-all route with a call on the DynamicRouter.load</p>\n\n<pre><code>ComingSoon::Application.routes.draw do\n  root 'home#index'\n  get 'not_found' =&gt; 'users#not_found'\n  DynamicRouter.load\nend\n</code></pre>\n\n<p>I have taken reference from - <a href=\"http://codeconnoisseur.org/ramblings/creating-dynamic-routes-at-runtime-in-rails-4\" rel=\"nofollow\">http://codeconnoisseur.org/ramblings/creating-dynamic-routes-at-runtime-in-rails-4</a>\nYou can find more details there.</p>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2214, "user_id": 2167061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CSvOn.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2167061/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1461003261, "creation_date": 1461003261, "answer_id": 36701405, "question_id": 36604011, "link": "https://stackoverflow.com/questions/36604011/managing-urls-when-logged-in-users-change-the-base-of-the-url/36701405#36701405", "title": "Managing URLs when logged in users change the base of the URL", "body": "<p>I'm not sure if this will answer your question, but if I understand you correctly, you are trying to dry/refactor your routes/controllers.  I'd organize such routes as following:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  POSSIBLE_ROLES = ['firefighter', 'chief', 'captain']\n  scope \"/:role\", defaults: {role: 'firefighter'}, constraints: { role: /#{POSSIBLE_ROLES.join(\"|\")}/ } do\n    get \"/foo\", :to =&gt; \"controller#action\", :as =&gt; :foo\n  end\n\nend\n</code></pre>\n\n<p>The routes helper would work like this:</p>\n\n<pre><code>foo_path # -&gt; /firefighter/foo\nfoo_path(:role =&gt; 'chief') # -&gt; /chief/foo\nfoo_path(:role =&gt; 'something') # throws ActionController::UrlGenerationError\n</code></pre>\n\n<p>You could access the current value in your controllers via <code>params[:role]</code>, and you can feel certain that only valid values are passed.</p>\n\n<p><em>Edit:</em></p>\n\n<p>It's probably worth to mention, that calling an url like <code>/something/foo</code> would also result in a routing error (404).</p>\n"}, {"tags": [], "owner": {"reputation": 839, "user_id": 534458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a64b086b589817d904b906acdbcd673?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/534458/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1461137211, "creation_date": 1461137211, "answer_id": 36736690, "question_id": 36604011, "link": "https://stackoverflow.com/questions/36604011/managing-urls-when-logged-in-users-change-the-base-of-the-url/36736690#36736690", "title": "Managing URLs when logged in users change the base of the URL", "body": "<p>I'm going to make two assumptions. If these aren't both true, then the advice after probably isn't super useful:</p>\n\n<ul>\n<li>Your different roles of users have dashboards and other pages that <em>generally</em> behave the same</li>\n<li>Where there is variation, it's because some users are capable of certain things other users aren't, and that mostly will amount to some users having extra components visible in views that other users don't.</li>\n</ul>\n\n<p>In this case, I think you would be served well by a simple role &amp; privilege system. A user can have many roles, and each role has many privileges associated with it. As such, a user has a certain set of privileges.</p>\n\n<p>With this in mind, take components of your views that only certain users can use, put those into partials, and wrap the partial in a conditional that checks whether the user has the privilege associated with using that thing. In general, I recommend checking whether a user has a specific privilege as much as possible; that way you are free to change up the privileges associated with roles without worrying that you are breaking a ton of logic in other places.</p>\n\n<p>If there are certain controller actions that should have limited access, you can use a <code>before_action</code> method to verify that the user has the correct privilege before you proceed. </p>\n\n<p>An approach like this can help keep your routes file clean and your controllers and views free of unnecessary duplication.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 6108672, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B04biSz76wE/AAAAAAAAAAI/AAAAAAAAACk/j7HUDiTdAog/photo.jpg?sz=128", "display_name": "Artem Biserov", "link": "https://stackoverflow.com/users/6108672/artem-biserov"}, "is_accepted": false, "score": 0, "last_activity_date": 1461231270, "creation_date": 1461231270, "answer_id": 36765531, "question_id": 36604011, "link": "https://stackoverflow.com/questions/36604011/managing-urls-when-logged-in-users-change-the-base-of-the-url/36765531#36765531", "title": "Managing URLs when logged in users change the base of the URL", "body": "<p>In this situation Single Responsibility Principle is better than DRY.\nUse namespaces in routes and different interfaces for each role.</p>\n\n<pre><code>namespace :firefighter do\n  resource :dashboard, only: :show, controller: :dashboard\nend\nnamespace :chefs do\nend\n</code></pre>\n\n<p>Similar parts in views you can move to partials \"app/views/shared\". Date use as a parameter and don't use in routes.\nCode will be more understandable than with dynamic routes.</p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 36687880, "answer_count": 4, "score": 1, "last_activity_date": 1461231270, "creation_date": 1460563802, "last_edit_date": 1495540373, "question_id": 36604011, "link": "https://stackoverflow.com/questions/36604011/managing-urls-when-logged-in-users-change-the-base-of-the-url", "title": "Managing URLs when logged in users change the base of the URL", "body": "<p><a href=\"https://stackoverflow.com/questions/36603886/consolidating-messy-routes-in-rails-4-how-to-organize-routes-to-not-point-urls\">Piggybacking off this question</a> I asked a second ago, in my app there's sort of a date scroller. Because the url structure goes like <code>/firefighter/dashboard/11-08-2016</code> if you want to take a look at that particular date, upon login I actually save the user \"type\" and so the code for the button looks like this:</p>\n\n<pre><code>a.button href=\"/#{session[:user_type]}/dashboard/#{yesterday}\"\n</code></pre>\n\n<p>This seems embarrassing and wrong but with many users sharing many pages all while having different privileges has really thrown me off. I'd like to refactor it so it's not crazy.</p>\n\n<p>The alternative couldn't possibly be making a menu partial for every single user?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "code-organization"], "comments": [{"owner": {"reputation": 999, "user_id": 1217443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rVBOf.jpg?s=128&g=1", "display_name": "Anthony Wang", "link": "https://stackoverflow.com/users/1217443/anthony-wang"}, "edited": false, "score": 0, "creation_date": 1460603327, "post_id": 36603886, "comment_id": 60823069, "body": "Are you sure you want to do that? Each route maps to one controller action, so you would have <code>if admin?; elsif firefighter?; else ... end</code> in every single controller action, plus every view.  You might want to just have a bunch of layouts &amp; partials to share the view code, and leave the route/controller action stuff split up."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1460943584, "post_id": 36603886, "comment_id": 60957784, "body": "You know you can DRY your code by just having one shared template for dashboard, account, etc. (since you said they mostly are the same for all users). Render those templates manually from controllers <code>render &#39;shared&#47;dashboard&#39;</code>."}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460564535, "creation_date": 1460563481, "last_edit_date": 1460564535, "question_id": 36603886, "link": "https://stackoverflow.com/questions/36603886/consolidating-messy-routes-in-rails-4-how-to-organize-routes-to-not-point-urls", "title": "Consolidating messy routes in Rails 4. How to organize routes to not point urls to static links?", "body": "<p>Here comes a rails nub organizational question:</p>\n\n<h1>What exists:</h1>\n\n<p>A \"Railsy\" link would look something like this (in slim)</p>\n\n<pre><code>span\n  a href= signout_path\n</code></pre>\n\n<p><code>signout_path</code> correspond to <code>AuthController#signout</code>. </p>\n\n<p>So, in my applications there's several types of users - Firefighters, Chiefs and Captains.</p>\n\n<p>Each one has very similar routes:</p>\n\n<pre><code>/dashboard\n/dashboard/:date\n( this is in case they want to see a previous date; \n  same dashboard, different data in the controller )\n/account\n/account/update\n/entry/view\n/entry/edit\n</code></pre>\n\n<p>Entries may or may not belong to a user. Because entries should be visible to any user (though not relevant actions)</p>\n\n<p>Take a look at my disgusting mess of routes:</p>\n\n<pre><code>scope :firefighters do\n    get '/dashboard'        =&gt; 'firefighters#dashboard'\n    get '/dashboard/:date'  =&gt; 'firefighters#dashboard'\n    get '/account'          =&gt; 'account#account'\n    post '/account/update'  =&gt; 'firefighters#account_update'\n\n    get '/account/change_password' =&gt; 'account#change_password'\n    get '/account/change_cell' =&gt; 'account#change_cell'\n    get '/account/change_email' =&gt; 'account#change_email'\n    get '/account/change_notifications' =&gt; 'account#change_notifications'\n\n\n    post '/account/update_cell' =&gt; 'account#update_cell'\n\n    # post '/account/update_pass' =&gt; 'account#update_pass'\n    # post '/account/update_cell' =&gt; 'account#update_cell'\n    # post '/account/update_email' =&gt; 'account#update_email'\n    # post '/account/update_notifications' =&gt; 'account#update_notifications'\n\n    # get '/account/change_cell_number' =&gt; 'firefighters#account_change_cell_number'\n    # post '/account/request_cell_change' =&gt; 'firefighters#account_request_cell_change'\n    # post '/account/update_cell' =&gt; 'firefighters#account_update_cell'\n\n    # get '/account/change_password' =&gt; 'firefighters#account_change_pass'\n    # post '/account/update_password' =&gt; 'firefighters#account_update_pass'\n\n    # get '/account/change_email' =&gt; 'firefighters#account_change_email'\n    # post '/account/request_email_change' =&gt; 'firefighters#account_request_email_change'\n    # post '/account/update_email' =&gt; 'firefighters#account_update_email'\n\n    get '/approve'          =&gt; 'firefighters#approve'\n    get '/set_tester'       =&gt; 'firefighters#set_tester'\n  end\n  scope :entries do\n    post '/verify'          =&gt; 'entries#verify'\n    post '/approve'         =&gt; 'entries#approve'\n    post '/finalize'        =&gt; 'entries#finalize'\n    post '/comment'         =&gt; 'entries#comment'\n    post '/update'          =&gt; 'entries#update'\n    get '/edit/:entry_id'   =&gt; 'entries#edit'\n  end\n</code></pre>\n\n<p>I used <code>scope</code> to avoid writing a million routes. I moved <code>Entry</code> routes under <code>resources :entries</code> for this reason.</p>\n\n<p><strong>Currently, every user type has their own dashboard page with slight variations, just to make it work</strong></p>\n\n<p>Right now there is a separate <code>dashboard.slim</code>, <code>account.slim</code>, etc for Firefighters, Chiefs, you get it.</p>\n\n<h1>How I'd like things to be</h1>\n\n<p>I'd like to have one dashboard to rule them all. However links like <code>firefighters_dashboard_path</code> isn't terribly useful if you only have one view file. I work around this problem by having a slightly different dashboard page for each user. This seems wrong and not at all DRY.</p>\n\n<h1>How do I organize routes so that there is one dashboard and depending on the user, links like <code>account_path</code> would lead one to firefighter's account and not an admin's account, for instance?</h1>\n\n<p>In other words, I login as captain, the link to my account should be <code>site.com/account</code>. I login as manager, my link to management should be 'site.com/managing'. Saving \"identity\" in session is craziness.</p>\n\n<p>This is a bit to take in, apologies for the wall of text but help would be much appreciated.</p>\n"}, {"tags": ["ruby", "command-line", "command-line-arguments"], "comments": [{"owner": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "edited": false, "score": 1, "creation_date": 1460561328, "post_id": 36603017, "comment_id": 60803116, "body": "is the <code>def self.name_of_method</code> the problem???"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1460561602, "post_id": 36603017, "comment_id": 60803337, "body": "&quot;This executes both methods&quot; - no, it doesn&#39;t, given the code that you show. Nothing is executed here."}, {"owner": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460561865, "post_id": 36603017, "comment_id": 60803555, "body": "@SergioTulentsev, you were right... that is something that I added to try a new approach. I updated the code."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460564457, "post_id": 36603017, "comment_id": 60805407, "body": "Still it won&#39;t execute any code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1460565694, "post_id": 36603017, "comment_id": 60806250, "body": "What @Sergio means is that, to execute your code, you need to add lines such as the following after your class definition: <code>t = TestClass.new; t.test_verify_one; t.test_verify_two</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460565737, "post_id": 36603017, "comment_id": 60806278, "body": "@CarySwoveland: thanks Cary :)"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "edited": false, "score": 0, "creation_date": 1460562720, "post_id": 36603367, "comment_id": 60804194, "body": "Thanks @Anthony E  Now I am having this issue:  <code>-e:1:in </code>&lt;main&gt;&#39;: undefined method <code>test_verify_one&#39; for TestClass:Class (NoMethodError)</code>"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "edited": false, "score": 0, "creation_date": 1460562785, "post_id": 36603367, "comment_id": 60804243, "body": "Did your original question use a class method? In your case it would be <code>-e TestClass.new.test_verify_one</code>. Doesn&#39;t matter if you use a class or instance method here"}, {"owner": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "edited": false, "score": 0, "creation_date": 1460562883, "post_id": 36603367, "comment_id": 60804311, "body": "I did @Anthony,  I tried with  <code>ruby -I . -r &quot;test_class&quot; -e &quot;TestClass.new.test_verify_one&quot; arg1 arg2</code>  and also with  <code>ruby -I . -r &quot;test_class&quot; -e &quot;TestClass.new(test_verify_one)&quot; arg1 arg2</code>  but I get:  <code>C:&#47;Ruby22-x64&#47;lib&#47;ruby&#47;gems&#47;2.2.0&#47;gems&#47;test-unit-3.0.8&#47;lib&#47;t&zwnj;&#8203;est&#47;unit&#47;testcase.rb&zwnj;&#8203;:400:in </code>initialize&#39;: wrong number of arguments (0 for 1) (ArgumentError)         from -e:1:in <code>new&#39;         from -e:1:in </code>&lt;main&gt;&#39;`"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "edited": false, "score": 0, "creation_date": 1460576861, "post_id": 36603367, "comment_id": 60813144, "body": "Your <code>test_class</code> filename may be colliding with one of the core classes of ruby. Try rename both your file and class to something else."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 3, "last_activity_date": 1460562096, "creation_date": 1460562096, "answer_id": 36603367, "question_id": 36603017, "link": "https://stackoverflow.com/questions/36603017/execute-ruby-method-from-command-line/36603367#36603367", "title": "Execute ruby method from command-line", "body": "<p>Within the same folder as <code>test_class.rb</code>, run the <code>ruby</code> command with the following command syntax:</p>\n\n<pre><code>ruby -I . -r \"test_class\" -e \"TestClass.test_verify_one\" arg1 arg2\n</code></pre>\n\n<p>Breaking this command down we get:</p>\n\n<p><code>-I .</code>  Include current directory in $LOAD_PATH so we can use <code>require</code></p>\n\n<p><code>-r</code> Require a file named <code>test_class</code> within the $LOAD_PATH. This is possible because we included the current directory in our load path above (.rb extension is optional here).</p>\n\n<p><code>-e</code> Same as you've provided, evaluates the following code.</p>\n\n<p>Now, if we call <code>ARGV</code> within that method we should get <code>arg1</code> and <code>arg2</code> on separate lines:</p>\n\n<pre><code>#...\ndef self.test_verify_one\n  puts ARGV\nend\n#...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2180, "user_id": 5202687, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh5.googleusercontent.com/-c4Jsqv7BnwQ/AAAAAAAAAAI/AAAAAAAACk8/ZP5eNp86l8o/photo.jpg?sz=128", "display_name": "Peter David Carter", "link": "https://stackoverflow.com/users/5202687/peter-david-carter"}, "is_accepted": false, "score": 0, "last_activity_date": 1460564329, "last_edit_date": 1460564329, "creation_date": 1460563206, "answer_id": 36603789, "question_id": 36603017, "link": "https://stackoverflow.com/questions/36603017/execute-ruby-method-from-command-line/36603789#36603789", "title": "Execute ruby method from command-line", "body": "<p>If you want your first method to take the variables you're passing to it you need to define your first method to take two variables, like so:</p>\n\n<pre><code>class TestClass\n\n    def test_verify_one (var1, var2)\n             # DO SOME\n       end\n\n       def test_verify_two\n             # DO SOME\n       end\n\nend\n</code></pre>\n\n<p>You will then need to put a condition into your second which causes it to only execute under the conditions you want it to... or just comment it out if you don't need it at the moment. So, for example, if you only wanted test 2 to fire when variables were not passed in, your code would look something like this:</p>\n\n<pre><code>class TestClass\n\n    def test_verify_one (var1, var2)\n        # DO SOME\n    end\n\n    def test_verify_two (var1, var2)\n        if (var1 and var2) defined? nil\n        # DO SOME\n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 4685976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6372b069293d949c770fc4b7c730291?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Castelli", "link": "https://stackoverflow.com/users/4685976/juan-castelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2678, "favorite_count": 0, "accepted_answer_id": 36603367, "answer_count": 2, "score": 0, "last_activity_date": 1460567167, "creation_date": 1460561143, "last_edit_date": 1460567167, "question_id": 36603017, "link": "https://stackoverflow.com/questions/36603017/execute-ruby-method-from-command-line", "title": "Execute ruby method from command-line", "body": "<p>I have the following class in Ruby in the file <em>test_class.rb</em>:</p>\n\n<pre><code>class TestClass\n\n   def test_verify_one\n         # DO SOME\n   end\n\n   def test_verify_two\n         # DO SOME\n   end\n\nend\n</code></pre>\n\n<p>To execute this class I send two parameters to the terminal, ENVIRONMENT and LANGUAGE.</p>\n\n<p>So... to call from terminal I use:</p>\n\n<pre><code>ruby test_class.rb ENVIRONMENT LANGUAGE\n</code></pre>\n\n<p>This executes both methods.</p>\n\n<p>I want to execute only one. </p>\n\n<p>I tried the following:</p>\n\n<pre><code>ruby -r \"test_class.rb\" -e \"TestClass.test_verify_one\" ENVIRONMENT LANGUAGE\n</code></pre>\n\n<p>but it is not working.</p>\n\n<p>Can you help me?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "will-paginate", "filterrific"], "comments": [{"owner": {"reputation": 4877, "user_id": 4843137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mUJRC.png?s=128&g=1", "display_name": "William Hampshire", "link": "https://stackoverflow.com/users/4843137/william-hampshire"}, "edited": false, "score": 0, "creation_date": 1551461874, "post_id": 36603013, "comment_id": 96662213, "body": "Is there a solution to this with using Turbolinks 5?"}], "answers": [{"comments": [{"owner": {"reputation": 4877, "user_id": 4843137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mUJRC.png?s=128&g=1", "display_name": "William Hampshire", "link": "https://stackoverflow.com/users/4843137/william-hampshire"}, "edited": false, "score": 0, "creation_date": 1551461828, "post_id": 36609195, "comment_id": 96662191, "body": "That didn&#39;t work. Maybe because I&#39;m using turbolinks 5+? Any other solution?"}], "tags": [], "owner": {"reputation": 328, "user_id": 4222664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cYprB.jpg?s=128&g=1", "display_name": "vlasiak", "link": "https://stackoverflow.com/users/4222664/vlasiak"}, "is_accepted": false, "score": 3, "last_activity_date": 1460580124, "creation_date": 1460580124, "answer_id": 36609195, "question_id": 36603013, "link": "https://stackoverflow.com/questions/36603013/javascript-is-not-working-when-i-use-filterrific-and-will-paginate-in-ruby-on-ra/36609195#36609195", "title": "javascript is not working when i use filterrific and will_paginate in ruby on rails", "body": "<p>The reason could be in the <code>turbolinks</code>. Try to add this to your <code>Gemfile</code>:</p>\n\n<pre><code>gem 'jquery-turbolinks'\n</code></pre>\n\n<p>Then run <code>bundle install</code> and add it to your <code>application.js</code> in this order:</p>\n\n<pre><code>//= require jquery\n//= require jquery.turbolinks\n//= require jquery_ujs\n//\n// ... your other scripts here ...\n//\n//= require turbolinks\n</code></pre>\n\n<p>Restart your server and try again. Hope this will help you.</p>\n"}], "owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1460580124, "creation_date": 1460561137, "question_id": 36603013, "link": "https://stackoverflow.com/questions/36603013/javascript-is-not-working-when-i-use-filterrific-and-will-paginate-in-ruby-on-ra", "title": "javascript is not working when i use filterrific and will_paginate in ruby on rails", "body": "<p>i'm using ruby on rails 4.2.5 and filterrific and will_paginate 3.0.6 gems. But when i select any checkbox my javascript is broken and not work.</p>\n\n<p>its my js file</p>\n\n<pre><code>$('.spin span:last-child').click(function(){\n    inputValue = parseInt($(this).parent().find($('.custom-input')).val());\n    inputValue += 1\n    $(this).parent().find($('.custom-input')).val(inputValue);\n    unitPrice = parseFloat($(this).closest('.product').find('.unit-price span').text().substring(3));\n    subTotal = parseFloat(inputValue * unitPrice).toFixed(2);\n    $(this).closest('.product').find('.total-price span').text(subTotal);\n</code></pre>\n\n<p>});</p>\n\n<p>its my index.html.haml sort my products</p>\n\n<pre><code>.flex-container.products.wrapper.no-flex\n .flex-container.relative\n  = form_for_filterrific @filterrific do |f|\n  .flex-item.sort-items&lt;\n    Sort for\n    .select-style\n      = f.select(:sorted_by, @filterrific.select_options[:sorted_by], id: 'sort-select', include_blank: 'Seleccionar')\n  .filter-items.panel.panel-body\n    %h3.no-margin Mostrar por\n    %h4&lt;\n      Type\n      %i.fa.fa-chevron-down&gt;\n      %i.fa.fa-chevron-up\n    %ul\n      - @filterrific.select_options[:with_brand].each do |brand|\n        %li\n          = f.check_box :with_brand, { multiple: true, id: \"filterrific_#{brand.name}\", class: 'custom-checkbox' }, brand.id\n          = f.label brand.name, class: 'custom-label'\n    %h4&lt;\n      Category\n      %i.fa.fa-chevron-down&gt;\n      %i.fa.fa-chevron-up\n</code></pre>\n\n<p>my products_controller.rb</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\ndef index\n@filterrific = initialize_filterrific(\n  DistributorProduct,\n  params[:filterrific],\n  select_options: {\n    sorted_by: DistributorProduct.options_for_sorted_by,\n    with_brand: Brand.select(:id, :name),\n    with_category: Category.select(:id, :name),\n    with_distributor: Distributor.select(:id, :name),\n    with_presentation: Presentation.select(:id, :name)\n  },\n  persistence_id: false\n) || return\n@distributor_products = @filterrific.find.page(params[:page]).search_query(params[:category], params[:search]).includes(:product)\n@order_item = current_order.order_items.new\n@brands = Brand.all\n@categories = Category.all\n@distributors = Distributor.all\n@presentations = Presentation.all\nend\nend\n</code></pre>\n\n<p>and my distributor_product.rb model</p>\n\n<pre><code>class DistributorProduct &lt; ActiveRecord::Base\nfilterrific(available_filters: [\n            :sorted_by,\n            :search_query,\n            :with_brand,\n            :with_category,\n            :with_distributor,\n            :with_presentation])\n\n  self.per_page = 9\n\nbelongs_to :distributor\nbelongs_to :product\nhas_many :sub_order_items\nhas_many :order_items\n\nscope :search_query, lambda { |field, query|\n return nil if query.blank?\n query = \"%#{query.downcase}%\"\n k, value = field.split('-')\n key = k == 'sc' ? 'sub_categories' : 'categories'\n joins(product: { categories: :sub_categories }).where(key =&gt; { id:  value.to_s }).where('LOWER(products.name) LIKE ?', query).distinct\n }\n\nscope :sorted_by, lambda { |sort_option|\ndirection = (sort_option =~ /desc$/) ? 'desc' : 'asc'\ncase sort_option.to_s\nwhen /^created_at_/\n  order(\"distributor_products.created_at #{direction}\")\nwhen /^name_/\n  order(\"distributor_products.name #{direction}\")\nwhen /^unit_price_/\n  order(\"distributor_products.unit_price #{direction}\")\nelse\n  raise(ArgumentError, \"Invalid sort option: #{sort_option.inspect}\")\nend\n}\n\nscope :with_brand, lambda { |brand_id|\nreturn nil if brand_id.uniq == ['0']\njoins(:product).where(products: { brand_id: brand_id })\n}\n\nscope :with_category, lambda { |category_id|\n return nil if category_id.uniq == ['0']\n joins(product: :categories).where(categories: { id: category_id })\n}\n\nscope :with_distributor, lambda { |distributor_id|\nreturn nil if distributor_id.uniq == ['0']\nwhere(distributor_id: distributor_id)\n}\n\n scope :with_presentation, lambda { |presentation_id|\n  return nil if presentation_id.uniq == ['0']\n  joins(:product).where(products: { presentation_id: presentation_id  })\n}\n\ndef self.options_for_sorted_by\n [\n   ['Nombre (a-z)', 'name_asc'],\n   ['Nombre (z-a)', 'name_desc'],\n   ['Precio (menor a mayor)', 'unit_price_asc'],\n   ['Precio (mayor a menor)', 'unit_price_desc']\n  ]\nend\n\ndef image_url\n  \"https://s3-sa-east-1.amazonaws.com/riqraops/catalogo/#{image}.png\"\nend\nend\n</code></pre>\n\n<p>So , i have no idea why my js is not working when i have a checkbox selected , i need to reload the page for that :/ , thx for the responses. </p>\n"}, {"tags": ["ruby", "class", "constructor", "module", "adapter"], "comments": [{"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1460705682, "post_id": 36602960, "comment_id": 60876051, "body": "Everything is possible.  But in doing so, you will have created code that is more than a little surprising, because canonically you call <code>new</code> only on a class.  If you care about the readability of your code, you might want to rethink."}], "answers": [{"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1460562592, "creation_date": 1460562592, "answer_id": 36603558, "question_id": 36602960, "link": "https://stackoverflow.com/questions/36602960/how-can-i-invoke-new-on-a-ruby-module-to-instantiate-one-of-its-classes/36603558#36603558", "title": "How can I invoke #new on a Ruby module to instantiate one of its classes?", "body": "<h2>Modules Don't Have a Constructor Method</h2>\n\n<p>You can't do what you want natively, because one of the differences between Ruby classes and modules is that modules can't be instantiated. If you try, an exception is raised. Consider:</p>\n\n<pre><code>module A; end\nA.new\n</code></pre>\n\n<p>This will correctly raise <code>NoMethodError</code>:</p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `new' for A:Module</p>\n</blockquote>\n\n<h2>Create a Factory Method on the Class</h2>\n\n<p>You can hack around this by defining <code>A::new</code> as a class method, like so:</p>\n\n<pre><code>module A\n  # Factory to instantiate and return B or C.\n  def self.new klass\n    const_get(klass).new\n  end\n\n  class B; end\n  class C; end\nend\n\nb = A.new :B\nc = A.new 'C'\n\nA.class\n#=&gt; Module\n\n[b.class, c.class]\n#=&gt; [A::B, A::C]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1460563016, "creation_date": 1460563016, "answer_id": 36603714, "question_id": 36602960, "link": "https://stackoverflow.com/questions/36602960/how-can-i-invoke-new-on-a-ruby-module-to-instantiate-one-of-its-classes/36603714#36603714", "title": "How can I invoke #new on a Ruby module to instantiate one of its classes?", "body": "<pre><code>def A.adapter= klass; @klass = klass end\ndef A.new *args; const_get(@klass.upcase).new(*args) end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1460563094, "creation_date": 1460563094, "answer_id": 36603755, "question_id": 36602960, "link": "https://stackoverflow.com/questions/36602960/how-can-i-invoke-new-on-a-ruby-module-to-instantiate-one-of-its-classes/36603755#36603755", "title": "How can I invoke #new on a Ruby module to instantiate one of its classes?", "body": "<pre><code>module A\n  def self.adapter= klass\n    @klass = klass.capitalize\n  end\n\n  def self.new x,y\n    const_get( @klass ).new x,y\n  end\n\n  class B\n    def initialize(c, d)\n      # do stuff\n    end\n  end\n\n\n  class E\n    def initialize(f, g)\n      # do more stuff\n    end\n  end\nend\n\nA.adapter = :b\nputs A.new(:c, :d)\n=&gt; #&lt;A::B:0x007fd6320865f0&gt;\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 3809888, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/36f9e77a573e873058b98a3de6276a03?s=128&d=identicon&r=PG&f=1", "display_name": "user3809888", "link": "https://stackoverflow.com/users/3809888/user3809888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1460563094, "creation_date": 1460560984, "last_edit_date": 1460562873, "question_id": 36602960, "link": "https://stackoverflow.com/questions/36602960/how-can-i-invoke-new-on-a-ruby-module-to-instantiate-one-of-its-classes", "title": "How can I invoke #new on a Ruby module to instantiate one of its classes?", "body": "<p>I have the following code:</p>\n\n<pre><code>module A\n\n  class B\n    def initialize(c, d)\n      # do stuff\n    end\n  end\n\n\n  class E\n    def initialize(f, g)\n      # do more stuff\n    end\n  end\n\nend\n</code></pre>\n\n<p>In other to create an instance of either <code>B</code> or <code>E</code>, I have to do <code>A::B.new(c, d)</code> or <code>A::E.new(f, g)</code>.  What I'd like to do is set an adapter for the module and then call <code>new</code> directly on the module, i.e.,</p>\n\n<pre><code>A.adapter= :b\nA.new(c, d) # creates an instance of B\nA.adapter= :e\nA.new(f, g) # creates an instance of E\n</code></pre>\n\n<p>How can I do this? Do I have to define class getter/setter methods?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "rest-client"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 2, "last_activity_date": 1576769382, "last_edit_date": 1576769382, "creation_date": 1460581886, "answer_id": 36609638, "question_id": 36602588, "link": "https://stackoverflow.com/questions/36602588/curl-request-in-ruby-restclient/36609638#36609638", "title": "curl request in ruby RestClient", "body": "<p>You can utilize the Restclient::Request.execute. 400 errors typically indicate that the request was not understood by the recipeint. This could be caused by the headers or malformed data. You may need to add the accept header. Try the example below</p>\n\n<pre><code>require 'rest_client'\n\nRestClient::Request.execute(\n    method:   :post,\n    user:     'api_user@example.com',\n    password: 'pass123',\n    url:      \"https://example/users.json\",\n    headers:   {content_type: :json, accept: :json},\n    payload:  { 'user' =&gt; { 'name' =&gt; 'John Doe', 'email' =&gt; 'john.doe@example.com'} }.to_json,\n)\n</code></pre>\n\n<p>You can find a detailed list of options <a href=\"https://github.com/rest-client/rest-client/blob/master/lib/restclient/request.rb\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 8555, "user_id": 1402846, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/z5AzI.png?s=128&g=1", "display_name": "Pang", "link": "https://stackoverflow.com/users/1402846/pang"}, "edited": false, "score": 0, "creation_date": 1499216930, "post_id": 44897716, "comment_id": 76807637, "body": "Um... is this Ruby?"}, {"owner": {"reputation": 183, "user_id": 2336503, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b974b876c59a258bb78699b8cbeee1aa?s=128&d=identicon&r=PG", "display_name": "Hamdan", "link": "https://stackoverflow.com/users/2336503/hamdan"}, "edited": false, "score": 0, "creation_date": 1506558450, "post_id": 44897716, "comment_id": 79873558, "body": "why? why did you do this?"}], "tags": [], "owner": {"reputation": 17, "user_id": 7352971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hn9pfxZtn2Q/AAAAAAAAAAI/AAAAAAAAAA0/xD5ivT7TdW0/photo.jpg?sz=128", "display_name": "Rathod Rajesh", "link": "https://stackoverflow.com/users/7352971/rathod-rajesh"}, "is_accepted": false, "score": -4, "last_activity_date": 1499166846, "last_edit_date": 1499166846, "creation_date": 1499146700, "answer_id": 44897716, "question_id": 36602588, "link": "https://stackoverflow.com/questions/36602588/curl-request-in-ruby-restclient/44897716#44897716", "title": "curl request in ruby RestClient", "body": "<pre><code>$url=\"https://my.fastbill.com/api/1.0/api.php\";\n$curl = curl_init(); \ncurl_setopt($curl,CURLOPT_URL, $url);\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n$result = curl_exec($curl);\ncurl_close($curl);\nprint_r(json_decode($result)); \n</code></pre>\n"}], "owner": {"reputation": 2052, "user_id": 2052543, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7f5705f62134d8892f04256b9ff9cb59?s=128&d=identicon&r=PG&f=1", "display_name": "DonMB", "link": "https://stackoverflow.com/users/2052543/donmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2434, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1576769382, "creation_date": 1460560108, "last_edit_date": 1460560421, "question_id": 36602588, "link": "https://stackoverflow.com/questions/36602588/curl-request-in-ruby-restclient", "title": "curl request in ruby RestClient", "body": "<p>The fastbill API states in its docu to make this curl request in order to receive information:</p>\n\n<pre><code>curl -v -X POST \\ \n\u2013u {E-Mail-Adresse}:{API-Key} \\ \n-H 'Content-Type: application/xml' \\ \n-d '{xml body}' \\ \nhttps://my.fastbill.com/api/1.0/api.php\n</code></pre>\n\n<p>Using <code>RestClient</code>I tried to translate this into a ruby like request:</p>\n\n<p>How I read this:\n- make a post request to <a href=\"https://my.fastbill.com/api/1.0/api.php\" rel=\"nofollow\">https://my.fastbill.com/api/1.0/api.php</a> using basic authentification and stating the content type in the header, correct?</p>\n\n<p>Now this would be a resource based request in <code>RestClient</code> like this:</p>\n\n<p>First I authenticate:</p>\n\n<pre><code>resource = RestClient::Resource.new( 'https://my.fastbill.com/api/1.0/api.php', 'my@email.de', 'API-KEY-XXXXX' )\n</code></pre>\n\n<p>which works and authorises me.\nthen putting my request in:</p>\n\n<pre><code>xml = '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;FBAPI&gt;&lt;SERVICE&gt;customer.get&lt;/SERVICE&gt;&lt;FILTER/&gt;&lt;/FBAPI&gt;'\n\nresource.post xml, content_type: 'application/xml'\n</code></pre>\n\n<p>It always returns 400 and I don't know what else to do here.</p>\n\n<p>Also how would json work here?</p>\n\n<pre><code>resource.post param1: 'value', content_type: 'json'\n</code></pre>\n\n<p>would be obvious.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encoding", "paperclip"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460559363, "post_id": 36602174, "comment_id": 60801454, "body": "That depends third party API is expecting your files. See the docs for the API. <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1460559666, "post_id": 36602174, "comment_id": 60801754, "body": "Launch Wireshark. Compare the POST request from Postman with the POST request from Net::HTTP.  <a href=\"http://stackoverflow.com/a/30827339/5006469\">This answer</a> may help you."}, {"owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460561533, "post_id": 36602174, "comment_id": 60803292, "body": "@Uzbekjon My question is, how does Postman encode this? This is a rinky dink API whose creator doesn&#39;t know the answer to the question. But it works with Postman, hence my question."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460566452, "post_id": 36602174, "comment_id": 60806713, "body": "Which postman gem are you referring to? I&#39;ve just looked through the this <a href=\"https://github.com/moomerman/postman\" rel=\"nofollow noreferrer\">postman&#39;s code</a> and even though the readme says it does webhook calls, it is not."}, {"owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460574798, "post_id": 36602174, "comment_id": 60811877, "body": "@Uzbekjon I&#39;m actually talking about the Postman application, not a ruby gem. It lets you construct requests easily. Thanks for looking into it."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460605021, "post_id": 36602174, "comment_id": 60823540, "body": "This one: <a href=\"https://www.getpostman.com\" rel=\"nofollow noreferrer\">getpostman.com</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "edited": false, "score": 0, "creation_date": 1460631768, "post_id": 36613539, "comment_id": 60838032, "body": "Here is a more elaborate solution:  <a href=\"https://coderwall.com/p/c-mu-a/http-posts-in-ruby\" rel=\"nofollow noreferrer\">coderwall.com/p/c-mu-a/http-posts-in-ruby</a>"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 2, "last_activity_date": 1553649104, "last_edit_date": 1553649104, "creation_date": 1460605731, "answer_id": 36613539, "question_id": 36602174, "link": "https://stackoverflow.com/questions/36602174/how-to-send-png-image-using-nethttp/36613539#36613539", "title": "How to send PNG image using Net::HTTP", "body": "<p>The <a href=\"https://www.getpostman.com/docs/requests\" rel=\"nofollow noreferrer\">Postman docs say</a> it is using standard form post. A <a href=\"http://www.rubyinside.com/nethttp-cheat-sheet-2940.html\" rel=\"nofollow noreferrer\">quick search</a> resulted in this code:</p>\n\n<pre><code>require \"net/http\"\nrequire \"uri\"\n\n# Token used to terminate the file in the post body. Make sure it is not\n# present in the file you're uploading.\n# You might want to use `SecureRandom` class to generate this random strings\nBOUNDARY = \"AaB03x\"\n\nuri = URI.parse(\"http://something.com/uploads\")\nfile = \"/path/to/your/testfile.txt\"\n\npost_body = []\npost_body &lt;&lt; \"--#{BOUNDARY}\\r\\n\"\npost_body &lt;&lt; \"Content-Disposition: form-data; name='datafile'; filename='#{File.basename(file)}'\\r\\n\"\npost_body &lt;&lt; \"Content-Type: text/plain\\r\\n\"\npost_body &lt;&lt; \"\\r\\n\"\npost_body &lt;&lt; File.read(file)\npost_body &lt;&lt; \"\\r\\n--#{BOUNDARY}--\\r\\n\"\n\nhttp = Net::HTTP.new(uri.host, uri.port)\nrequest = Net::HTTP::Post.new(uri.request_uri)\nrequest.body = post_body.join\nrequest[\"Content-Type\"] = \"multipart/form-data, boundary=#{BOUNDARY}\"\n\nhttp.request(request)\n</code></pre>\n"}], "owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 2, "accepted_answer_id": 36613539, "answer_count": 1, "score": 1, "last_activity_date": 1553649104, "creation_date": 1460559170, "question_id": 36602174, "link": "https://stackoverflow.com/questions/36602174/how-to-send-png-image-using-nethttp", "title": "How to send PNG image using Net::HTTP", "body": "<p>I'm trying to send a Paperclip-uploaded image to an API.</p>\n\n<p>How do I encode it?</p>\n\n<p>Right now I'm using <code>attachment.queued_for_write[:original].read</code> to get the actual file contents of that PNG, and trying to send that in the body of my request. But the server isn't having it.</p>\n\n<p>When I post the request via Postman, it works fine. How does Postman encode this? Unfortunately, trying to generate the Ruby code from Postman doesn't work, it just shows the file as <code>[Object object]</code> in the body of the request.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460558809, "post_id": 36601955, "comment_id": 60800932, "body": "Do you have <code>oauth_token</code> in <code>users</code> table?"}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460558839, "post_id": 36601955, "comment_id": 60800964, "body": "@Pavan hello there, yes i have. i will put a sample user for reference."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460559119, "post_id": 36601955, "comment_id": 60801241, "body": "What does <code>p &quot;this is the user #{user.inspect}&quot;</code> returns?"}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460559144, "post_id": 36601955, "comment_id": 60801264, "body": "@Pavan refresh this page, i have added at the end what it returns."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460559324, "post_id": 36601955, "comment_id": 60801424, "body": "Well. It seems everything is ok. Just be sure, try restarting the server once."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460559804, "post_id": 36601955, "comment_id": 60801879, "body": "@Pavan seems i found the answer,posted it below, thanks for helping out!"}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460559956, "post_id": 36602460, "comment_id": 60802013, "body": "@Pavan indeed but you can really miss those ;o"}], "tags": [], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "is_accepted": false, "score": 1, "last_activity_date": 1460559783, "creation_date": 1460559783, "answer_id": 36602460, "question_id": 36601955, "link": "https://stackoverflow.com/questions/36601955/undefined-method-oauth-token-for-user/36602460#36602460", "title": "undefined method `oauth_token=&#39; for User", "body": "<p>The error happened because in this line</p>\n\n<p><code>user = User.where(\"firstname = ? AND surname = ?\",firstname, surname)</code></p>\n\n<p>i haven't returned an object but an active relation object.</p>\n\n<p>changing to this worked,</p>\n\n<p><code>user = User.where(\"firstname = ? AND surname = ?\",firstname, surname).first</code></p>\n\n<p>leaving it here for future reference</p>\n"}], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460559783, "creation_date": 1460558649, "last_edit_date": 1460558869, "question_id": 36601955, "link": "https://stackoverflow.com/questions/36601955/undefined-method-oauth-token-for-user", "title": "undefined method `oauth_token=&#39; for User", "body": "<p>Using Devise/omniauth</p>\n\n<p>Consider the following model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  has_many :usertracks, :dependent =&gt; :destroy\n    mount_uploader :image, ArtistPhotoUploader\n\n  TEMP_EMAIL_PREFIX = 'change@me'\n  TEMP_EMAIL_REGEX = /\\Achange@me/\n\n  # Include default devise modules. Others available are:\n  # :lockable, :timeoutable\n  devise :database_authenticatable, :registerable, :confirmable,\n    :recoverable, :rememberable, :trackable, :validatable, :omniauthable\n\n  validates_format_of :email, :without =&gt; TEMP_EMAIL_REGEX, on: :update\n\n  validates_presence_of   :image\n  validates_integrity_of  :image\n  validates_processing_of :image\n\n  def self.find_for_oauth(auth, signed_in_resource = nil)\n\n    # Get the identity and user if they exist\n    identity = Identity.find_for_oauth(auth)\n\n    user = signed_in_resource ? signed_in_resource : identity.user\n\n    # Create the user if needed\n    if user.nil?\n\n      email_is_verified = auth.info.email &amp;&amp; (auth.extra.raw_info.verified || auth.info.verified || auth.extra.raw_info.primary_email_confirmed)\n      email = auth.info.email if email_is_verified\n\n      firstname = auth.info.name.split(' ')[0].capitalize\n      surname = auth.info.name.split(' ')[1].capitalize\n\n      if email\n        user = User.where(\"email = ?\", email).first\n      else\n        user = User.where(\"firstname = ? AND surname = ?\",firstname, surname)\n      end\n\n      # Create the user if it's a new registration\n      if user.blank?\n\n        user = User.new(\n          firstname: firstname,\n          surname: surname,\n          #username: auth.info.nickname || auth.uid,\n          email: email ? email : \"#{TEMP_EMAIL_PREFIX}-#{auth.uid}-#{auth.provider}.com\",\n          password: Devise.friendly_token[0,20],\n          remote_image_url: auth.info.image.gsub('http://','https://')\n        )\n        user.oauth_token = auth.credentials.token\n        user.oauth_secret = auth.credentials.secret\n\n        user.skip_confirmation!\n        user.save!\n      else\n        # if user found, update credentials - token/secret to overwrite previous provider\n        p \"this is the user #{user.inspect}\"\n        user.oauth_token = auth.credentials.token\n        user.oauth_secret = auth.credentials.secret\n        user.update!\n      end\n    end\n\n    # Associate the identity with the user if needed\n    if identity.user != user\n      identity.user = user\n      identity.save!\n    end\n    user\n  end\n\n  def email_verified?\n    self.email &amp;&amp; self.email !~ TEMP_EMAIL_REGEX\n  end\n\nend\n</code></pre>\n\n<p>for some reason even though the user is found i get the error in the title</p>\n\n<p>here is the exact part of the problem</p>\n\n<pre><code>      # if user found, update credentials - token/secret to overwrite previous provider\n            p \"this is the user #{user.inspect}\"\n            user.oauth_token = auth.credentials.token\n            user.oauth_secret = auth.credentials.secret\n            user.update!\n</code></pre>\n\n<p>sample db entry, this is the user it prints in console just before the line with the error.</p>\n\n<pre><code>#&lt;User id: 16, email: \"change@me-16740355-soundcloud.com\", encrypted_password: \"$2a$10$OtCdj.7M2cWu8eOYXNc5QeWUZdrcESds\nYY47WRYBfZt...\", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, curre\nnt_sign_in_at: \"2016-04-13 14:34:56\", last_sign_in_at: \"2016-04-13 14:34:56\", current_sign_in_ip: \"127.0.0.1\", last_sign_i\nn_ip: \"127.0.0.1\", confirmation_token: nil, confirmed_at: \"2016-04-13 14:34:55\", confirmation_sent_at: nil, unconfirmed_em\nail: nil, created_at: \"2016-04-13 14:34:55\", updated_at: \"2016-04-13 14:34:56\", firstname: \"Petros\", surname: \"Kyriakou\",\nimage: \"avatars-000015072102-sqpyn9-large.jpg\", oauth_token: \"1-234832-16740355-50cdc35302cdd4\", oauth_secret: nil&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "rest-client", "net-http"], "answers": [{"comments": [{"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460559855, "post_id": 36602328, "comment_id": 60801936, "body": "Thanks for your help. However, I still don&#39;t get anything. I don&#39;t have any error, and nothing happens on facebook."}, {"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460560537, "post_id": 36602328, "comment_id": 60802476, "body": "Why did you remove the .to_json ?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460560777, "post_id": 36602328, "comment_id": 60802655, "body": "Form encoding should be handled <code>Net::HTTP</code> internally."}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460560814, "post_id": 36602328, "comment_id": 60802692, "body": "What response are you getting? Is the body of the respons blank? If so, what&#39;s the status code?"}, {"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460560899, "post_id": 36602328, "comment_id": 60802771, "body": "Well that&#39;s the problem, I&#39;m not getting any response. I try it from my console: curl -X POST <a href=\"http://localhost:3000/webhook\" rel=\"nofollow noreferrer\">localhost:3000/webhook</a>     and nothing happens"}, {"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460560936, "post_id": 36602328, "comment_id": 60802803, "body": "(this code is in my webhook_post action which is set to accept post requests in my routes)"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460561125, "post_id": 36602328, "comment_id": 60802961, "body": "Ok, I&#39;d run the above code independently to isolate the issue. What happens if you run the above code directly from the console?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1460561400, "post_id": 36602328, "comment_id": 60803171, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109066/discussion-between-anthony-e-and-graham-slick\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 6, "last_activity_date": 1555537779, "last_edit_date": 1555537779, "creation_date": 1460559501, "answer_id": 36602328, "question_id": 36601942, "link": "https://stackoverflow.com/questions/36601942/post-request-to-https-using-nethttp/36602328#36602328", "title": "POST request to HTTPS using Net::HTTP", "body": "<p>Your <code>request</code> hash is being replaced by your <code>request</code> object which you're assigning <code>Net::HTTP</code>. Also be sure to set request params in the body of your HTTP request:</p>\n\n<pre><code>require \"active_support/all\"\nrequire \"net/http\"\n\ntoken = \"my_token\"\nurl = \"https://graph.facebook.com/v2.6/me/messages?\"\nsender = 100688998246663\ntext = \"Hello\"\nrequest_params =  {\n  recipient: {id: sender},\n  message: {text: text},\n  access_token: token\n}\nrequest_header = { 'Content-Type': 'application/json' }\n\nuri = URI.parse(url)\n\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(uri.path, request_header)\nrequest.body = request_params.to_json\n\nhttp.request(request)\n\nresponse = http.request(request)\n</code></pre>\n\n<p>You may find the following reference helpful: <a href=\"http://www.rubyinside.com/nethttp-cheat-sheet-2940.html\" rel=\"nofollow noreferrer\">http://www.rubyinside.com/nethttp-cheat-sheet-2940.html</a></p>\n"}], "owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7275, "favorite_count": 1, "accepted_answer_id": 36602328, "answer_count": 1, "score": 5, "last_activity_date": 1555537779, "creation_date": 1460558623, "question_id": 36601942, "link": "https://stackoverflow.com/questions/36601942/post-request-to-https-using-nethttp", "title": "POST request to HTTPS using Net::HTTP", "body": "<p>This POST request using Ajax works perfectly:</p>\n\n<pre><code>var token = \"my_token\";\n\nfunction sendTextMessage(sender, text) {\n  $.post('https://graph.facebook.com/v2.6/me/messages?',\n    { recipient: {id: sender}, \n      message: {text:text},\n      access_token: token\n    },\n    function(returnedData){\n         console.log(returnedData);\n  });\n};\n\nsendTextMessage(\"100688998246663\", \"Hello\");\n</code></pre>\n\n<p>I need to have the same request but in Ruby. I tried with Net:HTTP, but it doesn't work and I don't get any error so I can't debug it:</p>\n\n<pre><code>    token = \"my_token\"\n    url = \"https://graph.facebook.com/v2.6/me/messages?\"\n    sender = 100688998246663\n    text = \"Hello\"\n    request =  {\n                 recipient: {id: sender},\n                 message: {text: text},\n                 access_token: token\n                }.to_json\n\n\n  uri = URI.parse(url)\n  http = Net::HTTP.new(uri.host, uri.port)\n  http.use_ssl = true\n  http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n  request = Net::HTTP::Post.new(uri.request_uri)\n\n  response = http.request(request)\n  response.body\n</code></pre>\n\n<p>How should I proceed to get the error or where did I go wrong ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "buildpack"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460558575, "post_id": 36601685, "comment_id": 60800728, "body": "Heroku has ruby and bundler preinstalled. When you push your repo to heroku, it sees that you have &quot;Gemfile&quot; and runs <code>bundle install</code> automatically. What happens when you push your repo to heroku? Can you add the output here as well?"}, {"owner": {"reputation": 41, "user_id": 6193215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efbee871c8272d4535aefcf41a06a3df?s=128&d=identicon&r=PG&f=1", "display_name": "haseeb ahmad", "link": "https://stackoverflow.com/users/6193215/haseeb-ahmad"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460559048, "post_id": 36601685, "comment_id": 60801170, "body": "I add nodejs buildlpack"}, {"owner": {"reputation": 41, "user_id": 6193215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efbee871c8272d4535aefcf41a06a3df?s=128&d=identicon&r=PG&f=1", "display_name": "haseeb ahmad", "link": "https://stackoverflow.com/users/6193215/haseeb-ahmad"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460559071, "post_id": 36601685, "comment_id": 60801191, "body": "When I run heroku run rake db:migrate alos getting same error"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460559176, "post_id": 36601685, "comment_id": 60801292, "body": "Are you building a Rails app or Node?"}], "answers": [{"tags": [], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "is_accepted": false, "score": 2, "last_activity_date": 1462269031, "creation_date": 1462269031, "answer_id": 37000909, "question_id": 36601685, "link": "https://stackoverflow.com/questions/36601685/cant-find-gem-bundler-0-gemgemnotfoundexception-on-heroku/37000909#37000909", "title": "can&#39;t find gem bundler (&gt;= 0) (Gem::GemNotFoundException) on heroku", "body": "<p>I had a similar experience recently</p>\n\n<blockquote>\n  <p>/usr/lib/ruby/1.9.1/rubygems.rb:308:in `bin_path': can't find gem\n  bundler (>= 0) (Gem::GemNotFoundException)</p>\n</blockquote>\n\n<p>But solved by using both <code>Node</code> and <code>Ruby</code> buildpacks.</p>\n\n<p>Check your current buildpacks</p>\n\n<pre><code>heroku buildpacks\n</code></pre>\n\n<p>Add <code>Ruby</code> buildpack after <code>Node</code></p>\n\n<pre><code>heroku buildpacks:add --index 2 https://github.com/heroku/heroku-buildpack-ruby\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6193215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efbee871c8272d4535aefcf41a06a3df?s=128&d=identicon&r=PG&f=1", "display_name": "haseeb ahmad", "link": "https://stackoverflow.com/users/6193215/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2769, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1462269031, "creation_date": 1460558046, "question_id": 36601685, "link": "https://stackoverflow.com/questions/36601685/cant-find-gem-bundler-0-gemgemnotfoundexception-on-heroku", "title": "can&#39;t find gem bundler (&gt;= 0) (Gem::GemNotFoundException) on heroku", "body": "<p>When I run heroku run bundle install it gives me an error</p>\n\n<pre><code>/usr/lib/ruby/1.9.1/rubygems.rb:308:in `bin_path': can't find gem bundler (&gt;= 0) (Gem::GemNotFoundException)\nfrom /app/bin/bundle:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>and when I am <code>heroku run rails console</code> it gives an error</p>\n\n<pre><code>/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler (LoadError)\nfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\nfrom /app/bin/spring:8:in `&lt;top (required)&gt;'\nfrom /app/bin/rails:3:in `load'\nfrom /app/bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>What I do?</p>\n\n<p>I addd nodejs buildpack in it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "youtube", "embed"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1460556701, "post_id": 36600988, "comment_id": 60799051, "body": "Your original helper is better; the problem is that <code>@page.video</code> is nil."}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1460556735, "post_id": 36600988, "comment_id": 60799082, "body": "check what <code>@page.video</code> is returning"}, {"owner": {"reputation": 103, "user_id": 4770217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe72b7f0f1e4f0eb617f1ab0f0cc15a?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Goel", "link": "https://stackoverflow.com/users/4770217/sahil-goel"}, "edited": false, "score": 0, "creation_date": 1460556940, "post_id": 36600988, "comment_id": 60799259, "body": "what is your <code>@page</code> exactly? and can you show where are you initialising it?"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 3787971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/21308605/picture?type=large", "display_name": "user3787971", "link": "https://stackoverflow.com/users/3787971/user3787971"}, "edited": false, "score": 0, "creation_date": 1460558266, "post_id": 36601612, "comment_id": 60800442, "body": "So you were right. First I had to set the embed link code to this &lt;%= embed(@page.video) unless @page.video == nil %&gt; . I had also forgotten to add video to strong params. Thanks for the help."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 427, "user_id": 3787971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/21308605/picture?type=large", "display_name": "user3787971", "link": "https://stackoverflow.com/users/3787971/user3787971"}, "edited": false, "score": 0, "creation_date": 1460558758, "post_id": 36601612, "comment_id": 60800886, "body": "Glad to help. You might want to select this answer, so that the question gets marked as closed."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 1, "last_activity_date": 1460557873, "creation_date": 1460557873, "answer_id": 36601612, "question_id": 36600988, "link": "https://stackoverflow.com/questions/36600988/undefined-method-last-for-nilnilclass-for-youtube-embed-in-rails/36601612#36601612", "title": "undefined method `last&#39; for nil:NilClass for youtube embed in rails", "body": "<p>You are accessing <code>@page</code> instance variable in your helper, but you are also sending it as an argument.</p>\n\n<pre><code>def embed(video)\n  youtube_id = video.try(:split, \"=\").last || 'blank'\n  content_tag(:iframe, nil, src: \"//www.youtube.com/embed/#{youtube_id}\")\nend\n\n&lt;div class=\"embed-container\"&gt;\n  &lt;%= embed(@page.video) %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Having said that, the problem is that your <code>@page.video</code> is returning <code>nil</code> instead of a video URL string I guess... Make sure <code>@page.video</code> returns something.</p>\n"}], "owner": {"reputation": 427, "user_id": 3787971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/21308605/picture?type=large", "display_name": "user3787971", "link": "https://stackoverflow.com/users/3787971/user3787971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 36601612, "answer_count": 1, "score": 0, "last_activity_date": 1460557873, "creation_date": 1460556523, "last_edit_date": 1495541761, "question_id": 36600988, "link": "https://stackoverflow.com/questions/36600988/undefined-method-last-for-nilnilclass-for-youtube-embed-in-rails", "title": "undefined method `last&#39; for nil:NilClass for youtube embed in rails", "body": "<p>I'm trying to embed a youtube video in my rails app and am following <a href=\"http://blog.41studio.com/embed-responsive-youtube-video-in-rails-4/\" rel=\"nofollow noreferrer\">this guide:</a></p>\n\n<p>I've written this helper:</p>\n\n<pre><code>  def embed(video)\n    youtube_id = @page.video.try(:split, \"=\").last || 'blank'\n    content_tag(:iframe, nil, src: \"//www.youtube.com/embed/#{youtube_id}\")\n  end\n</code></pre>\n\n<p>I'm getting this error: undefined method `last' for nil:NilClass</p>\n\n<p>Here's what I have in my view: pages/show.html.erb</p>\n\n<pre><code>    &lt;div class=\"embed-container\"&gt;\n      &lt;%= embed(@page.video) %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>The guide seems pretty straight forward so I'm not sure why my original version wasn't working. </p>\n\n<p>My original helper looked like this:</p>\n\n<pre><code>  def embed(video)\n    youtube_id = video.split(\"=\").last \n    content_tag(:iframe, nil, src: \"//www.youtube.com/embed/#{youtube_id}\")\n  end\n</code></pre>\n\n<p>but it was throwing another error: <strong>undefined method `split' for nil:NilClass</strong></p>\n\n<p>I <a href=\"https://stackoverflow.com/questions/16678473/how-to-fix-undefined-method-split-for-nilnilclass-error\">went here</a> and found what I thought might be a solution but it led to the new error above. I also tried adding @page.video.split instead of just video because it's the show view for a specific page but I'm not sure that make's a difference. </p>\n\n<p>Any suggestions for how I can get this to work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460556567, "post_id": 36600789, "comment_id": 60798946, "body": "Can you explain <code>fields_for</code> block is never evaluated?"}, {"owner": {"reputation": 3397, "user_id": 1255016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c20883abe67a3a886c4955a515273b53?s=128&d=identicon&r=PG", "display_name": "hfhc2", "link": "https://stackoverflow.com/users/1255016/hfhc2"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460556755, "post_id": 36600789, "comment_id": 60799101, "body": "Well, the checkbox is not rendered. If I add other plain tags they are not rendered either. If I reference non-existing labels no error is produced."}], "answers": [{"comments": [{"owner": {"reputation": 3397, "user_id": 1255016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c20883abe67a3a886c4955a515273b53?s=128&d=identicon&r=PG", "display_name": "hfhc2", "link": "https://stackoverflow.com/users/1255016/hfhc2"}, "edited": false, "score": 1, "creation_date": 1460556913, "post_id": 36600887, "comment_id": 60799238, "body": "Thx :) I appreciate the help very much."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 2, "last_activity_date": 1460557074, "last_edit_date": 1460557074, "creation_date": 1460556258, "answer_id": 36600887, "question_id": 36600789, "link": "https://stackoverflow.com/questions/36600789/nested-forms-in-rails-4-and-the-fields-for-method/36600887#36600887", "title": "Nested forms in rails 4 and the fields_for method", "body": "<p>You should <strong><em>uncomment</em></strong> <code>accepts_nested_attributes_for :requirement</code> in the <code>Event</code> model.</p>\n\n<p><strong><em>Update:</em></strong></p>\n\n<p>You should also include <code>=</code> in the <code>fields_for</code>.</p>\n\n<pre><code>&lt;%= f.fields_for :requirement, @event.requirement do |fields| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3397, "user_id": 1255016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c20883abe67a3a886c4955a515273b53?s=128&d=identicon&r=PG", "display_name": "hfhc2", "link": "https://stackoverflow.com/users/1255016/hfhc2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 36600887, "answer_count": 1, "score": 0, "last_activity_date": 1460557074, "creation_date": 1460556052, "question_id": 36600789, "link": "https://stackoverflow.com/questions/36600789/nested-forms-in-rails-4-and-the-fields-for-method", "title": "Nested forms in rails 4 and the fields_for method", "body": "<p>I am also having problems with nested forms and Rails 4 (this seems to be quite common unfortunately). I have events which have requirements, the models are:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  enum type: [:lecture, :exercise, :tutorial]\n\n  has_one :requirement, dependent: :destroy\n\n  #accepts_nested_attributes_for :requirement\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Requirement &lt; ActiveRecord::Base\n  belongs_to :event\nend\n</code></pre>\n\n<p>There is essentially a one-to-one correspondence between those two.\nNow I would like to create a new event together with the associated\nrequirement. I am using the following form:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;%= form_for(@event) do |f| %&gt;\n  &lt;% if @event.errors.any? %&gt;\n  &lt;div id=\"error_explanation\"&gt;\n    &lt;h2&gt;&lt;%= pluralize(@event.errors.count, \"error\") %&gt; prohibited this event from being saved:&lt;/h2&gt;\n\n    &lt;ul&gt;\n      &lt;% @event.errors.full_messages.each do |message| %&gt;\n      &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"container\"&gt;\n    &lt;%= f.select :type, Event.types.map { |key, value| [key.humanize, key] }%&gt;\n    &lt;%= f.text_field :number, placeholder: \"1298035\" %&gt;\n\n    &lt;% f.fields_for :requirement, @event.requirement do |fields| %&gt;\n      &lt;%= fields.check_box :beamer %&gt;&lt;br /&gt;\n    &lt;% end %&gt;\n\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>As you can see I would like to have a checkbox indicating whether a beamer is required. The problem is that the <code>fields_for</code> block is never evaluated. Similar to these posts:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18792071/rails-3-fields-for-showing-blank-filed-on-edit-view\">Rails 3: fields_for showing blank filed on Edit view</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6086120/helper-fields-for-not-working\">Helper &quot;fields_for&quot; not working</a></p>\n\n<p>As far as I can tell the objects are created properly:</p>\n\n<pre><code>  # GET /events/new\n    def new\n      @event = Event.new\n      @event.build_requirement\n    end\n</code></pre>\n\n<p>If I use <code>puts</code> I see that both objects are not nil and that the associations are correct.</p>\n\n<p>I am kind of new to rails and I must say that I'm stymied. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "saml"], "comments": [{"owner": {"reputation": 2464, "user_id": 1740662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b3f09ad8d3af9982f70d2d5ce338aa?s=128&d=identicon&r=PG", "display_name": "Bernhard Thalmayr", "link": "https://stackoverflow.com/users/1740662/bernhard-thalmayr"}, "edited": false, "score": 0, "creation_date": 1460663383, "post_id": 36600672, "comment_id": 60860561, "body": "The certificate need not be split in across multiple lines. Which error are you actually facing? Signature error?"}, {"owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "reply_to_user": {"reputation": 2464, "user_id": 1740662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b3f09ad8d3af9982f70d2d5ce338aa?s=128&d=identicon&r=PG", "display_name": "Bernhard Thalmayr", "link": "https://stackoverflow.com/users/1740662/bernhard-thalmayr"}, "edited": false, "score": 0, "creation_date": 1461157232, "post_id": 36600672, "comment_id": 61070311, "body": "Apparently it was fine all along, I guess I was just making work for myself... I was initially told there was an issue but after working with a different person they said it was fine"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3517291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb1396d2f3750c6f4b6c85ca9bc2508?s=128&d=identicon&r=PG&f=1", "display_name": "user3517291", "link": "https://stackoverflow.com/users/3517291/user3517291"}, "is_accepted": false, "score": 0, "last_activity_date": 1557260095, "creation_date": 1557260095, "answer_id": 56029878, "question_id": 36600672, "link": "https://stackoverflow.com/questions/36600672/ruby-saml-certificate-issue/56029878#56029878", "title": "Ruby-Saml Certificate issue", "body": "<p>looks like your X509 doesn't have any line breaks. That might be your problem.</p>\n"}], "owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557260095, "creation_date": 1460555789, "question_id": 36600672, "link": "https://stackoverflow.com/questions/36600672/ruby-saml-certificate-issue", "title": "Ruby-Saml Certificate issue", "body": "<p>I am not sure if I am doing something wrong here but I've been stuck on this issue for quite some time. I am using the Ruby-saml gem (<a href=\"https://github.com/onelogin/ruby-saml\" rel=\"nofollow\">https://github.com/onelogin/ruby-saml</a>) and I am not sure if my settings.certificate is valid. I used OpenSSL to generate the public/private key pair. Here is my public key:</p>\n\n<pre><code>$ cat cert.pem \n-----BEGIN CERTIFICATE-----\nMIIE3zCCA8egAwIBAgIJANtTrhsq7mkmMA0GCSqGSIb3DQEBBQUAMIGlMQswCQYD\nVQQGEwJVUzERMA8GA1UECBMITmV3IFlvcmsxDzANBgNVBAcTBkl0aGFjYTEbMBkG\nA1UEChMSQ29ybmVsbCBVbml2ZXJzaXR5MQ4wDAYDVQQLEwVEeXNvbjEjMCEGA1UE\nAxMaY3VtaW5vcnMuZHlzb24uY29ybmVsbC5lZHUxIDAeBgkqhkiG9w0BCQEWEW5t\nYzUyQGNvcm5lbGwuZWR1MB4XDTE2MDQxMjE4MTUzOVoXDTI2MDQxMDE4MTUzOVow\ngaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9yazEPMA0GA1UEBxMGSXRo\nYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkxDjAMBgNVBAsTBUR5c29u\nMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxsLmVkdTEgMB4GCSqGSIb3\nDQEJARYRbm1jNTJAY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw\nggEKAoIBAQCnVjE8GIJe19Ba+361+c7ATDhBrzpGQoe+IDrDWw8B68HayaAvC8Pq\nWdNQNQ3SfHOdb+Vv0eywxHG7wRVVrJ+f8fLqmHBHfthzRG1JnGhReUXb/+wfkUEw\nDFZPEnEcj6rBcSbX5nsLVvupMXw43XB7ev/NX1SLsRU4trS25YMOozxjL+SfcKsW\nIQPgqD3usIArwS6b3UQ+ftuVfmWqKEqoUq25tUXoAporFkJyVqXZqe4g/Q+WqbX4\ncD9e1u7q8OlbSeVXUyPwRsNXzn1n+8tUbCc2k8+glEW5UJk7DY0AP95ry0ZcpfLr\nkgaOTqvbkUWCaZH1FP04SYG5Csw/8IDtAgMBAAGjggEOMIIBCjAdBgNVHQ4EFgQU\nq3ybbMNZOEXWgJ7/K0mSMx3VeTMwgdoGA1UdIwSB0jCBz4AUq3ybbMNZOEXWgJ7/\nK0mSMx3VeTOhgaukgagwgaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9y\nazEPMA0GA1UEBxMGSXRoYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkx\nDjAMBgNVBAsTBUR5c29uMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxs\nLmVkdTEgMB4GCSqGSIb3DQEJARYRbm1jNTJAY29ybmVsbC5lZHWCCQDbU64bKu5p\nJjAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQBA8QEvcxLnjZURGb5/\na4JUVwU6noFdZpmI9FgBi7d3nKs+BNxL/1Het6Kk19T1kPlyDdG96asG6fbRH24G\ncJOoDvVpx6lxMu85gFpJVv/vtDmnlpiBoDH+v2I7O4ENhve76B7Z5XtT5FsjEdy4\nRAn1iczxq391vFNQJl0kCz2Khdv5CS3t6qNS42sPcRk9mjbnN0wz6jHxG5BfCVdk\ndXxoLuJVLzT7/sbBkT2SLkwQkPiYitb3LFoNFu+Sk8y+L4cVaeoA5XoEjmIbtkgD\noLCrILf6t18C/R2AD0/huq2pFtxd/rng/yGMniTBc6aGDsv06RXo/5r7DsO0feXV\ncRzc\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>In Rails I tried multiple different way to get this to work:</p>\n\n<pre><code>      settings.certificate = \"-----BEGIN CERTIFICATE-----\nMIIE3zCCA8egAwIBAgIJANtTrhsq7mkmMA0GCSqGSIb3DQEBBQUAMIGlMQswCQYD \nVQQGEwJVUzERMA8GA1UECBMITmV3IFlvcmsxDzANBgNVBAcTBkl0aGFjYTEbMBkG \nA1UEChMSQ29ybmVsbCBVbml2ZXJzaXR5MQ4wDAYDVQQLEwVEeXNvbjEjMCEGA1UE \nAxMaY3VtaW5vcnMuZHlzb24uY29ybmVsbC5lZHUxIDAeBgkqhkiG9w0BCQEWEW5t \nYzUyQGNvcm5lbGwuZWR1MB4XDTE2MDQxMjE4MTUzOVoXDTI2MDQxMDE4MTUzOVow \ngaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9yazEPMA0GA1UEBxMGSXRo \nYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkxDjAMBgNVBAsTBUR5c29u \nMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxsLmVkdTEgMB4GCSqGSIb3 \nDQEJARYRbm1jNTJAY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw \nggEKAoIBAQCnVjE8GIJe19Ba+361+c7ATDhBrzpGQoe+IDrDWw8B68HayaAvC8Pq \nWdNQNQ3SfHOdb+Vv0eywxHG7wRVVrJ+f8fLqmHBHfthzRG1JnGhReUXb/+wfkUEw \nDFZPEnEcj6rBcSbX5nsLVvupMXw43XB7ev/NX1SLsRU4trS25YMOozxjL+SfcKsW \nIQPgqD3usIArwS6b3UQ+ftuVfmWqKEqoUq25tUXoAporFkJyVqXZqe4g/Q+WqbX4 \ncD9e1u7q8OlbSeVXUyPwRsNXzn1n+8tUbCc2k8+glEW5UJk7DY0AP95ry0ZcpfLr \nkgaOTqvbkUWCaZH1FP04SYG5Csw/8IDtAgMBAAGjggEOMIIBCjAdBgNVHQ4EFgQU \nq3ybbMNZOEXWgJ7/K0mSMx3VeTMwgdoGA1UdIwSB0jCBz4AUq3ybbMNZOEXWgJ7/ \nK0mSMx3VeTOhgaukgagwgaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9y \nazEPMA0GA1UEBxMGSXRoYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkx \nDjAMBgNVBAsTBUR5c29uMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxs \nLmVkdTEgMB4GCSqGSIb3DQEJARYRbm1jNTJAY29ybmVsbC5lZHWCCQDbU64bKu5p \nJjAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQBA8QEvcxLnjZURGb5/ \na4JUVwU6noFdZpmI9FgBi7d3nKs+BNxL/1Het6Kk19T1kPlyDdG96asG6fbRH24G \ncJOoDvVpx6lxMu85gFpJVv/vtDmnlpiBoDH+v2I7O4ENhve76B7Z5XtT5FsjEdy4 \nRAn1iczxq391vFNQJl0kCz2Khdv5CS3t6qNS42sPcRk9mjbnN0wz6jHxG5BfCVdk \ndXxoLuJVLzT7/sbBkT2SLkwQkPiYitb3LFoNFu+Sk8y+L4cVaeoA5XoEjmIbtkgD \noLCrILf6t18C/R2AD0/huq2pFtxd/rng/yGMniTBc6aGDsv06RXo/5r7DsO0feXV \ncRzc\n-----END CERTIFICATE-----\"\n</code></pre>\n\n<p>I've also tried to just have Rails read the cert.pem file directly:</p>\n\n<pre><code>settings.certificate = OpenSSL::X509::Certificate.new(File.read(\"#{Rails.root}/cert.pem\")).to_s\n</code></pre>\n\n<p>The issue is (which I am not sure is an issue), my key is a long inline string in the XML file (metadata for the SP)</p>\n\n<pre><code>&lt;md:KeyDescriptor use=\"encryption\"&gt;\n&lt;ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;ds:X509Data&gt;\n&lt;ds:X509Certificate&gt;\nMIIE3zCCA8egAwIBAgIJANtTrhsq7mkmMA0GCSqGSIb3DQEBBQUAMIGlMQswCQYDVQQGEwJVUzERMA8GA1UECBMITmV3IFlvcmsxDzANBgNVBAcTBkl0aGFjYTEbMBkGA1UEChMSQ29ybmVsbCBVbml2ZXJzaXR5MQ4wDAYDVQQLEwVEeXNvbjEjMCEGA1UEAxMaY3VtaW5vcnMuZHlzb24uY29ybmVsbC5lZHUxIDAeBgkqhkiG9w0BCQEWEW5tYzUyQGNvcm5lbGwuZWR1MB4XDTE2MDQxMjE4MTUzOVoXDTI2MDQxMDE4MTUzOVowgaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9yazEPMA0GA1UEBxMGSXRoYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkxDjAMBgNVBAsTBUR5c29uMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxsLmVkdTEgMB4GCSqGSIb3DQEJARYRbm1jNTJAY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCnVjE8GIJe19Ba+361+c7ATDhBrzpGQoe+IDrDWw8B68HayaAvC8PqWdNQNQ3SfHOdb+Vv0eywxHG7wRVVrJ+f8fLqmHBHfthzRG1JnGhReUXb/+wfkUEwDFZPEnEcj6rBcSbX5nsLVvupMXw43XB7ev/NX1SLsRU4trS25YMOozxjL+SfcKsWIQPgqD3usIArwS6b3UQ+ftuVfmWqKEqoUq25tUXoAporFkJyVqXZqe4g/Q+WqbX4cD9e1u7q8OlbSeVXUyPwRsNXzn1n+8tUbCc2k8+glEW5UJk7DY0AP95ry0ZcpfLrkgaOTqvbkUWCaZH1FP04SYG5Csw/8IDtAgMBAAGjggEOMIIBCjAdBgNVHQ4EFgQUq3ybbMNZOEXWgJ7/K0mSMx3VeTMwgdoGA1UdIwSB0jCBz4AUq3ybbMNZOEXWgJ7/K0mSMx3VeTOhgaukgagwgaUxCzAJBgNVBAYTAlVTMREwDwYDVQQIEwhOZXcgWW9yazEPMA0GA1UEBxMGSXRoYWNhMRswGQYDVQQKExJDb3JuZWxsIFVuaXZlcnNpdHkxDjAMBgNVBAsTBUR5c29uMSMwIQYDVQQDExpjdW1pbm9ycy5keXNvbi5jb3JuZWxsLmVkdTEgMB4GCSqGSIb3DQEJARYRbm1jNTJAY29ybmVsbC5lZHWCCQDbU64bKu5pJjAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQBA8QEvcxLnjZURGb5/a4JUVwU6noFdZpmI9FgBi7d3nKs+BNxL/1Het6Kk19T1kPlyDdG96asG6fbRH24GcJOoDvVpx6lxMu85gFpJVv/vtDmnlpiBoDH+v2I7O4ENhve76B7Z5XtT5FsjEdy4RAn1iczxq391vFNQJl0kCz2Khdv5CS3t6qNS42sPcRk9mjbnN0wz6jHxG5BfCVdkdXxoLuJVLzT7/sbBkT2SLkwQkPiYitb3LFoNFu+Sk8y+L4cVaeoA5XoEjmIbtkgDoLCrILf6t18C/R2AD0/huq2pFtxd/rng/yGMniTBc6aGDsv06RXo/5r7DsO0feXVcRzc\n&lt;/ds:X509Certificate&gt;\n&lt;/ds:X509Data&gt;\n&lt;/ds:KeyInfo&gt;\n&lt;/md:KeyDescriptor&gt;\n</code></pre>\n\n<p>The IdP people said it was not valid when they tried to use it, he gave me an example of theirs and theirs was split across many lines unlike mine which is just a long string with no space:</p>\n\n<pre><code>https://shibidp.cit.cornell.edu/idp/shibboleth\n</code></pre>\n\n<p>Am I doing something wrong here? All I did was take the output from cat and pasted it to my SAML Settings.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 731, "user_id": 3108550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba80748bf0fac5bf5217f3d194464e47?s=128&d=identicon&r=PG&f=1", "display_name": "Oisin", "link": "https://stackoverflow.com/users/3108550/oisin"}, "edited": false, "score": 0, "creation_date": 1460555527, "post_id": 36600520, "comment_id": 60798039, "body": "What happened when you tried running that bit of code? My guess is that you will get a boolean."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 1, "creation_date": 1460555565, "post_id": 36600520, "comment_id": 60798077, "body": "yes, you should be able to do that!"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 2, "creation_date": 1460556389, "post_id": 36600520, "comment_id": 60798798, "body": "It is Ruby question rather the Rails"}, {"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1460705540, "post_id": 36600520, "comment_id": 60875964, "body": "Note: yes, works as is, but be very sure that bar is not holding a boolean value, or you might get results you were not expecting.  If in doubt use the safer but more ugly <code>foo = bar.nil? ? doe : bar</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460556065, "post_id": 36600591, "comment_id": 60798526, "body": "This is not right. <code>a = a || b</code> is not equal to <code>foo = bar || doe</code>, but it equals to <code>foo = foo || doe</code>."}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460556299, "post_id": 36600591, "comment_id": 60798713, "body": "Did you read the answer carefully? You might try again. I said that <code>a ||= b</code> is equivalent to <code>a = a || b</code>. And the QS already knows about <code>||=</code> so the equivalency should answer his question."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460556470, "post_id": 36600591, "comment_id": 60798869, "body": "Well I may be mistaken but how can you write <code>foo = bar || doe</code> like <code>a ||= b</code>?"}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460558247, "post_id": 36600591, "comment_id": 60800427, "body": "No, you can&#39;t, but the basic principle of the || operator remains the same be it in <code>a ||= b</code> or in <code>a = b || c </code>"}], "tags": [], "owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "is_accepted": false, "score": 4, "last_activity_date": 1460555596, "creation_date": 1460555596, "answer_id": 36600591, "question_id": 36600520, "link": "https://stackoverflow.com/questions/36600520/can-we-do-a-b-c-in-ruby/36600591#36600591", "title": "Can we do `a = b ||&#160;c` in Ruby?", "body": "<p>well, yea. <code>a ||= b</code> is the equivalent of <code>a = a || b</code> if the first element is <code>nil</code> or <code>false</code> then the result is the second element.</p>\n"}, {"comments": [{"owner": {"reputation": 1135, "user_id": 1713964, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99af0ee9894fc6f2aefc05b17d8379bc?s=128&d=identicon&r=PG", "display_name": "user1713964", "link": "https://stackoverflow.com/users/1713964/user1713964"}, "edited": false, "score": 0, "creation_date": 1460558133, "post_id": 36600741, "comment_id": 60800318, "body": "good to ear that ;) I couldn&#39;t test it in a real context, so I was in doubt with my syntax :) What kind of values makes ruby choose the second ? nil, false and &quot;null&quot; ?"}, {"owner": {"reputation": 7526, "user_id": 456715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457e7c46275bc261f2089b71fbb8e05?s=128&d=identicon&r=PG", "display_name": "Radek Paviensky", "link": "https://stackoverflow.com/users/456715/radek-paviensky"}, "reply_to_user": {"reputation": 1135, "user_id": 1713964, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99af0ee9894fc6f2aefc05b17d8379bc?s=128&d=identicon&r=PG", "display_name": "user1713964", "link": "https://stackoverflow.com/users/1713964/user1713964"}, "edited": false, "score": 1, "creation_date": 1460558601, "post_id": 36600741, "comment_id": 60800748, "body": "<code>false</code> or <code>nil</code>. Not <code>&quot;&quot;</code> or 0."}], "tags": [], "owner": {"reputation": 7526, "user_id": 456715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457e7c46275bc261f2089b71fbb8e05?s=128&d=identicon&r=PG", "display_name": "Radek Paviensky", "link": "https://stackoverflow.com/users/456715/radek-paviensky"}, "is_accepted": true, "score": 4, "last_activity_date": 1460555954, "creation_date": 1460555954, "answer_id": 36600741, "question_id": 36600520, "link": "https://stackoverflow.com/questions/36600520/can-we-do-a-b-c-in-ruby/36600741#36600741", "title": "Can we do `a = b ||&#160;c` in Ruby?", "body": "<p>Sure. It works as expected:</p>\n\n<pre><code>bar = nil\ndoe = \"Hello\"\nfoo = bar || doe\n# =&gt; \"Hello\"\n</code></pre>\n"}], "owner": {"reputation": 1135, "user_id": 1713964, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99af0ee9894fc6f2aefc05b17d8379bc?s=128&d=identicon&r=PG", "display_name": "user1713964", "link": "https://stackoverflow.com/users/1713964/user1713964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 36600741, "answer_count": 2, "score": 1, "last_activity_date": 1460559307, "creation_date": 1460555453, "last_edit_date": 1460559307, "question_id": 36600520, "link": "https://stackoverflow.com/questions/36600520/can-we-do-a-b-c-in-ruby", "title": "Can we do `a = b ||&#160;c` in Ruby?", "body": "<p>I would like to know if we can express \"if the first is null, then choose the second.\"</p>\n\n<pre><code>foo = bar || doe \n#if bar is nil, foo = doe\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "edited": false, "score": 0, "creation_date": 1460556475, "post_id": 36600694, "comment_id": 60798872, "body": "But I thought a better idea, which we don&#39;t must mixed two controllers to one ;)"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "edited": false, "score": 0, "creation_date": 1460557092, "post_id": 36600694, "comment_id": 60799384, "body": "Don&#39;t mix 2 logically different controllers, but if you have a shared functionality extract it and reuse it. Basically, SRP &amp; DRY principles."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 3, "last_activity_date": 1460555851, "creation_date": 1460555851, "answer_id": 36600694, "question_id": 36600485, "link": "https://stackoverflow.com/questions/36600485/render-template-in-other-view-with-another-controller/36600694#36600694", "title": "Render template in other view with another controller", "body": "<p>You can define all required instance variables that are used in the other controller's view and render it wherever you want with:</p>\n\n<pre><code>render \"other_controller/action\"\n</code></pre>\n\n<p>If you are sharing some element (like a modal box content), a better way would be to extract it into a shared partial (<code>shared/_your_partial.html.erb</code>) and include it in other views. That would be more modular way of doing it.</p>\n\n<p>Alternatively, you might want to use a jQuery to fill out the modal box content like so:</p>\n\n<pre><code>$('#some-button').click(function(event){\n  event.preventDefault();\n  $('#modal-box').load('controller2/index');\n});\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "accepted_answer_id": 36600694, "answer_count": 1, "score": 0, "last_activity_date": 1460556024, "creation_date": 1460555357, "last_edit_date": 1460556024, "question_id": 36600485, "link": "https://stackoverflow.com/questions/36600485/render-template-in-other-view-with-another-controller", "title": "Render template in other view with another controller", "body": "<p>How Can I render template with other controller to another view? I want generate 'index' template in modal, but this modal is generated in other view with other controller. So I must create objects in controller which must be setted for other 'index' action.\n<a href=\"https://i.stack.imgur.com/JLb8U.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JLb8U.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "omniauth"], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "edited": false, "score": 0, "creation_date": 1460556932, "post_id": 36600612, "comment_id": 60799253, "body": "hmm in my case i need them to sign in, and download the file after sharing it - depending on the auth provider they signed in. So merging accounts, is not really helping here but its a good overall addition. My bigger problem is i need to know with which provider they are signed in at the time so i can present them with a suitable share button (provider dependent) in order to download file."}, {"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "reply_to_user": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "edited": false, "score": 0, "creation_date": 1460562616, "post_id": 36600612, "comment_id": 60804104, "body": "aaah, tough break. .. I suppose you could save the provider name to a session variable during the sign in portion of the callback.      session[:pvd] = &quot;google&quot;, etc ?"}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "edited": false, "score": 0, "creation_date": 1460565548, "post_id": 36600612, "comment_id": 60806170, "body": "yeah i think i will do something along those lines thanks."}], "tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": true, "score": 1, "last_activity_date": 1460555642, "creation_date": 1460555642, "answer_id": 36600612, "question_id": 36600324, "link": "https://stackoverflow.com/questions/36600324/how-to-counter-multiple-accounts-from-same-user-because-of-auth-providers/36600612#36600612", "title": "How to counter multiple accounts from same user because of Auth Providers", "body": "<p>There really isn't a good way to keep someone from signing up again. You aren't a magician and can't predict how someone will sign up / sign in.  </p>\n\n<p>You are already doing the logical thing.</p>\n\n<p>The best way to move forward is to allow someone to merge 2 accounts, and then allow them to link multiple providers.  </p>\n\n<p>The adding multiple providers part is easy.  Just give a link inside a profile where they can click to authorize each available one. </p>\n\n<p>Merging accounts can be trickier. Every place where user_id is stored (including polymorphic associations) needs to be updated to reflect the user_id that is kept.  The other user should be deleted afterward.</p>\n"}], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 36600612, "answer_count": 1, "score": 0, "last_activity_date": 1460555642, "creation_date": 1460555012, "question_id": 36600324, "link": "https://stackoverflow.com/questions/36600324/how-to-counter-multiple-accounts-from-same-user-because-of-auth-providers", "title": "How to counter multiple accounts from same user because of Auth Providers", "body": "<p>I have implemented Auth providers (twitter, facebook, soundcloud) for an app(ruby on rails) but the constraint i have in place so that no new User accounts are created is based on email, but some providers do not provide email address.</p>\n\n<p>Whats a good counter measure to avoid creating multiple accounts for same user?</p>\n\n<p>user.model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  has_many :usertracks, :dependent =&gt; :destroy\n    mount_uploader :image, ArtistPhotoUploader\n\n  TEMP_EMAIL_PREFIX = 'change@me'\n  TEMP_EMAIL_REGEX = /\\Achange@me/\n\n  # Include default devise modules. Others available are:\n  # :lockable, :timeoutable\n  devise :database_authenticatable, :registerable, :confirmable,\n    :recoverable, :rememberable, :trackable, :validatable, :omniauthable\n\n  validates_format_of :email, :without =&gt; TEMP_EMAIL_REGEX, on: :update\n\n  validates_presence_of   :image\n  validates_integrity_of  :image\n  validates_processing_of :image\n\n  def self.find_for_oauth(auth, signed_in_resource = nil)\n\n    # Get the identity and user if they exist\n    identity = Identity.find_for_oauth(auth)\n\n    user = signed_in_resource ? signed_in_resource : identity.user\n\n    # Create the user if needed\n    if user.nil?\n\n     UsersController.finish_signup\n      email_is_verified = auth.info.email &amp;&amp; (auth.info.verified || auth.info.verified_email)\n      email = auth.info.email if email_is_verified\n      user = User.where(:email =&gt; email).first if email\n\n      # Create the user if it's a new registration\n      if user.nil?\n        firstname = auth.info.name.split(' ')[0]\n        surname = auth.info.name.split(' ')[1]\n        user = User.new(\n          firstname: firstname,\n          surname: surname,\n          #username: auth.info.nickname || auth.uid,\n          email: email ? email : \"#{TEMP_EMAIL_PREFIX}-#{auth.uid}-#{auth.provider}.com\",\n          password: Devise.friendly_token[0,20],\n          remote_image_url: auth.info.image.gsub('http://','https://')\n        )\n       user.oauth_token = auth.credentials.token\n       user.oauth_secret = auth.credentials.secret\n\n        user.skip_confirmation!\n        user.save!\n      end\n    end\n\n    # Associate the identity with the user if needed\n    if identity.user != user\n      identity.user = user\n      identity.save!\n    end\n    user\n  end\n\n  def email_verified?\n    self.email &amp;&amp; self.email !~ TEMP_EMAIL_REGEX\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan", "cancancan"], "comments": [{"owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1460555247, "post_id": 36600002, "comment_id": 60797787, "body": "Not really related to your question, but if this is a newer project you probably should be using the CanCanCan gem.  It is the maintained fork of the now defunct CanCan gem <a href=\"https://rubygems.org/gems/cancancan\" rel=\"nofollow noreferrer\">rubygems.org/gems/cancancan</a>"}, {"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "reply_to_user": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1460583083, "post_id": 36600002, "comment_id": 60816535, "body": "I agree, cancancan is happening."}], "answers": [{"tags": [], "owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "is_accepted": true, "score": 1, "last_activity_date": 1461589033, "creation_date": 1461589033, "answer_id": 36841284, "question_id": 36600002, "link": "https://stackoverflow.com/questions/36600002/cancancan-ability-viewing-in-the-ui/36841284#36841284", "title": "CanCanCan Ability Viewing in the UI", "body": "<p>I have decided to develop a gem to solve this answer, it's still very much in development, but soon fit for purpose. It's called CanCanCanSee.</p>\n\n<p><strong><a href=\"https://github.com/schwad/cancancansee\" rel=\"nofollow\">Check it out here</a></strong></p>\n\n<p>It brings you the method <code>CanCanCanSee.all_abilities</code> to render a hash of existing abilities and roles.</p>\n\n<p>Also if you want to run a pretty printed version of your abilities from the Terminal (think like you do with <code>rake routes</code>) you have <code>CanCanCanSee.pretty_print_abilities</code></p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 1, "accepted_answer_id": 36841284, "answer_count": 1, "score": 3, "last_activity_date": 1461589033, "creation_date": 1460554256, "last_edit_date": 1460643179, "question_id": 36600002, "link": "https://stackoverflow.com/questions/36600002/cancancan-ability-viewing-in-the-ui", "title": "CanCanCan Ability Viewing in the UI", "body": "<p>I'm working with a large list of abilities for users with different Role types on a rails application. This is with the CanCanCan gem.</p>\n\n<p>It has gotten quite large, and I have non-dev users who want to be able to see a run-down of abilities for different users. How can I represent the existing abilities on a user interface?</p>\n\n<p>i.e. </p>\n\n<pre><code>class MyUserAbilityController &lt; ActionController::Base\n\n  def show\n    @abilities = current_user.abilities\n  end\n\n  def index\n\n    @full_abilities = Hash.new\n\n    Role.all.each do |role|\n      @full_abilities[role.name] = role.abilities\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>And then pass it along to the view?</p>\n\n<p>Further, although not necessary, is there a way I can dynamically change or alter the CanCanCan abilities from an external source? </p>\n\n<p>I have been playing around with it in the Terminal for now, with an eventual goal to be able to have some basic rule-setting (not creation, but perhaps changing 'can's to 'cannot's) on an admin user interface with radio buttons. </p>\n\n<p>-Schwad</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460553922, "post_id": 36599794, "comment_id": 60796658, "body": "Are your <code>@user</code> and <code>@workspace</code> object persisted already? Please add your controller code here as well."}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460554117, "post_id": 36599794, "comment_id": 60796814, "body": "` def sign_up     respond_to do |format|       @user = User.new(user_params)       if @user.save         @workspace = Workspace.new(title: &quot;#{@user.name}&#39;s workspace&quot;)         @workspace.save         @user.workspaces.create(:workspace_id =&gt; @workspace.id, :role =&gt; 1)         @user.workspace = @workspace         @user.update_attributes(user_params)          flash.now[:success] = &#39;Welcome! Please check activation letter in your email box.&#39;         format.js { render &#39;signup_message&#39; }       else         format.js { render &#39;render_signup_errors&#39; }       end     end   end"}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460554142, "post_id": 36599794, "comment_id": 60796834, "body": "sorry for bad format"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460554209, "post_id": 36599794, "comment_id": 60796897, "body": "I think it&#39;s better if you add it into your question body."}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460554522, "post_id": 36599794, "comment_id": 60797192, "body": "done, I have added it"}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460555110, "post_id": 36599794, "comment_id": 60797653, "body": "sorry, user.workspaces &lt;&lt; workspace helped me. It seems when I tried it before, I did not save workspace"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 1, "last_activity_date": 1460555323, "creation_date": 1460555323, "answer_id": 36600467, "question_id": 36599794, "link": "https://stackoverflow.com/questions/36599794/add-a-record-in-many-to-many-relation-fails/36600467#36600467", "title": "Add a record in Many to many relation fails", "body": "<p>There are couple of problems with your code. For example, you are creating workspaces that are already created (<code>@user.workspaces.create</code>), or permitting a <code>:workspace_id</code> that is not used, etc.</p>\n\n<p>Pleas see code below:</p>\n\n<pre><code>def sign_up\n  respond_to do |format|\n    @user = User.new(user_params)\n    if @user.save\n\n      @workspace = Workspace.new(title: \"#{@user.name}'s workspace\")\n\n      if @workspace.save\n        # Like this\n        UserWorkspace.create(user: @user, workspace: @workspace, role: 1)\n\n        # Or, like this\n        @user.user_workspaces.create!(workspace_id: @workspace.id, role: 1)\n      end\n\n      flash.now[:success] = 'Welcome! Please check activation letter in your email box.'\n      format.js { render 'signup_message' }\n    else\n      format.js { render 'render_signup_errors' }\n    end\n  end\nend\n\nprivate\n\n# You don't need :workspace_id since you are not using it anywhere\ndef user_params\n  params.require(:user).permit(:email, :password, :password_confirmation, :name)\nend\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 36600467, "answer_count": 1, "score": 1, "last_activity_date": 1460555579, "creation_date": 1460553747, "last_edit_date": 1460555579, "question_id": 36599794, "link": "https://stackoverflow.com/questions/36599794/add-a-record-in-many-to-many-relation-fails", "title": "Add a record in Many to many relation fails", "body": "<p>I have a many to many connection in Rails applications, it looks like this:</p>\n\n<pre><code>class Workspace\n  has_and_belongs_to_many :users, dependent: :destroy\nend\n\nclass User\n  has_and_belongs_to_many :workspaces\nend\n\nclass UserWorkspace\n  belongs_to :user\n  belongs_to :workspace\nend\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code>create_table :users_workspaces do |t|\n  t.integer :user_id\n  t.integer :workspace_id\n  t.integer :role, default: 0\n\n  t.timestamps null: false\nend\n</code></pre>\n\n<p>Then I want to create a new record like this:</p>\n\n<pre><code>@user.workspaces.create(:workspace_id =&gt; @workspace.id, :role =&gt; 1)\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>@user.workspaces &lt;&lt; @workspace\n</code></pre>\n\n<p>and have an error in logs:</p>\n\n<pre><code>(0.0ms)  begin transaction\n(0.0ms)  begin transaction\n(0.1ms)  rollback transaction\n(0.1ms)  rollback transaction\nCompleted 500 Internal Server Error in 207ms (ActiveRecord: 5.5ms)\nCompleted 500 Internal Server Error in 207ms (ActiveRecord: 5.5ms)\n\nActiveRecord::UnknownAttributeError (unknown attribute 'workspace_id' for Workspace.):\napp/controllers/sessions_controller.rb:10:in `block in sign_up'\napp/controllers/sessions_controller.rb:4:in `sign_up'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>PS Controller:</p>\n\n<pre><code>def sign_up\nrespond_to do |format|\n  @user = User.new(user_params)\n  if @user.save\n    @workspace = Workspace.new(title: \"#{@user.name}'s workspace\")\n    @workspace.save\n    puts \"workspace id: #{@workspace.id}\"\n    @user.workspaces.create(:workspace_id =&gt; @workspace.id, :role =&gt; 1)\n    puts \"workspaces count: #{@user.workspaces.count}\"\n    @user.workspace = @workspace\n    @user.update_attributes(user_params)\n\n    flash.now[:success] = 'Welcome! Please check activation letter in your email box.'\n    format.js { render 'signup_message' }\n  else\n    format.js { render 'render_signup_errors' }\n  end\nend\nend\n\nprivate\n\ndef user_params\n  params.require(:user).permit(:email, :password, :password_confirmation, :name, :workspace_id)\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "minimagick"], "answers": [{"tags": [], "owner": {"reputation": 1006, "user_id": 5509571, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8fa9ab47d7649632d492cf5efcba6c85?s=128&d=identicon&r=PG", "display_name": "Anil Yadav", "link": "https://stackoverflow.com/users/5509571/anil-yadav"}, "is_accepted": true, "score": 5, "last_activity_date": 1460553623, "creation_date": 1460553623, "answer_id": 36599740, "question_id": 36599457, "link": "https://stackoverflow.com/questions/36599457/uninitialized-constant-userphotouploader/36599740#36599740", "title": "uninitialized constant User::PhotoUploader", "body": "<p>I think you need to add <code>carrierwave</code> to your <code>application.rb</code> file like this:</p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\n\nrequire 'rails/all'\n\nrequire 'carrierwave'\n\nif defined?(Bundler)\n  # Bundler stuff\nend\n</code></pre>\n\n<p>Try this may be it's work for you </p>\n\n<blockquote>\n  <p>Or sometime just restart rails server and after it everything worked\n  fine. :)</p>\n</blockquote>\n"}], "owner": {"reputation": 108, "user_id": 4931332, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1020738877943831/picture?type=large", "display_name": "Fuyu KuKie", "link": "https://stackoverflow.com/users/4931332/fuyu-kukie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 1, "accepted_answer_id": 36599740, "answer_count": 1, "score": 0, "last_activity_date": 1513115051, "creation_date": 1460553031, "question_id": 36599457, "link": "https://stackoverflow.com/questions/36599457/uninitialized-constant-userphotouploader", "title": "uninitialized constant User::PhotoUploader", "body": "<p>Iam trying to use mini_magick,but after following the git guide i still recieve uninitialized constant. i have another project working just fine using the same syntax.. however must be missing something ..</p>\n\n<p>photo_uploader.rb</p>\n\n<pre><code>class PhotoUploader &lt; CarrierWave::Uploader::Base\n\n  include CarrierWave::MiniMagick\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n   def default_url\n    \"photo.jpg\"\n   end\n\n  #right orientation\n  def right_orientation\n    manipulate! do |img|\n      img.auto_orient\n      img\n    end\n  end\n\n   def filename\n     \"photo.jpg\" if original_filename\n   end\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>require 'bcrypt'\nrequire 'carrierwave'\nrequire 'carrierwave/orm/activerecord'\nclass User &lt; ActiveRecord::Base\n    belongs_to :pakars\n    has_many :courses\n\n    scoped_search on: [:name1, :name2]\n    mount_uploader :photo, PhotoUploader\n    attr_accessor :password, :password_confirmation\n\n    def self.authenticate(email, pass)\n      u=where(\"email =?\", email).first\n      return nil if u.nil?\n      return u if BCrypt::Password.new(u.hashed_password) == pass\n      nil\n    end\n    def password=(pass)\n      self.hashed_password = BCrypt::Password.create(pass)\n    end\n\n\nend\n</code></pre>\n\n<p>Here is the error</p>\n\n<pre><code>uninitialized constant User::PhotoUploader\n\nRails.root: C:/Users/User/Desktop/Ruby_training/Project/Pakar_my\n</code></pre>\n\n<p>and yes i already installed the gems</p>\n\n<p>Gemfile</p>\n\n<pre><code>#carrier wave\ngem 'carrierwave'\n#mini_magick\ngem 'mini_magick' , '3.7.0'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1460553341, "post_id": 36599331, "comment_id": 60796123, "body": "Your method uses a single <code>where ... in</code> query. It hits the database exactly <b>one time</b>. I&#39;m not sure what you&#39;re asking for, but if it&#39;s an off-the-shelf Gem to do this, that is off topic on Stack Overflow."}, {"owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1460553464, "post_id": 36599331, "comment_id": 60796243, "body": "@meagar of course, but solution works only if conflicts are less than 100. Even if I generate more candidates, it does not scale indefinitely. I&#39;m sure that there are better methods. :)"}], "answers": [{"comments": [{"owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "edited": false, "score": 0, "creation_date": 1460554872, "post_id": 36600101, "comment_id": 60797461, "body": "Interesting solution. Maybe I can improve it using a <code>NOT RLIKE</code> instead of <code>NOT LIKE</code> (using a regexp), to match more candidates to exclude (for example, allowing both <code>-</code> and <code>_</code> as separators)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "edited": false, "score": 0, "creation_date": 1460554906, "post_id": 36600101, "comment_id": 60797485, "body": "Sure, this is just a headline/direction, not a complete solution."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460554991, "post_id": 36600101, "comment_id": 60797560, "body": "@SergioTulentsev Oh, uh, indeed :) <code>NOT</code> is superfluous."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "edited": false, "score": 0, "creation_date": 1460555087, "post_id": 36600101, "comment_id": 60797633, "body": "@ProGM please see an update, I messed the things up, <code>LIKE</code> is to be used, not <code>NOT LIKE</code>, thanks for the sharp eye of Sergio."}, {"owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "edited": false, "score": 0, "creation_date": 1460555145, "post_id": 36600101, "comment_id": 60797679, "body": "Ya, thanks @SergioTulentsev , I didn&#39;t noticed too. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460555605, "post_id": 36600101, "comment_id": 60798118, "body": "This also will slow down as more names are taken, but should perform much better against simple numerical suffixes (&quot;foo1&quot;, &quot;foo2&quot;, ...&quot;foo12345&quot;)."}, {"owner": {"reputation": 61, "user_id": 7446840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4bb95ff531559e910ad7fc04d776b32d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/7446840/david"}, "edited": false, "score": 0, "creation_date": 1611352658, "post_id": 36600101, "comment_id": 116433837, "body": "@AlekseiMatiushkin can you specify what does function generate_candidates_using_a_certain_strategy(i, taken) do ?  Please provide the code. I want to implement same think on Node js, so if  you can provide it javascript it will be awesome."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 61, "user_id": 7446840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4bb95ff531559e910ad7fc04d776b32d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/7446840/david"}, "edited": false, "score": 0, "creation_date": 1611385351, "post_id": 36600101, "comment_id": 116439200, "body": "@David do you expect me to write the code for you in the unrelated language? Fancy."}, {"owner": {"reputation": 61, "user_id": 7446840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4bb95ff531559e910ad7fc04d776b32d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/7446840/david"}, "edited": false, "score": 0, "creation_date": 1611389525, "post_id": 36600101, "comment_id": 116439948, "body": "@AlekseiMatiushkin can you help with this or not?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1460555437, "last_edit_date": 1460555437, "creation_date": 1460554492, "answer_id": 36600101, "question_id": 36599331, "link": "https://stackoverflow.com/questions/36599331/implement-an-efficient-slack-like-subdomain-name-suggestion/36600101#36600101", "title": "Implement an efficient slack-like subdomain name suggestion", "body": "<p>I would go with reversed approach: query the database for existing records using <a href=\"http://www.postgresqltutorial.com/postgresql-like/\" rel=\"nofollow\"><code>LIKE</code></a> and then generate suggestions skipping already taken:</p>\n\n<pre><code>def alternatives(model, column, word, count)\n  taken = model.class.where(\"#{column} LIKE '%#{word}%'\").pluck(column)\n  count.times.map! do |i|\n    generate_candidates_using_a_certain_strategy(i, taken)\n  end\nend\n</code></pre>\n\n<p>Make a <code>generate_candidates_using_a_certain_strategy</code> to receive an array of already taken words to be skipped. There could be one possible glitch with race condition on two requests taking the same name, but I don\u2019t think it might cause any problems, since you are always free to apologize when an actual creation will fail.</p>\n"}], "owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 36600101, "answer_count": 1, "score": 0, "last_activity_date": 1460555437, "creation_date": 1460552732, "last_edit_date": 1460554072, "question_id": 36599331, "link": "https://stackoverflow.com/questions/36599331/implement-an-efficient-slack-like-subdomain-name-suggestion", "title": "Implement an efficient slack-like subdomain name suggestion", "body": "<p>I have a Rails app with PostgreSQL.</p>\n\n<p>I'm trying to implement a method to suggest alternative names for a certain resource, if the user input has been already chosen.</p>\n\n<p>My reference is slack:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iLdFN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iLdFN.png\" alt=\"slack domain input\"></a></p>\n\n<p><strong>Is there any solution that could do this efficiently?</strong></p>\n\n<p>For efficiently I mean: using <strong>only one</strong> or also <strong>a small set of queries</strong>. A <strong>pure SQL solution</strong> would be great, though.</p>\n\n<p>My initial implementation looked like this:</p>\n\n<pre><code>def generate_alternative_names(model, column_name, count)\n  words = model[column_name].split(/[,\\s\\-_]+/).reject(&amp;:blank?)\n  candidates = 100.times.map! { |i| generate_candidates_using_a_certain_strategy(i, words) }\n  already_used = model.class.where(column_name =&gt; candidates).pluck(column_name)\n  (candidates - already_used).first(count)\nend\n\n# Usage example:\nmodel = Domain.new\nmodel.name = 'hello-world'\ngenerate_alternative_names(model, :name, 5)\n# =&gt; [\"hello_world\", \"hello-world2\", \"world_hello\", ...]\n</code></pre>\n\n<p>It generates 100 candidates, then checks the database for matches and removes them from the candidates list. Finally it returns the first <code>count</code> values extracted.</p>\n\n<p>This method is a <strong>best effort implementation</strong>, as it works for small sets of suggestions, that have few conflicts (in my case, 100 conflicts).</p>\n\n<p>Even if I increase this magic number (100), it does not scales indefinitely.</p>\n\n<p>Do you know a method to improve this, so it can scale for large number of conflicts and without using magic numbers?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "serialization"], "comments": [{"owner": {"reputation": 4079, "user_id": 1466095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e938a9e479fd194143d1c1e4f6d410?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Fiber", "link": "https://stackoverflow.com/users/1466095/zero-fiber"}, "edited": false, "score": 0, "creation_date": 1460551488, "post_id": 36598622, "comment_id": 60794451, "body": "You could pass a parameter to the serializer from the controller. More details here: <a href=\"http://stackoverflow.com/a/26780514/1466095\">stackoverflow.com/a/26780514/1466095</a>"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460552689, "post_id": 36598757, "comment_id": 60795552, "body": "seems to return all countries instead of reduced by condition"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460554539, "post_id": 36598757, "comment_id": 60797204, "body": "Umm, not exactly sure. You can try to interpolate <code>population</code> in the query, without passing it as param at the end. ANother thing you may try, wrap <code>population</code> in a array like this: <code>scope :population_more_than, -&gt;(population) {all.joins(&quot;LEFT JOIN countries ON countries.continent_id = continents.id AND countries.population &gt; ?&quot;, [population])}</code>"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1460555108, "post_id": 36598757, "comment_id": 60797650, "body": "it&#39;s not related with interpolation. I just used it appropriate otherwise I would get some error. I am wondering if that SQL query do what we expect."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 1, "last_activity_date": 1460551358, "creation_date": 1460551358, "answer_id": 36598757, "question_id": 36598622, "link": "https://stackoverflow.com/questions/36598622/rails-serialize-related-data/36598757#36598757", "title": "Rails - Serialize related data", "body": "<p>Create a scope and call the scope with <code>param</code> value from controller:</p>\n\n<pre><code>scope :population_more_than, -&gt;(population) {all.joins(\"LEFT JOIN countries ON countries.continent_id = continents.id AND countries.population &gt; ?\", population)}\n</code></pre>\n\n<p>Now call it from controller instead of <code>Continent.all</code></p>\n\n<pre><code>Continent.population_more_than(params[:population])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1460552947, "creation_date": 1460552947, "answer_id": 36599433, "question_id": 36598622, "link": "https://stackoverflow.com/questions/36598622/rails-serialize-related-data/36599433#36599433", "title": "Rails - Serialize related data", "body": "<p>You can try </p>\n\n<pre><code>@continents = Continent.all\n@continents.num_population = params[:population]\nrender json: @continents.to_json(methods: :countries_with_population_gt)\n</code></pre>\n\n<p>in your <code>Continent</code> model</p>\n\n<pre><code>attr_accessor :num_population\n\ndef countries_with_population_gt(num_population=0)\n  countries.where('population &gt; ?', @num_population)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1460553731, "creation_date": 1460553731, "answer_id": 36599790, "question_id": 36598622, "link": "https://stackoverflow.com/questions/36598622/rails-serialize-related-data/36599790#36599790", "title": "Rails - Serialize related data", "body": "<p>Basically, you need to select only <code>Continent</code>s that fall under specific rule. If this is a frequently used filter, then I would go with the Babar's suggestion and create a scope.</p>\n\n<p>If this is a one time selection, then I prefer simply do filtering right there without cluttering up my models with non-frequently used scopes.</p>\n\n<pre><code>Continent.joins(:countries).where(\"countries.population &gt; :population\", population: params[:population])\n\n# Or event shorter\nContinent.joins(:countries).where(\"countries.population &gt; :population\", params)\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1460553731, "creation_date": 1460551015, "question_id": 36598622, "link": "https://stackoverflow.com/questions/36598622/rails-serialize-related-data", "title": "Rails - Serialize related data", "body": "<p>I've got two models:</p>\n\n<pre><code>class Continent &lt; ActiveRecord::Base\n  has_many :countries\nend\n\nclass Country &lt; ActiveRecord::Base\n  belongs_to :continent\nend\n</code></pre>\n\n<p>I created controller like:</p>\n\n<pre><code>class ContinentsController &lt; ApplicationController\n  def index\n    @continents = Continent.all\n    render json: @continents\n  end\nend\n</code></pre>\n\n<p>and serializer:</p>\n\n<pre><code>class ContitnentSerializer &lt; ActiveModel::Serializer\n  attributes :name, :countries\nend\n</code></pre>\n\n<p>Here my issue begins. I'd like to serialize only countries with given condition where value comes from HTTP GET params. E.g country inside serializer should be displayed only if population is more than params[:population]. The problem is inside serializer we don't have access to params to examine that.</p>\n\n<pre><code>[\n {\n  name: 'Europe'\n  countries: [ \n    {\n      name: 'Italy',\n      population: 1000000 \n    }\n  ]\n },\n {\n  name: 'Africa'\n  countries: [ \n\n  ]\n }\n]\n</code></pre>\n\n<p>I've tried to join table with condition but it seems be not working.</p>\n\n<pre><code>@continents = Continent.all.joins(\"LEFT JOIN countries ON countries.continent_id = continents.id AND countries.population &gt; #{params[:population]}\")\n</code></pre>\n"}, {"tags": ["ruby", "openssl", "rsa", "digital-signature"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1460572074, "post_id": 36598554, "comment_id": 60810158, "body": "What does &quot;RSA1&quot; mean? &quot;RSA-x&quot; is usually written where &quot;x&quot; is the bit size of the modulus. A modulus of 1 bit doesn&#39;t permit <i>any</i> RSA operation. What is the &quot;1&quot; supposed to mean?"}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 2, "last_activity_date": 1460551106, "creation_date": 1460551106, "answer_id": 36598660, "question_id": 36598554, "link": "https://stackoverflow.com/questions/36598554/how-to-generate-rsa1-signature-from-file-with-a-passphrase/36598660#36598660", "title": "How to generate RSA1 signature from file with a passphrase", "body": "<p>Pass the passphrase while opening the file.</p>\n\n<pre><code>pri = OpenSSL::PKey::RSA.new(File.read(\"cert.prv\"), '123456')\n</code></pre>\n"}], "owner": {"reputation": 4355, "user_id": 1392154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61e860048a2e2226ea2726fe3d29451a?s=128&d=identicon&r=PG", "display_name": "Elmor", "link": "https://stackoverflow.com/users/1392154/elmor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 36598660, "answer_count": 1, "score": 1, "last_activity_date": 1460571975, "creation_date": 1460550884, "last_edit_date": 1460571975, "question_id": 36598554, "link": "https://stackoverflow.com/questions/36598554/how-to-generate-rsa1-signature-from-file-with-a-passphrase", "title": "How to generate RSA1 signature from file with a passphrase", "body": "<p>I need to generate  a RSA1 signature for a string  using file with a passphrase\nex:</p>\n\n<pre><code>require \"openssl\"\npri = OpenSSL::PKey::RSA.new( File.read(\"cert.prv\" ) )\nstring = 'Some string'\nsign = pri.sign( \"sha1\", string.force_encoding(\"utf-8\") )\n\n puts sign \n</code></pre>\n\n<p>cert.prv file has a passphrase <code>123456</code> if I run this script from console I input this passphrase by hand...<br>\nBut if this is run from a script how can I pass passphrase to <code>OpenSSL</code> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sequel", "mysql2", "grape"], "comments": [{"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 1, "creation_date": 1460551160, "post_id": 36597814, "comment_id": 60794193, "body": "Try without the square brackets? Like <code>1, 2]], :return =&gt; :primary_key)</code>"}, {"owner": {"reputation": 119, "user_id": 3637903, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8191b9d8a9e7cdb542cd63a7cfdff779?s=128&d=identicon&r=PG&f=1", "display_name": "Dileep Nunna", "link": "https://stackoverflow.com/users/3637903/dileep-nunna"}, "reply_to_user": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1460551354, "post_id": 36597814, "comment_id": 60794340, "body": "Above one working."}, {"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1460551462, "post_id": 36597814, "comment_id": 60794435, "body": "Great! I have added as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "is_accepted": false, "score": 2, "last_activity_date": 1460551432, "creation_date": 1460551432, "answer_id": 36598795, "question_id": 36597814, "link": "https://stackoverflow.com/questions/36597814/how-to-get-column-value-with-insert-query-using-sequel/36598795#36598795", "title": "How to get column value with insert query using sequel?", "body": "<p>As per <a href=\"http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-import\" rel=\"nofollow\">the docs</a>, you should be passing opts in without the square brackets, like so:</p>\n\n<pre><code>DB[:table].import([:x, :y], [[1, 2]], :return =&gt;: primary_key)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3637903, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8191b9d8a9e7cdb542cd63a7cfdff779?s=128&d=identicon&r=PG&f=1", "display_name": "Dileep Nunna", "link": "https://stackoverflow.com/users/3637903/dileep-nunna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460598450, "creation_date": 1460549117, "last_edit_date": 1460550699, "question_id": 36597814, "link": "https://stackoverflow.com/questions/36597814/how-to-get-column-value-with-insert-query-using-sequel", "title": "How to get column value with insert query using sequel?", "body": "<p>How to fetch column value at the time of inserting into MySQL DB using sequel. Tried below query getting type error: <em>no implicit conversion to integer</em>.</p>\n\n<pre><code>DB[:table].import([:x, :y], [[1, 2]], [:return=&gt;:primary_key]).\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1460549123, "post_id": 36597787, "comment_id": 60792371, "body": "<code>bundle install</code> in console"}, {"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1460549365, "post_id": 36597787, "comment_id": 60792561, "body": "Not working. Same problem"}, {"owner": {"reputation": 1734, "user_id": 996000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95be255e1690445d23f68ae734af371c?s=128&d=identicon&r=PG", "display_name": "mtrolle", "link": "https://stackoverflow.com/users/996000/mtrolle"}, "edited": false, "score": 0, "creation_date": 1460549584, "post_id": 36597787, "comment_id": 60792736, "body": "have you tried <code>bundle update</code>?"}, {"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "reply_to_user": {"reputation": 1734, "user_id": 996000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95be255e1690445d23f68ae734af371c?s=128&d=identicon&r=PG", "display_name": "mtrolle", "link": "https://stackoverflow.com/users/996000/mtrolle"}, "edited": false, "score": 0, "creation_date": 1460549620, "post_id": 36597787, "comment_id": 60792764, "body": "yes. bundle update, bundle, same error @mtrolle"}, {"owner": {"reputation": 4680, "user_id": 6063581, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vjohI.jpg?s=128&g=1", "display_name": "VonD", "link": "https://stackoverflow.com/users/6063581/vond"}, "edited": false, "score": 0, "creation_date": 1460549728, "post_id": 36597787, "comment_id": 60792854, "body": "Could you show what your Gemfile looks like ?"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 0, "creation_date": 1460550076, "post_id": 36597787, "comment_id": 60793151, "body": "Share your Gemfile. BTW, you don&#39;t need to include <code>rails-api</code> gem in your Rails 5 Gemfile. It&#39;s already merged into Rails 5."}, {"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "edited": false, "score": 0, "creation_date": 1460550463, "post_id": 36597787, "comment_id": 60793555, "body": "source &#39;<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39; gem &#39;rails&#39;, &#39;&gt;= 5.0.0.beta3&#39;, &#39;&lt; 5.1&#39; gem &#39;rails-api&#39; gem &#39;spring&#39;, :group =&gt; :development gem &#39;mysql2&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "edited": false, "score": 0, "creation_date": 1460550576, "post_id": 36598234, "comment_id": 60793658, "body": "rails-api g scaffold user email:string password:string auth_token:string and ommit gem &#39;rails-api&#39; Gem file look like source &#39;<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39; gem &#39;rails&#39;, &#39;&gt;= 5.0.0.beta3&#39;, &#39;&lt; 5.1&#39; gem &#39;spring&#39;, :group =&gt; :development gem &#39;mysql2&#39; and shoes the error: /.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/sp&zwnj;&#8203;ecification.rb:2157:&zwnj;&#8203;in <code>method_missing&#39;: undefined method </code>this&#39; for #&lt;Gem::Specification:0xac89b0 rails-api-0.4.0&gt; (NoMethodError)"}, {"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "edited": false, "score": 0, "creation_date": 1460550769, "post_id": 36598234, "comment_id": 60793844, "body": "I also run bundle update, bundle install and the above error"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "edited": false, "score": 0, "creation_date": 1460550933, "post_id": 36598234, "comment_id": 60793988, "body": "Remove <code>gem &#39;rails-api&#39;</code> line from your Gemfile, and run <code>bundle</code>. It should be okay."}, {"owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "edited": false, "score": 0, "creation_date": 1460551559, "post_id": 36598234, "comment_id": 60794526, "body": "I did, remove the gem &#39;rails-api&#39; line from my Gemfile and run bundle update, bundle install and also shows the error: /.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/sp&zwnj;&#8203;ecification.rb:2157:&zwnj;&#8203;in <code>method_missing&#39;: undefined method </code>this&#39; for #&lt;Gem::Specification:0xac89b0 rails-api-0.4.0&gt; (NoMethodError) \tfrom /home/ahsanul/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.&zwnj;&#8203;0/rubygems/specifica&zwnj;&#8203;tion.rb:1056:in `find_active_stub_by_path&#39;"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 5, "last_activity_date": 1460550149, "creation_date": 1460550149, "answer_id": 36598234, "question_id": 36597787, "link": "https://stackoverflow.com/questions/36597787/there-was-an-error-while-trying-to-load-the-gem-rails-api-bundlergemrequir/36598234#36598234", "title": "There was an error while trying to load the gem &#39;rails-api&#39;. (Bundler::GemRequireError)", "body": "<p>You don't need to include <code>rails-api</code> gem in your Rails 5 app's Gemfile. It's already merged into Rails 5. </p>\n\n<p><a href=\"https://github.com/rails/rails/pull/19832\" rel=\"noreferrer\">Reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7238303, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v1XnP08lznY/AAAAAAAAAAI/AAAAAAAAAm4/ho--so_ndPA/photo.jpg?sz=128", "display_name": "Austin Oseh", "link": "https://stackoverflow.com/users/7238303/austin-oseh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480625990, "creation_date": 1480625990, "answer_id": 40920285, "question_id": 36597787, "link": "https://stackoverflow.com/questions/36597787/there-was-an-error-while-trying-to-load-the-gem-rails-api-bundlergemrequir/40920285#40920285", "title": "There was an error while trying to load the gem &#39;rails-api&#39;. (Bundler::GemRequireError)", "body": "<p>I tried all the above suggestion from Babar but didn't work, so i tried one little thing that work which is adding gem 'listen' to the gem file.\nit works for me!! </p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 6350756, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/F72am.jpg?s=128&g=1", "display_name": "Mritunjay Upadhyay", "link": "https://stackoverflow.com/users/6350756/mritunjay-upadhyay"}, "is_accepted": false, "score": 0, "last_activity_date": 1486125111, "creation_date": 1486125111, "answer_id": 42024415, "question_id": 36597787, "link": "https://stackoverflow.com/questions/36597787/there-was-an-error-while-trying-to-load-the-gem-rails-api-bundlergemrequir/42024415#42024415", "title": "There was an error while trying to load the gem &#39;rails-api&#39;. (Bundler::GemRequireError)", "body": "<pre><code>rails-api generate scaffold user email:string password:string auth_token:string\n</code></pre>\n\n<p>No need of writing rails-api, just use rails. Rails::API has been merged into Rails 5.0, so no need of gem 'rails-api'.So remove it from gemfile.After than you may get error when you try to migrate.So you have to include <code>listen</code> gem.</p>\n"}], "owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3430, "favorite_count": 2, "accepted_answer_id": 36598234, "answer_count": 3, "score": 4, "last_activity_date": 1486125111, "creation_date": 1460549037, "last_edit_date": 1460549387, "question_id": 36597787, "link": "https://stackoverflow.com/questions/36597787/there-was-an-error-while-trying-to-load-the-gem-rails-api-bundlergemrequir", "title": "There was an error while trying to load the gem &#39;rails-api&#39;. (Bundler::GemRequireError)", "body": "<p>I am working with Rails 5.0.0.beta3 and creating a rails-api. when i run</p>\n\n<pre><code>rails-api generate scaffold user email:string password:string auth_token:string\n</code></pre>\n\n<p>it shows the error</p>\n\n<pre><code>.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:80:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'rails-api'. (Bundler::GemRequireError)\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\nfrom /home/ahsanul/Documents/rails-api/my_blog/config/application.rb:7:in `&lt;top (required)&gt;'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:82:in `require'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:82:in `preload'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:143:in `serve'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:131:in `block in run'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:125:in `loop'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application.rb:125:in `run'\nfrom /home/ahsanul/.rvm/gems/ruby-2.2.3/gems/spring-1.7.1/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\nfrom /home/ahsanul/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /home/ahsanul/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>How can i resolve the problem?</p>\n"}, {"tags": ["ruby", "mongoid5"], "answers": [{"tags": [], "owner": {"reputation": 2492, "user_id": 611020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/622874384a6c402000f15555762a38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Harel", "link": "https://stackoverflow.com/users/611020/benjamin-harel"}, "is_accepted": false, "score": 0, "last_activity_date": 1460628764, "last_edit_date": 1460628764, "creation_date": 1460627216, "answer_id": 36619419, "question_id": 36597786, "link": "https://stackoverflow.com/questions/36597786/reload-only-one-attribute-mongoid/36619419#36619419", "title": "Reload only one attribute mongoid", "body": "<p>Only rewrite the reload method: </p>\n\n<pre><code>module Mongoid\n  module Document\n    def reload(field = nil)\n      field.nil? ? super() : eval(\"#{self.class.name}.only(:#{field}).find('#{self.id}').#{field}\")\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2492, "user_id": 611020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/622874384a6c402000f15555762a38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Harel", "link": "https://stackoverflow.com/users/611020/benjamin-harel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460628801, "creation_date": 1460549032, "last_edit_date": 1460628801, "question_id": 36597786, "link": "https://stackoverflow.com/questions/36597786/reload-only-one-attribute-mongoid", "title": "Reload only one attribute mongoid", "body": "<p>I have <code>model</code> object implementing <code>Mongoid::Document</code></p>\n\n<p><code>model</code> has an attribute called <code>name</code></p>\n\n<p>I need to reload only <code>name</code> of <code>model</code></p>\n\n<p>Is there something shorter than</p>\n\n<p><code>Model.only(:name).find(model.id).name</code></p>\n\n<p>like <code>model.reload(:name)</code></p>\n"}, {"tags": ["ruby", "translation", "rails-i18n"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460549017, "post_id": 36597711, "comment_id": 60792282, "body": "What do you mean, &quot;stuck&quot;?"}, {"owner": {"reputation": 3052, "user_id": 3009846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/uyEL2.jpg?s=128&g=1", "display_name": "Peter Piper", "link": "https://stackoverflow.com/users/3009846/peter-piper"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1460549172, "post_id": 36597711, "comment_id": 60792420, "body": "Another word for - &quot;I don&#39;t know what to do next&quot; ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3052, "user_id": 3009846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/uyEL2.jpg?s=128&g=1", "display_name": "Peter Piper", "link": "https://stackoverflow.com/users/3009846/peter-piper"}, "edited": false, "score": 0, "creation_date": 1460549533, "post_id": 36597867, "comment_id": 60792688, "body": "the problem is that I don&#39;t have the translation ... I want to translate them so that instead of &quot;Schweiz&quot; it says &quot;Suisse&quot;"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 3052, "user_id": 3009846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/uyEL2.jpg?s=128&g=1", "display_name": "Peter Piper", "link": "https://stackoverflow.com/users/3009846/peter-piper"}, "edited": false, "score": 0, "creation_date": 1460550030, "post_id": 36597867, "comment_id": 60793119, "body": "i think <code>countries</code> gem can help you"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1460550192, "post_id": 36597867, "comment_id": 60793273, "body": "See the second link in my answer. You can find all the translations."}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 3, "last_activity_date": 1460549979, "last_edit_date": 1460549979, "creation_date": 1460549257, "answer_id": 36597867, "question_id": 36597711, "link": "https://stackoverflow.com/questions/36597711/translate-german-country-names-to-french/36597867#36597867", "title": "Translate German country names to French", "body": "<p>You can use <code>countries</code> gem to get the translation</p>\n\n<p>Just install the gem and add <code>require 'countries'</code> to your ruby file. You can follow the documentation <a href=\"https://github.com/hexorx/countries\" rel=\"nofollow\">here</a></p>\n\n<pre><code>c = ISO3166::Country.find_country_by_name('united states')\nc.translations['fr'] #=&gt; \"\u00c9tats-Unis\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1460549275, "creation_date": 1460549275, "answer_id": 36597878, "question_id": 36597711, "link": "https://stackoverflow.com/questions/36597711/translate-german-country-names-to-french/36597878#36597878", "title": "Translate German country names to French", "body": "<p>The country names are already translated and available in almost any format. Just <a href=\"https://www.google.com/search?q=country%20name%20translations%20in%20yaml\" rel=\"nofollow\">Google it</a>. Here is an <a href=\"https://mledoze.github.io/countries/\" rel=\"nofollow\">example</a> in CVS, XML and YAML formats.</p>\n\n<p>If this file is required for some of your projects, I would simply have those country's in the original yaml file like so:</p>\n\n<pre><code>de:\n   countries:\n      country_1:  \"Schweiz\"\n      country_2:  \"Deutschland\"\n      country_3:  \"Italien\"\n      country_4:  \"Frankreich\"\n      country_6:  \"Afghanistan\"\nfr:\n   countries:\n      country_1:  \"Schweiz in French\"\n      country_2:  \"Deutschland in French\"\n</code></pre>\n"}], "owner": {"reputation": 3052, "user_id": 3009846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/uyEL2.jpg?s=128&g=1", "display_name": "Peter Piper", "link": "https://stackoverflow.com/users/3009846/peter-piper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 36597867, "answer_count": 2, "score": -1, "last_activity_date": 1460550511, "creation_date": 1460548835, "last_edit_date": 1460550511, "question_id": 36597711, "link": "https://stackoverflow.com/questions/36597711/translate-german-country-names-to-french", "title": "Translate German country names to French", "body": "<p>I got a YAML file with the following structure containing country names in German:</p>\n\n<pre><code>countries:\n      country_1:  \"Schweiz\"\n      country_2:  \"Deutschland\"\n      country_3:  \"Italien\"\n      country_4:  \"Frankreich\"\n      country_6:  \"Afghanistan\"\n</code></pre>\n\n<p>I can import the file to Ruby and save it as a <code>Hash</code>.</p>\n\n<pre><code>require 'yaml'\nyml = YAML.load_file('countries.yml')\ncountries = yml['countries'] \n</code></pre>\n\n<p>I want to translate them into French. I thought that this should be a fairly simple task using <code>I18nCountryTranslations</code>, but I'm stuck. Is there a way to do this with built-in Ruby tools? Or do I need the whole Rails framework for this? Or an external API?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 1, "creation_date": 1460548630, "post_id": 36597535, "comment_id": 60791953, "body": "did you know about strong parameter in rails?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1460548763, "post_id": 36597535, "comment_id": 60792058, "body": "Replace your <code>.save</code> method with <code>.save!</code> and add error&#39;s full stacktrace here please."}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460549364, "post_id": 36597535, "comment_id": 60792559, "body": "@uzaif you are completely right! I forgot this point... I have added params.require(:user).permit(:selected_workspace_id) and now is ok."}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460549403, "post_id": 36597535, "comment_id": 60792589, "body": "can i post as answer?"}, {"owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "edited": false, "score": 0, "creation_date": 1460549486, "post_id": 36597535, "comment_id": 60792656, "body": "sure, please post it"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460549753, "post_id": 36597535, "comment_id": 60792878, "body": "please accept answer if it useful for you @Neon_10"}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "is_accepted": false, "score": 0, "last_activity_date": 1460549455, "creation_date": 1460549455, "answer_id": 36597939, "question_id": 36597535, "link": "https://stackoverflow.com/questions/36597535/rails-variable-can-not-be-saved/36597939#36597939", "title": "Rails variable can not be saved", "body": "<p>The problem was that I forgot about strong parameters, as @uzaif mentioned. After adding params.require(:user).permit(:selected_workspace_id) works well</p>\n"}, {"tags": [], "owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "is_accepted": true, "score": 3, "last_activity_date": 1460549633, "creation_date": 1460549633, "answer_id": 36598017, "question_id": 36597535, "link": "https://stackoverflow.com/questions/36597535/rails-variable-can-not-be-saved/36598017#36598017", "title": "Rails variable can not be saved", "body": "<p>Try This Code </p>\n\n<pre><code>def create_default_workspace(user)\n  @workspace = Workspace.new(workspace_params)\n  @workspace.save\n  user.selected_workspace_id = @workspace.id\n  if user.save\n    puts \"Saved\"\n  else\n    puts \"not saved\"\n  end\nend\n\nprivate \n\n  def workspace_params\n    params.require(:workspace).permit(:title)\n  end\n</code></pre>\n\n<p>You Forgot to add strong params method</p>\n"}], "owner": {"reputation": 661, "user_id": 3585444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9ErCG.jpg?s=128&g=1", "display_name": "Neon_10", "link": "https://stackoverflow.com/users/3585444/neon-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 36598017, "answer_count": 2, "score": 1, "last_activity_date": 1460549633, "creation_date": 1460548362, "question_id": 36597535, "link": "https://stackoverflow.com/questions/36597535/rails-variable-can-not-be-saved", "title": "Rails variable can not be saved", "body": "<p>I have such strange problem:\nI have this method:</p>\n\n<pre><code>def create_default_workspace(user)\n  @workspace = Workspace.new(title: \"#{user.name}'s workspace\")\n  @workspace.save\n  user.selected_workspace_id = @workspace.id\n  if user.save\n    puts \"Saved\"\n  else\n    puts \"not saved\"\n  end\nend\n</code></pre>\n\n<p>Which gives me \"not saved\". Do you have any ideas why variable <code>user</code> can not be saved?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460548267, "post_id": 36597278, "comment_id": 60791633, "body": "If you are not running your app in <code>development</code> mode, did you restart your app after you have changed the classes?"}, {"owner": {"reputation": 15, "user_id": 5899260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2476d8982715eef1b45c3dc2bad2d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "sacmax", "link": "https://stackoverflow.com/users/5899260/sacmax"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460548513, "post_id": 36597278, "comment_id": 60791862, "body": "Hi Uzbekjon, I am running my app in development, and restarted my app after making the changes. Not working then also."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460548662, "post_id": 36597278, "comment_id": 60791977, "body": "Did you look into the source of the generated page. Maybe it is being rendered as you need, but the div is not styled properly?! Can you add the rendered flash message code here please?"}, {"owner": {"reputation": 15, "user_id": 5899260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2476d8982715eef1b45c3dc2bad2d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "sacmax", "link": "https://stackoverflow.com/users/5899260/sacmax"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460549474, "post_id": 36597278, "comment_id": 60792646, "body": "The same div is being used to style other custom messages. The flash message code from the page source: &lt;p class=&quot;flash alert&quot;&gt;Invalid email or password.&lt;/p&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460552301, "creation_date": 1460552301, "answer_id": 36599152, "question_id": 36597278, "link": "https://stackoverflow.com/questions/36597278/overriding-devise-helper-rb-is-not-working-in-rails/36599152#36599152", "title": "Overriding devise_helper.rb is not working in rails", "body": "<p>You don't have style/css class in <code>app/views/layouts/_flashes.html.erb</code>. You've them in <code>DeviseHelper#devise_error_messages!</code> method, but these two are not related. That's why you're not getting it styled.</p>\n\n<p>Wrap you <code>_flashes.html.erb</code> partial with some classes, you would be good to go:</p>\n\n<pre><code>&lt;% flash.each do |key, value| %&gt;\n   &lt;%= content_tag(:p, value, :class =&gt; \"flash #{key} alert alert-info\") %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>&lt;% flash.each do |key, value| %&gt;\n   &lt;%= content_tag(:p, value, :class =&gt; \"flash alert alert-#{key}\") %&gt;\n&lt;% end %&gt; \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5899260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2476d8982715eef1b45c3dc2bad2d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "sacmax", "link": "https://stackoverflow.com/users/5899260/sacmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460552301, "creation_date": 1460547659, "last_edit_date": 1460548390, "question_id": 36597278, "link": "https://stackoverflow.com/questions/36597278/overriding-devise-helper-rb-is-not-working-in-rails", "title": "Overriding devise_helper.rb is not working in rails", "body": "<p>I want to customize devise error messages. I created a app/helper/devise_helper.rb file as follows:</p>\n\n<pre><code>module DeviseHelper\n\ndef devise_error_messages!\nreturn \"\" if resource.errors.empty?\n\nmessages = resource.errors.full_messages.map { |msg| content_tag(:li, msg) }.join\nsentence = I18n.t(\"errors.messages.not_saved\",\n                  count: resource.errors.count,\n                  resource: resource.class.model_name.human.downcase)\n\nhtml = &lt;&lt;-HTML\n&lt;div class= \"alert alert-info alert-dismissable\"&gt; \n &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n  #{messages}\n&lt;/div&gt;\nHTML\n\nhtml.html_safe\n  end\nend\n</code></pre>\n\n<p>Also i have app/views/layouts/_flashes.html.erb file  :</p>\n\n<pre><code>&lt;% flash.each do |key, value| %&gt;\n   &lt;%= content_tag(:p, value, :class =&gt; \"flash #{key}\") %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>I am rendering the above file in my application.html.erb file:</p>\n\n<pre><code> &lt;%= render \"layouts/flashes\"  %&gt; \n</code></pre>\n\n<p>Still I am getting the devise error messages in plain text in the top left corner of the webpage. Any pointers?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1460547906, "creation_date": 1460547906, "answer_id": 36597361, "question_id": 36597236, "link": "https://stackoverflow.com/questions/36597236/run-ruby-script-in-debug-mode/36597361#36597361", "title": "Run ruby script in debug mode", "body": "<p>If you want to run arbitrary scripts, then you can use <code>irb</code>.</p>\n\n<pre><code>$ irb\n2.3.0 :001 &gt; tmp = 'test'\n =&gt; \"test\" \n2.3.0 :002 &gt; class Tmp\n2.3.0 :003?&gt;   end\n =&gt; nil \n2.3.0 :004 &gt; Tmp\n =&gt; Tmp\n</code></pre>\n\n<p>Every time you run a command, you get the expression's result.</p>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 2, "last_activity_date": 1460548722, "creation_date": 1460548722, "answer_id": 36597667, "question_id": 36597236, "link": "https://stackoverflow.com/questions/36597236/run-ruby-script-in-debug-mode/36597667#36597667", "title": "Run ruby script in debug mode", "body": "<h2>Built-In Debugger</h2>\n\n<p>Step through your code with the built-in debugger. Invoke your script with:</p>\n\n<pre><code>ruby -rdebug /path/to/script\n</code></pre>\n\n<p>and step through it with <kbd>s</kbd> or <kbd>n</kbd>. See the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/debug/rdoc/DEBUGGER__.html\" rel=\"nofollow\">DEBUGGER_ class</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460549016, "creation_date": 1460549016, "answer_id": 36597779, "question_id": 36597236, "link": "https://stackoverflow.com/questions/36597236/run-ruby-script-in-debug-mode/36597779#36597779", "title": "Run ruby script in debug mode", "body": "<p>Since <code>set -x</code> is by no means \u201cdebugging,\u201d here goes the implementation of the same functionality in pure ruby:</p>\n\n<pre><code>ruby -e '\n  code = File.readlines(\"/path/to/file.rb\")\n  eval code.map { |c| %Q|puts \"+ #{c.strip}\"| }.zip(code).join($/)\n'\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3655175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0624d8ab1687ffdd70f7fcc64810bfd?s=128&d=identicon&r=PG&f=1", "display_name": "rajatbansal", "link": "https://stackoverflow.com/users/3655175/rajatbansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "closed_date": 1461737276, "answer_count": 3, "score": -1, "last_activity_date": 1460549016, "creation_date": 1460547573, "last_edit_date": 1460548012, "question_id": 36597236, "link": "https://stackoverflow.com/questions/36597236/run-ruby-script-in-debug-mode", "closed_reason": "Needs more focus", "title": "Run ruby script in debug mode", "body": "<p>Do we have some way to execute a ruby script in unix environment in debug mode. \nLike , if we execute a bash script with <code>set -x</code> it shows input and output of the command being executed. \nI want the same thing in ruby.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 1, "creation_date": 1460547333, "post_id": 36597090, "comment_id": 60790876, "body": "<code>Connection.where(&#39;updated_at &lt; ?&#39;, months.months.ago).destroy_all</code> - this should work fine. But what does <code>months.months.ago</code> returns ?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1460547382, "post_id": 36597090, "comment_id": 60790916, "body": "Why are you using eval in the first place?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1460547494, "post_id": 36597090, "comment_id": 60791014, "body": "@max, I assume for interpolation <code>&quot;#{months}.months.ago</code>."}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1460547619, "last_edit_date": 1460547619, "creation_date": 1460547332, "answer_id": 36597148, "question_id": 36597090, "link": "https://stackoverflow.com/questions/36597090/is-usage-of-eval-is-necessary-here/36597148#36597148", "title": "Is usage of eval is necessary here?", "body": "<p>No. If <code>months</code> is <code>Fixnum</code>, it will work without <code>eval</code>. In other cases (<code>month</code> is a string), it is better to do something like:</p>\n\n<pre><code>def perform\n  months_count = Figaro.env.connection_updated_months_ago.to_i\n  Connection.where('updated_at &lt; ?', months_count.months.ago)).destroy_all\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 2, "last_activity_date": 1460547341, "creation_date": 1460547341, "answer_id": 36597153, "question_id": 36597090, "link": "https://stackoverflow.com/questions/36597090/is-usage-of-eval-is-necessary-here/36597153#36597153", "title": "Is usage of eval is necessary here?", "body": "<p>No, you don't need it. You can simply do: <code>3.moths.ago</code> on integer. This means that you can simply do <code>months.months.ago</code>.</p>\n\n<pre><code>period = Figaro.env.connection_updated_months_ago\nConnection.where('updated_at &lt; ?', period.months.ago)).destroy_all\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 36597153, "answer_count": 2, "score": 0, "last_activity_date": 1460547619, "creation_date": 1460547183, "last_edit_date": 1460547424, "question_id": 36597090, "link": "https://stackoverflow.com/questions/36597090/is-usage-of-eval-is-necessary-here", "title": "Is usage of eval is necessary here?", "body": "<p>I am building a class that will remove records that were not updated from a certain time. For example, I need to remove all records that were not updated in the last 8 months. I have a worker class that looks like this:</p>\n\n<pre><code>class ConnectionsCleanerWorker\n  include Sidekiq::Worker\n\n  sidekiq_options queue: :connections_cleaner, retry: false\n\n  def perform\n    months = Figaro.env.connection_updated_months_ago\n    Connection.where('updated_at &lt; ?', eval(\"#{months}.months.ago\")).destroy_all\n  end\nend\n</code></pre>\n\n<p>It works properly, but I'm wondering if there is any way to write this code without using <code>eval</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460546832, "post_id": 36596896, "comment_id": 60790544, "body": "did you setup database first on heroku?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460547551, "post_id": 36596896, "comment_id": 60791065, "body": "When I run heroku run rake db:create. It also show same error"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460547730, "post_id": 36596896, "comment_id": 60791199, "body": "<code>heroku run rake db:setup</code> try this or check any gem which issue this exception"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1460547897, "creation_date": 1460546705, "question_id": 36596896, "link": "https://stackoverflow.com/questions/36596896/how-to-solve-require-cannot-load-such-file-bundler-loaderror-on-heroku", "title": "How to solve `require&#39;: cannot load such file -- bundler (LoadError) on heroku", "body": "<p>When I run migration on heroku it gives me an error</p>\n\n<pre><code>heroku run rake db:migrate\nRunning rake db:migrate on testing-app... up, run.9199\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler (LoadError)\nfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\nfrom /app/bin/spring:8:in `&lt;top (required)&gt;'\nfrom /app/bin/rake:3:in `load'\nfrom /app/bin/rake:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1460545003, "post_id": 36595922, "comment_id": 60789196, "body": "On Windows, you&#39;d use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383614.aspx\" rel=\"nofollow noreferrer\">Task Scheduler</a>. Doesn&#39;t look like it&#39;s being actively developed, but maybe the <a href=\"https://rubygems.org/gems/win32-taskscheduler/\" rel=\"nofollow noreferrer\">win32-taskscheduler</a> gem is of any help to you."}, {"owner": {"reputation": 37, "user_id": 5930807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3a31b32f916e2167a89c27fb626ee2?s=128&d=identicon&r=PG&f=1", "display_name": "achref rezgui", "link": "https://stackoverflow.com/users/5930807/achref-rezgui"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1460550773, "post_id": 36595922, "comment_id": 60793846, "body": "how to use win32-taskscheduler ?"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1460547046, "creation_date": 1460547046, "answer_id": 36597044, "question_id": 36595922, "link": "https://stackoverflow.com/questions/36595922/is-there-is-something-like-cron-in-rails-application-on-windows/36597044#36597044", "title": "Is there is something like cron in rails application on windows?", "body": "<p>Windows equivalent of Unix's <code>cron</code> is a \"Task Scheduler\". You can configure your periodical task there.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ypLG6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ypLG6.jpg\" alt=\"enter image description here\"></a></p>\n\n<h1>Purely Ruby solution</h1>\n\n<p>If you want a purely Ruby solution look into:</p>\n\n<ul>\n<li><a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow noreferrer\">rufus-scheduler</a> - it's Windows cron gem.</li>\n<li><a href=\"https://github.com/plashchynski/crono\" rel=\"nofollow noreferrer\">crono</a> - it's a in-Rails cron scheduler, so it should work anywhere.</li>\n<li><a href=\"https://www.google.com/search?q=free%20web%20cron\" rel=\"nofollow noreferrer\">Web services</a> - there are plenty of free online services that would make a request to a given URL in specific time periods. This is basically a poor man's cronjob.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "is_accepted": false, "score": 1, "last_activity_date": 1460547112, "last_edit_date": 1495541761, "creation_date": 1460547112, "answer_id": 36597073, "question_id": 36595922, "link": "https://stackoverflow.com/questions/36595922/is-there-is-something-like-cron-in-rails-application-on-windows/36597073#36597073", "title": "Is there is something like cron in rails application on windows?", "body": "<p>I recommend taking a look at <a href=\"https://github.com/resque/resque\" rel=\"nofollow noreferrer\">Resque</a> and the extension <a href=\"https://github.com/resque/resque-scheduler\" rel=\"nofollow noreferrer\">Resque-scheduler</a> gems. You will need to have a resque scheduler process running with <code>bundle exec rake resque:scheduler</code> and at least one worker process running with <code>QUEUE=* bundle exec rake resque:work</code>.\nIf you want these services to run in the background as a windows service, you can do it with <code>srvany.exe</code> as described in <a href=\"https://stackoverflow.com/questions/8386825/running-delayed-job-as-a-windows-service\">this SO question</a>.</p>\n\n<p>The above assumes you are ok with installing Redis - a key-value store that is very popular among the Rails community as it can be easily used to support other Rails components such as caching and ActionCable, and it is awesome by itself for many multi-process use cases. </p>\n\n<p>Resque is a queue system on top of Redis that allows you to define jobs that can be executed asynchronously in the background. When you run <code>QUEUE=* bundle exec rake resque:work</code>, a worker process runs constantly and polls the queue. Once a job is enqueued, an available worker pops it from the queue and starts working on it. This architecture is quite scalable, as you can have multiple workers listening to the queues if you'd like. </p>\n\n<p>To define a job, you do this:</p>\n\n<pre><code>class MyWeeklyEmailSenderJob\n  def self.perform\n    # Your code to send weekly emails\n  end\nend\n</code></pre>\n\n<p>While you can enqueue this job to the queue yourself from anywhere (e.g. from a controller as a response to an action), in your case you want it to automatically be placed into the queue once a week. This is what Resque-scheduler is for. It allows you to configure a file such as <code>app/config/resque_schedule.yml</code> in which you can define which jobs should be enqueued in which time interval. For example:</p>\n\n<pre><code>send_weekly_emails:\n  cron: 0 8 * * Mon\n  class: MyWeeklyEmailSenderJob\n  queue: email_sender_queue\n  description: \"Send weekly emails\"\n</code></pre>\n\n<p>Remember that a scheduling process has to run in order for this to work with <code>bundle exec rake resque:scheduler</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 5930807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3a31b32f916e2167a89c27fb626ee2?s=128&d=identicon&r=PG&f=1", "display_name": "achref rezgui", "link": "https://stackoverflow.com/users/5930807/achref-rezgui"}, "is_accepted": false, "score": 0, "last_activity_date": 1460626580, "creation_date": 1460626580, "answer_id": 36619145, "question_id": 36595922, "link": "https://stackoverflow.com/questions/36595922/is-there-is-something-like-cron-in-rails-application-on-windows/36619145#36619145", "title": "Is there is something like cron in rails application on windows?", "body": "<p>thanks guys , actually i tried rufus scheduler gem and it worked for me , i guess it's the best and easier solution </p>\n"}], "owner": {"reputation": 37, "user_id": 5930807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3a31b32f916e2167a89c27fb626ee2?s=128&d=identicon&r=PG&f=1", "display_name": "achref rezgui", "link": "https://stackoverflow.com/users/5930807/achref-rezgui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1460626580, "creation_date": 1460544063, "last_edit_date": 1460548923, "question_id": 36595922, "link": "https://stackoverflow.com/questions/36595922/is-there-is-something-like-cron-in-rails-application-on-windows", "title": "Is there is something like cron in rails application on windows?", "body": "<p>I'm trying to use <code>cron</code> in my application to send mails every week but I think it doesn't work on Windows.</p>\n\n<p>Does anybody knows any equivalent to <code>cron</code> solution that works on Windows? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460542389, "post_id": 36595138, "comment_id": 60787289, "body": "&quot;<i>This work fine</i>&quot; and &quot;<i>This Does not work</i>&quot; blocks have the same code!"}, {"owner": {"reputation": 421, "user_id": 2304366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e91d714662a9a6c004cc21d181c52e61?s=128&d=identicon&r=PG", "display_name": "Naremy", "link": "https://stackoverflow.com/users/2304366/naremy"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460542482, "post_id": 36595138, "comment_id": 60787359, "body": "yeah, I notice after post. sorry for that :D"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1460543558, "creation_date": 1460543558, "answer_id": 36595720, "question_id": 36595138, "link": "https://stackoverflow.com/questions/36595138/how-to-override-an-inner-class-with-a-concern/36595720#36595720", "title": "How to override an inner class with a concern?", "body": "<p>You can completely replace the constant like this, for example:</p>\n\n<pre><code>module UglyButNeededPatch\n  extend ActiveSupport::Concern\n\n  included do |base|\n    base::InnerClass = Class.new do\n      def sample;    puts 'rewrite'; end \n      def self.yolo; puts 'rewrite';   end\n    end\n  end\nend\n</code></pre>\n\n<p>And if you want to surgically patch the inner class, the easiest way I found is to use another concern:</p>\n\n<pre><code>module UglyButNeededPatch\n  extend ActiveSupport::Concern\n\n  included do |base|\n    base::InnerClass.include(InnerClassPatch)\n  end\n\n  module InnerClassPatch\n    extend ActiveSupport::Concern\n\n    def sample; puts 'rewrite'; end\n\n    module ClassMethods\n      def yolo; puts 'rewrite'; end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 2304366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e91d714662a9a6c004cc21d181c52e61?s=128&d=identicon&r=PG", "display_name": "Naremy", "link": "https://stackoverflow.com/users/2304366/naremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 36595720, "answer_count": 1, "score": 0, "last_activity_date": 1460543558, "creation_date": 1460542031, "last_edit_date": 1460542438, "question_id": 36595138, "link": "https://stackoverflow.com/questions/36595138/how-to-override-an-inner-class-with-a-concern", "title": "How to override an inner class with a concern?", "body": "<p>I got a class that contain another class. I want to have the possibility to change the second class with a concern.</p>\n\n<p>Here is the code :</p>\n\n<pre><code>class BaseClass\n  class InnerClass\n    def sample;    puts 'sample'; end \n    def self.yolo; puts 'yolo';   end\n  end\nend\n\nBaseClass::InnerClass.yolo       # yolo\nBaseClass::InnerClass.new.sample # sample\n\nmodule UglyButNeededPatch\n  extend ActiveSupport::Concern\n\n  included do\n    class NewInnerClass\n      def sample;    puts 'new sample'; end \n      def self.yolo; puts 'new yolo';   end\n    end\n    class InnerClass\n      def sample;    super(); puts 'rewrite'; end \n      def self.yolo; super(); puts 'rewrite';   end\n    end\n  end\nend\n\nBaseClass.__send__(:include, UglyButNeededPatch)\n</code></pre>\n\n<p>This work fine</p>\n\n<pre><code>BaseClass::NewInnerClass.yolo       # new yolo\nBaseClass::NewInnerClass.new.sample # new sample\n</code></pre>\n\n<p>This Does not work</p>\n\n<pre><code>BaseClass::InnerClass.yolo       # still display yolo\nBaseClass::InnerClass.new.sample # still display sample\n</code></pre>\n\n<p>Is there a way to make <code>BaseClass::InnerClass.yolo</code> display <code>yolorewrite</code> and <code>BaseClass::InnerClass.new.sample</code> display <code>samplerewrite</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "railstutorial.org", "helpers"], "answers": [{"tags": [], "owner": {"reputation": 844, "user_id": 4728340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-A_G-3wxfXxk/AAAAAAAAAAI/AAAAAAAAAMw/uBG_cLcqTI8/photo.jpg?sz=128", "display_name": "Chuck", "link": "https://stackoverflow.com/users/4728340/chuck"}, "is_accepted": true, "score": 0, "last_activity_date": 1461055903, "last_edit_date": 1461055903, "creation_date": 1460614376, "answer_id": 36615075, "question_id": 36595080, "link": "https://stackoverflow.com/questions/36595080/including-sessionshelper-in-railstutorial-org-test-helper-why-not/36615075#36615075", "title": "Including SessionsHelper in RailsTutorial.org test_helper: why not?", "body": "<p>After going through Chapter 8, I found that testing for whether the user is logged in using the code from <code>logged_in?</code> (i.e., <code>!current_user.nil?</code>) won't work for tests somehow, so the method <code>current_user</code> doesn't actually work (i.e., somehow it always returns <code>true</code>). Though I don't know exactly why; I'm basing it off of this quote:</p>\n\n<blockquote>\n  <p>(Because helper methods aren\u2019t available in tests, we can\u2019t use the current_user as in Listing 8.15, but the session method is available, so we use that instead.)</p>\n</blockquote>\n\n<p>So essentially using the <code>current_user</code> method in tests won't work because it's not available in tests? (I thought I included them in <code>test_helper.rb</code> with the line <code>include SessionsHelper</code>, though.</p>\n\n<p>This is my answer for now. It would be great if someone more knowledgable than me could confirm the inner workings of this.</p>\n\n<p>EDIT: Okay so I think it's because the <code>current_user</code> method uses <code>@current_user ||= User.find_by(id: user_id)</code> but the <code>User</code> database is different between development and testing.</p>\n"}], "owner": {"reputation": 844, "user_id": 4728340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-A_G-3wxfXxk/AAAAAAAAAAI/AAAAAAAAAMw/uBG_cLcqTI8/photo.jpg?sz=128", "display_name": "Chuck", "link": "https://stackoverflow.com/users/4728340/chuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 36615075, "answer_count": 1, "score": 0, "last_activity_date": 1461055903, "creation_date": 1460541909, "question_id": 36595080, "link": "https://stackoverflow.com/questions/36595080/including-sessionshelper-in-railstutorial-org-test-helper-why-not", "title": "Including SessionsHelper in RailsTutorial.org test_helper: why not?", "body": "<p>In <a href=\"https://www.railstutorial.org\" rel=\"nofollow\">railstutorial.org</a>, <a href=\"https://www.railstutorial.org/book/log_in_log_out#code-test_helper_sessions\" rel=\"nofollow\">Listing 8.23</a>:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\n.\n.\n.\nclass ActiveSupport::TestCase\n  fixtures :all\n\n  # Returns true if a test user is logged in.\n  def is_logged_in?\n    !session[:user_id].nil?\n  end\nend\n</code></pre>\n\n<p>suggests creating a duplicate method to check whether the current user is logged in (having already defined such a method in <code>sessions_helper.rb</code>) for use in testing. However, I was wondering why the author chose to do this in the first place. He explains his reasoning as such:</p>\n\n<blockquote>\n  <p>To test the behavior from <a href=\"https://www.railstutorial.org/book/log_in_log_out#code-login_upon_signup\" rel=\"nofollow\">Listing 8.22</a>, we can add a line to the test from <a href=\"https://www.railstutorial.org/book/sign_up#code-a_test_for_valid_submission\" rel=\"nofollow\">Listing 7.26</a> to check that the user is logged in. It\u2019s helpful in this context to define a is_logged_in? helper method to parallel the logged_in? helper defined in <a href=\"https://www.railstutorial.org/book/log_in_log_out#code-logged_in_p\" rel=\"nofollow\">Listing 8.15</a>, which returns true if there\u2019s a user id in the (test) session and false otherwise (<a href=\"https://www.railstutorial.org/book/log_in_log_out#code-test_helper_sessions\" rel=\"nofollow\">Listing 8.23</a>). (Because helper methods aren\u2019t available in tests, we can\u2019t use the current_user as in <a href=\"https://www.railstutorial.org/book/log_in_log_out#code-logged_in_p\" rel=\"nofollow\">Listing 8.15</a>, but the session method is available, so we use that instead.) Here we use is_logged_in? instead of logged_in? so that the test helper and Sessions helper methods have different names, which prevents them from being mistaken for each other.</p>\n</blockquote>\n\n<p>However, in an exercise from Chapter 5, the author writes code including <code>ApplicationHelper</code> in its test suite (see <a href=\"https://www.railstutorial.org/book/filling_in_the_layout#code-test_helper_application_helper\" rel=\"nofollow\">Listing 5.37</a>):</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\n.\n.\n.\nclass ActiveSupport::TestCase\n  fixtures :all\n  include ApplicationHelper\n  .\n  .\n  .\nend\n</code></pre>\n\n<p>When I included <code>SessionsHelper</code> and ran my tests using code from that helper module, my tests still passed. I was wondering if the author chose to forgo including <code>SessionsHelper</code> in the code because that technique was used in an exercise (and thus better off applied elsewhere) or if actually including <code>SessionsHelper</code> to the test suite is a Bad Thing for some reason or another. Any insights to this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460540172, "post_id": 36594266, "comment_id": 60785569, "body": "show your <code>routes</code>"}, {"owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "edited": false, "score": 1, "creation_date": 1460540210, "post_id": 36594266, "comment_id": 60785596, "body": "try <code>redirect_to &#39;&#47;my-profile&#39; </code>"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "edited": false, "score": 0, "creation_date": 1460540425, "post_id": 36594266, "comment_id": 60785763, "body": "ohh shit this is silly mistake here. Thank you @Sukanta"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460540426, "post_id": 36594266, "comment_id": 60785768, "body": "Can pass in flash messages in redirect: <code>redirect_to action: :my_profile, alert: &quot;Invalid email&#47;password combination&quot;</code>."}, {"owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "edited": false, "score": 0, "creation_date": 1460540502, "post_id": 36594266, "comment_id": 60785840, "body": "@Chinu I have added answer, if this has solved your answer you can accept the answer"}], "answers": [{"comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1460540694, "post_id": 36594465, "comment_id": 60785984, "body": "Routes might change down the road. It&#39;s better to stick with the action names. They usually change less. <code>redirect_to action: :my_profile</code>."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1460541232, "post_id": 36594465, "comment_id": 60786423, "body": "@Uzbekjon then I would rather do <code>get &#39;my-profile&#39;, to: &#39;users#my_profile&#39;, as: :profile_path</code> then <code>redirect_to profile_path</code>"}], "tags": [], "owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "is_accepted": true, "score": 4, "last_activity_date": 1460540458, "creation_date": 1460540458, "answer_id": 36594465, "question_id": 36594266, "link": "https://stackoverflow.com/questions/36594266/page-redirection-not-working-in-the-ruby/36594465#36594465", "title": "Page redirection not working in the ruby", "body": "<p>try this</p>\n\n<pre><code>redirect_to '/my-profile'\n</code></pre>\n"}], "owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36594465, "answer_count": 1, "score": 0, "last_activity_date": 1460540458, "creation_date": 1460539906, "question_id": 36594266, "link": "https://stackoverflow.com/questions/36594266/page-redirection-not-working-in-the-ruby", "title": "Page redirection not working in the ruby", "body": "<p>I am tried to page redirect after login success. But My page not redirect proper page. I am getting <code>The connection was reset</code> error message. Please check my redirection code.</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>get    'login'   =&gt; 'users#login'\npost   'login'   =&gt; 'users#create_login'\nget   'my-profile'   =&gt; 'users#my_profile'\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>def create_login\n    user = User.authenticate(params[:user][:username], params[:user][:password])\n    if user\n      log_in user\n      redirect_to 'my-profile'\n    else\n      flash[:danger] = 'Invalid email/password combination' # Not quite right!\n      redirect_to :back\n    end\nend\n\ndef my_profile\n    @myProfile = User.findById(session[:user_id])\nend\n</code></pre>\n\n<p>My page should be redirect to <code>http://localhost:3000/my-profile</code> but Page redirection not working. Please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544012, "post_id": 36594241, "comment_id": 60788523, "body": "When you say array, you mean <code>has_many :video_usages</code> or an actual array?"}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544340, "post_id": 36594241, "comment_id": 60788735, "body": "The array is <code>main_video_usage</code>, and is an attribute of a WorkoutStep"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544450, "post_id": 36594241, "comment_id": 60788806, "body": "Ah ok, no idea how it works with arrays, with associations it is easy to give a specific default order (and imho by default ordered by <code>id</code> but not sure about that)."}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544656, "post_id": 36594241, "comment_id": 60788947, "body": "Those were my thoughts, but each time I edit the order changes, being the first the last I edited (note: <b>the order only changes when I edit</b>)"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544749, "post_id": 36594241, "comment_id": 60789006, "body": "Not sure if I was clear: Are you using <code>has_many :main_video_usages</code> ? How did you declare <code>main_video_usage(s)</code> ?"}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1460544946, "post_id": 36594241, "comment_id": 60789162, "body": "<code>has_many :main_video_usage, class_name: &#39;VideoUsage::Main&#39;, as: :parent</code> and <code>accepts_nested_attributes_for :main_video_usage</code>"}], "answers": [{"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 2, "last_activity_date": 1460550766, "last_edit_date": 1460550766, "creation_date": 1460545370, "answer_id": 36596397, "question_id": 36594241, "link": "https://stackoverflow.com/questions/36594241/maintain-the-order-of-an-array-in-rails-forms/36596397#36596397", "title": "Maintain the order of an array in rails forms", "body": "<p>You can give an explicit order, use <code>id</code> or <code>created_at</code> if you want to keep the order of creation: </p>\n\n<pre><code>has_many :main_video_usage, -&gt; { order('id asc') }, class_name: 'VideoUsage::Main', as: :parent\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 36596397, "answer_count": 1, "score": 0, "last_activity_date": 1460550766, "creation_date": 1460539851, "last_edit_date": 1460540816, "question_id": 36594241, "link": "https://stackoverflow.com/questions/36594241/maintain-the-order-of-an-array-in-rails-forms", "title": "Maintain the order of an array in rails forms", "body": "<p>I have 3 models (Workout, WorkoutSet, WorkoutStep) with the following associations:</p>\n\n<ul>\n<li>A Workout has many sets</li>\n<li>A WorkoutSet has many WorkoutSep</li>\n<li>And a WorkoutStep has an array of videos (called <code>video_usage[]</code>)</li>\n</ul>\n\n<p>Using simple_form and cocoon I made the forms to edit such associations but, at the deepest level (the array of videos of WorkoutStep) by the time I edit a Workout, the order seem not to be constant, being, instead, ordered by (guessing) the last time the attribute has been modified (in this case, modified is changing a property, such as selecting another video).</p>\n\n<p>I want the array of videos to remain constant between edits.</p>\n\n<p>This is how my form looks like:</p>\n\n<p><b><code>_workout_sets_fields.html.haml</code></b></p>\n\n<pre><code>.nested-fields\n  = f.simple_fields_for :main_video_usage do |mv|\n    = render 'main_video_usage_fields', f: mv\n  .steps{ :style =&gt; \"margin-left: 680px\" }\n    = link_to_remove_association 'remove step', f\n    = link_to_add_association 'add video', f, :main_video_usage\n</code></pre>\n\n<p><b><code>_main_video_usage_fields.html.haml</code></b></p>\n\n<pre><code>.nested-fields\n  = f.collection_select :video_id, Video.all.order(:title), :id, :title\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3387104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a0852134f74b367cdf7858344491a1ff?s=128&d=identicon&r=PG&f=1", "display_name": "ArpithaGeorge", "link": "https://stackoverflow.com/users/3387104/arpithageorge"}, "edited": false, "score": 0, "creation_date": 1460547128, "post_id": 36594195, "comment_id": 60790740, "body": "Thanks JamesWatling :)  It&#39;s my mistake"}], "tags": [], "owner": {"reputation": 1145, "user_id": 1655978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5dd0d56ea1dd784126cda196a9ce9e13?s=128&d=identicon&r=PG", "display_name": "JamesWatling", "link": "https://stackoverflow.com/users/1655978/jameswatling"}, "is_accepted": true, "score": 3, "last_activity_date": 1460539745, "creation_date": 1460539745, "answer_id": 36594195, "question_id": 36594122, "link": "https://stackoverflow.com/questions/36594122/field-validation-ruby-on-rails/36594195#36594195", "title": "Field Validation Ruby on Rails", "body": "<p>You need to remove the <code>!</code> from the save, as this will throw an error on that line, if you omit the <code>!</code> it will simply return a boolean (and then render the error or success.</p>\n\n<p>so </p>\n\n<pre><code>class AssignmentsController &lt; ApplicationController\n  def create\n    @assignment = Assignment.new(assignment_params)\n\n    respond_to do |format|\n      if @assignment.save\n        format.html { redirect_to @assignment, notice: 'Assignment was successfully created.' }\n        format.json { render :show, status: :created, location: @assignment }\n        @assignment.folder.update({status: 'assigned'})\n      else\n        format.html { render :new }\n        format.json { render json: @assignment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3387104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a0852134f74b367cdf7858344491a1ff?s=128&d=identicon&r=PG&f=1", "display_name": "ArpithaGeorge", "link": "https://stackoverflow.com/users/3387104/arpithageorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 36594195, "answer_count": 1, "score": 0, "last_activity_date": 1460539745, "creation_date": 1460539601, "question_id": 36594122, "link": "https://stackoverflow.com/questions/36594122/field-validation-ruby-on-rails", "title": "Field Validation Ruby on Rails", "body": "<p>Having some trouble with my form field validation. I have two text field that requires validation before it persists to the next page. The validations are run correctly but the validation messages shows like rails error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4SAXe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SAXe.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I want this error like below<a href=\"https://i.stack.imgur.com/AR8zx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AR8zx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any one Knows why its shows like rails error.</p>\n\n<p>Model:</p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n  include Workflow\n\n  belongs_to :folder\n  belongs_to :employee\n\n  after_initialize :init_start_dateenter code here\n\n  validates_presence_of :folder_id, :employee_id\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class AssignmentsController &lt; ApplicationController\n  def create\n    @assignment = Assignment.new(assignment_params)\n\n    respond_to do |format|\n      if @assignment.save!\n        format.html { redirect_to @assignment, notice: 'Assignment was successfully created.' }\n        format.json { render :show, status: :created, location: @assignment }\n        @assignment.folder.update({status: 'assigned'})\n      else\n        format.html { render :new }\n        format.json { render json: @assignment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>I have two more forms to validate the fields. In that forms the validation errors are shows correctly.</p>\n"}, {"tags": ["ruby", "wordpress"], "comments": [{"owner": {"reputation": 554, "user_id": 5824259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-a65ax7kXB68/AAAAAAAAAAI/AAAAAAAAAA8/q3fFbjFHsOs/photo.jpg?sz=128", "display_name": "Lymuel", "link": "https://stackoverflow.com/users/5824259/lymuel"}, "edited": false, "score": 0, "creation_date": 1460539494, "post_id": 36593984, "comment_id": 60785011, "body": "Are your databases different? What I mean, your wordpress database differs from your ruby website?"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1460539809, "post_id": 36593984, "comment_id": 60785256, "body": "What do you want to display and in what way? Just a table? Do you want to create a file? Or do you want to show the data in the page itself? If so, you should get familiar with wordpress, and Ruby won&#39;t help you much... But for the other options Ruby will work fine"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6197398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143a48306f379d64e11ad2a8899cedd6?s=128&d=identicon&r=PG&f=1", "display_name": "Chili", "link": "https://stackoverflow.com/users/6197398/chili"}, "edited": false, "score": 0, "creation_date": 1460544729, "post_id": 36594920, "comment_id": 60788994, "body": "Great! Thanks, I will check it out!"}], "tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": true, "score": 0, "last_activity_date": 1460541580, "creation_date": 1460541580, "answer_id": 36594920, "question_id": 36593984, "link": "https://stackoverflow.com/questions/36593984/ruby-and-databases/36594920#36594920", "title": "Ruby and databases", "body": "<p>It is possible to access your wp data from a ruby app. You will need to familiarise yourself with the <a href=\"http://v2.wp-api.org/\" rel=\"nofollow\">wordpress api</a>. This <a href=\"https://github.com/robmiller/ruby-wpdb\" rel=\"nofollow\">gem</a> might also help. You can build a small sinatra based app to keep it simple or use rails.</p>\n"}], "owner": {"reputation": 31, "user_id": 6197398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143a48306f379d64e11ad2a8899cedd6?s=128&d=identicon&r=PG&f=1", "display_name": "Chili", "link": "https://stackoverflow.com/users/6197398/chili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36594920, "answer_count": 1, "score": -1, "last_activity_date": 1460541580, "creation_date": 1460539307, "question_id": 36593984, "link": "https://stackoverflow.com/questions/36593984/ruby-and-databases", "title": "Ruby and databases", "body": "<p>I am new in programming in Ruby, not to mention databases, so i would like a few pointers to my question. I have a few websites, where i gather information from users by a form, which they fill out (my websites are in Wordpress). The form is made in Contact Form 7 (<a href=\"https://wordpress.org/plugins/contact-form-7/\" rel=\"nofollow\">https://wordpress.org/plugins/contact-form-7/</a>) and the info is stored in the database with this plugin (<a href=\"https://wordpress.org/plugins/contact-form-7-to-database-extension/\" rel=\"nofollow\">https://wordpress.org/plugins/contact-form-7-to-database-extension/</a>).</p>\n\n<p>My question is: Is it possible to make a ruby program, that would fetch info from my sites (databases) and show me the information? Is there a better way of doing this (Ruby on rails perhaps)?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460537593, "post_id": 36593193, "comment_id": 60783653, "body": "Try removing <code>attr_accessor :password</code> from the model."}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460538045, "post_id": 36593193, "comment_id": 60783965, "body": "Yes working fine. Thank you."}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460538059, "post_id": 36593193, "comment_id": 60783972, "body": "Let me know about the <code>attr_accessor :password</code>"}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1460544633, "creation_date": 1460544633, "answer_id": 36596124, "question_id": 36593193, "link": "https://stackoverflow.com/questions/36593193/hash-password-not-saved-in-the-password-column/36596124#36596124", "title": "Hash password not saved in the password column", "body": "<p>Your main error is that your are using <code>attr_accessor :password</code> to create a getter/setter for the password attribute that overrides the getter and setter that ActiveRecord creates from the database schema.</p>\n\n<p>However your whole approach to password encryption is flawed - you should have <code>password</code> as a purely <a href=\"http://railscasts.com/episodes/16-virtual-attributes\" rel=\"nofollow\">virtual attribute</a> and name your database column <code>password_digest</code> or <code>encrypted_password</code>.</p>\n\n<p>Unless its for pure learning purposes should use the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow\"><code>has_secure_password</code></a> macro that Rails provides instead of reinventing the password encryption wheel and getting hacked.</p>\n\n<h2>1. Add a <code>password_digest</code> column to user:</h2>\n\n<pre><code>rails g migration AddPassWordDigestToUser password_digest:string:index\n</code></pre>\n\n<p>You might want to remove the <code>password_salt</code> column as well as it is not used by <code>ActiveModel::SecurePassword</code>.</p>\n\n<pre><code>class AddPassWordDigestToUser &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :password_digest, :string\n    add_index :users, :password_digest\n    remove_column :users, :password_salt\n    remove_column :users, :password\n  end\nend\n</code></pre>\n\n<h2>2. Add <code>has_secure_password</code> to the User model:</h2>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_secure_password\nend\n</code></pre>\n\n<h2>3. RESTful routes</h2>\n\n<p>You may want to correct your routes so they are resource oriented and not action oriented and follow the rails conventions:</p>\n\n<pre><code>GET  /registrations/new   registations#new     - sign up form\nPOST /registrations       registations#create  - create user\n\nGET  /sessions/new        sessions#new         - sign in form\nPOST /sessions            sessions#create      - sign in user\n</code></pre>\n\n<p>You can setup the routes with just:</p>\n\n<pre><code>resources :registrations, only: [:new, :create]\nresources :sessions, only: [:new, :create]\n</code></pre>\n\n<p>See <a href=\"http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default\" rel=\"nofollow\">Rails Routing from the Outside In</a>.</p>\n\n<h2>4. Binding forms and controllers.</h2>\n\n<p>You are setting up the controller properly however your form is not bound to the <code>@user</code> model instance you are creating in your controller. </p>\n\n<p>This means that the values the user enters disappear after a unsuccessful form submission.</p>\n\n<p>Also pay attention to the pluralization and naming of your variables! You are inconsistently using <code>@user</code> and <code>@users</code>. In this case <code>@users</code> will always be nil and cause an error.</p>\n\n<p>app/controllers/registrations_controller.rb:</p>\n\n<pre><code>class RegistationsController &lt; ApplicationController\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    # Use a block instead of messing with the incoming params.\n    @user = User.new(user_params) do |u|\n      u.uniq_id = generate_uniq\n    end \n\n    if @user.save\n      respond_to do |format|\n        format.html { redirect_to root_path, success: \"Welcome #{@user.email}\" }\n        format.json { status: :created, location: @user } \n      end\n    else\n      respond_to do |format|\n        format.html { redirect_to :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity } \n      end\n    end\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:email, :password, :password_confirmation)\n    end\n\nend\n</code></pre>\n\n<p>app/views/registrations/new.html.erb:</p>\n\n<pre><code>&lt;%= form_for(@user, url: registrations_path) do |f| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%= f.label :email %&gt;\n    &lt;%= f.text_field :email %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;%= f.password_field :password %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;\n    &lt;%= f.password_field :password_confirmation %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 36596124, "answer_count": 1, "score": -1, "last_activity_date": 1460712981, "creation_date": 1460537421, "last_edit_date": 1460712981, "question_id": 36593193, "link": "https://stackoverflow.com/questions/36593193/hash-password-not-saved-in-the-password-column", "title": "Hash password not saved in the password column", "body": "<p>I am trying to store hash password in my <code>users</code> table while registration. Please see my code:</p>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>def login\n  @title = 'Login'\n  #render layout: 'login'\nend\ndef create_login\n  user = User.authenticate(params[:user][:username], params[:user][:password])\n  if user\n    log_in user\n    redirect_to '/admin'\n  else\n    flash[:danger] = 'Invalid email/password combination' # Not quite right!\n    redirect_to :back\n  end\nend\ndef register\n    @user = User.new\n    @title = 'Register'\n  end\n\n  def create_register\n    params[:user][:uniq_id] = generate_uniq\n    @user = User.new(create_user_params)\n    #raise @user.inspect\n    respond_to do |format|\n      if @user.save\n        format.html { redirect_to :success, success: 'Registration was successfully created.' }\n        format.json { redirect_to :register, status: :created, location: @users }\n      else\n        format.html { render :register }\n        format.json { render json: @users.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\nprivate\n\ndef create_user_params\n    params.require(:user).permit(:uniq_id, :name, :username, :email, :password, :password_confirmation, :password_salt, :dob, :address)\n  end\n</code></pre>\n\n<p><strong>register.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag(\"/register\", method: \"post\") do %&gt;\n        &lt;%#= form_tag(@user) do |f| %&gt;\n         &lt;% if @user.errors.any? %&gt;\n          &lt;div id=\"error_explanation\"&gt;\n            &lt;h2&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n            &lt;ul&gt;\n              &lt;% @user.errors.full_messages.each do |message| %&gt;\n                &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n              &lt;% end %&gt;\n            &lt;/ul&gt;\n          &lt;/div&gt;\n        &lt;% end %&gt;\n\n\n          &lt;%= text_field :user, :name, placeholder:'NAME', required: true %&gt;\n          &lt;div style=\"position: relative;\"&gt;\n            &lt;span id=\"chk-username\" style=\"position: absolute;font-size: 12px;right: 2%; bottom: 5%; z-index: 9; display: block;\"&gt;&lt;/span&gt;\n            &lt;%= text_field :user, :username, placeholder:'USERNAME', 'data-validate':\"/users/check_username\", required: true %&gt;\n          &lt;/div&gt;\n          &lt;div style=\"position: relative;\"&gt;\n            &lt;span id=\"chk-email\" style=\"position: absolute;font-size: 12px;right: 2%; bottom: 5%; z-index: 9; display: block;\"&gt;&lt;/span&gt;\n            &lt;%= text_field :user, :email, placeholder:'EMAIL', 'data-validate':\"/users/check_email\", required: true %&gt;\n          &lt;/div&gt;\n          &lt;%= password_field :user, :password, placeholder:'PASSWORD', required: true %&gt;  \n          &lt;%= password_field :user, :password_confirmation, placeholder:'CONFIRM PASSWORD', required: true %&gt; \n          &lt;div class=\"submit\"&gt;\n            &lt;input type=\"submit\" value=\"REGISTER\" &gt;\n            &lt;input type=\"button\" onclick=\"location.href = '&lt;%= request.base_url %&gt;/login'\" value=\"LOGIN\" &gt;\n          &lt;/div&gt;    \n          &lt;p&gt;&lt;a href=\"#\"&gt;Forgot Password ?&lt;/a&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  #has_secure_password\n\n  attr_accessor :password\n  before_save :encrypt_password\n\n  validates :name, presence: true\n\n\n  validates :name, length: { minumum:2, maximum: 30 }\n\n  validates :password, :presence =&gt;true,\n    :length =&gt; { :minimum =&gt; 6, :maximum =&gt; 40 },\n    :confirmation =&gt;true\n\n  validates :username, :presence =&gt; true,\n    :uniqueness =&gt; { :case_sensitive =&gt; false }\n\n  email_regex = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, :presence =&gt; true,\n    :format =&gt; { :with =&gt; email_regex },\n    :uniqueness =&gt; { :case_sensitive =&gt; false }\n\n\n  def self.authenticate(input_username, input_password)\n    user = find_by_username(input_username)\n    if user &amp;&amp; user.password == BCrypt::Engine.hash_secret(input_password, user.password_salt)\n      user\n    else\n      nil\n    end\n  end\n\n  def encrypt_password\n    if password.present?\n      self.password_salt = BCrypt::Engine.generate_salt\n      self.password = BCrypt::Engine.hash_secret(password, password_salt)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>get    'register'   =&gt; 'users#register'\npost   'register'   =&gt; 'users#create_register'\n</code></pre>\n\n<p>Here is my database table.</p>\n\n<p><strong>users.sql (customize table)</strong></p>\n\n<pre><code>+----+----------+------------+-----------+----------------+\n| id | name     | username   |  password |  password_salt |\n+----+----------+------------+-----------+----------------+\n|  1 | chinmay  | chinu      | NULL      |$2a$10$15fWDt.. |\n|  2 | sanjib   | sanjib     | NULL      |$2a$10$85DyMr.. |\n+----+----------+------------+-----------+----------------+\n</code></pre>\n\n<p>I get <code>NULL</code> value in my <code>password</code> column. Please help me and let me know where the error is in my code.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1460536825, "post_id": 36592890, "comment_id": 60783101, "body": "are you referring to pagination?  or simply how to iterate through 5 elements?"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1460536859, "post_id": 36592890, "comment_id": 60783134, "body": "@maxpleaner simple iteration through the index."}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1460536932, "post_id": 36592890, "comment_id": 60783183, "body": "Is using js an option? If so you can set up an on click function on your button to change the css."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1460537027, "post_id": 36592890, "comment_id": 60783242, "body": "@margo, cant use js here, because <code>lightgallery</code> will use the <code>div</code> inside the  index to pop up a gallery presentation with all the small thumbs"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1460537304, "post_id": 36592890, "comment_id": 60783428, "body": "<i>Sidenote</i>: <code>&amp;&amp; @product.product_attachments.count</code> is completely senseless and demonstrates a poor understanding of how booleans are organized in ruby. <code>@product.product_attachments.count</code> is <i>never</i> evaluated to <code>falsey</code>. <code>if @product.product_attachments.present?</code> is completely senseless either, since <code>product_attachments</code> is a relation and can not be <code>nil</code>."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1460537450, "post_id": 36592890, "comment_id": 60783543, "body": "@mudasobwa appreciate for the tips!!"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460536597, "creation_date": 1460536597, "question_id": 36592890, "link": "https://stackoverflow.com/questions/36592890/ruby-on-rails-iterate-through-index", "title": "Ruby on Rails iterate through index", "body": "<p>Here is my view that display an images to user:</p>\n\n<pre><code>&lt;div id=\"lightgallery\" class=\"col-md-8 detailpage-images-gallery\" &gt;\n &lt;% if @product.product_attachments.present? &amp;&amp;@product.product_attachments.count &gt; 0 %&gt;\n  &lt;% @product.product_attachments.each_with_index do |attachment, index| %&gt;\n\n    &lt;% if index == 0 %&gt;\n      &lt;div class=\"col-sm-6 col-md-6 topleftimg &lt;%='hidden-xs' if index !=  @product.product_attachments.count - 1 %&gt;\" data-responsive=\"&lt;%= attachment.attachment.large.url %&gt;\" data-src=\"&lt;%= attachment.attachment.large.url %&gt;\" data-sub-html=\"&lt;%= @product.highlight %&gt;\"&gt;\n        &lt;a class=\"photo-grid-photo photo-trigger\" style=\"background-image:url('&lt;%= attachment.attachment.square.url %&gt;');\" href=\"#\" title=\"Photo 2 of 6\" data-index=\"1\" data-prevent-default=\"true\"&gt;\n        &lt;img src=\"&lt;%= attachment.attachment.square.url %&gt;\" class=\"hide\" alt=\"Photo 2 of 6\"&gt;&lt;/a&gt;\n      &lt;/div&gt;\n\n    &lt;% elsif index == 1 %&gt;\n     &lt;div class=\"col-sm-6 col-md-6 toprightimg &lt;%='hidden-xs' if index != @product.product_attachments.count - 1 %&gt;\" data-responsive=\"&lt;%= attachment.attachment.large.url %&gt;\" data-src=\"&lt;%= attachment.attachment.large.url %&gt;\" data-sub-html=\"&lt;%= @product.highlight %&gt;\"&gt;                \n      &lt;a href=\"\"&gt;&lt;img src=\"&lt;%= attachment.attachment.small.url %&gt;\" class=\"img-responsive\"&gt;&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;                       \n  &lt;% end %&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In my view I limit the display up to 5 images, but once user click they can see more than 5 images. How can I iterate through <code>index</code> rather than using <code>&lt;% if index == 0%&gt;</code> to fetch all the images? And how can I modify the css so that, if more than 5 images present, I can append <code>style=\"display:none\"</code> to the rest of <code>div</code>? Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku", "bower"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1460537062, "creation_date": 1460537062, "answer_id": 36593055, "question_id": 36592667, "link": "https://stackoverflow.com/questions/36592667/how-to-solve-heroku-give-sprockets-error/36593055#36593055", "title": "How to solve Heroku give sprockets error?", "body": "<p>It's best on stackoverflow to not post screenshots if possible. Rather, copy-paste the error into a code block.</p>\n\n<p>The important part of this is <code>File not found</code> and it shows that <code>chosen/chosen.jquery</code> is the missing file. </p>\n\n<p>Not sure where the source for this file is supposed to be. If you're using a gem, then perhaps the gem assets aren't being loaded correctly.</p>\n\n<p>Otherwise, if you have access to the <code>chosen.jquery</code> source, add it to <code>app/assets/javascripts/chosen.js</code> and then add <code>//= require chosen/chosen.js</code></p>\n\n<p>By the way, I changed the file extension to <code>.js</code> because <code>.jquery</code> is not a valid file extension in this context, as far as I'm aware. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460537062, "creation_date": 1460536000, "question_id": 36592667, "link": "https://stackoverflow.com/questions/36592667/how-to-solve-heroku-give-sprockets-error", "title": "How to solve Heroku give sprockets error?", "body": "<p>When I deploy my app on heroku I am getting this error.\nI am using bower install in my app . Is it due to this?\n<a href=\"https://i.stack.imgur.com/ply3v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ply3v.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460535686, "post_id": 36592504, "comment_id": 60782346, "body": "Do you get any error?"}, {"owner": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1460537594, "post_id": 36592504, "comment_id": 60783654, "body": "I dislike people who upvote questions without explanations."}], "answers": [{"comments": [{"owner": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "edited": false, "score": 0, "creation_date": 1460537500, "post_id": 36592609, "comment_id": 60783576, "body": "I am redirected to the home page because i have a 302 error."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "edited": false, "score": 0, "creation_date": 1460537936, "post_id": 36592609, "comment_id": 60783886, "body": "@Pracede Can you update your question with the server log generated? That will help to narrow down the issue."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "edited": false, "score": 1, "creation_date": 1460538401, "post_id": 36592609, "comment_id": 60784202, "body": "@Pracede Try moving <code>get &#39;&#47;users&#47;ask&#39; =&gt; &#39;users#ask&#39;</code> above <code>resources :users, only: [:index, :show, :edit, :update, :destroy]</code>"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "edited": false, "score": 1, "creation_date": 1460538593, "post_id": 36592609, "comment_id": 60784338, "body": "Your log file is matching users/ask to the users#show controller action. This is because in the Rails routes file, the precedence of route matching is from top to bottom, so if you do what Pavan says it should map to the ask method."}, {"owner": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "edited": false, "score": 0, "creation_date": 1460538899, "post_id": 36592609, "comment_id": 60784551, "body": "Thank you all for your answer. I discover that the redirect to show was made in controller in ask method. I delete the ask method and it works."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1460535827, "creation_date": 1460535827, "answer_id": 36592609, "question_id": 36592504, "link": "https://stackoverflow.com/questions/36592504/rails-how-to-display-web-page-without-using-scafold/36592609#36592609", "title": "Rails : How to display web page without using scafold?", "body": "<p>I believe its a routing error. Try changing</p>\n\n<pre><code>get 'askrecommandation' =&gt; 'users#ask'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>get '/users/ask' =&gt; 'users#ask'\n</code></pre>\n"}], "owner": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 36592609, "answer_count": 1, "score": 0, "last_activity_date": 1460538069, "creation_date": 1460535531, "last_edit_date": 1460538069, "question_id": 36592504, "link": "https://stackoverflow.com/questions/36592504/rails-how-to-display-web-page-without-using-scafold", "title": "Rails : How to display web page without using scafold?", "body": "<p>I have a web application in Rails. When user is log in, user must be able to acccess to a web page where he can see some informations. So i create a link from menu like this : </p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"/users/ask\"&gt;Ask data&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Here is my routes.rb :</p>\n\n<pre><code>Rails.application.routes.draw do\n\n...  \n  as :user do\n    get 'users/candidat/sign_up', to: 'user/registrations#new', as: :candidat_registration\n    get 'users/recruteur/sign_up', to: 'user/registrations#new', as: :recruteur_registration\n  end\n\n  devise_for :users, controllers: { registrations: \"user/registrations\", sessions: \"user/sessions\" }\n\n  resources :users, only: [:index, :show, :edit, :update, :destroy] do\n\n    put \"recommand\", to: \"users#recommand\"\n\n    get '/users/ask' =&gt; 'users#ask'\n\n  end\n\n  get \"/dashboard\" =&gt; 'dashboard#index'\n  root to: \"home#index\"\n\nend\n</code></pre>\n\n<p>Here is my web page app/views/users/ask.html.erb:</p>\n\n<pre><code>&lt;p&gt;\n    Ask Data here\n&lt;/p&gt;\n</code></pre>\n\n<p>But when i click in the link i cannot access to my web page. </p>\n\n<p><a href=\"https://i.stack.imgur.com/pvpMn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pvpMn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here are raltives log :</p>\n\n<pre><code>Started GET \"/users/ask\" for ::1 at 2016-04-13 10:50:49 +0200\nProcessing by UsersController#show as HTML\n  Parameters: {\"id\"=&gt;\"ask\"}\n  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1\nRedirected to http://localhost:3000/\nFilter chain halted as :set_user rendered or redirected\nCompleted 302 Found in 3ms (ActiveRecord: 0.4ms)\n</code></pre>\n\n<p>I don't know really RoR but i think it's about configuration in routes.rb. I always generate page with scalfolding. On this page i don't need CRUD features. What wrong please ? If you could suggest me some resources, blog post to understand the problem i have, thanks.\nAm i obliged to pass request in a controller ? User need to be connected to access to my web page.\nIs it possible to just configure routes and display ?</p>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460535356, "post_id": 36592335, "comment_id": 60782114, "body": "Use the json library."}, {"owner": {"reputation": 199, "user_id": 4159888, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/484f37cfa49cb84ca8202cd08f37f5da?s=128&d=identicon&r=PG&f=1", "display_name": "Var", "link": "https://stackoverflow.com/users/4159888/var"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460535429, "post_id": 36592335, "comment_id": 60782159, "body": "@sawa I did refer to the following post: <a href=\"http://stackoverflow.com/questions/13897846/is-it-possible-to-convert-a-json-string-to-an-object\" title=\"is it possible to convert a json string to an object\">stackoverflow.com/questions/13897846/&hellip;</a>, but the json structure that is mentioned in this example is different than what i have, any suggestions on how i could do this?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460535522, "post_id": 36592335, "comment_id": 60782229, "body": "Variables in Ruby do not have types (classes). You can just assign an object that has a certain type."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1460535554, "post_id": 36592335, "comment_id": 60782257, "body": "Yes, this can be done in a very tricky way, but why you need to do this? Is <code>configure[&#39;linux.ubuntu.ip&#39;] = &#39;10.10.10.10&#39;</code> that bad?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460535562, "post_id": 36592335, "comment_id": 60782264, "body": "If you know how to convert the json into a Ruby object, then your question should start from there without mention to json. No need to make the question complicated."}, {"owner": {"reputation": 199, "user_id": 4159888, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/484f37cfa49cb84ca8202cd08f37f5da?s=128&d=identicon&r=PG&f=1", "display_name": "Var", "link": "https://stackoverflow.com/users/4159888/var"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1460535784, "post_id": 36592335, "comment_id": 60782410, "body": "@Aetherus Tricky way is fine!"}, {"owner": {"reputation": 199, "user_id": 4159888, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/484f37cfa49cb84ca8202cd08f37f5da?s=128&d=identicon&r=PG&f=1", "display_name": "Var", "link": "https://stackoverflow.com/users/4159888/var"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1460572301, "post_id": 36592335, "comment_id": 60810289, "body": "@Aetherus I need to do this because i need to add the above key value pair in the existing &quot;config&quot; hashie"}], "answers": [{"tags": [], "owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "is_accepted": false, "score": 2, "last_activity_date": 1571782795, "creation_date": 1571782795, "answer_id": 58513002, "question_id": 36592335, "link": "https://stackoverflow.com/questions/36592335/converting-a-json-string-to-hashie-mash/58513002#58513002", "title": "Converting a json string to hashie mash", "body": "<p>To get a JSON string to a <code>Hashie::Mash</code> object you can simply do:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'json'\nrequire 'hashie'\n\njson_str = '{ \"foo\": \"bar\" }'\nruby_hash = JSON.parse(json_str)\nHashie::Mash.new(ruby_hash)\n</code></pre>\n\n<p>For this specific problem, though not ideal (but we all have our unique use cases) you're needing to parse to an array, then extract the 'key's into nested Hashie::Mash objects of some unknown depth.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'json'\nrequire 'hashie'\n\njson_str = &lt;&lt;-JSON\n  [\n    {\n      \"key\": \"linux.ubuntu.ip\",\n      \"value\": \"10.10.10.10\"\n    },\n    {\n      \"key\": \"linux.ubuntu.hostname\",\n      \"value\": \"stageubuntu\"\n    }\n  ]\nJSON\n\nparsed_arr = JSON.parse(json_str)\n#=&gt; [{\"key\"=&gt;\"linux.ubuntu.ip\", \"value\"=&gt;\"10.10.10.10\"}, {\"key\"=&gt;\"linux.ubuntu.hostname\", \"value\"=&gt;\"stageubuntu\"}]\n\nconfigure = parsed_arr.map do |parsed_hash|\n  method_chain = parsed_hash['key'].split('.')\n  init_value   = Hashie::Mash.new(method_chain.pop =&gt; parsed_hash['value'])\n\n  method_chain.reverse.inject(init_value) do |ret_value, method_name|\n    Hashie::Mash.new(method_name =&gt; ret_value)\n  end\nend.inject(:merge) # &lt;-- hashie is allows you to perform a deep merge into a single object here.\n\n# you can now do\n\nconfigure.linux.ubuntu.ip = 10.10.10.10 [Hashie::Mash]\n#=&gt; \"10.10.10.10\"\n\nconfigure.linux.ubuntu.hostname\n#=&gt; \"stageubuntu\"\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4159888, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/484f37cfa49cb84ca8202cd08f37f5da?s=128&d=identicon&r=PG&f=1", "display_name": "Var", "link": "https://stackoverflow.com/users/4159888/var"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571782795, "creation_date": 1460535002, "last_edit_date": 1460535236, "question_id": 36592335, "link": "https://stackoverflow.com/questions/36592335/converting-a-json-string-to-hashie-mash", "title": "Converting a json string to hashie mash", "body": "<p>I have a web service that returns a json in the following format:</p>\n\n<pre><code>[\n    {\n        \"key\": \"linux.ubuntu.ip\",\n        \"value\": \"10.10.10.10\"\n    },\n    {\n        \"key\": \"linux.ubuntu.hostname\",\n        \"value\": \"stageubuntu\"\n    }\n]\n</code></pre>\n\n<p>I have a ruby code that makes a call to this service and gets the json. Deep in this code, there is a variable <code>configure</code> of type <code>Hashie::Mash</code>.</p>\n\n<p>I want to achieve this: </p>\n\n<pre><code>configure.linux.ubuntu.ip = 10.10.10.10 [Hashie::Mash]\nconfigure.linux.ubuntu.hostname = stageubuntu [Hashie::Mash]\n</code></pre>\n\n<p>Could anybody tell me if it is possible to achieve this (w.r.t to the json output that I have)? If so, what is the best method to do it?</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 411, "user_id": 176464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd15f3d36bf2200b7211555679b4f3d?s=128&d=identicon&r=PG", "display_name": "tobiasvl", "link": "https://stackoverflow.com/users/176464/tobiasvl"}, "edited": false, "score": 2, "creation_date": 1460532638, "post_id": 36591432, "comment_id": 60780357, "body": "This doesn&#39;t seem like a pure Ruby question. Is it Ruby on Rails, for example? Perhaps add some tags?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1460532949, "post_id": 36591432, "comment_id": 60780577, "body": "Could you add some context - I&#39;ve no idea what you&#39;re even trying to do"}, {"owner": {"reputation": 45, "user_id": 6196502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0ea37849d1b9be3c23f274c0549ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/6196502/jennifer"}, "edited": false, "score": 0, "creation_date": 1460533117, "post_id": 36591432, "comment_id": 60780705, "body": "am using capybara automation through selenium webdriver"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460571871, "post_id": 36591432, "comment_id": 60810034, "body": "Please add your actual test code to the question so we can see what exactly you are doing - The &quot;Element not found in the cache&quot; error would tend to imply you&#39;re saving a reference to an element from one page and attempting to use it on the next."}], "owner": {"reputation": 45, "user_id": 6196502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0ea37849d1b9be3c23f274c0549ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/6196502/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460563527, "creation_date": 1460532447, "last_edit_date": 1460563527, "question_id": 36591432, "link": "https://stackoverflow.com/questions/36591432/element-not-found-in-the-cache-ruby", "title": "Element not found in the cache - Ruby", "body": "<p>I see the below error when clicking on the button/enter text after moving to the next page in the same site:</p>\n\n<blockquote>\n  <p>Element not found in the cache - perhaps the page has changed since it was looked up\n  [remote server] <code>resource://fxdriver/modules/web-element-cache.js:9454:in 'fxdriver.cache.getElementAt'</code></p>\n</blockquote>\n\n<p>Using the Capybara automation (Selenium web-driver), the browser automatically gets closed.</p>\n\n<p>I have tried to put the session refresh statement before it closes. </p>\n\n<pre><code>visit current_url\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session-cookies", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "edited": false, "score": 0, "creation_date": 1460531818, "post_id": 36591098, "comment_id": 60779808, "body": "this is what i did in <code>SessionsController#Create</code> Action. what is the diffrence? @dkp"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "edited": false, "score": 0, "creation_date": 1460532314, "post_id": 36591098, "comment_id": 60780127, "body": "In <code>def current_user     @current_user ||= User.find(session[:user_id].to_s)#puts session[:user_id] giving me nil after i authenticated user.      rescue Mongoid::Errors::DocumentNotFound =&gt; ex   end</code>"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1460532632, "post_id": 36591098, "comment_id": 60780348, "body": "<code>session[:user_id] = @user_session.user_id</code> - you have this statement in your create action. You should be getting the user from DB like <code>@user = User.find_by_email(params[]):email</code>. Then you can authenticate the user and set the session like <code>session[:user_id] = @user.id</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "edited": false, "score": 0, "creation_date": 1460533061, "post_id": 36591098, "comment_id": 60780664, "body": "i have debug that by putting put statements in that. i am getting <code>@user_session.user_id</code> value from db successfully . even i am setting that value to session also. still it not working @dkp"}], "tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 0, "last_activity_date": 1460533172, "last_edit_date": 1460533172, "creation_date": 1460531572, "answer_id": 36591098, "question_id": 36590981, "link": "https://stackoverflow.com/questions/36590981/unable-to-get-value-from-session-in-rails-5/36591098#36591098", "title": "Unable to get value from session in rails 5", "body": "<p>You never created session, try this:</p>\n\n<pre><code>def create\n #@user_session = Session.create(session_params)\n user = User.find_by(email: params[:session][:email].downcase)\n if user &amp;&amp; user.authenticate(params[:session][:password])\n   session[:user_id] = user.id\n   redirect_to learners_url\n else\n   redirect_to learner_new_registrations\n end\nend\n</code></pre>\n\n<p>Since, you have not authenticated user. So in your <code>ApplicationController</code>, you have a method named <code>authenticate</code>. It first checks whether user is <code>signed_in?</code> or not. If not, then it redirects you to the <code>root_url</code>.</p>\n\n<pre><code>def authenticate\n  return if signed_in?\n  redirect_to root_url\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460533172, "creation_date": 1460531154, "question_id": 36590981, "link": "https://stackoverflow.com/questions/36590981/unable-to-get-value-from-session-in-rails-5", "title": "Unable to get value from session in rails 5", "body": "<p>Hello i have been struggling with this from past few hours still i can't find out where wrong goes.</p>\n\n<p>I am setting the <code>session</code> with <code>user_id</code> in <code>SessionsController</code> like this</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n skip_before_action :authenticate, except: [:logout]\n\ndef new\n  @session = Session.new\nend\n\ndef create\n @user_session = Session.new(session_params)\n\n if @user_session.valid?\n   session[:user_id] = @user_session.user_id\n   redirect_to learners_url\n else\n   redirect_to learner_new_registrations\n end\nend\n\ndef logout\n  session[:user_id] = nil\n  redirect_to root_url\nend\n\nprivate\n\n def session_params\n  params.require(:session).permit(:email, :password)\n end\n</code></pre>\n\n<p>end</p>\n\n<p>in <code>create</code> action after setting session value it is redirecting to <code>learners_url</code>, but again it is redirecting to root url. observe the following <code>server log</code></p>\n\n<pre><code>Started POST \"/sessions\" for 127.0.0.1 at 2016-04-13 12:00:01 +0530\nProcessing by SessionsController#create as HTML\n  Parameters: {\"session\"=&gt;{\"email\"=&gt;\"narasimha@gmail.com\", \"password\"=&gt;\"[FILTERED]\"}, \"login-submit\"=&gt;\"Submit\"}\nCan't verify CSRF token authenticity\nMONGODB | localhost:27017 | project_practice_development.find | STARTED | {\"find\"=&gt;\"users\", \"filter\"=&gt;{\"email\"=&gt;\"narasimha@gmail.com\"}, \"limit\"=&gt;-1}\nMONGODB | localhost:27017 | project_practice_development.find | SUCCEEDED | 0.000360343s\nRedirected to http://localhost:3000/learners\nCompleted 302 Found in 67ms\n\n\nStarted GET \"/learners\" for 127.0.0.1 at 2016-04-13 12:00:01 +0530\nProcessing by LearnersController#index as HTML\nMONGODB | localhost:27017 | project_practice_development.find | STARTED | {\"find\"=&gt;\"users\", \"filter\"=&gt;{\"_id\"=&gt;nil}}\nMONGODB | localhost:27017 | project_practice_development.find | SUCCEEDED | 0.000387588s\nRedirected to http://localhost:3000/\nFilter chain halted as :authenticate rendered or redirected\nCompleted 302 Found in 2ms\n\n\nStarted GET \"/\" for 127.0.0.1 at 2016-04-13 12:00:01 +0530\nProcessing by WelcomesController#about as HTML\n  Rendered welcomes/about.html.erb within layouts/welcomes (0.2ms)\nCompleted 200 OK in 16ms (Views: 15.4ms)\n</code></pre>\n\n<p>It means it is redirecting to <code>LearnersController#Index</code> Action. In <code>ApplicationController</code> i have set a <code>call back</code> like this</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery\n\n  before_action :authenticate\n\n  def authenticate\n    return if signed_in?\n    redirect_to root_url\n  end\n\n  def current_user\n    @current_user ||= User.find(session[:user_id].to_s) #Problem is here. Here i am unable to access session[:user_id] which i was set in sessions controller. so it is redirecting to `root_url`\n    rescue Mongoid::Errors::DocumentNotFound =&gt; ex\n  end\n\n  def signed_in?\n    current_user.present?\n  end\n\n  helper_method :authenticate?\nend\n</code></pre>\n\n<p>Help me to solve it. why i couldn't able use <code>session[:user_id]</code> values in application controller? Thanks in advance.\nNote: I am using rails 5.0.0.beta3 version</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4877, "user_id": 2016306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s1CVD.jpg?s=128&g=1", "display_name": "Jagjot", "link": "https://stackoverflow.com/users/2016306/jagjot"}, "edited": false, "score": 1, "creation_date": 1460530795, "post_id": 36590829, "comment_id": 60779263, "body": "You need to use &#39;==&#39; not &#39;=&#39; in conditions."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1460533441, "post_id": 36590829, "comment_id": 60780902, "body": "Rather than your rather repetitive <code>if&#47;elsif&#47;else&#47;end</code> clause, consider writing <code>h=Hash.new(10); h.merge! { 1=&gt;50, 2=&gt;30 }; Stack.create(user_id: record[&#39;user_id&#39;], game_id: game_id, chips: h[record.ranking])</code>. I&#39;ve defined <code>h</code> with a default value of <code>10</code>, meaning that <code>h[k]</code> returns <code>10</code> if <code>h</code> does not have a key <code>k</code>."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1460530835, "creation_date": 1460530835, "answer_id": 36590872, "question_id": 36590829, "link": "https://stackoverflow.com/questions/36590829/using-if-elsif-in-my-rails-method-consistently-ignoring-conditions/36590872#36590872", "title": "Using if/elsif in my Rails method: consistently ignoring conditions", "body": "<pre><code>record.ranking = 1\n</code></pre>\n\n<p>is an assignment, not comparing.</p>\n\n<p>To compare <code>record.ranking</code> against 1, you should use <code>==</code>:</p>\n\n<pre><code>record.ranking == 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 1, "last_activity_date": 1460530845, "creation_date": 1460530845, "answer_id": 36590874, "question_id": 36590829, "link": "https://stackoverflow.com/questions/36590829/using-if-elsif-in-my-rails-method-consistently-ignoring-conditions/36590874#36590874", "title": "Using if/elsif in my Rails method: consistently ignoring conditions", "body": "<p>You are doing an assignement of your records ranking, but your intension is to compare the ranking in the if statement.</p>\n\n<p>Change</p>\n\n<pre><code>if record.ranking = 1\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if record.ranking == 1\n</code></pre>\n\n<p>and </p>\n\n<pre><code>elsif record.ranking = 2\n</code></pre>\n\n<p>to</p>\n\n<pre><code>elsif record.ranking == 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 2, "last_activity_date": 1460538501, "last_edit_date": 1460538501, "creation_date": 1460530905, "answer_id": 36590891, "question_id": 36590829, "link": "https://stackoverflow.com/questions/36590829/using-if-elsif-in-my-rails-method-consistently-ignoring-conditions/36590891#36590891", "title": "Using if/elsif in my Rails method: consistently ignoring conditions", "body": "<p>Use comparison operator <code>==</code> inplace of assignment operator <code>=</code>: </p>\n\n<pre><code>if record.ranking == 1\n  Stack.create(user_id: record['user_id'], game_id: game_id, chips: 50)\nelsif record.ranking == 2\n  Stack.create(user_id: record['user_id'], game_id: game_id, chips: 30)\nelse\n  Stack.create(user_id: record['user_id'], game_id: game_id, chips: 10)\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Adding @CarySwoveland comment to answer. </p>\n\n<p>You can avoid <code>if/else/end</code> statements using <code>hash</code>.</p>\n\n<pre><code>h = Hash.new(10) #default value of hash is 10 i.e h['xyz'] returns 10\nh.merge!(1 =&gt; 50, 2 =&gt; 30)\nStack.create(user_id: record['user_id'], game_id: game_id, chips: h[record.ranking])\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 36590891, "answer_count": 3, "score": -1, "last_activity_date": 1460538501, "creation_date": 1460530688, "question_id": 36590829, "link": "https://stackoverflow.com/questions/36590829/using-if-elsif-in-my-rails-method-consistently-ignoring-conditions", "title": "Using if/elsif in my Rails method: consistently ignoring conditions", "body": "<p>I am attempting to write a method that does two things: </p>\n\n<p>1) Checks a <strong>Ranking</strong> table, which contains <code>user_id</code> (integer), <code>game_id</code> (integer), and a <code>Ranking</code> of a competitor (integer), and </p>\n\n<p>2) Using that ranking, updates another table called <code>Stack</code> with a number of <code>Chips</code> while recording <code>game_id</code> and <code>user_id</code>. </p>\n\n<p>To test this, I am creating a records variable and then using an if/else to give a certain number of chips if a user ranks first (\"1\"). </p>\n\n<p><strong>ExampleModel.rb</strong></p>\n\n<pre><code>  def self.update_wallet(game_id)\n    records = Ranking.where(game_id: game_id)\n\n    records.each do |record|\n      puts record.inspect\n      puts record['user_id']\n    if record.ranking = 1\n      Stack.create(user_id: record['user_id'], game_id: game_id, chips: 50)\n    elsif record.ranking = 2\n      Stack.create(user_id: record['user_id'], game_id: game_id, chips: 30)\n    else\n      Stack.create(user_id: record['user_id'], game_id: game_id, chips: 10)\n    end\n  end\n  end \n</code></pre>\n\n<p>In the console, the output is that it does create records for all three Rankings in the Stack table, but it is logging <code>Chips</code> as \"50\" (matching the first condition) even though there are three different Rankings in the array. </p>\n\n<p>For my test, I am using the following data from the <code>Rankings</code> table. </p>\n\n<p><code>&lt;ActiveRecord::Relation [#&lt;Ranking id: 153, game_id: 1, user_id: 1, ranking: 1, game_time: nil&gt;, #&lt;Ranking id: 154, game_id: 1, user_id: 2, ranking: 2, game_time: nil&gt;, #&lt;Ranking id: 155, game_id: 1, user_id: 3, ranking: 3, game_time: nil&gt;</code></p>\n\n<p>Nonetheless, after running <code>Example.update_wallet(1)</code> in the console, it created three records matching Condition 1: </p>\n\n<p><code>&lt;Stack id: 75, game_id: 1, user_id: 1, chips: 50&gt;, #&lt;Stack id: 76, game_id: 1, user_id: 2, chips: 50&gt;, #&lt;Stack id: 77, game_id: 1, user_id: 3, chips: 50&gt;, #&lt;Stack id: 78, game_id: 1, user_id: 1, chips: 50&gt;, #&lt;Stack id: 79, game_id: 1, user_id: 2, chips: 50&gt;, #&lt;Stack id: 80, game_id: 1, user_id: 3, chips: 50&gt;</code></p>\n\n<p>Where am I going wrong? </p>\n"}, {"tags": ["ruby", "git", "github"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 3495236, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e01c5b0b2f88800c006dbc62e8d6fe26?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3495236/jas"}, "edited": false, "score": 0, "creation_date": 1460532759, "post_id": 36590936, "comment_id": 60780442, "body": "i am using an authenticated user and i do have http:// in my url, i had just changed the real url. the error I get while authenticated is that the repo doesnt exist. I updated my example to be more clear"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 370, "user_id": 3495236, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e01c5b0b2f88800c006dbc62e8d6fe26?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3495236/jas"}, "edited": false, "score": 0, "creation_date": 1460533797, "post_id": 36590936, "comment_id": 60781123, "body": "@jas did you try with other public repos? Or with a public repo that you have created?"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 0, "last_activity_date": 1460531039, "creation_date": 1460531039, "answer_id": 36590936, "question_id": 36590618, "link": "https://stackoverflow.com/questions/36590618/can-you-add-a-webhook-notification-with-github-on-public-repos/36590936#36590936", "title": "can you add a webhook notification with github on public repos?", "body": "<p>You should be able to create a hook on a public repo, but <a href=\"https://github.com/octokit/octokit.rb/blob/719483524b930146580a997284fdd9719a5b0cdf/lib/octokit/client/hooks.rb#L44-L46\" rel=\"nofollow\">the code</a> does mention:</p>\n\n<pre><code>  # Create a hook\n  #\n  # Requires authenticated client.\n</code></pre>\n\n<p>So make sure you are authenticated <em>before</em> calling that method.</p>\n\n<p>Also, the same code mention as an example a config</p>\n\n<pre><code>  #     {\n  #       :url =&gt; 'http://something.com/webhook',\n  #       :content_type =&gt; 'json'\n  #     },\n</code></pre>\n\n<p>In your case, maybe <code>testsite.com/github_webhook_event_handler</code> should be <code>http://testsite.com/github_webhook_event_handler</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6833, "user_id": 4398050, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-AgrMk4aAiaQ/AAAAAAAAAAI/AAAAAAAAAp8/TNowIX0T3CY/photo.jpg?sz=128", "display_name": "pedrorijo91", "link": "https://stackoverflow.com/users/4398050/pedrorijo91"}, "is_accepted": false, "score": 0, "last_activity_date": 1460535569, "creation_date": 1460535569, "answer_id": 36592516, "question_id": 36590618, "link": "https://stackoverflow.com/questions/36590618/can-you-add-a-webhook-notification-with-github-on-public-repos/36592516#36592516", "title": "can you add a webhook notification with github on public repos?", "body": "<p>At least using the github UI, you can't add webhooks for public projects if you don't have write/admin access. I assume the same will happen using the API</p>\n"}], "owner": {"reputation": 370, "user_id": 3495236, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e01c5b0b2f88800c006dbc62e8d6fe26?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3495236/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1460535569, "creation_date": 1460530064, "last_edit_date": 1460532810, "question_id": 36590618, "link": "https://stackoverflow.com/questions/36590618/can-you-add-a-webhook-notification-with-github-on-public-repos", "title": "can you add a webhook notification with github on public repos?", "body": "<p>I'm using octokit for ruby to try and create webhook notifications for public repos.  I can't tell from the docs if this is possible or not, here are the docs I reference: <a href=\"https://developer.github.com/v3/repos/hooks/#create-a-hook\" rel=\"nofollow\">https://developer.github.com/v3/repos/hooks/#create-a-hook</a>\nare webhooks only allowed to be created for projects you are a part of? I want to be notified of certain public repos on github programatically.\n I try to create a webhook with this code and get 404 :</p>\n\n<pre><code>github_client = Octokit::Client.new(:access_token =&gt; github_access_key)\ngithub_client.create_hook(\n  'github/ghfw-build-extra',\n  'web',\n  {\n    :url =&gt; \"http://testsite.com/github_webhook_event_handler\",\n    :content_type =&gt; 'json',\n    :insecure_url =&gt; '1'\n  },\n  {\n    :events =&gt; ['push'],\n    :active =&gt; true\n  }\n)\n</code></pre>\n\n<p>the error I get is:</p>\n\n<p>Octokit::NotFound: POST <a href=\"https://api.github.com/repos/github/ghfw-build-extra/hooks\" rel=\"nofollow\">https://api.github.com/repos/github/ghfw-build-extra/hooks</a>: 404 - Not Found // See: <a href=\"https://developer.github.com/v3\" rel=\"nofollow\">https://developer.github.com/v3</a>\nfrom /Users/bboy/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/octokit-4.2.0/lib/octokit/response/raise_error.rb:16:in `on_complete'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "devkit"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 1552815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/001e86e376bbef5049ee5d1f1185e619?s=128&d=identicon&r=PG", "display_name": "khoamle", "link": "https://stackoverflow.com/users/1552815/khoamle"}, "edited": false, "score": 0, "creation_date": 1460612548, "post_id": 36596899, "comment_id": 60825905, "body": "Wow. solved it with <code>gem install --verbose json -v 1.8.3</code>"}], "tags": [], "owner": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "is_accepted": true, "score": 2, "last_activity_date": 1460546710, "creation_date": 1460546710, "answer_id": 36596899, "question_id": 36589917, "link": "https://stackoverflow.com/questions/36589917/gem-install-json-platform-ruby-failed-windows-7-64-bit/36596899#36596899", "title": "gem install json --platform=ruby failed windows 7 64 bit", "body": "<p>Check are you getting the proper ruby version in the file after doing <em>ruby dk.rb init</em>, if not specify the proper ruby version as in the program files, then try to run <em>ruby dk.rb install</em>, once this is done devkit is installed and you can install the required gem.</p>\n"}], "owner": {"reputation": 478, "user_id": 1552815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/001e86e376bbef5049ee5d1f1185e619?s=128&d=identicon&r=PG", "display_name": "khoamle", "link": "https://stackoverflow.com/users/1552815/khoamle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 36596899, "answer_count": 1, "score": 0, "last_activity_date": 1460546710, "creation_date": 1460527581, "question_id": 36589917, "link": "https://stackoverflow.com/questions/36589917/gem-install-json-platform-ruby-failed-windows-7-64-bit", "title": "gem install json --platform=ruby failed windows 7 64 bit", "body": "<p>I'm following the DevKit to get json gem to install. However it has not worked for me. This has been preventing me to do <code>bundle install</code>. Computer is Win 7 64 bit. Commands for <code>ruby dk.rb init</code> and <code>ruby dk.rb install</code> passed.</p>\n\n<pre><code>ruby 2.1.8p440 (2015-12-16 revision 53160) [x64-mingw32]\nRails 4.2.6\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>&gt;gem install json --platform=ruby\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nThe system cannot find the path specified.\nERROR:  Error installing json:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/ruby/lib/ruby/gems/2.1.0/gems/json-1.8.3/ext/json/ext/\ngenerator\nC:/ruby/bin/ruby.exe -r ./siteconf20160413-5616-jod3h4.rb extconf.rb\ncreating Makefile\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/ruby/lib/ruby/gems/2.1.0/gems/json-1.8.3 f\nor inspection.\nResults logged to C:/ruby/lib/ruby/gems/2.1.0/extensions/x64-mingw32/2.1.0/json-\n1.8.3/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "edited": false, "score": 0, "creation_date": 1460525808, "post_id": 36589405, "comment_id": 60776765, "body": "<a href=\"http://rubular.com/r/2qsM4tdr2Z\" rel=\"nofollow noreferrer\">rubular.com/r/2qsM4tdr2Z</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1460526001, "post_id": 36589405, "comment_id": 60776848, "body": "<code>output = text[&#47;alpha-beta&#47;]</code> is the solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1460527790, "post_id": 36589405, "comment_id": 60777660, "body": "There&#39;s no point to extracting &quot;alpha-beta&quot; if you know that substring is present. Do you want to determine if it is present, or are &quot;alpha&quot; and &quot;beta&quot; stand-ins for words generally? For this question to make sense you need to define the pattern you wish to apply. You can&#39;t do that with an example. You could say, for example, that you want to extract the first string that contains two words, comprised of lowercase letters, that are separated by a hyphen. That may not be what you want but it should give you an idea of what&#39;s needed."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1460526289, "creation_date": 1460526289, "answer_id": 36589574, "question_id": 36589405, "link": "https://stackoverflow.com/questions/36589405/regular-expression-in-ruby-2-1-5/36589574#36589574", "title": "Regular expression in ruby 2.1.5", "body": "<p>With the information we have i'd propose:</p>\n\n<pre><code>output = \"alpha-beta-1.0.txt\".match(/(.*-.*)-.*/)[1]\n</code></pre>\n\n<p><code>.*</code> matches a lot though. So perhaps you need a more restrictive match.</p>\n"}, {"comments": [{"owner": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460526716, "post_id": 36589582, "comment_id": 60777171, "body": "Thanks @rock321987. Also, It seems I can apply @pascal&#39;s match expression as well: <code>output1 = &quot;alpha-beta-1.0.txt&quot;.match(&#47;(^.*)-(?:.*$)&#47;)[1]</code> Any reason to use scan vs match ?"}, {"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "reply_to_user": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460526908, "post_id": 36589582, "comment_id": 60777266, "body": "@Jason You can use any of <code>scan</code> or <code>match</code>..<code>scan</code> returns all the match while <code>match</code> returns only the first match"}, {"owner": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460526972, "post_id": 36589582, "comment_id": 60777291, "body": "Thanks a ton for your feedback."}, {"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "reply_to_user": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460526973, "post_id": 36589582, "comment_id": 60777293, "body": "@Jason Here is a good explanation :- <a href=\"http://stackoverflow.com/questions/10291415/ruby-regex-scan-versus\" title=\"ruby regex scan versus\">stackoverflow.com/questions/10291415/ruby-regex-scan-versus</a>"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1460527073, "post_id": 36589582, "comment_id": 60777332, "body": "KISS, <code>str.match(&#47;.*(?=-)&#47;)</code>"}, {"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "reply_to_user": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460527122, "post_id": 36589582, "comment_id": 60777352, "body": "@Jason A good comparison here :- <a href=\"http://stackoverflow.com/questions/7993662/whats-the-difference-between-scan-and-match-on-ruby-string\" title=\"whats the difference between scan and match on ruby string\">stackoverflow.com/questions/7993662/&hellip;</a>"}, {"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1460527501, "post_id": 36589582, "comment_id": 60777533, "body": "@AvinashRaj your <a href=\"http://askubuntu.com/a/381560/329001\">askubuntu.com/a/381560/329001</a> answer saved my <code>a**</code> yesterday"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1460527688, "post_id": 36589582, "comment_id": 60777608, "body": "credit goes to the PPA owner :-)."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1460531780, "post_id": 36589582, "comment_id": 60779790, "body": "I&#39;d recommend <code>str[&#47;\\A.*(?=-)&#47;m]</code>."}], "tags": [], "owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "is_accepted": false, "score": 1, "last_activity_date": 1460527369, "last_edit_date": 1460527369, "creation_date": 1460526336, "answer_id": 36589582, "question_id": 36589405, "link": "https://stackoverflow.com/questions/36589405/regular-expression-in-ruby-2-1-5/36589582#36589582", "title": "Regular expression in ruby 2.1.5", "body": "<p>If you want to extract just before last <code>-</code>, you can use this regex</p>\n\n<pre><code>(^.*)-(?:.*$)\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/2qsM4tdr2Z\" rel=\"nofollow\"><strong>Rubular Demo</strong></a></p>\n\n<p>For finding all non-overlapping matches, you can use <code>scan</code> as</p>\n\n<pre><code>str = \"alpha-beta-1.0.txt\"\nprint str.scan(/(^.*)-(?:.*$)/)[0][0]\n</code></pre>\n\n<p><strong><a href=\"http://ideone.com/Ly4ypm\" rel=\"nofollow\">Ideone Demo</a></strong></p>\n\n<p>You can also use <code>lookahead</code> as</p>\n\n<pre><code>.*(?=-)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460530669, "post_id": 36589952, "comment_id": 60779188, "body": "Good point. Alternatively, <code>string[0...string.rindex(&#39;-&#39;)]</code>."}, {"owner": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460573600, "post_id": 36589952, "comment_id": 60811123, "body": "@7stud One of the question that always comes to my mind is what if the text=&quot;alpha-beta-1.0-SNAPSHOT.txt&quot; ?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "edited": false, "score": 0, "creation_date": 1460577369, "post_id": 36589952, "comment_id": 60813442, "body": "@Jason, Read Cary Swoveland&#39;s comment under your post.  Is there always a number after the part you want?  There has to be some pattern--if the file names are just random, then there is no way to get the part you want every time."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 3, "last_activity_date": 1460529106, "last_edit_date": 1460529106, "creation_date": 1460527709, "answer_id": 36589952, "question_id": 36589405, "link": "https://stackoverflow.com/questions/36589405/regular-expression-in-ruby-2-1-5/36589952#36589952", "title": "Regular expression in ruby 2.1.5", "body": "<blockquote>\n  <p>If you have a computer programming problem, and you think, \"I'll use a\n  regex!\", now you have two problems.</p>\n</blockquote>\n\n<p>Here it is without a regex:</p>\n\n<pre><code>strings = [\n  \"alpha-beta-1.0.txt\",\n  \"alpha-beta-theta-2.0.txt\",\n  \"alpha-3.0.text\",\n]\n\nstrings.each do |string|\n  output = string.rpartition('-')[0]\n  puts output\nend\n\n--output:--\nalpha-beta\nalpha-beta-theta\nalpha\n</code></pre>\n"}], "owner": {"reputation": 1712, "user_id": 2194137, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/b7a39cc3a9fd0fe633f22da43c2cf25b?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2194137/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1461650079, "answer_count": 3, "score": 0, "last_activity_date": 1460530931, "creation_date": 1460525591, "last_edit_date": 1460530931, "question_id": 36589405, "link": "https://stackoverflow.com/questions/36589405/regular-expression-in-ruby-2-1-5", "closed_reason": "Needs details or clarity", "title": "Regular expression in ruby 2.1.5", "body": "<p>I want to extract <code>alpha-beta</code> from:</p>\n\n<pre><code>text = \"alpha-beta-1.0.txt\"\n</code></pre>\n\n<p>to get:</p>\n\n<pre><code>output = \"alpha-beta\"\n</code></pre>\n\n<p>Can somebody here help me with a regex?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "google-cloud-storage"], "answers": [{"comments": [{"owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "edited": false, "score": 0, "creation_date": 1460525167, "post_id": 36589230, "comment_id": 60776446, "body": "Thanks Harry, i&#39;ll give that a try."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "edited": false, "score": 0, "creation_date": 1460525225, "post_id": 36589230, "comment_id": 60776474, "body": "Your Ruby is likely better than mine. You need to write the contents of <code>page</code> to a file and that&#39;s it you have not decompressed the response from the API."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1460524876, "creation_date": 1460524876, "answer_id": 36589230, "question_id": 36589088, "link": "https://stackoverflow.com/questions/36589088/gzipped-json-response-to-file/36589230#36589230", "title": "Gzipped JSON response to file?", "body": "<p>The following shows you what actually happens when you use \"Accept-Encoding\" and set it to gzip. If the accept header is set to gzip the body of the response is the actual compressed data and you could pipe it to <code>gunzip</code>, example follows.</p>\n\n<p>I got this from here....</p>\n\n<p><a href=\"https://gist.github.com/joho/3747653\" rel=\"nofollow\">https://gist.github.com/joho/3747653</a></p>\n\n<p>When you run it run it like this</p>\n\n<pre><code>ruby http_gzip.rb | gunzip -c\n</code></pre>\n\n<p>This will download the gzipped google search result...</p>\n\n<pre><code>require 'net/http'\n\ndebug = Proc.new{|msg| STDERR.puts \"[#{Time.now.strftime('%Y-%m-%d %H:%M:%S')}] #{msg}\" }\n\npage = nil \nhttp = Net::HTTP.new( \"www.google.com\", 80 )\nreq = Net::HTTP::Get.new( \"/search?num=20&amp;hl=en&amp;noj=1&amp;q=accept-encoding&amp;btnG=Search\", { \"Accept-Encoding\" =&gt; \"gzip\", \"User-Agent\" =&gt; \"gzip\" } )debug.call( \"Performing HTTP GET request for (#{req.path}).\" )\nres = http.request( req )      \ndebug.call( \"Received HTTP Response Code (#{res.code})\" )\ncase res\n  when Net::HTTPSuccess then\n    begin\n      if res.header[ 'Content-Encoding' ].eql?( 'gzip' ) then\n        debug.call( \"Performing gzip decompression for response body.\" )\n        #sio = StringIO.new( res.body )\n        #gz = Zlib::GzipReader.new( sio )\n        #page = gz.read() \n        page = res.body     \n        debug.call( \"Finished decompressing gzipped response body.\" )\n      else  \n        debug.call( \"Page is not compressed. Using text response body. \" )\n        page = res.body \n      end   \n    rescue Exception\n      debug.call( \"Error occurred (#{$!.message})\" )\n      # handle errors \n      raise $!.message\n    end   \nend\n\nputs page\n</code></pre>\n"}], "owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 611, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483738643, "creation_date": 1460524177, "question_id": 36589088, "link": "https://stackoverflow.com/questions/36589088/gzipped-json-response-to-file", "title": "Gzipped JSON response to file?", "body": "<p>Does anyone have a working example of taking a gzipped JSON response from and API endpoint and saving it directly to a file please? </p>\n\n<p>Having issues with Heroku's memory limits when I decompress a very large API response before writing to a file. It would be good to completely bypass decompression as all I want to do is take the response as given and upload as a file to Google Cloud Storage.</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT: I should add that the data is only available via POST so using open-uri doesn't seem to be an option.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460524293, "post_id": 36589078, "comment_id": 60776127, "body": "use scope in model"}, {"owner": {"reputation": 11, "user_id": 5245584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zivZ64LiOM4/AAAAAAAAAAI/AAAAAAAAC1Q/BxbPkMZIK4w/photo.jpg?sz=128", "display_name": "Srikant Sahoo", "link": "https://stackoverflow.com/users/5245584/srikant-sahoo"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1460524717, "post_id": 36589078, "comment_id": 60776264, "body": "I have json like table which store different kind of product information and I need to query the data by using different set of clause for different products. As we have dynamic form to create different types products we need to retrieve  product information with different clause based on requirement. So scope won&#39;t help here."}, {"owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "edited": false, "score": 0, "creation_date": 1460525609, "post_id": 36589078, "comment_id": 60776667, "body": "You are going to have really hard time trying to accomplish that, why not think it over? You could store the parameters you need to query and build them dynamically but you just can&#39;t store code and then try to execute it, the closest you can do is use send method."}, {"owner": {"reputation": 11, "user_id": 5245584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zivZ64LiOM4/AAAAAAAAAAI/AAAAAAAAC1Q/BxbPkMZIK4w/photo.jpg?sz=128", "display_name": "Srikant Sahoo", "link": "https://stackoverflow.com/users/5245584/srikant-sahoo"}, "edited": false, "score": 0, "creation_date": 1460534947, "post_id": 36589078, "comment_id": 60781863, "body": "Good point @Rubio , I will go with dynamic query build. Thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": false, "score": 1, "last_activity_date": 1460526800, "last_edit_date": 1460526800, "creation_date": 1460525868, "answer_id": 36589477, "question_id": 36589078, "link": "https://stackoverflow.com/questions/36589078/ruby-on-rails-how-can-we-execute-activerecord-query-stored-in-database/36589477#36589477", "title": "Ruby on Rails: how can we execute activerecord query stored in database?", "body": "<p>Your approach seems <strong>very insecure</strong> (unless you have absolute, total control of the queries in the db) and <strong>not very maintainable</strong> in the long run (e.g. a change in the db structure invalidates all queries that use it and you'd need to check all of them if they are still ok). </p>\n\n<p>So, I would not do that, but if you insist, you can use <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-class_eval\" rel=\"nofollow\"><code>class_eval</code></a> on the model class:</p>\n\n<pre><code>Model.class_eval('select(\"clause\").where(id: permitted_params[:id]).group(\"date(transaction_date)')\n</code></pre>\n\n<p>is equivalent to:    </p>\n\n<pre><code>Model.select(\"clause\").where(id: permitted_params[:id]).group(\"date(transaction_date)\")\n</code></pre>\n\n<p>But still, I'd vote against this approach: you say you need to query different types of products. There usually is a way to abstract such info into a few attributes and perhaps some join tables. Something like: a product can have many features and each feature has a name, type, etc... This would be the way to go for me. The long-term advantage is also that you would be building a detailed description of the product in your code / db which may come handy for various purposes later.</p>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1460530102, "creation_date": 1460530102, "answer_id": 36590627, "question_id": 36589078, "link": "https://stackoverflow.com/questions/36589078/ruby-on-rails-how-can-we-execute-activerecord-query-stored-in-database/36590627#36590627", "title": "Ruby on Rails: how can we execute activerecord query stored in database?", "body": "<p>As already has been pointed out: this is insecure and not practical when you have DB updates.</p>\n\n<p>An easy way to execute raw SQL and have the result already converted to models is <code>find_by_sql</code>:</p>\n\n<pre><code>Model.find_by_sql('select * from models where some complicated nasty SQL goes here')\n</code></pre>\n\n<p>Now if you provide the query and the user provides the arguments to that query, then this might be a bit different. \nI'd probably create a class per query and store all parameters (that have been provided by the user) as well as what query is to be executed in the DB and then construct the query at runtime. Something along those lines:</p>\n\n<pre><code>class QueryA\n  def initialize(params)\n   @params = params\n  end\n\n  def call\n    SomeModel.select(clause).where(permitted_ids: permitted_ids)\n  end\n\n  private\n  def clause\n    params[:clause].presence_in(%w{first_valid_value second_valid_value ...})\n  end\n  def permitted_ids\n    # access from params and whitelist\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5245584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zivZ64LiOM4/AAAAAAAAAAI/AAAAAAAAC1Q/BxbPkMZIK4w/photo.jpg?sz=128", "display_name": "Srikant Sahoo", "link": "https://stackoverflow.com/users/5245584/srikant-sahoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1460530102, "creation_date": 1460524112, "last_edit_date": 1460525861, "question_id": 36589078, "link": "https://stackoverflow.com/questions/36589078/ruby-on-rails-how-can-we-execute-activerecord-query-stored-in-database", "title": "Ruby on Rails: how can we execute activerecord query stored in database?", "body": "<p>I have formula table which store the formula for retrieving the data, like below.</p>\n\n<pre><code>'select(\"clause\").where(id: permitted_params[:id]).group(\"date(transaction_date)\")'\n</code></pre>\n\n<p>How can I use above query string with ActiveRecord and generate the data.</p>\n\n<pre><code>Model.(above query string)\n</code></pre>\n\n<p>should produce below  </p>\n\n<pre><code>Model.select(\"clause\").where(id: permitted_params[:id]).group(\"date(transaction_date)\")\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1460517985, "post_id": 36587762, "comment_id": 60774333, "body": "There are other ways too, but that way is perfectly acceptable and it&#39;s concise and would be used most often."}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1460518091, "post_id": 36587782, "comment_id": 60774365, "body": "Oooh! I like zip()!  That&#39;s the kind of Ruby magic I was wondering about. :-)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 1, "creation_date": 1460518225, "post_id": 36587782, "comment_id": 60774399, "body": "@Dan, it won&#39;t be long before you see <code>zip</code> as pretty pedestrian."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1460521735, "post_id": 36587782, "comment_id": 60775284, "body": "Once you have <code>h = Hash.new { |h,k| h[k] = k } =&gt; {}</code> you can write <code>h.values_at(*foo) #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</code> which results in <code>h  #=&gt; {&quot;a&quot;=&gt;&quot;a&quot;, &quot;b&quot;=&gt;&quot;b&quot;, &quot;c&quot;=&gt;&quot;c&quot;, &quot;d&quot;=&gt;&quot;d&quot;, &quot;e&quot;=&gt;&quot;e&quot;}</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1460516495, "creation_date": 1460516495, "answer_id": 36587782, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values/36587782#36587782", "title": "Turn an array into a hash with keys matching values", "body": "<p>Do you need a hash with <em>just</em> those values, or would a hash with a self-default be fine?</p>\n\n<p>For example:</p>\n\n<pre><code>Hash.new { |h,k| h[k] = k }\n</code></pre>\n\n<p>You can also do this and combine it with itself into pairs:</p>\n\n<pre><code>Hash[foo.zip(foo)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1460517960, "post_id": 36587825, "comment_id": 60774324, "body": "I suggest you get rid of the pesky <code>;h</code> by writing <code>foo.each_with_object({}) { |e,h| h[e]=e }</code>. Either way, it has the advantage that, unlike <code>zip</code> then <code>Hash[]</code> or <code>to_h</code>, no intermediate array is constructed."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1460518067, "post_id": 36587825, "comment_id": 60774357, "body": "Agreed. <code>each_with_object</code> is preferable to <code>inject</code> in this case, actually in a lot of cases, because it doesn&#39;t require the trailing <code>;h</code>."}], "tags": [], "owner": {"reputation": 2045, "user_id": 2293145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OM60n.jpg?s=128&g=1", "display_name": "evedovelli", "link": "https://stackoverflow.com/users/2293145/evedovelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1460545709, "last_edit_date": 1460545709, "creation_date": 1460516745, "answer_id": 36587825, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values/36587825#36587825", "title": "Turn an array into a hash with keys matching values", "body": "<p>This is another way of doing it:</p>\n\n<pre><code>foo = ['a', 'b', 'c', 'd', 'e']\nfoo.inject({}){ |h,k| h[k] = k; h }\n</code></pre>\n\n<p>As suggested on comments, a better variations of this answer uses the <code>each_with_object</code>, so it gets rid off the trailing <code>; h</code>:</p>\n\n<pre><code>foo.each_with_object({}) { |e,h| h[e]=e }\n</code></pre>\n\n<p>The advantage of either is that no intermediate array is constructed. </p>\n\n<p>But the way you mentioned will work just fine:</p>\n\n<pre><code>Hash[foo.map{|a| [a, a]}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1460517871, "post_id": 36587965, "comment_id": 60774294, "body": "@CarySwoveland You were faster. Please undelete your answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460518134, "post_id": 36587965, "comment_id": 60774375, "body": "It was too close to evedovelli&#39;s, so I left a comment instead."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1460518138, "post_id": 36587965, "comment_id": 60774376, "body": "It&#39;s a weird use-case. I define a bunch of languages and I&#39;m building a default translation table. So if I have languages as: [&#39;en&#39;, &#39;fr&#39;, &#39;de&#39;, &#39;ru&#39;] I want to easily build out the initial translation hash: { &#39;en&#39; =&gt; &#39;en&#39;, &#39;fr&#39; =&gt; &#39;fr&#39;, &#39;de&#39; =&gt; &#39;de&#39;, &#39;ru&#39; =&gt; &#39;ru&#39; }. That&#39;s why I was asking. (note, the algorithm then goes through some other data and adjusts the translation table, but the X =&gt; X default makes it easier, in my specific use case)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1460517812, "creation_date": 1460517812, "answer_id": 36587965, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values/36587965#36587965", "title": "Turn an array into a hash with keys matching values", "body": "<p>Your issue does not make sense. I suspect it is an XY-problem. If you actually don't need to store the key-values in the hash, but just need to return the key back, then:</p>\n\n<pre><code>h = Hash.new{|_, k| k}\nh[\"a\"] # =&gt; \"a\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 5, "last_activity_date": 1460518613, "creation_date": 1460518613, "answer_id": 36588089, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values/36588089#36588089", "title": "Turn an array into a hash with keys matching values", "body": "<pre><code>foo = ['a', 'b', 'c', 'd', 'e']\n\n[foo, foo].transpose.to_h\n#=&gt; {\"a\"=&gt;\"a\", \"b\"=&gt;\"b\", \"c\"=&gt;\"c\", \"d\"=&gt;\"d\", \"e\"=&gt;\"e\"}\n\nfoo.zip(foo).to_h\n#=&gt; {\"a\"=&gt;\"a\", \"b\"=&gt;\"b\", \"c\"=&gt;\"c\", \"d\"=&gt;\"d\", \"e\"=&gt;\"e\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "is_accepted": false, "score": 0, "last_activity_date": 1460523385, "creation_date": 1460523385, "answer_id": 36588913, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values/36588913#36588913", "title": "Turn an array into a hash with keys matching values", "body": "<p>I would try this:</p>\n\n<pre><code>foo  = ['a', 'b', 'c', 'd', 'e']\nhash = Hash[foo.zip foo]\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1460545709, "creation_date": 1460516308, "last_edit_date": 1460518144, "question_id": 36587762, "link": "https://stackoverflow.com/questions/36587762/turn-an-array-into-a-hash-with-keys-matching-values", "title": "Turn an array into a hash with keys matching values", "body": "<p>If I have the following array:</p>\n\n<pre><code>foo = ['a', 'b', 'c', 'd', 'e']\n</code></pre>\n\n<p>Is there a simple way in Ruby to make it into a hash that looks like:</p>\n\n<pre><code>{ 'a' =&gt; 'a', 'b' =&gt; 'b', 'c' =&gt; 'c', 'd' =&gt; 'd', 'e' =&gt; 'e' }\n</code></pre>\n\n<p>I can do this:</p>\n\n<pre><code>Hash[foo.map{|a| [a, a]}]\n</code></pre>\n\n<p>which works just fine, but I'm curious if there's some other way. </p>\n"}, {"tags": ["ruby", "opensuse"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1460517103, "post_id": 36587749, "comment_id": 60774056, "body": "You should not use a distribution package manager to install/update Ruby or Ruby gems. It is much better to use rvm or rbenv. <a href=\"http://rubyofftherails.blogspot.com.br/2015/10/dont-give-up-rvm.html\" rel=\"nofollow noreferrer\">rubyofftherails.blogspot.com.br/2015/10/dont-give-up-rvm.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1461638980, "post_id": 36587749, "comment_id": 61277522, "body": "Thank you for your advice."}], "owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1189, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1460516301, "creation_date": 1460516257, "question_id": 36587749, "link": "https://stackoverflow.com/questions/36587749/how-to-update-ruby-version-in-opensuse-leap-42-1-without-yast-lost", "title": "How to update ruby version in openSuse Leap 42.1 without yast lost?", "body": "<p>Recently, I did such a thing: update ruby version to 2.2 through yast and change all relative executable files to new installed ones, such as cp ruby.ruby2.2 to ruby, gem.ruby2.2 to gem, and so on. However, the sad event is that <strong>yast doesn't display its gui</strong>. In one words, yast itself destroyed itself.</p>\n"}, {"tags": ["ruby", "mashape"], "comments": [{"owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 1, "creation_date": 1460518887, "post_id": 36587695, "comment_id": 60774549, "body": "HTTP headers are supposed to be case insensitive, but just in case, can you try again with <code>X-Mashape-Key</code>?"}, {"owner": {"reputation": 1, "user_id": 5294294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924621720fa12c0e4baaa4051f79616f?s=128&d=identicon&r=PG&f=1", "display_name": "KyReeves", "link": "https://stackoverflow.com/users/5294294/kyreeves"}, "edited": false, "score": 0, "creation_date": 1479923851, "post_id": 36587695, "comment_id": 68770370, "body": "Make sure you&#39;re using the unirest gem v1.1.2"}, {"owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "edited": false, "score": 0, "creation_date": 1524784552, "post_id": 36587695, "comment_id": 87122623, "body": "ENV[&#39;MASHAPE_KEY] - Typo"}], "owner": {"reputation": 1, "user_id": 5484335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b12b8372108834cc2643e5abe92b3?s=128&d=identicon&r=PG&f=1", "display_name": "submonkey", "link": "https://stackoverflow.com/users/5484335/submonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479923851, "creation_date": 1460515940, "question_id": 36587695, "link": "https://stackoverflow.com/questions/36587695/mashape-api-key-missing-even-when-i-use-my-key", "title": "&#39; mashape api key missing&#39;, even when I use my key", "body": "<p>I am trying to build a Ruby app using the Yoda Speak api. I keep getting</p>\n\n<pre><code>{\\\"message\\\":\\\"Missing Mashape application key. Go to http:\\\\/\\\\/docs.mashape.com\\\\/api-keys to learn how to get your API application key.\\\"}\n</code></pre>\n\n<p>in my response even when I include my api key.  My code is: </p>\n\n<pre><code>url = \"https://yoda.p.mashape.com/yoda?sentence=You+will+learn+how+to+speak+like+me+someday.++Oh+wait.\"\nyoda_tweet = Unirest.get(url, headers:{\n\"X-Mashape-key\" =&gt;  ENV['MASHAPE_KEY],\n\"Accept\" =&gt; \"text/plain\"\n})\n</code></pre>\n\n<p>I've tried putting the key in directly without the ENV but it still says key missing.  Any suggestions? </p>\n"}, {"tags": ["ruby", "regex", "tokenize"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1460522899, "post_id": 36587653, "comment_id": 60775665, "body": "I deleted that comment because it&#39;s wrong. But I wonder if there are odd number  (more than 3) of pairs of backslashes before the divider, what will happen?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1460545427, "post_id": 36587653, "comment_id": 60789528, "body": "If there are three, I change the regex to <code>(?&lt;!\\\\)(\\\\\\\\)*</code> and test better."}], "answers": [{"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1460544139, "post_id": 36588784, "comment_id": 60788624, "body": "Making sure the divider is an allowed character is done elsewhere, so I&#39;m not thinking about that. Thanks! In retrospect, this probably should have been obvious."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1460523170, "last_edit_date": 1460523170, "creation_date": 1460522683, "answer_id": 36588784, "question_id": 36587653, "link": "https://stackoverflow.com/questions/36587653/stringscanner-is-matching-a-string-as-though-it-was-one-position-back/36588784#36588784", "title": "StringScanner is matching a string as though it was one position back", "body": "<p>The problem is that Ruby interpolates the regexp literal with the string <strong>as is</strong>, for example</p>\n\n<pre><code>divider = '|'\n/(?&lt;![^\\\\]\\\\)#{divider}[a-z]*/\n=&gt; /(?&lt;![^\\\\]\\\\)|[a-z]*/\n</code></pre>\n\n<p>To escape the divider, you can</p>\n\n<pre><code>divider = '|'\n/(?&lt;![^\\\\]\\\\)#{Regexp.quote divider}[a-z]*/\n=&gt; /(?&lt;![^\\\\]\\\\)\\|[a-z]*/\n</code></pre>\n\n<p>And this modification makes the code pass, but you still need to verify that a divider is a non-word character.</p>\n"}], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 36588784, "answer_count": 1, "score": 2, "last_activity_date": 1460523170, "creation_date": 1460515608, "last_edit_date": 1460516016, "question_id": 36587653, "link": "https://stackoverflow.com/questions/36587653/stringscanner-is-matching-a-string-as-though-it-was-one-position-back", "title": "StringScanner is matching a string as though it was one position back", "body": "<p>I'm trying to use a <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/strscan/rdoc/StringScanner.html\" rel=\"nofollow\"><code>StringScanner</code></a> to parse a string into tokens for processing later. All was going well until I tested the regex syntax parsing. Regexen look like this:</p>\n\n<pre><code>r|hello|gmi\nr:there|there:gmi\nr/:(?=[jedi])[sith]:/gmi\nr!hello!gmi\n</code></pre>\n\n<p>That is, <code>r</code>, followed by <code>|</code> (or a couple of other characters, but that's irrelevant right now), followed by the body of the regex -- which can include escaped characters, like <code>\\|</code> and <code>\\\\</code> -- then another <code>|</code>, and then the flags of the regex.</p>\n\n<p>To look for regex literals, I'm using code that looks an awful lot like this:</p>\n\n<pre><code>require 'strscan'\nscanner = StringScanner.new('r|abc|  ')\n\nputs \"pre-regex: #{scanner.inspect}\"\nputs \"got a char: #{scanner.getch} (res: #{scanner.inspect})\"\ndivider = scanner.getch\nputs \"got divider: #{divider.inspect}\"\nputs \"mid-regex: #{scanner.inspect}\"\n# this bit still fails even if you replace `#{divider}' with `|'\nres = scanner.scan_until(/(?&lt;![^\\\\]\\\\)#{divider}[a-z]*/)\nputs \"post-regex: #{scanner.inspect}\"\n\nif scanner.skip(/\\s+/)# || scanner.skip(/;-.*?-;/m)\n  puts \"Success! #{res}\"\nelse\n  puts \"Fail. Ended at: #{scanner.inspect}\"\n  puts \"(res was #{res.inspect})\"\nend\n</code></pre>\n\n<p><sup><a href=\"http://ideone.com/lC3wAR\" rel=\"nofollow\" title=\"Look at the output, not the return code\">Try it online at ideone</a></sup></p>\n\n<p>Here, I've trimmed it down as much as I think I can to show the problem clearly. In the real code, it's part of a much large piece of code, the vast majority of which isn't relevant. I've narrowed down the bug to this part -- you can use the link to see that it's there -- but I can't figure out why this isn't correctly scanning until the next instance of <code>|</code>, then returning the flags.</p>\n\n<p>As a side note, if there's a better way to do this, please let me know. I've found that I quite like <code>StringScanner</code>, but that might be because I'm obsessed with regexen, to the point that I call them regexen.</p>\n\n<p><strong>TL;DR</strong>: Why is <code>StringScanner</code> apparently matching as though its position was one character back, and how can I make it work right?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 3, "last_activity_date": 1460514026, "creation_date": 1460514026, "answer_id": 36587408, "question_id": 36587311, "link": "https://stackoverflow.com/questions/36587311/rspec-for-instance-variable-in-index/36587408#36587408", "title": "RSpec for instance_variable in Index", "body": "<p>you can simply check the array of users instead of active record relation</p>\n\n<pre><code>expect(assigns(:users).to_a).to eq(users.to_a)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1460532314, "post_id": 36587816, "comment_id": 60780128, "body": "The explanation isn&#39;t correct: the <code>eq</code> matcher compares using <code>==</code> not <code>equal?</code>"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 3, "last_activity_date": 1460516708, "creation_date": 1460516708, "answer_id": 36587816, "question_id": 36587311, "link": "https://stackoverflow.com/questions/36587311/rspec-for-instance-variable-in-index/36587816#36587816", "title": "RSpec for instance_variable in Index", "body": "<p>Your arrays are equivalent in value, however your spec is failing because you're comparing reference equality rather than value equality since your controller is loading users into a separate variable than your specs. </p>\n\n<p>Try comparing the values of your collection using <code>as_json</code>:</p>\n\n<pre><code>expect(assigns(:users).as_json).to eq(users.as_json)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 2, "last_activity_date": 1460532188, "creation_date": 1460532188, "answer_id": 36591325, "question_id": 36587311, "link": "https://stackoverflow.com/questions/36587311/rspec-for-instance-variable-in-index/36591325#36591325", "title": "RSpec for instance_variable in Index", "body": "<p>The output is slightly misleading. The 2 things  are not equal because they are relation objects and the <code>==</code> between two <code>ActiveRecord::Relation</code> objects works by comparing the generated sql. In your case the relations aren't equal: in the controller you are paginating and setting an order.</p>\n\n<p>Rspec tries to be helpful by showing a diff of the <code>to_s</code> output of the 2 objects, however this ends up comparing the result of the query (which are indeed the same objects) and so the only difference it finds in that string output are the object ids. This is partly luck - with no order clause the objects could have been returned in a different order. To be explicit: the diff output shown is just there to help you, it doesn't mean that that is how rspec did the comparison. </p>\n\n<p>If what you want is to compare the results of the query, then you can use <code>to_a</code> to do that:</p>\n\n<pre><code> expect(assigns(:users)).to eq(users.to_a)\n</code></pre>\n\n<p>If you don't care about order you could also do</p>\n\n<pre><code>expect(assigns(:users)).to match_array(users)\n</code></pre>\n\n<p>This is a slightly different test: it won't fail if the db decides to return results in a different, which is possible as I mentioned above.</p>\n"}], "owner": {"reputation": 69, "user_id": 4053313, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3539a8d63d847ce43067f234fd805720?s=128&d=identicon&r=PG&f=1", "display_name": "Aldrin Gravides", "link": "https://stackoverflow.com/users/4053313/aldrin-gravides"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 36591325, "answer_count": 3, "score": 3, "last_activity_date": 1460532188, "creation_date": 1460513444, "question_id": 36587311, "link": "https://stackoverflow.com/questions/36587311/rspec-for-instance-variable-in-index", "title": "RSpec for instance_variable in Index", "body": "<p>This is very easy question but I cannot find any solution for this. It has been 3 days. Please help.</p>\n\n<p>So I have this in </p>\n\n<p>users_controller.rb</p>\n\n<pre><code>def index\n  @users = @users.normal.order(:name).page params[:page]\nend\n</code></pre>\n\n<p>So I have this in my users_controller_spec.rb</p>\n\n<pre><code>it \"assign all normal users to @users\" do\n  users = User.normal.all\n  get :index\n  expect(assigns(:users)).to eq(users)\nend\n</code></pre>\n\n<p>My code is based from <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow\">https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs</a> .</p>\n\n<p>After running rspec in my terminal, this is the output.</p>\n\n<pre><code>  Diff:\n   @@ -1,4 +1,4 @@\n   -[#&lt;User:0x00000004aa32b0\n   +[#&lt;User:0x00000004a085a8\n      id: 2,\n      name: \"Christian Galamay\",\n      admin: false,\n   @@ -20,7 +20,7 @@\n      updated_at: Wed, 13 Apr 2016 01:46:17 UTC +00:00,\n      role: \"Normal\",\n      avatar: nil&gt;,\n   - #&lt;User:0x00000004aa2ea0\n   + #&lt;User:0x000000049dbd78\n      id: 3,\n      name: \"Grace Sojor\",\n      admin: false,\n   @@ -42,7 +42,7 @@\n      updated_at: Wed, 13 Apr 2016 01:46:17 UTC +00:00,\n      role: \"Normal\",\n      avatar: nil&gt;,\n   - #&lt;User:0x00000004aa2ab8\n   + #&lt;User:0x000000049db760\n      id: 4,\n      name: \"Karl Pandacan\",\n      admin: false,\n</code></pre>\n\n<p>The output says all the values are the same except with the hex after the User. So my question is (1) Why the hex after User is included in comparing the two ActiveRecord (2) Is there any method or function to use to ignore the hex in User. Thank You</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 0, "creation_date": 1460517046, "post_id": 36586955, "comment_id": 60774040, "body": "What SQL are you using? MySQL, Postgre?"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 0, "creation_date": 1460517098, "post_id": 36586955, "comment_id": 60774054, "body": "@magni- I am using Postgres"}], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1460514282, "post_id": 36587326, "comment_id": 60773398, "body": "Nope, the result seem shows no changing in order of appearance"}, {"owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1460515820, "post_id": 36587326, "comment_id": 60773763, "body": "@d3bug3r: Hmm I just modify my answer, let try again!"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1460517044, "post_id": 36587326, "comment_id": 60774039, "body": "Ok, it shows me some errors now <code>PG::SyntaxError: ERROR:  syntax error at or near &quot;ORDER&quot; LINE 1: ... &quot;products&quot;.&quot;country&quot;, &quot;products&quot;.&quot;city&quot;  ORDER BY ORDER BY </code>"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1460517126, "post_id": 36587326, "comment_id": 60774065, "body": "<code>: SELECT &quot;products&quot;.&quot;country&quot;, &quot;products&quot;.&quot;city&quot; FROM &quot;products&quot; INNER JOIN &quot;users&quot; ON &quot;users&quot;.&quot;id&quot; = &quot;products&quot;.&quot;user_id&quot; WHERE (NOT ((&quot;products&quot;.&quot;country&quot; = &#39;&#39; OR &quot;products&quot;.&quot;country&quot; IS NULL))) AND &quot;users&quot;.&quot;merchant_status&quot; = $1 GROUP BY &quot;products&quot;.&quot;country&quot;, &quot;products&quot;.&quot;city&quot;  ORDER BY ORDER BY                                     CASE WHEN country = &#39;Malaysia&#39; THEN 1                                    ELSE 2                                    END ASC</code>"}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1460515790, "last_edit_date": 1460515790, "creation_date": 1460513548, "answer_id": 36587326, "question_id": 36586955, "link": "https://stackoverflow.com/questions/36586955/ruby-on-rails-sort-on-priorities/36587326#36587326", "title": "Ruby on Rails sort on priorities", "body": "<p>You can customize you query like this:</p>\n\n<pre><code>@countries_cities = Product.joins(:user)\n                           .where.not(country: [nil, ''])\n                           .where(:users =&gt; {:merchant_status =&gt; 1})\n                           .group(:country, :city)\n                           .order(\"ORDER BY \n                                   CASE WHEN country = 'Malaysia' THEN 1\n                                   ELSE 2\n                                   END ASC\")\n                           .select(:country, :city)\n                           .as_json\n</code></pre>\n\n<p>So we set the order of Malaysia = 2, and others = 1 to ensure the result with Malaysia will be on the top.</p>\n"}, {"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1460517735, "post_id": 36587925, "comment_id": 60774254, "body": "ah, it works now!! how come set <code>country!= &#39;Malaysia&#39;</code> makes <code>Malaysia</code> in top?"}, {"owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 1, "creation_date": 1460517882, "post_id": 36587925, "comment_id": 60774301, "body": "Check out the link for a more detailed explanation, but basically: rows that have <code>country</code> as <code>Malaysia</code> will have <code>country!= &#39;Malaysia&#39;</code> evaluate to <code>false</code>, and those rows get sorted above rows where that evaluates to <code>true</code>"}], "tags": [], "owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "is_accepted": true, "score": 1, "last_activity_date": 1460517495, "last_edit_date": 1495540238, "creation_date": 1460517495, "answer_id": 36587925, "question_id": 36586955, "link": "https://stackoverflow.com/questions/36586955/ruby-on-rails-sort-on-priorities/36587925#36587925", "title": "Ruby on Rails sort on priorities", "body": "<p>How about:</p>\n\n<pre><code>@countries_cities = Product.joins(:user)\n                           .where.not(country: [nil, ''])\n                           .where(users: {merchant_status: 1})\n                           .group(:country, :city)\n                           .order(\"country!= 'Malaysia'\")\n                           .select(:country, :city)\n                           .as_json\n</code></pre>\n\n<p>In Postgres, <code>false</code> is sorted before <code>true</code> (see this answer here: <a href=\"https://stackoverflow.com/questions/4088532/custom-order-by-explanation\">Custom ORDER BY Explanation</a>)</p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 36587925, "answer_count": 2, "score": 0, "last_activity_date": 1460517495, "creation_date": 1460510912, "question_id": 36586955, "link": "https://stackoverflow.com/questions/36586955/ruby-on-rails-sort-on-priorities", "title": "Ruby on Rails sort on priorities", "body": "<p>Following were my query to get list of countries along with cities:</p>\n\n<pre><code>@countries_cities = Product.joins(:user).where(\"country is not null and country &lt;&gt; ''\").where(\"city is not null and city &lt;&gt; ''\").where(:users =&gt; {:merchant_status =&gt; 1}).group(:country, :city).select(\"country,city\").as_json\n</code></pre>\n\n<p>The output result were as follow:</p>\n\n<pre><code>Object[city:\"Bangkok\",country:\"Thailand\"],Object[city:\"Phuket\",country:\"Thailand\"],Object[city:\"Malaysia\",country:\"Kuala Lumpur\"],Object[city:\"Malaysia\",country:\"Penang\"],Object[city:\"Shanghai\",country:\"China\"],Object[city:\"Beijing\",country:\"China\"]\n\ncchs = @countries_cities.group_by{|cc| cc[\"country\"]}\n@search_location_country = cchs\n</code></pre>\n\n<p>And the view is:</p>\n\n<pre><code>    &lt;ul id=\"color-dropdown-menu\" class=\"dropdown-menu dropdown-menu-right\" role=\"menu\"&gt;\n      &lt;% @search_location_country.each do |country, cities| %&gt;\n        &lt;li class=\"input\" style=\"background:#ECECEC; \"&gt;&lt;a href=\"#\" style=\"font-weight: bold;\"&gt;&lt;%= country.upcase %&gt;&lt;/a&gt;&lt;/li&gt;\n                &lt;%  cities.each do |city| %&gt;\n        &lt;li class=\"input\"&gt;&lt;a href=\"#\"&gt;&lt;%= city[\"city\"].titleize %&gt;&lt;/a&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n   &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Now the Drop down result follow this pattern:</p>\n\n<pre><code>Thailand\n  -Bangkok\n  -Phuket\nMalaysia\n  -Kuala Lumpur\n  -Penang\nChina\n  -Beijing\n  -Shanghai\n</code></pre>\n\n<p>How can I ensure that <code>Malaysia</code> will always place at the top of the drop down lists? Thanks!!</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-4-2-1"], "comments": [{"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 1, "creation_date": 1460509721, "post_id": 36586514, "comment_id": 60772205, "body": "can you also post your view file and model relationships here?"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1460510698, "post_id": 36586514, "comment_id": 60772484, "body": "is cpf just a column of people table?"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1460511887, "post_id": 36586514, "comment_id": 60772798, "body": "can you post your schema here? the model relationship is hard to guess"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "reply_to_user": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1460513251, "post_id": 36586514, "comment_id": 60773158, "body": "cpf is just a column people table"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "reply_to_user": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1460513288, "post_id": 36586514, "comment_id": 60773165, "body": "I just want .where something instead of .all"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "reply_to_user": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1460513355, "post_id": 36586514, "comment_id": 60773173, "body": "@ZhiliangTakutoXing I make better, take a look this example on git: <a href=\"https://github.com/eltonsantos/playing_checkboxes\" rel=\"nofollow noreferrer\">github.com/eltonsantos/playing_checkboxes</a>"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 1, "creation_date": 1460517255, "post_id": 36586514, "comment_id": 60774106, "body": "unless i understand your intention wrong, for example one <code>employee</code> can have many <code>people</code>, otherwise you don&#39;t need the scope method in <code>Authorization</code> because unless one employee can have different people, their authorizations will all have the same <code>cpf</code>, therefore it&#39;s useless to filter authorizations using <code>cpf</code>"}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460519167, "post_id": 36587873, "comment_id": 60774615, "body": "Get a error, I make equal you did... Association named &#39;authorizations&#39; was not found on Employee; perhaps you misspelled it?"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 1, "creation_date": 1460519551, "post_id": 36587873, "comment_id": 60774709, "body": "in your <code>Employee</code> model, add <code>has_many :authorizations</code>, you have <code>belongs_to :employee</code> in you <code>Authorization</code> model. I think you missed it"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460519578, "post_id": 36587873, "comment_id": 60774718, "body": "Yes, employee can have only one person which contains cpf. Authorization belongs to employee and employee has many refinancings... A employee has many register (but register is only a column)"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460519945, "post_id": 36587873, "comment_id": 60774824, "body": "Dammm, when I click on button bronken next view ... undefined method `person&#39; for #&lt;Employee::ActiveRecord_Relation:0x007fe4a2f323c8&gt;"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460520092, "post_id": 36587873, "comment_id": 60774861, "body": "how come, I think you have <code>belongs_to :person</code> in <code>Employee</code> model"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460520637, "post_id": 36587873, "comment_id": 60774991, "body": "wait, it is <code>&lt;Employee::ActiveRecord_Relation:0x007fe4a2f323c8&gt;</code>? then it is wrong, this is a collection like an array,  you cannot call <code>person</code> on it"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460520727, "post_id": 36587873, "comment_id": 60775015, "body": "the solution that i think is put @employee.first.person.name... but it too is wrong"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460521086, "post_id": 36587873, "comment_id": 60775098, "body": "Hey &lt;%= @employee.first.person.name %&gt; solve my problem, but I can do it?"}, {"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1460521451, "post_id": 36587873, "comment_id": 60775196, "body": "The method is new and is here: <a href=\"https://github.com/eltonsantos/playing_checkboxes/blob/master/app/controllers/refinancings_controller.rb\" rel=\"nofollow noreferrer\">github.com/eltonsantos/playing_checkboxes/blob/master/app/&hellip;</a> - @employee is the same employee of before view."}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 1, "creation_date": 1460521682, "post_id": 36587873, "comment_id": 60775265, "body": "it is not ok unfortunately , coz from your graph, cpf is not unique in <code>Person</code> Model."}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 1, "creation_date": 1460521765, "post_id": 36587873, "comment_id": 60775295, "body": "try to describe your logic in <code>new</code> action, which employee you want to query? if you only search by using cpf, in the case you show in the first graph, you will find two employees, not one"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 1, "creation_date": 1460521906, "post_id": 36587873, "comment_id": 60775340, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108990/discussion-between-zhiliang-takuto-xing-and-elton-santos\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "is_accepted": true, "score": 1, "last_activity_date": 1460517069, "creation_date": 1460517069, "answer_id": 36587873, "question_id": 36586514, "link": "https://stackoverflow.com/questions/36586514/show-all-authorizations-by-registers/36587873#36587873", "title": "Show all authorizations by registers", "body": "<p>after I look at you database tables, I have a question. It appears that one <code>employee</code> can have only one <code>person</code> which contains <code>cpf</code>, in that case I don't think the scope method in <code>Authorization</code> is necessary anymore. Because obviously each <code>employee</code>'s authorizations will all have only one <code>cpf</code>. you can simply just do </p>\n\n<pre><code>@employees = Employee.search_cpf(params[:search_employee_by_cpf]).includes(:authorizations)\n</code></pre>\n\n<p>in your view, change</p>\n\n<pre><code>&lt;% @authorizations.each do |authorization| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= check_box_tag 'authorization[contract_ids][]', authorization.contract_number %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= authorization.contract_number %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= number_to_currency authorization.parcel_value %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= authorization.qtd_parcel %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= number_to_currency authorization.total_value %&gt;&lt;/td&gt;\n    &lt;td&gt;\n      &lt;%= simple_form_for('/', remote: true) do |f| %&gt;\n        &lt;%= f.input :value_solve, label: false, placeholder: \"Digit a value\" %&gt;\n        &lt;%= f.submit 'Gravar valor' %&gt;\n      &lt;% end %&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>&lt;% employee.authorizations.each do |authorization| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= check_box_tag 'authorization[contract_ids][]', authorization.contract_number %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= authorization.contract_number %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= number_to_currency authorization.parcel_value %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= authorization.qtd_parcel %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= number_to_currency authorization.total_value %&gt;&lt;/td&gt;\n    &lt;td&gt;\n      &lt;%= simple_form_for('/', remote: true) do |f| %&gt;\n        &lt;%= f.input :value_solve, label: false, placeholder: \"Digit a value\" %&gt;\n        &lt;%= f.submit 'Gravar valor' %&gt;\n      &lt;% end %&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 36587873, "answer_count": 1, "score": 4, "last_activity_date": 1460520126, "creation_date": 1460507853, "last_edit_date": 1460520126, "question_id": 36586514, "link": "https://stackoverflow.com/questions/36586514/show-all-authorizations-by-registers", "title": "Show all authorizations by registers", "body": "<p>I have this problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bAmPV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bAmPV.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have a controller:</p>\n\n<pre><code>  def index\n    if params[:search_employee_by_cpf].present?\n      @employees = Employee.search_cpf(params[:search_employee_by_cpf]).all\n      @authorizations = Authorization.search_employee_by_cpf(params[:search_employee_by_cpf]).all\n    end\n  end\n</code></pre>\n\n<p>Model authorization:</p>\n\n<pre><code>  scope :search_employee_by_cpf, -&gt; (cpf) { Authorization.joins(\"INNER JOIN employees ON employees.id = authorizations.employee_id INNER JOIN people ON employees.person_id = people.id\").where(\"people.cpf LIKE ?\", \"%#{cpf}%\") }\n</code></pre>\n\n<p>And model Employee:</p>\n\n<pre><code>  scope :search_cpf, -&gt; (cpf) { joins(:person).where(\"people.cpf LIKE ?\", \"%#{cpf}%\") }\n</code></pre>\n\n<p>I need two register/matricula and I need show authorizations for each register/matricula. Actually, show all authorization for each register and this is wrong! I just want show the authorizations of respective register. How make this?</p>\n\n<p><strong>UPDATE -------------------------</strong></p>\n\n<p>This is a part of my view responsable for show authorizations</p>\n\n<pre><code>&lt;% @authorizations.each do |authorization| %&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;%= check_box_tag 'authorization[contract_ids][]', authorization.contract_number %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= authorization.contract_number %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= number_to_currency authorization.parcel_value %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= authorization.qtd_parcel %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= number_to_currency authorization.total_value %&gt;&lt;/td&gt;\n              &lt;td&gt;\n                &lt;%= simple_form_for('/', remote: true) do |f| %&gt;\n                  &lt;%= f.input :value_solve, label: false, placeholder: \"Digit a value\" %&gt;\n                  &lt;%= f.submit 'Gravar valor' %&gt;\n                &lt;% end %&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;% end %&gt;\n</code></pre>\n\n<p><strong>UPDATE 2 -------------------------</strong></p>\n\n<pre><code>  def new\n    if params[:authorization]\n      @selected_ids = params[:authorization][:contract_ids]\n      @authorizations = Authorization.where(\"contract_number in (?)\", @selected_ids)\n    end\n    @employee = Employee.search_cpf(params[:search_employee_by_cpf])\n    @refinancing = Refinancing.new\n  end\n</code></pre>\n\n<p>new.html.erb (after checked and click on button go to new)</p>\n\n<pre><code>&lt;table class=\"table table-condensed table-bordered\"&gt;\n  &lt;tr&gt;\n    &lt;td&gt;Name:&lt;/td&gt;\n    &lt;td&gt;&lt;%= @employee.person.name %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;CPF:&lt;/td&gt;\n    &lt;td&gt;&lt;%= @employee.person.cpf %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 0, "last_activity_date": 1460508612, "creation_date": 1460508612, "answer_id": 36586640, "question_id": 36586450, "link": "https://stackoverflow.com/questions/36586450/rails-server-uninitialized-constant-sprocketsrailsversion-nameerror/36586640#36586640", "title": "Rails Server - uninitialized constant Sprockets::Rails::VERSION (NameError)", "body": "<p>Try using <code>gem 'sprockets-rails', :require =&gt; 'sprockets/railtie'</code></p>\n\n<p>If that doesn't work try using the sprockets gem directly:</p>\n\n<p><code>gem 'sprockets'</code></p>\n"}], "owner": {"reputation": 41, "user_id": 6196039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38e37ec5b6415c69bff4a399f27dde2?s=128&d=identicon&r=PG&f=1", "display_name": "user6196039", "link": "https://stackoverflow.com/users/6196039/user6196039"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "accepted_answer_id": 36586640, "answer_count": 1, "score": 1, "last_activity_date": 1460508612, "creation_date": 1460507455, "last_edit_date": 1495540358, "question_id": 36586450, "link": "https://stackoverflow.com/questions/36586450/rails-server-uninitialized-constant-sprocketsrailsversion-nameerror", "title": "Rails Server - uninitialized constant Sprockets::Rails::VERSION (NameError)", "body": "<p>I'm trying to run rails s but I'm getting this error message:</p>\n\n<pre><code>/home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bootstrap-sass-3.3.6/lib/bootstrap-sass/engine.rb:11:in `block in &lt;class:Engine&gt;': uninitialized constant Sprockets::Rails::VERSION (NameError)\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/initializable.rb:30:in `instance_exec'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/initializable.rb:30:in `run'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/initializable.rb:55:in `block in run_initializers'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:180:in `each'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/initializable.rb:54:in `run_initializers'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/application.rb:215:in `initialize!'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/railtie/configurable.rb:30:in `method_missing'\n        from /vagrant/src/quotesgenerator/config/environment.rb:5:in `&lt;top (required)&gt;'\n        from /vagrant/src/quotesgenerator/config.ru:3:in `require'\n        from /vagrant/src/quotesgenerator/config.ru:3:in `block in &lt;main&gt;'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/builder.rb:55:in `instance_eval'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/builder.rb:55:in `initialize'\n        from /vagrant/src/quotesgenerator/config.ru:in `new'\n        from /vagrant/src/quotesgenerator/config.ru:in `&lt;main&gt;'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/builder.rb:49:in `eval'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/builder.rb:49:in `new_from_string'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/builder.rb:40:in `parse_file'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/server.rb:277:in `build_app_and_options_from_config'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/server.rb:199:in `app'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands/server.rb:48:in `app'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.5/lib/rack/server.rb:314:in `wrapped_app'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands/server.rb:75:in `start'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:76:in `block in &lt;top (required)&gt;'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:71:in `tap'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:71:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I added gem 'sprockets-rails', :require => 'sprockets/rails/version' as explained in this post, but it didn't solve the issue: \n<strong><a href=\"https://stackoverflow.com/questions/23021236/cannot-launch-rails-server-uninitialized-constants-sprocketsrailsversion\">Cannot launch rails server - uninitialized constants Sprockets::Rails::VERSION::(NameError)</a></strong></p>\n\n<p><strong>I'm now getting this error when running rails server:</strong></p>\n\n<pre><code>/home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:76:in `require': cannot load such file -- sprockets/rails/version (LoadError)\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:72:in `each'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:72:in `block in require'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:61:in `each'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler/runtime.rb:61:in `require'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/bundler-1.5.3/lib/bundler.rb:131:in `require'\n        from /vagrant/src/quotesgenerator/config/application.rb:7:in `&lt;top (required)&gt;'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:74:in `require'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:74:in `block in &lt;top (required)&gt;'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:71:in `tap'\n        from /home/vagrant/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/railties-4.0.1/lib/rails/commands.rb:71:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any advice how I can solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "search"], "answers": [{"comments": [{"owner": {"reputation": 1707, "user_id": 2422834, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ZMCFH.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2422834/james"}, "edited": false, "score": 0, "creation_date": 1460508875, "post_id": 36586564, "comment_id": 60771990, "body": "I&#39;m having trouble getting this code working. Does this require a certain database? I&#39;m using sqlite for development."}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "reply_to_user": {"reputation": 1707, "user_id": 2422834, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ZMCFH.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2422834/james"}, "edited": false, "score": 0, "creation_date": 1460509116, "post_id": 36586564, "comment_id": 60772050, "body": "apologies; I forgot to change single quote to double quote"}], "tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": true, "score": 5, "last_activity_date": 1460595698, "last_edit_date": 1460595698, "creation_date": 1460508133, "answer_id": 36586564, "question_id": 36586372, "link": "https://stackoverflow.com/questions/36586372/rails-combine-multiple-columns-in-search/36586564#36586564", "title": "Rails combine multiple columns in search", "body": "<p>You can concat your <code>field</code>s in the database query like</p>\n\n<p><strong>Updated:</strong></p>\n\n<pre><code>.where(\"concat_ws(' ' , first_name, middle_name, last_name) LIKE ?\", \"%#{search}%\")\n</code></pre>\n\n<p>This should work for <code>foo</code>, <code>foo bar</code>, or <code>foo bar baz</code>\nbut not <code>foo baz</code></p>\n\n<p>If you want to support <code>foo baz</code> as well then</p>\n\n<pre><code>.where(\"first_name LIKE ? OR middle_name LIKE ?\"\\\n       \" OR last_name LIKE ? OR concat_ws(' ' , first_name, middle_name, last_name) LIKE ?\"\\\n       \" OR concat_ws(' ' , first_name, last_name) LIKE ?\", \n       \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1460631315, "post_id": 36592032, "comment_id": 60837711, "body": "Although this code may answer the question, providing additional context regarding <i>why</i> and/or <i>how</i> it answers the question would significantly improve its long-term value.  Please <a href=\"https://stackoverflow.com/posts/36592032/edit\">edit</a> your answer to add some explanation."}], "tags": [], "owner": {"reputation": 231, "user_id": 1063293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c57c144ac25f40eaf233415295a424?s=128&d=identicon&r=PG", "display_name": "kaushal sharma", "link": "https://stackoverflow.com/users/1063293/kaushal-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1460704912, "last_edit_date": 1460704912, "creation_date": 1460534193, "answer_id": 36592032, "question_id": 36586372, "link": "https://stackoverflow.com/questions/36586372/rails-combine-multiple-columns-in-search/36592032#36592032", "title": "Rails combine multiple columns in search", "body": "<p>.where(\"first_name LIKE ? OR middle_name LIKE ? OR last_name LIKE ? or CONCAT(first_name, middle_name, last_name) LIKE ?\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\")</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6550284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ba14ffeeecd81045c93e327d1928d1?s=128&d=identicon&r=PG&f=1", "display_name": "\u0422\u0430\u0440\u0430\u0441 \u0411\u0456\u043b\u043e\u0443\u0441", "link": "https://stackoverflow.com/users/6550284/%d0%a2%d0%b0%d1%80%d0%b0%d1%81-%d0%91%d1%96%d0%bb%d0%be%d1%83%d1%81"}, "is_accepted": false, "score": 0, "last_activity_date": 1513027935, "creation_date": 1513027935, "answer_id": 47761754, "question_id": 36586372, "link": "https://stackoverflow.com/questions/36586372/rails-combine-multiple-columns-in-search/47761754#47761754", "title": "Rails combine multiple columns in search", "body": "<p>If you use pg, you can try like this</p>\n\n<pre><code>def self.search(query)\n    where(['phone ilike :query',\n       'LOWER(name) ilike :query',\n       'LOWER(email) ilike :query',\n       'LOWER(address) ilike :query'].join(' OR '), {query: \"%#{query}%\" })\nend\n</code></pre>\n"}], "owner": {"reputation": 1707, "user_id": 2422834, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ZMCFH.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2422834/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 1, "accepted_answer_id": 36586564, "answer_count": 3, "score": 2, "last_activity_date": 1513027935, "creation_date": 1460506938, "question_id": 36586372, "link": "https://stackoverflow.com/questions/36586372/rails-combine-multiple-columns-in-search", "title": "Rails combine multiple columns in search", "body": "<p>In my application I have a customers model with three columns, <code>first_name</code>, <code>middle_name</code> and <code>last_name</code>. I have a method in the model that performs the search:</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n  belongs_to :user\n\n  def self.search(search, user)\n    if search\n      .where('first_name LIKE ? OR middle_name LIKE ? OR last_name LIKE ?', \"%#{search}%\", \"%#{search}%\", \"%#{search}%\", \"%#{search}%\")\n      .where(user: user)\n    else\n      where(user: user)\n    end\n  end\n\nend\n</code></pre>\n\n<p>The problem with this search function is that it only allows searching by one of the three columns at a time. </p>\n\n<p>For example, a customer has a first_name of \"foo\", a middle_name of \"bar\" and a last_name of \"baz\". Searching for \"foo\", \"bar\", or \"baz\" individually returns results, but \"foo bar\" or \"bar baz\" does not. \nWhat is the best way I can allow searching across all three columns?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1460507928, "post_id": 36586340, "comment_id": 60771752, "body": "r u using devise ?"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460517698, "post_id": 36586704, "comment_id": 60774243, "body": "I edited my original question. Thanks! You&#39;re definitely right about using logged_in however this still isn&#39;t working for me? Still not sure why..."}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460518195, "post_id": 36586704, "comment_id": 60774389, "body": "Where/how is <code>logged_in?</code> defined?"}, {"owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460518485, "post_id": 36586704, "comment_id": 60774462, "body": "See above. I edited the post. It&#39;s defined in the helpers/session_helpers.rb file as !current_user.nil?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460518850, "post_id": 36586704, "comment_id": 60774537, "body": "Are you using devise? Try <code>current_user.present?</code>"}, {"owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460519086, "post_id": 36586704, "comment_id": 60774593, "body": "No, it&#39;s my first Ruby app so I went through the Hartl tutorial: <a href=\"https://www.railstutorial.org/book/log_in_log_out\" rel=\"nofollow noreferrer\">railstutorial.org/book/log_in_log_out</a>"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460519234, "post_id": 36586704, "comment_id": 60774629, "body": "Are you setting the session properly and retrieving current_user from the session. What&#39;s your method for <code>current_user</code>?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460519887, "post_id": 36586704, "comment_id": 60774807, "body": "Are you sure <code>user_id</code> is defined?"}, {"owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "edited": false, "score": 0, "creation_date": 1460772252, "post_id": 36586704, "comment_id": 60911491, "body": "OK. I think I have more information. The controller &quot;show&quot; isn&#39;t firing at all. I put a raise exception as the first line, and the page still renders fine. Why would the controller show action not be firing at all to render welcome#home"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1460519029, "last_edit_date": 1460519029, "creation_date": 1460509095, "answer_id": 36586704, "question_id": 36586340, "link": "https://stackoverflow.com/questions/36586340/logged-in-user-not-working-bypassing-landing-page-for-logged-in-users/36586704#36586704", "title": "logged_in_user not working bypassing landing page for logged in users", "body": "<p><code>logged_in_user</code> isn't actually doing or returning anything if the user is already signed in. It just returns nil which evaluates to false, so there's no way for your <code>show</code> action to even reach the <code>redirect_to recipes_url</code> statement.</p>\n\n<p>Did you intend to use the <code>logged_in?</code> function? This should work, provided <code>logged_in?</code> does what its name implies:</p>\n\n<pre><code>   def show\n    if logged_in?\n      redirect_to recipes_url\n    else\n      render template: \"welcome/#{params[:welcome]}\"\n    end\n  end\n</code></pre>\n\n<p>If using devise, make sure you're using a model named <code>User</code>, have devise defined in your <code>routes.rb</code> with <code>devise_for :users</code> and have devise declared on your model with at least the following:</p>\n\n<pre><code> devise :database_authenticatable,\n         :registerable,\n         :rememberable,\n         :validatable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "is_accepted": true, "score": 0, "last_activity_date": 1460772710, "creation_date": 1460772710, "answer_id": 36659424, "question_id": 36586340, "link": "https://stackoverflow.com/questions/36586340/logged-in-user-not-working-bypassing-landing-page-for-logged-in-users/36659424#36659424", "title": "logged_in_user not working bypassing landing page for logged in users", "body": "<p>Ok. The logged_in method was working fine. The reason that this wasn't working was because my route was going directly to the view 'welcome#home' and bypassing the controller altogether. </p>\n\n<p>As soon as I made the route 'welcome#show' I was able to get this to work. </p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 181, "user_id": 6167802, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-bhuMl21aVT8/AAAAAAAAAAI/AAAAAAAAAaU/aatNrUIFR6E/photo.jpg?sz=128", "display_name": "blueduckyy", "link": "https://stackoverflow.com/users/6167802/blueduckyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 36659424, "answer_count": 2, "score": 1, "last_activity_date": 1460772710, "creation_date": 1460506734, "last_edit_date": 1460519777, "question_id": 36586340, "link": "https://stackoverflow.com/questions/36586340/logged-in-user-not-working-bypassing-landing-page-for-logged-in-users", "title": "logged_in_user not working bypassing landing page for logged in users", "body": "<p>I've seen a few similar posts about this but they didn't seem to resolve my problem. </p>\n\n<p><strong>Problem</strong>\nIt simply doesn't work. Doesn't error out, nothing, just doesn't evaluate and I don't know why because it does for other things? </p>\n\n<p>Here is my Welcome controller definition: </p>\n\n<pre><code>  def show\n    if logged_in?\n      # raise  #I raise an error here and nothing happens on the web page. Just to confirm this isn't working for my sanity. \n      redirect_to recipes_url\n    else\n      render template: \"welcome/#{params[:welcome]}\"\n    end\n  end\n</code></pre>\n\n<p>The function logged_in? is defined in my /helpers/sessions_helper.rb:</p>\n\n<pre><code>  def logged_in?\n    !current_user.nil?\n  end\n</code></pre>\n\n<p>Here is the current_user: </p>\n\n<pre><code>  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n    #  raise #The test still pass, so this branch is currently untested.\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n</code></pre>\n\n<p>And my routes are: </p>\n\n<pre><code> get 'welcome/:welcome' =&gt; 'welcome#show'\n root :to =&gt; 'welcome#home'\n</code></pre>\n\n<p>Why doesn't this work? It just stays on the welcome page regardless of if I'm logged in or not. I know that logged_in? is evaluating correctly because I have other links on the page that are dynamic based upon this. </p>\n\n<p><strong>EDIT:</strong>  What's really weird is that the logged_in? works in my view just not in this controller. </p>\n\n<p>Here's a snippet from the nav of in the application layout view. </p>\n\n<pre><code>  &lt;% if logged_in? %&gt;\n      &lt;li&gt;&lt;%= link_to \"Profile\", current_user %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to \"Log out\", logout_path, method: \"delete\" %&gt;&lt;/li&gt;\n    &lt;% else %&gt;\n      &lt;li&gt;&lt;%= link_to \"Browse recipes\", recipes_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to \"Log in\", login_path %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/jx8Sa.png\" rel=\"nofollow\">Picture of the resulting site</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460512847, "post_id": 36586208, "comment_id": 60773069, "body": "Whitespace matters elsewhere too, <code>o.m(x, y)</code> versus <code>o.m (x, y)</code> for example."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460572227, "post_id": 36586208, "comment_id": 60810243, "body": "Sure, but that&#39;s a situation where one reasonably expects it to matter (in that the latter isn&#39;t even obviously meaningful."}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1460508293, "post_id": 36586209, "comment_id": 60771841, "body": "That&#39;s a consequence of allowing method calls without parentheses. Your original code is equivalent to: <code>puts(a.name(+&#39; is a debit: &#39;) + bal.to_s)</code>."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1460560745, "post_id": 36586209, "comment_id": 60802625, "body": "Your response ought to be an answer."}], "tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": false, "score": 1, "last_activity_date": 1460505797, "creation_date": 1460505797, "answer_id": 36586209, "question_id": 36586208, "link": "https://stackoverflow.com/questions/36586208/why-do-i-get-undefined-method-for-is-a-credit-string-nomethoderror/36586209#36586209", "title": "Why do I get &quot;undefined method `+@&#39; for &quot; is a credit: &quot;:String (NoMethodError)&quot; here?", "body": "<p>It turns out there's at least one case where white space is important in Ruby. The following code executes as intended:</p>\n\n<pre><code>puts a.name + ' is a credit: ' + bal.to_s\n</code></pre>\n\n<p>which, when executed produces (for example):</p>\n\n<pre><code>Cash on Hand is a credit: -100.0\n</code></pre>\n\n<p>I look forward to any other answers which elucidate the <em>reason</em> this is so. I'll accept the best.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 3, "last_activity_date": 1460509249, "last_edit_date": 1460509249, "creation_date": 1460507931, "answer_id": 36586529, "question_id": 36586208, "link": "https://stackoverflow.com/questions/36586208/why-do-i-get-undefined-method-for-is-a-credit-string-nomethoderror/36586529#36586529", "title": "Why do I get &quot;undefined method `+@&#39; for &quot; is a credit: &quot;:String (NoMethodError)&quot; here?", "body": "<p>The <code>+@</code> is <strong>unary <code>+</code> operator</strong>, which, in Ruby, is also a method that you can override. For example,</p>\n\n<pre><code>class One\n  # Unary +\n  def +@\n    1\n  end\n\n  # Unary -\n  def -@\n    -1\n  end\nend\n\n+One.new\n=&gt; 1\n\n-One.new\n=&gt; -1\n</code></pre>\n\n<p>In your case, <code>a.name</code> is actually a method call (there's no public fields in ruby. Only public methods), so the Ruby virtual machine (YARV) compiles <code>a.name +' is a credit: '</code> (no space between <code>+</code> and the string) as</p>\n\n<ol>\n<li>call <code>+@</code> on the string <code>' is a credit: '</code></li>\n<li>call method <code>name</code> on <code>a</code> with one argument: the result of step 1</li>\n</ol>\n\n<p>Then when running the code, it will fail at step 1 and raises the error you saw.</p>\n\n<p>On the other hand, <code>a.name + ' is a credit: '</code> (at least one space between <code>+</code> and the string), the interpreter interprets it as </p>\n\n<ol>\n<li>call <code>a.name</code> with no argument</li>\n<li>call <code>+</code> (binary <code>+</code> operator) on the result of step 1, with one argument <code>' is a credit: '</code></li>\n</ol>\n"}], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1460509249, "creation_date": 1460505797, "question_id": 36586208, "link": "https://stackoverflow.com/questions/36586208/why-do-i-get-undefined-method-for-is-a-credit-string-nomethoderror", "title": "Why do I get &quot;undefined method `+@&#39; for &quot; is a credit: &quot;:String (NoMethodError)&quot; here?", "body": "<p>I have some code that looks like this:</p>\n\n<pre><code>bal = sum_account_journal_entries(a)\nif bal &lt; 0\n  puts a.name +' is a credit: ' + bal.to_s\nelse\n  puts a.name +' is a debit: ' + bal.to_s\nend\n</code></pre>\n\n<p>Here, <code>a</code> has method <code>name</code> which returns a <code>String</code>, and <code>bal</code> is a <code>Float</code>.</p>\n\n<p>When I execute this code (it's part of a Cucumber step_definition, but that's not the source of this problem, as we'll soon see), I get:</p>\n\n<pre><code>undefined method `+@' for \" is a credit: \":String (NoMethodError)\n</code></pre>\n\n<p>Which makes no sense.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 1, "creation_date": 1460506218, "post_id": 36586125, "comment_id": 60771305, "body": "check this similar question <a href=\"http://stackoverflow.com/questions/36282646/spree-category-pages-in-custom-rails-app/36283387#36283387\" title=\"spree category pages in custom rails app\">stackoverflow.com/questions/36282646/&hellip;</a>"}, {"owner": {"reputation": 1812, "user_id": 2569627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/837d744faa6e1401a1001a07e61589ae?s=128&d=identicon&r=PG", "display_name": "Rafi", "link": "https://stackoverflow.com/users/2569627/rafi"}, "reply_to_user": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1460667802, "post_id": 36586125, "comment_id": 60863082, "body": "so if I want complete control over the source code, I should just download the core app from the GitHub repo?"}, {"owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1460688411, "post_id": 36586125, "comment_id": 60869728, "body": "do you mean you want to add customisations ? please see here for view customisation. <a href=\"https://guides.spreecommerce.com/developer/view.html\" rel=\"nofollow noreferrer\">guides.spreecommerce.com/developer/view.html</a>"}, {"owner": {"reputation": 1812, "user_id": 2569627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/837d744faa6e1401a1001a07e61589ae?s=128&d=identicon&r=PG", "display_name": "Rafi", "link": "https://stackoverflow.com/users/2569627/rafi"}, "reply_to_user": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1460696982, "post_id": 36586125, "comment_id": 60871929, "body": "This is for a group project for school. I also have to add a &quot;compare products&quot; view and a chat feature for customers to chat with vendors :( so I&#39;m going to have to add some more functionality as well as customize some views. Spree seems to have a pretty tediously complex way of customization, especially since I only took an introductory rails course, which is why editing the gem&#39;s files sounded like a good idea"}, {"owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1460802229, "post_id": 36586125, "comment_id": 60918021, "body": "if you want to customise spree that is the way to do it as in spree documentation. If you update the gem file it self. you will probably loose all of it if you uninstall your spree gem and reinstall it. And you won&#39;t be able to deploy your changes to anywhere else as you are changing your local gem installation for customisation. Hope that helps"}], "owner": {"reputation": 1812, "user_id": 2569627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/837d744faa6e1401a1001a07e61589ae?s=128&d=identicon&r=PG", "display_name": "Rafi", "link": "https://stackoverflow.com/users/2569627/rafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460505838, "creation_date": 1460505273, "last_edit_date": 1460505838, "question_id": 36586125, "link": "https://stackoverflow.com/questions/36586125/rails-how-to-customize-spree-commerce-framework", "title": "Rails - How To Customize Spree Commerce Framework", "body": "<p>I just started learning about the <code>Spree Commerce Rails Framework</code> for building a foundation for e-commerce website for my class's final project, even though I have only taken one introductory <code>Ruby on Rails</code> course at school. I went through their \"Getting Started\" tutorial from the following link: </p>\n\n<p><a href=\"https://guides.spreecommerce.com/developer/getting_started_tutorial.html\" rel=\"nofollow\">https://guides.spreecommerce.com/developer/getting_started_tutorial.html</a></p>\n\n<p>However, I noticed that after creating a <code>Spree Commerce</code> starter project, I do not have access to the source code! It seems that I'm given no control over the models, controllers, view html files, etc. Why not?</p>\n\n<p>How do I get access to these source files? For example, I want to completely take out the \"checkout and payment transaction\" functionality to ONLY display products and let the user have a wish list, but I'm not seeing where or how I can customize it to that point.</p>\n\n<p>Any help or advice would be appreciated. Thanks.</p>\n"}, {"tags": ["ruby", "scope"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1460501885, "post_id": 36585558, "comment_id": 60769956, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need a better description of the problem. What&#39;s it not doing correctly? Your code example won&#39;t give us that output."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1460503098, "post_id": 36585558, "comment_id": 60770363, "body": "I note that your &quot;elsif&quot; syntax is different for the last three conditions: two have parentheses, which may change the evaluation order.  Please check that.  Also, please check that your entry of &quot;open door&quot; does not contain any blanks: a simple <b>puts</b> should show this, such as <b>puts &quot;|&quot;, choice, &quot;|&quot;</b>. When you have trouble with your program logic, at least trace the data and control flows with some print statements before you look elsewhere for help; debugging is a very useful skill."}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "is_accepted": false, "score": 1, "last_activity_date": 1460502001, "creation_date": 1460502001, "answer_id": 36585598, "question_id": 36585558, "link": "https://stackoverflow.com/questions/36585558/ruby-variable-scoping-error-in-text-adventure/36585598#36585598", "title": "ruby variable scoping error in text adventure", "body": "<p>Your issue may be that you wrote <code>bear_moved == true</code> instead of <code>bear_moved = true</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1460502033, "creation_date": 1460502033, "answer_id": 36585607, "question_id": 36585558, "link": "https://stackoverflow.com/questions/36585558/ruby-variable-scoping-error-in-text-adventure/36585607#36585607", "title": "ruby variable scoping error in text adventure", "body": "<p>it's <code>bear_moved = true</code> not <code>bear_moved == true</code></p>\n\n<pre><code>elsif choice == \"taunt bear\" &amp;&amp; !bear_moved\n      puts \"The bear has moved from the door. You can go through it now.\"\n      bear_moved = true\nelsif choice == \"taunt bear\" &amp;&amp; bear_moved\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6191892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5UdC.jpg?s=128&g=1", "display_name": "141.80", "link": "https://stackoverflow.com/users/6191892/141-80"}, "is_accepted": false, "score": 0, "last_activity_date": 1460502657, "creation_date": 1460502657, "answer_id": 36585710, "question_id": 36585558, "link": "https://stackoverflow.com/questions/36585558/ruby-variable-scoping-error-in-text-adventure/36585710#36585710", "title": "ruby variable scoping error in text adventure", "body": "<p>The <code>bear_moved</code> variable should receive the boolean, instead comparing it with <code>true</code> at the 14th line of method.</p>\n"}, {"tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1460502920, "creation_date": 1460502920, "answer_id": 36585759, "question_id": 36585558, "link": "https://stackoverflow.com/questions/36585558/ruby-variable-scoping-error-in-text-adventure/36585759#36585759", "title": "ruby variable scoping error in text adventure", "body": "<p>I think you want to ensure that when bear is taunted and it does not move it should move bear, not check again if bear moved.\nThe solution should be to remove the comparison operator on <code>elsif choice == \"taunt bear\" &amp;&amp; !bear_moved</code> change the bear_moved to <code>=</code> not <code>==</code></p>\n\n<pre><code> while true\n    print \"&gt; \"\n    choice = $stdin.gets.chomp\n    if choice == \"take honey\"\n      dead(\"The bear looks at you then slaps your face off.\")\n    elsif choice == \"taunt bear\" &amp;&amp; !bear_moved\n      puts \"The bear has moved from the door. You can go through it now.\"\n      bear_moved = true\n    elsif choice == \"taunt bear\" &amp;&amp; bear_moved\n      dead(\"The bear gets pissed off and chews your leg off.\")\n    elsif (choice == \"open door\") &amp;&amp; bear_moved\n      gold_room\n    else\n      puts \"I got no idea what that means.\"\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2708967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55l4c.jpg?s=128&g=1", "display_name": "Ryan Magoon", "link": "https://stackoverflow.com/users/2708967/ryan-magoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1460502920, "creation_date": 1460501763, "last_edit_date": 1460502090, "question_id": 36585558, "link": "https://stackoverflow.com/questions/36585558/ruby-variable-scoping-error-in-text-adventure", "title": "ruby variable scoping error in text adventure", "body": "<p>Here is the code I'm working on.</p>\n\n<pre><code>def gold_room\n  puts \"This room is full of gold. How much do you take?\"\n\n  print \"&gt; \"\n  choice = $stdin.gets.chomp\n\n  # this line has a bug, so fix it\n  if choice.include?(\"0\") || choice.include?(\"1\")\n    how_much = choice.to_i\n  else\n    dead(\"Man, learn to type a number.\")\n  end\n\n  if how_much &lt; 50\n    puts \"Nice, you're not greedy, you win!\"\n    exit(0)\n  else\n    dead(\"You greedy bastard!\")\n  end\nend\n\ndef bear_room\n  puts \"There is a bear here.\"\n  puts \"The bear has a bunch of honey.\"\n  puts \"The fat bear is in front of another door.\"\n  puts \"How are you going to move the bear?\"\n  bear_moved = false\n\n  while true\n    print \"&gt; \"\n    choice = $stdin.gets.chomp\n    if choice == \"take honey\"\n      dead(\"The bear looks at you then slaps your face off.\")\n    elsif choice == \"taunt bear\" &amp;&amp; !bear_moved\n      puts \"The bear has moved from the door. You can go through it now.\"\n      bear_moved == true\n    elsif choice == \"taunt bear\" &amp;&amp; bear_moved\n      dead(\"The bear gets pissed off and chews your leg off.\")\n    elsif (choice == \"open door\") &amp;&amp; bear_moved\n      gold_room\n    else\n      puts \"I got no idea what that means.\"\n    end\n  end\nend\n\ndef cthulhu_room\n  puts \"Here you see the great evil Cthulhu.\"\n  puts \"He, it, whatever stares at you and you go insane.\"\n  puts \"Do you flee for your life or eat your head?\"\n\n  print \"&gt; \"\n  choice = $stdin.gets.chomp\n\n  if choice.include? \"flee\"\n    start\n  elsif choice.include? \"head\"\n    dead(\"Well that was tasty!\")\n  else\n    cthulhu_room\n  end\nend\n\ndef dead(why)\n  puts why, \"Good job!\"\n  exit(0)\nend\n\ndef start\n  puts \"You are in a dark room.\"\n  puts \"There is a door to your right and left.\"\n  puts \"Which one do you take?\"\n\n  print \"&gt; \"\n  choice = $stdin.gets.chomp\n\n  if choice == \"left\"\n    bear_room\n  elsif choice == \"right\"\n    cthulhu_room\n  else\n    dead(\"You stumble around the room until you starve.\")\n  end\nend\n\nstart\n</code></pre>\n\n<p>When I try to run it in my terminal on OS X, I get this:</p>\n\n<pre><code>You are in a dark room.\nThere is a door to your right and left.\nWhich one do you take?\n&gt; left\nThere is a bear here.\nThe bear has a bunch of honey.\nThe fat bear is in front of another door.\nHow are you going to move the bear?\n&gt; taunt bear\nThe bear has moved from the door. You can go through it now.\n&gt; open door\nI got no idea what that means.  # should go to gold_room, new area\n&gt; \n</code></pre>\n\n<p>I expected the program to take me to the gold room after typing in \"open door\", but instead it goes to the barf messages and restarts the while loop.</p>\n\n<p>I assume I have messed up something with scope, but I did research and still don't understand why the variable wasn't manipulated, or why I'm not getting the result I expect.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460499658, "post_id": 36585024, "comment_id": 60769053, "body": "any ideas on how I could do it?"}], "tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 2, "last_activity_date": 1460500298, "last_edit_date": 1460500298, "creation_date": 1460499308, "answer_id": 36585024, "question_id": 36584949, "link": "https://stackoverflow.com/questions/36584949/controller-action-raising-an-error/36585024#36585024", "title": "Controller Action Raising An Error", "body": "<p>You have <code>if</code> and <code>unless</code> in one line. That gives you the syntax error. </p>\n\n<p>The logic is not clear here.\nMaybe what you want can just be done by adding a newline, so that the unless-statement is inside the if-block and not the if-condition.</p>\n\n<pre><code>if @group.present? \n    @subscriber.groups &lt;&lt; @group unless groups.include? (@group)                                                  \n    @group.response\nelse\n    'You cannot subscribe to unknown group'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460499634, "post_id": 36585025, "comment_id": 60769042, "body": "Maybe? I get a <code>undefined method &quot;&lt;&lt;&quot; for false:FalseClass</code> now"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460500036, "post_id": 36585025, "comment_id": 60769211, "body": "Thanks for the help Anthony, but I&#39;m still getting an error that says groups is  an undefined local variable now"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460500130, "post_id": 36585025, "comment_id": 60769258, "body": "Yeah, did you mean to provide <code>@subscribers.groups</code>? see the comment above my edit."}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1460500360, "post_id": 36585025, "comment_id": 60769354, "body": "Yep you got it! Thank You!"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 3, "last_activity_date": 1460499696, "last_edit_date": 1460499696, "creation_date": 1460499313, "answer_id": 36585025, "question_id": 36584949, "link": "https://stackoverflow.com/questions/36584949/controller-action-raising-an-error/36585025#36585025", "title": "Controller Action Raising An Error", "body": "<p>I'd avoid putting an <code>if</code> and an <code>unless</code> on the same line</p>\n\n<p>Is this what you're trying to do?</p>\n\n<pre><code># You may have meant to provide `@subscriber.groups` instead of `groups` here. I'm not sure from information provided.\nunless groups.include?(@group) \n  @subscriber.groups &lt;&lt; @group \nend\n\nif @group &amp;&amp; @subscriber.groups.present?\n# ...\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 36585025, "answer_count": 2, "score": 1, "last_activity_date": 1460500298, "creation_date": 1460499001, "question_id": 36584949, "link": "https://stackoverflow.com/questions/36584949/controller-action-raising-an-error", "title": "Controller Action Raising An Error", "body": "<p>I have a controller Method names <code>process_message</code> and the purpose of it is to sign people up to specific groups depending on what message it receives. Right now everything works just fine except it will sign up a person to the same group over and over again. I'm trying to add some quick code to make it so they can only sign up to a specific group once. I thought that I figured it out but I am getting an error when I try to execute what I've written. Ill show some screenshots and some code for clarity.</p>\n\n<p>Here is my controller method</p>\n\n<pre><code>def process_message\nif message_params[:action] == 'subscribe'\n  # result = SubscribeToGroup.call(message_params)\n  # results.success? ? result.message : result.error\n  message_params[:id] = \"visitor\" if message_params[:id] == \"tulip\" # hack for now\n  @group = Group.find_by(name: message_params[:id])     \n  if @group &amp;&amp; @subscriber.groups &lt;&lt; @group unless groups.include? (@group)                                                  ^\n    @group.response\n  else\n    'You cannot subscribe to unknown group'\n  end\nelsif message_params[:action] == 'stop'\n  # result = UnsubscribeToGroup.call(message_params)\n  # results.success? ? result.message : result.error\n  group_name = message_params[:id]\n  @group = @subscriber.groups.find_by(name: group_name)\n  @subscriber.groups.destroy(@group) if @group\n  \"You are now unsubscribed from #{group_name.upcase} notifications. Text '#{group_name.upcase}' to start receieving updates again.\"\nelse\n  \"Sorry, we don't recognize that command.\"\nend\nrescue Exception =&gt; e\n\"Something went wrong. Try again. #{e.message}\"\nend\n</code></pre>\n\n<p>You can see on the 7th line I have some code there that I thought would keep the message from signing up a person twice but it isn't working and here is the error message when I run Rspec.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qeH1y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qeH1y.png\" alt=\"enter image description here\"></a></p>\n\n<p>I hope my problem is clear let me know if you need anymore code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "rails-api"], "comments": [{"owner": {"reputation": 4939, "user_id": 201911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dfca2a252bb0313ec21a60c39abde0f0?s=128&d=identicon&r=PG", "display_name": "jwadsack", "link": "https://stackoverflow.com/users/201911/jwadsack"}, "edited": false, "score": 0, "creation_date": 1460499728, "post_id": 36584789, "comment_id": 60769083, "body": "I think for the URL you meant <code>http:&#47;&#47;sampleapi.com&#47;stats&#47;?location=USA&amp;state=Florida</code>. URL query string is only allowed a single &quot;?&quot; which separates the query string from the path."}, {"owner": {"reputation": 1093, "user_id": 2303708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysMHp.jpg?s=128&g=1", "display_name": "Mike Deluca", "link": "https://stackoverflow.com/users/2303708/mike-deluca"}, "reply_to_user": {"reputation": 4939, "user_id": 201911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dfca2a252bb0313ec21a60c39abde0f0?s=128&d=identicon&r=PG", "display_name": "jwadsack", "link": "https://stackoverflow.com/users/201911/jwadsack"}, "edited": false, "score": 0, "creation_date": 1460500016, "post_id": 36584789, "comment_id": 60769201, "body": "Thanks for the tip"}], "answers": [{"comments": [{"owner": {"reputation": 1093, "user_id": 2303708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysMHp.jpg?s=128&g=1", "display_name": "Mike Deluca", "link": "https://stackoverflow.com/users/2303708/mike-deluca"}, "edited": false, "score": 0, "creation_date": 1460553501, "post_id": 36584997, "comment_id": 60796280, "body": "I keep getting this error and I&#39;m not sure how to get around it.    <code>Unable to autoload constant API::StatsController, expected &#47;home&#47;ubuntu&#47;workspace&#47;app&#47;controllers&#47;api&#47;stats_controller.&zwnj;&#8203;rb to define it</code>"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 1093, "user_id": 2303708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysMHp.jpg?s=128&g=1", "display_name": "Mike Deluca", "link": "https://stackoverflow.com/users/2303708/mike-deluca"}, "edited": false, "score": 0, "creation_date": 1460553809, "post_id": 36584997, "comment_id": 60796542, "body": "your controller name should be <code>Api::StatsController</code>"}, {"owner": {"reputation": 1093, "user_id": 2303708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysMHp.jpg?s=128&g=1", "display_name": "Mike Deluca", "link": "https://stackoverflow.com/users/2303708/mike-deluca"}, "edited": false, "score": 0, "creation_date": 1460554149, "post_id": 36584997, "comment_id": 60796842, "body": "Ok thank you very much! That worked but you have to have API in all caps."}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1460554246, "last_edit_date": 1460554246, "creation_date": 1460499223, "answer_id": 36584997, "question_id": 36584789, "link": "https://stackoverflow.com/questions/36584789/ruby-api-accept-parameters-and-execute-script/36584997#36584997", "title": "Ruby API - Accept parameters and execute script", "body": "<p>the file should be called <code>stats_controller.rb</code> <code>app/controllers/api/stats_controller.rb</code></p>\n\n<p>you can create an <code>index</code> method where you can add your code</p>\n\n<pre><code>  class API::StatsController &lt; ApplicationController  \n    def index\n       #your code here\n       render json: your_result\n    end    \n  end\n</code></pre>\n\n<p>in the file <code>config/routes.rb</code> you should add </p>\n\n<pre><code>get 'stats' =&gt; 'api/stats#index', as: 'stats'\n</code></pre>\n\n<p>To access the params in the url you can do it in your index method with <code>params[:location]</code> ,<code>params[:state]</code></p>\n"}, {"tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1460502373, "creation_date": 1460502373, "answer_id": 36585674, "question_id": 36584789, "link": "https://stackoverflow.com/questions/36584789/ruby-api-accept-parameters-and-execute-script/36585674#36585674", "title": "Ruby API - Accept parameters and execute script", "body": "<p>Here's how I would think of this:</p>\n\n<p>in app/controllers/api/stats_controller.rb</p>\n\n<pre><code>module Api\n  class StatsController\n    def index\n      # your code implementation\n      # you can also fetch/filter your query strings here params[:location] or params[:state]\n      render json: result # dependent on if you have a view\n    end\n  end\nend\n</code></pre>\n\n<p>in config/routes.rb</p>\n\n<pre><code># the path option changes the path from `/api` to `/` so in this case instead of /api/stats you get /stats\nnamespace :api, path: '/', defaults: { format: :json } do\n  resources :stats, only: [:index] # or other actions that should be allowed here\nend\n</code></pre>\n\n<p>Let me know if this works</p>\n"}], "owner": {"reputation": 1093, "user_id": 2303708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysMHp.jpg?s=128&g=1", "display_name": "Mike Deluca", "link": "https://stackoverflow.com/users/2303708/mike-deluca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 36584997, "answer_count": 2, "score": 1, "last_activity_date": 1460554246, "creation_date": 1460498165, "question_id": 36584789, "link": "https://stackoverflow.com/questions/36584789/ruby-api-accept-parameters-and-execute-script", "title": "Ruby API - Accept parameters and execute script", "body": "<p>I have created a rails project that has some code that I would like to execute as an API.  I am using the rails-api gem.</p>\n\n<p>The file is located in app/controllers/api/stats.rb.  </p>\n\n<p>I would like to be able to execute that script and return json output by visiting a link such as this - <a href=\"http://sampleapi.com/stats/?location=USA?state=Florida\" rel=\"nofollow\">http://sampleapi.com/stats/?location=USA?state=Florida</a>.  </p>\n\n<p>How should I configure my project so that when I visit that link it runs my code?</p>\n"}]