[{"tags": ["ruby", "amazon-s3", "streaming", "large-files", "saxparser"], "comments": [{"owner": {"reputation": 2036, "user_id": 477403, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/860ef9f1f54410fcfb2eff1b5f111e44?s=128&d=identicon&r=PG", "display_name": "Amol Pujari", "link": "https://stackoverflow.com/users/477403/amol-pujari"}, "edited": false, "score": 0, "creation_date": 1484205024, "post_id": 33927986, "comment_id": 70415911, "body": "<a href=\"https://amolnpujari.wordpress.com/2012/03/31/reading_huge_xml-rb/\" rel=\"nofollow noreferrer\">amolnpujari.wordpress.com/2012/03/31/reading_huge_xml-rb</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1145, "user_id": 4465767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c2df51e573b1f2fd17c101ce0ad000?s=128&d=identicon&r=PG", "display_name": "Harshavardhana", "link": "https://stackoverflow.com/users/4465767/harshavardhana"}, "is_accepted": true, "score": 3, "last_activity_date": 1448567189, "creation_date": 1448567189, "answer_id": 33946025, "question_id": 33927986, "link": "https://stackoverflow.com/questions/33927986/sax-parsing-a-large-file-from-s3/33946025#33946025", "title": "Sax parsing a large file from S3", "body": "<p>The most easiest way is to use <code>mc</code>. <code>mc</code> implements are <code>cat</code> command which can used in a simpler way. </p>\n\n<p>For example as shown below. Here <code>cat</code> streams your object and pipe the output of <code>cat</code> to your XML parser which reads from stdinput.</p>\n\n<pre><code>$ mc cat s3.amazonaws.com/&lt;yourbucket&gt;/&lt;yourobject&gt; | &lt;your_xml_parser&gt; \n</code></pre>\n\n<p>This way you can avoid downloading the file locally. </p>\n\n<p>Additionally <code>mc</code> provides more tools to work with Amazon S3 compatible cloud storage and filesystems. It has features like resumable uploads, progress bar, parallel copy. <code>mc</code> is written in Golang and released under Apache license v2. <code>mc</code> is supported on OS X, Linux and Windows. </p>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 33946025, "answer_count": 1, "score": 2, "last_activity_date": 1484203131, "creation_date": 1448492790, "question_id": 33927986, "link": "https://stackoverflow.com/questions/33927986/sax-parsing-a-large-file-from-s3", "title": "Sax parsing a large file from S3", "body": "<p>I have a very large xml file on s3 (50gb). I would like to stream this file to a sax xml parser for further processing using ruby. How would I do that in an environment where I cannon download the whole file locally, but only stream it over tcp from s3?</p>\n\n<p>I'm thinking about using <a href=\"https://github.com/ohler55/ox\" rel=\"nofollow\">https://github.com/ohler55/ox</a> for the parsing it self, and <a href=\"https://github.com/aws/aws-sdk-ruby\" rel=\"nofollow\">https://github.com/aws/aws-sdk-ruby</a> for accessing the file on S3. I'm just unsure how connect the pieces using a streaming approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "routes"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 2, "creation_date": 1448492416, "post_id": 33927853, "comment_id": 55616783, "body": "You have no <code>&#47;project</code> route. At what point do you get the error?"}], "answers": [{"tags": [], "owner": {"reputation": 1010, "user_id": 2434606, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/loDx9.jpg?s=128&g=1", "display_name": "Brent Eicher", "link": "https://stackoverflow.com/users/2434606/brent-eicher"}, "is_accepted": true, "score": 1, "last_activity_date": 1448495645, "creation_date": 1448495645, "answer_id": 33928467, "question_id": 33927853, "link": "https://stackoverflow.com/questions/33927853/rails-4-routing-error-no-route-matches-get-project/33928467#33928467", "title": "Rails 4 routing error &#39;No route matches [GET] &quot;/project&quot;", "body": "<p>If you're trying to view a particular product, /product is not a route that will work because there is no way to identify it. Given a product with an id of 1, the routes you have defined work like this:</p>\n\n<pre><code>/products/1\n/products/1/edit\n</code></pre>\n\n<p>You can get rid of the /products/ segment by providing a blank path on the resource, although there are things to be aware of when occupying the root namespace like this:</p>\n\n<pre><code>resources :products, path: '' do\n  ...\nend\n</code></pre>\n\n<p>This will give you routes like this:</p>\n\n<pre><code>/1\n/1/edit\n</code></pre>\n\n<p>If you aren't happy with the id being displayed in the url, you can either manually write new routes like this (assuming a product has a name attribute):</p>\n\n<pre><code>get '/:name', to: 'products#show'\n</code></pre>\n\n<p>Just be aware that this won't work unless you're enforcing uniqueness on the name attribute.</p>\n\n<p>Another options is to can override the param that is displayed and use the routes you already have:</p>\n\n<pre><code>class Product\n\n  def to_param\n    name.parameterize\n  end\n\n  ...\nend\n</code></pre>\n\n<p>This will give you routes like this:</p>\n\n<pre><code>/products/foo\n/products/darth-vader-marshmallows\n</code></pre>\n\n<p>It would be worth your while to review the Rails routing documentation here: <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a></p>\n"}], "owner": {"reputation": 139, "user_id": 4966448, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a9f6bede9ac0b8c609e6d10bcafc24aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Araujo", "link": "https://stackoverflow.com/users/4966448/alejandro-araujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 33928467, "answer_count": 1, "score": -1, "last_activity_date": 1448495645, "creation_date": 1448492118, "question_id": 33927853, "link": "https://stackoverflow.com/questions/33927853/rails-4-routing-error-no-route-matches-get-project", "title": "Rails 4 routing error &#39;No route matches [GET] &quot;/project&quot;", "body": "<p>I moved my rails project to another computer and I getting this error:</p>\n\n<pre><code>No route matches [GET] \"/project\"\n\nRails.root: /home/user/project\n</code></pre>\n\n<p>I already trying everything and still doesn't work.</p>\n\n<p>My routes.rb is the following:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :orders\n  get 'product_statuses/list'\n\n  resources :customers do\n    resources :shipping_addresses\n  end\n\n  resources :products do\n    resources :product_details do\n      resources :product_statuses\n    end\n    resources :prices\n  end\n\n  get 'welcome/index'\n\nend\n</code></pre>\n\n<p>I really need help :( please.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "regex", "sed", "zsh", "semantic-versioning"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1448492403, "post_id": 33927785, "comment_id": 55616777, "body": "I believe non-capturing groups (<code>(?: ... )</code>) aren&#39;t available in sed. More info: <a href=\"http://stackoverflow.com/questions/4823864/how-do-you-specify-non-capturing-brackets-in-sed\" title=\"how do you specify non capturing brackets in sed\">stackoverflow.com/questions/4823864/&hellip;</a>"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1448500064, "post_id": 33927785, "comment_id": 55618936, "body": "While capture groups are probably you&#39;re main problem, I&#39;d be surprised if the stock install of <code>sed</code> in OSX supports <code>\\d</code>, use <code>[0-9]</code> instead. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 12680, "user_id": 809944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/10467e82d1ff23f3be6ec26723a09101?s=128&d=identicon&r=PG", "display_name": "mokagio", "link": "https://stackoverflow.com/users/809944/mokagio"}, "edited": false, "score": 0, "creation_date": 1448751797, "post_id": 33928475, "comment_id": 55711327, "body": "Thanks @fedorqui, but although correct, your answer doesn&#39;t work on OS X&#39;s stock <code>sed</code>."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 12680, "user_id": 809944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/10467e82d1ff23f3be6ec26723a09101?s=128&d=identicon&r=PG", "display_name": "mokagio", "link": "https://stackoverflow.com/users/809944/mokagio"}, "edited": false, "score": 0, "creation_date": 1448799465, "post_id": 33928475, "comment_id": 55721210, "body": "@mokagio that&#39;s weird! I don&#39;t have such version here, you may want to add the output to see what is missing to make it BSD compatible."}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": false, "score": 2, "last_activity_date": 1448496548, "last_edit_date": 1448496548, "creation_date": 1448495709, "answer_id": 33928475, "question_id": 33927785, "link": "https://stackoverflow.com/questions/33927785/regex-substitution-works-in-ruby-gsub-but-not-with-sed/33928475#33928475", "title": "RegEx substitution works in Ruby gsub, but not with sed", "body": "<p>If you want to make strings like <code>1.2.3-prefix.42</code> become <code>1.2.3</code> you don't have to prepare such complicated <code>sed</code> expression.</p>\n\n<p>Just check if the string starts with a combination of three numbers separated by dots and catch it. Then, print it back:</p>\n\n<pre><code>$ sed -r 's/^([0-9]\\.[0-9]\\.[0-9]).*/\\1/' &lt;&lt;&lt; \"1.2.3-prefix.42\"\n1.2.3\n</code></pre>\n\n<p>Since the rest of the patterns you are using in the Ruby expression use <code>?</code> we can assume they are optional, so I am not including them.</p>\n"}, {"comments": [{"owner": {"reputation": 12680, "user_id": 809944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/10467e82d1ff23f3be6ec26723a09101?s=128&d=identicon&r=PG", "display_name": "mokagio", "link": "https://stackoverflow.com/users/809944/mokagio"}, "edited": false, "score": 0, "creation_date": 1448751982, "post_id": 33930788, "comment_id": 55711371, "body": "Thanks @pguardiario. After all &quot;the easiest way to solve a problem is not to have it in the first place.&quot;"}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 1, "last_activity_date": 1448513246, "creation_date": 1448513246, "answer_id": 33930788, "question_id": 33927785, "link": "https://stackoverflow.com/questions/33927785/regex-substitution-works-in-ruby-gsub-but-not-with-sed/33930788#33930788", "title": "RegEx substitution works in Ruby gsub, but not with sed", "body": "<p>It sounds like you're more comfortable with ruby, you can use it like sed:</p>\n\n<pre><code>echo '1.2.3-prefix.42' | ruby.exe -ne 'puts $_.sub /[^\\d.].+/, \"\"'\n#=&gt; 1.2.3\n</code></pre>\n\n<p>I don't think you really want to learn sed if you don't need to.</p>\n"}], "owner": {"reputation": 12680, "user_id": 809944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/10467e82d1ff23f3be6ec26723a09101?s=128&d=identicon&r=PG", "display_name": "mokagio", "link": "https://stackoverflow.com/users/809944/mokagio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 33930788, "answer_count": 2, "score": 0, "last_activity_date": 1448513246, "creation_date": 1448491764, "last_edit_date": 1448492628, "question_id": 33927785, "link": "https://stackoverflow.com/questions/33927785/regex-substitution-works-in-ruby-gsub-but-not-with-sed", "title": "RegEx substitution works in Ruby gsub, but not with sed", "body": "<p>I'm trying to strip prefixes from a SemVer, i.e, making <code>1.2.3-prefix.42</code> into <code>1.2.3</code>.</p>\n\n<p>I'm using this RegEx found in <a href=\"https://github.com/mojombo/semver/issues/32#issuecomment-7663411\" rel=\"nofollow\">https://github.com/mojombo/semver/issues/32#issuecomment-7663411</a>:</p>\n\n<pre><code>^(\\d+\\.\\d+\\.\\d+)(?:-([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?(?:\\+([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?\n</code></pre>\n\n<p>When using Ruby's <code>gsub</code> method, it works:</p>\n\n<pre><code>puts '1.2.3-alpha.4'.gsub(/^(\\d+\\.\\d+\\.\\d+)(?:-([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?(?:\\+([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?$/, '\\1')\n# =&gt; 1.2.3\n</code></pre>\n\n<p>But when using <code>sed</code> form the terminal it doesn't:</p>\n\n<pre><code>$ echo '1.2.3-alpha.4' | sed -e 's/^(\\d+\\.\\d+\\.\\d+)(?:-([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?(?:\\+([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?$/\\1/g'\n$ 1.2.3-alpha.4\n</code></pre>\n\n<p>What am I missing? </p>\n\n<p>I'm using zsh on Mac OS X.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "edited": false, "score": 2, "creation_date": 1448491875, "post_id": 33927803, "comment_id": 55616574, "body": "No, <code>acosh</code> is inverse hyperbolic cosine. Inverse cosine is <code>acos</code>."}, {"owner": {"reputation": 13, "user_id": 5606256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1508969979430864/picture?type=large", "display_name": "Dbl", "link": "https://stackoverflow.com/users/5606256/dbl"}, "edited": false, "score": 0, "creation_date": 1448491964, "post_id": 33927803, "comment_id": 55616613, "body": "Ah thank you :) I looked there too but I could not find it because the function name is very &#39;shortcuted&#39; and there is not a long description to it with an math example."}, {"owner": {"reputation": 1135, "user_id": 5063263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b9dadb72e3e03e28dc7f64b43353f1e5?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/5063263/ivan"}, "edited": false, "score": 0, "creation_date": 1448492006, "post_id": 33927803, "comment_id": 55616633, "body": "No prob, hope it helped c:"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1448500989, "post_id": 33927803, "comment_id": 55619199, "body": "Yes, if it was not obvious, <code>acos</code> means arccos. Writing <code>cos-1()</code> wouldn&#39;t make sense since <code>-</code> would be interpreted oddly."}], "tags": [], "owner": {"reputation": 1135, "user_id": 5063263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b9dadb72e3e03e28dc7f64b43353f1e5?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/5063263/ivan"}, "is_accepted": true, "score": 3, "last_activity_date": 1448491944, "last_edit_date": 1448491944, "creation_date": 1448491845, "answer_id": 33927803, "question_id": 33927767, "link": "https://stackoverflow.com/questions/33927767/is-there-a-built-in-inverse-cosine-function/33927803#33927803", "title": "Is there a built-in inverse cosine function?", "body": "<p>According to <a href=\"http://ruby-doc.org/core-1.9.3/Math.html\" rel=\"nofollow\">ruby's math docs</a> the way to use inverse cosine is like this </p>\n\n<blockquote>\n  <p>acos(x) \u2192 float</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 5606256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1508969979430864/picture?type=large", "display_name": "Dbl", "link": "https://stackoverflow.com/users/5606256/dbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 33927803, "answer_count": 1, "score": 1, "last_activity_date": 1448491945, "creation_date": 1448491702, "last_edit_date": 1448491945, "question_id": 33927767, "link": "https://stackoverflow.com/questions/33927767/is-there-a-built-in-inverse-cosine-function", "title": "Is there a built-in inverse cosine function?", "body": "<p>I can not figure out how to call the <code>Math.cos</code> function within ruby to do something like this:</p>\n\n<blockquote>\n  <p>cos<sup>\u22121</sup>(1)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "automation", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5606268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d17643337f1f8efd6dbf620f98951d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kpras", "link": "https://stackoverflow.com/users/5606268/kpras"}, "edited": false, "score": 0, "creation_date": 1448652159, "post_id": 33928396, "comment_id": 55684650, "body": "I tried using pry-byebug, its the same case...    43: def some_method     44:   puts &#39;Hello World&#39; # Run &#39;step&#39; in the console to move here     45: end     46:      47: binding.pry  =&gt; 48: some_method          # Execution will stop here.     49: puts &#39;Goodbye World&#39; # Run &#39;next&#39; in the console to move here.  [1] pry(main)&gt; blah blah................................     no matter what commands I give here its all taking as notepad nothing happening... btw am using rubymine editor with cucumber"}], "tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 0, "last_activity_date": 1448495188, "creation_date": 1448495188, "answer_id": 33928396, "question_id": 33927760, "link": "https://stackoverflow.com/questions/33927760/pry-gem-is-not-working-on-ruby-2-it-got-stuck/33928396#33928396", "title": "pry gem is not working on ruby 2 &amp; it got stuck", "body": "<p>I think you should read <code>pry-debugger</code> <a href=\"https://github.com/nixme/pry-debugger#using-mri-200-use-pry-byebug\" rel=\"nofollow\">README</a></p>\n\n<blockquote>\n  <p>Using MRI 2.0.0+? Use <a href=\"https://github.com/deivid-rodriguez/pry-byebug\" rel=\"nofollow\">pry-byebug</a>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 5618339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5fe7522e277d24645a3d02e4f0b8bd3d?s=128&d=identicon&r=PG&f=1", "display_name": "King", "link": "https://stackoverflow.com/users/5618339/king"}, "is_accepted": false, "score": -1, "last_activity_date": 1456161223, "creation_date": 1456161223, "answer_id": 35559737, "question_id": 33927760, "link": "https://stackoverflow.com/questions/33927760/pry-gem-is-not-working-on-ruby-2-it-got-stuck/35559737#35559737", "title": "pry gem is not working on ruby 2 &amp; it got stuck", "body": "<p>Are you using GitBash?</p>\n\n<p>It wasn't working for me in GitBash but I tried it in Command Prompt and works fine.</p>\n"}], "owner": {"reputation": 113, "user_id": 5606268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d17643337f1f8efd6dbf620f98951d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kpras", "link": "https://stackoverflow.com/users/5606268/kpras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456161223, "creation_date": 1448491634, "last_edit_date": 1448492204, "question_id": 33927760, "link": "https://stackoverflow.com/questions/33927760/pry-gem-is-not-working-on-ruby-2-it-got-stuck", "title": "pry gem is not working on ruby 2 &amp; it got stuck", "body": "<p>Let me write a simple example</p>\n\n<pre><code>a = 2\n\nb = 6\n\nc = a + b\nputs c\nrequire 'pry-debugger'\nbinding.pry\nputs c\n</code></pre>\n\n<p>when I do this</p>\n\n<pre><code>    34: \n    35: c = a + b\n    36: puts c\n    37: require 'pry-byebug'\n    38: binding.pry\n =&gt; 39: puts c\n\n[1] pry(main)&gt; puts b\n</code></pre>\n\n<p>After this <code>puts b</code>, I am not seeing any result at all, no matter how many times I do it. Why is that, and how should I fix this?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": true, "score": 2, "last_activity_date": 1448496305, "last_edit_date": 1448496305, "creation_date": 1448495402, "answer_id": 33928420, "question_id": 33927713, "link": "https://stackoverflow.com/questions/33927713/rspec-before-block-and-order-of-processing/33928420#33928420", "title": "Rspec before block and order of processing", "body": "<p>Use <code>let</code></p>\n\n<pre><code>describe 'Trying to get this to work' do\n  let(:object){ Class.new('Old Value') }\n\n  it \"object.value should return #{object.value}\" do\n    expect(object.value).to eq 'Old Value'\n  end\n\n  describe 'Try a before hook' do\n    let(:object){ Class.new('New Value') }\n\n    it \"object.value should return #{object.value}\" do\n      expect(object.value).to eq 'New Value'\n    end\n  end\nend\n</code></pre>\n\n<p>Also I don't think that you should rely on something external in your descriptions. You should declare <code>it</code> more explicitly:</p>\n\n<pre><code>it \"object.value should return new value\"\n</code></pre>\n\n<p>Much simpler!</p>\n"}], "owner": {"reputation": 1010, "user_id": 212511, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/115fc9133023ca342ff5b7f338191f60?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/212511/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 33928420, "answer_count": 1, "score": 1, "last_activity_date": 1448496305, "creation_date": 1448491421, "question_id": 33927713, "link": "https://stackoverflow.com/questions/33927713/rspec-before-block-and-order-of-processing", "title": "Rspec before block and order of processing", "body": "<p>I have a describe block in rspec and it looks something like this:</p>\n\n<pre><code>describe 'Trying to get this to work' do\n  object = Class.new('Old Value')\n\n  it \"object.value should return #{object.value}\" do\n    expect(object.value).to eq 'Old Value'\n  end\n\n  describe 'Try a before hook' do\n    before {\n      object.update_value 'New Value'\n    }\n\n    it \"object.value should return #{object.value}\" do\n      expect(object.value).to eq 'New Value'\n    end\n  end\nend\n</code></pre>\n\n<p>I am expecting to see this output:</p>\n\n<pre><code>Trying to get this to work\nobject.value should return Old Value\nTry a before hook\n  object.value should return New Value\n</code></pre>\n\n<p>But this is what I am actually seeing:</p>\n\n<pre><code>Trying to get this to work\nobject.value should return Old Value\nTry a before hook\n  object.value should return Old Value\n</code></pre>\n\n<p>But the tests pass so I know that in my second example object.value == 'New Value'.</p>\n\n<p>How does Rspec process these blocks and why am I not seeing the updated object value in the description of my second example?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448492866, "post_id": 33927657, "comment_id": 55616981, "body": "A wildcard is not a file... And the test is brittle, as it does not guarantee the exact file you target to exist. How about testing with the actual file name?"}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448493489, "post_id": 33927657, "comment_id": 55617213, "body": "In short, because it&#39;s complicated. The wildcard here only ignores like an MD5 string at the end of the file, and transferring that in this application is probably more work than it&#39;s worth."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1448495488, "post_id": 33927657, "comment_id": 55617826, "body": "As your test suite grows, that can get hard to debug. The solution from @fl00r works, but the test remains brittle. The kind of problem you can get is when you&#39;ll add tests that also expect something on these files. Please just keep in mind that there seems to be side-effects to this test (well, it also depends on what the suite does around)."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448495587, "post_id": 33927657, "comment_id": 55617857, "body": "As an alternative, you could try the construct with <code>allow(...).to_receive(...).and_return(...)</code> to eliminate side effects."}], "answers": [{"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": true, "score": 1, "last_activity_date": 1448491478, "creation_date": 1448491478, "answer_id": 33927734, "question_id": 33927657, "link": "https://stackoverflow.com/questions/33927657/rspec-expect-file-to-exist-with-wildcard/33927734#33927734", "title": "Rspec: expect file to exist with wildcard", "body": "<p>Maybe something like this?</p>\n\n<pre><code>low_res = Dir[\"#{Rails.root}/public/files/low_resolution_#{id}_*\"]\nexpect(low_res).should_not be_empty\n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 33927734, "answer_count": 1, "score": 1, "last_activity_date": 1448491478, "creation_date": 1448491113, "question_id": 33927657, "link": "https://stackoverflow.com/questions/33927657/rspec-expect-file-to-exist-with-wildcard", "title": "Rspec: expect file to exist with wildcard", "body": "<p>I'm testing with Rspec whether a file has been saved. I can guarantee that it has, like in Finder, etc., but my test fails:</p>\n\n<pre><code>it 'saved a low resolution file' do\n  expect(File).to exist(\"#{Rails.root}/public/files/low_resolution_#{id}_*\")\nend\n</code></pre>\n\n<p>Can I not use wildcards there? What am I missing?</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 1, "creation_date": 1448492244, "post_id": 33927634, "comment_id": 55616720, "body": "Can you post an example of an expected text and the real text? Or better: Show an example of a test with the result you want to get better."}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1448494904, "post_id": 33927634, "comment_id": 55617668, "body": "@Knut thanks for the suggestion, done! :-) Also the command line doesn&#39;t have all the syntax colours that markdown shows either..."}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1448539697, "post_id": 33927634, "comment_id": 55635871, "body": "Can you post also your Struct-definitions? You don&#39;t want to adapt <code>to_s</code>, but Minitest uses the <code>inspect</code> command (often they have the same result, but you can redefine them separate). Is this a solution for you?"}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1448566476, "post_id": 33927634, "comment_id": 55650699, "body": "I&#39;d really like an extensible solution, plug and play so to speak - to my eyes the solution would be to have a &#39;per string diffing&#39; solution - instead it uses a &#39;per line&#39; diffing solution, so if every change is on the same line it doesn&#39;t show it. Thoughts?"}], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 1338031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/885297a97800279b1518f519497ee77d?s=128&d=identicon&r=PG", "display_name": "theme", "link": "https://stackoverflow.com/users/1338031/theme"}, "is_accepted": false, "score": 2, "last_activity_date": 1545036438, "last_edit_date": 1545036438, "creation_date": 1534398002, "answer_id": 51870258, "question_id": 33927634, "link": "https://stackoverflow.com/questions/33927634/better-diffs-with-minitest/51870258#51870258", "title": "Better diffs with minitest", "body": "<p><a href=\"https://github.com/angelkar/pretty-diffs\" rel=\"nofollow noreferrer\">pretty-diff</a></p>\n\n<p>I had the same problem, and in case of invisible blank characters, this gem is still not good enough for debugging.  I end up adding <code>.inspect</code> to both String that I passed to <code>assert_equal</code> in minitest test case.</p>\n"}], "owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1545036438, "creation_date": 1448490991, "last_edit_date": 1448494888, "question_id": 33927634, "link": "https://stackoverflow.com/questions/33927634/better-diffs-with-minitest", "title": "Better diffs with minitest", "body": "<p>I'm looking at my test case results, and it's far to difficult to see where the one small failure in my test is coming from. </p>\n\n<p>I'm dealing with reasonable sized data structures - and I don't want to change the <code>to_s</code> method so that it's slightly better for the <strong>minitest</strong> diff. </p>\n\n<p>I've looked at the reporters but they don't seem to have anything like what I'm looking for. (I'm using ruby 1.9.3)</p>\n\n<p>Is there any way that <em>minitest</em> or some library for minitest could highlight the part of the string that is different between two results?\nOr is there something I'm missing that allows you to visually look at the diff more easily?</p>\n\n<p>Edit: Example</p>\n\n<pre><code>Minitest::Assertion:         \n--- expected\n+++ actual\n    @@ -1 +1 @@\n\n    -#&lt;struct MyModule::Swipe id=0, lat=37.62996, lng=-122.42115, route=#&lt;struct MyModule::Route id=17, bus_name=\"test_name\", stops=[#&lt;struct MyModule::Stop id=29, name=\"Cool Stop\"&gt;]&gt;, date_time=\"2015-10-29T11:05:02+00:00\"&gt;\n\n    +#&lt;struct MyModule::Swipe id=0, lat=37.62996, lng=-122.42115, route=#&lt;struct MyModule::Route id=17, bus_name=\"test_name\", stops=[#&lt;struct MyModule::Stop id=\"29\", name=\"Cool Stop\"&gt;]&gt;, date_time=\"2015-10-29T11:05:02+00:00\"&gt;\n</code></pre>\n\n<p>Instead could show the line, and highlight in another colour the <code>id=\"29\"</code> vs the <code>id=29</code> only. Minitest seems to show the diff based on the lines printed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack"], "comments": [{"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448490229, "post_id": 33927468, "comment_id": 55615916, "body": "here is a free version of the book. <a href=\"http://rebuilding-rails.com/RebuildingRailsFree.pdf\" rel=\"nofollow noreferrer\">rebuilding-rails.com/RebuildingRailsFree.pdf</a>"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1448490672, "post_id": 33927468, "comment_id": 55616098, "body": "Show your exact code"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1448490951, "post_id": 33927468, "comment_id": 55616203, "body": "Mistake should be in <code>rulers&#47;lib&#47;rulers.rb</code>."}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "reply_to_user": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1448491119, "post_id": 33927468, "comment_id": 55616273, "body": "this is my rulers.rb  require &quot;rulers/version&quot;  module Rulers \tclass Application \t   def call(env) \t     [200, {&#39;Content-Type&#39; =&gt; &#39;text/html&#39;}, \t       [&quot;Hello from Ruby on Rulers!&quot; + env.inspect]] \t   end \tend end"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 1, "creation_date": 1448491253, "post_id": 33927468, "comment_id": 55616320, "body": "Have you built the rulers gem and installed it properly?"}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "edited": false, "score": 0, "creation_date": 1448491877, "post_id": 33927468, "comment_id": 55616577, "body": "For future viewers: the free version above is just the first few chapters. (I&#39;m the author)"}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "edited": false, "score": 0, "creation_date": 1448492092, "post_id": 33927468, "comment_id": 55616657, "body": "That&#39;s a bit of an odd error message for that part of the book. You&#39;ve added the &quot;+ env.inspect&quot;, which is presumably where that error came from. But env should be defined there -- it should be the param. Did it work before you added the &quot;+ env.inspect&quot; to the end?"}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "edited": false, "score": 0, "creation_date": 1448492170, "post_id": 33927468, "comment_id": 55616692, "body": "Also: can you post the call stack? (edit: or check your code into a repo and post a link?)"}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448492207, "post_id": 33927468, "comment_id": 55616702, "body": "no. it didn&#39;t work. I added env.inspect to see what&#39;s wrong. But it never reach that line of the code."}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448492391, "post_id": 33927468, "comment_id": 55616769, "body": "gem was built and installed."}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448492729, "post_id": 33927468, "comment_id": 55616913, "body": "here is my repo for the ruler gem <a href=\"https://github.com/hszeto/rulers\" rel=\"nofollow noreferrer\">github.com/hszeto/rulers</a>"}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "edited": false, "score": 0, "creation_date": 1448492817, "post_id": 33927468, "comment_id": 55616962, "body": "Could you push to that repo? It has no code in lib/rulers.rb"}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448492969, "post_id": 33927468, "comment_id": 55617029, "body": "sorry. please reload."}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448493013, "post_id": 33927468, "comment_id": 55617045, "body": "here is the repo for the app. <a href=\"https://github.com/hszeto/best_quotes\" rel=\"nofollow noreferrer\">github.com/hszeto/best_quotes</a>"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448493412, "post_id": 33927468, "comment_id": 55617186, "body": "The error mentions <code>env</code> as a class method. Please post more context and code. The repo is still mostly empty."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1448723800, "post_id": 33927468, "comment_id": 55701989, "body": "Just a reminder that the question itself should contains everything needed to answer it--reference to an off-site repo may be useful to those generous persons who want to help, but the question itself still needs improvement."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 0, "creation_date": 1448494130, "post_id": 33928116, "comment_id": 55617408, "body": "Thanks Noah Gibbs! how do you see those unicode? I&#39;m using Sublime Text."}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "edited": false, "score": 0, "creation_date": 1448519192, "post_id": 33928116, "comment_id": 55624087, "body": "I found them in emacs -- vi also responds oddly to them."}], "tags": [], "owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1448493529, "creation_date": 1448493529, "answer_id": 33928116, "question_id": 33927468, "link": "https://stackoverflow.com/questions/33927468/rackup-undefined-local-variable-or-method-env-for-rulersapplicationclass-n/33928116#33928116", "title": "rackup undefined local variable or method `env&#39; for Rulers::Application:Class (NameError)", "body": "<p>You got some kind of weird Unicode characters in your lib/rulers.rb. Reformat with normal spaces and/or tabs and it'll work fine. I reproduced the same bug locally from your repo (after \"git rm rulers-0.1.0.gem\" in your Rulers directory), fixed the spaces and it works fine for me.</p>\n"}], "owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "accepted_answer_id": 33928116, "answer_count": 1, "score": 0, "last_activity_date": 1448493529, "creation_date": 1448490186, "question_id": 33927468, "link": "https://stackoverflow.com/questions/33927468/rackup-undefined-local-variable-or-method-env-for-rulersapplicationclass-n", "title": "rackup undefined local variable or method `env&#39; for Rulers::Application:Class (NameError)", "body": "<p>I just start reading \"Rebuilding Rails\" by Noah Gibbs. I'm stuck at page17 where def call(env) is declared.</p>\n\n<p>However, when I run rackup, I came across this error:</p>\n\n<pre><code>undefined local variable or method `env' for Rulers::Application:Class (NameError)\n</code></pre>\n\n<p>How can I define 'env' ?</p>\n"}, {"tags": ["ruby", "linux", "centos", "puppet"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 1, "creation_date": 1448490349, "post_id": 33927359, "comment_id": 55615967, "body": "What commands do you use to execute either of them?"}, {"owner": {"reputation": 25, "user_id": 5561703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18f8140818476785cba68813303081?s=128&d=identicon&r=PG&f=1", "display_name": "Kier", "link": "https://stackoverflow.com/users/5561703/kier"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1448490695, "post_id": 33927359, "comment_id": 55616103, "body": "<code>service puppetdb start</code> or <code>puppet resource service puppetdb ensure=running</code>. I have updated the OP."}, {"owner": {"reputation": 25, "user_id": 5561703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18f8140818476785cba68813303081?s=128&d=identicon&r=PG&f=1", "display_name": "Kier", "link": "https://stackoverflow.com/users/5561703/kier"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1448491738, "post_id": 33927359, "comment_id": 55616508, "body": "@fedorqui I have updated the OP with further information once again."}, {"owner": {"reputation": 1141, "user_id": 204400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cb70c33a16ff8131c91d6eb84aa65e80?s=128&d=identicon&r=PG", "display_name": "Russell Mull", "link": "https://stackoverflow.com/users/204400/russell-mull"}, "edited": false, "score": 0, "creation_date": 1448491871, "post_id": 33927359, "comment_id": 55616570, "body": "From puppetdb.log, it appears that puppetdb was in fact running; I&#39;m not sure why the service wrapper reported otherwise. Can you drop in to #puppet on freenode? We may be able to help you out more easily over there."}, {"owner": {"reputation": 25, "user_id": 5561703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18f8140818476785cba68813303081?s=128&d=identicon&r=PG&f=1", "display_name": "Kier", "link": "https://stackoverflow.com/users/5561703/kier"}, "edited": false, "score": 0, "creation_date": 1448492421, "post_id": 33927359, "comment_id": 55616785, "body": "Hi Russell. I think I&#39;m onto it. It seems to be an SSL issue. I will join #puppet now and discuss."}], "owner": {"reputation": 25, "user_id": 5561703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18f8140818476785cba68813303081?s=128&d=identicon&r=PG&f=1", "display_name": "Kier", "link": "https://stackoverflow.com/users/5561703/kier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 989, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466754903, "creation_date": 1448489744, "last_edit_date": 1448491638, "question_id": 33927359, "link": "https://stackoverflow.com/questions/33927359/puppetdb-wont-start-as-service-but-runs-in-foreground", "title": "PuppetDB won&#39;t start as service, but runs in foreground", "body": "<p>Having started with the Puppet Learning VM, I'm trying to install puppet for the first time. My issue is that I cannot get PuppetDB to start as a service, and I cannot find an error message indicative enough of any issue. (<code>Shutting down due to JVM shutdown hook.</code>)</p>\n\n<p>Yet when I run <code>puppetdb foreground</code>, PuppetDB seems to start fine without shutting down, however there is no further output after <code>PuppetDB finished starting, disabling maintenance mode</code>.</p>\n\n<p>Can anyone suggest what the issue might be? Is there anywhere else I can look for logs that might make things clearer? </p>\n\n<p>Is it a timeout, because the final output <code>PuppetDB finished starting, disabling maintenance mode</code> isn't what's is expected?</p>\n\n<p>I have confirmed that <code>puppetdb foreground</code> indeed works, by checking <a href=\"http://localhost:8080/pdb/dashboard/index.html\" rel=\"nofollow\">http://localhost:8080/pdb/dashboard/index.html</a>.</p>\n\n<p>To start puppetdb as a service, I run <code>service puppetdb start</code> or <code>puppet resource service puppetdb ensure=running</code>.</p>\n\n<pre><code># puppet resource service puppetdb ensure=running\nError: Could not start Service[puppetdb]: Execution of '/usr/bin/systemctl start puppetdb' returned 1: Job for puppetdb.service failed. See 'systemctl status puppetdb.service' and 'journalctl -xn' for details.\nError: /Service[puppetdb]/ensure: change from stopped to running failed: Could not start Service[puppetdb]: Execution of '/usr/bin/systemctl start puppetdb' returned 1: Job for puppetdb.service failed. See 'systemctl status puppetdb.service' and 'journalctl -xn' for details.\n</code></pre>\n\n<p>journalctl</p>\n\n<pre><code>Nov 25 21:58:36 hostname systemd[1]: Unit puppetdb.service entered failed state.\nNov 25 21:58:36 hostname systemd[1]: Failed to start puppetdb Service.\nNov 25 21:58:35 hostname systemd[1]: puppetdb.service operation timed out. Stopping.\nNov 25 21:58:01 hostname CROND[15785]: (root) CMD (/usr/local/rtm/bin/rtm 32 &gt; /dev/null 2&gt; /dev/null)\nNov 25 21:58:01 hostname systemd[1]: Started Session c1982 of user root.\nNov 25 21:58:01 hostname systemd[1]: Starting Session c1982 of user root.\nNov 25 21:57:01 hostname CROND[15496]: (root) CMD (/usr/local/rtm/bin/rtm 32 &gt; /dev/null 2&gt; /dev/null)\nNov 25 21:57:01 hostname systemd[1]: Started Session c1981 of user root.\nNov 25 21:57:01 hostname systemd[1]: Starting Session c1981 of user root.\nNov 25 21:56:01 hostname CROND[15207]: (root) CMD (/usr/local/rtm/bin/rtm 32 &gt; /dev/null 2&gt; /dev/null)\nNov 25 21:56:01 hostname systemd[1]: Started Session c1980 of user root.\nNov 25 21:56:01 hostname systemd[1]: Starting Session c1980 of user root.\nNov 25 21:55:35 hostname systemd[1]: Starting puppetdb Service...\n</code></pre>\n\n<p>/var/log/puppetlabs/puppetdb/puppetdb.log</p>\n\n<pre><code>2015-11-25 21:55:52,831 INFO  [o.e.j.u.log] Logging initialized @16842ms\n2015-11-25 21:55:55,301 INFO  [p.t.s.w.jetty9-service] Initializing web server(s).\n2015-11-25 21:55:55,334 INFO  [p.p.pdb-routing] Starting PuppetDB, entering maintenance mode\n2015-11-25 21:55:55,369 INFO  [p.t.s.n.nrepl-service] nREPL service disabled, not starting\n2015-11-25 21:55:55,370 INFO  [p.t.s.w.jetty9-service] Starting web server(s).\n2015-11-25 21:55:55,480 INFO  [p.t.s.w.jetty9-core] Starting web server.\n2015-11-25 21:55:55,483 INFO  [o.e.j.s.Server] jetty-9.2.z-SNAPSHOT\n2015-11-25 21:55:55,511 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@689754d0{/pdb,null,AVAILABLE}\n2015-11-25 21:55:55,525 INFO  [o.e.j.s.ServerConnector] Started ServerConnector@594ee70f{HTTP/1.1}{127.0.0.1:8080}\n2015-11-25 21:55:55,568 INFO  [o.e.j.s.ServerConnector] Started ServerConnector@59de9c86{SSL-HTTP/1.1}{127.0.0.1:8081}\n2015-11-25 21:55:55,569 INFO  [o.e.j.s.Server] Started @19582ms\n2015-11-25 21:55:55,572 INFO  [p.p.metrics] Starting metrics server\n2015-11-25 21:55:55,574 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@322f974b{/metrics,null,AVAILABLE}\n2015-11-25 21:55:55,597 INFO  [p.p.c.services] PuppetDB version 3.2.0\n2015-11-25 21:55:55,691 INFO  [p.p.s.migrate] There are no pending migrations\n2015-11-25 21:55:55,701 INFO  [c.j.b.BoneCP] Shutting down connection pool...\n2015-11-25 21:55:55,703 INFO  [c.j.b.BoneCP] Connection pool has been shutdown.\n2015-11-25 21:55:55,705 INFO  [p.p.c.services] Starting broker\n2015-11-25 21:55:56,370 INFO  [o.a.a.s.k.MessageDatabase] KahaDB is version 5\n2015-11-25 21:55:56,379 INFO  [o.a.a.s.k.MessageDatabase] Recovering from the journal ...\n2015-11-25 21:55:56,381 INFO  [o.a.a.s.k.MessageDatabase] Recovery replayed 32 operations from the journal in 0.009 seconds.\n2015-11-25 21:55:56,474 INFO  [p.p.c.services] Starting sweep of stale reports (threshold: 14 days)\n2015-11-25 21:55:56,496 INFO  [p.p.c.services] Finished sweep of stale reports (threshold: 14 days)\n2015-11-25 21:55:56,497 INFO  [p.p.c.services] Starting database garbage collection\n2015-11-25 21:55:56,517 INFO  [p.p.c.services] Finished database garbage collection\n2015-11-25 21:55:56,591 INFO  [p.p.dashboard] Redirecting / to the PuppetDB dashboard\n2015-11-25 21:55:56,594 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@2372a439{/,null,AVAILABLE}\n2015-11-25 21:55:56,595 INFO  [p.p.pdb-routing] PuppetDB finished starting, disabling maintenance mode\n2015-11-25 21:58:35,987 INFO  [p.t.internal] Shutting down due to JVM shutdown hook.\n2015-11-25 21:58:35,988 INFO  [p.t.internal] Beginning shutdown sequence\n2015-11-25 21:58:36,005 INFO  [p.p.c.services] Shutdown request received; puppetdb exiting.\n2015-11-25 21:58:36,006 INFO  [p.p.c.services] Shutting down the messsage queues.\n2015-11-25 21:58:36,525 INFO  [c.j.b.BoneCP] Shutting down connection pool...\n2015-11-25 21:58:36,528 INFO  [c.j.b.BoneCP] Connection pool has been shutdown.\n2015-11-25 21:58:36,528 INFO  [c.j.b.BoneCP] Shutting down connection pool...\n2015-11-25 21:58:36,530 INFO  [c.j.b.BoneCP] Connection pool has been shutdown.\n2015-11-25 21:58:36,532 INFO  [p.t.s.w.jetty9-service] Shutting down web server(s).\n2015-11-25 21:58:36,533 INFO  [p.t.s.w.jetty9-core] Shutting down web server.\n2015-11-25 21:58:36,535 INFO  [o.e.j.s.ServerConnector] Stopped ServerConnector@594ee70f{HTTP/1.1}{127.0.0.1:8080}\n2015-11-25 21:58:36,536 INFO  [o.e.j.s.ServerConnector] Stopped ServerConnector@59de9c86{SSL-HTTP/1.1}{127.0.0.1:8081}\n2015-11-25 21:58:36,536 INFO  [o.e.j.s.h.ContextHandler] Stopped o.e.j.s.h.ContextHandler@2372a439{/,null,UNAVAILABLE}\n2015-11-25 21:58:36,536 INFO  [o.e.j.s.h.ContextHandler] Stopped o.e.j.s.h.ContextHandler@322f974b{/metrics,null,UNAVAILABLE}\n2015-11-25 21:58:36,536 INFO  [o.e.j.s.h.ContextHandler] Stopped o.e.j.s.h.ContextHandler@689754d0{/pdb,null,UNAVAILABLE}\n2015-11-25 21:58:36,537 INFO  [p.t.s.w.jetty9-core] Web server shutdown\n2015-11-25 21:58:36,538 INFO  [p.t.internal] Finished shutdown sequence\n</code></pre>\n\n<p>This is the output when I run <code>puppetdb foreground</code></p>\n\n<pre><code>2015-11-25 22:27:11,806 INFO  [o.e.j.u.log] Logging initialized @11673ms\n2015-11-25 22:27:14,146 INFO  [p.t.s.w.jetty9-service] Initializing web server(s).\n2015-11-25 22:27:14,178 INFO  [p.p.pdb-routing] Starting PuppetDB, entering maintenance mode\n2015-11-25 22:27:14,208 INFO  [p.t.s.n.nrepl-service] nREPL service disabled, not starting\n2015-11-25 22:27:14,209 INFO  [p.t.s.w.jetty9-service] Starting web server(s).\n2015-11-25 22:27:14,314 INFO  [p.t.s.w.jetty9-core] Starting web server.\n2015-11-25 22:27:14,317 INFO  [o.e.j.s.Server] jetty-9.2.z-SNAPSHOT\n2015-11-25 22:27:14,348 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@38979a58{/pdb,null,AVAILABLE}\n2015-11-25 22:27:14,364 INFO  [o.e.j.s.ServerConnector] Started ServerConnector@57333ebe{HTTP/1.1}{127.0.0.1:8080}\n2015-11-25 22:27:14,414 INFO  [o.e.j.s.ServerConnector] Started ServerConnector@14ca5d70{SSL-HTTP/1.1}{127.0.0.1:8081}\n2015-11-25 22:27:14,414 INFO  [o.e.j.s.Server] Started @14283ms\n2015-11-25 22:27:14,417 INFO  [p.p.metrics] Starting metrics server\n2015-11-25 22:27:14,419 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@69ad4539{/metrics,null,AVAILABLE}\n2015-11-25 22:27:14,444 INFO  [p.p.c.services] PuppetDB version 3.2.0\n2015-11-25 22:27:14,555 INFO  [p.p.s.migrate] There are no pending migrations\n2015-11-25 22:27:14,565 INFO  [c.j.b.BoneCP] Shutting down connection pool...\n2015-11-25 22:27:14,568 INFO  [c.j.b.BoneCP] Connection pool has been shutdown.\n2015-11-25 22:27:14,570 INFO  [p.p.c.services] Starting broker\n2015-11-25 22:27:15,245 INFO  [o.a.a.s.k.MessageDatabase] KahaDB is version 5\n2015-11-25 22:27:15,255 INFO  [o.a.a.s.k.MessageDatabase] Recovering from the journal ...\n2015-11-25 22:27:15,258 INFO  [o.a.a.s.k.MessageDatabase] Recovery replayed 32 operations from the journal in 0.01 seconds.\n2015-11-25 22:27:15,361 INFO  [p.p.c.services] Starting sweep of stale reports (threshold: 14 days)\n2015-11-25 22:27:15,382 INFO  [p.p.c.services] Finished sweep of stale reports (threshold: 14 days)\n2015-11-25 22:27:15,383 INFO  [p.p.c.services] Starting database garbage collection\n2015-11-25 22:27:15,400 INFO  [p.p.c.services] Finished database garbage collection\n2015-11-25 22:27:15,487 INFO  [p.p.dashboard] Redirecting / to the PuppetDB dashboard\n2015-11-25 22:27:15,491 INFO  [o.e.j.s.h.ContextHandler] Started o.e.j.s.h.ContextHandler@6f8242ec{/,null,AVAILABLE}\n2015-11-25 22:27:15,492 INFO  [p.p.pdb-routing] PuppetDB finished starting, disabling maintenance mode\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "each", "slim-lang"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1448492747, "post_id": 33927304, "comment_id": 55616928, "body": "One <code>.each</code> is iterating over column names whereas the other is iterating over row data. It&#39;s hard to imagine how you&#39;d combine that into one <code>.each</code>. What you have looks extremely simple to me. You can&#39;t get much more elegant than a loop that says exactly what it does."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1448508417, "post_id": 33927304, "comment_id": 55620885, "body": "What you&#39;re requesting is actually far more complicated than what you currently have."}, {"owner": {"reputation": 851, "user_id": 1159839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT4T9.jpg?s=128&g=1", "display_name": "Jorge Andr&#233; Pereira", "link": "https://stackoverflow.com/users/1159839/jorge-andr%c3%a9-pereira"}, "edited": false, "score": 0, "creation_date": 1448537482, "post_id": 33927304, "comment_id": 55634475, "body": "True, you are right guys, I just wanted to confirm, I am still learning and I was always curious if this could be made even shorter. Thank you for your time! ;)"}], "answers": [{"tags": [], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "is_accepted": false, "score": 0, "last_activity_date": 1448494788, "creation_date": 1448494788, "answer_id": 33928327, "question_id": 33927304, "link": "https://stackoverflow.com/questions/33927304/thead-and-tbody-in-same-ruby-slim-each-cycle/33928327#33928327", "title": "Thead and tbody in same ruby (slim) .each cycle", "body": "<p>With what I see in the question, I'm assuming that there are 3 basic columns needed as follow:</p>\n\n<ul>\n<li>exposition</li>\n<li>frequency</li>\n<li>risk</li>\n</ul>\n\n<p>If those are the only columns and this will be static, one thing you can do is to hard code the <code>thead</code> part of your table, and then loop through your records to populate the <code>tbody</code> as follow:</p>\n\n<pre><code>table id=\"example-datatable\"\n  thead\n    tr\n      th Exposition\n      th Frequency\n      th Risk\n      th\n\n  tbody\n    - @risks.each do |risk|\n      tr\n        td\n          = risk.exposition\n        td\n          = risk.frequency\n        td\n          = risk.risk\n</code></pre>\n\n<p>And that should solve it for you.</p>\n"}], "owner": {"reputation": 851, "user_id": 1159839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT4T9.jpg?s=128&g=1", "display_name": "Jorge Andr&#233; Pereira", "link": "https://stackoverflow.com/users/1159839/jorge-andr%c3%a9-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448494788, "creation_date": 1448489537, "question_id": 33927304, "link": "https://stackoverflow.com/questions/33927304/thead-and-tbody-in-same-ruby-slim-each-cycle", "title": "Thead and tbody in same ruby (slim) .each cycle", "body": "<p>Would anyone be so kind as to help me with a simpler/more elegant way of writing a table in an .erb file?</p>\n\n<p>I currently have this:</p>\n\n<pre><code>table id=\"example-datatable\"\n      thead\n        tr\n          - Risk.column_names.each do |c|\n            th\n              = c.camelize\n\n      tbody\n        - @risks.each do |risk|\n          tr\n            td\n              = risk.exposition\n            td\n              = risk.frequency\n            td\n              = risk.risk\n</code></pre>\n\n<p>Is it possible to use a single cycle and still keep table head and body separate?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1448487550, "post_id": 33926802, "comment_id": 55614650, "body": "What is the value of <code>@owner</code>?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1448487644, "post_id": 33926802, "comment_id": 55614695, "body": "Are you sure <code>@owner</code> is an instance of <code>Owner</code>?"}, {"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "reply_to_user": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1448487665, "post_id": 33926802, "comment_id": 55614709, "body": "Oops, yeah it is current_user"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1448487708, "post_id": 33926802, "comment_id": 55614732, "body": "<code>current_user</code> may be a <code>User</code> class that is unaware of the <code>Owner</code> subclass."}, {"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "reply_to_user": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1448487972, "post_id": 33926802, "comment_id": 55614882, "body": "Basically, @owner is the current_user, but how do you specify it to be instance of Owner?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448488724, "post_id": 33927038, "comment_id": 55615246, "body": "Okay, but it still demands to have user_id in the table Things?"}, {"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448488778, "post_id": 33927038, "comment_id": 55615276, "body": "Do I have to change owner_id to user_id in Things table? Is that the problem and only option to change?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448488885, "post_id": 33927038, "comment_id": 55615333, "body": "It depends which approach you choose. If you only use <code>User</code> and get rid of <code>Owner</code>, of course you&#39;ll need <code>user_id</code>. If you add the <code>has_many :things</code> relation to <code>User</code>, you could set the inverse <code>belongs_to :user</code> in <code>Thing</code> and use the <code>user_id</code> column in <code>things</code>. <code>User has_many :things</code> expects a <code>user_id</code> column in the <code>things</code> table by default, unless stated otherwise."}, {"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448489298, "post_id": 33927038, "comment_id": 55615526, "body": "I need to have Owner model, so I have to use it. So basically you are saying above I must use <code>user_id</code> in Things table in any case?"}, {"owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448489395, "post_id": 33927038, "comment_id": 55615554, "body": "and there is no way to have owner_id in this association as I understand?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "edited": false, "score": 0, "creation_date": 1448489584, "post_id": 33927038, "comment_id": 55615642, "body": "The main point is that you define a association in a subclass of the class you want to use the association for. You have to decide what instance you need <code>current_user</code> to be and define the associations accordingly. Based on this, you&#39;ll need to tweak your foreign keys if the defaults don&#39;t suit you."}], "tags": [], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "is_accepted": true, "score": 0, "last_activity_date": 1448488358, "creation_date": 1448488358, "answer_id": 33927038, "question_id": 33926802, "link": "https://stackoverflow.com/questions/33926802/rails-has-many-through-association-with-inheritance-issue/33927038#33927038", "title": "Rails has_many through association with inheritance issue", "body": "<p>As you state, <code>current_user</code> is an instance of <code>User</code>, not of its subclass, <code>Owner</code>.</p>\n\n<p>If you want to add that relation to the <code>current_user</code>, you could add it to its class, <code>User</code>, instead of <code>Owner</code>:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base # or whatever superclass you have for User\n  has_many :things, dependent: :destroy\nend\n</code></pre>\n\n<p>Otherwise, if you want to stick to <code>Owner</code>, you should overwrite the creation of <code>current_user</code> so that it uses the <code>Owner</code> class instead of <code>User</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 33927038, "answer_count": 1, "score": 0, "last_activity_date": 1448496553, "creation_date": 1448487303, "last_edit_date": 1448496553, "question_id": 33926802, "link": "https://stackoverflow.com/questions/33926802/rails-has-many-through-association-with-inheritance-issue", "title": "Rails has_many through association with inheritance issue", "body": "<p>If we have 3 models => Customer, User and Thing and another model Owner thats inherits from User and we try create a <code>has_many through</code> association like this:</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n has_many :things, :dependent =&gt; :destroy\n has_many :owners, through: :things\nend\n\nclass Thing &lt; ActiveRecord::Base\n belongs_to :customer, foreign_key: \"customer_id\"\n belongs_to :owner, foreign_key: \"owner_id\"\nend\n\nclass Owner &lt; User\n has_many :things, :dependent =&gt; :destroy\n has_many :customers, through: :things\nend\n</code></pre>\n\n<p>Why will <code>@owner.things</code> not work for us? (@owner is an instance of Owner). It gives <code>undefined method \"things\"</code> error.</p>\n\n<p>@owner is the current_user, but how do you specify it to be an instance of User?</p>\n\n<p>Is the only solution to change <code>owner_id</code> to <code>user_id</code> or is there a better solution, please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailchimp", "gibbon"], "comments": [{"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448487918, "post_id": 33926648, "comment_id": 55614853, "body": "I just misspelled it in the question. It is right in my code."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448488297, "post_id": 33926648, "comment_id": 55615026, "body": "Don&#39;t misspell it in the question, fix it so it&#39;s correct when we read it. Also, fix the formatting of your code so it&#39;s readable. As is, it&#39;s not easy to read, which slows and even discourages answers."}], "answers": [{"comments": [{"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448488134, "post_id": 33926827, "comment_id": 55614959, "body": "Sorry, but I am a bit confused."}, {"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448488499, "post_id": 33926827, "comment_id": 55615128, "body": "When I added <code>ActiveRecord::Base</code> to the model and removed <code>@subscriber.valid?</code> and <code>@subscriber.subscribe</code> it worked perfectly but gives the error <code>uninitialized constant Gibbon::Request</code> when I add both of them back. Now when I add <code>include ActiveModel::Validations</code> or <code>include ActiveModel::Model</code> instead of <code>ActiveRecord::Base</code> I still get the uninitilized error."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448488672, "post_id": 33926827, "comment_id": 55615229, "body": "You don&#39;t have to remove any of those methods; by adding <code>ActiveRecord::Base</code> as the superclass you actually <i>make</i> them work. If you removed <code>@subscriber.subscribe</code> though, why would it throw you that error since you don&#39;t call <code>Gibbon::Request</code> anywhere?"}, {"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448489194, "post_id": 33926827, "comment_id": 55615475, "body": "It still isn&#39;t working. I am still getting the <code>uninitialized constant Gibbon::Request</code> error."}, {"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448489529, "post_id": 33926827, "comment_id": 55615618, "body": "When I typed Gibbon, console replied with <code>Gibbon</code> and when I do <code>Gibbon::Request</code>, I get this <code>NameError: uninitialized constant Gibbon::Request</code>."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448489773, "post_id": 33926827, "comment_id": 55615712, "body": "That seems odd. When the gem is loaded, I see it requires <code>Gibbon::Request</code> also. Are you using the latest gem version? Check that you didn&#39;t pin the version in <code>Gemfile</code> and also run a <code>bundle update gibbon</code>."}, {"owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448490556, "post_id": 33926827, "comment_id": 55616047, "body": "Updating my gems fixed it. Thanks a lot Andrei. But I am getting that the user is subscribed in the Rails logger but my mailchimp list does not show any subscribed user. And it is also not logging my API key requests."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "edited": false, "score": 0, "creation_date": 1448536783, "post_id": 33926827, "comment_id": 55634062, "body": "Check that you&#39;re setting the correct API key. I guess we should answer only the initial question, otherwise this SO topic will spread too much. I guess it&#39;s better to open a separate question for each of your issues."}], "tags": [], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "is_accepted": true, "score": 1, "last_activity_date": 1448489178, "last_edit_date": 1448489178, "creation_date": 1448487408, "answer_id": 33926827, "question_id": 33926648, "link": "https://stackoverflow.com/questions/33926648/undefined-method-and-uninitialized-constant-error/33926827#33926827", "title": "Undefined method and uninitialized constant error", "body": "<p>There are several issue with your code: </p>\n\n<ul>\n<li>if your error was <code>uninitialized constant Gibbon::Resquest in subscriber.rb</code>, then probably you've misspelled <code>Request</code>;</li>\n<li><code>save</code> is an <code>ActiveRecord</code> method, not an <code>ActiveModel</code> one. So your model should inherit from <code>ActiveRecord::Base</code> instead of including <code>ActiveModel::Model</code>;</li>\n<li>your validations won't work unless you include <code>ActiveModel::Validations</code>.</li>\n</ul>\n\n<p>These being said, there is no problem with the gem you use. If you add the correct superclass to your model and remove the <code>include</code>, things should work as expected for you.</p>\n\n<p>Regarding the persistence of the constant not being found, have you added <code>gem 'gibbon'</code> in your <code>Gemfile</code> and run <code>bundle</code> afterwards? To check, fire up a Rails console and see if the gem is loaded:</p>\n\n<pre><code>$ rails c\n&gt;&gt; Gibbon\n...\n&gt;&gt; Gibbon::Request\n...\n</code></pre>\n"}], "owner": {"reputation": 264, "user_id": 5451470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c53b4d1f3a1cb6ba56676a8ca27d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5451470/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 33926827, "answer_count": 1, "score": 0, "last_activity_date": 1448489178, "creation_date": 1448486575, "last_edit_date": 1448488535, "question_id": 33926648, "link": "https://stackoverflow.com/questions/33926648/undefined-method-and-uninitialized-constant-error", "title": "Undefined method and uninitialized constant error", "body": "<p>Hey guys I am trying integrate Mailchimp API using gibbon gem but I keep getting an <code>error  undefined method</code>save'`.</p>\n\n<p>My controller code:</p>\n\n<pre><code>class LandingPageController &lt; ApplicationController\n\nlayout 'landing_page'\n\ndef index\n\n@subscriber = Subscriber.new\n\nend\n\n\n\n\ndef create\n    # Instantiate a new object using form parameters\n\n    @subscriber = Subscriber.new(subscriber_params)\n\n    # Save the object\n    if @subscriber.save \n      @subscriber.valid?\n      @subscriber.subscribe\n      # If save succeeds, redirect to the index action\n      flash[:notice] = \"Thank You for subscribing. Your Email ID has been entered successfully into our database.\"\n\n      redirect_to(:action =&gt; 'index')\n    else\n      # If save fails, redisplay the form so user can fix problems\n\n      render('index')\n    end\n  end\n\n\n\n\n\n\n\n  private\n\n    def subscriber_params\n      # same as using \"params[:subject]\", except that it:\n      # - raises an error if :subject is not present\n      # - allows listed attributes to be mass-assigned\n      params.require(:subscriber).permit(:email)\n    end\n\nend\n</code></pre>\n\n<p>This was working perfectly before started the integration.\nSo to debug the error I removed the <code>@subscriber.save</code> to see what happens. Then I get a new error <code>uninitialized constant Gibbon::Request in subscriber.rb</code>.\nMy subscriber.rb code:</p>\n\n<pre><code>class Subscriber\n  include ActiveModel::Model\n  attr_accessor :email, :string\n  validates_presence_of :email\n  validates_format_of :email, with: /\\A[-a-z0-9_+\\.]+\\@([-a-z0-9]+\\.)+[a-z0-9]{2,4}\\z/i\n\n  def subscribe\n    mailchimp = Gibbon::Request.new(api_key: Rails.application.secrets.mailchimp_api_key)\n\n    result = mailchimp.lists.subscribe({\n      :id =&gt; Rails.application.secrets.mailchimp_list_id,\n      :email =&gt; {:email =&gt; self.email},\n      :double_optin =&gt; false,\n      :update_existing =&gt; true,\n      :send_welcome =&gt; true\n    })\n    Rails.logger.info(\"Subscribed #{self.email} to MailChimp\") if result\n  end\n\n\nend\n</code></pre>\n\n<p>I have tried atleast a dozen different fixes. I have tried different versions of gibbon gem, nothing seems to work. I have tried hardcoding my API key instead of getting it from secrets.yml. I have run out of options now and other questions on google. There doesn't seem to be solution to my problem.</p>\n\n<p>Would appreciate any help possible and let me know if you need any other code from my project.</p>\n\n<p>Edit:</p>\n\n<p>I was able to remove the <code>undefined method save</code> error by adding <code>ActiveRecord::Base</code> instead of <code>include ActiveModel::Model</code>. But I still get the <code>uninitialized constant Gibbon::Request</code> error. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1448488248, "post_id": 33926525, "comment_id": 55615008, "body": "And be prepared for the multi-platform development pain! :)"}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1448492095, "post_id": 33926525, "comment_id": 55616659, "body": "File.join always starts from the root which may not be correct if the file is not saved under web root."}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1448492520, "post_id": 33926525, "comment_id": 55616832, "body": "@user938363 you could use <code>File.expand_path</code> to create relative path. Also it the question was just about slashes ;)"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1448492958, "post_id": 33926525, "comment_id": 55617028, "body": "<code>File.join</code> does not &quot;always start at the root.&quot; It starts with whatever the first argument is. (<code>File.expand_path</code> is a great method, though, and underrated as too few people know how to use it with the second argument.)"}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1448493059, "post_id": 33926525, "comment_id": 55617062, "body": "User may specify a path which is out of the web root."}], "tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 9, "last_activity_date": 1448488469, "last_edit_date": 1448488469, "creation_date": 1448486094, "answer_id": 33926525, "question_id": 33926462, "link": "https://stackoverflow.com/questions/33926462/how-to-choose-slash-and-assemble-file-path-in-ruby/33926525#33926525", "title": "How to choose slash and assemble file path in ruby?", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.2.0/File.html#method-c-join\" rel=\"noreferrer\"><code>File.join</code></a> which is OS agnostic:</p>\n\n<pre><code>File.join(\"my\", \"dir\", \"and\", \"my\", \"file\")\n#=&gt; my\\dir\\and\\my\\file for Windows\n#=&gt; my/dir/and/my/file for unix\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "is_accepted": false, "score": 2, "last_activity_date": 1448488440, "last_edit_date": 1448488440, "creation_date": 1448486455, "answer_id": 33926617, "question_id": 33926462, "link": "https://stackoverflow.com/questions/33926462/how-to-choose-slash-and-assemble-file-path-in-ruby/33926617#33926617", "title": "How to choose slash and assemble file path in ruby?", "body": "<p>Ruby uses <code>/</code> as the path separator for both Windows and Unix systems:</p>\n\n<pre><code>PS C:\\Users\\Administrator&gt; irb\nirb(main):001:0&gt; Dir.pwd\n=&gt; \"C:/Users/Administrator\"\nirb(main):002:0&gt; File.join(Dir.pwd,'testing.txt')\n=&gt; \"C:/Users/Administrator/testing.txt\"\nirb(main):003:0&gt; File.read(File.join(Dir.pwd,'testing.txt'))\n=&gt; \"foo bar\"\n</code></pre>\n\n<p>So if you really wanted to use a string you can do something like this as well:</p>\n\n<pre><code>irb(main):004:0&gt; File.read('C:/Users/Administrator/testing.txt')\n=&gt; \"foo bar\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1448492598, "post_id": 33927100, "comment_id": 55616866, "body": "<code>When specifying a Windows-style filename in a Ruby string, remember to escape the backslashes:</code> Our development is Windows and hosting is ubuntu. Is <code>file_path.gsub(&#39;\\&#39;, &#39;\\\\&#39;)</code> going to do the work? This is a little painful if we have to find out if the path is Windows style and added backslashs."}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1448504697, "post_id": 33927100, "comment_id": 55620050, "body": "you can always just use single quotes ie, `path = &#39;C:\\gumby\\ruby\\test.rb&#39; to avoid escaping at all."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1448488922, "last_edit_date": 1448488922, "creation_date": 1448488596, "answer_id": 33927100, "question_id": 33926462, "link": "https://stackoverflow.com/questions/33926462/how-to-choose-slash-and-assemble-file-path-in-ruby/33927100#33927100", "title": "How to choose slash and assemble file path in ruby?", "body": "<p>From the <a href=\"http://ruby-doc.org/core-2.2.3/IO.html#method-c-select\" rel=\"nofollow\">IO documentation</a>:</p>\n\n<blockquote>\n  <p>Ruby will convert pathnames between different operating system conventions if possible. For instance, on a Windows system the filename \"/gumby/ruby/test.rb\" will be opened as \"\\gumby\\ruby\\test.rb\". When specifying a Windows-style filename in a Ruby string, remember to escape the backslashes:</p>\n</blockquote>\n\n<pre><code>\"c:\\\\gumby\\\\ruby\\\\test.rb\"\n</code></pre>\n\n<p>So, don't make more work for yourself. Use forward-slashes for clarity and to remove the leaning-toothpick syndrome strings.</p>\n\n<p>If you <em>need</em> to know what path delimiter to use, there's always <code>File::ALT_SEPARATOR</code> but messing with it or writing code accessing it directly instead of letting Ruby do the right thing is seldom needed. All the File methods doing joins and splits honor <code>File::ALT_SEPARATOR</code> already.</p>\n\n<blockquote>\n  <p>[...] File::ALT_SEPARATOR can be used to get the platform-specific separator character.</p>\n</blockquote>\n"}], "owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 33927100, "answer_count": 3, "score": 0, "last_activity_date": 1448488922, "creation_date": 1448485840, "question_id": 33926462, "link": "https://stackoverflow.com/questions/33926462/how-to-choose-slash-and-assemble-file-path-in-ruby", "title": "How to choose slash and assemble file path in ruby?", "body": "<p>In Windows OS, back slash <code>\\</code> is used in file path (<code>c:\\mytext.txt</code>). In linux/unix OS, forward slash <code>/</code> is used in file path (<code>/home/mytext.txt</code>). Given a dir path <code>file_dir</code> and <code>file_name</code>, how to find the right <code>slash</code> for the OS and assemble the file path (OS could be either Windows or Linux)? <code>file_dir + '/' + file name</code> Or <code>file_dir + '\\' + file_name</code>? Any escape for slash?</p>\n"}, {"tags": ["ruby", "scope"], "answers": [{"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": true, "score": 3, "last_activity_date": 1448486009, "creation_date": 1448486009, "answer_id": 33926504, "question_id": 33926386, "link": "https://stackoverflow.com/questions/33926386/change-the-scope-of-code-called-within-a-ruby-block/33926504#33926504", "title": "Change the scope of code called within a ruby block", "body": "<p>I would suggest you not to use this approach. Basically you should not want to expand internal scope outside. Better practice here will be to return some state from your block.</p>\n\n<pre><code>def do_something (&amp;code)\n  code.call\nend\n\nfoo = do_something do\n  'bar'\nend\n\np foo\n#=&gt; bar\n</code></pre>\n"}], "owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 33926504, "answer_count": 1, "score": 0, "last_activity_date": 1448486009, "creation_date": 1448485470, "question_id": 33926386, "link": "https://stackoverflow.com/questions/33926386/change-the-scope-of-code-called-within-a-ruby-block", "title": "Change the scope of code called within a ruby block", "body": "<p>Suppose I have a method that looks like:</p>\n\n<pre><code>def do_something (&amp;code)\n    code.call\nend\n</code></pre>\n\n<p>Now I want to use this to set a variable in the outer scope.</p>\n\n<pre><code>do_something do\n    foo = 'bar'\nend\nputs foo #=&gt;undefined\n</code></pre>\n\n<p>This is obviously because foo is defined within the scope of the do_something method, how do I get it populate in the outer scope?</p>\n"}, {"tags": ["ruby", "regex", "excel"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448484375, "post_id": 33925905, "comment_id": 55613094, "body": "What have <i>you</i> tried? Don&#39;t <i>you</i> want a bonus? :)"}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448484559, "post_id": 33925905, "comment_id": 55613179, "body": "See EDIT 2, it doesn&#39;t work because if I have anything extra: <code>AZ100:B65hello</code> still gives a match."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448485354, "post_id": 33925905, "comment_id": 55613533, "body": "I don&#39;t understand what &quot;...the range is restricted to within a row or column.&quot; means. Can you give an example? btw, when I first skimmed your question I thought I read &quot;bonus check&quot;, which got me pretty excited."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448485711, "post_id": 33925905, "comment_id": 55613720, "body": "While we&#39;d like to help, we need a more detailed example of your input data. What does &quot;seems to work&quot; mean? What caveats do you fear?"}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "edited": false, "score": 0, "creation_date": 1448485763, "post_id": 33925905, "comment_id": 55613749, "body": "What I meant is that: A1:A3 run in the same column - allow, A1:C1 run in the same row  - allow, A1:C3 run in more than one dimension - disallow"}], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "edited": false, "score": 0, "creation_date": 1448486928, "post_id": 33926609, "comment_id": 55614346, "body": "Great solution! Taking this further, lets say it has four parts: <code>(col)(row):(col):(row)</code>. How do I extract those four parts into four variables?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448498628, "post_id": 33926609, "comment_id": 55618604, "body": "John, <code>&quot;A5:B10&quot;.scan &#47;[A-Z]+|\\d+&#47; #=&gt; [&quot;A&quot;, &quot;5&quot;, &quot;B&quot;, &quot;10&quot;] </code> will provide that information."}], "tags": [], "owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "is_accepted": true, "score": 2, "last_activity_date": 1448486429, "creation_date": 1448486429, "answer_id": 33926609, "question_id": 33925905, "link": "https://stackoverflow.com/questions/33925905/how-do-i-write-a-regex-for-excel-cell-range/33926609#33926609", "title": "How do I write a regex for Excel cell range?", "body": "<p>This will do both: match Excel range and that they must be same row or column. <a href=\"http://rubular.com/r/rivR7m49tn\" rel=\"nofollow\">Stub</a></p>\n\n<pre><code>^([A-Z]+)(\\d+):(\\1\\d+|[A-Z]+\\2)$\n\nA4:A6             // ok\nA5:B10            // not ok\nB5:Z5             // ok\nAZ100:B100hello   // not ok\n</code></pre>\n\n<p>The magic here is the back-reference group:</p>\n\n<pre><code>([A-Z]+)(\\d+)     -- column is in capture group 1, row in group 2\n(\\1\\d+|[A-Z]+\\2)  -- the first column followed by any number; or\n                  -- the first row preceded by any character\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1422, "user_id": 4397543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-udEtVYPE4cM/AAAAAAAAAAI/AAAAAAAAAFA/4QsyAr61Tr4/photo.jpg?sz=128", "display_name": "Heinz Kessler", "link": "https://stackoverflow.com/users/4397543/heinz-kessler"}, "is_accepted": false, "score": 2, "last_activity_date": 1462093845, "last_edit_date": 1495541438, "creation_date": 1462093845, "answer_id": 36964973, "question_id": 33925905, "link": "https://stackoverflow.com/questions/33925905/how-do-i-write-a-regex-for-excel-cell-range/36964973#36964973", "title": "How do I write a regex for Excel cell range?", "body": "<p>This is my solution:</p>\n\n<pre><code>(?:(?:\\'?(?:\\[(?&lt;wbook&gt;.+)\\])?(?&lt;sheet&gt;.+?)\\'?!)?(?&lt;colabs&gt;\\$)?(?&lt;col&gt;[a-zA-Z]+)(?&lt;rowabs&gt;\\$)?(?&lt;row&gt;\\d+)(?::(?&lt;col2abs&gt;\\$)?(?&lt;col2&gt;[a-zA-Z]+)(?&lt;row2abs&gt;\\$)?(?&lt;row2&gt;\\d+))?|(?&lt;name&gt;[A-Za-z]+[A-Za-z\\d]*))\n</code></pre>\n\n<p>It includes named ranges, but the R1C1 notation is not supported.\nThe pattern is written in perl compatible regex dialect (i.e. can also be used with C#), I'm not familiar with Ruby, so I can't tell the difference, but you may want to look here: <a href=\"https://stackoverflow.com/questions/9520325/what-is-the-difference-between-regex-syntax-in-ruby-vs-perl\">What is the difference between Regex syntax in Ruby vs Perl?</a></p>\n"}], "owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 1, "accepted_answer_id": 33926609, "answer_count": 2, "score": 0, "last_activity_date": 1462093845, "creation_date": 1448483487, "last_edit_date": 1448486550, "question_id": 33925905, "link": "https://stackoverflow.com/questions/33925905/how-do-i-write-a-regex-for-excel-cell-range", "title": "How do I write a regex for Excel cell range?", "body": "<p>I need to validate that something is an Excel cell range in Ruby, i.e: \"A4:A6\". By looking at it, the requirement I am looking for is:</p>\n\n<p><code>&lt;Alphabetical, Capitalised&gt;&lt;Integer&gt;:&lt;Integer&gt;&lt;Alphabetical, Capitalised&gt;</code></p>\n\n<p>I am not sure how to form a RegExp for this.\nI would appreciate a small explanation for a solution, as opposed to purely a solution.</p>\n\n<p>A bonus would be to check that the range is restricted to within a row or column. I think this would be out of scope of Regular Expressions though.</p>\n\n<p>I have tried <code>/[A-Z]+[0-9]+:[A-Z]+[0-9]+/</code> this works but allows extra characters on the ends.</p>\n\n<p>This does not work because it allows extra's to be added on to the beginning or end:</p>\n\n<p><code>\"HELLOAA3:A7\".match(/\\A[A-Z]+[0-9]+:[A-Z]+[0-9]+\\z/)</code> also returns a match, but is more on the right track.</p>\n\n<p>How would I limit the number range to 10000?\nHow would I limit the number of characters to 3?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bcrypt", "bcrypt-ruby"], "comments": [{"owner": {"reputation": 333, "user_id": 3638220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa86d97c2e28644219eaa72de0901244?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/3638220/sean"}, "edited": false, "score": 2, "creation_date": 1448483957, "post_id": 33925453, "comment_id": 55612860, "body": "May or may not be relevant but you should be calling <code>authenticate</code> with the plain text password rather than the <code>password_digest</code>. So <code>if customer &amp;&amp; customer.authenticate(params[:session][:password])</code>. <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow noreferrer\">Source</a>"}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "reply_to_user": {"reputation": 333, "user_id": 3638220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa86d97c2e28644219eaa72de0901244?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/3638220/sean"}, "edited": false, "score": 0, "creation_date": 1448486737, "post_id": 33925453, "comment_id": 55614260, "body": "Does it matter if i&#39;ve only defined the password_digest in the user migrate? If it doesn&#39;t, do I do that by changing the log in form password fill in symbol to :password rather than :password_digest?"}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 1, "creation_date": 1448487080, "post_id": 33926131, "comment_id": 55614425, "body": "ok, I am very confused. Could you explain to me why this is happening? c = Customer.find_by(email: &quot;sarahcraig1994@yahoo.com&quot;)   Customer Load (1.0ms)  SELECT  &quot;customers&quot;.* FROM &quot;customers&quot;  WHERE &quot;customers&quot;.&quot;email&quot; = &#39;sarahcraig1994@yahoo.com&#39; LIMIT 1 #&lt;Customer id: 1, created_at: &quot;2015-11-24 14:44:38&quot;, updated_at: &quot;2015-11-24 14:44:38&quot;, business_id: 2, first_name: &quot;sarah&quot;, last_name: &quot;craig&quot;, email: &quot;sarahcraig1994@yahoo.com&quot;, password_digest: &quot;password&quot;, remember_digest: nil, role: nil&gt; &gt;&gt; puts c.password_digest password nil"}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1448487147, "post_id": 33926131, "comment_id": 55614461, "body": "why is it returning both &quot;password&quot; (the password I signed up with) and &#39;nil&#39;?"}, {"owner": {"reputation": 2353, "user_id": 4765497, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0217f81111ddda08859b0d6cca6de0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Noman", "link": "https://stackoverflow.com/users/4765497/amr-noman"}, "reply_to_user": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1448487923, "post_id": 33926131, "comment_id": 55614859, "body": "Don&#39;t worry about the <code>nil</code>, the <code>puts</code> method always returns <code>nil</code>."}, {"owner": {"reputation": 2353, "user_id": 4765497, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0217f81111ddda08859b0d6cca6de0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Noman", "link": "https://stackoverflow.com/users/4765497/amr-noman"}, "reply_to_user": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 1, "creation_date": 1448488117, "post_id": 33926131, "comment_id": 55614948, "body": "Now, your problem is that your <code>password_digest</code> equals <code>password</code> and that&#39;s not a valid password hash, this is the reason you get the error.  <code>Bcrypt</code> expects <code>password_digest</code> to be a valid digest, not a clear text. In other words the value for <code>password_digest</code> is supposed to be a long encrypted string. How are you storing the password for you model?"}, {"owner": {"reputation": 2353, "user_id": 4765497, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0217f81111ddda08859b0d6cca6de0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Noman", "link": "https://stackoverflow.com/users/4765497/amr-noman"}, "reply_to_user": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1448489244, "post_id": 33926131, "comment_id": 55615507, "body": "glad I could help, please mark the answer as correct."}], "tags": [], "owner": {"reputation": 2353, "user_id": 4765497, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0217f81111ddda08859b0d6cca6de0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Noman", "link": "https://stackoverflow.com/users/4765497/amr-noman"}, "is_accepted": true, "score": 4, "last_activity_date": 1448488581, "last_edit_date": 1448488581, "creation_date": 1448484427, "answer_id": 33926131, "question_id": 33925453, "link": "https://stackoverflow.com/questions/33925453/bcrypterrorsinvalidhash-in-sessionscontrollercreate/33926131#33926131", "title": "BCrypt::Errors::InvalidHash in SessionsController#create", "body": "<p>The error you're getting probably means that the <code>password_digest</code> stored for that user is invalid for some reason (empty perhaps).\nEnter a rails console: <code>rails console</code>\nand execute the following: </p>\n\n<pre><code>u = User.find_by(email: \"your_user_email\")\nputs u.password_digest\n</code></pre>\n\n<p>and see what the output is.</p>\n\n<p>(also as mentioned in a comment on your question, you should use the plain text password when you use the authenticate method)</p>\n\n<h2>Update</h2>\n\n<p>You shouldn't use the <code>password_digest</code> attribute directly, instead there are two attributes you should be using: <code>password</code> and <code>password_confirmation</code> (these attributes become available to you automatically when you use <code>has_secure_password</code>, so you don't need to define them).</p>\n\n<p>So in your controller, instead of this:</p>\n\n<pre><code>params.require(:customer).permit(:first_name, :last_name, :business_no, :email, :password_digest, :business_id) #replace company with company ID\n</code></pre>\n\n<p>You should have:</p>\n\n<pre><code>params.require(:customer).permit(:first_name, :last_name, :business_no, :email, :password, :password_confirmation :business_id) #replace company with company ID\n</code></pre>\n\n<p>and edit your form accordingly to provide inputs for <code>password</code> and <code>password_confirmation</code>.</p>\n\n<p>Now when you create your object using these params, it will automatically assign the password digest into <code>password_digest</code> by encrypting the clear text contained in <code>password</code> and <code>password_confirmation</code>.</p>\n"}], "owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5227, "favorite_count": 0, "accepted_answer_id": 33926131, "answer_count": 1, "score": 0, "last_activity_date": 1448488581, "creation_date": 1448481788, "last_edit_date": 1448486030, "question_id": 33925453, "link": "https://stackoverflow.com/questions/33925453/bcrypterrorsinvalidhash-in-sessionscontrollercreate", "title": "BCrypt::Errors::InvalidHash in SessionsController#create", "body": "<p>I've tried looking at previous questions and answers regarding this error, but the solutions didn't seem to work for me. The error is thrown on the line:</p>\n\n<pre><code>if customer &amp;&amp; customer.authenticate(params[:session][:password_digest])\n</code></pre>\n\n<p>I am able to Sign Up a user (under a company) and sign up a company, but I get this BCrypt error whenever I try to log a user in. I only started using the has_secure_password stuff etc once my user model and company model etc. were in place, I just realised later that it was silly to not protect passwords. \nEven if I create a new user now, I still get this error logging on.</p>\n\n<p>I think this might be due to my relationships of my Users? (maybe completely not, I am very new to Ruby!) My users belong to a company (many to one), and when they sign up they choose a company from a list in order to be listed under it in the database. Here is my code relating to this error:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n\n  end\n\n  def create\n    customer = Customer.find_by_email(params[:session][:email])\n    if customer &amp;&amp; customer.authenticate(params[:session][:password_digest])\n      log_in customer #see sessions helper\n      remember customer #see sessions helper\n      redirect_to '/main'\n    else\n      redirect_to '/login'\n    end\n  end\n\n  def destroy\n    #session[:user_id] = nil\n    forget(current_customer)\n    session.delete(:customer_id)\n    @current_customer = nil\n    redirect_to '/'\n  end\nend\n\n\n\nclass CreateCustomers &lt; ActiveRecord::Migration\n  def change\n    create_table :customers do |t|\n      t.timestamps\n      t.references :business, foreign_key: true\n\n      t.timestamps\n      t.string :first_name\n      t.string :last_name\n\n      t.string :email\n      t.string :password_digest\n      t.string :remember_digest\n      t.string :role\n    end\n  end\nend\n\n\nclass CustomersController &lt; ApplicationController\n  def new\n    @customer = Customer.new\n    @businesses = Business.all\n  end\n\n  def create\n    @customer = Customer.create(customer_params)\n    @customer.save!\n    session[:customer_id] = @customer.id\n    redirect_to '/'\n  rescue ActiveRecord::RecordInvalid =&gt; ex\n    render action: 'new', alert: ex.message\n  end\n\n  private\n  def customer_params\n    params.require(:customer).permit(:first_name, :last_name, :business_no, :email, :password_digest, :business_id) #replace company with company ID\n  end\nend\n</code></pre>\n\n<p>Please help me, I'm tearing my hair out :( </p>\n"}, {"tags": ["ruby", "jekyll", "liquid"], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 0, "last_activity_date": 1448540856, "creation_date": 1448540856, "answer_id": 33938729, "question_id": 33925373, "link": "https://stackoverflow.com/questions/33925373/jekyll-site-categories-keys-returns-nothing/33938729#33938729", "title": "Jekyll site.categories.keys returns nothing", "body": "<p>This is not ruby, it's Liquid. The way variables are evaluated is different.</p>\n\n<p><code>{{ site.categories }}</code> or <code>{{ site['categories'] }}</code> will return values if their keys are present in the <code>Liquid::Context</code> (<a href=\"https://github.com/Shopify/liquid/blob/master/lib/liquid/variable_lookup.rb#L41\" rel=\"nofollow\">see liquid 3.x code here</a>).</p>\n\n<p>If no matching key is found (like for <code>{{ site.categories.keys }}</code>), liquid tries to send a command on the object (<a href=\"https://github.com/Shopify/liquid/blob/master/lib/liquid/variable_lookup.rb#L54\" rel=\"nofollow\">see</a>), but command list is limited to <code>size, first and last</code> (<a href=\"https://github.com/Shopify/liquid/blob/master/lib/liquid/variable_lookup.rb#L4\" rel=\"nofollow\">see</a>). </p>\n\n<p>This is true for Liquid 2.x and 3.x.</p>\n\n<p>If you want all the categories names in an array, you can do :</p>\n\n<pre><code>{% comment %}create an empty array{% endcomment %}\n{% assign catNames = \"\" | split: \"/\" %}\n{% for c in site.categories %}\n  {% assign catNames = catNames | push: c[0] %}\n{% endfor %}\n</code></pre>\n\n<p>All categories names are now in <code>catNames</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5605799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6ef38ece2f86e35d560e00a583e6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex C", "link": "https://stackoverflow.com/users/5605799/alex-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448540894, "creation_date": 1448481499, "last_edit_date": 1448540894, "question_id": 33925373, "link": "https://stackoverflow.com/questions/33925373/jekyll-site-categories-keys-returns-nothing", "title": "Jekyll site.categories.keys returns nothing", "body": "<p>I have the following code in Jekyll and it doesn't output what I expect.</p>\n\n<pre><code>{% assign x1= site.categories %}\n&lt;div id=\"x1\"&gt;{{ x1 | inspect }}&lt;/div&gt;\n\n{% assign x2= site.categories.keys %}\n&lt;div id=\"x2\"&gt;{{ x2 | inspect }}&lt;/div&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;div id=\"x1\"&gt;{\"abc\"=&amp;gt;[&lt;post: demo-post1=\"\"&gt;, &lt;post: demo-post2=\"\"&gt;, &lt;post: demo-post3=\"\"&gt;,  .... &lt;/div&gt;\n\n&lt;div id=\"x2\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Or a prettier version of \"x1\"</p>\n\n<pre><code>{abc\"=&gt;[, , , , , , ], \"def\"=&gt;[, , , , , , , ], ....\n</code></pre>\n\n<p>So, it there's data in <code>site.categories</code> and it seems to be a <code>Hash</code> but <code>x2</code> has no value... Why? I was expecting it to print <code>\"abc\", \"def\", ...</code></p>\n"}, {"tags": ["ruby", "scripting", "aws-sdk"], "comments": [{"owner": {"reputation": 1407, "user_id": 913275, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/j9SVN.jpg?s=128&g=1", "display_name": "Migore", "link": "https://stackoverflow.com/users/913275/migore"}, "edited": false, "score": 0, "creation_date": 1448481219, "post_id": 33924933, "comment_id": 55611516, "body": "What are you trying to do?"}, {"owner": {"reputation": 131, "user_id": 4905042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Dr22C.jpg?s=128&g=1", "display_name": "devnull", "link": "https://stackoverflow.com/users/4905042/devnull"}, "reply_to_user": {"reputation": 1407, "user_id": 913275, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/j9SVN.jpg?s=128&g=1", "display_name": "Migore", "link": "https://stackoverflow.com/users/913275/migore"}, "edited": false, "score": 0, "creation_date": 1448574242, "post_id": 33924933, "comment_id": 55653702, "body": "Just wanted to list all the instances."}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 3784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec71a0e5d4717404d8c192e907ef8f55?s=128&d=identicon&r=PG", "display_name": "Hajime", "link": "https://stackoverflow.com/users/3784026/hajime"}, "is_accepted": false, "score": 0, "last_activity_date": 1457955642, "creation_date": 1457955642, "answer_id": 35986564, "question_id": 33924933, "link": "https://stackoverflow.com/questions/33924933/aws-sdk-v2-for-ec2-listing/35986564#35986564", "title": "aws-sdk-v2 for ec2 listing", "body": "<pre><code>  credential = {\n                 access_key_id: 'xxxxxxxxxxxxxxxxxxxx',\n                 secret_access_key: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n                 region: 'us-west-2'\n               }\n\n  Aws.config.update aws_credential\n\n  Aws::EC2::Client.new.describe_instances.reservations.each do |instance|\n    p instance[0].instance_id\n  end\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 4905042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Dr22C.jpg?s=128&g=1", "display_name": "devnull", "link": "https://stackoverflow.com/users/4905042/devnull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491281817, "creation_date": 1448479770, "last_edit_date": 1491281817, "question_id": 33924933, "link": "https://stackoverflow.com/questions/33924933/aws-sdk-v2-for-ec2-listing", "title": "aws-sdk-v2 for ec2 listing", "body": "<p>is this right way to do this ? Please help if there are other better ways to do this?</p>\n\n<pre><code>#! /usr/bin/ruby\nrequire 'aws-sdk'\n\nclient = Aws::EC2::Client.new(region: 'us-west-2')\nresp = client.describe_instances\nresp.reservations.each do |node, num = 0|\n  puts \"#{node.instances[num].instance_id}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm", "ruby-1.9.3"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448479758, "post_id": 33924871, "comment_id": 55610769, "body": "Please post text, not links to images."}, {"owner": {"reputation": 1407, "user_id": 913275, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/j9SVN.jpg?s=128&g=1", "display_name": "Migore", "link": "https://stackoverflow.com/users/913275/migore"}, "edited": false, "score": 0, "creation_date": 1448481393, "post_id": 33924871, "comment_id": 55611586, "body": "Did you try to update? These two links has thi solutions: <a href=\"http://stackoverflow.com/questions/27832732/error-running-rvm-make-install\" title=\"error running rvm make install\">stackoverflow.com/questions/27832732/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/29724941/rvm-error-while-running-make-install-error-comes-while-installing-power-assert\" title=\"rvm error while running make install error comes while installing power assert\">stackoverflow.com/questions/29724941/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5605596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08bf51c1ecf451aad7fc2eb68c00b3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish ", "link": "https://stackoverflow.com/users/5605596/ashish"}, "edited": false, "score": 0, "creation_date": 1448484029, "post_id": 33924871, "comment_id": 55612904, "body": "Hi Migore, I tried both these things, I have edited my original post, but I get the same error again."}, {"owner": {"reputation": 1, "user_id": 5605596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08bf51c1ecf451aad7fc2eb68c00b3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish ", "link": "https://stackoverflow.com/users/5605596/ashish"}, "edited": false, "score": 0, "creation_date": 1448484371, "post_id": 33924871, "comment_id": 55613092, "body": "I have also done &quot;source /Users/aparmar/.rvm/scripts/rvm&quot; but no success."}], "owner": {"reputation": 1, "user_id": 5605596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08bf51c1ecf451aad7fc2eb68c00b3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish ", "link": "https://stackoverflow.com/users/5605596/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1448483943, "creation_date": 1448479559, "last_edit_date": 1448483943, "question_id": 33924871, "link": "https://stackoverflow.com/questions/33924871/error-in-installing-ruby-1-9-3-p551-on-osx-10-10-5", "title": "Error in installing ruby-1.9.3-p551 on OSX 10.10.5", "body": "<p>I have a new OS 10.10.5 installed on my Mac which has a default ruby-2.0.0p481. However, I need ruby-1.9.3-p551 for specific reasons of our system. When I am trying to install ruby-1.9.3-p551 using RVM 1.26.11, I am getting the following error.\n<a href=\"http://i.stack.imgur.com/Gj38p.png\" rel=\"nofollow\">Error for rvm install 1.9.3</a></p>\n\n<p>I also tried running \"rvm install 1.9.3 --with-gcc=clang\", but that too gave me an error as under.\n<a href=\"http://i.stack.imgur.com/yjK5E.png\" rel=\"nofollow\">Error for rvm install 1.9.3 --with-gcc=clang</a></p>\n\n<p>I tried for searching ruby-1.9.3-p551.tar.bz2 binary file on mirror binaries and at other places but even that did not worked for me. Any help or pointers will be great.</p>\n\n<p>Thank You :)</p>\n\n<p>I tried \"rvm get master\" and the output is as under.</p>\n\n<pre><code>aparmar-mbpr:~ aparmar$ rvm get master\nDownloading https://get.rvm.io\nNo GPG software exists to validate rvm-installer, skipping.\nDownloading https://github.com/rvm/rvm/archive/master.tar.gz\n\nUpgrading the RVM installation in /Users/aparmar/.rvm/\n    RVM PATH line found in /Users/aparmar/.mkshrc /Users/aparmar/.profile /Users/aparmar/.bashrc /Users/aparmar/.zshrc.\n    RVM sourcing line found in /Users/aparmar/.profile /Users/aparmar/.bash_profile /Users/aparmar/.zlogin.\nUpgrade of RVM in /Users/aparmar/.rvm/ is complete.\n\n# Ashish.Parmar,\n#\n#   Thank you for using RVM!\n#   We sincerely hope that RVM helps to make your life easier and more enjoyable!!!\n#\n# ~Wayne, Michal &amp; team.\n\nIn case of problems: http://rvm.io/help and https://twitter.com/rvm_io\n\nUpgrade Notes:\n\n  * No new notes to display.\n\nRVM reloaded!\naparmar-mbpr:~\n</code></pre>\n\n<p>After this I did rvm reinstall 1.9.3 and I got the same previous error</p>\n\n<pre><code>aparmar-mbpr:~ aparmar$ rvm reinstall 1.9.3\nruby-1.9.3-p551 - #removing src/ruby-1.9.3-p551..\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.10/x86_64/ruby-1.9.3-p551.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /Users/aparmar/.rvm/rubies/ruby-1.9.3-p551, this may take a while depending on your cpu(s)...\nruby-1.9.3-p551 - #downloading ruby-1.9.3-p551, this may take a while depending on your connection...\nruby-1.9.3-p551 - #extracting ruby-1.9.3-p551 to /Users/aparmar/.rvm/src/ruby-1.9.3-p551....\nruby-1.9.3-p551 - #applying patch /Users/aparmar/.rvm/patches/ruby/GH-488.patch.\nruby-1.9.3-p551 - #applying patch /Users/aparmar/.rvm/patches/ruby/1.9.3/CVE-2015-1855-p484.patch.\nruby-1.9.3-p551 - #configuring...............................................\nruby-1.9.3-p551 - #post-configuration.\nruby-1.9.3-p551 - #compiling...........................................................................................................................................|\nError running '__rvm_make -j 1',\nshowing last 15 lines of /Users/aparmar/.rvm/log/1448483473_ruby-1.9.3-p551/make.log\n     ossl_str_adjust(str, p);\n     ^\nruby_missing.h:32:14: error: 'struct RString' has no member named 'len'\n  RSTRING(str)-&gt;len = (length);  \\\n              ^\nossl.h:137:5: note: in expansion of macro 'rb_str_set_len'\n     rb_str_set_len((str), newlen);\\\n     ^\nossl_asn1.c:1336:5: note: in expansion of macro 'ossl_str_adjust'\n     ossl_str_adjust(str, p);\n     ^\nmake[2]: *** [ossl_asn1.o] Error 1\nmake[1]: *** [ext/openssl/all] Error 2\nmake: *** [build-ext] Error 2\n++ return 2\nThere has been an error while running make. Halting the installation.\naparmar-mbpr:~ aparmar$ \n</code></pre>\n\n<p>I also tried rvm get head, but after that in the installation of 1.9.3 again I get the same above error</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448485788, "post_id": 33924808, "comment_id": 55613762, "body": "&quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it.&quot;"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1448501309, "post_id": 33924808, "comment_id": 55619272, "body": "Might I add that <a href=\"https://github.com/ManageIQ/trollop\" rel=\"nofollow noreferrer\">Trollop</a> is good for command line arguments, if you need that as well."}], "answers": [{"tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": false, "score": 0, "last_activity_date": 1448479616, "creation_date": 1448479616, "answer_id": 33924888, "question_id": 33924808, "link": "https://stackoverflow.com/questions/33924808/command-line-interface-helpers/33924888#33924888", "title": "Command-line interface helpers?", "body": "<p>The library you are looking for is <a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/readline/rdoc/Readline.html\" rel=\"nofollow\">readline</a></p>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 5, "last_activity_date": 1448479907, "creation_date": 1448479907, "answer_id": 33924963, "question_id": 33924808, "link": "https://stackoverflow.com/questions/33924808/command-line-interface-helpers/33924963#33924963", "title": "Command-line interface helpers?", "body": "<p>You're probably looking for <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html\">readline</a>, here's an example:</p>\n\n<pre><code>require \"readline\"\n\nwhile cmd = Readline.readline(\"&gt; \", true)\n  break if cmd == \"quit\"\n  run_command(cmd)\n  puts\nend\n</code></pre>\n\n<p>Tab-completion is a little trickier, though. Have a look at the <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html#method-c-completion_proc-3D-label-Completion+for+a+Static+List\">example on their documentation page</a>.</p>\n"}], "owner": {"reputation": 4469, "user_id": 1251099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/af9183d81b1160ccd54790c233a7b0c7?s=128&d=identicon&r=PG", "display_name": "user180574", "link": "https://stackoverflow.com/users/1251099/user180574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 33924963, "answer_count": 2, "score": 2, "last_activity_date": 1448485883, "creation_date": 1448479312, "last_edit_date": 1448485883, "question_id": 33924808, "link": "https://stackoverflow.com/questions/33924808/command-line-interface-helpers", "title": "Command-line interface helpers?", "body": "<p>I am working on a command-line interface to make my code more user-friendly. It currently looks like this:</p>\n\n<pre><code>loop do\n  print \"&gt; \"\n  cmd = gets.chomp\n  break  if cmd == \"quit\"\n  run_command(cmd)\n  puts\nend\n</code></pre>\n\n<p>I would like to extend it a little bit to save typing. For example, I'd like to allow using the \"Up Arrow\" key to repeat the last command, and the \"Tab\" key to auto-match command etc. </p>\n\n<p>Is there any tool to ease the job?</p>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1448483278, "post_id": 33924616, "comment_id": 55612528, "body": "Preserving comments on top/bottom of the file should be easy, just le us know if you need that. Otherwise it&#39;s not probably worth the hassle. I think comments support is a common feature for XML libraries"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1448486734, "post_id": 33924616, "comment_id": 55614256, "body": "You can&#39;t. YAML is a serialized representation of an object. Ruby has no means of commenting an object unless you make that comment a part of the object, at which point you&#39;d use a string. You <i>could</i> treat the YAML file as a text file, and read/parse/emit it all as text. How to read and search a text file is well covered by multiple questions on SO and the internet."}], "owner": {"reputation": 520, "user_id": 835149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d5dfce620d317fe77da4412e4385bc2?s=128&d=identicon&r=PG", "display_name": "arpit", "link": "https://stackoverflow.com/users/835149/arpit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "closed_date": 1448486750, "answer_count": 0, "score": 0, "last_activity_date": 1448478597, "creation_date": 1448478597, "last_edit_date": 1495542618, "question_id": 33924616, "link": "https://stackoverflow.com/questions/33924616/keep-comments-as-it-is-while-updating-yaml-file", "closed_reason": "Duplicate", "title": "Keep comments as it is while updating YAML file", "body": "<p>I have a YAML file with many comments. I want to update it via a ruby file but want to keep the comments intact. <a href=\"https://stackoverflow.com/questions/14532959/how-do-you-save-values-into-a-yaml-file\">Here</a> is what I'm exactly doing now. How can I keep comments intact but also change content of YAML file ?</p>\n"}, {"tags": ["ruby", "utf-8", "character-encoding", "iso-8859-1"], "answers": [{"tags": [], "owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1448547634, "creation_date": 1448547634, "answer_id": 33940949, "question_id": 33923978, "link": "https://stackoverflow.com/questions/33923978/encoding-unicode-to-latin1-replacing-unavailable-character-with-similar-charact/33940949#33940949", "title": "Encoding unicode to latin1, replacing unavailable character with similar character", "body": "<p>Here is an exemple using active support, but there are other solutions to transliterate if it is not an option for you :</p>\n\n<pre><code>require 'active_support'\n\"\u0142\u00e9\".encode(Encoding::ISO_8859_1, fallback: proc{|c| I18n.transliterate(c)})\n</code></pre>\n"}], "owner": {"reputation": 4327, "user_id": 1397097, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c6fdb449031f010da19a644df8b0f031?s=128&d=identicon&r=PG", "display_name": "quinn", "link": "https://stackoverflow.com/users/1397097/quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 33940949, "answer_count": 1, "score": 0, "last_activity_date": 1448547634, "creation_date": 1448476271, "last_edit_date": 1448477638, "question_id": 33923978, "link": "https://stackoverflow.com/questions/33923978/encoding-unicode-to-latin1-replacing-unavailable-character-with-similar-charact", "title": "Encoding unicode to latin1, replacing unavailable character with similar character", "body": "<p>When there is no counterpart, a character is usually replaced with a single character, usually <code>\"?\"</code>. Is there a way to encode the characters, and when missing, use a similar character, e.g. <code>\"\u0142\"</code> -> <code>\"l\"</code>, rather than a question mark? I know both things are possible independently. I wonder if there is a solution that combines both.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "reference", "snapshot"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1448477143, "post_id": 33923969, "comment_id": 55609274, "body": "<code>user1.reload</code> should fix the problem <a href=\"http://apidock.com/rails/ActiveRecord/Persistence/reload\" rel=\"nofollow noreferrer\"><code>reload</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": true, "score": 2, "last_activity_date": 1448477183, "creation_date": 1448477183, "answer_id": 33924224, "question_id": 33923969, "link": "https://stackoverflow.com/questions/33923969/ruby-on-rails-reference-to-activerecord-is-a-snapshot/33924224#33924224", "title": "Ruby on Rails: reference to ActiveRecord is a snapshot?", "body": "<p>That is what it still has in the memory. <code>user1.reload</code> will do a new select and return refreshed record.</p>\n"}, {"tags": [], "owner": {"reputation": 2353, "user_id": 4765497, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0217f81111ddda08859b0d6cca6de0b9?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Noman", "link": "https://stackoverflow.com/users/4765497/amr-noman"}, "is_accepted": false, "score": 1, "last_activity_date": 1448477203, "creation_date": 1448477203, "answer_id": 33924231, "question_id": 33923969, "link": "https://stackoverflow.com/questions/33923969/ruby-on-rails-reference-to-activerecord-is-a-snapshot/33924231#33924231", "title": "Ruby on Rails: reference to ActiveRecord is a snapshot?", "body": "<p>Your <code>user1</code> is not updated automatically. You need to call <code>user1.reload</code> first.</p>\n"}, {"tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": false, "score": 2, "last_activity_date": 1448484962, "creation_date": 1448484962, "answer_id": 33926252, "question_id": 33923969, "link": "https://stackoverflow.com/questions/33923969/ruby-on-rails-reference-to-activerecord-is-a-snapshot/33926252#33926252", "title": "Ruby on Rails: reference to ActiveRecord is a snapshot?", "body": "<p>ActiveRecord fetches data from the database and converts it to objects. So yes, it's effectively a snapshot. There's just no good way to determine if any of its values changed in the meantime. While some database engines offer some sort of listen/notify, doing that for every single object is major (and useless most of the time) performance overhead.</p>\n\n<p>There are alternative ORMs that adhere to \"the same row is the same object\" principle (such as <a href=\"http://datamapper.org/why.html\" rel=\"nofollow\">DataMapper</a>, see <em>\"Identity map\"</em>), but under certain circumstances that's also unreliable: the object in the meantime may have been modified by a different process your ORM has no idea about.</p>\n\n<p>So ActiveRecord offers <em>a compromise</em>: it caches the object, but leaves you with <code>reload</code> method, that refreshes the object with data from the database <strong>in-place</strong>, <strong>returning itself</strong>, so you can fetch it and act on it without extra assignments.</p>\n"}], "owner": {"reputation": 601, "user_id": 4904996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac7475f9cb2b9d48b07803dd582b8d11?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4904996/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 33924224, "answer_count": 3, "score": 0, "last_activity_date": 1448484962, "creation_date": 1448476225, "question_id": 33923969, "link": "https://stackoverflow.com/questions/33923969/ruby-on-rails-reference-to-activerecord-is-a-snapshot", "title": "Ruby on Rails: reference to ActiveRecord is a snapshot?", "body": "<p>Say I have a class <code>User</code> that inherits from <code>ActiveRecord::Base</code>, and it has a <code>:name</code> attribute. Then in the console I create a new user by:</p>\n\n<pre><code>&gt; user1 = User.create(name: 'Bob')\n=&gt; #&lt;User id: 1, name: 'Bob'&gt;\n</code></pre>\n\n<p>Then I update the user's name to 'Bob'. Note I'm not doing <code>user1.update_attribute</code>.</p>\n\n<pre><code>&gt; User.find_by(name: 'Bob').update_attribute(:name, 'Bill')\n</code></pre>\n\n<p>Now typing in:</p>\n\n<pre><code>&gt; User.find_by(name: 'Bob')\n=&gt; nil\n&gt; User.find_by(name: 'Bill')\n=&gt; #&lt;User id: 1, name: 'Bill'&gt;\n</code></pre>\n\n<p>Which is what I expected. However, when I check my <code>user1</code> reference I get:</p>\n\n<pre><code>&gt; user1\n=&gt; #&lt;User id: 1, name: 'Bob'&gt;\n</code></pre>\n\n<p>Somehow this still has the old user name. Is user1 not a reference to the ActiveRecord? Is it a snapshot of some sort?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10359, "user_id": 2499035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16cfb6c86e58448e11f9a019644b8480?s=128&d=identicon&r=PG", "display_name": "resueman", "link": "https://stackoverflow.com/users/2499035/resueman"}, "edited": false, "score": 0, "creation_date": 1448474868, "post_id": 33923492, "comment_id": 55608029, "body": "<a href=\"http://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.2.0/Array.html</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448476281, "post_id": 33923492, "comment_id": 55608832, "body": "Welcome to Stack Overflow. Please don&#39;t use Stack Overflow as a replacement for reading the documentation and doing your research. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "edited": false, "score": 3, "creation_date": 1448475159, "post_id": 33923572, "comment_id": 55608173, "body": "It is worth noting that, while the bang is used to denote &quot;dangerous&quot; methods in ruby as @bosskovic said, you can&#39;t always safely assume this is the case. For instance, a number of active record methods (such as .save! and .create!) use the bang to denote that they will raise an exception if they fail instead of returning false. It&#39;s safest to look them up on a method-by-method basis, as there is no enforcing that either of these conventions are followed."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1518423270, "post_id": 33923572, "comment_id": 84483552, "body": "This answer does not explain the <code>nil</code>."}], "tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": true, "score": 5, "last_activity_date": 1448475719, "last_edit_date": 1448475719, "creation_date": 1448474953, "answer_id": 33923572, "question_id": 33923492, "link": "https://stackoverflow.com/questions/33923492/ruby-what-is-the-difference-between-uniq-and-uniq/33923572#33923572", "title": "ruby - what is the difference between uniq! and uniq", "body": "<p>most of the methods ending with bang (!) change the variable, while those without it just return the altered variable.</p>\n\n<p>So, if you have something like this:</p>\n\n<pre><code>a = [1, 1, 2, 3]\n</code></pre>\n\n<p><code>a.uniq</code> will return <code>[1, 2, 3]</code>, but wont alter <code>a</code>, while <code>a!</code> will alter <code>a</code> to be equal to <code>[1, 2, 3]</code></p>\n\n<pre><code>[1] pry(main)&gt; a = [1,1,2,3]\n=&gt; [1, 1, 2, 3]\n[2] pry(main)&gt; a.uniq\n=&gt; [1, 2, 3]\n[3] pry(main)&gt; a\n=&gt; [1, 1, 2, 3]\n[4] pry(main)&gt; a.uniq!\n=&gt; [1, 2, 3]\n[5] pry(main)&gt; a\n=&gt; [1, 2, 3]\n[6] pry(main)&gt; a.uniq!\n=&gt; nil\n[7] pry(main)&gt; a\n=&gt; [1, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1416, "user_id": 5247212, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/t77ce.jpg?s=128&g=1", "display_name": "Yonggoo Noh", "link": "https://stackoverflow.com/users/5247212/yonggoo-noh"}, "edited": false, "score": 1, "creation_date": 1448475517, "post_id": 33923629, "comment_id": 55608384, "body": "Is not the first one &quot;uniq&quot;?"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 1, "creation_date": 1518423312, "post_id": 33923629, "comment_id": 84483569, "body": "this answer explains the <code>nil</code>. +1."}], "tags": [], "owner": {"reputation": 8029, "user_id": 4157589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2TGtf.jpg?s=128&g=1", "display_name": "valdeci", "link": "https://stackoverflow.com/users/4157589/valdeci"}, "is_accepted": false, "score": 8, "last_activity_date": 1527252237, "last_edit_date": 1527252237, "creation_date": 1448475116, "answer_id": 33923629, "question_id": 33923492, "link": "https://stackoverflow.com/questions/33923492/ruby-what-is-the-difference-between-uniq-and-uniq/33923629#33923629", "title": "ruby - what is the difference between uniq! and uniq", "body": "<p>You need to read the <a href=\"http://ruby-doc.org/\" rel=\"nofollow noreferrer\">Ruby</a> documentation. </p>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-uniq\" rel=\"nofollow noreferrer\"><code>uniq</code></a> method returns a new array by removing duplicate values in self. If no duplicates are found, the same array value is returned.</p>\n\n<pre><code>a = [ \"a\", \"a\", \"b\", \"b\", \"c\" ]\na.uniq  # =&gt; [\"a\", \"b\", \"c\"]\n\nb = [ \"a\", \"b\", \"c\" ]\nb.uniq  # =&gt; [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-uniq-21\" rel=\"nofollow noreferrer\"><code>uniq!</code></a> method removes duplicate elements from self and returns <code>nil</code> if no changes are made (that is, no duplicates are found).</p>\n\n<pre><code>a = [ \"a\", \"a\", \"b\", \"b\", \"c\" ]\na.uniq!   # =&gt; [\"a\", \"b\", \"c\"]\n\nb = [ \"a\", \"b\", \"c\" ]\nb.uniq!   # =&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 1416, "user_id": 5247212, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/t77ce.jpg?s=128&g=1", "display_name": "Yonggoo Noh", "link": "https://stackoverflow.com/users/5247212/yonggoo-noh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3822, "favorite_count": 0, "closed_date": 1448475443, "accepted_answer_id": 33923572, "answer_count": 2, "score": 5, "last_activity_date": 1527252237, "creation_date": 1448474656, "question_id": 33923492, "link": "https://stackoverflow.com/questions/33923492/ruby-what-is-the-difference-between-uniq-and-uniq", "closed_reason": "Duplicate", "title": "ruby - what is the difference between uniq! and uniq", "body": "<pre><code>a = [1,2,3]\na.uniq!  # nil\na.uniq  # [1,2,3]\n</code></pre>\n\n<p>Why a.uniq! is not [1,2,3] ?</p>\n\n<p>Let me know the reason. Thank you!</p>\n"}, {"tags": ["php", "ruby", "vb.net"], "comments": [{"owner": {"reputation": 90, "user_id": 2553723, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1095399277/picture?type=large", "display_name": "Peter Georges Bou Saada", "link": "https://stackoverflow.com/users/2553723/peter-georges-bou-saada"}, "edited": false, "score": 0, "creation_date": 1448474539, "post_id": 33923433, "comment_id": 55607837, "body": "i realize that you might think its a duplicate of <a href=\"http://stackoverflow.com/questions/5266044/using-ruby-library-in-php-application\">this question</a> but i reviewed all the answers and none of them have my answers"}, {"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1448478257, "post_id": 33923433, "comment_id": 55609947, "body": "are you able to call the ruby functions you need as command line scripts?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448487144, "post_id": 33923433, "comment_id": 55614457, "body": "Rails is only one way that Ruby is used for web-services. Without much more detail about your experience and system we can only give broad answers, which does you no good. I suggest doing more research about how to write web services in Ruby and see how those fit your scenario. Without more information we&#39;d have to write a tutorial starting with basic HTTP and CGI and move forward, which would be off-topic too."}, {"owner": {"reputation": 90, "user_id": 2553723, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1095399277/picture?type=large", "display_name": "Peter Georges Bou Saada", "link": "https://stackoverflow.com/users/2553723/peter-georges-bou-saada"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448505679, "post_id": 33923433, "comment_id": 55620298, "body": "i am expert in php, and new to ruby, i was looking for ways to learn rails and i found this <a href=\"http://railsforzombies.org/\" rel=\"nofollow noreferrer\">rails for zombies</a> would you recommend it ? @theTinMan"}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 3204557, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lYIUj.png?s=128&g=1", "display_name": "Arkitec", "link": "https://stackoverflow.com/users/3204557/arkitec"}, "reply_to_user": {"reputation": 12216, "user_id": 2480047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d9d32532677b536217a7df8b35f106?s=128&d=identicon&r=PG", "display_name": "varocarbas", "link": "https://stackoverflow.com/users/2480047/varocarbas"}, "edited": false, "score": 0, "creation_date": 1448660807, "post_id": 33924146, "comment_id": 55687758, "body": "I am not sure exactly what your problem is - answering with links is considered useful, particularly as copying and pasting the information from the linked articles are plagiarism.  You are also providing negative feedback which will discourage people from anwering. Better formed sentences would help as well."}, {"owner": {"reputation": 12216, "user_id": 2480047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d9d32532677b536217a7df8b35f106?s=128&d=identicon&r=PG", "display_name": "varocarbas", "link": "https://stackoverflow.com/users/2480047/varocarbas"}, "edited": false, "score": 1, "creation_date": 1448662360, "post_id": 33924146, "comment_id": 55688283, "body": "Sorry about that, I thought that it was clear. One of the reason for flagging an answer as low quality (what I did with yours) or to downvote it (what I didn&#39;t do) is precisely consisting in links. The fact that an answer is mostly formed by links has been off-topic in SO since always (at least, since I am a member). You are free to do whatever you want (-&gt; my second time saying this today!? what I also thought that was evident); it was just an advice (don&#39;t worry; last one to you). Apologies about my not-too-clear first comment, but as said I thought that this point was evident to everyone."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448739931, "post_id": 33924146, "comment_id": 55707624, "body": "@Arkitec, while you might not like the policy, link-only answers are discouraged. Links rot and break and without some additional text an answer mostly consisting of the link will make no sense and provide nothing for future searchers . Summarizing the content and explaining why it will help is the way to provide the information, and the link and giving credit to the original author avoids plagiarism.  Please read <a href=\"http://meta.stackexchange.com/questions/92505/should-i-flag-answers-which-contain-only-a-link-as-not-an-answer\">Should I flag answers which contain only a link as \u201cnot an answer?</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448740190, "post_id": 33924146, "comment_id": 55707699, "body": "I&#39;d recommend searching on <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a> to get a good idea of the community&#39;s feelings about <a href=\"http://meta.stackoverflow.com/search?q=link-only+answers\">link-only answers</a>. You are welcome to start a discussion on <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a> about the subject if you&#39;d like."}, {"owner": {"reputation": 318, "user_id": 3204557, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lYIUj.png?s=128&g=1", "display_name": "Arkitec", "link": "https://stackoverflow.com/users/3204557/arkitec"}, "edited": false, "score": 0, "creation_date": 1448911242, "post_id": 33924146, "comment_id": 55768311, "body": "Okay, thanks to the both of you for the feedback - I will try to improve the quality of my answers by explaining/summarizing why a link might be useful.  Tin Man, I will check out the references mentioned ot understand a bit more."}], "tags": [], "owner": {"reputation": 318, "user_id": 3204557, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lYIUj.png?s=128&g=1", "display_name": "Arkitec", "link": "https://stackoverflow.com/users/3204557/arkitec"}, "is_accepted": false, "score": -2, "last_activity_date": 1448476871, "last_edit_date": 1495541711, "creation_date": 1448476871, "answer_id": 33924146, "question_id": 33923433, "link": "https://stackoverflow.com/questions/33923433/use-ruby-library-with-php-and-or-vb-net/33924146#33924146", "title": "Use Ruby library with PHP and/or VB.net", "body": "<p>Effectively you are trying to run PHP in a scripting shell.  I found two links that might help you:\n<a href=\"http://www.php-compiler.net/blog/2011/php-code-c-sharp\" rel=\"nofollow noreferrer\" title=\"PHP as a scripting language in C#\">PHP as a scripting language in C#</a>\n<a href=\"https://stackoverflow.com/questions/3997911/net-scripting-languages\" title=\".Net Scripting Languages\">.Net Scripting Languages</a></p>\n\n<p>Hopefully you can get what you need from there.  </p>\n"}], "owner": {"reputation": 90, "user_id": 2553723, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1095399277/picture?type=large", "display_name": "Peter Georges Bou Saada", "link": "https://stackoverflow.com/users/2553723/peter-georges-bou-saada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448487056, "creation_date": 1448474462, "last_edit_date": 1448487056, "question_id": 33923433, "link": "https://stackoverflow.com/questions/33923433/use-ruby-library-with-php-and-or-vb-net", "title": "Use Ruby library with PHP and/or VB.net", "body": "<p>I have a Ruby library that uses a REST API but I want to use the library and all other Ruby scripts on a website, or even in vb.net.</p>\n\n<p>Are there any ways to use Ruby in combination with PHP without Rails? And can I implement Ruby in vb.net?</p>\n\n<p>I'm not asking how to translate Ruby to vb.net. I know how that goes and how hard it is, so my questions are:  </p>\n\n<ol>\n<li>Can Ruby be used as a backend language without using Ruby on Rails?  </li>\n<li>Is there any way to implement Ruby into vb.net ?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448472534, "post_id": 33922829, "comment_id": 55606660, "body": "Don&#39;t attach images, quote text."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1448472569, "post_id": 33922829, "comment_id": 55606688, "body": "You&#39;re missing a comma."}, {"owner": {"reputation": 1794, "user_id": 1040376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a1d308a2fe22987ecacc9a908244a79?s=128&d=identicon&r=PG", "display_name": "jabu.10245", "link": "https://stackoverflow.com/users/1040376/jabu-10245"}, "edited": false, "score": 0, "creation_date": 1448473063, "post_id": 33922829, "comment_id": 55606958, "body": "Please have a look at the <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a> page and edit your question."}], "answers": [{"tags": [], "owner": {"reputation": 1446, "user_id": 4005147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001011355894/picture?type=large", "display_name": "Padhu", "link": "https://stackoverflow.com/users/4005147/padhu"}, "is_accepted": true, "score": 1, "last_activity_date": 1448472531, "creation_date": 1448472531, "answer_id": 33922873, "question_id": 33922829, "link": "https://stackoverflow.com/questions/33922829/syntaxerror-in-rails/33922873#33922873", "title": "SyntaxError in Rails", "body": "<p>You are missing a comma before class </p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :category %&gt;&lt;br /&gt;\n    &lt;%= f.select :category_id, Category.all.collect {|x| [x.name, x.id]}, {:include_blank =&gt; 'Select One'}, class:'form-control' %&gt;&lt;br /&gt; &lt;br /&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5605309, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XDSaG4UR3cE/AAAAAAAAAAI/AAAAAAAAAF0/53hvvMy35uQ/photo.jpg?sz=128", "display_name": "J.M.Mubasshir Rahman", "link": "https://stackoverflow.com/users/5605309/j-m-mubasshir-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33922873, "answer_count": 1, "score": -3, "last_activity_date": 1448472531, "creation_date": 1448472393, "question_id": 33922829, "link": "https://stackoverflow.com/questions/33922829/syntaxerror-in-rails", "title": "SyntaxError in Rails", "body": "<p>Why it is giving this error?\n<a href=\"http://i.stack.imgur.com/1XJRV.png%60\" rel=\"nofollow\">Please see the Image</a></p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :category %&gt;&lt;br /&gt;\n    &lt;%= f.select :category_id, Category.all.collect {|x| [x.name, x.id]}, {:include_blank =&gt; 'Select One'} class:'form-control' %&gt;&lt;br /&gt; &lt;br /&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "email", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "edited": false, "score": 0, "creation_date": 1448472496, "post_id": 33922693, "comment_id": 55606641, "body": "Try putting <code>sleep 1</code> after sending a mail. see if it works."}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "edited": false, "score": 0, "creation_date": 1448472668, "post_id": 33922693, "comment_id": 55606737, "body": "@Harry Bomrah Sorry but I have never used sleep 1, where would I exactly put it, Thanks."}, {"owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "edited": false, "score": 0, "creation_date": 1448478686, "post_id": 33922693, "comment_id": 55610196, "body": "Why don&#39;t you use <code>split_email</code> as the value for <code>to:</code>? If the reason is, that each email must go to single recipient separately, you must invoke the mailer in the controller for each recipient."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "edited": false, "score": 0, "creation_date": 1448473135, "post_id": 33922994, "comment_id": 55606996, "body": "@ Harry Bomrah No, that didn&#39;t work. It still sends to the last element in the array."}, {"owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "reply_to_user": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "edited": false, "score": 0, "creation_date": 1448473212, "post_id": 33922994, "comment_id": 55607032, "body": "are you 100% sure that split_email is an array of all the emails. you might want to check what it has exactly."}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "edited": false, "score": 0, "creation_date": 1448473365, "post_id": 33922994, "comment_id": 55607119, "body": "@ Harry Bomrah Ok so this is how I went about doing this. First I wrote this code in invitations controller.  &#39;@invitation = @invitation.recipient_email.split&#39;. Then It gave me the following error.                                            undefined method `save&#39; for [&quot;divjot@example.com&quot;, &quot;kuljinder_d@hotmail.com&quot;]:Array. It gave me an error because I had two @invitation variables. However, It revealed to me that it was an array. I changed the @invitation variable to split_email. Nothing else changed. I moved it to action mailer and ran a code block to loop."}, {"owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "reply_to_user": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "edited": false, "score": 0, "creation_date": 1448473593, "post_id": 33922994, "comment_id": 55607268, "body": "that doesnt answer if ur split_email has all the emails. did u check what is it exaclty"}, {"owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "reply_to_user": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "edited": false, "score": 0, "creation_date": 1448473688, "post_id": 33922994, "comment_id": 55607324, "body": "i ll edit my answer and try this. u ve to loop in controller or helper whatever u like."}], "tags": [], "owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "is_accepted": false, "score": 0, "last_activity_date": 1448474328, "last_edit_date": 1448474328, "creation_date": 1448472894, "answer_id": 33922994, "question_id": 33922693, "link": "https://stackoverflow.com/questions/33922693/issues-looping-through-an-array-in-active-mailer/33922994#33922994", "title": "Issues Looping through an array in Active Mailer", "body": "<p>Try something like this</p>\n\n<p>Create a model with fields</p>\n\n<pre><code>field :mail_to\nfield :subject\n</code></pre>\n\n<p>create a method in the same model</p>\n\n<pre><code>def deliver\n   UserMailer.send_invitation_mail(self).deliver\nend\n</code></pre>\n\n<p>Mailer</p>\n\n<pre><code>def send_invitation_mail(email)\n   mail(to: email.mail_to, subject: email.subject)\n   email.destroy\nend\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>def create\n  user_emails.each do |email|\n      email = Email.new(:mail_to =&gt; \"xxx@yyy.com\",:subject =&gt; \"View Scoreboard\") # Email is the model name. \n      email.deliver\n      sleep(1)\n  end \nend\n</code></pre>\n\n<p>This way u can also log and also deliver all mails together in the model and also do various manipulations on the email.</p>\n"}], "owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448474328, "creation_date": 1448471993, "question_id": 33922693, "link": "https://stackoverflow.com/questions/33922693/issues-looping-through-an-array-in-active-mailer", "title": "Issues Looping through an array in Active Mailer", "body": "<p>I am trying to implement a feature which allows user to send one email to multiple recipients. I split the <code>recipient email</code> params by calling the <code>.split</code> method which turns it into an array. Then I loop through the array with the each method which should apply the mail method to each element in the array. The controller and mailer code is given below. </p>\n\n<p><strong>controller code</strong></p>\n\n<pre><code> def create\n    @scoreboard = Scoreboard.find(params[:scoreboard_id])\n    @invitation = @scoreboard.sent_invitations.build(invitation_params)\n    if @invitation.save\n            UserMailer.registered_invitation_email(@scoreboard, @invitation).deliver_now\n            flash[:success] = \"Invitation sent successfully\"\n            redirect_to new_scoreboard_invitation_path\n        else\n            render 'new'\n    end\n    end\nend\n</code></pre>\n\n<p><strong>mailer code</strong></p>\n\n<pre><code>def registered_invitation_email(scoreboard, invitation)\n     @scoreboard = scoreboard\n     @invitation = invitation\n     split_email = @invitation.recipient_email.split\n     split_email.each do |email|\n       mail(to: email, subject: \"View scoreboard\")\n    end\n\n  end\n</code></pre>\n\n<p>The problem is that it only sends the email to the last element in the array. For example, if the user types in <code>\"joe@example.com Mike@example.com\"</code> in the form it will only send an email to the last element in an array. In this case, <code>Mike@exapmle.com</code>. I am not sure why that is. I think I am looping through it correctly. I am not sure what's causing the problem. I am not sure if its the loop or maybe loops don't work in active mailer. Not exactly sure. Any help would be appreciated. Thanks!!</p>\n"}, {"tags": ["arrays", "ruby", "hash", "literals"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1448471115, "post_id": 33922340, "comment_id": 55605750, "body": "The bracketless hash syntax (what you are trying to use) only works in certain circumstances."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448471127, "post_id": 33922340, "comment_id": 55605758, "body": "Because Ruby&#39;s syntax sugar for immediate hashes isn&#39;t applicable to every possible Ruby construct."}, {"owner": {"reputation": 696, "user_id": 4321937, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/563a2751510b692aa29da5ee41f02b16?s=128&d=identicon&r=PG", "display_name": "omgmakeme", "link": "https://stackoverflow.com/users/4321937/omgmakeme"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448471425, "post_id": 33922340, "comment_id": 55605939, "body": "@DaveNewton would you have reference to the documentation that would show the chain of how this is getting processed? PS. Thanks for the edit"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448471884, "post_id": 33922340, "comment_id": 55606223, "body": "Not really, but there are more examples <a href=\"http://stackoverflow.com/a/19870350/438992\">here</a> and other places. You could try searching the web for stuff like &quot;Ruby implicit hash&quot; but I&#39;m not sure it&#39;s stated explicitly in any official docs. You might also check the Ruby lang specs to examine actual behavior."}, {"owner": {"reputation": 696, "user_id": 4321937, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/563a2751510b692aa29da5ee41f02b16?s=128&d=identicon&r=PG", "display_name": "omgmakeme", "link": "https://stackoverflow.com/users/4321937/omgmakeme"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448471942, "post_id": 33922340, "comment_id": 55606268, "body": "@DaveNewton Thanks so much, this will take me far!"}], "answers": [{"comments": [{"owner": {"reputation": 696, "user_id": 4321937, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/563a2751510b692aa29da5ee41f02b16?s=128&d=identicon&r=PG", "display_name": "omgmakeme", "link": "https://stackoverflow.com/users/4321937/omgmakeme"}, "edited": false, "score": 0, "creation_date": 1448473892, "post_id": 33923111, "comment_id": 55607435, "body": "The [](a: :b) method totally makes sense now, after reading the Array documentation I didn&#39;t know [a: :b] == [](a: :b), but after your explanation it makes sense.  Now why ruby will see it as a hash is another thing, but you cleared up this method for me.  Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448482321, "post_id": 33923111, "comment_id": 55612042, "body": "Excellent! I believe it is also true that <code>a: :b</code> or <code>&#39;c&#39;=&gt;&#39;d&#39;</code> is interpreted as a hash <i>only if</i> it is the argument of a method. (It cannot not, for example, be a receiver.) It true, that would be welcome, as it would tell us exactly where the bracket-less form can and cannot be used."}], "tags": [], "owner": {"reputation": 4286, "user_id": 2423093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ao9H5.png?s=128&g=1", "display_name": "Alex Peachey", "link": "https://stackoverflow.com/users/2423093/alex-peachey"}, "is_accepted": true, "score": 4, "last_activity_date": 1448473302, "creation_date": 1448473302, "answer_id": 33923111, "question_id": 33922340, "link": "https://stackoverflow.com/questions/33922340/creating-an-array-containing-a-hash/33923111#33923111", "title": "Creating an array containing a hash", "body": "<p>When you just have <code>a: :b</code> that is a statement and it is invalid Ruby syntax.</p>\n\n<p>When you have <code>[a: :b]</code>, you are actually calling a method. The method you are calling is <code>[](a: :b)</code>. When you give <code>a: :b</code> as the argument to a method Ruby sees it as a hash and gives the method <code>{:a =&gt; :b}</code> as it's argument. So the end result is the <code>[{:a =&gt; :b}]</code> that you are seeing.</p>\n"}], "owner": {"reputation": 696, "user_id": 4321937, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/563a2751510b692aa29da5ee41f02b16?s=128&d=identicon&r=PG", "display_name": "omgmakeme", "link": "https://stackoverflow.com/users/4321937/omgmakeme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 33923111, "answer_count": 1, "score": 3, "last_activity_date": 1448481841, "creation_date": 1448470906, "last_edit_date": 1448471236, "question_id": 33922340, "link": "https://stackoverflow.com/questions/33922340/creating-an-array-containing-a-hash", "title": "Creating an array containing a hash", "body": "<p>QUESTION EDIT - Breakdown how the 2nd example creates a hash.</p>\n\n<p>I can't figure out why the first example below does not create a hash and the second one does. </p>\n\n<pre><code>a: :b\n# =&gt; SyntaxError: (irb):1: syntax error, unexpected ':', expecting end-of-input\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>[a: :b]\n# =&gt; [{:a =&gt; :b}]\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 576, "user_id": 5601055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0cc8bc05264395dbfbeae0a546a6cc5?s=128&d=identicon&r=PG&f=1", "display_name": "pwilmot", "link": "https://stackoverflow.com/users/5601055/pwilmot"}, "edited": false, "score": 1, "creation_date": 1448470894, "post_id": 33922253, "comment_id": 55605611, "body": "How are you getting the 3 characters to look for?  Can you just run a regex filter over all elements in the array?"}, {"owner": {"reputation": 8545, "user_id": 2856441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca44efe87577e6c75bc508b38131072f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Kennedy", "link": "https://stackoverflow.com/users/2856441/joe-kennedy"}, "edited": false, "score": 1, "creation_date": 1448470904, "post_id": 33922253, "comment_id": 55605615, "body": "What is your expected output? It&#39;s unclear from your question"}, {"owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "edited": false, "score": 0, "creation_date": 1448471056, "post_id": 33922253, "comment_id": 55605707, "body": "expected output would be new array that only has elements if they have common first 3 characters"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448471442, "post_id": 33922253, "comment_id": 55605949, "body": "What is the output for <code>[&quot;aaax&quot;, &quot;aaay&quot;, &quot;bbbz&quot;, &quot;bbbw&quot;]</code>?"}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1448471444, "post_id": 33922253, "comment_id": 55605951, "body": "I think the question is clear , he wants to find matching patterns ... The pattern is  to &quot;elements of the array start with the same three chars &quot;"}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "is_accepted": false, "score": 1, "last_activity_date": 1448471642, "creation_date": 1448471642, "answer_id": 33922569, "question_id": 33922253, "link": "https://stackoverflow.com/questions/33922253/select-all-elements-that-have-the-same-first-three-characters-in-array/33922569#33922569", "title": "Select all elements that have the same first three characters in array", "body": "<p>I think your question needs clarifitcation- What if you have an array <code>[\"hello\", \"hello, what is your name?\", \"goodbye\", \"goodbye, user\"]</code>?</p>\n\n<p>In this case you would have 2 possible/mutually exclusive groups to select. I would approach this problem by avoiding #select all together:</p>\n\n<p>-Create an empty <code>result</code> hash with a default return of a new, empty array.\n-Iterate over each element in the array, pushing it onto the array at a key of its first three digits.\n-Apply your choice of logic to return the hash or simply the key(s)/value(s) you want (max, all greater than 1, etc).</p>\n\n<pre><code>def first_three_chars_match(strings)\n  result = Hash.new{ |hash,key| hash[key] = Array.new }\n  strings.each do |string|\n    key = string.slice(0,3)\n    result[key] &lt;&lt; string\n  end\n  result\nend\n\nfirst_three_chars_match([\"hello\", \"hello, what is your name?\", \"goodbye\", \"goodbye, user\"])\n=&gt; {\"hel\"=&gt;[\"hello\", \"hello, what is your name?\"], \"goo\"=&gt;[\"goodbye\", \"goodbye, user\"]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1448471646, "creation_date": 1448471646, "answer_id": 33922575, "question_id": 33922253, "link": "https://stackoverflow.com/questions/33922253/select-all-elements-that-have-the-same-first-three-characters-in-array/33922575#33922575", "title": "Select all elements that have the same first three characters in array", "body": "<p>Here is one way to do this:</p>\n\n<pre><code>ary = [\"Hello, how are you\", \"Hello, I'm well\", \"What is your name\"]\nmatches = ary.inject({}) do |hash, str| \n  chars = str[0,3]; \n  hash[chars] = (hash[chars] || []) &lt;&lt; str; \n  hash \nend\np matches\n</code></pre>\n\n<p>Output of program:</p>\n\n<pre><code>{\"Hel\"=&gt;[\"Hello, how are you\", \"Hello, I'm well\"], \"Wha\"=&gt;[\"What is your name\"]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "edited": false, "score": 0, "creation_date": 1448472080, "post_id": 33922662, "comment_id": 55606347, "body": "I up voted everyone&#39;s answer since they were all similar but this works the best.  Thanks!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1448471901, "creation_date": 1448471901, "answer_id": 33922662, "question_id": 33922253, "link": "https://stackoverflow.com/questions/33922253/select-all-elements-that-have-the-same-first-three-characters-in-array/33922662#33922662", "title": "Select all elements that have the same first three characters in array", "body": "<p>It is entirely not clear what the OP wants, but if what the other answers at this moment give is what the OP wants, then here is a simpler way:</p>\n\n<pre><code>a = [\"Hello, how are you\", \"Hello, I'm well\", \"What is your name\"]\na.group_by{|e| e[0, 3]}\n</code></pre>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 33922662, "answer_count": 3, "score": 0, "last_activity_date": 1448471901, "creation_date": 1448470671, "last_edit_date": 1448471822, "question_id": 33922253, "link": "https://stackoverflow.com/questions/33922253/select-all-elements-that-have-the-same-first-three-characters-in-array", "title": "Select all elements that have the same first three characters in array", "body": "<p>I have an array</p>\n\n<pre><code>[\"Hello, how are you\", \"Hello, I'm well\", \"What is your name\"]\n</code></pre>\n\n<p>I want to select all elements that have the same first three characters.  However, I don't know what the elements will be beforehand.</p>\n\n<p>Edit:  Rethinking this question.  I'm really looking for a way to group elements that have the first x common characters.  They can either be new arrays or the same array, but the elements are sorted correctly.</p>\n"}, {"tags": ["ruby", "api", "youtube", "google-api-client"], "comments": [{"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "edited": false, "score": 0, "creation_date": 1511371411, "post_id": 33921697, "comment_id": 81836107, "body": "What type of authentication did you ended up using?"}], "answers": [{"comments": [{"owner": {"reputation": 1920, "user_id": 154573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89b2444094039587c44bf73555714292?s=128&d=identicon&r=PG", "display_name": "samullen", "link": "https://stackoverflow.com/users/154573/samullen"}, "edited": false, "score": 0, "creation_date": 1448981711, "post_id": 34009757, "comment_id": 55801552, "body": "Thanks, Steve. Based on that error, am I right in understanding that YouTube doesn&#39;t allow service accounts to do uploads?"}, {"owner": {"reputation": 9407, "user_id": 1090284, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/62a96beb2ddd36384248f805ee7f4b31?s=128&d=identicon&r=PG", "display_name": "Steve Bazyl", "link": "https://stackoverflow.com/users/1090284/steve-bazyl"}, "reply_to_user": {"reputation": 1920, "user_id": 154573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89b2444094039587c44bf73555714292?s=128&d=identicon&r=PG", "display_name": "samullen", "link": "https://stackoverflow.com/users/154573/samullen"}, "edited": false, "score": 0, "creation_date": 1449087638, "post_id": 34009757, "comment_id": 55858768, "body": "That&#39;s my understanding."}], "tags": [], "owner": {"reputation": 9407, "user_id": 1090284, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/62a96beb2ddd36384248f805ee7f4b31?s=128&d=identicon&r=PG", "display_name": "Steve Bazyl", "link": "https://stackoverflow.com/users/1090284/steve-bazyl"}, "is_accepted": true, "score": 0, "last_activity_date": 1448925174, "creation_date": 1448925174, "answer_id": 34009757, "question_id": 33921697, "link": "https://stackoverflow.com/questions/33921697/uploading-videos-to-youtube-w-ruby-and-v3-api-results-in-unauthorized-error/34009757#34009757", "title": "Uploading videos to YouTube w/ Ruby and v3 API results in Unauthorized error", "body": "<p>Most likely the issue is you're getting a <a href=\"https://developers.google.com/youtube/v3/docs/errors\" rel=\"nofollow\">youtubeSignupRequired</a> error due to trying to use a service account.</p>\n\n<p>There's a bug in the client library that is causing the error to get masked, but there's an issue open for that.</p>\n"}], "owner": {"reputation": 1920, "user_id": 154573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89b2444094039587c44bf73555714292?s=128&d=identicon&r=PG", "display_name": "samullen", "link": "https://stackoverflow.com/users/154573/samullen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 34009757, "answer_count": 1, "score": 0, "last_activity_date": 1448925174, "creation_date": 1448469034, "question_id": 33921697, "link": "https://stackoverflow.com/questions/33921697/uploading-videos-to-youtube-w-ruby-and-v3-api-results-in-unauthorized-error", "title": "Uploading videos to YouTube w/ Ruby and v3 API results in Unauthorized error", "body": "<p>I'm trying to create a service which will upload videos to my client's YouTube account. </p>\n\n<p>Here's what I've done so far:</p>\n\n<ul>\n<li>I'm using Google Ruby gems - <code>googleauth</code> and <code>google-api-client</code> - and have the \"service account\" set up.</li>\n<li>I've set the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable to point to the downloaded json file provided when setting up the service account</li>\n<li>I'm requiring the correct library: <code>google/apis/youtube_v3</code></li>\n</ul>\n\n<p>Here's the code:</p>\n\n<pre><code>class Video &lt; ActiveRecord::Base\n\n  def upload_to_youtube!(force=false)\n    if self.youtube_key.blank? || force\n      yt = Google::Apis::YoutubeV3::YouTubeService.new\n      scopes =  [\n        \"https://www.googleapis.com/auth/youtube\", \n        \"https://www.googleapis.com/auth/youtube.force-ssl\", \n        \"https://www.googleapis.com/auth/youtube.upload\"\n      ]\n      authorization = Google::Auth.get_application_default(scopes)\n      yt.authorization = authorization\n\n      title = \"Clever Title\"\n      description = \"Lorem ipsum dolor\"\n      file_path = \"/path/to/mp4/file.mp4\"\n\n      metadata = {\n        snippet: {\n          title: title,\n          description: description,\n        },\n      }\n\n      yt.insert_video(\"id\", metadata, upload_source: file_path, content_type: \"video/mp4\", options: {retries: 3})\n    else\n      true\n    end\n  end\nend\n</code></pre>\n\n<p>When running this, I get the following error:</p>\n\n<pre><code>Sending upload start command to https://www.googleapis.com/upload/youtube/v3/videos?part=id\nUpload status final\nError - #&lt;Google::Apis::AuthorizationError: Unauthorized&gt;\n\nRetrying after authentication failure\nSending upload query command to\nError - #&lt;NoMethodError: undefined method `+' for nil:NilClass&gt;\n\nNoMethodError: undefined method `+' for nil:NilClass\nfrom /Users/samullen/.rbenv/versions/2.2.2/lib/ruby/2.2.0/net/http.rb:1532:in `addr_port'\n</code></pre>\n\n<p>I'm at a loss and I'm running out of time. I don't know if there's something else with OAuth I need to do, a sacrifice which needs to be made, or a jig that needs to be danced. I'm just stumped. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "deployment"], "comments": [{"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1448469346, "post_id": 33921637, "comment_id": 55604560, "body": "can you ssh to your aws instance without password?"}, {"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "reply_to_user": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1448494824, "post_id": 33921637, "comment_id": 55617646, "body": "@LongNguyen yes I can. I have downloaded a .pem file then I would <code>ssh -i &quot;fuitter.pem&quot; ubuntu@52.88.43.104</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": true, "score": 3, "last_activity_date": 1448499595, "creation_date": 1448499595, "answer_id": 33929001, "question_id": 33921637, "link": "https://stackoverflow.com/questions/33921637/error-while-doing-mina-setup/33929001#33929001", "title": "Error while doing mina setup", "body": "<p>As you have provided that you currently ssh to your instance using <code>.pem</code> file and as Mina doesn't provide a way to connect to ssh using <code>.pem</code> file (yet). So you can add your public_key of your computer to your instance and enable login via public key, which means you can ssh to your instance without password or <code>.pem</code> file.</p>\n\n<p>To copy your public key to your ec2 instance (for Linux or Mac only):</p>\n\n<pre><code>cat ~/.ssh/id_rsa.pub | ssh -i \"fuitter.pem\" ubuntu@52.88.43.104 \"cat &gt;&gt; .ssh/authorized_keys\"\n</code></pre>\n\n<p>ssh to your ec2 instance and restart ssh service:</p>\n\n<pre><code>sudo service ssh restart\n</code></pre>\n\n<p>Then try to ssh to your instance without pem file</p>\n\n<pre><code>ssh ubuntu@52.88.43.104\n</code></pre>\n\n<p>If it works, mina will connect to your instance successfully.</p>\n"}], "owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "accepted_answer_id": 33929001, "answer_count": 1, "score": 1, "last_activity_date": 1448499595, "creation_date": 1448468907, "question_id": 33921637, "link": "https://stackoverflow.com/questions/33921637/error-while-doing-mina-setup", "title": "Error while doing mina setup", "body": "<p>I am using mina to deploy my rails app. I am using aws with nginx and rvm.</p>\n\n<p>Whenever I do <code>mina setup</code> I get</p>\n\n<pre><code>    Permission denied (publickey).\n\n !     Command failed.\n       Failed with status 1 (255)\n</code></pre>\n\n<p>Here is my <code>deploy.rb</code> file</p>\n\n<pre><code>require 'mina/bundler'\nrequire 'mina/rails'\nrequire 'mina/git'\n# require 'mina/rbenv'  # for rbenv support. (http://rbenv.org)\nrequire 'mina/rvm'    # for rvm support. (http://rvm.io)\n\n# Basic settings:\n#   domain       - The hostname to SSH to.\n#   deploy_to    - Path to deploy into.\n#   repository   - Git repo to clone from. (needed by mina/git)\n#   branch       - Branch name to deploy. (needed by mina/git)\nset :user, 'ubuntu'\nset :domain, 'domain.com'\nset :deploy_to, '/usr/share/nginx/html/project'\nset :repository, 'https://mc_cannibal@bitbucket.org/mc_cannibal/fuitter2.git'\nset :branch, 'master'\n# set :forward_agent, true\n\n# For system-wide RVM install.\n#   set :rvm_path, '/usr/local/rvm/bin/rvm'\n\n# Manually create these paths in shared/ (eg: shared/config/database.yml) in your server.\n# They will be linked in the 'deploy:link_shared_paths' step.\nset :shared_paths, ['config/database.yml', 'config/secrets.yml', 'log']\n\n# Optional settings:\n#   set :user, 'foobar'    # Username in the server to SSH to.\n#   set :port, '30000'     # SSH port number.\n#   set :forward_agent, true     # SSH forward_agent.\n\n# This task is the environment that is loaded for most commands, such as\n# `mina deploy` or `mina rake`.\ntask :environment do\n  # If you're using rbenv, use this to load the rbenv environment.\n  # Be sure to commit your .ruby-version or .rbenv-version to your repository.\n  # invoke :'rbenv:load'\n\n  # For those using RVM, use this to load an RVM version@gemset.\n  invoke :'rvm:use[ruby-1.9.3-p125@default]'\nend\n\n# Put any custom mkdir's in here for when `mina setup` is ran.\n# For Rails apps, we'll make some of the shared paths that are shared between\n# all releases.\ntask :setup =&gt; :environment do\n  queue! %[mkdir -p \"#{deploy_to}/#{shared_path}/log\"]\n  queue! %[chmod g+rx,u+rwx \"#{deploy_to}/#{shared_path}/log\"]\n\n  queue! %[mkdir -p \"#{deploy_to}/#{shared_path}/config\"]\n  queue! %[chmod g+rx,u+rwx \"#{deploy_to}/#{shared_path}/config\"]\n\n  queue! %[touch \"#{deploy_to}/#{shared_path}/config/database.yml\"]\n  queue! %[touch \"#{deploy_to}/#{shared_path}/config/secrets.yml\"]\n  queue  %[echo \"-----&gt; Be sure to edit '#{deploy_to}/#{shared_path}/config/database.yml' and 'secrets.yml'.\"]\n\n  queue %[\n    repo_host=`echo $repo | sed -e 's/.*@//g' -e 's/:.*//g'` &amp;&amp;\n    repo_port=`echo $repo | grep -o ':[0-9]*' | sed -e 's/://g'` &amp;&amp;\n    if [ -z \"${repo_port}\" ]; then repo_port=22; fi &amp;&amp;\n    ssh-keyscan -p $repo_port -H $repo_host &gt;&gt; ~/.ssh/known_hosts\n  ]\nend\n\ndesc \"Deploys the current version to the server.\"\ntask :deploy =&gt; :environment do\n  to :before_hook do\n    # Put things to run locally before ssh\n  end\n  deploy do\n    # Put things that will set up an empty directory into a fully set-up\n    # instance of your project.\n    invoke :'git:clone'\n    invoke :'deploy:link_shared_paths'\n    invoke :'bundle:install'\n    invoke :'rails:db_migrate'\n    invoke :'rails:assets_precompile'\n    invoke :'deploy:cleanup'\n\n    to :launch do\n      queue \"mkdir -p #{deploy_to}/#{current_path}/tmp/\"\n      queue \"touch #{deploy_to}/#{current_path}/tmp/restart.txt\"\n    end\n  end\nend\n\n# For help in making your deploy script, see the Mina documentation:\n#\n#  - http://nadarei.co/mina\n#  - http://nadarei.co/mina/tasks\n#  - http://nadarei.co/mina/settings\n#  - http://nadarei.co/mina/helpers\n</code></pre>\n"}, {"tags": ["android", "ruby", "sdk", "android-ndk", "rubymotion"], "answers": [{"tags": [], "owner": {"reputation": 3450, "user_id": 4417582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/124b11df80445d70ea0f070b07e578ef?s=128&d=identicon&r=PG&f=1", "display_name": "abhimanyuaryan", "link": "https://stackoverflow.com/users/4417582/abhimanyuaryan"}, "is_accepted": true, "score": 2, "last_activity_date": 1450214796, "creation_date": 1450214796, "answer_id": 34299705, "question_id": 33921391, "link": "https://stackoverflow.com/questions/33921391/rubymotion-android-sdk-is-incorrect/34299705#34299705", "title": "RUBYMOTION_ANDROID_SDK is incorrect", "body": "<p>The problem is with not updating RubyMotion to latest build. </p>\n\n<p>Update via <code>sudo motion update</code></p>\n\n<p>Then update xcode to the latest build from App Store and everything should worok fine. </p>\n"}], "owner": {"reputation": 3450, "user_id": 4417582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/124b11df80445d70ea0f070b07e578ef?s=128&d=identicon&r=PG&f=1", "display_name": "abhimanyuaryan", "link": "https://stackoverflow.com/users/4417582/abhimanyuaryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 1, "accepted_answer_id": 34299705, "answer_count": 1, "score": 2, "last_activity_date": 1450214796, "creation_date": 1448468269, "question_id": 33921391, "link": "https://stackoverflow.com/questions/33921391/rubymotion-android-sdk-is-incorrect", "title": "RUBYMOTION_ANDROID_SDK is incorrect", "body": "<p>I have developed android apps in java so I have android-sdk and android-ndk in <code>~/AndroidStudioProjects/adt-bundle/sdk</code>. I have all the APIs downloaded in there, almost 6-8gb file. </p>\n\n<p>But, when I typed <code>motion android-setup</code> to setup android environment for RubyMotion, it downloaded sdk+ndk on its own in <code>~/.rubymotion-android/</code>. However, the process could not complete</p>\n\n<pre><code>\u276f motion android-setup                                         \nInstalled SDK is up-to-date.\nInstalled NDK is up-to-date.\n[error] RUBYMOTION_ANDROID_SDK is incorrect, should be /Users/abhimanyuaryan/.rubymotion-android/sdk\nadd `export RUBYMOTION_ANDROID_SDK=/Users/abhimanyuaryan/.rubymotion-android/sdk` to your ~/.profile\n[error] RUBYMOTION_ANDROID_NDK is incorrect, should be /Users/abhimanyuaryan/.rubymotion-android/ndk\nadd `export RUBYMOTION_ANDROID_NDK=/Users/abhimanyuaryan/.rubymotion-android/ndk` to your ~/.profile\n</code></pre>\n\n<p>So I guess the two android sdk locations are clashing with each other. </p>\n\n<p>I also outputted </p>\n\n<pre><code>export RUBYMOTION_ANDROID_SDK=/Users/abhimanyuaryan/.rubymotion-android/sdk\nexport RUBYMOTION_ANDROID_SDK=/Users/abhimanyuaryan/.rubymotion-android/sdk\n</code></pre>\n\n<p>in RubyMotion <code>.zshrc, .bash_profile, .profile</code> in <code>~</code> dir. But, I still get those ruby motion sdk and ndk are incorrect. I am using zsh shell instead of bash so I thought I should keep the export lines in zshrc instead of bashrc. By it didn't worked. So, I kept export lines in all files. But could get it to work. </p>\n\n<p>How can I get it fixed? </p>\n"}, {"tags": ["ruby", "singleton", "class-variables"], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "edited": false, "score": 0, "creation_date": 1448468859, "post_id": 33921584, "comment_id": 55604236, "body": "thanks. would you tell me why above program is not correct?. that scope is singleton class, isn&#39;t it ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "edited": false, "score": 0, "creation_date": 1448469095, "post_id": 33921584, "comment_id": 55604401, "body": "The more I think about it, the more I am convinced this is ruby parser glitch. The scope is <code>C.singleton_class</code>, yes. Even <code>class C ; class &lt;&lt; self ; class &lt;&lt; self ; @@ccv = 42 ; end ; end ; end</code> results in setting class variable on <code>C</code>. Probably this is how <code>@</code> and <code>@@</code> are handled. It responds to the class opened despite whether it appears inside class method, instance method, or any declaration."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448470645, "post_id": 33921584, "comment_id": 55605453, "body": "@CarySwoveland I have it on purpose."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1448468731, "creation_date": 1448468731, "answer_id": 33921584, "question_id": 33921185, "link": "https://stackoverflow.com/questions/33921185/how-to-define-a-class-variable-on-a-singleton-class/33921584#33921584", "title": "How to define a class variable on a singleton class", "body": "<p>To set the singleton class variable, one might use:</p>\n\n<pre><code>class C\n  class &lt;&lt; self\n    class_variable_set :@@cv, 42\n  end\nend\nC.singleton_class.class_variables #\u21d2 [:@@cv]\nC.singleton_class.class_variable_get :@@cv #\u21d2 42\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1448469583, "creation_date": 1448469583, "answer_id": 33921891, "question_id": 33921185, "link": "https://stackoverflow.com/questions/33921185/how-to-define-a-class-variable-on-a-singleton-class/33921891#33921891", "title": "How to define a class variable on a singleton class", "body": "<p>It is because when Ruby parser meets a class variable, the current class is resolved according to the lexical scope.</p>\n\n<p>Cf. <a href=\"http://blog.honeybadger.io/lexical-scoping-and-ruby-class-variables/\" rel=\"nofollow\">http://blog.honeybadger.io/lexical-scoping-and-ruby-class-variables/</a></p>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1448469583, "creation_date": 1448467604, "last_edit_date": 1448468778, "question_id": 33921185, "link": "https://stackoverflow.com/questions/33921185/how-to-define-a-class-variable-on-a-singleton-class", "title": "How to define a class variable on a singleton class", "body": "<p>I want to define a class variable on a singleton class. I checked this program's result:</p>\n\n<pre><code>class C\n  class &lt;&lt; self\n    @@val = 100\n  end\nend\n\nC.singleton_class.class_variables #=&gt; [], I expect [:@@val]\nC.class_variables #=&gt; [:@@val]\n</code></pre>\n\n<p>I expect the scope of <code>@@val</code> to be the singleton class, isn't it?</p>\n\n<p>Would you tell me how to define a class variable on a singleton class using <code>class &lt;&lt; self</code>, and the reason why this program is not correct?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "implicit-conversion"], "comments": [{"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 1, "creation_date": 1448467906, "post_id": 33921139, "comment_id": 55603634, "body": "What? None of these statements will be <code>true</code> because each generated <code>now</code> will be off by milliseconds."}, {"owner": {"reputation": 1201, "user_id": 2431728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/715090826868a4a97ffd8cd2cd4c18bc?s=128&d=identicon&r=PG", "display_name": "Jules Ivanic", "link": "https://stackoverflow.com/users/2431728/jules-ivanic"}, "reply_to_user": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1448467938, "post_id": 33921139, "comment_id": 55603649, "body": "Yep, you&#39;re right. I correct the question"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 1, "creation_date": 1448471597, "post_id": 33921139, "comment_id": 55606035, "body": "<b>Changing the functionality of a core library for any language with monkey patching is dangerous.</b> You are begging for complications down the road, whether it&#39;s yourself or a new developer that is baffled when <code>DateTime</code> doesn&#39;t work how it should."}, {"owner": {"reputation": 1201, "user_id": 2431728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/715090826868a4a97ffd8cd2cd4c18bc?s=128&d=identicon&r=PG", "display_name": "Jules Ivanic", "link": "https://stackoverflow.com/users/2431728/jules-ivanic"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1448471812, "post_id": 33921139, "comment_id": 55606176, "body": "@Mike Agree but I really hate this behavior. IMHO it&#39;s not a consistent behavior !"}, {"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1448471841, "post_id": 33921139, "comment_id": 55606193, "body": "Despite my answer, I do agree with @Mike, but I found it interesting to extend and write my own behaviour for <code>+</code>."}, {"owner": {"reputation": 1201, "user_id": 2431728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/715090826868a4a97ffd8cd2cd4c18bc?s=128&d=identicon&r=PG", "display_name": "Jules Ivanic", "link": "https://stackoverflow.com/users/2431728/jules-ivanic"}, "edited": false, "score": 0, "creation_date": 1448472769, "post_id": 33921139, "comment_id": 55606796, "body": "The solution to raise an exception when the passed type is wrong is not so dangerous"}, {"owner": {"reputation": 1201, "user_id": 2431728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/715090826868a4a97ffd8cd2cd4c18bc?s=128&d=identicon&r=PG", "display_name": "Jules Ivanic", "link": "https://stackoverflow.com/users/2431728/jules-ivanic"}, "edited": false, "score": 0, "creation_date": 1448474455, "post_id": 33921139, "comment_id": 55607787, "body": "but it does not work at all. Ahah. My RSpec tests does not launch at all !"}, {"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1448479575, "post_id": 33921139, "comment_id": 55610660, "body": "Make sure your rspec tests are including your overrides. Don&#39;t forget the exception can still be dangerous because there may be external libraries that depend on adding a <code>Fixnum</code> to <code>Time</code> objects, and so on..."}], "answers": [{"tags": [], "owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "is_accepted": true, "score": 5, "last_activity_date": 1448480431, "last_edit_date": 1448480431, "creation_date": 1448469601, "answer_id": 33921897, "question_id": 33921139, "link": "https://stackoverflow.com/questions/33921139/remove-deactivate-ruby-rails-implicit-conversions/33921897#33921897", "title": "Remove/deactivate Ruby/Rails implicit conversions", "body": "<p><strong>Warning:</strong> Monkey patching core Ruby functionality can be dangerous, especially in this case since many developers have an expectation of what behaviour <code>Time</code> and <code>Date</code> objects have when working with <code>+</code> and <code>Fixnum</code>s. If you're rolling your own solution with <strong>no known libraries</strong> that depend on this expected behaviour, you could utilize this answer. Otherwise, you're entering a world of hurt with unknown edge cases caused by inaccurate objects or random unwanted exceptions.</p>\n\n<p>This is actually behaviour of the <code>Date</code> object vs. the behaviour a <code>Time</code> object of the core Ruby library. A <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/date/rdoc/DateTime.html\" rel=\"nofollow\"><code>DateTime</code></a> object is an extension of <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/date/rdoc/Date.html\" rel=\"nofollow\"><code>Date</code></a>, and Rails just <a href=\"http://api.rubyonrails.org/classes/DateTime.html\" rel=\"nofollow\">extends it a bit further</a>.</p>\n\n<p>Here is the <a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/date/rdoc/Date.html#method-i-2B\" rel=\"nofollow\">method reference for <code>Date#+</code></a>, which states:</p>\n\n<blockquote>\n  <p>Returns a date object pointing other days after self. The other should be a numeric value. If the other is flonum, assumes its precision is at most nanosecond.</p>\n</blockquote>\n\n<p>Whereas the <a href=\"http://ruby-doc.org/core-2.2.3/Time.html#method-i-2B\" rel=\"nofollow\">method reference for <code>Time#+</code></a> behaves differently:</p>\n\n<blockquote>\n  <p>Adds some number of seconds (possibly fractional) to time and returns that value as a new <code>Time</code> object.</p>\n</blockquote>\n\n<p>Both of these behaviours are Ruby core and library methods written in C, however it is possible to monkey patch this core behaviour in Ruby. For example, to monkey patch <code>DateTime</code> to behave with seconds when adding a <code>Fixnum</code> to it:</p>\n\n<pre><code>class DateTime\n  def +(num)\n    num = num.to_f / (3600*24) if num.class == Fixnum\n    super(num)\n  end\nend\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>vagrant@ubuntu-14:/vagrant$ irb\n2.1.2 :001 &gt; require 'date'\n =&gt; true \n2.1.2 :002 &gt; class DateTime\n2.1.2 :003?&gt;   def +(num)\n2.1.2 :004?&gt;     num = num.to_f / (3600*24) if num.class == Fixnum\n2.1.2 :005?&gt;     super(num)\n2.1.2 :006?&gt;     end\n2.1.2 :007?&gt;   end\n =&gt; :+ \n2.1.2 :008 &gt; test = DateTime.now\n =&gt; #&lt;DateTime: 2015-11-25T12:09:18-05:00 ((2457352j,61758s,869355861n),-18000s,2299161j)&gt; \n2.1.2 :009 &gt; test + 1\n =&gt; #&lt;DateTime: 2015-11-25T12:09:19-05:00 ((2457352j,61759s,869355861n),-18000s,2299161j)&gt; \n</code></pre>\n\n<p>To address your edit, for what you want it would be the same approach. Simply override the classes and raise the exception if the detected parameter is a <code>Fixnum</code>:</p>\n\n<pre><code>class Time\n  def +(num)\n    raise TypeError.new(\"No implicit conversion of Fixnum into Time\") if num.class == Fixnum\n    super(num)\n  end\nend\n\nclass Date\n  def +(num)\n    raise TypeError.new(\"No implicit conversion of Fixnum into Date\") if num.class == Fixnum\n    super(num)\n  end\nend\n\nclass DateTime\n  def +(num)\n    raise TypeError.new(\"No implicit conversion of Fixnum into DateTime\") if num.class == Fixnum\n    super(num)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1448470576, "last_edit_date": 1448470576, "creation_date": 1448470194, "answer_id": 33922091, "question_id": 33921139, "link": "https://stackoverflow.com/questions/33921139/remove-deactivate-ruby-rails-implicit-conversions/33922091#33922091", "title": "Remove/deactivate Ruby/Rails implicit conversions", "body": "<p>To make <code>Date</code>/<code>DateTime</code> classes to add seconds instead of days in rails: </p>\n\n<pre><code>class Date\n  def plus_with_duration other\n    if ActiveSupport::Duration === other\n      other.since self\n    else\n      plus_without_duration(other.to_f / (24 * 60 * 60).to_f)\n    end\n  end\n  alias_method :+, :plus_with_duration\nend\n</code></pre>\n\n<p>To find a method to monkeypatch: </p>\n\n<pre><code>DateTime.instance_method(:+).source_location\n</code></pre>\n"}], "owner": {"reputation": 1201, "user_id": 2431728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/715090826868a4a97ffd8cd2cd4c18bc?s=128&d=identicon&r=PG", "display_name": "Jules Ivanic", "link": "https://stackoverflow.com/users/2431728/jules-ivanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33921897, "answer_count": 2, "score": 1, "last_activity_date": 1448480431, "creation_date": 1448467471, "last_edit_date": 1448471467, "question_id": 33921139, "link": "https://stackoverflow.com/questions/33921139/remove-deactivate-ruby-rails-implicit-conversions", "title": "Remove/deactivate Ruby/Rails implicit conversions", "body": "<p>Is there a way to remove/deactivate/monkey patch implicit conversions in Ruby/Rails ?</p>\n\n<p>I'm tired of bugs generated by code like this :</p>\n\n<pre><code>t = Time.now\nt + 3600 == t + 3600.seconds\n</code></pre>\n\n<p>but </p>\n\n<pre><code>dt = DateTime.now \ndt + 3600 == dt + 3600.days #(why it's days here and not seconds as with Time ?)\n</code></pre>\n\n<p>Depending of the date type in the addition (or substraction), the result is different because the Integer is implicitly converted to some seconds in case of a Time, and days in case of DateTime.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Ok. I have some great answers, here.<br>\nMaybe a better way to \"correct\" this quite not so consistent Ruby behavior is to raise an exception if someone try to add a Integer/Fixnum to a Date/Time.\nOnly Durations should be accepted, don't you think so ?</p>\n\n<p>Is there a way to do this ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1448467343, "post_id": 33920361, "comment_id": 55603255, "body": "Did you add <code>@import &quot;responsive_active_admin</code> in <code>app&#47;assets&#47;stylesheets&#47;active_admin.css.scss</code> as suggested in gem readme."}, {"owner": {"reputation": 369, "user_id": 3462608, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/hEWcA.jpg?s=128&g=1", "display_name": "Ravindra Yadav", "link": "https://stackoverflow.com/users/3462608/ravindra-yadav"}, "reply_to_user": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1448522593, "post_id": 33920361, "comment_id": 55625572, "body": "yes I have added @import &quot;responsive_active_admin in app/assets/stylesheets/active_admin.scss"}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1448531689, "post_id": 33920361, "comment_id": 55630774, "body": "Did you restart your server?"}, {"owner": {"reputation": 369, "user_id": 3462608, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/hEWcA.jpg?s=128&g=1", "display_name": "Ravindra Yadav", "link": "https://stackoverflow.com/users/3462608/ravindra-yadav"}, "reply_to_user": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1448533157, "post_id": 33920361, "comment_id": 55631730, "body": "@nayiaw I have restart server many times but did not solve my problem."}], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 3462608, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/hEWcA.jpg?s=128&g=1", "display_name": "Ravindra Yadav", "link": "https://stackoverflow.com/users/3462608/ravindra-yadav"}, "is_accepted": true, "score": 0, "last_activity_date": 1476871704, "last_edit_date": 1592644375, "creation_date": 1476871704, "answer_id": 40128280, "question_id": 33920361, "link": "https://stackoverflow.com/questions/33920361/uninitialized-constant-activeadminviewstabbednavigation-nameerror/40128280#40128280", "title": "uninitialized constant ActiveAdmin::Views::TabbedNavigation (NameError)", "body": "<blockquote>\n<p>by adding require_relative 'views' in view_factory.rb it solves my problem.</p>\n<p>you can find this file in activeadmin gem (/home/198/.rvm/gems/ruby-2.2.1@parking/bundler/gems/activeadmin-5536b158bf03/lib/active_admin`)</p>\n</blockquote>\n"}], "owner": {"reputation": 369, "user_id": 3462608, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/hEWcA.jpg?s=128&g=1", "display_name": "Ravindra Yadav", "link": "https://stackoverflow.com/users/3462608/ravindra-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 40128280, "answer_count": 1, "score": 0, "last_activity_date": 1476871704, "creation_date": 1448465342, "last_edit_date": 1592644375, "question_id": 33920361, "link": "https://stackoverflow.com/questions/33920361/uninitialized-constant-activeadminviewstabbednavigation-nameerror", "title": "uninitialized constant ActiveAdmin::Views::TabbedNavigation (NameError)", "body": "<blockquote>\n<p>I am getting an error while installing the responsive active admin gem.</p>\n<p>I am using <a href=\"https://github.com/ball-hayden/responsive_active_admin\" rel=\"nofollow noreferrer\">https://github.com/ball-hayden/responsive_active_admin</a> this gem to install.</p>\n<p>Bundle install works fine and after that when I refresh the url then  I got below error and I have also add require &quot;activeadmin&quot; in config/initializers/active_admin.rb but did not solve my problem, so please help me out Thanks in advance..!!</p>\n</blockquote>\n<pre><code>    uninitialized constant ActiveAdmin::Views::TabbedNavigation (NameError)\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/view_factory.rb:7:in `&lt;class:ViewFactory&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/view_factory.rb:4:in `&lt;module:ActiveAdmin&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/view_factory.rb:3:in `&lt;top (required)&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/application.rb:54:in `&lt;class:Application&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/application.rb:5:in `&lt;module:ActiveAdmin&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin/application.rb:4:in `&lt;top (required)&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin.rb:65:in `application'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/bundler/gems/activeadmin-d787029e5523/lib/active_admin.rb:70:in `setup'\n  /var/www/html/sites/parking.localhost/config/initializers/active_admin.rb:1:in `&lt;top (required)&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:652:in `block in load_config_initializer'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/notifications.rb:166:in `instrument'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:651:in `load_config_initializer'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:615:in `each'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `instance_exec'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `run'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:226:in `block in tsort_each'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:420:in `block (2 levels) in each_strongly_connected_component_from'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:419:in `block in each_strongly_connected_component_from'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:44:in `each'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:44:in `tsort_each_child'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:413:in `call'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:413:in `each_strongly_connected_component_from'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `each'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `call'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each'\n  /home/daffolap-198/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:203:in `tsort_each'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:54:in `run_initializers'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/application.rb:352:in `initialize!'\n  /var/www/html/sites/parking.localhost/config/environment.rb:5:in `&lt;top (required)&gt;'\n  config.ru:3:in `require'\n  config.ru:3:in `block in &lt;main&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n  config.ru:1:in `new'\n  config.ru:1:in `&lt;main&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/src/helper-scripts/rack-preloader.rb:110:in `eval'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/src/helper-scripts/rack-preloader.rb:110:in `preload_app'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/src/helper-scripts/rack-preloader.rb:156:in `&lt;module:App&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/src/helper-scripts/rack-preloader.rb:30:in `&lt;module:PhusionPassenger&gt;'\n  /home/daffolap-198/.rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/src/helper-scripts/rack-preloader.rb:29:in `&lt;main&gt;'\n</code></pre>\n<blockquote>\n<p>Gemfile</p>\n</blockquote>\n<pre><code>source 'https://rubygems.org'\n\n\n#responsive activeadmin gem\ngem 'responsive_active_admin'\ngem 'screencap'\n#activeadmin for backend interface\ngem 'activeadmin', github: 'activeadmin'\ngem 'devise'\ngem 'execjs'\ngem 'therubyracer', :platforms =&gt; :ruby\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.4'\n# Use mysql as the database for Active Record\ngem 'mysql2', '~&gt; 0.3.20'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n"}, {"tags": ["ruby", "templates", "mandrill"], "comments": [{"owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "edited": false, "score": 0, "creation_date": 1448465593, "post_id": 33920058, "comment_id": 55601917, "body": "Which gem are you using? There are a large number of ruby wrappers for the mandrill API. <a href=\"https://mandrillapp.com/docs/integrations.html\" rel=\"nofollow noreferrer\">mandrillapp.com/docs/integrations.html</a>"}, {"owner": {"reputation": 1762, "user_id": 3612177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ctz4q.png?s=128&g=1", "display_name": "Sylver", "link": "https://stackoverflow.com/users/3612177/sylver"}, "reply_to_user": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "edited": false, "score": 0, "creation_date": 1448465720, "post_id": 33920058, "comment_id": 55602007, "body": "It&#39;s mandrill-api, i just updated the message with this information, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 1762, "user_id": 3612177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ctz4q.png?s=128&g=1", "display_name": "Sylver", "link": "https://stackoverflow.com/users/3612177/sylver"}, "edited": false, "score": 0, "creation_date": 1448466791, "post_id": 33920791, "comment_id": 55602854, "body": "yes, that&#39;s because i already tried all of these possibilities. I will try the debugger, i didn&#39;t know about it. Thanks, i&#39;ll keep you posted"}, {"owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "reply_to_user": {"reputation": 1762, "user_id": 3612177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ctz4q.png?s=128&g=1", "display_name": "Sylver", "link": "https://stackoverflow.com/users/3612177/sylver"}, "edited": false, "score": 1, "creation_date": 1448481689, "post_id": 33920791, "comment_id": 55611720, "body": "awesome! glad to hear it! what was the actual problem?"}], "tags": [], "owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1448466440, "creation_date": 1448466440, "answer_id": 33920791, "question_id": 33920058, "link": "https://stackoverflow.com/questions/33920058/mandrill-template-merge-fail/33920791#33920791", "title": "Mandrill template merge fail", "body": "<p>You should only need to set <code>USERNAME</code> once, either in <code>:global_merge_vars</code> or <code>:merge_vars</code>.</p>\n\n<ul>\n<li>If you're sending to just one recipient, it doesn't matter which you do. </li>\n<li>If there are multiple recipients, use <code>:merge_vars</code>.</li>\n</ul>\n\n<p>Try building <code>message</code> and then <code>puts message.to_json</code> and drop it into the debugger at <a href=\"https://mandrillapp.com/api/docs/messages.JSON.html#method=send-template\" rel=\"nofollow\">https://mandrillapp.com/api/docs/messages.JSON.html#method=send-template</a> (Click the 'Try it' button.) See if that gives you any clues.</p>\n\n<p>You might also try using \"USERNAME\" instead of \"username\" as your variable name. The docs say merge vars are case-insensitive, but it's worth removing one more possible mismatch.</p>\n"}], "owner": {"reputation": 1762, "user_id": 3612177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ctz4q.png?s=128&g=1", "display_name": "Sylver", "link": "https://stackoverflow.com/users/3612177/sylver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 33920791, "answer_count": 1, "score": 1, "last_activity_date": 1488216646, "creation_date": 1448464455, "last_edit_date": 1448465688, "question_id": 33920058, "link": "https://stackoverflow.com/questions/33920058/mandrill-template-merge-fail", "title": "Mandrill template merge fail", "body": "<p>I'm using mandrill to send emails from my API (in ruby with the mandrill-api gem), like signup confirmation email.</p>\n\n<p>I have a merge tag in the template to put the username :</p>\n\n<blockquote>\n  <p>Hello *|USERNAME|*,</p>\n  \n  <p>Thank you very much for installing the app! ...\n  ...</p>\n</blockquote>\n\n<p>My ruby code looks like that :</p>\n\n<pre><code>m = Mandrill::API.new ENV['MANDRILL_KEY']\ntemplate_name = \"app-registration-welcome-email\"\ntemplate_content = [{}]\nmessage = {\n  :from_name=&gt; \"From Name\",\n  :to=&gt;[\n    {\n      :email =&gt; user.email,\n      :name =&gt; user.name,\n    }\n  ],\n  :global_merge_vars =&gt; [{\n    :name =&gt; \"username\",\n    :content =&gt; user.name\n  }],\n  :merge_language =&gt; \"mailchimp\",\n  :merge =&gt; true,\n  :merge_vars =&gt; [{\n    :rcpt =&gt; user.email,\n    :vars =&gt; [{\n      :name =&gt; \"username\",\n      :content =&gt; user.name\n    }],\n  }],\n  :track_opens =&gt; true,\n}\nm.messages.send_template template_name, template_content, message\n</code></pre>\n\n<p>Unfortunately, when i receive the email, all is fine (to, name, from, ...) but the merge tag isn't replaced in the body and i still have <code>*|USERNAME|*</code> displayed.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1448462370, "post_id": 33919302, "comment_id": 55599579, "body": "I know it, I&#39;m trying to hack it ;)"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 1, "creation_date": 1448462480, "post_id": 33919302, "comment_id": 55599660, "body": "So use <code>@article.another_association = @another_association</code>, where <code>@another_associaion = Association.find(5)</code> for example."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1448462530, "post_id": 33919302, "comment_id": 55599683, "body": "Should I send this via parameters in controller? :D"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 1, "last_activity_date": 1448462312, "creation_date": 1448462312, "answer_id": 33919302, "question_id": 33919252, "link": "https://stackoverflow.com/questions/33919252/has-one-how-to-assign-id/33919302#33919302", "title": "has_one - how to assign_id?", "body": "<p>Has one has a different syntax.</p>\n\n<pre><code>@article.build_another_association\n@article.create_another_association\n</code></pre>\n\n<p>See the <a href=\"http://guides.rubyonrails.org/association_basics.html#has-one-association-reference\" rel=\"nofollow\">guides</a> for more info</p>\n"}, {"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1448470102, "last_edit_date": 1495541712, "creation_date": 1448470102, "answer_id": 33922058, "question_id": 33919252, "link": "https://stackoverflow.com/questions/33919252/has-one-how-to-assign-id/33922058#33922058", "title": "has_one - how to assign_id?", "body": "<p>Use <a href=\"http://apidock.com/rails/ActiveRecord/Base/attr_accessible/class\" rel=\"nofollow noreferrer\"><code>attr_accessible</code></a></p>\n\n<blockquote>\n  <p>Specifies a white list of model attributes that can be set via mass-assignment</p>\n</blockquote>\n\n<p>So you can add it like this assuming you created and ran the migration already:</p>\n\n<pre><code>class Article &lt; AR::Base\n  has_many :comments\n  has_one  :another_association\n  attr_accessible :another_association_id\n</code></pre>\n\n<p>But if it's Rails 4 you may need to <a href=\"https://stackoverflow.com/questions/17371334/how-is-attr-accessible-used-in-rails-4\">handle it in the controller</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1448472167, "post_id": 33922217, "comment_id": 55606402, "body": "I think the OP mistakenly wrote his example backwards because the same thing should be true for his <code>has_many</code> example. But he claims that <code>@article.comment_ids = [1,2,3]</code> works. Even though that would also require <code>belongs_to :comment</code>."}], "tags": [], "owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1448470567, "creation_date": 1448470567, "answer_id": 33922217, "question_id": 33919252, "link": "https://stackoverflow.com/questions/33919252/has-one-how-to-assign-id/33922217#33922217", "title": "has_one - how to assign_id?", "body": "<p>You have the direction of the association reversed. </p>\n\n<ul>\n<li>With <code>has_one</code>, the other class should have an <code>article_id</code> to refer to a record in your <code>articles</code> table. </li>\n<li>If you want <code>articles.another_association_id</code>, then you should specify <code>belongs_to :another_association</code>.</li>\n</ul>\n\n<blockquote>\n  <p>This method should only be used if the other class contains the foreign key. If the current class contains the foreign key, then you should use belongs_to instead. </p>\n</blockquote>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one</a></p>\n"}, {"tags": [], "owner": {"reputation": 3700, "user_id": 537716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbe81f6942a6edb382054b2491837f8?s=128&d=identicon&r=PG", "display_name": "charlysisto", "link": "https://stackoverflow.com/users/537716/charlysisto"}, "is_accepted": false, "score": 0, "last_activity_date": 1448471558, "creation_date": 1448471558, "answer_id": 33922541, "question_id": 33919252, "link": "https://stackoverflow.com/questions/33919252/has-one-how-to-assign-id/33922541#33922541", "title": "has_one - how to assign_id?", "body": "<p>If you want to simulate the way <code>has_many</code> works you could try this:</p>\n\n<pre><code>class Article &lt; AR::Base\n  has_one :page\n\n  def page_id=(int_id)\n    self.page = Page.find(int_id)\n  end\n\nend\n\n@article.page_id = 3\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1448471558, "creation_date": 1448462202, "last_edit_date": 1448462607, "question_id": 33919252, "link": "https://stackoverflow.com/questions/33919252/has-one-how-to-assign-id", "title": "has_one - how to assign_id?", "body": "<p>There is a cool feature for <code>has_many</code> in Rails. I can write</p>\n\n<pre><code>class Article &lt; AR::Base\n  has_many :comments\n  has_one  :another_association\n</code></pre>\n\n<p>and voila! method <code>comment_ids=</code> created, which I can use in strong parameters and mass assignment. Somethind like <code>@article.comment_ids = [1,2,3]</code></p>\n\n<p>I need something similar for <code>has_one</code>, like <code>@article.another_association_id = 1</code>. But I get <code>NoMethodError</code> exception. Is there any way to make this method works?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "edited": false, "score": 0, "creation_date": 1448461792, "post_id": 33918882, "comment_id": 55599199, "body": "i found a solution for my first question: person_params[:addresses_attributes].first.last  anyway is there a more elegant way?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448462027, "post_id": 33918882, "comment_id": 55599348, "body": "Cannot be reproduced."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1448466672, "post_id": 33919140, "comment_id": 55602767, "body": "You might have explained why #1 works--many would have--but I think that would have made the answer less useful to the asker and other readers who are new to Ruby. If a reader doesn&#39;t understand that immediately, they will be able to figure it out,  and by doing so will have burned it into their brain."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1448461893, "creation_date": 1448461893, "answer_id": 33919140, "question_id": 33918882, "link": "https://stackoverflow.com/questions/33918882/how-to-check-if-nested-hash-attributes-are-empty/33919140#33919140", "title": "How to check if nested hash attributes are empty", "body": "<p>Answer 1:</p>\n\n<pre><code>person_params[:addresses_attributes]['0']\n</code></pre>\n\n<p>Answer 2:</p>\n\n<pre><code>hash = person_params[:addresses_attributes]['0']\nhash.empty?\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": false, "score": 1, "last_activity_date": 1448462057, "creation_date": 1448462057, "answer_id": 33919200, "question_id": 33918882, "link": "https://stackoverflow.com/questions/33918882/how-to-check-if-nested-hash-attributes-are-empty/33919200#33919200", "title": "How to check if nested hash attributes are empty", "body": "<p>This looks just like a params hash from Rails =D.  Anyway, it seems that your addresses_attributes contains some nested attributes.  This means that what you have in practice is more of an array of hashes than a single hash, and that's what you see right? Instead of it being an actually Ruby Array, it is a hash with the index as a string. </p>\n\n<p>So how do you get the address attributes? Well if you only want to get the first address, here are some ways to do that:</p>\n\n<pre><code>person_params[:addresses_attributes].values.first\n\n# OR\n\nperson_params[:addresses_attributes][\"0\"]\n</code></pre>\n\n<p>In the first case, we will just take the values from the addreses_attributes hash, which gives us an Array from which we can take the first item. If there are no values in addresses_attributes, then we will get <code>nil</code>.</p>\n\n<p>In the second case, we will just ask for the hash value with the key \"0\". If there are no values in addresses_attributes, we will get <code>nil</code> with this method also. (You might want to avoid using the second case, if you are not confident that the addresses_attributes hash will always be indexed from \"0\" and incremented by \"1\")</p>\n"}], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2931, "favorite_count": 0, "accepted_answer_id": 33919140, "answer_count": 2, "score": -3, "last_activity_date": 1448462127, "creation_date": 1448461134, "last_edit_date": 1448462127, "question_id": 33918882, "link": "https://stackoverflow.com/questions/33918882/how-to-check-if-nested-hash-attributes-are-empty", "title": "How to check if nested hash attributes are empty", "body": "<p>I have a Hash</p>\n\n<pre><code>person_params = {\"firstname\"=&gt;\"\",\n     \"lastname\"=&gt;\"tom123\",\n     \"addresses_attributes\"=&gt;\n      {\"0\"=&gt;\n        {\"address_type\"=&gt;\"main\",\n         \"catalog_delivery\"=&gt;\"0\",\n         \"street\"=&gt;\"tomstr\",\n         \"city\"=&gt;\"tomcity\"\n        }\n      }\n    }\n</code></pre>\n\n<p>With <code>person_params[:addresses_attributes]</code>, I get:</p>\n\n<pre><code># =&gt; {\"0\"=&gt;{\"address_type\"=&gt;\"main\", \"catalog_delivery\"=&gt;\"0\", \"street\"=&gt;\"tomstr\", \"zip\"=&gt;\"\", \"lockbox\"=&gt;\"\", \"city\"=&gt;\"tomcity\", \"country\"=&gt;\"\"}}\n</code></pre>\n\n<p>1) How can I get a new hash without the leading <code>0</code>?</p>\n\n<pre><code>desired_hash = {\"address_type\"=&gt;\"main\", \"catalog_delivery\"=&gt;\"0\", \"street\"=&gt;\"tomstr\", \"zip\"=&gt;\"\", \"lockbox\"=&gt;\"\", \"city\"=&gt;\"tomcity\", \"country\"=&gt;\"\"}\n</code></pre>\n\n<p>2) How can I check whether the attributes in the new hash are empty?</p>\n"}, {"tags": ["ruby", "email"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1448461302, "post_id": 33918448, "comment_id": 55598831, "body": "I hope you solve this and write a good answer! I also had problems with this in the past, solved it by some miracle or Google devilry, and immediately forgot everything."}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 2308559, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001885352450/picture?type=large", "display_name": "Kriszti&#225;n Dud&#225;s", "link": "https://stackoverflow.com/users/2308559/kriszti%c3%a1n-dud%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1448466098, "post_id": 33920333, "comment_id": 55602317, "body": "Well, it looks like I&#39;m out of luck: &quot;The setting you are looking for is not available for your account.&quot;."}, {"owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "reply_to_user": {"reputation": 743, "user_id": 2308559, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001885352450/picture?type=large", "display_name": "Kriszti&#225;n Dud&#225;s", "link": "https://stackoverflow.com/users/2308559/kriszti%c3%a1n-dud%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1448466555, "post_id": 33920333, "comment_id": 55602671, "body": "Looks like you&#39;re not using 2FA. I updated my answer with how to allow a &#39;less secure&#39; application to connect. You&#39;d use your regular password in this case."}, {"owner": {"reputation": 253, "user_id": 1424966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5e9573fd16e3761855f5b44af6869e9?s=128&d=identicon&r=PG", "display_name": "Stephen Karger", "link": "https://stackoverflow.com/users/1424966/stephen-karger"}, "edited": false, "score": 1, "creation_date": 1543197656, "post_id": 33920333, "comment_id": 93818152, "body": "To add a detail: If you <i>are</i> using 2FA, and your gmail account exists within G Suite, then the G Suite admin must also configure the organization to &quot;Allow users to manage their access to less secure apps&quot; in Security &gt; Advanced security settings &gt; Less secure apps. I needed this setting in order for the generated app password to work, despite the fact that using 2FA removes the &quot;Less secure apps&quot; setting from the individual person&#39;s account."}], "tags": [], "owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "is_accepted": true, "score": 21, "last_activity_date": 1448466502, "last_edit_date": 1448466502, "creation_date": 1448465246, "answer_id": 33920333, "question_id": 33918448, "link": "https://stackoverflow.com/questions/33918448/ruby-sending-mail-via-gmail-smtp/33920333#33920333", "title": "Ruby sending mail via gmail smtp", "body": "<h1>If you're <em>not</em> using 2 Factor Authentication</h1>\n\n<p>Go to this link:</p>\n\n<p><a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"noreferrer\">https://www.google.com/settings/security/lesssecureapps</a></p>\n\n<p>And select:</p>\n\n<p>\"Access for less secure apps\"</p>\n\n<p>as per:</p>\n\n<p><a href=\"https://support.google.com/accounts/answer/6010255?hl=en\" rel=\"noreferrer\">https://support.google.com/accounts/answer/6010255?hl=en</a></p>\n\n<p>In this case you would use your normal email and password to connect.</p>\n\n<h1>If you <em>are</em> using 2 Factor Authentication</h1>\n\n<p>You need to create an app specific password for your application. Follow these steps:</p>\n\n<ol>\n<li>Go to gmail</li>\n<li>in the top right corner click on your profile icon and select 'My Account'</li>\n<li>Click on 'Sign in &amp; Security'</li>\n<li>Scroll down the 'Sign in &amp; Security' page a bit and there is a section called 'App Passwords' Click on that.</li>\n<li>You should see a dropdown labelled 'Select App'. Select Mail.</li>\n<li>For the 'on my device' dropdown select 'Other' and type in commandline or whatever you want to call the app.</li>\n<li><p>Click 'Generate'. A password will be generated. Copy that password and replace the password you were using in your options hash with the generated password:</p>\n\n<p>options = { :address              => \"smtp.gmail.com\",\n            :port                 => 587,\n            :user_name            => '',\n            :password             => '',\n            :authentication       => 'plain',\n            :enable_starttls_auto => true  }</p></li>\n</ol>\n\n<p>That should be it. I just tried this and it worked for me.</p>\n\n<p>Also make sure your username is your full gmail email address.</p>\n\n<p>You can also find the 'Official docs' here: <a href=\"https://support.google.com/accounts/answer/185833?hl=en\" rel=\"noreferrer\">https://support.google.com/accounts/answer/185833?hl=en</a></p>\n"}], "owner": {"reputation": 743, "user_id": 2308559, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001885352450/picture?type=large", "display_name": "Kriszti&#225;n Dud&#225;s", "link": "https://stackoverflow.com/users/2308559/kriszti%c3%a1n-dud%c3%a1s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8117, "favorite_count": 3, "accepted_answer_id": 33920333, "answer_count": 1, "score": 10, "last_activity_date": 1448466502, "creation_date": 1448459989, "question_id": 33918448, "link": "https://stackoverflow.com/questions/33918448/ruby-sending-mail-via-gmail-smtp", "title": "Ruby sending mail via gmail smtp", "body": "<p>I'm creating a ruby script that checks the response status of an url and if it equals with 504, it sends a mail to another email address. For some reason, I get this: <code>/usr/lib/ruby/1.9.1/net/smtp.rb:960:in 'check_auth_response': 534-5.7.14 &lt;https://accounts.google.com/ContinueSignIn?sarp=1&amp;scc=1&amp;plt=AKgnsbv9z (Net::SMTPAuthenticationError)</code>\nI quadra checked the authentication data and they are valid. Maybe there can be something wrong in the code:</p>\n\n<pre><code>require 'mail'\n\noptions = { :address              =&gt; \"smtp.gmail.com\",\n            :port                 =&gt; 587,\n            :user_name            =&gt; '&lt;myusername&gt;',\n            :password             =&gt; '&lt;mypassword&gt;',\n            :authentication       =&gt; 'plain',\n            :enable_starttls_auto =&gt; true  }\n\nMail.defaults do\n  delivery_method :smtp, options\nend\n\nMail.deliver do\n       to 'dude920228@gmail.com'\n     from 'dude92@dude92.koding.com'\n  subject 'Test'\n     body 'Hurray!!! Test email!'\nend\n</code></pre>\n\n<p>Oh also, I got the notice from google that a less secure app tried to access my account, so I set up that less secure apps can use my account.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 1, "creation_date": 1448460301, "post_id": 33918073, "comment_id": 55598112, "body": "Hi! Just wanted to point out a couple of ruby things.  First, I think it is usually a bad idea to open up the Kernel module. Most objects in ruby (including the Object class) inherit from it. So by adding methods to Kernel, you are affectively adding them everywhere. <code>Object.new.cd_to</code> for example.  You could add this to a module to help separate your code from other ruby code.  Secondly, there are many ruby methods you can use in stead of the shell commands you are calling. For example, <code>Dir.chdir(Dir.home)</code> is equivalent to <code>cd $HOME</code>. You might want to check out FileUtils too."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1448464786, "post_id": 33918073, "comment_id": 55601349, "body": "@EtanReisner Thank you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1448465117, "post_id": 33918073, "comment_id": 55601601, "body": "@Etan, we do not disagree. My point is that the asker should treat their own answer the same as any other answer. If I were to ask a question, I might not accept the first answer posted, and certainly would not do so right away, even if I judged it to be excellent, as I wouldn&#39;t want to discourage other answers and would not want to short-circuit others still working on answers. Granted, the situation is somewhat different here because the question is no longer fresh, but any answer posted now may prompt other, possibly better, answers. After all, there&#39;s no rush to select an answer."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": true, "score": 1, "last_activity_date": 1448461013, "creation_date": 1448461013, "answer_id": 33918834, "question_id": 33918073, "link": "https://stackoverflow.com/questions/33918073/trailing-in-number-if-file-exist-home-4000-uw-spreadsheets-input-folio-ods/33918834#33918834", "title": "trailing `_&#39; in number if File.exist?(/home/4000_UW_spreadsheets/input_folio.ods) error", "body": "<p>As for the second error: you just need to add quotation marks around the path, like this </p>\n\n<pre><code>File.exist?(\"/home/4000_UW_spreadsheets/input_folio.ods\")\n</code></pre>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 33918834, "answer_count": 1, "score": 0, "last_activity_date": 1448463413, "creation_date": 1448459047, "last_edit_date": 1448463413, "question_id": 33918073, "link": "https://stackoverflow.com/questions/33918073/trailing-in-number-if-file-exist-home-4000-uw-spreadsheets-input-folio-ods", "title": "trailing `_&#39; in number if File.exist?(/home/4000_UW_spreadsheets/input_folio.ods) error", "body": "<p>I'm getting some errors I don't understand:</p>\n\n<pre><code>spreadsheet:37: trailing `_' in number\n                                if File.exist?(/home/4000_UW_spreadsheets/input_folio.ods)\n                                                          ^\nspreadsheet:37: syntax error, unexpected tINTEGER, expecting ')'\n                                if File.exist?(/home/4000_UW_spreadsheets/input_folio.ods)\n                                                          ^\nspreadsheet:37: syntax error, unexpected ')', expecting keyword_end\n</code></pre>\n\n<p>So what do these errors mean? And how do I fix them..?</p>\n\n<p>From this code:</p>\n\n<pre><code>#!/usr/local/bin/ruby\n\nmodule Kernel\n    def cd_to\n        puts \"Type 'go' to begin, press 'h' for help\"\n        input = gets.chomp.downcase\n        case input\n        when 'go'\n            `cd '/'`\n            `cd '/home/4000_UW_spreadsheets'`\n            ls_grep\n        when 'h'\n            usage_help\n        else\n            puts \"You're suppose to type 'go' stupid..\"     \n        end\n    end\n\n    def ls_grep\n        puts \"Folio number:\"\n        input_folio = gets.chomp\n        case input_folio\n        when input_folio =~ /^\\d{7}/\n            `ls -la|grep folio '#{input_folio}'`\n            file_list.each do |input_folio|\n                if File.exist?(/home/4000_UW_spreadsheets/input_folio.ods)\n                    puts \"Folio number #{input_folio} found\"\n                    remove #TO-DO make folio number run against file names\n                end\n            end\n            remove #TO-DO make folio number run against file names\n        else\n            puts \"Invalid file or directory\"\n            ls_grep\n        end\n    end\n\n    def remove\n        puts \"Are you sure you want to unlock this folio?(Y/N)\"\n        input = gets.chomp.upcase\n        case input\n        when 'Y'\n            `rm  ~folio'#{input_folio}'.lock`\n        when 'N'\n            puts \"Exiting...\"\n            exit\n        else\n            puts \"Error, exiting...\"\n            exit\n        end\n    end\n\n    def usage_help\n        puts &lt;&lt;-EOT.gsub(/^\\s*&gt;/, ' ')\n            &gt;\n            &gt;This program will unlock spreadhseets quickly and efficiently\n            &gt;To use follow the prompts and type in the folio number\n            &gt;Which should match the file name\n            &gt;\n            &gt;In the situation where the folio number doesn't match\n            &gt;The file name, get the file name and use it to unlock\n            &gt;The spreadsheet\n            &gt;\n        EOT\n    end\nend\ncd_to\n</code></pre>\n"}, {"tags": ["ruby", "types", "dsl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1448459166, "post_id": 33917622, "comment_id": 55597268, "body": "I think more information is needed to solve your problem.  Maybe you can submit a link to your code."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1448458951, "creation_date": 1448458951, "answer_id": 33918046, "question_id": 33917622, "link": "https://stackoverflow.com/questions/33917622/ruby-create-types-for-dsl-without-polluting-global-namespace/33918046#33918046", "title": "ruby, create types for DSL without polluting global namespace", "body": "<p>I am not sure I understood the question properly, but probably something like that would help:</p>\n\n<pre><code>@forms[name] = const_set(\n  name, \n  Class.new(Object) do |c|\n    c.send :define_method, :initialize, *args, &amp;script\n  end\n)\n</code></pre>\n\n<p>After call to <code>Forms::Define.draw 'Register'</code> you will have a class <code>Forms::Define::Register</code>, available from anywhere.</p>\n"}, {"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": true, "score": 1, "last_activity_date": 1448469556, "creation_date": 1448469556, "answer_id": 33921881, "question_id": 33917622, "link": "https://stackoverflow.com/questions/33917622/ruby-create-types-for-dsl-without-polluting-global-namespace/33921881#33921881", "title": "ruby, create types for DSL without polluting global namespace", "body": "<p>I solved the problem by creating an interface.</p>\n\n<p>Given from the example in the OP:</p>\n\n<pre><code>module Forms\n  module Types\n    class Some_Custom_Type &lt; String\n    end\n  end\nend\n</code></pre>\n\n<p>I added:</p>\n\n<pre><code>module Forms\n  module Types_Wrapper\n    def some_custom_type\n      Some_Custom_Type\n    end\n  end\n\n  def self.included(child)\n    child.include Types_Wrapper\n  end\nend\n</code></pre>\n\n<p>Is added like this:</p>\n\n<pre><code>module Forms\n  class Define\n    include Types\n  end\nend\n</code></pre>\n\n<p>and can be used like this:</p>\n\n<pre><code>Forms::Define.draw 'Register' do\n  some_code_using some_custom_type\n  #some dsl code...\nend\n</code></pre>\n\n<p>over:</p>\n\n<pre><code>Forms::Define.draw 'Register' do\n  some_code_using Some_Custom_Type\n  #some dsl code...\nend\n</code></pre>\n\n<p>Difference is slight but now works and more DSL like I feel.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33921881, "answer_count": 2, "score": -2, "last_activity_date": 1448469556, "creation_date": 1448457754, "last_edit_date": 1448462154, "question_id": 33917622, "link": "https://stackoverflow.com/questions/33917622/ruby-create-types-for-dsl-without-polluting-global-namespace", "title": "ruby, create types for DSL without polluting global namespace", "body": "<p>I have a DSL that uses custom types (objects that inherit from primitives, i.e. <code>String</code>), but I don't want to pollute the global namespace with them because they're only used in a few places and no where else.</p>\n\n<p>If I try to wrap the Types in the same module namespace as the DSL execution context, I get a <code>NameError</code>, <code>uninitialized constant</code>. I've also tried including the module that wraps the types and even used refinements to the <code>Object</code> class but nothing works.</p>\n\n<p>Due to the (relatively) complex nature of the problem I'm not sure if this is what you will need to help me, so I'm guessing.</p>\n\n<pre><code>module Forms\n  class Define\n    class &lt;&lt; self\n      attr_accessor :forms\n      def draw name, &amp;script\n        @forms[name] = new(&amp;script)\n      end\n    end\n\n    def initialize &amp;description\n      @meta = {}\n      @section_counter = 0\n      self.tree = Tree.new\n      instance_eval &amp;description\n    end\n  end\nend\n</code></pre>\n\n<p>And used like this:</p>\n\n<pre><code>Forms::Define.draw 'Register' do\n  #some dsl code...\nend\n</code></pre>\n\n<p>EDIT: thanks, didn't notice the typo's, any way.</p>\n\n<p>Since people don't seem to understand \"I have a DSL that uses custom types\" and \"I don't want to pollute the global namespace with them\" I'm going to illustrate the problem more specifically.</p>\n\n<p>I'm saying I have types like this:</p>\n\n<pre><code>class Some_Custom_Type &lt; String\nend\n</code></pre>\n\n<p>But doing it like this, pollutes the global namespace, so if I namespace the type like this:</p>\n\n<pre><code>module Forms\n  class Some_Custom_Type &lt; String\n  end\nend\n</code></pre>\n\n<p>and then try to use it:</p>\n\n<pre><code>Forms::Define.draw 'Register' do\n  some_code_using Some_Custom_Type\n  #some dsl code...\nend\n</code></pre>\n\n<p>it will error <code>uninitialized constant Some_Custom_Type (NameError)</code></p>\n\n<p>So I ask again with a bit more clarity, how do I ensure <code>Some_Custom_Type</code> will be available given the execution context of the DSL without polluting the global namespace?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "paperclip", "rails-api"], "answers": [{"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448457104, "post_id": 33917257, "comment_id": 55595848, "body": "It gives an error NoMethodError: undefined method `merge&#39; for #&lt;Ad:0x007efc204c0568&gt;"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448457278, "post_id": 33917257, "comment_id": 55595970, "body": "what is @ad? I thought it is hash!"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 1, "creation_date": 1448457436, "post_id": 33917257, "comment_id": 55596067, "body": "updated my answer. you would need to use .attributes method to make object hash."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448458295, "post_id": 33917257, "comment_id": 55596650, "body": "Thankuuuu :)........it works ...just one question what wrong in my question so that it down voted :("}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 1, "creation_date": 1448458569, "post_id": 33917257, "comment_id": 55596849, "body": "@HaseebAhmad, just noticed you probably will need to use <code>@ad.attributes.except(&quot;created_at&quot;,....)</code> if you don&#39;t need some of the attributes of your active record object."}], "tags": [], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "is_accepted": true, "score": 12, "last_activity_date": 1448458628, "last_edit_date": 1448458628, "creation_date": 1448456686, "answer_id": 33917257, "question_id": 33917093, "link": "https://stackoverflow.com/questions/33917093/how-to-merge-another-field-in-object-in-rails-json-response/33917257#33917257", "title": "How to merge another field in object in rails json response", "body": "<p>First merge <code>{:video_url =&gt; @ad.video.url }</code> with <code>@ad</code> then do following: </p>\n\n<pre><code>{:ad =&gt;  @ad.attributes.merge( :video_url =&gt; @ad.video.url )}\n</code></pre>\n\n<p>so your render call would look like following:</p>\n\n<pre><code>render json: {:success=&gt;true, :message=&gt;\"Ad detail\", ad:  @ad.attributes.merge( :video_url =&gt; @ad.video.url )}, :status=&gt;200  \n</code></pre>\n\n<p>You may need to use <code>@ad.attributes.except(\"created_at\",....)</code> at following code if you don't need some of the attributes of your active record object <code>@ad</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448457063, "post_id": 33917316, "comment_id": 55595813, "body": "It gives an error  NoMethodError: undefined method `merge&#39; for #&lt;Ad:0x007efc204c0568&gt;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448457120, "post_id": 33917316, "comment_id": 55595863, "body": "Please share what class <code>@ad</code> is."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448457718, "post_id": 33917316, "comment_id": 55596263, "body": "@HaseebAhmad : try use <code>@ad.video.path</code> to get the full path of the file on the filesystem"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448458479, "post_id": 33917316, "comment_id": 55596784, "body": "Thankuuuu :) ...just one question what wrong in my question so that it down voted :("}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1448460190, "post_id": 33917316, "comment_id": 55598048, "body": "Ohhhh sorryyy :) If you like it will a favor for me :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1448457069, "last_edit_date": 1448457069, "creation_date": 1448456855, "answer_id": 33917316, "question_id": 33917093, "link": "https://stackoverflow.com/questions/33917093/how-to-merge-another-field-in-object-in-rails-json-response/33917316#33917316", "title": "How to merge another field in object in rails json response", "body": "<p>Just before <code>render</code> define the object to send (note that if <code>@ad</code> is not a hash, probably it should be converted to hash before):</p>\n\n<pre><code>#                    \u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\u21d3 this depends on what @ad currently is\nobject_to_send = @ad.to_hash.merge(video_url: @ad.video.url)\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>render json: { success: true, \n               message: \"Ad detail\",\n               ad: object_to_send }, \n       status: 200\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 1, "last_activity_date": 1448458258, "creation_date": 1448458258, "answer_id": 33917792, "question_id": 33917093, "link": "https://stackoverflow.com/questions/33917093/how-to-merge-another-field-in-object-in-rails-json-response/33917792#33917792", "title": "How to merge another field in object in rails json response", "body": "<p>You can add new key and value in hash by adding this:</p>\n\n<pre><code>@ad.attributes[:video_url] = @ad.video.url\n</code></pre>\n\n<p>I hope this help you.</p>\n"}, {"tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": false, "score": 2, "last_activity_date": 1448460428, "creation_date": 1448460428, "answer_id": 33918605, "question_id": 33917093, "link": "https://stackoverflow.com/questions/33917093/how-to-merge-another-field-in-object-in-rails-json-response/33918605#33918605", "title": "How to merge another field in object in rails json response", "body": "<p>You could use the <code>as_json</code> method, but you need a method that returns the URL directly</p>\n\n<pre><code>class Ad\n  def video_url\n    video.url\n  end\nend\n</code></pre>\n\n<p>Then in the render</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>render json: {\n  success: true, \n  message: \"Ad detail\",\n  ad: ad.as_json(\n    only: {\n      :id, :title, :description, :video_file_name, :thumbnail_file_name, :campaign_id, :duration\n    },\n    methods: :video_url\n  ), \n  status: 200\n</code></pre>\n\n<p>of course if you want you could wrap this into some method, </p>\n\n<pre><code>class Ad\n  def my_video_json\n    as_json(\n      only: {\n        :id, :title, :description, :video_file_name, :thumbnail_file_name, :campaign_id, :duration\n      },\n      methods: :video_url\n    )\n  end\nend\n</code></pre>\n\n<p>Then the render would look like this</p>\n\n<pre><code>render json: { success: true, message: \"Ad detail\", ad: ad.my_video_json }, status: 200\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9060, "favorite_count": 4, "accepted_answer_id": 33917257, "answer_count": 4, "score": 4, "last_activity_date": 1483587730, "creation_date": 1448456149, "last_edit_date": 1483587730, "question_id": 33917093, "link": "https://stackoverflow.com/questions/33917093/how-to-merge-another-field-in-object-in-rails-json-response", "title": "How to merge another field in object in rails json response", "body": "<p>Json response which I send is like that</p>\n\n<pre><code>\"ad\": {\n\"id\": 3,\n\"title\": \"dgdfg\",\n\"description\": \"kjlj\",\n\"video_file_name\": \"SampleVideo_1080x720_1mb.mp4\",\n\"thumbnail_file_name\": \"images.jpeg\",\n\"campaign_id\": null,\n\"duration\": null\n},\n\n\"video_url\": \"/system/ads/videos/000/000/003/original/SampleVideo_1080x720_1mb.mp4?1448019186\"\n</code></pre>\n\n<p>I want that video_url also merge with in ad object.</p>\n\n<p>The way I send response now is </p>\n\n<pre><code>render json: {:success=&gt;true, :message=&gt;\"Ad detail\",:ad=&gt;@ad, :video_url =&gt; @ad.video.url}, :status=&gt;200\n</code></pre>\n\n<p>How I merge it with ad object?</p>\n\n<p>I want to send it like</p>\n\n<pre><code>\"ad\": {\n\"id\": 3,\n\"title\": \"dgdfg\",\n\"description\": \"kjlj\",\n\"video_file_name\": \"SampleVideo_1080x720_1mb.mp4\",\n\"thumbnail_file_name\": \"images.jpeg\",\n\"campaign_id\": null,\n\"duration\": null,\n\"video_url\": \"/system/ads/videos/000/000/003/original/SampleVideo_1080x720_1mb.mp4?1448019186\"\n\n }\n</code></pre>\n\n<p>My <code>@ad</code> object is </p>\n\n<pre><code>#&lt;Ad:0x007efc20495f98\nid: 3,\ntitle: \"dgdfg\",\ndescription: \"kjlj\",\nvideo_file_name: \"SampleVideo_1080x720_1mb.mp4\",\nvideo_content_type: \"video/mp4\",\nvideo_file_size: 1055736,\nvideo_updated_at: Fri, 20 Nov 2015 11:33:06 UTC +00:00,\nthumbnail_file_name: \"images.jpeg\",\nthumbnail_content_type: \"image/jpeg\",\nthumbnail_file_size: 9962,\nthumbnail_updated_at: Fri, 20 Nov 2015 11:33:22 UTC +00:00,\ncreated_at: Fri, 20 Nov 2015 11:33:22 UTC +00:00,\nupdated_at: Fri, 20 Nov 2015 11:33:22 UTC +00:00,\ncampaign_id: nil,\nduration: nil&gt;\n</code></pre>\n"}, {"tags": ["ruby", "node.js", "sockets", "client-server", "unix-socket"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1448456257, "post_id": 33917018, "comment_id": 55595249, "body": "Why do you call <code>client.end();</code> on <code>data</code>? Should not it be called on <code>end</code> instead?"}, {"owner": {"reputation": 5093, "user_id": 302005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eDmEQ.png?s=128&g=1", "display_name": "Pioz", "link": "https://stackoverflow.com/users/302005/pioz"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1448456421, "post_id": 33917018, "comment_id": 55595371, "body": "@mudasobwa I&#39;ve used the example of the doc <a href=\"https://nodejs.org/api/net.html#net_net_connect_options_connectlistener\" rel=\"nofollow noreferrer\">nodejs.org/api/net.html#net_net_connect_options_connectliste&zwnj;&#8203;ner</a>"}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1448457679, "post_id": 33917018, "comment_id": 55596240, "body": "The problem is that recv doesn&#39;t block, so it can only return what&#39;s available at that instant, which is sometimes nothing. W. Richard Stevens is the authority on this. Read his book"}, {"owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "reply_to_user": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 1, "creation_date": 1448477668, "post_id": 33917018, "comment_id": 55609587, "body": "@JohnLaRooy <code>recv</code> is a blocking call while <code>recv_nonblock</code> is the non-blocking variant. Of course, this assumes the file descriptor was not set with <code>O_NONBLOCK</code> prior to calling <code>recv</code>. I&#39;m willing to bet that this is not the case and that <code>recv</code> is blocking but after the connection finishes, <code>recv</code> is being called on a closed socket and therefore will always return an empty string."}], "answers": [{"comments": [{"owner": {"reputation": 5093, "user_id": 302005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eDmEQ.png?s=128&g=1", "display_name": "Pioz", "link": "https://stackoverflow.com/users/302005/pioz"}, "edited": false, "score": 0, "creation_date": 1448493186, "post_id": 33924327, "comment_id": 55617112, "body": "&quot;Now your server is calling recv on a socket that has been closed, which will return an empty string&quot;: this was the part I did not understand. Thanks!"}], "tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 2, "last_activity_date": 1448477937, "last_edit_date": 1448477937, "creation_date": 1448477508, "answer_id": 33924327, "question_id": 33917018, "link": "https://stackoverflow.com/questions/33917018/ruby-unixserver-with-node-js-client/33924327#33924327", "title": "Ruby UNIXServer with Node.js client", "body": "<p>Your client closes the connection upon connecting, writing <code>\"hello world\"</code>, and then receiving a response. Now your server is calling <code>recv</code> on a socket that has been closed, which will return an empty string. Since you're looping to read on this socket indefinitely, it will never return control back to the outer loop to call <code>accept</code> for the second client. The ruby version of your client works because it never closes the connection to the server.</p>\n\n<p>Breaking out of your inner loop after receiving an empty string should get you what you want,</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'socket'\n\nserver = UNIXServer.new('/tmp/ciccio.sock')\nloop do\n  sock = server.accept\n  loop do\n    begin\n      data = sock.recv(1024)\n      break if data.empty?\n\n      data = \"DO SOMETHING -&gt; #{data}\"\n      sock.write(data)\n      sock.flush\n    rescue Errno::EPIPE, Errno::ENOTCONN\n      break\n    end\n  end\nend\n</code></pre>\n\n<p>Another potential problem is that your server can only service a single connection to a single client, as the inner loop blocks any subsequent calls to <code>accept</code> until the current connection ends.</p>\n"}], "owner": {"reputation": 5093, "user_id": 302005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eDmEQ.png?s=128&g=1", "display_name": "Pioz", "link": "https://stackoverflow.com/users/302005/pioz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 33924327, "answer_count": 1, "score": 0, "last_activity_date": 1448477937, "creation_date": 1448455924, "last_edit_date": 1448456045, "question_id": 33917018, "link": "https://stackoverflow.com/questions/33917018/ruby-unixserver-with-node-js-client", "title": "Ruby UNIXServer with Node.js client", "body": "<p>I've this Ruby server that uses a Unix Socket:</p>\n\n<pre><code>require 'socket'\n\nserver = UNIXServer.new('/tmp/ciccio.sock')\nloop do\n  sock = server.accept\n  loop do\n    begin\n      data = sock.recv(1024)\n      data = \"DO SOMETHING -&gt; #{data}\"\n      sock.write(data)\n      sock.flush\n    rescue Errno::EPIPE, Errno::ENOTCONN\n      break\n    end\n  end\nend\n</code></pre>\n\n<p>And I've this client in JavaScript that uses node.js <a href=\"https://nodejs.org/api/net.html\" rel=\"nofollow\">net</a> api:</p>\n\n<pre><code>Net = require('net');\n\nvar client = Net.connect({path: '/tmp/ciccio.sock'}, () =&gt; {\n  console.log('write data');\n  client.write('hello world!');\n});\n\nclient.on('data', (data) =&gt; {\n  console.log(data.toString());\n  client.end();\n});\n\nclient.on('end', () =&gt; {\n  console.log('end');\n});\n\nclient.on('error', (error) =&gt; {\n  console.log(error.toString());\n});\n</code></pre>\n\n<p>The problem is that at the first iteration of server loop, <code>recv</code> receives the right string and the server replies to the client with the string <code>data</code>. But at the second iteration <code>recv</code> receives empty data and so a infinite loop begins... server continues to receive empty data and <code>recv</code> does not block...</p>\n\n<p>If I use a ruby client like this all works fine...</p>\n\n<pre><code>require 'socket'\n\nsock = UNIXSocket.new('/tmp/ciccio.sock')\nloop do\n  sock.write('hello world!')\n  data = sock.recv(1024)\n  puts data\n  sleep(10)\nend\nsock.close\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "dashing"], "comments": [{"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 1, "creation_date": 1448455833, "post_id": 33916864, "comment_id": 55594932, "body": "Update your complete action in code. Is this code in controller or model. When you get this error?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1448455888, "post_id": 33916864, "comment_id": 55594976, "body": "Which version of rails you are using?"}, {"owner": {"reputation": 2254, "user_id": 1662139, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/495b3fd80fc54175e969403ee41aef8b?s=128&d=identicon&r=PG", "display_name": "Wojciech Szabowicz", "link": "https://stackoverflow.com/users/1662139/wojciech-szabowicz"}, "edited": false, "score": 0, "creation_date": 1448456342, "post_id": 33916864, "comment_id": 55595332, "body": "3.2 rails and controller"}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 1, "last_activity_date": 1448613895, "last_edit_date": 1448613895, "creation_date": 1448456350, "answer_id": 33917166, "question_id": 33916864, "link": "https://stackoverflow.com/questions/33916864/request-original-url-and-undefined-local-variable-or-method-request-for-main/33917166#33917166", "title": "request.original_url and undefined local variable or method `request&#39; for main", "body": "<p>You're trying to access the <code>request</code> method of controller, but you can't because you are in <code>Model</code> class at this point.</p>\n\n<p><strong>Note:</strong> Update your code so it will be more clear. for your reference regarding <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-original_url\" rel=\"nofollow\"><strong><code>request.original_url</code></strong></a>. You may want to read up on <a href=\"http://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/\" rel=\"nofollow\"><strong>MVC in Rails</strong></a> or <a href=\"http://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/\" rel=\"nofollow\"><strong>MVC in general</strong></a>.</p>\n"}], "owner": {"reputation": 2254, "user_id": 1662139, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/495b3fd80fc54175e969403ee41aef8b?s=128&d=identicon&r=PG", "display_name": "Wojciech Szabowicz", "link": "https://stackoverflow.com/users/1662139/wojciech-szabowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1294, "favorite_count": 0, "accepted_answer_id": 33917166, "answer_count": 1, "score": -2, "last_activity_date": 1448613895, "creation_date": 1448455455, "last_edit_date": 1448455755, "question_id": 33916864, "link": "https://stackoverflow.com/questions/33916864/request-original-url-and-undefined-local-variable-or-method-request-for-main", "title": "request.original_url and undefined local variable or method `request&#39; for main", "body": "<p>I'm starting my adventure with ruby, and got stuck in one procedure I want to do so to the point, I'm using dashing to create some dashboards.</p>\n\n<p>But I need a instruction to read my URL to get query parameters from it, </p>\n\n<p>I was trying to use:</p>\n\n<pre><code>url = request.original_url\nprint(url)\n</code></pre>\n\n<p>But all Im getting is </p>\n\n<blockquote>\n  <p>'&lt;top (required)>': undefined local variable or method 'request' for main:Object (NameError)</p>\n</blockquote>\n\n<p>Am I missing something, maybe some gem or require?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "caching"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 4, "creation_date": 1448455024, "post_id": 33916584, "comment_id": 55594396, "body": "Have a look at <a href=\"http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment\" rel=\"nofollow noreferrer\">expire_fragment</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448473522, "post_id": 33916584, "comment_id": 55607208, "body": "Welcome to Stack Overflow. When asking, it&#39;s really important to tell us what you&#39;ve tried. Failing to do that makes us think you haven&#39;t tried and just immediately asked, looking like you want us to write code for you. That&#39;s not a popular thing on SO, and quickly leads to down votes and questions being closed. Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a> to get an idea of the expectations."}], "answers": [{"tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": true, "score": 4, "last_activity_date": 1448454719, "creation_date": 1448454719, "answer_id": 33916636, "question_id": 33916584, "link": "https://stackoverflow.com/questions/33916584/how-to-expire-cache-in-rails/33916636#33916636", "title": "How to expire cache in Rails?", "body": "<pre><code>Rails.cache.delete(params[:page])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1112, "user_id": 2072436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b249cbaef1c8317b21b19cea6fcf30?s=128&d=identicon&r=PG", "display_name": "Umar Khan", "link": "https://stackoverflow.com/users/2072436/umar-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1448454853, "creation_date": 1448454853, "answer_id": 33916669, "question_id": 33916584, "link": "https://stackoverflow.com/questions/33916584/how-to-expire-cache-in-rails/33916669#33916669", "title": "How to expire cache in Rails?", "body": "<p>Using ActiveSupport::Cache::Store, you should be able to do</p>\n\n<pre><code>&lt;% cache(key, :expires_in =&gt; 1.hour) do %&gt;\n   &lt;!-- content --&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "is_accepted": false, "score": 1, "last_activity_date": 1448455602, "last_edit_date": 1448455602, "creation_date": 1448455035, "answer_id": 33916728, "question_id": 33916584, "link": "https://stackoverflow.com/questions/33916584/how-to-expire-cache-in-rails/33916728#33916728", "title": "How to expire cache in Rails?", "body": "<p>This is called fragment caching, according to <a href=\"http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment\" rel=\"nofollow\">documentation</a> you can expire fragment by simply putting this code at your controller:</p>\n\n<pre><code>ActionController::Base.new.expire_fragment(params[:page], options = nil)\n</code></pre>\n"}], "owner": {"reputation": 1815, "user_id": 5110072, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0f00c171a617c7de7e8f29649ed44c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Shmatko", "link": "https://stackoverflow.com/users/5110072/alex-shmatko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "accepted_answer_id": 33916636, "answer_count": 3, "score": -1, "last_activity_date": 1448455602, "creation_date": 1448454535, "question_id": 33916584, "link": "https://stackoverflow.com/questions/33916584/how-to-expire-cache-in-rails", "title": "How to expire cache in Rails?", "body": "<p>I have a web page that gets cached in this way.</p>\n\n<pre><code>&lt;% cache(params[:page]) do %&gt;\n  #Content\n&lt;% end %&gt;\n</code></pre>\n\n<p>How can I expire cache now?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "typeahead", "searchkick"], "comments": [{"owner": {"reputation": 33, "user_id": 5439869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283dd2babc9307605966dcc88f3db0c4?s=128&d=identicon&r=PG", "display_name": "Ammad Baig", "link": "https://stackoverflow.com/users/5439869/ammad-baig"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1448451792, "post_id": 33915147, "comment_id": 55592537, "body": "Actually I am quite beginner with Elasticsearch and Rails. Thank you very much for your answer. Yes, It worked :D"}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1448452265, "last_edit_date": 1448452265, "creation_date": 1448451835, "answer_id": 33915662, "question_id": 33915147, "link": "https://stackoverflow.com/questions/33915147/twitter-typeahead-is-is-not-showing-suggestions-in-rails-4/33915662#33915662", "title": "Twitter Typeahead is is not showing suggestions in Rails 4", "body": "<p>I am not working with a typeahead lib, but i assume the problem here <code>displayKey: 'name'</code>, what's mean an <code>autocomplete</code> action in the <code>rails</code> should provide <code>json</code> with a key <code>name</code>, but you render an array. Try to remove <code>.map(&amp;:name)</code> from <code>Product.search(params[:query], fuzziness: 10)</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5439869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283dd2babc9307605966dcc88f3db0c4?s=128&d=identicon&r=PG", "display_name": "Ammad Baig", "link": "https://stackoverflow.com/users/5439869/ammad-baig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 33915662, "answer_count": 1, "score": 0, "last_activity_date": 1448452265, "creation_date": 1448450322, "question_id": 33915147, "link": "https://stackoverflow.com/questions/33915147/twitter-typeahead-is-is-not-showing-suggestions-in-rails-4", "title": "Twitter Typeahead is is not showing suggestions in Rails 4", "body": "<p>I have used elasticsearch with searchkick wrapper in my rails project. I have successfully integrated Twitter Typeahead (remote) into the project, but suggestions are not coming up. Can anybody Please look into this matter.</p>\n\n<p>I am getting Response Back but typeahead is not showing it in suggestions. </p>\n\n<p><strong>Pictures Below</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/TpE7f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TpE7f.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Response</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/fXtK0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fXtK0.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>controller :</strong></p>\n\n<pre><code>def autocomplete\n    render json: Product.search(params[:query], fuzziness: 10).map(&amp;:name) \nend\n</code></pre>\n\n<hr>\n\n<p><strong>index.html.erb :</strong></p>\n\n<pre><code>    &lt;%= form_tag products_path, method: :get do %&gt;\n  &lt;ul&gt;\n    &lt;li class=\"list\"&gt;\n      &lt;%= text_field_tag :query, params[:query],placeholder: \"Search Here\", class: \"typeahead form-control\", id: \"product-search\", autocomplete: \"off\" %&gt;\n    &lt;/li&gt;\n    &lt;li class=\"list\"&gt;\n      &lt;%= submit_tag \"Search\", class: \"btn btn-primary btn-size\" %&gt;\n    &lt;/li&gt;\n      &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>products.js</strong></p>\n\n<pre><code> var names = new Bloodhound({\n  datumTokenizer: function(d) { \n    return Bloodhound.tokenizers.whitespace(d.name); },\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n    remote: {\n      url: '/products/autocomplete?query=%QUERY',\n      wildcard: '%QUERY'\n    }\n  });\n\n  // initialize the bloodhound suggestion engine\n  names.initialize();\n\n  // instantiate the typeahead UI\n  $('#product-search').typeahead(null, {\n  displayKey: 'name',\n  source: names.ttAdapter()\n});\n</code></pre>\n"}, {"tags": ["ruby", "git-bash", "capybara-webkit"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1448450307, "post_id": 33915058, "comment_id": 55591613, "body": "did you installed <code>qt</code>? <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit\" rel=\"nofollow noreferrer\">github.com/thoughtbot/capybara-webkit/wiki/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 4353890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/958bafe8d88bde455784315374e21ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/4353890/haris"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1448450863, "post_id": 33915058, "comment_id": 55591968, "body": "Yeah followed and tried that tutorial couple of times but no success at the bottom in the Windows section"}, {"owner": {"reputation": 35, "user_id": 4353890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/958bafe8d88bde455784315374e21ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/4353890/haris"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1448451672, "post_id": 33915058, "comment_id": 55592460, "body": "And I can&#39;t get past that step of the tutorial: $ bundle exec rake build. which is where everything goes wrong"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1448453055, "post_id": 33915058, "comment_id": 55593237, "body": "do you have <code>g++</code> installed?"}, {"owner": {"reputation": 35, "user_id": 4353890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/958bafe8d88bde455784315374e21ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/4353890/haris"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1448454953, "post_id": 33915058, "comment_id": 55594354, "body": "yeah I am sure I have it...How do I check if I have it to confirm in git bash?"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1448457834, "post_id": 33915058, "comment_id": 55596327, "body": "just type <code>gcc</code>and see what it says"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448470443, "post_id": 33915058, "comment_id": 55605320, "body": "Welcome to Stack Overflow. Please review your posting. Is it easily readable? Readability makes it easier for us to help you, encouraging and speeding responses. Formatting of questions and answers is easy and well documented. Please take the time in the future to help us help you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448470648, "post_id": 33915058, "comment_id": 55605458, "body": "&quot;<code>g++: Command not found</code>&quot; is significant."}, {"owner": {"reputation": 35, "user_id": 4353890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/958bafe8d88bde455784315374e21ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/4353890/haris"}, "edited": false, "score": 0, "creation_date": 1448535027, "post_id": 33915058, "comment_id": 55632926, "body": "In this situation how would I get g++, because I think I have it considered in the tutorial by following this step: <code>In QT_INSTALL_DIR\\4.8.5\\mkspecs\\win32-g++\\qmake.conf) # Ex: C:\\Qt\\4.8.5\\mkspecs\\win32-g++\\qmake.conf # Add the following after the line beginning with QMAKE_IDC QMAKE_RCC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}rcc$${EXE_SUFFIX} QMAKE_LFLAGS = -static-libgcc -static-libstdc++</code>"}], "owner": {"reputation": 35, "user_id": 4353890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/958bafe8d88bde455784315374e21ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/4353890/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448470547, "creation_date": 1448450022, "last_edit_date": 1448470547, "question_id": 33915058, "link": "https://stackoverflow.com/questions/33915058/capybara-webkit-command-make-failed-windows-8-1", "title": "Capybara-webkit command &#39;make&#39; failed - Windows 8.1", "body": "<p>I am trying to install Capybara-webkit. I tried tutorials and guides but no luck in getting it on Windows 8.1 using Git Bash terminal.</p>\n\n<p>This is the error I'm getting:</p>\n\n<pre><code>$ bundle exec rake build\ncd src/ &amp;&amp; ( test -e Makefile.webkit_server || c:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/bin/qmake.exe C:/Users/Academy11/desktop/Ruby/webkit/capybara-webkit                                                                                                                /src/webkit_server.pro 'CONFIG\\+\\=test' -o Makefile.webkit_server ) &amp;&amp; make -f M                                                                                                                akefile.webkit_server\nmake[1]: Entering directory `/c/Users/Academy11/desktop/Ruby/webkit/capybara-webkit/src'\nmake -f Makefile.webkit_server.Debug\nmake[2]: Entering directory `/c/Users/Academy11/desktop/Ruby/webkit/capybara-webkit/src'\ng++ -x c++-header -c -pipe -fno-keep-inline-dllexport -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_WEBKITWIDGETS_LIB -DQT_WIDGETS_LIB -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -I. -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtWebKitWidgets -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtWidgets -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtWebKit -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtGui -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtANGLE -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtNetwork -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/include/QtCore -Ibuild -IC:/Qt/5.5.0/qt-5.5.0-x64-mingw510r0-seh-rev0/mkspecs/win32-g++  -o build/stable.h.gch/c++ stable.h\nmake[2]: g++: Command not found\nmake[2]: *** [build/stable.h.gch/c++] Error 127\nmake[2]: Leaving directory `/c/Users/Academy11/desktop/Ruby/webkit/capybara-webkit/src'\nmake[1]: *** [debug] Error 2\nmake[1]: Leaving directory `/c/Users/Academy11/desktop/Ruby/webkit/capybara-webkit/src'\nmake: *** [sub-src-webkit_server-pro-make_first-ordered] Error 2\nCommand 'make' failed\n</code></pre>\n\n<p>Any help would be appreciated thanks </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "factory-bot"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1448451979, "post_id": 33915617, "comment_id": 55592624, "body": "Thanks for your answer, though it looks similar to what i have (apart from combining the after creates , so thanks for that), i still get an error <code>but got errors: Sectors Choose At Least 1 Sector</code>. When a User creates a portfolio for example they will be selecting from a list of Sectors from the database in a dropdown for example, does this make a difference ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1448452207, "post_id": 33915617, "comment_id": 55592752, "body": "Try to add <code>portfolio.save!</code> in the very end of <code>after(:create)</code> callback. It sounds like the changes are not propagated. Also, <code>portfolio.reload</code> before check might help."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1448452451, "post_id": 33915617, "comment_id": 55592897, "body": "unfortunately that has not helped, nor the reload.. To look at this at a different angle then, how would you write this test? maybe I could learn some things from you that way and maybe change my approach, thanks"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1448452144, "last_edit_date": 1448452144, "creation_date": 1448451716, "answer_id": 33915617, "question_id": 33914845, "link": "https://stackoverflow.com/questions/33914845/factorygirl-and-testing-has-many-with-association/33915617#33915617", "title": "FactoryGirl and testing has_many with association", "body": "<p>You redefine <code>create</code> callback here:</p>\n\n<pre><code>p.after(:create) do |portfolio|\n  portfolio.sectors = FactoryGirl.create(:associated_sector, portfolio: portfolio)\nend\np.after(:create) do |portfolio|\n  portfolio.portfolio_images = [FactoryGirl.build(:portfolio_image, portfolio: portfolio)]\nend\n</code></pre>\n\n<p>There is no magic, the second one redefines the first one. Use subsequent calls:</p>\n\n<pre><code>p.after(:create) do |portfolio|\n  portfolio.sectors = FactoryGirl.create(:associated_sector, portfolio: portfolio)\n  portfolio.portfolio_images = [FactoryGirl.build(:portfolio_image, portfolio: portfolio)]\n  portfolio.save!\nend\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448452144, "creation_date": 1448449407, "last_edit_date": 1448450310, "question_id": 33914845, "link": "https://stackoverflow.com/questions/33914845/factorygirl-and-testing-has-many-with-association", "title": "FactoryGirl and testing has_many with association", "body": "<p>I am trying to run a simple test that checks that an object can be built with its associations</p>\n\n<pre><code>class Portfolio &lt; ActiveRecord::Base\n  has_many :portfolio_sectors\n  has_many :sectors, through: :portfolio_sectors\n  has_many :portfolio_images, dependent: :destroy\n  accepts_nested_attributes_for :portfolio_images, allow_destroy: true\nend\n\nclass Sector &lt; ActiveRecord::Base\n  has_many :portfolio_sectors\n  has_many :portfolios, through: :portfolio_sectors\nend\n</code></pre>\n\n<p>My test looks like this</p>\n\n<pre><code>RSpec.describe Portfolio, type: :model do\n  it 'should have a valid Factory' do\n    expect(FactoryGirl.build(:portfolio)).to be_valid\n  end\nend\n</code></pre>\n\n<p>The Portfolio Factory looks like</p>\n\n<pre><code>include ActionDispatch::TestProcess\nFactoryGirl.define do\n  factory :portfolio do |p|\n    p.title 'Test portfolio title'\n    p.overview 'test sentence for the overview section of portfolio'\n    p.url 'http://bbc.co.uk'\n    p.after(:create) do |portfolio|\n      portfolio.sectors = FactoryGirl.create(:associated_sector, portfolio: portfolio)\n    end\n    p.after(:create) do |portfolio|\n     portfolio.portfolio_images = [FactoryGirl.build(:portfolio_image, portfolio: portfolio)]\n    end\n end\nend\n</code></pre>\n\n<p>So when this test runs i get </p>\n\n<pre><code>Failure/Error: expect(FactoryGirl.build(:portfolio)).to be_valid\nexpected #&lt;Portfolio id: nil,\n           overview: \"test sentence for the overview section of portfoli...\", \n           title: \"Test portfolio title\",\n           sector_id: nil, \n           url: \"http://bbc.co.uk\", \n           created_at: nil, \n           updated_at: nil&gt; \nto be valid, but got errors: Sectors Choose At Least 1 Sector\n</code></pre>\n\n<p>Which i can see why as no sector id is present.</p>\n\n<p>How can i pass the sector id through when creating a portfolio?</p>\n\n<p>Or am i approaching this incorrectly?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "group-by", "chartkick"], "comments": [{"owner": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "edited": false, "score": 0, "creation_date": 1448452830, "post_id": 33914738, "comment_id": 55593120, "body": "Could you provide some more code to make it more obvious what you are trying to achieve?"}, {"owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "reply_to_user": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "edited": false, "score": 0, "creation_date": 1448453202, "post_id": 33914738, "comment_id": 55593312, "body": "I am using kickchart and in kick chart I want to use pie_chart and for that I need to show the chart with the username of every object which is linker and linker is associated with user one linker can be create a user. and I am fetching the linkers array and by this array I need to apply every linker to its user and then the username hopefully you understand now"}], "answers": [{"tags": [], "owner": {"reputation": 1091, "user_id": 610531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WmLzH.jpg?s=128&g=1", "display_name": "Holin", "link": "https://stackoverflow.com/users/610531/holin"}, "is_accepted": false, "score": 0, "last_activity_date": 1451034780, "creation_date": 1451034780, "answer_id": 34461553, "question_id": 33914738, "link": "https://stackoverflow.com/questions/33914738/apply-group-on-associated-attributes-ruby-on-rails-by-using-kickchart-to-show-th/34461553#34461553", "title": "apply group on associated attributes ruby on rails by using kickchart to show the geo chart", "body": "<p>You can use Enumerable#group_by (<a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by</a>)</p>\n\n<p>Example : </p>\n\n<pre><code>array.group_by { |linker| linker.user.username }\n</code></pre>\n\n<p>It will create a <code>Hash</code> with the usernames as keys and <code>Array</code> of linkers as values</p>\n"}], "owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1451034780, "creation_date": 1448449147, "question_id": 33914738, "link": "https://stackoverflow.com/questions/33914738/apply-group-on-associated-attributes-ruby-on-rails-by-using-kickchart-to-show-th", "title": "apply group on associated attributes ruby on rails by using kickchart to show the geo chart", "body": "<p>I need to apply group on associated attributes to apply it on pie_chart which is the method of kick chart so I just need to fetch the associated object attribute like </p>\n\n<pre><code>= pie_chart array.group(:user)\n</code></pre>\n\n<p>it returns the user object but I need to apply group on user attribute which is username so please if anybody has solution of this answer me.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1448448015, "post_id": 33914210, "comment_id": 55590075, "body": "Why do you need this weird and redundant data structure? Wouldn&#39;t be better if you had counts of each element? Like this: <code>{1 =&gt; 2, 2 =&gt; 1, 3 =&gt; 3, nil =&gt; 1}</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448448409, "post_id": 33914210, "comment_id": 55590325, "body": "What is your question? What is the logic for the keys? What is the logic that determines the number of elements in the array?"}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448449407, "post_id": 33914210, "comment_id": 55591041, "body": "@sawa This is requirement to generate a hash like this."}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 0, "creation_date": 1448449456, "post_id": 33914210, "comment_id": 55591072, "body": "Any reason to down vote the question ?"}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 0, "creation_date": 1448450203, "post_id": 33914210, "comment_id": 55591557, "body": "I have updated the question. Actually this array can only contain 1,2,3 and nil values. So there is no logic behind the keys. Keys can be hard coded."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1448450258, "post_id": 33914210, "comment_id": 55591586, "body": "Why is there only one <code>2</code> in the output?"}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1448450371, "post_id": 33914210, "comment_id": 55591653, "body": "@stefan Thanks, updated the question"}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1448450605, "post_id": 33915186, "comment_id": 55591817, "body": "for <code>itself</code> ruby 2.2+ is required it won&#39;t work for older version. 1+ for <code>itself</code>"}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 0, "creation_date": 1448450719, "post_id": 33915186, "comment_id": 55591877, "body": "I&#39;m using 2.1.6. So, I&#39;m getting undefined method `itself&#39; for 1:Fixnum"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 2, "creation_date": 1448450803, "post_id": 33915186, "comment_id": 55591922, "body": "@Arif just use <code>group_by { |e| e }</code> in that case"}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 0, "creation_date": 1448450993, "post_id": 33915186, "comment_id": 55592061, "body": "@Stefan Thanks, exactly what i want."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1448452211, "last_edit_date": 1448452211, "creation_date": 1448450439, "answer_id": 33915186, "question_id": 33914210, "link": "https://stackoverflow.com/questions/33914210/how-to-group-array-by-identical-elements/33915186#33915186", "title": "How to group array by identical elements?", "body": "<p>You can <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>group_by</code></a> the array (elements) by <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-itself\" rel=\"nofollow\"><code>itself</code></a>:</p>\n\n<pre><code>array = [1, 2, 1, 3, 2, nil, 3, 3]\nhash = array.group_by(&amp;:itself)\n#=&gt; {1=&gt;[1, 1], 2=&gt;[2, 2], 3=&gt;[3, 3, 3], nil=&gt;[nil]}\n</code></pre>\n\n<p>Afterwards, you can use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>map</code></a> to \"rename\" the keys:</p>\n\n<pre><code>keys = { 1 =&gt; :one, 2 =&gt; :two, 3 =&gt; :three, nil =&gt; :none }\nhash.map { |k, v| [keys[k], v] }.to_h\n#=&gt; {:one=&gt;[1, 1], :two=&gt;[2, 2], :three=&gt;[3, 3, 3], :none=&gt;[nil]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 510, "user_id": 4235198, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b3c1bdb69d18bf2c9a94628de6b6185d?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/4235198/gourav"}, "is_accepted": false, "score": 0, "last_activity_date": 1448462898, "creation_date": 1448462898, "answer_id": 33919496, "question_id": 33914210, "link": "https://stackoverflow.com/questions/33914210/how-to-group-array-by-identical-elements/33919496#33919496", "title": "How to group array by identical elements?", "body": "<p>How about this</p>\n\n<pre><code>hash = array.group_by{|e| e}\n\n[hash].each do |k|\n   k[:one] = k.delete 1\n   k[:two] = k.delete 2\n   k[:three] = k.delete 3\n   k[:none] = k.delete nil\nend\n</code></pre>\n\n<p>you will get your output. If you dont want to loop do the following</p>\n\n<pre><code>hash[:one] = hash.delete 1\nhash[:two] = hash.delete 2\nhash[:three] = hash.delete 3\nhash[:none] = hash.delete nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1448473277, "last_edit_date": 1448473277, "creation_date": 1448472796, "answer_id": 33922958, "question_id": 33914210, "link": "https://stackoverflow.com/questions/33914210/how-to-group-array-by-identical-elements/33922958#33922958", "title": "How to group array by identical elements?", "body": "<p>Coming from a Perl background, I'm used to obfuscated ways to munge arrays and hashes. Here's how it damaged me:</p>\n\n<p>Using <code>group_by</code> is the obvious way to find the similarities:</p>\n\n<pre><code>array = [1, 2, 1, 3, 2, nil, 3, 3]\nhash = array.group_by{ |i| i } # =&gt; {1=&gt;[1, 1], 2=&gt;[2, 2], 3=&gt;[3, 3, 3], nil=&gt;[nil]}\n</code></pre>\n\n<p>Using a hash is the easy way to map from one thing to another:</p>\n\n<pre><code>new_keys = {\n  1   =&gt; :one,\n  2   =&gt; :two,\n  3   =&gt; :three,\n  nil =&gt; :none\n}\n</code></pre>\n\n<p>Here's where the Perl influence affects my mind:</p>\n\n<pre><code>new_keys.values.zip(hash.values_at(*new_keys.keys)).to_h    # =&gt; {:one=&gt;[1, 1], :two=&gt;[2, 2], :three=&gt;[3, 3, 3], :none=&gt;[nil]}\nnew_keys.each_with_object({}){ |(k, v), h| h[v] = hash[k] } # =&gt; {:one=&gt;[1, 1], :two=&gt;[2, 2], :three=&gt;[3, 3, 3], :none=&gt;[nil]}\nnew_keys.inject({}){ |h, (k, v)| h[v] = hash[k]; h }        # =&gt; {:one=&gt;[1, 1], :two=&gt;[2, 2], :three=&gt;[3, 3, 3], :none=&gt;[nil]}\n</code></pre>\n\n<p>Because they all do the same thing, but in different ways, I wanted to know what was fastest. And, because I like @Stefan's <code>map</code> approach I wanted to see if there was any advantage speed-wise for a particular method:</p>\n\n<pre><code>require 'fruity'\n\n5.times do\n\n  compare do\n    _zip              { new_keys.values.zip(hash.values_at(*new_keys.keys)).to_h    }\n    _each_with_object { new_keys.each_with_object({}){ |(k, v), h| h[v] = hash[k] } }\n    _inject           { new_keys.inject({}){ |h, (k, v)| h[v] = hash[k]; h }        }\n    _map              { hash.map { |k, v| [new_keys[k], v] }.to_h                   }\n  end\n\n  puts\nend\n</code></pre>\n\n<p>Fruity wasn't able to find any remarkable speed differences, and background tasks were affecting the ability to find consistent differences so I ran the comparison five times. The minor differences are hinted at by the order of the results, but any of these look like a good way to go:</p>\n\n<pre><code># &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; _each_with_object is similar to _inject\n# &gt;&gt; _inject is faster than _zip by 19.999999999999996% \u00b1 10.0%\n# &gt;&gt; _zip is faster than _map by 10.000000000000009% \u00b1 10.0%\n# &gt;&gt; \n# &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; _each_with_object is similar to _inject\n# &gt;&gt; _inject is similar to _zip\n# &gt;&gt; _zip is similar to _map\n# &gt;&gt; \n# &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; _inject is similar to _each_with_object\n# &gt;&gt; _each_with_object is similar to _zip\n# &gt;&gt; _zip is faster than _map by 10.000000000000009% \u00b1 10.0%\n# &gt;&gt; \n# &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; _each_with_object is similar to _inject\n# &gt;&gt; _inject is faster than _zip by 19.999999999999996% \u00b1 10.0%\n# &gt;&gt; _zip is faster than _map by 10.000000000000009% \u00b1 10.0%\n# &gt;&gt; \n# &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; _each_with_object is similar to _inject\n# &gt;&gt; _inject is faster than _zip by 19.999999999999996% \u00b1 10.0%\n# &gt;&gt; _zip is faster than _map by 10.000000000000009% \u00b1 10.0%\n# &gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 1, "last_activity_date": 1448484953, "last_edit_date": 1448484953, "creation_date": 1448482947, "answer_id": 33925756, "question_id": 33914210, "link": "https://stackoverflow.com/questions/33914210/how-to-group-array-by-identical-elements/33925756#33925756", "title": "How to group array by identical elements?", "body": "<p>A short solution using the <a href=\"https://github.com/radar/humanize\" rel=\"nofollow\">humanize</a> gem for converting numbers to words.</p>\n\n<pre><code>require 'humanize'\narray.group_by { |e| e.humanize.to_sym rescue :none }\n# =&gt; {:one=&gt;[1, 1], :two=&gt;[2, 2], :three=&gt;[3, 3, 3], :none=&gt;[nil]}\n</code></pre>\n"}], "owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 33915186, "answer_count": 4, "score": 1, "last_activity_date": 1448484953, "creation_date": 1448447732, "last_edit_date": 1448451448, "question_id": 33914210, "link": "https://stackoverflow.com/questions/33914210/how-to-group-array-by-identical-elements", "title": "How to group array by identical elements?", "body": "<p>I have an array with following elements:</p>\n\n<pre><code>array = [1, 2, 1, 3, 2, nil, 3, 3]\n</code></pre>\n\n<p>I want to group them by matching elements and assign it to a hash. The output should look something like this:</p>\n\n<pre><code>{ one: [1, 1], two: [2, 2], three: [3, 3, 3], none: [nil] }\n</code></pre>\n\n<p>Note: <code>array</code> can only contain <code>1</code>, <code>2</code>, <code>3</code> and <code>nil</code> elements.</p>\n\n<p>The keys (<code>:one</code>, <code>:two</code>, <code>:three</code>, <code>:none</code>) can be hard-coded.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": false, "score": 1, "last_activity_date": 1448448871, "creation_date": 1448448871, "answer_id": 33914632, "question_id": 33914007, "link": "https://stackoverflow.com/questions/33914007/heroku-showing-error-while-deploying-ruby-application/33914632#33914632", "title": "Heroku showing error while deploying ruby application", "body": "<p>Your asset precompiler can't find semantic-ui/modules/accordion.js</p>\n\n<p>First make sure it exists under <strong>app/assets/javascripts</strong> or, better yet, <strong>vendor/assets/javascripts</strong></p>\n\n<p>Then, open up <strong>config/initializers/assets.rb</strong> and add the following:</p>\n\n<pre><code>Rails.application.config.assets.precompile += %w(semantic-ui/modules/accordion.js)\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 4826930, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/81017f2b7f975778b744c351f57fc227?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Bb", "link": "https://stackoverflow.com/users/4826930/nick-bb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448448871, "creation_date": 1448447211, "last_edit_date": 1448447580, "question_id": 33914007, "link": "https://stackoverflow.com/questions/33914007/heroku-showing-error-while-deploying-ruby-application", "title": "Heroku showing error while deploying ruby application", "body": "<p>-----> Using set buildpack heroku/ruby</p>\n\n<p>-----> Ruby app detected</p>\n\n<p>-----> Compiling Ruby/Rails</p>\n\n<p>-----> Using Ruby version: ruby-2.2.3</p>\n\n<p>-----> Installing dependencies using bundler 1.9.7</p>\n\n<pre><code>   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n\n   Fetching gem metadata from https://rubygems.org/...........\n\n   Fetching version metadata from https://rubygems.org/...\n\n   Fetching dependency metadata from https://rubygems.org/..\n\n   Fetching git://github.com/doabit/semantic-ui-sass.git\n\n   Using i18n 0.7.0\n\n   Using rake 10.4.2\n\n   Using json 1.8.3\n\n   Using thread_safe 0.3.5\n\n   Using builder 3.2.2\n\n   Using erubis 2.7.0\n\n   Using mini_portile 0.6.2\n\n   Using rack 1.6.4\n\n   Using mime-types 2.6.1\n\n   Installing arel 6.0.2\n\n   Installing minitest 5.7.0\n\n   Installing execjs 2.5.2\n\n   Using thor 0.19.1\n\n   Installing coffee-script-source 1.9.1.1\n\n   Using tilt 1.4.1\n\n   Using multi_json 1.11.2\n\n   Installing orm_adapter 0.5.0\n\n   Installing nested_form 0.3.2\n\n   Using bundler 1.9.7\n\n   Installing bcrypt 3.1.10\n\n   Installing remotipart 1.2.1\n\n   Using sass 3.4.16\n\n   Using rdoc 4.2.0\n\n   Installing safe_yaml 1.0.4\n\n   Installing temple 0.7.6\n\n   Using tzinfo 1.2.2\n\n   Using nokogiri 1.6.6.2\n\n   Using rack-test 0.6.3\n\n   Installing switch_user 1.1.0\n\n   Installing warden 1.2.3\n\n   Using mail 2.6.3\n\n   Installing sprockets 3.2.0\n\n   Installing uglifier 2.7.1\n\n   Installing coffee-script 2.4.1\n\n   Installing haml 4.0.6\n\n   Using sdoc 0.4.1\n\n   Installing slim 3.0.6\n\n   Installing activesupport 4.2.1\n\n   Installing loofah 2.0.2\n\n   Installing rack-pjax 0.8.0\n\n   Using rails-deprecated_sanitizer 1.0.3\n\n   Installing globalid 0.3.5\n\n   Installing activemodel 4.2.1\n\n   Installing jbuilder 2.3.1\n\n   Using rails-html-sanitizer 1.0.2\n\n   Installing rails-dom-testing 1.0.6\n\n   Installing activejob 4.2.1\n\n   Installing activerecord 4.2.1\n\n   Installing carrierwave 0.10.0\n\n   Installing actionview 4.2.1\n\n   Installing actionpack 4.2.1\n\n   Installing actionmailer 4.2.1\n\n   Using semantic-ui-sass 2.0.7.0 from git://github.com/doabit/semantic-ui-sass.git (at master)\n\n   Installing pg 0.18.2\n\n   Using sprockets-rails 2.3.2\n\n   Installing railties 4.2.1\n\n   Installing kaminari 0.16.3\n\n   Installing coffee-rails 4.1.0\n\n   Installing responders 2.1.0\n\n   Installing jquery-ui-rails 5.0.5\n\n   Installing font-awesome-rails 4.4.0.0\n\n   Using sass-rails 5.0.3\n\n   Installing jquery-rails 4.0.4\n\n   Installing turbolinks 2.5.3\n\n   Installing devise 3.5.2\n\n   Installing rails 4.2.1\n\n   Installing rails_admin 0.7.0\n\n   Bundle complete! 21 Gemfile dependencies, 67 gems now installed.\n\n   Gems in the groups development and test were not installed.\n\n   Bundled gems are installed into ./vendor/bundle.\n\n   Post-install message from haml:\n\n   HEADS UP! Haml 4.0 has many improvements, but also has changes that may break\n\n   your application:\n\n   * Support for Ruby 1.8.6 dropped\n\n   * Support for Rails 2 dropped\n\n   * Sass filter now always outputs &lt;style&gt; tags\n\n   * Data attributes are now hyphenated, not underscored\n\n   * html2haml utility moved to the html2haml gem\n\n   * Textile and Maruku filters moved to the haml-contrib gem\n\n   For more info see:\n\n   http://rubydoc.info/github/haml/haml/file/CHANGELOG.md\n\n   Bundle completed (17.90s)\n\n   Cleaning up the bundler cache.\n\n   Removing rails_stdout_logging (0.0.4)\n\n   Removing railties (4.2.3)\n\n   Removing globalid (0.3.6)\n\n   Removing turbolinks (2.5.2)\n\n   Removing rdoc (4.1.2)\n\n   Removing pg (0.17.1)\n\n   Removing jquery-rails (3.1.2)\n\n   Removing minitest (5.8.0)\n\n   Removing coffee-script-source (1.8.0)\n\n   Removing coffee-rails (4.0.1)\n\n   Removing uglifier (2.5.3)\n\n   Removing activerecord (4.2.3)\n\n   Removing puma (2.9.1)\n\n   Removing activesupport (4.2.3)\n\n   Removing rails-dom-testing (1.0.7)\n\n   Removing loofah (2.0.3)\n\n   Removing jbuilder (2.2.5)\n\n   Removing sprockets (3.3.2)\n\n   Removing actionpack (4.2.3)\n\n   Removing rails_12factor (0.0.3)\n\n   Removing arel (6.0.3)\n\n   Removing actionmailer (4.2.3)\n\n   Removing rails (4.2.3)\n\n   Removing activejob (4.2.3)\n\n   Removing rails_serve_static_assets (0.0.4)\n\n   Removing execjs (2.2.2)\n\n   Removing activemodel (4.2.3)\n\n   Removing actionview (4.2.3)\n\n   Removing coffee-script (2.3.0)\n</code></pre>\n\n<p>-----> Preparing app for Rails asset pipeline</p>\n\n<pre><code>   Running: rake assets:precompile\n\n   rake aborted!\n\n   Sprockets::FileNotFound: couldn't find file 'semantic-ui/modules/accordion.js' with type 'application/javascript'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/app/assets/javascripts/semantic-ui.js:1\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/resolve.rb:64:in `resolve!'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:399:in `resolve'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:207:in `process_require_directive'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:180:in `block in process_directives'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:178:in `each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:178:in `process_directives'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:83:in `_call'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:68:in `call'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:75:in `call_processor'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `call_processors'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:86:in `load_asset_by_uri'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:45:in `block in load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:155:in `fetch_asset_from_dependency_cache'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:38:in `load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `yield'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/bundle.rb:23:in `block in call'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/utils.rb:183:in `dfs'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/bundle.rb:24:in `call'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:75:in `call_processor'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `call_processors'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:86:in `load_asset_by_uri'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:45:in `block in load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:155:in `fetch_asset_from_dependency_cache'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:38:in `load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `yield'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `load'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/base.rb:63:in `find_asset'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/base.rb:70:in `find_all_linked_assets'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:138:in `block in find'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:223:in `block in stat_tree'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:207:in `block in stat_directory'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:204:in `each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:204:in `stat_directory'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:222:in `stat_tree'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:105:in `each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:105:in `block in logical_paths'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:104:in `each'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:104:in `logical_paths'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:136:in `find'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:162:in `compile'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-2.3.2/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-3.2.0/lib/rake/sprocketstask.rb:147:in `with_logger'\n\n   /tmp/build_d0907af71bbccdf70fa56e0562ea81f4/Bilal1122-Final-Year-Project-23d7d88/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-2.3.2/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\n\n   Tasks: TOP =&gt; assets:precompile\n\n   (See full trace by running task with --trace)\n\n    !\n\n     !     Precompiling assets failed.\n\n     !\n\n     !     Push rejected, failed to compile Ruby app\n\n       The Error is this:\n\n    Sprockets::FileNotFound: couldn't find file 'semantic-ui/modules   /accordion.js' with type 'application/javascript'\n\n      but i have the file name in \n      like this:\n      //= require semantic-ui/modules/accordion.js\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2", "grape", "grape-entity"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1448443853, "post_id": 33912755, "comment_id": 55587396, "body": "Use an array as json top element: <code>-d &#39;[{&quot;name&quot;: &quot;test&quot;, &quot;age&quot;: &quot;22&quot;}, {&quot;name&quot;: &quot;someone&quot;, &quot;age&quot;: &quot;32&quot; }]&#39;</code>"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448444447, "post_id": 33912755, "comment_id": 55587766, "body": "As your question is about Grape, if the POST method you have implemented does not support arrays as suggested by mudasobwa, then you should show the Ruby code for <code>post :students</code> route, and maybe related helper and/or entity. Note it is quite common (and not incorrect) to have a RESTful API that only creates one object at a time, that you must call multiple times in order to create multiple objects."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448447973, "post_id": 33912755, "comment_id": 55590047, "body": "Your Grape API code is fine, but clearly does not support receiving a JSON Array. It is not a normal expectation that it should though. Just send multiple requests to create multiple student objects."}, {"owner": {"reputation": 426, "user_id": 2264677, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc0b6ec0245add30371500883f08fe98?s=128&d=identicon&r=PG", "display_name": "ejo", "link": "https://stackoverflow.com/users/2264677/ejo"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448452534, "post_id": 33912755, "comment_id": 55592944, "body": "Thanks @Neil Slater. But my requirement is related to batch insert. How I can achieve this using GRAPE"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448455166, "post_id": 33912755, "comment_id": 55594501, "body": "@ejo: Does your requirement insist that you use JSON array syntax as shown, or is that flexible? It may be easier to implement if the route had an outer JSON structure, with a param name to identify the array, and it would also be easier to support the batch insert syntax on a different route (otherwise you would need to detect and disambiguate between two route method signatures)"}, {"owner": {"reputation": 426, "user_id": 2264677, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc0b6ec0245add30371500883f08fe98?s=128&d=identicon&r=PG", "display_name": "ejo", "link": "https://stackoverflow.com/users/2264677/ejo"}, "edited": false, "score": 0, "creation_date": 1448457933, "post_id": 33912755, "comment_id": 55596400, "body": "I didn&#39;t get it completely. Could you give some sample structure according to your suggestion?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448536765, "post_id": 33912755, "comment_id": 55634053, "body": "Example: Have a new route <code>POST http:&#47;&#47;localhost:3000&#47;students&#47;bulk_insert</code> which accepts JSON object like this <code>&#39;{&quot;students&quot;:[{&quot;name&quot;: &quot;test&quot;, &quot;age&quot;: &quot;22&quot;}, {&quot;name&quot;: &quot;someone&quot;, &quot;age&quot;: &quot;32&quot; }]}&#39;</code> - if your design constraints allow you to do that, the Grape setup is trivial. But if you are expected to allow POSTs of JSON arrays in general to any standard object creation route, whilst still supporting single item creation, it is a lot harder."}], "answers": [{"comments": [{"owner": {"reputation": 426, "user_id": 2264677, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc0b6ec0245add30371500883f08fe98?s=128&d=identicon&r=PG", "display_name": "ejo", "link": "https://stackoverflow.com/users/2264677/ejo"}, "edited": false, "score": 0, "creation_date": 1448445168, "post_id": 33912889, "comment_id": 55588245, "body": "I tried this too. not working with grape. Updated the question"}], "tags": [], "owner": {"reputation": 647, "user_id": 4649530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2da5fe7e50cd453d448bbc28422677?s=128&d=identicon&r=PG", "display_name": "Gearnode", "link": "https://stackoverflow.com/users/4649530/gearnode"}, "is_accepted": false, "score": 0, "last_activity_date": 1448468406, "last_edit_date": 1448468406, "creation_date": 1448443988, "answer_id": 33912889, "question_id": 33912755, "link": "https://stackoverflow.com/questions/33912755/ruby-grape-post-method-insert-multiple-rows/33912889#33912889", "title": "ruby grape post method insert multiple rows", "body": "<p>You use a bad syntax for JSON array object.\nTry this:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" \\\n     -X POST \\\n     -d '[{\"name\": \"test\", \"age\": \"22\"}, {\"name\": \"someone\", \"age\": \"32\" }]' \\\n     http://localhost:3000/students\n</code></pre>\n\n<p>EDIT :</p>\n\n<p>If your payload is <code>{\"name\": \"test\", \"age\": \"22\"}</code> your code works. But you have a Array (<code>params.kind_of?(Array)</code>).</p>\n\n<p>You can make this: </p>\n\n<pre><code>post do\n  params.each do |student_params|\n    student = Student.new\n    student.name = student_params[:name]\n    student.age = student_params[:age]\n    student.save!\n  end\nend\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>params[:name]\n# =&gt; nil\nparams.first[:name]\n#=&gt; test\n</code></pre>\n"}], "owner": {"reputation": 426, "user_id": 2264677, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc0b6ec0245add30371500883f08fe98?s=128&d=identicon&r=PG", "display_name": "ejo", "link": "https://stackoverflow.com/users/2264677/ejo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1448468406, "creation_date": 1448443612, "last_edit_date": 1448448012, "question_id": 33912755, "link": "https://stackoverflow.com/questions/33912755/ruby-grape-post-method-insert-multiple-rows", "title": "ruby grape post method insert multiple rows", "body": "<p>How to post multiple rows into DB using ruby Grape. For example when testing with CURL this is working fine </p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -X POST \\\n     -d '{\"name\": \"test\", \"age\": \"22\"}' http://localhost:3000/students\n</code></pre>\n\n<p>But this is not working</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -X POST \\\n     -d '[{\"name\": \"test\", \"age\": \"22\"}, {\"name\": \"someone\", \"age\": \"32\" }]' \\\n     http://localhost:3000/students\n</code></pre>\n\n<p>This is my grape api code</p>\n\n<pre><code>post do\n      student = Student.new\n      student.name = params[:name]\n      student.age = params[:age]\n      student.save!\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1448443898, "post_id": 33912221, "comment_id": 55587433, "body": "What does your server log say? Is the action <code>send_invitation</code> executed once or twice? Maybe you are subscribing to the channel twice? You can debug that in the developer console of the browser."}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1448445737, "post_id": 33912221, "comment_id": 55588585, "body": "@coorasse no it&#39;s calling <code>send_invitation</code> only one time"}, {"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1448534984, "post_id": 33912221, "comment_id": 55632892, "body": "so, can you see in the developers console if you subscribed twice to the channel?"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1448536754, "post_id": 33912221, "comment_id": 55634045, "body": "I&#39;m subscribed to two separate channels in the same page - is that any thing wrong"}, {"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1448556653, "post_id": 33912221, "comment_id": 55646412, "body": "what is the response from the server when you execute the send_invitation method?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1450321453, "post_id": 33912221, "comment_id": 56393738, "body": "@ImranNaqvi can you tell what ID you are getting twice?"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1450334775, "post_id": 33912221, "comment_id": 56397931, "body": "@uDaY <code>console.log(&#39;here&#39;)</code> in js.erb file is shown in firebug console two time . kindly have a look on the question"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1452487084, "post_id": 33912221, "comment_id": 57174818, "body": "@ImranNaqvi, have you solved this issue? I&#39;m facing the same right now and I hope you can help me out."}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1452492889, "post_id": 33912221, "comment_id": 57176476, "body": "@SzilardMagyar please have a look on the my answer"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1452529074, "post_id": 34715220, "comment_id": 57198181, "body": "What does it mean to making to channels on the same page? Having &lt;%= subscribe_to conversation_path(conversation) %&gt; twice on the page and one conversation form or having &lt;%= subscribe_to conversation_path(conversation) %&gt; only once, but having two conversation forms? In my case it&#39;s a turbolinks issue for sure. If I do a full page reload everything works fine, but if I create the conversation.message after going to another the page of the app and then coming back it gets displayed more times (it saves only 1 message to the db, only having problem with displaying). Any guesses?"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1452533970, "post_id": 34715220, "comment_id": 57201441, "body": "Imran, it seems I could solve this issue. Check out my answer!"}], "tags": [], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452492806, "creation_date": 1452492806, "answer_id": 34715220, "question_id": 33912221, "link": "https://stackoverflow.com/questions/33912221/js-erb-file-is-executing-two-times-ruby-on-rails-private-pub/34715220#34715220", "title": "js.erb file is executing two times . Ruby on Rails - private_pub", "body": "<p>I could not found a solution , but i thought it'd be worth for someone to inform about the actual issue .<br><br>\nIn my case the issue was that I was making two channels on the same page ,that's why it was making handshake with the thin server two times . </p>\n\n<p><strong>Note</strong> But in a generic case it can also happen if we included js file two times .</p>\n"}, {"tags": [], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "is_accepted": false, "score": 0, "last_activity_date": 1452552230, "last_edit_date": 1452552230, "creation_date": 1452533900, "answer_id": 34727734, "question_id": 33912221, "link": "https://stackoverflow.com/questions/33912221/js-erb-file-is-executing-two-times-ruby-on-rails-private-pub/34727734#34727734", "title": "js.erb file is executing two times . Ruby on Rails - private_pub", "body": "<p>With <code>$(document).on('keydown', '.chatboxtextarea', function (event){....});</code> my message object was created only once, but got displayed several times based on how many times I returned to the page with turbolinks without full page reload.\nTo work around this in the js.erb file I added event.handled to check if partial has been already appended.</p>\n\n<p>application.js</p>\n\n<pre><code>//= require jquery\n//= require jquery-ui\n//= require jquery_ujs\n//= require turbolinks\n//= require jquery.remotipart\n//= require chat\n//= require refile\n//= require bootstrap-sprockets\n//= require private_pub\n//= require local_time\n//= require moment\n//= require fullcalendar\n//= require bootstrap-datetimepicker\n//= require_tree .\n</code></pre>\n\n<p>js file</p>\n\n<pre><code> //submitting chat message (it's OUTSIDE $(document).on('page:change'..)\n //bind submit to document --&gt; not affected by turbolinks\n$(document).on('keydown', '.chatboxtextarea', function (event) {\n  var id = $(this).data('cid');\n  checkInputKey(event, $(this), id);\n});\n\nfunction checkInputKey(event, chatboxtextarea, conversation_id) {\n  if (event.keyCode == 13 &amp;&amp; event.shiftKey == 0) {\n    event.preventDefault();\n\n    //checking if field is empty and submitting the form\n    message = chatboxtextarea.val();\n    message = message.replace(/^\\s+|\\s+$/g, \"\");\n    if (message != '') {\n      $('#conversation_form_' + conversation_id).submit();\n    }\n  }\n}\n</code></pre>\n\n<p>html.erb form</p>\n\n<pre><code>&lt;div class=\"chatboxinput\"&gt;\n  &lt;%= form_for([@conversation, @message], :remote =&gt; true, :html =&gt; {id: \"conversation_form_#{@conversation.id}\"}) do |f| %&gt;\n    &lt;%= f.text_area :body, class: \"chatboxtextarea\", \"data-cid\" =&gt; @conversation.id %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n......\n&lt;%= subscribe_to conversation_path(@conversation) %&gt;\n</code></pre>\n\n<p>_message.html.erb</p>\n\n<pre><code>&lt;li class=\"&lt;%= self_or_other(message) %&gt;\"&gt;\n  &lt;div class=\"chatboxmessagecontent\"&gt;\n    &lt;p&gt;\n      &lt;%= message.body %&gt;\n    &lt;/p&gt;\n  &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>create.js.erb</p>\n\n<pre><code>&lt;% publish_to @path do %&gt;\n  var id = \"&lt;%= @conversation.id %&gt;\";\n  var chatbox = $(\".chatboxcontent\");\n  var lastMessage = chatbox.children().last();\n\n  //with this one message will be displayed only once\n  if(event.handled !== true) {\n\n    $message = $('&lt;%= j render @message %&gt;');\n    chatbox.append($message);\n    chatbox.scrollTop(chatbox[0].scrollHeight);\n\n    //for displaying incoming and outgoing messages differently\n    if(sender_id != receiver_id) {\n        chatbox.children().last().removeClass(\"self\").addClass(\"other\");\n        chatbox.scrollTop(chatbox[0].scrollHeight);\n    }\n\n    event.handled = true;\n  };\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 6490285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1179379398781348/picture?type=large", "display_name": "Radz Singh", "link": "https://stackoverflow.com/users/6490285/radz-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1506088957, "creation_date": 1506088957, "answer_id": 46366634, "question_id": 33912221, "link": "https://stackoverflow.com/questions/33912221/js-erb-file-is-executing-two-times-ruby-on-rails-private-pub/46366634#46366634", "title": "js.erb file is executing two times . Ruby on Rails - private_pub", "body": "<p>Use unbind method to remove unwanted/multiple calls to be executed with your events. This will do the trick. But reason behind the multiple calls is not yet clear.</p>\n\n<pre><code>$( \"#foo\" ).unbind( \"click\", handler );\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5984164, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153952566953834/picture?type=large", "display_name": "Hilson Francis", "link": "https://stackoverflow.com/users/5984164/hilson-francis"}, "is_accepted": false, "score": 0, "last_activity_date": 1517496974, "creation_date": 1517496974, "answer_id": 48565664, "question_id": 33912221, "link": "https://stackoverflow.com/questions/33912221/js-erb-file-is-executing-two-times-ruby-on-rails-private-pub/48565664#48565664", "title": "js.erb file is executing two times . Ruby on Rails - private_pub", "body": "<p><strong>Use this gem instead</strong> </p>\n\n<p><code>gem \"private_pub\", :git =&gt; 'https://github.com/ryleto/private_pub.git'</code></p>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 827, "favorite_count": 0, "answer_count": 4, "score": 7, "last_activity_date": 1517496974, "creation_date": 1448442147, "last_edit_date": 1495541338, "question_id": 33912221, "link": "https://stackoverflow.com/questions/33912221/js-erb-file-is-executing-two-times-ruby-on-rails-private-pub", "title": "js.erb file is executing two times . Ruby on Rails - private_pub", "body": "<p>I'm working on <code>chating</code> module. For that I've used <code>private_pub gem</code>. In this module I have made three channels, but I can't mention all those here, because it'll show a very, very large page. So let's stick to one channel.</p>\n\n<p>I click on a link having channel <code>\"&lt;%= subscribe_to \"/conversations/send_invitation\" %&gt;\"</code> and then <code>ajax</code> works and goes to <code>\"conversations/send_invitation\"</code> (only once - which is ok) and in my <code>\"/conversations/send_invitation\"</code> I have </p>\n\n<pre><code>def send_invitation\n @conversation = Conversation.new(conversation_params)\n respond_to do |format|\n format.js { render :layout =&gt; false }\n format.html\n end\nend\n</code></pre>\n\n<p>and then in my <code>send_invitation.js.erb</code> file I've the following </p>\n\n<pre><code>&lt;% publish_to \"/conversations/send_invitation\" do %&gt;\nvar recipient_id = \"&lt;%=@conversation.recipient.id %&gt;\";\nvar current_temp_user = $(\"#current_temp_user\").val();\n\nif(recipient_id == current_temp_user){\nconsole.log('here')\n$(\"#invitation_div\").html(\"&lt;%=j(render :partial =&gt; '/restaurants/invitation')%&gt;\");\n    card_modal = $('#invitation_card').modal();\n    card_modal.modal('show');\n}\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my <code>application.js</code> file</p>\n\n<pre><code>//= require jquery\n// require jquery-ui\n//= require jquery_ujs\n// require turbolinks\n//= require bootstrap\n//= require jquery.raty\n//= require private_pub\n//= require_tree .\n</code></pre>\n\n<p>And the modal displays at <code>recipient side</code> (which is good).</p>\n\n<p>Now the problem is that I can see two <code>modal</code> with the <code>same id</code> in my <code>firefox console/html</code>. And the <code>buttons</code> for <code>closing/submit</code> the <code>modal</code> also stopped working. Also the <code>console.log</code> in my <code>send_invitation.js.erb</code> file showed two time the <code>console.log</code> result, so it's clear that <code>js.erb</code> file is executing two times. But the point to note is that <code>ajax</code> ran one time only. I've wasted couple of hours on it and found only <a href=\"https://stackoverflow.com/questions/6659209/rails-js-controller-being-called-twice-for-some-reason\">This link</a> which also didn't work for me, because when I remove either <code>jquery.js</code> or <code>jquery_ujs.js</code> it gives me errors <br></p>\n"}, {"tags": ["ruby", "exception", "encoding", "odbc"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448441263, "post_id": 33911762, "comment_id": 55585843, "body": "Welcome to SO. It is worth adding the exact text of the encoding exception (with first part of stack trace) to the question. It may help others see your diagnosis of the problem is correct, and also it would help someone else having a similar problem and searching the error message on the internet. Also, the context of your code - where are you adding this  - are you modifying and re-compiling the <code>ruby-odbc</code> gem extension, in which method?"}, {"owner": {"reputation": 21, "user_id": 4448690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJkIG.jpg?s=128&g=1", "display_name": "Xinjing", "link": "https://stackoverflow.com/users/4448690/xinjing"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448451458, "post_id": 33911762, "comment_id": 55592331, "body": "Thanks for your advice! I&#39;m really not familiar with this :)  I&#39;ve already edited my question @NeilSlater"}], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1448872421, "post_id": 33994136, "comment_id": 55744230, "body": "This looks like it may help, but please consider adding some background detail and explanation to help explain what the OP&#39;s problem is and why this helps (I&#39;m thinking only one or two sentences to make this a short paragraph answer) - information from or links to <a href=\"https://redmine.ruby-lang.org/issues/5650\" rel=\"nofollow noreferrer\">redmine.ruby-lang.org/issues/5650</a> and <a href=\"http://rxr.whitequark.org/mri/source/error.c#1792\" rel=\"nofollow noreferrer\">rxr.whitequark.org/mri/source/error.c#1792</a> may also help"}, {"owner": {"reputation": 21, "user_id": 4448690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJkIG.jpg?s=128&g=1", "display_name": "Xinjing", "link": "https://stackoverflow.com/users/4448690/xinjing"}, "edited": false, "score": 0, "creation_date": 1448969377, "post_id": 33994136, "comment_id": 55793645, "body": "Wow! It works!!!!  Thanks so much! Btw, just in case someone else might meet the same issue , this function was not implemented yet in ruby 1.9.3, seems to be a 2.0 thing, so I just copied its function definition to my own program and it works like a charm."}], "tags": [], "owner": {"reputation": 176, "user_id": 515572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58fed63f29a7bde12e8985decca67498?s=128&d=identicon&r=PG", "display_name": "naruse", "link": "https://stackoverflow.com/users/515572/naruse"}, "is_accepted": false, "score": 2, "last_activity_date": 1448871601, "creation_date": 1448871601, "answer_id": 33994136, "question_id": 33911762, "link": "https://stackoverflow.com/questions/33911762/ruby-c-extension-exception-message-encoding/33994136#33994136", "title": "Ruby C extension exception message encoding", "body": "<p>You can use <code>rb_enc_raise(rb_encoding *enc, VALUE exc, const char *fmt, ...)</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 4448690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJkIG.jpg?s=128&g=1", "display_name": "Xinjing", "link": "https://stackoverflow.com/users/4448690/xinjing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1448871601, "creation_date": 1448440553, "last_edit_date": 1448451164, "question_id": 33911762, "link": "https://stackoverflow.com/questions/33911762/ruby-c-extension-exception-message-encoding", "title": "Ruby C extension exception message encoding", "body": "<p>Hi I'm recently handling with ruby-odbc. </p>\n\n<p>There's an exception raised by ruby-odbc according to my logic and the Active Record lib should catch it. But the encoding of this exception's message is ASCII-8BIT which will raise another encoding incompatible exception. I don't want to modify Active Record for now or use tiny_tds instead(for now). </p>\n\n<p>So I wondered if there's  a way I could change the encoding of exception's message to a given encoding? </p>\n\n<p>I tried to convert the error message before passing to rb_raise,and it didn't work. The result is still ASCII-8BIT.\nSo am I doing something stupid cause anystring comes out of ruby c extension is all ASCII-8BIT  or I've made mistakes during the conversion?\nAny thoughts? </p>\n\n<p>=================Append the whole background===============\nI modified and recompiled the odbc.c file based on the cloudvolumes/ruby-odbc, mainly in this function:</p>\n\n<pre><code>static VALUE  stmt_prep_int(int argc, VALUE *argv, VALUE self, int mode)\n</code></pre>\n\n<p>For all the sentences like below:</p>\n\n<pre><code>rb_raise(Cerror, \"%s\",msg); \n</code></pre>\n\n<p>I replaced with:</p>\n\n<pre><code>rb_odbc_raise_error(Cerror,  msg);\n</code></pre>\n\n<p>Which this new function is defined as:</p>\n\n<pre><code>static VALUE rb_odbc_raise_error(VALUE err,char * msg){\nVALUE e;\nVALUE vmsg = rb_str_new2(msg);\n#ifdef USE_RB_ENC\nrb_enc_associate_index(vmsg,rb_enc );\nmsg = rb_string_value_cstr(&amp;vmsg);\n#endif\ne = rb_exc_new2(err,msg);\nrb_exc_raise(e);\nreturn Qnil;\n}\n</code></pre>\n\n<p>Note,the definition of USE_RB_ENC and rb_enc (utf8)come from repo:<a href=\"https://github.com/cloudvolumes/ruby-odbc\" rel=\"nofollow\">https://github.com/cloudvolumes/ruby-odbc</a>.</p>\n\n<p>The ruby script that will raise an exception is like below:</p>\n\n<pre><code>begin\n  cfg = ActiveRecord::Base.connection_config\n  if cfg &amp;&amp; cfg[:adapter] == \"sqlserver\"\n    ActiveRecord::Base.connection_pool.with_connection do |connection|\n      domain_name   = ENV['USERDOMAIN']\n      computer_name = \"#{ENV['COMPUTERNAME']}\u4e2d\u6587$\"\n      name = \"#{domain_name}\\\\#{computer_name}\"\n      puts \"Granting database access to #{name.encode(Encoding.locale_charmap)}\"\n      connection.execute(\"CREATE LOGIN [#{name}] FROM WINDOWS\")\n  end\nelse\n  puts \"Database is not configured or is not SQL Server\"\nend\nrescue Interrupt\n  raise\nrescue Exception =&gt; e\n  #do something.\nend\n</code></pre>\n\n<p>This script should raise an exception of </p>\n\n<pre><code>\"42000 (15401) [Microsoft][ODBC SQL Server Driver][SQL Server]Windows NT user or group 'ZHUO\\APPMANAGERDEV\u4e2d\u6587$' not found. Check the name again.\".\n</code></pre>\n\n<p>However,when the exception is catched by <strong>activerecord-3.2.21/lib/active_record/connection_adapters/abstract_adater.rb</strong> below, since the rails is set utf-8 and e.message has encoding of ASCII-8BIT,there will be an exeption raised:</p>\n\n<pre><code>\" Exception Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8\".\n</code></pre>\n\n<p>Thus the original error message can't be seen at all.</p>\n\n<pre><code>    def log(sql, name = \"SQL\", binds = [])\n      @instrumenter.instrument(\n        \"sql.active_record\",\n        :sql           =&gt; sql,\n        :name          =&gt; name,\n        :connection_id =&gt; object_id,\n        :binds         =&gt; binds) { yield }\n    rescue Exception =&gt; e\n      message = \"#{e.class.name}: #{e.message}: #{sql}\"\n      @logger.debug message if @logger\n      exception = translate_exception(e, message)\n      exception.set_backtrace e.backtrace\n      raise exception\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sequel"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454612884, "post_id": 33911481, "comment_id": 58134260, "body": "Welcome to Stack Overflow. While it&#39;s not a duplicate, <a href=\"http://stackoverflow.com/q/16592661/128421\">stackoverflow.com/q/16592661/128421</a> should be of good use."}], "answers": [{"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 0, "last_activity_date": 1454618780, "creation_date": 1454618780, "answer_id": 35211291, "question_id": 33911481, "link": "https://stackoverflow.com/questions/33911481/sequel-to-csv-generates-file-with-hash-instead-of-data/35211291#35211291", "title": "Sequel to_csv generates file with hash instead of data", "body": "<p>Your problem is not <code>to_csv</code> itself, but the model.</p>\n\n<p>A small example:</p>\n\n<pre><code>require 'csv'\n\nclass A\nend\n\nputs [A.new, A.new].to_csv\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>#&lt;A:0x00000002fa0148&gt;,#&lt;A:0x00000002fa00d0&gt;\n</code></pre>\n\n<p><code>to_csv</code> takes every element of the array and add the String-representation to the csv-line.</p>\n\n<p>If you define another String-represenation with <code>to_s</code> you get a better result.</p>\n\n<p>Example:</p>\n\n<pre><code>require 'csv'\n\nclass A\n  def to_s\n    'a'\n  end\nend\n\nputs [A.new, A.new].to_csv\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>a,a\n</code></pre>\n\n<p>In your case something like this will help:</p>\n\n<pre><code>Class Radcheck &lt; Sequel::Model(:radcheck)\n  #...\n  def to_s\n    \"Radcheck:...\" #Add here some attributes of your table\n  end\nend\n</code></pre>\n\n<p>You have to replace  <code>\"Radcheck:...\"</code> with some dato you want to add to your csv.</p>\n\n<hr>\n\n<p>About your problem with</p>\n\n<pre><code>2.1.0 :039 &gt; @order.radcheck.to_csv_file\nNoMethodError: undefined method `to_csv_file' for #&lt;Array:0x00000006981150&gt;\n</code></pre>\n\n<p><code>to_csv_file</code> is define in <code>Order</code>, so you may try <code>@order.to_csv_file</code>.</p>\n"}], "owner": {"reputation": 290, "user_id": 2386326, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eab9dff3a64f8d7ab28c7cb67088fbfd?s=128&d=identicon&r=PG", "display_name": "muhammadn", "link": "https://stackoverflow.com/users/2386326/muhammadn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454618780, "creation_date": 1448439618, "last_edit_date": 1454611590, "question_id": 33911481, "link": "https://stackoverflow.com/questions/33911481/sequel-to-csv-generates-file-with-hash-instead-of-data", "title": "Sequel to_csv generates file with hash instead of data", "body": "<p>Everytime I save using Sequel's <code>to_csv</code>, it gives me the object like below in CSV:</p>\n\n<pre><code>2.1.0 :033 &gt; @order.radcheck.to_csv\n =&gt; \"#&lt;Radcheck:0x0000000697bb38&gt;,#&lt;Radcheck:0x0000000697ba20&gt;\\n\" \n2.1.0 :034 &gt; @orders.to_csv\n =&gt; \"#&lt;Order:0x000000069ee4d0&gt;,#&lt;Order:0x000000069ee318&gt;,#&lt;Order:0x000000069ee110&gt;,#&lt;Order:0x000000069ede68&gt;,#&lt;Order:0x000000069edc38&gt;,#&lt;Order:0x000000069edaa8&gt;\\n\" \n2.1.0 :035 &gt; @order.radcheck.class\n =&gt; Array \n2.1.0 :036 &gt; @orders.class\n =&gt; Array\n\n2.1.0 :038 &gt; @order.radcheck\n =&gt; [#&lt;Radcheck @values={:id=&gt;2, :username=&gt;\"19cw5212443948\", :attribute=&gt;\"User-Password\", :op=&gt;\":=\", :value=&gt;\"R65B60178yS\", :order_id=&gt;2}&gt;, #&lt;Radcheck @values={:id=&gt;3, :username=&gt;\"D83d6raf47\", :attribute=&gt;\"User-Password\", :op=&gt;\":=\", :value=&gt;\"90S4449y7845\", :order_id=&gt;2}&gt;]\n\n2.1.0 :039 &gt; @order.radcheck.to_csv_file\nNoMethodError: undefined method `to_csv_file' for #&lt;Array:0x00000006981150&gt;\n    from (irb):39\n    from /var/www/quadifi_staging/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/commands/console.rb:110:in `start'\n    from /var/www/quadifi_staging/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/commands/console.rb:9:in `start'\n    from /var/www/quadifi_staging/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /var/www/quadifi_staging/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /var/www/quadifi_staging/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:8:in `require'\n    from bin/rails:8:in `&lt;main&gt;'\n</code></pre>\n\n<p>Also, I created a custom <code>to_csv_file</code> method but that doesn't work. The resulting CSV file would be like this.<a href=\"https://i.stack.imgur.com/mcVLb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mcVLb.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>class Order &lt; Sequel::Model\n  plugin :validation_helpers\n  plugin :nested_attributes\n  plugin :timestamps, :update_on_create =&gt; true\n  many_to_one :user\n  one_to_many :radcheck\n\n  nested_attributes :radcheck\n\n  def self.to_csv_file(options = {})\n    CSV.generate(options) do |csv|\n      csv.add_row column_names\n      @order.radcheck.all.each do |foo|\n        values = foo.attributes.values\n        csv.add_row values\n      end\n    end\n  end\n\n  def validate\n    super\n    validates_presence [ :time_limit, :ticket_count ]\n  end\nend\n\n\nClass Radcheck &lt; Sequel::Model(:radcheck)\n  plugin :nested_attributes\n\n  one_to_one :radusergroup\n  many_to_one :user\n\n  nested_attributes :radusergroup\n\nend\n</code></pre>\n\n<p>I checked that my Sequel version 4.28.0 has <code>to_csv</code> depreceated so I am puzzled why I have <code>to_csv</code> giving Ruby symbol output.</p>\n"}, {"tags": ["ruby", "erb", "tilt"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448440321, "post_id": 33911422, "comment_id": 55585330, "body": "What is your question?"}, {"owner": {"reputation": 537, "user_id": 183112, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/80b86aa89798b7e76cef192a13488a78?s=128&d=identicon&r=PG", "display_name": "BobC", "link": "https://stackoverflow.com/users/183112/bobc"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1448440653, "post_id": 33911422, "comment_id": 55585494, "body": "This code produces an empty output instead of site_link value. What&#39;s the syntax to have &lt;%= site_link %&gt; replaced by value?"}], "answers": [{"tags": [], "owner": {"reputation": 537, "user_id": 183112, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/80b86aa89798b7e76cef192a13488a78?s=128&d=identicon&r=PG", "display_name": "BobC", "link": "https://stackoverflow.com/users/183112/bobc"}, "is_accepted": false, "score": 1, "last_activity_date": 1448441875, "creation_date": 1448441875, "answer_id": 33912123, "question_id": 33911422, "link": "https://stackoverflow.com/questions/33911422/fill-tilt-template-using-hash/33912123#33912123", "title": "Fill tilt template using hash", "body": "<p>Ok,\nit looks like I need to specify to tilt that data are a hash. Correct code is:</p>\n\n<pre><code>output = template.render(Hash,data)\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 183112, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/80b86aa89798b7e76cef192a13488a78?s=128&d=identicon&r=PG", "display_name": "BobC", "link": "https://stackoverflow.com/users/183112/bobc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448441875, "creation_date": 1448439371, "question_id": 33911422, "link": "https://stackoverflow.com/questions/33911422/fill-tilt-template-using-hash", "title": "Fill tilt template using hash", "body": "<p>I got following ruby example:</p>\n\n<pre><code>require 'tilt'\ndata = { \"site_link\" =&gt; \"http://www.example.com\", \"title\" =&gt; \"example\"}\ntemplate = Tilt.new('../templates/test.erb', :default_encoding =&gt; 'UTF-8')\noutput = template.render(data)\n\nputs output\n</code></pre>\n\n<p>and this is test.erb file:</p>\n\n<pre><code>This should be a link - &lt;%= site_link %&gt;\n</code></pre>\n\n<p>I can't find a proper syntax to get a value from data hash into template.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1448439499, "post_id": 33911338, "comment_id": 55584881, "body": "Please use English punctuation when you write in English."}], "answers": [{"comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1448460159, "post_id": 33911388, "comment_id": 55598024, "body": "You can also do that <code>choice.to_i!</code> for more simplicity, which guarantees an overwrite of the variable. Most people don&#39;t like to use <code>!</code> in this way, though."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1448463453, "post_id": 33911388, "comment_id": 55600416, "body": "@c650: No, you cannot. Such a method does not exist, and is not possible - a method cannot change the object&#39;s class membership. <code>String#gsub!</code> changes a <code>String</code>, it does not create a new object. The hypothetical <code>String#to_i!</code> would have to magically turn a <code>String</code> object into a <code>Fixnum</code>."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1448500843, "post_id": 33911388, "comment_id": 55619164, "body": "@Amadan: wow, in the 6 months I&#39;ve used this language I&#39;d always thought that any reassignment method that returns a mutated version of the object it&#39;s called upon had the <code>!</code> option. Of course, doing so was never really good practice imo so I never realized this."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 3, "last_activity_date": 1448439212, "creation_date": 1448439212, "answer_id": 33911388, "question_id": 33911338, "link": "https://stackoverflow.com/questions/33911338/conversion-to-integer-isnt-executing/33911388#33911388", "title": "Conversion to integer isn&#39;t executing?", "body": "<p><code>choice.to_i</code> <em>returns</em> an integer, but does not change <code>choice</code>. If you want <code>choice</code> to be changed to the integral value of the old <code>choice</code>, you need to reassign it explicitly:</p>\n\n<pre><code>choice = choice.to_i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": false, "score": 1, "last_activity_date": 1448439248, "creation_date": 1448439248, "answer_id": 33911397, "question_id": 33911338, "link": "https://stackoverflow.com/questions/33911338/conversion-to-integer-isnt-executing/33911397#33911397", "title": "Conversion to integer isn&#39;t executing?", "body": "<p>Quoting the <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-to_i\" rel=\"nofollow\">doc of String::to_i</a>, emphasis is mine</p>\n\n<blockquote>\n  <h2>to_i(base=10) \u2192 integer</h2>\n  \n  <p><strong>Returns</strong> the result of interpreting leading characters in str as an\n  integer base base (between 2 and 36).</p>\n</blockquote>\n\n<p>So you have to assign the return to something, or itself:</p>\n\n<pre><code>choice = choice.to_i\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 2553723, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1095399277/picture?type=large", "display_name": "Peter Georges Bou Saada", "link": "https://stackoverflow.com/users/2553723/peter-georges-bou-saada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1448452956, "creation_date": 1448439014, "last_edit_date": 1448452956, "question_id": 33911338, "link": "https://stackoverflow.com/questions/33911338/conversion-to-integer-isnt-executing", "title": "Conversion to integer isn&#39;t executing?", "body": "<p>i have this code :</p>\n\n<pre><code>#require_relative '../lib/hackex/net/typhoeus'\nrequire_relative '../lib/hackex'\nrequire 'rubygems'\nrequire 'faker'\n\n    print \"how many farms do you want : \"\n    choice = gets.chomp\n    choice.to_i\n    check = choice.is_a?(Integer)\n    puts check\n    if choice &gt; 250\n    puts \"Error! you cannot make more than 250 farms at once\"\n    elsif choice &lt; 250\n    puts \"Error! you have to make at least one farm...\"\n    elsif choice.is_a?(Integer) == false\n    puts \"Error, something went wrong !\"\n    else\n    puts \"making #{choice} acounts ! ! !\"\n    cnt = 1\n            while choice&gt;cnt\n            gen = Faker::Name.first_name + Faker::Name.last_name\n            path=(\"created1.txt\")\n            email = gen+'@gmail.com'\n            password = Faker::Internet.password(8)\n            username = gen.to_s+'/&gt;'\n            puts HackEx::Request.Do(http,HackEx::Request.CreateUser(username, email, password, facebook_id = nil))\n            cnt +=1\n            open(path, 'a') { |f|\n                    f &lt;&lt; \"#{email};\"\n                    f &lt;&lt; \"#{password}\"\n                    f &lt;&lt; \"\\n\"\n                    }\n                puts \"Account created!\"\n                puts \"#{choice - cnt} accounts remaining!\"\n            end\n            end\n</code></pre>\n\n<p>i am trying to determing if the choice is an integer... i did the .to_i on choice, but it returns false, meaning its not an integer, its a string, why isnt it switching ?<br>\nps : i do not get any errors, and the rest of the code works fine, except for the if part</p>\n"}, {"tags": ["ruby", "sequel", "sequel-gem"], "answers": [{"tags": [], "owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "is_accepted": false, "score": 0, "last_activity_date": 1448562066, "creation_date": 1448562066, "answer_id": 33944976, "question_id": 33911154, "link": "https://stackoverflow.com/questions/33911154/sequel-relations-and-sql-functions/33944976#33944976", "title": "Sequel relations and SQL functions", "body": "<p>It seems you aren't able to use associations declared in model in order to join a table.</p>\n\n<p><a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/querying_rdoc.html#label-Implicit+Qualification\" rel=\"nofollow\">Sequel documentation</a> proposes only following way to generate right SQL:</p>\n\n<pre><code>Album.join(:artists, :id=&gt;:artist_id)\n# SELECT * FROM albums\n# INNER JOIN artists ON artists.id = albums.artist_id\n</code></pre>\n\n<p>In you case it can look like this:</p>\n\n<pre><code>Customer.join(:purchases, customer_id: :id).where('date &lt; ?', params[:date]).sum(:amount)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 735, "user_id": 3487743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb79d359f4a456933b3f3d6b85212ade?s=128&d=identicon&r=PG", "display_name": "Florin As\u0103voaie", "link": "https://stackoverflow.com/users/3487743/florin-as%c4%83voaie"}, "edited": false, "score": 0, "creation_date": 1448625467, "post_id": 33947523, "comment_id": 55671493, "body": "This is exactly what I was looking for, didn&#39;t know about the _dataset thing. Perfect!"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 735, "user_id": 3487743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb79d359f4a456933b3f3d6b85212ade?s=128&d=identicon&r=PG", "display_name": "Florin As\u0103voaie", "link": "https://stackoverflow.com/users/3487743/florin-as%c4%83voaie"}, "edited": false, "score": 0, "creation_date": 1448637456, "post_id": 33947523, "comment_id": 55678087, "body": "I detected it last week ;)"}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 1, "last_activity_date": 1448574839, "last_edit_date": 1495539880, "creation_date": 1448574839, "answer_id": 33947523, "question_id": 33911154, "link": "https://stackoverflow.com/questions/33911154/sequel-relations-and-sql-functions/33947523#33947523", "title": "Sequel relations and SQL functions", "body": "<p>You already mentioned </p>\n\n<blockquote>\n  <p>was thinking about something like customer.Purchases.where(...).sum(...) but it doesn't work.</p>\n</blockquote>\n\n<p>and in your comment in <a href=\"https://stackoverflow.com/a/33912553/676874\">another answer</a> you mention the relation with <code>customer.purchases</code> already exists.</p>\n\n<p>Then you should also have a <code>purchases_dataset</code>-method. It is a <code>Sequel::SQLite::Dataset</code> and returns models.</p>\n\n<p>So you could try:</p>\n\n<pre><code>customer.purchases_dataset.where('date &lt; ?', params[:date]).sum(:amount)\n</code></pre>\n\n<p>(If it does not work: Can you please post your table and model definition to make a test)</p>\n"}], "owner": {"reputation": 735, "user_id": 3487743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb79d359f4a456933b3f3d6b85212ade?s=128&d=identicon&r=PG", "display_name": "Florin As\u0103voaie", "link": "https://stackoverflow.com/users/3487743/florin-as%c4%83voaie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 33947523, "answer_count": 2, "score": 0, "last_activity_date": 1448574839, "creation_date": 1448438239, "question_id": 33911154, "link": "https://stackoverflow.com/questions/33911154/sequel-relations-and-sql-functions", "title": "Sequel relations and SQL functions", "body": "<p>I am using Ruby <a href=\"http://sequel.jeremyevans.net/\" rel=\"nofollow\">Sequel</a> and I need to find the total amount spent by a customer since a specific date. This code is working:</p>\n\n<pre><code>customer = Customer.where(username: params[:username]).first\nunless customer\n  exit\nend\nPurchases.where(customer: customer).and('date &lt; ?', params[:date]).sum(:amount)\n</code></pre>\n\n<p>However, I am wondering if there is a way to use the Model relation between Customer and Purchases and not use a where clause to find the Purchases, so that the code can look cleaner.</p>\n\n<p>I was thinking about something like <code>customer.Purchases.where(...).sum(...)</code> but it doesn't work.</p>\n\n<p>Any idea if there is a way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "edited": false, "score": 0, "creation_date": 1448445796, "post_id": 33911051, "comment_id": 55588619, "body": "Have you tried anything?"}, {"owner": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "reply_to_user": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "edited": false, "score": 0, "creation_date": 1448447059, "post_id": 33911051, "comment_id": 55589459, "body": "yes, tried logger, Rails.logger, all doesn;t work"}], "answers": [{"comments": [{"owner": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "edited": false, "score": 0, "creation_date": 1448447034, "post_id": 33911209, "comment_id": 55589440, "body": "how can I log to console?"}, {"owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "reply_to_user": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "edited": false, "score": 0, "creation_date": 1448448135, "post_id": 33911209, "comment_id": 55590155, "body": "@AdamLee see improved answer."}], "tags": [], "owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "is_accepted": true, "score": 1, "last_activity_date": 1448448058, "last_edit_date": 1448448058, "creation_date": 1448438425, "answer_id": 33911209, "question_id": 33911051, "link": "https://stackoverflow.com/questions/33911051/is-there-a-way-to-use-logger-in-application-rb/33911209#33911209", "title": "is there a way to use logger in application.rb?", "body": "<p>Yes, it is possible:</p>\n\n<pre><code>logger = ActiveSupport::TaggedLogging.new(Logger.new(File.join(Rails.root, \"log/configuration.log\")))\nlogger.info(\"Some log entry\")\n</code></pre>\n\n<p>If you want to redirect all log output to the console you may try:</p>\n\n<pre><code>logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))\nlogger.info(\"Some log entry to the console\")\n</code></pre>\n\n<p>or for simply inspection of something:</p>\n\n<pre><code>puts \"Another log entry to the console\"\n</code></pre>\n"}], "owner": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 33911209, "answer_count": 1, "score": 1, "last_activity_date": 1448448058, "creation_date": 1448437819, "question_id": 33911051, "link": "https://stackoverflow.com/questions/33911051/is-there-a-way-to-use-logger-in-application-rb", "title": "is there a way to use logger in application.rb?", "body": "<p>For Rails4 application, is there a way to use logger in the application.rb?</p>\n\n<p>I need to print out some log information here before anything else.</p>\n"}, {"tags": ["ruby", "unit-testing", "assert"], "answers": [{"comments": [{"owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448438387, "post_id": 33910825, "comment_id": 55584328, "body": "do I create a new ruby class and inherit it? Sorry about the silly question but I&#39;m only 2 weeks coding in ruby"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448438815, "post_id": 33910825, "comment_id": 55584527, "body": "The code above <i>patches</i> the <code>Test::Unit::TestCase</code> itself. After that you inherit it as you\u2019ve done before (<code>class TestSomething &lt; Test::Unit::TestCase</code>) and all <code>assert_*</code> methods, that you have patched, behave as you want. Think of it as you were the original author of <code>Test::Unit::TestCase</code> and you made some changes to it."}, {"owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448439171, "post_id": 33910825, "comment_id": 55584696, "body": "yes but where do I put the above code? sorry but that is not clear to me"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448439216, "post_id": 33910825, "comment_id": 55584723, "body": "E.g. in the very top of <code>spec_helper.rb</code>."}, {"owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448439606, "post_id": 33910825, "comment_id": 55584943, "body": "but I&#39;m not using rspec. Thats why I don&#39;t use before as you referenced"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1448439758, "post_id": 33910825, "comment_id": 55585029, "body": "You just need to ensure this is loaded. Create a separate file, put it there and require it from everywhere. I do not know the structure of your project, that\u2019s why I can\u2019t suggest anything more precise."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1448436890, "creation_date": 1448436890, "answer_id": 33910825, "question_id": 33910732, "link": "https://stackoverflow.com/questions/33910732/can-common-overriding-code-be-shared/33910825#33910825", "title": "can common overriding code be shared", "body": "<p>I am not sure why you do not want to use <a href=\"https://www.relishapp.com/rspec/rspec-core/docs/hooks/filters\" rel=\"nofollow\"><code>before</code> filter</a>, but the question as it was stated has an answer: since ruby classes are open, one might do the following.</p>\n\n<pre><code>class Test::Unit::TestCase\n  # store the original\n  alias_method :assert_equal_original, :assert_equal\n  # override\n  def assert_equal *args\n    # mycode ..\n    assert_equal_original *args\n  end\n  # the same for other methods\nend\n</code></pre>\n\n<p>Once it is done, any derived class will call <code>my_code</code> before calling the original method.</p>\n\n<hr>\n\n<p>To catch an error within the scope of the class is impossible, AFAIK.</p>\n"}], "owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 33910825, "answer_count": 1, "score": 0, "last_activity_date": 1448436890, "creation_date": 1448436475, "question_id": 33910732, "link": "https://stackoverflow.com/questions/33910732/can-common-overriding-code-be-shared", "title": "can common overriding code be shared", "body": "<p>I am new to ruby and I'm hoping someone can help me. I am writing tests using test::unit and within my tests I needed to run some code before an assert was called so I overrided the assert methods like so:</p>\n\n<pre><code>class TestSomething &lt; Test::Unit::TestCase\n\n  def assert_equal(expected, actual, message = nil)\n    mycode ..\n    super(expected, actual, message)\n  end\n\n  def assert(object, message)\n    my code ...\n    super(object, message)\n  end\n\n  def assert_not_nil(object, message = \"\")\n    my code ...\n    super(object, message)\n  end\n\n  def setup\n\n  end\n\n  def test_case1\n\n  end\n\n  def test_case1\n\n  end\n\n  def teardown\n\n  end\n\nend\n</code></pre>\n\n<p>The above structure works fine and the asserts call my code. The thing is I have 100s of test classes. The assert overriding will be the same for all of them. Do I have to copy the assert overrides to the top of every class or is there a way for all of them to get the assert overrides in one go?</p>\n\n<p>One more question. Is there a way of catching an error if it occurs anywhere within the entire class?</p>\n\n<p>A</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "rbenv"], "comments": [{"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 0, "creation_date": 1448436266, "post_id": 33910509, "comment_id": 55583260, "body": "Could you check if there is <code>bundler</code> gem when you run <code>gem list</code> ?"}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "reply_to_user": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 0, "creation_date": 1448436601, "post_id": 33910509, "comment_id": 55583449, "body": "Yes as mentioned on question bundler exist,and in output of  gem list command is exist too : bundler (1.10.6)"}], "answers": [{"comments": [{"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448437458, "post_id": 33910743, "comment_id": 55583868, "body": "@Frd Can you please do this instead <code>sudo apt-get install libreadline-dev</code> and see if it works ?"}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448438180, "post_id": 33910743, "comment_id": 55584216, "body": "libreadline-dev is already the newest version.this library pre installed in my xubuntu,but whats the real usage of this library in this case ? i think this library is for management of command line interface."}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448438865, "post_id": 33910743, "comment_id": 55584548, "body": "@Frd You may refer to this <a href=\"http://vvv.tobiassjosten.net/ruby/readline-in-ruby-with-rbenv/\" rel=\"nofollow noreferrer\">vvv.tobiassjosten.net/ruby/readline-in-ruby-with-rbenv</a> for <code>libreadline-dev</code>. Could you give me output of <code>which -a ruby</code> ? Also can you please try adding <code>gem &#39;rb-readline&#39;</code> in your Gemfile and see if <code>bundle install</code> works."}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448441033, "post_id": 33910743, "comment_id": 55585717, "body": "output of WHICH -A RUBY : /home/armyalone/.rbenv/shims/ruby /home/armyalone/.rbenv/shims/ruby /home/armyalone/.rbenv/shims/ruby"}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448441521, "post_id": 33910743, "comment_id": 55586002, "body": "also i adding gem &#39;rb-readline&#39; to gemfile of project and trying again with BUNDLE INSTALL,but i get some new error that notice bundler can&#39;t to Fetch some gem files,but when i trying to download that gem manually with gem &#39;gem name&#39; it&#39;s install perfectly."}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448441750, "post_id": 33910743, "comment_id": 55586125, "body": "@Frd Would you able to <code>bundle install</code> with <code>gem &#39;rb-readline&#39;, :require =&gt; false</code> ?"}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448442033, "post_id": 33910743, "comment_id": 55586291, "body": "Yes,but as previously said bundle can&#39;t Fetch some gem and i install that manually with <code>gem &#39;gem name&#39;</code>"}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448442316, "post_id": 33910743, "comment_id": 55586462, "body": "@Frd I have had similar problem in past and I got it resolved using what I shared here. I am sorry, I couldn&#39;t be of much help."}, {"owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "edited": false, "score": 0, "creation_date": 1448442706, "post_id": 33910743, "comment_id": 55586694, "body": "Thank you Dusht,im taking alot of your time bro.Thanks for your help"}], "tags": [], "owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "is_accepted": false, "score": 0, "last_activity_date": 1448436510, "creation_date": 1448436510, "answer_id": 33910743, "question_id": 33910509, "link": "https://stackoverflow.com/questions/33910509/error-while-running-bundle-in-rails-4-2-4/33910743#33910743", "title": "Error while running bundle in rails 4.2.4", "body": "<p>Run the below command in your terminal </p>\n\n<pre><code>gem install rb-readline\n</code></pre>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1453931982, "post_id": 33972106, "comment_id": 57822025, "body": "It&#39;s not recommended that you use <code>http:&#47;&#47;...</code> instead of <code>https:&#47;&#47;</code>. The later offers you security to protect your installation of Ruby. That you couldn&#39;t connect was most likely a temporary network or host problem, which would rectify itself."}], "tags": [], "owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "is_accepted": true, "score": 0, "last_activity_date": 1453931906, "last_edit_date": 1453931906, "creation_date": 1448718793, "answer_id": 33972106, "question_id": 33910509, "link": "https://stackoverflow.com/questions/33910509/error-while-running-bundle-in-rails-4-2-4/33972106#33972106", "title": "Error while running bundle in rails 4.2.4", "body": "<p>I changed the source from <code>https://</code>rubygems.org to <code>http://</code>rubygems.org and ran: </p>\n\n<pre><code>gem update --system\nbundle install\n</code></pre>\n\n<p>now it's working.</p>\n"}], "owner": {"reputation": 36, "user_id": 4798554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09f5deaf7d63783cf4be37b56b7f2d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frd", "link": "https://stackoverflow.com/users/4798554/frd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "accepted_answer_id": 33972106, "answer_count": 2, "score": 0, "last_activity_date": 1453931906, "creation_date": 1448435575, "last_edit_date": 1453931769, "question_id": 33910509, "link": "https://stackoverflow.com/questions/33910509/error-while-running-bundle-in-rails-4-2-4", "title": "Error while running bundle in rails 4.2.4", "body": "<p>I tried running bundle over rbenv but I got this error:</p>\n\n<pre><code>/home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `require': cannot load such file -- bundler (LoadError)\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/generators/app_base.rb:319:in `bundle_command'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/generators/app_base.rb:335:in `run_bundle'\n  from (eval):1:in `run_bundle'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:133:in `block in invoke_all'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:133:in `each'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:133:in `map'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:133:in `invoke_all'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/group.rb:232:in `dispatch'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/commands/plugin.rb:23:in `&lt;top (required)&gt;'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/cli.rb:12:in `&lt;top (required)&gt;'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n  from /home/armyalone/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.4/bin/rails:9:in `&lt;top (required)&gt;'\n  from /home/armyalone/.rbenv/versions/2.2.3/bin/rails:23:in `load'\n  from /home/armyalone/.rbenv/versions/2.2.3/bin/rails:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Then I tried these commands:</p>\n\n<pre><code>$ gem -v\n2.5.0\n\n$ rails -v\nRails 4.2.4\n\n$ bundle -v\nBundler version 1.10.6\n\n$ rbenv -v\nrbenv 0.4.0-205-g5fb9c84\n</code></pre>\n\n<p>Why can't I run bundler?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "json", "hash"], "answers": [{"comments": [{"owner": {"reputation": 3821, "user_id": 1000514, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd33755d13025ff0394a92993f23257e?s=128&d=identicon&r=PG", "display_name": "WagnerMatosUK", "link": "https://stackoverflow.com/users/1000514/wagnermatosuk"}, "edited": false, "score": 0, "creation_date": 1448439446, "post_id": 33910664, "comment_id": 55584845, "body": "My bad, the badly constructed JSON is my fault. Let&#39;s assume the response has a proper JSON, would <code>JSON.parse</code> work?"}, {"owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "reply_to_user": {"reputation": 3821, "user_id": 1000514, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd33755d13025ff0394a92993f23257e?s=128&d=identicon&r=PG", "display_name": "WagnerMatosUK", "link": "https://stackoverflow.com/users/1000514/wagnermatosuk"}, "edited": false, "score": 0, "creation_date": 1448442440, "post_id": 33910664, "comment_id": 55586539, "body": "Yes, of course. If something goes wrong, paste the result here to look through why."}], "tags": [], "owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "is_accepted": true, "score": 0, "last_activity_date": 1448436195, "creation_date": 1448436195, "answer_id": 33910664, "question_id": 33910266, "link": "https://stackoverflow.com/questions/33910266/how-to-convert-a-request-response-to-ruby-nested-hash-array/33910664#33910664", "title": "How to convert a REQUEST response to Ruby nested Hash/Array", "body": "<p>This response does not seem to be a valid JSON, surrounding <code>{</code> and <code>}</code> are missing. Didn't <code>JSON.parse</code> returned any exception? I've tried offline:</p>\n\n<pre><code>@result = %Q{\n  {\n    \"something\": \"10100014\",\n    \"something\": \"025MH-V0625\",\n    \"something\": null,\n    \"something\": null,\n    \"something\": \"SALE\",\n    \"nested\": {\n      \"something\": \"DETACHED_HOUSE\",\n      \"something\": null,\n      \"something\": \"2014\",\n      \"something\": 0,\n      \"something\": 138,\n      \"something\": 0,\n      \"something\": null,\n      \"something\": \"A2010\",\n      \"something\": \"M2\",\n      \"nested\": {\n        \"something\": \"Tv\u00e6ragervej\",\n        \"something\": \"34A\",\n        \"something\": \"\",\n        \"something\": null,\n        \"something\": \"K\u00f8benhavn S\",\n        \"something\": \"2300\",\n        \"something\": \"DK\"\n      }\n      }\n  }\n}\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>@result_r = JSON.parse(@result)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code> =&gt; {\"something\"=&gt;\"SALE\", \"nested\"=&gt;{\"something\"=&gt;\"M2\", \"nested\"=&gt;{\"something\"=&gt;\"DK\"}}}\n</code></pre>\n\n<p>Of course duplicate keys has been skipped.</p>\n\n<p>Let you try:</p>\n\n<pre><code>@result_r = JSON.parse(\"{%s}\" % @result)\n</code></pre>\n"}], "owner": {"reputation": 3821, "user_id": 1000514, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd33755d13025ff0394a92993f23257e?s=128&d=identicon&r=PG", "display_name": "WagnerMatosUK", "link": "https://stackoverflow.com/users/1000514/wagnermatosuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 33910664, "answer_count": 1, "score": 0, "last_activity_date": 1448439375, "creation_date": 1448434693, "last_edit_date": 1448439375, "question_id": 33910266, "link": "https://stackoverflow.com/questions/33910266/how-to-convert-a-request-response-to-ruby-nested-hash-array", "title": "How to convert a REQUEST response to Ruby nested Hash/Array", "body": "<p>I'm using HTTParty to do an external API call like so:</p>\n\n<pre><code>@result = HTTParty.get('some/url')\n</code></pre>\n\n<p>The result is a 3/4 layers nested JSON object with arrays (the result is not always the same though, some times there are more nested objects, some times more arrays, some times no arrays, etc but it always either nested objects nested objects with arrays):</p>\n\n<pre><code>  {\n  \"something\": \"10100014\",\n  \"something\": \"025MH-V0625\",\n  \"something\": null,\n  \"something\": null,\n  \"something\": \"SALE\",\n  \"nested\": {\n    \"something\": \"DETACHED_HOUSE\",\n    \"something\": null,\n    \"something\": \"2014\",\n    \"something\": 0,\n    \"something\": 138,\n    \"something\": 0,\n    \"something\": null,\n    \"something\": \"A2010\",\n    \"something\": \"M2\",\n    \"nested\": {\n      \"something\": \"Tv\u00e6ragervej\",\n      \"something\": \"34A\",\n      \"something\": \"\",\n      \"something\": null,\n      \"something\": \"K\u00f8benhavn S\",\n      \"something\": \"2300\",\n      \"something\": \"DK\"\n    }\n    ...\n}\n</code></pre>\n\n<p>Now I need to iterate over key/values (including nested key/values) of the result but when I do:</p>\n\n<pre><code>@result.respond_to?(:each)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>@result[\"nested\"].respond_to?(:each)\n</code></pre>\n\n<p>I get a <code>false</code>. I've also tried:</p>\n\n<pre><code>@n_result = @result.to_json\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@n_result = JSON.parse(@result)\n</code></pre>\n\n<p>But I get the <code>false</code> in both cases. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448432987, "post_id": 33909684, "comment_id": 55581861, "body": "Common pitfall... did you include the parameter in the comment_params?"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448433306, "post_id": 33909684, "comment_id": 55581993, "body": "And also check if the hidden parent_id form has the value of the parent comment when you click on reply!"}, {"owner": {"reputation": 3, "user_id": 5351968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679bfd2b01ff2ce5bccf3fcbd5016729?s=128&d=identicon&r=PG&f=1", "display_name": "Ask -if-am-Potato", "link": "https://stackoverflow.com/users/5351968/ask-if-am-potato"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448436134, "post_id": 33909684, "comment_id": 55583193, "body": "Thanks for the first advice, i didn&#39;t add the parent_id to the comment params! However, the hidden parent_id value isn&#39;t being passed to the create function. I know this because i entered it manually, and the nested comment worked! I don&#39;t know why it isn&#39;t being passed though..."}, {"owner": {"reputation": 3, "user_id": 5351968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679bfd2b01ff2ce5bccf3fcbd5016729?s=128&d=identicon&r=PG&f=1", "display_name": "Ask -if-am-Potato", "link": "https://stackoverflow.com/users/5351968/ask-if-am-potato"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448436817, "post_id": 33909684, "comment_id": 55583553, "body": "I fixed it! I did  &lt;%= f.hidden_field :parent_id , :value =&gt; @comment.parent_id %&gt; Thanks so much you don&#39;t know how long I&#39;ve been banging my head on this, still very new to rails"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448441344, "post_id": 33909684, "comment_id": 55585894, "body": "See my code sample as answer, I think you can achieve this without this addition!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5351968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679bfd2b01ff2ce5bccf3fcbd5016729?s=128&d=identicon&r=PG&f=1", "display_name": "Ask -if-am-Potato", "link": "https://stackoverflow.com/users/5351968/ask-if-am-potato"}, "edited": false, "score": 0, "creation_date": 1448442420, "post_id": 33912003, "comment_id": 55586525, "body": "I tried that before, but it wasn&#39;t working because I didn&#39;t include the parent_id in the params, but now that I have, I can use it again! Thanks!"}], "tags": [], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "is_accepted": true, "score": 0, "last_activity_date": 1448441404, "creation_date": 1448441404, "answer_id": 33912003, "question_id": 33909684, "link": "https://stackoverflow.com/questions/33909684/cant-get-nested-comments-to-work-with-ancestry-gem/33912003#33912003", "title": "Can&#39;t get nested comments to work with ancestry gem", "body": "<p>You are calling Comment.new in the form declaration although you have already initiated a new comment in the new method, change your form call to this:</p>\n\n<pre><code>&lt;%= form_for([@post, @comment]) do |f| %&gt;\n</code></pre>\n\n<p>I think by making that addition, you do not have to manually set the value of the parent_comment.</p>\n"}], "owner": {"reputation": 3, "user_id": 5351968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679bfd2b01ff2ce5bccf3fcbd5016729?s=128&d=identicon&r=PG&f=1", "display_name": "Ask -if-am-Potato", "link": "https://stackoverflow.com/users/5351968/ask-if-am-potato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 33912003, "answer_count": 1, "score": 0, "last_activity_date": 1448441404, "creation_date": 1448432330, "question_id": 33909684, "link": "https://stackoverflow.com/questions/33909684/cant-get-nested-comments-to-work-with-ancestry-gem", "title": "Can&#39;t get nested comments to work with ancestry gem", "body": "<p>I'm trying to implement replies for my comments in rails. I was watching this video as a guideline <a href=\"http://railscasts.com/episodes/262-trees-with-ancestry\" rel=\"nofollow\">http://railscasts.com/episodes/262-trees-with-ancestry</a>\nAll the comments I create just becomes the root node, everytime I try replying to a comment it seems like it just doesn't register as the children node.\n(I've checked with rails console and the column 'ancestry' for the replying comment is always nil) </p>\n\n<p>My comment is a nested resources under the Post Model. I suspect the problem is with the create function in the comments controller?</p>\n\n<p>using rails '4.2.4'</p>\n\n<p>Comments controller:</p>\n\n<pre><code>def new\n    @post = Post.find(params[:post_id]) \n    @comment = @post.comments.build\n    @comment.parent_id = params[:parent_id]\n\nend\n\ndef create\n\n    @post = Post.find(params[:post_id])\n    @comment = @post.comments.create(comment_params)\n    @comment.user = current_user\n\n    if @comment.save\n        redirect_to build_post_path(@post)\n    else\n        redirect_to build_post_path(@post)\n    end\nend\n</code></pre>\n\n<p>comments/new.html.erb</p>\n\n<pre><code>    &lt;div class = \"row\"&gt;\n        &lt;div class=\"col-md-8 col-md-offset-2 \"&gt;\n            &lt;h3&gt;Reply&lt;/h3&gt;\n            &lt;ol class =\"comments\"&gt;\n                &lt;%= render @comment.parent if @comment.parent %&gt;\n            &lt;/ol&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n    &lt;%= render 'form' %&gt;\n</code></pre>\n\n<p>comments/_form.html.erb</p>\n\n<pre><code>&lt;div class = \"row\"&gt;\n      &lt;div class = \"col-md-5 col-md-offset-2\"&gt;\n            &lt;%= form_for([@post, Comment.new]) do |f| %&gt;\n\n                  &lt;%= render 'shared/error_messages',object: f.object %&gt;\n\n                  &lt;%= f.hidden_field :parent_id %&gt;\n\n                  &lt;%= f.label :comment %&gt;\n                  &lt;%= f.text_area :comment , class: 'form-control', rows: \"4\"  %&gt;\n\n                  &lt;div class = \"row\"&gt;\n                        &lt;div class = \"col-md-3\"&gt;\n                              &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n                        &lt;/div&gt;\n                  &lt;/div&gt;\n            &lt;% end %&gt;\n      &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>comments/_comments.html.erb</p>\n\n<pre><code>&lt;li id=\"comment-&lt;%= comment.id %&gt;\"&gt;\n\n  &lt;span class=\"avatar\"&gt;&lt;%= image_tag(comment.user.avatar.url(:thumb)) %&gt;&lt;/span&gt;\n  &lt;span class=\"user\"&gt;&lt;%= link_to comment.user.name, comment.user %&gt; &lt;span class = \"timestamp\"&gt;&lt;%= time_ago_in_words(comment.created_at) %&gt; ago.&lt;/span&gt;&lt;/span&gt;\n  &lt;span class=\"content\"&gt;&lt;%= comment.comment %&gt;&lt;/span&gt;\n  &lt;span class=\"options\"&gt;\n\n    &lt;%= link_to \"Index\", post_comments_path %&gt; | \n\n    &lt;%= link_to \"Reply\", new_post_comment_path(:parent_id =&gt; comment) %&gt; |\n\n    &lt;% if current_user?(comment.user) %&gt;\n      &lt;%= link_to \"Delete\", [comment.post, comment], method: :delete,\n                                       data: { confirm: \"You sure?\" } %&gt;\n      &lt;%= link_to \"Edit\", edit_post_comment_path(comment.post, comment) %&gt;\n    &lt;% end %&gt;\n  &lt;/span&gt;\n\n&lt;/li&gt;\n</code></pre>\n\n<p>post/show.html.erb</p>\n\n<pre><code>&lt;div class = \"row\"&gt;\n    &lt;div class=\"col-md-8 col-md-offset-2 \"&gt;\n        &lt;h3&gt;Comments (&lt;%= @post.comments.count %&gt;)&lt;/h3&gt;\n        &lt;ol class =\"comments\"&gt;\n            &lt;%= nested_messages @post.comments.arrange(:order =&gt; :created_at) %&gt;\n        &lt;/ol&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>helper method</p>\n\n<pre><code>def nested_messages(messages)\n    messages.map do |message, sub_messages|\n      render(message) + content_tag(:div, nested_messages(sub_messages), :class =&gt; \"nested_messages\")\n    end.join.html_safe\n  end\n</code></pre>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1448430515, "post_id": 33909208, "comment_id": 55580891, "body": "You&#39;re generating the unbound method by calling <code>instance_method</code>. There&#39;s no &quot;copy&quot; of the module method itself; it resides in <code>A</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448432158, "post_id": 33909208, "comment_id": 55581489, "body": "Note that <code>B.ancestors #=&gt; [B, A]</code>, <code>A.ancestors #=&gt; [A]</code>.  ."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448431533, "post_id": 33909318, "comment_id": 55581256, "body": "I thought methods were objects. For example, <code>m = Array.instance_method(:flatten) #=&gt; #&lt;UnboundMethod: Array#flatten&gt; </code>. <code>m.is_a? Object #=&gt; true</code>. Is my reasoning faulty?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448431616, "post_id": 33909318, "comment_id": 55581290, "body": "@CarySwoveland: <code>Method</code>s and <code>UnboundMethod</code>s are objects that describe methods, which are not. The distinction between <code>Method</code> and method is important here."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448431837, "post_id": 33909318, "comment_id": 55581364, "body": "@CarySwoveland: <a href=\"http://stackoverflow.com/questions/2602340/methods-in-ruby-objects-or-not\" title=\"methods in ruby objects or not\">stackoverflow.com/questions/2602340/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448431967, "post_id": 33909318, "comment_id": 55581408, "body": "Thanks. One more for the to-do list."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448581210, "post_id": 33909318, "comment_id": 55655787, "body": "@CarySwoveland: I just thought of a good analogy that makes it clear. Are files objects in Ruby? Clearly no - files are not in Ruby, but on the disk. But <code>File</code>s are objects (in Ruby) that describe - and allow you to interact with - files (on the disk). A <code>File</code> is not a file (clearly); the very same reasoning applies to Ruby methods, even if it is not as obvious.,."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448591072, "post_id": 33909318, "comment_id": 55657733, "body": "Yes, a great analogy."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1448430588, "creation_date": 1448430588, "answer_id": 33909318, "question_id": 33909208, "link": "https://stackoverflow.com/questions/33909208/are-inherited-mixed-in-methods-copies-of-the-original/33909318#33909318", "title": "Are inherited/mixed-in methods copies of the original?", "body": "<p><code>alpha_a</code> is an object that describes the method <code>alpha</code> on <code>A</code>. It is not the method itself. The method itself, just like a block, is <em>not an object</em>, just like blocks are not objects but can be wrapped in <code>Proc</code> objects. Similarly, <code>alpha_b</code> describes the method <code>alpha</code> on <code>B</code>.</p>\n\n<p>The method itself is the same: it is defined on module <code>A</code>. There is no copying going on.</p>\n"}], "owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 33909318, "answer_count": 1, "score": 2, "last_activity_date": 1448430913, "creation_date": 1448430094, "last_edit_date": 1448430913, "question_id": 33909208, "link": "https://stackoverflow.com/questions/33909208/are-inherited-mixed-in-methods-copies-of-the-original", "title": "Are inherited/mixed-in methods copies of the original?", "body": "<p>Given the various ways of sharing methods in Ruby, and the fact that those methods are themselves objects, what are the underlying mechanics of such sharing? For example, given:</p>\n\n<pre><code>module A\n  def alpha; end\nend\n\nmodule B\n  include A\nend\n</code></pre>\n\n<p>is it accurate to say that B's <code>alpha</code> instance method is a <em>copy</em> of A's? It appears so:</p>\n\n<pre><code>alpha_a = A.instance_method(:alpha)\nalpha_b = B.instance_method(:alpha)\n\nalpha_a == alpha_b\n=&gt; false\n\nalpha_a.object_id == alpha_b.object_id\n=&gt; false\n</code></pre>\n\n<p>This makes it look (to me) like alpha_b is a copy of alpha_a that belongs to B. But reading about Ruby's handling of method-lookup/dispatch, it sounds the call traverses the ancestors all the way back to A before finding the method to call. Also, there's this:</p>\n\n<pre><code>alpha_b.owner\n=&gt; A\n</code></pre>\n\n<p>So what exactly is going on? Do alpha_a and alpha_b both \"reside\" in A, despite the latter having been generated when B included A? Do the underlying mechanics depend on the mode of sharing (include/extend/inherit)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1448429390, "post_id": 33909022, "comment_id": 55580477, "body": "are you sure the <code>secrets.yml</code> file is present in your production environment? <a href=\"http://stackoverflow.com/a/23206010/3035830\">This SO suggests git might have ignored it</a>."}, {"owner": {"reputation": 444, "user_id": 1103090, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/49abd075ec7640ab12660a8d97027364?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1103090/edward"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1448436657, "post_id": 33909022, "comment_id": 55583481, "body": "Okay - to be clear. I don&#39;t want to use the secrets.yml - this is a JSON api server"}], "owner": {"reputation": 444, "user_id": 1103090, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/49abd075ec7640ab12660a8d97027364?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1103090/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 526, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1448434844, "creation_date": 1448429118, "last_edit_date": 1448429442, "question_id": 33909022, "link": "https://stackoverflow.com/questions/33909022/rails-disabling-secrets-yml-for-api", "title": "Rails - Disabling secrets.yml for api", "body": "<p>There doesn't seem to be a configuration option for the <code>secrets.yml</code> check even if I am running Rails as a JSON API</p>\n\n<p>Puma caught this error: </p>\n\n<blockquote>\n  <p>Missing <code>secret_token</code> and <code>secret_key_base</code> for 'production'\n  environment, set these values in <code>config/secrets.yml</code> (RuntimeError)</p>\n</blockquote>\n\n<p>Any clue what to do? I suppose I can generate a dummy <code>secret_key_base</code> and move on</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1636, "user_id": 1256849, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dfa0i.jpg?s=128&g=1", "display_name": "Harry Bomrah", "link": "https://stackoverflow.com/users/1256849/harry-bomrah"}, "edited": false, "score": 1, "creation_date": 1448430508, "post_id": 33908955, "comment_id": 55580886, "body": "Well I would personally recommend you using linux for RoR development. Windows has lot of issues running RoR and webrick server too. You ll keep getting into such problems more often. I strongly recommend you to use linux."}], "answers": [{"tags": [], "owner": {"reputation": 444, "user_id": 4049961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3lPU.jpg?s=128&g=1", "display_name": "Muhammad Junaid", "link": "https://stackoverflow.com/users/4049961/muhammad-junaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1448432428, "creation_date": 1448432428, "answer_id": 33909705, "question_id": 33908955, "link": "https://stackoverflow.com/questions/33908955/in-modulehelpers-uninitialized-constant-actionviewhelpersactivemodelhe/33909705#33909705", "title": "in `&lt;module:Helpers&gt;&#39;: uninitialized constant ActionView::Helpers::ActiveModelHelper (NameError)", "body": "<p>Install an older version of rails (4.0.0) because I think windows doesn't have stable version of rails > 4.0. \nChange the version in gemfile. </p>\n"}], "owner": {"reputation": 647, "user_id": 3017645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/JX2iM.jpg?s=128&g=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/3017645/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448432428, "creation_date": 1448428794, "last_edit_date": 1495542617, "question_id": 33908955, "link": "https://stackoverflow.com/questions/33908955/in-modulehelpers-uninitialized-constant-actionviewhelpersactivemodelhe", "title": "in `&lt;module:Helpers&gt;&#39;: uninitialized constant ActionView::Helpers::ActiveModelHelper (NameError)", "body": "<p>I have just started learning Ruby on Rails. I installed all the related softwares and started exploring the same. When I try to start the default server in Rails (WEBrick), I am getting the following error.</p>\n\n<pre><code>C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.5/lib/action_view/helpers.rb:40:in `&lt;module:Helpers&gt;': uninitialized constant ActionView::Helpers::ActiveModelHelper (NameError)\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.5/lib/action_view/helpers.rb:4:in `&lt;module:ActionView&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.5/lib/action_view/helpers.rb:3:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.5/lib/action_view/base.rb:5:in `require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.5/lib/action_view/base.rb:5:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web_console/template.rb:7:in `&lt;class:Template&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web_console/template.rb:6:in `&lt;module:WebConsole&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web_console/template.rb:1:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web_console.rb:12:in `require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web_console.rb:12:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web-console.rb:1:in `require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/web-console-2.2.1/lib/web-console.rb:1:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `each'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `block in require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `each'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler.rb:134:in `require'\n    from C:/Temp/Rails-Project/Sites/simple_cms/config/application.rb:7:in `&lt;top (required)&gt;'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:78:in`require'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:78:in`block in server'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:75:in`tap'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:75:in`server'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:39:in`run_command!'\n    from C:/Apps/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.5/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Upon research in SOF, found from <a href=\"https://stackoverflow.com/q/28999906/3017645\">the link</a> and <a href=\"https://stackoverflow.com/q/32879550/3017645\">other link</a> that the nokogiri needs to be updated in the Gemfile. I updated and executed the Bundle Install command. Even after that, its not working. Please suggest me the ways to fix it. FYI, I am using the latest versions of gems.</p>\n\n<p>I also updated my Gemfile with </p>\n\n<blockquote>\n  <p>gem 'rack', '~> 1.6.0'</p>\n</blockquote>\n\n<p>It did not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "many-to-many", "strong-parameters"], "comments": [{"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1448426728, "post_id": 33908220, "comment_id": 55579625, "body": "Did you check if the record is created in the database? open the rails console and type <code>Participation.last</code> and tell me if it returns an empty set"}, {"owner": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "reply_to_user": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1448468824, "post_id": 33908220, "comment_id": 55604206, "body": "The participation is created with both the <code>id</code> and <code>status</code> fields populated. The <code>event_id</code> and <code>user_id</code> are nil and the <code>current_user.first_name</code> is unchanged."}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1448482138, "post_id": 33908220, "comment_id": 55611952, "body": "If my answer was useful, please consider mark it as best answer. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "edited": false, "score": 0, "creation_date": 1448468646, "post_id": 33909092, "comment_id": 55604088, "body": "@SsoulLlesS Good question and thanks for the example code! Unfortunately, this app will have many more fields all associated with the User and should persist with the User as the app grows (other Event types requiring different User info). In other words, if the User participates in another Event they should only have to update their info instead of re-writing all of the form fields.  Also from an Object-oriented standpoint your solution would seem to let a participation know too much about something that ultimately belongs to a User (first_name, last_name, birth_date, etc)."}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "reply_to_user": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "edited": false, "score": 0, "creation_date": 1448469610, "post_id": 33909092, "comment_id": 55604756, "body": "instead of add the attributes persisted in database for your <code>Participation</code> model you can just create <code>attr_accessor</code>&#39;s and in the <code>create</code> action just update the infor of the <code>current_user</code>, that way you keep your information persisted in the user instead of Participation."}, {"owner": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "edited": false, "score": 0, "creation_date": 1448653223, "post_id": 33909092, "comment_id": 55685057, "body": "But isn&#39;t this the exact type of messiness that <code>accepts_nested_attributes_for</code> and <code>fields_for</code> is supposed to clean up in Rails 4?  I&#39;ll detail what I did in a separate answer, but thanks so much for the help @ssoulless"}], "tags": [], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "is_accepted": false, "score": 1, "last_activity_date": 1448482053, "last_edit_date": 1448482053, "creation_date": 1448429460, "answer_id": 33909092, "question_id": 33908220, "link": "https://stackoverflow.com/questions/33908220/how-to-create-an-event-registration-rails-structure/33909092#33909092", "title": "How to create an event registration rails structure", "body": "<p>Well as described <a href=\"http://www.maori.geek.nz/accepts_nested_attributes_for_creating_new_records_gotcha/\" rel=\"nofollow\">here</a>, what is happening is that when you pass an id to the nested model, <code>accepts_nested_attributes</code> will look and try to update the model you are looking for.</p>\n\n<p>So at that moment there is not such association between current user and the Participation you want to create, that's why you get the error:</p>\n\n<p><code>Couldn't find User with ID=1 for Participation with ID=:</code></p>\n\n<p>That means there is not such user with ID=1 associated with your participation</p>\n\n<p>My suggestion:</p>\n\n<p>Instead of add nested attributes for user, why not just add the fields you need to the Participation model?</p>\n\n<p>Add the <code>first_name</code> attribute to your participation model and in your controller do the following:</p>\n\n<pre><code>class ParticipationsController &lt; ApplicationController\n  def index\n  end\n\n  def new\n    @participation = Participation.new\n    @participation.user = current_user\n    @participation.event = Event.find(params[:event_id])\n  end\n\n  def create\n    @participation = Participation.new(participation_params)\n    @participation.user = current_user\n    @participation.event = Event.find(params[:event_id])\n    if @participation.save\n      redirect_to events_path, notice: \"You are registered!\"\n    else\n      render action: 'new'\n    end\n  end\n\nprivate\n\n  def participation_params\n    params.require(:participation).permit(:status, :first_name)\n  end\nend\n</code></pre>\n\n<p>Then in your form you can just make a normal first_name input:</p>\n\n\n  <br />\n  \n\n<pre><code>&lt;fieldset&gt;\n  &lt;%= f.label :first_name, \"First Name\" %&gt;&lt;br /&gt;\n  &lt;%= f.text_field :first_name %&gt;&lt;br /&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n  \n\n\n<p>Try that and let me know, by the way do not forget to remove the <code>accepts_nested_attributes</code> from Participation model, and make sure your migrations are correctly set up for match the associations you have. I hope have helped you.</p>\n\n<h3>Update</h3>\n\n<p>If you do not want to persist user information in the Participation then you can just add attribute accessors to your Participation model, and store information in your <code>current_user</code> in your <code>create</code> action:</p>\n\n<pre><code>#app/models/participation.rb\nclass Participation &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :event\n\n  attr_accessor :first_name, :whatever_other_attribute # You can add as many attributes you need.\nend\n</code></pre>\n\n<p>Then just update information of your <code>current_user</code> in your <code>create</code> action:</p>\n\n<pre><code>#app/controllers/participations_controller\ndef create\n    @participation = Participation.new(participation_params)\n    @participation.user = current_user\n    @participation.event = Event.find(params[:event_id])\n    current_user.update_attributes first_name: @participation.first_name\n    if @participation.save\n      redirect_to events_path, notice: \"You are registered!\"\n    else\n      render action: 'new'\n    end\n  end\n</code></pre>\n\n<p>This way you store the information in the <code>current_user</code> instead of Participation, also this way you can easily customize the different information you will ask in the participation form.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "is_accepted": true, "score": 0, "last_activity_date": 1448654825, "creation_date": 1448654825, "answer_id": 33964239, "question_id": 33908220, "link": "https://stackoverflow.com/questions/33908220/how-to-create-an-event-registration-rails-structure/33964239#33964239", "title": "How to create an event registration rails structure", "body": "<p>Thanks to @ssoulless for pointing me in to the final solution.</p>\n\n<p>Ultimately I was able to update the controller action to associate the user and then use the participation_params to update the participation[:user].</p>\n\n<pre><code># participations_controller.rb\n\n...\n  def create\n    @participation = Participation.new(status: participation_params[:status])\n    @participation.mission_id = params[:mission_id]\n    current_user.update_attributes(participation_params[:user_attributes])\n    @participation.user = current_user\n\n    if @participation.save\n      redirect_to missions_path, notice: \"You are registered!\"\n    else\n      render action: 'new'\n    end\n  end\n\nprivate\n\n  def participation_params\n    params.require(:participation)\n          .permit(:id, :status, user_attributes: [:id, :first_name])\n  end\n</code></pre>\n\n<p>I like this approach a bit more since it hides the user attributes in a private method. Also for anyone that this might help, when using <code>accepts_nested_attributes_for</code> in your model, you need to add it to the strong_params #permit parameters (Don't forget the ID!).</p>\n"}], "owner": {"reputation": 45, "user_id": 2779248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b901b1081e7658cef1e66b6704b03?s=128&d=identicon&r=PG", "display_name": "joeyc", "link": "https://stackoverflow.com/users/2779248/joeyc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "accepted_answer_id": 33964239, "answer_count": 2, "score": 0, "last_activity_date": 1477861009, "creation_date": 1448423632, "last_edit_date": 1448432215, "question_id": 33908220, "link": "https://stackoverflow.com/questions/33908220/how-to-create-an-event-registration-rails-structure", "title": "How to create an event registration rails structure", "body": "<p>I have what I thought is a simple event signup application. A user registers for the site and then can select an event, apply to participate in that event by updating some fields that are on the user model (At this point, just a first_name). A User can attend many Events, but must register (Participation) for each one. An Event can have many Users through Participations. Any help is greatly appreciated!</p>\n\n<p>There are currently three models:</p>\n\n<pre><code># user.rb\nclass User &lt; ActiveRecord::Base\n  has_many :participations\n  has_many :events, through: :participations\n\n  devise :database_authenticatable, :registerable,\n    :recoverable, :rememberable, :trackable, :validatable\nend\n\n# event.rb \nclass Event &lt; ActiveRecord::Base\n  has_many :participations\n  has_many :users, through: :participations\n\nend\n\n# And a join table: participation.rb\nclass Participation &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :event\n\n  accepts_nested_attributes_for :user\nend\n</code></pre>\n\n<p>Here's my routes file:\n<em>routes.rb</em></p>\n\n<pre><code>Rails.application.routes.draw do\n  mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\n  devise_for :users\n\n  root 'events#index'\n\n  resources :events do\n    resources :participations\n  end\n\n  resources :users\nend\n</code></pre>\n\n<p>And I think the only applicable controller:\n<em>participations_controller.rb</em></p>\n\n<pre><code>class ParticipationsController &lt; ApplicationController\n  def index\n  end\n\n  def new\n    @participation = Participation.new\n    @user = current_user\n    @event = Event.find(params[:event_id])\n  end\n\n  def create\n    @participation = Participation.new(participation_params)\n    if @participation.save\n      redirect_to events_path, notice: \"You are registered!\"\n    else\n      render action: 'new'\n    end\n  end\n\nprivate\n\n  def participation_params\n    params.require(:participation).permit(:status, :user_attributes =&gt; [:id, :first_name])\n  end\nend\n</code></pre>\n\n<p>The form should simply create a new participation based on the event_id, set its status, and update the user_attributes.\n<em>views/participations/new.html.erb</em></p>\n\n<pre><code>&lt;%= form_for @participation, url: {action: \"create\"} do |f| %&gt;\n  &lt;%= f.label :status %&gt;&lt;br /&gt;\n  &lt;%= f.text_field :status %&gt;\n\n  &lt;%= f.fields_for :user, current_user do |builder| %&gt;\n    &lt;fieldset&gt;\n      &lt;%= builder.label :first_name, \"First Name\" %&gt;&lt;br /&gt;\n      &lt;%= builder.text_field :first_name %&gt;&lt;br /&gt;\n    &lt;/fieldset&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.submit \"Register\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Unfortunately, completing the form returns a 404 error with a missing participation_id.</p>\n\n<pre><code>Started POST \"/events/1/participations\" for ::1 at 2015-11-24 21:26:35 -0600\nProcessing by ParticipationsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"0vVTyeGwGUheZPbOoMeyUvr2ciJG2OpXwqToc2pYLr2HXDMhogX8llESiG8Z4Cc5Pq5sBmiHi43rvjHka7K3yA==\", \"participation\"=&gt;{\"status\"=&gt;\"done\", \"user_attributes\"=&gt;{\"first_name\"=&gt;\"sone\", \"id\"=&gt;\"1\"}}, \"commit\"=&gt;\"Register\", \"event_id\"=&gt;\"1\"}\nCompleted 404 Not Found in 3ms (ActiveRecord: 0.0ms)\n\nActiveRecord::RecordNotFound - Couldn't find User with ID=1 for Participation with ID=:\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "apartment-gem"], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "is_accepted": true, "score": 1, "last_activity_date": 1448891209, "creation_date": 1448891209, "answer_id": 34000127, "question_id": 33907927, "link": "https://stackoverflow.com/questions/33907927/request-host-in-initializer-rails-4/34000127#34000127", "title": "Request.host in initializer Rails 4", "body": "<p>thanks to some help I got on the apartment gem's github issues I was able to figure out a solution.</p>\n\n<pre><code>#company.rb model\ndef self.full_hosts_hash\n    Company.all.inject(Hash.new) do |hash, company|\n      hash[company.request_host] = company.request_host\n      hash\n    end\nend\n\n#apartment.rb initializer\nrequire 'apartment/elevators/host_hash'\nRails.application.config.middleware.use 'Apartment::Elevators::HostHash', Company.full_hosts_hash\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 34000127, "answer_count": 1, "score": 0, "last_activity_date": 1448891209, "creation_date": 1448421496, "question_id": 33907927, "link": "https://stackoverflow.com/questions/33907927/request-host-in-initializer-rails-4", "title": "Request.host in initializer Rails 4", "body": "<p>I am using the Apartment gem for a multi-tenant app and I'm using the \"host_hash elevator\" to switch the tenant based on the subdomain and host of the request.</p>\n\n<p>This is done with the below code (from their documentation): </p>\n\n<pre><code>#initalizers/apartment.rb\n\n# application.rb\nmodule MyApplication\n  class Application &lt; Rails::Application\n    config.middleware.use 'Apartment::Elevators::HostHash', {'example.com' =&gt; 'example_tenant'}\n  end\nend\n</code></pre>\n\n<p>Where it says 'example.com' => 'example_tenant' I need to send a hash with the request.host to find the company in my Company model where the value of the request_host database field matches request.host. If that makes sense?</p>\n\n<p>if I hard code in an example so it's like the below code I can get it to work, but I don't know how to dynamically do it based on the request:</p>\n\n<pre><code>#initalizers/apartment.rb\n\n# application.rb\nmodule MyApplication\n  class Application &lt; Rails::Application\n    config.middleware.use 'Apartment::Elevators::HostHash', {'test.lvh.me:3000' =&gt; 'test.lvh.me:3000'}\n  end\nend\n</code></pre>\n\n<p>The above code works because that's the domain that I'm currently on and it matches a field and apartment tenant that I had set up.</p>\n\n<p>However, since this in an initializer when I put 'request.host' there I get an error: undefined local variable/method 'request'</p>\n\n<p>If I use 'Rack::Request.new(env).host' I get undefined local variable/method 'env'</p>\n\n<p>How can I get request.host in an an initializer to solve this problem?</p>\n"}, {"tags": ["html", "ruby", "gulp", "jekyll"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1448442754, "post_id": 33907566, "comment_id": 55586729, "body": "This is supposed to work. Do you have some sources on github ?"}, {"owner": {"reputation": 803, "user_id": 716249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b05198379f4b275d304fd27e6cb09ae?s=128&d=identicon&r=PG", "display_name": "parkr", "link": "https://stackoverflow.com/users/716249/parkr"}, "edited": false, "score": 0, "creation_date": 1448474253, "post_id": 33907566, "comment_id": 55607673, "body": "This works for me! Check file permissions and ensure the file <code>_includes&#47;footers&#47;footer1.html</code> is there."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 2569021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1f0aaa5169b785bc9f833a12aba5b3c?s=128&d=identicon&r=PG", "display_name": "Bryan Schuetz", "link": "https://stackoverflow.com/users/2569021/bryan-schuetz"}, "is_accepted": false, "score": 8, "last_activity_date": 1540064133, "last_edit_date": 1540064133, "creation_date": 1448463927, "answer_id": 33919870, "question_id": 33907566, "link": "https://stackoverflow.com/questions/33907566/can-you-use-subdirectories-within-jekylls-includes-folder/33919870#33919870", "title": "Can you use subdirectories within Jekyll&#39;s _includes folder?", "body": "<p>Yes you can nest partials. Subdirectories don't have to be prepended with an underscore. </p>\n\n<p>Let's say you have a <code>footers</code> folder inside the <code>_includes</code> folder. </p>\n\n<pre><code>_includes/footers\n</code></pre>\n\n<p>You could include your resources by adding the relative path:</p>\n\n<pre><code>{% include footers/footer1.html %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 3314275, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/851e23f1bdc87ccd34688b403f9b0f2b?s=128&d=identicon&r=PG", "display_name": "whatsnewsaes", "link": "https://stackoverflow.com/users/3314275/whatsnewsaes"}, "is_accepted": false, "score": 1, "last_activity_date": 1448498395, "creation_date": 1448498395, "answer_id": 33928838, "question_id": 33907566, "link": "https://stackoverflow.com/questions/33907566/can-you-use-subdirectories-within-jekylls-includes-folder/33928838#33928838", "title": "Can you use subdirectories within Jekyll&#39;s _includes folder?", "body": "<p>This is one of those scenarios where I came back to it, seemingly tried the exact same thing, and it worked.</p>\n\n<hr>\n\n<ul>\n<li>You can use subdirectories within _layout folders</li>\n<li>You don't have to use underscores for it to work (Perhaps this is just a best, practice?)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1310, "user_id": 2618036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb602439c78c24083769286e12fbb2a?s=128&d=identicon&r=PG", "display_name": "georger", "link": "https://stackoverflow.com/users/2618036/georger"}, "is_accepted": false, "score": 1, "last_activity_date": 1479555891, "creation_date": 1479555891, "answer_id": 40692496, "question_id": 33907566, "link": "https://stackoverflow.com/questions/33907566/can-you-use-subdirectories-within-jekylls-includes-folder/40692496#40692496", "title": "Can you use subdirectories within Jekyll&#39;s _includes folder?", "body": "<p>On <code>jekyll 3.0.1</code> you don't have to use <code>_</code> to prepend directories in <code>_includes</code>. \nI have a structure like <code>_includes/foo/file.html, _includes/bar/file.html</code> and I use it like <code>{% include foo/file.html %}</code> and <code>{% include bar/file.html %}</code>. It works perfectly fine without underscores. This might be a behavior that is not present in other versions of Jekyll.</p>\n"}], "owner": {"reputation": 335, "user_id": 3314275, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/851e23f1bdc87ccd34688b403f9b0f2b?s=128&d=identicon&r=PG", "display_name": "whatsnewsaes", "link": "https://stackoverflow.com/users/3314275/whatsnewsaes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2333, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1540127798, "creation_date": 1448418777, "last_edit_date": 1540127798, "question_id": 33907566, "link": "https://stackoverflow.com/questions/33907566/can-you-use-subdirectories-within-jekylls-includes-folder", "title": "Can you use subdirectories within Jekyll&#39;s _includes folder?", "body": "<p>My plan is to have folders within the <code>_includes</code> directory:</p>\n\n<p>_includes/footers</p>\n\n<p>_includes/heros</p>\n\n<p>_includes/cta</p>\n\n<p>etc...</p>\n\n<p>When I reference that <code>{% include footers/footer1.html %}</code> I get the following error: </p>\n\n<p><code>Liquid Exception: Included file '_includes/footers/footer1.html' not found in _layouts/default.html</code></p>\n\n<p>Is this outside the intended functionality, or am I missing something?</p>\n"}, {"tags": ["arrays", "ruby", "yaml"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1448429828, "post_id": 33906396, "comment_id": 55580643, "body": "There&#39;s no easy way to do this, but it is possible. See these related questions: <a href=\"http://stackoverflow.com/questions/9640277/how-to-dump-strings-in-yaml-using-literal-scalar-style\" title=\"how to dump strings in yaml using literal scalar style\">stackoverflow.com/questions/9640277/&hellip;</a> (this concerns literal scalar style (&quot;<code>|</code>&quot;); whereas you want folded (&quot;<code>&gt;</code>&quot;) but that&#39;s a very small difference); and <a href=\"http://stackoverflow.com/questions/11798716/psych-doc-says-at-the-mid-level-is-building-an-ast-but-how-exactly\" title=\"psych doc says at the mid level is building an ast but how exactly\">stackoverflow.com/questions/11798716/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2096916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a61f4f6cb99d8a88a91c6ae7257634b?s=128&d=identicon&r=PG", "display_name": "Kelvin Ma", "link": "https://stackoverflow.com/users/2096916/kelvin-ma"}, "edited": false, "score": 0, "creation_date": 1448468817, "post_id": 33909016, "comment_id": 55604198, "body": "Do you have any idea on the reason why there are multiple ways to represent the same data in YAML? Seems like a unnecessary complication."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1, "user_id": 2096916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a61f4f6cb99d8a88a91c6ae7257634b?s=128&d=identicon&r=PG", "display_name": "Kelvin Ma", "link": "https://stackoverflow.com/users/2096916/kelvin-ma"}, "edited": false, "score": 0, "creation_date": 1448471471, "post_id": 33909016, "comment_id": 55605960, "body": "Convenience, I guess - YAML was made so that it is easily writable by hand, and people appreciate options. For example, most strings in YAML do not need quotes; but some do, and having multiple ways of representing strings helps, as you can choose the most readable for the specific case."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1448429099, "creation_date": 1448429099, "answer_id": 33909016, "question_id": 33906396, "link": "https://stackoverflow.com/questions/33906396/how-do-you-create-this-representation-of-yaml-array-using-psych-ruby-library/33909016#33909016", "title": "How do you create this representation of yaml array using psych (ruby) library?", "body": "<p>You can't, AFAIK, because there are several ways to represent the same data in YAML, and Psych will pick one of them. I.e.</p>\n\n<pre><code>---\ncode:\n- \"&lt;title&gt; Jane's Website &lt;/title&gt;\"\n</code></pre>\n\n<p>is equivalent to your</p>\n\n<pre><code>code:\n-\n  &gt;\n  &lt;title&gt; Jane's Website &lt;/title&gt;\n</code></pre>\n\n<p>and I don't believe you get to pick which one gets output. However, you should not rely on a particular form - if you are using YAML, any YAML that represents your structure should be accepted equally.</p>\n"}], "owner": {"reputation": 1, "user_id": 2096916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a61f4f6cb99d8a88a91c6ae7257634b?s=128&d=identicon&r=PG", "display_name": "Kelvin Ma", "link": "https://stackoverflow.com/users/2096916/kelvin-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448429099, "creation_date": 1448410827, "question_id": 33906396, "link": "https://stackoverflow.com/questions/33906396/how-do-you-create-this-representation-of-yaml-array-using-psych-ruby-library", "title": "How do you create this representation of yaml array using psych (ruby) library?", "body": "<p>I have a yaml file that is valid and includes this snippet:</p>\n\n<pre><code>code:\n-\n  &gt;\n  &lt;title&gt; Jane's Website &lt;/title&gt;\n</code></pre>\n\n<p>Which is parsed as an array:</p>\n\n<pre><code>\"code\": [\n    \"&lt;title&gt; Jane's Website &lt;/title&gt;\"\n  ]\n</code></pre>\n\n<p>How do I get the psych library to write the yaml this way? </p>\n"}, {"tags": ["ruby", "math", "exponential", "exponent"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448420517, "post_id": 33906916, "comment_id": 55578074, "body": "The exponential distribution function is <code>F(x) = 1-e**(-kx)</code>, not <code>F(x) = e**(-kx)</code>, but you can of course sample from zero to one from <code>F(x)</code> or <code>1-F(x)</code>."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448422314, "post_id": 33906916, "comment_id": 55578527, "body": "@CarySwoveland Thank you for your correction. I&#39;m not a native English speaker so I don&#39;t know what <b>exponential decay</b> really is. Anyway this method can be applied to any monotone distributions, can&#39;t it?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1448427539, "post_id": 33906916, "comment_id": 55579862, "body": "Yes, but, as you know, for some distributions (including the exponential), you can derive the inverse function (as you have done), which makes it easy; for others, you may have to use numerical methods (e.g., Newton&#39;s method) to compute inverse values. Dentists refer to &quot;exponential decay&quot; as the situation when a patient&#39;s cavity gets worse very quickly."}, {"owner": {"reputation": 1543, "user_id": 573616, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pTYhl.jpg?s=128&g=1", "display_name": "Cheyne", "link": "https://stackoverflow.com/users/573616/cheyne"}, "edited": false, "score": 0, "creation_date": 1448476759, "post_id": 33906916, "comment_id": 55609076, "body": "Thanks for taking the time to write this Aetherus.  I&#39;ll have a play around with your solution and see what I can come up with"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 2, "last_activity_date": 1448419021, "last_edit_date": 1448419021, "creation_date": 1448414311, "answer_id": 33906916, "question_id": 33906387, "link": "https://stackoverflow.com/questions/33906387/calculate-exponential-decay-value-in-ruby/33906916#33906916", "title": "Calculate Exponential Decay Value In Ruby", "body": "<p>First, you need to have the <strong>probability distribution function</strong>, say <code>F(x)</code>. It doesn't need to be normalized. In your case (exponential decay), this function could be</p>\n\n<pre><code>F(x) = e^(-kx)\n</code></pre>\n\n<p>You can tune <code>k</code> to adjust how fast it decays.\nThen calculate the range of <code>F(x)</code> over your domain.</p>\n\n<p>Then work out its inverse function <code>G(x)</code>, which is</p>\n\n<pre><code>G(x) = -(1/k)ln(x)\n</code></pre>\n\n<p>Then you can do sampling by <code>G(rand(range of F))</code></p>\n\n<p>Here's my ruby code:</p>\n\n<pre><code>k = 1\n\nf = -&gt; x {Math.exp(-k * x)}\nl, h = f.call(10), f.call(1)\n\ng = -&gt; x {-Math.log(x) / k}\nr = -&gt; {rand(h - l) + l}\n\nsamples = 10_000.times.map{g.call(r.call)}\n\nsamples.count{|x| x &lt; 1}  #=&gt; 6327\nsamples.count{|x| x &lt; 2}  #=&gt; 8620\nsamples.count{|x| x &lt; 3}  #=&gt; 9477\nsamples.count{|x| x &lt; 4}  #=&gt; 9809\nsamples.count{|x| x &lt; 5}  #=&gt; 9929\nsamples.count{|x| x &lt; 6}  #=&gt; 9970\nsamples.count{|x| x &lt; 7}  #=&gt; 9986\nsamples.count{|x| x &lt; 8}  #=&gt; 9994\nsamples.count{|x| x &lt; 9}  #=&gt; 9997\nsamples.count{|x| x &lt; 10}  #=&gt; 10000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1543, "user_id": 573616, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pTYhl.jpg?s=128&g=1", "display_name": "Cheyne", "link": "https://stackoverflow.com/users/573616/cheyne"}, "edited": false, "score": 0, "creation_date": 1448476840, "post_id": 33908554, "comment_id": 55609127, "body": "Thanks John.  I&#39;m marking this as the answer as it&#39;s very clean and i&#39;m able to make use of this right away, and the curve looks about right for what i&#39;m trying to do."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 2, "last_activity_date": 1448508718, "last_edit_date": 1448508718, "creation_date": 1448426221, "answer_id": 33908554, "question_id": 33906387, "link": "https://stackoverflow.com/questions/33906387/calculate-exponential-decay-value-in-ruby/33908554#33908554", "title": "Calculate Exponential Decay Value In Ruby", "body": "<p>Another curve that may suit you is square/squareroot/parabola</p>\n\n<pre><code>&gt; 11.times{|x| puts \"#{x}, #{100-(10-x)**2}\"}\n0, 0\n1, 19\n2, 36\n3, 51\n4, 64\n5, 75\n6, 84\n7, 91\n8, 96\n9, 99\n10, 100\n</code></pre>\n\n<p>To change the scale to 20, use</p>\n\n<pre><code>&gt; 21.times{|x| puts \"#{x}, #{100-(10-x/2.0)**2}\"}\n</code></pre>\n"}], "owner": {"reputation": 1543, "user_id": 573616, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pTYhl.jpg?s=128&g=1", "display_name": "Cheyne", "link": "https://stackoverflow.com/users/573616/cheyne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 2, "accepted_answer_id": 33908554, "answer_count": 2, "score": -1, "last_activity_date": 1448508718, "creation_date": 1448410791, "question_id": 33906387, "link": "https://stackoverflow.com/questions/33906387/calculate-exponential-decay-value-in-ruby", "title": "Calculate Exponential Decay Value In Ruby", "body": "<p>It occurred to me today that I have forgotten almost all of my high school math, so I need some assistance working out some basic math in Ruby. </p>\n\n<p>Essentially, I have a set of values from 1 to 10.  Right now, I simply multiply them by 10 to get a figure I use as a percentage.  eg 2 = 20%,  4 = 40% etc. </p>\n\n<p>This is a little too linear and so what I really need to do is calculate a exponential decay style value, where by values closer down to 1 are given a more generous percentage and numbers closer up to 9 and 10 the percentage flattens out.  </p>\n\n<p>There is a possibility that there may be more than 10 numbers in the future too,  so for example, 1 to 20. Im assuming this is simply enough to change?</p>\n\n<p>Here is a quick chart that describes what im trying to do. </p>\n\n<p><a href=\"https://i.stack.imgur.com/8lOUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8lOUW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can anyone help me figure this one out? Preferably in Ruby but otherwise any pseudo code would help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-services", "heroku", "devise"], "comments": [{"owner": {"reputation": 126, "user_id": 5484548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517ad896513ae6c29af3eb5518d7ed2d?s=128&d=identicon&r=PG", "display_name": "F. Fiebig", "link": "https://stackoverflow.com/users/5484548/f-fiebig"}, "edited": false, "score": 0, "creation_date": 1448414976, "post_id": 33906282, "comment_id": 55576651, "body": "What were you trying to do ? What have you tried to fix this?"}, {"owner": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "reply_to_user": {"reputation": 126, "user_id": 5484548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517ad896513ae6c29af3eb5518d7ed2d?s=128&d=identicon&r=PG", "display_name": "F. Fiebig", "link": "https://stackoverflow.com/users/5484548/f-fiebig"}, "edited": false, "score": 0, "creation_date": 1448419465, "post_id": 33906282, "comment_id": 55577825, "body": "So far heroku rake db:migrate and restarting the heroku server"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 2771513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94646e0805b7c79994f76cd7c51b5c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Meri Alvarado", "link": "https://stackoverflow.com/users/2771513/meri-alvarado"}, "reply_to_user": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "edited": false, "score": 0, "creation_date": 1448419670, "post_id": 33907141, "comment_id": 55577875, "body": "can you please try to list all the active dynos by doing <code>heroku ps</code>"}, {"owner": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "edited": false, "score": 0, "creation_date": 1448420809, "post_id": 33907141, "comment_id": 55578143, "body": "acemorris:~/workspace/forum (master) $ heroku ps === web (Free): bin/rails server -p $PORT -e $RAILS_ENV web.1: up 2015/11/25 02:39:53 (~ 26m ago)"}, {"owner": {"reputation": 181, "user_id": 2771513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94646e0805b7c79994f76cd7c51b5c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Meri Alvarado", "link": "https://stackoverflow.com/users/2771513/meri-alvarado"}, "reply_to_user": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "edited": false, "score": 0, "creation_date": 1448421963, "post_id": 33907141, "comment_id": 55578437, "body": "if you do not specify what to restart by doing this: <code>heroku restart</code>, what is the result?"}, {"owner": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "edited": false, "score": 0, "creation_date": 1448422124, "post_id": 33907141, "comment_id": 55578476, "body": "Same, still the error, do you think it could be devise?"}], "tags": [], "owner": {"reputation": 181, "user_id": 2771513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94646e0805b7c79994f76cd7c51b5c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Meri Alvarado", "link": "https://stackoverflow.com/users/2771513/meri-alvarado"}, "is_accepted": false, "score": 0, "last_activity_date": 1448415772, "creation_date": 1448415772, "answer_id": 33907141, "question_id": 33906282, "link": "https://stackoverflow.com/questions/33906282/heroku-were-sorry-but-something-went-wrong-i-have-been-looking-for-hours/33907141#33907141", "title": "Heroku: We&#39;re sorry, but something went wrong( I have been looking for hours)", "body": "<p>Have you already follow this link?</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#local-workstation-setup\" rel=\"nofollow\">https://devcenter.heroku.com/articles/getting-started-with-rails4#local-workstation-setup</a></p>\n\n<p>or you need to restart your heroku server:</p>\n\n<p><code>heroku restart worker.1</code></p>\n"}], "owner": {"reputation": 83, "user_id": 3817680, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5419d845ff612030f6a6d43eba4ecbd9?s=128&d=identicon&r=PG&f=1", "display_name": "Vivid Debugger", "link": "https://stackoverflow.com/users/3817680/vivid-debugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448421154, "creation_date": 1448410173, "last_edit_date": 1448421154, "question_id": 33906282, "link": "https://stackoverflow.com/questions/33906282/heroku-were-sorry-but-something-went-wrong-i-have-been-looking-for-hours", "title": "Heroku: We&#39;re sorry, but something went wrong( I have been looking for hours)", "body": "<p>I know, so many people ask this same question, but none of the answers are working for me. Hopefully someone with more experience can help. I am using Devise in this application, if that helps.</p>\n\n<p>When I run heroku ps:</p>\n\n<pre><code>=== web (Free): bin/rails server -p $PORT -e $RAILS_ENV\nweb.1: up 2015/11/25 02:39:53 (~ 26m ago)\n</code></pre>\n\n<p>Heroku Log:</p>\n\n<pre><code>2015-11-24T22:05:07.993413+00:00 heroku[slug-compiler]: Slug compilation started\n2015-11-24T22:05:07.993428+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-11-24T22:05:12.519003+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 32783 -e production`\n2015-11-24T22:05:17.529304+00:00 app[web.1]: [2015-11-24 22:05:17] INFO  WEBrick 1.3.1\n2015-11-24T22:05:17.529328+00:00 app[web.1]: [2015-11-24 22:05:17] INFO  ruby 2.0.0 (2015-04-13) [x86_64-linux]\n2015-11-24T22:05:17.529573+00:00 app[web.1]: [2015-11-24 22:05:17] INFO  WEBrick::HTTPServer#start: pid=3 port=32783\n2015-11-24T22:05:17.734507+00:00 heroku[web.1]: State changed from starting to up\n2015-11-24T22:08:42.923437+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=43d6d58c-398e-458f-b9d5-d8c573663ef1 fwd=\"74.70.151.189\" dyno=web.1 connect=0ms service=76ms status=500 bytes=1754\n2015-11-24T22:08:43.081200+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=fast-plains-8055.herokuapp.com request_id=3abfe83b-7381-4f1b-b901-b7e45ad7a56b fwd=\"74.70.151.189\" dyno=web.1 connect=0ms service=3ms status=200 bytes=228\n2015-11-24T22:09:58.449471+00:00 heroku[api]: Starting process with command `db:migrate` by guildconcept@gmail.com\n2015-11-24T22:10:00.441658+00:00 heroku[run.1339]: Awaiting client\n2015-11-24T22:10:00.463935+00:00 heroku[run.1339]: Starting process with command `db:migrate`\n2015-11-24T22:10:00.803616+00:00 heroku[run.1339]: State changed from starting to up\n2015-11-24T22:10:02.467681+00:00 heroku[run.1339]: State changed from up to complete\n2015-11-24T22:10:02.454690+00:00 heroku[run.1339]: Process exited with status 127\n2015-11-24T22:10:11.644955+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by guildconcept@gmail.com\n2015-11-24T22:10:13.866452+00:00 heroku[run.4044]: Awaiting client\n2015-11-24T22:10:13.906184+00:00 heroku[run.4044]: Starting process with command `bundle exec rake db:migrate`\n2015-11-24T22:10:14.244007+00:00 heroku[run.4044]: State changed from starting to up\n2015-11-24T22:10:19.778358+00:00 heroku[run.4044]: Process exited with status 0\n2015-11-24T22:10:19.767955+00:00 heroku[run.4044]: State changed from up to complete\n2015-11-24T22:11:04.093611+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=6f5ee2ef-10e6-446d-97af-69749fd3c7a5 fwd=\"74.70.151.189\" dyno=web.1 connect=1ms service=8ms status=500 bytes=1754\n2015-11-24T22:11:04.287865+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=fast-plains-8055.herokuapp.com request_id=b503038f-9174-4cd2-904e-3391ced7fcb6 fwd=\"74.70.151.189\" dyno=web.1 connect=1ms service=3ms status=200 bytes=228\n2015-11-24T22:11:05.000050+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=b24a20fd-63bd-4b95-b56e-6e22ee4a4e15 fwd=\"74.70.151.189\" dyno=web.1 connect=1ms service=8ms status=500 bytes=1754\n2015-11-24T22:11:05.204728+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=fast-plains-8055.herokuapp.com request_id=c1340dca-2a8f-468a-a155-af24e994c09c fwd=\"74.70.151.189\" dyno=web.1 connect=2ms service=45ms status=200 bytes=228\n2015-11-24T22:11:29.626953+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=ecb2067b-26dc-40c8-b527-e1a2d8916df1 fwd=\"74.70.151.189\" dyno=web.1 connect=1ms service=10ms status=500 bytes=1754\n2015-11-24T22:14:38.706423+00:00 heroku[api]: Starting process with command `db:migrate` by guildconcept@gmail.com\n2015-11-24T22:14:41.036756+00:00 heroku[run.3858]: Starting process with command `db:migrate`\n2015-11-24T22:14:41.003571+00:00 heroku[run.3858]: Awaiting client\n2015-11-24T22:14:41.529782+00:00 heroku[run.3858]: State changed from starting to up\n2015-11-24T22:14:43.490006+00:00 heroku[run.3858]: Process exited with status 127\n2015-11-24T22:14:54.658801+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by guildconcept@gmail.com\n2015-11-24T22:14:56.424572+00:00 heroku[run.3306]: Awaiting client\n2015-11-24T22:14:56.441974+00:00 heroku[run.3306]: Starting process with command `bundle exec rake db:migrate`\n2015-11-24T22:14:43.508096+00:00 heroku[run.3858]: State changed from up to complete\n2015-11-24T22:14:56.762584+00:00 heroku[run.3306]: State changed from starting to up\n2015-11-24T22:15:00.143588+00:00 heroku[run.3306]: Process exited with status 0\n2015-11-24T22:15:00.103040+00:00 heroku[run.3306]: State changed from up to complete\n2015-11-24T22:17:37.380714+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=f1cd1525-7697-4bba-adec-bb5436af542f fwd=\"74.70.151.189\" dyno=web.1 connect=0ms service=10ms status=500 bytes=1754\n2015-11-24T22:17:37.579185+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=fast-plains-8055.herokuapp.com request_id=9099fa00-7526-433b-8191-078b72a54c8b fwd=\"74.70.151.189\" dyno=web.1 connect=1ms service=4ms status=304 bytes=133\n2015-11-24T22:51:40.649681+00:00 heroku[web.1]: Idling\n2015-11-24T22:51:40.650445+00:00 heroku[web.1]: State changed from up to down\n2015-11-24T22:51:46.152454+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2015-11-24T22:51:47.371522+00:00 app[web.1]: [2015-11-24 22:51:47] FATAL SignalException: SIGTERM\n2015-11-24T22:51:47.371527+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `select'\n2015-11-24T22:51:47.371530+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `block in start'\n2015-11-24T22:51:47.371530+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:32:in `start'\n2015-11-24T22:51:47.371531+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:160:in `start'\n2015-11-24T22:51:47.371533+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:80:in `start'\n2015-11-24T22:51:47.371532+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/handler/webrick.rb:34:in `run'\n2015-11-24T22:51:47.371534+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-11-24T22:51:47.371532+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:286:in `start'\n2015-11-24T22:51:47.371538+00:00 app[web.1]:    bin/rails:9:in `&lt;main&gt;'\n2015-11-24T22:51:47.371664+00:00 app[web.1]: [2015-11-24 22:51:47] INFO  WEBrick::HTTPServer#start done.\n2015-11-24T22:51:47.371534+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-11-24T22:51:47.371536+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-11-24T22:51:47.371606+00:00 app[web.1]: [2015-11-24 22:51:47] INFO  going to shutdown ...\n2015-11-24T22:51:47.412305+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-11-24T22:51:47.371535+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-11-24T22:51:47.412309+00:00 app[web.1]: =&gt; Rails 4.2.4 application starting in production on http://0.0.0.0:32783\n2015-11-24T22:51:47.412311+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-11-24T22:51:47.371537+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-11-24T22:51:47.371538+00:00 app[web.1]:    bin/rails:9:in `require'\n2015-11-24T22:51:47.412311+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-11-24T22:51:47.412312+00:00 app[web.1]: Exiting\n2015-11-24T22:51:48.125299+00:00 heroku[web.1]: Process exited with status 143\n2015-11-24T23:09:53.602567+00:00 heroku[web.1]: Unidling\n2015-11-24T23:09:53.602829+00:00 heroku[web.1]: State changed from down to starting\n2015-11-24T23:09:55.419638+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 6079 -e production`\n2015-11-24T23:09:59.250927+00:00 app[web.1]: [2015-11-24 23:09:59] INFO  WEBrick 1.3.1\n2015-11-24T23:09:59.250946+00:00 app[web.1]: [2015-11-24 23:09:59] INFO  ruby 2.0.0 (2015-04-13) [x86_64-linux]\n2015-11-24T23:09:59.259572+00:00 app[web.1]: [2015-11-24 23:09:59] INFO  WEBrick::HTTPServer#start: pid=3 port=6079\n2015-11-24T23:10:00.706946+00:00 heroku[router]: at=info method=GET path=\"/\" host=fast-plains-8055.herokuapp.com request_id=6330fb41-d30c-48d1-86a3-b2fdfbfb983f fwd=\"74.70.151.189\" dyno=web.1 connect=0ms service=48ms status=500 bytes=1754\n2015-11-24T23:09:59.641116+00:00 heroku[web.1]: State changed from starting to up\n2015-11-24T23:10:00.900587+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=fast-plains-8055.herokuapp.com request_id=fac0f43d-0385-445d-8325-29cc14c68ad1 fwd=\"74.70.151.189\" dyno=web.1 connect=0ms service=7ms status=200 bytes=228\n2015-11-24T23:43:31.043394+00:00 heroku[web.1]: Idling\n2015-11-24T23:43:31.043394+00:00 heroku[web.1]: State changed from up to down\n2015-11-24T23:43:33.423424+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2015-11-24T23:43:34.039752+00:00 app[web.1]: [2015-11-24 23:43:34] FATAL SignalException: SIGTERM\n2015-11-24T23:43:34.039757+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `select'\n2015-11-24T23:43:34.039759+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `block in start'\n2015-11-24T23:43:34.039760+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:32:in `start'\n2015-11-24T23:43:34.039761+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:160:in `start'\n2015-11-24T23:43:34.039762+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/handler/webrick.rb:34:in `run'\n2015-11-24T23:43:34.039763+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:286:in `start'\n2015-11-24T23:43:34.039764+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:80:in `start'\n2015-11-24T23:43:34.039765+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-11-24T23:43:34.039766+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-11-24T23:43:34.039767+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-11-24T23:43:34.039768+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-11-24T23:43:34.039768+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-11-24T23:43:34.039770+00:00 app[web.1]:    bin/rails:9:in `require'\n2015-11-24T23:43:34.039770+00:00 app[web.1]:    bin/rails:9:in `&lt;main&gt;'\n2015-11-24T23:43:34.039854+00:00 app[web.1]: [2015-11-24 23:43:34] INFO  going to shutdown ...\n2015-11-24T23:43:34.039919+00:00 app[web.1]: [2015-11-24 23:43:34] INFO  WEBrick::HTTPServer#start done.\n2015-11-24T23:43:34.070390+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-11-24T23:43:34.070396+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-11-24T23:43:34.070395+00:00 app[web.1]: =&gt; Rails 4.2.4 application starting in production on http://0.0.0.0:6079\n2015-11-24T23:43:34.070397+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-11-24T23:43:34.070398+00:00 app[web.1]: Exiting\n2015-11-24T23:43:34.912741+00:00 heroku[web.1]: Process exited with status 143\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 3630922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa806219082d60de4bcc7bb1be8c5dac?s=128&d=identicon&r=PG", "display_name": "hamitron", "link": "https://stackoverflow.com/users/3630922/hamitron"}, "edited": false, "score": 1, "creation_date": 1448409665, "post_id": 33906193, "comment_id": 55574938, "body": "also instead of setting the variable elsewhere, <code>post_path(review.post)</code> should work"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1448409594, "creation_date": 1448409594, "answer_id": 33906193, "question_id": 33906071, "link": "https://stackoverflow.com/questions/33906071/link-to-show-page-takes-me-to-the-index-page-rails/33906193#33906193", "title": "link_to Show page takes me to the index page Rails?", "body": "<p>Should be <code>&lt;%= link_to review.post.title, post_path(@post) %&gt;</code>,<br>\nor just <code>&lt;%= link_to review.post.title, @post %&gt;</code><br>\nnot <code>&lt;%= link_to review.post.title, posts_path(@post) %&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 754, "user_id": 3506853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc12fa793f4d13924e0cfef39d4bd9cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3506853", "link": "https://stackoverflow.com/users/3506853/user3506853"}, "is_accepted": true, "score": 1, "last_activity_date": 1448442982, "last_edit_date": 1448442982, "creation_date": 1448434468, "answer_id": 33910201, "question_id": 33906071, "link": "https://stackoverflow.com/questions/33906071/link-to-show-page-takes-me-to-the-index-page-rails/33910201#33910201", "title": "link_to Show page takes me to the index page Rails?", "body": "<p>There is a instance variable @posts not @post on dashboard.html.erb page.\nAnd you can get post by review.post, like:-</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to review.post.title , post_path(review.post) %&gt;&lt;/td&gt; \n</code></pre>\n\n<p>Also, Instead of call association again and again you can do this:-</p>\n\n<pre><code>&lt;% @reviews.each do |review| %&gt;\n    &lt;tr&gt;\n    &lt;% review_post = review.post %&gt;\n     &lt;td&gt;&lt;%= link_to review_post.title , post_path(review_post) %&gt;&lt;/td&gt; \n    &lt;td&gt;&lt;%= time_ago_in_words(review.created_at) %&gt; ago&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1448442888, "creation_date": 1448442888, "answer_id": 33912507, "question_id": 33906071, "link": "https://stackoverflow.com/questions/33906071/link-to-show-page-takes-me-to-the-index-page-rails/33912507#33912507", "title": "link_to Show page takes me to the index page Rails?", "body": "<p>You have not check your routes properly:\n<a href=\"https://i.stack.imgur.com/6WDnl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6WDnl.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>posts_path</code> is for <code>index</code> method and for <code>show</code> method it is <code>post_path</code> with <code>id</code> or object.</p>\n\n<p>Use:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to review.post.title , post_path(@post) %&gt;&lt;/td&gt;\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 5178670, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7594cbf58dd69f7cf17a1a9241be9965?s=128&d=identicon&r=PG&f=1", "display_name": "AHmed", "link": "https://stackoverflow.com/users/5178670/ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 33910201, "answer_count": 3, "score": 0, "last_activity_date": 1448442982, "creation_date": 1448408965, "question_id": 33906071, "link": "https://stackoverflow.com/questions/33906071/link-to-show-page-takes-me-to-the-index-page-rails", "title": "link_to Show page takes me to the index page Rails?", "body": "<p>I am trying to have a dashboard in my app that lists all the reviews the user has. The problem that i have is when i click on the post that the user gave a review in , it takes me to the index page of all the posts instead of the show page of the specific post. This is the line of code i am having issue with  <code>&lt;td&gt;&lt;%= link_to review.post.title , posts_path(@post) %&gt;&lt;/td&gt;</code> \n. Here's my code:</p>\n\n<p><strong>views/pages/dashboard.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"align-left\"&gt;\n\n\n\n&lt;div class=\"col-md-2\"&gt;\n&lt;h5&gt;&lt;%= @user.name %&gt;&lt;/h5&gt;\n\n\n&lt;/div&gt;\n&lt;div class=\"col-md-5\"&gt;\n&lt;h3&gt;My Posts&lt;/h3&gt;\n\n&lt;table class=\"table table-hover\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Name&lt;/th&gt;\n          &lt;th&gt;Created&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n      &lt;% @posts.each do |post| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= post.title %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= time_ago_in_words(post.created_at) %&gt; ago&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to \"Edit\", edit_post_path(post) %&gt;|&lt;%= link_to \"Destroy\", post_path(post), method: :delete %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n\n&lt;/div&gt;\n\n&lt;br&gt;\n\n&lt;h3&gt;My Reviews&lt;/h3&gt;\n&lt;table class=\"table table-hover\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Place&lt;/th&gt;\n          &lt;th&gt;Created&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n      &lt;% @reviews.each do |review| %&gt;\n        &lt;tr&gt;\n         &lt;td&gt;&lt;%= link_to review.post.title , posts_path(@post) %&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;%= time_ago_in_words(review.created_at) %&gt; ago&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>the Rake route file</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/S9H3l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9H3l.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448407557, "post_id": 33905245, "comment_id": 55574149, "body": "A pair of numbers cannot equal zero. They can both be zero, have a sum, difference, product or quotient that is zero, one modulo the other can equal zero,... After reading your code (which I should not have to do to understand the question) I see you mean that the two numbers sum to zero."}], "answers": [{"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1448408484, "post_id": 33905319, "comment_id": 55574510, "body": "Not relevant to the question."}, {"owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1448413315, "post_id": 33905319, "comment_id": 55576156, "body": "@Aetherus I don&#39;t see how it is not relevant. First part explains by an example how to see if there are more than one occurrences of an element in the array, <code>a.count(0)</code> would return the desired result. (Which is the first question)  Second part determines if two array elements are equal, which is the same with checkink for duplicates in the array. (Which is the second question)"}], "tags": [], "owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "is_accepted": false, "score": 1, "last_activity_date": 1448405088, "creation_date": 1448405088, "answer_id": 33905319, "question_id": 33905245, "link": "https://stackoverflow.com/questions/33905245/comparing-two-items-in-array-with-ruby/33905319#33905319", "title": "Comparing two items in array with Ruby", "body": "<p>If you just want to count an element's occurencies in an array you can use <a href=\"http://apidock.com/ruby/Enumerable/count\" rel=\"nofollow\">Enumerable#count</a></p>\n\n<pre><code>a = [1,2,3,4,5,1,2,2]\na.count(2)\n# =&gt; 3\n</code></pre>\n\n<p>now if you want to see if there are duplicate entries in an array you can use the <code>uniq</code> method</p>\n\n<pre><code>def has_duplicates?(arr)\n  arr.uniq.length == arr.length\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1448406534, "creation_date": 1448406534, "answer_id": 33905607, "question_id": 33905245, "link": "https://stackoverflow.com/questions/33905245/comparing-two-items-in-array-with-ruby/33905607#33905607", "title": "Comparing two items in array with Ruby", "body": "<p>Here's my approach to your first question and another method that returns the pairs:</p>\n\n<pre><code>def pairs?(arr)\n    arr.inject(false){|c, v| c || (arr.include?(-v) &amp;&amp; v &gt; 0)}\nend\n\ndef get_pairs(arr)\n    arr.collect{|val| [val, -val] if arr.include?(-val) &amp;&amp; val &gt; 0}.reject(&amp;:nil?)\nend\n\narr = [1, 8, -2, 12, -15, 5, 3]\np pairs?(arr)\np get_pairs(arr)\n\narr = [1, 8, -2, 12, -15, 5, 3, 2, -3, 1]\np pairs?(arr)\np get_pairs(arr)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>false\n[]\ntrue\n[[3, -3], [2, -2]]\n</code></pre>\n\n<p>They don't work when there's a pair of zeros, though. You can handle that case explicitly or perhaps someone could offer a better solution.</p>\n"}, {"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 2, "creation_date": 1448408282, "post_id": 33905895, "comment_id": 55574437, "body": "Thanks for <code>Array#combination</code>"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 13, "last_activity_date": 1448408095, "creation_date": 1448408095, "answer_id": 33905895, "question_id": 33905245, "link": "https://stackoverflow.com/questions/33905245/comparing-two-items-in-array-with-ruby/33905895#33905895", "title": "Comparing two items in array with Ruby", "body": "<p>Often, you can translate the English specification quite directly into Ruby.</p>\n\n<p>In your first question, you ask if any combination of two elements adds to zero. The method to use when you want to know whether something is true for any element of an enumerable is <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-any-3F\"><code>Enumerable#any?</code></a>. If you want to work on combinations of elements from an array, you use the method <a href=\"http://ruby-doc.org/core/Array.html#method-i-combination\"><code>Array#combination</code></a>. For summing, you can either use <code>Numeric#+</code> or <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-inject\"><code>Enumerable#inject</code></a>, and if you want to know whether a number is zero, you can use <a href=\"http://ruby-doc.org/core/Numeric.html#method-i-zero-3F\"><code>Numeric#zero?</code></a>.</p>\n\n<p>So, a possible implementation of your first question would be:</p>\n\n<pre><code>ary.combination(2).any? {|pair| pair.inject(:+).zero? }\n</code></pre>\n\n<p>Your second question could be answered by this:</p>\n\n<pre><code>ary.combination(2).any? {|a, b| a == b }\n</code></pre>\n\n<p>In both cases, there are of course other ways to do this. For example, in the first case, we could observe that the only way that two numbers sum to zero is if one is the negative of the other.</p>\n\n<p>Note that <em>none</em> of the things that can typically go wrong in a loop can happen here. No off-by-one errors, no fencepost errors, no wrong terminating condition, no iterating off the end of the array, simply because there is no loop.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1448428201, "last_edit_date": 1448428201, "creation_date": 1448408302, "answer_id": 33905938, "question_id": 33905245, "link": "https://stackoverflow.com/questions/33905245/comparing-two-items-in-array-with-ruby/33905938#33905938", "title": "Comparing two items in array with Ruby", "body": "<p>You are going to like Ruby, in part because you generally won't be using indices to pull out or set the elements of an array.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def pairs(arr)\n  arr.map { |e| e &lt; 0 ? -e : e }.\n      group_by(&amp;:itself).\n      select { |_,v| v.size &gt; 1 }.\n      keys\nend \n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>pairs [1, 8, -2, 12, -15, 5, 3]           #=&gt; []\npairs [1, 8, -2, 12, -15, 5, 3, 2, -3, 1] #=&gt; [1, 2, 3] \n</code></pre>\n\n<p>If you want the second example to return <code>[[1, -1], [2, -2], [3, -3]]</code> (though I don't see the point), replace the penultimate line of the method with:</p>\n\n<pre><code>map { |k,_| [k, -k] }\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The steps for:</p>\n\n<pre><code>arr = [1, 8, -2, 12, -15, 5, 3, 2, -3, 1]\n</code></pre>\n\n<p>are:</p>\n\n<pre><code>a = arr.map { |e| e &lt; 0 ? -e : e }\n  #=&gt; [1, 8, 2, 12, 15, 5, 3, 2, 3, 1] \nb = a.group_by(&amp;:itself)\n  #=&gt; {1=&gt;[1, 1], 8=&gt;[8], 2=&gt;[2, 2], 12=&gt;[12], 15=&gt;[15], 5=&gt;[5], 3=&gt;[3, 3]} \n</code></pre>\n\n<p>We were given <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-itself\" rel=\"nofollow\">Object#itself</a> in Ruby v2.2. For earlier versions, use:</p>\n\n<pre><code>b = a.group_by { |e| e }\n</code></pre>\n\n<p>Continuing:</p>\n\n<pre><code>c = b.select { |_,v| v.size &gt; 1 }\n  #=&gt; {1=&gt;[1, 1], 2=&gt;[2, 2], 3=&gt;[3, 3]} \nc.keys\n  #=&gt; [1, 2, 3] \n</code></pre>\n\n<p>The line:</p>\n\n<pre><code>select { |_,v| v.size &gt; 1 }\n</code></pre>\n\n<p>could be written:</p>\n\n<pre><code>select { |k,v| v.size &gt; 1 }\n</code></pre>\n\n<p>where <code>k</code> and <code>v</code> represent \"key\" and \"value\", but since <code>k</code> is not used in the block calculation it is common practice to replace <code>k</code> with the local variable <code>_</code> (yes, it's a variable--try it in IRB), mainly to inform the reader that the argument is not being used in the block.</p>\n\n<p>If <code>arr = [1, 1, -1, -1, 2, -2]</code>, this will return <code>[1,2]</code>. If you want it to return <code>[1,1,2]</code>, you must take a different approach. </p>\n"}], "owner": {"reputation": 161, "user_id": 5503782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ba37ef3defd576719e0a8ec3350db07a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5503782/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11266, "favorite_count": 0, "accepted_answer_id": 33905895, "answer_count": 4, "score": 6, "last_activity_date": 1448428201, "creation_date": 1448404812, "question_id": 33905245, "link": "https://stackoverflow.com/questions/33905245/comparing-two-items-in-array-with-ruby", "title": "Comparing two items in array with Ruby", "body": "<p>I'm having trouble with situations in which I need to compare two elements in an array using methods.  I find the logic quite simple just using a nested loop but this probably isn't good use of Ruby. </p>\n\n<p>For ex. Determine if array has any pair of 2 numbers that equal 0:</p>\n\n<pre><code>def pairs(array)\n  i = 0\n  while i &lt; array.length\n    y = i + 1\n    while y &lt; array.length\n      if array[i] + array[y] == 0\n        return true\n      end\n      y += 1\n    end\n    i += 1\n  end\n  return false\nend\n</code></pre>\n\n<p>Or if i wanted to see if two things in an array are identical I would use the same logic except set: if array[i] == to array[y]...</p>\n\n<p>Can someone provide a better method to a problem like this?</p>\n"}, {"tags": ["ruby", "regex", "windows", "character-encoding", "escaping"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1448408593, "post_id": 33905127, "comment_id": 55574558, "body": "Why not just rename the file to be executed?"}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1448462772, "post_id": 33905127, "comment_id": 55599879, "body": "@Aetherus that is not really an option, as this is software that we have written that is installed on another users computer.  We install into a directory to which they have an environment variable set.  This directory is the one which has the special characters in it, so we really have no control over what it is named."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1448628382, "post_id": 33905127, "comment_id": 55673043, "body": "@RansomBriggs: Did you try <a href=\"http://ideone.com/qReAs0\" rel=\"nofollow noreferrer\"><code>s.gsub(&#47;([^\\p{L}0-9_.,:\\&#47;@\\n-])&#47;, &quot;\\\\\\\\\\\\1&quot;)</code></a>? Well, if you can modify that method, or if you can create your custom version, of course."}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1448648269, "post_id": 33905127, "comment_id": 55683204, "body": "@Mariano I want to escape things so they are safe to pass down as part of a shell command string. The regex from shellwords works by escaping all characters except known safe ones.  The problem is that the list of known safe does not include special characters."}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448648336, "post_id": 33905127, "comment_id": 55683241, "body": "@stribizhev I will check out your regex next time I am at a computer (on holiday right now)"}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1448902883, "post_id": 33905127, "comment_id": 55763500, "body": "@Mariano - I wanted to escape all characters which you should not pass down to a shell command, and in the process leaving non-ascii letters unescaped."}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448903024, "post_id": 33905127, "comment_id": 55763582, "body": "@stribizhev The regex from your comment is exactly what I was looking for.  If you form that into an answer, and leave a note that \\p{L} maps to the Unicode character\u2019s General Category /\\p{L}/ - &#39;Letter&#39;, I will accept the answer and award the bounty to you."}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448903106, "post_id": 33905127, "comment_id": 55763641, "body": "@stribizhev - In your answer could you also replace 0-9 with the character class for number as well?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448903878, "post_id": 33905127, "comment_id": 55764104, "body": "Just got back home, and though my wife starts grumbling, I am adding an answer :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1448904356, "post_id": 33905127, "comment_id": 55764417, "body": "Added, please check. I will add more details if necessary once I have more time."}, {"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1448911480, "post_id": 33905127, "comment_id": 55768453, "body": "@Mariano I just accepted another answer, so update yours only if you desire to."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1448916444, "post_id": 33905127, "comment_id": 55771300, "body": "@RansomBriggs I posted the alternative to stribizhev&#39;s answer, to only escape shell metacharacters and unbalanced quotes."}], "answers": [{"comments": [{"owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "edited": false, "score": 0, "creation_date": 1448896671, "post_id": 33967863, "comment_id": 55759405, "body": "What I need is the opposite, I need to be able to escape untrusted user input so that I can pass it down to the shell.  I need it to work exactly like <a href=\"http://ruby-doc.org/stdlib-2.1.7/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape\" rel=\"nofollow noreferrer\">shellescape</a> and escape the problematic shell characters.  The reason I cannot use shellwords is that it escapes multibyte characters."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "edited": false, "score": 0, "creation_date": 1448916050, "post_id": 33967863, "comment_id": 55771081, "body": "@RansomBriggs I was under the impression you only wanted to escape multibyte chars, I&#39;ve updated the answer to deal with shell metacharacters, considering a special case for quotes, where only unbalanced quotes should be escaped."}], "tags": [], "owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "is_accepted": false, "score": 1, "last_activity_date": 1448915819, "last_edit_date": 1592644375, "creation_date": 1448686785, "answer_id": 33967863, "question_id": 33905127, "link": "https://stackoverflow.com/questions/33905127/how-can-i-make-ruby-shellwords-shellescape-work-with-multibyte-characters/33967863#33967863", "title": "How can I make ruby ShellWords.shellescape work with multibyte characters?", "body": "<h2>TL;DR</h2>\n<p><strong>Escaped characters</strong></p>\n<p><img src=\"https://i.stack.imgur.com/tu6iQ.png\" alt=\"Metacharacters\" /></p>\n<hr />\n<p><strong>Code</strong></p>\n<pre class=\"lang-ruby prettyprint-override\"><code>String.class_eval do\n    def escapeshell()\n        # Escape shell special characters\n        self.gsub!(/[#-&amp;(-*;&lt;&gt;?\\[-^`{-~\\u00FF]/, '\\\\\\\\\\0')\n        # Escape unbalanced quotes (single and double quotes)\n        self.gsub!(/([&quot;'])(?:([^&quot;']*(?:(?!\\1)[&quot;'][^&quot;']*)*)\\1)?/) do\n            if $2.nil? \n                '\\\\' + $1\n            else\n                # and escape quotes inside (e.g. &quot;x'x&quot; or 'y&quot;y')\n                qt = $1\n                qt + $2.gsub(/[&quot;']/, '\\\\\\\\\\0') + qt\n            end\n        end\n        self\n    end\nend\n\n\n# Test it\nstr = &quot;(dir *.txt &amp; dir \\&quot;\\\\some dir\\\\S\u00e8\\u00E1\u00f1*.rb\\&quot;) | sort /R &gt;Fil\u00e9.txt 2&gt;&amp;1&quot;\nputs 'String:'\nputs str\n\nputs &quot;\\nEscaped:&quot;\nputs str.escapeshell\n</code></pre>\n<p><strong>Output</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>String:\n(dir *.txt &amp; dir &quot;\\some dir\\S\u00e8\u00e1\u00f1*.rb&quot;) | sort /R &gt;Fil\u00e9.txt 2&gt;&amp;1\n\nEscaped:\n\\(dir \\*.txt \\&amp; dir &quot;\\\\some dir\\\\S\u00e8\u00e1\u00f1\\*.rb&quot;\\) \\| sort /R \\&gt;Fil\u00e9.txt 2\\&gt;\\&amp;1\n</code></pre>\n<p><kbd><a href=\"http://ideone.com/Hb50mK\" rel=\"nofollow noreferrer\">ideone demo</a></kbd></p>\n<hr />\n<h2>Description</h2>\n<p><strong>Metacharacters</strong></p>\n<p>Considering the shell metacharacters that should be escaped:</p>\n\n<pre><code># &amp; % ; ` | * ? ~ &lt; &gt; ^ ( ) [ ] { } $ \\ \\u00FF\n</code></pre>\n<p>We can include each character in the <a href=\"http://www.regular-expressions.info/charclass.html\" rel=\"nofollow noreferrer\">character class</a>:</p>\n\n<pre><code>[#&amp;%;`|*?~&lt;&gt;^()\\[\\]{}$\\\\\\u00FF]\n</code></pre>\n<p>Which is exactly the same as:</p>\n\n<pre><code>/[#-&amp;(-*;&lt;&gt;?\\[-^`{-~\\u00FF]/\n</code></pre>\n<p>Then, we use <a href=\"http://ruby-doc.org/core-2.1.4/String.html#method-i-gsub-21\" rel=\"nofollow noreferrer\"><code>gsub!()</code></a> to prepend a backslash before any character that in the class:</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>str.gsub!(/[#-&amp;(-*;&lt;&gt;?\\[-^`{-~\\u00FF]/, '\\\\\\\\\\0')\n</code></pre>\n<br>\n<p><strong>Quotes</strong></p>\n<p>Only unbalanced quotes need to be escaped. This is important to preserve the command's arguments. With the following expression we match balanced quotes:</p>\n\n<pre><code>/([&quot;'])[^&quot;']*(?:(?!\\1)[&quot;'][^&quot;']*)*)\\1/\n</code></pre>\n<p>As well as unbalanced, making the last part optional</p>\n\n<pre><code>/([&quot;'])(?:[^&quot;']*(?:(?!\\1)[&quot;'][^&quot;']*)*)\\1)?/\n</code></pre>\n<p>But we also need to escape quotes inside another pair. That is single quotes inside double quotes and vice-versa. So we'll nest another <code>gsub()</code> to replace in the text matched inside quotes (<code>$2</code>):</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>str.gsub!(/([&quot;'])(?:([^&quot;']*(?:(?!\\1)[&quot;'][^&quot;']*)*)\\1)?/) do\n    if $2.nil? \n        '\\\\' + $1\n    else\n        qt = $1\n        qt + $2.gsub(/[&quot;']/, '\\\\\\\\\\0') + qt\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1448904199, "creation_date": 1448904199, "answer_id": 34004340, "question_id": 33905127, "link": "https://stackoverflow.com/questions/33905127/how-can-i-make-ruby-shellwords-shellescape-work-with-multibyte-characters/34004340#34004340", "title": "How can I make ruby ShellWords.shellescape work with multibyte characters?", "body": "<p>The regex <code>/([^A-Za-z0-9_\\-.,:\\/@\\n])/</code> only handles ASCII letters and digits, not all Unicode letters. The <code>[^...]</code> is a <a href=\"http://www.regular-expressions.info/charclass.html#negated\" rel=\"nofollow\"><strong>negated character class</strong></a> that matches all characters <em>other than those specified in the class</em>. So, all <code>\u042f</code>, <code>\u0426</code>, <code>\u0104</code> are removed with that expression as they are not matched with <code>[A-Za-z]</code>.</p>\n\n<p>What you need is to add <em>shorthand classes to exclude all Unicode letters and digits</em>. To make it even more safe, we can add a diacritic class so as to keep diacritics, too:</p>\n\n<pre><code>str.gsub(/([^\\p{L}\\p{M}\\p{N}_.,:\\/@\\n-])/, \"\\\\\\\\\\\\1\")\n</code></pre>\n\n<p>Here, <code>\\p{L}</code> matches all Unicode base letters, <code>\\p{M}</code> matches all diacritics, and <code>\\p{N}</code> matches any Unicode digits.</p>\n\n<p>Note that a hyphen does not need to be escaped when placed at the start/end of the character class (or after a valid range or a shorthand character class).</p>\n"}], "owner": {"reputation": 2917, "user_id": 255982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6cfe5f53af2ba7e6efd26257daa6bad?s=128&d=identicon&r=PG", "display_name": "Ransom Briggs", "link": "https://stackoverflow.com/users/255982/ransom-briggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 34004340, "answer_count": 2, "score": 6, "last_activity_date": 1448915819, "creation_date": 1448404261, "question_id": 33905127, "link": "https://stackoverflow.com/questions/33905127/how-can-i-make-ruby-shellwords-shellescape-work-with-multibyte-characters", "title": "How can I make ruby ShellWords.shellescape work with multibyte characters?", "body": "<p>I have been trying to call exec with an argument that contains multibyte characters that come from an environment variable on Windows, but have not found a solution that works yet.  Here is what I have been able to debug so far.  </p>\n\n<p>For simplicity's sake assume that I have a directory called \"Se\u00e1n\" that I am trying to use as an argument to exec.  If I just call </p>\n\n<pre><code>exec 'script', \"Se\\u00E1n\".encode(\"IBM437\") \n</code></pre>\n\n<p>The script that is exec'ed cannot find the file because the arg gets tweaked in such a way that the accented character is lost.  If I do the following it works, but this is bad practice as the arg should be escaped before it goes to the shell.</p>\n\n<pre><code>exec \"script #{\"Se\\u00E1n\".encode(\"IBM437\")}\"\n</code></pre>\n\n<p>So my thought was that I would just use <a href=\"http://ruby-doc.org/stdlib-2.1.7/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape\">shellescape</a> to protect the use of exec.</p>\n\n<pre><code>require 'shellwords'\nexec \"script #{\"Se\\u00E1n\".encode(\"IBM437\").shellescape}\"\n</code></pre>\n\n<p>But the problem is that it escapes the special character so that it looks like the following - \"Se\\\u00e1n\".  I figured out where this is happening and it is coming from this <a href=\"https://github.com/ruby/ruby/blob/v2_1_7/lib/shellwords.rb#L134\">regular expression</a>.</p>\n\n<pre><code>str.gsub!(/([^A-Za-z0-9_\\-.,:\\/@\\n])/, \"\\\\\\\\\\\\1\")\n</code></pre>\n\n<p>Which at first glance seems to escape characters not in a known good set of shell characters.  Unfortunately this set does not include special characters and so I run into problems.</p>\n\n<p>What I am looking for is a regex that would do shell escaping that does not mess up special characters so that I can escape these args before passing them to exec. </p>\n"}, {"tags": ["ruby", "hash", "iteration"], "comments": [{"owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "edited": false, "score": 0, "creation_date": 1448405391, "post_id": 33905056, "comment_id": 55573345, "body": "try <code>Hash#each</code>.  <code>hash.each do |k,v| ...  end</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1448405698, "post_id": 33905056, "comment_id": 55573480, "body": "The <i>proper</i> solution is of course <code>hash.min_by(&amp;:last).first</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448432680, "post_id": 33905056, "comment_id": 55581721, "body": "What&#39;s that? You want the keys for the 3 smallest values? With v2.2, no problem: <code>h.min_by(3,&amp;:first).map(&amp;:first)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448443195, "post_id": 33905289, "comment_id": 55586989, "body": "Karen, if a key-value pair of the hash is expressed <code>[k,v]</code>, with this approach you will be comparing <code>v</code> with <code>min_value</code>, and updating both <code>min_value</code> and <code>key_for_min_value</code> when <code>v &lt; min_value</code>. But how do you get started? When you examine the first key-value pair, <code>min_value</code> has not been defined. There are two ways to handle that. The first is to initialize <code>min_value</code> to a very large number, the best choice being <code>Float:INFINITY</code>. The second way is initialize <code>min_value</code> to (say) <code>nil</code> and then write <code>if min_val == nil...else ...end</code>"}], "tags": [], "owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "is_accepted": false, "score": 5, "last_activity_date": 1448404942, "creation_date": 1448404942, "answer_id": 33905289, "question_id": 33905056, "link": "https://stackoverflow.com/questions/33905056/ruby-iterate-through-hash-and-compare-value-pairs/33905289#33905289", "title": "Ruby iterate through hash and compare value pairs", "body": "<p>Track <code>min_value</code> and <code>key_for_min_value</code>. Iterate through the hash, and any time the current <code>value</code> is lower than <code>min_value</code>, update both of these vars. At the end of the loop, return <code>key_for_min_value</code>.</p>\n\n<p>I didn't include sample code because, hey, this is homework. :) Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4440819, "user_type": "registered", "profile_image": "https://graph.facebook.com/664624339/picture?type=large", "display_name": "Efe Inan", "link": "https://stackoverflow.com/users/4440819/efe-inan"}, "is_accepted": true, "score": 1, "last_activity_date": 1448457188, "creation_date": 1448457188, "answer_id": 33917439, "question_id": 33905056, "link": "https://stackoverflow.com/questions/33905056/ruby-iterate-through-hash-and-compare-value-pairs/33917439#33917439", "title": "Ruby iterate through hash and compare value pairs", "body": "<p>One way to do it is transforming our hash into an array;</p>\n\n<pre><code>def key_for_min_value(name_hash)\n  # Convert hash to array\n  name_a = name_hash.to_a\n\n  # Default key value\n  d_value= 1000\n  d_key= 0\n\n  # Iterate new array \n  name_a.each do |i|\n      # If current value is lower than default, change value&amp;key \n      if i[1] &lt; d_value\n        d_value = i[1]\n        d_key = i[0]\n      end\n\n   end\n\n  return d_key\n\nend  \n</code></pre>\n\n<p>You might need to change d_value to something higher or find something more creative :)</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1448474911, "creation_date": 1448474911, "answer_id": 33923558, "question_id": 33905056, "link": "https://stackoverflow.com/questions/33905056/ruby-iterate-through-hash-and-compare-value-pairs/33923558#33923558", "title": "Ruby iterate through hash and compare value pairs", "body": "<p>We can use <code>Enumerable#reduce</code> method to compare entries and pick the smallest value. Each hash entry gets passed in as an array with 2 elements in reduce method, hence, I am using <code>Array#first</code> and <code>Array#last</code> methods to access key and values.</p>\n\n<pre><code>h = {\"a\" =&gt; 1, \"b\" =&gt; 2, \"c\" =&gt; 0}\np h.reduce{ |f, s| f.last &gt; s.last ? s : f }.first\n#=&gt; \"c\"\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2261, "favorite_count": 0, "accepted_answer_id": 33917439, "answer_count": 3, "score": 0, "last_activity_date": 1448474911, "creation_date": 1448404006, "last_edit_date": 1448430296, "question_id": 33905056, "link": "https://stackoverflow.com/questions/33905056/ruby-iterate-through-hash-and-compare-value-pairs", "title": "Ruby iterate through hash and compare value pairs", "body": "<p>My Ruby assignment is to iterate through a hash and return the key associated with the lowest value, <em>without</em> using any of the following methods:</p>\n\n<pre><code>#keys #values #min #sort #min_by\n</code></pre>\n\n<p>I don't understand how to iterate through the hash and store each pair as it comes through, compare it to the last pair that came through, and return the lowest key.  This is my code to show you my thought process, but it of course does not work.  Any thoughts on how to do this? Thanks!</p>\n\n<pre><code>def key_for_min_value(name_hash)\n  index = 0 \n  lowest_hash = {}\n\n  name_hash.collect do |key, value|\n    if value[index] &lt; value[index + 1]\n      lowest = value\n      index = index + 1 \n      key_for_min_value[value]\n\n      return lowest\n    end\n  end\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "oop", "tdd"], "comments": [{"owner": {"reputation": 8545, "user_id": 2856441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca44efe87577e6c75bc508b38131072f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Kennedy", "link": "https://stackoverflow.com/users/2856441/joe-kennedy"}, "edited": false, "score": 1, "creation_date": 1448404626, "post_id": 33905022, "comment_id": 55573023, "body": "Could you add your code to the question in text form rather than adding the image? It makes it much easier for us to play around with your code and reproduce your issue."}, {"owner": {"reputation": 1, "user_id": 5601727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8e39c8f6a986dd0671933055f03edd?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Smith", "link": "https://stackoverflow.com/users/5601727/nick-smith"}, "reply_to_user": {"reputation": 8545, "user_id": 2856441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca44efe87577e6c75bc508b38131072f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Kennedy", "link": "https://stackoverflow.com/users/2856441/joe-kennedy"}, "edited": false, "score": 0, "creation_date": 1448405778, "post_id": 33905022, "comment_id": 55573513, "body": "posted code instead of pics. Thanks for the help."}, {"owner": {"reputation": 8545, "user_id": 2856441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca44efe87577e6c75bc508b38131072f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Kennedy", "link": "https://stackoverflow.com/users/2856441/joe-kennedy"}, "edited": false, "score": 0, "creation_date": 1448405859, "post_id": 33905022, "comment_id": 55573553, "body": "Make sure you format it too, use the <code>{}</code> button in the text editor"}, {"owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "edited": false, "score": 0, "creation_date": 1448408264, "post_id": 33905022, "comment_id": 55574424, "body": "Add <code>p @customer.errors</code> in the test method before the <code>assert</code> line to see why it wasn&#39;t validated."}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1448447343, "post_id": 33905022, "comment_id": 55589663, "body": "<code>@customer.errors</code> won&#39;t be populated before <code>valid?</code> is called. Call <code>@customer.valid?</code>, then print the <code>errors</code> object, and you&#39;ll see what it&#39;s complaining about."}], "owner": {"reputation": 1, "user_id": 5601727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8e39c8f6a986dd0671933055f03edd?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Smith", "link": "https://stackoverflow.com/users/5601727/nick-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448410744, "creation_date": 1448403865, "last_edit_date": 1448410744, "question_id": 33905022, "link": "https://stackoverflow.com/questions/33905022/rails-modeling-and-validating", "title": "Rails Modeling and Validating", "body": "<p>I keep getting this error. \n1) Failure:\nCustomerTest#test_customer_should_be_valid [C:/Users/Nick/sites/mech_crm/test/models/customer_test.rb:13]:\nFailed assertion, no message given.</p>\n\n<p>Previously, I had an error saying that my sales_person_id was not present. To try and fix that I changed @sales_person = SalesPerson.new to SalesPerson.create.</p>\n\n<p>This fixed the sales_person_id error, but for the life of me, I cannot figure why I am getting the customer_should_be_valid. </p>\n\n<p>If anyone has a bone they could throw me, I'd appreciate it and as I get better at this, I will try to return the favor in the future. </p>\n\n<p>Thank you so much. </p>\n\n<p><strong>from customer_test.rb</strong></p>\n\n<p>require 'test_helper'</p>\n\n<p>class CustomerTest &lt; ActiveSupport::TestCase</p>\n\n<pre><code>def setup \n\n    @sales_person = SalesPerson.create(sales_person_name: \"nick\", sales_person_email: \"nick@example.com\", sales_person_division: \"HVAC\", sales_person_location: \"Nebraska\", sales_person_phone_number: \"402-515-6757\")\n\n    @customer = @sales_person.customers.build(customer_name: \"S.T.A.R. Labs\", customer_address: \" 123 Allen Drive\", customer_city: \"Cental City\", customer_state:\"PA\", customer_vertical_market: \"Scientific Experiments\", customer_phone_number: \"515 555 4543\", customer_description: \"Performs Scientific experiments in the aid of super heroes.\")\nend\n\ntest \"customer should be valid\" do \n    assert @customer.valid?\nend\n\ntest \"sales person id should be present\" do\n    @customer.sales_person_id = nil\n    assert_not @customer.valid?\nend\n\ntest \"customer name should be present\" do \n    @customer.customer_name = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer name length should not be too short\" do\n    @customer.customer_name = \"aaaa\"\n    assert_not @customer.valid?\nend\n\ntest \"customer name length should not be too long\" do\n    @customer.customer_name = \"a\" * 151\n    assert_not @customer.valid?\nend\n\n\ntest \"customer address should not be too short\" do\n    @customer.customer_address = \"aaaa\"\n    assert_not @customer.valid?\n\nend\n\ntest \"customer address should be present\" do \n    @customer.customer_address = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer city should not be too short\" do\n    @customer.customer_city = \"aaaa\"\n    assert_not @customer.valid?\nend\n\ntest \"customer city should be present\" do\n    @customer.customer_city = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer state should not be too short\" do\n    @customer.customer_state = \"a\"\n    assert_not @customer.valid?\nend\n\ntest \"customer state should be present\" do\n    @customer.customer_state = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer vertical market should not be too short\" do\n    @customer.customer_vertical_market = \"aaaa\" \n    assert_not @customer.valid?\nend\n\ntest \"customer vertical market should be present\" do\n    @customer.customer_vertical_market = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer phone number should not be too short\" do\n    @customer.customer_phone_number = \"aaaaaaaa\"\n    assert_not @customer.valid?\nend\n\ntest \"customer phone number should be present\" do \n    @customer.customer_phone_number = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer description should not be too short\" do\n    @customer.customer_description = \"a\" * 25\n    assert_not @customer.valid?\nend\n\ntest \"customer description should be present\" do\n    @customer.customer_description = \" \"\n    assert_not @customer.valid?\nend\n\ntest \"customer name should be unique \" do\n    dup_customer = @customer.dup\n    dup_customer.customer_name = @customer.customer_name.upcase\n    @customer.save\n    assert_not dup_customer.valid?\nend\n</code></pre>\n\n<p>end</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n    belongs_to :sales_person\nvalidates :sales_person_id, presence: true\nvalidates :customer_name, presence: true, length: {minimum: 5, maximum: 150}, uniqueness: {case_sensitive: false}\nvalidates :customer_address, presence: true, length: {minimum: 5}\nvalidates :customer_city, presence: true, length: {minimum: 5}\nvalidates :customer_state, presence: true, length: {minimum: 2}\nvalidates :customer_vertical_market, presence: true, length: {minimum: 5}\nvalidates :customer_phone_number, presence: true, length: {minimum: 9}\nvalidates :customer_description, presence: true, length: {minimum: 26}\n</code></pre>\n\n<p>This is what Bash displays when I add p @customers.errors:</p>\n\n<h1>Running:</h1>\n\n<p>............#, @messages={}>\nF......................</p>\n\n<p>Finished in 0.203430s, 172.0492 runs/s, 211.3747 assertions/s.</p>\n\n<p>1) Failure:\nCustomerTest#test_customer_should_be_valid [C:/Users/Nick/sites/mech_crm/test/models/customer_test.rb:14]:\nFailed assertion, no message given.</p>\n\n<p>35 runs, 43 assertions, 1 failures, 0 errors, 0 skips</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "comments": [{"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448403803, "post_id": 33904947, "comment_id": 55572631, "body": "Can you paste your code in routes related to the endpoint /WebService/AuthenticateLogin ?"}, {"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "reply_to_user": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448403898, "post_id": 33904947, "comment_id": 55572676, "body": "Well if I understood your question correctly, this Web Service is completely external and has nothing to do with my rails application, therefore I have nothing in my routes file to reflect that."}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448404285, "post_id": 33904947, "comment_id": 55572853, "body": "Then you are just searching for something wrong. All the resources are talking about building a JSON authentication system with Devise in Rails instead of using an external auth system."}, {"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "reply_to_user": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448405193, "post_id": 33904947, "comment_id": 55573274, "body": "Thank you @Yang. Is there standard way I should go about this? Or does Devise/other User Authentication tools not generally cover this?"}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448405968, "post_id": 33904947, "comment_id": 55573589, "body": "If all your authentication is on an external API, you will just have to fetch the identifier of user (probably id or token) from the response. Create or update the user object in database and store the id or token in session to identify current user. That is everything I can come up with if you don&#39;t have any special requirements"}, {"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "reply_to_user": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1448406483, "post_id": 33904947, "comment_id": 55573781, "body": "Thank you. I think I am just going to follow <a href=\"http://railscasts.com/episodes/250-authentication-from-scratch\" rel=\"nofollow noreferrer\">railscasts.com/episodes/250-authentication-from-scratch</a> and try to use the rest-client gem in order to use the external API."}], "owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448403675, "creation_date": 1448403548, "last_edit_date": 1495541242, "question_id": 33904947, "link": "https://stackoverflow.com/questions/33904947/api-authentication-with-devise", "title": "API Authentication with Devise", "body": "<p>I am basically trying to implement a User authentication system that POSTs information to an API/Web Service to cross-reference credentials, therefore rejecting them or allowing them to login.</p>\n\n<p>I am not sure if I understand how this whole system works exactly, but I have been researching a lot on Authentication using Devise and APIs, and do not understand how none of the examples refer to the actual URI of the API at all.</p>\n\n<p>For example, when I first began this process, I made sure to be able to connect to the web service through cURL:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -d '{\"RuntimeEnvironment\":1,\"Email\":\"someone@example.com\",\"Password\":\"Pa$$worD\"}' -X POST http://blahblah/WebService/AuthenticateLogin\n</code></pre>\n\n<p>However in every single <a href=\"https://hackhands.com/sign-users-ajax-using-devise-rails/\" rel=\"nofollow noreferrer\">blog post</a> / <a href=\"http://blog.andrewray.me/how-to-set-up-devise-ajax-authentication-with-rails-4-0/\" rel=\"nofollow noreferrer\">tutorial</a> / <a href=\"http://natashatherobot.com/devise-sign-up-ajax-rails/\" rel=\"nofollow noreferrer\">guide</a> / <a href=\"https://stackoverflow.com/questions/14322062/api-authentication-using-devise-ruby-on-rails\">StackOverflow question</a> I have been on, literally none of them specifically refer to the <code>http://blahblah/WebService/AuthenticateLogin</code> as I did in my cURL request.</p>\n\n<ul>\n<li>Am I searching for the wrong thing? </li>\n<li>Or is it actually there and I'm just not understanding? </li>\n<li>Also how do tokens factor into this scenario?</li>\n<li>The web service I am using does not require/return a token.</li>\n</ul>\n"}, {"tags": ["ruby", "gem", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5423159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d79ba6a70c685d21969c14fed586aab?s=128&d=identicon&r=PG&f=1", "display_name": "Kanery", "link": "https://stackoverflow.com/users/5423159/kanery"}, "edited": false, "score": 0, "creation_date": 1448455249, "post_id": 33906143, "comment_id": 55594546, "body": "Hi, thanks for the reply, I&#39;m still a little unclear on a few aspects.   I&#39;ve creted my_gem. Do I alter the Gemfile of my_gem or the Gemfile of the gem that I would like to alter?"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 61, "user_id": 5423159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d79ba6a70c685d21969c14fed586aab?s=128&d=identicon&r=PG&f=1", "display_name": "Kanery", "link": "https://stackoverflow.com/users/5423159/kanery"}, "edited": false, "score": 0, "creation_date": 1448561291, "post_id": 33906143, "comment_id": 55648610, "body": "You alter the Gemfile of the place where you <b>include</b> <code>my_gem</code>, not the Gemfile in the <code>my_gem</code> directory."}], "tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": true, "score": 4, "last_activity_date": 1448409350, "creation_date": 1448409350, "answer_id": 33906143, "question_id": 33904908, "link": "https://stackoverflow.com/questions/33904908/edit-ruby-gem-locally-and-execute-gem/33906143#33906143", "title": "Edit Ruby Gem locally and execute gem?", "body": "<p>Yes! You can include the gem in a local project and point the Gemfile to your local directory:</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'my_local_gem', path: '/absolute/path/to/your/gem'\n</code></pre>\n\n<p>Then edit the gem, run your local program and see the changes.</p>\n\n<p>Additionally, you don't always have to clone a whole gem, you can install it via rubygems and use <code>bundle open &lt;gem_name&gt;</code>  to open the gem's contents in your supplied editor. </p>\n\n<p><a href=\"http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/\" rel=\"noreferrer\">I have written a post describing just that and more here</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 5423159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d79ba6a70c685d21969c14fed586aab?s=128&d=identicon&r=PG&f=1", "display_name": "Kanery", "link": "https://stackoverflow.com/users/5423159/kanery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1330, "favorite_count": 0, "accepted_answer_id": 33906143, "answer_count": 1, "score": 2, "last_activity_date": 1448409350, "creation_date": 1448403362, "question_id": 33904908, "link": "https://stackoverflow.com/questions/33904908/edit-ruby-gem-locally-and-execute-gem", "title": "Edit Ruby Gem locally and execute gem?", "body": "<p>For a project I'm working on, I have to do some work on an existing Ruby Gem. I haven't got much previous experience with Ruby and am struggling with a few aspects.</p>\n\n<p>I have the repository cloned locally. I need to edit the current files in the /lib/ directory, which I can do. Is it possible for me to compile the edited files into a Gem and run this Gem? Any help would be really appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "edited": false, "score": 0, "creation_date": 1448402529, "post_id": 33904634, "comment_id": 55572023, "body": "hell yeah! that&#39; it. thank you very much man!  so, in this kind of cases aways interpolate."}], "tags": [], "owner": {"reputation": 76, "user_id": 3250904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd9cb2481aecc03823e73efe13544cd?s=128&d=identicon&r=PG", "display_name": "teixeir3", "link": "https://stackoverflow.com/users/3250904/teixeir3"}, "is_accepted": true, "score": 0, "last_activity_date": 1448402238, "creation_date": 1448402238, "answer_id": 33904634, "question_id": 33904537, "link": "https://stackoverflow.com/questions/33904537/rails-add-dynamic-attribute-on-data-content-helper-link/33904634#33904634", "title": "Rails add dynamic attribute on data content helper link", "body": "<p>You're string interpolating the current user object, which will call .to_s on the user object, which probably isn't what you want. </p>\n\n<p>If links is nested under each user, you typically follow the 'users/:id/links' so you need to interpolate the id instead of the user object like so:   </p>\n\n<pre><code>&lt;%= link_to \"Profile\", edit_user_path(current_user), :class =&gt;\"ttooltip\",   :data =&gt; {:url =&gt; \"/users/#{current_user.id}/links\"}    %&gt;\n</code></pre>\n\n<p>(Where current_user is a helper method that returns the current_user object.)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33904634, "answer_count": 1, "score": 0, "last_activity_date": 1448402238, "creation_date": 1448401837, "question_id": 33904537, "link": "https://stackoverflow.com/questions/33904537/rails-add-dynamic-attribute-on-data-content-helper-link", "title": "Rails add dynamic attribute on data content helper link", "body": "<p>i need to get a ajax tooltip on a dynamic link, so the logic seems to concatenate it. but, still not work, so, someone know a way to do this?</p>\n\n<p>thank's</p>\n\n<pre><code>&lt;%= link_to \"Profile\", edit_user_path(current_user), :class =&gt;\"ttooltip\",   :data =&gt; {:url =&gt; \"/users/#{@current_user}/links\"}    %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5601727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8e39c8f6a986dd0671933055f03edd?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Smith", "link": "https://stackoverflow.com/users/5601727/nick-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1448404571, "creation_date": 1448404571, "answer_id": 33905193, "question_id": 33904363, "link": "https://stackoverflow.com/questions/33904363/rails-4-an-error-occurred-while-installing-json-1-8-2/33905193#33905193", "title": "rails 4 An error occurred while installing json (1.8.2)", "body": "<p>Are you just getting your workspace setup?</p>\n\n<p>I had the same problems before when I was getting started.</p>\n\n<p>I went to railsinstaller.org and development environment has been working well since then.</p>\n\n<p>Hope this helps. </p>\n"}, {"tags": [], "owner": {"reputation": 3431, "user_id": 708807, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42e591ae5892aec3d16fac571d48cd45?s=128&d=identicon&r=PG", "display_name": "ipatch", "link": "https://stackoverflow.com/users/708807/ipatch"}, "is_accepted": false, "score": 0, "last_activity_date": 1448410649, "creation_date": 1448410649, "answer_id": 33906359, "question_id": 33904363, "link": "https://stackoverflow.com/questions/33904363/rails-4-an-error-occurred-while-installing-json-1-8-2/33906359#33906359", "title": "rails 4 An error occurred while installing json (1.8.2)", "body": "<p>If I had to take a guess at this issue, I would say you opened a new shell since the <code>AM</code> and your new shell isn't configured to use the version of Ruby you installed with RVM.</p>\n\n<p>I would take a look at this, <a href=\"https://rvm.io/rvm/basics\" rel=\"nofollow\">https://rvm.io/rvm/basics</a></p>\n\n<p>And basically make sure your using the version of Ruby that you installed with RVM, and that your shell is configured to use it.</p>\n\n<p>And the latest version of the JSON gem appears to be <code>1.8.3</code> so you might want to try that version.  <a href=\"https://rubygems.org/gems/json\" rel=\"nofollow\">https://rubygems.org/gems/json</a></p>\n\n<p>I hope my comments help you out.</p>\n"}], "owner": {"reputation": 417, "user_id": 2275535, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/oDwVA.jpg?s=128&g=1", "display_name": "DhatchXIX", "link": "https://stackoverflow.com/users/2275535/dhatchxix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1448410649, "creation_date": 1448401227, "question_id": 33904363, "link": "https://stackoverflow.com/questions/33904363/rails-4-an-error-occurred-while-installing-json-1-8-2", "title": "rails 4 An error occurred while installing json (1.8.2)", "body": "<p>I was using the rails server this Am. Now i try to run my server on mac and I get:</p>\n\n<pre><code>Could not find json-1.8.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>So i run bundle install and I get...</p>\n\n<pre><code>Fetching source index from https://rubygems.org/\nUsing rake (10.4.2)\nUsing CFPropertyList (2.3.1)\nUsing i18n (0.7.0)\n\nErrno::EACCES: Permission denied - /Users/danielhatcher/.rvm/gems/ruby-2.0.0-p247/gems/json-1.8.2/tests/test_json.rb\nAn error occurred while installing json (1.8.2), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.2'` succeeds before bundling.\n</code></pre>\n\n<p>so i try running gem install json -v '1.8.2' and get this...</p>\n\n<pre><code>ERROR:  Could not find a valid gem 'json' (= 1.8.2) in any repository\n</code></pre>\n\n<p>any help would be greatly appreciated. I can't find anything out on the net about this.</p>\n\n<p>ruby 2.0.0p247</p>\n"}, {"tags": ["ruby", "rspec", "sidekiq"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448401184, "post_id": 33904099, "comment_id": 55571307, "body": "Add them to the load path? Usually done in the <code>spec_helper.rb</code> or <code>rails_helper.rb</code>."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1448404010, "post_id": 33904099, "comment_id": 55572717, "body": "Am I crazy or are there like <i>no</i> docs on load path syntax?"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1448405395, "post_id": 33904099, "comment_id": 55573347, "body": "How about this in the <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow noreferrer\">manual</a>? I did not try it, but I am testing workers anyway :-P"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1448405549, "post_id": 33904099, "comment_id": 55573409, "body": "The load path is the Ruby one. You can modify it on the <code>$:</code> global variable. Alternatively, you can just <code>require</code> each of your worker file with a relative or full path to their files."}], "answers": [{"tags": [], "owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "is_accepted": true, "score": 1, "last_activity_date": 1448411161, "last_edit_date": 1448411161, "creation_date": 1448406435, "answer_id": 33905589, "question_id": 33904099, "link": "https://stackoverflow.com/questions/33904099/rspec-requiring-spec-workers/33905589#33905589", "title": "Rspec: requiring spec/workers", "body": "<p>I see a few alternatives for your situation:</p>\n\n<ul>\n<li>Rspec loading:\n\n<ol>\n<li>Make sure your test files in <code>spec/worker</code> follow the pattern setup for Rspec (e.g. <code>*.rb</code> or <code>*_spec.rb</code>).</li>\n<li>Require the worker files in the <code>spec_helper.rb</code>.</li>\n</ol></li>\n<li>Manual loading: Require the <code>spec/worker</code> and <code>app/worker</code> files in your <code>spec_helper.rb</code> with a Ruby-defined glob.</li>\n<li>Sidekiq helper gem: Add the <code>rspec-sidekiq</code> gem to your project, as <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow\">explained at Sidekiq's</a>.</li>\n</ul>\n\n<p>To add a bulk of files to the load path, you can either:</p>\n\n<ul>\n<li>Add path strings to the <code>$:</code> global variable, early in your boot process (e.g. at the beginning of <code>spec_helper.rb</code>):</li>\n</ul>\n\n<p><code>$:.unshift(File.expand_path('../app/workers/**/*_worker.rb', File.dirname(__FILE__))</code></p>\n\n<ul>\n<li>Use a glob to load the files without modifying the load path:</li>\n</ul>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Dir[File.expand_path('../app/workers/**/*_worker.rb', File.dirname(__FILE__))].each do |file|\n  require file\nend\n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 33905589, "answer_count": 1, "score": 0, "last_activity_date": 1448411161, "creation_date": 1448400241, "question_id": 33904099, "link": "https://stackoverflow.com/questions/33904099/rspec-requiring-spec-workers", "title": "Rspec: requiring spec/workers", "body": "<p>I've got a bunch of Sidekiq workers in app/workers, and some matching specs in spec/workers. How can I add both to my <code>rspec</code> runs? As in stands none are included when I hit up <code>rspec</code> on the Terminal.</p>\n"}, {"tags": ["ruby", "binary", "uuid", "base58"], "comments": [{"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1448402318, "post_id": 33903858, "comment_id": 55571925, "body": "This gem may help: <a href=\"https://github.com/dougal/base58\" rel=\"nofollow noreferrer\">github.com/dougal/base58</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26092, "user_id": 824377, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e600bd229c588891a7616f303e30efd9?s=128&d=identicon&r=PG", "display_name": "AJcodez", "link": "https://stackoverflow.com/users/824377/ajcodez"}, "edited": false, "score": 0, "creation_date": 1448407496, "post_id": 33904790, "comment_id": 55574127, "body": "Yes had a feeling was over-thinking it."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 1, "last_activity_date": 1448405277, "last_edit_date": 1448405277, "creation_date": 1448402911, "answer_id": 33904790, "question_id": 33903858, "link": "https://stackoverflow.com/questions/33903858/how-to-unpack-7-bits-at-a-time-in-ruby/33904790#33904790", "title": "How to unpack 7-bits at a time in ruby?", "body": "<pre><code>require 'base58'\nuuid =\"123e4567-e89b-12d3-a456-426655440000\"\nBase58.encode(uuid.delete('-').to_i(16))\n=&gt; \"3fEgj34VWmVufdDD1fE1Su\"\n</code></pre>\n\n<p>and back again</p>\n\n<pre><code>Base58.decode(\"3fEgj34VWmVufdDD1fE1Su\").to_s(16)\n =&gt; \"123e4567e89b12d3a456426655440000\"\n</code></pre>\n\n<p>A handy pattern to reconstruct the uuid format from a template</p>\n\n<pre><code>template = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\nsrc = \"123e4567e89b12d3a456426655440000\".each_char\ntemplate.each_char.reduce(''){|acc, e| acc += e=='-' ? e : src.next}  \n =&gt; \"123e4567-e89b-12d3-a456-426655440000\"      \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1448434744, "creation_date": 1448434744, "answer_id": 33910280, "question_id": 33903858, "link": "https://stackoverflow.com/questions/33903858/how-to-unpack-7-bits-at-a-time-in-ruby/33910280#33910280", "title": "How to unpack 7-bits at a time in ruby?", "body": "<p>John La Rooy's answer is great, but I just wanted to point out how simple the Base58 algorithm is because I think it's neat. (Loosely based on the base58 gem, plus bonus original <code>int_to_uuid</code> function):</p>\n\n<pre><code>ALPHABET = \"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\".chars\nBASE = ALPHABET.size\n\ndef base58_to_int(base58_val)\n  base58_val.chars\n    .reverse_each.with_index\n    .reduce(0) do |int_val, (char, index)|\n      int_val + ALPHABET.index(char) * BASE ** index\n    end\nend\n\ndef int_to_base58(int_val)\n  ''.tap do |base58_val|\n    while int_val &gt; 0\n      int_val, mod = int_val.divmod(BASE)\n      base58_val.prepend ALPHABET[mod]\n    end\n  end\nend\n\ndef int_to_uuid(int_val)\n  base16_val = int_val.to_s(16)\n  [ 8, 4, 4, 4, 12 ].map do |n|\n    base16_val.slice!(0...n)\n  end.join('-')\nend\n\nuuid = \"123e4567-e89b-12d3-a456-426655440000\"\nint_val = uuid.delete('-').to_i(16)\nbase58_val = int_to_base58(int_val)\nint_val2 = base58_to_int(base58_val)\nuuid2 = int_to_uuid(int_val2)\n\nprintf &lt;&lt;END, uuid, int_val, base_58_val, int_val2, uuid2\nInput UUID: %s\nInput UUID as integer: %d\nInteger encoded as base 58: %s\nInteger decoded from base 58: %d\nDecoded integer as UUID: %s\nEND\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Input UUID: 123e4567-e89b-12d3-a456-426655440000\nInput UUID as integer: 24249434048109030647017182302883282944\nInteger encoded as base 58: 3fEgj34VWmVufdDD1fE1Su\nInteger decoded from base 58: 24249434048109030647017182302883282944\nDecoded integer as UUID: 123e4567-e89b-12d3-a456-426655440000\n</code></pre>\n"}], "owner": {"reputation": 26092, "user_id": 824377, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e600bd229c588891a7616f303e30efd9?s=128&d=identicon&r=PG", "display_name": "AJcodez", "link": "https://stackoverflow.com/users/824377/ajcodez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 33904790, "answer_count": 2, "score": 2, "last_activity_date": 1448434744, "creation_date": 1448399392, "question_id": 33903858, "link": "https://stackoverflow.com/questions/33903858/how-to-unpack-7-bits-at-a-time-in-ruby", "title": "How to unpack 7-bits at a time in ruby?", "body": "<p>I'm trying to format a UUIDv4 into a url friendly string. The typical format in base16 is pretty long and has dashes:</p>\n\n<pre><code>xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\n</code></pre>\n\n<p>To avoid dashes and underscores I was going to use base58 (like bitcoin does) so each character fully encode <code>sqrt(58).floor = 7 bits</code>. </p>\n\n<p>I can pack the uuid into binary with:</p>\n\n<pre><code>[ uuid.delete('-') ].pack('H*')\n</code></pre>\n\n<p>To get 8-bit unsigned integers its:</p>\n\n<pre><code>binary.unpack('C*')\n</code></pre>\n\n<p>How can i unpack every 7-bits into 8-bit unsigned integers? Is there a pattern to scan 7-bits at a time and set the high bit to 0?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 0, "creation_date": 1448396169, "post_id": 33902508, "comment_id": 55568573, "body": "How are you running the query?"}], "answers": [{"tags": [], "owner": {"reputation": 228, "user_id": 3726706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4c3sf.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3726706/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1448395489, "creation_date": 1448395489, "answer_id": 33902792, "question_id": 33902508, "link": "https://stackoverflow.com/questions/33902508/issue-with-raw-sql-in-rails/33902792#33902792", "title": "Issue with raw SQL in Rails", "body": "<p>Try <a href=\"http://guides.rubyonrails.org/active_record_querying.html#select-all\" rel=\"nofollow\">select_all</a></p>\n\n<pre><code>$ bin/rails c\n\nLoading development environment (Rails 4.2.4)\n&gt;&gt; result = ActiveRecord::Base.connection.select_all \"SELECT * FROM wingnuts\"\n   (0.4ms)  SELECT * FROM wingnuts\n=&gt; #&lt;ActiveRecord::Result:0x007fb92fbcdb18 @columns=[\"id\", \"size\"], @rows=[[1, 10], [2, 11], [3, 12]], @hash_rows=nil, @column_types={}&gt;\n&gt;&gt; result.each { |row| puts row.inspect }\n{\"id\"=&gt;1, \"size\"=&gt;10}\n{\"id\"=&gt;2, \"size\"=&gt;11}\n{\"id\"=&gt;3, \"size\"=&gt;12}\n=&gt; [{\"id\"=&gt;1, \"size\"=&gt;10}, {\"id\"=&gt;2, \"size\"=&gt;11}, {\"id\"=&gt;3, \"size\"=&gt;12}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1448395598, "creation_date": 1448395598, "answer_id": 33902818, "question_id": 33902508, "link": "https://stackoverflow.com/questions/33902508/issue-with-raw-sql-in-rails/33902818#33902818", "title": "Issue with raw SQL in Rails", "body": "<p>If you already have the known keys that you want to extract from the hash, then you can just use <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-select\" rel=\"nofollow\"><strong>Hash#select</strong></a> method as following:</p>\n\n<pre><code>a = [{\"id\"=&gt;1, \"name\"=&gt;\"Ukraine\", \"phone_code\"=&gt;\"+38\", \"created_at\"=&gt;\"2015-11-23 21:52:49.415748\", \"updated_at\"=&gt;\"2015-11-23 21:52:49.415748\", 0=&gt;1, 1=&gt;\"Ukraine\", 2=&gt;\"+38\", 3=&gt;\"2015-11-23 21:52:49.415748\", 4=&gt;\"2015-11-23 21:52:49.415748\"}]\nknown_keys = %w(id name phone_code created_at updated_at)\na[0].select { |key, value| known_keys.include? key }\n# =&gt; {\"id\"=&gt;1, \"name\"=&gt;\"Ukraine\", \"phone_code\"=&gt;\"+38\", \"created_at\"=&gt;\"2015-11-23 21:52:49.415748\", \"updated_at\"=&gt;\"2015-11-23 21:52:49.415748\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "is_accepted": false, "score": 0, "last_activity_date": 1448395701, "creation_date": 1448395701, "answer_id": 33902861, "question_id": 33902508, "link": "https://stackoverflow.com/questions/33902508/issue-with-raw-sql-in-rails/33902861#33902861", "title": "Issue with raw SQL in Rails", "body": "<p>I am not sure why you are returning in this manner, but in answer to your question \"what is the best way to output only elements with proper titles, not with indexes?\":</p>\n\n<pre><code># The new, properly formatted object\nhash_of_proper_keys = Hash.new\n\n# Assuming country is in the form of a hash of values\ncountry.each do |key, value|\n    hash_of_proper_keys[key] = value unless key.is_a? integer\nend\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1448395701, "creation_date": 1448394438, "question_id": 33902508, "link": "https://stackoverflow.com/questions/33902508/issue-with-raw-sql-in-rails", "title": "Issue with raw SQL in Rails", "body": "<p>I use raw SQL to build an SQL editor in my project. But when I call simple select queries, I get this result:</p>\n\n<pre><code>[{\"id\"=&gt;1, \"name\"=&gt;\"Ukraine\", \"phone_code\"=&gt;\"+38\", \"created_at\"=&gt;\"2015-11-23 21:52:49.415748\", \"updated_at\"=&gt;\"2015-11-23 21:52:49.415748\", 0=&gt;1, 1=&gt;\"Ukraine\", 2=&gt;\"+38\", 3=&gt;\"2015-11-23 21:52:49.415748\", 4=&gt;\"2015-11-23 21:52:49.415748\"}]\n</code></pre>\n\n<p>The query is simple:</p>\n\n<pre><code>SELECT * FROM countries\n</code></pre>\n\n<p>As you can see, the same fields are displayed firstly with titles of attributes, and then second time with integer indexes.</p>\n\n<p>I use this code two output only elements with attribute titles:</p>\n\n<pre><code>@headers = @result.first.keys\n@count = @headers.size / 2\n</code></pre>\n\n<p>After that I iterate over headers:</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;% (0...@count).each do |i| %&gt;\n        &lt;th&gt;&lt;%= @headers[i] %&gt;&lt;/th&gt;\n    &lt;% end %&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>But I think that it is not the best solution. So, what is the best way to output only elements with proper titles, not with indexes?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461171378, "post_id": 33902507, "comment_id": 61081393, "body": "Why use a gem for formatting when you can use string interpolation?"}], "answers": [{"tags": [], "owner": {"reputation": 565, "user_id": 862426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf6051b81aadbeefdb8e1acae3ba929?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Knapik", "link": "https://stackoverflow.com/users/862426/micha%c5%82-knapik"}, "is_accepted": false, "score": 0, "last_activity_date": 1461171103, "creation_date": 1461171103, "answer_id": 36750304, "question_id": 33902507, "link": "https://stackoverflow.com/questions/33902507/ruby-pronto-gem-pretty-formatting/36750304#36750304", "title": "Ruby Pronto Gem pretty formatting?", "body": "<p>Currently there are <a href=\"https://github.com/mmozuras/pronto/tree/master/lib/pronto/formatter\" rel=\"nofollow\">10 formatters</a> available at <code>pronto</code> master branch.\nRun <code>pronto help run</code> to list all available formatters.</p>\n\n<p>As far as I know, currently there is no HTML formatter.\nYou can use <code>checkstyle</code> formatter to generate XML which might be used by CI server like Jenkins to generate HTML report.</p>\n\n<p>If none of available formatters satisfy your needs, you can implement your own formatter.\nFor reference implementation check out simple <a href=\"https://github.com/mmozuras/pronto/blob/master/lib/pronto/formatter/text_formatter.rb\" rel=\"nofollow\">text formatter</a> and <a href=\"https://github.com/mmozuras/pronto/blob/master/lib/pronto/formatter/github_formatter.rb\" rel=\"nofollow\">GitHub</a> formatter.</p>\n"}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461171103, "creation_date": 1448394437, "question_id": 33902507, "link": "https://stackoverflow.com/questions/33902507/ruby-pronto-gem-pretty-formatting", "title": "Ruby Pronto Gem pretty formatting?", "body": "<p>Is there a way to get better formatting output from Pronto?  As an example, the brakeman gem when run directly can give me nice HTML formatted output, but when I run pronto runner plugins everything gets stuffed into a basic text file with very little structure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pry"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448394863, "post_id": 33902377, "comment_id": 55567819, "body": "What have you tried doing? It helps us a lot if you tell us the things you&#39;ve researched and tried, so we don&#39;t waste time trying the same things. Also, it looks like you&#39;re trying to load two different versions of Pry. Do you have a <a href=\"https://github.com/pry/pry/wiki/Pry-rc\" rel=\"nofollow noreferrer\"><code>.pryrc</code></a> in your home directory?"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448396214, "post_id": 33902377, "comment_id": 55568592, "body": "I did mention that I tried <code>gem update pry</code> on the post, apologies if I wasn&#39;t clearer. I did check and I dont have <code>.pryrc</code> in my home directory"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448396498, "post_id": 33902377, "comment_id": 55568742, "body": "<code>gem update pry</code> is one thing to try. Where else have you looked, what did you try and what happened? Please read <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>, which will give you an idea of the effort the community expects, and what you need to add."}, {"owner": {"reputation": 2492, "user_id": 2539607, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3b7iH.png?s=128&g=1", "display_name": "levininja", "link": "https://stackoverflow.com/users/2539607/levininja"}, "edited": false, "score": 0, "creation_date": 1475003322, "post_id": 33902377, "comment_id": 66762694, "body": "This post has the answer you&#39;re looking for: <a href=\"http://stackoverflow.com/questions/24917565/error-with-pry-warning-already-initialized-constant-previous-definition-of-def\" title=\"error with pry warning already initialized constant previous definition of def\">stackoverflow.com/questions/24917565/&hellip;</a>"}], "owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1448394028, "creation_date": 1448394028, "question_id": 33902377, "link": "https://stackoverflow.com/questions/33902377/pry-gem-conflict-error", "title": "Pry - Gem Conflict Error", "body": "<p>When I run <code>pry</code> on my terminal, I get the below error. </p>\n\n<p>I've tried <code>bundle update</code> and also <code>gem update pry</code> but still get the same error.</p>\n\n<pre><code>/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:14: warning: already initialized constant Pry::DEFAULT_HOOKS\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:14: warning: previous definition of DEFAULT_HOOKS was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:20: warning: already initialized constant Pry::DEFAULT_PRINT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:20: warning: previous definition of DEFAULT_PRINT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:29: warning: already initialized constant Pry::SIMPLE_PRINT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:29: warning: previous definition of SIMPLE_PRINT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:38: warning: already initialized constant Pry::CLIPPED_PRINT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:38: warning: previous definition of CLIPPED_PRINT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:43: warning: already initialized constant Pry::DEFAULT_EXCEPTION_HANDLER\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:43: warning: previous definition of DEFAULT_EXCEPTION_HANDLER was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:52: warning: already initialized constant Pry::DEFAULT_PROMPT_NAME\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:52: warning: previous definition of DEFAULT_PROMPT_NAME was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:55: warning: already initialized constant Pry::DEFAULT_PROMPT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:55: warning: previous definition of DEFAULT_PROMPT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:65: warning: already initialized constant Pry::DEFAULT_PROMPT_SAFE_OBJECTS\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:65: warning: previous definition of DEFAULT_PROMPT_SAFE_OBJECTS was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry- 0.10.3/lib/pry.rb:68: warning: already initialized constant Pry::SIMPLE_PROMPT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:68: warning: previous definition of SIMPLE_PROMPT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:70: warning: already initialized constant Pry::NO_PROMPT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:70: warning: previous definition of NO_PROMPT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:72: warning: already initialized constant Pry::SHELL_PROMPT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:72: warning: previous definition of SHELL_PROMPT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:79: warning: already initialized constant Pry::NAV_PROMPT\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:79: warning: previous definition of NAV_PROMPT was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:94: warning: already initialized constant Pry::DEFAULT_CONTROL_D_HANDLER\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:94: warning: previous definition of DEFAULT_CONTROL_D_HANDLER was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:109: warning: already initialized constant Pry::DEFAULT_SYSTEM\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:109: warning: previous definition of DEFAULT_SYSTEM was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:117: warning: already initialized constant Pry::INITIAL_PWD\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:117: warning: previous definition of INITIAL_PWD was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:6: warning: already initialized constant Pry::CLI::NoOptionsError\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:6: warning: previous definition of NoOptionsError was here\n/Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/specification.rb:2112:in `raise_if_conflicts': Unable to activate pry-byebug-1.3.2, because pry-0.10.3 conflicts with pry (~&gt; 0.9.12) (Gem::ConflictError)\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/specification.rb:1280:in `activate'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems.rb:198:in `rescue in try_activate'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems.rb:195:in `try_activate'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:126:in `rescue in require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:39:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-byebug-1.3.2/lib/pry-byebug/cli.rb:1:in `&lt;top (required)&gt;'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/plugins.rb:38:in `load_cli_options'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:40:in `block in add_plugin_options'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:39:in `each'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:39:in `add_plugin_options'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry/cli.rb:107:in `&lt;top (required)&gt;'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/lib/pry.rb:150:in `&lt;top (required)&gt;'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/bin/pry:12:in `rescue in &lt;top (required)&gt;'\nfrom /Users/mkv/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/pry-0.10.3/bin/pry:8:in `&lt;top (required)&gt;'\nfrom /Users/mkv/.rbenv/versions/2.2.2/bin/pry:23:in `load'\nfrom /Users/mkv/.rbenv/versions/2.2.2/bin/pry:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448395519, "post_id": 33902213, "comment_id": 55568231, "body": "I can understand the UserProject belonging to Project, but if UserProject is the one holding the member list (and roles), wouldn&#39;t Users need to belong to that then? Sorry if these are stupid questions. I&#39;m really new to ruby on rails."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448395805, "post_id": 33902213, "comment_id": 55568392, "body": "The class User already <code>has_many :user_projects</code> (see my code). See this link and the image which illustrate the many-to-many relationship pretty well <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448396283, "post_id": 33902213, "comment_id": 55568630, "body": "So, do I still need the third one or can&#39;t I just do the &#39;has_and_belongs_to_many&#39; thing? Also, I&#39;m still confused as to how Project gets a list of Users via UserProject? Yes it has many UserProjects, but if UserProject belongs to User and not the other way around, how can Project have many Users through UserProject?   I&#39;m really sorry about all this. =\\"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448397459, "post_id": 33902213, "comment_id": 55569270, "body": "has_many :through is the better choice... maybe read up on database normalization, because that could shed some light on creating database relationships."}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448398137, "post_id": 33902213, "comment_id": 55569644, "body": "Have any sites or material you recommend personally? We&#39;ve got less than three weeks to work on this so I&#39;m pretty much in a rush at this point. Haha...hehe....ugh. =_=&quot;"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448398292, "post_id": 33902213, "comment_id": 55569737, "body": "You can use a simple <code>has_and_belongs_to_many</code>. Rails will deal with the join table by himself and you won&#39;t have to worry about it. Just type <code>rails habtm</code> in google and you will find plenty of documentation, guides and tutorials!\\"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448405650, "post_id": 33902213, "comment_id": 55573459, "body": "Would using the :through method using the third UserProject model be a good idea for when I need to put in a deleta and add function?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448461958, "post_id": 33902213, "comment_id": 55599299, "body": "no, the delete/add function will just <code>INSERT</code> or <code>DELETE</code> rows in the UserProject table"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448466347, "post_id": 33902213, "comment_id": 55602518, "body": "So I&#39;m modifying the UserProject table? Ok, so let me see if I got this. I create a UserProject model, and add a belongs_to, like you&#39;ve shown, along with a validation for project name and user name right? So is this table actually stored in the UserProject? I&#39;ve been reading up on it but it&#39;s still all so confusing."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448467311, "post_id": 33902213, "comment_id": 55603232, "body": "The UserProject table should contain only a <code>user_id</code> and a <code>project_id</code> (and its own <code>id</code>). The project&#39;s name should be stored in the Project table, user&#39;s name stored in the User table."}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448469068, "post_id": 33902213, "comment_id": 55604380, "body": "So having user_id and project_id is just an universal thing? Thought it was meant to point specifically to a user_id/project_id string or int value within those two tables?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448469219, "post_id": 33902213, "comment_id": 55604473, "body": "Take a look at this image, it explains everything. <code>assemblies_parts</code> is <code>user_projects</code> in your case. <a href=\"http://guides.rubyonrails.org/images/habtm.png\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/images/habtm.png</a>"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448470072, "post_id": 33902213, "comment_id": 55605080, "body": "I remember that, yes. What I&#39;m asking is if these id numbers are inherent or are they declared variables, such that when working with newly created projects/users, they do not have an id number in the scope of this project, so would I then need to use the string names, or...are the id integers simply assigned behind the scene and working with that?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448477576, "post_id": 33902213, "comment_id": 55609541, "body": "they are assigned behing, Rails deals with it pretty well"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448546241, "post_id": 33902213, "comment_id": 55640005, "body": "So to double check, here&#39;s what I have to do: I create a UserProject model, adding in two int values (user_id and project_id), then do two migrations (like AddUserprojectRefToUser and AddUserprojectRefToProject), add the has_many and belongs to lines where needed, and that&#39;s how I set up the database relation right? But since this project doesn&#39;t use routes files, could I be able to add and delete users to lists without using routes?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1448549544, "post_id": 33902213, "comment_id": 55642075, "body": "this post might help <a href=\"http://www.createdbypete.com/articles/working-with-nested-forms-and-a-many-to-many-association-in-rails-4/\" rel=\"nofollow noreferrer\">createdbypete.com/articles/&hellip;</a> and this one too <a href=\"http://railscasts.com/episodes/47-two-many-to-many\" rel=\"nofollow noreferrer\">railscasts.com/episodes/47-two-many-to-many</a> also this one for the view <a href=\"http://stackoverflow.com/questions/11343365/rails-3-how-to-display-many-to-many-join-in-view\" title=\"rails 3 how to display many to many join in view\">stackoverflow.com/questions/11343365/&hellip;</a>"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1448579017, "post_id": 33902213, "comment_id": 55655177, "body": "Early you mentioned that having add/delete functions would be a bad idea &#39;since it would delete rows&#39;? It&#39;s part of what I gotta do for, because each project&#39;s user list needs to be added to."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1448393856, "last_edit_date": 1448393856, "creation_date": 1448393501, "answer_id": 33902213, "question_id": 33902139, "link": "https://stackoverflow.com/questions/33902139/ruby-on-rails-can-two-models-belong-to-each-other/33902213#33902213", "title": "ruby on rails -- can two Models belong to each other?", "body": "<p>The relation you are describing is not one-to-one:</p>\n\n<blockquote>\n  <p>when <strong>a user</strong> is logged in, that they see <strong>the projects</strong> they are part of</p>\n</blockquote>\n\n<p>This implies that <strong>a user can have several projects</strong>. You also specified:</p>\n\n<blockquote>\n  <p>[project has a] list of current <strong>members</strong> of that project</p>\n</blockquote>\n\n<p>This implies that <strong>a projet can have several users</strong>.</p>\n\n<p><strong>In conclusion</strong>, you need a <strong>many-to-many relation</strong> between your User and Project models.</p>\n\n<hr>\n\n<p>This is a basic many-to-many relationship in Rails:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :user_projects\n  has_many :projects, through: :user_projects\n\nclass Project &lt; ActiveRecord::Base\n  has_many :user_projects\n  has_many :users, through: :user_projects\n\nclass UserProject &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :project\n  validates :user_id, :project_id, presence: true\n</code></pre>\n\n<ul>\n<li>The <code>UserProject</code> model is a join table. What I have done in my code is an explicit <a href=\"http://guides.rubyonrails.org/association_basics.html#has-and-belongs-to-many-association-reference\" rel=\"nofollow\"><code>has_and_belongs_to_many</code></a>, which let you have more control over the join table. (example: add a <code>role</code> column in the <code>UserProject</code> table, containing data like <code>project_creator</code> or <code>simple_member</code>)</li>\n<li>The <code>UserProject</code> model could be named <code>Membership</code> to be more explicit. I used both models' name to make <code>UserProject</code>, as we usually do in Rails' naming convention.</li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448393856, "creation_date": 1448393196, "question_id": 33902139, "link": "https://stackoverflow.com/questions/33902139/ruby-on-rails-can-two-models-belong-to-each-other", "title": "ruby on rails -- can two Models belong to each other?", "body": "<p>My group is making a Project Management System for our course, and it's my job that when a user is logged in, that they see the projects they are part of, and also that the projects listed have a members list of current members of that project.</p>\n\n<p>(Also will need an add/delete member function later)</p>\n\n<p>My question is, since the rest of the group have already set it up so that Projects belong to Users, is it possible to have Users belong to Projects in order to set up this member list and do what I'm talking about?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448399663, "post_id": 33902529, "comment_id": 55570495, "body": "Good answer. Perhaps preface with two blocks can&#39;t be passed, but two procs (or a block and a proc) can, with the same desired result."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 3, "last_activity_date": 1448403701, "last_edit_date": 1495542192, "creation_date": 1448394529, "answer_id": 33902529, "question_id": 33902132, "link": "https://stackoverflow.com/questions/33902132/rails-ruby-passing-multiple-blocks-as-arguments/33902529#33902529", "title": "rails/ruby, passing multiple blocks as arguments", "body": "<p>Maybe this (2 Proc used)?</p>\n\n<p>Definition:</p>\n\n<pre><code>def collapsible_content(proc1, proc2)\n  content_tag(:div, some_options) do\n    content_tag(:div, some_other_options) do\n      concat button_tag(proc1.call)\n      concat hidden_content(proc2.call)\n    end\n  end\nend\n\ndef hidden_content(proc)\n  content_tag(:div, class: \"collapsible-content-body\") do\n    content_tag(:div, proc.call)\n  end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&lt;%= collapsible_content(Proc.new{ page_heading(venue.title) }, Proc.new{ venues_facility_opening_times(venue) }) %&gt;\n</code></pre>\n\n<hr>\n\n<p>Thanks to this post: <a href=\"https://stackoverflow.com/questions/2463612/passing-multiple-code-blocks-as-arguments-in-ruby\">Passing multiple code blocks as arguments in Ruby</a></p>\n"}], "owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 33902529, "answer_count": 1, "score": 1, "last_activity_date": 1448403701, "creation_date": 1448393166, "question_id": 33902132, "link": "https://stackoverflow.com/questions/33902132/rails-ruby-passing-multiple-blocks-as-arguments", "title": "rails/ruby, passing multiple blocks as arguments", "body": "<p>I have a rails helper method which I would like to pass two different blocks to be yielded in two different places in the method.</p>\n\n<p>This is what I am trying to achieve in my view..</p>\n\n<pre><code>    &lt;%= collapsible_content do %&gt;\n      &lt;%= page_heading venue.title %&gt;\n      &lt;%- venues_facility_opening_times venue %&gt;\n    &lt;%-end %&gt;\n</code></pre>\n\n<p>And this is the method itself </p>\n\n<pre><code>  def collapsible_content(&amp;block1, &amp;block2)\n    content_tag(:div, nil, class: 'collapsible-content', data: { name: 'collapsible-1' }) do\n      content_tag(:div, nil, class: 'collapsible-content-item') do\n        concat button_tag(yield &amp;block1, class: 'collapsible-content-toggle')\n        concat hidden_content(&amp;block2)\n      end\n    end\n  end\n\n  private\n\n  def hidden_content(&amp;block)\n    content_tag(:div, class: \"collapsible-content-body\") do\n      content_tag(:div, yield) if block_given?\n    end\n  end\n</code></pre>\n\n<p>However, from what i under stand the <code>&amp;block</code> is always for the last argument, so how is it possible to differentiate between where they yield?</p>\n\n<p>I tried using a lambda, but <code>ActiveSupport::SafeBuffer</code> prevents this. </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "validation", "html-validation"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448397677, "post_id": 33902101, "comment_id": 55569385, "body": "Maybe you should consider using markdown for the content... if that suits your needs (basic markup, images, etc). It&#39;s pretty straightforward to implement and there are some nice lightweight javascript libraries that provide the interface. This way you don&#39;t need to bother about valid HTML."}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1448397711, "post_id": 33902101, "comment_id": 55569406, "body": "(this website is using it as well)"}], "answers": [{"tags": [], "owner": {"reputation": 2672, "user_id": 806762, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d9bda40b98b6ce1fbaeeef02f253fe50?s=128&d=identicon&r=PG", "display_name": "coletrain", "link": "https://stackoverflow.com/users/806762/coletrain"}, "is_accepted": false, "score": 0, "last_activity_date": 1448394479, "creation_date": 1448394479, "answer_id": 33902516, "question_id": 33902101, "link": "https://stackoverflow.com/questions/33902101/is-there-a-way-to-check-if-text-string-is-valid-html-in-rails/33902516#33902516", "title": "Is there a way to check if text string is valid HTML in Rails?", "body": "<p>If you are looking to check input for a field in rails you can simply utilize 3 things which are </p>\n\n<ol>\n<li>Rails <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow\">before_save</a> callback</li>\n<li>JS/Ajax for checking input (avoid page reloading)</li>\n<li>Constraints in which you define to be valid HTML</li>\n</ol>\n\n<p>In your model you could create a method in which checks to see if the text inserted into the field is valid. Before the form is saved it would check to see if the inserted html meets your definition of valid html. </p>\n\n<p>Hope the above helps.</p>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 2418828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b8bbbdbccee9a400610246016d24a15?s=128&d=identicon&r=PG", "display_name": "James Klein", "link": "https://stackoverflow.com/users/2418828/james-klein"}, "edited": false, "score": 1, "creation_date": 1521207496, "post_id": 33955005, "comment_id": 85645354, "body": "<code>w3c_validators</code> gem hits the w3c external service. Is there a way to do this locally/without relying on a service?"}], "tags": [], "owner": {"reputation": 3172, "user_id": 1206421, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/19dd8d6cbf16c4246914c10502fd2395?s=128&d=identicon&r=PG&f=1", "display_name": "serge1peshcoff", "link": "https://stackoverflow.com/users/1206421/serge1peshcoff"}, "is_accepted": true, "score": 0, "last_activity_date": 1448618925, "creation_date": 1448618925, "answer_id": 33955005, "question_id": 33902101, "link": "https://stackoverflow.com/questions/33902101/is-there-a-way-to-check-if-text-string-is-valid-html-in-rails/33955005#33955005", "title": "Is there a way to check if text string is valid HTML in Rails?", "body": "<p>So I figured out how to achieve this using <code>w3c_validators</code> gem.</p>\n\n<ol>\n<li>Add <code>gem 'w3c_validators'</code> to Gemfile and run <code>bundle install</code>.</li>\n<li><p>Change model. I've added a custom validation method to validate HTML, like this:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    validate :valid_html\n\n    def valid_html\n      @validator = MarkupValidator.new\n\n      html = \"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;#{text}&lt;/body&gt;&lt;/html&gt;\"\n\n      results = @validator.validate_text(html)\n\n      if results.errors.length &gt; 0\n        results.errors.each do |err|\n          errors.add(:text, err.to_s)\n        end\n      end\n    end\n  end\n</code></pre></li>\n</ol>\n\n<p>(I need to wrap my code into HTML and BODY tags and add some more tags, because I don't store full HTML in my DB, only partials).</p>\n"}], "owner": {"reputation": 3172, "user_id": 1206421, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/19dd8d6cbf16c4246914c10502fd2395?s=128&d=identicon&r=PG&f=1", "display_name": "serge1peshcoff", "link": "https://stackoverflow.com/users/1206421/serge1peshcoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "accepted_answer_id": 33955005, "answer_count": 2, "score": 0, "last_activity_date": 1448618925, "creation_date": 1448393019, "question_id": 33902101, "link": "https://stackoverflow.com/questions/33902101/is-there-a-way-to-check-if-text-string-is-valid-html-in-rails", "title": "Is there a way to check if text string is valid HTML in Rails?", "body": "<p>I am writing a simple CMS in Rails 4. And I am storing my articles in database as text strings that contains HTML code (not necessary).</p>\n\n<p>Anyway, I need a method to check before saving, if the text of the article is valid HTML or nor (considering that the article is not full HTML document, but the part of it, without DOCTYPE and other stuff). Something like this: <a href=\"https://validator.w3.org/#validate_by_input+with_options\" rel=\"nofollow\">https://validator.w3.org/#validate_by_input+with_options</a> (\"Validate HTML fragment\"), but working inside my Rails application as validation method of the model, so if my markup is wrong, it should not save the article and show the error message instead.</p>\n\n<p>Is there a gem or other method to do this?</p>\n"}, {"tags": ["ruby", "multidimensional-array", "initialization"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448393130, "post_id": 33901706, "comment_id": 55566748, "body": "Ruby does not have a concept of &quot;multidimensional arrays&quot;. The term is used loosely to describe an array having a particular structure, but it can be confusing and is best to avoid. All arrays merely contain objects, which are normally referred to &quot;elements&quot;. Your array <code>image</code> contains four elements, each of which is an array of four elements. Had it been what you might think of as a &quot;three-dimensional&quot; array, it might contain four elements that are arrays, each of which is an array of four elements that are themselves arrays of, say, three elements."}, {"owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448393950, "post_id": 33901706, "comment_id": 55567249, "body": "Thanks for your reply Cary. Help me get more clear about the concept."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448394287, "post_id": 33901706, "comment_id": 55567469, "body": "..and this is a perfectly-good array: <code>[1, 3.1, &quot;cat&quot;, :dog, 4..7, [5, {3=&gt;{:a=&gt;[4,5]}}]]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 0, "creation_date": 1448392572, "post_id": 33901906, "comment_id": 55566420, "body": "Thanks for reply. Actually I&#39;m confused in what I could put inside the argument. As my final out put wann be: 0000 0100 0010 0000  which are four arrays."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 0, "creation_date": 1448392795, "post_id": 33901906, "comment_id": 55566548, "body": "ok, give me some time. I will update my answer to met your requirement."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1448392880, "post_id": 33901906, "comment_id": 55566605, "body": "Ken, the error message also gave the line where the exception was raised (<code>def initialize</code>). You need to get in the habit of studying error messages carefully. They contain valuable information, often pinpointing the problem, as here."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 0, "creation_date": 1448393110, "post_id": 33901906, "comment_id": 55566737, "body": "@KenSaluda, look at my updated answer please. That&#39;s a working version of the code with minimal changes to your existing code."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1448393232, "post_id": 33901906, "comment_id": 55566810, "body": "I changed the definition of the <code>initialize</code> methods for both your <code>Subary</code> and <code>Image</code> class and made the related code adjustments."}, {"owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 1, "creation_date": 1448393445, "post_id": 33901906, "comment_id": 55566940, "body": "That&#39;s so cool!Thanks K M. I wasn&#39;t know that &quot;array&quot; could simply put inside the argument. I just took a lot of time figure our how it should be made to represent four arrays."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 0, "creation_date": 1448393525, "post_id": 33901906, "comment_id": 55566991, "body": "@KenSaluda great to know that it worked and solved your problem. You are welcome :)"}, {"owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 0, "creation_date": 1448395734, "post_id": 33901906, "comment_id": 55568360, "body": "Hi . @K M Rakibul Islam  Sorry. Can you explain more about the meaning of:         subarys &lt;&lt; Subary.new(array[0])    Thanks"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1448395862, "post_id": 33901906, "comment_id": 55568422, "body": "ok, I will update my answer shortly to explain it a bit more. If you have any particular question, you can ask me here."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1448398027, "post_id": 33901906, "comment_id": 55569571, "body": "<code>array</code> is basically an array of arrays there which is the argument for the <code>initilize</code> method of <code>Image</code> class. <code>array[0]</code> is the first array from that array of arrays. You are creating a Subary instance here: <code>Subary.new(array[0])</code> and passing the first array as argument: <code>array[0]</code>"}, {"owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "edited": false, "score": 1, "creation_date": 1448400480, "post_id": 33901906, "comment_id": 55570913, "body": "Thank you @KMRakibulIslam, that make sense for me now."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1448398119, "last_edit_date": 1448398119, "creation_date": 1448392286, "answer_id": 33901906, "question_id": 33901706, "link": "https://stackoverflow.com/questions/33901706/multidimestional-array-initialize-wrong-number-of-arguments-1-for-0/33901906#33901906", "title": "Multidimestional Array - `initialize&#39;: wrong number of arguments (1 for 0)", "body": "<pre><code>`initialize': wrong number of arguments (1 for 0)\n</code></pre>\n\n<p>This error means that, <code>initialize</code> method does not take any argument (0), but you passed one argument to it. Change the <code>initialize</code> method's definition in your <code>Image</code> class. Then, it should work.</p>\n\n<pre><code>class Subary\n    attr_accessor :num1, :num2, :num3, :num4\n\n    def initialize(sub_array)\n        self.num1 = sub_array[0]\n        self.num2 = sub_array[1]\n        self.num3 = sub_array[2]\n        self.num4 = sub_array[3]\n    end\n\n    def output_subary\n        puts \"#{num1}#{num2}#{num3}#{num4}\"\n    end\nend\n\n# subary = Subary.new(0,0,0,0)\n# puts subary.output_subary\n\nclass Image\n    def initialize(array_of_arrays)\n        @subarys = []\n        @subarys &lt;&lt; Subary.new(array_of_arrays[0])\n        @subarys &lt;&lt; Subary.new(array_of_arrays[1])\n        @subarys &lt;&lt; Subary.new(array_of_arrays[2])\n        @subarys &lt;&lt; Subary.new(array_of_arrays[3])\n    end\n\n    def output_image\n        @subarys.each do |list|\n            list.output_subary\n        end\n    end\nend\n\nimage = Image.new([\n  [0, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 0, 1],\n  [0, 0, 0, 0]\n])\nimage.output_image\n# =&gt; 0000\n# =&gt; 0100\n# =&gt; 0001\n# =&gt; 0000\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5601051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9be9b37291012d923079be0a60d0c35f?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Saluda", "link": "https://stackoverflow.com/users/5601051/ken-saluda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 33901906, "answer_count": 1, "score": 2, "last_activity_date": 1448398119, "creation_date": 1448391618, "question_id": 33901706, "link": "https://stackoverflow.com/questions/33901706/multidimestional-array-initialize-wrong-number-of-arguments-1-for-0", "title": "Multidimestional Array - `initialize&#39;: wrong number of arguments (1 for 0)", "body": "<p>I'm still new in ruby in rails. Today I'm trying to write some codes which can run the the following:</p>\n\n<pre><code>image = Image.new([\n  [0, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 0, 1],\n  [0, 0, 0, 0]\n])\n\nimage.output_image\n</code></pre>\n\n<p>And I'm having trouble setup the initialize. My codes is as below, can someone help me?\nThanks a lot</p>\n\n<pre><code>class Subary\n    attr_accessor :num1, :num2, :num3, :num4\n\n    def initialize (num1, num2, num3, num4)\n        self.num1 = num1\n        self.num2 = num2\n        self.num3 = num3\n        self.num4 = num4\n    end\n\n    def output_subary\n        puts \"#{num1}#{num2}#{num3}#{num4}\"\n    end\n\nend\n\n# subary = Subary.new(0,0,0,0)\n# puts subary.output_subary\n\nclass Image\n    def initialize \n        @subarys = []\n        @subarys &lt;&lt; Subary.new(:num1, :num2, :num3, :num4)\n        @subarys &lt;&lt; Subary.new(:num1, :num2, :num3, :num4)\n        @subarys &lt;&lt; Subary.new(:num1, :num2, :num3, :num4)\n        @subarys &lt;&lt; Subary.new(:num1, :num2, :num3, :num4)\n    end\n\n    def output_image\n        @subarys.each do |list|\n            list.output_subary\n        end\n    end\nend\n\nimage = Image.new([\n  [0, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 0, 1],\n  [0, 0, 0, 0]\n])\nimage.output_image\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication"], "answers": [{"tags": [], "owner": {"reputation": 3592, "user_id": 1795429, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/84a979030a097f4851d1782d716e2dae?s=128&d=identicon&r=PG", "display_name": "OneHoopyFrood", "link": "https://stackoverflow.com/users/1795429/onehoopyfrood"}, "is_accepted": false, "score": 0, "last_activity_date": 1448394161, "last_edit_date": 1495539922, "creation_date": 1448394161, "answer_id": 33902425, "question_id": 33901682, "link": "https://stackoverflow.com/questions/33901682/override-rails-has-secure-passwords-authenticate-method/33902425#33902425", "title": "Override Rails has_secure_password&#39;s authenticate method", "body": "<p>Alright, I figured it out. I needed to use some monkey patching as detailed <a href=\"https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i\">here</a>. I used the <strong>Method Wrapping</strong> section's suggestions.</p>\n\n<p>The end result is:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Must have either password or be a active directory user\n  has_secure_password :validations =&gt; false\n  validates :active_directory_user, presence: true, unless: :password\n  validates :password, presence: true, length: { minimum: 6 }, unless: :active_directory_user\n  validates :password_digest, presence: true, unless: :active_directory_user\n\n  # Mokey patch on authenticate to use active directory\n  old_autheticate = instance_method(:authenticate)\n  define_method(:authenticate) do |pass|\n    if self.active_directory_user\n      active_directory_auth(pass)\n    else\n      old_autheticate.bind(self).(pass)\n    end\n  end\n\n  private\n    def active_directory_auth (password)\n      domain = \"domain\"\n      ldap = Net::LDAP.new\n      ldap.host = '&lt;ad ip&gt;'\n      ldap.port = 389\n      ldap.auth self.username + \"@\" + domain, password\n      if ldap.bind\n        self\n      else\n        false\n      end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 3592, "user_id": 1795429, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/84a979030a097f4851d1782d716e2dae?s=128&d=identicon&r=PG", "display_name": "OneHoopyFrood", "link": "https://stackoverflow.com/users/1795429/onehoopyfrood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1448394161, "creation_date": 1448391539, "question_id": 33901682, "link": "https://stackoverflow.com/questions/33901682/override-rails-has-secure-passwords-authenticate-method", "title": "Override Rails has_secure_password&#39;s authenticate method", "body": "<p>I'm using a combination of a custom user database with <code>has_secure_password</code> and active dirctory for authentication. If a user is marked as an Active Directory user then I'll authenticate against AD, otherwise against the database.</p>\n\n<p>I want to overide <code>has_secure_password</code>'s <code>authenticate</code> method to reflect that. </p>\n\n<p><strong>I know I can handle it in the controller or though a new method that calls <code>authenticate</code>, but would prefer a proper override</strong></p>\n\n<p>Is there a way to do something like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  # Here is how I make the validation work out, if that matters:\n  has_secure_password :validations =&gt; false\n  validates :active_directory_user, presence: true, unless: :password\n  validates :password, presence: true, length: { minimum: 6 }, unless: :active_directory_user\n  validates :password_digest, presence: true, unless: :active_directory_user\n\n  # Here is what I want to do\n  def authenticate(pass)\n    if self.active_directory_user\n      active_directory_auth(pass)\n    else\n      # this doesn't work, I need to somehow reference the non-overriden function\n      self.authenticate(pass)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "screen-scraping", "mechanize"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448395150, "post_id": 33901238, "comment_id": 55568010, "body": "Welcome to Stack Overflow.This is covered many times on Stack Overflow, and on the internet. Where have you looked, what have you tried, and why didn&#39;t those pages help? If you do some searching you&#39;ll find the solutions to your question."}, {"owner": {"reputation": 1, "user_id": 5600953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446c12bdfaa4ccca69e35e833b7d40b4?s=128&d=identicon&r=PG&f=1", "display_name": "H G", "link": "https://stackoverflow.com/users/5600953/h-g"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1448433975, "post_id": 33901238, "comment_id": 55582233, "body": "Hello. I&#39;ve looked all over both Stack Overflow and the internet before posting this question. The best solution I found on here previously, was to use Execjs (a Ruby Gem) with mechanize to extract javascript, but without any explanation on how to do so. Others recommended headless browsers, but Selenium (for example) is very resource heavy, and can&#39;t compare to mechanize in terms of performance."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5600953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446c12bdfaa4ccca69e35e833b7d40b4?s=128&d=identicon&r=PG&f=1", "display_name": "H G", "link": "https://stackoverflow.com/users/5600953/h-g"}, "edited": false, "score": 0, "creation_date": 1448433870, "post_id": 33905885, "comment_id": 55582193, "body": "Thanks - works ok with the default mechanize user agent, but stops working when a custom user agent is used"}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1448408025, "creation_date": 1448408025, "answer_id": 33905885, "question_id": 33901238, "link": "https://stackoverflow.com/questions/33901238/scraping-a-dynamic-page-using-mechanize-and-ruby/33905885#33905885", "title": "Scraping a Dynamic Page Using Mechanize and Ruby", "body": "<p>It works for me:</p>\n\n<pre><code>agent = Mechanize.new\npage = agent.get 'http://www.amazon.com/dp/B014R6MVH2'\npage.at('#productDescription .content').text\n#=&gt; Description  This item is a simple and useful wedding banner....\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5600953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446c12bdfaa4ccca69e35e833b7d40b4?s=128&d=identicon&r=PG&f=1", "display_name": "H G", "link": "https://stackoverflow.com/users/5600953/h-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448408025, "creation_date": 1448389993, "question_id": 33901238, "link": "https://stackoverflow.com/questions/33901238/scraping-a-dynamic-page-using-mechanize-and-ruby", "title": "Scraping a Dynamic Page Using Mechanize and Ruby", "body": "<p>I'm trying to load the following page through mechanize:</p>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/B014R6MVH2\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/dp/B014R6MVH2</a></p>\n\n<p>The Product Description div (div id=\"productDescription) seems to be a javascript driven section, and as such, is unavailable to mechanize.</p>\n\n<p>Is there any solution to this? Maybe a gem I could use to execute the javascript and see the section?</p>\n\n<p>Another option could be to use a headless browser. I've tried selenium, but it's much, much slower than mechanize.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "gem", "global-variables"], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 2569591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8d27d0f26642f207e98f9ecbd36ca59?s=128&d=identicon&r=PG", "display_name": "bosticko", "link": "https://stackoverflow.com/users/2569591/bosticko"}, "is_accepted": true, "score": 5, "last_activity_date": 1459952097, "creation_date": 1459952097, "answer_id": 36453803, "question_id": 33901010, "link": "https://stackoverflow.com/questions/33901010/english-global-variables-dont-work-in-rails/36453803#36453803", "title": "&#39;English&#39; global variables don&#39;t work in Rails", "body": "<p><strong>TL;DR: Removed the <code>gem 'english'</code> from Gemfile, works.</strong></p>\n\n<p>I ended up coming back to this months later and figuring it out.</p>\n\n<p>In my hastiness to use the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/English/rdoc/English.html\" rel=\"noreferrer\"><code>English</code> library</a>, I added the <a href=\"https://rubygems.org/gems/english/\" rel=\"noreferrer\"><code>english</code> gem</a> to my <code>Gemfile</code>. (Notice the capitalization).</p>\n\n<p>While <code>English</code> is the built in library I wanted, for descriptive global variables, <code>english</code> is a gem for general english language processing.</p>\n\n<p>Normally, <code>require 'english'</code> would require the gem, and <code>require 'English'</code> would require the library.  However, I am using a <em>case insensitive</em> Mac OS X system, so <code>require 'English'</code> found the <code>english</code> gem first and used that.  This meant it was impossible for Ruby to load the <code>English</code> library, which is why it never worked.</p>\n"}], "owner": {"reputation": 633, "user_id": 2569591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8d27d0f26642f207e98f9ecbd36ca59?s=128&d=identicon&r=PG", "display_name": "bosticko", "link": "https://stackoverflow.com/users/2569591/bosticko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 2, "accepted_answer_id": 36453803, "answer_count": 1, "score": 2, "last_activity_date": 1459952097, "creation_date": 1448389192, "last_edit_date": 1448395987, "question_id": 33901010, "link": "https://stackoverflow.com/questions/33901010/english-global-variables-dont-work-in-rails", "title": "&#39;English&#39; global variables don&#39;t work in Rails", "body": "<p>I'm trying to use the English gem in Rails, so I can access <code>$LAST_MATCH_INFO</code>, the less cryptic version of <code>$~</code>. However, despite requiring English, <code>$LAST_MATCH_INFO</code> is always <code>nil</code>, while <code>$~</code> still works.</p>\n\n<p>This is my expected behaviour from <code>irb</code>:</p>\n\n<pre><code>'foo' =~ /o/           # =&gt; 1\n$~                     # =&gt; #&lt;MatchData \"o\"&gt;\n$LAST_MATCH_INFO       # =&gt; nil\n\nrequire 'english'      # =&gt; true\n$LAST_MATCH_INFO       # =&gt; #&lt;MatchData \"o\"&gt;\n$LAST_MATCH_INFO == $~ # =&gt; true\n</code></pre>\n\n<p>This is the broken behaviour from <code>rails console</code>:</p>\n\n<pre><code>'foo' =~ /o/           # =&gt; 1\n$~                     # =&gt; #&lt;MatchData \"o\"&gt;\n$LAST_MATCH_INFO       # =&gt; nil\n\nrequire 'english'      # =&gt; false\n                       # (Means it's already been required)\n$LAST_MATCH_INFO       # =&gt; nil\n$LAST_MATCH_INFO == $~ # =&gt; false\n</code></pre>\n\n<p>It works in <code>irb</code>, but not in <code>rails console</code>, or in the web console.  Notice that <code>require 'english'</code> returns <code>false</code> because the gem is already loaded, and yet it doesn't work.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448391004, "post_id": 33900986, "comment_id": 55565482, "body": "You could use a hash (<code>mult  = investment_calculation[time]</code>) to get the multiplier, but you could also use an <code>if</code> statement (<code>mult = if time==30 then 1.0219; elsif time==45 then 1.0336; else 1.0467; end</code>) or a <code>case</code> statement (<code>mult = case time; when 30 then  1.0219; when 45 then 1.0336; else 1.0467; end</code>."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1448391723, "post_id": 33901250, "comment_id": 55565922, "body": "Thanks for your response, very much useful. So, I wasn&#39;t that wrong with the hash then. My question: how can I now inform the user about the resulting operation? I was thinking about using <code>print</code>or <code>puts</code>, but how can I call the hash to put that result? Thanks."}, {"owner": {"reputation": 1810, "user_id": 945336, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55be99aa84deb9e8a180cd0fdf21eae7?s=128&d=identicon&r=PG&f=1", "display_name": "SevenEleven", "link": "https://stackoverflow.com/users/945336/seveneleven"}, "reply_to_user": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1448392013, "post_id": 33901250, "comment_id": 55566097, "body": "The result has nothing to do with the hash then. It is stored in <code>investment_calculation</code>, so you have to call <code>puts investment_calculation.to_s</code>."}, {"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1448393869, "post_id": 33901250, "comment_id": 55567204, "body": "I got the <i>*: nil can&#39;t be coerced into Fixnum</i> typical error at line <code>investment_calculation = money_invested * fixed_values[time_investment]</code>. Any ideas?"}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1448397385, "post_id": 33901250, "comment_id": 55569237, "body": "Multiplying a <code>Fixnum</code> (eg. <code>money_invested</code>) by <code>nil</code> raises an exception. When the <code>fixed_values</code> hash lacks a particular key it returns <code>nil</code>, so the <code>time_investment</code> key you are using is not present in the hash. Remember that <code>30</code> and <code>&quot;30&quot;</code> are not the same thing; one is a <code>Fixnum</code> and the other is a <code>String</code>. Make sure the key is the correct type."}, {"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1448454640, "post_id": 33901250, "comment_id": 55594148, "body": "Thank you very much. I fixed the error and was then able to generate the output as I wanted. Thanks again!"}], "tags": [], "owner": {"reputation": 1810, "user_id": 945336, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55be99aa84deb9e8a180cd0fdf21eae7?s=128&d=identicon&r=PG&f=1", "display_name": "SevenEleven", "link": "https://stackoverflow.com/users/945336/seveneleven"}, "is_accepted": false, "score": 1, "last_activity_date": 1448390569, "last_edit_date": 1448390569, "creation_date": 1448390054, "answer_id": 33901250, "question_id": 33900986, "link": "https://stackoverflow.com/questions/33900986/multiplying-a-users-input-depending-on-what-he-chooses/33901250#33901250", "title": "Multiplying a user&#39;s input depending on what he chooses", "body": "<p>You could store the 'fixed values' in a hash and access them depending on the given user-input. E.g.:</p>\n\n<pre><code>fixed_values = { \"30\" =&gt; 1.0219,\n                 \"45\" =&gt; 1.0336, \n                 \"60\" =&gt; 1.0467 }\n</code></pre>\n\n<p>Then you have to multiply it with the <code>*</code> operator:</p>\n\n<pre><code>investment_calculation = money_invested * fixed_values[time_investment]\n</code></pre>\n\n<p>Of course, you should check if the 'number of days', the user types in, is available in your hash, in order to avoid errors or misbehaviour. </p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1448394783, "post_id": 33901841, "comment_id": 55567768, "body": "Thank you very much for your explanation and kind words Damiano. It really encourages me to keep learning. I really understood now the difference between arrays and hashes. Now the question is: how can I display the result of the operation? I mean, let&#39;s suppose the user chose <code>money_invested = 1000</code> and <code>time_invested = 30</code>. The resulting number should be <b>1021.9</b>. How can I make the user reach that number?"}], "tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": false, "score": 0, "last_activity_date": 1448396356, "last_edit_date": 1448396356, "creation_date": 1448392074, "answer_id": 33901841, "question_id": 33900986, "link": "https://stackoverflow.com/questions/33900986/multiplying-a-users-input-depending-on-what-he-chooses/33901841#33901841", "title": "Multiplying a user&#39;s input depending on what he chooses", "body": "<p>Even though you question is very basic, is well written and easy to understand. Good job!</p>\n\n<p>Now follow me: a Hash, also known as a \"Map\" in some other non-Ruby languages, is a data-structure that allows us to associate keys with values. Keys in hashes are the equivalent of indexes in arrays: the main purpose of arrays is to store and access elements by using indexes, the main purpose of hashes is to store and access elements by keys. Hashes are <strong>really</strong> fast when compared against other naive implementations of a generic key-value data structure.</p>\n\n<p>In this example, you are associating the key <code>30</code> to the value <code>1.0219</code>. You can evaluate the behaviour of your hash in the console using the <code>irb</code> command:</p>\n\n<pre><code>&gt; investment_calculation = { 30 =&gt; 1.0219, 45 =&gt; 1.0336, 60 =&gt; 1.0467 }\n=&gt; {30=&gt;1.0219, 45=&gt;1.0336, 60=&gt;1.0467}\n&gt; investment_calculation[30]\n=&gt; 1.0219\n&gt; investment_calculation[45]\n=&gt; 1.0336\n&gt; investment_calculation[100]\n=&gt; nil\n</code></pre>\n\n<p>In comparison, you could solve the problem using an array with sparse values, i.e., with many values set to <code>0</code>/<code>nil</code>, but its memory-inefficient as most of the memory is used to store nothing.</p>\n"}], "owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1448396356, "creation_date": 1448389105, "last_edit_date": 1448396180, "question_id": 33900986, "link": "https://stackoverflow.com/questions/33900986/multiplying-a-users-input-depending-on-what-he-chooses", "title": "Multiplying a user&#39;s input depending on what he chooses", "body": "<p>I tried looking for some similar cases here but was unsuccessful. </p>\n\n<p>I want the user to first introduce an amount of money, then he would need to state a number of days: \"30\", \"45\" or \"60\", not other options rather than these, and finally, the program would multiply the amount of money per a fixed number. This number depends on the number of days the user has chosen. If he choses 30, \"amount of money * 1.0219\"; 45: \"amount of money * 1.0336\"; 60: \"amount of money * 1.0467\".</p>\n\n<p>So far, this is the  code I wrote:</p>\n\n<pre><code>puts \"Indicate money to invest\"\nmoney_invested = gets.to_i \n\nputs \"Indicate time of investment\"\ntime_investment = gets.to_i\n\ninvestment_calculation = { 30 =&gt; 1.0219, 45 =&gt; 1.0336, 60 =&gt; 1.0467 }\n# will be `nil` if not one of the defined ones\n</code></pre>\n\n<p>I understand that there is something horrible going on within the hash already, so I decided to stop there. I'm not sure if <code>=&gt;</code> means what I want it to mean, i.e.: multiply.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6555, "user_id": 1085186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3c8033ab2390d4f5b048d3c5ee0244d?s=128&d=identicon&r=PG&f=1", "display_name": "StackFlowed", "link": "https://stackoverflow.com/users/1085186/stackflowed"}, "edited": false, "score": 1, "creation_date": 1448388783, "post_id": 33900836, "comment_id": 55564181, "body": "Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and the create a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> and then ask. People over here are trying to help you. The least you could do is format the question so that its more readable. Why do you need java tag ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1448403097, "post_id": 33900836, "comment_id": 55572298, "body": "You could improve your question by removing the reference to Java. Just ask, for example, how you could create an array <code>arr</code> that permits <code>arr[row][col] = 3</code> to set a value and <code>arr[row][col]</code> to return a value."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 877706, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVmv0.png?s=128&g=1", "display_name": "rkotov93", "link": "https://stackoverflow.com/users/877706/rkotov93"}, "is_accepted": false, "score": 1, "last_activity_date": 1448392633, "last_edit_date": 1448392633, "creation_date": 1448391234, "answer_id": 33901593, "question_id": 33900836, "link": "https://stackoverflow.com/questions/33900836/translate-java-2d-array-into-ruby/33901593#33901593", "title": "translate java 2d array into ruby", "body": "<p>Firstly, ruby programmers use snake case. Capital letter is using for class names. </p>\n\n<p>Secondly, your problem happens just because</p>\n\n<pre><code>score[rcount] == nil # true\n</code></pre>\n\n<p>If you want to have an access to second dimension elements you need to initialize line as array:</p>\n\n<pre><code>score[rcount] = []\n</code></pre>\n\n<p>Now you can set second dimension element</p>\n\n<pre><code>score[rcount][ccount] = num\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1458838118, "last_edit_date": 1495542687, "creation_date": 1448398461, "answer_id": 33903602, "question_id": 33900836, "link": "https://stackoverflow.com/questions/33900836/translate-java-2d-array-into-ruby/33903602#33903602", "title": "translate java 2d array into ruby", "body": "<p>Sorry, I don't know java, but have a look at the class methods <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-new\" rel=\"nofollow noreferrer\">Array#new</a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Array::[]</a>, and the instance methods <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Array#[]=</a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Array#[]</a>. Here are some examples that should answer your question (and other questions that may be sparked, hopefully):</p>\n\n<pre><code>Array.new #=&gt; [] \n[]        #=&gt; [] # shorthand for above\n\na = Array.new(5) { [] } #=&gt; [[], [], [], [], []] \n\na[0][0] = 2\na #=&gt; [[2], [], [], [], []] \na[3][2] = 4\na #=&gt; [[2], [], [], [nil, nil, 4], []] \na[1] &lt;&lt; 1\na #=&gt; [[2], [1], [], [nil, nil, 4], []] \na[1] &lt;&lt; 2\na #=&gt; [[2], [1, 2], [], [nil, nil, 4], []] \na[1] &lt;&lt; 3 &lt;&lt; 4\na #=&gt; [[2], [1, 2, 3, 4], [], [nil, nil, 4], []] \na[2] &lt;&lt; [4,5]\na #=&gt; [[2], [1, 2, 3, 4], [[4, 5]], [nil, nil, 4], []] \na[4].concat([4,5]) \na #=&gt; [[2], [1, 2, 3, 4], [[4, 5]], [nil, nil, 4], [4, 5]] \n\na = Array.new(3) { Array.new(3) }\n  #=&gt; [[nil, nil, nil], [nil, nil, nil], [nil, nil, nil]] \na[1][2] = 4 \na #=&gt; [[nil, nil, nil], [nil, nil, 4], [nil, nil, nil]] \n</code></pre>\n\n<p>We could also write the default as a second argument:</p>\n\n<pre><code>a = Array.new(3,[]) #=&gt; [[], [], []]\n</code></pre>\n\n<p>but that can be problematic:</p>\n\n<pre><code>a[0][0] = 'cat'\na #=&gt; [[\"cat\"], [\"cat\"], [\"cat\"]]\n</code></pre>\n\n<p>as is:</p>\n\n<pre><code>a = Array.new(3,Array.new(2)) #=&gt; [[], [], []]\n  #=&gt; [[nil, nil], [nil, nil], [nil, nil]] \na[0][0] = 'cat'\na #=&gt; [[\"cat\", nil], [\"cat\", nil], [\"cat\", nil]] \n</code></pre>\n\n<p>since each element of <code>a</code> is the same array.</p>\n\n<p>Note that Ruby provides a convenience for writing certain methods that is commonly referred to as \"<a href=\"http://rubylearning.com/satishtalim/ruby_syntactic_sugar.html\" rel=\"nofollow noreferrer\">syntactic sugar</a>\". If, for example, you write <code>a = [1,2,3]</code>, Ruby will interpret that as <code>a = Array.[](1,2,3)</code> (and you could write it that way), the class method being <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Array::[]</a>. Similarly, if <code>a</code> equals <code>[1,2,3]</code>, <code>a[1] = 'cat'</code> is decoded as <code>a.[]=(1, 'cat')</code> and <code>a[1] #=&gt; 'cat'</code> is <code>a.[](1)</code>. Similarly, <code>h = {}</code> translates to <code>h = Hash.new</code> and so on.</p>\n\n<p>Note that Ruby does not have a concept of \"multidimensional arrays\". For more on that you may wish to see a comment a left on <a href=\"https://stackoverflow.com/questions/33901706/multidimestional-array-initialize-wrong-number-of-arguments-1-for-0#comment55566748_33901706\">this question</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 731668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2eb699039a952d4e315fd7fa7c48db?s=128&d=identicon&r=PG", "display_name": "user731668", "link": "https://stackoverflow.com/users/731668/user731668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458838118, "creation_date": 1448388592, "last_edit_date": 1448392054, "question_id": 33900836, "link": "https://stackoverflow.com/questions/33900836/translate-java-2d-array-into-ruby", "title": "translate java 2d array into ruby", "body": "<p>How would I write this java code into ruby:</p>\n\n<pre><code>String[] [] Score = new String [row] [col];\nScore[rCount][cCount] = num;\n</code></pre>\n\n<p>I thought it would as simple as:</p>\n\n<pre><code>score=[]\nscore[rcount][ccount]=num\n</code></pre>\n\n<p>But I keep getting \"undefined method `[]=' for nil:NilClass (NoMethodError)\"</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 384, "user_id": 1747748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f603e50ac9c9b182b6181eb500aafb54?s=128&d=identicon&r=PG", "display_name": "Cara McCormack", "link": "https://stackoverflow.com/users/1747748/cara-mccormack"}, "edited": false, "score": 0, "creation_date": 1448389624, "post_id": 33900626, "comment_id": 55564652, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4154864/i-dont-understand-ruby-local-scope\">I don&#39;t understand ruby local scope</a>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1448389710, "post_id": 33900626, "comment_id": 55564714, "body": "Blocks create a new scope, therefore outside that scope the variable is not defined. <code>if</code> on the other hand - doesn&#39;t. When the interpreter sees a line where a variable will be assigned a value, it makes sure it is defined first and initializes it with <code>nil</code>. That is also why <code>foo = bar</code> will give you an error, while <code>baz = baz</code> will not."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1448389809, "post_id": 33900626, "comment_id": 55564759, "body": "In second case, the <code>flag</code> variable is the scope of the block hence not visible outside (<a href=\"http://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/localvars.html\" rel=\"nofollow noreferrer\">ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/localvars.h&zwnj;&#8203;tml</a>).  In the first case though, the variable does get defined even if the code block has not executed - this part I am not sure about - may be Ruby interpreter marks it as defined"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1448392021, "post_id": 33900626, "comment_id": 55566103, "body": "In addition to what @ndn and Wand have said (sorry, Wand, both of you deserved the @ but rules are rules), referencing an initialized local variable normally raises an exception, but Ruby&#39;s parser finds it convenient to set <code>d</code> to <code>nil</code> in your first example, so no exception is raised, even though the line <code>d=1</code> is never executed."}], "answers": [{"comments": [{"owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "edited": false, "score": 0, "creation_date": 1448456445, "post_id": 33901241, "comment_id": 55595392, "body": "Thanks for your explanation as well :)"}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1448391109, "last_edit_date": 1448391109, "creation_date": 1448389999, "answer_id": 33901241, "question_id": 33900626, "link": "https://stackoverflow.com/questions/33900626/variable-scope-in-ruby/33901241#33901241", "title": "Variable scope in Ruby", "body": "<p>In Ruby when you do an assignment to a variable (in your case it's <code>d</code>) anywhere in False-branch of If-statement it declares this variable unless method <code>d=</code> is defined. Basically <code>b = bla-bla-bla</code> in False-branch makes this: <code>b = nil</code>.  </p>\n\n<p>When you use block on an empty array nothing happens. And if an array is not empty variable still be local for current iteration of a block unless it was defined outside block scope, for example:</p>\n\n<pre><code>[1,2,3,4].each do |i|\n  a=i\nend\nputs a\n</code></pre>\n\n<blockquote>\n  <p>NameError: undefined local variable or method `a' for main:Object</p>\n</blockquote>\n\n<pre><code>a=1\n[1,2,3,4].each do |i|\n  a=i\nend\nputs a\n</code></pre>\n\n<blockquote>\n  <p>4</p>\n</blockquote>\n\n<p>Also you have an option to use <code>a</code> as a local one inside a block if it has been previously defined: </p>\n\n<pre><code>a=1\n[1,2,3,4].each do |i; a|\n  a=i\nend\nputs a\n</code></pre>\n\n<blockquote>\n  <p>1</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "edited": false, "score": 1, "creation_date": 1448456287, "post_id": 33901603, "comment_id": 55595291, "body": "Thanks a lot for the detailed answer.Its very helpful :)"}, {"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "reply_to_user": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "edited": false, "score": 0, "creation_date": 1448456326, "post_id": 33901603, "comment_id": 55595317, "body": "@Jim My pleasure, glad it helped."}], "tags": [], "owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "is_accepted": true, "score": 5, "last_activity_date": 1448391271, "creation_date": 1448391271, "answer_id": 33901603, "question_id": 33900626, "link": "https://stackoverflow.com/questions/33900626/variable-scope-in-ruby/33901603#33901603", "title": "Variable scope in Ruby", "body": "<p>The difference is that the <code>if</code> block isn't actually a separate scope like it is in other languages such as Java. Variables declared within the <code>if</code> block have the same scope as the surrounding environment. Now, in your case, that <code>if</code> block won't actually be executed, so you'd normally expect <code>d</code> to be undefined (resulting in the same error you got in the second example). But ruby is a little \"smrt\" in that the interpreter will set up a variable with that label the moment it sees it, regardless whether it is actually executed, because it essentially doesn't know just yet whether that branch will indeed execute. This is explained in <a href=\"http://shop.oreilly.com/product/9780596516178.do\" rel=\"nofollow noreferrer\">\"The Ruby Programming Language\"</a> by David Flanagan and Yukihiro Matsumoto (can't copy paste the text, adding screenshot instead):\n<a href=\"https://i.stack.imgur.com/ag5Ak.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ag5Ak.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the case of the <code>.each</code> loop, that <code>do...end</code> you've written in is actually a <a href=\"http://ruby-doc.org/core-2.2.0/Proc.html\" rel=\"nofollow noreferrer\">block</a>, and it <strong>does</strong> have its own local scope. In other words, variables declared within a block are local to that block only.</p>\n\n<p>However, blocks \"inherit\" the scope of the environment in which they're declared, so what you can do is declare <code>flag</code> outside of the <code>.each</code> iteration block, and then the block will be able to access it and set its value. Note that in the example you've given, that won't happen because you're attempting to iterate an empty array, but at the very least you won't receive an error any more.</p>\n\n<p>Some additional reading: </p>\n\n<ul>\n<li><a href=\"http://jacopretorius.net/2012/01/block-variable-scope-in-ruby.html\" rel=\"nofollow noreferrer\">Block variable scope in ruby</a></li>\n<li><a href=\"http://www.sitepoint.com/understanding-scope-in-ruby/\" rel=\"nofollow noreferrer\">Understanding scopes in ruby</a></li>\n</ul>\n"}], "owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 2, "accepted_answer_id": 33901603, "answer_count": 2, "score": 5, "last_activity_date": 1448391271, "creation_date": 1448387852, "question_id": 33900626, "link": "https://stackoverflow.com/questions/33900626/variable-scope-in-ruby", "title": "Variable scope in Ruby", "body": "<p>Consider the following two snippets of ruby code.</p>\n\n<pre><code>puts \"One\"\nif false\n  d = 1\nend\nputs \"Two\"\nputs d\nputs \"Three\"\n</code></pre>\n\n<p>This prints the following</p>\n\n<pre><code>One\nTwo\n\nThree\n</code></pre>\n\n<p>Now, consider the following</p>\n\n<pre><code>[].each do |i|\n  flag = false\nend\nputs \"Two\"\nputs flag\nputs \"Three\"\n</code></pre>\n\n<p>This gives the following</p>\n\n<pre><code>Two\n'&lt;main&gt;': undefined local variable or method 'flag' for main:Object (NameError)\n</code></pre>\n\n<p>Why is it that in the first case a blank is printed and the 2nd case an error is thrown ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1448388842, "post_id": 33900505, "comment_id": 55564205, "body": "<code>@floors</code> is an empty array and your code uses <code>@floors[0]</code> which happens to be nil.  Your code as shown above gives error  <code>ArgumentError: bad value for range</code>"}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1448389581, "post_id": 33900505, "comment_id": 55564637, "body": "The elevator class runs fine for me. Would you like me to put the entire uncommented class up on github?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1448389680, "post_id": 33900505, "comment_id": 55564691, "body": "If its okay with you, you can share it - and put a link of that in the question above."}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1448389790, "post_id": 33900505, "comment_id": 55564752, "body": "<a href=\"https://gist.github.com/sheekap/730088ddef85511dbd3e\" rel=\"nofollow noreferrer\">gist.github.com/sheekap/730088ddef85511dbd3e</a> (@floors is populated in the check_floor_number method)"}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1448392158, "post_id": 33901652, "comment_id": 55566178, "body": "Thank you! That explanation helps a lot and the tests are passing now :)"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 0, "last_activity_date": 1448391425, "creation_date": 1448391425, "answer_id": 33901652, "question_id": 33900505, "link": "https://stackoverflow.com/questions/33900505/trouble-getting-tests-to-run-properly/33901652#33901652", "title": "Trouble getting tests to run properly", "body": "<p>Your test class <code>ElevatorTest</code> is redefining the <code>Elevator</code> to override method <code>get_input</code>, but it is not opening the class <code>Elevator</code> defined in <code>elevator.rb</code>, but instead it is sort of creating a new class <code>Elevator</code> which happens to be defined inside the class <code>ElevatorTest</code>.   Remember every class is also a module, so now you have a new class <code>ElevatorTest::Elevator</code>.</p>\n\n<p>To fix this issue, I have made some changes to <code>elevator_test.rb</code> which is shown below.</p>\n\n<pre><code>gem 'minitest', '&gt;= 5.0.0'\nrequire 'minitest/spec'\nrequire 'minitest/autorun'\nrequire_relative 'elevator'\n\nclass Elevator\n    @@moves = [\"2\", \"N\"].each\n    def get_input; @@moves.next end\nend\n\nclass ElevatorTest &lt; MiniTest::Test\n  def test_working\n    assert_equal(1, 1)\n  end\n\n  describe \"it can move to a floor\" do\n    before do\n    end\n\n    it \"should move to floor 2\" do\n      e = Elevator.new\n      e.run\n      assert_equal(e.current_floor, 2)\n    end\n  end\nend\n</code></pre>\n\n<p>Also, please remember to use <code>.each</code> while defining <code>@@moves</code> - it returns an enumerator.  We can call <code>.next</code> only on an enumerator</p>\n"}], "owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 33901652, "answer_count": 1, "score": 0, "last_activity_date": 1448391425, "creation_date": 1448387456, "last_edit_date": 1495542217, "question_id": 33900505, "link": "https://stackoverflow.com/questions/33900505/trouble-getting-tests-to-run-properly", "title": "Trouble getting tests to run properly", "body": "<p>I've been trying to test a program that simulates an elevator for two days now with little success. Here's my elevator class, the program is still a work in progress and I've also commented out some methods that might not be essential to the test I'm having trouble with. I'll gladly show more code if you think it's needed</p>\n\n<pre><code>class Elevator\n  attr_accessor :current_floor\n\n  GROUND = 0\n  TOP = 15\n\n  def initialize\n    @floors = []                  # list of floors to travel to\n    @pending = []                 # store floors not in direction of travel\n    @current_floor = GROUND\n    @going_up = true              # cannot travel downward from ground floor\n    @going_down = false\n  end\n\n  def get_input\n    gets.chomp\n  end\n\n  def run\n    enter_floors\n    sort_floors\n    move_to_floor\n  end\n\n  def enter_floors\n    # prompts the user for input and calls check_floor_numbers\n  end\n\n  def check_floor_numbers floors\n    # calls validate_floors to ensure user entered '2' instead of 'two'\n    # if proper floor numbers have been entered this method adds the number\n    # to @floors array other wise it calls floor_error_message\n  end\n\n  def floor_error_message\n    puts \"Please enter numbers only.\"\n    enter_floors\n  end\n\n  def sort_floors\n    # if we are on the ground floor this method sorts @floors in ascending order\n    # if we are on the top floor it sorts @floors in descending order\n    # else it calls check_direction_of_travel\n  end\n\n  def move_to_floor\n    floor = @floors[0]\n\n    if @current_floor == floor\n      puts \"You are already on floor #{floor}\"\n    else\n      print_direction\n      (@current_floor..floor).each { |floor| puts \"...#{floor}\" }\n      @current_floor = floor            # update current_floor\n      @floors.delete_at(0)              # remove floor from list\n    end\n\n    check_for_more_passengers\n  end\n\n  def check_for_more_passengers\n    puts \"Are there any more passengers? (Y/N)\"\n    answer = (get_input).upcase\n\n    answer == 'Y' ? run : check_next_move\n  end\n\n  def check_next_move\n    if @floors.empty? &amp;&amp; @pending.empty?\n      end_ride\n    else\n      move_to_floor\n    end\n  end\n\n  def check_direction_of_travel\n    # not implemented - add floor to appropriate array depending on dir\n    # of travel\n  end\n\n  def end_ride\n    puts \"\\n\\nEND.\"\n  end\n\n  def print_direction\n    msg = \" \"\n    @going_up ? msg = \"Going Up!\" : msg = \"Going Down!\"\n    puts msg\n  end\nend\n</code></pre>\n\n<p>I'm trying to test that the elevator can move to a specific floor. At first I was having trouble testing input from the console without running the program itself. I <a href=\"https://stackoverflow.com/questions/33854700/testing-program-that-runs-with-user-input-from-the-console\">asked a question about this</a> and was referred to <a href=\"https://stackoverflow.com/questions/16948645/how-do-i-test-a-function-with-gets-chomp-in-it/16948786#16948786\">this answer in a different question</a>. The answer in question extract <code>gets.chomp</code> to a separate method then overrides the method in the tests. I ended up with something like this:</p>\n\n<pre><code>  describe \"it can move to a floor\" do\n    before do\n        @@moves = [\"2\", \"N\"]\n        def get_input; @@moves.next end\n    end\n\n    it \"should move to floor 2\" do\n      e = Elevator.new\n      e.run\n      assert_equal(e.current_floor, 2)\n    end\n  end\n</code></pre>\n\n<p><strong>Problem:</strong>  <code>get_input</code> was not properly overidden and running the test suit prompted the user for input so it was suggested that I <a href=\"https://stackoverflow.com/a/33854943/2733137\">open the Elevator class in the test itself</a> to ensure that the method was properly overridden. Attempting to do so eventually led to a test like this:</p>\n\n<pre><code>  describe \"it can move to a floor\" do\n    before do\n      class Elevator\n        attr_accessor :current_floor\n        @@moves = [\"2\", \"N\"]\n        def get_input; @@moves.next end\n        def run; end\n      end\n    end\n\n    it \"should move to floor 2\" do\n      e = Elevator.new\n      e.run\n      assert_equal(e.current_floor, 2)\n    end\n  end\n</code></pre>\n\n<p>I had to override <code>run</code> and add an attr_accessor for <code>current_floor</code> because I was getting method missing errors.</p>\n\n<p><strong>Problem:</strong> This test gives the following error:</p>\n\n<blockquote>\n  <p>1) Failure: it can move to a floor#test_0001_should move to floor 2\n  [elevator_test.rb:24]: Expected: nil   Actual: 2</p>\n</blockquote>\n\n<p>I've tried to tidy up the Elevator class as much as possible and keep the methods as simple as I could given the parameters of the program. </p>\n\n<p>Can anyone point me in the right direction towards getting this solved, with maybe pseudocode examples (if possible) to demonstrate how I should approach this problem if the answer is to refactor. </p>\n\n<p>Please bear in mind that I'd also like to implement other tests like checking that the elevator class can maintain a list of floors, or that it can change direction, in the future when you answer. </p>\n"}, {"tags": ["ruby", "multidimensional-array", "hash"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 4, "creation_date": 1448385195, "post_id": 33899766, "comment_id": 55562072, "body": "What do you want as a result?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1448385528, "post_id": 33899766, "comment_id": 55562265, "body": "The arrays are different lengths so it isn&#39;t clear what the resultant <code>Hash</code> should look like."}, {"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 4, "creation_date": 1448385975, "post_id": 33899766, "comment_id": 55562540, "body": "example of your expected result?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448397085, "post_id": 33899766, "comment_id": 55569076, "body": "Best not to post a question and walk away, as it my not be as clear as you think it is, especially considering that you are new to Ruby. Please edit to add the desired result (as opposed to doing that in a comment)."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448395366, "post_id": 33900176, "comment_id": 55568136, "body": "This returns <code>{ &#39;apple&#39;=&gt;&#39;NY&#39;, &#39;banana&#39;=&gt;&#39;SF&#39; }</code>. How does that satisfy the requirement that &quot;each object in <code>array_1</code> will be assigned with the objects in <code>array_2</code>&quot;?"}], "tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": false, "score": 2, "last_activity_date": 1448386336, "creation_date": 1448386336, "answer_id": 33900176, "question_id": 33899766, "link": "https://stackoverflow.com/questions/33899766/ruby-how-to-create-a-hash-from-two-arrays/33900176#33900176", "title": "Ruby, how to create a hash from two arrays?", "body": "<p>You can use the <code>zip</code> method, like so:</p>\n\n<p><code>Hash[array_2.zip(array_1)]</code></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448395993, "post_id": 33900431, "comment_id": 55568493, "body": "This implies that <code>{ &quot;NY&quot;=&gt;&quot;apple&quot;, &quot;SF&quot;=&gt;&quot; banana&quot;, &quot;NL&quot;=nil, &quot;SY&quot;= nil }</code> is the desired result. I may be wrong, but I think you have answered a different question."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1448396350, "post_id": 33900431, "comment_id": 55568676, "body": "@CarySwoveland, who knows :)"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 6, "last_activity_date": 1448387215, "creation_date": 1448387215, "answer_id": 33900431, "question_id": 33899766, "link": "https://stackoverflow.com/questions/33899766/ruby-how-to-create-a-hash-from-two-arrays/33900431#33900431", "title": "Ruby, how to create a hash from two arrays?", "body": "<pre><code>x = [:foo, :bar, :baz]\ny = [1, 2, 3]\nx.zip(y).to_h # =&gt; {:foo=&gt;1, :bar=&gt;2, :baz=&gt;3}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1448388293, "creation_date": 1448388293, "answer_id": 33900754, "question_id": 33899766, "link": "https://stackoverflow.com/questions/33899766/ruby-how-to-create-a-hash-from-two-arrays/33900754#33900754", "title": "Ruby, how to create a hash from two arrays?", "body": "<pre><code>h = array_1.product([array_2]).to_h\n  #=&gt; {\"NY\"=&gt;[\"apple\", \"banana\"], \"SF\"=&gt;[\"apple\", \"banana\"],\n  #    \"NL\"=&gt;[\"apple\", \"banana\"], \"SY\"=&gt;[\"apple\", \"banana\"]}\n</code></pre>\n\n<p>We were given <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-to_h\" rel=\"nofollow\">Array#to_h</a> in MRI v2.0. For earlier versions, use <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-Hash\" rel=\"nofollow\">Kernel#Hash</a>:</p>\n\n<pre><code>h = Hash[array_1.product([array_2])]\n</code></pre>\n\n<p>but beware:</p>\n\n<pre><code>array_2[0] = \"cat\"\narray_2\n  #=&gt; [\"cat\", \"banana\"] \nh #=&gt; {\"NY\"=&gt;[\"cat\", \"banana\"], \"SF\"=&gt;[\"cat\", \"banana\"],\n  #    \"NL\"=&gt;[\"cat\", \"banana\"], \"SY\"=&gt;[\"cat\", \"banana\"]}\n</code></pre>\n\n<p>You may instead want:</p>\n\n<pre><code>h = array_1.each_with_object({}) { |str,h| h[str] = array_2.dup }\n  #=&gt; {\"NY\"=&gt;[\"apple\", \"banana\"], \"SF\"=&gt;[\"apple\", \"banana\"],\n  #    \"NL\"=&gt;[\"apple\", \"banana\"], \"SY\"=&gt;[\"apple\", \"banana\"]}\n\narray_2[0] = \"cat\"\nh #=&gt; {\"NY\"=&gt;[\"apple\", \"banana\"], \"SF\"=&gt;[\"apple\", \"banana\"],\n  #    \"NL\"=&gt;[\"apple\", \"banana\"], \"SY\"=&gt;[\"apple\", \"banana\"]}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5272231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7f71efbbfc67f9f86d549a90e1d3f5?s=128&d=identicon&r=PG", "display_name": "Elad Kuzy", "link": "https://stackoverflow.com/users/5272231/elad-kuzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1448388293, "creation_date": 1448385010, "last_edit_date": 1448387304, "question_id": 33899766, "link": "https://stackoverflow.com/questions/33899766/ruby-how-to-create-a-hash-from-two-arrays", "title": "Ruby, how to create a hash from two arrays?", "body": "<p>I'm fairly a beginner in Ruby and I'm trying to do the following:\nLet's say I have two arrays:</p>\n\n<pre><code>array_1 = [\"NY\", \"SF\", \"NL\", \"SY\"]\narray_2 = [\"apple\", \"banana\"]\n</code></pre>\n\n<p>I want to merge the arrays to a hash so each object in <code>array_1</code> will be assigned with the objects in <code>array_2</code></p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest-client"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "edited": false, "score": 0, "creation_date": 1448385736, "post_id": 33899886, "comment_id": 55562402, "body": "Thank you for the swift reply. I had tried this before and get the same error as the second stacktrace that I posted. I double and triple checked my request and it is consistent with the working cURL request. :("}, {"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "edited": false, "score": 0, "creation_date": 1448386380, "post_id": 33899886, "comment_id": 55562769, "body": "According to the second stacktrace, my content_type seems to have not gone through? My syntax for that seems fine though.."}], "tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": false, "score": 1, "last_activity_date": 1448385381, "creation_date": 1448385381, "answer_id": 33899886, "question_id": 33899715, "link": "https://stackoverflow.com/questions/33899715/json-rest-client-authorization-in-rails/33899886#33899886", "title": "JSON Rest-Client Authorization in Rails", "body": "<p>You don't need to nest the params like that. Just do:</p>\n\n<pre><code>RestClient.post 'http://localhost/WebService/AuthenticateLogin', {\"RuntimeEnvironment\" =&gt; 1, 'Email' =&gt; 'someone@example.com', 'Password' =&gt; 'Pa$$worD'}, :content_type =&gt; :json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "is_accepted": true, "score": 0, "last_activity_date": 1448386753, "last_edit_date": 1495535462, "creation_date": 1448386753, "answer_id": 33900291, "question_id": 33899715, "link": "https://stackoverflow.com/questions/33899715/json-rest-client-authorization-in-rails/33900291#33900291", "title": "JSON Rest-Client Authorization in Rails", "body": "<p>I noticed my content_type was not being updated, searched it up and StackOverflow came through for me.\n<a href=\"https://stackoverflow.com/questions/8189932/how-do-i-make-rubys-restclient-gem-respect-content-type-on-post\">How do I make Ruby&#39;s RestClient gem respect content_type on post?</a></p>\n\n<p>I basically just changed my request to be:</p>\n\n<pre><code>RestClient.post 'http://localhost/WebService/AuthenticateLogin', '{\"RuntimeEnvironment\":1, \"Email\":\"someone@example.com\", \"Password\":\"Pa$$worD\"}', :content_type =&gt; \"json\"\n</code></pre>\n\n<p>I merely added quotes around my params like so: <code>'{params}'</code>\nAnd instead of using <code>=&gt;</code> in the params, I changed to colons just like the actual request I used in cURL and everything worked like a charm.</p>\n\n<p>Also note I quoted the <code>\"json\"</code> content_type.</p>\n\n<p>Thanks @rlarcombe for your help.</p>\n"}], "owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 33900291, "answer_count": 2, "score": 1, "last_activity_date": 1448386753, "creation_date": 1448384890, "question_id": 33899715, "link": "https://stackoverflow.com/questions/33899715/json-rest-client-authorization-in-rails", "title": "JSON Rest-Client Authorization in Rails", "body": "<p>For some reason when I run this in my Rails console it is not working.</p>\n\n<pre><code>RestClient.post 'http://localhost/WebService/AuthenticateLogin', :content_type =&gt; :json, {:params =&gt; {:RuntimeEnvironment =&gt; 1, 'Email' =&gt; 'someone@example.com', 'Password' =&gt; 'Pa$$worD'}}\n</code></pre>\n\n<p>The odd part is when I do the same with cURL it works perfectly fine:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -d '{\"RuntimeEnvironment\":1,\"Email\":\"someone@example.com\",\"Password\":\"Pa$$worD\"}' -X POST http://localhost/WebService/AuthenticateLogin\n</code></pre>\n\n<p>Here is my stacktrace:</p>\n\n<pre><code>SyntaxError: (irb):33: syntax error, unexpected '\\n', expecting =&gt;\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>And because I think it may be relevant, I used this statement as well:</p>\n\n<pre><code>RestClient.post 'http://localhost/WebService/AuthenticateLogin', :content_type =&gt; :json, :params =&gt; {:RuntimeEnvironment =&gt; 1, 'Email' =&gt; 'someone@example.com', 'Password' =&gt; 'Pa$$worD'}\n</code></pre>\n\n<p>And got this as my stacktrace:</p>\n\n<pre><code>RestClient.post \"http://localhost/WebService/AuthenticateLogin\", \"content_type=json&amp;params[RuntimeEnvironment]=1&amp;params[Email]=someone%40example.com&amp;params[Password]=Pa$$worD\", \"Accept\"=&gt;\"*/*; q=0.5, application/\nxml\", \"Accept-Encoding\"=&gt;\"gzip, deflate\", \"Content-Length\"=&gt;\"114\", \"Content-Type\"=&gt;\"application/x-www-form-urlencoded\"\n# =&gt; 400 BadRequest | text/html 2738 bytes\nRestClient::BadRequest: 400 Bad Request\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/abstract_response.rb:48:in `return!'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/request.rb:230:in `process_result'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/request.rb:178:in `block in transmit'\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:852:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient.rb:72:in `post'\n        from (irb):34\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have scoured Stack and tried different ways of listing out the params, moving/removing the content_type, etc. Nothing is working for me.</p>\n"}]