[{"tags": ["ruby-on-rails", "ruby", "ssl", "rubygems"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1451518804, "post_id": 34538831, "comment_id": 56820170, "body": "You have to install openssl on your operating system before you install eventmachine. BTW, according to my experience, eventmachine does not work well with rails 4.2. You will have to downgrade to rails 4.1"}, {"owner": {"reputation": 754, "user_id": 4742773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e2f7e04a66b903ef279d0a2bf37da992?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio chiazzo", "link": "https://stackoverflow.com/users/4742773/ignacio-chiazzo"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1451519049, "post_id": 34538831, "comment_id": 56820234, "body": "I already tried installing openssl but it did not work. Any other advice?"}, {"owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "edited": false, "score": 0, "creation_date": 1451519242, "post_id": 34538831, "comment_id": 56820289, "body": "If you are using El Capitan, you would have to use sudo when installing OpenSSL."}, {"owner": {"reputation": 754, "user_id": 4742773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e2f7e04a66b903ef279d0a2bf37da992?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio chiazzo", "link": "https://stackoverflow.com/users/4742773/ignacio-chiazzo"}, "reply_to_user": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "edited": false, "score": 0, "creation_date": 1451519304, "post_id": 34538831, "comment_id": 56820303, "body": "@pauloancheta Yes, I did it"}, {"owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "edited": false, "score": 0, "creation_date": 1451519552, "post_id": 34538831, "comment_id": 56820370, "body": "Try brew link openssl --force"}, {"owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1451523271, "post_id": 34538831, "comment_id": 56821308, "body": "@Aetherus EventMachine working bad with rails 4.2 should not be true, since it is a dependency of <code>ActionCable</code> which is a feature available from rails 5 (but also available for Rails 4.2.3+)"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "edited": false, "score": 0, "creation_date": 1451523475, "post_id": 34538831, "comment_id": 56821353, "body": "@Kkulikovskis active_record 4.2 does not have the class <code>ClosedTransaction</code>, which em-synchrony depends on."}, {"owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1451523808, "post_id": 34538831, "comment_id": 56821452, "body": "@Aetherus not really true either: <a href=\"http://www.rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/ClosedTransaction\" rel=\"nofollow noreferrer\">rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/&hellip;</a>   this is for Rails 4.1.7."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "edited": false, "score": 0, "creation_date": 1451524053, "post_id": 34538831, "comment_id": 56821521, "body": "@Kkulikovskis Yes there is the class in rails up to 4.1.15, but not in rails 4.2."}, {"owner": {"reputation": 754, "user_id": 4742773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e2f7e04a66b903ef279d0a2bf37da992?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio chiazzo", "link": "https://stackoverflow.com/users/4742773/ignacio-chiazzo"}, "reply_to_user": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "edited": false, "score": 0, "creation_date": 1451525081, "post_id": 34538831, "comment_id": 56821776, "body": "I agree with @Kkulikovskis"}], "answers": [{"comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "edited": false, "score": 1, "creation_date": 1473225859, "post_id": 34539575, "comment_id": 66052648, "body": "Had similar problem, but mine says <code>-v &#39;1.0.7&#39;</code>; replaced the 3 with 7 and it worked! I Thanks :)"}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1484916257, "post_id": 34539575, "comment_id": 70719314, "body": "Thanks..this solution worked for 1.0.7"}, {"owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "edited": false, "score": 0, "creation_date": 1485446235, "post_id": 34539575, "comment_id": 70937159, "body": "Thanks man! it worked for <code>-v 1.0.7</code>"}, {"owner": {"reputation": 1620, "user_id": 4684597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SC21W.jpg?s=128&g=1", "display_name": "Zoran Pandovski", "link": "https://stackoverflow.com/users/4684597/zoran-pandovski"}, "edited": false, "score": 0, "creation_date": 1551648180, "post_id": 34539575, "comment_id": 96706851, "body": "Installing  ruby-dev  solved the issue for me."}, {"owner": {"reputation": 137, "user_id": 5839055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8fb45b895458105d9d74bbadefaa4b7?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro F.", "link": "https://stackoverflow.com/users/5839055/mauro-f"}, "edited": false, "score": 2, "creation_date": 1570648520, "post_id": 34539575, "comment_id": 102983060, "body": "for me it was because I did not have <code>g++</code> installed, I guess <code>ruby-dev</code> is also necessary then"}], "tags": [], "owner": {"reputation": 2109, "user_id": 1292818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e426389cb417442835bb1d62273fb53d?s=128&d=identicon&r=PG", "display_name": "cassioscabral", "link": "https://stackoverflow.com/users/1292818/cassioscabral"}, "is_accepted": true, "score": 13, "last_activity_date": 1451523293, "creation_date": 1451523293, "answer_id": 34539575, "question_id": 34538831, "link": "https://stackoverflow.com/questions/34538831/an-error-occurred-while-installing-eventmachine-1-0-3/34539575#34539575", "title": "An error occurred while installing eventmachine (1.0.3)", "body": "<p>I had this problem before and running the command below worked</p>\n\n<pre><code>gem install eventmachine -v '1.0.3'  -- --with-cppflags=-I/usr/local/opt/openssl/include\n</code></pre>\n\n<p>I can't remember where I found it or the reason why this work. Maybe someone else can complement the answer.</p>\n"}], "owner": {"reputation": 754, "user_id": 4742773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e2f7e04a66b903ef279d0a2bf37da992?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio chiazzo", "link": "https://stackoverflow.com/users/4742773/ignacio-chiazzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4231, "favorite_count": 0, "closed_date": 1451523411, "accepted_answer_id": 34539575, "answer_count": 1, "score": 1, "last_activity_date": 1451523293, "creation_date": 1451517988, "last_edit_date": 1451519141, "question_id": 34538831, "link": "https://stackoverflow.com/questions/34538831/an-error-occurred-while-installing-eventmachine-1-0-3", "closed_reason": "Duplicate", "title": "An error occurred while installing eventmachine (1.0.3)", "body": "<p>I have Rails 4.2.5 and ruby 2.0.0 installed.</p>\n\n<p>This is a Gemfile of a project :</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem \"whenever\"\n\ngem \"therubyracer\"\ngem \"less-rails\"\ngem 'twitter-bootstrap-rails', :git =&gt; 'git://github.com/seyhunak/twitter-bootstrap-rails.git'\n\ngem 'geokit'\n\ngem 'sequenced'\n\ngem 'acts-as-taggable-on'\n\ngem 'bcrypt', :require =&gt; 'bcrypt'\n\ngem 'rack-cors', :require =&gt; 'rack/cors'\n\n# Paperclip\ngem \"paperclip\", \"~&gt; 4.2\"\n\ngem \"thin\"\n\ngem \"passenger\"\n\ngem 'geocoder'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.6'\n# Use sqlite3 as the database for Active Record\ngem 'mysql2'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.3'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\ngem 'spring',        group: :development\n</code></pre>\n\n<p>When I make bundle install I receive the following error : \n   \"An error occurred while installing eventmachine (1.0.3), and Bundler cannot continue. Make sure that <code>gem install eventmachine -v '1.0.3'</code> succeeds before bundling.\"</p>\n\n<p>And if I make gem install eventmachine I have the following error</p>\n\n<pre><code>make \"DESTDIR=\" compiling binder.cpp\nIn file included from binder.cpp:20:\n./project.h:116:10: fatal error: 'openssl/ssl.h' file not found\n#include &lt;openssl/ssl.h&gt;\n         ^\n1 error generated.\nmake: *** [binder.o] Error 1\nGem files will remain installed in        /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.8 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.8/ext/gem_make.out\n</code></pre>\n\n<p>How Can I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "erb"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1451517198, "post_id": 34538655, "comment_id": 56819635, "body": "The Rails way would be to store the company names in the database and load them in a controller..."}, {"owner": {"reputation": 552, "user_id": 4789789, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e345d89712d63b16a426a0a2c65c8c55?s=128&d=identicon&r=PG&f=1", "display_name": "gonzalo2000", "link": "https://stackoverflow.com/users/4789789/gonzalo2000"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1451517491, "post_id": 34538655, "comment_id": 56819745, "body": "Thank you for the pointer. Currently working through Michael Hartl&#39;s tutorial, I&#39;ll keep an eye as to how to do this."}], "answers": [{"tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1451517863, "creation_date": 1451517863, "answer_id": 34538811, "question_id": 34538655, "link": "https://stackoverflow.com/questions/34538655/rails-ul-with-an-array-in-the-view/34538811#34538811", "title": "rails &lt;ul&gt; with an array in the view", "body": "<p>You will want to \"paginate\" your data.  I.e. you select a size (say 25 items) then you only display that many items on a \"page\".  At the top (and/or bottom) of the page you have a navigation bar that lets you change pages.</p>\n\n<p>If you had the data in a database, then there are pagination gems that will do this with a couple of lines of code.  A popular one is will_paginate <a href=\"https://github.com/mislav/will_paginate\" rel=\"nofollow\">https://github.com/mislav/will_paginate</a>.  </p>\n\n<p>If you just want experiment more on the UI side, you can use a jquery pagination plugin:  <a href=\"http://esimakin.github.io/twbs-pagination/\" rel=\"nofollow\">http://esimakin.github.io/twbs-pagination/</a>  for example.</p>\n\n<pre><code>    $('.list-group').twbsPagination({\n    totalPages: 35,\n    visiblePages: 7,\n    onPageClick: function (event, page) {\n        $('#page-content').text('Page ' + page);\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 1, "last_activity_date": 1451569654, "creation_date": 1451569654, "answer_id": 34547366, "question_id": 34538655, "link": "https://stackoverflow.com/questions/34538655/rails-ul-with-an-array-in-the-view/34547366#34547366", "title": "rails &lt;ul&gt; with an array in the view", "body": "<p>Make a model called <code>Company</code>:</p>\n\n<pre><code>#app/models/company.rb\nclass Company &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>You'll also need the corresponding database values:</p>\n\n<pre><code>$ rails g migration CreateCompany\n\n#db/migrate/create_company.rb\nclass CreateCompany &lt; ActiveRecord::Migration\n   def change\n      create_table :companies do |t|\n         t.string :name\n         t.timestamps\n      end\n   end\nend\n\n$ rake db:migrate\n</code></pre>\n\n<p>--</p>\n\n<p>This will allow you to store <em><code>Company</code></em> records, with corresponding attributes (<code>name</code> being the one highlighted in this example):</p>\n\n<pre><code>#config/routes.rb\nresources :companies #-&gt; url.com/companies\n\n#app/controllers/companies_controller.rb\nclass CompaniesController &lt; ApplicationController\n   def index\n      @companies = Company.all\n   end\nend\n\n#app/views/companies/index.html.erb\n&lt;ul class=\"list-group\"&gt;\n  &lt;% @company.each do |company| %&gt;\n    &lt;%= company.name %&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<hr>\n\n<p>You could create some test <code>Company</code> values by using the <a href=\"http://guides.rubyonrails.org/command_line.html#rails-console\" rel=\"nofollow\"><code>rails console</code></a>:</p>\n\n<pre><code>$ rails c\n$ names = %w(test1 test2 test3)\n$ names.each do |name|\n$ - Company.create name: name\n$ end \n</code></pre>\n"}], "owner": {"reputation": 552, "user_id": 4789789, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e345d89712d63b16a426a0a2c65c8c55?s=128&d=identicon&r=PG&f=1", "display_name": "gonzalo2000", "link": "https://stackoverflow.com/users/4789789/gonzalo2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 34547366, "answer_count": 2, "score": 1, "last_activity_date": 1451903467, "creation_date": 1451516878, "last_edit_date": 1451903467, "question_id": 34538655, "link": "https://stackoverflow.com/questions/34538655/rails-ul-with-an-array-in-the-view", "title": "rails &lt;ul&gt; with an array in the view", "body": "<p>I'm starting out with rails, still working on basics and experimenting</p>\n\n<p>In my view have an array with company names; I'm using erb to just display the items with <code>&lt;ul&gt;</code>. </p>\n\n<pre><code>&lt;% companies = [\"a\", \"b\", \"c\"] %&gt;\n&lt;ul class=\"list-group\"&gt;\n  &lt;% companies.each do |item| %&gt;\n    &lt;li class=\"list-group-item\"&gt;&lt;strong&gt;&lt;%= item %&gt;&lt;/strong&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>The page is thus far doing what I want (displaying the company names). I was wondering what the rails way would be to do this, given that the companies array is somewhat lengthy. Is there a better way to handle the information fro the array, without cluttering the view page? Many thanks.</p>\n"}, {"tags": ["ruby", "regex", "nokogiri", "mechanize"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451515565, "post_id": 34538115, "comment_id": 56819097, "body": "That&#39;s not a page, that&#39;s Mechanize&#39;s representation of the page as an object. Please supply the HTML you&#39;re parsing. Read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451515766, "post_id": 34538115, "comment_id": 56819169, "body": "The html is in the format &lt;a href=&quot;/lablink/secure/ViewSample.do?id=229651&quot;&gt;TCO23_IIIE&lt;/a&zwnj;&#8203;&gt;&lt;/td&gt; for each link"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451515927, "post_id": 34538115, "comment_id": 56819217, "body": "From &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;: &quot;If a web page problem requires HTML, some JavaScript and a stylesheet, include all three.&quot; Provide us usable HTML; Don&#39;t make us rebuild a HTML page just to help you. You&#39;re asking us to use our time to help you, and making it harder for us to do so, which takes away time from helping others."}, {"owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451516590, "post_id": 34538115, "comment_id": 56819439, "body": "Im just looking for how a regex can be used to get the text I need. From that point of view I have provided the minimal example. I think the question is complete"}], "answers": [{"comments": [{"owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "edited": false, "score": 0, "creation_date": 1451549559, "post_id": 34540651, "comment_id": 56828233, "body": "Perfect thank you. I also managed to get it to work with master_page.links_with(:href =&gt; /ViewSample/)"}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 2, "last_activity_date": 1451532765, "creation_date": 1451532765, "answer_id": 34540651, "question_id": 34538115, "link": "https://stackoverflow.com/questions/34538115/using-mechanize-with-regular-expression-to-select-specific-text-in-links-to-foll/34540651#34540651", "title": "Using mechanize with regular expression to select specific text in links to follow", "body": "<p>That's what <code>select</code> is for:</p>\n\n<pre><code>page.links.select{|link| link.href[/ViewSample/]}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>page.search('a').select{|a| a[:href][/ViewSample/]}\n</code></pre>\n"}], "owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 34540651, "answer_count": 1, "score": 1, "last_activity_date": 1451532765, "creation_date": 1451513808, "question_id": 34538115, "link": "https://stackoverflow.com/questions/34538115/using-mechanize-with-regular-expression-to-select-specific-text-in-links-to-foll", "title": "Using mechanize with regular expression to select specific text in links to follow", "body": "<p>I have a page as follows:</p>\n\n<pre><code>#&lt;Mechanize::Page::Link\n   \"TCO11_IIIE\"\n   \"/me/secure/ViewSample.do?id=211112\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO15_IIIE\"\n   \"/me/secure/do?id=211113\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO16_IIC\"\n   \"/me/secure/ViewSample.do?id=211114\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO17_IIC\"\n   \"/me/secure/ViewSample.do?id=211116\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO17_IIIE\"\n   \"/me/secure/ViewSample.do?id=211115\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO19_IID\"\n   \"/me/secure/ViewSample.do?id=211117\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO21_IIC\"\n   \"/me/secure/ViewSample.do?id=211118\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO21_IIIE\"\n   \"/me/secure/do?id=211119\"&gt;\n  #&lt;Mechanize::Page::Link\n   \"TCO23_IIC\"\n   \"/me/secure/do?id=211120\"&gt;\n</code></pre>\n\n<p>I am writing a script to try to follow the links which have 'ViewSample' in them (and then download specific links ending in fq but not relevant for this question).</p>\n\n<p>I am a bit confused as to how to do this as I think the method <code>.search</code> and <code>.links_with</code> require exact strings for the whole link text (?or is it the href???). So I think I need a regular expression in the first line in the code below:</p>\n\n<pre><code>master_page.search(\"ViewSample\") do |download_list_link|\n    download_list_page = agent.get(download_list_link[:href])\n\n    download_list_page.search(\"td &gt; a\") do |link|\n        if link.content.include?(\"fq.gz\")\n            out_file = File.new(\"downloaded_file\", \"w\")\n            out_file.puts($agent.get_file(link[:href]))\n            out_file.close\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "calendar"], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1451515608, "post_id": 34538059, "comment_id": 56819111, "body": "@AnthonyGalli.com I&#39;m not sure if I understand why that would prevent you from doing what I&#39;m saying. I will update based on your tutorial link."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1451517864, "post_id": 34538059, "comment_id": 56819883, "body": "@AnthonyGalli.com Oops my logic was mistaken, I re-edited EDIT3 to fix it."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1451517932, "post_id": 34538059, "comment_id": 56819905, "body": "The idea is if <code>day</code> (the current day we are evaluating on the calender) is greater than <b>any</b> of the <code>route.date_started</code> and less than <code>Date.today</code> then add <code>&quot;completed&quot;</code>."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1451517844, "last_edit_date": 1451517844, "creation_date": 1451513592, "answer_id": 34538059, "question_id": 34537825, "link": "https://stackoverflow.com/questions/34537825/calendar-date-started-until-date-current/34538059#34538059", "title": "Calendar: date_started until Date.current?", "body": "<p>If I'm understanding correctly why not just check if the given day in the calender falls within your specified range of dates?</p>\n\n<p>controller:</p>\n\n<pre><code>@date_started = Date.today - 2.days\n@today = Date.today\n@given_date = Date.yesterday\n</code></pre>\n\n<p>html:</p>\n\n<pre><code>&lt;td class=\"&lt;%= 'completed' if @given_date &gt;= @date_started and @given_date &lt;= @today %&gt;\"&gt;\n</code></pre>\n\n<p>EDIT</p>\n\n<p>I suppose <code>@given_date</code> will need to be an array so each day can be iterated in your HTML. It's not clear how to write that without seeing how you're rendering your calender. But the general idea should work.</p>\n\n<p>EDIT2</p>\n\n<p>The tutorial HTML is something like this:</p>\n\n<pre><code>&lt;%= calender do |date| %&gt;\n  &lt;%= date.day %&gt;\n  # assuming this is where you add your `completed` css class somehow\n  # check if date.day falls between the @date_started and @today range\n&lt;% end %&gt;\n</code></pre>\n\n<p>EDIT3</p>\n\n<p>Okay I see why this is confusing now. I think I understand though. You have have many <code>routine</code> objects and you want any date that falls between the <code>routine.date_started</code> and <code>Date.today</code> to be highlighted blue. I believe this will work for you:</p>\n\n<pre><code>def day_classes(day)\n  classes = []\n  classes &lt;&lt; \"lastmonth\" if day.month &lt; date.month\n  classes &lt;&lt; \"nextmonth\" if day.month &gt; date.month\n  ###\n  routines = current_user.routines.group_by {|i| i.date_started.to_date}\n  # remove this line:\n  #classes &lt;&lt; \"completed\" if routines.include?(day)\n  # in favor of this line:\n  classes &lt;&lt; \"completed\" if routines.any? {|date_attr, routine_obj| day &gt;= date_attr and day &lt;= Date.today } \n  ### \n  classes.empty? ? nil : classes.join(\" \")\nend\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34538059, "answer_count": 1, "score": 1, "last_activity_date": 1451517844, "creation_date": 1451512410, "last_edit_date": 1451515986, "question_id": 34537825, "link": "https://stackoverflow.com/questions/34537825/calendar-date-started-until-date-current", "title": "Calendar: date_started until Date.current?", "body": "<p>How can we go from <code>date_started</code> until <code>Date.current</code>?</p>\n\n<p>For example, this code only counts the <code>date_started</code> for a routine:</p>\n\n<pre><code>routines = current_user.routines.group_by {|i| i.date_started.to_date}\nclasses &lt;&lt; \"completed\" if routines.include?(day)    \n</code></pre>\n\n<p>But I'd like to make \"completed\", which is the CSS class that makes the td background blue, work like I explain below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6d91Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6d91Y.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>schema</strong></p>\n\n<pre><code>create_table \"routines\", force: true do |t|\n  t.datetime \"date_started\"\n  t.string   \"action\"\n  t.integer  \"user_id\"\nend\n</code></pre>\n\n<p>I had followed this <strong><a href=\"https://www.youtube.com/watch?v=ndBKSjAbemo\" rel=\"nofollow noreferrer\">tutorial</a></strong> to build the calendar.</p>\n\n<p><strong>FULL calendar_helper.rb</strong></p>\n\n<pre><code>module CalendarHelper\n    def calendar(date = Date.current, &amp;block)\n        Calendar.new(self, date, block).table\n    end\n\n    class Calendar &lt; Struct.new(:view, :date, :callback)\n        HEADER = %w[Sun Mon Tue Wed Thu Fri Sat]\n        START_DAY = :sunday\n\n        delegate :content_tag, :current_user, to: :view\n\n        def past\n        end\n\n        def table\n            content_tag :table, class: \"calendar\" do\n                header + week_rows\n            end\n        end\n\n        def header\n            content_tag :tr do\n                HEADER.map { |day| content_tag :th, day }.join.html_safe\n            end\n        end\n\n        def week_rows\n            weeks.map do |week|\n                content_tag :tr do\n                    week.map { |day| day_cell(day) }.join.html_safe\n                end\n            end.join.html_safe\n        end\n\n        def day_cell(day)\n            content_tag :td, view.capture(day, &amp;callback), class: day_classes(day)\n        end\n\n        def day_classes(day)\n            classes = []\n            classes &lt;&lt; \"lastmonth\" if day.month &lt; date.month\n            classes &lt;&lt; \"nextmonth\" if day.month &gt; date.month\n            ###\n            routines = current_user.routines.group_by {|i| i.date_started.to_date}\n            classes &lt;&lt; \"completed\" if routines.include?(day)\n            ### \n            classes.empty? ? nil : classes.join(\" \")\n        end\n\n        def weeks\n            first = date.beginning_of_month.beginning_of_week(START_DAY)\n            last = date.end_of_month.end_of_week(START_DAY)\n            (first..last).to_a.in_groups_of(7)\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters", "casting"], "comments": [{"owner": {"reputation": 1856, "user_id": 861202, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001144956351/picture?type=large", "display_name": "mandar.gokhale", "link": "https://stackoverflow.com/users/861202/mandar-gokhale"}, "edited": false, "score": 0, "creation_date": 1451512052, "post_id": 34537715, "comment_id": 56817584, "body": "are you sure that params[:id] is not blank? You should be having any issue in fetching record using params[:id]. Rails actually takes care of that part."}, {"owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "reply_to_user": {"reputation": 1856, "user_id": 861202, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001144956351/picture?type=large", "display_name": "mandar.gokhale", "link": "https://stackoverflow.com/users/861202/mandar-gokhale"}, "edited": false, "score": 1, "creation_date": 1451513626, "post_id": 34537715, "comment_id": 56818299, "body": "@mandar.gokhale ...should NOT have..."}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1451517210, "post_id": 34537715, "comment_id": 56819641, "body": "Seems like an xy problem. Why would it be necessary to cast the ID? That&#39;s the question, not how best to cast it."}, {"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "reply_to_user": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1451543420, "post_id": 34537715, "comment_id": 56826142, "body": "@ValAsensio .. Actually I have another parameter. It is passed form drop-down menu. Its value is &quot;16&quot; as a string as it appears in pry"}, {"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "reply_to_user": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1451543668, "post_id": 34537715, "comment_id": 56826212, "body": "@ValAsensio ... The passed parameter is &quot;16&quot; from this line <code>cat_id = params[:artCatName].to_i</code> but when checked the returned value after conversion, it is always 0"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451543275, "post_id": 34537754, "comment_id": 56826084, "body": "Even this way is not working"}, {"owner": {"reputation": 1448, "user_id": 1008642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960c8406f70d6758b250526c10c426?s=128&d=identicon&r=PG", "display_name": "Iwnnay", "link": "https://stackoverflow.com/users/1008642/iwnnay"}, "reply_to_user": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 1, "creation_date": 1452199069, "post_id": 34537754, "comment_id": 57074917, "body": "Most likely <code>params[:id]</code> is null, then. If you&#39;re using strong params and short cutting that in someway then it&#39;s quite possible you haven&#39;t whitelisted <code>id</code>"}], "tags": [], "owner": {"reputation": 1448, "user_id": 1008642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0960c8406f70d6758b250526c10c426?s=128&d=identicon&r=PG", "display_name": "Iwnnay", "link": "https://stackoverflow.com/users/1008642/iwnnay"}, "is_accepted": false, "score": 1, "last_activity_date": 1451512072, "creation_date": 1451512072, "answer_id": 34537754, "question_id": 34537715, "link": "https://stackoverflow.com/questions/34537715/in-rails-how-can-i-convert-paramsid-to-integer/34537754#34537754", "title": "In Rails, How can I convert params[:id] to Integer", "body": "<p>I think you might have just misplaced your type casting:</p>\n\n<pre><code>x = Authors.find(params[:id].to_i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451542917, "post_id": 34538282, "comment_id": 56825965, "body": "I am using &quot;pry&quot;. I tried tens of times to do many things. I don&#39;t understand what do you mean by this line: Author.find(&quot;2&quot;) == Author.find(2)"}, {"owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "reply_to_user": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451543131, "post_id": 34538282, "comment_id": 56826045, "body": "If you type it on console, it should return true because it should return the same object."}], "tags": [], "owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "is_accepted": false, "score": 2, "last_activity_date": 1451514741, "creation_date": 1451514741, "answer_id": 34538282, "question_id": 34537715, "link": "https://stackoverflow.com/questions/34537715/in-rails-how-can-i-convert-paramsid-to-integer/34538282#34538282", "title": "In Rails, How can I convert params[:id] to Integer", "body": "<p>You don't really have to convert strings to integer to use find. It should be able to convert the string for you.</p>\n\n<pre><code>Just to give an example:\nAuthor.find(2) # =&gt; #&lt;Author:1234&gt;\nAuthor.find(\"2\") # =&gt; #&lt;Author:1234&gt;\nAuthor.find(\"2\") == Author.find(2) # =&gt; true\n</code></pre>\n\n<p>Try using <code>pry</code> to see if what you are passing is correct. Hope this helps clear out the method.</p>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451543042, "post_id": 34541782, "comment_id": 56826005, "body": "This is my code. Currently, I am sending another parameter which is CategroyID.....I could not convert it like this....<code>cat_id = params[:artCatName].to_i</code> by using &quot;pry&quot; I found the sent parameter is &quot;16&quot;. But how to make it Integer"}, {"owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "reply_to_user": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451544439, "post_id": 34541782, "comment_id": 56826473, "body": "what is the datatype of <code>:artCatName</code> Is it string?"}, {"owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "reply_to_user": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451545041, "post_id": 34541782, "comment_id": 56826679, "body": "If it is an Integer then your method will produce the correct result.."}, {"owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "edited": false, "score": 0, "creation_date": 1451550007, "post_id": 34541782, "comment_id": 56828374, "body": "this is the output from PRY <code>{&quot;utf8&quot;=&gt;&quot;\u2713&quot;,  &quot;authenticity_token&quot;=&gt;&quot;tQetEjfE+stm&#47;yXfQWyS9pEhznu+zeNwrHPa6&zwnj;&#8203;BNjWsfd4bcv&#47;PFsYRcMT&zwnj;&#8203;1L8y2obJt6xNTcoOFNgz&zwnj;&#8203;q6R6OcjMw==&quot;,  &quot;category&quot;=&gt;{&quot;artCatName&quot;=&gt;&quot;1&quot;},  &quot;article&quot;=&gt;{&quot;artTitle&quot;=&gt;&quot;bb&quot;, &quot;artBody&quot;=&gt;&quot;b&quot;},  &quot;commit&quot;=&gt;&quot;Publish&quot;,  &quot;controller&quot;=&gt;&quot;articles&quot;,  &quot;action&quot;=&gt;&quot;create&quot;}</code>"}], "tags": [], "owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "is_accepted": false, "score": 0, "last_activity_date": 1451541550, "last_edit_date": 1451541550, "creation_date": 1451541249, "answer_id": 34541782, "question_id": 34537715, "link": "https://stackoverflow.com/questions/34537715/in-rails-how-can-i-convert-paramsid-to-integer/34541782#34541782", "title": "In Rails, How can I convert params[:id] to Integer", "body": "<p>you can use this: </p>\n\n<pre><code>x = Authors.find(params[:id].to_i)\n</code></pre>\n\n<p>However, </p>\n\n<pre><code>x = Authors.find(params[:id])\n</code></pre>\n\n<p>is also correct as it returns the correct author.\nBefore using the above one you can check whether the params[:id] is present or not:</p>\n\n<pre><code>if params[:id].present?\n  x = Authors.find(params[:id])\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 84, "user_id": 5197734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SekfZ.jpg?s=128&g=1", "display_name": "Owen Peredo Diaz", "link": "https://stackoverflow.com/users/5197734/owen-peredo-diaz"}, "edited": false, "score": 0, "creation_date": 1592579427, "post_id": 34543544, "comment_id": 110484934, "body": "Maybe this can help you (repair numeric params converted into string): <a href=\"https://gist.github.com/owen2345/1400e0ec5224a2e842ebd750d402133a\" rel=\"nofollow noreferrer\">gist.github.com/owen2345/1400e0ec5224a2e842ebd750d402133a</a>"}], "tags": [], "owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1451551135, "creation_date": 1451551135, "answer_id": 34543544, "question_id": 34537715, "link": "https://stackoverflow.com/questions/34537715/in-rails-how-can-i-convert-paramsid-to-integer/34543544#34543544", "title": "In Rails, How can I convert params[:id] to Integer", "body": "<p>After I used the method <strong>.inpect</strong> on the parameter which I am trying to grab, I found that it was nil. I was grabbing it wrongly. By the way, I was trying to grab another parameter not <strong>:id</strong> but <strong>:artCatNam</strong>e and Here are my passed parameters:\n<code>{\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"tQetEjfE+stm/yXfQWyS9pEhznu+zeNwrHPa6BNjWsfd4bcv/PFsYRcMT\u200c\u200b1L8y2obJt6xNTcoOFNgzq6R6OcjMw==\", \"category\"=&gt;{\"artCatName\"=&gt;\"1\"}, \"article\"=&gt;{\"artTitle\"=&gt;\"bb\", \"artBody\"=&gt;\"b\"}, \"commit\"=&gt;\"Publish\", \"controller\"=&gt;\"articles\", \"action\"=&gt;\"create\"}</code></p>\n\n<p>Here how I grabbed <strong>:artCatName</strong> and how I converted to <strong>integer</strong></p>\n\n<pre><code>params[:category][:artCatName].to_i\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 3834583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c22f54d3a615f7204c369903c003e36?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/3834583/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6872, "favorite_count": 0, "closed_date": 1452056951, "answer_count": 4, "score": 2, "last_activity_date": 1451551135, "creation_date": 1451511887, "last_edit_date": 1451537471, "question_id": 34537715, "link": "https://stackoverflow.com/questions/34537715/in-rails-how-can-i-convert-paramsid-to-integer", "closed_reason": "Needs details or clarity", "title": "In Rails, How can I convert params[:id] to Integer", "body": "<p>Guys I am trying to retrieve specific records from the DB using <code>params[:id]</code>. </p>\n\n<pre><code> x = Authors.find(params[:id])\n</code></pre>\n\n<p>We cannot use <strong>FIND</strong> with string like this because the parameter is always passed by <strong>HTTP</strong> as a string:</p>\n\n<p>I also tried this code but I do not know why it always returns <strong>0</strong> while the passed parameter is <strong>4</strong></p>\n\n<pre><code> x = Authors.find(params[:id]).to_i \n</code></pre>\n\n<p>So how can I do something like <strong>casting for ID Parameter</strong> or Any method to convert HTTP passed <strong>strings to integers</strong></p>\n"}, {"tags": ["ruby", "tk"], "comments": [{"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 1, "creation_date": 1451599647, "post_id": 34537305, "comment_id": 56846439, "body": "Sounds like a spinbox would be an appropriate widget."}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1451688525, "post_id": 34537305, "comment_id": 56865219, "body": "Indeed, a spinbox would be the first thing to look at. Or a scale, and very possibly, a combobox."}], "owner": {"reputation": 43, "user_id": 2391571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfd521ae74f1f900ea52d7a4127f855?s=128&d=identicon&r=PG", "display_name": "kaets", "link": "https://stackoverflow.com/users/2391571/kaets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458594093, "creation_date": 1451509895, "question_id": 34537305, "link": "https://stackoverflow.com/questions/34537305/how-to-scroll-through-multiple-tklabels-in-ruby-tk", "title": "How to scroll through multiple TkLabels in Ruby/Tk", "body": "<p>I want to scroll through successive numbers using a scrollbar.\nI have managed to do this by changing a scrollable listbox that is big enough to only display one number at a time, but I was wondering if it is possible to set the scrollbar to a textvariable or something in order to make the listbox just TkLabels.</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>require 'tk'\nrequire 'tkextlib/tile'\n\nroot = TkRoot.new\n$l = TkListbox.new(root) {height 1; width 2; \n        yscrollcommand proc{|*args| $s.set(*args)} }.grid :column =&gt; 0, :row =&gt; 0, :padx =&gt; 50, :pady =&gt; 10\n$s = Tk::Tile::Scrollbar.new(root) {orient 'horizontal'; \n        command proc{|*args| $l.yview(*args)}}.grid :column =&gt; 0, :row =&gt; 1, :sticky =&gt; 'ew'\nsz = Tk::Tile::SizeGrip.new(root).grid :column =&gt; 1, :row =&gt; 1, :sticky =&gt; 'se'\nTkGrid.columnconfigure root, 0, :weight =&gt; 1\nTkGrid.rowconfigure root, 0, :weight =&gt; 1\n\n(0..10).each {|i| $l.insert 'end', \"#{i}\"}\n\nTk.mainloop\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array", "unique"], "comments": [{"owner": {"reputation": 33, "user_id": 4744994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccae75b3ecc51f9dc37e7b0e1239915e?s=128&d=identicon&r=PG", "display_name": "Scytherswings", "link": "https://stackoverflow.com/users/4744994/scytherswings"}, "edited": false, "score": 0, "creation_date": 1451510416, "post_id": 34537294, "comment_id": 56816873, "body": "Just to clarify, for my uses, it doesn&#39;t matter which array has the unique value, it only matters that each value is represented once across the entire array of arrays."}, {"owner": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "edited": false, "score": 0, "creation_date": 1451510766, "post_id": 34537294, "comment_id": 56817032, "body": "do you still need to keep the array groups, or can the unique values be represented by one-dimensional array?"}, {"owner": {"reputation": 33, "user_id": 4744994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccae75b3ecc51f9dc37e7b0e1239915e?s=128&d=identicon&r=PG", "display_name": "Scytherswings", "link": "https://stackoverflow.com/users/4744994/scytherswings"}, "reply_to_user": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "edited": false, "score": 0, "creation_date": 1451510958, "post_id": 34537294, "comment_id": 56817119, "body": "I still have to keep the unique values in groups. This is because the unique values that aren&#39;t shared with any other arrays relate to a hash that I have to correlate this data with."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "edited": false, "score": 0, "creation_date": 1451512047, "post_id": 34537294, "comment_id": 56817579, "body": "Not sure I understand since you are stating it does not matter where the unique is how do you intend to correlate? maybe a better explanation is needed. I think what @YevgeniyGoyfman was getting at is <code>arr.flatten.uniq</code>"}, {"owner": {"reputation": 33, "user_id": 4744994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccae75b3ecc51f9dc37e7b0e1239915e?s=128&d=identicon&r=PG", "display_name": "Scytherswings", "link": "https://stackoverflow.com/users/4744994/scytherswings"}, "edited": false, "score": 0, "creation_date": 1451512246, "post_id": 34537294, "comment_id": 56817672, "body": "Shoot. I left out something that would help clear all of this up. I&#39;ll revise the question."}, {"owner": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "edited": false, "score": 0, "creation_date": 1451512291, "post_id": 34537294, "comment_id": 56817703, "body": "@enginnermnky -- yes, that&#39;s exactly what I was going to suggest if array structure could be flattened."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1451512838, "post_id": 34537294, "comment_id": 56817955, "body": "Wouldn&#39;t a database of some sort be more appropriate when working with this much data?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451513030, "post_id": 34537294, "comment_id": 56818036, "body": "Agreed, if you&#39;re dealing with huge arrays, you should use a database to offload the task of determining uniqueness. That will probably result in some speed-up of your code too."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1451513147, "post_id": 34537294, "comment_id": 56818086, "body": "To help potential answerers, you need to show what your expected output array would be. You also need to write some benchmarks to test various ways of implementing your code. Thinking you can write something that&#39;s faster than the built-in <code>-</code> might not be a good assumption, which benchmarks will show."}, {"owner": {"reputation": 33, "user_id": 4744994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccae75b3ecc51f9dc37e7b0e1239915e?s=128&d=identicon&r=PG", "display_name": "Scytherswings", "link": "https://stackoverflow.com/users/4744994/scytherswings"}, "edited": false, "score": 0, "creation_date": 1451513656, "post_id": 34537294, "comment_id": 56818312, "body": "I&#39;ll see if I can add some benchmarks later tonight once I get home, I really like the possible solution offered by @tim-destan so I&#39;m optimistic to see what kind of improvements I can get. Also, the reason I didn&#39;t include a benchmark to start out with is that the code (as it is written now) exceeded the 30 minute limit I set."}], "answers": [{"tags": [], "owner": {"reputation": 1969, "user_id": 395391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6adacd1db2db95fa84d462c82f09ec?s=128&d=identicon&r=PG", "display_name": "Tim Destan", "link": "https://stackoverflow.com/users/395391/tim-destan"}, "is_accepted": true, "score": 1, "last_activity_date": 1451512691, "creation_date": 1451512691, "answer_id": 34537874, "question_id": 34537294, "link": "https://stackoverflow.com/questions/34537294/remove-duplicate-values-from-array-of-arrays-keeping-one-copy-of-each-unique-va/34537874#34537874", "title": "Remove duplicate values from array of arrays, keeping one copy of each unique value", "body": "<p>I think part of your problem is that you are doing O(n^2) array subtractions (for each array, you check all the other arrays in front of it, which is a lot of wasted effort). One improvement might be to keep one set that contains everything you've seen along the way. This requires processing each array only once, plus sets can cheaply check whether they contain an element.</p>\n\n<pre><code>require 'set'\n\ndef uniquify!(arrays)\n  seen = Set.new\n  arrays.each do |array|\n    i = 0\n    while i &lt; array.length\n      current = array[i]\n      if seen.include? current\n        array.delete_at(i)\n      else\n        seen.add(current)\n        i += 1\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This modifies the argument array in-place (hence why I added the trailing <code>!</code> to the name).</p>\n"}], "owner": {"reputation": 33, "user_id": 4744994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccae75b3ecc51f9dc37e7b0e1239915e?s=128&d=identicon&r=PG", "display_name": "Scytherswings", "link": "https://stackoverflow.com/users/4744994/scytherswings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 34537874, "answer_count": 1, "score": 0, "last_activity_date": 1451513792, "creation_date": 1451509819, "last_edit_date": 1451513792, "question_id": 34537294, "link": "https://stackoverflow.com/questions/34537294/remove-duplicate-values-from-array-of-arrays-keeping-one-copy-of-each-unique-va", "title": "Remove duplicate values from array of arrays, keeping one copy of each unique value", "body": "<p>I have an array of hashes, each containing a large array in excess of 100,000+ elements.</p>\n\n<p>I wrote this method to remove the duplicates from each of the inner arrays, <em>keeping only one copy of the element</em>, but sadly it is unusable with these large arrays since the array <code>-</code> operator is so expensive.</p>\n\n<p>The data structure that I'm trying to reduce looks like this:</p>\n\n<p><code>[{regex: \"st.+\", results: [\"string1\", \"string2\", \"strong\"]}, \n{regex: \"string.+\", results: [\"string1\", \"string2\"]}]</code></p>\n\n<p>For clarification, the :regex was a regex used to find strings from a large array. This is why similar regexes can result in duplicate values between arrays.</p>\n\n<pre><code>def uniqify(arr)\n# This loops over an arry of arrays and compares each \n# array to the next, keeping only the unique values in each array\n  i = 0\n  while i &lt; arr.length\n    a = arr[i][:results]\n    j = i + 1\n    while j &lt; arr.length\n      b = arr[j][:results]\n      arr[j][:results] = b - a\n      j += 1\n    end\n    i += 1\n  end\n  arr\nend\n</code></pre>\n\n<p>The expected output for my example data should be:</p>\n\n<p><code>[{regex: \"st.+\", results: [\"string1\", \"string2\", \"strong\"]}, \n{regex: \"string.+\", results: []}]</code></p>\n\n<p>How can I make this loop function better?</p>\n"}, {"tags": ["ruby", "file", "split"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451508098, "post_id": 34536867, "comment_id": 56815726, "body": "Pls provide/explain desired output for given input"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451508633, "post_id": 34536867, "comment_id": 56815992, "body": "@WandMaker There you go, hope that makes it better"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451509579, "post_id": 34536867, "comment_id": 56816480, "body": "It is still not clear how you got the values after aplit for given values before split"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451509679, "post_id": 34536867, "comment_id": 56816531, "body": "@WandMaker I didn&#39;t that the whole point of this question..."}, {"owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 1, "creation_date": 1451509730, "post_id": 34536867, "comment_id": 56816558, "body": "The output you gave is weird, why are some in groups of three, others groups of two, and others just one? How do you want it to decide where to split?"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 0, "creation_date": 1451509864, "post_id": 34536867, "comment_id": 56816625, "body": "@rp.beltran Think of this like a hexeditor"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451510132, "post_id": 34536867, "comment_id": 56816741, "body": "@Bam There has to be some logical correlation between input and output.  The question is very confusing"}, {"owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 0, "creation_date": 1451510375, "post_id": 34536867, "comment_id": 56816849, "body": "I&#39;m not seeing the hex editor thing. Here is a screenshot of a hex editor <a href=\"https://en.wikipedia.org/wiki/Hex_editor#/media/File:Hexedit-screenshot.png\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Hex_editor#/media/&hellip;</a> notice how it is consistently two characters per group, not one to three."}, {"owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 0, "creation_date": 1451510825, "post_id": 34536867, "comment_id": 56817052, "body": "The actual amount of digits per grouping in a hex editor is based on the amount of bytes representing the binary value it is looking at. It would be log16(bits),  in the case of characters probably log16(256), which is equal to 2, not a variable amount, and so I&#39;m not sure your analogy is very useful here."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "edited": false, "score": 1, "creation_date": 1451510925, "post_id": 34536867, "comment_id": 56817109, "body": "@rp.beltran Alright I edited the question, that should make it a little bit easier, I&#39;ll figure out the rest"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 2, "creation_date": 1451511639, "post_id": 34536867, "comment_id": 56817400, "body": "I don&#39;t know if this will help, but I have the start of a hexeditor that I was creating, it&#39;s on hold now for research, <a href=\"http://codereview.stackexchange.com/questions/113184/format-of-hexeditor\" title=\"format of hexeditor\">codereview.stackexchange.com/questions/113184/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451509507, "post_id": 34537187, "comment_id": 56816422, "body": "That&#39;s a lot of <code>gsub</code>ing to accomplish one thing, is that the only way..?"}, {"owner": {"reputation": 1099, "user_id": 2137104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead444c099c48ff067f9dbb0d8300761?s=128&d=identicon&r=PG", "display_name": "SeanKelleyx", "link": "https://stackoverflow.com/users/2137104/seankelleyx"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451509889, "post_id": 34537187, "comment_id": 56816633, "body": "could do <code>fileArray = fileString.strip().gsub(&#47;([\\- ])&#47;,&quot;&quot;).scan(&#47;..&#47;)</code> instead..."}], "tags": [], "owner": {"reputation": 1099, "user_id": 2137104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead444c099c48ff067f9dbb0d8300761?s=128&d=identicon&r=PG", "display_name": "SeanKelleyx", "link": "https://stackoverflow.com/users/2137104/seankelleyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1471449156, "last_edit_date": 1471449156, "creation_date": 1451509309, "answer_id": 34537187, "question_id": 34536867, "link": "https://stackoverflow.com/questions/34536867/splitting-a-file-every-two-characters-digits-and-adding-new-line-every-16-double/34537187#34537187", "title": "Splitting a file every two characters/digits and adding new line every 16 double characters/digits", "body": "<p>I think you may want to try using the scan method to separate the string into groups of 2 chars. \nThen you can do some text changes in a for loop to add in the new line breaks.\nI was thinking something like this:</p>\n\n<pre><code>fileString = \"aa - a3 - aa - aa - aa - a4 - aa - a\nb1b - b - bb- 2b- bbb - bb - b - b\nc - 4c - c - ccc - c - c - 5 - ccc - cc\"\nfileArray = fileString.gsub(/\\r/,\" \").gsub(/\\n/,\" \").gsub(\"-\", \"\").gsub(\" \", \"\").scan(/../)\nfor i in (fileArray.length-1).downto(0)\n    if i % 15 == 0 &amp;&amp; i != 0\n        fileArray[i] = \"\\n\"+fileArray[i]\n    end\nend\nfileString = fileArray.join(\" \")\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Another option with less gsub'bing could be as follows:</p>\n\n<pre><code>fileString = \"aa - a3 - aa - aa - aa - a4 - aa - a\nb1b - b - bb- 2b- bbb - bb - b - b\nc - 4c - c - ccc - c - c - 5 - ccc - cc\"\nfileArray = fileString.strip().gsub(/([\\- ])/,\"\").scan(/../)\nfor i in (fileArray.length-1).downto(0)\n    if i % 15 == 0 &amp;&amp; i != 0\n        fileArray[i] = \"\\n\"+fileArray[i]\n    end\nend\nfileString = fileArray.join(\" \")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451511183, "post_id": 34537547, "comment_id": 56817212, "body": "It is not grouped correctly, that was an example file"}, {"owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451511673, "post_id": 34537547, "comment_id": 56817420, "body": "Does that fix it for you?"}], "tags": [], "owner": {"reputation": 2179, "user_id": 2403741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5AH9S.jpg?s=128&g=1", "display_name": "rp.beltran", "link": "https://stackoverflow.com/users/2403741/rp-beltran"}, "is_accepted": true, "score": 2, "last_activity_date": 1451511659, "last_edit_date": 1451511659, "creation_date": 1451511064, "answer_id": 34537547, "question_id": 34536867, "link": "https://stackoverflow.com/questions/34536867/splitting-a-file-every-two-characters-digits-and-adding-new-line-every-16-double/34537547#34537547", "title": "Splitting a file every two characters/digits and adding new line every 16 double characters/digits", "body": "<p>Here's how I would approach it if your file is already grouped into the correct number of characters like you show in your input. If this is not the case, let me know and I can fix it.</p>\n\n<pre><code>#Example input\ninput = \"aaa 3aaa aaa a4aaa\nb1bbbb2bbbbbb bb\nc 4cccc cc c5ccc cc\"\n\n#Prints the output\nputs input.split(\"\\n\").map{|line| line.gsub(/\\s+/, \"\").scan(/.{1,2}/).join(' - ')}.join(\"\\n\")\n</code></pre>\n\n<p>This works by first splitting the file at new lines, then with each line it removes the space, as per your example you do not appear to be counting those, and then it puts them into groups of two, and merges those groups with dashes and spaces between. Finally, it joins all of the lines back into one string, but puts the new line character back in so it displays properly.</p>\n\n<h1>Edit</h1>\n\n<p>Per your comment that your input is not already grouped to size, you can try this:</p>\n\n<pre><code>input = \"aaa 3aaa aaa a4aaa b1bbbb2bbbbbb bb c 4cccc cc c5ccc cc\"\n\nputs input.gsub(/\\s+/, \"\").scan(/.{1,16}/).map{ |line| line.scan(/.{1,2}/).join(' - ') }.join(\"\\n\")\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>aa - a3 - aa - aa - aa - a4 - aa - ab\n1b - bb - b2 - bb - bb - bb - bb - c4\ncc - cc - cc - c5 - cc - cc - c\n</code></pre>\n\n<p>It works the same way as the last one, but splits by group of up to 16 characters instead of by new line character.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451564244, "post_id": 34542765, "comment_id": 56834279, "body": "What does <code>.ceil</code> do..?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451585111, "post_id": 34542765, "comment_id": 56842345, "body": "Bam, <code>ceil</code>&#39;s receiver is a float, so look in the docs for <a href=\"http://ruby-doc.org/core-2.2.0/Float.html#method-i-ceil\" rel=\"nofollow noreferrer\">Float#ceil</a>. <code>3.4.ceil #=&gt; 4</code>, <code>3.0.ceil #=&gt; 3</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1451546581, "creation_date": 1451546581, "answer_id": 34542765, "question_id": 34536867, "link": "https://stackoverflow.com/questions/34536867/splitting-a-file-every-two-characters-digits-and-adding-new-line-every-16-double/34542765#34542765", "title": "Splitting a file every two characters/digits and adding new line every 16 double characters/digits", "body": "<p>@rp.beltran's example:</p>\n\n<pre><code>input = \"aaa 3aaa aaa a4aaa\nb1bbbb2bbbbbb bb\nc 4cccc cc c5ccc cc\"\n</code></pre>\n\n<p>First remove spaces and newlines:</p>\n\n<pre><code>str = input.gsub(/[\\s\\n]/, '')\n  #=&gt; \"aaa3aaaaaaa4aaab1bbbb2bbbbbbbbc4ccccccc5ccccc\"\n</code></pre>\n\n<p>Now compute the number of lines and map each to the desired string:</p>\n\n<pre><code>(str.size/16.0).ceil.times.map { |i| str[i*16, 16].scan(/..?/).join(' - ') }\n  #=&gt; [\"aa - a3 - aa - aa - aa - a4 - aa - ab\",\n  #    \"1b - bb - b2 - bb - bb - bb - bb - c4\",\n  #    \"cc - cc - cc - c5 - cc - cc - c\"] \n</code></pre>\n\n<p>Note: <code>\"cat\"[1, 9999] #=&gt; \"at\"</code>.</p>\n"}], "owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 34537547, "answer_count": 3, "score": -2, "last_activity_date": 1471449156, "creation_date": 1451507707, "last_edit_date": 1451510878, "question_id": 34536867, "link": "https://stackoverflow.com/questions/34536867/splitting-a-file-every-two-characters-digits-and-adding-new-line-every-16-double", "title": "Splitting a file every two characters/digits and adding new line every 16 double characters/digits", "body": "<p>I have a file that needs to be split with a <code>-</code> and then split into groups of two, every 16 characters/digits a new line needs to be added</p>\n\n<p>Original look of file:</p>\n\n<blockquote>\n<pre><code>aaa 3aaa aaa a4aaa\nb1bbbb2bbbbbb bb\nc 4cccc cc c5ccc cc\n</code></pre>\n</blockquote>\n\n<p>Expected output of file:</p>\n\n<blockquote>\n<pre><code>aa - a3 - aa - aa - aa - a4 - aa - aa\nb1 - bb - bb- 2b- bb - bb - bb - bb\ncc - 4c - cc - cc - cc - cc - 5c - cc\n</code></pre>\n</blockquote>\n\n<p>I've done a lot of research and the discovered that using <code>.split(\" - \")</code> will do the splitting with <code>-</code>, but how would I group the characters into \"bundles\"?</p>\n\n<p>So far I've tried <code>.gsub(/\\[a-zA-Z]/)</code> obviously that didn't work because I'm terrible with regex..</p>\n\n<p>I've also tried using <code>.split(\"\\n\")</code> to see if I would be able to split the file into lines and then figure out a way to groups.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "yaml", "rails-i18n"], "answers": [{"comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1451508066, "post_id": 34536792, "comment_id": 56815709, "body": "This is not very efficient for an application with a large number of strings as raising an exception and rescuing it has a noticeable cost at interpreter level. The best solution would be to check for the existence of the key without triggering the exception."}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1451508998, "post_id": 34536792, "comment_id": 56816165, "body": "I think is a decision... If this code affects considerably the performance in the context used, I&#39;m agree with you."}], "tags": [], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "is_accepted": false, "score": 5, "last_activity_date": 1451507799, "last_edit_date": 1451507799, "creation_date": 1451507416, "answer_id": 34536792, "question_id": 34536692, "link": "https://stackoverflow.com/questions/34536692/i18n-t-translation-missing-default-value-nil/34536792#34536792", "title": "I18n.t Translation Missing Default Value Nil", "body": "<p>Try this <code>some = I18n.t!(\"something.something_else\") rescue nil</code></p>\n\n<p>Ok, it's a bad practice to perform a <code>rescue nil</code> but, it's short and cute :)</p>\n\n<p>You can do something like this</p>\n\n<pre><code>def translate(key)\n  I18n.t!(key)\nrescue I18n::MissingTranslationData\n  nil\nend\n</code></pre>\n\n<p>Then...</p>\n\n<p><code>some = translate(\"something.something_else\")</code></p>\n"}, {"comments": [{"owner": {"reputation": 586, "user_id": 1500076, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e0a02a212ae1fe32bf8f8add08c2728a?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1500076/jeff"}, "edited": false, "score": 0, "creation_date": 1451515546, "post_id": 34536921, "comment_id": 56819092, "body": "So basically there is no good way to return nil when it is translation missing. Thanks for the answer. I can&#39;t quite understand why. Is that an implementation feature? Or just how the code was written up to be?"}, {"owner": {"reputation": 3340, "user_id": 232040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5bb7cef8ef41712500df51486f95e8?s=128&d=identicon&r=PG", "display_name": "Jakob W", "link": "https://stackoverflow.com/users/232040/jakob-w"}, "edited": false, "score": 4, "creation_date": 1507622877, "post_id": 34536921, "comment_id": 80271660, "body": "You could add a check for presence so that you are sure to get a translated string or nil back:  <code>some = I18n.t(&quot;something.something_else&quot;, default: &quot;&quot;).presence</code>"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 14, "last_activity_date": 1451507958, "creation_date": 1451507958, "answer_id": 34536921, "question_id": 34536692, "link": "https://stackoverflow.com/questions/34536692/i18n-t-translation-missing-default-value-nil/34536921#34536921", "title": "I18n.t Translation Missing Default Value Nil", "body": "<p><code>:default</code> can't be nil. Setting the value to <code>nil</code> is equivalent to not set the option at all.</p>\n\n<p>However, since the gem seems to <a href=\"https://github.com/svenfuchs/i18n/blob/v0.7.0/lib/i18n/backend/base.rb#L33-L34\" rel=\"noreferrer\">only check whether the key is nil or not</a>, you can try to pass an empty string as a default value. It is possible the <code>translate</code> method will return an empty string in case of a missing translation.</p>\n\n<pre><code>some = I18n.t(\"something.something_else\", default: \"\")\n</code></pre>\n\n<p>I believe this is the closer solution you can get, unless you define your custom <code>translate</code> method that internally lookups the presence of the key and returns nil if the key doesn't exist.</p>\n"}], "owner": {"reputation": 586, "user_id": 1500076, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e0a02a212ae1fe32bf8f8add08c2728a?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1500076/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6200, "favorite_count": 1, "accepted_answer_id": 34536921, "answer_count": 2, "score": 7, "last_activity_date": 1451507958, "creation_date": 1451506892, "question_id": 34536692, "link": "https://stackoverflow.com/questions/34536692/i18n-t-translation-missing-default-value-nil", "title": "I18n.t Translation Missing Default Value Nil", "body": "<p>So I know how return a default value if I get \"translation missing:\" when reading a yaml file.</p>\n\n<pre><code>some = I18n.t(\"something.something_else\", default: \"value\")\n</code></pre>\n\n<p>But how do I do that in the Ruby way if I want the default value to be nil? I know I can regex and match for \"translation missing:\" from the variable some and if it matches, I would have it assign to nil. But what I wanted to do is have </p>\n\n<pre><code>some = I18n.t(\"something.something_else\", default: nil)\n</code></pre>\n\n<p>But it just returned translation missing for me. Does anyone know a good way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "config", "dbmigrate"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 0, "creation_date": 1451507014, "post_id": 34536688, "comment_id": 56815103, "body": "sorry this is the route"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 0, "creation_date": 1451507135, "post_id": 34536688, "comment_id": 56815176, "body": "Why is the space in <code>get &#39;account_activations&#47; edit&#39;</code> line after the slash?"}, {"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 0, "creation_date": 1451507276, "post_id": 34536688, "comment_id": 56815244, "body": "is just to continue in the next line you type &#39;/&#39; and press enter and it continues down"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 1, "creation_date": 1451507426, "post_id": 34536688, "comment_id": 56815332, "body": "It should be <code>get &#39;account_activations&#47;edit&#39;</code> not <code>get &#39;account_activations&#47; edit&#39;</code>. Remove the space after <code>&#47;</code> and before <code>edit</code>."}, {"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 0, "creation_date": 1451507727, "post_id": 34536688, "comment_id": 56815517, "body": "DUDE yes! it was that! i guess i press space for play the video and i moved that! thanks a lot ."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 1, "last_activity_date": 1451506880, "creation_date": 1451506880, "answer_id": 34536688, "question_id": 34536595, "link": "https://stackoverflow.com/questions/34536595/does-not-find-the-right-routeroutes/34536688#34536688", "title": "Does not find the right Route(routes)", "body": "<p>the <code>help</code> and <code>about</code> route missing it's controller (optionally action) parameter.</p>\n\n<p>Also the <code>root</code> route is missing it's options.</p>\n"}, {"tags": [], "owner": {"reputation": 1457, "user_id": 4777130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80725311c070095c9b6141a5b092d763?s=128&d=identicon&r=PG&f=1", "display_name": "Mihail Petkov", "link": "https://stackoverflow.com/users/4777130/mihail-petkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507164, "creation_date": 1451507164, "answer_id": 34536733, "question_id": 34536595, "link": "https://stackoverflow.com/questions/34536595/does-not-find-the-right-routeroutes/34536733#34536733", "title": "Does not find the right Route(routes)", "body": "<p>Your <code>routes.rb</code> is wrong. </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'account_activations/edit'\n\n  get 'account_activation/edit'\n\n  get 'sessions/new'\n\n  root :to =&gt; 'static_pages#home'\n\n  get 'help'        =&gt; 'static_pages#help'\n  get 'about'       =&gt; 'static_pages#about'\n  get 'contact'     =&gt; 'static_pages#contact'\n  get 'signup'      =&gt; 'users#new'\n  get 'login'       =&gt; 'sessions#new'\n  post 'login'      =&gt; 'sessions#create'\n  delete 'logout'   =&gt; 'sessions#destroy'\n  resources :users\n  resources :account_activations, only: [:edit] \n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507546, "creation_date": 1451507546, "answer_id": 34536815, "question_id": 34536595, "link": "https://stackoverflow.com/questions/34536595/does-not-find-the-right-routeroutes/34536815#34536815", "title": "Does not find the right Route(routes)", "body": "<p>Probably just removing these two lines will fix it:</p>\n\n<pre><code>get 'account_activations/ edit'\n\nget 'account_activation/ edit'\n</code></pre>\n\n<p>You have defined this route twice, here and in resources. </p>\n"}, {"comments": [{"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "edited": false, "score": 0, "creation_date": 1451507956, "post_id": 34536894, "comment_id": 56815663, "body": "It was more simple than that(but thanks man:)  Here get &#39;account_activations/edit&#39; i left and space like this &#39;account_activations/ edit&#39; and nothing was working at all. Obviously migration would not run ok. Thanks :)"}], "tags": [], "owner": {"reputation": 969, "user_id": 387169, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7fd6ad14459f190fffc8afe8f2e8fba7?s=128&d=identicon&r=PG", "display_name": "mhz", "link": "https://stackoverflow.com/users/387169/mhz"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507862, "creation_date": 1451507862, "answer_id": 34536894, "question_id": 34536595, "link": "https://stackoverflow.com/questions/34536595/does-not-find-the-right-routeroutes/34536894#34536894", "title": "Does not find the right Route(routes)", "body": "<p>I think you might be using</p>\n\n<pre><code>resources :account_activations\n</code></pre>\n\n<p>wrong... resources should be used on Models, and in this case its a Controller -> which is what your log is complaining about. \nHere is some reference of you: <a href=\"http://guides.rubyonrails.org/routing.html#resources-on-the-web\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html#resources-on-the-web</a></p>\n\n<blockquote>\n  <p>Resource routing allows you to quickly declare all of the common routes for a given resourceful controller. Instead of declaring separate routes for your index, show, new, edit, create, update and destroy actions, a resourceful route declares them in a single line of code.</p>\n</blockquote>\n\n<p>Maybe run a </p>\n\n<pre><code>rake routes\n</code></pre>\n\n<p>to see what routes you have available, and if \"resources :account_activations\" is even making an edit route.</p>\n"}], "owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 34536688, "answer_count": 4, "score": 1, "last_activity_date": 1451507862, "creation_date": 1451506435, "last_edit_date": 1451507059, "question_id": 34536595, "link": "https://stackoverflow.com/questions/34536595/does-not-find-the-right-routeroutes", "title": "Does not find the right Route(routes)", "body": "<p>Hello i am having a problem when i try to do <code>bundle exec rake db:migrate</code> \ni never had this problem and this is the code</p>\n\n<pre><code>bundle exec rake db:migraterake aborted!\nArgumentError: Missing :controller key on routes definition, please check your routes.\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:275:in `check_part'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:255:in `check_controller_and_action'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:178:in `normalize_options!'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:100:in `initialize'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:78:in `new'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:78:in `build'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:1559:in `add_route'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:1536:in `decomposed_match'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:1517:in `block in match'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:1507:in `each'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:1507:in `match'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:689:in `map_method'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/mapper.rb:650:in `get'\n/home/ubuntu/workspace/sample_app/config/routes.rb:3:in `block in &lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/route_set.rb:432:in `instance_exec'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/route_set.rb:432:in `eval_block'\n/usr/local/rvm/gems/ruby-2.2.1/gems/actionpack-4.2.2/lib/action_dispatch/routing/route_set.rb:410:in `draw'\n/home/ubuntu/workspace/sample_app/config/routes.rb:1:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `block in load'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:40:in `each'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:40:in `load_paths'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:16:in `reload!'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:26:in `block in updater'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/file_update_checker.rb:75:in `call'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.2/lib/active_support/file_update_checker.rb:75:in `execute'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:27:in `updater'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application/finisher.rb:69:in `block in &lt;module:Finisher&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `instance_exec'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `run'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/initializable.rb:54:in `run_initializers'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application.rb:352:in `initialize!'\n/home/ubuntu/workspace/sample_app/config/environment.rb:5:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application.rb:328:in `require'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application.rb:328:in `require_environment!'\n/usr/local/rvm/gems/ruby-2.2.1/gems/railties-4.2.2/lib/rails/application.rb:457:in `block in run_tasks_blocks'\nTasks: TOP =&gt; db:migrate =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>This is the first part i did <code>rails generate controller AccountActivations \\ edit --no-test-framework</code></p>\n\n<p>Then <code>routes.rb</code> </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'account_activations/ edit'\n\n  get 'account_activation/ edit'\n\n  get 'sessions/new'\n\n  root                 'static_pages#home'\n  get 'help'        =&gt; 'static_pages#help'\n  get 'about'       =&gt; 'static_pages#about'\n  get 'contact'     =&gt; 'static_pages#contact'\n  get 'signup'      =&gt; 'users#new'\n  get 'login'       =&gt; 'sessions#new'\n  post 'login'      =&gt; 'sessions#create'\n  delete 'logout'   =&gt; 'sessions#destroy'\n  resources :users\n  resources :account_activations, only: [:edit] \nend\n</code></pre>\n\n<p>then i run this code : </p>\n\n<pre><code>$ rails generate migration add_activation_to_users \\\n&gt; activation_digest:string activated:boolean activated_at:datetime\n</code></pre>\n\n<p>i modify this new file</p>\n\n<pre><code>class AddActivationToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :activation_digest, :string\n    add_column :users, :activated, :boolean, default: false\n    add_column :users, :activated_at, :datetime\nend end\n</code></pre>\n\n<p>and finally <code>bundle exec rake db:migrate</code>\nThen i get the error message, does anyone see any problem? thanks in advance!\nBy the way this is chapter 10 ruby on rails tutorial.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mysql2"], "comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1452533694, "post_id": 34536351, "comment_id": 57201277, "body": "i&#39;ve got the same issue with the same gem version - i&#39;m using sequel, not sure if you are or if it makes a difference.  have you resolved this issue?"}, {"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1452534166, "post_id": 34536351, "comment_id": 57201567, "body": "also, using mariadbclient on arch linux"}, {"owner": {"reputation": 4191, "user_id": 102372, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/sB5Mv.jpg?s=128&g=1", "display_name": "croceldon", "link": "https://stackoverflow.com/users/102372/croceldon"}, "reply_to_user": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1452540627, "post_id": 34536351, "comment_id": 57205126, "body": "No, not yet. I&#39;m using OS X."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 3085470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9H44t.jpg?s=128&g=1", "display_name": "Batbayar", "link": "https://stackoverflow.com/users/3085470/batbayar"}, "edited": false, "score": 1, "creation_date": 1487578938, "post_id": 34956802, "comment_id": 71831243, "body": "great works. Would you please, explain why it wasn&#39;t working and how does this fixes that?"}, {"owner": {"reputation": 4871, "user_id": 2040729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Vsxsu.jpg?s=128&g=1", "display_name": "Eduardo Santana", "link": "https://stackoverflow.com/users/2040729/eduardo-santana"}, "edited": false, "score": 0, "creation_date": 1507573949, "post_id": 34956802, "comment_id": 80254799, "body": "To understant what it does look <a href=\"https://www.justinweiss.com/articles/3-quick-gem-tricks/\" rel=\"nofollow noreferrer\">justinweiss.com/articles/3-quick-gem-tricks</a>"}], "tags": [], "owner": {"reputation": 4191, "user_id": 102372, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/sB5Mv.jpg?s=128&g=1", "display_name": "croceldon", "link": "https://stackoverflow.com/users/102372/croceldon"}, "is_accepted": true, "score": 47, "last_activity_date": 1453500690, "creation_date": 1453500690, "answer_id": 34956802, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/34956802#34956802", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>I ended up solving this with <code>gem pristine --all</code></p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 1563631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0371c95f70c66545f21be5e5dc95204?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/1563631/joe"}, "is_accepted": false, "score": 8, "last_activity_date": 1456779094, "creation_date": 1456779094, "answer_id": 35709384, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/35709384#35709384", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>I have solved this with <code>gem pristine mysql2</code> followed by <code>spring stop</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1570, "user_id": 422550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/58cca0975a1263cb266c2789d7180dbe?s=128&d=identicon&r=PG", "display_name": "mwangi", "link": "https://stackoverflow.com/users/422550/mwangi"}, "is_accepted": false, "score": 0, "last_activity_date": 1471511387, "creation_date": 1471511387, "answer_id": 39014165, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/39014165#39014165", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>I experienced the same issue. I had ruby 2.3.4 installed and using rails 4.6.2.</p>\n\n<p>There were two issues causes and the support team of the hosting company I was using helped me resolve the issue.</p>\n\n<p>The first was that the mysql2 lib that was installed was, by default, linked to ruby 1.8  instead of ruby 2</p>\n\n<pre><code># lld ../2.2.0/mysql2-0.4.4/mysql2/mysql2.so\n... \n...\nlibruby.so.1.8 =&gt; /usr/lib64/libruby.so.1.8 (0x00007f2af1f8a000)\n...\n</code></pre>\n\n<p>Second issue was to compile the lib with the installed mysql server config</p>\n\n<p>So mysql2 gem had to be uninstalled and re-installed with the right ruby lib and compiled with the right mysql config.</p>\n\n<p>Below are the commands.</p>\n\n<pre><code>gem uninstall mysql2\ngem install mysql2 -- --with-mysql-config=/usr/bin/mysql_config --with-opt-lib=/where/my/ruby22/lib_was_located/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 3487016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f174f65778fb3ec3e0e15e2a8129c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3487016", "link": "https://stackoverflow.com/users/3487016/user3487016"}, "is_accepted": false, "score": 0, "last_activity_date": 1481271383, "last_edit_date": 1481271383, "creation_date": 1476210066, "answer_id": 39984056, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/39984056#39984056", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>I experienced this problem moving to Ubuntu 16.04</p>\n\n<p>The following did the trick</p>\n\n<pre><code>sudo apt-get install g++\nsudo apt-get install build-essential\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 1611445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/upnWE.jpg?s=128&g=1", "display_name": "Krishna Vedula", "link": "https://stackoverflow.com/users/1611445/krishna-vedula"}, "is_accepted": false, "score": 0, "last_activity_date": 1505816270, "creation_date": 1505816270, "answer_id": 46297896, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/46297896#46297896", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>running sudo gem pristine mysql2 did not work for me.</p>\n\n<p>I had to uninstall and reinstall the mysql2 gem.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 4688354, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_GXeyJdGNk/AAAAAAAAAAI/AAAAAAAAAfY/ZWeYUhhBgpA/photo.jpg?sz=128", "display_name": "newtron54", "link": "https://stackoverflow.com/users/4688354/newtron54"}, "is_accepted": false, "score": 0, "last_activity_date": 1564585959, "creation_date": 1564585959, "answer_id": 57293988, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on/57293988#57293988", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>The only thing that worked for me was </p>\n\n<p>gem install nokogiri -v 1.10.2</p>\n\n<p>after that, it was fine.</p>\n"}], "owner": {"reputation": 4191, "user_id": 102372, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/sB5Mv.jpg?s=128&g=1", "display_name": "croceldon", "link": "https://stackoverflow.com/users/102372/croceldon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14613, "favorite_count": 4, "accepted_answer_id": 34956802, "answer_count": 6, "score": 28, "last_activity_date": 1591400278, "creation_date": 1451505412, "question_id": 34536351, "link": "https://stackoverflow.com/questions/34536351/how-do-i-resolve-incompatible-library-version-for-mysql2-gem-with-ruby-2-3-on", "title": "How do I resolve &quot;incompatible library version&quot; for mysql2 gem with ruby 2.3 on OS X?", "body": "<p>I'm using ruby 2.3, and in the gemfile, I've got the mysql2 gem listed. But when I try to run <code>rake db:migrate</code>, I get the following:</p>\n\n<pre><code>/Users/me/.gem/ruby/2.3.0/gems/mysql2-0.4.2/lib/mysql2.rb:31:in `require': incompatible library version - /Users/me/.gem/ruby/2.3.0/gems/mysql2-0.4.2/lib/mysql2/mysql2.bundle (fatal)\n</code></pre>\n\n<p>I can't seem to get around this one. I've installed Mysql 5.7 with Homebrew, tried updating the bundle, uninstalling and reinstalling the mysql2 gem, all to no avail.</p>\n\n<p>How can I get this resolved?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1451505501, "post_id": 34536267, "comment_id": 56814385, "body": "@user2864740 I saw in another post that <code>&amp;:to_s</code> returns a block"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451505675, "post_id": 34536267, "comment_id": 56814468, "body": "Considering that you can write <code>arr.inject(:+)</code> or <code>arr.inject(&amp;:+)</code>, considering changing your question to why <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#map</a> does not have a form that permits the argument to be a symbol, as <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">Enumerable#inject</a> (aka <code>reduce</code>) does. Isn&#39;t that what you mean?"}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451506624, "post_id": 34536267, "comment_id": 56814904, "body": "yeah, if <code>inject</code> can take a symbol, then why doesn&#39;t it, at least in the above case, make sense for <code>map</code> to take a symbol too?"}], "answers": [{"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1451505238, "post_id": 34536299, "comment_id": 56814249, "body": "<code>:to_s</code> is also a symbol. Please provide applicable references/examples to clarify the behavior."}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 0, "creation_date": 1451505413, "post_id": 34536299, "comment_id": 56814349, "body": "@sawa is there disadvantage if <code>map</code> can take a symbol too?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451506058, "post_id": 34536299, "comment_id": 56814628, "body": "Think harder. There&#39;s got to be a good reason only <code>inject</code> permits it&#39;s argument to be a symbol. (I know not.)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451506118, "post_id": 34536299, "comment_id": 56814657, "body": "@CarySwoveland I think I actually know. I will add it."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451509302, "post_id": 34536299, "comment_id": 56816308, "body": "@sawa That explanation of why map does not support symbol is awesome!!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 5, "last_activity_date": 1451506642, "last_edit_date": 1451506642, "creation_date": 1451505203, "answer_id": 34536299, "question_id": 34536267, "link": "https://stackoverflow.com/questions/34536267/why-can-we-say-arr-inject-but-have-to-say-arr-mapto-s/34536299#34536299", "title": "Why can we say `arr.inject(:+)` but have to say `arr.map(&amp;:to_s)`?", "body": "<p>It is by design. <code>inject</code> allows an alternative syntax to take a symbol while <code>map</code> always requires a block.</p>\n\n<p>Probably the reason symbol argument is allowed in <code>inject</code> but not in <code>map</code> is because <code>inject</code> always returns the resulting object of iteration, whereas <code>map</code> is designed to return an <code>Enumerator</code> instance when a block is absent. And in case the block is absent, it would become complicated if it had to see whether a symbol argument is provided in order to decide whether to return an <code>Enumerator</code> or the mapped <code>Array</code> instance. So, the Ruby designers made a simple rule for methods like <code>map</code> that the absence of a block means the return value would be an <code>Enumerator</code>.</p>\n\n<p>Ironically, a disadvantage for <code>inject</code> to allow a symbol is that a symbol cannot be passed as the initial value in <code>inject</code>. But probably, the designers of Ruby decided that there would be rare use case for that.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451505832, "post_id": 34536380, "comment_id": 56814534, "body": "I think the OP wants to know why <code>map</code> doesn&#39;t permit its argument to be a symbol."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1451505995, "post_id": 34536380, "comment_id": 56814599, "body": "@CarySwoveland If that&#39;s the case, it&#39;s implicit in my response. But just in case, here&#39;s the response. His assumption is that <code>:+</code> and <code>&amp;:+</code> are the same thing, whereas they are not. The former is a symbol, the latter is a proc from a symbol. <code>map</code> doesn&#39;t accept a symbol because the method was designed to accept a block/proc and not a symbol."}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 1, "creation_date": 1451506716, "post_id": 34536380, "comment_id": 56814963, "body": "oh I did say &quot;If the reason is that map can&#39;t take a symbol but must take a block, then would it make sense if map takes a symbol too?&quot;"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 1, "creation_date": 1451507216, "post_id": 34536380, "comment_id": 56815208, "body": "@\u592a\u6975\u8005\u7121\u6975\u800c\u751f that&#39;s a subjective question, which is outside the scope of SO. Personally, I don&#39;t see any good reason I should be able to pass a symbol, because it would have the same behavior of <code>&amp;:to_s</code> which is semantically different (and short enough). <code>inject</code> instead have different facets and passing a symbol or a block will result in a different behavior."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451508741, "post_id": 34536380, "comment_id": 56816046, "body": "@SimoneCarletti Will greatly appreciate if you can elaborate on your last line in previous comment.  What different behavior can be seen?  Sawa&#39;s answer provides some details, are ypu referring to same difference?"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451508787, "post_id": 34536380, "comment_id": 56816068, "body": "@WandMaker I explained the two differences in my answer. They are highlighted in bold."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451509194, "post_id": 34536380, "comment_id": 56816262, "body": "@SimoneCarletti. Got it now...had to read it few times for it to sink in"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451545213, "post_id": 34536380, "comment_id": 56826751, "body": "I assumed that the OP realized that <code>inject(:+)</code> was not shorthand for <code>inject(&amp;:+)</code>, but perhaps I was wrong."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 3, "last_activity_date": 1451505544, "creation_date": 1451505544, "answer_id": 34536380, "question_id": 34536267, "link": "https://stackoverflow.com/questions/34536267/why-can-we-say-arr-inject-but-have-to-say-arr-mapto-s/34536380#34536380", "title": "Why can we say `arr.inject(:+)` but have to say `arr.map(&amp;:to_s)`?", "body": "<p>This is by design. Specifically, <code>inject</code>/<code>reduce</code> don't require the full symbol-to-proc syntax (<code>&amp;:+</code>) but instead they allow to pass just a symbol (<code>:+</code>) (which a different behavior).</p>\n\n<p>Please note that, in this specific case, passing a symbol is not the same of passing a proc derived from the symbol.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">From the Ruby documentation</a></p>\n\n<blockquote>\n  <p>Combines all elements of enum by applying a binary operation, specified by <strong>a block</strong> or <strong>a symbol</strong> that names a method or operator.</p>\n  \n  <p><strong>If you specify a block, then for each element in enum the block is passed an accumulator value (memo) and the element. If you specify a symbol instead, then each element in the collection will be passed to the named method of memo.</strong> In either case, the result becomes the new value for memo. At the end of the iteration, the final value of memo is the return value for the method.</p>\n</blockquote>\n"}], "owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1451507311, "creation_date": 1451505062, "last_edit_date": 1451505813, "question_id": 34536267, "link": "https://stackoverflow.com/questions/34536267/why-can-we-say-arr-inject-but-have-to-say-arr-mapto-s", "title": "Why can we say `arr.inject(:+)` but have to say `arr.map(&amp;:to_s)`?", "body": "<p>It seems that we can always use <code>&amp;:+</code>. Why can <code>inject</code> take <code>:+</code> while <code>map</code> has to take <code>&amp;:to_s</code>?  If the reason is that <code>map</code> can't take a symbol but must take a block, then would it make sense if <code>map</code> takes a symbol too?</p>\n\n<pre><code>[1,3,5].inject(:+)   # =&gt; 9\n[1,3,5].inject(&amp;:+)  # =&gt; 9\n[1,3,5].map(&amp;:to_s)  # =&gt; [\"1\", \"3\", \"5\"]\n[1,3,5].map(:to_s)   # =&gt; ArgumentError: wrong number of arguments (1 for 0)\n</code></pre>\n"}, {"tags": ["ruby", "mongoid", "rake"], "comments": [{"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1451520958, "post_id": 34536238, "comment_id": 56820730, "body": "Using mongoid on it&#39;s own."}], "answers": [{"tags": [], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1451524947, "creation_date": 1451524947, "answer_id": 34539761, "question_id": 34536238, "link": "https://stackoverflow.com/questions/34536238/ruby-rake-mongoid-list-rows-in-a-table/34539761#34539761", "title": "Ruby Rake Mongoid List Rows in a Table", "body": "<p>My initial confusion was because I skimmed over the Mongoid doc:\n<a href=\"https://docs.mongodb.org/ecosystem/tutorial/ruby-mongoid-tutorial\" rel=\"nofollow\">https://docs.mongodb.org/ecosystem/tutorial/ruby-mongoid-tutorial</a></p>\n\n<p>After I followed the documentation I came up with the following that works outside of rails:</p>\n\n<pre><code>require 'mongoid'\nMongoid.load!('mongoid.yml', :development)\n\nclass Sites\n  include Mongoid::Document\n  store_in collection: \"sites\"\nend\n\ntask default: %w[getYahoo]\n\ndesc \"Gets Site named Yahoo\"\ntask :getYahoo do\n  puts Sites.where(name: \"Yahoo\").as_json\nend\n</code></pre>\n\n<p>Where mongoid.yml is in the same path as the Rakefile. sites is a collection within the database specified in the configuation. Running rake without parameters works because 'getYahoo' is the default task.</p>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451524947, "creation_date": 1451504949, "question_id": 34536238, "link": "https://stackoverflow.com/questions/34536238/ruby-rake-mongoid-list-rows-in-a-table", "title": "Ruby Rake Mongoid List Rows in a Table", "body": "<p>I'm new to Ruby and Rake and I'm looking to build a simple backend application that queries a Mongo DB and then runs tasks off of the results. </p>\n\n<p>Here's my current code:</p>\n\n<pre><code>task default: %w[getProd]\nrequire 'mongoid'\n\ndesc \"Get Product named iPad from the product table\"\ntask :getProd do\n  product.where(name: \"iPad\")\nend\n</code></pre>\n\n<p><strong>How can I query using Mongoid from within a Rake task?</strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451507603, "post_id": 34536222, "comment_id": 56815425, "body": "The issue has nothing to do with boolean. Neither is it about variables. You do not even have a variable there. The issue is about constants."}, {"owner": {"reputation": 59, "user_id": 4180296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1SdKa.jpg?s=128&g=1", "display_name": "Abderrahmane Mechri", "link": "https://stackoverflow.com/users/4180296/abderrahmane-mechri"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451507708, "post_id": 34536222, "comment_id": 56815505, "body": "yeah i didn&#39;t know that if you start your var with capital letter ruby will think it is a constant , i want to have a boolean var not a constant @sawa"}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3323850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYzBr.png?s=128&g=1", "display_name": "alebian", "link": "https://stackoverflow.com/users/3323850/alebian"}, "is_accepted": true, "score": 2, "last_activity_date": 1451505878, "creation_date": 1451505878, "answer_id": 34536455, "question_id": 34536222, "link": "https://stackoverflow.com/questions/34536222/changing-boolean-var-in-ruby-without-having-warnings/34536455#34536455", "title": "Changing boolean var in ruby without having warnings", "body": "<p>If you create a variable with the first letter as a capital letter, ruby will think it is a constant.</p>\n\n<pre><code>continue = true\nputs continue\ncontinue = false\nif !continue\n  puts 1\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4180296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1SdKa.jpg?s=128&g=1", "display_name": "Abderrahmane Mechri", "link": "https://stackoverflow.com/users/4180296/abderrahmane-mechri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 34536455, "answer_count": 1, "score": 0, "last_activity_date": 1451505878, "creation_date": 1451504910, "question_id": 34536222, "link": "https://stackoverflow.com/questions/34536222/changing-boolean-var-in-ruby-without-having-warnings", "title": "Changing boolean var in ruby without having warnings", "body": "<p>I don't want to redefine the boolean var another time i want just to change it value so i want to know how to do it correctly ? or how to hide these warnings .\nthis is my code : </p>\n\n<pre><code>Continu=true\nputs Continu\nContinu=false\nif !Continu\nputs 1\nend\n</code></pre>\n\n<p>this is the result of the execution :\n<a href=\"https://i.stack.imgur.com/LOTxs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LOTxs.jpg\" alt=\"result of the execution\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1451508815, "post_id": 34536825, "comment_id": 56816080, "body": "This still requires two commands, since <code>default_url_options</code> is <code>nil</code> by default. You still have to start with <code>...default_url_options ||= {}</code> before this."}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1451509336, "post_id": 34536825, "comment_id": 56816320, "body": "If you have <code>config.action_mailer.default_url_options = {ssl: true}</code> in application.rb, that line won&#39;t be necessary."}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1451509719, "post_id": 34536825, "comment_id": 56816553, "body": "Hmm, I guess that&#39;s the best workaround. Really it seems this is a bug in rails, I&#39;ll file a report accordingly."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 1, "last_activity_date": 1451507588, "creation_date": 1451507588, "answer_id": 34536825, "question_id": 34536029, "link": "https://stackoverflow.com/questions/34536029/how-to-set-default-url-options-in-a-dry-manner/34536825#34536825", "title": "How to set default_url_options in a DRY manner?", "body": "<p>You can do something like in env file.</p>\n\n<pre><code>config.action_mailer.default_url_options.merge(host: \"staging.example.com\")\n</code></pre>\n"}], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 34536825, "answer_count": 1, "score": 1, "last_activity_date": 1451509342, "creation_date": 1451504086, "last_edit_date": 1451509342, "question_id": 34536029, "link": "https://stackoverflow.com/questions/34536029/how-to-set-default-url-options-in-a-dry-manner", "title": "How to set default_url_options in a DRY manner?", "body": "<p>I want to set some of the options on <code>config.action_mailer.default_url_options</code> in an initializer. However, the problem is that this value may be <code>nil</code>, or it may be a hash with other options.</p>\n\n<p>Example of the problem when using the reccomended method:</p>\n\n<pre><code># config/application.rb\nconfig.action_mailer.default_url_options = {protocol: 'https'}\n\n# config/environments/production.rb\nconfig.action_mailer.default_url_options = {host: \"example.com\"}\n\n# config/environments/development.rb\nconfig.action_mailer.default_url_options = {host: \"staging.example.com\"}\n</code></pre>\n\n<p>Now <code>default_url_options</code> doesn't have <code>ssl: true</code> set.</p>\n\n<p>The only way to accommodate both possibilities as far as I can tell is to set it to an empty hash if it's null, then add to the hash like so:</p>\n\n<pre><code>config.action_mailer.default_url_options ||= {}\nconfig.action_mailer.default_url_options[:host] = 'example.com'\n</code></pre>\n\n<p>This is not dry, and has to be done anywhere you wish to set this option unless you are absolutely sure none of the options have been set before <em>and</em> nobody will attempt to set one of the options in the future in a file which is loaded before this one.</p>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "each"], "comments": [{"owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "edited": false, "score": 0, "creation_date": 1451504216, "post_id": 34535893, "comment_id": 56813787, "body": "check the query issued for Link.order(cached_votes_up: :desc), see if it uses order by created_at, cached_votes_up"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "reply_to_user": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "edited": false, "score": 0, "creation_date": 1451505007, "post_id": 34535893, "comment_id": 56814133, "body": "@DileepNandanam went into the console to try that out and it turns out that when I vote down on a link, it is not registering. Instead it continues to have my <code>cached_votes_up: 1</code> and <code>cached_votes_down: 0</code>, even though I downvoted and then restarted the console session."}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "reply_to_user": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "edited": false, "score": 0, "creation_date": 1451505033, "post_id": 34535893, "comment_id": 56814140, "body": "@DileepNandanam I posted what I am seeing in the question"}], "answers": [{"comments": [{"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451504531, "post_id": 34536038, "comment_id": 56813931, "body": "Suggestion: change &#39;&#39;&#39;@links = Link.order&#39;&#39;&#39; to &#39;&#39;&#39;ordered_links = Link.order&#39;&#39;&#39;. Then change &#39;&#39;&#39;@links = @links.paginate&#39;&#39;&#39; to &#39;&#39;&#39;@links = ordered_links.paginate&#39;&#39;&#39;"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451505188, "post_id": 34536038, "comment_id": 56814227, "body": "I do like this change @MilesStanfield and Yang. I implemented it. It turns out that this may not be the problem I am having, if you take a look at my updated question, my downvotes are not being registered when I change from a downvote to an upvote."}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1451505602, "post_id": 34536038, "comment_id": 56814434, "body": "Can your users vote a link multiple times without overwriting the previous behaviour?"}, {"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451505956, "post_id": 34536038, "comment_id": 56814588, "body": "Can we see ur dislike_link_path and like_link routes and also their corresponding controller actions?"}], "tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 1, "last_activity_date": 1451504630, "last_edit_date": 1451504630, "creation_date": 1451504133, "answer_id": 34536038, "question_id": 34535893, "link": "https://stackoverflow.com/questions/34535893/acts-as-votable-ordering-based-on-upvotes-in-controller/34536038#34536038", "title": "acts_as_votable ordering based on upvotes in controller", "body": "<p>Please try this:</p>\n\n<pre><code>class LinksController &lt; ApplicationController\n  before_filter :authenticate_user!, except: [:index, :show]\n  def index \n    ordered_links = Link.order(cached_votes_up: :desc)\n    @links = ordered_links.paginate(page: params[:page], per_page: 5)\n\n    respond_to do |format| \n      format.js\n      format.html\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1451509771, "post_id": 34536675, "comment_id": 56816573, "body": "I posted my controller and routes file. Based on what you are explaining here, I think I have that, but just used the <code>downvote_from</code>."}], "tags": [], "owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1451506833, "creation_date": 1451506833, "answer_id": 34536675, "question_id": 34535893, "link": "https://stackoverflow.com/questions/34535893/acts-as-votable-ordering-based-on-upvotes-in-controller/34536675#34536675", "title": "acts_as_votable ordering based on upvotes in controller", "body": "<p>Since you say in your comments your actually having problems registering a downvote, this may help you</p>\n\n<p>According to <a href=\"https://github.com/ryanto/acts_as_votable/blob/master/README.markdown\" rel=\"nofollow\">acts_as_votable</a> gem docs</p>\n\n<blockquote>\n  <p>By default all votes are positive</p>\n</blockquote>\n\n<p>So</p>\n\n<pre><code>@post.vote_by :voter =&gt; @user3\n</code></pre>\n\n<p>Is actually a positive vote. To down vote you need to do something like this ...</p>\n\n<pre><code>@post.vote_by :voter =&gt; @user4, :vote =&gt; 'bad'\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>@post.downvote_from @user2\n</code></pre>\n"}], "owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451508653, "creation_date": 1451503555, "last_edit_date": 1451508653, "question_id": 34535893, "link": "https://stackoverflow.com/questions/34535893/acts-as-votable-ordering-based-on-upvotes-in-controller", "title": "acts_as_votable ordering based on upvotes in controller", "body": "<p>I am using the acts_as_votable gem to order my links based on how many up-votes they get from users. </p>\n\n<p>I used a .each iterator in my view originally to handle the ordering and it worked fine:</p>\n\n<p>@links.order(cached_votes_up: :desc).each do |link|</p>\n\n<p>But now I am trying to include the ordering functionality in my controller and it is not working. I tried a few different ways:</p>\n\n<pre><code>class LinksController &lt; ApplicationController\n  before_filter :authenticate_user!, except: [:index, :show]\n\n  def index\n    @links = Link.order(cached_votes_up: :desc)\n    @links = Link.paginate(page: params[:page], per_page: 5)\n\n    respond_to do |format| \n      format.js\n      format.html\n    end\n  end\nend\n\n    class LinksController &lt; ApplicationController\n      before_filter :authenticate_user!, except: [:index, :show]\n\n      def index\n        @links = Link.order(cached_votes_up: :desc).paginate(page: params[:page], per_page: 5)\n\n        respond_to do |format| \n          format.js\n          format.html\n        end\n      end\nend\n\n\nclass LinksController &lt; ApplicationController\n  before_filter :authenticate_user!, except: [:index, :show]\n\n  def index\n    @links = Link.order(cached_votes_up: :desc)\n    @links.paginate(page: params[:page], per_page: 5)\n\n    respond_to do |format| \n      format.js\n      format.html\n    end\n  end\nend\n</code></pre>\n\n<p>My _link partial:</p>\n\n<pre><code>&lt;div class=\"link row clearfix\"&gt;\n    &lt;h2&gt;\n      &lt;%= image_tag link.avatar.thumb %&gt;\n    &lt;/h2&gt;\n    &lt;h2&gt;\n      &lt;%= link_to link.title, link %&gt;&lt;br&gt;\n    &lt;/h2&gt;\n    &lt;p&gt;\n      &lt;%= link_to link.url, link %&gt;&lt;br&gt;\n    &lt;/p&gt;\n\n\n&lt;!-- acts_as_votable for like_link --&gt;\n    &lt;div class=\"btn-group\"&gt;\n        &lt;%= link_to like_link_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n          &lt;span class=\"glyphicon glyphicon-chevron-up\"&gt;&lt;/span&gt;\n          Upvote\n          &lt;%= link.get_upvotes.size %&gt;\n        &lt;% end %&gt;\n        &lt;%= link_to dislike_link_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n          &lt;span class=\"glyphicon glyphicon-chevron-down\"&gt;\n          Downvote\n          &lt;%= link.get_downvotes.size %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>index.html.erb:</p>\n\n<pre><code>&lt;div id=\"link\"&gt;&lt;%= render @links %&gt;&lt;/div&gt;\n\n&lt;%= will_paginate @links %&gt;\n</code></pre>\n\n<p>Does anyone see what the problem could be or what I may be doing wrong?</p>\n\n<p>This is the output when I run <code>Link.order(cached_votes_up: :desc)</code>. Even though I downvoted this post, it is still returning the object as containing an upvote?</p>\n\n<pre><code>irb(main):001:0&gt; @link = Link.order(cached_votes_up: :desc).first\n  Link Load (2.0ms)  SELECT  \"links\".* FROM \"links\"  ORDER BY \"links\".\"cached_votes_up\" DESC LIMIT 1\n=&gt; #&lt;Link id: 16, title: \"John F Kennedy\", url: \"Change is the law of life. And those who look only...\", created_at: \"2015-12-26 23:56:26\", updated_at: \"2015-12-26 23:56:31\", user_id: nil, cached_votes_total: 1, cached_votes_score: 1, cached_votes_up: 1, cached_votes_down: 0, avatar: \"jfk.jpeg\"&gt;\n</code></pre>\n\n<p>This is my link model containing the acts_as_votable object:</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n    self.per_page = 5\n    belongs_to :user\n    validates :user, presence: true\n    acts_as_votable\n    attr_accessor :avatar\n    mount_uploader :avatar, AvatarUploader\nend\n</code></pre>\n\n<p>This is my routes file:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  resources :users\n  resources :links do\n    member do\n      put \"like\", to: \"links#upvote\"\n      put \"dislike\", to: \"links#downvote\"\n    end\n  end\n  root to: \"links#index\"\n</code></pre>\n\n<p>These are my downvote and upvote actions:</p>\n\n<pre><code>  def upvote\n    @link = Link.find(params[:id])\n    @link.upvote_by current_user\n    redirect_to :back\n  end\n\n  def downvote\n    @link = Link.find(params[:id])\n    @link.downvote_from current_user\n    redirect_to :back\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451503168, "post_id": 34535692, "comment_id": 56813244, "body": "When you give an example (generally a good thing), you should show your desired or expected result. It generally clarifies the question and does not take up much space. btw, it was good of you to define the variable <code>users</code>. That allows readers to reference it in comments and answers. All too often the variable is omitted."}], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1451502885, "creation_date": 1451502885, "answer_id": 34535723, "question_id": 34535692, "link": "https://stackoverflow.com/questions/34535692/ruby-call-get-value-from-hashes-in-array/34535723#34535723", "title": "Ruby: Call Get Value From Hashes In Array", "body": "<pre><code>user_names = users.map {|obj| obj[:name]}\n#user_names = [\"chris\", \"john\"]\n</code></pre>\n\n<p>Will give you Array with all names</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 4276336, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78eb5a456e68b0c6b4c7ecc8be89494e?s=128&d=identicon&r=PG", "display_name": "csduarte", "link": "https://stackoverflow.com/users/4276336/csduarte"}, "edited": false, "score": 0, "creation_date": 1451503748, "post_id": 34535877, "comment_id": 56813532, "body": "Thank you. I thought there might be a some magic that my do that on the fly. But this at least explains it to me. Thanks."}, {"owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "reply_to_user": {"reputation": 171, "user_id": 4276336, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78eb5a456e68b0c6b4c7ecc8be89494e?s=128&d=identicon&r=PG", "display_name": "csduarte", "link": "https://stackoverflow.com/users/4276336/csduarte"}, "edited": false, "score": 0, "creation_date": 1451503856, "post_id": 34535877, "comment_id": 56813585, "body": "The question is how he can use <code>user.map(&amp;:name)</code> in his code, he literally says &#39;I want to do this&#39;. Exactly that code, that&#39;s not what the other answer is saying at all."}], "tags": [], "owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "is_accepted": true, "score": 2, "last_activity_date": 1451503748, "last_edit_date": 1451503748, "creation_date": 1451503516, "answer_id": 34535877, "question_id": 34535692, "link": "https://stackoverflow.com/questions/34535692/ruby-call-get-value-from-hashes-in-array/34535877#34535877", "title": "Ruby: Call Get Value From Hashes In Array", "body": "<p>To be able to use <code>user.map(&amp;:name)</code> you need a <code>name</code> method on every object inside your array. </p>\n\n<p>Hash doesn't have a <code>name</code> method, but you could implement it (Don't do this, it's just an example):</p>\n\n<pre><code>class Hash\n  def name\n    self[:name]\n  end\nend\n</code></pre>\n\n<p>But a much better solution is to define a class for your names. Since this case is very simple a <a href=\"http://www.blackbytes.info/2015/06/struct-and-openstruct/\" rel=\"nofollow\">Struct</a> will do.</p>\n\n<p>Assuming these names belong to users or customers, you could do something like this:</p>\n\n<pre><code>User  = Struct.new(:name)\nusers = []\n\nusers &lt;&lt; User.new('chris')\nusers &lt;&lt; User.new('john')\n\nuser.map(&amp;:name) # ['chris', 'john']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1451504606, "creation_date": 1451504606, "answer_id": 34536138, "question_id": 34535692, "link": "https://stackoverflow.com/questions/34535692/ruby-call-get-value-from-hashes-in-array/34536138#34536138", "title": "Ruby: Call Get Value From Hashes In Array", "body": "<p>You could use following syntax that is based on <code>lambda</code> and <code>proc</code>:</p>\n\n<pre><code>users = [{name: \"chris\"}, {name: \"john\"}]\np users.map(&amp;-&gt;(i){i[:name]})\n</code></pre>\n\n<p>or</p>\n\n<pre><code>users = [{name: \"chris\"}, {name: \"john\"}]\np users.map(&amp;proc{|i| i[:name]})\n</code></pre>\n\n<p>or</p>\n\n<pre><code>users = [{name: \"chris\"}, {name: \"john\"}]\nname = proc{|i| i[:name]}\np users.map(&amp;name)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 4276336, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78eb5a456e68b0c6b4c7ecc8be89494e?s=128&d=identicon&r=PG", "display_name": "csduarte", "link": "https://stackoverflow.com/users/4276336/csduarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 34535877, "answer_count": 3, "score": 1, "last_activity_date": 1451504606, "creation_date": 1451502750, "question_id": 34535692, "link": "https://stackoverflow.com/questions/34535692/ruby-call-get-value-from-hashes-in-array", "title": "Ruby: Call Get Value From Hashes In Array", "body": "<p>This is probably a stupid one, but I'm missing something here...</p>\n\n<p>I have this</p>\n\n<pre><code>users = [{name: \"chris\"}, {name: \"john\"}]\n</code></pre>\n\n<p>This works</p>\n\n<pre><code>users.map do |obj|\n   puts obj[:name]\nend\n</code></pre>\n\n<p>I want to do this</p>\n\n<pre><code>user.map(&amp;:name)\n</code></pre>\n\n<p>tried the symbol to proc in many different ways with no luck. I can't think of a way to do this that makes sense, but I feel there is one.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 512, "user_id": 3164451, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/J0L7c.png?s=128&g=1", "display_name": "davidpm4", "link": "https://stackoverflow.com/users/3164451/davidpm4"}, "edited": false, "score": 0, "creation_date": 1452062016, "post_id": 34535555, "comment_id": 56999514, "body": "I too am having this issue. Found a fix?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5228881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1429f2e32fc3ee4d52b33bde30dc65d8?s=128&d=identicon&r=PG&f=1", "display_name": "npresco", "link": "https://stackoverflow.com/users/5228881/npresco"}, "edited": false, "score": 1, "creation_date": 1451514829, "post_id": 34536188, "comment_id": 56818839, "body": "I am using dotenv and PUMA as well. I thought you had cracked it but after adding both of those lines to my puma.rb and to application.rb for good measure, I am still getting nothing returned. Any other ideas?"}], "tags": [], "owner": {"reputation": 439, "user_id": 3647232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfOpZ.jpg?s=128&g=1", "display_name": "midN", "link": "https://stackoverflow.com/users/3647232/midn"}, "is_accepted": false, "score": 1, "last_activity_date": 1451504818, "creation_date": 1451504818, "answer_id": 34536188, "question_id": 34535555, "link": "https://stackoverflow.com/questions/34535555/loading-env-in-ruby-on-rails-application/34536188#34536188", "title": "Loading .env in Ruby on Rails application", "body": "<p>I recommend using <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">https://github.com/bkeepers/dotenv</a> gem if you want to load .env file with ENV variables.\nIf you are already using it then according to dotenv readme you should load as soon as possible on boot, for example in config/application.rb add:</p>\n\n<pre><code>require 'dotenv'\nDotenv.load\n</code></pre>\n\n<p>If you use PUMA or Unicorn, in config/puma.rb, config/unicorn.rb add:</p>\n\n<pre><code>  require \"dotenv\"\n  Dotenv.load(\"/path/to/env/.env\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5228881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1429f2e32fc3ee4d52b33bde30dc65d8?s=128&d=identicon&r=PG&f=1", "display_name": "npresco", "link": "https://stackoverflow.com/users/5228881/npresco"}, "edited": false, "score": 0, "creation_date": 1451514751, "post_id": 34537405, "comment_id": 56818794, "body": "I am trying to use heroku in my local environment during development. I have put my .env file in .gitignore as well."}], "tags": [], "owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1451510404, "creation_date": 1451510404, "answer_id": 34537405, "question_id": 34535555, "link": "https://stackoverflow.com/questions/34535555/loading-env-in-ruby-on-rails-application/34537405#34537405", "title": "Loading .env in Ruby on Rails application", "body": "<p>.env file is meant for use in development and test environments. When using heroku you are talking about production environment. You don't want to put your .env file in your repo (it has your secrets in it people could possibly steal). So on heroku there isn't a .env file to reference ... Instead you now use Heroku's environment variables while naming the variables and their values EXACTLY as you did in the .env file then it will work</p>\n"}, {"tags": [], "owner": {"reputation": 1175, "user_id": 3341863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000106811779/picture?type=large", "display_name": "Mantas", "link": "https://stackoverflow.com/users/3341863/mantas"}, "is_accepted": false, "score": 0, "last_activity_date": 1474232180, "creation_date": 1474232180, "answer_id": 39562603, "question_id": 34535555, "link": "https://stackoverflow.com/questions/34535555/loading-env-in-ruby-on-rails-application/39562603#39562603", "title": "Loading .env in Ruby on Rails application", "body": "<p>Had the same issue when following this guide.</p>\n\n<p>The problem in my case was that I followed the guide link to <a href=\"https://devcenter.heroku.com/articles/s3\" rel=\"nofollow\">https://devcenter.heroku.com/articles/s3</a> where they set environment variable S3_BUCKET<strong>_NAME</strong> (instead of S3_BUCKET) and when I came back to the guide I was trying to get S3_BUCKET, when what I had was  S3_BUCKET<strong>_NAME</strong></p>\n"}], "owner": {"reputation": 93, "user_id": 5228881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1429f2e32fc3ee4d52b33bde30dc65d8?s=128&d=identicon&r=PG&f=1", "display_name": "npresco", "link": "https://stackoverflow.com/users/5228881/npresco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11539, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1585609395, "creation_date": 1451502120, "question_id": 34535555, "link": "https://stackoverflow.com/questions/34535555/loading-env-in-ruby-on-rails-application", "title": "Loading .env in Ruby on Rails application", "body": "<p>I am setting up a heroku and I am using using this <a href=\"https://devcenter.heroku.com/articles/direct-to-s3-image-uploads-in-rails#example-app\" rel=\"noreferrer\">guide</a> to set up my local environment for development. I have a '.env' file in the root of my application with the variable set up as noted in the guide. When I run </p>\n\n<pre><code>heroku local:run rails runner \"puts ENV['S3_BUCKET']\"\n</code></pre>\n\n<p>it returns a blank. How do I get it to recognize/load the '.env' file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jobs", "job-scheduling", "sucker-punch"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451502169, "post_id": 34535063, "comment_id": 56812782, "body": "It&#39;d be good to extract the specific information you&#39;re referring to and include that in your answer."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1451502926, "last_edit_date": 1451502926, "creation_date": 1451500099, "answer_id": 34535063, "question_id": 34534900, "link": "https://stackoverflow.com/questions/34534900/rails-sucker-punch-how-to-start-jobs-without-visiting-homepage/34535063#34535063", "title": "Rails Sucker Punch - How to start jobs without visiting homepage?", "body": "<p>Sorry not be very specific, but I think all the info is in the sucker punch gem readme.  It will depend on your configuration, so please read that.</p>\n\n<p>For example: (from the github repo)</p>\n\n<p><strong>Active Job</strong></p>\n\n<p>Sucker Punch has been added as an Active Job adapter in Rails 4.2. See the guide for configuration and implementation.</p>\n\n<p>Add Sucker Punch to your Gemfile:</p>\n\n<pre><code>gem 'sucker_punch'\n</code></pre>\n\n<p>And then configure the backend to use Sucker Punch:</p>\n\n<pre><code># config/initializers/sucker_punch.rb\nRails.application.configure do\n  config.active_job.queue_adapter = :sucker_punch\nend\n</code></pre>\n"}], "owner": {"reputation": 969, "user_id": 387169, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7fd6ad14459f190fffc8afe8f2e8fba7?s=128&d=identicon&r=PG", "display_name": "mhz", "link": "https://stackoverflow.com/users/387169/mhz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 964, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451502926, "creation_date": 1451499398, "last_edit_date": 1592644375, "question_id": 34534900, "link": "https://stackoverflow.com/questions/34534900/rails-sucker-punch-how-to-start-jobs-without-visiting-homepage", "title": "Rails Sucker Punch - How to start jobs without visiting homepage?", "body": "<p>I'm trying to figure out how to have my background jobs in SuckerPunch start work without having to load the index page.</p>\n<p>Right now, what I do is:</p>\n<blockquote>\n<p>$ rails server #starts the server at localhost:3000</p>\n<p>Then I go to my browser URL and enter localhost:3000</p>\n</blockquote>\n<p>This triggers my SuckerPunch jobs, and they start running.</p>\n<p>my application_controller.rb</p>\n<pre><code>class ApplicationController &lt; ActionController::Base\n    \n    # Prevent CSRF attacks by raising an exception.\n    # For APIs, you may want to use :null_session instead.\n    protect_from_forgery with: :exception\n\n    # call job on application start\n    TestEchoJob.new.async.perform(&quot;Download CMS Data&quot;)\n    GetImages.new.async.perform\n    DeleteImages.new.async.perform\n    SendLead.new.async.perform\n\nend\n</code></pre>\n<p>That's where I invoke the jobs.\nI'm thinking maybe there is another place I can put them so I can achieve what I want.</p>\n<p>Start the jobs on server start - not http request.</p>\n"}, {"tags": ["ruby", "twitter-bootstrap", "osx-mountain-lion", "compass", "bootstrap-sass"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 2499981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9638c4e7904718e1566732289ac53006?s=128&d=identicon&r=PG", "display_name": "sinds78", "link": "https://stackoverflow.com/users/2499981/sinds78"}, "is_accepted": true, "score": 0, "last_activity_date": 1451498165, "creation_date": 1451498165, "answer_id": 34534622, "question_id": 34534401, "link": "https://stackoverflow.com/questions/34534401/no-such-file-to-load-bootstrap-sass-using-compass-and-ruby-version-2-3-inst/34534622#34534622", "title": "&#39;no such file to load -- bootstrap-sass&#39; using compass and ruby version 2.3 instead of 1.8", "body": "<p>Found the problem:</p>\n\n<pre><code>$ brew docter\nWarning: /usr/bin occurs before /usr/local/bin\n</code></pre>\n\n<p>Adding /usr/local/bin prior to the $PATH at ~/.bash_profile resolved the issue.</p>\n"}], "owner": {"reputation": 13, "user_id": 2499981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9638c4e7904718e1566732289ac53006?s=128&d=identicon&r=PG", "display_name": "sinds78", "link": "https://stackoverflow.com/users/2499981/sinds78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 34534622, "answer_count": 1, "score": 0, "last_activity_date": 1451498165, "creation_date": 1451497225, "question_id": 34534401, "link": "https://stackoverflow.com/questions/34534401/no-such-file-to-load-bootstrap-sass-using-compass-and-ruby-version-2-3-inst", "title": "&#39;no such file to load -- bootstrap-sass&#39; using compass and ruby version 2.3 instead of 1.8", "body": "<p>Wishing to migrate I am trying to install and use an existing compass project using 'bootstrap-sass' on a server with OSX 10.8 Mountain Lion installed. So far I've installed xCode, xCode Command Line Tools, Homebrew, Git, Compass and updated Ruby since version 1.8.7 ships with OSX Mountain Lion. </p>\n\n<p>When using 'compass watch' or even 'compass create' I receive the following error. It looks like somehow compass uses the old ruby installation version 1.8.7.</p>\n\n<pre><code>LoadError on line 31 of /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb: no such file to load -- bootstrap-sass\n</code></pre>\n\n<p>Additional information</p>\n\n<pre><code>$ compass --version\nCompass 1.0.3 (Polaris)\n\n$ which compass\n/usr/bin/compass\n\n$ ruby version\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin12.0]\n\n$ which ruby\n/usr/local/opt/ruby/bin/ruby\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451495983, "post_id": 34534053, "comment_id": 56809695, "body": "Which method is that?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451496031, "post_id": 34534053, "comment_id": 56809718, "body": "What do you mean by &quot;treats an apostrophe like whitespace&quot;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451496121, "post_id": 34534053, "comment_id": 56809760, "body": "&quot;apostrophe as such&quot;--What does &quot;such&quot; refer to?"}, {"owner": {"reputation": 11, "user_id": 5728421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8iImRzJF9_I/AAAAAAAAAAI/AAAAAAAACkI/6L-nnELGShk/photo.jpg?sz=128", "display_name": "tickyt23", "link": "https://stackoverflow.com/users/5728421/tickyt23"}, "edited": false, "score": 0, "creation_date": 1451496176, "post_id": 34534053, "comment_id": 56809797, "body": "So I&#39;m plucking data. &lt;%= var = Post.pluck(:body) %&gt; &lt;%= var.join.downcase.split(/\\W+/) %&gt;  I just want the apostrophe to be included in the returned words. So it would say &quot;baby&#39;s&quot; instead of &quot;baby&quot; &quot;s&quot;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451502891, "post_id": 34534053, "comment_id": 56813106, "body": "Be very careful with <code>\\w</code> or <code>\\W</code> unless you know exactly what you&#39;re going to get when dealing with that character-class."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451504149, "post_id": 34534053, "comment_id": 56813745, "body": "And, BTW, you&#39;re getting down votes and close votes most likely because you don&#39;t show any effort toward solving the problem. We&#39;d really like evidence of your research and why searching didn&#39;t reveal the answer before asking. Your question is very elementary and easily resolved by reading regular expression tutorials and/or searching. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5728421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8iImRzJF9_I/AAAAAAAAAAI/AAAAAAAACkI/6L-nnELGShk/photo.jpg?sz=128", "display_name": "tickyt23", "link": "https://stackoverflow.com/users/5728421/tickyt23"}, "edited": false, "score": 0, "creation_date": 1451496760, "post_id": 34534192, "comment_id": 56810099, "body": "Thanks! It does answer the apostrophe problem. However, now when it plucks the data, it connects the last word of the first post and the first word of the second post such as &quot;foot.Whale&quot; instead of keeping those two separate (being two separate posts). Do you have another answer that&#39;s also staring me right in the face?"}], "tags": [], "owner": {"reputation": 606, "user_id": 75118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdcc6a88ae2eea37ac1a2366f085344?s=128&d=identicon&r=PG", "display_name": "enkrates", "link": "https://stackoverflow.com/users/75118/enkrates"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499067, "last_edit_date": 1451499067, "creation_date": 1451496450, "answer_id": 34534192, "question_id": 34534053, "link": "https://stackoverflow.com/questions/34534053/include-apostrophe-with-split/34534192#34534192", "title": "Include apostrophe with .split()", "body": "<p>Running that string through <code>irb</code> with the same <code>split</code> call that you wrote in your comment gets this:</p>\n\n<pre><code>irb(main):008:0&gt; \"The baby's foot\".split(/\\W+/)\n=&gt; [\"The\", \"baby\", \"s\", \"foot\"]\n</code></pre>\n\n<p>However, if you use <code>split</code> without an explicit delimiter, you get the split you're looking for:</p>\n\n<pre><code>irb(main):009:0&gt; \"The baby's foot\".split\n=&gt; [\"The\", \"baby's\", \"foot\"]\n</code></pre>\n\n<p>Does that get you what you're looking for?</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5728421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8iImRzJF9_I/AAAAAAAAAAI/AAAAAAAACkI/6L-nnELGShk/photo.jpg?sz=128", "display_name": "tickyt23", "link": "https://stackoverflow.com/users/5728421/tickyt23"}, "edited": false, "score": 0, "creation_date": 1451496853, "post_id": 34534224, "comment_id": 56810154, "body": "Perfect! That fixed everything. Thanks for the explanation too!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1451498798, "post_id": 34534224, "comment_id": 56811202, "body": "Please see my answer below, this approach is too nai\u0308ve."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 0, "last_activity_date": 1451498578, "last_edit_date": 1451498578, "creation_date": 1451496571, "answer_id": 34534224, "question_id": 34534053, "link": "https://stackoverflow.com/questions/34534053/include-apostrophe-with-split/34534224#34534224", "title": "Include apostrophe with .split()", "body": "<p>You can use below RegEx instead of <code>/\\W+/</code></p>\n\n<pre><code>var.join.downcase.split(/[^'\\w]+/)\n</code></pre>\n\n<p><code>/\\W/</code> refers to all non-word characters, apostrophe is one such non-word character.\nTo keep the code as close to original intent, we can use <code>/[^'\\w]/</code> - this means that all characters that are not apostrophe and word character.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1451499232, "last_edit_date": 1451499232, "creation_date": 1451498773, "answer_id": 34534773, "question_id": 34534053, "link": "https://stackoverflow.com/questions/34534053/include-apostrophe-with-split/34534773#34534773", "title": "Include apostrophe with .split()", "body": "<p>Accepted answer is too nai\u0308ve:</p>\n\n<pre><code>\u25b6 \"It\u2019s nai\u0308ve approach\".split(/[^'\\w]+/)\n#\u21d2 [\n#  [0] \"It\",\n#  [1] \"s\",\n#  [2] \"nai\",\n#  [3] \"ve\",\n#  [4] \"approach\"\n# ]\n</code></pre>\n\n<p>this is because nowadays there is almost 2016 and many users might want to use their normal names, like, you know, Jose\u0301 \u00d8stergaard. Punctuation is not only the apostroph, as you might notice.</p>\n\n<pre><code>\u25b6 \"It\u2019s nai\u0308ve approach\".split(/[^'\u2019\\p{L}\\p{M}]+/)\n#\u21d2 [\n#  [0] \"It\u2019s\",\n#  [1] \"nai\u0308ve\",\n#  [2] \"approach\"\n# ]\n</code></pre>\n\n<p>Further reading: <a href=\"http://ruby-doc.org/core-2.2.0/doc/regexp_rdoc.html#label-Character+Properties\" rel=\"nofollow\">Character Properties</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1451504336, "last_edit_date": 1451504336, "creation_date": 1451503498, "answer_id": 34535874, "question_id": 34534053, "link": "https://stackoverflow.com/questions/34534053/include-apostrophe-with-split/34535874#34535874", "title": "Include apostrophe with .split()", "body": "<p>Along the lines of mudasobwa's answer, here's what <code>\\w</code> and <code>\\W</code> bring to the party:</p>\n\n<pre><code>chars = [*' ' .. \"\\x7e\"].join\n# =&gt; \" !\\\"\\#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n</code></pre>\n\n<p>That's the usual visible lower-ASCII characters we'd see in code. See <a href=\"http://ruby-doc.org/core-2.3.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow\">the Regexp documentation</a> for more information.</p>\n\n<p>Grabbing the characters that match <code>\\w</code> returns:</p>\n\n<pre><code>chars.scan(/\\w+/)\n# =&gt; [\"0123456789\",\n#     \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\n#     \"_\",\n#     \"abcdefghijklmnopqrstuvwxyz\"]\n</code></pre>\n\n<p>Conversely, grabbing the characters that don't match <code>\\w</code>, or that match <code>\\W</code>:</p>\n\n<pre><code>chars.scan(/\\W+/)\n# =&gt; [\" !\\\"\\#$%&amp;'()*+,-./\", \":;&lt;=&gt;?@\", \"[\\\\]^\", \"`\", \"{|}~\"]\n</code></pre>\n\n<p><code>\\w</code> is defined as <code>[a-zA-Z0-9_]</code> which is not what you want to normally call \"word\" characters. Instead they're typically the characters we use to define variable names.</p>\n\n<p>If you're dealing with only lower-ASCII characters, use the character-class </p>\n\n<pre><code>[a-zA-Z]\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>chars = [*' ' .. \"\\x7e\"].join\nlower_ascii_chars = '[a-zA-Z]'\nnot_lower_ascii_chars = '[^a-zA-Z]'\nchars.scan(/#{lower_ascii_chars}+/)\n# =&gt; [\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"abcdefghijklmnopqrstuvwxyz\"]\nchars.scan(/#{not_lower_ascii_chars}+/)\n# =&gt; [\" !\\\"\\#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@\", \"[\\\\]^_`\", \"{|}~\"]\n</code></pre>\n\n<p>Instead of defining your own, you can take advantage of the POSIX definitions and <a href=\"http://ruby-doc.org/core-2.3.0/Regexp.html#class-Regexp-label-Character+Properties\" rel=\"nofollow\">character properties</a>:</p>\n\n<pre><code>chars.scan(/[[:alpha:]]+/)\n# =&gt; [\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"abcdefghijklmnopqrstuvwxyz\"]\n\nchars.scan(/\\p{Alpha}+/)\n# =&gt; [\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"abcdefghijklmnopqrstuvwxyz\"]\n</code></pre>\n\n<p>Regular expressions always seem like a wonderful new wand to wave when extracting information from a string, but, like <a href=\"https://en.wikipedia.org/wiki/The_Sorcerer%27s_Apprentice_(2010_film)\" rel=\"nofollow\">the Sorcerer's Apprentice</a> found out, they can create havoc when misused or not understood.</p>\n\n<p>Knowing this should help you write a bit more intelligent patterns. Apply that to what the documentation shows and you should be able to easily figure out a pattern that does what you want.</p>\n"}], "owner": {"reputation": 11, "user_id": 5728421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8iImRzJF9_I/AAAAAAAAAAI/AAAAAAAACkI/6L-nnELGShk/photo.jpg?sz=128", "display_name": "tickyt23", "link": "https://stackoverflow.com/users/5728421/tickyt23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 34534224, "answer_count": 4, "score": -3, "last_activity_date": 1451504336, "creation_date": 1451495841, "last_edit_date": 1451498988, "question_id": 34534053, "link": "https://stackoverflow.com/questions/34534053/include-apostrophe-with-split", "title": "Include apostrophe with .split()", "body": "<p>I'm trying to display an array of words from a user's post. However the method I'm using treats an apostrophe like whitespace. </p>\n\n<pre><code>&lt;%= var = Post.pluck(:body) %&gt;\n&lt;%= var.join.downcase.split(/\\W+/) %&gt;\n</code></pre>\n\n<p>So if the input text was: <code>The baby's foot</code><br>\nit would output <code>the</code> <code>baby</code> <code>s</code> <code>foot</code>,<br>\nbut it should be <code>the</code> <code>baby's</code> <code>foot</code>.</p>\n\n<p>How do I accomplish that? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "insert"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451494309, "post_id": 34533619, "comment_id": 56808767, "body": "StackOverflow uses mark down - you may need to use something like that for content, you will have to use markdown parser gem"}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451494510, "post_id": 34533619, "comment_id": 56808879, "body": "Wow.. Really a big thanks for u. You better post this in answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451498848, "post_id": 34533736, "comment_id": 56811227, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99328/discussion-between-akash-pinnaka-and-wand-maker\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 3, "last_activity_date": 1451494647, "creation_date": 1451494647, "answer_id": 34533736, "question_id": 34533619, "link": "https://stackoverflow.com/questions/34533619/i-want-to-insert-the-image-in-between-the-content/34533736#34533736", "title": "I want to insert the image in between the content", "body": "<p>StackOverflow uses Markdown for its content.</p>\n\n<p>You can use gem like <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow\">RedCarpet</a> to parse mark down, and render content similar to StackOverflow.</p>\n\n<p>There is a Rails Casts video on this topic - <a href=\"https://www.youtube.com/watch?v=vPW6t-r0xzM\" rel=\"nofollow\">Ruby on Rails - Railscasts #272 Markdown With Redcarpet</a></p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "edited": false, "score": 0, "creation_date": 1451499882, "post_id": 34533885, "comment_id": 56811678, "body": "Is that a tool to embed in the browser page?"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "edited": false, "score": 0, "creation_date": 1451500448, "post_id": 34533885, "comment_id": 56811915, "body": "Yes, CKeditor is a javascript based text editor. You can embed it on any web page."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 2, "last_activity_date": 1451495184, "creation_date": 1451495184, "answer_id": 34533885, "question_id": 34533619, "link": "https://stackoverflow.com/questions/34533619/i-want-to-insert-the-image-in-between-the-content/34533885#34533885", "title": "I want to insert the image in between the content", "body": "<p>For images, you can try an rich editor like CKeditor, hooked with Paperclip/Carrierwave.\nUsually it'll use a separate model to store images.\nYou'll upload images through CKeditor and it'll insert the image in content.</p>\n"}], "owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 34533736, "answer_count": 2, "score": 1, "last_activity_date": 1451495184, "creation_date": 1451494181, "question_id": 34533619, "link": "https://stackoverflow.com/questions/34533619/i-want-to-insert-the-image-in-between-the-content", "title": "I want to insert the image in between the content", "body": "<p>I am beginner in ruby on rails. I am developing a blog where I can write articles.<br> <strong>Article</strong> table has <strong>title</strong>, <strong>content</strong> and <strong>image</strong> columns.<br></p>\n\n<p><strong><em>Article Model</em></strong></p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n\nhas_attached_file :image, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }\nvalidates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\Z/\n\nend\n</code></pre>\n\n<p><strong><em>Articles Controller</em></strong></p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\ndef index\n    @articles = Article.all.order(\"created_at DESC\")\nend\n\ndef new\n    @article = Article.new\nend\n\ndef create\n    @article = Article.new article_params\n    if @article.save\n        redirect_to articles_path\n    else\n        render 'new'\n    end\nend\n\ndef edit\n    @article = Article.find(params[:id])\nend\n\ndef update\n    @article = Article.find(params[:id])\n    if @article.update article_params\n        redirect_to articles_path\n    else\n        render 'edit'\n    end\nend\n\n\nprivate\n\ndef article_params\n    params.require(:article).permit(:title, :content, :image)\nend\n\nend\n</code></pre>\n\n<p><strong><em>Articles#new</em></strong></p>\n\n<pre><code>&lt;%= form_for @article, html: { multipart: true } do |f| %&gt;\n  &lt;%= f.text_field :title, placeholder: \"Title\" %&gt;&lt;br /&gt;&lt;br /&gt;\n  &lt;%= f.text_area :content, placeholder: \"Content\" %&gt;&lt;br /&gt;&lt;br /&gt;\n  &lt;%= f.file_field :image %&gt;&lt;br /&gt;&lt;br /&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I am using \"paperclip gem\" for uploading images.<br> I am able to upload and display the image corresponding to the article.<br>\nWhat I need is I want to display the image in between the content of the article whereever I needed(like in stackoverflow). Please help me on this. Thanks in advance.</p>\n"}, {"tags": ["ruby", "range"], "comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451492310, "post_id": 34532875, "comment_id": 56807646, "body": "Instead of adding a thank you message (which is against the rules) you should consider <a href=\"http://meta.stackexchange.com/q/5234/179419\">accepting</a> the answer that helped you most by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451502641, "post_id": 34532875, "comment_id": 56812993, "body": "@idmean, you asked the OP to select your answer a mere 16 minutes after the question was posted (albeit guised in general advice). Eats, don&#39;t be intimidated by such requests. There is no hurry whatsoever in selecting an answer. A quick selection may discourage other, possibly better answers, and imo is discourteous to those still working on their answers when the selection is made. Many of us on SO wait at least a couple of hours (sometimes much longer) before selecting an answer. Note you can change your selection whenever you like."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451503558, "post_id": 34532875, "comment_id": 56813431, "body": "@CarySwoveland I completely agree with you and normally don\u2019t post any comments like this before a few days have passed. This was an exception because the user <a href=\"http://stackoverflow.com/posts/34532875/revisions\">edited</a> his question to thank me and apparently (looking at his profile) didn\u2019t knew how to accept an answer. I also regularly comment the same text at questions where the same has happened even if I haven\u2019t answered it (That\u2019s the reason why it\u2019s a general advice). It\u2019s not by intention to get more reputation or outdo an answer, I actually up voted the better answer below myself."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451500309, "post_id": 34532989, "comment_id": 56811855, "body": "Eats may wish to read the doc for <code>between?</code>. Do you think he/she will be able to find it? You should provide the link: <a href=\"http://ruby-doc.org/core-2.2.0/Comparable.html#method-i-between-3F\" rel=\"nofollow noreferrer\">Comparable#between</a> and explain <code>Fixnum.included_modules #=&gt; [Comparable, Kernel]</code>."}], "tags": [], "owner": {"reputation": 522, "user_id": 2888880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24780d50cfcf86f2be7cc58e60db6d6?s=128&d=identicon&r=PG&f=1", "display_name": "inic", "link": "https://stackoverflow.com/users/2888880/inic"}, "is_accepted": false, "score": 4, "last_activity_date": 1451491737, "creation_date": 1451491737, "answer_id": 34532989, "question_id": 34532875, "link": "https://stackoverflow.com/questions/34532875/how-can-i-avoid-error-when-setting-elsif-range-condition/34532989#34532989", "title": "How can I avoid error when setting elsif range condition?", "body": "<p>The problem is with the lines that say == with a range. </p>\n\n<pre><code>if ( 10  == 1..11) # throws integer literal in conditional range warning\n    puts \"true\"\nend\n</code></pre>\n\n<p>If you did this instead</p>\n\n<pre><code>if ( 10.between?(1, 11))\n    puts \"true\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 5516006, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e5a98d4dc2901221134d6ace8c863f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Eats Indigo", "link": "https://stackoverflow.com/users/5516006/eats-indigo"}, "edited": false, "score": 0, "creation_date": 1451492042, "post_id": 34533036, "comment_id": 56807512, "body": "Thank you, this was perfect!"}], "tags": [], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "is_accepted": true, "score": 5, "last_activity_date": 1451492046, "last_edit_date": 1451492046, "creation_date": 1451491938, "answer_id": 34533036, "question_id": 34532875, "link": "https://stackoverflow.com/questions/34532875/how-can-i-avoid-error-when-setting-elsif-range-condition/34533036#34533036", "title": "How can I avoid error when setting elsif range condition?", "body": "<p>You should use <code>include?</code> instead of <a href=\"http://ruby-doc.org/core-2.2.0/Range.html#method-i-include-3F\" rel=\"nofollow\"><code>==</code></a> to determine if the given number is within the range:</p>\n\n<pre><code>def Summer\n    @summer = true\n    puts \"Your fruit are ripe for the picking.\"\n    if (1..5).include?(@tree_age) &amp;&amp; @tree_age &gt; 0\n        @oranges = 5\n    elsif (6..15).include? @tree_age\n        @oranges = 20\n    else\n        @oranges = 50\n    end\nend\n</code></pre>\n\n<p><code>==</code>:</p>\n\n<blockquote>\n  <p>Returns true only if obj is a Range, has equivalent begin and end\n  items (by comparing them with ==), and has the same exclude_end?\n  setting as the range.</p>\n</blockquote>\n\n<p>Which is obviously not the case.</p>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 5516006, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e5a98d4dc2901221134d6ace8c863f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Eats Indigo", "link": "https://stackoverflow.com/users/5516006/eats-indigo"}, "edited": false, "score": 0, "creation_date": 1451492571, "post_id": 34533055, "comment_id": 56807790, "body": "Thank you, this was really helpful, and I&#39;ve jotted your answer in my notebook. I had put &amp;&amp; &gt; 0 just to exclude any weird values that may somehow lead to a negative age, not really sure if it was necessary."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451501225, "post_id": 34533055, "comment_id": 56812274, "body": "I like your answer for the third point and case statement, but disagree with the first two bits of advice. The lack of parentheses around ranges does not necessarily invite errors or make the code hard harder to follow as you yourself have shown by your case statement! :-) &quot;...use <code>(1..5) === num</code>, not <code>num === (1..5)</code> should read &quot;...you could write <code>(1..5) === num</code> (not <code>num === (1..5)</code>), but that should be avoided, as it is much clearer to write <code>(1..5).include?(num)</code> or <code>(1..5).cover?(num)</code> or <code>num &gt;= 1 &amp;&amp; num &lt;= 5</code>."}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1451501353, "post_id": 34533055, "comment_id": 56812349, "body": "To each their own. Parentheses are commonly helpful for me trying things like <code>1..5.each</code>, which fails trying to evaluate <code>5.each</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451501860, "post_id": 34533055, "comment_id": 56812613, "body": "If you took your own advice you&#39;d put the ranges in parentheses in the case statement. Should you? Of course not. Nor is the OP&#39;s lack of parentheses a problem. Clearly, in many situations parentheses not needed, or are desirable for improved readability, just not everywhere."}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1451504386, "post_id": 34533055, "comment_id": 56813872, "body": "There wasn&#39;t a typo, but I&#39;ve clarified why not - thanks. I&#39;m leaving the parentheses advice because Ruby gets confused about the OP&#39;s original code: <code>a = 0; a == 1..5 &amp;&amp; a &gt; 0 #=&gt; false..false</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451504705, "post_id": 34533055, "comment_id": 56813991, "body": "Better, imo: &quot;not <code>num == (1..5)</code> or <code>num === (1..5)</code>&quot;. It still looks amusing to see you contradict your own advice in the <code>case</code> statement."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 8, "last_activity_date": 1451597998, "last_edit_date": 1451597998, "creation_date": 1451492022, "answer_id": 34533055, "question_id": 34532875, "link": "https://stackoverflow.com/questions/34532875/how-can-i-avoid-error-when-setting-elsif-range-condition/34533055#34533055", "title": "How can I avoid error when setting elsif range condition?", "body": "<p>You have a few problems:</p>\n\n<ul>\n<li>You'll want to put your ranges in parenthesis when other operators or methods are nearby. Your current error comes from Ruby parsing <code>elsif @tree_age == 6..15</code> differently than you expect - it's treating it as <code>(1 == 6)..15</code>, and <code>false..15</code> obviously doesn't make any sense.</li>\n<li>To test a number is within a range, use <code>(1..5) === num</code>, not <code>num == (1..5)</code>. <a href=\"http://ruby-doc.org/core/Range.html#method-i-3D-3D-3D\" rel=\"nofollow\"><code>Range#===</code></a> is defined to test that the <code>Range</code> includes the right hand side, while <a href=\"http://ruby-doc.org/core/Fixnum.html#method-i-3D-3D\" rel=\"nofollow\"><code>Fixnum#==</code></a> and <a href=\"http://ruby-doc.org/core/Fixnum.html#method-i-3D-3D-3D\" rel=\"nofollow\"><code>Fixnum#===</code></a> both just test that the right hand side is numerically equivalent. </li>\n<li>You don't need to test <code>@tree_age &gt; 0</code>. You're already testing that it's in <code>1..5</code>.</li>\n</ul>\n\n<p>You could also consider a <code>case</code> statement for this, which can be a bit easier to read. <code>case</code> does its comparisons using <code>===</code>.</p>\n\n<pre><code>@oranges = case @tree_age\n           when 1..5 then 5\n           when 6..15 then 20\n           else 50\n           end\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 5516006, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e5a98d4dc2901221134d6ace8c863f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Eats Indigo", "link": "https://stackoverflow.com/users/5516006/eats-indigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 34533036, "answer_count": 3, "score": 0, "last_activity_date": 1451597998, "creation_date": 1451491345, "last_edit_date": 1451492256, "question_id": 34532875, "link": "https://stackoverflow.com/questions/34532875/how-can-i-avoid-error-when-setting-elsif-range-condition", "title": "How can I avoid error when setting elsif range condition?", "body": "<pre><code>def Summer\n    @summer = true\n    puts \"Your fruit are ripe for the picking.\"\n    if @tree_age == 1..5 &amp;&amp; @tree_age &gt; 0\n        @oranges = 5\n    elsif @tree_age == 6..15\n        @oranges = 20\n    else\n        @oranges = 50\n    end\nend\n</code></pre>\n\n<p>I'm trying to ensure a tree between a certain age range gives x oranges, however I'm stuck with the following error referring to my elsif statement:</p>\n\n<pre><code>Orange_tree.rb:14: warning: integer literal in conditional range\n</code></pre>\n\n<p>I have also tried using an if greater than &amp;&amp; less than conditional statement, can somebody please explain what this error means, and how to reach my solution.</p>\n"}, {"tags": ["ruby", "numbers", "append"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451491702, "post_id": 34532737, "comment_id": 56807320, "body": "Program prints 86,86,86,4  not 86,86,86,256"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451491771, "post_id": 34532737, "comment_id": 56807365, "body": "@WandMaker Yeah I noticed that, I just edited the question."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451491799, "post_id": 34532737, "comment_id": 56807385, "body": "It is doing what you have written code for, what is the expected output?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451504827, "post_id": 34532737, "comment_id": 56814049, "body": "Please don&#39;t prepend line numbers to your code unless you are showing specific lines that are referred to by an error/exception. Your sample code should be easily copied/pasted and be the minimum necessary to demonstrate a problem. Anything beyond that slows people helping you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451505305, "post_id": 34532737, "comment_id": 56814281, "body": "Please don&#39;t include line numbers (or IRB prompts, etc.) with your code, as it prevents readers from simply cutting and pasting. If you need to reference a line you can do it without line numbers. Once you get your code working consider posting it on <a href=\"http://codereview.stackexchange.com/\">Code Review</a> to get suggestions for how it can be improved."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451566895, "post_id": 34532737, "comment_id": 56835282, "body": "@CarySwoveland Code Review is for code that works <i>the way you want it to</i> with out any bugs. This program obviously didn&#39;t work the way I wanted it to, so why post it somewhere it doesn&#39;t belong?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451587364, "post_id": 34532737, "comment_id": 56843135, "body": "I said, &quot;Once you get your code working...&quot;. Think of it as a two-step process. You first need to know what you&#39;ve done wrong and how to fix it. That&#39;s what SO is for. Once you understand the problem and have working code it still may not use the power of Ruby effectively. To see how you could improve your (working) code, post it on Code Review. Members of CR are eager to help, including those new to Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451493552, "post_id": 34533147, "comment_id": 56808340, "body": "OOOO that is awesome, thanks for the great information!"}], "tags": [], "owner": {"reputation": 9504, "user_id": 371037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544250e2df65ec0db1d866bade4cbdbd?s=128&d=identicon&r=PG", "display_name": "jason.rickman", "link": "https://stackoverflow.com/users/371037/jason-rickman"}, "is_accepted": true, "score": 1, "last_activity_date": 1451492362, "creation_date": 1451492362, "answer_id": 34533147, "question_id": 34532737, "link": "https://stackoverflow.com/questions/34532737/i-have-a-issue-appending/34533147#34533147", "title": "I have a issue.. Appending", "body": "<blockquote>\n  <p>... if each string contains 60 numbers I want it to append into the a string until there are no more numbers</p>\n</blockquote>\n\n<p>As written, you are unconditionally appending to x,y,z even after they hit your limit.\nYou need to add a conditional around this code:</p>\n\n<pre><code>   x &lt;&lt; i if count == 1\n   y &lt;&lt; i if count == 2\n   z &lt;&lt; i if count == 3\n</code></pre>\n\n<p>so that it stops appending once it hits your limit.</p>\n\n<p>By the looks of the else block that does nothing, I think you were headed in that direction:</p>\n\n<pre><code>  if x.length == 60\n    a &lt;&lt; i if count == 1\n    a &lt;&lt; i if count == 2\n    a &lt;&lt; i if count == 3\n  else\n   x &lt;&lt; i if count == 1\n   y &lt;&lt; i if count == 2\n   z &lt;&lt; i if count == 3\n  end\n</code></pre>\n\n<p>Even that, though, won't do exactly what you want. \nYou'll want to check the string you are appending to to see if it has hit your limit yet.</p>\n\n<p>I'd suggest refactoring to make it cleaner:</p>\n\n<pre><code> users.each do |i|\n   target_string = case count\n   when 1 then x\n   when 2 then y\n   when 3 then z\n   end\n\n   target_string = a if target_string.length == 60\n\n   target_string &lt;&lt; i\n\n   if count == 3\n     count = 1\n   else\n     count += 1\n   end\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451505699, "post_id": 34534741, "comment_id": 56814477, "body": "You might want to explain what <code>cycle</code> and <code>next</code> are doing."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451505974, "post_id": 34534741, "comment_id": 56814593, "body": "@theTinMan Sure, let me try to explain"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1451506925, "last_edit_date": 1451506925, "creation_date": 1451498648, "answer_id": 34534741, "question_id": 34532737, "link": "https://stackoverflow.com/questions/34532737/i-have-a-issue-appending/34534741#34534741", "title": "I have a issue.. Appending", "body": "<p>It may be better to use an array instead of string as you are pushing numbers into those variables.</p>\n\n<p>Let me propose a solution which achieves more or less what you are trying to do, but uses few Ruby tricks that may be useful in future.</p>\n\n<pre><code>x, y, z = r = Array.new(3) {[]}\na = []\n\niter = [0,1,2].cycle\n\n(1..255).each do |i|\n  r.all? {|i| i.size == 60} ? a &lt;&lt; i : r[iter.next] &lt;&lt; i\nend\n\np x.size, y.size, z.size\np a.size\n</code></pre>\n\n<hr>\n\n<p>Let's define our arrays.  Even though I have arrays <code>x</code>, <code>y</code>, and <code>z</code>, they are there only because they were present in your code - I think we just need three arrays, each of which would collect numbers as they are picked from a range of numbers - between 1 to 255 - one by one.  <code>x,y,z = r</code> uses parallel assignment technique and is equivalent to <code>x,y,z = r[0],r[1],r[2]</code>.   Also, use of <code>Array.new(3) {[]}</code> helps in creating the Array of Array such that when we access <code>r[1]</code> it is initialized with empty array(<code>[]</code>) by default.</p>\n\n<pre><code>x, y, z = r = Array.new(3) {[]}\na = []\n</code></pre>\n\n<p>In order to determine which array the next number picked from range has to be placed in, we will use an Enumerator generated from <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-cycle\" rel=\"nofollow\"><code>Enumerable#cycle</code></a>.  This enumerator is special - because it is soft of infinite in nature - and we can keep asking it to give an element by calling <code>next</code>, and it will cycle through the array elements of <code>[0,1,2]</code> - returning us <code>0,1,2,0,1,2,0,1,2...</code> infinitely.</p>\n\n<pre><code>iter = [0,1,2].cycle\n</code></pre>\n\n<p>Next, we will iterate through the range of numbers 1..255.  During each iteration, we will check whether all the 3 arrays in which we are collecting number have desired size of <code>60</code> with the help of <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-all-3F\" rel=\"nofollow\"><code>Enumerable#all?</code></a> - if so, we will append the number to array <code>a</code> - else we will assign it to one of the sub arrays of <code>r</code> based on the array index returned by <code>iter</code> enumerator.</p>\n\n<pre><code>(1..255).each do |i|\n  r.all? {|i| i.size == 60} ? a &lt;&lt; i : r[iter.next] &lt;&lt; i\nend\n</code></pre>\n\n<p>Finally, we print the size of each of the array.</p>\n\n<pre><code>p x.size, y.size, z.size\n#=&gt; 60, 60, 60\np a.size\n#=&gt; 75\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451506047, "post_id": 34536396, "comment_id": 56814621, "body": "Why is it placing <code>nil</code> inside of the strings instead of just binary from 0001 - 0005...?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1451506141, "post_id": 34536396, "comment_id": 56814668, "body": "It&#39;s not putting nil in the strings. Look at the values for <code>x</code>, <code>y</code> and <code>z</code>."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1451505620, "creation_date": 1451505620, "answer_id": 34536396, "question_id": 34532737, "link": "https://stackoverflow.com/questions/34532737/i-have-a-issue-appending/34536396#34536396", "title": "I have a issue.. Appending", "body": "<blockquote>\n  <p>What this code does is append The numbers 1-255 into three different strings and outputs how many numbers are in each string.</p>\n</blockquote>\n\n<p>After reducing the number of values being iterated for readability, here's what it's doing:</p>\n\n<pre><code>users = (1..5).to_a\n\nx = \" \"\ny = \" \"\nz = \" \"\n\ncount = 1\nusers.each do |i|\n  x &lt;&lt; i if count == 1 # =&gt; \" \\u0001\", nil, nil, \" \\u0001\\u0004\", nil\n  y &lt;&lt; i if count == 2 # =&gt; nil, \" \\u0002\", nil, nil, \" \\u0002\\u0005\"\n  z &lt;&lt; i if count == 3 # =&gt; nil, nil, \" \\u0003\", nil, nil\n\n  if count == 3\n    count = 1\n  else\n    count += 1\n  end\nend\n\nx # =&gt; \" \\u0001\\u0004\"\ny # =&gt; \" \\u0002\\u0005\"\nz # =&gt; \" \\u0003\"\n\nputs x.length\nputs y.length\nputs z.length\n\n# &gt;&gt; 3\n# &gt;&gt; 3\n# &gt;&gt; 2\n</code></pre>\n\n<p>Your code is creating binary inside the strings, not \"numbers\" as we normally think of them, as digits.</p>\n\n<p>Moving on, you can clean up your logic using <code>each_with_index</code> and <code>case</code>/<code>when</code>. To make the results more readable I switched from accumulating into strings into arrays:</p>\n\n<pre><code>users = (1..5).to_a\n\nx = []\ny = []\nz = []\n\nusers.each_with_index do |i, count|\n  case count % 3\n  when 0\n    x &lt;&lt; i\n  when 1\n    y &lt;&lt; i\n  when 2\n    z &lt;&lt; i\n  end\nend\n\nx # =&gt; [1, 4]\ny # =&gt; [2, 5]\nz # =&gt; [3]\n\nputs x.length\nputs y.length\nputs z.length\n\n# &gt;&gt; 2\n# &gt;&gt; 2\n# &gt;&gt; 1\n</code></pre>\n\n<p>The real trick in this is the use of <a href=\"http://ruby-doc.org/core-2.3.0/Numeric.html#method-i-25\" rel=\"nofollow\"><code>%</code></a>, which does a modulo on the value. </p>\n"}], "owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 34533147, "answer_count": 3, "score": 1, "last_activity_date": 1451506925, "creation_date": 1451490851, "last_edit_date": 1451491750, "question_id": 34532737, "link": "https://stackoverflow.com/questions/34532737/i-have-a-issue-appending", "title": "I have a issue.. Appending", "body": "<p>I have this code:</p>\n\n<pre><code>  1 #!/local/usr/bin/ruby\n  2 \n  3 users = (1..255).to_a\n  4 \n  5 x = \" \"\n  6 y = \" \"\n  7 z = \" \"\n  8 #a = \" \"\n  9 \n 10 count = 1\n 11 users.each do |i|\n 12   x &lt;&lt; i if count == 1\n 13   y &lt;&lt; i if count == 2\n 14   z &lt;&lt; i if count == 3\n 15  # if x.length == 60\n 16  #   a &lt;&lt; i if count == 1\n 17  #   a &lt;&lt; i if count == 2\n 18  #   a &lt;&lt; i if count == 3\n 19  # else\n 20  # end\n 21   if count == 3\n 22     count = 1\n 23   else\n 24     count += 1\n 25   end\n 26 end\n 27 \n 28 puts x.length\n 29 puts y.length\n 30 puts z.length\n 31 #puts a.length\n 32 \n</code></pre>\n\n<p>What this code does is append The numbers 1-255 into three different strings and outputs how many numbers are in each string. </p>\n\n<p><strong>IT WORKS</strong></p>\n\n<p>Example of working code:</p>\n\n<pre><code>[user@server ruby]$ ruby loadtest.rb\n86\n86\n86\n[user@server ruby]$ \n</code></pre>\n\n<p>Now what I want it to do is have a failsafe called <code>a</code> as seen above, commented out, What I want is this, if each string contains 60 numbers I want it to append into the <code>a</code> string until there are no more numbers.</p>\n\n<p>When I try to do it with the commented out section it outputs this:</p>\n\n<pre><code>[user@server ruby]$ ruby loadtest.rb\n86\n86\n86\n4\n[user@server ruby]$ ruby loadtest.rb\n</code></pre>\n\n<p>WHY?! What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "button", "integer", "radio"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1451489251, "creation_date": 1451489251, "answer_id": 34532326, "question_id": 34532231, "link": "https://stackoverflow.com/questions/34532231/how-to-use-integer-radio-buttons/34532326#34532326", "title": "How to use integer radio buttons", "body": "<p>Something like:</p>\n\n<pre><code>&lt;% (1..10).each do |value| %&gt;\n  &lt;%= f.radio_button_tag(:method_name, value) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Where <code>(1..10)</code> might belong into the model as a constants. What also makes validations easier:</p>\n\n<pre><code># in the model\nFOOS = (1..10)\nvalidates :foo, inclusion: { in: FOOS }\n\n# in the view\n&lt;% Model::FOOS.each do |values| %&gt;\n  &lt;%= f.radio_button_tag(:foo, value) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": true, "score": 4, "last_activity_date": 1451489831, "last_edit_date": 1451489831, "creation_date": 1451489515, "answer_id": 34532401, "question_id": 34532231, "link": "https://stackoverflow.com/questions/34532231/how-to-use-integer-radio-buttons/34532401#34532401", "title": "How to use integer radio buttons", "body": "<p>You can try</p>\n\n<pre><code>   &lt;%= form_for :model do |f| %&gt;\n    &lt;% 1.upto(10) do |i| %&gt;\n      &lt;%= f.radio_button :integer, i %&gt; #integer is the model field\n    &lt;% end %&gt; \n   &lt;% end %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= form_tag do %&gt;\n&lt;% 1.upto(10) do |i| %&gt;\n  &lt;%= radio_button_tag :name, i %&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 6169883, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074645895929601/picture?type=large", "display_name": "T&#225;nh", "link": "https://stackoverflow.com/users/6169883/t%c3%a1nh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547801728, "creation_date": 1547801728, "answer_id": 54250483, "question_id": 34532231, "link": "https://stackoverflow.com/questions/34532231/how-to-use-integer-radio-buttons/54250483#54250483", "title": "How to use integer radio buttons", "body": "<p>My way is to use an enum in your model. E.g the role field will be saved as number 0 if the role is investor, number 1 if the role is trader in my example.</p>\n\n<p>You need to declare your enum in your model .rb file like this:  </p>\n\n<pre><code>enum role: [:investor,:trader]\n</code></pre>\n\n<p>Then in the view file: </p>\n\n<pre><code> &lt;%= f.radio_button :role, :investor , class: 'form-control underlined' %&gt;\n &lt;%= label :role_investor, 'I wanna be an investor' %&gt;\n &lt;%= f.radio_button :role, :trader  , class: 'form-control underlined' %&gt;\n &lt;%= label :role_trader, 'I wanna be a trader' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 892935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z7ht3.jpg?s=128&g=1", "display_name": "whatever0010011", "link": "https://stackoverflow.com/users/892935/whatever0010011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 34532401, "answer_count": 3, "score": -1, "last_activity_date": 1547801728, "creation_date": 1451488940, "last_edit_date": 1451506404, "question_id": 34532231, "link": "https://stackoverflow.com/questions/34532231/how-to-use-integer-radio-buttons", "title": "How to use integer radio buttons", "body": "<p>What is the simplest way to represent an integer attribute with a limited number of valid values as radio buttons? </p>\n\n<p>How can I use the formhelper to achieve this? I only see examples that use string values.</p>\n"}, {"tags": ["ruby", "mongodb"], "comments": [{"owner": {"reputation": 87200, "user_id": 122005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MX2CF.jpg?s=128&g=1", "display_name": "chridam", "link": "https://stackoverflow.com/users/122005/chridam"}, "edited": false, "score": 1, "creation_date": 1451491439, "post_id": 34531944, "comment_id": 56807174, "body": "Have you tried <code>MONGO[:delivery_options].update_one({ :_id =&gt; 1 }, { &quot;$set&quot; =&gt; { &quot;days.1.delivery_options.11:00-12:00.orders&quot; =&gt; 1 }})</code>?"}, {"owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "reply_to_user": {"reputation": 87200, "user_id": 122005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MX2CF.jpg?s=128&g=1", "display_name": "chridam", "link": "https://stackoverflow.com/users/122005/chridam"}, "edited": false, "score": 0, "creation_date": 1451517578, "post_id": 34531944, "comment_id": 56819778, "body": "This worked. If you copy paste this as an answer I can accept it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1451495730, "creation_date": 1451495730, "answer_id": 34534026, "question_id": 34531944, "link": "https://stackoverflow.com/questions/34531944/how-to-update-a-value-in-a-multi-layered-document/34534026#34534026", "title": "How to update a value in a multi-layered document", "body": "<p>You can try the following command - </p>\n\n<pre><code>db.deals.update(\n     {\"_id\":ObjectId(\"5683fc08cc7d3c425b573125\")},\n\n        {$set:{ \"days.1.delivery_options.11:00-12:00.orders\":1 }}\n        , { upsert: true }\n\n  )\n</code></pre>\n\n<p>I've assumed the collection name is deals, but you can change it to your collection name.</p>\n"}, {"tags": [], "owner": {"reputation": 87200, "user_id": 122005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MX2CF.jpg?s=128&g=1", "display_name": "chridam", "link": "https://stackoverflow.com/users/122005/chridam"}, "is_accepted": true, "score": 1, "last_activity_date": 1451517651, "creation_date": 1451517651, "answer_id": 34538779, "question_id": 34531944, "link": "https://stackoverflow.com/questions/34531944/how-to-update-a-value-in-a-multi-layered-document/34538779#34538779", "title": "How to update a value in a multi-layered document", "body": "<p>You can try also:</p>\n\n<pre><code>MONGO[:delivery_options].update_one({ :_id =&gt; 1 }, { \"$set\" =&gt; { \"days.1.delivery_options.11:00-12:00.orders\" =&gt; 1 }})\n</code></pre>\n"}], "owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 34538779, "answer_count": 2, "score": 1, "last_activity_date": 1451517651, "creation_date": 1451487847, "question_id": 34531944, "link": "https://stackoverflow.com/questions/34531944/how-to-update-a-value-in-a-multi-layered-document", "title": "How to update a value in a multi-layered document", "body": "<p>I have the following document inside a MongoDB collection:</p>\n\n<pre><code>{\n   \"_id\":1,\n   \"days\":[\n      {\n         \"date\":\"30-12-2015\",\n         \"label\":\"woensdag 30/12\",\n         \"delivery_options\":{\n            \"10:00-11:00\":{\n               \"capacity\":5,\n               \"orders\":0,\n               \"remaining_capacity\":5\n            },\n            \"11:00-12:00\":{\n               \"capacity\":5,\n               \"orders\":0,\n               \"remaining_capacity\":5\n            },\n            ...\n         }\n      },\n      {\n         \"date\":\"31-12-2015\",\n         \"label\":\"donderdag 31/12\",\n         \"delivery_options\":{\n            \"10:00-11:00\":{\n               \"capacity\":5,\n               \"orders\":0,\n               \"remaining_capacity\":5\n            },\n            \"11:00-12:00\":{\n               \"capacity\":5,\n               \"orders\":0,\n               \"remaining_capacity\":5\n            },\n            ...\n         }\n      },\n      ...\n   ]\n}\n</code></pre>\n\n<p>What I'd like to do is update the value of <code>document['days'][1]['delivery_options']['11:00-12:00]['orders']</code> to <code>1</code>.</p>\n\n<p>Here's what I'm currently trying:</p>\n\n<pre><code>MONGO[:delivery_options].find(_id: 1).update_one($set =&gt; {\"days.1.delivery_options.11:00-12:00.orders\" =&gt; 1})\n</code></pre>\n\n<p>But that returns:</p>\n\n<pre><code>BSON::InvalidKey: NilClass instances are not allowed as keys in a BSON document.\n</code></pre>\n\n<p>What else could I try?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "roo-gem"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451488273, "post_id": 34531864, "comment_id": 56805454, "body": "in the <code>roo</code> gem there is no <code>generate</code> method for <code>csv</code> but there is new method to create a csv"}, {"owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "edited": false, "score": 0, "creation_date": 1451488738, "post_id": 34531864, "comment_id": 56805712, "body": "If you want to use <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/csv/rdoc/CSV.html#method-c-generate\" rel=\"nofollow noreferrer\">CSV.generate</a> from standard library, you may need to add <code>require &#39;csv&#39;</code> to Importer file"}, {"owner": {"reputation": 119, "user_id": 5662952, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eeb3364ab7f4b8bc11c6dd28ac6b8692?s=128&d=identicon&r=PG&f=1", "display_name": "miss_M", "link": "https://stackoverflow.com/users/5662952/miss-m"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451494084, "post_id": 34531864, "comment_id": 56808648, "body": "@RajarshiDas can you explain what do you mean ?"}, {"owner": {"reputation": 119, "user_id": 5662952, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eeb3364ab7f4b8bc11c6dd28ac6b8692?s=128&d=identicon&r=PG&f=1", "display_name": "miss_M", "link": "https://stackoverflow.com/users/5662952/miss-m"}, "reply_to_user": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "edited": false, "score": 0, "creation_date": 1451494189, "post_id": 34531864, "comment_id": 56808700, "body": "@vanHuy I tried to add &quot;require&quot; seems its not work ///"}, {"owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "edited": false, "score": 0, "creation_date": 1451494852, "post_id": 34531864, "comment_id": 56809058, "body": "I guess it calls CSV from Roo by default, so to use CSV from standard library please try <code>::CSV.generate</code> instead"}, {"owner": {"reputation": 119, "user_id": 5662952, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eeb3364ab7f4b8bc11c6dd28ac6b8692?s=128&d=identicon&r=PG&f=1", "display_name": "miss_M", "link": "https://stackoverflow.com/users/5662952/miss-m"}, "reply_to_user": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "edited": false, "score": 0, "creation_date": 1451496677, "post_id": 34531864, "comment_id": 56810058, "body": "@VanHuy thank you !!!!!! it&#39;s works:)"}, {"owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "edited": false, "score": 0, "creation_date": 1451498261, "post_id": 34531864, "comment_id": 56810897, "body": "@yardench I posted a full answer for this. Please consider accepting it if it helps :)"}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "is_accepted": false, "score": 3, "last_activity_date": 1451498096, "creation_date": 1451498096, "answer_id": 34534605, "question_id": 34531864, "link": "https://stackoverflow.com/questions/34531864/nomethoderror-undefined-method-generate-for-roocsvclass/34534605#34534605", "title": "NoMethodError: undefined method `generate&#39; for Roo::CSV:Class", "body": "<p>I'm not sure why you need Roo here, but only for exporting csv file, the standard <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow\">CSV library</a> is enough. <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/csv/rdoc/CSV.html#method-c-generate\" rel=\"nofollow\">CSV.generate</a> is a method from standard library, so to use this, you have to add <code>require 'csv'</code> to Importer file.</p>\n\n<p>You also need to remove \"include Roo\" to avoid conflict. But if you still want to work with Roo, please replace <code>CSV.generate</code> by <code>::CSV.generate</code>.</p>\n"}], "owner": {"reputation": 119, "user_id": 5662952, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eeb3364ab7f4b8bc11c6dd28ac6b8692?s=128&d=identicon&r=PG&f=1", "display_name": "miss_M", "link": "https://stackoverflow.com/users/5662952/miss-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451498096, "creation_date": 1451487559, "last_edit_date": 1451491094, "question_id": 34531864, "link": "https://stackoverflow.com/questions/34531864/nomethoderror-undefined-method-generate-for-roocsvclass", "title": "NoMethodError: undefined method `generate&#39; for Roo::CSV:Class", "body": "<p>I try to made a scheduled daily csv mail.\nI put inside my Importer class:\n\" include Roo\"\nthen I put 2 functions:</p>\n\n<pre><code>def self.daily_mail\n  Company.find_each do |c|\n    export_to_csv(c)\n  end\nend\n\ndef self.export_to_csv(company)\n  @opportunities = company.opportunities\n  csv_data = CSV.generate do |csv|\n    csv &lt;&lt;  [\"Opportunity Id\", \"Created At\", \"Request Id\", \"Champion Id\", \"Referral_Id\"]\n    @opportunities.all.each do |opportunity|\n      csv &lt;&lt; [opportunity.id, opportunity.created_at, opportunity.request_id, opportunity.champion_id, opportunity.referral_id]\n    end\n  end\nend\n</code></pre>\n\n<p>And in the scheduler class I coded:</p>\n\n<pre><code>task :export =&gt; :environment do\n  puts \"Exporting...\"\n    Importer.daily_mail\n  puts \"done.\"\nend\n</code></pre>\n\n<p>However, when I tried to run in my terminal: </p>\n\n<pre><code>rake export\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>rake aborted!\nNoMethodError: undefined method `generate' for Roo::CSV:Class\n</code></pre>\n\n<p>Can someone help me pleas?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "vue.js"], "comments": [{"owner": {"reputation": 13658, "user_id": 1055722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f729b0d7a4068632e64b2e039187e070?s=128&d=identicon&r=PG", "display_name": "David K. Hess", "link": "https://stackoverflow.com/users/1055722/david-k-hess"}, "edited": false, "score": 0, "creation_date": 1451567259, "post_id": 34531280, "comment_id": 56835444, "body": "In your <code>.then</code> call, you have not specified an error handler. You should add one with logging. Additionally, use your web browser&#39;s inspector to look at the actual network requests being made to see that it is formed and sent the way you expect it to be."}, {"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "edited": false, "score": 0, "creation_date": 1451634445, "post_id": 34531280, "comment_id": 56851678, "body": "it is worth noting that vuejs-rails uses outdated vuejs libraries. And if you are using browserify-rails, then you won&#39;t be using sprockets/application.js.  So you should really choose one way of loading your javascript dependencies."}, {"owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "reply_to_user": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "edited": false, "score": 0, "creation_date": 1451912243, "post_id": 34531280, "comment_id": 56928308, "body": "@ytbryan I&#39;m using sprockets and the application.js file (loading jQuery and bootstrap from here) along with browserify rails without problems. Anyway, maybe you are right about just using one way to manage js dependencies, but I don&#39;t know why you stated about outdated vuejs libraries. Does browserify rails load an outdated version of Vue.js?"}, {"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "edited": false, "score": 1, "creation_date": 1451915060, "post_id": 34531280, "comment_id": 56930038, "body": "No, I think browserify will load the vue that you made available. So if you have the latest vue available, then browserify will load that.   I was looking at <code>vuejs-rails</code> the other day and notice your post. So I thought I should inform you that their javascript are outdated."}, {"owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "edited": false, "score": 0, "creation_date": 1451915336, "post_id": 34531280, "comment_id": 56930236, "body": "Oh I get it. Thanks for the catch :)"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2507654, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fIJNY.png?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/2507654/alex"}, "edited": false, "score": 0, "creation_date": 1562598488, "post_id": 34591658, "comment_id": 100415893, "body": "To avoid use both, vue and jQuery, you can attach the event like: <code>document.addEventListener(&#39;turbolinks:load&#39;, function(){...}</code>"}], "tags": [], "owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "is_accepted": true, "score": 5, "last_activity_date": 1451916411, "last_edit_date": 1451916411, "creation_date": 1451912062, "answer_id": 34591658, "question_id": 34531280, "link": "https://stackoverflow.com/questions/34531280/how-to-make-rails-work-with-vue-js/34591658#34591658", "title": "How to make rails work with vue.js?", "body": "<p>I managed to make this work with Vue.js.</p>\n\n<p>first I added an <code>el</code> propertie to the object passed to Vue constructor, and I started to get an error saying that <code>body</code> element was not defined. Obviously the body element is always present in an html file, so I though it was a problem about <em>when</em> the Vue instances were created. So I simply wrapped all on a <code>ready</code> event.</p>\n\n<pre><code>$(document).on('ready page:change', function() {\n    var Vue = require('vue');\n\n    Vue.use(require('vue-resource'));       \n\n    new Vue({\n        el: 'body',\n        data: {\n            users: []\n        },\n        ready: function(){\n            this.$http.get('users.json').then(function(response){\n\n                console.log(JSON.stringify(response.data));\n                this.users = response.data;\n            }, function(response){\n                console.log(\"fail\");\n                console.log(JSON.stringify(response));\n            });                \n        }\n    });        \n});\n</code></pre>\n\n<p>And that works fine!</p>\n\n<p>Because I'm using turbolinks, I also included the <a href=\"https://github.com/rails/turbolinks#events\" rel=\"nofollow\"><code>page:change</code> event</a>. And in my view <code>index.html.erb</code> I have access to Vue instance. So this make this case working and it's fine for this particular question, however I now have another issue working with <code>.vue</code> components, maybe I'll open another question about it. </p>\n\n<p>Notice that in my <code>index.html.erb</code> view I have access to the Vue instance defined in <code>users.js</code> file in the <code>assets/javascript/</code> folder, but that <strong>I have not access to Vue or any of the js modules loaded with browserify from the views folder</strong></p>\n"}, {"comments": [{"owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "edited": false, "score": 0, "creation_date": 1458931124, "post_id": 36207239, "comment_id": 60082814, "body": "And what extension should your views have?"}, {"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "reply_to_user": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "edited": false, "score": 0, "creation_date": 1458941764, "post_id": 36207239, "comment_id": 60088079, "body": "Can you elaborate? <code>vuejs</code> simply bring vue.js and its router + resource into asset pipeline. What do you mean by extension?"}, {"owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "edited": false, "score": 1, "creation_date": 1459130700, "post_id": 36207239, "comment_id": 60139415, "body": "I mean that components in vue.js apps have a <code>.vue</code> extension, and are loaded with browserify or with webpack. does your gem handle those files? or just bring the vue object to the pipeline? in that case what bout others npm packages? does your gem allow to use third party npm modules?"}, {"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "reply_to_user": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "edited": false, "score": 0, "creation_date": 1488518094, "post_id": 36207239, "comment_id": 72275866, "body": "@yerkopalma Sorry for the late reply. I believe both &#39;vuejs&#39; and &#39;vuejs-rails&#39; gems don&#39;t ship with vue-template-compiler. Hence, I am not sure if .vue extension is possible with these two gems. Thanks to Rails 5.1+ and webpacker this is made possible with yarn and webpack integration. Please refer to this pull request to see a possible answer to your question <a href=\"https://github.com/rails/webpacker/pull/107\" rel=\"nofollow noreferrer\">github.com/rails/webpacker/pull/107</a>"}], "tags": [], "owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1475770923, "last_edit_date": 1475770923, "creation_date": 1458843311, "answer_id": 36207239, "question_id": 34531280, "link": "https://stackoverflow.com/questions/34531280/how-to-make-rails-work-with-vue-js/36207239#36207239", "title": "How to make rails work with vue.js?", "body": "<p>Update: gem <code>[vuejs][1]</code> nows ships with vue 2.x and vue-router 2.x. </p>\n\n<p>So I created gem <code>[vuejs][1]</code> because I was using vue.js across multiple projects + prototypes and the gem <code>vuejs-rails</code> doesn't seem to update their gem with the latest version of vue.js. </p>\n\n<p>If you are like me, looking for an easy integration of vue.js with asset pipeline + you want to use the latest vue.js, read on: </p>\n\n<p>Add this line to your application's Gemfile:</p>\n\n<pre><code>   gem 'vuejs'\n</code></pre>\n\n<p>At application.js</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require vue\n//= require vue-router\n//= require vue-resource \n//= require_tree .\n</code></pre>\n\n<p><code>//= require vue-router</code> and <code>//= require vue-resource</code> are optional. </p>\n\n<p>Note that for vue &amp; vue-router 2.x, you need to require these instead</p>\n\n<pre><code>//= require vue2\n//= require vue-router2\n</code></pre>\n\n<p>That's it. You can try writing some javascript in one of the views to test it out. </p>\n\n<p>Try this one: </p>\n\n<pre><code>&lt;div id=\"app\"&gt;\n  &lt;h1&gt;Hi {{ message }}&lt;/h1&gt;\n  &lt;input v-model=\"message\"&gt;\n&lt;/div&gt;\n\n&lt;!-- &lt;span&gt;Message is: {{ message }}&lt;/span&gt;\n&lt;br&gt;\n&lt;input type=\"text\" v-model=\"message\" placeholder=\"edit me\"&gt; --&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nnew Vue({\n  el: '#app',\n  data: {\n    message: 'Bryan'\n  }\n})&lt;/script&gt;\n</code></pre>\n\n<p>source: <a href=\"https://github.com/ytbryan/vuejs\" rel=\"nofollow\">https://github.com/ytbryan/vuejs</a></p>\n"}, {"tags": [], "owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "is_accepted": false, "score": 4, "last_activity_date": 1484247293, "creation_date": 1484247293, "answer_id": 41620842, "question_id": 34531280, "link": "https://stackoverflow.com/questions/34531280/how-to-make-rails-work-with-vue-js/41620842#41620842", "title": "How to make rails work with vue.js?", "body": "<p>Try using the <a href=\"http://breakfast.devlocker.io/\" rel=\"nofollow noreferrer\">Breakfast Gem</a>. There is an <a href=\"http://breakfast.devlocker.io/examples/vue.html\" rel=\"nofollow noreferrer\">installation section</a> for Vue.js</p>\n\n<p>Basically once you install the gem you can use <code>npm</code> to install <code>Vue</code>, <code>Vuex</code> and the <code>Vue Router</code> quite easily. </p>\n\n<p>And it supports single file Vue components.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 1260197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3239f803c4d482c04248b008de303ad1?s=128&d=identicon&r=PG", "display_name": "Daniel Docki", "link": "https://stackoverflow.com/users/1260197/daniel-docki"}, "edited": false, "score": 0, "creation_date": 1488895723, "post_id": 42571303, "comment_id": 72426849, "body": "I&#39;m using this way! But I&#39;m having trouble using it together with the turbolinks, do you have any suggestions?"}, {"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "reply_to_user": {"reputation": 103, "user_id": 1260197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3239f803c4d482c04248b008de303ad1?s=128&d=identicon&r=PG", "display_name": "Daniel Docki", "link": "https://stackoverflow.com/users/1260197/daniel-docki"}, "edited": false, "score": 0, "creation_date": 1488931664, "post_id": 42571303, "comment_id": 72447215, "body": "You can start rails app without turbolink <code>rails new app_name -J --webpack=vue</code> Read more <a href=\"https://github.com/rails/webpacker/issues/161\" rel=\"nofollow noreferrer\">github.com/rails/webpacker/issues/161</a>"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "reply_to_user": {"reputation": 103, "user_id": 1260197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3239f803c4d482c04248b008de303ad1?s=128&d=identicon&r=PG", "display_name": "Daniel Docki", "link": "https://stackoverflow.com/users/1260197/daniel-docki"}, "edited": false, "score": 0, "creation_date": 1488985939, "post_id": 42571303, "comment_id": 72474478, "body": "@DanielDocki Did you find a way to use it with turbolink?"}, {"owner": {"reputation": 103, "user_id": 1260197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3239f803c4d482c04248b008de303ad1?s=128&d=identicon&r=PG", "display_name": "Daniel Docki", "link": "https://stackoverflow.com/users/1260197/daniel-docki"}, "reply_to_user": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 1, "creation_date": 1488996126, "post_id": 42571303, "comment_id": 72481615, "body": "@AnkitSinghaniya  I did so <a href=\"https://gist.github.com/danieldocki/5389e4a066475caf12b40b929fe744fd\" rel=\"nofollow noreferrer\">gist.github.com/danieldocki/5389e4a066475caf12b40b929fe744fd</a>  I tested it and it worked, does it help?"}, {"owner": {"reputation": 195, "user_id": 5860343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qRcGyH8j6QE/AAAAAAAAAAI/AAAAAAAAAIE/n0Pcy3nhAlc/photo.jpg?sz=128", "display_name": "Tom Hall", "link": "https://stackoverflow.com/users/5860343/tom-hall"}, "edited": false, "score": 1, "creation_date": 1501134334, "post_id": 42571303, "comment_id": 77645942, "body": "This video helps show turbolinks &amp; vue     <a href=\"https://www.youtube.com/watch?v=lGToT9RyDxc\" rel=\"nofollow noreferrer\">youtube.com/watch?v=lGToT9RyDxc</a>       not quite what you want since he still uses rails views and the asset pipeline, but you might get something from it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user246672"}, "edited": false, "score": 0, "creation_date": 1527675375, "post_id": 42571303, "comment_id": 88213263, "body": "There\u2019s several turbolinks vue rails demos on gh. Also, brunch (breakfast gem) is much faster, simpler, CoverC and does HMR, livereload and streaming auto-compilation compared to popular webpack. Popularity only means better marketing and more, lower-skilled users, not necessarily better engineering."}], "tags": [], "owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "is_accepted": false, "score": 13, "last_activity_date": 1488891493, "last_edit_date": 1488891493, "creation_date": 1488518749, "answer_id": 42571303, "question_id": 34531280, "link": "https://stackoverflow.com/questions/34531280/how-to-make-rails-work-with-vue-js/42571303#42571303", "title": "How to make rails work with vue.js?", "body": "<p>For Rails 5.1+, it will come with yarn &amp; webpack support. </p>\n\n<p>Also, with <a href=\"https://github.com/rails/webpacker/pull/107\" rel=\"noreferrer\">this pull request</a> to webpacker, Vue will be supported out of the box. </p>\n\n<p>To get started with Vue on Rails,</p>\n\n<ol>\n<li>Add <code>gem 'webpacker'</code> to gemfile</li>\n<li><code>bundle install</code></li>\n<li>Run <code>rails webpacker:install &amp;&amp; rails webpacker:install:vue</code></li>\n</ol>\n\n<p>Alternatively with Rails 5.1x, do <code>rails new app --webpack=vue</code></p>\n\n<p>You will be ready for Vue on Rails 5</p>\n"}], "owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11142, "favorite_count": 5, "accepted_answer_id": 34591658, "answer_count": 4, "score": 9, "last_activity_date": 1488891493, "creation_date": 1451485080, "last_edit_date": 1451491093, "question_id": 34531280, "link": "https://stackoverflow.com/questions/34531280/how-to-make-rails-work-with-vue-js", "title": "How to make rails work with vue.js?", "body": "<p>Well my question is simple, how to make a Ruby on Rails app work with Vue.js? </p>\n\n<p><strong>The details</strong></p>\n\n<p>I first look at the <a href=\"https://github.com/adambutler/vuejs-rails\" rel=\"noreferrer\"><code>vue-rails</code></a> gem, but that add Vue to the rails asset pipeline, and I want to work with other npm packages, like browserify. Then I look to that, <a href=\"https://github.com/browserify-rails/browserify-rails\" rel=\"noreferrer\"><code>browserify-rails</code></a> that enable commonjs in the js folder <code>app/assets/javascript/</code>. Also I'm planning to make a Vuejs app for every rails controller, and access to backend actions with the <a href=\"https://github.com/vuejs/vue-resource\" rel=\"noreferrer\"><code>vue-resource</code></a> and <a href=\"https://github.com/vuejs/vue-router\" rel=\"noreferrer\"><code>vue-router</code></a> (if this isn't a good approach please let me know), so I added the following line to my layout</p>\n\n<pre><code>&lt;%= javascript_include_tag params[:controller] %&gt;\n</code></pre>\n\n<p>That will add a js file with the name of the controller, so the <code>UsersController</code> will have the <code>users.js</code> file with the main vue app for that controller.</p>\n\n<p>Then, to try this I scaffolded a Users resource with rails, and make it render json format in every action, like this</p>\n\n<pre><code>def index\n    @users = User.all\n\n    respond_to do |format|\n      format.html # index.html.erb\n      format.json { render json: @users }\n    end\nend\n</code></pre>\n\n<p>That is working fine. Then in the <code>app/assets/javascript/</code> folder I add users.js with the following content</p>\n\n<pre><code>var Vue = require('vue');\nVue.use(require('vue-resource'));\n\nnew Vue({\n    ready: function(){\n        this.$http.get('users.json').then(function(response){\n            console.log(JSON.stringify(response));\n        });\n    }\n});\n</code></pre>\n\n<p>And when I inspect dev console in chrome, I see that Vue is added, but I don't see any response, and I had already inserted one user. By the way, I'm trying with the <code>https://vuejs-rails-yerkopalma.c9users.io/users</code> url (I'm developing in c9.io) and only the <code>/users/index.html.erb</code> file is rendered. So, waht are my guesses: </p>\n\n<ol>\n<li>I might be using <code>vue-resource</code> in a wrong way, I mean the url passed to the <code>get()</code> function. </li>\n<li>I might be missing some <code>vue-resource</code> configuration. </li>\n<li>Maybe I just should use the <code>vue-rails</code> gem combined with <code>brwoserify-rails</code> but I just don't know how. Any help or guideline would be appreciate.</li>\n</ol>\n\n<p>Here is my <code>application.js</code> file (is also included in my layout file)</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n</code></pre>\n"}, {"tags": ["ruby", "dsl"], "comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1451484514, "post_id": 34531040, "comment_id": 56803488, "body": "Is your problem that you want to call the <code>*</code> method with a single argument and not 2?"}, {"owner": {"reputation": 1384, "user_id": 514498, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8005f992349878a67a5a37d2220710f6?s=128&d=identicon&r=PG", "display_name": "lifecoder", "link": "https://stackoverflow.com/users/514498/lifecoder"}, "edited": false, "score": 0, "creation_date": 1451485277, "post_id": 34531040, "comment_id": 56803883, "body": "No, he wants to define his own method (for some kind of DSL I guess)"}, {"owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "reply_to_user": {"reputation": 1384, "user_id": 514498, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8005f992349878a67a5a37d2220710f6?s=128&d=identicon&r=PG", "display_name": "lifecoder", "link": "https://stackoverflow.com/users/514498/lifecoder"}, "edited": false, "score": 0, "creation_date": 1451485592, "post_id": 34531040, "comment_id": 56804042, "body": "@lifecoder Right ^_^"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1451489798, "post_id": 34531040, "comment_id": 56806223, "body": "You can look at this article for some details which may help - <a href=\"http://www.rubyinside.com/rubys-unary-operators-and-how-to-redefine-their-functionality-5610.html\" rel=\"nofollow noreferrer\">Ruby\u2019s Unary Operators and How to Redefine Their Functionality</a>"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451487239, "post_id": 34531545, "comment_id": 56804919, "body": "There is also <code>class</code> method."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1451486232, "creation_date": 1451486232, "answer_id": 34531545, "question_id": 34531040, "link": "https://stackoverflow.com/questions/34531040/call-method-on-implicit-receiver/34531545#34531545", "title": "Call * method on implicit receiver", "body": "<p>That's not possible. There are some methods that simply cannot be called without an explicit receiver because they would otherwise be ambiguous. In particular, in every case where you have both a unary prefix and a binary infix operator, it would be impossible to distinguish the two cases:</p>\n\n<pre><code>+ a == a.+@()\n- a == a.-@()\n&amp; a # interpreted as the unary prefix proc-block conversion operator\n* a # interpreted as the unary prefix splat operator\n</code></pre>\n\n<p>or in cases where the operator conflicts with other syntax:</p>\n\n<pre><code>/ a # interpreted as the start of a Regexp literal\n</code></pre>\n\n<p>For consistency, Ruby forces the use of two operands for <em>all</em> binary infix operators, not just the ones for which the grammar would be ambiguous.</p>\n\n<p>Likewise, <code>[]</code> cannot be called without an explicit receiver because it would conflict with literal syntax for arrays.</p>\n\n<p>The other well-known example of methods that cannot be called without an explicit receiver, is setters:</p>\n\n<pre><code>self.foo = bar # setter\nfoo = bar      # local variable\n</code></pre>\n\n<p>For <code>private</code> setters, there is actually an exception to the rule for <code>private</code> methods, that allows them to be called with an explicit receiver, as long as that explicit receiver is the literal pseudo-variable keyword <code>self</code>. However, no such exception exists for calling private binary operators or methods like <code>[]</code>. (There are proposals to that effect, though.)</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1451487849, "last_edit_date": 1451487849, "creation_date": 1451487465, "answer_id": 34531845, "question_id": 34531040, "link": "https://stackoverflow.com/questions/34531040/call-method-on-implicit-receiver/34531845#34531845", "title": "Call * method on implicit receiver", "body": "<p>J\u00f6rg W Mittag answers why your first expression <code>* 'Ruby'</code> (without an explicit receiver) raises an error.</p>\n\n<p>I will add why your second expression <code>self.*(1)</code> (with an explicit receiver) raises an error. This is because the method is defined on the <code>main</code> object, which are all private by default.</p>\n\n<p>This gives you that the only way to call the method is neither with nor without an explicit receiver, in other words, you cannot call that method with a form of an ordinary method call. You can only pass it in the form of a symbol describing that method, and let another method (<code>send</code>) execute it instead.</p>\n"}], "owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 34531545, "answer_count": 2, "score": 2, "last_activity_date": 1451487849, "creation_date": 1451484141, "question_id": 34531040, "link": "https://stackoverflow.com/questions/34531040/call-method-on-implicit-receiver", "title": "Call * method on implicit receiver", "body": "<p>I want to create the next DSL part:</p>\n\n<pre><code>* 'Ruby'\n</code></pre>\n\n<p>The next experiment shows predictable results:</p>\n\n<pre><code>def *(a)\n  a\nend\n\n* 'Ruby'         #=&gt; SyntaxError: (irb):4: syntax error, unexpected '\\n', expecting :: or '[' or '.'\nself.*(1)        #=&gt; NoMethodError: private method `*' called for main:Object\nself.send(:*, 1) #=&gt; 'Ruby'\n</code></pre>\n\n<p>I suppose Ruby syntax analyzer considers such expression as a splat operator or syntax sugar for the asterisk method. Can someone explain this more detailed and (if it's possible) provide solution to resolve my problem?</p>\n"}, {"tags": ["ruby", "haml", "middleman", "padrino"], "comments": [{"owner": {"reputation": 2688, "user_id": 164237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5290492d327de6973c0f52e82d9cbf35?s=128&d=identicon&r=PG", "display_name": "bschaeffer", "link": "https://stackoverflow.com/users/164237/bschaeffer"}, "edited": false, "score": 0, "creation_date": 1451506886, "post_id": 34529806, "comment_id": 56815038, "body": "How can you yield the content for <code>:optional_row</code> in a partial when the output of the partial is part of that content for <code>:optional_row</code>?"}, {"owner": {"reputation": 69, "user_id": 4186199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uAvF8.jpg?s=128&g=1", "display_name": "lukebm", "link": "https://stackoverflow.com/users/4186199/lukebm"}, "reply_to_user": {"reputation": 2688, "user_id": 164237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5290492d327de6973c0f52e82d9cbf35?s=128&d=identicon&r=PG", "display_name": "bschaeffer", "link": "https://stackoverflow.com/users/164237/bschaeffer"}, "edited": false, "score": 0, "creation_date": 1451507665, "post_id": 34529806, "comment_id": 56815478, "body": "All I know is that you can yield a block in a partial and render it on a page, as per <a href=\"https://github.com/middleman/middleman/issues/1099\" rel=\"nofollow noreferrer\">github.com/middleman/middleman/issues/1099</a>. Literally been learning haml a week and wondering whether <code>if&#47; else</code> can be referenced when using the partial"}, {"owner": {"reputation": 2688, "user_id": 164237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5290492d327de6973c0f52e82d9cbf35?s=128&d=identicon&r=PG", "display_name": "bschaeffer", "link": "https://stackoverflow.com/users/164237/bschaeffer"}, "edited": false, "score": 0, "creation_date": 1451601455, "post_id": 34529806, "comment_id": 56846854, "body": "Well, I think part of the problem is exactly that. It seems like it should be an infinite loop. What exact error do you get? If/else in a partial is perfectly fine so it&#39;s something else."}], "owner": {"reputation": 69, "user_id": 4186199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uAvF8.jpg?s=128&g=1", "display_name": "lukebm", "link": "https://stackoverflow.com/users/4186199/lukebm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451479442, "creation_date": 1451479442, "last_edit_date": 1495542186, "question_id": 34529806, "link": "https://stackoverflow.com/questions/34529806/how-to-render-a-partial-containing-if-else-statement-in-haml", "title": "How to render a partial containing if/ else statement in haml", "body": "<p>I have a partial similar to this:</p>\n\n<pre><code>/ _some_partial.md.haml\n\n%div.container\n  %div.optional-row\n    = yield\n</code></pre>\n\n<p>With a view like this:</p>\n\n<pre><code>/ some_view.html.haml\n\n---\nlayout: some_layout\n---\n\n= partial \"some_partial\" do\n  %p Content here\n...\n</code></pre>\n\n<p>However, I'd like the to render <code>some_partial</code> with the <code>%div.optional-row</code> wrapper in some places, but not others. Is this something that can be achieved with an <code>if/ else</code> statement?</p>\n\n<p>I envisage the solution using <code>content_for</code> and looking something like:</p>\n\n<pre><code>/ _some_partial.md.haml\n\n%div.container\n  - if content_for?(:optional_row)\n    %div.optional-row\n      = yield :optional_row\n  - else\n    = yield\n</code></pre>\n\n<p>With</p>\n\n<pre><code>/ some_view.html.haml\n\n---\nlayout: some_layout\n---\n\n- content_for :optional_row do\n  = partial \"some_partial\" do\n    %p Content here\n...\n</code></pre>\n\n<p>I know this is horrendously wrong (it returns a <code>TypeError</code>), but I hope it explains my thought process.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7237308/how-can-i-conditionally-wrap-some-haml-content-in-a-tag\">This question</a> seems to answer mine in part, but it doesn't explain how to render the partial with the <code>if/ else</code> conditions.</p>\n\n<p>Ps. I'm using Middleman and so throwing in a Padrino tag</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451479759, "post_id": 34529776, "comment_id": 56800902, "body": "<code>gem install bundler</code> did ??"}, {"owner": {"reputation": 1, "user_id": 5730613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3X62.png?s=128&g=1", "display_name": "neoliis", "link": "https://stackoverflow.com/users/5730613/neoliis"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451485371, "post_id": 34529776, "comment_id": 56803931, "body": "yes, I did install bundler"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451485519, "post_id": 34529776, "comment_id": 56804002, "body": "do <code>bundle exec rails g controller welcome</code>"}, {"owner": {"reputation": 1, "user_id": 5730613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3X62.png?s=128&g=1", "display_name": "neoliis", "link": "https://stackoverflow.com/users/5730613/neoliis"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451485749, "post_id": 34529776, "comment_id": 56804130, "body": "that gives me the exact same response..."}], "owner": {"reputation": 1, "user_id": 5730613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3X62.png?s=128&g=1", "display_name": "neoliis", "link": "https://stackoverflow.com/users/5730613/neoliis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451479732, "creation_date": 1451479282, "last_edit_date": 1451479732, "question_id": 34529776, "link": "https://stackoverflow.com/questions/34529776/ror-on-os10-11-2-kernel-require-b54in-cannot-load-such-file-when-trying-to-g", "title": "RoR on OS10.11.2: kernel_require.b54:in : cannot load such file when trying to generate controller welcome", "body": "<p>I just started learning Ruby on Rails from Hartl's \"Ruby on rails 3: Learn Rails by example\" (but I do have rails 4.2.5). Everything worked great until I tried to deploy to Heroku - couldn't get pass the <code>$ git push heroku master</code>, so I found this <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#local-workstation-setup\" rel=\"nofollow\">https://devcenter.heroku.com/articles/getting-started-with-rails4#local-workstation-setup</a> and started over according to these instructions. Everything works perfecto, apart from `</p>\n\n<pre><code>$ rails generate controller welcome`\n\n`/Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file --\n bundler/setup (LoadError)\n        from /Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/commands.rb:33:in `&lt;module:Spring&gt;'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/commands.rb:4:in `&lt;top (required)&gt;'\n        from /Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application.rb:77:in `preload'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application.rb:143:in `serve'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application.rb:131:in `block in run'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application.rb:125:in `loop'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application.rb:125:in `run'\n        from /Users/liisvaljaots/myapp/vendor/bundle/gems/spring-1.6.1/lib/spring/application/boot.rb:18:in `&lt;top (required)&gt;'\n        from /Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/liisvaljaots/.rbenv/versions/2.2.4/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from -e:1:in `&lt;main&gt;'`\n</code></pre>\n\n<p>I'm all Googled out on this issue, maybe someone here can help.</p>\n\n<p>Also, another possibly related issue is this line in my Terminal when I open it <code>bash: eval: line 21: syntax error: unexpected end of file</code></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "edited": false, "score": 1, "creation_date": 1451481078, "post_id": 34529899, "comment_id": 56801620, "body": "awesome thank you, that&#39;s exactly the gap in my knowledge i was seeking."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 1, "last_activity_date": 1451479822, "creation_date": 1451479822, "answer_id": 34529899, "question_id": 34529765, "link": "https://stackoverflow.com/questions/34529765/youre-trying-to-create-an-attribute-in-rails-3-2-5/34529899#34529899", "title": "You&#39;re trying to create an attribute in Rails 3.2.5", "body": "<p>Admittedly, the deprecation wording is slightly confusing, but you're seeing this warning because the <code>model[attribute_name] = ...</code> style is only supported for ActiveRecord attributes on the model, not non-persisted attributes added with <code>attr_writer</code>.</p>\n\n<p>You can see the code that produces the warning <a href=\"https://github.com/rails/rails/blob/d94d77c55c59f861201ac42f991ede0ff31481d5/activerecord/lib/active_record/attribute_methods/write.rb#L31\" rel=\"nofollow\">over here</a>.</p>\n\n<p>To address this I'd use <code>send</code> which will work for all attributes e.g.</p>\n\n<pre><code>i.send(\"#{v}=\", chunks[k])\n</code></pre>\n"}], "owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 34529899, "answer_count": 1, "score": 1, "last_activity_date": 1451479822, "creation_date": 1451479213, "question_id": 34529765, "link": "https://stackoverflow.com/questions/34529765/youre-trying-to-create-an-attribute-in-rails-3-2-5", "title": "You&#39;re trying to create an attribute in Rails 3.2.5", "body": "<p>I have a DI routine where I have a large csv I'm importing with known column format.  I first set up a column map:</p>\n\n<pre><code>col_map =\n    {\n      4 =&gt; :name,\n      6 =&gt; :description,\n      21 =&gt; :in_stock,\n      ...\n</code></pre>\n\n<p>I then read each line in, and then using the column map, attempt to set the attribute:</p>\n\n<pre><code>i = Item.new\ncol_map.each do |k,v|\n    i[v] = chunks[k] #chunks is the line read in split by the delimiter\n</code></pre>\n\n<p>In my item declaration, I declare two attributes, b/c these are not stored in the database, they're used for other logic:</p>\n\n<pre><code>attr_writer :in_stock\nattr_writer :end_date\n</code></pre>\n\n<p>When the code gets to this line:</p>\n\n<pre><code>i[v] = chunks[k]\n</code></pre>\n\n<p>I get this message:</p>\n\n<pre><code>X.DEPRECATION WARNING: You're trying to create an attribute `in_stock'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer`\n</code></pre>\n\n<p>But I'm not trying to create an attribute, and I am using attr_writer.  I suspect this has something to do with the [] I'm using instead of . for the lvalue.  </p>\n\n<p>Can anyone see what I'm doing wrong?</p>\n\n<p>Thanks for any help,\nKevin</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1451479456, "creation_date": 1451479456, "answer_id": 34529812, "question_id": 34529667, "link": "https://stackoverflow.com/questions/34529667/latest-time-updated-from-two-models/34529812#34529812", "title": "Latest time updated from two models", "body": "<p>Create a method <code>last_updated</code> in your Project model...</p>\n\n<p>If you have many comments per model...</p>\n\n<pre><code>def last_updated\n  most_recent_comment = comments.order(updated_at: :desc).first\n  return updated_at unless most_recent_comment\n  [most_recent_comment.updated_at, updated_at].max\nend\n</code></pre>\n\n<p>Now you can use <code>my_project.last_updated</code> and it will return the most recent date between comment or project (whichever is greater) or will return just project date if no comments currently exist.</p>\n"}], "owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 34529812, "answer_count": 1, "score": 0, "last_activity_date": 1451480252, "creation_date": 1451478847, "last_edit_date": 1451480252, "question_id": 34529667, "link": "https://stackoverflow.com/questions/34529667/latest-time-updated-from-two-models", "title": "Latest time updated from two models", "body": "<p>I have project model and comment model. I need to show  project last updated if project or comment is changed. If one model means I will do <code>project.updated_at</code>, but I need to check <code>comment.updated_at</code> also. How to do this?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1451478871, "post_id": 34529626, "comment_id": 56800371, "body": "Are you trying to implement bubble sort or something?"}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451478963, "post_id": 34529626, "comment_id": 56800419, "body": "Well no, even though I admit, it looks like I am :) I just need to reorder some elements in an array according to a very specific condition. I simplified it in the question but the point is the same."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479083, "post_id": 34529626, "comment_id": 56800496, "body": "Do you need to do this in place?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451479117, "post_id": 34529626, "comment_id": 56800521, "body": "What would be the result for that source array?"}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479141, "post_id": 34529626, "comment_id": 56800536, "body": "@idmean not necessary."}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451479218, "post_id": 34529626, "comment_id": 56800583, "body": "@SergioTulentsev I only need to compare consecutive elements in one pass. It&#39;s already sorted out on different property."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451479484, "post_id": 34529626, "comment_id": 56800741, "body": "@Neman: this is not the question I asked :) what&#39;s the expected result of this algorithm for this input data?"}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451479624, "post_id": 34529626, "comment_id": 56800810, "body": "@SergioTulentsev in this example it would be [1, 10, 3, 13, 28]"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451479715, "post_id": 34529626, "comment_id": 56800873, "body": "How <code>3</code> could stay intact?"}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451479766, "post_id": 34529626, "comment_id": 56800906, "body": "@mudasobwa because 10 - 3 isn&#39;t larger than 10"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451479874, "post_id": 34529626, "comment_id": 56800959, "body": "@Neman gotcha, updated my answer."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479516, "post_id": 34529771, "comment_id": 56800753, "body": "@idmean In my world there are no one thing less elegant than <code>while</code> loop. Oh, wait: <code>if</code> condition is."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479678, "post_id": 34529771, "comment_id": 56800843, "body": "If I encountered this block of code in a program it would take me longer to figure out what it does compared to a while loop."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479709, "post_id": 34529771, "comment_id": 56800866, "body": "@idmean: agree with you here."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451480168, "post_id": 34529771, "comment_id": 56801126, "body": "@SergioTulentsev I personally switched to \u201cfunctional treatment\u201d of code, since I am successfully leaving ruby for erlang/elixir. But since my first line of code, while loops require from me the highest concentration because an amount of entities in while loop is usually N times greater than map-reduce (notice, please, that we have <i>no</i> index here at all.)"}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 0, "creation_date": 1451480492, "post_id": 34529771, "comment_id": 56801289, "body": "@mudasobwa What I have trouble understanding here is the negative index like in <code>a[-1]</code> and <code>a[-2]</code>. Care to explain?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 1, "creation_date": 1451482319, "post_id": 34529771, "comment_id": 56802284, "body": "@Neman <code>a[-1]</code> stays for \u201cvery last,\u201d <code>a[-2]</code> stays for the \u201csecond from the end.\u201d <a href=\"http://stackoverflow.com/questions/15049744/how-does-negative-index-work-with-array\" title=\"how does negative index work with array\">stackoverflow.com/questions/15049744/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1451479848, "last_edit_date": 1451479848, "creation_date": 1451479251, "answer_id": 34529771, "question_id": 34529626, "link": "https://stackoverflow.com/questions/34529626/compare-consecutive-values-in-an-arr-and-swap-them-if-needed/34529771#34529771", "title": "Compare consecutive values in an arr and swap them if needed", "body": "<p>Not inplace solution:</p>\n\n<pre><code>arr = [1, 10, 3, 28, 13]\ndiff = 10\n\narr.inject([]) do |memo, el|\n  (memo &lt;&lt; el).tap do |a|\n    a[-1], a[-2] = a[-2], a[-1] if a.size &gt; 1 &amp;&amp; a[-2] - a[-1] &gt; diff\n  end\nend\n</code></pre>\n\n<p>What\u2019s going on here:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>arr.inject</code></a> is a reducer, it starts with empty array and fills it with elements;</li>\n<li><code>tap</code> passes a receiver to the block given, returning self back;</li>\n<li>next line swaps two last elements if and only there are more than one and their difference is greater than a given value.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451479565, "post_id": 34529823, "comment_id": 56800782, "body": "You could remove these unneeded parentheses from the if."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451479580, "post_id": 34529823, "comment_id": 56800791, "body": "<code>with_index</code> is redundant since one might use negative indices in ruby arrays."}], "tags": [], "owner": {"reputation": 1432, "user_id": 1306187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7023dcf81c08dc35951f338aee158095?s=128&d=identicon&r=PG", "display_name": "Jaehyun Shin", "link": "https://stackoverflow.com/users/1306187/jaehyun-shin"}, "is_accepted": false, "score": 1, "last_activity_date": 1451479509, "creation_date": 1451479509, "answer_id": 34529823, "question_id": 34529626, "link": "https://stackoverflow.com/questions/34529626/compare-consecutive-values-in-an-arr-and-swap-them-if-needed/34529823#34529823", "title": "Compare consecutive values in an arr and swap them if needed", "body": "<pre><code>arr = [1, 10, 3, 28, 13]\narr.each_with_index do |num, index|\n  if (index + 1 &lt; arr.size) &amp;&amp; (arr[index] - arr[index + 1]) &gt; 10\n    arr[index], arr[index+1] = arr[index + 1], arr[index]\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 0, "creation_date": 1451484504, "post_id": 34530234, "comment_id": 56803481, "body": "This for me looks the most readable. I do have one question though. Why the <code>if</code> after the swap takes place? Is that a common thing with Ruby? I would write <code>if (arr[i] - arr[i+1]) &gt; 10 arr[i], arr[i+1] = arr[i+1], arr[i]</code>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 1, "creation_date": 1451484698, "post_id": 34530234, "comment_id": 56803580, "body": "Its more readable I guess - in a small conditional statements, its better to focus on what is being done and then think of conditions under which that will happen."}, {"owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 0, "creation_date": 1451484810, "post_id": 34530234, "comment_id": 56803639, "body": "And if I had for example more than one condition like <code>(arr[i] - arr[i+1]) &gt; 10 &amp;&amp; (arr[i] - arr[i+1]) &lt; 20</code>?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "edited": false, "score": 0, "creation_date": 1451485136, "post_id": 34530234, "comment_id": 56803805, "body": "Pick whichever is more readable - there is no strict rule....one should be able to understand code."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 1, "last_activity_date": 1451481443, "last_edit_date": 1451481443, "creation_date": 1451481053, "answer_id": 34530234, "question_id": 34529626, "link": "https://stackoverflow.com/questions/34529626/compare-consecutive-values-in-an-arr-and-swap-them-if-needed/34530234#34530234", "title": "Compare consecutive values in an arr and swap them if needed", "body": "<p>Here is one way to do this - this is simple iteration for indices <code>0</code> to <code>Array#size - 2</code>, we swap the elements if the condition is true.</p>\n\n<pre><code>arr = [1, 10, 3, 28, 13]\n(0...arr.size - 1).each do |i|\n    arr[i], arr[i+1] = arr[i+1], arr[i] if (arr[i] - arr[i+1]) &gt; 10\nend\np arr\n#=&gt; [1, 10, 3, 13, 28]\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 1069416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7f8a6e851031018ade96c29432408ba0?s=128&d=identicon&r=PG", "display_name": "Neman", "link": "https://stackoverflow.com/users/1069416/neman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 34530234, "answer_count": 3, "score": -1, "last_activity_date": 1451481443, "creation_date": 1451478704, "last_edit_date": 1451479952, "question_id": 34529626, "link": "https://stackoverflow.com/questions/34529626/compare-consecutive-values-in-an-arr-and-swap-them-if-needed", "title": "Compare consecutive values in an arr and swap them if needed", "body": "<p>First of all, I'm pretty new to Ruby (few days). </p>\n\n<p>I'm trying to go through an array, checking if the difference is greater than expected and if it is I want to swap the elements. In Java I would do it something like this:</p>\n\n<pre><code>int[] arr = {1, 10, 3, 28, 13};\nint curr = 0;\nint next = 1;\nwhile (next &lt; arr.length) {\n if (arr[curr] - arr[next] &gt; 10) {\n  int temp = arr[curr];\n  arr[curr] = arr[next];\n  arr[next] = temp;\n }\n curr++;\n next++;\n}\n</code></pre>\n\n<p>Is there an elegant way to achieve this in Ruby? I can translate this code to Ruby code but it feels a little bit odd to do it like this in Ruby.</p>\n\n<p>Thanks</p>\n\n<p>Edit: I don't need to sort it in a standard way. This is a simplification of a problem I have. The array is already sorted on different property and this is only a sanitisation part that goes in O(n).</p>\n\n<p>Edit2: I have an array of objects that are sorted by id. Those objects have another property that is for example, counter, that only needs to be checked with neighbouring objects. If the condition that the diff between counters is > 10 I should switch them. Don't be bothered with that then the other elements aren't in correct order :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "foreach", "acts-as-taggable-on"], "comments": [{"owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1451512132, "post_id": 34529526, "comment_id": 56817622, "body": "You cannot <code>save</code> order in a relation. Relation is a magic collection and you cannot change order by assigning. If you want to have ordered collection of tags for a post, you can either add new association (see example <a href=\"http://guides.rubyonrails.org/association_basics.html#scopes-for-has-many\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>) or just add simple getter-method in Post model, which returns tags in expected order, right?"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1451592820, "creation_date": 1451592820, "answer_id": 34551219, "question_id": 34529526, "link": "https://stackoverflow.com/questions/34529526/how-to-modify-activerecord-relation-output-in-ruby-on-rails/34551219#34551219", "title": "How to modify ActiveRecord_Relation output in Ruby on Rails", "body": "<p>Since you have <code>Tag#taggings_count</code>, you can order your associations by it. I don't know if this will conflict with what <code>ActsAsTaggable</code> is up to, but this is what it would look like in vanilla Rails. Perhaps <code>ActsAsTaggable</code> has some options to accomplish the same thing.</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :taggings\n  has_many :tags, through: :taggings, -&gt; { order(taggings_count: :desc) }\nend\n</code></pre>\n\n<p>For more details, see <a href=\"http://guides.rubyonrails.org/association_basics.html#scopes-for-has-many\" rel=\"nofollow\">Scopes for <code>has_many</code></a>.  </p>\n\n<hr>\n\n<p>If you don't want the order applied globally, <a href=\"https://stackoverflow.com/questions/34529526/how-to-modify-activerecord-relation-output-in-ruby-on-rails#comment56817622_34529526\">andrykonchin's idea</a> is a good one. Write a <code>Post#sorted_tags</code> method and you can access it on the <code>Post</code> when you want it. Memoizing it into an instance variable will prevent extra database queries.</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  def sorted_tags\n    @sorted_tags ||= tags.sort_by(&amp;:taggings_count).reverse\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 1459951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8c00c598aaf13c5efae93ae2b82b8b9?s=128&d=identicon&r=PG", "display_name": "Joudicek Jouda", "link": "https://stackoverflow.com/users/1459951/joudicek-jouda"}, "is_accepted": true, "score": 0, "last_activity_date": 1451747572, "creation_date": 1451747572, "answer_id": 34567388, "question_id": 34529526, "link": "https://stackoverflow.com/questions/34529526/how-to-modify-activerecord-relation-output-in-ruby-on-rails/34567388#34567388", "title": "How to modify ActiveRecord_Relation output in Ruby on Rails", "body": "<p>The problem was in the end only with using an invalid variable for saving the sorted tags.</p>\n\n<p><a href=\"https://github.com/mbleigh/acts-as-taggable-on\" rel=\"nofollow\">Acts as Taggable on</a> uses variable <code>tag_list</code> to store the tags associated with the Tag model. Instead I have wrongly used variable <code>tags</code>. </p>\n\n<p>The full correct version of my code:</p>\n\n<pre><code>def index\n  temp_posts = Post.all.order('updated_at DESC')\n  temp_posts.each_with_index do |temp_post, index|\n    // CHANGE: temp_posts[index].tags =&gt; temp_posts[index].tag_list\n    temp_posts[index].tag_list = temp_post.tags.sort_by {|tag| -tag.taggings_count}\n  end\n  @posts = temp_posts\nend\n</code></pre>\n"}], "owner": {"reputation": 782, "user_id": 1459951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8c00c598aaf13c5efae93ae2b82b8b9?s=128&d=identicon&r=PG", "display_name": "Joudicek Jouda", "link": "https://stackoverflow.com/users/1459951/joudicek-jouda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 34567388, "answer_count": 2, "score": 0, "last_activity_date": 1451747572, "creation_date": 1451478260, "question_id": 34529526, "link": "https://stackoverflow.com/questions/34529526/how-to-modify-activerecord-relation-output-in-ruby-on-rails", "title": "How to modify ActiveRecord_Relation output in Ruby on Rails", "body": "<p>I have a Post model combined with <a href=\"https://github.com/mbleigh/acts-as-taggable-on\" rel=\"nofollow\">gem Acts_as_Taggable_on</a>. </p>\n\n<p>I would like to display all posts with all their tags, but the tags should be sorted by number of their use (number of posts tagged with certain tag). </p>\n\n<p>To do that I looped through ActiveRecord_Relation and did a sort on Tags column:</p>\n\n<pre><code>def index\n  temp_posts = Post.all.order('updated_at DESC')\n  temp_posts.each_with_index do |temp_post, index|\n    temp_posts[index].tags = temp_post.tags.sort_by {|tag| -tag.taggings_count}\n  end\n  @show = temp_posts.first.tags.sort_by {|tag| -tag.taggings_count} # according to this control output it should work\n  @posts = temp_posts\nend\n</code></pre>\n\n<p>When looking through the control output @show, the tags are sorted as required, but they are not saved into the temp_posts variable. The output is thus unsorted.</p>\n\n<p>What can I do to 'save' the changes I made in the loop?</p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1451476240, "post_id": 34528649, "comment_id": 56799013, "body": "<a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\"><code>Foo#define_method</code></a> also."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451476334, "post_id": 34528953, "comment_id": 56799060, "body": "There is no \u201cRuby autoload,\u201d you probably meant \u201cRails autoload.\u201d"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451476461, "post_id": 34528953, "comment_id": 56799119, "body": "@mudasobwa technically there is (the <code>autoload</code> method), but it would not apply to this case. I made a small change to the answer. Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 28, "last_activity_date": 1451476417, "last_edit_date": 1451476417, "creation_date": 1451475951, "answer_id": 34528953, "question_id": 34528649, "link": "https://stackoverflow.com/questions/34528649/ruby-add-method-to-a-class/34528953#34528953", "title": "Ruby add method to a class", "body": "<p>Actually, there are a few other ways to add new methods to a class. For example, you can also define the methods in a module, and mix the module into the original class.</p>\n\n<pre><code>module ExtraMethods\n  def bar\n  end\nend\n\nFoo.class_eval { include ExtraMethods }\nclass Foo\n  include ExtraMethods\nend\n</code></pre>\n\n<p>There is no real better or worse. The two (or three) ways you mentioned have different behavior and you may want to use one or another depending on your need (or preference). In most cases, this is subjective. In other cases, it really depends on how your code is structured.</p>\n\n<p>The main objective difference between reopening the class vs using <code>class_eval</code> is that the first one is also a class definition, whereas the second one requires the original class to already be defined.</p>\n\n<p>In practice, reopening the class in some cases may cause some unexpected side effects. Let's suppose you defined <code>Foo</code> in the file <code>lib/foo.rb</code>, with a bunch of methods. Then you reopen <code>Foo</code> in <code>config/initializers/extra.rb</code> and you add the <code>bar</code> method.</p>\n\n<p>In <code>myclass.rb</code> you use <code>Foo</code>, but instead of requiring <code>lib/foo.rb</code> manually, you rely on an autoload feature.</p>\n\n<p>If <code>extra.rb</code> is loaded before <code>lib/foo.rb</code>, what could happen is that the <code>Foo</code> class is already defined in your environment, and your code will not load <code>lib/foo.rb</code>. What you will have is a <code>Foo</code> class containing only the <code>bar</code> extension you defined, and not the original <code>Foo</code> one.</p>\n\n<p>In other words, if for whatever reason you reopen the class to add some methods without making sure the full origina class definition is loaded first (or after), your code may break if it relies on autoload.</p>\n\n<p>Conversely, <code>Foo.class_eval</code> calls a method on <code>Foo</code>, therefore it expects the original <code>Foo</code> definition to be already present at the time you try to add new methods. This ensures that, when you add new methods, the <code>Foo</code> class will already be defined.</p>\n\n<p>In conclusion, the main difference is that reopening the class allows you (for better or for worse) to add methods to a class that may not have been loaded yet, whereas the <code>class_eval</code> requires the class to already be defined.</p>\n\n<p>In general, unless I'm defining namespaced subclasses or reopening classes I have full control of, I prefer the second approach as in large codebases it keeps the code more maintainable. In fact, I generally use mixins if I extend third-party classes so that I can retain the full method ancestor chain if I need to override existing methods.</p>\n"}, {"comments": [{"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 1, "creation_date": 1451476754, "post_id": 34529095, "comment_id": 56799262, "body": "But this also means that this shared scope will not be garbage-collected while class exists"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 5, "last_activity_date": 1451476977, "last_edit_date": 1451476977, "creation_date": 1451476444, "answer_id": 34529095, "question_id": 34528649, "link": "https://stackoverflow.com/questions/34528649/ruby-add-method-to-a-class/34529095#34529095", "title": "Ruby add method to a class", "body": "<p>The second approach is very handy when you need some dynamic thing. Ruby actually has several scopes: </p>\n\n<pre><code># scope one, opened with `class` keyword\nclass ...\n  # scope two, opened with `def` keyword\n  def ...\n  end\nend\n</code></pre>\n\n<p>With <code>class_eval</code>, you can share scopes. </p>\n\n<pre><code>&gt;&gt; foo = 1\n=&gt; 1\n&gt;&gt; class Foo\n&gt;&gt;   puts foo\n&gt;&gt;   def bar\n&gt;&gt;     puts foo\n&gt;&gt;   end\n&gt;&gt; end\nNameError: undefined local variable or method 'foo' for Foo:Class\n        from (irb):3:in &lt;class:Foo&gt;\n        from (irb):2\n&gt;&gt; Foo\n=&gt; Foo\n&gt;&gt; Foo.class_eval {\n?&gt;   puts foo\n&gt;&gt;   define_method :bar do\n&gt;&gt;     puts foo\n&gt;&gt;   end\n&gt;&gt; }\n1\n=&gt; :bar\n&gt;&gt; Foo.new.bar\n1\n</code></pre>\n"}], "owner": {"reputation": 3392, "user_id": 2694123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fKBMK.jpg?s=128&g=1", "display_name": "Saman Mohamadi", "link": "https://stackoverflow.com/users/2694123/saman-mohamadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13774, "favorite_count": 2, "accepted_answer_id": 34528953, "answer_count": 2, "score": 13, "last_activity_date": 1451476977, "creation_date": 1451474982, "last_edit_date": 1451476004, "question_id": 34528649, "link": "https://stackoverflow.com/questions/34528649/ruby-add-method-to-a-class", "title": "Ruby add method to a class", "body": "<p>Assume I have a class :</p>\n\n<pre><code>class Foo\nend\n</code></pre>\n\n<p>To add a method to this class I know 2 options:</p>\n\n<ol>\n<li><p>Reopening the class and implement the method :</p>\n\n<pre><code>class Foo\n  def bar\n  end\nend\n</code></pre></li>\n<li><p>using <code>class_eval</code> to implement method :</p>\n\n<pre><code>Foo.class_eval { def bar; end}\n</code></pre></li>\n</ol>\n\n<p>What is the difference? Which one is better?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "sass"], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 0, "last_activity_date": 1451475241, "creation_date": 1451475241, "answer_id": 34528739, "question_id": 34528639, "link": "https://stackoverflow.com/questions/34528639/pass-controller-variable-to-css-scss-erb-file-in-rails/34528739#34528739", "title": "Pass controller variable to css.scss.erb file in rails", "body": "<p>The assets (CSS/JS) are precompiled before they are being served. So you won't be able the access Controller from there.</p>\n\n<p>The best you can do is, declare the dynamic css inline in the HTML before/after including the CSS.</p>\n"}], "owner": {"reputation": 303, "user_id": 3440996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/1268583458/picture?type=large", "display_name": "user253956", "link": "https://stackoverflow.com/users/3440996/user253956"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "accepted_answer_id": 34528739, "answer_count": 1, "score": 0, "last_activity_date": 1451475357, "creation_date": 1451474940, "last_edit_date": 1451475357, "question_id": 34528639, "link": "https://stackoverflow.com/questions/34528639/pass-controller-variable-to-css-scss-erb-file-in-rails", "title": "Pass controller variable to css.scss.erb file in rails", "body": "<p>I have a controller  <code>users_controller.rb</code> , located in <code>app/controllers/</code> . I have a file <code>custom.css.scss.erb</code>, located in <code>app/assets/stylesheets/</code>. </p>\n\n<p>In the css file I want to define a variable like <code>$myVar: &lt;%= @user.customisation %&gt;</code>. I am getting the following output <code>undefined method `customisation' for nil:NilClass</code>.  What am I missing ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451473714, "post_id": 34528094, "comment_id": 56797667, "body": "not get totally but <code>book has many chapters</code> <code>chapters has many titles</code> this way now from book you can includes titles by <code>Book.include({:chapters =&gt; :titles})</code>"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451474217, "post_id": 34528094, "comment_id": 56797957, "body": "Not sure that&#39;s what I&#39;m looking for. I would want a list of all <code>titles</code> for an <code>author</code>. A <code>title</code> either has a relationship with a <code>book</code> or a <code>chapter</code>, But <code>chapter</code> has no direction relationship with <code>author</code> as such goes through <code>book</code>."}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451474628, "post_id": 34528094, "comment_id": 56798163, "body": "so this for 1st author titles  <code>Author.first.books.map(&amp;:titles)</code>"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451475066, "post_id": 34528094, "comment_id": 56798356, "body": "@RajarshiDas expand it =)"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451475411, "post_id": 34528094, "comment_id": 56798542, "body": "<code>has_many :books, -&gt; {includes :titles}</code> on the author now it will load the books with titles"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451475448, "post_id": 34528094, "comment_id": 56798562, "body": "try something like: <code>has_many :titles, -&gt; { |author| author.books.titles.merge(author.books.chapters.titles) }</code>"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "reply_to_user": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451475622, "post_id": 34528094, "comment_id": 56798670, "body": "@\u041c\u0430\u043b\u044a\u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a if in author model we do <code>has_many :titles, through: :books </code> Then?"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451475679, "post_id": 34528094, "comment_id": 56798712, "body": "@RajarshiDas then it selects only book titles =)"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451475725, "post_id": 34528094, "comment_id": 56798740, "body": "yes  he want chapters also ? :=))"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1451475951, "post_id": 34528094, "comment_id": 56798855, "body": "Thanks, yes I&#39;d like all titles for an author. I&#39;ve tried <code>has_many :titles, -&gt; { |author| author.books.titles.merge(author.books.chapters.titles) }</code>. If in the console I enter <code>Author.first</code> I get the error: <code>syntax error, unexpected &#39;|&#39;</code> referring to the added association line."}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1451476293, "post_id": 34528094, "comment_id": 56799031, "body": "I rewrote it as <code>has_many :titles do |author|</code> ; <code>author.books.titles.merge(author.books.chapters.titles)</code> ; <code>end</code>. Then if I enter <code>Author.first</code> I get the error <code>NoMethodError: undefined method &#39;books&#39;</code>."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451477659, "post_id": 34528094, "comment_id": 56799723, "body": "<code>has_many :titles, -&gt;(author) { author.books.titles.merge(author.books.chapters.titles) }</code>"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451477715, "post_id": 34528094, "comment_id": 56799756, "body": "you can try two asscoication <code>has_many :titles, through: :books</code>, and <code>has_many :chapter_titles, through: :chapters, class: &#39;Chapter</code> and <code>has_many :chapters, through: :books</code> now in console <code>Author.titles &amp; Author.chapter_titles</code>"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "reply_to_user": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451479049, "post_id": 34528094, "comment_id": 56800474, "body": "@\u041c\u0430\u043b\u044a, <code>aut=Author.first</code> ; <code>aut.titles</code> in the console produces the error: <code>undefined method &#39;titles&#39;</code>. If I going step-by-step it goes without errors: <code>aut=Author.first</code> ; <code>book=aut.books.first</code> ; <code>chapter=book.chapters.first</code> ; <code>chapter.titles</code>.  @Rajarshi, this produces the error <code>Could not find the association :chapter_titles in model Author</code> (I think setting it up like this requires also an association between <code>Author</code> and <code>Chapter</code>)."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451479188, "post_id": 34528094, "comment_id": 56800566, "body": "can you just collect all the title in such way <code>author.books.titles</code> directly in code (not as a scope)?"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1451480142, "post_id": 34528094, "comment_id": 56801113, "body": "No, I get the same error that <code>books</code> is undefined method. It does work if I change it to <code>author.books.first.titles</code> (and then of course only shows one book title). Also if I add <code>has_many :titles, through: :books</code> to the model file, it doesn&#39;t work. I&#39;ve also tried <code>author.books.titlesource(s)</code> (plural and singular) and that didn&#39;t work either."}, {"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 0, "creation_date": 1451762189, "post_id": 34528094, "comment_id": 56883766, "body": "A suggestion, if you need a bounty on SO to make a complex combination of metamagic functions in a bloated metamagic framework work as expected, then only imagine what you&#39;ll see in production :D I like Reykos raw sql approach in this even though I didn&#39;t verify if it actually works ^_^"}], "answers": [{"comments": [{"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1452177973, "post_id": 34560944, "comment_id": 57061250, "body": "Wouldn&#39;t this produce a lot of db queries?"}, {"owner": {"reputation": 192, "user_id": 1031654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/30731fd7af857d675772b8520f227c8c?s=128&d=identicon&r=PG", "display_name": "Reyko", "link": "https://stackoverflow.com/users/1031654/reyko"}, "reply_to_user": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1452192547, "post_id": 34560944, "comment_id": 57071156, "body": "@Marty In the console you will see one query but that query contains two nested queries."}], "tags": [], "owner": {"reputation": 192, "user_id": 1031654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/30731fd7af857d675772b8520f227c8c?s=128&d=identicon&r=PG", "display_name": "Reyko", "link": "https://stackoverflow.com/users/1031654/reyko"}, "is_accepted": true, "score": 3, "last_activity_date": 1451691366, "last_edit_date": 1451691366, "creation_date": 1451689616, "answer_id": 34560944, "question_id": 34528094, "link": "https://stackoverflow.com/questions/34528094/how-to-create-a-has-many-through-association-if-a-polymorphic-association-is-i/34560944#34560944", "title": "How to create a &#39;has_many through&#39; association if a polymorphic association is involved?", "body": "<p>If you were to use an association on the <code>Author</code> like <code>has_many :titles, through: :books</code> it should normally work as long as you have set a <code>titlesource_id</code> and a <code>titlesource_type</code> on the <code>Title</code> model migration.</p>\n\n<p>However, if you would add another one to fetch the titles through the chapters like this <code>has_many :titles, through: :chapters</code> it would overwrite the first one and it would fetch only the titles that are of <code>titlesource_type = 'Chapter'</code>.</p>\n\n<p>Therefore the solution that I would suggest to you, if you don't mind sql is to implement a method like this in the Author model.</p>\n\n<pre><code>  def titles\n    Title.where(\n      \"(titles.titlesource_type = 'Book'\n      AND titles.titlesource_id\n      IN (SELECT books.id FROM books WHERE books.author_id = #{id}))\n      OR (titles.titlesource_type = 'Chapter'\n      AND titles.titlesource_id\n      IN (SELECT chapters.id\n      FROM books\n      INNER JOIN chapters ON chapters.book_id = books.id\n      WHERE books.author_id = #{id}))\"\n    )\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1056, "user_id": 4333534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94364e357329372fe537d2789c8127d?s=128&d=identicon&r=PG&f=1", "display_name": "roob", "link": "https://stackoverflow.com/users/4333534/roob"}, "is_accepted": false, "score": 1, "last_activity_date": 1451982483, "creation_date": 1451982483, "answer_id": 34607164, "question_id": 34528094, "link": "https://stackoverflow.com/questions/34528094/how-to-create-a-has-many-through-association-if-a-polymorphic-association-is-i/34607164#34607164", "title": "How to create a &#39;has_many through&#39; association if a polymorphic association is involved?", "body": "<p>If you don't need ActiveRecord methods (like <code>where</code> or <code>order</code>), then this will give you an array of titles.</p>\n\n<pre><code>def titles_array  # sacrificing ActiveRecord methods\n  books.collect { |b| b.titles + b.chapters.collect { |c| c.titles } }\nend\n</code></pre>\n\n<p>You can still use AR methods on the individual array elements such as <code>titles_array.first.author</code>, etc</p>\n"}], "owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 1, "accepted_answer_id": 34560944, "answer_count": 2, "score": 1, "last_activity_date": 1452185510, "creation_date": 1451472915, "last_edit_date": 1452185100, "question_id": 34528094, "link": "https://stackoverflow.com/questions/34528094/how-to-create-a-has-many-through-association-if-a-polymorphic-association-is-i", "title": "How to create a &#39;has_many through&#39; association if a polymorphic association is involved?", "body": "<p>I have 4 models: Model 1 associated with model 2, and model 2 with model 3. Models 2 and 3 are associated to model 4 with a polymorphic association. This all works. I'm having trouble specifying the association between model 1 and model 4, which are thus related in two ways:</p>\n\n<ol>\n<li>model 1 - model 2 - model 4</li>\n<li>model 1 - model 2 - model 3 - model 4</li>\n</ol>\n\n<p>Below you'll find all the associations, except that between model 1 and model 4:</p>\n\n<hr>\n\n<p>Author model:</p>\n\n<pre><code>has_many :books,     dependent: :destroy\n</code></pre>\n\n<p>Book model:</p>\n\n<pre><code>belongs_to :author\nhas_many   :chapters, dependent: :destroy\nhas_many   :titles,   as: :titlesource,       # Polymorphic Association\n                      dependent: :destroy\n</code></pre>\n\n<p>Chapter model:</p>\n\n<pre><code>belongs_to :book\nhas_many   :titles,   as: :titlesource,       # Polymorphic Association\n                      dependent: :destroy\n</code></pre>\n\n<p>Title model:</p>\n\n<pre><code>belongs_to :titlesource, polymorphic: true\n</code></pre>\n\n<hr>\n\n<p><strong>Question:</strong> Suppose you have the above associations and you want to know the <code>titles</code> that an <code>author</code> has, irrespective whether they are a book-title or chapter-title. What associations should I expand the above setup with? (I assume something with <code>has_many through</code>)</p>\n\n<p><em>Update:</em> If it were only book-titles I would be looking for, I would expect adding <code>has_many :titles, through: :books</code> to the <code>Author</code> model to work. But it doesn't. If I add that association, then <code>Author.first.titles</code> produces the error <code>undefined method 'titles'</code>. I think this has to do with the polymorphic association and naming...? What am I doing wrong?</p>\n\n<p>For chapter title it is even more difficult. That association goes through the <code>Book</code> model, then through the <code>Chapter</code> model and then to the <code>Title</code> model. How can I include these titles in the author model? I think it would have to be code with the following logic (but obviously this code is incorrect):</p>\n\n<pre><code>has_many :titles, through: :books &amp;&amp; :books:chapters\n</code></pre>\n\n<p><strong>Update:</strong> The two answers given use SQL. Do these solutions not send a lot of queries to the db, causing problems if the method is used often? Has one of these methods an advantage over the other in performance?</p>\n"}, {"tags": ["ruby", "sequel"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1451472399, "post_id": 34527615, "comment_id": 56797047, "body": "Just a guess: would not <code>Artists.dataset.where(genres: 1).where(genres: 2).where(genres: 4)</code> work?"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1451475032, "creation_date": 1451475032, "answer_id": 34528671, "question_id": 34527615, "link": "https://stackoverflow.com/questions/34527615/sequel-model-filtering-many-to-many-relationships/34528671#34528671", "title": "Sequel model filtering many-to-many relationships", "body": "<p>As @mudasobwa mentioned in comments, you can append multiple <code>where</code> methods</p>\n\n<pre><code>multiple_genres = Genre.where(id: [1, 2, 4])\nresult = Artists.dataset\nmultiple_genres.each { |g| result = result.where(genres: g) }\nresult.all\n</code></pre>\n"}], "owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 34528671, "answer_count": 1, "score": 2, "last_activity_date": 1451475032, "creation_date": 1451471147, "question_id": 34527615, "link": "https://stackoverflow.com/questions/34527615/sequel-model-filtering-many-to-many-relationships", "title": "Sequel model filtering many-to-many relationships", "body": "<p>The question is best demonstrated through an example. I have 2 <code>Sequel</code> models, <code>Artists</code> and <code>Genres</code>, connected via a many-to-many relationship through a joiner table:</p>\n\n<pre><code>class Artist &lt; Sequel::Model\n    many_to_many :genres,\n    left_key: :artist_id,\n    right_key: :genre_id,\n    join_table: :artists_genres\nend\n\nclass Genres &lt; Sequel::Model\n    many_to_many :artists,\n    left_key: :genre_id,\n    right_key: :artist_id,\n    join_table: :artists_genres\nend\n</code></pre>\n\n<p>And the joiner table looks very simple:</p>\n\n<pre><code>CREATE TABLE `artists_genres` (`artist_id` integer, `genre_id` integer)\n</code></pre>\n\n<p>What I want to do is to filter all artists belonging to particular genres. This works well when using a single genre:</p>\n\n<pre><code>some_genre = Genre[1]\nArtists.dataset.where(:genres =&gt; some_genre).all\n</code></pre>\n\n<p>My problem is trying to get all artists who belong to a collection of genres:</p>\n\n<pre><code>multiple_genres = Genre.where(:id =&gt; [1,2,4])\nArtists.dataset.where(:genres =&gt; multiple_genres).all\n</code></pre>\n\n<p>This returns artists who belong to any of the 3 genres (1, 2, or 4), instead of artists belonging to ALL 3 genres.</p>\n\n<p>What is the correct way to query this through the model, or rewrite as a dataset <code>join</code> call to select the right rows?</p>\n"}, {"tags": ["android", "ruby", "ruboto"], "comments": [{"owner": {"reputation": 161, "user_id": 5208731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda62edf6c1950f7867b8764e26f9e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Keighley", "link": "https://stackoverflow.com/users/5208731/nick-keighley"}, "edited": false, "score": 0, "creation_date": 1451471694, "post_id": 34527308, "comment_id": 56796699, "body": "In the IRB I can change directory using &#39;Dir.chdir &quot;subdir&quot;&#39;. But ruboto&#39;s SCRIPTS page still uses the jruby directory."}, {"owner": {"reputation": 161, "user_id": 5208731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda62edf6c1950f7867b8764e26f9e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Keighley", "link": "https://stackoverflow.com/users/5208731/nick-keighley"}, "edited": false, "score": 0, "creation_date": 1451510555, "post_id": 34527308, "comment_id": 56816930, "body": "or again in the irb I can use &#39;require &quot;subdir/rbfile&quot;&#39;. Still not ideal tho..."}], "answers": [{"tags": [], "owner": {"reputation": 1051, "user_id": 658690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe20e2911b6c55c84736dffc4387428e?s=128&d=identicon&r=PG", "display_name": "donV", "link": "https://stackoverflow.com/users/658690/donv"}, "is_accepted": false, "score": 0, "last_activity_date": 1451846205, "creation_date": 1451846205, "answer_id": 34580128, "question_id": 34527308, "link": "https://stackoverflow.com/questions/34527308/how-do-i-change-directory-in-ruboto-running-on-android/34580128#34580128", "title": "how do I change directory in ruboto running on android", "body": "<p>You have not stated your motivation for placing the Ruby source in a subdirectory, so I'll speculate that it is for tidiness in a polyglot environment.  Also, I'll assume you want all the Ruby source in the same directory, including source for Activity classes.</p>\n\n<p>Adding your path to both the Ruby $LOAD_PATH and the Android component search path has been combined into one method in <code>org.ruboto.JRubyAdapter.addLoadPath</code>.  In <code>JRubyAdapter.setUpJRuby</code>, you can find a call to <code>addLoadPath</code> around line 289:  <a href=\"https://github.com/ruboto/ruboto/blob/1.4.0/assets/src/org/ruboto/JRubyAdapter.java#L289\" rel=\"nofollow\">https://github.com/ruboto/ruboto/blob/1.4.0/assets/src/org/ruboto/JRubyAdapter.java#L289</a></p>\n\n<p>You can add your own call below the existing one:</p>\n\n<pre><code>addLoadPath(\"file:\" + apkName + \"!/&lt;your_path_here&gt;\")\n</code></pre>\n\n<p>That will add the path to the Ruby load path and the Android component search path.</p>\n\n<p>If you have a clear use case, I would submit it to the Ruboto tracker at <a href=\"https://github.com/ruboto/ruboto/issues\" rel=\"nofollow\">https://github.com/ruboto/ruboto/issues</a> .  It sounds like something more Ruboto developers could use.</p>\n"}], "owner": {"reputation": 161, "user_id": 5208731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda62edf6c1950f7867b8764e26f9e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Keighley", "link": "https://stackoverflow.com/users/5208731/nick-keighley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451846205, "creation_date": 1451470071, "question_id": 34527308, "link": "https://stackoverflow.com/questions/34527308/how-do-i-change-directory-in-ruboto-running-on-android", "title": "how do I change directory in ruboto running on android", "body": "<p>I'm using ruboto (ruby) on an android tablet. I'd like my source to be in a subdirectory of the usual default source directory. Is there a way to do this?</p>\n"}, {"tags": ["ruby", "couchbase"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451469928, "post_id": 34527048, "comment_id": 56795741, "body": "Have you tried <code>cb.flush if (item_count % 1000).zero?</code> right after increasing <code>item_count</code>? Sounds like a memory problem."}, {"owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451470191, "post_id": 34527048, "comment_id": 56795903, "body": "actually that just made things worse :( now it doesn&#39;t even work on 1900. Strange though, &#39;cause I would expect at least the last 900 items to see in the bucket. BTW I&#39;m pretty sure that flush deletes all the items in a bucket, (like flush the toilette) and is not flushing the buffers to the disk or something like that."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451470928, "post_id": 34527048, "comment_id": 56796327, "body": "OK, another suggestion would be to call <a href=\"https://github.com/couchbase/couchbase-ruby-client#stats\" rel=\"nofollow noreferrer\"><code>stats</code></a> after, say, every 500 <code>set</code>s and examine an output. Hopefully it\u2019ll give some suggestions. Also make sure that <code>quiet</code> mode is <i>off</i>."}, {"owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451471121, "post_id": 34527048, "comment_id": 56796433, "body": "IMHO quiet mode only affects gets and I only do sets."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451471481, "post_id": 34527048, "comment_id": 56796609, "body": "I am not as sure about <code>quiet</code>: <a href=\"https://github.com/couchbase/couchbase-ruby-client/blob/8c0372df0bc4b6bd2f8b5596fdcddf4f47d4d31a/lib/active_support/cache/couchbase_store.rb#L54\" rel=\"nofollow noreferrer\">github.com/couchbase/couchbase-ruby-client/blob/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "is_accepted": true, "score": 0, "last_activity_date": 1451477201, "creation_date": 1451477201, "answer_id": 34529247, "question_id": 34527048, "link": "https://stackoverflow.com/questions/34527048/nothing-is-saved-when-adding-too-many-items-to-couchbase/34529247#34529247", "title": "Nothing is saved when adding &quot;too&quot; many items to couchbase", "body": "<p>Ok, I found a possible solution. The cauchbase documentation talks about set() and it is said that it can be used both sync, async, and from the not too well documented examples I thought that if I don't pass a block, then it's going to be sync. It seems it is not the case, so I changed my code to use callbacks:</p>\n\n<pre><code>def copy_next(old_db, cb, ep)\n  key = old_db.next_key # next key from old DB\n  if key\n    json = old_db.get(key) # next value from old DB\n\n    ep.set(key, json.to_s) do |cas, k, op|\n      copy_next(old_db, cb, ep)\n    end\n  end\nend\n\ncb = Couchbase.connect(bucket:\"ep\", password:\"secret\")\ncb.run do |ep|\n  copy_next(old_db, cb, ep)\nend\n</code></pre>\n"}], "owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 34529247, "answer_count": 1, "score": 0, "last_activity_date": 1451477201, "creation_date": 1451469236, "question_id": 34527048, "link": "https://stackoverflow.com/questions/34527048/nothing-is-saved-when-adding-too-many-items-to-couchbase", "title": "Nothing is saved when adding &quot;too&quot; many items to couchbase", "body": "<p>I've started to transfer our data from and old key-value store to couchbase (couchbase type bucket). I made the simplest possible ruby script that loops over the keys, reads the value from the old DB, and adds it to the couchbase:</p>\n\n<pre><code>item_count = 0\ncb = Couchbase.connect(bucket:\"ep\", password:\"secret\")\ncb.run do |ep|\n  old_db.read do\n    key = ... # next key from old DB\n    json = ... # next value from old DB\n\n    ep.set(key, json.to_s)\n\n    item_count += 1\n  end\nend\nputs item_count\n</code></pre>\n\n<p>I flush my bucket, then after running my script I look at the couchbase web console at the item count in ep bucket.</p>\n\n<p>When I add ~2000 or less items, it all looks good. But when I add more than 2000 items, the bucket stays empty!</p>\n\n<p>When I have around 1900 items in the bucket it is around 50% capacity, so it's not because it's getting full. (and even then I would expect the first items to be saved)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451467534, "post_id": 34526544, "comment_id": 56794410, "body": "Please share your <code>User</code> model. It does not have <code>authenticate</code> method, as stated in the error message."}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451467762, "post_id": 34526544, "comment_id": 56794535, "body": "Hi @mudasobwa i have updated my post"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1451468880, "post_id": 34526544, "comment_id": 56795158, "body": "Please also use meaningful titles for the questions to be best googlable, e. g. \u201cundefined method \u2018authenticate\u2019\u201d instead of generic \u201cHow to solve an error.\u201d"}], "answers": [{"comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1451468464, "post_id": 34526674, "comment_id": 56794922, "body": "Hi @Bert Goethals I think you are right, but now showing <code>undefined local variable or method </code>password_digest&#39; `"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 3, "creation_date": 1451468587, "post_id": 34526674, "comment_id": 56794990, "body": "I&#39;m writing an answer for you"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1451468849, "post_id": 34526674, "comment_id": 56795144, "body": "Please write answer slowly &amp; gradually I&#39;m waiting for this"}], "tags": [], "owner": {"reputation": 7756, "user_id": 476906, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d139cc651ccf479c9db3520398b86f2c?s=128&d=identicon&r=PG", "display_name": "Bert Goethals", "link": "https://stackoverflow.com/users/476906/bert-goethals"}, "is_accepted": false, "score": 1, "last_activity_date": 1451467879, "creation_date": 1451467879, "answer_id": 34526674, "question_id": 34526544, "link": "https://stackoverflow.com/questions/34526544/undefined-method-authenticate-in-ruby-on-rails/34526674#34526674", "title": "undefined method \u2018authenticate&#39; in ruby on rails?", "body": "<p>Well it seems your <code>User</code> class is missing a <code>authenticate</code> method. You should implement that.</p>\n\n<p>In case you want to use the built in Rails authentication you should add <code>has_secure_password validations: false</code> to your user model.</p>\n\n<p>Ref: <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/InstanceMethodsOnActivation.html#method-i-authenticate\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/InstanceMethodsOnActivation.html#method-i-authenticate</a></p>\n"}, {"comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1451549812, "post_id": 34527502, "comment_id": 56828310, "body": "Hi <b>Rich Peck</b> Thanks for nice answer but I&#39;m tired apply this, I&#39;m trying to another way"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 3, "last_activity_date": 1451470726, "creation_date": 1451470726, "answer_id": 34527502, "question_id": 34526544, "link": "https://stackoverflow.com/questions/34526544/undefined-method-authenticate-in-ruby-on-rails/34527502#34527502", "title": "undefined method \u2018authenticate&#39; in ruby on rails?", "body": "<blockquote>\n  <p>I'm newbie on ruby on rails application</p>\n</blockquote>\n\n<p>This answer is going to be out of context, but if you're new, I'd most definitely recommend using <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\"><code>Devise</code></a> over rolling your own authentication.</p>\n\n<p>You can see a <a href=\"https://gorails.com/episodes/user-authentication-with-devise\" rel=\"nofollow\">very good tutorial on how to use Devise here</a>.</p>\n\n<p>--</p>\n\n<p>In short, <strong>Devise</strong> handles all the back-end for authentication; it's built on top of <a href=\"https://github.com/hassox/warden/wiki/Overview\" rel=\"nofollow\"><code>warden</code></a> and gives you pre-rolled <code>sessions</code> &amp; <code>registrations</code> controllers.</p>\n\n<p>I recommend Devise to you because you're new.</p>\n\n<p>Creating your own authentication, whilst relatively simple, takes a lot of experience to understand. It seems from your question that you're following a tutorial or whatever, and don't really appreciate the underlying principles governing the process of authenticating a user.</p>\n\n<p>I may be wrong, but if you implement Devise, get it working, then you're able to make your own afterwards...</p>\n\n<hr>\n\n<p>If you wanted to use <code>Devise</code>, you would do the following:</p>\n\n<pre><code>#Gemfile\ngem 'devise', '~&gt; 3.5', '&gt;= 3.5.3'\n\n$ rails generate devise:install\n$ rails generate devise User\n$ rake  db:migrate\n</code></pre>\n\n<p>This will set up the default <code>controllers</code>, <code>routes</code> and <code>warden strategies</code> for Devise; it will add itself to your <code>Model</code> and <em>should</em> allow you to run your server and get the authentication working.</p>\n\n<p>You'll want to use the <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow\"><code>devise helpers</code></a> to manage access to the different parts of your application:</p>\n\n<pre><code>#app/controllers/application_controller.rb\nclass ApplicationController &lt; ActionController::Base\n   before_action :authenticate_user! #-&gt; user has to \"login\" to access app\nend\n</code></pre>\n\n<p>In your views, you can use <code>current_user</code>, <code>user_signed_in?</code> and a bunch of other helpers to provide user-centric functionality:</p>\n\n<pre><code>#app/views/layouts/application.html.erb\n&lt;%= render partial \"nav\" if user_signed_in? %&gt;\n</code></pre>\n\n<p>This is only my recommendation, it won't help you with your own implementation of your authentication. Of course, I'll delete the answer if inappropriate.</p>\n\n<hr>\n\n<p>To fix the problem you have right now, </p>\n\n<blockquote>\n  <p>undefined method `authenticate' </p>\n</blockquote>\n\n<p>This means you don't have an <code>authenticate</code> instance method on your <code>User</code> model. You need the following:</p>\n\n<pre><code>#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   def authenticate\n      # do something\n   end\nend \n</code></pre>\n\n<p>One suspects you're trying to invoke <a href=\"https://github.com/hassox/warden/wiki/Strategies#authenticate\" rel=\"nofollow\">Warden's <code>authenticate!</code> method</a></p>\n\n<p>I don't have huge experience with Warden; you'll want to ensure you're calling the correct methods for it. Because it's rack middleware, all of the <code>warden</code> helpers are available through <code>env[\"warden\"]</code>, so I suspect you'll be using something like:</p>\n\n<pre><code>#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   def authenticate\n     env[\"warden\"].authenticate! ....\n   end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1600, "user_id": 3715103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53104fc50d5c6ba9c2819d5c33631380?s=128&d=identicon&r=PG&f=1", "display_name": "Prasanna Sundar", "link": "https://stackoverflow.com/users/3715103/prasanna-sundar"}, "is_accepted": true, "score": 2, "last_activity_date": 1451477928, "creation_date": 1451477928, "answer_id": 34529427, "question_id": 34526544, "link": "https://stackoverflow.com/questions/34526544/undefined-method-authenticate-in-ruby-on-rails/34529427#34529427", "title": "undefined method \u2018authenticate&#39; in ruby on rails?", "body": "<p>Just add </p>\n\n<pre><code>has_secure_password\n</code></pre>\n\n<p>to your User model. Make sure you add</p>\n\n<pre><code>gem 'bcrypt-ruby'\n</code></pre>\n\n<p>to your gemfile. </p>\n\n<p>add a field called \"password_digest\" with string in your User model. </p>\n\n<p>That's it. Rails will handle User authentication for you like a charm and you will be able to use #authenticate method on your Model as well!</p>\n\n<p>Edit:\nyou can check out this project at github - <a href=\"https://github.com/praserocking/NE0N3W5\" rel=\"nofollow\">Rails Project @ Github</a>\nI have implemented authentication using Rails on this. Checkout user.rb, gemfile and user_controller.rb.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 8735349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25902fe435a8cdc7aadc9cebe4bed198?s=128&d=identicon&r=PG&f=1", "display_name": "manu", "link": "https://stackoverflow.com/users/8735349/manu"}, "is_accepted": false, "score": 2, "last_activity_date": 1522172620, "last_edit_date": 1522172620, "creation_date": 1522161685, "answer_id": 49515899, "question_id": 34526544, "link": "https://stackoverflow.com/questions/34526544/undefined-method-authenticate-in-ruby-on-rails/49515899#49515899", "title": "undefined method \u2018authenticate&#39; in ruby on rails?", "body": "<p>If you use the devise gem then you should not use the <code>has_secure_password</code> method. You should use the <code>valid_password?</code> method.</p>\n"}], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6790, "favorite_count": 0, "accepted_answer_id": 34529427, "answer_count": 4, "score": 6, "last_activity_date": 1522172620, "creation_date": 1451467431, "last_edit_date": 1517138586, "question_id": 34526544, "link": "https://stackoverflow.com/questions/34526544/undefined-method-authenticate-in-ruby-on-rails", "title": "undefined method \u2018authenticate&#39; in ruby on rails?", "body": "<p>I'm a newbie on Ruby on Rails application, I have already created CRUD but still stacked in <code>Login</code> &amp; <code>Logout</code> functionality. </p>\n\n<p>This is my Sessions_controller:</p>\n\n<pre><code>def new\nend\n\ndef create\n  user = User.find_by(email: params[:session][:email].downcase)\n  if user &amp;&amp; user.authenticate(params[:session][:passkey])\n    # Log the user in and redirect to the user's show page.\n  else\n    # Create an error message.\n  flash[:danger] = 'Invalid email/password combination' # Not quite right!\n    render 'new'\n  end\nend\n\ndef destroy\nend\n</code></pre>\n\n<p>This is my view: <code>new.html.erb</code></p>\n\n<pre><code>&lt;%= form_for(:session, url: login_path) do |f| %&gt;\n\n    &lt;%= f.label :email %&gt;\n    &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n    &lt;%= f.label :passkey%&gt;\n    &lt;%= f.password_field :passkey, class: 'form-control' %&gt;\n\n    &lt;%= f.submit \"Log in\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is my model:</p>\n\n<pre><code>class User&lt; ActiveRecord::Base\n  validates :first_name, :presence =&gt; true, :length =&gt; { :in =&gt; 3..20 }\n  validates :last_name, :presence =&gt; true, :length =&gt; { :in =&gt; 3..20 }\n  validates :email, :presence =&gt; true, :uniqueness =&gt; true, format: { with: /\\A[^@\\s]+@([^@.\\s]+\\.)+[^@.\\s]+\\z/ }\n  validates :passkey, :confirmation =&gt; true, :length =&gt; {:in =&gt; 6..20}\nend\n</code></pre>\n\n<p>When I click Login button then showing this error:</p>\n\n<blockquote>\nNoMethodError in SessionsController#create\nundefined method `authenticate' for <code>#User:0x0000000d5c65e0></code>\n</blockquote>\n\n<p>How can I fix this error? </p>\n\n<p>I'm using <code>ruby 1.9.7</code> <code>Rails 4.2.5</code> &amp; <code>mysql2</code></p>\n\n<p>That would help me a lot, Please.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451466735, "post_id": 34525919, "comment_id": 56793962, "body": "use bunder to generate a new gem structure, and also to conrtole your gem onload.... with for example <code>bundle exec ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7756, "user_id": 476906, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d139cc651ccf479c9db3520398b86f2c?s=128&d=identicon&r=PG", "display_name": "Bert Goethals", "link": "https://stackoverflow.com/users/476906/bert-goethals"}, "is_accepted": true, "score": 1, "last_activity_date": 1451466983, "creation_date": 1451466983, "answer_id": 34526415, "question_id": 34525919, "link": "https://stackoverflow.com/questions/34525919/write-new-gem-for-using-command-line-on-terminal/34526415#34526415", "title": "Write new gem for using command line on terminal", "body": "<p>You might not want to make a gem just yet. what you want - I think - is to make an executable. This does not require a full GEM.</p>\n\n<p>I'll be making 2 assumptions here, you are on a UNIX system, and <code>~/bin</code> is in your PATH.</p>\n\n<p>First make a file with the name of your program (for this example call proga) in your <code>~/bin</code> folder.</p>\n\n<p>Start this file with (only first line matters) </p>\n\n<pre><code>#!/usr/bin/env ruby\n\n# your code here\n# p gets.strip\n</code></pre>\n\n<p>We just want to make it executable: <code>chmod +x ~/bin/proga</code></p>\n\n<p>If you really want to make a command line gem, you can find a good start here: <a href=\"http://robdodson.me/how-to-write-a-command-line-ruby-gem/\" rel=\"nofollow\">http://robdodson.me/how-to-write-a-command-line-ruby-gem/</a> and <a href=\"http://blog.excelwithcode.com/build-commandline-apps.html\" rel=\"nofollow\">http://blog.excelwithcode.com/build-commandline-apps.html</a></p>\n"}], "owner": {"reputation": 51, "user_id": 5443942, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zl6G.jpg?s=128&g=1", "display_name": "Kenyo Kai", "link": "https://stackoverflow.com/users/5443942/kenyo-kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 34526415, "answer_count": 1, "score": -2, "last_activity_date": 1451466983, "creation_date": 1451465009, "question_id": 34525919, "link": "https://stackoverflow.com/questions/34525919/write-new-gem-for-using-command-line-on-terminal", "title": "Write new gem for using command line on terminal", "body": "<p><em>Hi guys.</em>\nI wanna learn how to write a new gem by myself (I'm newbie).\nSo I found some document to do it but it's quite hard for me.\nI want to write a gem. So when I install it, I can use it on terminal, for example:</p>\n\n<blockquote>\n  <p>$ search key_work</p>\n</blockquote>\n\n<p>But all document just said that I have to use:</p>\n\n<blockquote>\n  <p>$ irb -Ilib -rMygem </p>\n</blockquote>\n\n<p>And then I can use it with <code>Mygem.search</code>.But it's not my purpose.\nMy question is \"How I can write a code for key-word that can run on terminal?\"\nThanks for your help :)</p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1451473001, "post_id": 34525893, "comment_id": 56797331, "body": "Your question is unclear. Variables don&#39;t have types in Ruby, so you simply cannot check them. I am not familiar enough with Python to know how Python does it, but in Ruby, it&#39;s simply impossible. The information you want is not there."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1451473493, "post_id": 34525893, "comment_id": 56797556, "body": "There <i>was</i> a research project called <i>Diamondback Ruby (DRuby)</i> adding a type system to Ruby about 6\u20137 years ago, maybe that is what you are looking for? <a href=\"http://cs.umd.edu/projects/PL/druby/\" rel=\"nofollow noreferrer\"><i>Diamondback Ruby (DRuby) is an extension to Ruby that aims to bring the benefits of static typing to Ruby without compromising the expressiveness of the language.</i></a>"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1451480828, "post_id": 34525893, "comment_id": 56801487, "body": "@J&#246;rgWMittag variables don&#39;t have types in Ruby, but the values they are bound to do.  Python is identical to Ruby in this regard."}, {"owner": {"reputation": 696, "user_id": 3323850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYzBr.png?s=128&g=1", "display_name": "alebian", "link": "https://stackoverflow.com/users/3323850/alebian"}, "edited": false, "score": 0, "creation_date": 1451506074, "post_id": 34525893, "comment_id": 56814635, "body": "Try to avoid this, Ruby is an OOP language so classes and objects should know how to respond to messages."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1451465635, "post_id": 34525923, "comment_id": 56793382, "body": "@ndn Please undelete your answer. It is not the same as this."}, {"owner": {"reputation": 35, "user_id": 4879474, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lZiE5bUNGEc/AAAAAAAAAAI/AAAAAAAAADk/lyz6oAE5twA/photo.jpg?sz=128", "display_name": "yveskas", "link": "https://stackoverflow.com/users/4879474/yveskas"}, "edited": false, "score": 0, "creation_date": 1451465732, "post_id": 34525923, "comment_id": 56793452, "body": "Thank you that helps a lot. I have been searching for a solution all day and reading docs."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451465756, "post_id": 34525923, "comment_id": 56793463, "body": "As of now, this answer became correct, but that is due to an edit made six minutes after ndn&#39;s original answer, which had been correct."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 8, "last_activity_date": 1451466223, "last_edit_date": 1495540320, "creation_date": 1451465027, "answer_id": 34525923, "question_id": 34525893, "link": "https://stackoverflow.com/questions/34525893/checking-variable-type-in-ruby/34525923#34525923", "title": "Checking variable type in Ruby", "body": "<p>I think you are looking for <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-class\" rel=\"nofollow noreferrer\"><code>Object#class</code></a>. Here:</p>\n\n<pre><code>element = {}\nelement.class\n# =&gt; Hash\na = []\na.class\n# =&gt; Array\n</code></pre>\n\n<p>This will make your switch case as follows:</p>\n\n<pre><code>case element\nwhen String\n # do something\nwhen Fixnum\n # do something\nwhen Hash\n # do something\nwhen Array\n # do something\nend\n</code></pre>\n\n<p><strong>Note:</strong>\nAs mentioned by @ndn in comments below, <code>case</code> statement should not have <code>.class</code> in it <em>(which I had initially in my answer)</em>. <a href=\"https://stackoverflow.com/a/3801609/3035830\">You can find the explanation here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4879474, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lZiE5bUNGEc/AAAAAAAAAAI/AAAAAAAAADk/lyz6oAE5twA/photo.jpg?sz=128", "display_name": "yveskas", "link": "https://stackoverflow.com/users/4879474/yveskas"}, "edited": false, "score": 0, "creation_date": 1451465805, "post_id": 34526012, "comment_id": 56793498, "body": "Thanks for the heads up. I will make note of it."}], "tags": [], "owner": {"reputation": 955, "user_id": 1356142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b9087a6b8231a32d51cf2df4cb4e16c?s=128&d=identicon&r=PG", "display_name": "jcr", "link": "https://stackoverflow.com/users/1356142/jcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1451465389, "creation_date": 1451465389, "answer_id": 34526012, "question_id": 34525893, "link": "https://stackoverflow.com/questions/34525893/checking-variable-type-in-ruby/34526012#34526012", "title": "Checking variable type in Ruby", "body": "<p>This is not the \"correct answer\", I would simply like to point out that you should not use type in python you should use isinstance instead</p>\n\n<pre><code>isinstance(input, list) # test for list\nisinstance(inpit, [float, int]) # test for number\n</code></pre>\n\n<p>if you are using python 3 you can check for abstract base classes</p>\n\n<pre><code>import collections\nisinstance(input, collections.abs.Sequence) # sequence = tuple, list and a lot of other stuff that behaves that way\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4879474, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lZiE5bUNGEc/AAAAAAAAAAI/AAAAAAAAADk/lyz6oAE5twA/photo.jpg?sz=128", "display_name": "yveskas", "link": "https://stackoverflow.com/users/4879474/yveskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3887, "favorite_count": 1, "accepted_answer_id": 34525923, "answer_count": 2, "score": 2, "last_activity_date": 1451467287, "creation_date": 1451464924, "last_edit_date": 1451465477, "question_id": 34525893, "link": "https://stackoverflow.com/questions/34525893/checking-variable-type-in-ruby", "title": "Checking variable type in Ruby", "body": "<p>I have an issue checking variable types in ruby. Here is a sample code of python that I would like to replicate in ruby. I would like to check the <code>input</code> type: whether string, int, or list, and proceed to a specific printing action.</p>\n\n<pre><code>def printing (input):\n    if type(input) == type(\"\"):\n        pass\n    elif type(input) == type(1):\n        pass\n    elif type(input) == type([]):\n        pass\n    elif type(input) == type({}):\n        pass\n    elif type(input) == type(()):\n        pass\n</code></pre>\n\n<p>I cannot find a method that will do this in ruby. The code below is what I want it to look like. I am assuming that I have to check the type at the case stage.</p>\n\n<pre><code>def printing (element)\n    case element\n    when element.type(\"\")\n        puts element\n    when element.type(2)\n        puts element\n    when element.type({})\n        element.each_pair { |name, val|  print \"#{name} : #{value}\"}\n    when element.type([])\n        element.each {|x| print x}\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model"], "answers": [{"comments": [{"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 1, "creation_date": 1451463997, "post_id": 34525658, "comment_id": 56792591, "body": "Easy enough. Thanks for the quick response. @Nermin"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 4, "last_activity_date": 1451463929, "creation_date": 1451463929, "answer_id": 34525658, "question_id": 34525635, "link": "https://stackoverflow.com/questions/34525635/rails-4-where-attribute-is-blank/34525658#34525658", "title": "Rails 4 - Where Attribute is Blank", "body": "<pre><code>Article.where(short_answer: \"\")\n</code></pre>\n\n<p>Would do the trick</p>\n"}], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 34525658, "answer_count": 1, "score": 2, "last_activity_date": 1451463929, "creation_date": 1451463858, "question_id": 34525635, "link": "https://stackoverflow.com/questions/34525635/rails-4-where-attribute-is-blank", "title": "Rails 4 - Where Attribute is Blank", "body": "<p>I have an <code>Article</code> model with a <code>short_answer</code> text column. </p>\n\n<p>What is the best way to find all articles where the short_answer is blank?</p>\n\n<p>I thought something like this would work:</p>\n\n<pre><code>Article.where(short_answer: nil)\n</code></pre>\n\n<p>But the short answer is not nil. It is just blank. Any help is much appreciated.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1451463367, "post_id": 34525364, "comment_id": 56792314, "body": "For CSV to eat your line, it should be this: <code>12345:1:&quot;My &quot;&quot;Problematic&quot;&quot; Name&quot;:Last Name</code>. If your file is not too big, you can do it manually."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 1, "last_activity_date": 1451465277, "creation_date": 1451465277, "answer_id": 34525984, "question_id": 34525364, "link": "https://stackoverflow.com/questions/34525364/double-quotations-in-imported-csv/34525984#34525984", "title": "Double quotations in imported CSV", "body": "<p>You can set the options to specify <code>col_sep</code> as your file uses colon(<code>:</code>) as separator, and <code>quote_char</code> to single quote just to get around double quote issue.</p>\n\n<pre><code>CSV.foreach(\"/path/to/file\", {quote_char: \"'\", col_sep: \":\"}) do |row|\n  p row\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\"ACCOUNT\", \"STATUS\", \"FIRST_NAME\", \"LAST_NAME\"]\n[\"12345\", \"1\", \"My \\\"Problematic\\\" Name\", \"Last Name\"]\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 5329065, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4f61fc3b37c62fb837ef45b2e8f4e0b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tians", "link": "https://stackoverflow.com/users/5329065/tians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 34525984, "answer_count": 1, "score": 1, "last_activity_date": 1451465277, "creation_date": 1451462444, "question_id": 34525364, "link": "https://stackoverflow.com/questions/34525364/double-quotations-in-imported-csv", "title": "Double quotations in imported CSV", "body": "<p>I have a CSV like this for example:</p>\n\n<pre><code>ACCOUNT:STATUS:FIRST_NAME:LAST_NAME\n12345:1:My \"Problematic\" Name:Last Name\n</code></pre>\n\n<p>If I use CSV.foreach I get message:\nIllegal quoting in line 2</p>\n\n<p>How can I handle this correctly and still preserve quotation marks in the string that I read?</p>\n\n<p>My current code:</p>\n\n<pre><code>CSV.foreach(\"accounts_data.csv\", { :col_sep =&gt; ':', headers: true } ) do |account|\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "web-applications", "routes", "nested-routes"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 1, "creation_date": 1451469702, "post_id": 34525319, "comment_id": 56795612, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4269884/rails-using-link-to-with-namespaced-routes\">rails using link_to with namespaced routes</a>"}, {"owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "edited": false, "score": 1, "creation_date": 1451476776, "post_id": 34525319, "comment_id": 56799271, "body": "you can see commands for your routes with <code>rake routes</code> command. Then you can use that + path in your <code>link_to</code> tags (possibly <code>application_reset_search_path</code> in your case)"}], "owner": {"reputation": 447, "user_id": 1234493, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/14f226b69f045058db0cbcde53b9d5d6?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1234493/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452180051, "creation_date": 1451462253, "last_edit_date": 1452180051, "question_id": 34525319, "link": "https://stackoverflow.com/questions/34525319/better-way-of-getting-back-to-application-controller-under-namespaced-controller", "title": "Better way of Getting Back to Application Controller under Namespaced Controllers under the &quot;link_to&quot; Tag", "body": "<p>I am trying to call an action from a controller 2 steps up the folder structure namespace</p>\n\n<pre><code>&lt;%= link_to( \"Reset Search\" ,\n             {:controller =&gt; \"../../application\",\n              :action =&gt; 'reset_search',\n              :reset_search_redirect =&gt; reset_search_redirect},\n             class: 'tiny button') %&gt;\n</code></pre>\n\n<p>The <code>\"../../application\"</code>works! however; i dont think it's rails-y. Is there a better way? </p>\n\n<p>Here is the href link when I just put <code>:controller =&gt; \"application\"</code></p>\n\n<pre><code>/human_resources/settings/application/reset_search?reset_search_redirect=%2Fhuman_resources%2Fsettings\n</code></pre>\n\n<p>Which does not work.</p>\n\n<p>Here are my routes:</p>\n\n<pre><code>get 'human_resources/' =&gt; 'human_resources#index'\nnamespace :human_resources do\n  get 'settings/' =&gt; 'settings#index'\n  namespace :settings do\n    get 'constants/' =&gt; 'constants#index'\n    resources :constants\n  end\nend\n\nresources :test, only: :index\nroot to: 'home#index'\nmatch ':controller(/:action(/:id))', :via =&gt; [:get, :post]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 4, "creation_date": 1451461097, "post_id": 34525040, "comment_id": 56791430, "body": "Could you give more examples/explanation of how the batch size and fall factor are expected to work?"}, {"owner": {"reputation": 674, "user_id": 455169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df379a261a96a3252bc1b7f9bb89ca2e?s=128&d=identicon&r=PG", "display_name": "Maheshkumar", "link": "https://stackoverflow.com/users/455169/maheshkumar"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1451465020, "post_id": 34525040, "comment_id": 56793065, "body": "@ndn: I hope you can get it now"}, {"owner": {"reputation": 674, "user_id": 455169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df379a261a96a3252bc1b7f9bb89ca2e?s=128&d=identicon&r=PG", "display_name": "Maheshkumar", "link": "https://stackoverflow.com/users/455169/maheshkumar"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1451465085, "post_id": 34525040, "comment_id": 56793091, "body": "@Downvoter, Could you explain?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1451465709, "post_id": 34525040, "comment_id": 56793432, "body": "All built-in methods are available either in <a href=\"http://docs.ruby-lang.org/en/2.0.0/Array.html\" rel=\"nofollow noreferrer\"><code>Array</code> class</a> or <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code> module</a> - you can look up the documentation and ascertain for yourself whether any such method is available."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451466059, "post_id": 34525040, "comment_id": 56793633, "body": "What is the <code>i = 0</code>? That makes no sense."}, {"owner": {"reputation": 674, "user_id": 455169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df379a261a96a3252bc1b7f9bb89ca2e?s=128&d=identicon&r=PG", "display_name": "Maheshkumar", "link": "https://stackoverflow.com/users/455169/maheshkumar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451466323, "post_id": 34525040, "comment_id": 56793764, "body": "@sawa, &#39;i&#39; is an iterator variable, will be incremented in each loop."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451466401, "post_id": 34525040, "comment_id": 56793804, "body": "What is the <code>i = 0</code>? That makes no sense."}, {"owner": {"reputation": 674, "user_id": 455169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df379a261a96a3252bc1b7f9bb89ca2e?s=128&d=identicon&r=PG", "display_name": "Maheshkumar", "link": "https://stackoverflow.com/users/455169/maheshkumar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451466450, "post_id": 34525040, "comment_id": 56793820, "body": "@sawa, see the previous comment."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1451467455, "post_id": 34526304, "comment_id": 56794358, "body": "This is the only correct, and an elegant solution. But perhaps, <code>[start, length]</code> construction is better than <code>[range]</code> here."}], "tags": [], "owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "is_accepted": false, "score": 4, "last_activity_date": 1451564252, "last_edit_date": 1451564252, "creation_date": 1451466564, "answer_id": 34526304, "question_id": 34525040, "link": "https://stackoverflow.com/questions/34525040/ruby-array-to-subarray-with-fall-factor/34526304#34526304", "title": "Ruby array to subarray with fall factor", "body": "<p>For example you can use just <a href=\"http://ruby-doc.org/core-1.9.3/Numeric.html#method-i-step\" rel=\"nofollow\"><code>#step</code></a> method of <code>Numeric</code></p>\n\n<pre><code>0.step(src_arr.size - fall_factor - 1, batch_size - fall_factor).map do |ind|\n   src_arr[ind, batch_size]\nend\n\n# fall_factor = 1\n# =&gt; [[1, 2, 3, 4, 5], [5, 6, 7, 8, 9], [9, 10, 11, 12, 13], [13, 14]] \n# fall_factor = 2\n# =&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8], [7, 8, 9, 10, 11], [10, 11, 12, 13, 14]] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1451467393, "post_id": 34526395, "comment_id": 56794306, "body": "That is not what the OP wanted."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1451467787, "post_id": 34526395, "comment_id": 56794557, "body": "@sawa Thanks for playing the role of <a href=\"http://i.dailymail.co.uk/i/pix/2014/07/12/article-0-02B0114C0000044D-243_634x428.jpg\" rel=\"nofollow noreferrer\">Referee</a>  :-)"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1451470109, "last_edit_date": 1451470109, "creation_date": 1451466914, "answer_id": 34526395, "question_id": 34525040, "link": "https://stackoverflow.com/questions/34525040/ruby-array-to-subarray-with-fall-factor/34526395#34526395", "title": "Ruby array to subarray with fall factor", "body": "<p>Based on logic shared by you, below is one possible implementation:</p>\n\n<pre><code>b = 5  # batch size\nf = 2  # fall factor\n\nindices = (0...src_arr.size).collect {|i| i * (b-f)}.reject {|i| i + f &gt;= src_arr.size}\n\nresult = indices.each_with_object([]) do |i, obj| \n    obj &lt;&lt; src_arr[i, b]\nend\np result\n#=&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8], [7, 8, 9, 10, 11], [10, 11, 12, 13, 14]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1453963777, "last_edit_date": 1453963777, "creation_date": 1451468493, "answer_id": 34526850, "question_id": 34525040, "link": "https://stackoverflow.com/questions/34525040/ruby-array-to-subarray-with-fall-factor/34526850#34526850", "title": "Ruby array to subarray with fall factor", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def doit(arr, batch_size, fall_factor)\n  arr[batch_size..-1].\n    each_slice(batch_size-fall_factor).\n    each_with_object([arr[0,batch_size]]) { |b,c| c &lt;&lt; [*c.last[-fall_factor..-1], *b] }\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>arr = (1..14).to_a\n  #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14] \n\ndoit(arr, 5, 1)\n  #=&gt; [[1, 2, 3, 4, 5], [5, 6, 7, 8, 9], [9, 10, 11, 12, 13], [13, 14]] \ndoit(arr, 5, 2)\n  #=&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8], [7, 8, 9, 10, 11], [10, 11, 12, 13, 14]]\ndoit(arr, 5, 3)\n  #=&gt; [[1, 2, 3, 4, 5], [3, 4, 5, 6, 7], [5, 6, 7, 8, 9], [7, 8, 9, 10, 11],\n  #    [9, 10, 11, 12, 13], [11, 12, 13, 14]] \ndoit(arr, 5, 4)\n  #=&gt; [[1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8],\n  #    [5, 6, 7, 8, 9], [6, 7, 8, 9, 10], [7, 8, 9, 10, 11], [8, 9, 10, 11, 12],\n  #    [9, 10, 11, 12, 13], [10, 11, 12, 13, 14]] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For <code>arr</code> above and:</p>\n\n<pre><code>batch_size = 5\nfall_factor = 2\n</code></pre>\n\n<p>we have:</p>\n\n<pre><code>a = arr[batch_size..-1]\n  #=&gt; arr[5..-1]\n  #=&gt; [6, 7, 8, 9, 10, 11, 12, 13, 14] \nb = a.each_slice(batch_size-fall_factor)\n  #=&gt; a.each_slice(3) \n  #=&gt; #&lt;Enumerator: [6, 7, 8, 9, 10, 11, 12, 13, 14]:each_slice(3)&gt; \n</code></pre>\n\n<p>We can see the elements of the enumerator <code>b</code> by converting it to an array:</p>\n\n<pre><code>b.to_a\n  #=&gt; [[6, 7, 8], [9, 10, 11], [12, 13, 14]]\n</code></pre>\n\n<p>Continuing:</p>\n\n<pre><code>d = [arr[0,batch_size]]\n  #=&gt; [[1, 2, 3, 4, 5]] \nb.each_with_object(d) { |b,c| c &lt;&lt; [*c.last[-fall_factor..-1], *b] }\n  #=&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8], [7, 8, 9, 10, 11], [10, 11, 12, 13, 14]]\n</code></pre>\n\n<p>To see how the last calculation is performed, let:</p>\n\n<pre><code>e = b.each_with_object(d)\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: [6, 7, 8, 9, 10, 11, 12, 13, 14]:\n  #     each_slice(3)&gt;:each_with_object([[1, 2, 3, 4, 5]])&gt; \ne.to_a\n  #=&gt; [[[6, 7, 8], [[1, 2, 3, 4, 5]]],\n  #    [[9, 10, 11], [[1, 2, 3, 4, 5]]],\n  #    [[12, 13, 14], [[1, 2, 3, 4, 5]]]] \n</code></pre>\n\n<p>We can use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerator.html#method-i-next\" rel=\"nofollow\">Enumerator#next</a> to obtain each element of <code>e</code> that is passed to the block, set the block variables to each of those values and perform the block calculation. The first element is passed to the block:</p>\n\n<pre><code>b, c = e.next\n  #=&gt; [[6, 7, 8], [[1, 2, 3, 4, 5]]] \nb #=&gt; [6, 7, 8] \nc #=&gt; [[1, 2, 3, 4, 5]] \n</code></pre>\n\n<p>The block calculation is therefore:</p>\n\n<pre><code>c &lt;&lt; [*c.last[-fall_factor..-1], *b]\n  #=&gt; c &lt;&lt; [*[[1, 2, 3, 4, 5]].last[-2..-1], *[6, 7, 8]]\n  #   c &lt;&lt; [*[1, 2, 3, 4, 5][-2..-1], *[6, 7, 8]]\n  #   c &lt;&lt; [*[4, 5], *[6, 7, 8]]\n  #   c &lt;&lt; [4, 5, 6, 7, 8]\nc #=&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8]]\n</code></pre>\n\n<p>The next element of <code>e</code> is now passed to the block:</p>\n\n<pre><code>b, c = e.next\n  #=&gt; [[9, 10, 11], [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8]]] \nb #=&gt; [9, 10, 11] \nc #=&gt; [[1, 2, 3, 4, 5], [4, 5, 6, 7, 8]] \n</code></pre>\n\n<p>The remaining calculations are performed similarly. </p>\n"}], "owner": {"reputation": 674, "user_id": 455169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df379a261a96a3252bc1b7f9bb89ca2e?s=128&d=identicon&r=PG", "display_name": "Maheshkumar", "link": "https://stackoverflow.com/users/455169/maheshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1453963777, "creation_date": 1451461005, "last_edit_date": 1451464876, "question_id": 34525040, "link": "https://stackoverflow.com/questions/34525040/ruby-array-to-subarray-with-fall-factor", "title": "Ruby array to subarray with fall factor", "body": "<p>Is there any inbuilt method available to split large array into smaller chunks with dynamic fall factor?</p>\n\n<p>Eg: <code>i=0\nsrc_arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</code></p>\n\n<p>if <code>batch_size = 5</code> and <code>fall_factor = 1</code>, first chunk should be <code>[1, 2, 3, 4, 5]</code> and subsequent array chunks should start from <code>start_index = i * (batch_size - fall_factor)</code>. ie, <code>start_index</code> will be <code>0, 4, 8, 12</code>, and</p>\n\n<pre><code>result: [1, 2, 3, 4, 5]\n[5, 6, 7, 8, 9]\n[9, 10, 11, 12, 13]\n[13, 14]\n</code></pre>\n\n<p>if <code>fall_factor = 2</code> result should be as below</p>\n\n<pre><code>[1, 2, 3, 4, 5]\n[4, 5, 6, 7, 8]\n[7, 8, 9, 10, 11]\n[10, 11, 12, 13, 14]\n</code></pre>\n\n<p>I know how to SOLVE this. My question is if any inbuilt method available like <code>each_slice</code> to get this done instead of reinventing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hive", "rbhive"], "owner": {"reputation": 97, "user_id": 1053303, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/daaad1f30f42a36e543c74ec925c0989?s=128&d=identicon&r=PG", "display_name": "Dheena", "link": "https://stackoverflow.com/users/1053303/dheena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451460802, "creation_date": 1451460802, "question_id": 34524989, "link": "https://stackoverflow.com/questions/34524989/hive-with-rubyror-integration-not-working", "title": "Hive with Ruby(ROR) Integration not working", "body": "<p>I have installed Hive, Hadoop\nAdded gem in Gemfile,</p>\n\n<pre><code>gem \"rbhive\"\n</code></pre>\n\n<p>started hive using,</p>\n\n<pre><code>hive -service hwi\n</code></pre>\n\n<p>But it throws exception, whenever i am executing it,</p>\n\n<pre><code>RBHive.tcli_connect(\"localhost\", 9998, {:hive_version =&gt; :cdh5, :transport =&gt; :sasl, :sasl_params =&gt; {} }) do |connection|\n connection.fetch('SHOW TABLES')\nend\n</code></pre>\n\n<p>Error, </p>\n\n<pre><code>Initializing transport sasl\nConnecting to HiveServer2 localhost on port 9998\nThrift::TransportException: Broken pipe\n    from /home/dheena/.rvm/gems/ruby-2.2.2/gems/thrift-0.9.3.0/lib/thrift/transport/socket.rb:90:in `rescue in write'\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "search", "web-applications", "routes"], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1451459805, "creation_date": 1451459805, "answer_id": 34524758, "question_id": 34524734, "link": "https://stackoverflow.com/questions/34524734/redirecting-to-same-form-for-search-results-makes-error/34524758#34524758", "title": "Redirecting to Same Form for Search Results makes Error", "body": "<blockquote>\n  <p>No route matches [POST] \"/human_resources/settings/constants\"</p>\n</blockquote>\n\n<p><code>method: \":GET\"</code> is wrong. The below code should work</p>\n\n<pre><code>&lt;%= form_tag(request.original_url, method: :get) do %&gt;\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 1234493, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/14f226b69f045058db0cbcde53b9d5d6?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1234493/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 34524758, "answer_count": 1, "score": 0, "last_activity_date": 1451459805, "creation_date": 1451459673, "question_id": 34524734, "link": "https://stackoverflow.com/questions/34524734/redirecting-to-same-form-for-search-results-makes-error", "title": "Redirecting to Same Form for Search Results makes Error", "body": "<p>I am trying to simply redirect the result to the same action of the controller using the \"form tag\"</p>\n\n<pre><code>&lt;%= form_tag(request.original_url, method: \":GET\") do %&gt;\n</code></pre>\n\n<p>This is my current rake routes:</p>\n\n<pre><code>                            Prefix Verb     URI Pattern                                   Controller#Action\n                   human_resources GET      /human_resources(.:format)                    human_resources#index\n          human_resources_settings GET      /human_resources/settings(.:format)           human_resources/settings#index\nhuman_resources_settings_constants GET      /human_resources/settings/constants(.:format) human_resources/settings/constants#index\n                        test_index GET      /test(.:format)                               test#index\n                              root GET      /                                             home#index\n</code></pre>\n\n<p>I am getting</p>\n\n<pre><code>No route matches [POST] \"/human_resources/settings/constants\"\n</code></pre>\n\n<p>I am simply trying to redirect to back settings/constants. the route clearly matches <code>\"/human_resources/settings/constants(.:format)\"</code>; The purpose of the redirect is beca has search results. What am I doing wrong?</p>\n"}, {"tags": ["ruby", "linux", "nginx", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 1990, "user_id": 2402971, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/58f832c3d3522e39d5c468e1114a33a1?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/2402971/cody"}, "edited": false, "score": 0, "creation_date": 1451468991, "post_id": 34525025, "comment_id": 56795215, "body": "still fails to restart"}, {"owner": {"reputation": 127, "user_id": 4823217, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PiRTGIzwWeU/AAAAAAAAAAI/AAAAAAAAA-U/u1x2NiOe5n8/photo.jpg?sz=128", "display_name": "Efesto", "link": "https://stackoverflow.com/users/4823217/efesto"}, "reply_to_user": {"reputation": 1990, "user_id": 2402971, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/58f832c3d3522e39d5c468e1114a33a1?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/2402971/cody"}, "edited": false, "score": 0, "creation_date": 1451472580, "post_id": 34525025, "comment_id": 56797128, "body": "What&#39;s the output of nginx restart? Have you checked the /var/log/nginx/error.log?"}], "tags": [], "owner": {"reputation": 127, "user_id": 4823217, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PiRTGIzwWeU/AAAAAAAAAAI/AAAAAAAAA-U/u1x2NiOe5n8/photo.jpg?sz=128", "display_name": "Efesto", "link": "https://stackoverflow.com/users/4823217/efesto"}, "is_accepted": false, "score": 1, "last_activity_date": 1451460964, "creation_date": 1451460964, "answer_id": 34525025, "question_id": 34524698, "link": "https://stackoverflow.com/questions/34524698/whats-wrong-in-nginx-configuration/34525025#34525025", "title": "What&#39;s wrong in nginx configuration?", "body": "<p>The \"listen 45.55.213.107:80\" line looks strange to me:</p>\n\n<p>Try with</p>\n\n<pre><code>server {\n    #listen 80 default_server;\n    #listen [::]:80 default_server ipv6only=on;\n    listen 80;\n    server_name 45.55.213.107;\n</code></pre>\n\n<p><a href=\"http://nginx.org/en/docs/http/server_names.html\" rel=\"nofollow\">http://nginx.org/en/docs/http/server_names.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1990, "user_id": 2402971, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/58f832c3d3522e39d5c468e1114a33a1?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/2402971/cody"}, "is_accepted": true, "score": 0, "last_activity_date": 1451471086, "creation_date": 1451471086, "answer_id": 34527600, "question_id": 34524698, "link": "https://stackoverflow.com/questions/34524698/whats-wrong-in-nginx-configuration/34527600#34527600", "title": "What&#39;s wrong in nginx configuration?", "body": "<p>The problem is in the root directive. I moved my site from <code>/home/blog</code> to <code>/usr/share/nginx/html3</code>, then restart the server.</p>\n\n<p><strong><code>html3</code></strong> directory contains all the contents of the jekyll site</p>\n\n<p><strong><code>root</code></strong> directive should point to <strong><code>_site</code></strong> directory inside <strong><code>html3</code></strong></p>\n\n<pre><code>root /usr/share/nginx/html3/_site\n</code></pre>\n"}], "owner": {"reputation": 1990, "user_id": 2402971, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/58f832c3d3522e39d5c468e1114a33a1?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/2402971/cody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 34527600, "answer_count": 2, "score": 0, "last_activity_date": 1451471086, "creation_date": 1451459504, "last_edit_date": 1451459850, "question_id": 34524698, "link": "https://stackoverflow.com/questions/34524698/whats-wrong-in-nginx-configuration", "title": "What&#39;s wrong in nginx configuration?", "body": "<p>I am trying to host a jekyll site in digital ocean using nginx server. But after modifying <code>/etc/nginx/sites-available/default</code> file nginx is unable to restart.</p>\n\n<p>Here is the location of jekyll site: <code>/home/blog/_site</code></p>\n\n<p>Location here is dump of default file <a href=\"http://pastebin.com/VxFGx3Sf\" rel=\"nofollow\">http://pastebin.com/VxFGx3Sf</a></p>\n\n<p>What's am i doing wrong ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1451459488, "post_id": 34524316, "comment_id": 56790768, "body": "<code>user_type = parent.class.base_class.name</code> just creates a local variable, <code>self.user_type = parent.class.base_class.name</code> OTOH calls the <code>user_type=</code> method."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1451459631, "post_id": 34524316, "comment_id": 56790823, "body": "both of the statement has to be called with <code>self.</code>"}], "owner": {"reputation": 550, "user_id": 4463793, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de8b40388abdd390764991faae45f3ca?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/4463793/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1451459562, "answer_count": 0, "score": 0, "last_activity_date": 1451457786, "creation_date": 1451457786, "question_id": 34524316, "link": "https://stackoverflow.com/questions/34524316/creating-one-parameter-for-multiple-db-columns-in-activerecord-rails", "closed_reason": "Duplicate", "title": "Creating one parameter for multiple DB columns in ActiveRecord Rails", "body": "<p>How would you go about linking up two columns with one parameter?</p>\n\n<p>Say I have multiple user classes <code>Foo</code> and <code>Bar</code>.</p>\n\n<p>They each have many <code>Child</code>s. <code>Child</code> belongs to one of the user classes.</p>\n\n<p>I have two DB columns in <code>Child</code>, <code>user_type</code> and <code>user_id</code>. I would like to be able to update <code>Child</code> with its parent user by doing:</p>\n\n<pre><code>Child.first.update(user: Foo.first)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Child.first.update(user: Bar.first)\n</code></pre>\n\n<p>I've tried defining custom methods in the <code>ActiveRecord::Base</code> file of <code>Child</code>, but it only seems to be able to retrieve.</p>\n\n<pre><code>#child.rb\nclass Child &lt; ActiveRecord::Base\n\ndef user\n    if user_type == 'Foo'\n        return Foo.find(user_id)\n    elsif user_type == 'Bar'\n        return Bar.find(user_id)\n    end\nend\n\ndef user=(parent)\n    user_type = parent.class.base_class.name\n    user_id = parent.id\nend\n</code></pre>\n\n<p>Having the above code, <code>Child.first.user</code> works but <code>Child.first.update(user: Foo.first)</code> does not.</p>\n"}, {"tags": ["ruby", "memcached"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1451455352, "post_id": 34523611, "comment_id": 56789167, "body": "which os you are using ?"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1451459883, "post_id": 34523611, "comment_id": 56790913, "body": "When you installed that gem, it would have tried to compile this C extension part. Was that part successful? Try removing the gem, reinstalling and read the output carefully."}, {"owner": {"reputation": 31, "user_id": 454440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abc7b80dfb7e70e07856892edd5edaf?s=128&d=identicon&r=PG", "display_name": "Rekha", "link": "https://stackoverflow.com/users/454440/rekha"}, "edited": false, "score": 0, "creation_date": 1451543289, "post_id": 34523611, "comment_id": 56826088, "body": "Using Ubuntu. I was trying to use the bundle that was already compiled on macOS on a ubuntu machine, which is why this problem. I directly used the bundle from the internet and it is working fine now. Thank you."}], "owner": {"reputation": 31, "user_id": 454440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abc7b80dfb7e70e07856892edd5edaf?s=128&d=identicon&r=PG", "display_name": "Rekha", "link": "https://stackoverflow.com/users/454440/rekha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451455820, "creation_date": 1451454238, "last_edit_date": 1451455820, "question_id": 34523611, "link": "https://stackoverflow.com/questions/34523611/usr-bin-ld-cannot-find-lmemcached-gem", "title": "/usr/bin/ld: cannot find -lmemcached_gem", "body": "<p>While trying to make the memcached gem, i am getting the following error:</p>\n\n<pre><code>*linking shared-object rlibmemcached.so\n/usr/bin/ld: skipping incompatible /ghostcache/nightly_build/components/ruby-memcached/akamai/ruby-memcached/memcached-1.8.0/ext/lib/libmemcached_gem.a when searching for -lmemcached_gem\n/usr/bin/ld: skipping incompatible /ghostcache/nightly_build/components/ruby-memcached/akamai/ruby-memcached/memcached-1.8.0/ext/lib/libmemcached_gem.a when searching for -lmemcached_gem\n/usr/bin/ld: cannot find -lmemcached_gem\ncollect2: ld returned 1 exit status\nmake[2]: *** [rlibmemcached.so] Error 1*\n</code></pre>\n\n<p>Looks like there is some platform issue. The <code>libmemcached_gem</code>.a library does exist in that path. I tried building by passing <code>-m32</code> and <code>-m64</code>, but it fails for the same reason.</p>\n\n<p>Any help will be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "google-maps", "activerecord"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1451455697, "post_id": 34523214, "comment_id": 56789306, "body": "could you add more info w.r.t. code"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451462532, "post_id": 34523214, "comment_id": 56791976, "body": "is the fine in your project or outside <code>&#47;***lib&#47;will_paginate&#47;active_record.rb</code>?"}, {"owner": {"reputation": 11, "user_id": 5729322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2153c875951b5fe9f34fd40948bdd57d?s=128&d=identicon&r=PG&f=1", "display_name": "scampetel", "link": "https://stackoverflow.com/users/5729322/scampetel"}, "edited": false, "score": 0, "creation_date": 1451484898, "post_id": 34523214, "comment_id": 56803685, "body": "Hola, Vinay, majlb. Es todo codigo de entrada y salida. El / *** es el reemplazo de mi ruta del proyecto, como por ejemplo / home / user / proyecto. As&#237; que no hay ning&#250;n problema con la ruta. &#161;Gracias!"}], "owner": {"reputation": 11, "user_id": 5729322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2153c875951b5fe9f34fd40948bdd57d?s=128&d=identicon&r=PG&f=1", "display_name": "scampetel", "link": "https://stackoverflow.com/users/5729322/scampetel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451452280, "creation_date": 1451451911, "last_edit_date": 1451452280, "question_id": 34523214, "link": "https://stackoverflow.com/questions/34523214/circular-dependency-error-in-will-paginate-when-try-install-geocode-geolite-data", "title": "Circular dependency error in will_paginate when try install geocode geolite database rails", "body": "<p>I get error in:\n   rails 4.1\n   ruby 2.1\n   will_paginate 3.0\n   activerecord 4.2</p>\n\n<p>Any idea? Thanks!</p>\n\n<pre><code>rake geocoder:maxmind:geolite:load PACKAGE=city\nFile already exists (GeoLiteCity_20151201/GeoLiteCity-Blocks.csv), skipping\nFile already exists (GeoLiteCity_20151201/GeoLiteCity-Location.csv), skipping\nResetting table maxmind_geolite_city_blocks...rake aborted!\nCircular dependency detected while autoloading constant ActiveRecord\n/***lib/will_paginate/active_record.rb:247:in `&lt;module:ActiveRecord&gt;'\n/***lib/will_paginate/active_record.rb:23:in `&lt;module:WillPaginate&gt;'\n/***lib/will_paginate/active_record.rb:11:in `&lt;top (required)&gt;'\n/var/lib/gems/2.1.0/gems/geocoder-1.2.11/lib/maxmind_database.rb:26:in `block in insert'\n/var/lib/gems/2.1.0/gems/geocoder-1.2.11/lib/maxmind_database.rb:24:in `each'\n/var/lib/gems/2.1.0/gems/geocoder-1.2.11/lib/maxmind_database.rb:24:in `insert'\n/var/lib/gems/2.1.0/gems/geocoder-1.2.11/lib/tasks/maxmind.rake:71:in `insert!'\n/var/lib/gems/2.1.0/gems/geocoder-1.2.11/lib/tasks/maxmind.rake:25:in `block (4 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; geocoder:maxmind:geolite:load =&gt; geocoder:maxmind:geolite:insert\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "background-process", "sucker-punch"], "answers": [{"comments": [{"owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "edited": false, "score": 0, "creation_date": 1451488814, "post_id": 34530745, "comment_id": 56805751, "body": "Thanks Andy, great idea, but I think it is not going to work in this scenario I think, or may be I am missing something. Here&#39;s why. When user updates say a map first time, the job gets fired and re-queued because of the time check. In the mean while, user makes another update on the map. This will start another job chain! And both will wait for 10 seconds window to expire, but I still end up running 2 jobs, when I only want to run the last queued job. Am I making sense?"}, {"owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "reply_to_user": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "edited": false, "score": 1, "creation_date": 1451490135, "post_id": 34530745, "comment_id": 56806416, "body": "That&#39;s a good point.  I think the best approach is a state on the model.  This should be stored in the database, likely a new table.  It links the state of each model.  You can use a simple string to make it easy to read.  <code>rails g migration CreateModelStateTable model:string state:string</code>  Your perform method checks to see if the state of Map is &#39;processing&#39; or &#39;queued&#39; and check the <code>modified_at</code> time before beginning work.  That way jobs will drop out if work is being performed, requeue if work is needed, and drop if work is done.<a href=\"https://github.com/pluginaweek/state_machine\" rel=\"nofollow noreferrer\">state_machine</a>"}, {"owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "edited": false, "score": 0, "creation_date": 1451490612, "post_id": 34530745, "comment_id": 56806709, "body": "+1 That definitely sounds like it will work and would be the second piece to your answer. Let me give it a shot. thanks!"}], "tags": [], "owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "is_accepted": true, "score": 1, "last_activity_date": 1451483047, "creation_date": 1451483047, "answer_id": 34530745, "question_id": 34523112, "link": "https://stackoverflow.com/questions/34523112/rails-and-sucker-punch-debounce-x-seconds-before-executing-job-to-control-rate/34530745#34530745", "title": "Rails and sucker_punch: Debounce x seconds before executing job to control rate of execution", "body": "<p>What you are looking for is delayed jobs, implemented through ActiveJob's <code>perform_later</code>.  According to the edge guides, that isn't implemented in <code>sucker_punch</code>.<br>\n<a href=\"http://edgeapi.rubyonrails.org/classes/ActiveJob/QueueAdapters.html#module-ActiveJob::QueueAdapters-label-Backends+Features\" rel=\"nofollow\"><code>ActiveJob::QueueAdapters</code> comparison</a></p>\n\n<p>Fret not, however, because you can implement it yourself pretty simply.  When your job retrieves the job from the queue, first perform some math on the records <code>modified_at</code> timestamp, comparing it to 10 seconds ago.  If the model has been modified, simply add the job to the queue and abort gracefully.</p>\n\n<h2>code!</h2>\n\n<p>As per the example 2/5 of the way down the page, explaining how to add a job within a worker <a href=\"https://github.com/brandonhilkert/sucker_punch\" rel=\"nofollow\">Github sucker punch</a></p>\n\n<pre><code>class StaticMapWorker\n  include SuckerPunch::Job\n  workers 10\n\n  def perform(map,markers)\n    if Map.where(modified_at: 10.seconds.ago..Time.now).count &gt; 0\n      StaticMapWorker.new.async.perform(map,markers)\n    else\n      #perform some expensive job\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 34530745, "answer_count": 1, "score": 1, "last_activity_date": 1459731710, "creation_date": 1451451319, "last_edit_date": 1459731710, "question_id": 34523112, "link": "https://stackoverflow.com/questions/34523112/rails-and-sucker-punch-debounce-x-seconds-before-executing-job-to-control-rate", "title": "Rails and sucker_punch: Debounce x seconds before executing job to control rate of execution", "body": "<p>In my Rails 3.2 project, I am using <a href=\"https://github.com/brandonhilkert/sucker_punch\" rel=\"nofollow\">SuckerPunch</a> to run a expensive background task when a model is created/updated. </p>\n\n<p>Users can do different types of interactions on this model. Most of the times these updates are pretty well <em>spaced out</em>,  however for some other actions like re-ordering, bulk-updates etc, those POST requests can come in very frequently, and that's when it overwhelms the server.</p>\n\n<p>My question is, what would be the most elegant/smart strategy to start the background job when first update happens, but wait for say <em>10 seconds</em> to make sure no more updates are coming in to that Model (Table, not a row) and then execute the job. So effectively throttling without queuing. </p>\n\n<p>My <code>sucker_punch</code> worker looks something like this: </p>\n\n<pre><code>class StaticMapWorker\n    include SuckerPunch::Job\n    workers 10\n\n    def perform(map,markers)\n        #perform some expensive job\n    end\nend\n</code></pre>\n\n<p>It gets called from <code>Marker</code> and 'Map' model and sometimes from controllers (for <code>update_all</code> cases)like so:</p>\n\n<pre><code>after_save :generate_static_map_html\n\ndef generate_static_map_html\n    StaticMapWorker.new.async.perform(self.map, self.map.markers)\nend\n</code></pre>\n\n<p>So, a pretty standard setup for running background job. How do I make the job wait or not schedule until there are no updates for <code>x seconds</code> on my Model (or Table)</p>\n\n<p>If it helps, <strong>Map</strong> <code>has_many</code> <strong>Markers</strong> so triggering the job with logic that when any marker associations of a map update would be alright too. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "include", "angular-ng-if"], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1451454274, "post_id": 34523265, "comment_id": 56788772, "body": "as I can see you are using ternary operator. which syntax is not proper as per ruby syntax. it should be <code>article_has_liked.include?(article.id) ? true_block : false_block</code>"}, {"owner": {"reputation": 418, "user_id": 3218684, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/Fu3ns.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/3218684/shrikant"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1451454594, "post_id": 34523265, "comment_id": 56788895, "body": "error in js file.Please check it out.and added in html file."}, {"owner": {"reputation": 13, "user_id": 5482412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCoi3.jpg?s=128&g=1", "display_name": "Alanyeh", "link": "https://stackoverflow.com/users/5482412/alanyeh"}, "edited": false, "score": 0, "creation_date": 1451456849, "post_id": 34523265, "comment_id": 56789767, "body": "this method can get rid of the syntax error, but when <b>article_has_liked.include?(article.id)</b> is true, the button still doesn&#39;t show up, and I&#39;m not sure where the problem is."}], "tags": [], "owner": {"reputation": 418, "user_id": 3218684, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/Fu3ns.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/3218684/shrikant"}, "is_accepted": false, "score": 0, "last_activity_date": 1451452210, "creation_date": 1451452210, "answer_id": 34523265, "question_id": 34522979, "link": "https://stackoverflow.com/questions/34522979/how-can-i-make-a-conditional-statement-like-include-method-in-ruby-on-angular/34523265#34523265", "title": "How can I make a conditional statement like &quot;include?&quot; method in Ruby on Angular ng-if", "body": "<pre><code>ng-if=\"article_has_liked.include?(article.id)\"\n</code></pre>\n\n<p>update to this one:</p>\n\n<pre><code>ng-if=\"article_has_liked.include?(article.id):false value here\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 418, "user_id": 3218684, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/Fu3ns.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/3218684/shrikant"}, "edited": false, "score": 0, "creation_date": 1451454142, "post_id": 34523577, "comment_id": 56788735, "body": "Please check the error once again.It is not related to empty Error its syntax error."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 418, "user_id": 3218684, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/Fu3ns.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/3218684/shrikant"}, "edited": false, "score": 0, "creation_date": 1451454337, "post_id": 34523577, "comment_id": 56788797, "body": "@Shrikant : I just given the option to achieve his requirement JS way."}, {"owner": {"reputation": 418, "user_id": 3218684, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/Fu3ns.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/3218684/shrikant"}, "edited": false, "score": 0, "creation_date": 1451454682, "post_id": 34523577, "comment_id": 56788924, "body": "Fine,its little bit covered."}, {"owner": {"reputation": 13, "user_id": 5482412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCoi3.jpg?s=128&g=1", "display_name": "Alanyeh", "link": "https://stackoverflow.com/users/5482412/alanyeh"}, "edited": false, "score": 0, "creation_date": 1451462298, "post_id": 34523577, "comment_id": 56791898, "body": "Thanks for responding. But I&#39;m new to JS, so not sure how to implement it correctly."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 13, "user_id": 5482412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCoi3.jpg?s=128&g=1", "display_name": "Alanyeh", "link": "https://stackoverflow.com/users/5482412/alanyeh"}, "edited": false, "score": 0, "creation_date": 1451466170, "post_id": 34523577, "comment_id": 56793694, "body": "@Alanyeh : You can use as I have shown. I have update my answer for both cases <code>include</code> and <code>exclude</code>"}, {"owner": {"reputation": 13, "user_id": 5482412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCoi3.jpg?s=128&g=1", "display_name": "Alanyeh", "link": "https://stackoverflow.com/users/5482412/alanyeh"}, "edited": false, "score": 0, "creation_date": 1451526987, "post_id": 34523577, "comment_id": 56822146, "body": "I&#39;ve tried the method, but it still can&#39;t work. I think maybe I should carry on the judgement in angular-ctrl, but thank you for your kind help anyway !"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 0, "last_activity_date": 1451466355, "last_edit_date": 1451466355, "creation_date": 1451453964, "answer_id": 34523577, "question_id": 34522979, "link": "https://stackoverflow.com/questions/34522979/how-can-i-make-a-conditional-statement-like-include-method-in-ruby-on-angular/34523577#34523577", "title": "How can I make a conditional statement like &quot;include?&quot; method in Ruby on Angular ng-if", "body": "<p>That is a JavaScript relating question, not AngularJS. But may that answer your question:</p>\n\n<p>Often you will need to check whether an array contains a certain item. You can do this by using the <a href=\"http://www.w3schools.com/jsref/jsref_indexof_array.asp\" rel=\"nofollow\"><code>indexOf()</code></a> method. If the code does not find the item in the list, it returns a <code>-1</code>. </p>\n\n<pre><code>var article_has_liked = [24,45,55];\nif(article_has_liked.indexOf(99) == -1){\n alert(\"data not found\");\n}\n</code></pre>\n\n<p>Not sure but you can try something:</p>\n\n<pre><code>&lt;div ng-if=\"article_has_liked.indexOf(article.id) != -1\"&gt; \n</code></pre>\n\n<p><strong>Note:</strong> This above condition is to check for include. If it include your article.id in article_has_liked then only execute that block. If you want to check <code>exclude</code> then you can simply use <code>==</code> instead <code>!=</code> I hope it works for you.</p>\n"}], "owner": {"reputation": 13, "user_id": 5482412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCoi3.jpg?s=128&g=1", "display_name": "Alanyeh", "link": "https://stackoverflow.com/users/5482412/alanyeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 34523577, "answer_count": 2, "score": 1, "last_activity_date": 1451466355, "creation_date": 1451450394, "question_id": 34522979, "link": "https://stackoverflow.com/questions/34522979/how-can-i-make-a-conditional-statement-like-include-method-in-ruby-on-angular", "title": "How can I make a conditional statement like &quot;include?&quot; method in Ruby on Angular ng-if", "body": "<p>Sorry about the difficulty for me to make the title much clearer. I'll explain as much as I can.</p>\n\n<p>I use Rails as the backend (API), and AngularJS as the frontend.</p>\n\n<p>I got several article_ids that have been liked(thumb up) from articleCtrl, named $scope.article_has_liked (it's an array contains several article_ids, like [24,45,55] ), just like below, :</p>\n\n<p><strong>articleCtrl.js.coffee</strong></p>\n\n<pre><code>$http.get(url).success((data)-&gt;\nconsole.log(data)\n$scope.articles = data.articles\n$scope.topic = data.topic\n$scope.article_has_liked = data.article_has_liked\n)\n</code></pre>\n\n<p>And I pass these article_ids ($scope.article_has_liked) to the show.html, in order to use \"ng-if\" to conduct a judgement, just like below:</p>\n\n<p><strong>Show.html</strong></p>\n\n<pre><code>&lt;div ng-if=\"article_has_liked.include?(article.id)\"&gt;\n    &lt;button class=\"btn btn-link\" ng-click=\"likeItOrNot(article.id, topic.id)\"&gt;\n    &lt;span class=\"glyphicon glyphicon-star\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n&lt;/div&gt;\n&lt;div ng-if=\"article_has_liked.exclude?(article.id)\"&gt;\n    &lt;button class=\"btn btn-link\" ng-click=\"likeItOrNot(article.id, topic.id)\"&gt;\n    &lt;span class=\"glyphicon glyphicon-star-empty\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here comes the problem ! </p>\n\n<p>I'd like to use <em>.include?</em> method in Ruby to determine if the <em>article.id</em> is included by the <strong><em>article_ids that have been liked</em></strong>. If it is liked, I'll give it a solid star. But I found that the Angular seems not to accept the usage, and it returned the error just like below:</p>\n\n<pre><code>Error: Syntax Error: Token 'undefined' expected : at column NaN of the expression [article_has_liked.include?(article.id)] starting at [article_has_liked.include?(article.id)].\nthrowError@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6672:1\nternary@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6827:9\n_assignment@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6800:16\nexpression@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6796:12\n_filterChain@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6762:16\nstatements@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6742:25\nparser@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:6661:13\n$ParseProvider/this.$get&lt;/&lt;@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:7282:1\ncompileToFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:9215:16\n$RootScopeProvider/this.$get&lt;/Scope.prototype.$watch@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:8547:19\nngIfDirective&lt;/&lt;.compile/&lt;@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:14677:9\nnodeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4960:13\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4539:15\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4554:13\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4554:13\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4554:13\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4554:13\ncompositeLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4554:13\npublicLinkFn@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:4456:30\nngRepeatAction@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:15463:15\n$watchCollectionAction@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:8718:11\n$RootScopeProvider/this.$get&lt;/Scope.prototype.$digest@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:8812:21\n$RootScopeProvider/this.$get&lt;/Scope.prototype.$apply@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:9013:13\ndone@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:10266:34\ncompleteRequest@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:10450:7\ncreateHttpBackend/&lt;/xhr.onreadystatechange@http://localhost:3000/assets/angular.self-cdfe10db265380c82ec938d307fce2720dc9fb9d8cfa21c78928031af124e282.js?body=1:10405:1\n &lt;!-- ngIf: article_has_liked.include?(article.id) --&gt;\n</code></pre>\n\n<p>So I want to ask if there is any conditional statement which has similar meaning to <em>.include?</em> that I can use in AngularJS \"ng-if\", or there is any better way for me to conduct this judgement?</p>\n\n<p>Thanks everyone for helping me this confusing question!</p>\n"}, {"tags": ["ruby", "bash", "api", "raspbian", "slack"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1451449494, "post_id": 34522802, "comment_id": 56787286, "body": "Have you enabled that service file?"}, {"owner": {"reputation": 119, "user_id": 3709361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9599b9ac1a98ea44054ca6c4fc6eb5e9?s=128&d=identicon&r=PG&f=1", "display_name": "dude0faw3", "link": "https://stackoverflow.com/users/3709361/dude0faw3"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1451449970, "post_id": 34522802, "comment_id": 56787412, "body": "@cricket_007 do you mean via the <code>update-rc.d</code> command? I have done that."}, {"owner": {"reputation": 645, "user_id": 3098602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSGnb.jpg?s=128&g=1", "display_name": "tasasaki", "link": "https://stackoverflow.com/users/3098602/tasasaki"}, "edited": false, "score": 1, "creation_date": 1451475616, "post_id": 34522802, "comment_id": 56798666, "body": "What&#39;s happen if the file names (ruby and IPdetermination.rb) on the bash script change to full path names?"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 3709361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9599b9ac1a98ea44054ca6c4fc6eb5e9?s=128&d=identicon&r=PG&f=1", "display_name": "dude0faw3", "link": "https://stackoverflow.com/users/3709361/dude0faw3"}, "edited": false, "score": 0, "creation_date": 1451494758, "post_id": 34531661, "comment_id": 56809013, "body": "There are already symlinks in each of the rc*.d folders for the run levels i set ip_addr to work in. Changing <code>S02ip_addr</code> (what it was) to <code>S100ip_addr</code> also did not work."}], "tags": [], "owner": {"reputation": 807, "user_id": 4435501, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7f53f3e3804d9492c9b856eb5d909aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Bredt", "link": "https://stackoverflow.com/users/4435501/marc-bredt"}, "is_accepted": false, "score": 1, "last_activity_date": 1451486690, "creation_date": 1451486690, "answer_id": 34531661, "question_id": 34522802, "link": "https://stackoverflow.com/questions/34522802/linux-script-not-running-upon-reboot/34531661#34531661", "title": "Linux Script not Running Upon Reboot", "body": "<p>afaik scripts under /etc/init.d/ are not executed upon reboot. there need to be at least symbolic links set in the runlevel directories <code>/etc/rc*.d/</code> prefixed with an <code>S</code> if you want to run a script upon boot when entering the specific runlevel. if prefixed with <code>K</code> it means something like kill so it won't be executed upon boot or gets killed on shutdown. numerical values appended to these main prefix let you define an order in which the scripts are run on boot.</p>\n\n<p>so if you want to run <code>ascript</code> on boot when entering run level two you need to do sth like:</p>\n\n<pre><code>$ ln -s /etc/init.d/ascript /etc/rc2.d/S01ascript\n</code></pre>\n\n<p>this will cause ascript to be run first when entering runlevel 2.\nany update mechanism like <code>update-rc.d</code> or <code>systemctl enable ...</code> will just set such links to make scripts avaiable/called on boot. </p>\n\n<p>hope this helps. regards</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3709361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9599b9ac1a98ea44054ca6c4fc6eb5e9?s=128&d=identicon&r=PG&f=1", "display_name": "dude0faw3", "link": "https://stackoverflow.com/users/3709361/dude0faw3"}, "is_accepted": true, "score": 0, "last_activity_date": 1451708546, "creation_date": 1451708546, "answer_id": 34562573, "question_id": 34522802, "link": "https://stackoverflow.com/questions/34522802/linux-script-not-running-upon-reboot/34562573#34562573", "title": "Linux Script not Running Upon Reboot", "body": "<p>Ok, finally found the problem, thanks to users like @tasasaki. What happened was I added a line within <code>/etc/rc.local</code> that called my bash script with a <strong>full</strong> path name, as well as editing the bash script to have <strong>full</strong> path names. Also, within <code>rc.local</code>, I didn't realize <code>exit 0</code> is only put down once, so I put my code after the <code>exit 0</code>. Moving it up probably helped as well. Should anyone find this, hope it helps!</p>\n"}], "owner": {"reputation": 119, "user_id": 3709361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9599b9ac1a98ea44054ca6c4fc6eb5e9?s=128&d=identicon&r=PG&f=1", "display_name": "dude0faw3", "link": "https://stackoverflow.com/users/3709361/dude0faw3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 34562573, "answer_count": 2, "score": 0, "last_activity_date": 1451708546, "creation_date": 1451448955, "last_edit_date": 1451496163, "question_id": 34522802, "link": "https://stackoverflow.com/questions/34522802/linux-script-not-running-upon-reboot", "title": "Linux Script not Running Upon Reboot", "body": "<p>I know, I know. These posts appear <em>all</em> the dang time. I swear, my machine/code is an exception to what most people are trying to accomplish/what problem(s) they're running into when attempting to set up these seemingly simple scripts. </p>\n\n<p>I have a file named <code>IPdetermination.rb</code> on my Raspberry Pi (running the Raspbian OS) that basically uses the <code>rest-client</code> ruby gem to perform a http POST with JSON. Such is the code:</p>\n\n<pre><code>#sends a message to slack using incoming-webhook that identifies that\n#host machine's name and ip address.\nrequire 'rest-client'\naddress = Socket.ip_address_list.detect {|x| x.ipv4_private?}.ip_address\nname = Socket.gethostname\nif name.include? '.' then name = name.slice(0..name.index('.') - 1) end\npayload = {text: \"*Device:* `#{name}`\\n *IP:* `#{address}`\"}.to_json\nRestClient.post 'https://hooks.slack.com/services/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', payload\n</code></pre>\n\n<p>Note that this <em>does</em> work. So, in fact, does this bash script, which is stored under <code>/etc/init.d</code></p>\n\n<pre><code>#! /bin/bash\n# /etc/init.d/ip_addr\n\n### BEGIN INIT INFO\n# Provides:          ip_addr\n# Required-Start:    $remote_fs $syslog\n# Required-Stop:     $remote_fs $syslog\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: ip address locator\n# Description:       sends hostname's ip address on private slack channel\n### END INIT INFO\nexec ruby ~/Documents/coding/ruby/IPdetermination.rb\nexit 0\n</code></pre>\n\n<p>They both work when manually executed, successfully posting a message on Slack. Note that I have both attached LSB comments to the <code>ip_addr</code> script and configured the file such so that running <code>ls -l</code> returns <code>-rwxr-xr-x   1 root root  413 Dec 30 03:39 ip_addr</code>. Running <code>chkconfig --list</code> correctly displays <code>ip_addr  0:off  1:off  2:on   3:on   4:on   5:on   6:off</code>. </p>\n\n<p><strong>Yet</strong></p>\n\n<p>It doesn't work! Rebooting the system does not seem to run the script. My only theory could be that the POSTing could be faulty upon reboot, yet I cannot determine whether or not this is the source of the problem. What do I do?</p>\n\n<p>Edit: Changing the <code>Required-Start:</code> and <code>Required-Stop:</code> to also include the boot facilities <code>$network</code> and <code>$named</code> did not work either.</p>\n"}, {"tags": ["ruby", "postgresql", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1451451058, "post_id": 34522761, "comment_id": 56787745, "body": "I&#39;m pretty sure <code>reload</code> is your only option."}, {"owner": {"reputation": 231, "user_id": 5673282, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fb5fe22a701e95bc40ffc0f41c3b38d?s=128&d=identicon&r=PG&f=1", "display_name": "builder", "link": "https://stackoverflow.com/users/5673282/builder"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1451531176, "post_id": 34522761, "comment_id": 56822975, "body": "My digging came to the same conclusion--I hoped it was wrong. To avoid the extra <code>reload</code> query, I may just have to move the calculation into an activerecord callback."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1451533058, "post_id": 34522761, "comment_id": 56823366, "body": "That&#39;ll work as long as nothing other than your Rails app will touch the database. You could add a CHECK constraint to make sure the attribute is properly calculated I suppose."}, {"owner": {"reputation": 231, "user_id": 5673282, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fb5fe22a701e95bc40ffc0f41c3b38d?s=128&d=identicon&r=PG&f=1", "display_name": "builder", "link": "https://stackoverflow.com/users/5673282/builder"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1451604074, "post_id": 34522761, "comment_id": 56847300, "body": "Thanks for the reminder. A CHECK constraint is a good idea. Don&#39;t want other clients mess up the consistency."}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 5673282, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fb5fe22a701e95bc40ffc0f41c3b38d?s=128&d=identicon&r=PG&f=1", "display_name": "builder", "link": "https://stackoverflow.com/users/5673282/builder"}, "edited": false, "score": 3, "creation_date": 1455406474, "post_id": 35361871, "comment_id": 58477620, "body": "Can you explain how this answer is relevant to the question?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5913598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cbXr6.jpg?s=128&g=1", "display_name": "Cesar Moreno", "link": "https://stackoverflow.com/users/5913598/cesar-moreno"}, "is_accepted": false, "score": 0, "last_activity_date": 1501156110, "last_edit_date": 1501156110, "creation_date": 1455277730, "answer_id": 35361871, "question_id": 34522761, "link": "https://stackoverflow.com/questions/34522761/rails-4-activerecord-create-and-update-return-value/35361871#35361871", "title": "Rails 4: activerecord create and update return value?", "body": "<p>Work's to me\nIn model.rb:</p>\n\n<pre><code>after_find  :convert_message_to_string;\n\ndef convert_message_to_string\n    hextostr = HTMLEntities.new;\n\n    unless hextostr.nil? or hextostr.blank?\n        msg_str = hextostr.decode(self.mensagem.to_s);\n        self.message = msg_str;\n    end\nend\n</code></pre>\n\n<p><strong>Important:</strong>\nself.<strong>message</strong> is the field name in the database</p>\n"}], "owner": {"reputation": 231, "user_id": 5673282, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fb5fe22a701e95bc40ffc0f41c3b38d?s=128&d=identicon&r=PG&f=1", "display_name": "builder", "link": "https://stackoverflow.com/users/5673282/builder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2035, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1501156110, "creation_date": 1451448566, "question_id": 34522761, "link": "https://stackoverflow.com/questions/34522761/rails-4-activerecord-create-and-update-return-value", "title": "Rails 4: activerecord create and update return value?", "body": "<p>I'm running Rails 4.2.4. One of attributes in a model gets calculated and stored by the database (PostgreSQL 9.3) upon INSERT or UPDATE. I wonder, beside calling \"reload\" method after activerecord create and update, is it possible to get them return the value of calculated attribute automatically? I see create adds RETURNING \"id\" to its SQL statement. How to add RETURNING \"my_calculated_attribute\" as well to the statement?</p>\n\n<p>It will be great not to have that \"reload\" query after each create or update.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "vagrant", "puppet"], "comments": [{"owner": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "edited": false, "score": 0, "creation_date": 1451470527, "post_id": 34522330, "comment_id": 56796108, "body": "What base image are you using? In Debian, there used to be a <code>ruby1.9.3</code> package that could coexist with <code>ruby1.8</code>. I suppose that your version of Ubuntu still has that. Install it instead of the <code>ruby</code> metapackage."}, {"owner": {"reputation": 188, "user_id": 3310328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0rpAr.jpg?s=128&g=1", "display_name": "jvrdom", "link": "https://stackoverflow.com/users/3310328/jvrdom"}, "reply_to_user": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "edited": false, "score": 0, "creation_date": 1451480305, "post_id": 34522330, "comment_id": 56801188, "body": "Ubuntu Precise 12.04. So, the only way is install it without puppet or vagrant?"}], "answers": [{"tags": [], "owner": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "is_accepted": true, "score": 0, "last_activity_date": 1451765820, "creation_date": 1451765820, "answer_id": 34570289, "question_id": 34522330, "link": "https://stackoverflow.com/questions/34522330/ruby-install-puppet-vagrant/34570289#34570289", "title": "Ruby Install Puppet Vagrant", "body": "<p>According to the <a href=\"http://packages.ubuntu.com/search?keywords=ruby&amp;searchon=names&amp;suite=precise&amp;section=all\" rel=\"nofollow\">database</a>, <code>precise</code> had no Ruby <code>1.9</code> packaging whatsoever.</p>\n\n<p>On this platform, you will need to add a repository for some <code>ruby1.9.3</code> or similar packages.</p>\n\n<p>It will likely be much easier to just switch to a base image of a more current OS.</p>\n"}], "owner": {"reputation": 188, "user_id": 3310328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0rpAr.jpg?s=128&g=1", "display_name": "jvrdom", "link": "https://stackoverflow.com/users/3310328/jvrdom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 34570289, "answer_count": 1, "score": 0, "last_activity_date": 1451765820, "creation_date": 1451444381, "question_id": 34522330, "link": "https://stackoverflow.com/questions/34522330/ruby-install-puppet-vagrant", "title": "Ruby Install Puppet Vagrant", "body": "<p>I tried to install ruby on my vagrant machine with puppet, in the puppet file define a ruby class with package ruby:</p>\n\n<pre><code>class ruby {\npackage { \"ruby\":\n    ensure =&gt; '1.9.1'\n}\n</code></pre>\n\n<p>But when run the vagrant machine, get error that the version is not found and installs 1.8.7.</p>\n\n<p>When i run  <code>ralsh package</code> list the version of ruby:</p>\n\n<pre><code>package { 'ruby1.8':\n ensure =&gt; '1.8.7.352-2ubuntu1.6',\n}\n</code></pre>\n\n<p>So, how can upgrade my ruby version? I'm new in this stuff of puppet &amp; vagrant. Is there a way within vagrant or puppet?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "methods", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1451444834, "creation_date": 1451444834, "answer_id": 34522379, "question_id": 34522227, "link": "https://stackoverflow.com/questions/34522227/how-to-overwrite-a-method-dynamically/34522379#34522379", "title": "How to overwrite a method dynamically", "body": "<pre><code>def f\n  Hash.send(:define_method, :[]=) do |x, y|\n    ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 2, "last_activity_date": 1451492346, "creation_date": 1451492346, "answer_id": 34533141, "question_id": 34522227, "link": "https://stackoverflow.com/questions/34522227/how-to-overwrite-a-method-dynamically/34533141#34533141", "title": "How to overwrite a method dynamically", "body": "<p>Here is another way to do it:</p>\n\n<pre><code>def f\n    Hash.class_eval do\n        def []=(k, v)\n          #...\n        end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 7073, "user_id": 978360, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/J7u43.jpg?s=128&g=1", "display_name": "TieDad", "link": "https://stackoverflow.com/users/978360/tiedad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1342, "favorite_count": 0, "accepted_answer_id": 34522379, "answer_count": 2, "score": 4, "last_activity_date": 1451492346, "creation_date": 1451443348, "last_edit_date": 1451447406, "question_id": 34522227, "link": "https://stackoverflow.com/questions/34522227/how-to-overwrite-a-method-dynamically", "title": "How to overwrite a method dynamically", "body": "<p>I want to overwrite method <code>Hash#[]=</code> dynamically by calling a method <code>f</code>. The following code doesn't work because class definition is not allowed inside a method:</p>\n\n<pre><code>def f\n  class Hash\n    def []=(k, v)\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>A workaround is to put <code>class Hash</code> in a separate file, then</p>\n\n<pre><code>def f\n  require 'my_hash.rb'\nend\n</code></pre>\n\n<p>I wonder if there is a way to avoid adding a separate file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 263, "user_id": 1317482, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/67c8af56d3d1b0fb756a18f0be21c943?s=128&d=identicon&r=PG", "display_name": "Berimbolo", "link": "https://stackoverflow.com/users/1317482/berimbolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1452177742, "last_edit_date": 1452177742, "creation_date": 1451448263, "answer_id": 34522737, "question_id": 34522223, "link": "https://stackoverflow.com/questions/34522223/traverse-through-a-certain-month-in-date-with-just-a-given-integer/34522737#34522737", "title": "Traverse through a certain month in Date with just a given integer", "body": "<p>Okay I found it.  It's:</p>\n\n<pre><code> date = Date.today\n date.change(:month =&gt; x)\n</code></pre>\n\n<p>Hope this helps you!</p>\n"}], "owner": {"reputation": 263, "user_id": 1317482, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/67c8af56d3d1b0fb756a18f0be21c943?s=128&d=identicon&r=PG", "display_name": "Berimbolo", "link": "https://stackoverflow.com/users/1317482/berimbolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452177742, "creation_date": 1451443309, "question_id": 34522223, "link": "https://stackoverflow.com/questions/34522223/traverse-through-a-certain-month-in-date-with-just-a-given-integer", "title": "Traverse through a certain month in Date with just a given integer", "body": "<p>Would it be possible to go to a certain month of the year with just a given integer. For example </p>\n\n<pre><code>date = Date.today\n=&gt; Wed, 30 Dec 2015\n</code></pre>\n\n<p>What if I want to go back to a certain month based on that date and I am just given a number let's say 7 which is July in the Date::MONTHNAMES so would it be possible to do something like  </p>\n\n<pre><code>date = Date.today\n=&gt; Wed, 30 Dec 2015\ndate.go_to_month_of(7) # which will bring me back to July 30, 2015\n</code></pre>\n"}, {"tags": ["php", "ruby", "cloud", "tar", "nas"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4459781"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1451449945, "post_id": 34522212, "comment_id": 56787403, "body": "@jrochkind - What&#39;s unlikely? It&#39;s definitely possible, since the Seagate 3rd party app already provides ownCloud as a .rbw file, which you can import into your NAS. If it&#39;s been done, then I need to find the people who can do it. Or are you saying something else is unlikely?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4459781"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1451454365, "post_id": 34522212, "comment_id": 56788809, "body": "Well, so far I&#39;ve figured out that .rbw opens up as an archive. I&#39;m attempting to go through and replace all of the relevant codes and files with the updated v8. If it works, I&#39;ll leave a link to the finished product here - unless someone else comes up with a better answer before that time."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6553103, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6b56de20bb7309bc49cf2f508f1e3a65?s=128&d=identicon&r=PG", "display_name": "Allan MacIsaac", "link": "https://stackoverflow.com/users/6553103/allan-macisaac"}, "is_accepted": false, "score": 2, "last_activity_date": 1467827449, "last_edit_date": 1467827449, "creation_date": 1467744343, "answer_id": 38210509, "question_id": 34522212, "link": "https://stackoverflow.com/questions/34522212/packaging-php-or-tar-into-ruby/38210509#38210509", "title": "Packaging PHP or TAR into Ruby?", "body": "<p>For the Seagate Personal Cloud the RBW files are created within Seagate's Virtual machine.  See <a href=\"https://www.seagate.com/nasos/SDK/0.7/\" rel=\"nofollow\">https://www.seagate.com/nasos/SDK/0.7/</a>  for all kinds of information.  Taking an old rbw file and changing a few files,  will not work easily.</p>\n\n<p>If your Seagate device is like mine where by default the ssh server is turned off and not listed as a service in the the Web menus, you can actually turn it on.  Access your device as <a href=\"http://my.device.com/?appdev=1\" rel=\"nofollow\">http://my.device.com/?appdev=1</a> where the ( my.device.com your device.  It might be 192.168.1.??? if you just have an ip number )  Go to the services menu and disable sftp and then enable ssh.  The root password is what you used for your admin account when you first set-up the device.</p>\n\n<p>P.S.  There is now a rbw file for Owncloud 9.0.2 in the Owncloud forums.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4459781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1467827449, "creation_date": 1451443211, "question_id": 34522212, "link": "https://stackoverflow.com/questions/34522212/packaging-php-or-tar-into-ruby", "title": "Packaging PHP or TAR into Ruby?", "body": "<ol>\n<li>Why I'm asking</li>\n<li>Conditions</li>\n<li>What I'm trying to do</li>\n<li>What I've tried so far</li>\n</ol>\n\n<p><strong>Why I'm asking</strong></p>\n\n<p>The Seagate Personal Cloud (Network Attached Storage) I have can only install .rbw (Ruby on Windows) packages when installing 3rd party applications. Apparently, I can't access the cloud's root folder to just install a .tar from either Ubuntu or Windows (I can only access the drives that are shared), so I need to package into RBW.</p>\n\n<p><strong>Conditions</strong></p>\n\n<p>The Seagate Personal Cloud is hooked up to my router, and my computer accesses it over wi-fi. The NAS uses NAS OS. I have a Windows drive and an Ubuntu drive available to try whatever needs to be done. When I connect to it (over 192.168.2.x), I get a Web User Interface that logs in, and presents me with the NAS's applications/options/etc. There is no terminal available from the WebUI.</p>\n\n<p><strong>What I'm trying to do</strong></p>\n\n<p>ownCloud is available for download as a 3rd party application, from the WebUI's App Manager, or for download from Seagate's website as a .rbw file. However, the packaged .rbw file is v6, but ownCloud is up to v8 now, and ownCloud can't update from my NAS, because it can't get the permissions (and since I can't access the NAS root folders, I can't seem to chmod it's folders to allow anything to write to it).</p>\n\n<p><strong>What I've tried so far</strong></p>\n\n<p>I've tried accessing it from both Win/Ubu drives over the network - only accesses the shared folders.\nAnd with WebDAV - only accesses the shared folders.\nAnd S/FTP both - only shared folders.\nAnd \"SDrive\" (a Windows program that comes with it) - only shared folders.\nAnd I've tried \"Take Ownership\" with Windows, but doesn't do anything.\nAnd just clicking the \"Update\" button from ownCloud - says it doesn't have write access.</p>\n\n<hr>\n\n<p>So finally, I'm trying to find out how to package a .tar (&lt;--mainly) or .php into Ruby (ownCloud can install with a PHP file). Plus, it would be nice to learn how to package .tar's into Ruby, so that I can just do the same thing with multiple other programs, and submit those .rbw's to each program's maintainers, so that they can provide it to others who need that extension for their NAS.</p>\n\n<p>I'm a basic user, so I'm sorry and will clarify if something here didn't make much sense.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1451443488, "post_id": 34521901, "comment_id": 56786021, "body": "What is your actual question? CarrierWave has pretty good <a href=\"https://github.com/carrierwaveuploader/carrierwave#using-amazon-s3\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 101, "user_id": 5578577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46081f328d206704ab40bfe78b0e35d?s=128&d=identicon&r=PG", "display_name": "zekdeluca", "link": "https://stackoverflow.com/users/5578577/zekdeluca"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1451535652, "post_id": 34521901, "comment_id": 56823881, "body": "It is as simple as read, how to configure it for use with smartfile? Can you post a code snippet like the one I&#39;ve shared with the AWS sample that would work with smartfile?"}], "owner": {"reputation": 101, "user_id": 5578577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46081f328d206704ab40bfe78b0e35d?s=128&d=identicon&r=PG", "display_name": "zekdeluca", "link": "https://stackoverflow.com/users/5578577/zekdeluca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451440701, "creation_date": 1451440701, "question_id": 34521901, "link": "https://stackoverflow.com/questions/34521901/how-to-configure-carrierwave-in-order-to-upload-images-to-smartfile", "title": "How to configure CarrierWave in order to upload images to SmartFile?", "body": "<p>I'd like to use SmartFile to upload images for a small Rails web application and need some help with the appropriate configurations to do so by using the CarrierWave gem.</p>\n\n<p>CarrierWave seems to work for many cloud services providers, like AWS S3, Rackspace and Google Storage, but I'm not sure the same goes for SmartFile (by the way, looking to try them out for this small app with CarrierWave as they currently provide free space/usage for developers, but unfortunately have not developed a ruby API). Sample configurations for CarrierWave to be used with S3:</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n        # # Configuration for Amazon S3\n        # :provider              =&gt; 'AWS',\n        # :aws_access_key_id     =&gt; ENV['S3_ACCESS_KEY'],\n        # :aws_secret_access_key =&gt; ENV['S3_SECRET_KEY']\n    }\n    # config.fog_directory     =  ENV['S3_BUCKET']\nend\n</code></pre>\n\n<p>If that is not possible with CarrierWave, a solution through a different mature gem (it seems a SmartFile gem was created years back but was not further developed or kept up to date) or the like would be appreciated, thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "ruby-on-rails-4", "markdown"], "answers": [{"tags": [], "owner": {"reputation": 1976, "user_id": 5109043, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P0r5Dh4pLMU/AAAAAAAAAAI/AAAAAAAAABk/9sH76qd9Kkg/photo.jpg?sz=128", "display_name": "Hoang Phan", "link": "https://stackoverflow.com/users/5109043/hoang-phan"}, "is_accepted": true, "score": 1, "last_activity_date": 1451464097, "creation_date": 1451464097, "answer_id": 34525696, "question_id": 34521897, "link": "https://stackoverflow.com/questions/34521897/rails-bootstrap-markdown-gem-not-working-on-post/34525696#34525696", "title": "Rails-bootstrap-markdown Gem: not working on POST", "body": "<p>I think you are misunderstanding the use of bootstrap markdown here.</p>\n\n<blockquote>\n  <p>Simple Markdown editing tools that works!</p>\n</blockquote>\n\n<p>It is stated as a markdown editing tool, that means it is used to produce markdown output, not html output. </p>\n\n<p>The html tags you saw in preview is just something to simulate the display of value in markdown displayer, not the value itself.</p>\n\n<p>If you want to translate the output(in markdown format) to html, you could consider these gems: <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow\">redcarpet</a> or <a href=\"https://github.com/gettalong/kramdown\" rel=\"nofollow\">kramdown</a></p>\n"}], "owner": {"reputation": 205, "user_id": 5057766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/862950339928/picture?type=large", "display_name": "BB123", "link": "https://stackoverflow.com/users/5057766/bb123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 34525696, "answer_count": 1, "score": 0, "last_activity_date": 1451464097, "creation_date": 1451440648, "last_edit_date": 1451457964, "question_id": 34521897, "link": "https://stackoverflow.com/questions/34521897/rails-bootstrap-markdown-gem-not-working-on-post", "title": "Rails-bootstrap-markdown Gem: not working on POST", "body": "<p>Ok, I'm not sure if I'm the dumb one or if the <a href=\"https://github.com/dannytatom/rails-bootstrap-markdown\" rel=\"nofollow\">Rails-Bootstrap-Markdown Gem</a> just doesn't give enough information on how to correctly use the gem. </p>\n\n<p>The text area shows the markdown buttons and correctly manipulates the text. Also, when I click \"Preview,\" the text displays exactly like I want it (\"bold\", \"italic\", etc). But when I go to POST the text, it does not parse the text to HTML.</p>\n\n<p>I've added `data: { provide: 'markdown' } to my form's text area and here are my JS and CSS.SCSS files:</p>\n\n<p>application.js:</p>\n\n<pre><code>//= require jquery\n//= require jquery.turbolinks\n//= require jquery_ujs\n//= require jquery-ui\n//= require twitter/bootstrap\n//= require bootstrap-datepicker\n//= require cocoon\n//= require local_time\n//= require bootstrap-markdown-bundle\n//= require turbolinks\n//= require_tree . \n</code></pre>\n\n<p>application.css.scss:</p>\n\n<pre><code>*= require jquery-ui\n*= require bootstrap-markdown\n*= require_tree .\n*= require bootstrap-datepicker3\n*= require_self\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "jekyll"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1451450560, "post_id": 34521806, "comment_id": 56787590, "body": "\u201cTo see why this extension failed to compile, please check the mkmf.log which can be found here:\u201d Maybe that file contains some useful info?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1451450781, "post_id": 34521806, "comment_id": 56787658, "body": "Do you have <code>gcc</code> installed (or the <code>build-essential</code> package)?"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1451453815, "post_id": 34521806, "comment_id": 56788615, "body": "@user2909019 are you using  any gemset ?"}, {"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 0, "creation_date": 1451454837, "post_id": 34521806, "comment_id": 56788979, "body": "I don&#39;t believe I am using any gemsets. I&#39;ve only used rvm to install Ruby 2.2.4 and <code>use</code> it."}, {"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1451455065, "post_id": 34521806, "comment_id": 56789048, "body": "@matt, yes, I do have <code>build-essential</code> installed."}], "answers": [{"comments": [{"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 0, "creation_date": 1451449260, "post_id": 34522477, "comment_id": 56787236, "body": "Is there a reason why the current stable version doesn&#39;t work? Why would 2.3.0 be any different?"}, {"owner": {"reputation": 31, "user_id": 4595458, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iOOF_JaNvfo/AAAAAAAAAAI/AAAAAAAAACc/e91I4iWUvoI/photo.jpg?sz=128", "display_name": "Will M.", "link": "https://stackoverflow.com/users/4595458/will-m"}, "reply_to_user": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 0, "creation_date": 1451449343, "post_id": 34522477, "comment_id": 56787254, "body": "The error you are getting says it all  ERROR:  Error installing jekyll:     jekyll requires Ruby version &gt;= 2.0.0.  You need a version of Ruby that is at least 2.0.0 or greater. I always recommend the latest version unless you need a different version for a specific reason."}, {"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 1, "creation_date": 1451450289, "post_id": 34522477, "comment_id": 56787501, "body": "The first part of my post shows that I have <code>2.2.4</code> installed."}], "tags": [], "owner": {"reputation": 31, "user_id": 4595458, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iOOF_JaNvfo/AAAAAAAAAAI/AAAAAAAAACc/e91I4iWUvoI/photo.jpg?sz=128", "display_name": "Will M.", "link": "https://stackoverflow.com/users/4595458/will-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1479801917, "last_edit_date": 1479801917, "creation_date": 1451445691, "answer_id": 34522477, "question_id": 34521806, "link": "https://stackoverflow.com/questions/34521806/installing-jekyll-on-ubuntu-14-04/34522477#34522477", "title": "Installing Jekyll on Ubuntu 14.04", "body": "<p>The error you are getting says it all ERROR: Error installing jekyll: jekyll requires Ruby version >= 2.0.0. You need a version of Ruby that is at least 2.0.0 or greater. I always recommend the latest version unless you need a different version for a specific reason.</p>\n\n<p>So what you need to do is to compile a newer version of ruby. I recommend the latest version 2.3.0. You can download it from <a href=\"https://www.ruby-lang.org/en/downloads/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/download</a>. Compiling isn't as hard as everyone says it is, there is a great write up from <a href=\"https://help.ubuntu.com/community/CompilingEasyHowTo\" rel=\"nofollow noreferrer\">Compiling Easy HowTo</a>. Once you have it compiled you should be able to install jekyll with the gem and get it up and running. If you have any problems or get any errors come back and I will do my best to help you. </p>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 0, "creation_date": 1451455677, "post_id": 34523631, "comment_id": 56789294, "body": "<a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">These</a> were the instructions I followed for <code>rvm</code>. Then I did the same as your steps 4-7. Hasn&#39;t worked."}, {"owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 1, "creation_date": 1451461049, "post_id": 34523631, "comment_id": 56791400, "body": "Wow, yes, that worked. Thank you! Can you explain why 2.2.1 works while 2.2.4 doesn&#39;t?"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "reply_to_user": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "edited": false, "score": 0, "creation_date": 1451468116, "post_id": 34523631, "comment_id": 56794732, "body": "@user2909019: <code>rvm use 2.2.4</code> then <code>gem install jekyll</code> would work for <b>ruby  2.2.4</b> as well."}, {"owner": {"reputation": 5757, "user_id": 2472219, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/N1L0L.jpg?s=128&g=1", "display_name": "Bryce Johnson", "link": "https://stackoverflow.com/users/2472219/bryce-johnson"}, "edited": false, "score": 2, "creation_date": 1456197522, "post_id": 34523631, "comment_id": 58824068, "body": "You&#39;re awesome. Thank you."}, {"owner": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "edited": false, "score": 1, "creation_date": 1495393686, "post_id": 34523631, "comment_id": 75221802, "body": "Awesome answer."}, {"owner": {"reputation": 658, "user_id": 5986651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-qV8iKhugd4Q/AAAAAAAAAAI/AAAAAAAAMWs/7BqpCYEAZXw/photo.jpg?sz=128", "display_name": "agent18", "link": "https://stackoverflow.com/users/5986651/agent18"}, "edited": false, "score": 0, "creation_date": 1519034073, "post_id": 34523631, "comment_id": 84729996, "body": "@VKatz, Works on Ubuntu 16.04. After step 2, I had to do the following before I can use <code>rvm</code>: <code>source &#47;home&#47;username&#47;.rvm&#47;scripts&#47;rvm</code>"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 20, "last_activity_date": 1451457091, "last_edit_date": 1451457091, "creation_date": 1451454327, "answer_id": 34523631, "question_id": 34521806, "link": "https://stackoverflow.com/questions/34521806/installing-jekyll-on-ubuntu-14-04/34523631#34523631", "title": "Installing Jekyll on Ubuntu 14.04", "body": "<blockquote>\n  <p>I did try installing a couple different versions. Would this cause a<br>\n  problem?</p>\n</blockquote>\n\n<p>No </p>\n\n<p>Follow the given step would help.</p>\n\n<p><strong>1:</strong> <code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</code></p>\n\n<p><strong>2:</strong> <code>\\curl -sSL https://get.rvm.io | bash</code>  # install <code>RVM (development version)</code></p>\n\n<p><strong>3:</strong> <code>rvm get head</code> #  Make Sure RVM up to date</p>\n\n<p><strong>4:</strong> <code>rvm install ruby</code> # will install latest version of ruby</p>\n\n<p><strong>5:</strong> <code>rvm list</code> # Listing install rubies will you get versions of ruby which is installed by RVM</p>\n\n<p><strong>6:</strong>  <code>rvm use &lt; ruby-version &gt;</code> # for instances <code>ruby-1.9.3-p125</code></p>\n\n<p><strong>7:</strong> <code>gem install jekyll</code></p>\n\n<p><em>Edit Update</em> As you edited answer in your senerio</p>\n\n<pre><code>trevor~$ rvm list\n\nrvm rubies\n\n   ruby-2.0.0-p643 [ x86_64 ]\n   ruby-2.2.1 [ x86_64 ]\n=* ruby-2.2.4 [ x86_64 ]\n</code></pre>\n\n<hr>\n\n<pre><code>rvm use 2.2.1\ngem install jekyll\n</code></pre>\n\n<p>Would work !!!</p>\n"}], "owner": {"reputation": 723, "user_id": 2909019, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/88172af5320cb2b9d2043e14c473c46d?s=128&d=identicon&r=PG&f=1", "display_name": "user2909019", "link": "https://stackoverflow.com/users/2909019/user2909019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4904, "favorite_count": 6, "accepted_answer_id": 34523631, "answer_count": 2, "score": 8, "last_activity_date": 1480659809, "creation_date": 1451439938, "last_edit_date": 1480659809, "question_id": 34521806, "link": "https://stackoverflow.com/questions/34521806/installing-jekyll-on-ubuntu-14-04", "title": "Installing Jekyll on Ubuntu 14.04", "body": "<p>I've been having some issues installing Jekyll on Ubuntu. Here are some of the versions I have:</p>\n\n<pre><code>trevor~$ ruby -v\nruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]\ntrevor~$ gem -v\n2.5.1\ntrevor~$ rvm -v\nrvm 1.26.11 (latest) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\n</code></pre>\n\n<p>However, when I try to install Jekyll, I get these errors:</p>\n\n<pre><code>trevor~$ gem install jekyll\nBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /home/trevor/.rvm/gems/ruby-2.2.4/gems/ffi-1.9.10/ext/ffi_c\n/home/trevor/.rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20151229-11854-1czjp2r.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/home/trevor/.rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-ffi_c-dir\n    --without-ffi_c-dir\n    --with-ffi_c-include\n    --without-ffi_c-include=${ffi_c-dir}/include\n    --with-ffi_c-lib\n    --without-ffi_c-lib=${ffi_c-dir}/lib\n    --with-libffi-config\n    --without-libffi-config\n    --with-pkg-config\n    --without-pkg-config\n/home/trevor/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /home/trevor/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:541:in `try_link0'\n    from /home/trevor/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:556:in `try_link'\n    from /home/trevor/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:637:in `try_ldflags'\n    from /home/trevor/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:1780:in `pkg_config'\n    from extconf.rb:15:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /home/trevor/.rvm/gems/ruby-2.2.4/extensions/x86_64-linux/2.2.0/ffi-1.9.10/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/trevor/.rvm/gems/ruby-2.2.4/gems/ffi-1.9.10 for inspection.\nResults logged to /home/trevor/.rvm/gems/ruby-2.2.4/extensions/x86_64-linux/2.2.0/ffi-1.9.10/gem_make.out\n</code></pre>\n\n<p>Or if I use sudo:</p>\n\n<pre><code>trevor~$ sudo gem install jekyll\nERROR:  Error installing jekyll:\n    jekyll requires Ruby version &gt;= 2.0.0.\n</code></pre>\n\n<p>I have tried installing multiple versions of ruby-dev as recommended by others with a similar issue, but this hasn't seemed to help either. </p>\n\n<pre><code>trevor~$ sudo apt-get install ruby2.2.4-dev\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nE: Unable to locate package ruby2.2.4-dev\nE: Couldn't find any package by regex 'ruby2.2.4-dev'\n</code></pre>\n\n<p>Same thing happens with <code>ruby2.0.0-dev</code>.\nRunning <code>sudo apt-get install ruby-dev</code> seems to install <code>1.9.3.4</code>. Regardless, I still run into the same issues above.</p>\n\n<p>Any ideas?</p>\n\n<p>EDIT</p>\n\n<p>Here is my rvm list:</p>\n\n<pre><code>trevor~$ rvm list\n\nrvm rubies\n\n   ruby-2.0.0-p643 [ x86_64 ]\n   ruby-2.2.1 [ x86_64 ]\n=* ruby-2.2.4 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>I did try installing a couple different versions. Would this cause a problem?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "session"], "answers": [{"comments": [{"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 1, "creation_date": 1451465807, "post_id": 34526008, "comment_id": 56793500, "body": "Indeed, also <code>Product.where(&#39;id IN (?)&#39;, ids)</code> can be replaced by <code>Product.where(id: ids)</code>"}], "tags": [], "owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "is_accepted": true, "score": 0, "last_activity_date": 1451465972, "last_edit_date": 1451465972, "creation_date": 1451465369, "answer_id": 34526008, "question_id": 34521497, "link": "https://stackoverflow.com/questions/34521497/push-pop-recenlty-viewed-session-data-with-ruby-on-rails/34526008#34526008", "title": "push pop recenlty viewed session data with ruby on rails", "body": "<p>Use array <a href=\"http://ruby-doc.org/core-1.9.3/Array.html#method-i-unshift\" rel=\"nofollow\"><code>#unshift</code></a> method to push into the beginning of an array, and <a href=\"http://ruby-doc.org/core-1.9.3/Array.html#method-i-shift\" rel=\"nofollow\"><code>#shift</code></a> to pop from the beginning of the array.</p>\n\n<p><strong>PS:</strong> According the whole controllers and models code. I don't know why both too comlpex... models method <code>::find..</code> can be simplified to just <code>Product.where('id IN (?)', ids)</code> or to <code>Product.where(id: ids)</code> (thanx to @bbozo) in the newer version of Rails.</p>\n"}], "owner": {"reputation": 45, "user_id": 5103304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f54caf5a90a3c212b56b07a5dcde994?s=128&d=identicon&r=PG&f=1", "display_name": "viktor miti", "link": "https://stackoverflow.com/users/5103304/viktor-miti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 34526008, "answer_count": 1, "score": 0, "last_activity_date": 1451465972, "creation_date": 1451437262, "question_id": 34521497, "link": "https://stackoverflow.com/questions/34521497/push-pop-recenlty-viewed-session-data-with-ruby-on-rails", "title": "push pop recenlty viewed session data with ruby on rails", "body": "<p>The following code it taken from a spree_recently_viewed gem </p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>after_action :recently_viewed, only: :show\n\ndef recently_viewed\n  id = @product.id\n  rvp = (session['recently_viewed_products'] || '').split(', ')\n  rvp.delete(id)\n  rvp &lt;&lt; id unless rvp.include?(id.to_s)\n  rvp_max_count = 5\n  rvp.delete_at(0) if rvp.size &gt; rvp_max_count.to_i\n  session['recently_viewed_products'] = rvp.join(', ')\nend\n</code></pre>\n\n<p><strong>Helper</strong></p>\n\n<pre><code>module ProductsHelper\n  def cached_recently_viewed_products_ids\n   (session['recently_viewed_products'] || '').split(', ')\n  end\n\n  def cached_recently_viewed_products\n    Product.find_by_array_of_ids(cached_recently_viewed_products_ids)\n  end\nend\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n def self.find_by_array_of_ids(ids)\n   products = Product.where('id IN (?)', ids)\n   ids.map { |id| products.detect { |product| product.id == id.to_i }    }.compact\n end\nend\n</code></pre>\n\n<p>looking at this line in the controller</p>\n\n<pre><code>rvp.delete_at(0) if rvp.size &gt; rvp_max_count.to_i\n</code></pre>\n\n<p>it is only replacing the value at index 0. Is there a way I can add push pop style so that when a new record is added value at 0 for example moves to 1 and 1 to 2 and so on and the last one gets poped out. and if already exist moves to index 0.</p>\n"}, {"tags": ["ruby", "algorithm", "primes", "sieve-of-eratosthenes"], "comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 0, "creation_date": 1451436530, "post_id": 34521267, "comment_id": 56784331, "body": "Any product of primes not in your finite list will be incorrectly categorised as prime by your function. For example, 19*19, or 19*23, or 19*29*37."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5301625"}, "edited": false, "score": 5, "creation_date": 1451438065, "post_id": 34521267, "comment_id": 56784693, "body": "You are not following Seive of Erastothenes approach at all."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1451451883, "post_id": 34521267, "comment_id": 56787985, "body": "The answer is that you are not following the algorithm perfectly.  And that it is simply not true that once you&#39;ve weeded out all multiples of the first 8 prime numbers, all other numbers are prime. <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes#Algorithm_and_variants\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1451462412, "post_id": 34521267, "comment_id": 56791927, "body": "@user5301625 : <code>Seive of Erastothenes</code> - is that you mocking the misspelled name, or a spelling checker in festive coma?"}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 1, "creation_date": 1451463106, "post_id": 34521267, "comment_id": 56792210, "body": "Are we being trolled?"}], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 5300863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h3saOFQxsFM/AAAAAAAAAAI/AAAAAAAAAO4/6sb2-A7Nrnc/photo.jpg?sz=128", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5300863/abhishek-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1451436201, "creation_date": 1451436201, "answer_id": 34521372, "question_id": 34521267, "link": "https://stackoverflow.com/questions/34521267/algorithm-what-is-wrong-with-this-sieve-of-erastothenes-solution/34521372#34521372", "title": "Algorithm - What is wrong with this Sieve of Erastothenes solution", "body": "<p>First of all, you have included 9 in the list of primes. 9 is not a prime number.\nTry following approach.</p>\n\n<ul>\n<li>To find all the primes up to a given number. Start with the smallest prime, 2. </li>\n<li>Mark 2 as prime, and strike out all the multiples of 2. </li>\n<li>Next see, which is the smallest number not striked out. It is 3. Print 3 as prime and strike out all the multiples of 3 smaller than n. </li>\n<li><p>Then again select the next smallest number not striked out, and so on</p>\n\n<pre><code>def primeSeive(n)\n    while primes[index]**2 &lt;= primes.last\n        prime = primes[index]\n        primes = primes.select { |x| x == prime || x%prime != 0 }\n        index += 1\nend\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1451437484, "post_id": 34521375, "comment_id": 56784558, "body": "@CoderX I haven&#39;t posted any method, I&#39;ve explained the limitations of his method.  What part of the explanation do you not understand?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5301625"}, "edited": false, "score": 1, "creation_date": 1451437879, "post_id": 34521375, "comment_id": 56784650, "body": "Seive of Erastothenes approach is not limited by &lt;= 17*17. It will just find next smallest number not striked out, and remove all the multiples of that number less than n."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1451438026, "post_id": 34521375, "comment_id": 56784686, "body": "@CoderX His implementation is limited by 17*17.  The biggest numbers he can test for primality are limited by the square of the largest prime he includes in his known set."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5301625"}, "edited": false, "score": 1, "creation_date": 1451438139, "post_id": 34521375, "comment_id": 56784711, "body": "Yes. But he is claiming that he is using Seive of Erastothenes approach. But, he is not. So, he needs to change the approach."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1451439406, "post_id": 34521375, "comment_id": 56784997, "body": "@CoderX If you have a bone to pick about calling it sieve of Eratosthenes, your complaint is not with me.  Regardless, OP&#39;s algorithm will give correct answers about the primality of argument <code>n</code> for a limited range of <code>n</code> (after removing the 9).  His question was why his algorithm was sometimes giving wrong answers, I have explained why."}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": true, "score": 2, "last_activity_date": 1451436211, "creation_date": 1451436211, "answer_id": 34521375, "question_id": 34521267, "link": "https://stackoverflow.com/questions/34521267/algorithm-what-is-wrong-with-this-sieve-of-erastothenes-solution/34521375#34521375", "title": "Algorithm - What is wrong with this Sieve of Erastothenes solution", "body": "<p>To test primality of a given number <code>n</code> you need to check whether it's divisible by any of the primes &lt;= sqrt(<code>n</code>).  Since you have hardwired the primes up to 17 into it, your algorithm will only work for values of <code>n</code> &lt;= 17<sup>2</sup>.</p>\n\n<p>On top of that, you included 9 in your list of \"primes\".  This shouldn't affect your test except for the value 9 itself, since anything divisible by 9 is also divisible by 3, but it's quite naughty.</p>\n"}, {"tags": [], "owner": {"reputation": 2165, "user_id": 3427852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1390962419/picture?type=large", "display_name": "Abu Hanifa", "link": "https://stackoverflow.com/users/3427852/abu-hanifa"}, "is_accepted": false, "score": 1, "last_activity_date": 1451453480, "creation_date": 1451453480, "answer_id": 34523476, "question_id": 34521267, "link": "https://stackoverflow.com/questions/34521267/algorithm-what-is-wrong-with-this-sieve-of-erastothenes-solution/34523476#34523476", "title": "Algorithm - What is wrong with this Sieve of Erastothenes solution", "body": "<p>I'm not very good at ruby but it seems you're not following the algorithm. \nAlso you add 9 as prime number which is not true.</p>\n\n<p>In <strong>sieve algorithm</strong> at first only need <strong>2</strong> as a prime number.</p>\n\n<p><strong>Pseudocode</strong>:</p>\n\n<pre><code>Sieve(n) {\n  a[1] := 0                          \n  for i := 2 to n do a[i] := 1\n  p := 2\n  while p2  &lt;  n do {\n    j := p2\n    while (j  &lt;  n) do {             \n      a[j] := 0\n      j := j+p\n    }\n    repeat p := p+1 until a[p] = 1   \n  }\n  return(a)\n}\n</code></pre>\n\n<p>here <em>A</em> is the array,which's index value indicate the <strong>primeness</strong>.  <strong>0</strong> for <em>not prime</em>, <strong>1</strong> for <em>prime</em>.\nin <strong>while</strong> loop mark prime numbers multiple and last pick next prime number in <strong>repeat</strong> section.</p>\n"}], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 34521375, "answer_count": 3, "score": 0, "last_activity_date": 1451453480, "creation_date": 1451435333, "question_id": 34521267, "link": "https://stackoverflow.com/questions/34521267/algorithm-what-is-wrong-with-this-sieve-of-erastothenes-solution", "title": "Algorithm - What is wrong with this Sieve of Erastothenes solution", "body": "<p>I thought I would create my own implementation of the Sieve algorithm to find prime numbers quicker. Surprisingly, this fails a number of tests.</p>\n\n<p>Here's my algorithm in Ruby for determining if a number is a prime.</p>\n\n<pre><code>def prime?(n)\n  primes = [2,3,5,7,9,11,13,17]\n  primes.include?(n) || primes.none? { |p| n % p == 0 }\nend\n</code></pre>\n\n<p>How the algorithm works is you take the first couple prime numbers, I took the first 8 to be safe. I would then weed out all the multiples of these prime numbers, as there is no way they could be primes.</p>\n\n<p>Therefore all the other numbers must be prime</p>\n\n<p>I'm shocked to find out my tests fail and I overlooked some numbers. How is this possible? I'm following the algorithm perfectly.</p>\n"}, {"tags": ["ruby", "exception", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "is_accepted": false, "score": 12, "last_activity_date": 1451433941, "creation_date": 1451433941, "answer_id": 34521085, "question_id": 34520911, "link": "https://stackoverflow.com/questions/34520911/rspec-not-catching-purposeful-failure/34521085#34521085", "title": "Rspec not catching purposeful failure", "body": "<p>Turns out that changing it from:</p>\n\n<pre><code>expect(WhateverClass.new.run(invalid_input)).to raise_error(ArgumentError)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>expect { WhateverClass.new.run(invalid_input) }.to raise_error(ArgumentError)\n</code></pre>\n\n<p>fixed the issue. Hopefully this helps somebody else.</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 7, "last_activity_date": 1451439573, "creation_date": 1451439573, "answer_id": 34521756, "question_id": 34520911, "link": "https://stackoverflow.com/questions/34520911/rspec-not-catching-purposeful-failure/34521756#34521756", "title": "Rspec not catching purposeful failure", "body": "<p>Switching to the block form of <code>expect</code> is the right thing to do but I think a bit of explanation is worthwhile.</p>\n\n<p>When you say:</p>\n\n<pre><code>expect(WhateverClass.new.run(invalid_input)).to ...\n</code></pre>\n\n<p>you're effectively saying:</p>\n\n<pre><code>x = WhateverClass.new.run(invalid_input)\nexpect(x).to ...\n</code></pre>\n\n<p>so <code>WhateverClass.new.run(invalid_input)</code> will be evaluated while the arguments to <code>expect</code> are being built (i.e. <em>before</em> <code>expect</code> is called). That means that the exception is raised before <code>expect</code> can do anything.</p>\n\n<p>When you say:</p>\n\n<pre><code>expect { WhateverClass.new.run(invalid_input) }.to ...\n</code></pre>\n\n<p>you're giving <code>expect</code> a block (<code>{ WhateverClass.new.run(invalid_input) }</code>) and <code>expect</code> will execute the block after it has set up its exception handling. That means that the exception will be raised while <code>expect</code>'s exception handler is in place so the exception will be trapped and the <code>to</code> method on <code>expect</code>'s return value will be executed.</p>\n"}], "owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451439650, "creation_date": 1451432794, "last_edit_date": 1451439650, "question_id": 34520911, "link": "https://stackoverflow.com/questions/34520911/rspec-not-catching-purposeful-failure", "title": "Rspec not catching purposeful failure", "body": "<p>I'm trying to check that one of my class methods responds to invalid input with an exception, but Rspec isn't having it.</p>\n\n<p>My class file:</p>\n\n<pre><code>class WhateverClass\n  def run(options)\n    if options['input'].nil? || options['input'].empty?\n      fail ArgumentError, 'No input object provided in configuration.'\n    end\n  end\nend\n</code></pre>\n\n<p>My Rspec test:</p>\n\n<pre><code>RSpec.describe WhateverClass do\n  it 'should raise an ArgumentError when provided invalid input' do\n    invalid_input = { 'nonsense' =&gt; 'here' }\n    expect(WhateverClass.new.run(invalid_input)).to raise_error(ArgumentError)\n  end\nend\n</code></pre>\n\n<p>The result of running the above test is this:</p>\n\n<pre><code>1) WhateverClass should raise an ArgumentError when provided invalid input\n   Failure/Error: expect(WhateverClass.new.run(invalid_input)).to raise_error(ArgumentError)\n   ArgumentError:\n     No input object provided in configuration.\n   # ./whatever_class.rb:9:in `run'\n   # ./spec/whatever_class_spec.rb:14:in `block (2 levels) in &lt;top (required)&gt;'\nFinished in 0.00048 seconds (files took 1.51 seconds to load)\n1 example, 1 failure\n</code></pre>\n\n<p>===================================================</p>\n\n<p>Note that if I do something like this: </p>\n\n<pre><code>RSpec.describe WhateverClass do\n  it 'should raise an ArgumentError when provided invalid input' do\n    expect{ fail ArgumentError }.to raise_error(ArgumentError)\n    invalid_input = { 'nonsense' =&gt; 'here' }\n    expect(WhateverClass.new.run(invalid_input)).to raise_error(ArgumentError)\n  end\nend\n</code></pre>\n\n<p>the first expect passes, but the second expect fails.</p>\n\n<p>How can I get this test to function properly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters", "activeresource"], "comments": [{"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451428843, "post_id": 34520182, "comment_id": 56781885, "body": "Print params from within api/postscontroller, just before post.update_attributes(post_params). I think your redirect might not be passing the parameters on to this method."}, {"owner": {"reputation": 21, "user_id": 5328554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--UShaU58fZ8/AAAAAAAAAAI/AAAAAAAAAEE/z-tjMB6R2iQ/photo.jpg?sz=128", "display_name": "Uros Certic", "link": "https://stackoverflow.com/users/5328554/uros-certic"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451429615, "post_id": 34520182, "comment_id": 56782191, "body": "{&quot;id&quot;=&gt;&quot;7&quot;, &quot;title&quot;=&gt;nil, &quot;content&quot;=&gt;nil, &quot;created_at&quot;=&gt;&quot;2015-12-29T20:23:38.083Z&quot;, &quot;updated_at&quot;=&gt;&quot;2015-12-29T21:18:07.350Z&quot;, &quot;format&quot;=&gt;&quot;json&quot;, &quot;controller&quot;=&gt;&quot;api/posts&quot;, &quot;action&quot;=&gt;&quot;update&quot;}....this comes back for puts params.inspect"}, {"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451430561, "post_id": 34520182, "comment_id": 56782558, "body": "Your <code>params.require(:post).permit(:id, :title, :content)</code> is expecting id, title and content to be nested under an object called &quot;post&quot;, like this: {&quot;post&quot;=&gt;{&quot;id&quot;=&gt;7, &quot;title&quot;=&gt;&quot;asdf&quot;, &quot;content&quot;=&gt;&quot;asdsdfsfs&quot;}, &quot;format&quot;=&gt;&quot;json&quot;, etc... }. Notice in the response you posted, how title and content are nil. Something is wrong with how the parameters are being passed in."}, {"owner": {"reputation": 21, "user_id": 5328554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--UShaU58fZ8/AAAAAAAAAAI/AAAAAAAAAEE/z-tjMB6R2iQ/photo.jpg?sz=128", "display_name": "Uros Certic", "link": "https://stackoverflow.com/users/5328554/uros-certic"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451431017, "post_id": 34520182, "comment_id": 56782731, "body": "yea i understand that...but isn&#39;t application sending &quot;post&quot;=&gt;{&quot;title&quot; =&gt;&quot;basd&quot; , &quot;content&quot; =&gt; &quot;lkasdj&quot;}..as shown in <a href=\"http://i.stack.imgur.com/MG1P2.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/MG1P2.png</a>"}, {"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451431621, "post_id": 34520182, "comment_id": 56782955, "body": "Yeah the parameters look fine in that picture... It might have something to do with application/postcontroller#update calling <code>redirect_to post_path(@post)</code>. Those redirect methods normally take the id, not the whole object."}, {"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451431698, "post_id": 34520182, "comment_id": 56782991, "body": "Out of curiousity, why are you using two separate controllers? It seems like a large duplication of logic. You can just check, at the end of each action, if they requested json or html, and use one controller to do all the work."}, {"owner": {"reputation": 21, "user_id": 5328554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--UShaU58fZ8/AAAAAAAAAAI/AAAAAAAAAEE/z-tjMB6R2iQ/photo.jpg?sz=128", "display_name": "Uros Certic", "link": "https://stackoverflow.com/users/5328554/uros-certic"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451431801, "post_id": 34520182, "comment_id": 56783030, "body": "noup...just tried it with @post.id, same result"}, {"owner": {"reputation": 21, "user_id": 5328554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--UShaU58fZ8/AAAAAAAAAAI/AAAAAAAAAEE/z-tjMB6R2iQ/photo.jpg?sz=128", "display_name": "Uros Certic", "link": "https://stackoverflow.com/users/5328554/uros-certic"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1451432203, "post_id": 34520182, "comment_id": 56783165, "body": "Im learning how to use api-s...and the whole point of this is to have one front-end application and one api that will hold database. I know this example is not done in the best way but i just need to see basics"}], "answers": [{"tags": [], "owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "is_accepted": true, "score": 2, "last_activity_date": 1451432428, "creation_date": 1451432428, "answer_id": 34520853, "question_id": 34520182, "link": "https://stackoverflow.com/questions/34520182/param-is-missing-or-the-value-is-empty-when-trying-to-update-using-active-resour/34520853#34520853", "title": "param is missing or the value is empty when trying to update using active resource", "body": "<p>You have the formats mixed up for your two controllers.</p>\n\n<p>api/postcontroller is expecting non-nested parameters, and application/postcontroller is expecting nested parameters, but you are passing them in the opposite way. So the api version fails, because the <code>require(:post)</code> fails, and the application version fails, because the data you are looking for is in `params[:post][:title], not params[:title].</p>\n\n<p>Try swapping the bodies of the two update methods (with the appropriate modification, you don't want the application serving Json etc).</p>\n"}], "owner": {"reputation": 21, "user_id": 5328554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--UShaU58fZ8/AAAAAAAAAAI/AAAAAAAAAEE/z-tjMB6R2iQ/photo.jpg?sz=128", "display_name": "Uros Certic", "link": "https://stackoverflow.com/users/5328554/uros-certic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 34520853, "answer_count": 1, "score": 1, "last_activity_date": 1451432428, "creation_date": 1451428523, "question_id": 34520182, "link": "https://stackoverflow.com/questions/34520182/param-is-missing-or-the-value-is-empty-when-trying-to-update-using-active-resour", "title": "param is missing or the value is empty when trying to update using active resource", "body": "<p>I'm making one simple rails application with simple forms for crud operations and one rails api that will have models and do all crud operations with data from rails application. In application i'm using ActiveResource. Currently i'm having some problems with update...Everything else works only when i update it breaks and i don't know why, plz help.</p>\n\n<p><strong>api/postcontroler</strong></p>\n\n<pre><code>class API::PostsController &lt; ApplicationController\n  before_action :set_post, only: [:show, :update, :destroy]\n\n  # GET /posts\n  # GET /posts.json\n  def index\n    @posts = Post.all\n\n    render json: @posts\n  end\n\n  # GET /posts/1\n  # GET /posts/1.json\n  def show\n    render json: @post\n  end\n\n  # POST /posts\n  # POST /posts.json\n  def create\n    @post = Post.new(:title =&gt; params[:title], :content =&gt; params[:content])\n\n    if @post.save\n      render json: @post, status: :created, location: @post\n    else\n      render json: @post.errors, status: :unprocessable_entity\n    end\n  end\n\n  # PATCH/PUT /posts/1\n  # PATCH/PUT /posts/1.json\n  def update\n\n    if @post.update_attributes(post_params)\n        render json: @post\n    else\n       render json: @post.errors, status: :unprocessable_entity\n    end\n\n  end\n\n  # DELETE /posts/1\n  # DELETE /posts/1.json\n  def destroy\n    @post.destroy\n\n    head :no_content\n  end\n\n  private\n\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n     def post_params\n      params.require(:post).permit(:title, :id, :content)\n    end\n\nend \n</code></pre>\n\n<p><strong>application/postcontroler</strong></p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n    before_action :set_post, only: [:show, :update, :edit, :destroy]\n\n    def index\n        @posts = Post.all\n    end\n\n    def new\n        @post = Post.new(:title =&gt; \"\", :content =&gt; \"\")\n    end\n\n    def create\n        @post = Post.new(post_params)\n        if @post.save\n            redirect_to post_path(@post)\n        else\n            render \"new\"\n        end\n\n    end\n\n    def show\n\n        @comments = Comment.find(:all, :params =&gt; {:post_id =&gt; params[:id]})\n    end\n\n    def edit\n    end\n\n    def update\n\n        @post.title = params[:title]\n        @post.content = params[:content]\n        if @post.save\n            redirect_to post_path(@post)\n        else\n            render \"edit\"\n        end\n    end\n\n    def destroy\n        @post.destroy\n        redirect_to :action =&gt; 'index'\n    end\n\n    private\n\n    def post_params\n      params.require(\"post\").permit(:title, :content)\n    end\n\n    def set_post\n      @post = Post.find(params[:id])\n    end\nend\n</code></pre>\n\n<p><strong>application/edit.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(@post, :url=&gt;{:action=&gt;'update'}) do |f| %&gt;\n&lt;%= f.label :title %&gt;&lt;br&gt;\n&lt;%= f.text_field :title %&gt;&lt;br&gt;\n&lt;%= f.label :content %&gt;&lt;br&gt;\n&lt;%= f.text_area :content %&gt;&lt;br&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>application routes</strong></p>\n\n<pre><code>resources :posts do\n        resources :comments\n    end\n</code></pre>\n\n<p><strong>api routes</strong></p>\n\n<pre><code>namespace :api, :defaults =&gt; {:format =&gt; :json} do\n    resources :posts, except: [:new, :edit] do\n        resources :comments, except: [:new, :edit]\n    end\n  end\n</code></pre>\n\n<p><strong>application active resource post model</strong></p>\n\n<pre><code>class Post &lt; ActiveResource::Base\n    self.site = \"http://localhost:3001/api\"\nend\n</code></pre>\n\n<p>I start application at port 3000 and api at 3001,when i try to update this happens</p>\n\n<p>on application\n<a href=\"http://i.stack.imgur.com/MG1P2.png\" rel=\"nofollow\">application</a></p>\n\n<p>and this on api\n<a href=\"http://i.stack.imgur.com/O3LX8.png\" rel=\"nofollow\">api</a></p>\n\n<p>What's the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1451428681, "post_id": 34520173, "comment_id": 56781834, "body": "What does your seed.rb file look like? Are you actually using Faker as part of your seed generation? Seems like you&#39;re hardcoding the user <code>example@hotmail.com</code>. Doesn&#39;t seem like something faker would generate"}, {"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1451431366, "post_id": 34520173, "comment_id": 56782861, "body": "@LeoCorrea hi! yes it hardcoding! it looks like this. let me edit"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1451432192, "post_id": 34520173, "comment_id": 56783161, "body": "I&#39;m assuming your data is not being reset or you&#39;re running <code>rake db:seed</code> twice. That&#39;s the reason your seed is failing because you&#39;re attempting to create that hardcoded user twice and validations fail."}, {"owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1451433814, "post_id": 34520173, "comment_id": 56783630, "body": "@LeoCorrea Hola leo! ya esta no se habia reseteado bien la base de datos! no se porque! pero ahora anda! mil gracias! como pongo que me lo solucionaste?"}], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 0, "last_activity_date": 1451437409, "creation_date": 1451437409, "answer_id": 34521509, "question_id": 34520173, "link": "https://stackoverflow.com/questions/34520173/activerecord-validation-failed-running-seeds-on-heroku/34521509#34521509", "title": "ActiveRecord Validation failed running seeds on Heroku", "body": "<p>Ensure the database it's properly being reset. It seems that when running <code>rake db:seed</code> it's doing it against a database with a User already created which causes your validation error. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5729268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtxQ8.jpg?s=128&g=1", "display_name": "Jeremy Almquist", "link": "https://stackoverflow.com/users/5729268/jeremy-almquist"}, "is_accepted": false, "score": 0, "last_activity_date": 1451451021, "creation_date": 1451451021, "answer_id": 34523072, "question_id": 34520173, "link": "https://stackoverflow.com/questions/34520173/activerecord-validation-failed-running-seeds-on-heroku/34523072#34523072", "title": "ActiveRecord Validation failed running seeds on Heroku", "body": "<p>You want to art the deputy to hold to crowd every college you are applying to\u00e2\u20ac\u201cin as numerous jurisdiction as you perhaps can\u00e2\u20ac\u201cplus being-possessed your synthesiss about yourself, staid among a propagate acumen of which academy you are talking to whereas you homespun that ancillarys.\n<a href=\"http://serialkeygeneratorfree.com/serial-windows-8-1-product-key-crack-free-download/\" rel=\"nofollow\">windows 8.1 key\u00a0</a></p>\n"}], "owner": {"reputation": 211, "user_id": 4647103, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/736573076460009/picture?type=large", "display_name": "Hernan Bessera", "link": "https://stackoverflow.com/users/4647103/hernan-bessera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 34521509, "answer_count": 2, "score": -1, "last_activity_date": 1451451021, "creation_date": 1451428466, "last_edit_date": 1451450797, "question_id": 34520173, "link": "https://stackoverflow.com/questions/34520173/activerecord-validation-failed-running-seeds-on-heroku", "title": "ActiveRecord Validation failed running seeds on Heroku", "body": "<p>I am on chapter 9 of ruby on rails tutorial and I have a problem on the last minute. Everything works normally on my page but not on heroku.\nHere are the steps he said: </p>\n\n<pre><code>$ git push heroku\n$ heroku pg:reset DATABASE\n$ heroku run rake db:migrate\n$ heroku run rake db:seed\n$ heroku restart\n</code></pre>\n\n<p>when i run <code>rake db:seed</code></p>\n\n<pre><code>Running rake db:seed on radiant-peak-3596... up, run.3507\n  ActiveRecord::SchemaMigration Load (2.2ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (4.6ms)  BEGIN\n  User Exists (8.1ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER('example@hotmail.com') LIMIT 1\n   (3.8ms)  ROLLBACK\nrake aborted!\nActiveRecord::RecordInvalid: Validation failed: Email has already been taken\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/validations.rb:79:in `raise_record_invalid'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/validations.rb:43:in `save!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/attribute_methods/dirty.rb:29:in `save!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/transactions.rb:291:in `block in save!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/transactions.rb:220:in `transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/transactions.rb:344:in `with_transaction_returning_status'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/transactions.rb:291:in `save!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/persistence.rb:51:in `create!'\n/app/db/seeds.rb:9:in `&lt;top (required)&gt;'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `block in load'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:240:in `load_dependency'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\n/app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:547:in `load_seed'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/tasks/database_tasks.rb:250:in `load_seed'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/railties/databases.rake:180:in `block (2 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; db:seed\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>seed.rb</p>\n\n<pre><code>User.create!(name: \"example user\",\n             email: \"example@hotmail.com\",\n             password: \"foobar\",\n             password_confirmation: \"foobar\",\n             admin: true )\n\n99.times do |n|\n    name = Faker::Name.name\n    email = \"example-#{n+1}@aol.org\"\n    password = \"password\"\n   User.create!(name: name,\n                email: email, \n                password: password,\n                password_confirmation: password)\nend\n</code></pre>\n\n<p>I already installed the gem and it runs perfectly, but heroku is another case. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1092, "user_id": 3674548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNPXC.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3674548/sam"}, "edited": false, "score": 1, "creation_date": 1451426322, "post_id": 34519727, "comment_id": 56780807, "body": "Maybe learn Ruby first."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1451428154, "post_id": 34519727, "comment_id": 56781625, "body": "This is a duplicate of <a href=\"http://stackoverflow.com/q/55574/128421\">stackoverflow.com/q/55574/128421</a>"}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 3593246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAFkf.jpg?s=128&g=1", "display_name": "jayp", "link": "https://stackoverflow.com/users/3593246/jayp"}, "is_accepted": true, "score": 0, "last_activity_date": 1451426509, "creation_date": 1451426509, "answer_id": 34519784, "question_id": 34519727, "link": "https://stackoverflow.com/questions/34519727/how-should-i-learn-ruby-on-rails/34519784#34519784", "title": "How should I learn Ruby on Rails?", "body": "<p>I'd definitely recommend using Michael Hartl's <a href=\"https://www.railstutorial.org/\" rel=\"nofollow\">Ruby on Rails Tutorial</a> book. I've also found Daniel Kehoe's <a href=\"http://learn-rails.com/learn-ruby-on-rails.html\" rel=\"nofollow\">Learn Ruby on Rails</a> e-book super helpful as well.</p>\n\n<p>On a personal level, finding a project I actually wanted to build, as opposed to just pacing through a tutorial, is what really helped get me off the ground though.</p>\n"}], "owner": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "closed_date": 1451429859, "accepted_answer_id": 34519784, "answer_count": 1, "score": -4, "last_activity_date": 1451426509, "creation_date": 1451426253, "question_id": 34519727, "link": "https://stackoverflow.com/questions/34519727/how-should-i-learn-ruby-on-rails", "closed_reason": "Opinion-based", "title": "How should I learn Ruby on Rails?", "body": "<p>I'm a Java developer and I really want to get into Rails. What have you found to be the best way to learn RoR? </p>\n\n<p>Seriously, any tips/tricks/rants would be awesome.</p>\n"}, {"tags": ["ruby", "pry"], "comments": [{"owner": {"reputation": 2565, "user_id": 352349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c6ab26999dbad7965d6ca31cff2aa891?s=128&d=identicon&r=PG", "display_name": "Anssssss", "link": "https://stackoverflow.com/users/352349/anssssss"}, "edited": false, "score": 0, "creation_date": 1451423139, "post_id": 34518803, "comment_id": 56779308, "body": "What happens if you specify the history file location in the .pryrc file (example <a href=\"https://github.com/pry/pry/issues/1418\" rel=\"nofollow noreferrer\">here</a>)?"}, {"owner": {"reputation": 1156, "user_id": 1345135, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78edebd4f93a44265507e01170961309?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1345135/john"}, "reply_to_user": {"reputation": 2565, "user_id": 352349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c6ab26999dbad7965d6ca31cff2aa891?s=128&d=identicon&r=PG", "display_name": "Anssssss", "link": "https://stackoverflow.com/users/352349/anssssss"}, "edited": false, "score": 0, "creation_date": 1451424869, "post_id": 34518803, "comment_id": 56780075, "body": "I&#39;m not certain that makes sense as I know for sure, .pryrc is working, I think the real question at hand is how to exclude commands that get written into the .pry_history from also getting written into the .irb_history file"}, {"owner": {"reputation": 1156, "user_id": 1345135, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78edebd4f93a44265507e01170961309?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1345135/john"}, "reply_to_user": {"reputation": 2565, "user_id": 352349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c6ab26999dbad7965d6ca31cff2aa891?s=128&d=identicon&r=PG", "display_name": "Anssssss", "link": "https://stackoverflow.com/users/352349/anssssss"}, "edited": false, "score": 0, "creation_date": 1451425402, "post_id": 34518803, "comment_id": 56780321, "body": "I actually told pry explicitly to use .irb_history and that seems to work well, i can access whatever commands from wherever, which is nice so I think i&#39;m going to stick with what I got."}, {"owner": {"reputation": 2565, "user_id": 352349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c6ab26999dbad7965d6ca31cff2aa891?s=128&d=identicon&r=PG", "display_name": "Anssssss", "link": "https://stackoverflow.com/users/352349/anssssss"}, "edited": false, "score": 1, "creation_date": 1451426523, "post_id": 34518803, "comment_id": 56780899, "body": "Wait, what? Are you saying that the problem was pry was writing to BOTH irb_history and pry_history (and you didn&#39;t want it to clobber the irb_history)? But then you told pry to explicitly write to irb_history and now you&#39;re happy?"}, {"owner": {"reputation": 1156, "user_id": 1345135, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78edebd4f93a44265507e01170961309?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1345135/john"}, "reply_to_user": {"reputation": 2565, "user_id": 352349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c6ab26999dbad7965d6ca31cff2aa891?s=128&d=identicon&r=PG", "display_name": "Anssssss", "link": "https://stackoverflow.com/users/352349/anssssss"}, "edited": false, "score": 0, "creation_date": 1451426709, "post_id": 34518803, "comment_id": 56780986, "body": "hmm, i don&#39;t know how to explain it, but I think the entire pry_history was overwriting irb history and destroying irb history, by setting pry to explicitly write to irb_history, now the entire irb_history isn&#39;t being overwritten, so basically, i have no idea but I&#39;m happier with what I have :)"}, {"owner": {"reputation": 10647, "user_id": 64669, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Vg5iU.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/64669/aaron"}, "edited": false, "score": 0, "creation_date": 1469216760, "post_id": 34518803, "comment_id": 64462180, "body": "I&#39;ve started to look into this myself. I believe the issue is that both IRB and Pry read your history from a file and push each line into <code>Readline</code>. Either there is no code telling Pry to remove and store IRB history before it loads its own history and to restore it upon exiting or there is and there&#39;s a bug somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 10647, "user_id": 64669, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Vg5iU.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/64669/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1469285676, "creation_date": 1469285676, "answer_id": 38543091, "question_id": 34518803, "link": "https://stackoverflow.com/questions/34518803/why-does-pry-history-keep-cloberring-irb-history/38543091#38543091", "title": "why does pry history keep cloberring irb history?", "body": "<h1>Why the problem happens</h1>\n\n<p>Both Pry and IRB write their histories to <code>Readline::HISTORY</code>. When you enter Pry from IRB (or <code>rails console</code>) you have all your IRB history already in <code>Readline::HISTORY</code>. Pry then loads its history on top of that. When you exit Pry <code>Readline::HISTORY</code> isn't changed so you end up back in IRB with all of Pry's history appending to IRB's history. Finally, when you exit IRB it writes the history including Pry's to IRB's history file thus clobbering it.</p>\n\n<h1>Current state of the issue</h1>\n\n<p>I did some searching and found this is a <a href=\"https://github.com/pry/pry/issues/1474\" rel=\"nofollow\">known issue</a> with Pry. I was also really interested in the problem so I managed to work up a solution that is awaiting a <a href=\"https://github.com/pry/pry/pull/1560\" rel=\"nofollow\">pull request review</a>. </p>\n\n<h3>Workaround until merged</h3>\n\n<p>If you'd like to try it out before it get's merged you can grab the version from the branch I made on my fork of Pry. You can find it at <a href=\"https://github.com/agrberg/pry\" rel=\"nofollow\">https://github.com/agrberg/pry</a> under branch <code>save_irb_history_and_replace_on_close</code>. If you use <code>bundler</code> all you need to do is add or update your line for pry to:</p>\n\n<pre><code>gem 'pry', git: 'git@github.com:agrberg/pry.git', branch: 'save_irb_history_and_replace_on_close'\n</code></pre>\n"}], "owner": {"reputation": 1156, "user_id": 1345135, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78edebd4f93a44265507e01170961309?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1345135/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 633, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469285676, "creation_date": 1451421883, "question_id": 34518803, "link": "https://stackoverflow.com/questions/34518803/why-does-pry-history-keep-cloberring-irb-history", "title": "why does pry history keep cloberring irb history?", "body": "<p>When I'm using pry, the history of pry keeps overwriting my irb history and it is very annoying.  If i'm using pry, i'd like to see pry history and if i'm using irb, i'd like to see irb history.  Is there an obvious problem in my configuration?</p>\n\n<p><code>~/.irbrc</code> looks like</p>\n\n<pre><code>IRB.conf[:AUTO_INDENT] = true\nIRB.conf[:USE_READLINE] = true\nIRB.conf[:LOAD_MODULES] = [] unless IRB.conf.key?(:LOAD_MODULES)\nunless IRB.conf[:LOAD_MODULES].include?('irb/completion')\n  IRB.conf[:LOAD_MODULES] &lt;&lt; 'irb/completion'\nend\nIRB.conf[:SAVE_HISTORY] = 1000\n</code></pre>\n\n<p>my <code>.pryrc</code> file is empty, which based on docs indicates to me that pry should be using <code>.pry_history</code>, which appears to be happening.</p>\n\n<p><code>/etc/irbrc</code> looks like</p>\n\n<pre><code># Some default enhancements/settings for IRB, based on\n# http://wiki.rubygarden.org/Ruby/page/show/Irb/TipsAndTricks\n\nunless defined? ETC_IRBRC_LOADED\n\n  # Require RubyGems by default.\n  require 'rubygems'\n\n  # Activate auto-completion.\n  require 'irb/completion'\n\n  # Use the simple prompt if possible.\n  IRB.conf[:PROMPT_MODE] = :SIMPLE if IRB.conf[:PROMPT_MODE] == :DEFAULT\n\n  # Setup permanent history.\n  HISTFILE = \"~/.irb_history\"\n  MAXHISTSIZE = 100\n  begin\n    histfile = File::expand_path(HISTFILE)\n    if File::exists?(histfile)\n      lines = IO::readlines(histfile).collect { |line| line.chomp }\n      puts \"Read #{lines.nitems} saved history commands from '#{histfile}'.\" if $VERBOSE\n      Readline::HISTORY.push(*lines)\n    else\n      puts \"History file '#{histfile}' was empty or non-existant.\" if $VERBOSE\n    end\n    Kernel::at_exit do\n      lines = Readline::HISTORY.to_a.reverse.uniq.reverse\n      lines = lines[-MAXHISTSIZE, MAXHISTSIZE] if lines.nitems &gt; MAXHISTSIZE\n      puts \"Saving #{lines.length} history lines to '#{histfile}'.\" if $VERBOSE\n      File::open(histfile, File::WRONLY|File::CREAT|File::TRUNC) { |io| io.puts lines.join(\"\\n\") }\n    end\n  rescue =&gt; e\n    puts \"Error when configuring permanent history: #{e}\" if $VERBOSE\n  end\n\n  ETC_IRBRC_LOADED=true\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1451419925, "post_id": 34518017, "comment_id": 56777885, "body": "What is your question?"}, {"owner": {"reputation": 31, "user_id": 5673418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e00d625ef8fcd55d8c06a7d486d6092?s=128&d=identicon&r=PG&f=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/5673418/dragon"}, "edited": false, "score": 0, "creation_date": 1451424779, "post_id": 34518017, "comment_id": 56780019, "body": "I got example from website and separately try to make a module file and test the module."}, {"owner": {"reputation": 31, "user_id": 5673418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e00d625ef8fcd55d8c06a7d486d6092?s=128&d=identicon&r=PG&f=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/5673418/dragon"}, "edited": false, "score": 0, "creation_date": 1451424858, "post_id": 34518017, "comment_id": 56780069, "body": "I don&#39;t exactly the module_function(), but the person who made this example told that this function makes initialize module variables. Without this function, it occurred the error like &quot;undefined login() function&quot;"}, {"owner": {"reputation": 31, "user_id": 5673418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e00d625ef8fcd55d8c06a7d486d6092?s=128&d=identicon&r=PG&f=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/5673418/dragon"}, "edited": false, "score": 0, "creation_date": 1451425065, "post_id": 34518017, "comment_id": 56780172, "body": "And I removed the parenthesis at the module name. Before it was &quot;Auth()&quot; but it was mistake."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1451430269, "post_id": 34518017, "comment_id": 56782457, "body": "@Makoto If called with no arguments, module_function causes all subsequently defined methods in the module to become callable as module functions."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5673418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e00d625ef8fcd55d8c06a7d486d6092?s=128&d=identicon&r=PG&f=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/5673418/dragon"}, "edited": false, "score": 0, "creation_date": 1451424995, "post_id": 34518312, "comment_id": 56780142, "body": "Thank you for your kind explain. I put wrong parenthesis. I should remove that. Let me delete and try again. Thank you for your help."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1451420801, "last_edit_date": 1451420801, "creation_date": 1451419888, "answer_id": 34518312, "question_id": 34518017, "link": "https://stackoverflow.com/questions/34518017/syntax-error-in-ruby-unexpected-keyword-end-expecting-end-of-inputs/34518312#34518312", "title": "Syntax Error in Ruby. unexpected keyword_end, expecting end-of-inputs", "body": "<p>You can't define a module using <code>module Auth()</code>:</p>\n\n<pre><code>irb(main):001:0&gt; module Auth()\nirb(main):002:1&gt; end\nSyntaxError: (irb):1: syntax error, unexpected '\\n', expecting :: or '[' or '.'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>irb(main):001:0&gt; module Auth()\nirb(main):002:1&gt;   def login(id)\nirb(main):003:2&gt;   end\nirb(main):004:1&gt; end\nSyntaxError: (irb):1: syntax error, unexpected '\\n', expecting :: or '[' or '.'\n(irb):4: syntax error, unexpected keyword_end, expecting end-of-input\n</code></pre>\n\n<p>Removing the trailing parenthesis fixes the error:</p>\n\n<pre><code>irb(main):001:0&gt; module Auth\nirb(main):002:1&gt;   def login(id)\nirb(main):003:2&gt;   end\nirb(main):004:1&gt; end\n=&gt; :login\n</code></pre>\n\n<p>and</p>\n\n<pre><code>irb(main):001:0&gt; module Auth\nirb(main):002:1&gt;   module_function()\nirb(main):003:1&gt;\nirb(main):004:1*   def login(id)\nirb(main):005:2&gt;     members = ['abc', 'def', 'ghi']\nirb(main):006:2&gt;\nirb(main):007:2*     for member in members do\nirb(main):008:3*       if (id == member)\nirb(main):009:4&gt;         return true\nirb(main):010:4&gt;       end\nirb(main):011:3&gt;     end\nirb(main):012:2&gt;     return false\nirb(main):013:2&gt;   end\nirb(main):014:1&gt; end\n=&gt; :login\n</code></pre>\n\n<hr>\n\n<p>Your code could be more Ruby-like:</p>\n\n<pre><code>def login(id)\n  ['abc', 'def', 'ghi'].each do |member|\n    return true if (id == member)\n  end\n  return false\nend\nlogin('ghi') # =&gt; true\nlogin('foo') # =&gt; false\n</code></pre>\n\n<p>which can be refactored to:</p>\n\n<pre><code>def login(id)\n  ['abc', 'def', 'ghi'].any? { |member| (id == member) }\nend\nlogin('ghi') # =&gt; true\nlogin('foo') # =&gt; false\n</code></pre>\n\n<p>then to:</p>\n\n<pre><code>def login(id)\n  ['abc', 'def', 'ghi'].include?(id)\nend\nlogin('ghi') # =&gt; true\nlogin('foo') # =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5673418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e00d625ef8fcd55d8c06a7d486d6092?s=128&d=identicon&r=PG&f=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/5673418/dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "closed_date": 1451442218, "accepted_answer_id": 34518312, "answer_count": 1, "score": -5, "last_activity_date": 1451425018, "creation_date": 1451418455, "last_edit_date": 1451425018, "question_id": 34518017, "link": "https://stackoverflow.com/questions/34518017/syntax-error-in-ruby-unexpected-keyword-end-expecting-end-of-inputs", "closed_reason": "Not suitable for this site", "title": "Syntax Error in Ruby. unexpected keyword_end, expecting end-of-inputs", "body": "<p>I'm learning about Modules in Ruby. </p>\n\n<p>The module code was fine, but when I split it and made a file\nit returned a syntax error:</p>\n\n<pre><code>C:/Desktop/Ruby/Function/5.rb:1:in `require_relative': C:/Desktop/Ruby/Function/Auth.rb:13: syntax error, unexpected keyword_end, expecting end-of-input (SyntaxError)\n    from C:/Desktop/Ruby/Function/5.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>This is Auth.rb:</p>\n\n<pre><code>module Auth\n  module_function()\n\n  def login(id)\n    members = ['abc', 'def', 'ghi']\n\n    for member in members do\n      if (id == member)\n        return true\n      end\n    end\n    return false\n  end\nend\n</code></pre>\n\n<p>This is 5.rb:</p>\n\n<pre><code>require_relative 'Auth'\n\nputs \"Input your ID\"\n\ninput_id = gets.chomp()\n\nif Auth.login(input_id)\n  puts \"Hello, \" + input_id\nelse\n  puts \"Who are you?\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "edited": false, "score": 0, "creation_date": 1451525328, "post_id": 34517655, "comment_id": 56821829, "body": "If you are strictly about &quot;if it is before or after an underscore&quot;, you could use that validation, but use a function to generate all the possibilities. Ie, exclusion: { in : %w(about account root).map {|name|[name,&quot;<i>#{name}&quot;,&quot;#{name}</i>&quot;]}.compact }"}], "answers": [{"comments": [{"owner": {"reputation": 858, "user_id": 2087014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c6cbc40515103e3204e8f8a103c5e?s=128&d=identicon&r=PG", "display_name": "srecnig", "link": "https://stackoverflow.com/users/2087014/srecnig"}, "edited": false, "score": 0, "creation_date": 1451418447, "post_id": 34517925, "comment_id": 56777133, "body": "oh no, faster and better answer. d&#39;oh!"}, {"owner": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "edited": false, "score": 0, "creation_date": 1451418781, "post_id": 34517925, "comment_id": 56777293, "body": "Thank you very much, but how would I strip away other characters in your above example? so users cannot do something like ad_min"}, {"owner": {"reputation": 1608, "user_id": 459923, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/001d9d312e57fda02d1a87bfa06dfbd9?s=128&d=identicon&r=PG", "display_name": "Mosselman", "link": "https://stackoverflow.com/users/459923/mosselman"}, "reply_to_user": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "edited": false, "score": 0, "creation_date": 1451419604, "post_id": 34517925, "comment_id": 56777727, "body": "@ukeagle I expanded my answer a little for you."}, {"owner": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "edited": false, "score": 0, "creation_date": 1451420827, "post_id": 34517925, "comment_id": 56778288, "body": "errors.add(:username, :exclusion) if forbid.find { |w| username.tr(&quot;_&quot;,&quot;&quot;).include?(w) }"}, {"owner": {"reputation": 1608, "user_id": 459923, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/001d9d312e57fda02d1a87bfa06dfbd9?s=128&d=identicon&r=PG", "display_name": "Mosselman", "link": "https://stackoverflow.com/users/459923/mosselman"}, "reply_to_user": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "edited": false, "score": 0, "creation_date": 1451421097, "post_id": 34517925, "comment_id": 56778423, "body": "@ukeagle yep something like that."}], "tags": [], "owner": {"reputation": 1608, "user_id": 459923, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/001d9d312e57fda02d1a87bfa06dfbd9?s=128&d=identicon&r=PG", "display_name": "Mosselman", "link": "https://stackoverflow.com/users/459923/mosselman"}, "is_accepted": true, "score": 2, "last_activity_date": 1451419416, "last_edit_date": 1451419416, "creation_date": 1451418078, "answer_id": 34517925, "question_id": 34517655, "link": "https://stackoverflow.com/questions/34517655/rails-validates-username-exclusion/34517925#34517925", "title": "Rails validates :username, exclusion", "body": "<p>You could create a method to do your validations for you and use plain old ruby in that. As you can see <a href=\"http://guides.rubyonrails.org/active_record_validations.html#custom-methods\" rel=\"nofollow\">in the docs here</a></p>\n\n<p>This would look something like this for you:</p>\n\n<pre><code>  validate :my_validation_method\n\n  def my_validation_method\n    errors.add(:username, :exclusion) if some_condition\n  end\n</code></pre>\n\n<p>What this does is say that the model needs to be validated with the <code>my_validation_method</code> as well as all your normal other validations. You then manually add the field that is in error (in your case :username) to the errors of the model, thus it fails validation.</p>\n\n<p>Also note the <code>validate</code> rather than <code>validates</code>.</p>\n\n<p>Your other question is basically how to check whether an entered value includes some words. You could do this like so:</p>\n\n<pre><code>def my_validation_method\n   forbid = %w(luke darth artoo fry bender)\n\n   errors.add(:username, :exclusion) if forbid.find { |w| username.include?(w) }\nend\n</code></pre>\n\n<p>Here I added a condition to the adding of the error where we loop through each word in the forbidden list and check if username includes this word. Note that \"blablaluke\" would fail too! So it is not completely what you'd want. But you can play around with this yourself of course.</p>\n\n<p>The level of normalization you do (e.g. stripping away other characters) could give you more control, like preventing <code>ad_min</code>, etc.</p>\n\n<p>Update:\nYou can strip away characters like so:</p>\n\n<pre><code>username.tr('-_+$^&amp;', '')\n</code></pre>\n\n<p>You can add whatever you want to strip away to that first string in <code>tr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 2087014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c6cbc40515103e3204e8f8a103c5e?s=128&d=identicon&r=PG", "display_name": "srecnig", "link": "https://stackoverflow.com/users/2087014/srecnig"}, "is_accepted": false, "score": 1, "last_activity_date": 1451418361, "creation_date": 1451418361, "answer_id": 34517991, "question_id": 34517655, "link": "https://stackoverflow.com/questions/34517655/rails-validates-username-exclusion/34517991#34517991", "title": "Rails validates :username, exclusion", "body": "<p>according to the <a href=\"http://edgeguides.rubyonrails.org/active_record_validations.html#exclusion\" rel=\"nofollow\">rails docs</a> this way you can only check if a value is in a set of given values. </p>\n\n<blockquote>\n  <p>This helper validates that the attributes' values are not included in a given set.</p>\n</blockquote>\n\n<p>i would just write a custom validation <a href=\"http://edgeguides.rubyonrails.org/active_record_validations.html#custom-methods\" rel=\"nofollow\">method</a> - you can do whatever you want in there.</p>\n"}, {"comments": [{"owner": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "reply_to_user": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "edited": false, "score": 0, "creation_date": 1451444719, "post_id": 34518814, "comment_id": 56786259, "body": "lol, then I&#39;d write that same custom validator that @mosselman suggested. The only caveat - seems like something someone might have written a gem for. I&#39;d search for that."}], "tags": [], "owner": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "is_accepted": false, "score": 0, "last_activity_date": 1451421930, "creation_date": 1451421930, "answer_id": 34518814, "question_id": 34517655, "link": "https://stackoverflow.com/questions/34517655/rails-validates-username-exclusion/34518814#34518814", "title": "Rails validates :username, exclusion", "body": "<p>I'd probably use a Regex. Like this one:</p>\n\n<pre><code>validates_format_of :username, :with =&gt; /\\A(([ _]*)(?!(about|admin|root|etc)[ _])[^ _]+)+([ _]+|\\z)\\z/\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4965241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5eb1aa2ce64fa114eb1a2a58cc31e8?s=128&d=identicon&r=PG&f=1", "display_name": "ukeagle", "link": "https://stackoverflow.com/users/4965241/ukeagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "accepted_answer_id": 34517925, "answer_count": 3, "score": 0, "last_activity_date": 1451424014, "creation_date": 1451417019, "last_edit_date": 1451424014, "question_id": 34517655, "link": "https://stackoverflow.com/questions/34517655/rails-validates-username-exclusion", "title": "Rails validates :username, exclusion", "body": "<pre><code>  validates :username, exclusion: { in: %w(about account root etc..)\n</code></pre>\n\n<p>I am using the above to disallow users from using reserved usernames but they are still able to use them between underscores (I do allow underscores in usernames)</p>\n\n<p>Is there anyway I can make rails validate the reserved username even if it is before or after an underscore?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "jquery-select2"], "comments": [{"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 1, "creation_date": 1451507342, "post_id": 34517253, "comment_id": 56815284, "body": "Note that TAB traditionally closes a select box, which is what Select2 does. Unfortunately Select2 doesn&#39;t automatically select the option when you close the dropdown, but it does provide the <code>selectOnClose</code> option for you to be able to enable this."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1451509984, "post_id": 34517253, "comment_id": 56816675, "body": "How can I integrate <code>selectOnClose</code>? Do I add that to the script or in the <code>f.grouped_collection_select</code> or somewhere else? Thanks for your insight @KevinBrown!"}, {"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1451513463, "post_id": 34517253, "comment_id": 56818227, "body": "You add that when initializing Select2, in the JS. Assuming that is what you are looking for, I can write up a more detailed answer later when I&#39;m on a computer."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1451513923, "post_id": 34517253, "comment_id": 56818434, "body": "Yea that would be perfect and then I can give you the credit too @KevinBrown"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451415415, "creation_date": 1451415415, "question_id": 34517253, "link": "https://stackoverflow.com/questions/34517253/tab-doesnt-enter-with-select2", "title": "Tab Doesn&#39;t Enter with .select2", "body": "<p>If a user creates a custom option and then clicks tab then that custom option isn't entered.</p>\n\n<p>The user has to hit enter and then tab if he wants to move onto the next element in the form, which I'd like to reduce the unnecessary step of hitting enter first if possible.</p>\n\n<pre><code>&lt;%= simple_form_for(@lifetime, html: { data: { modal: true } }) do |f| %&gt; \n\n  &lt;%= f.grouped_collection_select(:name, @collection, :last, :first, :to_s, :to_s, include_blank: true) %&gt;\n\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $('#lifetime_name').select2({\n    placeholder: \"Enter Challenge\",\n    theme: \"bootstrap\",\n    allowClear: false,\n    tags: true,\n    multiple: false,\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>So in other words, if a user writes in a custom option, how can we make tab mean to \"enter and move onto next element\"? If the user chooses a default option then this problem doesn't exist, but in most cases users will want to create their own custom option.</p>\n"}, {"tags": ["ruby", "shell", "rspec"], "comments": [{"owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "edited": false, "score": 1, "creation_date": 1451421018, "post_id": 34517110, "comment_id": 56778387, "body": "You would not typically want to use RSpec to test a script by running it from the command line using backticks. When you do that you lose the context you need for testing things with your desired level of control. You hand off the execution to the shell (Bash, Cmd, etc.) and then wait for it to return a value or output some text to stdout or stderr"}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 4865822, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fd96d301543948259a5edbf9f8141ec?s=128&d=identicon&r=PG", "display_name": "Ryan Lue", "link": "https://stackoverflow.com/users/4865822/ryan-lue"}, "edited": false, "score": 0, "creation_date": 1525748380, "post_id": 34517671, "comment_id": 87467650, "body": "It appears that now RSpec <a href=\"https://relishapp.com/rspec/rspec-expectations/v/3-7/docs/built-in-matchers/output-matcher\" rel=\"nofollow noreferrer\">requires block syntax for the output matcher</a> (<i>e.g.,</i> <code>expect { `ruby example_file.rb` }.to ...</code>)"}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": false, "score": 1, "last_activity_date": 1451417104, "creation_date": 1451417104, "answer_id": 34517671, "question_id": 34517110, "link": "https://stackoverflow.com/questions/34517110/how-to-capture-the-value-of-an-abort-or-exit-with-rspec/34517671#34517671", "title": "How to capture the value of an abort or exit with Rspec", "body": "<p><code>abort</code>/<code>exit</code> will both print to <code>stderr</code>, whereas your rspec is listening on the <code>stdout</code> channel. Try the following:</p>\n\n<pre><code>expect(`ruby example_file.rb`).to output('Missing an argument').to_stderr\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5056787, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-AtR_1cR88Ng/AAAAAAAAAAI/AAAAAAAAAB4/0mgvvGmNCV4/photo.jpg?sz=128", "display_name": "Stephen Grayson", "link": "https://stackoverflow.com/users/5056787/stephen-grayson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451420368, "creation_date": 1451414753, "last_edit_date": 1495541750, "question_id": 34517110, "link": "https://stackoverflow.com/questions/34517110/how-to-capture-the-value-of-an-abort-or-exit-with-rspec", "title": "How to capture the value of an abort or exit with Rspec", "body": "<p>I am trying to write an Rspec test for my script that will pass if my script fails gracefully. </p>\n\n<pre><code>if options[:file] == false\n  abort 'Missing an argument'\nend\n</code></pre>\n\n<p>Rspec:</p>\n\n<pre><code>it 'if the file argument is not given, it provides a helpful message' do\n  expect(`ruby example_file.rb`).to eq('Missing an argument')\nend\n</code></pre>\n\n<p>My test continues to fail and says</p>\n\n<pre><code>expected: 'Missing an argument'\ngot: ''\n</code></pre>\n\n<p>I am not sure why it returns an empty string. I have looked at these posts with no luck:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/20432358/how-can-i-validate-exit-value-in-rspec\">How can I validate exit value in rspec?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1480537/how-can-i-validate-exits-and-aborts-in-rspec\">How can I validate exits and aborts in RSpec?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7019907/how-to-spec-methods-that-exit-or-abort\">How to spec methods that exit or abort</a></li>\n</ul>\n\n<p>If you need any more information about my script let me know. Thank you. </p>\n"}, {"tags": ["ruby", "ubuntu", "rvm", "virtual-machine"], "comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1451452114, "post_id": 34515816, "comment_id": 56788055, "body": "rvm is not installed properly yet, if you have to navigate to a certain direcotry and run <code>bash rvm ...</code> to use rvm. It won&#39;t work like that. Or maybe you just need to restart your shell after installing rvm, if you haven&#39;t yet?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1451410578, "creation_date": 1451410578, "answer_id": 34516060, "question_id": 34515816, "link": "https://stackoverflow.com/questions/34515816/rvm-ruby-version-2-2-1-actual-ruby-version-1-8-7/34516060#34516060", "title": "RVM ruby version 2.2.1, Actual ruby version 1.8.7", "body": "<p>Add following two lines:</p>\n\n<pre><code>export PATH=\"$PATH:$HOME/.rvm/bin\" # Add RVM to PATH for scripting\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # Load RVM into a shell session *as a function*\n</code></pre>\n\n<p>to your <code>$HOME/.profile</code> file and restart a shell.</p>\n"}, {"comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1453304875, "post_id": 34657796, "comment_id": 57544921, "body": "@Brookelyn: Has our answer work for you or still have some other issue ?"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1452423454, "last_edit_date": 1495541248, "creation_date": 1452177388, "answer_id": 34657796, "question_id": 34515816, "link": "https://stackoverflow.com/questions/34515816/rvm-ruby-version-2-2-1-actual-ruby-version-1-8-7/34657796#34657796", "title": "RVM ruby version 2.2.1, Actual ruby version 1.8.7", "body": "<p>It seems your machine is using Its own instead by RVM.</p>\n\n<p><strong>1:</strong> <code>rvm list</code> # Listing install rubies will you get versions of ruby which is installed by RVM</p>\n\n<p><strong>2:</strong>  <code>rvm use &lt; ruby-version &gt;</code> # for instances ruby-1.9.3-p125</p>\n\n<p><strong>3:</strong> <code>bundle install</code></p>\n\n<blockquote>\n  <p><strong>4:</strong> Tried to install Jekyll using sudo gem install jekyll, but I get an\n  error saying that I need ruby version 2.0 or higher.</p>\n</blockquote>\n\n<p>For that you could try <a href=\"https://stackoverflow.com/questions/34521806/installing-jekyll-on-ubuntu-14-04/34523631#34523631\">Installing Jekyll on Ubuntu 14.04</a></p>\n\n<p>Hope this help you !!!</p>\n"}], "owner": {"reputation": 1, "user_id": 4519743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93d0fdf02221cb56579aa2b7631271?s=128&d=identicon&r=PG&f=1", "display_name": "Brookelyn", "link": "https://stackoverflow.com/users/4519743/brookelyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452423454, "creation_date": 1451409689, "last_edit_date": 1495540320, "question_id": 34515816, "link": "https://stackoverflow.com/questions/34515816/rvm-ruby-version-2-2-1-actual-ruby-version-1-8-7", "title": "RVM ruby version 2.2.1, Actual ruby version 1.8.7", "body": "<p>I am trying to install Jekyll in a VM for my web course and it required ruby >= 2.0.0.</p>\n\n<p>I've gone through installing RVM and using this to install the desired version of ruby, but I then get the following:</p>\n\n<pre><code>vagrant@precise32:~/.rvm/bin$ bash rvm list\n\n rvm rubies\n\n    ruby-2.1.1 [ i686 ]\n =* ruby-2.2.1 [ i686 ]\n\n \u00a0# =&gt; - current\n \u00a0# =* - current &amp;&amp; default\n \u00a0#  * - default\n\n vagrant@precise32:~/.rvm/bin$ ruby -v \n ruby 1.8.7 (2011-06-30\n patchlevel 352) [i686-linux] \n\n vagrant@precise32:~/.rvm/bin$ sudo gem\n install jekyll ERROR:  Error installing jekyll:jekyll requires Ruby version &gt;= 2.0.0. \n\n vagrant@precise32:~/.rvm/bin\n</code></pre>\n\n<p>I don't understand why it still thinks it is using version 1.8.7, as it confirms that it has installed 2.2.1.</p>\n\n<p>I have done the following:</p>\n\n<ol>\n<li><p>Use sudo chown to change ownership of the .gnupg folder recursively to vagrant (my system user) as defined <a href=\"http://ubuntuforums.org/showthread.php?t=1236084\" rel=\"nofollow noreferrer\">here</a>.</p></li>\n<li><p>Install RVM following the instructions <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">here</a>.</p></li>\n<li><p>Installed the version (2.2.1) of ruby using these instructions (<code>https://rvm.io/rubies/installing</code>).</p></li>\n<li><p>Tried to install Jekyll using sudo gem install jekyll, but I get an error saying that I need ruby version 2.0 or higher.</p></li>\n</ol>\n\n<p>I'm not a developer, this is an introductory web development course. Also please excuse the corrupt link, I can't post more than 2.</p>\n\n<p>Update: I think I might need to do something as described here: <a href=\"https://stackoverflow.com/questions/8663936/how-do-i-change-my-ruby-version-using-rvm\">How do I change my Ruby version using RVM?</a>.</p>\n\n<p>Also - although I installed RVM, I originally installed it using sudo apt-get which corrupted it. I uninstalled that, and ran the most recent install with curl. To use it I have to navigate to the directory and use \"bash rvm list\"</p>\n"}, {"tags": ["ruby", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 39, "user_id": 5498599, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3e030bad20c88a48386514c53e6fae?s=128&d=identicon&r=PG&f=1", "display_name": "Eman Mohamed", "link": "https://stackoverflow.com/users/5498599/eman-mohamed"}, "edited": false, "score": 0, "creation_date": 1451491215, "post_id": 34515837, "comment_id": 56807057, "body": "@Eman that doesn&#39;t make sense. The new version doesn&#39;t use md5, it uses sha1. Did you uninstall the old version? restarted your server?"}, {"owner": {"reputation": 39, "user_id": 5498599, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3e030bad20c88a48386514c53e6fae?s=128&d=identicon&r=PG&f=1", "display_name": "Eman Mohamed", "link": "https://stackoverflow.com/users/5498599/eman-mohamed"}, "edited": false, "score": 0, "creation_date": 1451492327, "post_id": 34515837, "comment_id": 56807654, "body": "I used this package <a href=\"https://github.com/aproxacs/s3sync\" rel=\"nofollow noreferrer\">github.com/aproxacs/s3sync</a>.  it works well but if uploading directory is bigger than 2 G it failed."}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 39, "user_id": 5498599, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3e030bad20c88a48386514c53e6fae?s=128&d=identicon&r=PG&f=1", "display_name": "Eman Mohamed", "link": "https://stackoverflow.com/users/5498599/eman-mohamed"}, "edited": false, "score": 0, "creation_date": 1451492477, "post_id": 34515837, "comment_id": 56807737, "body": "Sounds like it solved your error. Now that&#39;s a new problem, probably some s3 config you might need to do in aws. post a new question with more details, error messages etc"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1451409753, "creation_date": 1451409753, "answer_id": 34515837, "question_id": 34515111, "link": "https://stackoverflow.com/questions/34515111/s3sync-not-work-with-ruby-1-9-3/34515837#34515837", "title": "s3sync not work with ruby 1.9.3", "body": "<p>Use the latest version of s3sync. The version you're using is no longer supported:</p>\n\n<p><a href=\"http://s3.amazonaws.com/ServEdge_pub/s3sync/s3sync.tar.gz\" rel=\"nofollow\">http://s3.amazonaws.com/ServEdge_pub/s3sync/s3sync.tar.gz</a></p>\n\n<p>\"md5\" is not a gem, it may be an old dependency that no longer exists. My first thought was to <code>gem install md5</code> but it doesn't find that gem in any repo. The above referenced gem now uses sha1 instead of md5.</p>\n"}], "owner": {"reputation": 39, "user_id": 5498599, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3e030bad20c88a48386514c53e6fae?s=128&d=identicon&r=PG&f=1", "display_name": "Eman Mohamed", "link": "https://stackoverflow.com/users/5498599/eman-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1451409753, "creation_date": 1451406711, "question_id": 34515111, "link": "https://stackoverflow.com/questions/34515111/s3sync-not-work-with-ruby-1-9-3", "title": "s3sync not work with ruby 1.9.3", "body": "<p>I tried to upload my backups to amazon s3 using s3sync version 1.2.6\nit dont work and I got this error</p>\n\n<p>/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in <code>require': cannot load such file -- md5 (LoadError)\n    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in</code>require'\n    from s3sync.rb:23:in <code>&lt;module:S3sync&gt;'\n    from s3sync.rb:11:in</code>'</p>\n\n<p>ruby version is 1.9.3</p>\n"}, {"tags": ["ruby", "shell", "unix", "heroku", "rake"], "comments": [{"owner": {"reputation": 1225, "user_id": 2271484, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20526d179a165bbc4e5f1a5f53c61a65?s=128&d=identicon&r=PG", "display_name": "lps", "link": "https://stackoverflow.com/users/2271484/lps"}, "edited": false, "score": 0, "creation_date": 1451411745, "post_id": 34515005, "comment_id": 56773782, "body": "I think that error is coming from Heroku, not your local machine.  Try replacing the system command with <code>heroku run &quot;ruby -v&quot;</code> to verify.  See here for more troubleshooting: <a href=\"https://devcenter.heroku.com/articles/ruby-versions#troubleshooting\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/ruby-versions#troubleshooting</a>.  Besides that I would try the suggestion from @nick-aschenbach below."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "reply_to_user": {"reputation": 1225, "user_id": 2271484, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20526d179a165bbc4e5f1a5f53c61a65?s=128&d=identicon&r=PG", "display_name": "lps", "link": "https://stackoverflow.com/users/2271484/lps"}, "edited": false, "score": 0, "creation_date": 1451418289, "post_id": 34515005, "comment_id": 56777051, "body": "I don&#39;t think it&#39;s a Heroku issue. If it was, then running the command by itself from the command line (without using <code>system</code>) would produce the same results. But running it from the command line works fine. <code>heroku run ruby -v -a &lt;app name&gt;</code> correctly returns <code>ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451416847, "post_id": 34515216, "comment_id": 56776395, "body": "Unfortunately, I&#39;m getting the same error when using <code>bundle exec rake geo_data:heroku_import</code>."}, {"owner": {"reputation": 161, "user_id": 4621307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fxBMlFTpnAY/AAAAAAAAAAI/AAAAAAAABQU/eiZT3Th4r1I/photo.jpg?sz=128", "display_name": "Nick Aschenbach", "link": "https://stackoverflow.com/users/4621307/nick-aschenbach"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451420585, "post_id": 34515216, "comment_id": 56778181, "body": "It&#39;s possible that RVM&#39;s ruby isn&#39;t being found in the path or isn&#39;t the first ruby in the path. When you try: <code>which ruby</code> do you see something like <code>~&#47;.rvm&#47;rubies&#47;ruby-2.2.0&#47;bin&#47;ruby</code>?"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451420900, "post_id": 34515216, "comment_id": 56778319, "body": "<code>which ruby</code> is outputting <code>&#47;Users&#47;jeffreydill&#47;.rvm&#47;rubies&#47;ruby-2.2.2&#47;bin&#47;ruby</code>."}, {"owner": {"reputation": 161, "user_id": 4621307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fxBMlFTpnAY/AAAAAAAAAAI/AAAAAAAABQU/eiZT3Th4r1I/photo.jpg?sz=128", "display_name": "Nick Aschenbach", "link": "https://stackoverflow.com/users/4621307/nick-aschenbach"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451422353, "post_id": 34515216, "comment_id": 56778988, "body": "Does <code>which rake</code> return <code>&#47;Users&#47;jeffreydill&#47;.rvm&#47;rubies&#47;ruby-2.2.2&#47;bin&#47;rake</code>?"}, {"owner": {"reputation": 161, "user_id": 4621307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fxBMlFTpnAY/AAAAAAAAAAI/AAAAAAAABQU/eiZT3Th4r1I/photo.jpg?sz=128", "display_name": "Nick Aschenbach", "link": "https://stackoverflow.com/users/4621307/nick-aschenbach"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451422849, "post_id": 34515216, "comment_id": 56779192, "body": "Did you create the RVM ruby gemset for your project? I almost always create <code>.ruby-version</code> with text of <code>ruby-2.2.2</code> and <code>.ruby-gemset</code> with text of <code>project-name</code>. cd out of the directory and back in should create the appropriate gemset: <code>cd stack_model&#47; ruby-2.2.0 - #gemset created &#47;Users&#47;troy&#47;.rvm&#47;gems&#47;ruby-2.2.0@stack-test ruby-2.2.0 - #generating stack-test wrappers..........</code>"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451427474, "post_id": 34515216, "comment_id": 56781296, "body": "<code>which rake</code> is outputting <code>&#47;Users&#47;jeffreydill&#47;.rvm&#47;gems&#47;ruby-2.2.2&#47;bin&#47;rake</code>."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451430646, "post_id": 34515216, "comment_id": 56782589, "body": "And I&#39;ve now created the gemset for my project. This is the output I got: <code>ruby-2.2.2 - #gemset created &#47;Users&#47;jeffreydill&#47;.rvm&#47;gems&#47;ruby-2.2.2@api ruby-2.2.2 - #generating api wrappers - please wait</code>. After that, I reinstalled bundler - <code>gem install bundle</code>. And then ran <code>bundle install</code>. Still no luck. :-("}, {"owner": {"reputation": 161, "user_id": 4621307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fxBMlFTpnAY/AAAAAAAAAAI/AAAAAAAABQU/eiZT3Th4r1I/photo.jpg?sz=128", "display_name": "Nick Aschenbach", "link": "https://stackoverflow.com/users/4621307/nick-aschenbach"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451430892, "post_id": 34515216, "comment_id": 56782687, "body": "Try <code>gem install rake</code>. What gems are in your Gemfile?"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451432169, "post_id": 34515216, "comment_id": 56783154, "body": "I did <code>gem install rake</code>. Still no luck. I&#39;ll add the gems in my Gemfile to my initial question."}], "tags": [], "owner": {"reputation": 161, "user_id": 4621307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fxBMlFTpnAY/AAAAAAAAAAI/AAAAAAAABQU/eiZT3Th4r1I/photo.jpg?sz=128", "display_name": "Nick Aschenbach", "link": "https://stackoverflow.com/users/4621307/nick-aschenbach"}, "is_accepted": false, "score": 0, "last_activity_date": 1451407155, "last_edit_date": 1495535274, "creation_date": 1451407155, "answer_id": 34515216, "question_id": 34515005, "link": "https://stackoverflow.com/questions/34515005/unix-system-command-using-different-version-of-ruby/34515216#34515216", "title": "UNIX `system` command using different version of Ruby", "body": "<p>Try:</p>\n\n<pre><code>bundle exec rake &lt;command&gt;\n</code></pre>\n\n<p>This runs the rake command in the context of the current bundle.</p>\n\n<p>More information is available here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean\">What does bundle exec rake mean?</a></p>\n"}, {"comments": [{"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1451417465, "post_id": 34516277, "comment_id": 56776683, "body": "Thanks but I&#39;ve actually already got <code>2.2.2</code> installed. It&#39;s also set as my current and default. <code>ruby -v</code> correctly gives me <code>ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-darwin14]</code>"}], "tags": [], "owner": {"reputation": 11, "user_id": 1091979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc7f66ac08e05cec85d915a53fd3a4de?s=128&d=identicon&r=PG", "display_name": "rjmolesa", "link": "https://stackoverflow.com/users/1091979/rjmolesa"}, "is_accepted": false, "score": 0, "last_activity_date": 1451411454, "last_edit_date": 1495535274, "creation_date": 1451411454, "answer_id": 34516277, "question_id": 34515005, "link": "https://stackoverflow.com/questions/34515005/unix-system-command-using-different-version-of-ruby/34516277#34516277", "title": "UNIX `system` command using different version of Ruby", "body": "<p>Take a look here <a href=\"https://stackoverflow.com/q/19342044/1091979\">How to fix &quot;Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0&quot;</a>.</p>\n\n<p>Try <code>ruby -v</code></p>\n\n<p>I've solved this by running <code>rvm install 2.2.2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1453253696, "post_id": 34884135, "comment_id": 57518435, "body": "Since this is <i>vaguely</i> related, I don&#39;t suppose you&#39;d be able to lend any insight to this <a href=\"http://stackoverflow.com/questions/34700261/how-to-enable-quiet-mode-for-postgres-commands-on-heroku\">other question</a> I have? :-)"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1453227420, "creation_date": 1453227420, "answer_id": 34884135, "question_id": 34515005, "link": "https://stackoverflow.com/questions/34515005/unix-system-command-using-different-version-of-ruby/34884135#34884135", "title": "UNIX `system` command using different version of Ruby", "body": "<p>There a few environment variables that Ruby will check when it is launched that you can use to control things like the load path and to set options.</p>\n\n<p>Bundler is \u201cinfectious\u201d, in that when you use it it adds some of these environment variables so that another Ruby process executed as a child will automatically try to use Bundler with the same <code>Gemfile</code>.</p>\n\n<p>Compare the output of <code>ruby -e \"puts ENV.inspect\"</code> with <code>bundle exec ruby -e \"puts ENV.inspect\"</code> inside a project using Bundler.</p>\n\n<p>This is normally what you want to happen, so that you are always using the versions of Gems and Ruby defined in your <code>Gemfile</code>.</p>\n\n<p>The <code>heroku</code> command includes its own installation of Ruby (it\u2019s in <code>/usr/local/heroku/ruby</code> on my machine) which it uses rather than your normal version. This is quite an old version of Ruby, mine is 1.9.3p194.</p>\n\n<p>So when you use <code>system</code> to run the <code>heroku</code> command, the Ruby process that is created checks the environment variables and loads Bundler (using the Gem from the version of Ruby you\u2019re using) and then tries to setup everything according to your <code>Gemfile</code>. This is where the Ruby version mismatch happens.</p>\n\n<p>To fix this, you need to tell Bundler not to include the various environment variables when launching a subprocess. There are a few methods that deal with this, in your case you want to use <a href=\"https://github.com/bundler/bundler/blob/v1.11.2/lib/bundler.rb#L223\" rel=\"nofollow\"><code>Bundler.clean_system</code></a> instead of plain <code>system</code>:</p>\n\n<pre><code>Bundler.clean_system \"heroku pg:psql DATABASE -c 'DELETE FROM &lt;table name&gt;' -a &lt;heroku app name&gt;\"\n</code></pre>\n\n<p>This will allow the Heroku client to run without interference from Bundler and your <code>Gemfile</code>.</p>\n"}], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 34884135, "answer_count": 3, "score": 2, "last_activity_date": 1453227420, "creation_date": 1451406275, "last_edit_date": 1592644375, "question_id": 34515005, "link": "https://stackoverflow.com/questions/34515005/unix-system-command-using-different-version-of-ruby", "title": "UNIX `system` command using different version of Ruby", "body": "<p>I've got a Rakefile with the following contents:</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>namespace :geo_data do\n  desc 'Imports geo data to Heroku'\n  task :heroku_import =&gt; :environment do\n    system &quot;heroku pg:psql DATABASE -c 'DELETE FROM &lt;table name&gt;' -a &lt;heroku app name&gt;&quot;\n\n    # some more stuff...\n  end\nend\n</code></pre>\n<p>Whenever I run <code>rake geo_data:heroku_import</code>, it'll crash on my Heroku command with this error:</p>\n<blockquote>\n<p>Your Ruby version is 1.9.3, but your Gemfile specified 2.2.2</p>\n</blockquote>\n<p>However, if I run the Heroku command - <code>heroku pg:psql DATABASE -c 'DELETE FROM &lt;table name&gt;' -a &lt;heroku app name&gt;</code> - directly from the command line in a terminal window, it works fine.</p>\n<p>So it would appear that the <code>system</code> command is using a different version of Ruby.</p>\n<p>Interestingly, as far as I can tell, I don't even have <code>1.9.3</code> installed on my machine. This is the output from <code>rvm list</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>rvm rubies\n\n   ruby-2.0.0-p598 [ x86_64 ]\n   ruby-2.2.0 [ x86_64 ]\n=* ruby-2.2.2 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n<p>Based on that output, I don't have <code>1.9.3</code> installed and <code>2.2.2</code> is set as my current <em>and</em> default Ruby version.</p>\n<p>Am I correct in determining that <code>system</code> is using a different version of Ruby, or is there something else I'm missing? And if it is using a different version, how can I make it use <code>2.2.2</code> (or preferably <em>whatever</em> my default is currently set to)?</p>\n<hr />\n<h3>UPDATE</h3>\n<p>This is the contents of my Gemfile:</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>source 'https://rubygems.org'\n\nruby '2.2.2'\n\ngem 'rails', '4.2.3'\ngem 'rails-api'\ngem 'spring', :group =&gt; :development\ngem 'pg'\ngem 'stripe'\ngem 'jsonapi-resources', '0.7.0'\ngem 'rails_api_auth'\ngem 'rack-cors', require: 'rack/cors'\ngem 'activerecord-postgis-adapter'\ngem 'rgeo-geojson'\ngem 'geocoder'\ngem 'activerecord-import'\ngem 'sidekiq'\ngem 'unicorn'\n\ngroup :development, :test do\n  gem 'rspec-rails'\n  gem 'forgery'\n  gem 'foreman'\nend\n\ngroup :development do\n  gem 'pry-rails'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1451407043, "post_id": 34514882, "comment_id": 56771164, "body": "This might help <a href=\"https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group\" title=\"select first row in each group by group\">stackoverflow.com/questions/3800551/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1451406849, "post_id": 34515069, "comment_id": 56771056, "body": "That makes more sense, though I don&#39;t think it&#39;s quite what the OP wants. You could also do this as <code>where(order_id: failed &amp; completed)</code> (<code>Array#&amp;</code> is intersection)."}, {"owner": {"reputation": 75, "user_id": 4380903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000950375403/picture?type=large", "display_name": "Karol Kami\u0144ski", "link": "https://stackoverflow.com/users/4380903/karol-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1451407049, "post_id": 34515069, "comment_id": 56771169, "body": "Unfortunatelly in Your solution (getting my example above) order with order_id = 007 gonna be twice in your &#39;what_you_want&#39; array ... its not what I am looking for."}, {"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1451407621, "post_id": 34515069, "comment_id": 56771512, "body": "Karol, what about adding a &quot;distinct&quot;, like I did in the latest edition?"}], "tags": [], "owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "is_accepted": false, "score": 0, "last_activity_date": 1451407569, "last_edit_date": 1451407569, "creation_date": 1451406556, "answer_id": 34515069, "question_id": 34514882, "link": "https://stackoverflow.com/questions/34514882/take-only-one-value-from-grouped-by-active-record-ruby-on-rails/34515069#34515069", "title": "Take only one value from grouped by active record - ruby on rails", "body": "<p>You could try something like:</p>\n\n<pre><code>failed = Order.where(state: 'failed').pluck(:order_id)\ncompleted = Order.where(state: 'completed').pluck(:order_id)\n\nwhat_you_want = Order.where(\"order_id IN (#{failed}) AND order_id IN (#{completed})\").distinct\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 4380903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000950375403/picture?type=large", "display_name": "Karol Kami\u0144ski", "link": "https://stackoverflow.com/users/4380903/karol-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1451467898, "post_id": 34518227, "comment_id": 56794618, "body": "Ok. It returns unique values of my Orders BUT ... it&#39;s still random. If there would be more than one order with same order_id I would receive random orders with this id. What I want is - if there is many orders with same order_id and one of them has &#39;state&#39; different than &#39;failed&#39; return me that order. DISTINCT gonna return me uniq value but random.  I believe that @Kristj&#225;n found my answer here: <a href=\"https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group\">LINK</a> But I still need help with translate this SQL on Ruby Active Record :("}, {"owner": {"reputation": 75, "user_id": 4380903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000950375403/picture?type=large", "display_name": "Karol Kami\u0144ski", "link": "https://stackoverflow.com/users/4380903/karol-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1451485105, "post_id": 34518227, "comment_id": 56803792, "body": "nice! .. it actually did the thing! I&#39;ve made some syntax mistake. &quot;DISTINCT ON(xxx)&quot; is no the same as &quot;DISTINCT ON xxx&quot; .. thanks a lot! :)"}], "tags": [], "owner": {"reputation": 60090, "user_id": 188031, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/p2YIF.jpg?s=128&g=1", "display_name": "tokland", "link": "https://stackoverflow.com/users/188031/tokland"}, "is_accepted": true, "score": 1, "last_activity_date": 1451482500, "last_edit_date": 1451482500, "creation_date": 1451419438, "answer_id": 34518227, "question_id": 34514882, "link": "https://stackoverflow.com/questions/34514882/take-only-one-value-from-grouped-by-active-record-ruby-on-rails/34518227#34518227", "title": "Take only one value from grouped by active record - ruby on rails", "body": "<p>Using postgreSQL (<a href=\"http://sqlfiddle.com/#!15/4af1c/1/0\" rel=\"nofollow\">snippet</a>):</p>\n\n<pre><code>Order.order(\"order_id, state = 'failed'\").select(\"DISTINCT ON(order_id) *\")\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4380903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000950375403/picture?type=large", "display_name": "Karol Kami\u0144ski", "link": "https://stackoverflow.com/users/4380903/karol-kami%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34518227, "answer_count": 2, "score": 2, "last_activity_date": 1451482500, "creation_date": 1451405824, "question_id": 34514882, "link": "https://stackoverflow.com/questions/34514882/take-only-one-value-from-grouped-by-active-record-ruby-on-rails", "title": "Take only one value from grouped by active record - ruby on rails", "body": "<p>Example data:</p>\n\n<p>I have table orders:</p>\n\n<pre><code>[order_id: 007, state: completed]\n[order_id: 123, state: completed]\n[order_id: 007, state: failed]\n[order_id: 321, state: failed]\n[order_id: 111, state: failed]\n[order_id: 111, state: failed]\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>[order_id: 007, state: completed]\n[order_id: 123, state: completed]\n[order_id: 321, state: failed]\n[order_id: 111, state: failed]\n</code></pre>\n\n<p>I have many values in table 'Orders' with the same order_id but different state. What I want to receive is list of orders without those 'failed' states IF there is another order in table 'orders' with same order_id and with different state than 'failed'.</p>\n\n<p>I need something like:</p>\n\n<pre><code>Order.all.group(:state).take_only_first_value_if(\"COUNT(*) &gt; 1\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 1, "creation_date": 1451409046, "post_id": 34514862, "comment_id": 56772381, "body": "If you&#39;re not using devise, where does this method in edit action come from &#39;&#39;&#39;current_user&#39;&#39;&#39; and what does it look like?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451409089, "post_id": 34514862, "comment_id": 56772415, "body": "I have declared it myself at application controller"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451409128, "post_id": 34514862, "comment_id": 56772436, "body": "helper_method :current_user           def current_user      @current_user ||= User.find(session[:user_id]) if session[:user_id]        end"}, {"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451410415, "post_id": 34514862, "comment_id": 56773126, "body": "One problem is this &#39;&#39;&#39;if current_user.id = user.id&#39;&#39;&#39; should be &#39;&#39;&#39;if current_user.id == user.id&#39;&#39;&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1451410489, "post_id": 34514862, "comment_id": 56773150, "body": "ok but that is not the real problem what should i add to make it editable only if you type the current password"}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1451411406, "post_id": 34514862, "comment_id": 56773618, "body": "What\u2019s that <code>:password == :password_confirmation</code>? Please ask a clear question. You know how to get user input, don\u2019t you? And you know how to verify the password, obviously. So I don\u2019t see a problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "edited": false, "score": 0, "creation_date": 1451411504, "post_id": 34514862, "comment_id": 56773665, "body": "I added that so that when you sign up you need to put the password and the password confirmation and that line :password == :password_confirmation makes it so that they are equal so that if you mistype you won&#39;t sign up"}, {"owner": {"reputation": 1225, "user_id": 2271484, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20526d179a165bbc4e5f1a5f53c61a65?s=128&d=identicon&r=PG", "display_name": "lps", "link": "https://stackoverflow.com/users/2271484/lps"}, "edited": false, "score": 1, "creation_date": 1451412626, "post_id": 34514862, "comment_id": 56774172, "body": "This question is not clear at all.  Stop and backtrack. Is authentication currently working?  If so, are you asking to prompt for a password again when the user attempts to update their profile? If so you would presumably want to check for that in the <code>update()</code> method in your controller, probably using the existing auth mechanism. Right now it just gets the user by id and then does the update with no checks.  If this doesn&#39;t make sense, then take some time to reformulate your question step by step, clean up your code examples, and show all relevant code, so that you can get meaningful help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "edited": false, "score": 0, "creation_date": 1451412896, "post_id": 34514862, "comment_id": 56774326, "body": "What you see in the code is my authenticate and it works i can login signup edit my account others can see it, but the problem is that when i update/edit my account it does&#39;t require me to enter the password that i currently have and i want this feature implemented. I don&#39;t know how to do it. If you can help please help cause i have been working with this for a long time now."}, {"owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "edited": false, "score": 0, "creation_date": 1451422971, "post_id": 34514862, "comment_id": 56779244, "body": "@HansiCollaku, You may want to read up on how to roll your own user authentication for Rails. I recommend something like this: <a href=\"http://railscasts.com/episodes/250-authentication-from-scratch\" rel=\"nofollow noreferrer\">railscasts.com/episodes/250-authentication-from-scratch</a>. Once you get that working (maybe you already have), you can do something like this: <code>user = User.authenticate(params[:email], params[:password])</code> on the first line of the <code>update</code> action in your controller above. Ideally you would define a <code>authenticate_user</code> method in your application controller and use a <code>before_filter</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "edited": false, "score": 0, "creation_date": 1451424975, "post_id": 34514862, "comment_id": 56780134, "body": "If you have seen my code correctly you might have noticed that i do authenticate with bcrypt. Please if you know how to require the current password ( how to even ask for it ) when you edit your account. Please if someone can help"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1451689049, "creation_date": 1451689049, "answer_id": 34560876, "question_id": 34514862, "link": "https://stackoverflow.com/questions/34514862/rails-how-to-require-the-current-password-to-allow-user-update/34560876#34560876", "title": "Rails how to require the current password to allow user update", "body": "<p>First, you have a problem in your <code>edit</code> action:</p>\n\n<pre><code>current_user.id = @user.id\n</code></pre>\n\n<p>That assigns <code>@user.id</code> to <code>current_user.id</code> - you wanted <code>==</code> to test that it's the correct <code>User</code>. You should put a similar check on <code>update</code>, and probably extract it into a <code>before_action</code> so you can easily apply it anywhere you want to.</p>\n\n<p>To check that the password is present, add it to your form like any other field and then get it out of <code>params</code> to verify it. That would look something like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def update\n    encrypted = encrypt(params[:password]) # Using whatever your mechanism is\n    if encrypted == @user.encrypted_password\n      # Update the user\n    else\n      flash[:notice] = 'Password is required to update user information.'\n      redirect_to edit_user(path(@user))\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "edited": false, "score": 0, "creation_date": 1451771332, "post_id": 34561029, "comment_id": 56886624, "body": "Thanks for the reply but i get this error &#39;When assigning attributes, you must pass a hash as an argument.&#39;"}], "tags": [], "owner": {"reputation": 1616, "user_id": 3375148, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0634d92d3a39072fb1e23a897bea6d9e?s=128&d=identicon&r=PG", "display_name": "DevMarwen", "link": "https://stackoverflow.com/users/3375148/devmarwen"}, "is_accepted": false, "score": 1, "last_activity_date": 1451690319, "creation_date": 1451690319, "answer_id": 34561029, "question_id": 34514862, "link": "https://stackoverflow.com/questions/34514862/rails-how-to-require-the-current-password-to-allow-user-update/34561029#34561029", "title": "Rails how to require the current password to allow user update", "body": "<p>One way is to use <code>virtual attributes</code></p>\n\n<h3>1. The User model</h3>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessor :current_password\nend\n</code></pre>\n\n<h3>2. The form</h3>\n\n<p>add the <code>current_password</code> <code>attribute</code> to the <code>form</code> as a <code>text_field</code> <code>input</code></p>\n\n<h3>3. The UsersController</h3>\n\n<pre><code>def update\n  @user = User.find params[:id]\n  if @user.authenticate(update_params[:current_password])\n    # update the user\n    # maybe check if the data are valid\n    @user.update(update_params)  \n  else\n    flash[:warning] = \"Please provide your password\"\n    @user.errors.add :current_password, \"invalid\"\n    render :edit\n  end\nend\n\ndef update_params\n  params.require(:user).permit(:current_password, :email)\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5715347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451690319, "creation_date": 1451405748, "last_edit_date": 1451424206, "question_id": 34514862, "link": "https://stackoverflow.com/questions/34514862/rails-how-to-require-the-current-password-to-allow-user-update", "title": "Rails how to require the current password to allow user update", "body": "<p>I am having a rather difficult problem i want to update the user profile only if they submit the current password.I am not using devise.And another post here at stack overflow didn't really help me. \nThis is my User controller code:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new\n  end\n\n  def show\n    @user = User.find(params[:id])\n    @user_posts = @user.posts if @user\n    if @user\n      if @user_posts\n        render 'show.html'\n      else\n        render 'show.html'\n      end\n    else\n      render file: 'public/404.html', status: 404, formats: [:html]\n    end\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      session[:user_id] = @user.id\n      redirect_to root_path\n      flash[:notice] = \"Successfully Signed up :-)\"\n    else\n      redirect_to signup_path\n      flash[:notice] = \"You didn't sign up successfully :-(\"\n    end\n  end\n\n  def edit\n    @user = User.find(params[:id])\n    if current_user.id = @user.id\n      render 'edit'\n    else\n      redirect_to @user\n    end\n  end\n\n  def update\n    @user = User.find(params[:id])\n    if @user.update_attributes(user_params)\n      flash[:notice] = \"Profile updated\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n  :password == :password_confirmation\n\n  private\n\n  def user_params\n    params.require(:user).permit(:user_name, :email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p>And this is my user.rb:</p>\n\n<pre><code>class User\n  has_secure_password\n  has_many :posts\n  has_many :comments\n\n  def admin?\n    self.role == 'admin'\n  end\n\n  def moderator?\n    self.role == 'moderator'\n  end    \nend\n</code></pre>\n\n<p>Please help because I have been working with this for a long time now. And the other solution about this topic here at stack overflow didn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 1220856, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b27334862db9ed1a738424607bc9aea7?s=128&d=identicon&r=PG", "display_name": "Michiel", "link": "https://stackoverflow.com/users/1220856/michiel"}, "edited": false, "score": 0, "creation_date": 1451409560, "post_id": 34515325, "comment_id": 56772683, "body": "Thanks!! I see what you mean. It&#39;s working now, I gave policy_scope the class Project instead of an instance: Pundit.policy_scope(nil, Project) :)"}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 1, "last_activity_date": 1451407576, "creation_date": 1451407576, "answer_id": 34515325, "question_id": 34514714, "link": "https://stackoverflow.com/questions/34514714/rails-undefined-method-none-for-activemodel/34515325#34515325", "title": "Rails undefined method none for ActiveModel", "body": "<p>You're calling <code>Pundit.policy_scope(nil, project)</code> with an <em>instance</em> of <code>Project</code> (the one you created in <code>let(:project)</code>). <code>ActiveRecord#none</code> is defined on the <em>class</em> <code>Project</code>, which is why it works in the <code>subject</code> block. Compare:</p>\n\n<pre><code>Project.none     #=&gt; #&lt;ActiveRecord:Relation []&gt;\nProject.new.none #=&gt; Your current error\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 1220856, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b27334862db9ed1a738424607bc9aea7?s=128&d=identicon&r=PG", "display_name": "Michiel", "link": "https://stackoverflow.com/users/1220856/michiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 34515325, "answer_count": 1, "score": 0, "last_activity_date": 1451407576, "creation_date": 1451405245, "question_id": 34514714, "link": "https://stackoverflow.com/questions/34514714/rails-undefined-method-none-for-activemodel", "title": "Rails undefined method none for ActiveModel", "body": "<p>I run into an undefined method error running testing the following code in a Pundit Policy.\nI'm teaching myself RoR so this could be just very obvious. However I have no idea why this error is occurring. The scope seems to be the Project class I want to test and seem to be an ActiveRecord class. Looking at the API documentation is should contain the method none but according to the test run is does not.</p>\n\n<pre><code>class ProjectPolicy &lt; ApplicationPolicy\n    class Scope &lt; Scope\n        def initialize(user, scope)\n            @user = user;\n            @scope = scope;\n        end \n\n        def resolve\n            return scope.none if user.nil?\n            return scope.all if user.admin?\n\n            scope.joins(:roles).where(roles: {user_id: user})\n        end\n    end\nend\n</code></pre>\n\n<p>This is the rspec test I run.</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe ProjectPolicy do\n\n    let(:user) { User.new }\n\n    subject { described_class }\n\n    context \"policy_scope\" do\n        subject { Pundit.policy_scope(user, Project) }\n\n        let!(:project) { FactoryGirl.create :project }\n        let!(:user) { FactoryGirl.create :user }\n\n        it \"is empty for anonymous users\" do\n            expect(Pundit.policy_scope(nil, project)).to be_empty\n        end\n    end\nend\n</code></pre>\n\n<p>This is the stack trace when running the test.</p>\n\n<pre><code>1) ProjectPolicy policy_scope is empty for anonymous users\n   Failure/Error: return scope.none if user.nil?\n\n   NoMethodError:\n     undefined method `none' for #&lt;Project:0x007fb0f45c0010&gt;\n   # /Users/mquellhorst/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/activemodel-4.2.4/lib/active_model/attribute_methods.rb:433:in `method_missing'\n   # ./app/policies/project_policy.rb:6:in `resolve'\n   # /Users/mquellhorst/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/pundit-1.0.1/lib/pundit.rb:49:in `policy_scope'\n   # ./spec/policies/project_policy_spec.rb:51:in `block (3 levels) in &lt;top (required)&gt;'\n   # /Users/mquellhorst/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/rspec-core-3.4.1/lib/rspec/core/example.rb:236:in `instance_exec'\n</code></pre>\n"}, {"tags": ["ruby", "json", "jira-rest-api", "dashing"], "answers": [{"comments": [{"owner": {"reputation": 94, "user_id": 5145055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d83774698253eee61b503055009b33?s=128&d=identicon&r=PG&f=1", "display_name": "fabianski", "link": "https://stackoverflow.com/users/5145055/fabianski"}, "edited": false, "score": 0, "creation_date": 1451405869, "post_id": 34514732, "comment_id": 56770487, "body": "Haha - awesome, thanks so much for that fast answer! It works now :) Will accept the answer as soon as sof allows me to ;)"}, {"owner": {"reputation": 94, "user_id": 5145055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d83774698253eee61b503055009b33?s=128&d=identicon&r=PG&f=1", "display_name": "fabianski", "link": "https://stackoverflow.com/users/5145055/fabianski"}, "edited": false, "score": 0, "creation_date": 1451406055, "post_id": 34514732, "comment_id": 56770606, "body": "Just noticed your edit, thanks for that tipp. I will have a look on it soon, for now I&#39;m just happy that the fix was that easy :D"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1451405910, "last_edit_date": 1451405910, "creation_date": 1451405323, "answer_id": 34514732, "question_id": 34514688, "link": "https://stackoverflow.com/questions/34514688/how-to-parse-json-data-for-dashing-io/34514732#34514732", "title": "How to parse JSON data for dashing.io", "body": "<p>You are one step from the result. As you have:</p>\n\n<pre><code>ss = [[{:summary=&gt;\"short summary one issue\"}], \n      [{:summary=&gt;\"short summary other issue\"}]]\n</code></pre>\n\n<p>just call flatten on it:</p>\n\n<pre><code>ss.flatten\n#\u21d2\u00a0ss = [{:summary=&gt;\"short summary one issue\"},\n#        {:summary=&gt;\"short summary other issue\"}]\n</code></pre>\n\n<p>As a matter of fact, you might get rid of redundant <code>:summary</code> and get an array of summaries (assuming <code>issues</code> contain the original <code>Hash</code>):</p>\n\n<pre><code>issues[:issues].first.map { |_, v| v[:fields][:summary] }\n#\u21d2  [\n#  [0] \"short summary one issue\",\n#  [1] \"short summary of the other issue\"\n# ]\n</code></pre>\n"}], "owner": {"reputation": 94, "user_id": 5145055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d83774698253eee61b503055009b33?s=128&d=identicon&r=PG&f=1", "display_name": "fabianski", "link": "https://stackoverflow.com/users/5145055/fabianski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 34514732, "answer_count": 1, "score": 0, "last_activity_date": 1451415208, "creation_date": 1451405151, "last_edit_date": 1451415208, "question_id": 34514688, "link": "https://stackoverflow.com/questions/34514688/how-to-parse-json-data-for-dashing-io", "title": "How to parse JSON data for dashing.io", "body": "<p>I'm currently working on a JSON parser for a dashing.io board. I am getting the information from an HTTP SSL connection to my webserver.  I do not know how to combine my output properly.</p>\n\n<p>This is an example of my data:</p>\n\n<pre><code>{ expand: \"schema, names\",\n  startAt: 0,\n  issues : [\n    0 : {\n        expand : \"information\"\n        id: \"1231425\"\n        fields : {\n            customfield: \"something\"\n            summary: \"short summary one issue\"\n         },\n     1 : {\n        expand : \"information\"\n        id: \"1231426\"\n        fields : {\n            customfield: \"something else\"\n            summary: \"short summary of the other issue\"\n         }\n   ]\n}\n</code></pre>\n\n<p>I want to create a widget which lists only the summaries of the issues. I managed to get a response which looks like:</p>\n\n<pre><code>[[{:summary=&gt;\"short summary one issue\"}], [{:summary=&gt;\"short summary other issue\"}]]\n</code></pre>\n\n<p>but I need a response which looks like:</p>\n\n<pre><code>[{:summary=&gt;\"short summary one issue\"}, {:summary=&gt;\"[short summary other issue\"}]\n</code></pre>\n\n<p>My source-code for the array is:</p>\n\n<pre><code>  (0 .. issue_count[:total] - 1).each do |i|\n      @issue_summaries[i] = issue_count\n         .map { |json_element| jiraParser.to_json_issue(i)}\n   end\n</code></pre>\n\n<p>My JiraParser class, which parses the response body, looks like:</p>\n\n<pre><code> class JiraParser\n   def initialize(json_data)\n     @data = json_data\n   end\n\n   def total\n     @data['total']\n   end\n\n   def summary(i)\n     @issues = @data['issues']\n     @issue = @issues[i]\n     @fields = @issue['fields']\n     @fields['summary']\n   end\n\n   def to_json_total\n     {:total =&gt; total}\n    end\n\n    def to_json_issue(i)\n      {:summary =&gt; summary(i)}\n    end\n  end\n</code></pre>\n\n<p>I'm a newbie in Ruby so I do not have a good knowledge about the datatypes and so on.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1451412058, "post_id": 34514672, "comment_id": 56773926, "body": "Are you using something like RVM? What\u2019s the result of running <code>which ruby</code>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451428390, "post_id": 34514672, "comment_id": 56781721, "body": "Add the output of <code>gem env</code> to your question, formatted for readability. Are you using RVM or rbenv? Do you have a separate Ruby loaded beyond the one in <code>&#47;usr&#47;bin&#47;ruby</code>? We have to guess at this point because you haven&#39;t told us enough to help."}, {"owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1451479529, "post_id": 34514672, "comment_id": 56800765, "body": "Tim Man - this has already been solved.  GDP2 had the answer."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1451413654, "post_id": 34516636, "comment_id": 56774688, "body": "Brilliant!  I didn&#39;t think it would be so easy.  Thanks."}, {"owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "reply_to_user": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1451413851, "post_id": 34516636, "comment_id": 56774786, "body": "@wesmat Sure thing. If you want to know more about why <code>#!&#47;usr&#47;bin&#47;env &lt;argument&gt;</code> is better than just a path, you should take a look at this answer on the Unix stack exchange: <a href=\"http://unix.stackexchange.com/a/12751/119644\">unix.stackexchange.com/a/12751/119644</a>"}, {"owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1451417685, "post_id": 34516636, "comment_id": 56776767, "body": "This is going to be useful beyond the ruby project.  A simple way to let scripts adapt to the current user env.  Very nice. Again, thanks."}, {"owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1452025455, "post_id": 34516636, "comment_id": 56986780, "body": "This worked great for irb - but now I am attempting to get ruby working in as a script in apache.  The same problem appears to be the issue. Is there a tweak to getting the env correct in apache?  The apache log show this:"}, {"owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "edited": false, "score": 0, "creation_date": 1452025674, "post_id": 34516636, "comment_id": 56986879, "body": "The apache log show this:  [Tue Jan 05 15:20:52 2016] [error]  /usr/bin/env: [Tue Jan 05 15:20:52 2016] [error]  ruby [Tue Jan 05 15:20:52 2016] [error]  : No such file or directory [Tue Jan 05 15:20:52 2016] [error]  [Tue Jan 05 15:20:52 2016] [error]  Premature end of script headers: hello.rb"}], "tags": [], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "is_accepted": true, "score": 1, "last_activity_date": 1451412919, "creation_date": 1451412919, "answer_id": 34516636, "question_id": 34514672, "link": "https://stackoverflow.com/questions/34514672/nokogiri-wont-load-in-script/34516636#34516636", "title": "Nokogiri won&#39;t load in script", "body": "<p>You might want to try using <code>#!/usr/bin/env ruby</code> instead of <code>#!/usr/bin/ruby</code> since IRB might be using a different Ruby than the one located at <code>/usr/bin/ruby</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 2072427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/66a93e7efde65b1328cf3b7da74670b3?s=128&d=identicon&r=PG", "display_name": "wesmat", "link": "https://stackoverflow.com/users/2072427/wesmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34516636, "answer_count": 1, "score": 0, "last_activity_date": 1451430918, "creation_date": 1451405087, "last_edit_date": 1451430918, "question_id": 34514672, "link": "https://stackoverflow.com/questions/34514672/nokogiri-wont-load-in-script", "title": "Nokogiri won&#39;t load in script", "body": "<p>I'm using Ruby for the first time and have to process XML files. Nokogiri appears to be the best way to accomplish this, but I am doing something wrong.  When I load in IRb things work great:</p>\n\n<pre><code>$ irb\n2.1.0 :001 &gt; require 'nokogiri'\n =&gt; true\n2.1.0 :002 &gt; exit\n</code></pre>\n\n<p>but when I attempt the same thing from a script I get an error:</p>\n\n<pre><code>$ ./sample.rb\n./sample.rb:3:in `require': no such file to load -- nokogiri (LoadError)\n    from ./sample.rb:3\n\n$ cat sample.rb\n#!/usr/bin/ruby\n\nrequire 'nokogiri'\n</code></pre>\n\n<p>What is different in the script environment that prevents loading?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1451405145, "post_id": 34514627, "comment_id": 56770063, "body": "Sharing <code>url</code> or, at least, the real file content / encoding could help us to answer."}, {"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1451405244, "post_id": 34514627, "comment_id": 56770130, "body": "@mudasobwa <a href=\"http://fokus.mk/feed/atom/\" rel=\"nofollow noreferrer\">fokus.mk/feed/atom</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451415398, "post_id": 34514627, "comment_id": 56775604, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. We need to see the minimal necessary supporting data (HTML) IN the question itself, not as a link. Links break, making your question make no sense to people searching for similar solutions in the future."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1451415644, "post_id": 34514627, "comment_id": 56775723, "body": "The problem isn&#39;t Ruby, at least not current Rubies as I can open the URL using RestClient and from inside IRb using OpenURI and see the Cyrillic characters correctly. What version of Ruby are you using? What encoding is your terminal set to? What OS are you on?"}, {"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1451415974, "post_id": 34514627, "comment_id": 56775904, "body": "I&#39;m using ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]. Running a vagrant box on a ubuntu/trusty64 .My terminal encoding is en_US.UTF-8, thanks @theTinMan"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1451419541, "post_id": 34514627, "comment_id": 56777679, "body": "Please put that information <i>in the question itself</i> not in comments. Putting information necessary for answering the question in comments forces potential answerers to read every comment and try to piece it all together."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451406749, "post_id": 34515013, "comment_id": 56771001, "body": "Did you try this? I&#39;m getting NoMethodError: undefined method `force_encoding&#39; for #&lt;Tempfile:/tmp/open-uri201 51229-2706-9fbmfq&gt; with the first solution and the 2nd solution gives me the same result: ?????????? ??????? ????? ?? ??????"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451410052, "post_id": 34515013, "comment_id": 56772919, "body": "I have tried the second one; first one depends on where monkeypatched <code>open</code> came from. BTW, what version of ruby do you use? I have the first variant updated to conform your <code>open</code>."}, {"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451412106, "post_id": 34515013, "comment_id": 56773959, "body": "I use ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]. I also tried the updated solution1 which works but still returns &quot;?????&quot; :/"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451412450, "post_id": 34515013, "comment_id": 56774097, "body": "This sounds weird to me. I would blame <code>FeedNormalizer</code>. Would you mind to try <a href=\"http://feedjira.com/\" rel=\"nofollow noreferrer\">feedjira.com</a> ? I just can\u2019t realize why the code above works for me and does not for you."}, {"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451412654, "post_id": 34515013, "comment_id": 56774196, "body": "I just used feedjira and still returns the same thing. I use vagrant to run trusty64, if that helps. I have no idea whats going"}, {"owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "edited": false, "score": 0, "creation_date": 1451416602, "post_id": 34515013, "comment_id": 56776260, "body": "Alright, i managed to get this working in the console when I ran through PowerShell instead of the cmd."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1451423771, "post_id": 34515013, "comment_id": 56779573, "body": "when you are prying enter <code>RUBY_VERSION</code> and show result"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1451410096, "last_edit_date": 1451410096, "creation_date": 1451406318, "answer_id": 34515013, "question_id": 34514627, "link": "https://stackoverflow.com/questions/34514627/how-to-parse-cyrillic-chars-in-ruby/34515013#34515013", "title": "How to parse cyrillic chars in ruby?", "body": "<pre><code>require 'net/http'\n\nfeed = FeedNormalizer::FeedNormalizer.parse(\n  File.read(open(\"http://fokus.mk/feed/atom/\")).force_encoding('UTF-8')\n)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>feed = FeedNormalizer::FeedNormalizer.parse(\n  Net::HTTP.get('fokus.mk', '/feed/atom/').force_encoding('UTF-8')\n)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 3210742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a5c1f332ab1c92fa9048008cb90bc5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/3210742/rogue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451410096, "creation_date": 1451404947, "last_edit_date": 1451405461, "question_id": 34514627, "link": "https://stackoverflow.com/questions/34514627/how-to-parse-cyrillic-chars-in-ruby", "title": "How to parse cyrillic chars in ruby?", "body": "<p>I'm fetching and storing rss feeds with cyrillic chars in them. But Ruby does not parse those and instead the output looks like this</p>\n\n<pre><code>[34] pry(main)&gt; f.title\n=&gt; \n\"???? ????? ??? ?????? ?? ??????? ? ???????????????????????????????????\"\n</code></pre>\n\n<p>How are you supposed to parse chars like that?</p>\n\n<p>I use feed-normalizer to parse rss</p>\n\n<pre><code>feed = FeedNormalizer::FeedNormalizer.parse open(\"http://fokus.mk/feed/atom/\")\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "lwrp"], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1451414600, "post_id": 34515016, "comment_id": 56775207, "body": "Workable, but using <code>action_class</code> is probably a lot clearer."}], "tags": [], "owner": {"reputation": 151, "user_id": 4114655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486113e993cbe167fec1a277dfacb447?s=128&d=identicon&r=PG", "display_name": "Tim H.", "link": "https://stackoverflow.com/users/4114655/tim-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1451406334, "creation_date": 1451406334, "answer_id": 34515016, "question_id": 34514530, "link": "https://stackoverflow.com/questions/34514530/using-a-helper-with-a-provider-less-12-5-style-custom-resource-lwrp-in-chef/34515016#34515016", "title": "Using a helper with a provider-less, 12.5-style custom resource (LWRP) in Chef", "body": "<p>You need to extend within the action block. When passing a block in like this, a different class than the top-level one is being yielded. Because you are using the function within block that was yielded that class, you need to extend that class to include the methods you need. </p>\n\n<p>You should be able to do that by adding <code>extend SampleModule</code> as the first line within the action block. </p>\n"}, {"comments": [{"owner": {"reputation": 742, "user_id": 1843864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5adbd699985cbc48f675057051824d8d?s=128&d=identicon&r=PG", "display_name": "Tom Wilson", "link": "https://stackoverflow.com/users/1843864/tom-wilson"}, "edited": false, "score": 0, "creation_date": 1478200445, "post_id": 34517067, "comment_id": 68069103, "body": "FYI modules included this way work in actions, but are not available to <code>load_current_value</code> method.  However you can <code>extend SampleModule</code> inside that method."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1451414578, "creation_date": 1451414578, "answer_id": 34517067, "question_id": 34514530, "link": "https://stackoverflow.com/questions/34514530/using-a-helper-with-a-provider-less-12-5-style-custom-resource-lwrp-in-chef/34517067#34517067", "title": "Using a helper with a provider-less, 12.5-style custom resource (LWRP) in Chef", "body": "<p>You can access the internal \"action class\" to add methods:</p>\n\n<pre><code>action_class do\n  include SampleModule\nend\n</code></pre>\n"}], "owner": {"reputation": 12058, "user_id": 19530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7df52257a48ba3ad861ea1d539739e3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxVT", "link": "https://stackoverflow.com/users/19530/maxvt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1451414578, "creation_date": 1451404603, "question_id": 34514530, "link": "https://stackoverflow.com/questions/34514530/using-a-helper-with-a-provider-less-12-5-style-custom-resource-lwrp-in-chef", "title": "Using a helper with a provider-less, 12.5-style custom resource (LWRP) in Chef", "body": "<p>cookbook/libraries/rn_helper.rb:</p>\n\n<pre><code>def sample_func\n  puts \"woohoo\"\nend\n</code></pre>\n\n<p>cookbook/resources/rn.rb:</p>\n\n<pre><code>action :create do\n  sample_func\nend  \n</code></pre>\n\n<p>The above code works perfectly. The below code does not:</p>\n\n<p>cookbook/libraries/rn_helper.rb:</p>\n\n<pre><code>module SampleModule\n  def sample_func\n    puts \"woohoo\"\n  end\nend\n</code></pre>\n\n<p>cookbook/resources/rn.rb:</p>\n\n<pre><code>extend SampleModule\n\naction :create do\n  sample_func\nend  \n</code></pre>\n\n<p>The error is as follows:\n     <code>NameError: custom resource[usr.bin.foo] had an error: NameError: No resource, method, or local variable named 'sample_func' for 'LWRP resource some_resource from cookbook some_cookbook action provider \"usr.bin.foo\"'</code></p>\n\n<p>This is a new-style, Chef 12.5 custom resource -- there is no provider file. Everything is described in the resource itself.</p>\n\n<p>How can I \"modularize\" my helpers using the new-style custom resource syntax?</p>\n"}, {"tags": ["javascript", "ruby", "html", "ruby-on-rails-4", "audio"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451406298, "post_id": 34514898, "comment_id": 56770756, "body": "can i put a rails tag &lt;%= $pathOfTheSound %&gt; into this js function?"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451406380, "post_id": 34514898, "comment_id": 56770805, "body": "no, you will have to embed that in the audio element in the page. what you can do is create a javascript variable containing the ids of the audio elements."}, {"owner": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451487741, "post_id": 34514898, "comment_id": 56805193, "body": "sorry for my ignorance ,but what does it mean IIFE? TY :D"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451488281, "post_id": 34514898, "comment_id": 56805461, "body": "an Imediately Invoked Function Expression, you can check this post for more info <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/IIFE\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Glossary/IIFE</a>"}, {"owner": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451555039, "post_id": 34514898, "comment_id": 56830269, "body": "Actually the script is not working, i mean that the browser is giving me this error: Uncaught TypeError: Cannor read property &#39;play&#39; of null. The script code is the same you gave me and every single &lt;audio&gt; has this code: &lt;audio preload &gt;&lt;source src=&quot;sound1.wav&quot; id=&quot;track1&quot;&gt;&lt;/source&gt;sound1&lt;/audio&gt;"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "edited": false, "score": 0, "creation_date": 1451555183, "post_id": 34514898, "comment_id": 56830342, "body": "That code should be loaded after the page is done loading. Either import the file containing it at the end (right before body is closed), or move it to the onload event. I will make an example with the onload solution. :)"}], "tags": [], "owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "is_accepted": true, "score": 0, "last_activity_date": 1451555566, "last_edit_date": 1451555566, "creation_date": 1451405881, "answer_id": 34514898, "question_id": 34514304, "link": "https://stackoverflow.com/questions/34514304/how-to-reproduce-a-sound-sequence-using-audio-tag-html5/34514898#34514898", "title": "How to reproduce a sound sequence using &lt;audio&gt; tag html5", "body": "<p>A javascript function that takes a list of <strong><a href=\"http://www.w3schools.com/tags/ref_av_dom.asp\" rel=\"nofollow\">audio</a></strong> elements and plays them with a pause of 1 second between them.</p>\n\n<p>Included at the end of the html document.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>(function() {\n  var track1 = document.getElementById('track1');\n  var track2 = document.getElementById('track2');\n  var track3 = document.getElementById('track3');\n\n  var trackList = [];\n\n  trackList.push(track1);\n  trackList.push(track2);\n  trackList.push(track3);\n\n  playTracks(trackList); // call the function so it starts playing the 1st song\n\n  ///\n  // plays a list of audio elements\n  function playTracks(tracks) {\n    var curentSong = tracks.shift(); // take out the 1st song in order to play it\n    curentSong.play(); // play it\n    curentSong.onended = function() { // when it ends\n      setTimeout(function() { // wait 1 second\n        playTracks(tracks); // play the rest of the list\n      }, 1000);\n    };\n  }\n})(); // IIFE so it starts as soon as it's loaded\n</code></pre>\n\n\n\n<p>Another option to start it would be on the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload\" rel=\"nofollow\">window.onload</a> event.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function startMusic() {\n  var track1 = document.getElementById('track1');\n  var track2 = document.getElementById('track2');\n  var track3 = document.getElementById('track3');\n\n  var trackList = [];\n\n  trackList.push(track1);\n  trackList.push(track2);\n  trackList.push(track3);\n\n  playTracks(trackList); // call the function so it starts playing the 1st song\n\n  ///\n  // plays a list of audio elements\n  function playTracks(tracks) {\n    var curentSong = tracks.shift(); // take out the 1st song in order to play it\n    curentSong.play(); // play it\n    curentSong.onended = function() { // when it ends\n      setTimeout(function() { // wait 1 second\n        playTracks(tracks); // play the rest of the list\n      }, 1000);\n    };\n  }\n}\n\n// start playing after the page loads\nwindow.onload = startMusic;\n</code></pre>\n\n\n\n<p>The audio elements can be generated by the server.</p>\n\n<pre><code>&lt;audio&gt;\n    &lt;source src=\"&lt;%= $pathOfTheSound %&gt;\"&gt;&lt;/source&gt;\n&lt;/audio&gt;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5727486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/17a2ebdd29341ee692fed620ae027cea?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/5727486/luke-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "closed_date": 1451453761, "accepted_answer_id": 34514898, "answer_count": 1, "score": 0, "last_activity_date": 1451555566, "creation_date": 1451403864, "last_edit_date": 1451404417, "question_id": 34514304, "link": "https://stackoverflow.com/questions/34514304/how-to-reproduce-a-sound-sequence-using-audio-tag-html5", "closed_reason": "Needs more focus", "title": "How to reproduce a sound sequence using &lt;audio&gt; tag html5", "body": "<p>Actually im new in Ruby on Rails 4 programming with HTML5 ,so here's the question:</p>\n\n<p>How can I reproduce a defined sequence of sounds on a Rails 4 application?\nI mean, I need to listen to different sounds reproduced one by one, and between each sound should be a time interval.</p>\n\n<p>Example:</p>\n\n<pre><code>START  \n&lt; sound 1 &gt;\n1 sec of silence \n&lt; sound 2 &gt;  \n1 sec of silence \n&lt; sound n &gt;  \nEND\n</code></pre>\n\n<p>Also I need that the sounds sequence must stat byitself/autoplay.\nHelp!! :D</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4359467, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a28752ce2acfaa9bc6ce3ed98650a75b?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4359467/matt"}, "edited": false, "score": 0, "creation_date": 1451404192, "post_id": 34514241, "comment_id": 56769488, "body": "Ok I see, I have to be more carefull. Thank you very much."}], "tags": [], "owner": {"reputation": 18774, "user_id": 1763929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jLvbN.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/1763929/vucko"}, "is_accepted": true, "score": 4, "last_activity_date": 1451403609, "creation_date": 1451403609, "answer_id": 34514241, "question_id": 34514203, "link": "https://stackoverflow.com/questions/34514203/link-to-duplicate-a-link-in-the-html/34514241#34514241", "title": "Link_to duplicate a link in the html", "body": "<p>You're closing your tags wrong. Change to:</p>\n\n<pre><code>&lt;% @sectors.each do |sector| %&gt;\n    &lt;li&gt;\n        &lt;%= link_to sectors_path(name: sector.name) do %&gt;\n            &lt;i class=\"&lt;%= sector.logo_awesome %&gt;\"&gt;&lt;/i&gt; &lt;%= sector.name %&gt;\n        &lt;% end %&gt;\n    &lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 1, "last_activity_date": 1451403662, "creation_date": 1451403662, "answer_id": 34514257, "question_id": 34514203, "link": "https://stackoverflow.com/questions/34514203/link-to-duplicate-a-link-in-the-html/34514257#34514257", "title": "Link_to duplicate a link in the html", "body": "<p>You can try </p>\n\n<pre><code> &lt;% @sectors.uniq.each do |sector| %&gt;\n       &lt;li&gt;\n        &lt;%= link_to sectors_path(name: sector.name) do %&gt;\n            &lt;i class=\"&lt;%= sector.logo_awesome %&gt;\"&gt;&lt;/i&gt; &lt;%= sector.name %&gt;\n       &lt;% end %&gt;\n       &lt;/li&gt;\n    &lt;% end %&gt;`\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4359467, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a28752ce2acfaa9bc6ce3ed98650a75b?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4359467/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 34514241, "answer_count": 2, "score": 2, "last_activity_date": 1451403662, "creation_date": 1451403456, "question_id": 34514203, "link": "https://stackoverflow.com/questions/34514203/link-to-duplicate-a-link-in-the-html", "title": "Link_to duplicate a link in the html", "body": "<p>My code</p>\n\n<pre><code>&lt;% @sectors.each do |sector| %&gt;\n   &lt;li&gt;&lt;%= link_to sectors_path(name: sector.name) do %&gt;\n    &lt;i class=\"&lt;%= sector.logo_awesome %&gt;\"&gt;&lt;/i&gt; &lt;%= sector.name %&gt;&lt;/li&gt;\n   &lt;% end %&gt;\n&lt;% end %&gt;`\n</code></pre>\n\n<p>When i post this code in my file, I have this HTML</p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"/sectors?name=General\"&gt;\n&lt;i class=\"fa fa-globe\"&gt;&lt;/i&gt; General&lt;/a&gt;&lt;/li&gt;\n\n&lt;a href=\"/sectors?name=General\"&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>I don't understand why the last <code>&lt;a href=\"/sectors?name=General\"&gt;&lt;/a&gt;</code> is put inside the html. The ruby code should only render the first part I guess ? (between the <code>&lt;li&gt;</code>)</p>\n\n<p>Do you have an idea ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1451403843, "post_id": 34514104, "comment_id": 56769290, "body": "Awesome!  What exactly does <code>(&amp;:present?)</code> mean?"}, {"owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1451404030, "post_id": 34514104, "comment_id": 56769382, "body": "<a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-present-3F\" rel=\"nofollow noreferrer\"><code>present?</code></a> means <code>!blank?</code>."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1451404389, "post_id": 34514104, "comment_id": 56769601, "body": "What about the <code>&amp;:</code>?"}, {"owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1451404627, "post_id": 34514104, "comment_id": 56769748, "body": "Here&#39;s <a href=\"http://stackoverflow.com/questions/1961030/ruby-ampersand-colon-shortcut\">a description of the <code>&amp;:foo</code> notation</a>."}], "tags": [], "owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "is_accepted": true, "score": 0, "last_activity_date": 1451403033, "creation_date": 1451403033, "answer_id": 34514104, "question_id": 34513945, "link": "https://stackoverflow.com/questions/34513945/ruby-save-variable-if-it-exists/34514104#34514104", "title": "Ruby save variable if it exists", "body": "<p>Here are a couple ways. On the next line:</p>\n\n<pre><code>next unless [product, version].all?(&amp;:present?)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>next if [product, version].any?(&amp;:nil?)\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34514104, "answer_count": 1, "score": 0, "last_activity_date": 1451403033, "creation_date": 1451402420, "question_id": 34513945, "link": "https://stackoverflow.com/questions/34513945/ruby-save-variable-if-it-exists", "title": "Ruby save variable if it exists", "body": "<p>I'm parsing an XML file with Nokogiri and I only want to save the variable if a value exists for it in the XML.  Right now, I'm having it rescued with a <code>nil</code>, which is generating the wrong results for me.  So, how can I set my statement to only save if both of these have actual values (not nil)?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>port.xpath(\"service\").each do |service|\r\n            product = service.at_xpath(\"@product\").value rescue nil\r\n            version = service.at_xpath(\"@version\").value rescue nil</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Currently, when the file is parsed both of the values could be nil, which then matches to everything!  Instead, I really need my parser to just pass over the values if it can't find a <code>product</code> &amp; <code>version</code> match.</p>\n\n<p>For instance, let's say the XML says that the service is <code>product vFTP</code> and <code>version 2.2.1</code>.  This is good, because it matches correctly (vFTP 2.2.1).</p>\n\n<p>However, if <code>version nil</code>, I now have a problem because it will match with all versions of vFTP now.</p>\n\n<p>An <code>if statement</code> to check for <code>defined?</code> seems logical, but for some reason that doesn't seem right to me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "sendgrid", "rest-client"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451402649, "post_id": 34513857, "comment_id": 56768661, "body": "<code>RestClient.get &#39;https:&#47;&#47;api.sendgrid.com&#47;v3&#47;templates&#39;, {:content_type =&gt; :json},{ :Authorization =&gt; &quot;Bearer #{api_key}&quot;}</code>"}, {"owner": {"reputation": 309, "user_id": 2101461, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35af18b5d4cbf7f22ccd98f4a4764442?s=128&d=identicon&r=PG", "display_name": "user2101461", "link": "https://stackoverflow.com/users/2101461/user2101461"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1451404081, "post_id": 34513857, "comment_id": 56769417, "body": "<code>ArgumentError: wrong number of arguments (3 for 1..2)</code>"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1451405569, "post_id": 34513857, "comment_id": 56770321, "body": "Your code looks OK. Have you definitely configured that API key to be authorised to use the necessary APIs in <a href=\"https://app.sendgrid.com/settings/api_keys\" rel=\"nofollow noreferrer\">Sendgrid settings</a>?"}, {"owner": {"reputation": 309, "user_id": 2101461, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35af18b5d4cbf7f22ccd98f4a4764442?s=128&d=identicon&r=PG", "display_name": "user2101461", "link": "https://stackoverflow.com/users/2101461/user2101461"}, "edited": false, "score": 0, "creation_date": 1451416920, "post_id": 34513857, "comment_id": 56776435, "body": "Yes. I also created a new key with access to everything to make sure it wasn&#39;t that."}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "edited": false, "score": 0, "creation_date": 1466286319, "post_id": 34518905, "comment_id": 63256716, "body": "Thank you this was useful, I think if you would like to add multiple contacts you can have it like this data = [{:email =&gt; &#39;email@website.com&#39;},{:email =&gt; &#39;email2@website.com&#39;}] and remove [] from [data].to_json. So, how can you add them to a specific list"}], "tags": [], "owner": {"reputation": 309, "user_id": 2101461, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35af18b5d4cbf7f22ccd98f4a4764442?s=128&d=identicon&r=PG", "display_name": "user2101461", "link": "https://stackoverflow.com/users/2101461/user2101461"}, "is_accepted": true, "score": 5, "last_activity_date": 1451422248, "creation_date": 1451422248, "answer_id": 34518905, "question_id": 34513857, "link": "https://stackoverflow.com/questions/34513857/rails-how-to-add-contacts-to-sendgrid-marketing-campaigns-via-api/34518905#34518905", "title": "Rails - How to add contacts to SendGrid marketing campaigns via API", "body": "<p>I ended up figuring it out. For future reference, here's the code that worked...</p>\n\n<pre><code>require 'rest_client'\napi_key = 'YOUR_API_KEY'\nheaders = {'Authorization' =&gt; \"Bearer #{api_key}\"}\ndata = {:email =&gt; 'email@website.com'}\nresponse = RestClient.post 'https://api.sendgrid.com/v3/contactdb/recipients', [data].to_json, headers\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2538, "user_id": 2461559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/56685128c4be2a8f90a03e255ef96d47?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2461559/will"}, "is_accepted": false, "score": 1, "last_activity_date": 1503450432, "creation_date": 1503450432, "answer_id": 45829106, "question_id": 34513857, "link": "https://stackoverflow.com/questions/34513857/rails-how-to-add-contacts-to-sendgrid-marketing-campaigns-via-api/45829106#45829106", "title": "Rails - How to add contacts to SendGrid marketing campaigns via API", "body": "<p>To add marketing contacts to your SendGrid account via the API, \nsee the documentation at <a href=\"https://sendgrid.api-docs.io/v3.0/contacts-api-recipients/add-recipients\" rel=\"nofollow noreferrer\">https://sendgrid.api-docs.io/v3.0/contacts-api-recipients/add-recipients</a></p>\n\n<p>You can see sample code in the \"code generation\" section of the page.</p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\n\nurl = URI(\"https://api.sendgrid.com/v3/contactdb/recipients\")\n\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(url)\nrequest[\"authorization\"] = 'Bearer &lt;&lt;YOUR_API_KEY&gt;&gt;'\nrequest[\"content-type\"] = 'application/json'\nrequest.body = \"[{\\\"email\\\":\\\"example@example.com\\\",\\\"first_name\\\":\\\"\\\",\\\"last_name\\\":\\\"User\\\",\\\"age\\\":25},{\\\"email\\\":\\\"example2@example.com\\\",\\\"first_name\\\":\\\"Example\\\",\\\"last_name\\\":\\\"User\\\",\\\"age\\\":25}]\"\n\nresponse = http.request(request)\nputs response.read_body\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 2101461, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35af18b5d4cbf7f22ccd98f4a4764442?s=128&d=identicon&r=PG", "display_name": "user2101461", "link": "https://stackoverflow.com/users/2101461/user2101461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1563, "favorite_count": 0, "accepted_answer_id": 34518905, "answer_count": 2, "score": 1, "last_activity_date": 1503450432, "creation_date": 1451402070, "last_edit_date": 1503424212, "question_id": 34513857, "link": "https://stackoverflow.com/questions/34513857/rails-how-to-add-contacts-to-sendgrid-marketing-campaigns-via-api", "title": "Rails - How to add contacts to SendGrid marketing campaigns via API", "body": "<p>I need to make HTTP get and post requests with SendGrid to add contacts to our account, however there doesn't seem to be a gem for their email marketing functionality.</p>\n\n<p>It boils down to making a few requests however I can't get past their authentication step.</p>\n\n<p><a href=\"https://sendgrid.com/docs/API_Reference/Web_API_v3/Marketing_Campaigns/contactdb.html#Add-Single-Recipient-POST\" rel=\"nofollow noreferrer\">They say to do this</a></p>\n\n<pre><code>curl -X \"GET\" \"https://api.sendgrid.com/v3/templates\" -H \"Authorization: Bearer Your.API.Key-HERE\" -H \"Content-Type: application/json\"\n</code></pre>\n\n<p>And using the Rest-Client gem I'm trying to make the authentication request like so...</p>\n\n<pre><code>username = 'username'\napi_key = 'SG.MY_API_KEY'\nkey = Base64.encode64(username + \":\" + api_key)\nheaders = {\"Authorization\" =&gt; \"Bearer #{key}\", \"Content-Type\" =&gt; \"application/json\"}\nresponse = RestClient.get 'https://api.sendgrid.com/v3/templates', headers\n</code></pre>\n\n<p>which returns...</p>\n\n<pre><code>RestClient::Unauthorized: 401 Unauthorized: {\"errors\":[{\"field\":null,\"message\":\"authorization required\"}]}\n</code></pre>\n\n<p>The ultimate objective of <a href=\"https://sendgrid.com/docs/API_Reference/Web_API_v3/Marketing_Campaigns/contactdb.html#Add-Single-Recipient-POST\" rel=\"nofollow noreferrer\">using their API is to add contacts</a>.</p>\n\n<p>How am I incorrectly making this get request?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "active-model-serializers"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451403025, "post_id": 34513796, "comment_id": 56768857, "body": "Please check the content of <code>@centers</code> - it may be a hash and hence you get the output that you are seeing."}, {"owner": {"reputation": 1856, "user_id": 861202, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001144956351/picture?type=large", "display_name": "mandar.gokhale", "link": "https://stackoverflow.com/users/861202/mandar-gokhale"}, "edited": false, "score": 0, "creation_date": 1451403227, "post_id": 34513796, "comment_id": 56768961, "body": "I think you can pass root name in the call CentersCollectionSerializer.new(Center.all, root: &#39;centers&#39;).to_json"}, {"owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451403265, "post_id": 34513796, "comment_id": 56768981, "body": "@WandMaker Nope, it&#39;s an ActiveRecord::Relation object. <code>@centers = Center.all</code>"}, {"owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "reply_to_user": {"reputation": 1856, "user_id": 861202, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001144956351/picture?type=large", "display_name": "mandar.gokhale", "link": "https://stackoverflow.com/users/861202/mandar-gokhale"}, "edited": false, "score": 0, "creation_date": 1451403614, "post_id": 34513796, "comment_id": 56769175, "body": "@madyrockss Yes, I know this will work I&#39;ve dig into the active_model_serializers gem . But I&#39;m not passing anything in the options hash in the Controller which uses the same serializer class to render json response. All I do is <code>render json: @centers, serializer: CentersCollectionSerializer</code>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451418922, "post_id": 34513796, "comment_id": 56777362, "body": "What is the name of controller? &quot;centers&quot; is most likely plural form of controller as per my tests"}, {"owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451466239, "post_id": 34513796, "comment_id": 56793730, "body": "@WandMaker sorry I might not understand you properly but the name of the controller class is CentersController if that is your question"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1451466358, "post_id": 34513796, "comment_id": 56793790, "body": "@VlatkoRistovski When I was testing with a <code>WelcomeController</code>, the URL had word <code>welcome&#47;index</code> in it - and I noticed that JSON used <code>welcome</code> as root name - hence, I feel that the serializer gem may be using controller name as derived from URL"}], "owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451405941, "creation_date": 1451401884, "last_edit_date": 1451403218, "question_id": 34513796, "link": "https://stackoverflow.com/questions/34513796/active-model-serializer-arrayserializer-explicitly-instantiate-with-to-json-with", "title": "Active Model Serializer ArraySerializer explicitly instantiate with to_json without root", "body": "<p>I'm using the gem 'active_model_serializers' version 0.9.3. I will minimize my model for simplicity. I have a Center model with attributes id, title and a CenterSerializer, and also CentersCollectionSerializer.</p>\n\n<p>Now my question is when I instantiate from CenterSerializer to serialize a single center and call to_json on the instante i get this:</p>\n\n<pre><code>CenterSerializer.new(Center.first).to_json\n\"{\\\"center\\\":{\\\"title\\\":\\\"ExampleTitle\\\"}}\"\n</code></pre>\n\n<p>which is what I should get cause i have to have the root node. The same response is returned when make curl request to the show action of the specific center. I get accepted behavior when i make a curl request to the index action of the centers getting a json response:</p>\n\n<pre><code>\"{\\\"centers\\\":[\n{\\\"title\\\":\\\"ExampleTitle\\\"},\n{\\\"title\\\":\\\"ExampleTitle2\\\"},\n{\\\"title\\\":\\\"ExampleTitle3\\\"}\n}]\"\n</code></pre>\n\n<p>But if i do </p>\n\n<p><code>CentersCollectionSerializer.new(Center.all).to_json</code> </p>\n\n<p>i get the same thing but without the root node:</p>\n\n<pre><code>    \"[{\\\"title\\\":\\\"ExampleTitle\\\"},\n    {\\\"title\\\":\\\"ExampleTitle2\\\"},\n    {\\\"title\\\":\\\"ExampleTitle3\\\"}}]\"\n</code></pre>\n\n<p>What am I doing wrong and what is happening, that he explicit to_json call on an array serializer instance gives response without root node, and the request to the index action using </p>\n\n<blockquote>\n  <p>respond_with @centers</p>\n</blockquote>\n\n<p>(with responders gem) or </p>\n\n<blockquote>\n  <p>render json: @centers</p>\n</blockquote>\n\n<p>gets the response with the root node?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "ssh"], "comments": [{"owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451401964, "post_id": 34513550, "comment_id": 56768252, "body": "because ssh-agent does not make much sense for scripts. It usually starts as a part of X-session you usually don&#39;t have such on server. What is actually the problem you want to solve?"}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451402056, "post_id": 34513550, "comment_id": 56768322, "body": "I want to be able to add the newly generated ssh keys using <code>ssh-add id_rsa_someuser</code> to the list and make it persistent even after restart."}, {"owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451402179, "post_id": 34513550, "comment_id": 56768390, "body": "<code>ssh-agent</code> is not persistent store between reboots. What are you trying to achieve by doing this (we need to go deeper)?"}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451402469, "post_id": 34513550, "comment_id": 56768564, "body": "I want to clone and pull code from a person&#39;s git repository, that may be private in which case I am generating a pair of ssh keys and adding the public key to the person&#39;s github account using the API."}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451402900, "post_id": 34513550, "comment_id": 56768787, "body": "It&#39;s like the server will be accessing 5-10 people&#39;s private github repositories by creating ssh keys for all of them and adding the public keys into their account. Example: <a href=\"https://gist.github.com/jexchan/2351996\" rel=\"nofollow noreferrer\">gist.github.com/jexchan/2351996</a>"}, {"owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451403225, "post_id": 34513550, "comment_id": 56768959, "body": "So in this case you would end up with tens keys for tens users in your agent. How would you differentiate them in <code>ssh-agent</code>? I would rather recommend you to use <code>ssh_config</code> or give these keys on command-line for git tools."}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451403341, "post_id": 34513550, "comment_id": 56769023, "body": "I am also keeping a ssh_config as mentioned in the link above. But how can I use the keys unless its been added to your <code>ssh-agent</code>? I need to add them somehow using <code>ssh add</code>, don&#39;t I?"}, {"owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451403502, "post_id": 34513550, "comment_id": 56769121, "body": "No, if they don&#39;t have to. Did you try it? I don&#39;t know who wrote that article, but there are more things that do not make much sense. If you have full path in the config and use it, then you don&#39;t need agent."}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "edited": false, "score": 0, "creation_date": 1451403611, "post_id": 34513550, "comment_id": 56769173, "body": "Ok, great. I&#39;ll give it a try. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "edited": false, "score": 0, "creation_date": 1451404105, "post_id": 34514336, "comment_id": 56769433, "body": "Yeah, Just checked. It&#39;s working without ssh-adding the private keys to your keychain. Thanks."}], "tags": [], "owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "is_accepted": true, "score": 1, "last_activity_date": 1451404179, "last_edit_date": 1592644375, "creation_date": 1451403990, "answer_id": 34514336, "question_id": 34513550, "link": "https://stackoverflow.com/questions/34513550/running-eval-ssh-agent-for-ruby-system-call/34514336#34514336", "title": "Running eval ssh-agent for ruby system call", "body": "<blockquote>\n<p>I want to clone and pull code from a person's git repository, that may be private in which case I am generating a pair of ssh keys and adding the public key to the person's github account using the API.</p>\n<p>It's like the server will be accessing 5-10 people's private github repositories by creating ssh keys for all of them and adding the public keys into their account. Example: <a href=\"http://gist.github.com/jexchan/2351996\" rel=\"nofollow noreferrer\">http://gist.github.com/jexchan/2351996</a></p>\n</blockquote>\n<p>To access remote repository using git you don't need <code>ssh-agent</code>. Specifying the keys in the <code>ssh_config</code> such as</p>\n<pre><code>Host github.com-user1\n  HostName github.com\n  IdentityFile ~/.ssh/id_rsa_user1\n</code></pre>\n<p>and then cloning using:</p>\n<pre><code>git clone git@github.com-user1:user1/whatever.git whatever\n</code></pre>\n<p>works the same way. But make sure the config file is accessible.</p>\n<p>Also using ssh-agent does not scale, since the agent is offering all the keys that he has, regardless the user (in the linked example). If you grow up over ~5 repositories, you would start seeing authentication failures.</p>\n"}], "owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 34514336, "answer_count": 1, "score": 1, "last_activity_date": 1451404179, "creation_date": 1451400993, "last_edit_date": 1451402193, "question_id": 34513550, "link": "https://stackoverflow.com/questions/34513550/running-eval-ssh-agent-for-ruby-system-call", "title": "Running eval ssh-agent for ruby system call", "body": "<p>I am trying to generate a ssh key for a user entered email id using rails.</p>\n\n<p>In the action, I'm running all the commands needed to do the process using <code>system()</code> call.</p>\n\n<p>Locally on Ubuntu 14.04, everything seems to work fine. But on Ubuntu Server 14.04 on AWS, the key is generated successfully but it fails on <code>ssh-add</code>.</p>\n\n<p><strong>The problem:</strong></p>\n\n<p>On my local system, <code>ssh-agent</code> is up and running all the time, but on the server it never starts automatically for each shell session. Which is the reason why <code>ssh-add</code> fails on server.</p>\n\n<p>For that, I added some code in server's <code>.bash_profile</code> file which would start the <code>ssh-agent</code> on every session. Now, the ssh-agent runs on every time I set up a session with the server via ssh, but it won't run for th ruby's <code>system()</code> call.</p>\n\n<p>I was doing:</p>\n\n<pre><code>system('ssh-add id_rsa')\n</code></pre>\n\n<p>which said <code>Could not open a connection to your authentication agent</code>\n. So, next thing I did was this:</p>\n\n<pre><code>system('eval \"$(ssh-agent -s)\" &amp; ssh-add id_rsa')\n</code></pre>\n\n<p>But still not able to resolve the problem.</p>\n\n<p>I don't know why locally I didn't need to start the <code>ssh-agent</code> manually and all of the code ran without any problem. And how can I make <code>ssh-agent</code> work as it is working on my local system.</p>\n\n<p>I want to be able to add the newly generated ssh key using <code>ssh-add some-key</code> and make it persistent so that I don't have to add that again later if I reboot the server. I am doing all this in a rails method which is issuing all the commands using <code>system()</code> calls.</p>\n\n<p>Help would be very appreciated. Thanks.</p>\n"}, {"tags": ["ruby", "linux", "ubuntu-14.04"], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 2811859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5562466b95d353fc2c4ab6d4e0f897f9?s=128&d=identicon&r=PG", "display_name": "hugomarisco", "link": "https://stackoverflow.com/users/2811859/hugomarisco"}, "is_accepted": true, "score": 2, "last_activity_date": 1451401165, "creation_date": 1451401165, "answer_id": 34513599, "question_id": 34513483, "link": "https://stackoverflow.com/questions/34513483/stuck-with-environmental-variables/34513599#34513599", "title": "Stuck with environmental variables", "body": "<p>You have two options:</p>\n\n<ul>\n<li>Add your environment variables to <code>/etc/environment</code> so they become persistent and system-wide available (more info here: <a href=\"https://help.ubuntu.com/community/EnvironmentVariables\" rel=\"nofollow\">https://help.ubuntu.com/community/EnvironmentVariables</a>)</li>\n<li>Add those environment variables in Eclipse project configuration (I don't use Eclipse, but it should be located in <code>Run -&gt; Run Configurations... and Select tab \"Environment\"</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 1, "last_activity_date": 1451402238, "last_edit_date": 1495535299, "creation_date": 1451401605, "answer_id": 34513731, "question_id": 34513483, "link": "https://stackoverflow.com/questions/34513483/stuck-with-environmental-variables/34513731#34513731", "title": "Stuck with environmental variables", "body": "<p>Just to add an explanation of why you're seeing this behaviour:</p>\n\n<p>When you <code>export</code> a variable it becomes visible to any <a href=\"https://en.wikipedia.org/wiki/Child_process\" rel=\"nofollow noreferrer\">child processes</a>. As you've launched <code>irb</code> from the shell in the terminal <code>irb</code> is a child of the shell so the value is visible. However, if you launch Eclipse separately e.g. from a different terminal or from the GUI then the value will not be visible from there.</p>\n\n<p><a href=\"https://stackoverflow.com/users/2811859/hugomarisco\">hugomarisco's</a> suggestions are 2 good approaches to solving this.</p>\n"}], "owner": {"reputation": 3663, "user_id": 3475946, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/364b5e22e11170570a92e067d6f9098f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/3475946/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 34513599, "answer_count": 2, "score": 1, "last_activity_date": 1451402238, "creation_date": 1451400771, "question_id": 34513483, "link": "https://stackoverflow.com/questions/34513483/stuck-with-environmental-variables", "title": "Stuck with environmental variables", "body": "<p>Ubuntu 14.04 LTS.\nRails 4.2.5</p>\n\n<p>In Ubuntu terminal I did:</p>\n\n<pre><code>1. FOOD2FORK_KEY=\"359c93f1c292c674d95237ca05fe87cc\"\n2. export FOOD2FORK_KEY\n</code></pre>\n\n<p>Now I can check:\nset | grep FOOD2FORK_KEY</p>\n\n<p>And get </p>\n\n<pre><code>FOOD2FORK_KEY=359c93f1c292c674d95237ca05fe87cc\n_=FOOD2FORK_KEY\n</code></pre>\n\n<p>If in the terminal I launch irb and write:\nputs ENV[\"FOOD2FORK_KEY\"]||\"It is nill\"</p>\n\n<p>I get:</p>\n\n<pre><code>359c93f1c292c674d95237ca05fe87cc\n=&gt; nil\n</code></pre>\n\n<p>But if I try to run a test.rb in Eclipse, I get \"It is nill\".\nIn other words, my project needs this environmental variable to be set.\nBut somehow I can't cope with this problem.</p>\n\n<p>Could you help me understand what and why this environmental var acts like that? And how can I make it visible in my project? </p>\n\n<p>Thank you in advande.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "coffeescript"], "answers": [{"comments": [{"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1451462775, "post_id": 34513282, "comment_id": 56792069, "body": "but if the status is again 202 I need to remake it(there can be an undefinite number of 202 answers since I am waiting for a document download, I need to repeat this call every 3 seconds or something"}, {"owner": {"reputation": 3075, "user_id": 2551482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoksQ.jpg?s=128&g=1", "display_name": "Sudhansu Choudhary", "link": "https://stackoverflow.com/users/2551482/sudhansu-choudhary"}, "reply_to_user": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1451464000, "post_id": 34513282, "comment_id": 56792594, "body": "So from what i understand is, if the status is 202 (doesn&#39;t matter how many times), each time you got to wait for 3 seconds and make a fresh call again? Is my understanding correct?"}, {"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1451464427, "post_id": 34513282, "comment_id": 56792807, "body": "function makeRequest(theUrl) {   setTimeout(httpGetAsync(theUrl), 3000); }; something like this :D"}, {"owner": {"reputation": 3075, "user_id": 2551482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoksQ.jpg?s=128&g=1", "display_name": "Sudhansu Choudhary", "link": "https://stackoverflow.com/users/2551482/sudhansu-choudhary"}, "reply_to_user": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 1, "creation_date": 1451473015, "post_id": 34513282, "comment_id": 56797339, "body": "hi @LucianTarna I have made some changes, see if this answers your concerns :)"}], "tags": [], "owner": {"reputation": 3075, "user_id": 2551482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoksQ.jpg?s=128&g=1", "display_name": "Sudhansu Choudhary", "link": "https://stackoverflow.com/users/2551482/sudhansu-choudhary"}, "is_accepted": true, "score": 2, "last_activity_date": 1451473071, "last_edit_date": 1451473071, "creation_date": 1451400029, "answer_id": 34513282, "question_id": 34513011, "link": "https://stackoverflow.com/questions/34513011/making-a-javascript-loop-request-in-rails-view/34513282#34513282", "title": "Making a Javascript Loop request in rails view", "body": "<p><strong>Update</strong> As per the comments below</p>\n\n<p>Can you try this,</p>\n\n<pre><code>function httpGetAsync(theUrl){\n      var xmlHttp = new XMLHttpRequest();\n      xmlHttp.onreadystatechange = function() {\n        if(xmlHttp.readyState == 4) {\n          if (xmlHttp.status == 200) {\n            redirect_to_main();\n          }\n          else if(xmlHttp.status == 202) {\n           setTimeout(\n            makeRequest(theUrl),\n             3000);   \n          }\n          else {\n            make_error_css();\n          }\n        }\n      }\n      //makeRequest(xmlHttp, theUrl);\n      xmlHttp.open(\"GET\", theUrl, true); // true for asynchronous\n      xmlHttp.send(null);\n\n    }\n\nfunction makeRequest(theUrl){\n           httpGetAsync(theUrl);\n        }\n</code></pre>\n\n<p><code>makeRequest()</code> is where the request is made again if the status is 202.</p>\n"}], "owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 34513282, "answer_count": 1, "score": 0, "last_activity_date": 1451473071, "creation_date": 1451399069, "question_id": 34513011, "link": "https://stackoverflow.com/questions/34513011/making-a-javascript-loop-request-in-rails-view", "title": "Making a Javascript Loop request in rails view", "body": "<p>I need to download a file from a link I am given. In order to do this I must make a get request to that link. It can have 3 states:<br>\n1. Code 200 and the download will begin once the request landed<br>\n2. Code 202 which means I must repeat the request because the file is being uploaded<br>\n3. Error code and I must create a dom element that shows that.</p>\n\n<p>How it works:<br>\nI make a request to this rails action:  </p>\n\n<pre><code>def by_month\n    export_form = Commissions::ByMonthForm.new(current_user)\n    if export_form.submit(params)\n      @export = export_form.export\n    else\n      show_errors export_form.errors\n    end\n  end \n</code></pre>\n\n<p>This in turn starts the file upload. Which I don't know when it's ready(depending on how big the file it is). Now I must create a javascript get request to a link that follows the indications I have given at the beginning of the post. And integrate it in the by_month.html.erb view from rails . The javascript I managed to write is:</p>\n\n<pre><code>function httpGetAsync(theUrl){\n      var xmlHttp = new XMLHttpRequest();\n      xmlHttp.onreadystatechange = function() {\n        if(xmlHttp.readyState == 4) {\n          if (xmlHttp.status == 200) {\n            redirect_to_main();\n          }\n          else if(xmlHttp.status == 202) {\n            httpGetAsync(theUrl);   \n          }\n          else {\n            make_error_css();\n          }\n        }\n      }\n      xmlHttp.open(\"GET\", theUrl, true); // true for asynchronous\n      xmlHttp.send(null);\n    }\n</code></pre>\n\n<p>However I don't think it works. Any ideas of how I can do this?(redirect_to_main and make_error_css are functions that I will implement myself later).</p>\n"}, {"tags": ["ruby", "rspec", "capybara", "select2"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1451411398, "post_id": 34512871, "comment_id": 56773617, "body": "What does your log show is being submitted to the create action?"}], "answers": [{"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 13, "user_id": 3792875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nVnQS.jpg?s=128&g=1", "display_name": "PatrickLoeve", "link": "https://stackoverflow.com/users/3792875/patrickloeve"}, "edited": false, "score": 0, "creation_date": 1451489583, "post_id": 34516442, "comment_id": 56806110, "body": "@user3792875 glad to hear, please accept the answer then."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1451412094, "creation_date": 1451412094, "answer_id": 34516442, "question_id": 34512871, "link": "https://stackoverflow.com/questions/34512871/select2-feature-test-with-capybara/34516442#34516442", "title": "Select2 feature test with Capybara", "body": "<p>In the question you mention you are using a select2, but then you are calling set on what I assume is a regular select element.  When you are using JS widgets they will often overwrite the values of the hidden elements they build off on a submit event of the form they're in.  Because of this it is probable the value you're setting is getting overridden.  Rather than set the values of hidden elements (which most capybara drivers don't allow for this specific reason - not sure which driver you're using) you need to replicate the users behaviors.  From the select2 examples page it appears the select2 widget is built from a span element and a ul list with the options in it.  Therefore something along the lines of</p>\n\n<pre><code>find('span.select2').click # the selector may need to be more specific to locate the exact span, without your html I don't know what that selector would be\nfind('li', text: 'Le Garage - Amsterdam').click\n</code></pre>\n\n<p>This would click on the select2 element opening the dropdown, and then click on the li element with the correct text - thereby selecting it.</p>\n"}], "owner": {"reputation": 13, "user_id": 3792875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nVnQS.jpg?s=128&g=1", "display_name": "PatrickLoeve", "link": "https://stackoverflow.com/users/3792875/patrickloeve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 34516442, "answer_count": 1, "score": 0, "last_activity_date": 1451412094, "creation_date": 1451398498, "question_id": 34512871, "link": "https://stackoverflow.com/questions/34512871/select2-feature-test-with-capybara", "title": "Select2 feature test with Capybara", "body": "<p>I'm trying to write a rspec feature test with capybara but,\nI have some trouble with a test on a select2 element.\nsee my test code.\nUsing feature test with capybara </p>\n\n<pre><code>feature \"Backend  Landing Pages\" do\n\nlet!(:landing_page) { create(:landing_page, country: country) }\nlet!(:country) { create(:country, id: 2) }\nlet!(:restaurant) { create(:restaurant_with_locale) }\nlet!(:landing_page_restaurant) { create(:landing_page_restaurant,landing_page: landing_page, restaurant: restaurant) }\n\nbefore(:each) do\nlogin\nclick_on(\"Website\")\nclick_on(\"Landing Pages\")\nend\n\nscenario \"user creates a landingpage\", js: true  do\n first(:link,\"netherlands\").click\n fill_in \"landing_page_domain\", with: landing_page.domain\n fill_in \"landing_page_slug_nl\", with: landing_page.slug_nl\n fill_in \"landing_page_slug_en\", with: landing_page.slug_en\n fill_in \"landing_page_header_title\", with: landing_page.header_title\n fill_in \"landing_page_title\", with: landing_page.title\n attach_file \"landing_page_header_image\",( Rails.root + 'app/assets/images/site_builder/image3.jpg')\n page.find('#landing_page_restaurant_select').set('Le Garage - Amsterdam')\n page.save_screenshot (\"test.png\")\n click_on(\"Save\")\n expect(page).to have_content(\"successfully created\")\n expect(LandingPage.count).to eq 2\n expect(LandingPage.last.landing_page_restaurants.count).to eq 1\n\nend\n\n scenario \"user edits a LandingPage\", js: true do\n  click_on(\"Edit\")\n  expect(page).to have_content 'Edit landing Page '\n  page.save_screenshot (\"edit.png\")\n end\nend\n</code></pre>\n\n<p>I'm getting the next error.</p>\n\n<pre><code>Failures:\n\n  1) Backend  Landing Pages user creates a landingpage\n  Failure/Error: expect(LandingPage.last.landing_page_restaurants.count).to eq 1\n\n   expected: 1\n        got: 0\n\n   (compared using ==)\n # ./spec/features/backend/landing_pages_spec.rb:33:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Who can see what im doing wrong here \ncant figure out why the restaurant is not connected to the landingPages</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 2, "creation_date": 1451397621, "post_id": 34512560, "comment_id": 56765945, "body": "You are missing the g++ compiler. <code>apt-get install build-essential</code>."}, {"owner": {"reputation": 259, "user_id": 4287227, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1573994985/picture?type=large", "display_name": "Louie Cubero", "link": "https://stackoverflow.com/users/4287227/louie-cubero"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1451398418, "post_id": 34512560, "comment_id": 56766353, "body": "It worked! Thank you very much! :)"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 4287227, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1573994985/picture?type=large", "display_name": "Louie Cubero", "link": "https://stackoverflow.com/users/4287227/louie-cubero"}, "edited": false, "score": 0, "creation_date": 1451398422, "post_id": 34512690, "comment_id": 56766356, "body": "It worked! Thank you very much! :)"}, {"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1487167428, "post_id": 34512690, "comment_id": 71660730, "body": "This works.. Thanks for saving my time.."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1451397863, "creation_date": 1451397863, "answer_id": 34512690, "question_id": 34512560, "link": "https://stackoverflow.com/questions/34512560/cannot-install-therubyracer-in-ubuntu-14-04/34512690#34512690", "title": "Cannot install therubyracer in Ubuntu 14.04", "body": "<p>Its complaining that you don't have g++ installed yet.  </p>\n\n<p>I think you need to first do a <code>sudo apt-get install g++</code> </p>\n"}], "owner": {"reputation": 259, "user_id": 4287227, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1573994985/picture?type=large", "display_name": "Louie Cubero", "link": "https://stackoverflow.com/users/4287227/louie-cubero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1076, "favorite_count": 0, "closed_date": 1451402129, "accepted_answer_id": 34512690, "answer_count": 1, "score": 2, "last_activity_date": 1451397863, "creation_date": 1451397440, "question_id": 34512560, "link": "https://stackoverflow.com/questions/34512560/cannot-install-therubyracer-in-ubuntu-14-04", "closed_reason": "Not suitable for this site", "title": "Cannot install therubyracer in Ubuntu 14.04", "body": "<p>I've searched many solutions already, unfortunately, none of them worked out.\nHere's what I get when I run bundle install: </p>\n\n<pre><code>Installing therubyracer 0.12.2 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /home/louiecubero/.rbenv/versions/2.2.4/bin/ruby -r ./siteconf20151229-3880-cwrbql.rb extconf.rb\nchecking for main() in -lpthread... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling constants.cc\nmake: g++: Command not found\nmake: *** [constants.o] Error 127\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/louiecubero/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/therubyracer-0.12.2 for inspection.\nResults logged to /home/louiecubero/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/extensions/x86_64-linux/2.2.0-static/therubyracer-0.12.2/gem_make.out\n</code></pre>\n\n<p>The ruby version that I use is:</p>\n\n<pre><code>ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux]\n</code></pre>\n\n<p>And my rails version is: rails 4.2.5</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1451396665, "post_id": 34512233, "comment_id": 56765453, "body": "you could use  <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">Eager Loading</a>"}, {"owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1451410818, "post_id": 34512233, "comment_id": 56773338, "body": "@Vinay, <code>Eager Loading</code> is for associated records. It&#39;s not such case."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1451397621, "creation_date": 1451397621, "answer_id": 34512617, "question_id": 34512233, "link": "https://stackoverflow.com/questions/34512233/move-specific-item-to-last-position/34512617#34512617", "title": "Move specific item to last position", "body": "<p>Perhaps something like below will help - we read all <code>Item</code>s, and use slice to remove the <code>Item</code> with <code>name</code> equal to <code>other</code>, and append it back to array at the end.</p>\n\n<pre><code>a = Item.all.tap do |arr|\n    arr &lt;&lt; arr.slice!(arr.index { |t| t.name == \"other\"})\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3233482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/545f7a9c8e6f0aa2782e1e937e86b186?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3233482/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1451398112, "creation_date": 1451398112, "answer_id": 34512764, "question_id": 34512233, "link": "https://stackoverflow.com/questions/34512233/move-specific-item-to-last-position/34512764#34512764", "title": "Move specific item to last position", "body": "<p>if i get you right then you're looking for a SQL query, right? Then you could try something like that:</p>\n\n<pre><code>select id, name\nfrom (\n  select id, name, decode(name, 'other', 999, 1) as sort \n  from items\n)\norder by sort\n</code></pre>\n\n<p>I have no database right now to test the statement. But I think you get the idea.</p>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "is_accepted": true, "score": 0, "last_activity_date": 1451423563, "last_edit_date": 1451423563, "creation_date": 1451407520, "answer_id": 34515309, "question_id": 34512233, "link": "https://stackoverflow.com/questions/34512233/move-specific-item-to-last-position/34515309#34515309", "title": "Move specific item to last position", "body": "<p>Resolved with adding class method to <code>Item</code> model:</p>\n\n<pre><code>def self.sorted\n  find_by_sql(\"SELECT * FROM items ORDER BY (CASE name WHEN 'other' THEN 0 ELSE 1 END) DESC, id ASC\")\nend\n</code></pre>\n"}], "owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 34515309, "answer_count": 3, "score": 0, "last_activity_date": 1451436044, "creation_date": 1451396191, "last_edit_date": 1451423692, "question_id": 34512233, "link": "https://stackoverflow.com/questions/34512233/move-specific-item-to-last-position", "title": "Move specific item to last position", "body": "<p>Let there is a model <code>Item</code> with attributes <code>id</code>, <code>name</code> and specific record in DB with name <code>'other'</code>.</p>\n\n<p>How to get in single SQL query an <code>ActiveRecord::Relation</code> object with items sorted in way that <code>other</code> item is at last position?\nAs temporarily solution I used <code>Item.where.not(name: 'other') + Item.where(name: 'other')</code> but it results in 2 queries.</p>\n\n<p>NB: it's not a real code but an extremely simplified example.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "edited": false, "score": 0, "creation_date": 1451396829, "post_id": 34512322, "comment_id": 56765524, "body": "Thank you for the answer unfortunalty I need the to_date for the group due to a calendar I have that uses dates. I get this error now ctionView::Template::Error (OCIError: ORA-00936: missing expression: SELECT &quot;TO_ENTRIES&quot;.* FROM &quot;TO_ENTRIES&quot; WHERE &quot;TO_ENTRIES&quot;.&quot;EMP_DEPT&quot; LIKE any(&#39;PLTDUP&#39;, &#39;PLTINS&#39;) AND &quot;TO_ENTRIES&quot;.&quot;AUTH&quot; = &#39;E&#39; AND (&quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;1&#39; OR &quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;2&#39;) GROUP BY &quot;TO_ENTRIES&quot;.&quot;LEAVE_START&quot;, &quot;TO_ENTRIES&quot;.&quot;LEAVE_END&quot;): @user3409950"}], "tags": [], "owner": {"reputation": 363, "user_id": 3409950, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004273333220/picture?type=large", "display_name": "user3409950", "link": "https://stackoverflow.com/users/3409950/user3409950"}, "is_accepted": false, "score": 0, "last_activity_date": 1451396528, "creation_date": 1451396528, "answer_id": 34512322, "question_id": 34512149, "link": "https://stackoverflow.com/questions/34512149/using-the-squeel-gem-i-keep-getting-an-error-ruby-on-rails/34512322#34512322", "title": "Using the squeel gem I keep getting an error. Ruby On Rails", "body": "<p>This should work</p>\n\n<pre>entry_by_start_date = Entry\n                        .where{(emp_dept.like any t) & (auth == 'E') & (approve_disapprove.like_any a_d)}\n                        .group(:leave_start)</pre>\n\n<pre>entry_by_end_date = Entry\n                      .where{(emp_dept.like any t) & (auth == 'E') & (approve_disapprove.like_any a_d)}\n                      .group(:leave_end)</pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "edited": false, "score": 0, "creation_date": 1451397164, "post_id": 34512393, "comment_id": 56765702, "body": "I tried your answer and it still doesn&#39;t work due to me needing the leave_start.to_date and leave_end.to_date @Rajarshi Das"}, {"owner": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "edited": false, "score": 0, "creation_date": 1451397663, "post_id": 34512393, "comment_id": 56765963, "body": "Thank you for your help but unfortunately Its still not working correctly. I still get this error OCIError: ORA-00936: missing expression: SELECT &quot;LEAVE_START&quot;.&quot;TO_DATE&quot;, &quot;LEAVE_END&quot;.&quot;TO_DATE&quot; FROM &quot;TO_ENTRIES&quot; WHERE &quot;TO_ENTRIES&quot;.&quot;EMP_DEPT&quot; LIKE any(&#39;PLTDUP&#39;, &#39;PLTINS&#39;) AND &quot;TO_ENTRIES&quot;.&quot;AUTH&quot; = &#39;E&#39; AND (&quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;1&#39; OR &quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;2&#39;) GROUP BY &quot;TO_ENTRIES&quot;.&quot;LEAVE_START&quot;, &quot;TO_ENTRIES&quot;.&quot;LEAVE_END&quot;@Rajarshi Das"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "reply_to_user": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "edited": false, "score": 0, "creation_date": 1451397770, "post_id": 34512393, "comment_id": 56766015, "body": "use [] brackets see my posts"}, {"owner": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "edited": false, "score": 0, "creation_date": 1451399833, "post_id": 34512393, "comment_id": 56767110, "body": "Same issue I really appreciate your help ActionView::Template::Error (OCIError: ORA-00936: missing expression: SELECT &quot;LEAVE_START&quot;.&quot;TO_DATE&quot;, &quot;LEAVE_END&quot;.&quot;TO_DATE&quot; FROM &quot;TO_ENTRIES&quot; WHERE &quot;TO_ENTRIES&quot;.&quot;EMP_DEPT&quot; LIKE any(&#39;PLTDUP&#39;, &#39;PLTINS&#39;) AND &quot;TO_ENTRIES&quot;.&quot;AUTH&quot; = &#39;E&#39; AND (&quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;1&#39; OR &quot;TO_ENTRIES&quot;.&quot;APPROVE_DISAPPROVE&quot; LIKE &#39;2&#39;) GROUP BY &quot;TO_ENTRIES&quot;.&quot;LEAVE_START&quot;, &quot;TO_ENTRIES&quot;.&quot;LEAVE_END&quot;): @Rajarshi Das"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1451397754, "last_edit_date": 1451397754, "creation_date": 1451396794, "answer_id": 34512393, "question_id": 34512149, "link": "https://stackoverflow.com/questions/34512149/using-the-squeel-gem-i-keep-getting-an-error-ruby-on-rails/34512393#34512393", "title": "Using the squeel gem I keep getting an error. Ruby On Rails", "body": "<p>The error OCIError: ORA-00936: missing expression:</p>\n\n<p>happens due to forget to the list of the columns in the select or grouping</p>\n\n<p>You can try</p>\n\n<pre><code>entry_by_start_date = Entry.group(:leave_start).select{[leave_start.to_date]}.where{(emp_dept.like any t) &amp; (auth == 'E') &amp; (approve_disapprove.like_any a_d)}\n\nentry_by_end_date = Entry.group(:leave_end).select{[ leave_end.to_date]}.where{(emp_dept.like any t) &amp; (auth == 'E') &amp; (approve_disapprove.like_any a_d)}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5388953, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b937ee3d60231463cb0ddb11d9eb8421?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman288", "link": "https://stackoverflow.com/users/5388953/snowman288"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1451397882, "creation_date": 1451395922, "last_edit_date": 1451397882, "question_id": 34512149, "link": "https://stackoverflow.com/questions/34512149/using-the-squeel-gem-i-keep-getting-an-error-ruby-on-rails", "title": "Using the squeel gem I keep getting an error. Ruby On Rails", "body": "<p>I am trying to do a group_by on a active record query using the squeel gem. I keep receiving this error -->   </p>\n\n<pre><code>ActiveRecord::StatementInvalid (OCIError: ORA-00936: missing expression: SELECT \"TO_ENTRIES\".* FROM \"TO_ENTRIES\" WHERE (\"TO_ENTRIES\".\"EMP_DEPT\" LIKE any('PLTDUP', 'PLTINS') AND \"TO_ENTRIES\".\"AUTH\" = 'E' AND (\"TO_ENTRIES\".\"APPROVE_DISAPPROVE\" LIKE '1' OR \"TO_ENTRIES\".\"APPROVE_DISAPPROVE\" LIKE '2'))): app/controllers/entry_controller.rb:115:in `index'\n</code></pre>\n\n<p>If I leave off the <code>group_by</code> it works problem is I really need the group_by on. </p>\n\n<p>Any help would be greatly appreciated!!!</p>\n\n<pre><code>entry_by_start_date = Entry.where{(emp_dept.like any t) &amp; (auth == 'E') &amp; (approve_disapprove.like_any a_d)}.group_by {|i| i.leave_start.to_date}\nentry_by_end_date = Entry.where{(emp_dept.like any t) &amp; (auth == 'E') &amp; (approve_disapprove.like_any a_d)}.group_by {|i| i.leave_end.to_date}\n</code></pre>\n"}, {"tags": ["ruby", "range"], "comments": [{"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1451395660, "post_id": 34512023, "comment_id": 56764906, "body": "Do ranges overlap and how many of them do you expect to have?"}, {"owner": {"reputation": 191, "user_id": 2542694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f255db2f386e0d72ca150fca7d597b9f?s=128&d=identicon&r=PG&f=1", "display_name": "Tzvika Mordoch", "link": "https://stackoverflow.com/users/2542694/tzvika-mordoch"}, "reply_to_user": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1451395752, "post_id": 34512023, "comment_id": 56764953, "body": "Ranges don&#39;t overlap. I guess something like 5 ranges, maybe a bit more"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451421501, "post_id": 34512023, "comment_id": 56778606, "body": "Good question. Though it may seem minor, readers appreciate you assigning a variable (<code>score_levels</code>) to your example&#39;s hash. All too often that is omitted, and even the hash&#39;s braces may be missing. As a general rule, when giving an example (a good thing), it&#39;s helpful to show your expected or desired output. Here, for example, you might have a small array of scores and show the levels you want them mapped to. Yes, it&#39;s obvious here, but it doesn&#39;t take much space."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451419610, "post_id": 34512379, "comment_id": 56777730, "body": "Note that the OP may want the array in the given form in order to have easy access to both ends of each range, so changing it to what you propose may be less convenient. Also, your solution its not as robust as ones that employ <code>range.include?</code>.  Suppose, for example, the score was <code>mm</code> and the ranges were <code>(&#39;a&#39;...&#39;z&#39;)</code> and <code>(&#39;aa&#39;...&#39;zz&#39;)</code>. The second range includes <code>mm</code>, but you&#39;d choose the first, since <code>mm</code> &lt;= <code>z</code> #=&gt; true`."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451430364, "post_id": 34512379, "comment_id": 56782489, "body": "@CarySwoveland, thanks, sure i meant <code>&lt;=</code>, just a typo"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451430536, "post_id": 34512379, "comment_id": 56782550, "body": "yes, this solution is not as universal, but should be more performant because fixnum comparison is much cheaper"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451440934, "post_id": 34512379, "comment_id": 56785331, "body": "I wouldn&#39;t say &quot;much cheaper&quot;, as you are examining one end point rather than two."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 4, "last_activity_date": 1451430194, "last_edit_date": 1451430194, "creation_date": 1451396751, "answer_id": 34512379, "question_id": 34512023, "link": "https://stackoverflow.com/questions/34512023/check-for-integer-in-a-collection-of-ranges/34512379#34512379", "title": "Check for integer in a collection of ranges", "body": "<p>Since ranges do not overlap and seamlessly cover <code>0..100</code> - you do not need explicit ranges, but rather something like:</p>\n\n<pre><code>score_levels = [\n  {id:1, name: 'Beginner', max_score:50},\n  {id:2, name: 'Intermediate', max_score:70},\n  {id:3, name: 'Pro', max_score:85},\n  {id:4, name: 'Expert', max_score:96},\n  {id:5, name:  'Master', max_score:100}\n].sort_by{|v| v[:max_score]}\n</code></pre>\n\n<p><code>sort_by</code> is optional, but left there to indicate that array should be sorted</p>\n\n<p>And find itself (assumes that score does not exceed maximum and is always found)</p>\n\n<pre><code>level_counters[ score_levels.find{|v| score &lt;= v[:max_score]}[:id] ] += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1451416033, "post_id": 34512406, "comment_id": 56775941, "body": "I see you used <code>include?</code> rather than <code>cover?</code> in case the range&#39;s end points are not numeric, but since the two are the same when the range is numeric, there&#39;s no loss of efficiency. What if <code>score</code> is not in any of the ranges?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1451416246, "post_id": 34512406, "comment_id": 56776049, "body": "@Jordan, that seems a bit harsh, but kudos for fessing up, something rarely seen in these parts."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1451416410, "post_id": 34512406, "comment_id": 56776143, "body": "Maybe <code>level_counters[level] += 1 if level = score_levels.find...</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1451416655, "post_id": 34512406, "comment_id": 56776290, "body": "I&#39;ve seen (or anyway perceived) a rash of terse, code-only answers lately and comments alone don&#39;t seem to be helping, so I&#39;m giving downvotes a shot. This answer stuck out because it&#39;s a long, relatively complex one-liner (that gains nothing but inscrutability for being a one-liner) with no explanation. Thankfully it worked for OP but Ruby beginners reading this will find it challenging, to put it kindly. I am of course eager to retract downvotes for answers that are improved."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1451417099, "post_id": 34512406, "comment_id": 56776518, "body": "@Jordan, I favour ridicule, but only when I think the author may respond. :-)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451419844, "post_id": 34512406, "comment_id": 56777845, "body": "@CarySwoveland I didn&#39;t think much about the choice between <code>include?</code> and <code>cover?</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451420894, "post_id": 34512406, "comment_id": 56778316, "body": "@sawa, it took me awhile to understand why <code>include?</code> is only equivalent to <code>cover?</code> when the range&#39;s end points are numeric or single-character strings. If interested, see my answer <a href=\"http://stackoverflow.com/questions/21507117/select-arrays-between-date-ranges-with-ruby/21507252#21507252\">here</a>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1451398389, "last_edit_date": 1451398389, "creation_date": 1451396814, "answer_id": 34512406, "question_id": 34512023, "link": "https://stackoverflow.com/questions/34512023/check-for-integer-in-a-collection-of-ranges/34512406#34512406", "title": "Check for integer in a collection of ranges", "body": "<p>Yes, there is.</p>\n\n<pre><code>level_counters[score_levels.find{|_, h| h[\"range\"].include?(score)}.first] += 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1451420092, "last_edit_date": 1451420092, "creation_date": 1451417826, "answer_id": 34517862, "question_id": 34512023, "link": "https://stackoverflow.com/questions/34512023/check-for-integer-in-a-collection-of-ranges/34517862#34517862", "title": "Check for integer in a collection of ranges", "body": "<p>If you will be looking up levels repeatedly and need to do it efficiently, consider constructing a separate hash:</p>\n\n<pre><code>score_to_level = score_levels.each_with_object({}) { |(k,v),h|\n  v['range'].each { |v| h[v] = k} }\n  #=&gt; {0=&gt;1, 1=&gt;1, 2=&gt;1, 3=&gt;1, 4=&gt;1, 5=&gt;1, 6=&gt;1, 7=&gt;1, 8=&gt;1, 9=&gt;1,\n  #    10=&gt;1,..., 91=&gt;4,\n  #    92=&gt;4, 93=&gt;4, 94=&gt;4, 95=&gt;4, 96=&gt;4, 97=&gt;5, 98=&gt;5, 99=&gt;5, 100=&gt;5} \n</code></pre>\n\n<p>This of course assumes each range contains a finite number of values (not <code>(1.1..3.3)</code>, for example). </p>\n"}], "owner": {"reputation": 191, "user_id": 2542694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f255db2f386e0d72ca150fca7d597b9f?s=128&d=identicon&r=PG&f=1", "display_name": "Tzvika Mordoch", "link": "https://stackoverflow.com/users/2542694/tzvika-mordoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 34512406, "answer_count": 3, "score": 3, "last_activity_date": 1451430194, "creation_date": 1451395385, "question_id": 34512023, "link": "https://stackoverflow.com/questions/34512023/check-for-integer-in-a-collection-of-ranges", "title": "Check for integer in a collection of ranges", "body": "<p>I'm trying to find the best way of determining in which range a given integer is.\nTake this hash for example:</p>\n\n<pre><code>score_levels = {\n  1 =&gt; {'name' =&gt; 'Beginner', 'range' =&gt; 0..50}, \n  2 =&gt; {'name' =&gt; 'Intermediate', 'range' =&gt; 51..70},\n  3 =&gt; {'name' =&gt; 'Pro', 'range' =&gt; 71..85},\n  4 =&gt; {'name' =&gt; 'Expert', 'range' =&gt; 86..96},\n  5 =&gt; {'name' =&gt; 'Master', 'range' =&gt; 97..100}\n}\n</code></pre>\n\n<p>I would like to run different logic given a score, something like:</p>\n\n<pre><code>case score\nwhen score_levels[1]['range']\n  level_counters[1] += 1\nwhen score_levels[2]['range']\n  level_counters[2] += 1\nwhen score_levels[3]['range']\n  level_counters[3] += 1\nend\n</code></pre>\n\n<p>Is there a more generic way of doing it?\nMaybe something in this spirit:</p>\n\n<pre><code>score_levels.each |key, val| {if val['range'].member?(score) then level_counters[key] += 1 }\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1451412865, "post_id": 34511965, "comment_id": 56774311, "body": "That&#39;s what I was after. Might be worthwhile adding a uniq! clause in there as suggested below. i&#39;ll make the edit."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451463848, "post_id": 34511965, "comment_id": 56792524, "body": "If <code>arr = [&quot;a&quot;, &quot;cat&quot;]</code> your method returns <code>[&quot;a&quot;]</code>. You can fix that by changing the inner block to <code>{ |s| c!=s &amp;&amp; c =~ &#47;\\b#{s}\\b&#47; }</code> (<code>\\b</code> being a word break). Notice that permits <code>arr = [&quot;b c&quot;, &quot;a b c&quot;]</code> to return <code>[&quot;b c&quot;]</code>, as I expect it should.  Also, <code>delete_if</code> (aka <code>reject!</code>) mutates <code>arr</code>, unlike the OP&#39;s code. You can avoid that by using <code>reject</code> rather than <code>delete_if</code>."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 3, "last_activity_date": 1451395215, "creation_date": 1451395215, "answer_id": 34511965, "question_id": 34511759, "link": "https://stackoverflow.com/questions/34511759/remove-items-superstrings-from-array-where-a-substring-exists-as-another-item/34511965#34511965", "title": "Remove items (superstrings) from array where a substring exists as another item", "body": "<p>Id suggest: </p>\n\n<pre><code>arr.delete_if{|c|\n  arr.any? { |s| c != s &amp;&amp; c.include?(s) }\n}\n</code></pre>\n\n<p><code>arr</code> will be modified inplace, so saving memory allocations</p>\n"}, {"tags": [], "owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "is_accepted": false, "score": 0, "last_activity_date": 1451418133, "creation_date": 1451418133, "answer_id": 34517943, "question_id": 34511759, "link": "https://stackoverflow.com/questions/34511759/remove-items-superstrings-from-array-where-a-substring-exists-as-another-item/34517943#34517943", "title": "Remove items (superstrings) from array where a substring exists as another item", "body": "<p>Another way can be as follows:</p>\n\n<pre><code>arr.uniq!\narr.reject { |ar| arr.select { |another| ar.include? another }.count &gt;= 2 }\n</code></pre>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34511965, "answer_count": 2, "score": 1, "last_activity_date": 1451418133, "creation_date": 1451394491, "last_edit_date": 1451412741, "question_id": 34511759, "link": "https://stackoverflow.com/questions/34511759/remove-items-superstrings-from-array-where-a-substring-exists-as-another-item", "title": "Remove items (superstrings) from array where a substring exists as another item", "body": "<p>I'm trying to filter an array where I want to exclude anything that has a 'substring' in the array.\nThis is to create an array of search terms but limit the number of duplicate searches.</p>\n\n<p>i.e.</p>\n\n<pre><code>[ \"Rough Collie\", \"Alsatian\", \"Standard Poodle\", \"Poodle\", \"Collie\", \"Schnauser\", \"Border Collie\", \"Chihuahua\" ]\n=&gt;\n[ \"Alsatian\", \"Poodle\", \"Collie\", \"Schnauser\", \"Chihuahua\" ]\n</code></pre>\n\n<p>Where we've removed Standard Poodle, because Poodle is a match and Rough Collie and Border Collie because Collie is a match. \ni.e. if a word exists but also exists as a substring in another term, remove the longer term. </p>\n\n<pre><code>arr - arr.map { |a| arr.select { |s| s.include?(a) &amp;&amp; s != a}}.flatten\n</code></pre>\n\n<p>this basically works but looks a bit ugly. Is there a more elegant way to do that?</p>\n"}]