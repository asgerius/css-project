[{"tags": ["python", "ruby", "excel", "xlsxwriter", "axlsx"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1507163115, "post_id": 46575847, "comment_id": 80105509, "body": "I think you could use either language. If you end up using Ruby, definitely use <a href=\"https://github.com/randym/axlsx\" rel=\"nofollow noreferrer\">axlsx</a>, it&#39;s super simple (much easier than win32ole)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8723140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bdbd6c697f8ce40c3b19a2e7bb0ab1?s=128&d=identicon&r=PG&f=1", "display_name": "SueGunther", "link": "https://stackoverflow.com/users/8723140/suegunther"}, "edited": false, "score": 0, "creation_date": 1507735555, "post_id": 46669389, "comment_id": 80331804, "body": "Thank you Chuck for your answer. Does this mean that OLE runs the graph in Excel? That&#39;s what I want to avoid - because the datasets are too large and the macros take forever to run. I don&#39;t want Excel to process the data, I only want the results to be presented in Excel."}, {"owner": {"reputation": 90, "user_id": 2682818, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c4ee39b98ec3f9b759d4d22d1da04844?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Remes", "link": "https://stackoverflow.com/users/2682818/chuck-remes"}, "reply_to_user": {"reputation": 11, "user_id": 8723140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bdbd6c697f8ce40c3b19a2e7bb0ab1?s=128&d=identicon&r=PG&f=1", "display_name": "SueGunther", "link": "https://stackoverflow.com/users/8723140/suegunther"}, "edited": false, "score": 0, "creation_date": 1507747683, "post_id": 46669389, "comment_id": 80338736, "body": "My suggestion was to &quot;port&quot; your existing VBA to Ruby. If the current code takes &quot;forever&quot; to run then Ruby + WIN32OLE won&#39;t be any better. However, you could modify your code to run your dataset calculations in Ruby and then use OLE to produce a chart from the results. No reason this can&#39;t work."}], "tags": [], "owner": {"reputation": 90, "user_id": 2682818, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c4ee39b98ec3f9b759d4d22d1da04844?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Remes", "link": "https://stackoverflow.com/users/2682818/chuck-remes"}, "is_accepted": false, "score": 0, "last_activity_date": 1507645959, "creation_date": 1507645959, "answer_id": 46669389, "question_id": 46575847, "link": "https://stackoverflow.com/questions/46575847/automating-excel-reporting-and-graphs-python-xlsxwriter-xlswings-or-ruby-axlsx/46669389#46669389", "title": "Automating excel reporting and graphs - Python xlsxWriter/xlswings or Ruby axlsx/win32ole", "body": "<p>If you already have VBA that <em>works</em> for your project, then translating it to Ruby + WIN32OLE is probably your quickest path to working code. Anything you can do in VBA is doable in Ruby (if you find something you can't do, post here to ask for help).</p>\n\n<p>I prefer working with Excel via OLE since I know the file produced by Excel <em>will work</em> anywhere I open it. I haven't used axlsx but I'm sure it's a fine project; I just wouldn't trust that it would produce working Excel files every time.</p>\n"}], "owner": {"reputation": 11, "user_id": 8723140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bdbd6c697f8ce40c3b19a2e7bb0ab1?s=128&d=identicon&r=PG&f=1", "display_name": "SueGunther", "link": "https://stackoverflow.com/users/8723140/suegunther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507645959, "creation_date": 1507161120, "question_id": 46575847, "link": "https://stackoverflow.com/questions/46575847/automating-excel-reporting-and-graphs-python-xlsxwriter-xlswings-or-ruby-axlsx", "title": "Automating excel reporting and graphs - Python xlsxWriter/xlswings or Ruby axlsx/win32ole", "body": "<p>I want to create a program, which automates excel reporting including various graphs in colours. The program needs to be able to read an excel dataset. Based on this dataset, the program then has to create report pages and graphs and then export to an excel file as well as pdf file.</p>\n\n<p>I have done some research and it seems this is possible using python with pandas - xlsxWriter or xlswings as well as Ruby gems - axlsx or win32ole. </p>\n\n<p>Which is the user-friendlier and easy to learn alternative? What are the advantages and disadvantages? Are there other options I should consider (I would like to avoid VBA - as this is how the reports are currently produced)?</p>\n\n<p>Any responses and comments are appreciated. Thank you!</p>\n"}, {"tags": ["ruby", "tdd"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1507160776, "post_id": 46575228, "comment_id": 80104936, "body": "I think it means that given a path &quot;./spec/fixtures/mp3s/some_path.mp3&quot; it will just give you &quot;some_path.mp3&quot;. We have <a href=\"https://ruby-doc.org/core-1.9.3/File.html#method-c-basename\" rel=\"nofollow noreferrer\">File.basename</a> for that by the way."}, {"owner": {"reputation": 55, "user_id": 5700079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/466651243524003/picture?type=large", "display_name": "Zeeshan Shafqat", "link": "https://stackoverflow.com/users/5700079/zeeshan-shafqat"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1507161471, "post_id": 46575228, "comment_id": 80105115, "body": "Okay. But if that&#39;s the case then the path that is being set at #initialize does not have the filenames in it. Its just a path till the mp3 directory &quot;./spec/fixtures/mp3s&quot; .. where as <code>File.basename</code> will work if the full path to the file is given."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1507163980, "post_id": 46575228, "comment_id": 80105720, "body": "You could try making the method return  <code>Dir.glob(&quot;#{@path}&#47;*.mp3&quot;)</code>. Other than that I don&#39;t know."}], "answers": [{"tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": true, "score": 1, "last_activity_date": 1507233877, "last_edit_date": 1507233877, "creation_date": 1507217863, "answer_id": 46589632, "question_id": 46575228, "link": "https://stackoverflow.com/questions/46575228/how-to-normalise-the-filename-to-just-the-mp3-filename-with-no-path-ruby/46589632#46589632", "title": "How to normalise the filename to just the mp3 filename with no path ? Ruby", "body": "<p>Preliminary remark : post all the code and only the minimum of code, so that we can copy-paste and execute it to reproduce the error. An RSpec tag and the version of RSpec would also be useful in this case.</p>\n\n<p>When I execute your code :</p>\n\n<pre><code>   No such file or directory @ dir_chdir - ./spec/fixtures/mp3s\n # ./lib/t_a.rb:14:in `chdir'\n</code></pre>\n\n<p>the error is in the statement at line 14 :</p>\n\n<pre><code>Dir.chdir(@path)\n</code></pre>\n\n<p>This gives a clue that <code>chdir</code>does not find the requested subdirectory in the current working directory. Why ? Add a trace to display the current working directory :</p>\n\n<pre><code>def files\n    puts \"in files, path=#{@path}\"\n    puts \"wd=...#{Dir.getwd.sub(/.*ruby(.*)/, '\\1')}\"\n    current_dir = Dir.getwd\n    Dir.chdir(@path)\n...\n</code></pre>\n\n<p>and run the tests (I'm working in <code>...devl/ruby/zintlist/mp3_importer</code>) :</p>\n\n<pre><code>$ rspec\n\nMP3Importer\n  #initialize\n    accepts a file path to parse mp3 files from\n  #files\nin files, path=./spec/fixtures/mp3s\nwd=.../zintlist/mp3_importer\n    loads all the mp3 files in the path directory\n  #xxxx\nin files, path=./spec/fixtures/mp3s\nwd=.../zintlist/mp3_importer/spec/fixtures/mp3s\n</code></pre>\n\n<p>and you see the difference :</p>\n\n<pre><code>wd=.../zintlist/mp3_importer\nwd=.../zintlist/mp3_importer/spec/fixtures/mp3s\n</code></pre>\n\n<p>When executing <code>files</code>, you have a side effect : the current directory is changed. In the second execution of <code>files</code>, <code>Dir.chdir</code> starts searching in the current directory left by the first execution, that is <code>.../mp3_importer/spec/fixtures/mp3s</code>, and <code>mp3s</code> of course does not contain <code>./spec/fixtures/mp3s</code>, hence the error <code>No such file or directory</code>.</p>\n\n<p>The solution is to restore the directory which is current when entering the method :</p>\n\n<pre><code>def files\n    puts \"in files, path=#{@path}\"\n    puts \"wd=...#{Dir.getwd.sub(/.*ruby(.*)/, '\\1')}\"\n    current_dir = Dir.getwd\n    Dir.chdir(@path)\n    filenames = Dir.glob(\"*.mp3\")\n    Dir.chdir(current_dir)\n    filenames\nend\n</code></pre>\n\n<p>Then the trace shows that it has been restored :</p>\n\n<pre><code>wd=.../zintlist/mp3_importer\n...\nwd=.../zintlist/mp3_importer\n</code></pre>\n\n<p>You may already know that if you process a file inside a <code>File.open ... do ... end</code> block, the file is closed when the block exits. The same works for restoring the current directory. From <a href=\"https://pragprog.com/book/ruby4/programming-ruby-1-9-2-0\" rel=\"nofollow noreferrer\">The Pickaxe</a> Dir.chdir :</p>\n\n<blockquote>\n  <p>If a block is given, it is passed the name of the new current\n  directory, and the block is executed with that as the current\n  directory. The original working directory is restored when the block\n  exits.</p>\n</blockquote>\n\n<p>Given these files :</p>\n\n<pre><code>#file t.rb\n\nclass MP3Importer\n    attr_accessor :path\n\n    def initialize(path)\n        @path = path\n    end\n\n    def files\n#        puts \"in files, path=#{@path}\"\n#        puts \"wd=#{Dir.getwd.sub(/.*ruby(.*)/, '\\1')}\"\n        filenames = Dir.chdir(@path) do | path |\n#            puts path\n            Dir.glob(\"*.mp3\")\n        end\n        puts \"names=#{filenames}\"\n        filenames\n    end\nend\n</code></pre>\n\n<p>.</p>\n\n<pre><code># file t_spec.rb\n\nrequire 't'\n\nRSpec.describe MP3Importer do\n    let(:test_music_path) { \"./spec/fixtures/mp3s\" }\n    let(:music_importer)  { MP3Importer.new(test_music_path) }\n\n    describe '#initialize' do\n        it 'accepts a file path to parse mp3 files from' do\n            expect(music_importer.path).to eq(test_music_path)\n        end\n    end\n\n    describe '#files' do\n        it 'loads all the mp3 files in the path directory' do\n            expect(music_importer.files.size).to eq(4)\n        end\n    end\n\n    describe '#xxxx' do\n        it 'normalizes the filename to just the mp3 filename with no path' do\n            expect(music_importer.files).to include('f4.mp3')\n        end\n    end\nend\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ ruby -v\nruby 2.4.0rc1 (2016-12-12 trunk 57064) [x86_64-darwin15]\n$ rspec -v\nRSpec 3.6.0.beta2\n  - rspec-core 3.6.0.beta2\n  - rspec-expectations 3.6.0.beta2\n  - rspec-mocks 3.6.0.beta2\n  - rspec-support 3.6.0.beta2\n$ rspec\n\nMP3Importer\n  #initialize\n    accepts a file path to parse mp3 files from\n  #files\nnames=[\"f1.mp3\", \"f2.mp3\", \"f3.mp3\", \"f4.mp3\"]\n    loads all the mp3 files in the path directory\n  #xxxx\nnames=[\"f1.mp3\", \"f2.mp3\", \"f3.mp3\", \"f4.mp3\"]\n    normalizes the filename to just the mp3 filename with no path\n\nFinished in 0.00315 seconds (files took 0.09868 seconds to load)\n3 examples, 0 failures\n</code></pre>\n\n<p>All tests are green.</p>\n\n<p>As the method return value is that of the last executed expression, you can simplify <code>files</code> like so :</p>\n\n<pre><code>def files\n    Dir.chdir(@path) do | path |\n        Dir.glob(\"*.mp3\")\n    end\nend\n</code></pre>\n\n<blockquote>\n  <p>What does the statement \"Normalise ... mean ?</p>\n</blockquote>\n\n<p>I don't know. I suppose it's collecting only the files whose name correspond to a certain pattern, here <code>*.mp3</code>.</p>\n\n<p>What I can say is that RDoc takes input file names from the command line and passes them to a routine called <code>normalized_file_list</code>:</p>\n\n<pre><code># file rdoc.rb\n  ##\n  # Given a list of files and directories, create a list of all the Ruby\n  # files they contain.\n  #\n  # If +force_doc+ is true we always add the given files, if false, only\n  # add files that we guarantee we can parse.  It is true when looking at\n  # files given on the command line, false when recursing through\n  # subdirectories.\n  #\n  # The effect of this is that if you want a file with a non-standard\n  # extension parsed, you must name it explicitly.\n\n  def normalized_file_list(relative_files, force_doc = false,\n                           exclude_pattern = nil)\n    file_list = []\n\n    relative_files.each do |rel_file_name|\n      next if rel_file_name.end_with? 'created.rid'\n      next if exclude_pattern &amp;&amp; exclude_pattern =~ rel_file_name\n      stat = File.stat rel_file_name rescue next\n\n      case type = stat.ftype\n      when \"file\" then\n        next if last_modified = @last_modified[rel_file_name] and\n                stat.mtime.to_i &lt;= last_modified.to_i\n\n        if force_doc or RDoc::Parser.can_parse(rel_file_name) then\n          file_list &lt;&lt; rel_file_name.sub(/^\\.\\//, '')\n          @last_modified[rel_file_name] = stat.mtime\n        end\n      when \"directory\" then\n        next if rel_file_name == \"CVS\" || rel_file_name == \".svn\"\n\n        created_rid = File.join rel_file_name, \"created.rid\"\n        next if File.file? created_rid\n\n        dot_doc = File.join rel_file_name, RDoc::DOT_DOC_FILENAME\n\n        if File.file? dot_doc then\n          file_list &lt;&lt; parse_dot_doc_file(rel_file_name, dot_doc)\n        else\n          file_list &lt;&lt; list_files_in_directory(rel_file_name)\n        end\n      else\n        warn \"rdoc can't parse the #{type} #{rel_file_name}\"\n      end\n    end\n\n    file_list.flatten\n  end\n\n  ##\n  # Return a list of the files to be processed in a directory. We know that\n  # this directory doesn't have a .document file, so we're looking for real\n  # files. However we may well contain subdirectories which must be tested\n  # for .document files.\n\n  def list_files_in_directory dir\n    files = Dir.glob File.join(dir, \"*\")\n\n    normalized_file_list files, false, @options.exclude\n  end\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5700079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/466651243524003/picture?type=large", "display_name": "Zeeshan Shafqat", "link": "https://stackoverflow.com/users/5700079/zeeshan-shafqat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 46589632, "answer_count": 1, "score": 0, "last_activity_date": 1507233877, "creation_date": 1507156764, "question_id": 46575228, "link": "https://stackoverflow.com/questions/46575228/how-to-normalise-the-filename-to-just-the-mp3-filename-with-no-path-ruby", "title": "How to normalise the filename to just the mp3 filename with no path ? Ruby", "body": "<p>I am trying to solve a lab but I am not sure what is going on. What I have to do is that I have to import some file names (.mp3's) from a directory and then use the file name to make some objects. I am still stuck at getting the filenames from the directory. The Test is asking me to </p>\n\n<p><strong>\"Normalise the filename to just the mp3 filename with no path\"</strong></p>\n\n<p>the test is as follows:</p>\n\n<pre><code>  it 'normalizes the filename to just the mp3 filename with no path' do\n  test_music_path = \"./spec/fixtures/mp3s\"\n  music_importer = MP3Importer.new(test_music_path)\n\n  expect(music_importer.files).to include(\"Action Bronson - Larry Csonka - indie.mp3\")\n  expect(music_importer.files).to include(\"Real Estate - Green Aisles - country.mp3\")\n  expect(music_importer.files).to include(\"Real Estate - It's Real - hip-hop.mp3\")\n  expect(music_importer.files).to include(\"Thundercat - For Love I Come - dance.mp3\")\nend\n</code></pre>\n\n<p>My Code is:</p>\n\n<pre><code>class MP3Importer\n attr_accessor :path\n\n def initialize(path)\n  @path = path\n end\n\n def files\n  Dir.chdir(@path)\n  filename = Dir.glob(\"*.mp3\")\n  filename\n end\nend\n</code></pre>\n\n<p>This is also passing these two tests:</p>\n\n<pre><code>  describe '#initialize' do\nit 'accepts a file path to parse mp3 files from' do\n  test_music_path = \"./spec/fixtures/mp3s\"\n  music_importer = MP3Importer.new(test_music_path)\n\n  expect(music_importer.path).to eq(test_music_path)\nend\n\ndescribe '#files' do\nit 'loads all the mp3 files in the path directory' do\n  test_music_path = \"./spec/fixtures/mp3s\"\n  music_importer = MP3Importer.new(test_music_path)\n\n  expect(music_importer.files.size).to eq(4)\nend\n</code></pre>\n\n<p>But the error it creates is:</p>\n\n<pre><code>Failure/Error: expect(music_importer.files).to include(\"Action Brons\n Errno::ENOENT:\n   No such file or directory @ dir_chdir - ./spec/fixtures/mp3s\n</code></pre>\n\n<p>To be honest I have no idea what Normalising the filename to mp3 filename with no path means? It is very misleading. I already have the array of filenames at variable filename in my #files method.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>What does the statement \"Normalise the filename to just the mp3 filename with no path\" mean ? what does the test want me to do?</li>\n<li>What is happening in the code posted? </li>\n<li>Why is the error pointing to the directory? When the directory does have the required file?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "unix"], "comments": [{"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "edited": false, "score": 2, "creation_date": 1507154527, "post_id": 46574733, "comment_id": 80103267, "body": "Nice use of sed/awk. Not sure there would be Ruby approach as concise and elegant as this one."}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 1, "last_activity_date": 1507156380, "last_edit_date": 1507156380, "creation_date": 1507154808, "answer_id": 46574912, "question_id": 46574733, "link": "https://stackoverflow.com/questions/46574733/converting-unix-grep-sed-awk-into-ruby/46574912#46574912", "title": "Converting Unix grep/sed/awk into Ruby", "body": "<p>Here's what I came up with</p>\n\n<pre><code>results = []\nDir.glob(\"#{folder}/**/*.feature\").each do |file|\n  i = 0; line = nil\n  File.foreach(file).map{ |l| line = i+1 if l[/@smoke/]; i+=1 }\n  results &lt;&lt; IO.readlines(file)[line].gsub(/Scenario:\\s|\\n/,'') unless line.nil?\nend\n\np results\n</code></pre>\n\n<p>The Results:</p>\n\n<pre><code>[\"Login to Product\", \"Logout of Product\"]\n</code></pre>\n\n<p>You can easily shift this into a method.</p>\n\n<p>Edit: Updated this after re-examining your full command line. Looks like you only want the <code>Scenario</code> that comes AFTER a <code>@smoke</code> line and no other Scenarios should be included in the output.</p>\n"}], "owner": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507156380, "creation_date": 1507153784, "question_id": 46574733, "link": "https://stackoverflow.com/questions/46574733/converting-unix-grep-sed-awk-into-ruby", "title": "Converting Unix grep/sed/awk into Ruby", "body": "<p>Within our file structure we have snippets with tags. From my project directory, I want to return the snippet name based on the tag declared on the preceding line, for all files ending in <code>.feature</code> within the project.</p>\n\n<p>For example, the directory contains a <code>login.feature</code> file with the following text:</p>\n\n<pre><code>@integration @unit @smoke\nScenario: Login to Product\n\n@integration @unit\nScenario: Buy Stuff\n</code></pre>\n\n<p>The directory also contains a <code>logout.feature</code> file with the following text:</p>\n\n<pre><code>@test @wip @smoke\nScenario: Logout of Product\n</code></pre>\n\n<p>I want to run a single command that returns the following array:</p>\n\n<pre><code>[\"Login to Product\", \"Logout of Product\"]\n</code></pre>\n\n<p>As you can see, I'm essentially doing the following:</p>\n\n<pre><code>grep -inr -A 1 '@smoke' ./my/directory | grep Scenario | sed -n -e 's/^.*Scenario: //p' | awk '!seen[$0]++'\n</code></pre>\n\n<p>...with the exception of converting the resulting lines into an array.</p>\n\n<p>Is there an elegant way to do this in Ruby? Or can I somehow combine the Unix magic with Ruby sugar? Or should I stick to sed/awk/grep?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152660, "post_id": 46574399, "comment_id": 80102529, "body": "Not sure I understand, you mean this should be in place of my <code>expect</code>?"}, {"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152846, "post_id": 46574399, "comment_id": 80102596, "body": "Clarified the answer."}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507153126, "post_id": 46574399, "comment_id": 80102719, "body": "<code>expected collection contained:  [{:year=&gt;&quot;2017&quot;, :month=&gt;&quot;October&quot;, :published=&gt;1}, {:year=&gt;&quot;2017&quot;, :month=&gt;&quot;September&quot;, :published=&gt;1}]actual collection contained:    []the missing elements were:      [{:year=&gt;&quot;2017&quot;, :month=&gt;&quot;October&quot;, :published=&gt;1}, {:year=&gt;&quot;2017&quot;, :month=&gt;&quot;September&quot;, :published=&gt;1}]</code>"}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507153255, "post_id": 46574399, "comment_id": 80102772, "body": "with <code>let!</code> I get <code>actual collection contained:    [{:year=&gt;2017, :month=&gt;&quot;October&quot;, :published=&gt;1}, {:year=&gt;2017, :month=&gt;&quot;September&quot;, :published=&gt;1}] the missing elements were:      [{:year=&gt;&quot;2017&quot;, :month=&gt;&quot;October&quot;, :published=&gt;1}, {:year=&gt;&quot;2017&quot;, :month=&gt;&quot;September&quot;, :published=&gt;1}]        the extra elements were:        [{:year=&gt;2017, :month=&gt;&quot;October&quot;, :published=&gt;1}, {:year=&gt;2017, :month=&gt;&quot;September&quot;, :published=&gt;1}] </code>"}, {"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507153873, "post_id": 46574399, "comment_id": 80103025, "body": "Actual collection contains year as an integer, you should convert it to string"}, {"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507154000, "post_id": 46574399, "comment_id": 80103075, "body": "Added <code>to_s</code> calls to the answer."}], "tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": false, "score": 1, "last_activity_date": 1507153959, "last_edit_date": 1507153959, "creation_date": 1507152122, "answer_id": 46574399, "question_id": 46574262, "link": "https://stackoverflow.com/questions/46574262/rspec-archives-array-to-match-tested-array/46574399#46574399", "title": "Rspec - archives array to match tested array", "body": "<p>Actual array is not empty, it's an array of two Post instances with ids unset (because <code>Select</code> in <code>.archives</code> method doesn't contain id field).\nYou could compare expected hashes not with <code>archives</code>, but with smth like that:</p>\n\n<pre><code>actual = Post.archives().map do |post| \n  { year: post[\"year\"].to_s, month: post[\"month\"], published: post[\"total\"] }\nend\n\nexpected = [{\n  year: first.published_at.strftime(\"%Y\").to_s,\n  month: first.published_at.strftime(\"%B\"),\n  published: 1\n},\n{\n  year: second.published_at.strftime(\"%Y\").to_s,\n  month: second.published_at.strftime(\"%B\"),\n  published: 1\n}]\n\nexpect(actual).to match_array(expected)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152490, "post_id": 46574408, "comment_id": 80102480, "body": "<code>expected collection contained:  [#&lt;Post id: nil&gt;, #&lt;Post id: nil&gt;]actual collection contained:    [#&lt;Post id: 1, user_id: 4, title: &quot;This is the Post title&quot;, excerpt: &quot;This is the Post body&quot;, created_at: &quot;2017-10-04 21:25:31&quot;, updated_at: &quot;2017-10-04 21:25:31&quot;&gt;]</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152670, "post_id": 46574408, "comment_id": 80102532, "body": "I&#39;ve tweaked it a bit. Please try again."}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152728, "post_id": 46574408, "comment_id": 80102553, "body": "I tried it my self to reverse the arrays but nothing changes"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152788, "post_id": 46574408, "comment_id": 80102575, "body": "Did you add the <code>!</code> after <code>let</code>?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507152965, "post_id": 46574408, "comment_id": 80102656, "body": "Try adding the additional expect shown in the edited answer, and tell me if it fails on the first expect or the second."}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507153457, "post_id": 46574408, "comment_id": 80102857, "body": "fails both <code>expect(Post.archives).to match_array([first, second])</code> and <code>expect([first, second]).to match_array(Post.archives)</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1507153530, "post_id": 46574408, "comment_id": 80102884, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/155974/discussion-between-moveson-and-lykos\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1507154941, "last_edit_date": 1507154941, "creation_date": 1507152157, "answer_id": 46574408, "question_id": 46574262, "link": "https://stackoverflow.com/questions/46574262/rspec-archives-array-to-match-tested-array/46574408#46574408", "title": "Rspec - archives array to match tested array", "body": "<p>Rspec standard is to use the <code>let</code> syntax for defining variables within a context or describe block. The test should look something like this:</p>\n\n<pre><code>describe '.archives' do\n  let!(:first) { FactoryGirl.create(:post, published_at: Time.zone.now) }\n  let!(:second) { FactoryGirl.create(:post, published_at: 1.month.ago) }\n\n  it 'returns year, month, and total for articles archived' do\n    actual_attributes = Post.archives.map { |post| [post.year, post.month, post.total] }\n    expected_total = 1 # I don't know why the query is returning 1 for total, but including this for completeness\n    expected_attributes = [first, second].map { |post| [post.created_at.year, post.created_at.strftime(\"%B\"), expected_total] }\n\n    expect(actual_attributes).to match_array(expected_attributes)\n  end\nend\n</code></pre>\n\n<p>The issue here is that you are comparing records pulled with only a few attributes (the result of your SQL query) with fully-formed records (created by your test). This test pulls the applicable attributes from both groups and compares them.</p>\n"}], "owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 46574408, "answer_count": 2, "score": 1, "last_activity_date": 1507154941, "creation_date": 1507151524, "question_id": 46574262, "link": "https://stackoverflow.com/questions/46574262/rspec-archives-array-to-match-tested-array", "title": "Rspec - archives array to match tested array", "body": "<p>I'm having this class method on my Post model for getting archives</p>\n\n<pre><code>def self.archives\n    Post.unscoped.select(\"YEAR(created_at) AS year, MONTHNAME(created_at) AS month, COUNT(id) AS total\")\n        .group(\"year, month, MONTH(created_at)\")\n        .order(\"year DESC, MONTH(created_at) DESC\")\nend\n</code></pre>\n\n<p>This is the test I have wrote for my method</p>\n\n<pre><code>context '.archives' do\n\n  first = FactoryGirl.create(:post, published_at: Time.zone.now)\n  second = FactoryGirl.create(:post, published_at: 1.month.ago)\n\n  it 'returns articles archived' do\n    archives = Post.archives()\n\n    expect(\n      [{\n        year: first.published_at.strftime(\"%Y\"),\n        month: first.published_at.strftime(\"%B\"),\n        published: 1\n      },\n      {\n        year: second.published_at.strftime(\"%Y\"),\n        month: second.published_at.strftime(\"%B\"),\n        published: 1\n      }]\n      ).to match_array(archives)\n  end\nend\n</code></pre>\n\n<p>However I get the following error</p>\n\n<pre><code>expected collection contained:  [#&lt;Post id: nil&gt;, #&lt;Post id: nil&gt;]\nactual collection contained:    [{:year=&gt;\"2017\", :month=&gt;\"October\", :published=&gt;1}, {:year=&gt;\"2017\", :month=&gt;\"September\", :total=&gt;1}]\nthe missing elements were:      [#&lt;Post id: nil&gt;, #&lt;Post id: nil&gt;]\nthe extra elements were:        [{:year=&gt;\"2017\", :month=&gt;\"October\", :total=&gt;1}, {:year=&gt;\"2017\", :month=&gt;\"September\", :total=&gt;1}]\n</code></pre>\n\n<p>So although I have created 2 factories, the <code>archives</code> array is empty. What am I doing wrong?</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "edited": false, "score": 0, "creation_date": 1507156662, "post_id": 46574696, "comment_id": 80103971, "body": "Simplified the answer."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1507158046, "post_id": 46574696, "comment_id": 80104350, "body": "How about replacing <code>any? </code> with <code>detect</code> ? <code>valid</code> would refer to the first correct row, or nil if there isn&#39;t one."}, {"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1507158680, "post_id": 46574696, "comment_id": 80104484, "body": "I guess author is interested only in the fact if file is valid, not the matching line. In this case <code>any?</code> suits better."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507178295, "post_id": 46574696, "comment_id": 80108837, "body": "...or <code>raise(&quot;WRONG VENDOR DUMMY. This is #{account.vendor_code}&quot;) unless CSV.foreach(file, options).any? { |row| ... }</code>."}], "tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": true, "score": 2, "last_activity_date": 1507156627, "last_edit_date": 1507156627, "creation_date": 1507153543, "answer_id": 46574696, "question_id": 46574224, "link": "https://stackoverflow.com/questions/46574224/breaking-early-from-csv-foreach-enumerator/46574696#46574696", "title": "Breaking early from &#39;CSV.foreach&#39; enumerator", "body": "<p>I think this approach is better:</p>\n\n<pre><code>valid = CSV.foreach(file, options).any? do |row|\n  row[:vendor].to_s == account.vendor_code.to_s\nend\nraise(\"WRONG VENDOR DUMMY. This is #{account.vendor_code}\") unless valid\n</code></pre>\n"}], "owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 46574696, "answer_count": 1, "score": 1, "last_activity_date": 1507170301, "creation_date": 1507151366, "last_edit_date": 1507170301, "question_id": 46574224, "link": "https://stackoverflow.com/questions/46574224/breaking-early-from-csv-foreach-enumerator", "title": "Breaking early from &#39;CSV.foreach&#39; enumerator", "body": "<p>I would like to validate my file.</p>\n\n<ul>\n<li>Should parse the file line by line (and not read the whole file into memory). </li>\n<li>Should exit as soon as it passes the test.</li>\n<li>Should consider the file valid if any of the <code>vendor_codes</code> match the provided <code>vendor_code</code>.</li>\n</ul>\n\n<p>Some code:</p>\n\n<pre><code>error = \"WRONG VENDOR DUMMY. This is #{account.vendor_code}\"\nCSV.foreach(file, options) do |row|\n  if row[:vendor].to_s == account.vendor_code.to_s\n    error = false\n    break\n  else\n    next\n  end\nend\nraise(error) if error\n</code></pre>\n\n<p>is there a more elegant way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "node.js", "ruby", "mongodb", "postgresql"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1507205997, "post_id": 46574092, "comment_id": 80123736, "body": "Why are you migrating from rails to NodeJs?"}], "owner": {"reputation": 994, "user_id": 7971991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bLT6v.jpg?s=128&g=1", "display_name": "Lucas Janon", "link": "https://stackoverflow.com/users/7971991/lucas-janon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1507150795, "creation_date": 1507150795, "question_id": 46574092, "link": "https://stackoverflow.com/questions/46574092/migrating-rails-app-with-activeadmin-to-nodejs", "title": "Migrating Rails app with ActiveAdmin to NodeJS", "body": "<p>I'm migrating an app made by another developer in Ruby on Rails to NodeJS, the app has an ActiveAdmin to handle some operations and check some stats, I wanted to know what similar tool/framework can I use in Node to do the migration as less painful as possible. </p>\n\n<p>Also, apart from this question I wanted to ask about using Node PostgreSQL implementation vs migrating to Mongo (I know that without seeing the code is not easy to answer, but I'm looking for insights, like: Postgres has not much contributors in Node, better migrate to Mongo) </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "smtp", "redmine"], "comments": [{"owner": {"reputation": 322, "user_id": 1601669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499868feae0e633d5d9794e49cfe06bd?s=128&d=identicon&r=PG", "display_name": "jkraemer", "link": "https://stackoverflow.com/users/1601669/jkraemer"}, "edited": false, "score": 0, "creation_date": 1507251598, "post_id": 46573790, "comment_id": 80146306, "body": "You do not need to add your mailer config in <code>application.rb</code>. Redmine&#39;s <code>configuration.yml</code> is enough. The stack trace that belongs to your error message would be helpful in determining where exactly things go wrong."}, {"owner": {"reputation": 13, "user_id": 6358084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XO80b2TF1T0/AAAAAAAAAAI/AAAAAAAABMI/ivZn82BhcuE/photo.jpg?sz=128", "display_name": "KacproSo", "link": "https://stackoverflow.com/users/6358084/kacproso"}, "reply_to_user": {"reputation": 322, "user_id": 1601669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499868feae0e633d5d9794e49cfe06bd?s=128&d=identicon&r=PG", "display_name": "jkraemer", "link": "https://stackoverflow.com/users/1601669/jkraemer"}, "edited": false, "score": 0, "creation_date": 1508758890, "post_id": 46573790, "comment_id": 80723932, "body": "Yes, but still have the same error. Even if I use default <code>application.rb</code> and configure email in <code>configuration.yml</code>, still have the same error and redmine won&#39;t start."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6358084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XO80b2TF1T0/AAAAAAAAAAI/AAAAAAAABMI/ivZn82BhcuE/photo.jpg?sz=128", "display_name": "KacproSo", "link": "https://stackoverflow.com/users/6358084/kacproso"}, "edited": false, "score": 0, "creation_date": 1509034769, "post_id": 46922831, "comment_id": 80865783, "body": "Damn, I newer though that space has so matter. Thanks jkraemer. That&#39;s solves thing."}], "tags": [], "owner": {"reputation": 322, "user_id": 1601669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499868feae0e633d5d9794e49cfe06bd?s=128&d=identicon&r=PG", "display_name": "jkraemer", "link": "https://stackoverflow.com/users/1601669/jkraemer"}, "is_accepted": true, "score": 1, "last_activity_date": 1508897390, "creation_date": 1508897390, "answer_id": 46922831, "question_id": 46573790, "link": "https://stackoverflow.com/questions/46573790/email-configuration-in-redmine-undefined-method-address/46922831#46922831", "title": "Email configuration in Redmine - undefined method `address=&#39;", "body": "<p>Make sure your <code>configuration.yml</code> is properly indented (use 2 spaces per level of indentation):</p>\n\n<pre><code>production:\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: 'example.org'\n      port: 587\n</code></pre>\n\n<p>The smtp settings (address, port etc) need to be keys in the <code>smtp_settings</code> hash. From the error you get I'd say they are keys on the same level as <code>smtp_settings</code>, which is wrong.</p>\n"}], "owner": {"reputation": 13, "user_id": 6358084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XO80b2TF1T0/AAAAAAAAAAI/AAAAAAAABMI/ivZn82BhcuE/photo.jpg?sz=128", "display_name": "KacproSo", "link": "https://stackoverflow.com/users/6358084/kacproso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 46922831, "answer_count": 1, "score": 1, "last_activity_date": 1508897390, "creation_date": 1507149552, "question_id": 46573790, "link": "https://stackoverflow.com/questions/46573790/email-configuration-in-redmine-undefined-method-address", "title": "Email configuration in Redmine - undefined method `address=&#39;", "body": "<p>I'm not an expert in Ruby and Redmine, but I'm trying to configure email notifications in redmine.\nRedmine version 3.4\nruby 2.3.3p222\nPhusion Passenger 5.1.7</p>\n\n<p>In configuration.yml I have</p>\n\n<pre><code>production:\nemail_delivery:\ndelivery_method: :smtp\nsmtp_settings:\naddress: \"xxxx.pl\"\nport: 587\nauthentication: :plain\ndomain: 'redmine.xxx.pl'\nuser_name: '.....@redmine.xxx.pl'\npassword: '......'\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>Error ID: 54731089\n  Error details saved to: /tmp/passenger-error-WqNBmN.html\n  Message from application: undefined method `address=' for ActionMailer::Base:Class (NoMethodError)\n</code></pre>\n\n<p>I search little bit and figure out, that I have missing methods in application.rb file.</p>\n\n<p>So in Redmine config/application.rb I add something like that:</p>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\naddress:              \"xxx.pl\",\nport:                 587,\nuser_name:            'powiadomienia@redmine.xxx.pl',\npassword:            '.....',\nauthentication:       :plain\n}\n</code></pre>\n\n<p>but still have the same error. Unfortunately I can't find any examples in Redmine configuration. </p>\n\n<p>Can anyone help me?</p>\n"}, {"tags": ["ruby", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1507159122, "post_id": 46573692, "comment_id": 80104603, "body": "The only way to know is to parse it until you find an invalid byte sequence or reach the end of the data. <code>CharDet</code> is going to parse it multiple times, comparing it to each known charset until one matches, so that would take extra time (and if the text starts with a known UTF BOM, it doesn&#39;t even check the text after the BOM). For what you want to do, use the <a href=\"http://www.rubydoc.info/gems/rchardet/CharDet/UTF8Prober\" rel=\"nofollow noreferrer\"><code>UTF8Prober</code></a> class instead, and see if its <a href=\"http://www.rubydoc.info/gems/rchardet/CharDet/UTF8Prober#feed-instance_method\" rel=\"nofollow noreferrer\"><code>feed()</code></a> method returns <code>EFoundIt</code> or <code>ENotMe</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507179874, "post_id": 46573692, "comment_id": 80109305, "body": "<a href=\"https://www.justinweiss.com/articles/3-steps-to-fix-encoding-problems-in-ruby/\" rel=\"nofollow noreferrer\">This article</a> may be of interest."}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1507220532, "post_id": 46573692, "comment_id": 80133884, "body": "@RemyLebeau any example code on how to use UTF8Prober? Can&#39;t find anything online"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1507222009, "post_id": 46573692, "comment_id": 80134749, "body": "I&#39;m not a Ruby developer, but (maybe?) something like this (might need tweaking): <code>utf8 = UTF8Prober.new()</code> then <code>if utf8.feed(text) != EFoundIt ... end</code> or <code>if utf8.feed(text) == ENotMe ... end</code>"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1507223521, "post_id": 46573692, "comment_id": 80135591, "body": "The question is hard to &quot;parse&quot;. Bytes that are encoded text use the encoding that the writer chose. If you&#39;ve lost that information, you could ask,  is the byte sequence compatible with a specific encoding or not. UTF-8 does not emit certain values and doesn&#39;t emit certain value sequences. So is the question, &quot;How to tell if the encoded text couldn&#39;t have been encoded with UTF-8?&quot;"}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1507231972, "post_id": 46573692, "comment_id": 80139950, "body": "@TomBlodget yes thats the question"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1507284060, "post_id": 46573692, "comment_id": 80158070, "body": "<a href=\"http://www.unicode.org/versions/Unicode10.0.0/ch03.pdf#G7404\" rel=\"nofollow noreferrer\">Table 3-7. Well-Formed UTF-8 Byte Sequences</a> from the standard would be a good basis for an algorithm that yields either &quot;possibly UTF-8&quot; or &quot;definitely not UTF-8&quot;, much like the UTF8Prober that @RemyLebeau suggests. As for rolling your own, it looked like regex would be a good way to build a state machine per the table. But regex seems to do its own check on the input for UTF-8 well-formedness. (So, <code>text =~ &#47;^.*$&#47;</code> and catch the error?)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1507579983, "post_id": 46573692, "comment_id": 80257854, "body": "What should the result be if a text is <i>both</i> in UTF-8 <i>and</i> some other encoding?"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507149188, "creation_date": 1507149188, "question_id": 46573692, "link": "https://stackoverflow.com/questions/46573692/how-to-tell-if-text-is-not-in-utf-8-encoding", "title": "How to tell if text is not in UTF-8 encoding?", "body": "<p>I know there are gems you can use, but I want a simple way to tell if a text is NOT in UTF-8 encoding.</p>\n\n<p>Currently, this is the method I am using:</p>\n\n<pre><code>cd = CharDet.detect(text)\nencoding = cd['encoding']\n</code></pre>\n\n<p>the problem is this takes way too long (.75 seconds at times)</p>\n\n<p>Is there a way using regex or some other method to tell if a text is not in UTF-8? I don't care to know what encoding it's in. Just that it's not UTF-8</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "foreign-keys", "seeding", "faker"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507149617, "post_id": 46573688, "comment_id": 80101139, "body": "What version of Rails are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7314805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8kLT1nqz0c/AAAAAAAAAAI/AAAAAAAAAYo/ySvKP_VGoIM/photo.jpg?sz=128", "display_name": "Zergling", "link": "https://stackoverflow.com/users/7314805/zergling"}, "edited": false, "score": 0, "creation_date": 1507155143, "post_id": 46574179, "comment_id": 80103469, "body": "It worked instantly, i just had to remove validations for uniqueness. Thanks for help and fast response"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 0, "last_activity_date": 1507151561, "last_edit_date": 1507151561, "creation_date": 1507151210, "answer_id": 46574179, "question_id": 46573688, "link": "https://stackoverflow.com/questions/46573688/seed-database-with-foreign-key-seeds-rb/46574179#46574179", "title": "Seed database with foreign key - seeds.rb", "body": "<p>I can see two problems:</p>\n\n<ol>\n<li><p>In <code>Movie.create</code>, you need to remove the square brackets. That's because the ActiveRecord <code>create</code> method needs a Hash, not an Array. While you're at it, you can remove the curly braces as well, and your arguments will still be recognized as a Hash.</p></li>\n<li><p>Checking to see if <code>movie</code> is <code>nil</code> is not the right test, as <code>movie</code> will always exist, even if it wasn't saved to the database. Change your test from <code>unless movie.nil?</code> to <code>if movie.persisted?</code> This will avoid an error caused by trying to save comments to a movie that isn't saved to the database.</p></li>\n</ol>\n\n<p>So your code should look like this:</p>\n\n<pre><code>100.times do\n  movie = Movie.create(name: Faker::Book.title,\n                       director: Faker::Name.name,\n                       description: Faker::FamilyGuy.quote,\n                       year: rand(1920..2018),\n                       length: rand(80..240),\n                       format: formats[rand(formats.length)],\n                       genre: genres[rand(genres.length)],\n                       image: images[rand(images.length)],\n                       thumbnail: images[rand(images.length)])\n  if movie.persisted?\n    rand(1..10).times do\n      movie.comments.create(\n          author: Faker::Name.name,\n          title: Faker::Book.title,\n          content: Faker::FamilyGuy.quote,\n          rating: rand(1..5)\n      )\n    end\n  end\n  puts movie.inspect\nend\n</code></pre>\n\n<p>Why weren't some movies being saved? I suspect you were running out of movie titles and then failing your uniqueness constraint. Faker has a finite number of responses for any category. I think there are only 22 unique <code>Faker::Book.title</code> responses.</p>\n"}], "owner": {"reputation": 3, "user_id": 7314805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8kLT1nqz0c/AAAAAAAAAAI/AAAAAAAAAYo/ySvKP_VGoIM/photo.jpg?sz=128", "display_name": "Zergling", "link": "https://stackoverflow.com/users/7314805/zergling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1787, "favorite_count": 0, "accepted_answer_id": 46574179, "answer_count": 1, "score": 0, "last_activity_date": 1507163003, "creation_date": 1507149174, "last_edit_date": 1507163003, "question_id": 46573688, "link": "https://stackoverflow.com/questions/46573688/seed-database-with-foreign-key-seeds-rb", "title": "Seed database with foreign key - seeds.rb", "body": "<p>I'm trying to seed database with Faker gem and I am succeeding when I am trying to seed just movies, but when I try to seed movies with each having 1-10 comments I'm getting bunch of different errors depends what I change.</p>\n\n<p>Here is how my seeds.rb looks like:</p>\n\n<pre><code>require 'faker'\n\nformats = %w[Beta VHS IMAX HD SuperHD 4K DVD BluRay]\ngenres = %w[Triller Comedy Horror Action Drama SciFi Documentary]\nimages = %w[magento.svg mysql.svg php.svg jquery.svg mongodb.svg prestashop.svg meteor.svg]\n\nMovie.destroy_all\nComment.destroy_all\n\n100.times do\n  movie = Movie.create([{ name: Faker::Book.title,\n                          director: Faker::Name.name,\n                          description: Faker::FamilyGuy.quote,\n                          year: rand(1920..2018),\n                          length: rand(80..240),\n                          format: formats[rand(formats.length)],\n                          genre: genres[rand(genres.length)],\n                          image: images[rand(images.length)],\n                          thumbnail: images[rand(images.length)] }])\n  unless movie.nil?\n    rand(1..10).times do\n      movie.comments.create(\n        author: Faker::Name.name,\n        title: Faker::Book.title,\n        content: Faker::FamilyGuy.quote,\n        rating: rand(1..5)\n      )\n    end\n  end\n  puts movie.inspect\nend\n</code></pre>\n\n<p>Here is my comment model:</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :movie\nend\n</code></pre>\n\n<p>And here is my movie model: </p>\n\n<pre><code>class Movie &lt; ApplicationRecord\n  has_many :comments\n\n  validates_presence_of :name, :director\n#  validates_numericality_of :year, :length, greater_than: 0\n  validates_uniqueness_of :name, message: 'Name is already used!'\n#  validates_length_of :year, maximum: 4\n\n  paginates_per 10\n\n  def proper_name\n    name.titleize\n  end\n\nend\n</code></pre>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 2, "creation_date": 1507149187, "post_id": 46573565, "comment_id": 80100976, "body": "It may seem like a good idea to use a non-standard foreign key name, but it will bite you in the future. Strongly consider using the Rails Way."}], "answers": [{"tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": false, "score": 0, "last_activity_date": 1507150464, "creation_date": 1507150464, "answer_id": 46574006, "question_id": 46573565, "link": "https://stackoverflow.com/questions/46573565/how-to-rename-a-foreign-key/46574006#46574006", "title": "how to rename a foreign key?", "body": "<p>To minimize the possibilities of fighting with rails when doing something like this, I'd simply override the <code>delivery=(value)</code> method. e.g.:</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  belongs_to :delivery, :class_name =&gt; \"Order\"\n\n  def delivery=(id)\n    delivery_id = id\n  end\nend\n</code></pre>\n\n<p>In effect, this will prevent assigning objects to the association. Other methods, e.g. <code>build_delivery</code> and <code>delivery</code> will still be present and could be overwritten as well but as @moveson has already pointed out, striving from the rails way will typically cause pain later on.</p>\n"}, {"tags": [], "owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "is_accepted": false, "score": 0, "last_activity_date": 1507177372, "creation_date": 1507177372, "answer_id": 46577805, "question_id": 46573565, "link": "https://stackoverflow.com/questions/46573565/how-to-rename-a-foreign-key/46577805#46577805", "title": "how to rename a foreign key?", "body": "<p>You need to specify <code>foreign_key</code> name in models:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  has_many :products, foreign_key: \"delivery\"\nend\n\nclass Product &lt; ApplicationRecord\n  belongs_to :delivery, :class_name =&gt; \"Order\", foreign_key: \"delivery\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1507196817, "creation_date": 1507196817, "answer_id": 46582570, "question_id": 46573565, "link": "https://stackoverflow.com/questions/46573565/how-to-rename-a-foreign-key/46582570#46582570", "title": "how to rename a foreign key?", "body": "<p>The good answer is you don't. You can alias associations by using the foreign key and class_name options:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  has_many :products, foreign_key: \"delivery_id\"\nend\n\nclass Product &lt; ApplicationRecord\n  belongs_to :delivery, class_name: \"Order\"\nend\n</code></pre>\n\n<p>But the <code>_id</code> suffix is a really good convention as it makes very easy to understand the schema as its almost overly apparent which columns are foreign key columns. And conventions are what makes Rails awesome.</p>\n\n<p>There is no good reason to skirt it unless you have a crappy legacy application.</p>\n"}], "owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 808, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1507196817, "creation_date": 1507148683, "question_id": 46573565, "link": "https://stackoverflow.com/questions/46573565/how-to-rename-a-foreign-key", "title": "how to rename a foreign key?", "body": "<p>I want to remove the <code>_id</code> prefix the foreign key?<br>\nNew table. Two models <code>Order</code> and <code>Product</code></p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  has_many :products\nend\nclass Product &lt; ApplicationRecord\n  belongs_to :delivery, :class_name =&gt; \"Order\"\nend\n</code></pre>\n\n<p>Make in the <code>products</code> table <code>t.integer :delivery, index: true</code></p>\n\n<p>Error:</p>\n\n<pre><code>ActiveRecord::AssociationTypeMismatch: Order(#85313090) expected, got 1 which is an instance of Fixnum(#73138750)\n</code></pre>\n\n<p>How to fix?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sinatra", "nokogiri", "open-uri"], "comments": [{"owner": {"reputation": 1, "user_id": 8722579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2Zx84OhPJTY/AAAAAAAAAAI/AAAAAAAAAIY/1AB4iTeCOUI/photo.jpg?sz=128", "display_name": "Chelo", "link": "https://stackoverflow.com/users/8722579/chelo"}, "edited": false, "score": 0, "creation_date": 1507147862, "post_id": 46573309, "comment_id": 80100388, "body": "Did you try setting a timeout as explained here? <a href=\"https://stackoverflow.com/questions/26066496/preventing-timeout-when-connecting-to-a-url\" title=\"preventing timeout when connecting to a url\">stackoverflow.com/questions/26066496/&hellip;</a>"}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 1, "user_id": 8722579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2Zx84OhPJTY/AAAAAAAAAAI/AAAAAAAAAIY/1AB4iTeCOUI/photo.jpg?sz=128", "display_name": "Chelo", "link": "https://stackoverflow.com/users/8722579/chelo"}, "edited": false, "score": 0, "creation_date": 1507148395, "post_id": 46573309, "comment_id": 80100609, "body": "Not sure how that would make a difference."}], "answers": [{"tags": [], "owner": {"reputation": 92, "user_id": 6005052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e55c50d6db5c184ad6ac5af2f1f3969?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/6005052/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1588964342, "creation_date": 1588964342, "answer_id": 61686199, "question_id": 46573309, "link": "https://stackoverflow.com/questions/46573309/open-uri-hanging-timing-out/61686199#61686199", "title": "Open-Uri hanging/timing out", "body": "<p>The page you try to retrieve take time-out. It could be the slow response of the server which can be adjusted like below, or the site down. </p>\n\n<pre><code>            url_object = open(url,  \"ssl_verify_mode\"=&gt;0, \"allow_redirections\"=&gt;:safe, \"read_timeout\"=&gt;Max_http_timeout/1000)\n</code></pre>\n\n<p>Refer to the doc for more explanation: <a href=\"https://docs.ruby-lang.org/en/2.0.0/OpenURI/OpenRead.html\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.0.0/OpenURI/OpenRead.html</a></p>\n"}], "owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1588964342, "creation_date": 1507147530, "question_id": 46573309, "link": "https://stackoverflow.com/questions/46573309/open-uri-hanging-timing-out", "title": "Open-Uri hanging/timing out", "body": "<p>I am trying to use open-uri with Nokogiri</p>\n\n<pre><code>class Script\n\n  require 'nokogiri'\n  require 'open-uri'\n\n  open(\"http://www.ruby-lang.org/\") {|f|\n    f.each_line {|line| p line}\n  }\n\nend\n</code></pre>\n\n<p>It is timing out with the following error</p>\n\n<pre><code>   in `initialize': execution expired (Net::OpenTimeout)\n</code></pre>\n\n<p>Any idea why this is happening?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 817, "user_id": 4526336, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh5.googleusercontent.com/-BO8B82i2_3s/AAAAAAAAAAI/AAAAAAAAADE/rFZk81Re8II/photo.jpg?sz=128", "display_name": "Brydon Gibson", "link": "https://stackoverflow.com/users/4526336/brydon-gibson"}, "edited": false, "score": 2, "creation_date": 1507147336, "post_id": 46573176, "comment_id": 80100096, "body": "The question doesn&#39;t really make sense - you want to remove an item from an array, but not remove it from the array? If you want to delete the item, the array will be shorter. If you want the item to go away, but reserve the spot at the index, then set the item at that index to null or 0"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 817, "user_id": 4526336, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh5.googleusercontent.com/-BO8B82i2_3s/AAAAAAAAAAI/AAAAAAAAADE/rFZk81Re8II/photo.jpg?sz=128", "display_name": "Brydon Gibson", "link": "https://stackoverflow.com/users/4526336/brydon-gibson"}, "edited": false, "score": 0, "creation_date": 1507148520, "post_id": 46573176, "comment_id": 80100659, "body": "I just want to remove the item before I apply the &quot;select&quot; statement to it.  I would like it to remain after that entire line is executed."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507150143, "post_id": 46573176, "comment_id": 80101406, "body": "why not just <code>dup</code> the <code>Array</code> e.g. <code>my_data_col.dup.tap{#...etc,etc,etc}</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507168777, "post_id": 46573176, "comment_id": 80106713, "body": "There is no &quot;permanent removing&quot; vs. &quot;temporal removing&quot;. You probably meant &quot;removing from the receiver&quot; vs. &quot;creating a new array without the element&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1507150787, "creation_date": 1507150787, "answer_id": 46574088, "question_id": 46573176, "link": "https://stackoverflow.com/questions/46573176/how-can-i-remove-an-element-from-an-array-at-an-index-position-without-permanent/46574088#46574088", "title": "How can I remove an element from an array at an index position without permanently changing the array?", "body": "<p>Given your example in @Ursus's post (now deleted) I would execute as follows: </p>\n\n<pre><code>my_data_col.select.with_index do |str,idx| \n  str.respond_to?(:downcase) &amp;&amp; idx != index\nend.map(&amp;:downcase).uniq\n</code></pre>\n\n<p>Next time please post your full example so people can assist more easily</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46574088, "answer_count": 1, "score": 0, "last_activity_date": 1507169247, "creation_date": 1507147059, "last_edit_date": 1507169247, "question_id": 46573176, "link": "https://stackoverflow.com/questions/46573176/how-can-i-remove-an-element-from-an-array-at-an-index-position-without-permanent", "title": "How can I remove an element from an array at an index position without permanently changing the array?", "body": "<p>How do I remove an item from an array at a specific index without permanently removing the item from the array?  I have</p>\n\n<pre><code>my_data_col.tap{|i| i.delete_at(index)}.select{|item| ... }\n</code></pre>\n\n<p>I notice that, after the call, <code>my_data</code> contains one element fewer than it did when I started.  How do I remove the element at the index without permanently altering the array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 1, "creation_date": 1507146169, "post_id": 46572883, "comment_id": 80099525, "body": "If the two models are different then there&#39;s no way you can do this. But you can paginate an Array, if you are using <code>Kaminari</code> <a href=\"https://github.com/kaminari/kaminari#paginating-a-generic-array-object\" rel=\"nofollow noreferrer\">github.com/kaminari/kaminari#paginating-a-generic-array-obje&zwnj;&#8203;ct</a>"}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 1, "creation_date": 1507146183, "post_id": 46572883, "comment_id": 80099535, "body": "As for <code>WillPaginate</code>, i don&#39;t know"}, {"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "reply_to_user": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1507146299, "post_id": 46572883, "comment_id": 80099609, "body": "I&#39;m using <code>Kaminari</code> and am getting the exception <code>undefined method </code>page&#39; for #&lt;Array:0x007f8b100422f0&gt;` Although, I suppose reading the <code>Kaminari</code> documentation would have been a great idea ..."}], "answers": [{"tags": [], "owner": {"reputation": 1957, "user_id": 816534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70bacfa0a93dfc516f0e328c8baf7010?s=128&d=identicon&r=PG", "display_name": "gdurelle", "link": "https://stackoverflow.com/users/816534/gdurelle"}, "is_accepted": true, "score": 2, "last_activity_date": 1507146467, "creation_date": 1507146467, "answer_id": 46573016, "question_id": 46572883, "link": "https://stackoverflow.com/questions/46572883/chaining-activerecord-queries-from-different-models/46573016#46573016", "title": "Chaining ActiveRecord queries from different models", "body": "<p>You can't merge 2 different Objects therefore you cna't merge 2 different collections of Objects.\nYou have to use an array (except if your flights and waypoints are in fact relations of the same model??)</p>\n\n<p>BUT you can use an array in your pagination system.\nBoth Kaminari and will_paginate provide methods to do so.</p>\n\n<p>Wich pagination gem do you use ?</p>\n"}], "owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 46573016, "answer_count": 1, "score": 0, "last_activity_date": 1507146467, "creation_date": 1507145947, "question_id": 46572883, "link": "https://stackoverflow.com/questions/46572883/chaining-activerecord-queries-from-different-models", "title": "Chaining ActiveRecord queries from different models", "body": "<p>I have two models that belong_to the same model. I want to find all the matching parents in both models in one query if possible. </p>\n\n<p>Right now I'm doing this: </p>\n\n<pre><code>locations = [1,2,3]\nflight_results   = self.flights.where(from_id: locations).or(self.flights.where(to_id: locations))\nwaypoint_results = self.waypoints.where(location_id: locations)\nsearch_results = flight_results + waypoint_results\nsearch_results \n</code></pre>\n\n<p>The above returns an array, but because of a pagination gem that I'm using, I need to return an ActiveRecord_AssociationRelation. </p>\n\n<p>Is this possible? </p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 8672443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5nJJX.jpg?s=128&g=1", "display_name": "ZpfSysn", "link": "https://stackoverflow.com/users/8672443/zpfsysn"}, "edited": false, "score": 0, "creation_date": 1507144792, "post_id": 46572534, "comment_id": 80098794, "body": "This makes perfect sense. This only happens when we are slicing the array using range of index am i right? Since a[5] would still return nil"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1507145016, "post_id": 46572534, "comment_id": 80098906, "body": "I think you mean to say &quot;when <code>i == arr.size</code>.&quot;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507145036, "post_id": 46572534, "comment_id": 80098914, "body": "Yes, as <code>5</code> is not a range, <code>a[5]</code> is the value of <code>a</code> at index <code>5</code>. <code>a[i] #=&gt; nil</code> for all <code>i &gt;= a.size</code>."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507149731, "post_id": 46572534, "comment_id": 80101202, "body": "Seems odd, given that both a[5], and a[6] return nil, it would make more sense if the ranges of both, ex. a[5,1] and a[6,1] would also return nil"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507151867, "post_id": 46572534, "comment_id": 80102219, "body": "@s1mpl3, language design decisions are sometimes made for reasons of convenience. Suppose, for example, we have arrays <code>a = [1,2,3]</code> and <code>b = [1,5,3,4,6]</code> (whose elements are not <code>nil</code>) and want an array of indices <code>i</code> for which <code>a[i] == b[i] #=&gt; true</code>. An easy way of determining that is <code>a.each_index.with_object([]) { |i,arr| arr &lt;&lt; i if a[i] == b[i] } #=&gt; [0, 2]</code>. Because of the way <code>[Array#[]]</code> was designed, we don&#39;t have to worry about whether <code>a</code> is larger, smaller or the same size as <code>b</code>. I expect this definition of <code>[]</code> was reached after various use cases had been considered."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507166929, "post_id": 46572534, "comment_id": 80106333, "body": "Cary how does you the explains the reason behind the difference and benefit in the range result?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507177726, "post_id": 46572534, "comment_id": 80108664, "body": "@s1mpl3, no examples come to mind. Let me think about it. Perhaps other readers can identify coding problems that benefit from the way <code>Array#[]</code> is defined when the method has two arguments."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507212656, "post_id": 46572534, "comment_id": 80128734, "body": "Oh OK, I agree that a[5] and a[6] both should return nil, but I couldn&#39;t see the benefit of a[5,1] and a[6,1] returning different values."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507218533, "post_id": 46572534, "comment_id": 80132699, "body": "@s1mpl3, yes, I understand. Thinking."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507223726, "post_id": 46572534, "comment_id": 80135690, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/156033/discussion-between-s1mpl3-and-cary-swoveland\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1507145114, "last_edit_date": 1507145114, "creation_date": 1507144599, "answer_id": 46572534, "question_id": 46572286, "link": "https://stackoverflow.com/questions/46572286/special-cases-of-ruby-array-slicing/46572534#46572534", "title": "Special cases of Ruby array slicing", "body": "<p>Your confusion stems from the lack of a definition for an index being \"at the end of the range\". For any array <code>arr</code>, the index <code>i</code> is at the end of the range when <code>i</code> equals <code>arr.size</code>, that is, when the index equals the index of the last element plus one.</p>\n\n<p>For <code>a[5,1] #=&gt; []</code>, <code>5</code>, the starting index, is \"at the end of the range\", since <code>a.size #=&gt; 5</code>. Therefore, by the doc, this should return an empty array regardless of the value of the second argument (which is better described as the \"size\", rather than the \"index\"). For example,</p>\n\n<pre><code>a[5,1]          #=&gt; [] \na[5, 1_000_000] #=&gt; [] \na[6,1]          #=&gt; nil\n</code></pre>\n\n<p>For <code>a[5..10]</code> we have the same result.</p>\n"}], "owner": {"reputation": 675, "user_id": 8672443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5nJJX.jpg?s=128&g=1", "display_name": "ZpfSysn", "link": "https://stackoverflow.com/users/8672443/zpfsysn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 46572534, "answer_count": 1, "score": 0, "last_activity_date": 1507169669, "creation_date": 1507143576, "last_edit_date": 1507169669, "question_id": 46572286, "link": "https://stackoverflow.com/questions/46572286/special-cases-of-ruby-array-slicing", "title": "Special cases of Ruby array slicing", "body": "<p>Document for <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>Array#slice</code></a> says:</p>\n\n<blockquote>\n  <p>[A]n empty array is returned when the starting index for an element range is at the end of the array. </p>\n  \n  <p>Returns nil if the index (or starting index) are out of range.</p>\n</blockquote>\n\n<p>Having this in mind,</p>\n\n<pre><code>a = [\"a\",\"b\",\"c\",\"d\",\"e\"]\n\na[6,1]   # =&gt; nil\na[5,1]   # =&gt; []\na[5..10] # =&gt; []\n</code></pre>\n\n<p>why does <code>a[5,1]</code> and <code>a[5..10]</code> return an empty array given that <code>5</code> is not the end of the array? It should be out of index, hence it should return <code>nil</code>.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "edited": false, "score": 2, "creation_date": 1507142671, "post_id": 46571984, "comment_id": 80097659, "body": "Your code is correct, when I execute your sample I have the expected output : <code>[1, 2, 3, 4, 5, 6, 7, 8, 9]</code>"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 2, "creation_date": 1507142757, "post_id": 46571984, "comment_id": 80097718, "body": "I as well don&#39;t see how you could get a 0 in your array given that range."}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1507142608, "creation_date": 1507142608, "answer_id": 46572024, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1/46572024#46572024", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<p>Here's a way to do it: </p>\n\n<pre><code>(1..9).map(&amp;:itself)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1507144658, "post_id": 46572034, "comment_id": 80098722, "body": "or dates for example in <code>ActiveRecord</code> something like <code>(Date.today.at_beginning_of_month..Date.today).to_a</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1507144862, "post_id": 46572034, "comment_id": 80098830, "body": "Yep. Also works intelligently with longer strings like <code>(&#39;model_101&#39;..&#39;model_105&#39;).to_a</code>"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 4, "last_activity_date": 1507143359, "last_edit_date": 1507143359, "creation_date": 1507142655, "answer_id": 46572034, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1/46572034#46572034", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<p>Using the <code>..</code> operator creates a Range, and Per the <a href=\"https://ruby-doc.org/core-2.1.1/Range.html\" rel=\"nofollow noreferrer\">docs</a>, a Range, like any other Enumerable object, can be converted directly into an Array:</p>\n\n<pre><code>(1..9).to_a\n#=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>You might be interested to know that you can also do this with a Range built using String values:</p>\n\n<pre><code>('a'..'e').to_a\n#=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 2, "last_activity_date": 1507144881, "last_edit_date": 1507144881, "creation_date": 1507142663, "answer_id": 46572037, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1/46572037#46572037", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<pre><code>num = 9\n(1..num).to_a\n# =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Array(1..num)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1507142787, "post_id": 46572059, "comment_id": 80097739, "body": "He says <i>_from 1 to x</i>"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 0, "last_activity_date": 1507190297, "last_edit_date": 1507190297, "creation_date": 1507142744, "answer_id": 46572059, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1/46572059#46572059", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<p>Use something like this:</p>\n\n<pre><code>(1..x).to_a\n</code></pre>\n\n<p>Where <code>x</code> can be any number.</p>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1507143777, "post_id": 46572145, "comment_id": 80098257, "body": "I&#39;d go with <code>n.downto(1).to_a.reverse</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1507143934, "post_id": 46572145, "comment_id": 80098338, "body": "@Sebasti&#225;nPalma or to avoid reversing, <code>1.upto(9).to_a</code>:)"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1507144420, "post_id": 46572145, "comment_id": 80098597, "body": "Maybe <code>(49..&quot;#{n}&quot;.ord).map { |e| e.chr.to_i }</code>?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 2, "creation_date": 1507144653, "post_id": 46572145, "comment_id": 80098719, "body": "While we&#39;re at it, why not <code>&#39;123456789&#39;.chars.map(&amp;:to_i)</code>? :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1507209140, "post_id": 46572145, "comment_id": 80125942, "body": "Since we are having so much fun <code>Enumerator.new {|y| i = 0; loop { y &lt;&lt; i+=1}}.first(9)</code>"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1507144938, "last_edit_date": 1507144938, "creation_date": 1507143074, "answer_id": 46572145, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1/46572145#46572145", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<p>A neat <a href=\"https://youtu.be/gIEMKOI_Y-4?t=15m37s\" rel=\"nofollow noreferrer\">trick</a>:</p>\n\n<pre><code>[*1..9]\n #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>And as we're in Ruby land, some alternatives:</p>\n\n<pre><code>Array.new 9 { |i| i + 1 }\n #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n9.times.with_object [] { |i,o| o &lt;&lt; i + 1 }\n #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n(1..Float::INFINITY).take 9\n #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1507190297, "creation_date": 1507142475, "question_id": 46571984, "link": "https://stackoverflow.com/questions/46571984/turn-a-number-into-an-array-of-integers-up-to-that-number-starting-from-1", "title": "turn a number into an array of integers up to that number starting from 1", "body": "<p>So I am trying to turn a number into an array of integers up to that number starting at one. So for example if the number is <code>9</code> I want an array to be <code>nums = [1,2,3,4,5,6,7,8,9]</code> Is there any built-in method for this? I try the following:</p>\n\n<pre><code> arr = [] \n(1..9).each do |num|   \n  arr &lt;&lt; num \nend\n</code></pre>\n\n<p>But this gives me the following output.\n<code>arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1507139526, "post_id": 46571125, "comment_id": 80095903, "body": "you don&#39;t need the array, you can have <code>items = { &quot;Bananas&quot; =&gt; { menu_item_name: &quot;Bananas&quot;, quantity: 187 }, &quot;Spaghetti&quot; =&gt; { menu_item_name: &quot;Spaghetti&quot;, quantity: 192 } }</code>"}, {"owner": {"reputation": 271, "user_id": 5379719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8636f3628ea4d7d29a5938668fa99725?s=128&d=identicon&r=PG&f=1", "display_name": "tnaught", "link": "https://stackoverflow.com/users/5379719/tnaught"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1507139587, "post_id": 46571125, "comment_id": 80095944, "body": "This is how my data is sent to me, its in an array. I cannot change this."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1554225629, "post_id": 46571125, "comment_id": 97670653, "body": "@SebastianPalma, why is this question a duplicate? This question is not how to obtain a particular hash from an array of hashes (the subject of the linked question); it is how to make <code>items[&quot;Bananas&quot;]</code> do that. (I just voted to reopen, and presto, it reopened. I didn&#39;t know I possessed magic dust.)"}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1507139574, "creation_date": 1507139574, "answer_id": 46571178, "question_id": 46571125, "link": "https://stackoverflow.com/questions/46571125/converting-an-array-of-hashes-of-hashes-ruby/46571178#46571178", "title": "Converting an Array of hashes of hashes Ruby", "body": "<p>With: </p>\n\n<pre><code>items = [{\"Spaghetti &amp; Meatballs\"=&gt;\n   {\n    :menu_item_name=&gt;\"Spaghetti &amp; Meatballs\",\n    :quantity=&gt;192,\n    :category=&gt;\"delicious\"}},\n {\"Bananas\"=&gt;\n   {\n    :menu_item_name=&gt;\"Bananas\",\n    :quantity=&gt;187,\n    :category=&gt;\"sweet\"}}]     \n</code></pre>\n\n<p>Try: </p>\n\n<pre><code>items.find{|hsh| hsh.keys.first == \"Bananas\"}\n</code></pre>\n\n<p>In console:</p>\n\n<pre><code>2.3.1 :011 &gt; items.find{|hsh| hsh.keys.first == \"Bananas\"}\n =&gt; {\"Bananas\"=&gt;{:menu_item_name=&gt;\"Bananas\", :quantity=&gt;187, :category=&gt;\"sweet\"}} \n</code></pre>\n\n<p>If you want, you could assign it to a variable:</p>\n\n<pre><code>bananas_hsh = items.find{|hsh| hsh.keys.first == \"Bananas\"}\n</code></pre>\n\n<p>Again, in console:</p>\n\n<pre><code>2.3.1 :012 &gt; bananas_hsh = items.find{|hsh| hsh.keys.first == \"Bananas\"}\n =&gt; {\"Bananas\"=&gt;{:menu_item_name=&gt;\"Bananas\", :quantity=&gt;187, :category=&gt;\"sweet\"}} \n2.3.1 :013 &gt; bananas_hsh\n =&gt; {\"Bananas\"=&gt;{:menu_item_name=&gt;\"Bananas\", :quantity=&gt;187, :category=&gt;\"sweet\"}} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1507172649, "creation_date": 1507172649, "answer_id": 46577215, "question_id": 46571125, "link": "https://stackoverflow.com/questions/46571125/converting-an-array-of-hashes-of-hashes-ruby/46577215#46577215", "title": "Converting an Array of hashes of hashes Ruby", "body": "<p>You would like <code>items[\"Banana\"]</code> to return an array of elements (hashes) of <code>items</code> that have a key \"Bananas\". Let's consider how that would be done.</p>\n\n<p>Since <code>items.class #=&gt; Array</code> we would have to define an instance method <code>Array#[]</code> to do that. There's a problem, however: <code>Array</code> already has the instance method <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-5B-5Dkm\" rel=\"nofollow noreferrer\">Array#[]</a>, which is used like so: <code>[1,2,3][1] #=&gt; 2</code>, where the argument is the index of the array whose value is to be returned. </p>\n\n<p>With the proviso that the hash's keys are not numeric, we could do the following.</p>\n\n<pre><code>class Array\n  alias :left_right_paren :[]\n  def [](x)\n    if x.is_a?(Integer)\n      left_right_paren(x)\n    else\n      find { |h| h.keys.include?(x) }\n    end\n  end\nend\n\n[1,2,3][1]\n   #=&gt; 2\nitems[\"Bananas\"]\n   #=&gt; {\"Bananas\"=&gt;{:menu_item_name=&gt;\"Bananas\", :quantity=&gt;187, :category=&gt;\"sweet\"}}\n</code></pre>\n\n<p>All that remains is to decide whether this would be a good idea. My opinion? YUK!!</p>\n"}], "owner": {"reputation": 271, "user_id": 5379719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8636f3628ea4d7d29a5938668fa99725?s=128&d=identicon&r=PG&f=1", "display_name": "tnaught", "link": "https://stackoverflow.com/users/5379719/tnaught"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 46577215, "answer_count": 2, "score": 0, "last_activity_date": 1554225693, "creation_date": 1507139394, "last_edit_date": 1507173097, "question_id": 46571125, "link": "https://stackoverflow.com/questions/46571125/converting-an-array-of-hashes-of-hashes-ruby", "title": "Converting an Array of hashes of hashes Ruby", "body": "<p>I have an array of hashes of hashes. Here is what the structure looks like:</p>\n\n<pre><code>items = [{\"Spaghetti &amp; Meatballs\"=&gt;\n   {\n    :menu_item_name=&gt;\"Spaghetti &amp; Meatballs\",\n    :quantity=&gt;192,\n    :category=&gt;\"delicious\"}},\n {\"Bananas\"=&gt;\n   {\n    :menu_item_name=&gt;\"Bananas\",\n    :quantity=&gt;187,\n    :category=&gt;\"sweet\"}}]\n</code></pre>\n\n<p>I want to do the following:</p>\n\n<pre><code>items[\"Bananas\"] \n</code></pre>\n\n<p>and return the hash at bananas.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1507187406, "post_id": 46570843, "comment_id": 80112401, "body": "Further to a suggestion by Eric Duminil, I have refactored my code. Since you accepted my answer (thanks btw), be sure to check the update:)"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1507138798, "creation_date": 1507138798, "answer_id": 46570960, "question_id": 46570843, "link": "https://stackoverflow.com/questions/46570843/find-index-of-regex-match-in-string/46570960#46570960", "title": "Find index of regex match in string", "body": "<p>If you want an Enumerator with every match object, you can use :</p>\n\n<pre><code>def matches(string, regex)\n  position = 0\n  Enumerator.new do |yielder|\n    while match = regex.match(string, position)\n      yielder &lt;&lt; match\n      position = match.end(0)\n    end\n  end\nend\n</code></pre>\n\n<p>As an example :</p>\n\n<pre><code>p matches(\"foo [bar] hello [world]\", /\\[(.*?)\\]/).to_a\n# [#&lt;MatchData \"[bar]\" 1:\"bar\"&gt;, #&lt;MatchData \"[world]\" 1:\"world\"&gt;]\np matches(\"foo [bar] hello [world]\", /\\[(.*?)\\]/).map{|m| [m[1], m.begin(0)]}\n# [[\"bar\", 4], [\"world\", 16]]\n</code></pre>\n\n<p>You can get the matched string and its index from the match object.</p>\n\n<p>But actually, it looks like you need <a href=\"https://ruby-doc.org/core-2.1.4/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>gsub</code></a> with a block:</p>\n\n<pre><code>\"foo [bar] hello [world]\".gsub(/\\[(.*?)\\]/){ |m| # define logic here }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1507187079, "post_id": 46572043, "comment_id": 80112230, "body": "@eric I have implemented your suggestion re the matching groups. Thanks"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 2, "last_activity_date": 1507187025, "last_edit_date": 1507187025, "creation_date": 1507142680, "answer_id": 46572043, "question_id": 46570843, "link": "https://stackoverflow.com/questions/46570843/find-index-of-regex-match-in-string/46572043#46572043", "title": "Find index of regex match in string", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a>:</p>\n\n<pre><code>blacklist = [\"world\"]\nstr = \"foo [bar] hello [world]\"\n\nstr.gsub(/\\[(\\w*?)\\]/) { |m|\n  blacklist.include?($1) ? \"(#{$1})\" : m\n}\n\n#=&gt; \"foo [bar] hello (world)\"\n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 46572043, "answer_count": 2, "score": 3, "last_activity_date": 1507187025, "creation_date": 1507138330, "question_id": 46570843, "link": "https://stackoverflow.com/questions/46570843/find-index-of-regex-match-in-string", "title": "Find index of regex match in string", "body": "<p>Is it possible to find the index of a match in regex while still getting the match? For example:</p>\n\n<pre><code>str = \"foo [bar] hello [world]\"\nstr.match(/\\[(.*?)\\]/) { |match,idx| \n  puts match\n  puts idx\n}\n</code></pre>\n\n<p>Unfortunately, <code>idx</code> is nil in this example.</p>\n\n<p>My real world problem is a string, where I want to replace certain sub strings, that are wrapped in brackets with parentheses, based on some conditions (e.g. if the string is inside a blacklist), e.g. <code>\"foo [bar] hello [world]\"</code> should become <code>\"foo [bar] hello (world)\"</code> when the word <code>world</code> is in a blacklist.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1507552125, "post_id": 46570625, "comment_id": 80241890, "body": "Both solutions (for class and instance methods) include callbacks such as <code>before_add_for_*</code> and <code>before_remove_for_*</code>. Any idea on how to remove those?"}], "tags": [], "owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "is_accepted": false, "score": 2, "last_activity_date": 1507147023, "last_edit_date": 1507147023, "creation_date": 1507137466, "answer_id": 46570625, "question_id": 46570467, "link": "https://stackoverflow.com/questions/46570467/listing-methods-implemented-in-a-rails-5-model-exclude-accessors-and-callbacks/46570625#46570625", "title": "Listing methods implemented in a Rails 5 model. Exclude accessors and callbacks", "body": "<p>For the class methods:</p>\n\n<pre><code>module_methods = Model.included_modules.map(&amp;:methods)\nModel.methods - Model.superclass.methods - module_methods\n</code></pre>\n\n<p>For some model Model.  And you can use <code>instance_methods</code> for the instance methods.</p>\n"}], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507147023, "creation_date": 1507136903, "question_id": 46570467, "link": "https://stackoverflow.com/questions/46570467/listing-methods-implemented-in-a-rails-5-model-exclude-accessors-and-callbacks", "title": "Listing methods implemented in a Rails 5 model. Exclude accessors and callbacks", "body": "<p>Is there a way to list all class and instance methods (separately) that are <strong>implemented</strong> in a Rails 5 model, while excluding inherited methods, methods provided by mixins, attribute accessors, ActiveRecord callbacks and any other methods that were not explicitly implemented in the model? In other words, if there is no <code>def some_method</code> statement within the model file, then <code>some_method</code> should not be listed.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507152138, "post_id": 46570220, "comment_id": 80102341, "body": "I think your answer deserves the greenie. Mine is just a variant."}], "answers": [{"tags": [], "owner": {"reputation": 5255, "user_id": 2639304, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40c44219d944f4acb6182fd153a87b73?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2639304/john-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1507136910, "creation_date": 1507136910, "answer_id": 46570468, "question_id": 46570220, "link": "https://stackoverflow.com/questions/46570220/dynamically-create-class/46570468#46570468", "title": "Dynamically create class", "body": "<p>Works with:</p>\n\n<p><code>City.send(:const_set, \"Bus#{division.capitalize}\", Class.new(Bus))</code></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1507142975, "creation_date": 1507142975, "answer_id": 46572120, "question_id": 46570220, "link": "https://stackoverflow.com/questions/46570220/dynamically-create-class/46572120#46572120", "title": "Dynamically create class", "body": "<p>This is a variant of John's answer, mainly to show the use of <code>send</code> is not essential.</p>\n\n<pre><code>module City\n  class Bus\n    def i_am\n      puts \"this is class #{self.class}\"\n    end\n  end\nend\n\n[\"BusOne\", \"BusTwo\", \"BusSixty\"].each do |class_name|\n    City.const_set(class_name, Class.new(City::Bus))\nend\n\nCity::BusOne.new.i_am\nthis is class City::BusOne\n\nCity::BusTwo.new.i_am\nthis is class City::BusTwo\n\nCity::BusSixty.new.i_am\nthis is class City::BusSixty\n</code></pre>\n"}], "owner": {"reputation": 5255, "user_id": 2639304, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40c44219d944f4acb6182fd153a87b73?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2639304/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "closed_date": 1507157889, "accepted_answer_id": 46572120, "answer_count": 2, "score": 2, "last_activity_date": 1507142975, "creation_date": 1507136052, "question_id": 46570220, "link": "https://stackoverflow.com/questions/46570220/dynamically-create-class", "closed_reason": "Duplicate", "title": "Dynamically create class", "body": "<p><strong>I have the following code:</strong></p>\n\n<pre><code>module City\n  class Bus &lt; Base\n  end\n\n  class BusOne &lt; Bus; end\n  class BusTwo &lt; Bus; end\n  class BusSixty &lt; Bus; end\n  ....\nend\n</code></pre>\n\n<p><strong>My goal is to create this classes dynamically:</strong> </p>\n\n<pre><code>  class BusOne &lt; Bus; end\n  class BusTwo &lt; Bus; end\n  class BusSixty &lt; Bus; end\n  ...\n</code></pre>\n\n<p><strong>That's why I tried:</strong></p>\n\n<pre><code>module City\n  class Bus &lt; Base\n    DIVISON = [:one, :two, :sixty]\n  end\n\n  ....\n  Bus::DIVISONS.each do |division|\n    class \"Bus#{division.capitalize}\".constantize &lt; Bus; end\n  end\nend\n</code></pre>\n\n<p><strong>But I get this error:</strong></p>\n\n<pre><code>unexpected '&lt;', expecting &amp;. or :: or '[' or '.' (SyntaxError)\n</code></pre>\n\n<p><strong>What do I wrong?</strong>\nThanks</p>\n"}, {"tags": ["ruby", "scala", "encryption"], "comments": [{"owner": {"reputation": 3551, "user_id": 4496364, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-mCD1Mgd00l8/AAAAAAAAAAI/AAAAAAAAALQ/o4JxOHwpHJI/photo.jpg?sz=128", "display_name": "insan-e", "link": "https://stackoverflow.com/users/4496364/insan-e"}, "edited": false, "score": 0, "creation_date": 1507138002, "post_id": 46570108, "comment_id": 80095104, "body": "Try to encryp it with Scala and see will you get the same result. xD"}, {"owner": {"reputation": 63, "user_id": 2337928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0692cc52bcd4441010845f27c23840a?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2337928/daniel"}, "reply_to_user": {"reputation": 3551, "user_id": 4496364, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-mCD1Mgd00l8/AAAAAAAAAAI/AAAAAAAAALQ/o4JxOHwpHJI/photo.jpg?sz=128", "display_name": "insan-e", "link": "https://stackoverflow.com/users/4496364/insan-e"}, "edited": false, "score": 0, "creation_date": 1507192768, "post_id": 46570108, "comment_id": 80115359, "body": "That won&#39;t work I think....ruby uses a random iv which is appended to the encrypted string"}], "answers": [{"tags": [], "owner": {"reputation": 2084, "user_id": 1793883, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90767c99e49a5ba98bdf887dddcec2c5?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1793883/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1507570059, "creation_date": 1507570059, "answer_id": 46651916, "question_id": 46570108, "link": "https://stackoverflow.com/questions/46570108/cant-decrypt-ruby-encrypted-string-in-scala/46651916#46651916", "title": "Can&#39;t decrypt Ruby encrypted string in Scala", "body": "<p>I think the problem might be here:</p>\n\n<pre><code>val iv = Base64.decodeBase64(parts(1))\n</code></pre>\n\n<p>The second part of your message is <code>1ede80eb2b498ddf5133f8f3a45a82db2476c740</code> which is not a base 64 encoded string, it's a hex encoded string. Try this instead:</p>\n\n<pre><code>Hex.decodeHex(parts(1))\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2337928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0692cc52bcd4441010845f27c23840a?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2337928/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1507570059, "creation_date": 1507135664, "question_id": 46570108, "link": "https://stackoverflow.com/questions/46570108/cant-decrypt-ruby-encrypted-string-in-scala", "title": "Can&#39;t decrypt Ruby encrypted string in Scala", "body": "<p>I'm using ActiveSupport::MessageEncryptor to encrypt a string in Ruby as follows:</p>\n\n<pre><code>salt = SecureRandom.random_bytes(64)\n// =&gt; \"s\\x90L\\xB8\\xEF\\x8BBp\\xB6\\xF5A\\x95\\xA8]+\\x94\\xF3\\xA7\\x9A\\x84+jC\\xBF\\xB0\\x15\\xEF*\\x8C\\xDD.\\xE5\\xC7Y\\xCE\\xE1\\xAA\\xA4I/%.\\x9E\\x14\\xC1\\xA8\\x9E\\x122\\xE0\\x19.\\x19\\xD8\\xB6\\xE8\\x83\\xE1\\xFE\\x16\\xB5\\x11N\\x18\"\n\nkey = ActiveSupport::KeyGenerator.new('password').generate_key(salt)\n// =&gt; \"\\x12\\xBD1\\xA0Q\\xBF)\\\\\\x89\\xDF\\x95\\xD0\\f\\x03\\x17P'\\x87\\xAD\\x92b\\xB5%\\xC7X\\x01\\x9Ar\\xCB\\xC9\\x1A\\x10'\\xC4\\x95w\\xBF\\xED]\\x17\\xEB\\x9F#\\xC6\\xEE8S\\xE1^\\x18\\xE2^\\x85Z\\rJ\\x9A\\xEE\\xA5\\xEC|\\xA2\\xA9\\x8E\"\n\ncrypt = ActiveSupport::MessageEncryptor.new(key)\nencrypted_username = crypt.encrypt_and_sign(\"daniel\")\n// =&gt; \"N0dHcFM3MnQrcW1HUk9UTGwxeUJsZmlCNzcwUGhrdUdtbE9YWnUxamZFST0tLUVUcUlIU2k1ZHIvTmlDRUgzM2FsS0E9PQ==--1ede80eb2b498ddf5133f8f3a45a82db2476c740\"\n</code></pre>\n\n<p>Then in Scala I'm trying to decrypt like so:</p>\n\n<pre><code>var encrypted_str = \"N0dHcFM3MnQrcW1HUk9UTGwxeUJsZmlCNzcwUGhrdUdtbE9YWnUxamZFST0tLUVUcUlIU2k1ZHIvTmlDRUgzM2FsS0E9PQ==--1ede80eb2b498ddf5133f8f3a45a82db2476c740\"\n\nval parts = encrypted_str.split(\"--\");\n\nval encryptedData = Base64.decodeBase64(parts(0))\n\nval iv = Base64.decodeBase64(parts(1))\n\nval cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\ncipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(iv.take(16)));\n\nval result = cipher.doFinal(encryptedData);\nprintln(new String(result, \"UTF-8\"))\n</code></pre>\n\n<p>But I run into this error:</p>\n\n<p>javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "css", "xpath", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 0, "last_activity_date": 1507313652, "creation_date": 1507313652, "answer_id": 46611675, "question_id": 46569933, "link": "https://stackoverflow.com/questions/46569933/how-do-i-retrieve-a-unique-set-of-parent-nodes-in-my-nokogiri-doc/46611675#46611675", "title": "How do I retrieve a unique set of parent nodes in my Nokogiri doc?", "body": "<p>how about:</p>\n\n<pre><code>leaf_nodes.map(&amp;:parent).uniq.each_with_index do |node, index|\n  # Here node is already unique parent node\n  # process stuff\nend\n</code></pre>\n\n<p><code>leaf_nodes.map(&amp;:parent).uniq</code> will extract the parents and will offer you the unique parent before your iteration. This way you don't have to call your <em>business logic</em> multiple times over the same parent element.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 46611675, "answer_count": 1, "score": 0, "last_activity_date": 1507313696, "creation_date": 1507135035, "last_edit_date": 1507313696, "question_id": 46569933, "link": "https://stackoverflow.com/questions/46569933/how-do-i-retrieve-a-unique-set-of-parent-nodes-in-my-nokogiri-doc", "title": "How do I retrieve a unique set of parent nodes in my Nokogiri doc?", "body": "<p>I'm using RoR 5 with Nokogiri.  I use the following expression to obtain child elements from my doc ...</p>\n\n<pre><code>leaf_nodes = doc.xpath(\"//*[not(child::*)]\")\n</code></pre>\n\n<p>I would like to retrieve the parent nodes of these child elements, so right now, I'm doing</p>\n\n<pre><code>    leaf_nodes.each_with_index do |leaf_node, index|\n      node = leaf_node.parent\n... process stuff\n</code></pre>\n\n<p>but this is slightly inefficient as I'm reprocessing some parent nodes multiple times.  Is there a way to retrieve a unique set of parent nodes prior to my looping through everything?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "lti"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507134497, "post_id": 46569427, "comment_id": 80093296, "body": "I see you posted a question in the project issues. Others have asked that same question there - such as <a href=\"https://github.com/instructure/ims-lti/issues/121\" rel=\"nofollow noreferrer\">this issue</a>, in which people have pointed to these example apps: <a href=\"https://github.com/instructure/lti2_reference_tool_provider\" rel=\"nofollow noreferrer\">1</a> <a href=\"https://github.com/instructure/lti_originality_report_example\" rel=\"nofollow noreferrer\">2</a>. In fact, there are <a href=\"https://github.com/instructure?utf8=%E2%9C%93&amp;q=lti&amp;type=&amp;language=\" rel=\"nofollow noreferrer\">quite a few</a> example applications by this author. I don&#39;t know if there is any documentation, but there&#39;s certainly plenty of information available."}, {"owner": {"reputation": 1575, "user_id": 1832135, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/S2ewF.jpg?s=128&g=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/1832135/hamza"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1507136404, "post_id": 46569427, "comment_id": 80094284, "body": "The first example doesn&#39;t use this gem, as pointed in the answer on that issue... But thanks anyway, I think the second example will help... I believe I will have to go through the codes of projects.."}, {"owner": {"reputation": 2382, "user_id": 331759, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93654e8fef73a0f6b8590b623701e599?s=128&d=identicon&r=PG", "display_name": "twmulloy", "link": "https://stackoverflow.com/users/331759/twmulloy"}, "edited": false, "score": 0, "creation_date": 1568054130, "post_id": 46569427, "comment_id": 102145156, "body": "I recommend reading up on the differences that LTI 2 has over LTI and how to use <code>ims-lti</code> will make a little more sense (<a href=\"https://www.imsglobal.org/lti-v2-introduction\" rel=\"nofollow noreferrer\">imsglobal.org/lti-v2-introduction</a>). You use <code>ims-lti</code> the same you would LTI, the major difference between LTI 2 and LTI is the application registration flow, beyond that it is no different. The models that will be of interest will be <code>lib&#47;ims&#47;lti&#47;models&#47;messages&#47;registration_request.rb</code> and <code>&#47;lib&#47;ims&#47;lti&#47;models&#47;messages&#47;tool_proxy_update_request.rb</code>. all-in-all the library isn&#39;t doing much but helping to generate the necessary requests."}], "owner": {"reputation": 1575, "user_id": 1832135, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/S2ewF.jpg?s=128&g=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/1832135/hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507136442, "creation_date": 1507133203, "last_edit_date": 1507136442, "question_id": 46569427, "link": "https://stackoverflow.com/questions/46569427/ims-lti-gem-documentation", "title": "IMS-LTI Gem documentation", "body": "<p>This is not a programming question, but I still thought that this was the best forum to ask this question.</p>\n\n<p>Is there any documentation for <a href=\"https://github.com/instructure/ims-lti\" rel=\"nofollow noreferrer\">IMS-LTI</a> gem? I have to create an LTI 2 tool in ROR but I am unable to find any documentation of how to use this gem? I know one way is to dig through <a href=\"https://github.com/instructure/lti_tool_provider_example\" rel=\"nofollow noreferrer\">this example</a> but can someone point me to the right direction? Probably someone who went through the same process, how did you learn how to use it? I have been searching for last couple of days but I could not find any thing.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "twitter", "tweetstream"], "comments": [{"owner": {"reputation": 420, "user_id": 7612763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OY1EM.png?s=128&g=1", "display_name": "SupineDread89", "link": "https://stackoverflow.com/users/7612763/supinedread89"}, "edited": false, "score": 1, "creation_date": 1507132372, "post_id": 46568933, "comment_id": 80092017, "body": "Here you can find all the gems <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> Here is the documentation for the twitter gem <a href=\"http://www.rubydoc.info/gems/twitter\" rel=\"nofollow noreferrer\">rubydoc.info/gems/twitter</a> And an example for all tweets <a href=\"https://github.com/sferik/twitter/blob/master/examples/AllTweets.md\" rel=\"nofollow noreferrer\">github.com/sferik/twitter/blob/master/examples/AllTweets.md</a>"}, {"owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "reply_to_user": {"reputation": 420, "user_id": 7612763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OY1EM.png?s=128&g=1", "display_name": "SupineDread89", "link": "https://stackoverflow.com/users/7612763/supinedread89"}, "edited": false, "score": 0, "creation_date": 1507140356, "post_id": 46568933, "comment_id": 80096348, "body": "the gems are user related not LIST. My list has over 400 people."}], "answers": [{"tags": [], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "is_accepted": true, "score": 0, "last_activity_date": 1507330534, "creation_date": 1507330534, "answer_id": 46614988, "question_id": 46568933, "link": "https://stackoverflow.com/questions/46568933/ruby-rails-ruby-rails-how-can-i-get-all-the-tweets-from-twitter-list-of-users/46614988#46614988", "title": "ruby/rails ruby/rails How can I get all the tweets from Twitter LIST (of users) using the Twitter API?", "body": "<p>This is what I end up doing. In the model i added the function:   </p>\n\n<pre><code>def self.list_latest()\nlist = URI.parse('https://twitter.com/USERNAME/LISTNAME')\n$client.list_timeline(list).each do |tweet|\n  unless exists?(tweet_id: tweet.id)\n    create!(\n      tweet_id: tweet.id,\n      content: tweet.text,\n      screen_name: tweet.user.screen_name,\n    )\n  end\n end \nend   \n</code></pre>\n\n<p>I get the tweets from my list and add them to my DB if the tweet ID does not exist.<br>\nHope it helps.</p>\n"}], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 46614988, "answer_count": 1, "score": 0, "last_activity_date": 1507330534, "creation_date": 1507131679, "question_id": 46568933, "link": "https://stackoverflow.com/questions/46568933/ruby-rails-ruby-rails-how-can-i-get-all-the-tweets-from-twitter-list-of-users", "title": "ruby/rails ruby/rails How can I get all the tweets from Twitter LIST (of users) using the Twitter API?", "body": "<p>I would like using the twitter API get all the tweets from a twitter list (of users).<br>\nI would like to have a JSON response with the all the tweets in the list. Will parse the JSON to look for hashtags and create graphs.\nI would like to use ruby/rails doing it. \nI were not able to find in the twitter API a way to search list.\nAny insight is appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507132809, "post_id": 46568651, "comment_id": 80092304, "body": "Can you add your routes.rb file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4932805"}, "edited": false, "score": 0, "creation_date": 1507138886, "post_id": 46568651, "comment_id": 80095597, "body": "You need to add a PUT route. Use PATCH instead."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 8656871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37207e103e948f2f84180a9d851439b3?s=128&d=identicon&r=PG&f=1", "display_name": "jaspreet-singh-3911", "link": "https://stackoverflow.com/users/8656871/jaspreet-singh-3911"}, "is_accepted": true, "score": 0, "last_activity_date": 1507139262, "last_edit_date": 1507139262, "creation_date": 1507134500, "answer_id": 46569791, "question_id": 46568651, "link": "https://stackoverflow.com/questions/46568651/update-registration-via-link-to/46569791#46569791", "title": "Update registration via link_to", "body": "<p>Please use the correct update route, i.e <code>pedido_path</code> instead of <code>pedidos_path</code>:</p>\n\n<pre><code>&lt;%= link_to \"Publish\", pedido_path(pedido, pedido: {Status: 3}), method: :put %&gt;\n</code></pre>\n\n<p>And if you want to use this as an AJAX request then you can try this:</p>\n\n<pre><code>&lt;%= link_to \"Publish\", pedido_path(pedido, pedido: {Status: 3}), method: :put, remote: true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 46569791, "answer_count": 1, "score": 0, "last_activity_date": 1507145625, "creation_date": 1507130935, "last_edit_date": 1507145625, "question_id": 46568651, "link": "https://stackoverflow.com/questions/46568651/update-registration-via-link-to", "title": "Update registration via link_to", "body": "<p>I want to update a record without using a form, just using <code>link_to</code> , it would be something like this:</p>\n\n<pre><code>&lt;%= link_to \"Publish\", pedidos_path(pedido, pedido: {Status: 3}), method: :put,:remote =&gt; true %&gt;\n</code></pre>\n\n<p>But I'm getting this error:</p>\n\n<pre><code>Started PUT \"/pedidos.21148?pedido%5BStatus%5D=3\" for 127.0.0.1 at 2017-10-04 11:23:19 -0400\n\nActionController::RoutingError (No route matches [PUT] \"/pedidos.21148\"):\n  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'\n  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\n  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\n  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n</code></pre>\n\n<p>This is my route:</p>\n\n<pre><code>resources :pedidos\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1507130755, "post_id": 46568506, "comment_id": 80090912, "body": "What&#39;s <code>search</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507137358, "post_id": 46568506, "comment_id": 80094754, "body": "Don&#39;t forget input from <code>gets</code> often has a newline on the end. You want <code>usermail = gets.chomp</code>."}, {"owner": {"reputation": 1, "user_id": 8527914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6dgC.jpg?s=128&g=1", "display_name": "Akram Sharifi", "link": "https://stackoverflow.com/users/8527914/akram-sharifi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507138515, "post_id": 46568506, "comment_id": 80095380, "body": "@tadman I used chomp too but its not giving me"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507223048, "post_id": 46568506, "comment_id": 80135335, "body": "Giving you...? What?"}, {"owner": {"reputation": 1, "user_id": 8527914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6dgC.jpg?s=128&g=1", "display_name": "Akram Sharifi", "link": "https://stackoverflow.com/users/8527914/akram-sharifi"}, "edited": false, "score": 0, "creation_date": 1507299094, "post_id": 46568506, "comment_id": 80167244, "body": "when i run the script its not getting executed"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8527914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6dgC.jpg?s=128&g=1", "display_name": "Akram Sharifi", "link": "https://stackoverflow.com/users/8527914/akram-sharifi"}, "is_accepted": false, "score": 0, "last_activity_date": 1507222605, "creation_date": 1507222605, "answer_id": 46591065, "question_id": 46568506, "link": "https://stackoverflow.com/questions/46568506/how-to-search-a-user-in-discourse-using-ruby/46591065#46591065", "title": "How To Search a User in Discourse Using Ruby", "body": "<p>i think we cannot search users by email and we can just use the following for geting users list\nrequire 'rest-client'\nRestClient.get '<a href=\"http://example.com/resource\" rel=\"nofollow noreferrer\">http://example.com/resource</a>', {params: {id: 50, 'foo' => 'bar'}}</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8527914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6dgC.jpg?s=128&g=1", "display_name": "Akram Sharifi", "link": "https://stackoverflow.com/users/8527914/akram-sharifi"}, "is_accepted": true, "score": 0, "last_activity_date": 1507732707, "creation_date": 1507732707, "answer_id": 46691083, "question_id": 46568506, "link": "https://stackoverflow.com/questions/46568506/how-to-search-a-user-in-discourse-using-ruby/46691083#46691083", "title": "How To Search a User in Discourse Using Ruby", "body": "<p>we can get a user by name using Http gem \nrequire 'http'\nusername = 'username'\nresponse = HTTP.get(\"<a href=\"https://discourse.example.com/user/#\" rel=\"nofollow noreferrer\">https://discourse.example.com/user/#</a>{username}.jason?api_key=Your_Discourse_api_key\")\nputs response.body.to_s</p>\n\n<p>it worked for me </p>\n"}], "owner": {"reputation": 1, "user_id": 8527914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6dgC.jpg?s=128&g=1", "display_name": "Akram Sharifi", "link": "https://stackoverflow.com/users/8527914/akram-sharifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46691083, "answer_count": 2, "score": -1, "last_activity_date": 1507732707, "creation_date": 1507130461, "last_edit_date": 1507137318, "question_id": 46568506, "link": "https://stackoverflow.com/questions/46568506/how-to-search-a-user-in-discourse-using-ruby", "title": "How To Search a User in Discourse Using Ruby", "body": "<p>I am trying to find and delete unwanted user in my discourse using ruby </p>\n\n<pre><code>puts \"Search Member you want to Delete\"\n\nputs \"Search By E-Mail\"\n\nusermail = gets\n\nputs client.search(usermail)\n</code></pre>\n\n<p>in result it takes me to discourse page \nis there any possible ways to search and find the exact user by email. \nthanks for your nice and helpful comments </p>\n"}, {"tags": ["ruby", "include"], "comments": [{"owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 1, "creation_date": 1507128882, "post_id": 46567301, "comment_id": 80089678, "body": "I&#39;d suggest you provide more context to what you&#39;re trying to achieve with the code, since you could have scoping issues on <code>file2.rb</code> with undefined objects/classes in <code>file1.rb</code> such as <code>driver</code>, <code>password</code> or <code>Constants</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 0, "creation_date": 1507133534, "post_id": 46567301, "comment_id": 80092777, "body": "even if you manage to &quot;include&quot; this file in your namespace what is it exactly that you anticipate happening? At this point, barring the comments made by @Oxfist, you might as well just use <code>ruby file1.rb</code> from the command line or <code>load</code> in a script."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8692485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209968608283707/picture?type=large", "display_name": "\u30b8\u30e7\u30f3 \u30d4\u30fc\u30bf\u30fc", "link": "https://stackoverflow.com/users/8692485/%e3%82%b8%e3%83%a7%e3%83%b3-%e3%83%94%e3%83%bc%e3%82%bf%e3%83%bc"}, "edited": false, "score": 0, "creation_date": 1507129013, "post_id": 46567774, "comment_id": 80089781, "body": "I tried that before  require &#39;file1&#39;  butt it didn&#39;t work. Their in the same path/directory btw."}, {"owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "reply_to_user": {"reputation": 13, "user_id": 8692485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209968608283707/picture?type=large", "display_name": "\u30b8\u30e7\u30f3 \u30d4\u30fc\u30bf\u30fc", "link": "https://stackoverflow.com/users/8692485/%e3%82%b8%e3%83%a7%e3%83%b3-%e3%83%94%e3%83%bc%e3%82%bf%e3%83%bc"}, "edited": false, "score": 0, "creation_date": 1507129085, "post_id": 46567774, "comment_id": 80089828, "body": "@\u30b8\u30e7\u30f3\u30d4\u30fc\u30bf\u30fc update the question and post the error you&#39;re getting so I can help you"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1507132194, "post_id": 46567774, "comment_id": 80091879, "body": "&quot;butt it didn&#39;t work&quot;. Include an <b>error message</b>. There are a million different ways it might not work and you still haven&#39;t said which it is"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507133358, "post_id": 46567774, "comment_id": 80092665, "body": "The problem here is that it is very unlikely that the OP has the directory in <code>$LOAD_PATH</code>. To assist with this ruby has provided a similar method for requiring files relative to the calling file <code>require_relative</code> which I think is more what you were intending"}], "tags": [], "owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "is_accepted": false, "score": 0, "last_activity_date": 1507128241, "creation_date": 1507128241, "answer_id": 46567774, "question_id": 46567301, "link": "https://stackoverflow.com/questions/46567301/how-to-include-code-from-a-file-in-ruby/46567774#46567774", "title": "How to include code from a file in Ruby?", "body": "<p>According to the <a href=\"https://ruby-doc.org/core-2.4.2/Kernel.html#method-i-require\" rel=\"nofollow noreferrer\">Ruby docs</a>, <code>require</code> has the following behavior:</p>\n\n<blockquote>\n  <p>If the filename does not resolve to an absolute path, it will be\n  searched for in the directories listed in <code>$LOAD_PATH ($:)</code>.</p>\n</blockquote>\n\n<p>Which means that in order to run <code>file1.rb</code>'s code inside <code>file2.rb</code>, where both files are in the exact same folder, you'd have to do the following:</p>\n\n<pre><code># file2.rb\nmodule File2\n  module IOS\n    # Absolute path to file1.rb, adding '.rb' is optional\n    require './file1'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 5879038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9d6ff61a51531a59785d22bb702c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pi Trem", "link": "https://stackoverflow.com/users/5879038/pi-trem"}, "is_accepted": false, "score": 0, "last_activity_date": 1507131714, "creation_date": 1507131714, "answer_id": 46568946, "question_id": 46567301, "link": "https://stackoverflow.com/questions/46567301/how-to-include-code-from-a-file-in-ruby/46568946#46568946", "title": "How to include code from a file in Ruby?", "body": "<p>use <a href=\"https://ruby-doc.org/core-2.3.1/Kernel.html#method-i-require_relative\" rel=\"nofollow noreferrer\">require_relative</a>:</p>\n\n<p><code>require_relative 'file1.rb'</code></p>\n"}], "owner": {"reputation": 13, "user_id": 8692485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209968608283707/picture?type=large", "display_name": "\u30b8\u30e7\u30f3 \u30d4\u30fc\u30bf\u30fc", "link": "https://stackoverflow.com/users/8692485/%e3%82%b8%e3%83%a7%e3%83%b3-%e3%83%94%e3%83%bc%e3%82%bf%e3%83%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1507131714, "creation_date": 1507126872, "last_edit_date": 1507131387, "question_id": 46567301, "link": "https://stackoverflow.com/questions/46567301/how-to-include-code-from-a-file-in-ruby", "title": "How to include code from a file in Ruby?", "body": "<p>I'm new to Ruby and I'm figuring out how to include a file in a script. I tried <code>require</code> and <code>include</code> but it doesn't work.</p>\n\n<p>Here's the file I'd like to include, worth noting that it's not a module.</p>\n\n<pre><code># file1.rb\nif Constants.elementExist(driver, 'Allow') == true\n  allowElement = driver.find_element(:id, 'Allow')\n  allowElement.click()\n  sleep 1\n  wait.until {\n    driver.find_element(:id, 'Ok').click()\n  }\n  username = driver.find_element(:id, 'UsernameInput')\n  username.clear\n  username.send_keys Constants.itech_email\n  password = driver.find_element(:id, 'PasswordInput')\n  password.clear\n  password.send_keys Constants.itechPass\n  driver.find_element(:id, 'Login').click\nelse\n  username = driver.find_element(:id, 'UsernameInput')\n  username.clear\n  username.send_keys Constants.itech_email\n  password = driver.find_element(:id, 'PasswordInput')\n  password.clear\n  password.send_keys Constants.itechPass\n  driver.find_element(:id, 'Login').click\nend\n</code></pre>\n\n<p>That file contains several lines of codes that are reusable or repeatable in my case. It's not inside a class or a module. It's a straightforward Ruby script, and I'd like to use this on my second script inside a module.</p>\n\n<pre><code># file2.rb\nmodule File2\n  module IOS\n    # include file1.rb\n  end\nend\n</code></pre>\n\n<p>This way, it should just run the code of <code>file1.rb</code> inside <code>file2.rb</code>.</p>\n\n<p>How can I do this in Ruby?</p>\n"}, {"tags": ["ruby", "function", "class", "module"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1507130048, "creation_date": 1507130048, "answer_id": 46568371, "question_id": 46567272, "link": "https://stackoverflow.com/questions/46567272/defining-a-module-function-and-later-overriding-the-same-method-how-many-meth/46568371#46568371", "title": "defining a `module_function` and later overriding the same method: how many methods exist?", "body": "<blockquote>\n  <p>what would the API example code look like if the two <code>one</code> methods had been defined at the same time</p>\n</blockquote>\n\n<pre><code>module Sprocket\n  def create\n    \"Sprocket\"\n  end\n\n  module_function :create\n\n  def create\n    \"Sprocket 2.0\"\n  end\nend\n</code></pre>\n\n<p>You should imagine a timeline that is not revertable.</p>\n\n<p>The first example (with <code>one</code>s): introduces an instance method <code>one</code>, declares it to be a module method, introduces new instance method <code>one</code>. The module method remains unchanged.</p>\n\n<p>Your code with <code>create</code>: introduces an instance method <code>create</code>, introduces new \u201cdual\u201d scope for everything declared below with <code>module_function</code>, both introduces new module method and redeclares the instance method.</p>\n\n<p>The code above: introduces an instance method, declares it to be a module method, introduces new instance method.</p>\n"}], "owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46568371, "answer_count": 1, "score": 1, "last_activity_date": 1507130048, "creation_date": 1507126790, "question_id": 46567272, "link": "https://stackoverflow.com/questions/46567272/defining-a-module-function-and-later-overriding-the-same-method-how-many-meth", "title": "defining a `module_function` and later overriding the same method: how many methods exist?", "body": "<p><strong>Main Question:</strong> In the <a href=\"https://apidock.com/ruby/Module/module_function\" rel=\"nofollow noreferrer\">Ruby API docs</a> for the <code>module_function</code> method, I see the following code example:</p>\n\n<pre><code>module Mod\n  def one\n    \"This is one\"\n  end\n  module_function :one\nend\n\nclass Cls\n  include Mod\n  def call_one\n    one\n  end\nend\n\nMod.one     #=&gt; \"This is one\"\nc = Cls.new\nc.call_one  #=&gt; \"This is one\"\n\nmodule Mod\n  def one\n    \"This is the new one\"\n  end\nend\n\nMod.one     #=&gt; \"This is one\"\nc.call_one  #=&gt; \"This is the new one\"\n</code></pre>\n\n<p>If I'm reading this code right, I see the following:</p>\n\n<ol>\n<li>A module is defined named <code>Mod</code>, along with a method named <code>one</code>.  The <code>module_function</code> method is then called, passing the name of this method as the param.</li>\n<li>A class is defined named <code>Cls</code>, and the <code>Mod</code> module is included in this class, giving the class access to the method defined inside <code>Mod</code>.  Then a wrapper method is created, which just delegates its call to the module method.</li>\n<li>The module method is called directly, and the wrapper method is called on a new instance of the class.  Both calls return the same thing.</li>\n</ol>\n\n<p>After that point is where I get confused.  The module is then re-opened and a new implementation of the <code>one</code> method is created.  Then the two original method calls (the module call and the class instance call) are performed again, this time with different outputs.</p>\n\n<p>If two different outputs are being displayed from the respective method calls, this implies that there must now be two different methods with the same name in the module.  Am I correct about that?</p>\n\n<p><strong>Related Question:</strong> out of curiosity, I tried the following code, but it didn't produce the same results:</p>\n\n<pre><code>module Sprocket\n  def create\n    \"Sprocket\"\n  end\n\n  module_function \n\n  def create\n    \"Sprocket 2.0\"\n  end\nend\n\nclass SprocketFactory\n  include Sprocket\n\n  def make\n    create\n  end\nend\n\np Sprocket.create             #=&gt; \"Sprocket 2.0\"\np SprocketFactory.new.make    #=&gt; \"Sprocket 2.0\"\n</code></pre>\n\n<p>Therefore, what would the API example code look like if the two <code>one</code> methods had been defined at the same time (instead of re-opening the module, as was done in the docs)?  Or is such a thing not possible?</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507126154, "post_id": 46566869, "comment_id": 80087583, "body": "maybe you could also explain why you want to do this?"}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507126610, "post_id": 46566869, "comment_id": 80087941, "body": "@Kris clarified by changing my question."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507127174, "post_id": 46566869, "comment_id": 80088419, "body": "The only way I can think of is to delete all the non-parent gems (e.g. <code>actioncable</code> etc.) under the <code>spec</code> key and then do a few find/replaces to convert it in to the correct format."}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507132757, "post_id": 46566869, "comment_id": 80092271, "body": "<code>bundle-auto-update</code> seems to be close to what I need, but it is not working for me."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 1, "creation_date": 1507191349, "post_id": 46566869, "comment_id": 80114582, "body": "You should definitely use <a href=\"http://www.rubydoc.info/github/carlhuda/bundler/Bundler/LockfileParser\" rel=\"nofollow noreferrer\">Bundler::LockfileParser</a> instead of some hand-made parser. This is implemented by bundler itself to read the <code>.lock</code> file. It would requires some tentatives but I am sure you will accomplish what you need"}], "answers": [{"comments": [{"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1507126566, "post_id": 46567065, "comment_id": 80087914, "body": "used this answer to clarify my question. I&#39;m starting with Gemfiles that are not specifying specific versions."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1507127287, "post_id": 46567065, "comment_id": 80088511, "body": "hey david, if this is the answer to your question, can you mark it as solved? or provide at least an upvote if it was helpful?"}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1507132381, "post_id": 46567065, "comment_id": 80092024, "body": "This does not solve my problem. I could tell from your attempt that my question wasn&#39;t clear though. So I think that&#39;s worth an upvote :)"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 1, "creation_date": 1507138392, "post_id": 46567065, "comment_id": 80095315, "body": "would you need then to parse the Gemfile.lock in order to generate a new Gemfile with fixed gem versions?"}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1536603269, "post_id": 46567065, "comment_id": 91474416, "body": "Awesome! I appreciate it. And someone did a oneliner!"}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 2, "last_activity_date": 1507219722, "last_edit_date": 1507219722, "creation_date": 1507126228, "answer_id": 46567065, "question_id": 46566869, "link": "https://stackoverflow.com/questions/46566869/ruby-bundler-how-do-i-lock-down-all-versions-in-gemfile-with-working-set-from-g/46567065#46567065", "title": "Ruby Bundler. How do I lock down all versions in Gemfile with working set from Gemfile.lock?", "body": "<p>If you are trying to reproduce your current <code>Gemfile.lock</code> in the <code>Gemfile</code> for another project, you can specify the exact version of your gems.</p>\n\n<p>Let's assume that I have the following <code>Gemfile</code> in my Rails App:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'pg', '~&gt; 0.18'\ngem 'puma', '~&gt; 3.0'\ngem 'rails', '~&gt; 5.0.0', '&gt;= 5.0.0.1' \n</code></pre>\n\n<p>It generates the following <code>Gemfile.lock</code>:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    pg (0.21.0)\n    puma (3.10.0)\n    rails (5.0.5)\n      actioncable (= 5.0.5)\n      actionmailer (= 5.0.5)\n      actionpack (= 5.0.5)\n      actionview (= 5.0.5)\n      activejob (= 5.0.5)\n      activemodel (= 5.0.5)\n      activerecord (= 5.0.5)\n      activesupport (= 5.0.5)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.0.5)\n      sprockets-rails (&gt;= 2.0.0)\n</code></pre>\n\n<p>If I want to reproduce exactly the same situation in a new project, I will create a Gemfile with exact versions:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'pg', '0.21.0'\ngem 'puma', '3.10.0'\ngem 'rails', '5.0.5'\n</code></pre>\n\n<p>and so on..</p>\n\n<p>You can refer to <a href=\"http://bundler.io/v1.5/gemfile.html\" rel=\"nofollow noreferrer\">bundler documentation</a></p>\n\n<h3>Edit</h3>\n\n<p>After you changed the focus of your question, it seems you are trying to create a <code>Gemfile</code> from a <code>Gemfile.lock</code>.</p>\n\n<p>You could have a look at <a href=\"http://bundler.io/v1.3/man/bundle-install.1.html#DEPLOYMENT-MODE\" rel=\"nofollow noreferrer\">bundle --deployment</a>. I saw several SO questions complaining about the output.</p>\n\n<p>So, if it is not 100% satisfactory, you can use the <code>Bundler::LockfileParser</code> and make your own script such as:</p>\n\n<pre><code># test.rb\nrequire 'bundler'\n\nlockfile = Bundler::LockfileParser.new(Bundler.read_file('Gemfile.lock'))\n\nspecs = lockfile.specs\ngems_hash = Hash.new.tap do |h|\n  specs.each do |s|\n    h[s.name] = {\n      spec: s,\n      dependencies: s.dependencies.map(&amp;:name)\n    }\n  end\nend\n\ndependencies = gems_hash.keys &amp;&amp; gems_hash.values.map { |h| h[:dependencies] }.flatten.uniq.sort\n\n# Remove from the new Gemfile all gems installed as dependencies\ndependencies.each { |dep| gems_hash.delete(dep) }\n\nrelevant_specs = gems_hash.values.map { |h| h[:spec] }\n\n# I assume that by default you are installing from rubygems\nputs \"source 'https://rubygems.org'\"\nputs\n\nrelevant_specs.each do |s|\n  if s.source.to_s =~ /https:\\/\\/rubygems.org/\n    puts \"gem '#{s.name}', '#{s.version}'\" # eventually add \"plaftform: :#{s.platform}\"\n  # I consider as only alternative a git source. \n  elsif s.source.is_a?(Bundler::Source::Git)\n    uri = s.source.uri\n    branch = s.source.branch\n    ref = s.source.ref\n    puts\n    puts \"git '#{uri}', branch: '#{branch}', ref: :#{ref} do\"\n    puts \"  gem '#{s.name}'\"\n    puts \"end\"\n    puts\n  end\nend\nputs\n</code></pre>\n\n<p>I created this <a href=\"https://gist.github.com/mberlanda/54df3151292b9f0bd2a7b9bb00be8452\" rel=\"nofollow noreferrer\">gist</a> for reading easily.</p>\n\n<p>You can create then your <code>Gemfile</code> by running:</p>\n\n<pre><code>$ ruby test.rb &gt; Gemfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": false, "score": 2, "last_activity_date": 1507158398, "creation_date": 1507158398, "answer_id": 46575484, "question_id": 46566869, "link": "https://stackoverflow.com/questions/46566869/ruby-bundler-how-do-i-lock-down-all-versions-in-gemfile-with-working-set-from-g/46575484#46575484", "title": "Ruby Bundler. How do I lock down all versions in Gemfile with working set from Gemfile.lock?", "body": "<p>You could always write it yourself :)</p>\n\n<pre><code>result = \"\"\nFile.readlines(\"Gemfile\").each do |line|\n  if line.strip.start_with?(\"gem\") &amp;&amp; !line.include?(\",\")\n    name = line.match(/gem '(.+)'/)[1]\n    output = `bundle info #{name}`\n    version = output.match(/#{name} \\((.+)\\)/)[1]\n    result &lt;&lt; \"  \" if line.start_with?(\"  \")\n    result &lt;&lt; \"gem '#{name}', '#{version}'\\n\"\n  else\n    result &lt;&lt; line\n  end\nend\nputs result\n</code></pre>\n\n<p>Works only with single quotes, though.</p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 5466412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UijsH.jpg?s=128&g=1", "display_name": "aqwan", "link": "https://stackoverflow.com/users/5466412/aqwan"}, "is_accepted": false, "score": 2, "last_activity_date": 1536513940, "creation_date": 1536513940, "answer_id": 52246967, "question_id": 46566869, "link": "https://stackoverflow.com/questions/46566869/ruby-bundler-how-do-i-lock-down-all-versions-in-gemfile-with-working-set-from-g/52246967#52246967", "title": "Ruby Bundler. How do I lock down all versions in Gemfile with working set from Gemfile.lock?", "body": "<p>to see gem names and versions in Gemfile like format see \n<code>\nbundle show\n</code></p>\n\n<p>On linux I use this quick and dirty snippet to convert to a format I can copy over  Gemfile.</p>\n\n<p><code>\nbundle show | ruby -ne 'puts $_.gsub(/ \\* /,\"gem \\\"\").gsub(/ \\(/,\"\\\", \\\"~&gt; \").gsub(/\\)/,\"\\\"\")'\n</code></p>\n"}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 1, "accepted_answer_id": 46567065, "answer_count": 3, "score": 4, "last_activity_date": 1536513940, "creation_date": 1507125665, "last_edit_date": 1507135038, "question_id": 46566869, "link": "https://stackoverflow.com/questions/46566869/ruby-bundler-how-do-i-lock-down-all-versions-in-gemfile-with-working-set-from-g", "title": "Ruby Bundler. How do I lock down all versions in Gemfile with working set from Gemfile.lock?", "body": "<p>I want to set my <code>Gemfile</code> to use all the exact versions from a working <code>Gemfile.lock</code>.</p>\n\n<p>What is the easiest way to do this?</p>\n\n<p>I do not want to do it manually. Does <code>bundler</code> do this out of the box. If not, is there a gem for this?</p>\n\n<p>To clarify, I have a <code>Gemfile</code> like this:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'pg'\ngem 'puma'\ngem 'rails'\n</code></pre>\n\n<p>I run <code>bundle install</code>, and I get a <code>Gemfile.lock</code> that works for me:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    pg (0.21.0)\n    puma (3.10.0)\n    rails (5.0.5)\n      actioncable (= 5.0.5)\n      actionmailer (= 5.0.5)\n      actionpack (= 5.0.5)\n      actionview (= 5.0.5)\n      activejob (= 5.0.5)\n      activemodel (= 5.0.5)\n      activerecord (= 5.0.5)\n      activesupport (= 5.0.5)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.0.5)\n      sprockets-rails (&gt;= 2.0.0)\n</code></pre>\n\n<p>Now I want a command that updates my <code>Gemfile</code> so that versions are specified:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'pg', '0.21.0'\ngem 'puma', '3.10.0'\ngem 'rails', '5.0.5' \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "callback"], "comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 1, "creation_date": 1507126226, "post_id": 46566857, "comment_id": 80087637, "body": "What have you tried? Did you already use regular ol&#39; exception handling in there via <code>begin; rescue</code>?"}, {"owner": {"reputation": 33, "user_id": 5866710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0b957f62d85fe625d4a2b28456edef?s=128&d=identicon&r=PG&f=1", "display_name": "Subin", "link": "https://stackoverflow.com/users/5866710/subin"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507126319, "post_id": 46566857, "comment_id": 80087712, "body": "In the real code, there are many methods in the callback. Just wanted to know if there is any simple hack to do the same, instead of adding begin; rescue inside each method."}], "answers": [{"tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1507126295, "creation_date": 1507126295, "answer_id": 46567095, "question_id": 46566857, "link": "https://stackoverflow.com/questions/46566857/rails-rescue-a-after-commit-callback-method-if-failed-and-carry-on-with-executi/46567095#46567095", "title": "Rails: rescue a after_commit callback method if failed and carry on with executing other methods", "body": "<p>You can <a href=\"http://blog.honeybadger.io/a-beginner-s-guide-to-exceptions-in-ruby/\" rel=\"nofollow noreferrer\">rescue</a> any errors:</p>\n\n<pre><code>class A\n  after_commit :a, :b, on: [:create, :update]\n\n  def a\n    # ...\n  rescue StandardError\n    # no-op\n  end\n\n  def b\n    # ...\n  rescue StandardError\n    # no-op\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5866710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0b957f62d85fe625d4a2b28456edef?s=128&d=identicon&r=PG&f=1", "display_name": "Subin", "link": "https://stackoverflow.com/users/5866710/subin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507126295, "creation_date": 1507125647, "question_id": 46566857, "link": "https://stackoverflow.com/questions/46566857/rails-rescue-a-after-commit-callback-method-if-failed-and-carry-on-with-executi", "title": "Rails: rescue a after_commit callback method if failed and carry on with executing other methods", "body": "<pre><code>class A\n    after_commit :a, :b, :c, :d, :e, on: [:create, :update]\n\n    def a\n    end\n\n    def b\n    end\n\n    def c\n    end\n\n    def d\n    end\n\n    def e\n    end\n\nend\n</code></pre>\n\n<p>Now the after_commit will execute e, d, c, b, a in order.</p>\n\n<p>Is there any way to skip a method if it raise some error/exception so that other callback filters will get attempted even if the methods executed before it fails.</p>\n"}, {"tags": ["ruby", "selenium", "automated-tests", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507128021, "post_id": 46566606, "comment_id": 80089085, "body": "What version of Watir are you using? With the latest version of Watir, the hope is that you shouldn&#39;t need any explicit waits. Also what version of Page-Object are you using?"}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507128190, "post_id": 46566606, "comment_id": 80089201, "body": "I am using page-object 2.2 and Watir 6.7.3. If I updated it to a latter version of watir my program was not working as I believe it broke page-object."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507130422, "post_id": 46566606, "comment_id": 80090727, "body": "A number waiting related bugs/issues were fixed in the Watir 6.8.x releases. Page-Object 2.3 had some updates to address changes made in Watir 6.8. I&#39;d suggest trying to upgrade both gems and see if that resolves the issue."}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507136080, "post_id": 46566606, "comment_id": 80094135, "body": "2.3? I am seeing 2.2.4 as the latest version."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507136634, "post_id": 46566606, "comment_id": 80094398, "body": "Sorry, I guess I read the change log wrong. I meant <a href=\"https://github.com/cheezy/page-object/blob/master/ChangeLog\" rel=\"nofollow noreferrer\">2.2.3</a>."}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507139430, "post_id": 46566606, "comment_id": 80095856, "body": "I am now using latest versions of both Watir and Page-Object. Seems like waits have to be used here."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507140648, "post_id": 46566606, "comment_id": 80096520, "body": "Do you still need the sleep and the waits or just the waits? It&#39;d help if you could create a page that reproduces the problem."}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507141795, "post_id": 46566606, "comment_id": 80097160, "body": "I need sleep (duration). I have included a line from the debugger log which shows the part of failure. From the Slack channel, I was advised to open an issue for it on watirs github page."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507141967, "post_id": 46566606, "comment_id": 80097246, "body": "Sure. One thing I would suggest you do is try using just the Watir code. It would help to know if the problem is Page-Object vs Watir."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1507158629, "post_id": 46566606, "comment_id": 80104471, "body": "If you could either include the HTML (before and after the first click) or a reference to the page, and then just pure watir code (sans the page object) we should be able to better assist you."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1507158751, "post_id": 46566606, "comment_id": 80104499, "body": "overall, watir has no way to know when JS code is running and it needs to wait for the page to be updated.  In general if you use a selector that is not present before the JS runs, and is present after, then watir should automagically wait for the element to be present before trying to act on it.. even then race conditions are possible depending on delays between when html is updated, and elements are ready to be interacted with."}], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 4686364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9801b79e8361dfb85a7cd4636be0d016?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Nagy", "link": "https://stackoverflow.com/users/4686364/derek-nagy"}, "is_accepted": false, "score": 0, "last_activity_date": 1508948963, "creation_date": 1508948963, "answer_id": 46937612, "question_id": 46566606, "link": "https://stackoverflow.com/questions/46566606/watir-not-waiting-for-elements-to-load/46937612#46937612", "title": "Watir not waiting for elements to load", "body": "<p>Your problem isn't that it's trying to click the button when it's not there, but it's trying to click it before it's ready. Look at the button and see if you can't find an attribute that is only there when it's ready, like a class or on click event. Next use wait_until to wait until that attribute is in the ready state. </p>\n\n<p>It should look something like this:</p>\n\n<p>on(MyPage).generate_button_element.when_present.click</p>\n\n<p>on(MyPage).wait_until { on(MyPage).button_element.attribute_value('class').eql? 'ready'}</p>\n\n<p>on(MyPage).button</p>\n"}], "owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508948963, "creation_date": 1507124926, "last_edit_date": 1507141731, "question_id": 46566606, "link": "https://stackoverflow.com/questions/46566606/watir-not-waiting-for-elements-to-load", "title": "Watir not waiting for elements to load", "body": "<p>In my test automation I am currently clicking on page elements in this manner:\nsleep 2</p>\n\n<pre><code>  on(MyPage).generate_button_element.when_present.click\n  sleep 5\n  on(MyPage).button.when_present.click\n</code></pre>\n\n<p>In the above, I click on \"generate_button\" which would run some JS, create a button and then click ont he next button. In this case, it works. However, I would like to know if there is a way I can remove the sleep calls. I have tried the following:</p>\n\n<pre><code>  on(MyPage).generate_button_element.wait_until_present.click\n  on(MyPage).button.wait_until_present.click\n</code></pre>\n\n<p>But it does not work. I get the following error:</p>\n\n<pre><code>Selenium::WebDriver::Error::UnknownError: unknown error: Element \n</code></pre>\n\n<p>Is there any way I can have watir wait for such elements or are the sleeps my only option?</p>\n\n<p>Debugging logger output:</p>\n\n<pre><code>\"2017-10-04 14:15:41 INFO Selenium &lt;- {\"sessionId\":\"3db2d4a2c23ddd03e43622f3dfcbbab7\",\"status\":12,\"value\":{\"message\":\"invalid element state: Element is not currently interactable and may not be manipulated\\n  (Session info: chrome=61.0.3163.100)\\n  (Driver info: chromedriver=2.31.488774 (7e15618d1bf16df8bf0ecf2914ed1964a387ba0b),platform=Mac OS X 10.12.6 x86_64)\"}}\n\"\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "rspec", "diff", "matcher"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507124916, "post_id": 46566468, "comment_id": 80086724, "body": "Is <a href=\"http://www.rubydoc.info/github/rspec/rspec-expectations/RSpec/Matchers:match_array\" rel=\"nofollow noreferrer\"><code>match_array</code></a> what you&#39;re looking for? If not, then what desired behaviour does it lack?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1507125013, "post_id": 46566468, "comment_id": 80086798, "body": "@TomLord <code>match_array</code> doesn&#39;t take the order of elements into account, i.e. <code>expect([1,2,3]).to match_array([3,2,1])</code> passes."}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1507125119, "post_id": 46566468, "comment_id": 80086874, "body": "In my case, order is important."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507125329, "post_id": 46566468, "comment_id": 80087007, "body": "Oh sorry, I thought that&#39;s what you wanted. But you&#39;re actually just after a &quot;nicer&quot; error message when a standard <code>eq</code> matcher fails?"}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1507125443, "post_id": 46566468, "comment_id": 80087094, "body": "Yes.  That&#39;s exactly it.  The output is long enough that it can be difficult to find the difference when the matcher fails."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1507125556, "post_id": 46566468, "comment_id": 80087178, "body": "What about using a custom error message? <a href=\"https://relishapp.com/rspec/rspec-expectations/v/3-6/docs/customized-message\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-expectations/v/3-6/docs/&hellip;</a>"}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1507125842, "post_id": 46566468, "comment_id": 80087391, "body": "A custom error message is a possible solution.  The link you shared applies to a specific example only.  I wouldn&#39;t want to repeat the customization for each example.  I was also hoping to avoid having to write my own diff.   (Although that is certainly not out of the question.)"}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1507126985, "post_id": 46566468, "comment_id": 80088241, "body": "The solution shown here does what I want --- except for the warning against using <code>RSpec::Differ</code> directly.  <a href=\"https://stackoverflow.com/questions/12551564/how-to-write-a-diffable-matcher-with-rspec2\" title=\"how to write a diffable matcher with rspec2\">stackoverflow.com/questions/12551564/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1507128635, "post_id": 46567457, "comment_id": 80089514, "body": "That&#39;s what I was looking for.  The key for me was figuring out how to call the built-in differ.  An older article cautioned against using the differ directly. <a href=\"https://stackoverflow.com/questions/12551564/how-to-write-a-diffable-matcher-with-rspec2\" title=\"how to write a diffable matcher with rspec2\">stackoverflow.com/questions/12551564/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1507127311, "creation_date": 1507127311, "answer_id": 46567457, "question_id": 46566468, "link": "https://stackoverflow.com/questions/46566468/enable-diffing-for-rspec-array-matcher/46567457#46567457", "title": "Enable diffing for RSpec array matcher", "body": "<p>I may be mistaken, but I don't think this feature is built-in to RSpec.</p>\n\n<p>However, you could <a href=\"https://relishapp.com/rspec/rspec-expectations/v/3-6/docs/custom-matchers/define-a-custom-matcher#overriding-the-failure-message\" rel=\"nofollow noreferrer\">implement a custom matcher with a custom error message</a>:</p>\n\n<pre><code>RSpec::Matchers.define(:eq_array) do |expected|\n  match { |actual| expected == actual }\n\n  failure_message do |actual|\n    &lt;&lt;~MESSAGE\n      expected: #{expected}\n      got:      #{actual}\n\n      diff:     #{Diffy::Diff.new(expected.to_s, actual.to_s).to_s(:color)}\n    MESSAGE\n  end\nend\n\n# Usage:\n\nexpect([1, 2, 3]).to eq_array([1, 4, 3])\n</code></pre>\n\n<p>This demo is using the <a href=\"https://github.com/samg/diffy\" rel=\"nofollow noreferrer\"><code>diffy</code></a> library; you could implement this however you see fit.</p>\n"}], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 46567457, "answer_count": 1, "score": 1, "last_activity_date": 1507127311, "creation_date": 1507124537, "question_id": 46566468, "link": "https://stackoverflow.com/questions/46566468/enable-diffing-for-rspec-array-matcher", "title": "Enable diffing for RSpec array matcher", "body": "<p>RSpec provides a \"diff\"-style output when comparing multi-line strings.  Is there a way to do something similar when comparing arrays (other than converting the array to a multi-line string)?</p>\n"}, {"tags": ["ruby", "xml", "binary", "binary-data"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507121666, "post_id": 46565217, "comment_id": 80084324, "body": "<i>&quot;I&#39;ve read every other response with <code>Hash.from_xml</code> [...]&quot;</i> \u2013 could you give a more complete example, please? Where is your response in that call?"}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507123014, "post_id": 46565217, "comment_id": 80085346, "body": "Hi Stefan. Please see my updates above as I think they shed light on what I&#39;ve discovered. The other responses I&#39;ve read don&#39;t really matter because they come in as straight XML string data, whereas this one contains those MIME headers."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507124123, "post_id": 46565217, "comment_id": 80086179, "body": "According to the <code>Content-Type</code>, this is <a href=\"https://www.w3.org/TR/xop10/\" rel=\"nofollow noreferrer\">XML-binary Optimized Packaging</a>. It allows to extract certain binary parts from the XML to serialize the data more efficiently. The <code>&lt;xop:Include ...&#47;&gt;</code> has to be replaced by the 2nd MIME part. There&#39;s probably a library for that."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1507124943, "post_id": 46565217, "comment_id": 80086746, "body": "Couldn&#39;t you just unzip the string? <a href=\"https://stackoverflow.com/questions/5871498/ruby-unzip-string\">stackoverflow.com/questions/5871498/ruby-unzip-string</a>"}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1507126651, "post_id": 46565217, "comment_id": 80087984, "body": "No. I have tried that code, and it fails silently. The <code>puts</code> statement is not reached."}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1507126793, "post_id": 46565217, "comment_id": 80088090, "body": "It appears that there is no library to read this data, unfortunately. I can&#39;t even find any resources from the past 6 years in a Google search. This is for the eBay File Transfer API. It&#39;s really hard for me to believe that some such library doesn&#39;t exist. I&#39;ll have to come up with a hack whereby I coerce whatever <code>unzip</code> is installed on the server to do this, which means I&#39;ll have to write to a temp file. Ugly."}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": true, "score": 1, "last_activity_date": 1507127051, "creation_date": 1507127051, "answer_id": 46567368, "question_id": 46565217, "link": "https://stackoverflow.com/questions/46565217/how-can-i-read-this-binary-xml-response-with-ruby/46567368#46567368", "title": "How can I read this binary XML response with Ruby?", "body": "<p>This may be a bit more complicated than just using a library. Closest I could find was an implementation in the savon SOAP library that handles xop in multipart responses. You might be able to analyze the code there and come up with a solution that fits your need, or if this is a SOAP service, leverage the savon gem.</p>\n\n<p><a href=\"https://github.com/savonrb/savon-multipart/blob/master/lib/savon/multipart/response.rb#L63-L80\" rel=\"nofollow noreferrer\">https://github.com/savonrb/savon-multipart/blob/master/lib/savon/multipart/response.rb#L63-L80</a></p>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 46567368, "answer_count": 1, "score": 0, "last_activity_date": 1507127051, "creation_date": 1507121062, "last_edit_date": 1507124059, "question_id": 46565217, "link": "https://stackoverflow.com/questions/46565217/how-can-i-read-this-binary-xml-response-with-ruby", "title": "How can I read this binary XML response with Ruby?", "body": "<p>I'm trying to read a response from a marketplace web service. Every other response from this web service is returned in XML format. However, this particular call is requesting a file download. I'm unfamiliar with the way in which it's returned. After looking at the contents, there is XML as well as encoded binary data which is in there as some sort of attachment.</p>\n\n<p>The request I make looks like this. The request is a simple XML request:</p>\n\n<pre><code>  begin\n    response = Net::HTTP.start(url.host, url.port, :use_ssl =&gt; url.scheme == 'https') do |http|\n      http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n      http.request(request)\n    end\n  rescue Errno::ECONNRESET =&gt; e\n    count += 1\n    retry unless count &gt; 10\n    puts \"Tried 10 times and couldn't get #{url.host}: #{e}\"\n  end\n</code></pre>\n\n<p>Here is what the <code>response.body</code> looks like:</p>\n\n<pre><code>--MIMEBoundaryurn_uuid_AF2837F4196B2631EC15070889135182607126\nContent-Type: application/xop+xml; charset=utf-8; type=\"text/xml\"\nContent-Transfer-Encoding: binary\nContent-ID: &lt;0.urn:uuid:AF2837F4196B2631EC15070889135182607127&gt;\n\n&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;downloadFileResponse xmlns=\"http://www.marketplace.com/marketplace/services\"&gt;\n  &lt;ack&gt;Success&lt;/ack&gt;\n  &lt;version&gt;1.1.0&lt;/version&gt;\n  &lt;timestamp&gt;2017-10-04T03:48:33.518Z&lt;/timestamp&gt;\n  &lt;fileAttachment&gt;\n    &lt;Size&gt;25895&lt;/Size&gt;\n    &lt;Data&gt;&lt;xop:Include xmlns:xop=\"http://www.w3.org/2004/08/xop/include\" href=\"cid:urn:uuid:E3A8215C82DBC51E6D1507090865513\"/&gt;&lt;/Data&gt;\n  &lt;/fileAttachment&gt;\n&lt;/downloadFileResponse&gt;\n\n--MIMEBoundaryurn_uuid_AF2837F4196B2631EC15070889135182607126\nContent-Type: application/zip\nContent-Transfer-Encoding: binary\nContent-ID: &lt;urn:uuid:E3A8215C82DBC51E6D1507090865513&gt;\n\nPK&amp;\u00faCK\u00c3EK\u00acgdi\u22026509805153_report.xmlUT   hH\u2018YhH\u2018Yux00\u00cf\u00f9\u00ces\u201a8\u2202\u00bf\u00f8\u02dc_\u00b0\u20ac\u00fc\u00d3\u2260=-\u00e2\u00a0\u00d96\u00da\u00cd&lt; \u203a\u201d\u2265\u00b5\u00efr@   N\u00e5\u00d5\u2044&amp;\u00e8\u02d8\u00ce\u00d8\u00d1\u00c5\u00ea\u00e0\u00e7\u00d5\u2021\u2026\u00b6+\u00f9n\u00e5d=|\u0152\u2014\u0153\u00c1\u00cb\u00b1\u00db\u0153\u00e1\u00e6\u00d3T:\u00e6\u02dc\u00ceg\u00a5?\u00c2u\u00b8\u00c6\u201e]\u02c7\u02d9y]\u00ef\u0192\u00c1~\u02d8\u00a5\u2265;tokvd\u25ca:=\u20ac\u00aaVM|/T!\u2013\u02d8\u03a9P'\n\u00ba\u2264\u222b\u00a5\u00c0\u02c6\u00bf \u00c0j\u02dcx\u25caU\u2019\u00d4\u00ceT\u00a0\u00e3\u00ac\u0153\u02d9-\ufb02\u00cc6\u2019\u00bf\u00a2/\u00fc&gt;\u00cc\u00fa]\u2018Td;n\u00afe\u00b8\u00d2\u221e\u02c6 L%\u2030\u00e5q\u00c0*!\u00e9,\u00a0\u00f2dB\u00b1\u2265=Ic\u2122\u00db\u00ae\u00c7\u00dbp\u00d9\u00a9\u00c1\u00aa\u00c6\u2265\u0178A\uf8ff\u220f\u2265=\u02da\u22488\u0178\u00fb\u00d1\u2014\u00a9\u203aW_v\u02db\u00c1_\u2019Z\u2022]\u02d8W\u20ac$\u00d3\u2039\u02db\u02da\ufb02_\u22069\u00fb\u201c\u00e53\u20ac/\u00db\u00f2b\u00ba\uf8ff)\u01534\u20268K\u03a9\u00d8\u00f5\u00da\u00ee&gt;\u00e4\u00c0\u00cb\u2248\u0178\u02db\u00cdt\\\u00ff\u203a\u00cd\u00af\u02dd\u00df{\u0192y\u22067h\u00d9t_=\u203a\u00c4C$\u00b7\u00c43\u00e5\u00fcr\u0192\u00e2tg\u02c6\u00faASu\u00fa\u00c5\u00a3\u00aawn\u00ce\u00bfl\u00e7_'\u00e8o\u2014\u00e4\u2022\"\u00d9\u00eeA\u00c7)\u2013\u00c6\u00d4{\u02dc\u00a0v\u00a3\u00ffu\u00d4\u222b\u201d\u00f5L2\u00c3f\u00ab\u0153\u00e6\u221a\u201e\u00d4\u2122N\u00d9\u00af\u00bab{\u2202\\\u0178\u201d{MSLnfG\u00cd,h\u02db\u00f9\u201euf\u00da}\u00d8\u00c3\u02c7&lt;M\u00fa\u2265\u00b7\u00e1\u00eb\u00ccV\u02dd\u00d3L&amp;\u00e5uKJ\u00ffBh\u00f6y&amp;\u0178\u220f\u00e4\u02db\u2013\u00e3\u00c7\u00b5&lt;o=Up\u00ca\u02da8\u00ab@\u00ceEKw\u0152l\u02dd\u0152-\u221e\u00cb\u00a5O\u203a4\u00f5\u00d3\u201dN\u221a~\u00cf\u00ce~\u00d8\u222b\u00a0T\u2211\u00cc\u00cb\u20aca\u00e0x   \u00a1$m\u0192\u00a0\n...\n--MIMEBoundaryurn_uuid_AF2837F4196B2631EC15070889135182607126--\n</code></pre>\n\n<p>Obviously I can see there is zip data here. But I've read every other response with <code>Hash.from_xml</code> and obviously that's not going to work here.</p>\n\n<p><code>Update</code>\nIf I write the string to a file <code>test.zip</code>, I can unzip it at the Linux command line, and it creates a readable XML file after flashing this warning:</p>\n\n<pre><code>Archive:  test.zip\nwarning [test.zip]:  822 extra bytes at beginning or within zipfile\n  (attempting to process anyway)\n  inflating: 6509805153_report.xml   \n</code></pre>\n\n<p>Not sure what the extra bytes it's complaining about are.</p>\n\n<p><code>Update 2</code>\nThat's definitely the MIME header and the XML envelope. I can confirm that if I strip those characters out by hand, and the MIME footer, then the test file unzips without warning.</p>\n\n<p>So this appears to be a zipped XML envelope containing a zip file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507122003, "post_id": 46565199, "comment_id": 80084576, "body": "where you are setting @client object? and how?"}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 5362658, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLMFF.jpg?s=128&g=1", "display_name": "QNester", "link": "https://stackoverflow.com/users/5362658/qnester"}, "is_accepted": false, "score": 3, "last_activity_date": 1507121830, "creation_date": 1507121830, "answer_id": 46565487, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails/46565487#46565487", "title": "How to use hidden field tag in rails", "body": "<p>You should use:</p>\n\n<pre><code>&lt;%= f.hidden_field :client_id, value: @client.id %&gt;\n</code></pre>\n\n<p>Some source:</p>\n\n<ul>\n<li><a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/hidden_field\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/FormHelper/hidden_field</a></li>\n<li><a href=\"https://stackoverflow.com/questions/16280341/hidden-field-in-rails-form\">Hidden field in rails form</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3131982/how-do-i-use-hidden-field-in-a-form-for-in-ruby-on-rails\">How do I use hidden_field in a form_for in Ruby on Rails?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 7, "last_activity_date": 1507121861, "creation_date": 1507121861, "answer_id": 46565498, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails/46565498#46565498", "title": "How to use hidden field tag in rails", "body": "<p>Try doing:</p>\n\n<pre><code>&lt;%= f.hidden_field :client_id, value: @assessment.client_id %&gt;\n</code></pre>\n\n<p>Since, as in your prior question, you are setting @assessment.client_id in your <code>new</code> action.</p>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1507121906, "creation_date": 1507121906, "answer_id": 46565512, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails/46565512#46565512", "title": "How to use hidden field tag in rails", "body": "<p>Should the client_id be part of the assessment_params? If so, you can attach it to the form object, i.e. <code>&lt;%= f.hidden_field :client_id, value: @client.id</code>.</p>\n\n<p>Otherwise I think your tag should pass through, just outside of the assessment params hash.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8720155, "user_type": "registered", "profile_image": "https://graph.facebook.com/948063781995001/picture?type=large", "display_name": "Lucas Roman Lise", "link": "https://stackoverflow.com/users/8720155/lucas-roman-lise"}, "is_accepted": false, "score": 1, "last_activity_date": 1507123047, "last_edit_date": 1507123047, "creation_date": 1507122202, "answer_id": 46565623, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails/46565623#46565623", "title": "How to use hidden field tag in rails", "body": "<p><code>&lt;%= f.hidden_field :client_id, :value =&gt; @assessment.client_id %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 2227, "user_id": 4723393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0ZUW.jpg?s=128&g=1", "display_name": "Akshay Borade", "link": "https://stackoverflow.com/users/4723393/akshay-borade"}, "is_accepted": false, "score": 7, "last_activity_date": 1507122694, "last_edit_date": 1507122694, "creation_date": 1507122347, "answer_id": 46565674, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails/46565674#46565674", "title": "How to use hidden field tag in rails", "body": "<p>Please refer following links <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#M002295\" rel=\"noreferrer\">hidden_field</a>  or <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#M002252\" rel=\"noreferrer\">hidden_field_tag</a></p>\n\n<pre><code>        &lt;%= f.hidden_field :client_id, 1 %&gt;\n        &lt;%= hidden_field_tag 'client_id', '1'  %&gt;\n</code></pre>\n\n<p>Note when you used </p>\n\n<pre><code>   &lt;%= f.hidden_field :client_id, 1 %&gt;\n</code></pre>\n\n<p>it change to html</p>\n\n<pre><code>&lt;input type=\"hidden\" id=\"request_client_id\" name=\"request[client_id]\" value=\"1\" /&gt;\n</code></pre>\n\n<p>and when you used </p>\n\n<pre><code>&lt;%= hidden_field_tag 'client_id', '1'  %&gt;\n</code></pre>\n\n<p>it change to html</p>\n\n<pre><code>   &lt;input id=\"client_id\" name=\"client_id\" type=\"hidden\" value=\"1\"/&gt;\n</code></pre>\n\n<p>So, I think here you should use  <code>&lt;%= f.hidden_field :client_id, @client.id %&gt;</code></p>\n\n<p>Hope it will work for you.</p>\n"}], "owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11260, "favorite_count": 1, "accepted_answer_id": 46565498, "answer_count": 5, "score": 2, "last_activity_date": 1507123047, "creation_date": 1507121008, "question_id": 46565199, "link": "https://stackoverflow.com/questions/46565199/how-to-use-hidden-field-tag-in-rails", "title": "How to use hidden field tag in rails", "body": "<p>Say I have this form, but already have a variable, client_id, that I want to pass to the controller. It looks like I need to use a hidden_field_tag. I tried it but I don't think my syntax is quite right. Any idea what i'm doing wrong? Thanks</p>\n\n<pre><code>&lt;%= form_for(@assessment) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :weight %&gt;&lt;br&gt;\n    &lt;%= f.text_field :weight %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :heartrate %&gt;&lt;br&gt;\n    &lt;%= f.text_field :heartrate %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :bodyfat %&gt;&lt;br&gt;\n    &lt;%= f.text_field :bodyfat %&gt;\n  &lt;/div&gt;\n\n    &lt;%= hidden_field_tag :client_id, @client.id %&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507117316, "post_id": 46563924, "comment_id": 80081266, "body": "You&#39;re creating a request to <code>new_assessment_path </code> is that the correct route for your set_client method?, can you add your routes?"}, {"owner": {"reputation": 7023, "user_id": 1009750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fb022490e92b64f35847758b42e2e8?s=128&d=identicon&r=PG", "display_name": "Panther", "link": "https://stackoverflow.com/users/1009750/panther"}, "edited": false, "score": 0, "creation_date": 1507117357, "post_id": 46563924, "comment_id": 80081290, "body": "Add the respective routes section and the generated link code."}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507117987, "post_id": 46563924, "comment_id": 80081658, "body": "@RT5754 check my solution.It no need to create assessment object"}], "answers": [{"comments": [{"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507118439, "post_id": 46563976, "comment_id": 80081952, "body": "I tried this and it no longer gives me an error, but it saves the client_id as nil. So maybe the parameter isn&#39;t being passed?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507118610, "post_id": 46563976, "comment_id": 80082066, "body": "You can check what is being passed to the server by looking at your local server logs."}, {"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507119000, "post_id": 46563976, "comment_id": 80082349, "body": "ok so when the assessments#new view is loaded its there: Parameters: {&quot;client_id&quot;=&gt;&quot;5&quot;}, but when I then click &#39;Create&#39; the parameter dissapears and this is whats there: Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;assessment&quot;=&gt;{&quot;weight&quot;=&gt;&quot;32&quot;, &quot;heartrate&quot;=&gt;&quot;6&quot;, &quot;bodyfat&quot;=&gt;&quot;6&quot;}, &quot;commit&quot;=&gt;&quot;Create Assessment&quot;}"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507119411, "post_id": 46563976, "comment_id": 80082665, "body": "Ok. That&#39;s a different problem. You should mark this one accepted and then post a new question. But, the short answer is that you&#39;re probably not including a hidden field in your new form. But, we would need to see new form to be sure."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1507117737, "last_edit_date": 1507117737, "creation_date": 1507117397, "answer_id": 46563976, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller/46563976#46563976", "title": "Params not passing to controller", "body": "<p>Your error reads: </p>\n\n<blockquote>\n  <p>undefined method `client_id=' for nil:NilClass</p>\n</blockquote>\n\n<p>That's coming from: </p>\n\n<pre><code>def set_client\n  @assessment.client_id = params[:client_id]\nend\n</code></pre>\n\n<p>Which is being called before your <code>new</code> action due to:</p>\n\n<pre><code>before_action :set_client, only: [:new]\n</code></pre>\n\n<p>At that point, <code>@assessment</code> is nil in <code>set_client</code> because you haven't yet assigned the variable. Thus the error.</p>\n\n<p>It has nothing to do with params not passing.</p>\n\n<p>My suggestion is, remove the <code>before_action</code> and change the <code>new</code> action to:</p>\n\n<pre><code>def new\n  @assessment = Assessment.new(client_id: params[:client_id])\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7190190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049333af6640e8a8b52298d1691884c8?s=128&d=identicon&r=PG", "display_name": "Kwaku Boateng", "link": "https://stackoverflow.com/users/7190190/kwaku-boateng"}, "is_accepted": false, "score": 1, "last_activity_date": 1507117550, "creation_date": 1507117550, "answer_id": 46564026, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller/46564026#46564026", "title": "Params not passing to controller", "body": "<p>Do <code>Assessment.find_by(client_id: params[:client_id])</code> in your <code>set_client</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 1, "last_activity_date": 1507117692, "creation_date": 1507117692, "answer_id": 46564067, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller/46564067#46564067", "title": "Params not passing to controller", "body": "<p>You are trying to set the client_id in <code>@assessment</code>, and that variable is not defined when you are trying to set it.</p>\n\n<p><code>before_action</code>'s callback is executed, as the name says, before the action (AKA method).</p>\n\n<p>You should remove the <code>before_action</code> and add the setter within your new method</p>\n\n<pre><code>def new\n  @assessment = Assessment.new\n  @assessment.client_id = params[:client_id]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 1, "last_activity_date": 1507117809, "creation_date": 1507117809, "answer_id": 46564116, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller/46564116#46564116", "title": "Params not passing to controller", "body": "<ul>\n<li>1.Set client in before_action</li>\n<li>2.no need to create @assesment in new method</li>\n</ul>\n\n<p>Change as below</p>\n\n<pre><code>class AssessmentsController &lt; ApplicationController\n  before_action :set_assessment, only: [:show, :edit, :update, :destroy]\n  before_action :set_client, only: [:new]\n\n  def new\n  end\n\n\n\n def create\n    @assessment = Assessment.new(assessment_params)\n    respond_to do |format|\n      if @assessment.save\n        format.html { redirect_to @assessment, notice: 'Assessment was successfully created.' }\n        format.json { render :show, status: :created, location: @assessment }\n      else\n        format.html { render :new }\n        format.json { render json: @assessment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n\n\n  def set_client\n    @client_id = Client.find_by(params[:client_id])\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507121881, "post_id": 46565299, "comment_id": 80084488, "body": "Hi, thanks - this looks like the right direction. I already had the associations in the Models but not in the routes.rb. The routes are now changed but I now get this error on the form: &quot;undefined method `assessments_path&#39; for #&lt;#&lt;Class:0x007f24f18fcc90&gt;:0x007f24f2518240&gt;&quot; with the higlighted line - &lt;%= form_for(@assessment) do |f| %&gt;"}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "reply_to_user": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507122254, "post_id": 46565299, "comment_id": 80084758, "body": "Dude , can u try it by changing  form_for(@assessment) --&gt;  form_for(@assessments)"}, {"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507122345, "post_id": 46565299, "comment_id": 80084808, "body": "its fixed now thanks. Didn&#39;t end up using your method, instead used a hidden field to pass the param. Thanks anyway"}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "reply_to_user": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1507122644, "post_id": 46565299, "comment_id": 80085050, "body": "Ok.But passing params to new method and again sending it to create method to hidden field  is not the best way in rails.I hope u will make use of this thing in ur future work"}], "tags": [], "owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "is_accepted": false, "score": 2, "last_activity_date": 1507121269, "creation_date": 1507121269, "answer_id": 46565299, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller/46565299#46565299", "title": "Params not passing to controller", "body": "<p>Main Reason for the undefined error is You are passing client_id to new method but not to the create method.\nAnd What i understood from ur question is You want add a assessment to a client.</p>\n\n<p>If this is your goal follow these steps </p>\n\n<p>1.create association in respective models.</p>\n\n<p>add the following line in Client.rb</p>\n\n<pre><code>has_many: :assesments\n</code></pre>\n\n<p>and add in Assement.rb</p>\n\n<pre><code>belongs_to: Client\n</code></pre>\n\n<p>2.Now change ur routes.rb.</p>\n\n<pre><code>resources clients do\n  resources assements do\n  end\nend \n</code></pre>\n\n<p>3.Now check ur routes by executing this  cmd <strong>rake routes</strong>\n now your routes should be like this  </p>\n\n<pre><code>/clients/:client_id/assements/new(.:format)\n</code></pre>\n\n<p>4.Now you dont need to pass the client id param manually.</p>\n\n<p>Hope this will help you in solving ur problem.</p>\n\n<p>cmt here if any..</p>\n"}], "owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 46563976, "answer_count": 5, "score": 0, "last_activity_date": 1507121269, "creation_date": 1507117202, "last_edit_date": 1507117395, "question_id": 46563924, "link": "https://stackoverflow.com/questions/46563924/params-not-passing-to-controller", "title": "Params not passing to controller", "body": "<p>Im trying to pass a client_id parameter from one of my views to a different models controller, but it seems like the param isn't being passed since I get the error \"undefined method `client_id=' for nil:NilClass\" in the set_client method. What am I doing wrong? ANy help would be appreciated. Thanks</p>\n\n<pre><code>&lt;%= link_to 'New assessment', new_assessment_path(:client_id =&gt; @client.id), class: \"btn btn-xs btn-success\" %&gt;\n</code></pre>\n\n<p>This is my controller:</p>\n\n<pre><code>class AssessmentsController &lt; ApplicationController\n  before_action :set_assessment, only: [:show, :edit, :update, :destroy]\n  before_action :set_client, only: [:new]\n\n  def new\n    @assessment = Assessment.new\n  end\n\n\n\n def create\n    @assessment = Assessment.new(assessment_params)\n    respond_to do |format|\n      if @assessment.save\n        format.html { redirect_to @assessment, notice: 'Assessment was successfully created.' }\n        format.json { render :show, status: :created, location: @assessment }\n      else\n        format.html { render :new }\n        format.json { render json: @assessment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n\n\n  def set_client\n    @assessment.client_id = params[:client_id]\n  end\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\nresources :trainers\nresources :clients\nresources :assessments\nroot 'pages#home'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope", "mongoid"], "comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507115196, "post_id": 46562473, "comment_id": 80080018, "body": "Do u want to fetch only associated B&#39;s of A in scope or all ?"}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507115689, "post_id": 46562473, "comment_id": 80080310, "body": "First thing you written embeds_one which means for A there will be only one B, So why  age&gt; 18 ????  secondly: if you want fetch all b regardless of A&#39;s then dont use embeds_one"}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "reply_to_user": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507116325, "post_id": 46562473, "comment_id": 80080677, "body": "Let User is A and Profile is B and Profile model contains age field And I want to fetch all the users whose age is greater than 18"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507120123, "post_id": 46562473, "comment_id": 80083234, "body": "@manojchowdary27 why don&#39;t you change the example code to <code>class User ; embeds_one :profile ; end</code>? It&#39;s much easier to reason about actual classes."}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507121735, "post_id": 46562473, "comment_id": 80084376, "body": "Sorry @stefan. I have modified it .Now take a look"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "edited": false, "score": 0, "creation_date": 1507115920, "post_id": 46562961, "comment_id": 80080425, "body": "I tried it , but it is showing undefined method or variable b for class A"}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "edited": false, "score": 0, "creation_date": 1507118040, "post_id": 46562961, "comment_id": 80081685, "body": "And B.all is nil. It may be  because there is only one collection A and it embeds B.There is no such collection B in mongodb"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1507114038, "creation_date": 1507114038, "answer_id": 46562961, "question_id": 46562473, "link": "https://stackoverflow.com/questions/46562473/how-to-declare-a-scope-based-on-embedded-model-attributes-with-mongoid/46562961#46562961", "title": "How to declare a scope based on embedded model attributes with Mongoid", "body": "<p>This should save your day -))</p>\n\n<pre><code>Class B    \n field :age, type:integer\n scope :adults,  -&gt; { where(:age.gt =&gt; 18) }  \nend\n\nclass A\n  embed_one :b\n  def embed_adults\n    b.adults\n  end   \nend\n</code></pre>\n\n<p><a href=\"https://mongoid.github.io/old/en/mongoid/docs/querying.html#scoping\" rel=\"nofollow noreferrer\">https://mongoid.github.io/old/en/mongoid/docs/querying.html#scoping</a></p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "edited": false, "score": 0, "creation_date": 1507117161, "post_id": 46563614, "comment_id": 80081178, "body": "Sorry It is not possible to change association  to has_one.Because Both the models are using single mongo collection.So I should use only embeds_one association. Thanks a lot for ur reply"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 1, "last_activity_date": 1534254771, "last_edit_date": 1534254771, "creation_date": 1507116278, "answer_id": 46563614, "question_id": 46562473, "link": "https://stackoverflow.com/questions/46562473/how-to-declare-a-scope-based-on-embedded-model-attributes-with-mongoid/46563614#46563614", "title": "How to declare a scope based on embedded model attributes with Mongoid", "body": "<p>When you use <em>embeds</em> you can access only associated B objects of A. So, your need i.e all B where age>x doesn't work. So, go for <em>has_one</em> and <em>belongs_to</em></p>\n\n<p><strong>A.rb</strong></p>\n\n<pre><code>class A\n  has_one :b\n  scope :adults, -&gt; { Bar.adults }\nend\n</code></pre>\n\n<p><strong>B.rb</strong></p>\n\n<pre><code>class B\n field :age ,type:integer\n belongs_to :a\n scope :adults, -&gt; { where(:age.gt=&gt; 18)}\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "edited": false, "score": 0, "creation_date": 1507123015, "post_id": 46565726, "comment_id": 80085347, "body": "Thanks a lot @stefan this works for me.I tried this earlier.I think i made a syntax error at  that time.Thanks you saved lot of time for me."}, {"owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "edited": false, "score": 0, "creation_date": 1507123228, "post_id": 46565726, "comment_id": 80085503, "body": "can u please upvote my question too.and thank again for ur answer"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1507122499, "creation_date": 1507122499, "answer_id": 46565726, "question_id": 46562473, "link": "https://stackoverflow.com/questions/46562473/how-to-declare-a-scope-based-on-embedded-model-attributes-with-mongoid/46565726#46565726", "title": "How to declare a scope based on embedded model attributes with Mongoid", "body": "<p>You can query attributes of embedded documents via:</p>\n\n<pre><code>User.where(:'profile.age'.gt =&gt; 18)\n</code></pre>\n\n<p>or as a scope:</p>\n\n<pre><code>class User\n  embeds_one :profile\n\n  scope :adults, -&gt; { where(:'profile.age'.gt =&gt; 18) }\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8095962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b89a646ea0e35dd7f84b9c64bc6530f?s=128&d=identicon&r=PG&f=1", "display_name": "manojchowdary27", "link": "https://stackoverflow.com/users/8095962/manojchowdary27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 46565726, "answer_count": 3, "score": 3, "last_activity_date": 1534254771, "creation_date": 1507112467, "last_edit_date": 1507123624, "question_id": 46562473, "link": "https://stackoverflow.com/questions/46562473/how-to-declare-a-scope-based-on-embedded-model-attributes-with-mongoid", "title": "How to declare a scope based on embedded model attributes with Mongoid", "body": "<p>I have a <code>User</code> model which embeds a <code>Profile</code>:</p>\n\n<pre><code># app/models/user.rb\nclass User\n  embeds_one :profile\nend\n\n# app/models/profile.rb\nclass Profile\n  embedded_in :user, inverse_of: :profile\n  field :age, type: integer\nend\n</code></pre>\n\n<p>Now I want to declare a scope in <code>User</code> which can list out all users whose <code>profile.age</code> is <code>&gt; 18</code>.</p>\n"}, {"tags": ["ruby", "bundler", "gemfile"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507116053, "post_id": 46562125, "comment_id": 80080513, "body": "As far as I know... No, that would be a complete contradiction. The <i>whole point</i> of a <code>Gemfile</code> (and <code>Gemfile.lock</code>) is to specify a full list of dependencies and bundle them all together."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1507117801, "post_id": 46562125, "comment_id": 80081551, "body": "Perhaps what I should be asking is, <i>why do you want to do this</i>? What are you trying to achieve? You&#39;d like to install <i>some</i> gems for an application, without their dependencies -- why?"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1507125769, "post_id": 46562125, "comment_id": 80087332, "body": "which gem is creating you this issue? Can you put the full error backtrace in the question?"}, {"owner": {"reputation": 71, "user_id": 2610504, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276129260/picture?type=large", "display_name": "Tarun Goyal", "link": "https://stackoverflow.com/users/2610504/tarun-goyal"}, "edited": false, "score": 0, "creation_date": 1507142139, "post_id": 46562125, "comment_id": 80097350, "body": "We are trying to install <a href=\"https://rubygems.org/gems/oci/\" rel=\"nofollow noreferrer\">rubygems.org/gems/oci</a> . It has a  dependency on ruby version 2.2.0, however in our stack we are using 2.1.6 and it involves a lot of work to upgrade to 2.2.0 . Oracle team has recommended us to use use force option to install it.      gem install -f oci is working fine and we have tested the gem also."}], "owner": {"reputation": 71, "user_id": 2610504, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276129260/picture?type=large", "display_name": "Tarun Goyal", "link": "https://stackoverflow.com/users/2610504/tarun-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1507142371, "creation_date": 1507111426, "last_edit_date": 1507142371, "question_id": 46562125, "link": "https://stackoverflow.com/questions/46562125/gemfile-option-to-bypass-dependency-checks", "title": "Gemfile option to bypass dependency checks", "body": "<p>We have an option to force the gem installation</p>\n\n<pre><code>gem install -f &lt;gemname&gt;\n-f, -\u200b-[no-]force - Force gem to install, bypassing dependency checks\n</code></pre>\n\n<p>Do we have a similar option in Gemfile. </p>\n\n<p>We are trying to install <a href=\"https://rubygems.org/gems/oci/\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/oci/</a> which has has a dependency on ruby 2.2.0 . But we are stuck with 2.1.6 in our tech stack.\nOracle team has recommend us to force install it, and we have tried it and it works fine. But we need some way to mention it in Gemfile so that the bundler can take this up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507111329, "post_id": 46562017, "comment_id": 80077646, "body": "Gives me the error <code>TypeError: nil is not a symbol nor a string</code>"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507111707, "post_id": 46562017, "comment_id": 80077875, "body": "In this example <code>obj[&#39;color1&#39;]</code> would be nil. So we&#39;d be passing nil to the try."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507111824, "post_id": 46562017, "comment_id": 80077950, "body": "So how do I handle when the obj I&#39;m referencing is nil? but if present I want to call it as a symbol on the theme to pass to the class."}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507114840, "post_id": 46562017, "comment_id": 80079810, "body": "@Cameron, I proposed a prettification."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507114896, "post_id": 46562017, "comment_id": 80079842, "body": "I don&#39;t think <code>obj</code> is a Hash. In fact, I&#39;m pretty sure it is not."}], "tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": false, "score": 2, "last_activity_date": 1507114975, "last_edit_date": 1507114975, "creation_date": 1507111096, "answer_id": 46562017, "question_id": 46561941, "link": "https://stackoverflow.com/questions/46561941/ruby-try-not-handling-exception/46562017#46562017", "title": "Ruby try not handling exception", "body": "<p>The <code>try</code> is called on the <code>@theme</code> object. The nil error is thrown because <code>obj['color1']</code> returns nil and then <code>to_sym</code> is called on <code>nil</code>. </p>\n\n<p>You'd have to alter the code to </p>\n\n<pre><code> ExampleClass.new(color1: @theme.try(obj['color1'].try(:to_sym) || ''))\n</code></pre>\n\n<p>to catch that. </p>\n\n<p>And then you would have to prettify the code.</p>\n\n<p>How the prettification works will depend on the use case, so I can only offer some general pointer. One way would be to have a default value to <a href=\"https://en.wikipedia.org/wiki/Null_object_pattern\" rel=\"nofollow noreferrer\">avoid having to deal with the null object</a></p>\n\n<p>Instead of passing around nil, one simply returns a default value:</p>\n\n<pre><code>color_key = obj.fetch('color') { 'default_color' }.to_sym\nExampleClass.new(color1: @theme.send(color_key)))\n</code></pre>\n\n<p>This makes use of the <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html#method-i-fetch\" rel=\"nofollow noreferrer\">fetch method</a> which enables returning a default value. That way you will always have a value defined.</p>\n"}, {"comments": [{"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507111968, "post_id": 46562288, "comment_id": 80078044, "body": "I can&#39;t bail. We pass multiple colors. Some are present and some are not hence why we do the try first."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1507112441, "post_id": 46562288, "comment_id": 80078356, "body": "@Cameron: yep, that is indeed better when you <i>have to</i> return an example_class. That code can be prettified, but it should work."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1507112670, "last_edit_date": 1507112670, "creation_date": 1507111909, "answer_id": 46562288, "question_id": 46561941, "link": "https://stackoverflow.com/questions/46561941/ruby-try-not-handling-exception/46562288#46562288", "title": "Ruby try not handling exception", "body": "<p>From comments: </p>\n\n<blockquote>\n  <p>In this example <code>obj['color1']</code> would be nil. So we'd be passing nil to the try. </p>\n</blockquote>\n\n<p>Yes, that's an error. You can't call a method with no name. <em>Technically</em>, you could avoid the error by doing <code>.try(obj['color'].to_s)</code>, but it's super-wrong.</p>\n\n<p>I would check for presence explicitly and bail early if it's not there.</p>\n\n<pre><code>def example_method(obj)\n  return unless obj['color1'].present?\n\n  ExampleClass.new(color1: @theme.try(obj['color1']))\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1507115548, "last_edit_date": 1507115548, "creation_date": 1507112549, "answer_id": 46562510, "question_id": 46561941, "link": "https://stackoverflow.com/questions/46561941/ruby-try-not-handling-exception/46562510#46562510", "title": "Ruby try not handling exception", "body": "<p>You could write a helper method:</p>\n\n<pre><code>def theme_color(name)\n  return unless name\n  return unless @theme.respond_to?(name)\n  @theme.public_send(name)\nend\n\ndef example_method(obj)\n  ExampleClass.new(color1: theme_color(obj['color1']))\nend\n</code></pre>\n\n<p><code>theme_color</code> returns <code>nil</code> if the argument is <code>nil</code>, i.e. <code>obj['color1']</code>. It also returns <code>nil</code> if <code>theme</code> does not respond to the given method. Otherwise, it invokes the method specified by <code>name</code>.</p>\n\n<p>Note that <code>respond_to?</code> and <code>public_send</code> accept either a string or a symbol, so no <code>to_sym</code> is needed.</p>\n\n<p>You could also define the helper method as an instance method of your <code>@theme</code> class:</p>\n\n<pre><code>class Theme\n  def color(name)\n    return unless name\n    return unless respond_to?(name)\n    public_send(name)\n  end\n\n  def red\n    'FF0000'\n  end\nend\n\n@theme = Theme.new\n@theme.red            #=&gt; \"FF0000\"\n@theme.color(:red)    #=&gt; \"FF0000\"\n@theme.color('red')   #=&gt; \"FF0000\"\n@theme.color('green') #=&gt; nil\n@theme.color(nil)     #=&gt; nil\n</code></pre>\n\n<p>And invoke it via:</p>\n\n<pre><code>def example_method(obj)\n  ExampleClass.new(color1: @theme.color(obj['color1']))\nend\n</code></pre>\n\n<p>Keep in mind that these approaches (using <code>public_send</code> or <code>try</code>) allow you to invoke arbitrary methods on your <code>@theme</code> object. It might be safer to keep the colors in a hash.</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1507130263, "creation_date": 1507110903, "last_edit_date": 1507130263, "question_id": 46561941, "link": "https://stackoverflow.com/questions/46561941/ruby-try-not-handling-exception", "title": "Ruby try not handling exception", "body": "<p>I have the following example ruby code:</p>\n\n<pre><code>def example_method(obj)\n    ExampleClass.new(color1: @theme.try(obj['color1'].to_sym))\nend\n</code></pre>\n\n<p>Which should pass either the <code>obj['color1']</code> as a symbol or nil to the class.</p>\n\n<p>However if <code>color1</code> is not passed I get the error: <code>NoMethodError: undefined method 'to_sym' for nil:NilClass</code>.</p>\n\n<p>Shouldn't the try method be handling the exception?</p>\n\n<hr>\n\n<p>Update: based on comments... I solved it by doing a ternary:</p>\n\n<pre><code>ExampleClass.new(color1: obj['color1'].present? ? @brand_theme.try(obj['color1'].try(:to_sym)) : nil)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "user-agent", "open-uri"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 1, "creation_date": 1507108020, "post_id": 46560896, "comment_id": 80075581, "body": "Didn&#39;t see the option to set a header to all requests but the <a href=\"http://ruby-doc.org/stdlib-2.4.2/libdoc/open-uri/rdoc/OpenURI.html\" rel=\"nofollow noreferrer\">documentation</a> does show how to set headers for a specific request. Wrapping the requests in a method, which always sets the header should give you what you want."}, {"owner": {"reputation": 1331, "user_id": 1361124, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HNipK.jpg?s=128&g=1", "display_name": "BastienSander", "link": "https://stackoverflow.com/users/1361124/bastiensander"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1507108396, "post_id": 46560896, "comment_id": 80075829, "body": "Yes, but how can I manage to do this as it is a dependency I can&#39;t modify this code ?"}], "answers": [{"tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": true, "score": 1, "last_activity_date": 1507109992, "creation_date": 1507109992, "answer_id": 46561658, "question_id": 46560896, "link": "https://stackoverflow.com/questions/46560896/rewrite-user-agent-to-all-open-uri-request/46561658#46561658", "title": "Rewrite User-Agent to all Open URI Request", "body": "<p>Luckily for your use case there is no such thing as a class being closed against modification in ruby.</p>\n\n<p>Add a patch to your rails app in an initializer. The structure is roughly as follows:</p>\n\n<p>In <code>config/initializers/some_arbitrary_name.rb</code></p>\n\n<pre><code>module UriAdapterPatch\n  def open(url, options)\n    # alter the objects however you want\n    super(altered_or_original_url, altered_or_original_options)\n  end\nend\n\nPaperclip::UriAdapter.prepend(UriAdapterPatch)\n</code></pre>\n"}], "owner": {"reputation": 1331, "user_id": 1361124, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HNipK.jpg?s=128&g=1", "display_name": "BastienSander", "link": "https://stackoverflow.com/users/1361124/bastiensander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 46561658, "answer_count": 1, "score": 2, "last_activity_date": 1507109992, "creation_date": 1507107627, "question_id": 46560896, "link": "https://stackoverflow.com/questions/46560896/rewrite-user-agent-to-all-open-uri-request", "title": "Rewrite User-Agent to all Open URI Request", "body": "<p>Using Rails <code>4.2.10</code></p>\n\n<p>I would like to open image from URL thanks to <code>mongoid</code> <code>papaerclip</code> and <code>open_uri</code></p>\n\n<p>It perfectly works in 95% of use cases but some website send me a 404 when they see the <code>user-agent</code> of the request is <code>Ruby</code>.</p>\n\n<p>The problem is with the lib <code>paperclip</code>=>\n<code>paperclip/io_adapters/uri_adapter.rb in download_content at line 48</code></p>\n\n<pre><code>def download_content\n    options = { read_timeout: Paperclip.options[:read_timeout] }.compact\n\n    open(@target, **options)\nend\n</code></pre>\n\n<p>If I could add here an option it would be great but I don't think it's possible so I would like to add a default header with my <code>user-agent</code>to all request done by <code>open_uri</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "fog"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507134886, "post_id": 46560841, "comment_id": 80093506, "body": "S3 has no folders or directories. Everything is a key. Key names can have forward slashes in them, and for human readability, AWS console shows files having forward slashes in their keys as though they were in folders. But you cannot &quot;create a folder&quot; in S3. You can only create a file with a key."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507166165, "post_id": 46560841, "comment_id": 80106171, "body": "To extend what @moveson is saying, the slashes in object keys are used by the console to display objects in a folder-like hierarchy, but also, S3 will display an object whose key <i>ends with</i> <code>&#47;</code> as an empty folder if you create such an object.  But these are entirely unnecessary.  The folders are not containers and do not need to be created before creating objects &quot;in&quot; them, because objects are not in fact &quot;in&quot; them.  The objects simply share the same common prefix up to the last <code>&#47;</code> in the object key name."}], "owner": {"reputation": 109, "user_id": 6551529, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f037bfe432f1c0f8c3734eea2d004b21?s=128&d=identicon&r=PG", "display_name": "user6551529", "link": "https://stackoverflow.com/users/6551529/user6551529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507107453, "creation_date": 1507107453, "question_id": 46560841, "link": "https://stackoverflow.com/questions/46560841/check-specific-folder-exists-on-s3-bucket", "title": "Check specific folder exists on s3 bucket", "body": "<p>I am using Fog Storage to upload my files to s3. I have to check whether a folder exists or not.I don't need the prefix function because it checks the starting. I need something which matches the folder name accurately</p>\n\n<p><strong>Structure of the s3</strong></p>\n\n<pre><code>mynewbucket(bucketname)\nnhdata-231(folder or directory name)\nrsadata-56787(folder or directory name)\npfadata-1456(folder or directory name)\n</code></pre>\n\n<p>I have to check whether a specific folder is present or not. I am sharing my code</p>\n\n<pre><code>  s3 = Fog::Storage.new({\n                :provider                 =&gt; 'AWS',\n                :aws_access_key_id        =&gt; ENV[\"ACCESSKEYID\"],\n                :aws_secret_access_key    =&gt; ENV[\"SECRETACCESSKEY\"],\n                :region                   =&gt; 'us-east-2'\n             })\n\n    directory = s3.directories.get(ENV[\"BUCKET\"])\n//Here I have to check before creating any folder whether it exist or not.\n                file = directory.files.create(key: full_bucket_path, public: true)\n                file.body = image_contents\n                file.save\n                file.public_url\n</code></pre>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1507109018, "post_id": 46560772, "comment_id": 80076213, "body": "@sawa the question is right before the code in bold... along with the original  task."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1507110597, "post_id": 46560772, "comment_id": 80077215, "body": "Your method does not work as expected: it returns <code>3</code> regardless of the given arguments. You should fix it before attempting to refactor it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507112570, "post_id": 46560772, "comment_id": 80078443, "body": "So where exactly are you stuck here?"}, {"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "edited": false, "score": 0, "creation_date": 1507152794, "post_id": 46560772, "comment_id": 80102577, "body": "obviously the task is the question here. i&#39;m not here to argue, just to get help with the task that i provided. i already got that help from multiple others. thanks for your input."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "edited": false, "score": 0, "creation_date": 1507112445, "post_id": 46560897, "comment_id": 80078360, "body": "this works, however I do not understand it. if you could give me the steps with explanation, that would be awesome. Thanks for the help @sagarpandya82"}, {"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "edited": false, "score": 0, "creation_date": 1507153253, "post_id": 46560897, "comment_id": 80102770, "body": "thanks for the clear explanation. i&#39;m new to ruby so this really helped me out. i appreciate the help. @sagarpandya82"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1507154320, "last_edit_date": 1507154320, "creation_date": 1507107637, "answer_id": 46560897, "question_id": 46560772, "link": "https://stackoverflow.com/questions/46560772/refactoring-a-method-to-find-the-max-of-any-number-of-arguments-ruby/46560897#46560897", "title": "Refactoring a method to find the max of any number of arguments RUBY", "body": "<p>Assuming you're not allowed to use <code>Array#max</code>, you can do the following:</p>\n\n<pre><code>def maxx *args\n  args.reduce { |memo, obj|\n    obj &gt; memo ? obj : memo\n  }\nend\n\np maxx 2,3,9,5,4,3,10,8\n#=&gt; 10\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p>Here's a slightly more verbose, un-refactored version which may be easier to read. <code>*args</code> catches all your arguments into an array <code>args</code>. In the example <code>args = [2, 3, 9, 5, 4, 3, 10, 8]</code>.</p>\n\n<pre><code>def maxx(*args)\n  args.reduce {|memo, obj|\n    if obj &gt; memo\n      memo = obj\n    else\n      memo = memo\n    end\n  }\nend\n\np maxx(2,3,9,5,4,3,10,8)\n#=&gt; 10\n</code></pre>\n\n<p><code>reduce</code> goes through each element <code>obj</code> from your <code>args</code> array storing it as the new <code>memo</code> only if <code>obj</code> is bigger than the current <code>memo</code>. By default <code>memo</code> starts with <code>args[0]</code>, <code>2</code> in this case. And <code>obj</code> starts with <code>args[1]</code>, namely <code>3</code>.</p>\n\n<p><strong>Step one:</strong></p>\n\n<ul>\n<li><code>memo</code> is <code>2</code>; obj is 3;</li>\n<li>new <code>memo</code> is <code>3</code> because 3 > 2</li>\n</ul>\n\n<p><strong>Step two:</strong></p>\n\n<ul>\n<li><code>memo</code> is <code>3</code>; <code>obj</code> is <code>9</code>;</li>\n<li>new <code>memo</code> is <code>9</code> because 9 > 3</li>\n</ul>\n\n<p><strong>Step three:</strong></p>\n\n<ul>\n<li><code>memo</code> is <code>9</code>; <code>obj</code> is <code>5</code>;</li>\n<li>new <code>memo</code> is <code>9</code> because 9 > 5</li>\n</ul>\n\n<p><strong>Step four:</strong></p>\n\n<ul>\n<li><code>memo</code> is <code>9</code>; <code>obj</code> is <code>4</code>;</li>\n<li>new <code>memo</code> is <code>9</code> because 9 > 4</li>\n</ul>\n\n<p>.\n.\n.</p>\n\n<p><strong>Step seven:</strong></p>\n\n<ul>\n<li><code>memo</code> is <code>10</code>; <code>obj</code> is 8;</li>\n<li>new <code>memo</code> is <code>10</code> because 10 > 8</li>\n</ul>\n\n<p>The final new <code>memo</code> is what's returned by <code>reduce</code>, which is of course the maximum <code>10</code>. For more information on <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\"><code>Array#reduce</code></a>. In the refactored original answer I've used a <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html#label-Ternary+if\" rel=\"nofollow noreferrer\"><code>ternary operator</code></a> which is basically a short way of writing a simple <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html#label-if+Expression\" rel=\"nofollow noreferrer\"><code>if-expression</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "edited": false, "score": 1, "creation_date": 1507109746, "post_id": 46561487, "comment_id": 80076724, "body": "It doesn&#39;t specify that I cant use Array#max. Also it&#39;s to find the maximum for any number of arguments not just 2."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1507111196, "last_edit_date": 1507111196, "creation_date": 1507109400, "answer_id": 46561487, "question_id": 46560772, "link": "https://stackoverflow.com/questions/46560772/refactoring-a-method-to-find-the-max-of-any-number-of-arguments-ruby/46561487#46561487", "title": "Refactoring a method to find the max of any number of arguments RUBY", "body": "<p>Assuming we are not allowed to use Array#max and we need to check from only two number. I would preferably use this,</p>\n\n<pre><code>def max (a,b)\n  a&gt;b ? a : b\nend\n</code></pre>\n\n<p>if we can use Array#max, and any number of arguments,</p>\n\n<pre><code>array = [a, b, c, ...]\ndef max(array)\n  array.max\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507113334, "post_id": 46562389, "comment_id": 80078884, "body": "<code>find_max (1,4,2,3)</code> \u2013 that kind of whitespace usage results in a syntax error."}, {"owner": {"reputation": 216, "user_id": 4213544, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/633343e32a8e462d611925e6fcac8752?s=128&d=identicon&r=PG", "display_name": "twinkle", "link": "https://stackoverflow.com/users/4213544/twinkle"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507113525, "post_id": 46562389, "comment_id": 80078999, "body": "@Stefan Thanks for pointing out that !!! Spaces came up when i added code here, I think its obvious for a ruby developer to understand there are no spaces. Removing those."}], "tags": [], "owner": {"reputation": 216, "user_id": 4213544, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/633343e32a8e462d611925e6fcac8752?s=128&d=identicon&r=PG", "display_name": "twinkle", "link": "https://stackoverflow.com/users/4213544/twinkle"}, "is_accepted": false, "score": 1, "last_activity_date": 1507113612, "last_edit_date": 1507113612, "creation_date": 1507112197, "answer_id": 46562389, "question_id": 46560772, "link": "https://stackoverflow.com/questions/46560772/refactoring-a-method-to-find-the-max-of-any-number-of-arguments-ruby/46562389#46562389", "title": "Refactoring a method to find the max of any number of arguments RUBY", "body": "<p>Please check this :</p>\n\n<p>Method definition:</p>\n\n<pre><code>def find_max *input\n return input.max\nend\n</code></pre>\n\n<p>Method invocation and get max of provided input numbers:</p>\n\n<pre><code>puts find_max(1,4,2,3)\nputs find_max(8,5,9,2,0,14,1)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 46560897, "answer_count": 3, "score": -2, "last_activity_date": 1507154320, "creation_date": 1507107241, "question_id": 46560772, "link": "https://stackoverflow.com/questions/46560772/refactoring-a-method-to-find-the-max-of-any-number-of-arguments-ruby", "title": "Refactoring a method to find the max of any number of arguments RUBY", "body": "<p>The original task was to <strong>Define a method named max that takes two numbers as arguments and returns the largest of them.</strong> Now I need to <strong>Refactor the max method to find the max of any number of arguments</strong>. I'm stumped</p>\n\n<p>Here is my code for the first task which returns the largest number:</p>\n\n<pre><code> def max(num1, num2)\n  num1 = 2\n  num2 = 3\n  if num1 &lt; num2\n    return num2\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "owner": {"reputation": 141, "user_id": 5518892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcebc04d82dc49ff1bf60865c7100ca?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Barawkar", "link": "https://stackoverflow.com/users/5518892/chetan-barawkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1507106764, "creation_date": 1507106764, "question_id": 46560626, "link": "https://stackoverflow.com/questions/46560626/ruby-constants-dl-and-fiddle-is-not-defined", "title": "Ruby - Constants DL and Fiddle is not defined", "body": "<p>When I go to execute the rake db:create showing error Constants DL and Fiddle is not defined  </p>\n\n<p>I am using ruby 2.2.3. I think I have a problem with my rjb</p>\n\n<p>rake aborted!<br>\n</p>\n\n<p>Constants DL and Fiddle is not defined.\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in <code>load'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in</code>init'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:72:in <code>block in &lt;class:Railtie&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in</code>call'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in <code>execute_hook'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:45:in</code>block in run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in <code>each'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in</code>run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application/finisher.rb:62:in <code>block in &lt;module:Finisher&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in</code>instance_exec'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in <code>run'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:55:in</code>block in run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:54:in <code>run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:352:in</code>initialize!'\n/home/nibo/rails_workplace/ekylibre/config/environment.rb:5:in <code>&lt;top (required)&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/polyglot-0.3.5/lib/polyglot.rb:65:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in <code>block in require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:240:in</code>load_dependency'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:328:in</code>require_environment!'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:457:in <code>block in run_tasks_blocks'\n/home/nibo/rails_workplace/ekylibre/lib/tasks/db/tenanting.rake:19:in</code>block in '\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rake-12.1.0/exe/rake:27:in <code>&lt;top (required)&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in</code>eval'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in <code>&lt;main&gt;'\nLoadError: cannot load such file -- dl\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in</code>load'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in <code>init'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:72:in</code>block in '\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in <code>call'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in</code>execute_hook'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:45:in <code>block in run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in</code>each'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in <code>run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application/finisher.rb:62:in</code>block in '\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in <code>instance_exec'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in</code>run'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:55:in <code>block in run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:54:in</code>run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:352:in <code>initialize!'\n/home/nibo/rails_workplace/ekylibre/config/environment.rb:5:in</code>'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/polyglot-0.3.5/lib/polyglot.rb:65:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in</code>block in require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:240:in <code>load_dependency'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:328:in <code>require_environment!'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:457:in</code>block in run_tasks_blocks'\n/home/nibo/rails_workplace/ekylibre/lib/tasks/db/tenanting.rake:19:in <code>block in &lt;top (required)&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rake-12.1.0/exe/rake:27:in</code>'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in <code>eval'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in</code>'\nFiddle::DLError: /usr/local/java/9-internal/jre/lib/amd64/server/libjvm.so: cannot open shared object file: No such file or directory\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in <code>load'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:62:in</code>init'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rjb-loader-0.0.2/lib/rjb-loader.rb:72:in <code>block in &lt;class:Railtie&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in</code>call'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:36:in <code>execute_hook'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:45:in</code>block in run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in <code>each'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks.rb:44:in</code>run_load_hooks'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application/finisher.rb:62:in <code>block in &lt;module:Finisher&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in</code>instance_exec'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:30:in <code>run'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:55:in</code>block in run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/initializable.rb:54:in <code>run_initializers'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:352:in</code>initialize!'\n/home/nibo/rails_workplace/ekylibre/config/environment.rb:5:in <code>&lt;top (required)&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/skylight-1.3.1/lib/skylight/probes.rb:81:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/polyglot-0.3.5/lib/polyglot.rb:65:in</code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in <code>block in require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:240:in</code>load_dependency'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in <code>require'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:328:in</code>require_environment!'\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/railties-4.2.10/lib/rails/application.rb:457:in <code>block in run_tasks_blocks'\n/home/nibo/rails_workplace/ekylibre/lib/tasks/db/tenanting.rake:19:in</code>block in '\n/home/nibo/.rvm/gems/ruby-2.2.5/gems/rake-12.1.0/exe/rake:27:in <code>&lt;top (required)&gt;'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in</code>eval'\n/home/nibo/.rvm/gems/ruby-2.2.5/bin/ruby_executable_hooks:15:in `'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "uri", "url-parameters"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1507106315, "post_id": 46560146, "comment_id": 80074550, "body": "It appears that your original url contains just that, four literal characters, <code>\\ x 0 3</code> instead of one escape sequence <code>\\x03</code>. I&#39;d look into how you generate the url."}, {"owner": {"reputation": 79, "user_id": 4902856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/10453994f79c937efcc5226f1795edf5?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/4902856/meenakshi"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507108450, "post_id": 46560146, "comment_id": 80075861, "body": "url param is encrypted using ruby_rncryptor gem. @SergioTulentsev"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1507110012, "post_id": 46560146, "comment_id": 80076894, "body": "I don&#39;t think a url string can have arbitrary binary data in it. Try <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow noreferrer\">url-encoding</a> your encrypted binary stream before you put it in a url."}], "owner": {"reputation": 79, "user_id": 4902856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/10453994f79c937efcc5226f1795edf5?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/4902856/meenakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507106000, "creation_date": 1507105112, "last_edit_date": 1507106000, "question_id": 46560146, "link": "https://stackoverflow.com/questions/46560146/ruby-or-rails-extract-url-parameters-from-a-url", "title": "Ruby or Rails - Extract URL parameters from a URL", "body": "<p>I have this URL:</p>\n\n<pre><code>http://localhost:3000/users?p=\\x03\\x01m\\x88\\xDB\\x16X\\xE0a\\xA4:\\x8B~Z\\xA5D\\xD7_J\\x16\\xF9xd\\x83\\x1E9\\xC2\\xD5\\xAE#\\xF3 \\xE8\\xF1\\x98\\x96\\xA7\\xAD\\xE2p\\xD3\\xC3v6&lt;\\xDD\\xBBQ*Dw(\\x8DP\\x81\\xC6\\x1Du\\xA93A\\xDB\\xD9f\\x92\\xF2\\xB5@\\x0FAv]\\xDB\\x9F&amp;O\\xCB\\xAAf%W\\xCDd\\x18\\xD7x54\\xDE\\xAB~\\xA5\\bf\\xB8\\xF8\\a3\\xBE\n</code></pre>\n\n<p>I want to extract the value of p, which i'm doing with this query:</p>\n\n<pre><code>Rack::Utils.parse_query(URI(request.original_url).query)\n</code></pre>\n\n<p>And the answer is:</p>\n\n<pre><code>{\"p\"=&gt;\"\\\\x03\\\\x01m\\\\x88\\\\xDB\\\\x16X\\\\xE0\\\\xA4:\\\\x8B~Z\\\\xA5D\\\\xD7_J\\\\x16\\\\xF9xd\\\\x83\\\\x1E9\\\\xC2\\\\xD5\\\\xAE#\\\\xF3 \\\\xE8\\\\xF1\\\\x98\\\\x96\\\\xA7\\\\xAD\\\\xE2p\\\\xD3\\\\xC3v6&lt;\\\\xDD\\\\xBBQ*Dw(\\\\x8DP\\\\x81\\\\xC6\\\\x1Du\\\\xA93A\\\\xDB\\\\xD9f\\\\x92\\\\xF2\\\\xB5@\\\\x0FAv]\\\\xDB\\\\x9F&amp;O\\\\xCB\\\\xAAf%W\\\\xCDd\\\\x18\\\\xD7x54\\\\xDE\\\\xAB~\\\\xA5\\\\bf\\\\xB8\\\\xF8\\\\a3\\\\xBE\"}\n</code></pre>\n\n<p>I'm getting \\\\ instead of \\.\nWhat will be the correct way to do it?</p>\n"}, {"tags": ["php", "ruby", "encoding", "base64"], "comments": [{"owner": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "edited": false, "score": 0, "creation_date": 1507117305, "post_id": 46559712, "comment_id": 80081257, "body": "did you see my answer? hopefully, it helps."}, {"owner": {"reputation": 101, "user_id": 6701802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174120e49390ff56d5161694019941a9?s=128&d=identicon&r=PG", "display_name": "Alexander Fedoseev", "link": "https://stackoverflow.com/users/6701802/alexander-fedoseev"}, "reply_to_user": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "edited": false, "score": 0, "creation_date": 1507118524, "post_id": 46559712, "comment_id": 80082009, "body": "Yeah, It&#39;s helps! Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6701802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174120e49390ff56d5161694019941a9?s=128&d=identicon&r=PG", "display_name": "Alexander Fedoseev", "link": "https://stackoverflow.com/users/6701802/alexander-fedoseev"}, "edited": false, "score": 0, "creation_date": 1507118482, "post_id": 46560777, "comment_id": 80081985, "body": "Sorry for late answer, I trying your code, it&#39;s working very well! Thank you a lot!!!"}, {"owner": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "reply_to_user": {"reputation": 101, "user_id": 6701802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174120e49390ff56d5161694019941a9?s=128&d=identicon&r=PG", "display_name": "Alexander Fedoseev", "link": "https://stackoverflow.com/users/6701802/alexander-fedoseev"}, "edited": false, "score": 0, "creation_date": 1507118683, "post_id": 46560777, "comment_id": 80082124, "body": "np, glad to help"}], "tags": [], "owner": {"reputation": 41497, "user_id": 661872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yqbSi.png?s=128&g=1", "display_name": "Lawrence Cherone", "link": "https://stackoverflow.com/users/661872/lawrence-cherone"}, "is_accepted": true, "score": 1, "last_activity_date": 1507108926, "last_edit_date": 1507108926, "creation_date": 1507107273, "answer_id": 46560777, "question_id": 46559712, "link": "https://stackoverflow.com/questions/46559712/different-results-between-ruby-digestmd5-base64digest-and-php-base64-encode/46560777#46560777", "title": "Different results between Ruby Digest::MD5.base64digest and PHP base64_encode", "body": "<p>As its unpacking and then repacking the bytes it's not needed, but ill keep the code as-is.</p>\n\n<p>In PHP <a href=\"http://php.net/manual/en/function.pack.php\" rel=\"nofollow noreferrer\">pack</a> requires each array argument to be passed, so you need to re-pack each argument in a loop.</p>\n\n<pre><code>&lt;?php\n$str = 123;\n$bytes = unpack('C*', $str);\n$pack = null;\nforeach ($bytes as $arg) $pack .= pack('C*', $arg);\n</code></pre>\n\n<p>Or in PHP > 5.6 you can use inline argument unpacking. <code>...</code> </p>\n\n<pre><code>$str = 123;\n$bytes = unpack('C*', $str);\n$pack = pack('C*', ...$bytes);\n</code></pre>\n\n<p>Then the last issue is because rubys <a href=\"https://apidock.com/ruby/v1_9_3_392/Digest/Instance/base64digest\" rel=\"nofollow noreferrer\">base64digest</a> maintains the digest state, you also need to use md5's second param <a href=\"http://php.net/manual/en/function.md5.php#parameter\" rel=\"nofollow noreferrer\">raw_output</a> to do the same.</p>\n\n<blockquote>\n  <p>If the optional raw_output is set to TRUE, then the md5 digest is\n  instead returned in raw binary format with a length of 16.</p>\n</blockquote>\n\n<pre><code>$str = 123;\necho base64_encode(md5($str, true));\n</code></pre>\n\n<p>So your finished ported code would look like:</p>\n\n<pre><code>$str = 123;\n$bytes = unpack('C*', $str);\n$pack = pack('C*', ...$bytes);\necho base64_encode(md5($pack, true)); // ICy5YqxZB1uWSwcVLSNLcA==\n</code></pre>\n\n<p>Or just.</p>\n\n<pre><code>&lt;?php\n$str = 123;\necho base64_encode(md5($str, true)); // ICy5YqxZB1uWSwcVLSNLcA==\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6701802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174120e49390ff56d5161694019941a9?s=128&d=identicon&r=PG", "display_name": "Alexander Fedoseev", "link": "https://stackoverflow.com/users/6701802/alexander-fedoseev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 46560777, "answer_count": 1, "score": 3, "last_activity_date": 1507108926, "creation_date": 1507103654, "last_edit_date": 1507105989, "question_id": 46559712, "link": "https://stackoverflow.com/questions/46559712/different-results-between-ruby-digestmd5-base64digest-and-php-base64-encode", "title": "Different results between Ruby Digest::MD5.base64digest and PHP base64_encode", "body": "<p>I didn't work with ruby ever, only with php. And I need help.</p>\n\n<p>I have ruby code which encode string like that:</p>\n\n<pre><code>str = '123';\narr = str.bytes\np Digest::MD5.base64digest(arr.pack('C*')) # ICy5YqxZB1uWSwcVLSNLcA==\n</code></pre>\n\n<p>I need to do the same in php, and get the the same result. My example</p>\n\n<pre><code>$str = '123';\n$bytes = unpack('C*', $str);\n$pack = pack('C*', implode(', ', $bytes));\necho base64_encode(md5($pack)); // YzRjYTQyMzhhMGI5MjM4MjBkY2M1MDlhNmY3NTg0OWI=\n</code></pre>\n\n<p>Why the results are different. Thanks for help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507102640, "post_id": 46559287, "comment_id": 80072594, "body": "can you paste code in admins/sessions controller"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507102923, "post_id": 46559287, "comment_id": 80072747, "body": "Thanks for the reply @krishnar, I upload the controller."}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507106860, "post_id": 46559668, "comment_id": 80074885, "body": "I still get full access to the page without having to log in!! When I go the <code>admins&#47;home</code> the login screen doesn&#39;t appear, no errors pop up neither! Also, I delete the <code>before_action :authenticate_admin!</code> from the <code>sessions_controller.rb</code>"}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507109944, "post_id": 46559668, "comment_id": 80076847, "body": "@Theopap  before_action :authenticate_admin!     u should put this in application controller"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507110289, "post_id": 46559668, "comment_id": 80077053, "body": "I moved the  to the <code>application_controller.rb</code> but nothing has changed... I&#39;m using` rubyMine` so this is the error it gives me only inside <code>RubyMine</code>: <code>Expected method name from current or parent classes up to &#39;ActionController::Base&#39;, but found &#39;:authenticate_admin!&#39;. or hash expected</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507121676, "post_id": 46559668, "comment_id": 80084334, "body": "I just had to put the code inside the <code>def home</code> instead of the <code>def create</code> method, and delete the <code>before_action :authenticate_admin!</code> from the <code>application_controller</code>! Thanks for the help!!! Since you found 90% of the solution you can go ahead and answer the question and I&#39;ll accept."}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507121805, "post_id": 46559668, "comment_id": 80084431, "body": "@Theopap  ok now I see you have changed session route itself.Its hitting to home action. sorry."}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1507121931, "post_id": 46559668, "comment_id": 80084520, "body": "@Theopap I updated code. Accept answer and upvote if my solution was helpful"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": true, "score": 1, "last_activity_date": 1507121895, "last_edit_date": 1507121895, "creation_date": 1507103521, "answer_id": 46559668, "question_id": 46559287, "link": "https://stackoverflow.com/questions/46559287/rails-before-action-authenticate-admin-doesnt-work/46559668#46559668", "title": "Rails: before_action :authenticate_admin! doesn&#39;t work", "body": "<p><strong>Your defined route to create session in <em>home</em> action.So change home action</strong></p>\n\n<pre><code>class Admins::SessionsController &lt; Devise::SessionsController\n   before_action :configure_sign_in_params, only: [:create]\n\n   def home\n    self.resource = warden.authenticate!(auth_options)\n    set_flash_message!(:notice, :signed_in)\n    sign_in(resource)\n    respond_with resource, location: after_sign_in_path_for(resource)\n   end\n\n   def new\n     super\n   end\n\n\n   # override method here\n  def create\n  end\n\n\n   def destroy\n     super\n   end\n\n   protected\n\n   def configure_sign_in_params\n     devise_parameter_sanitizer.permit(:sign_in, keys: [:attribute])\n   end\nend\n</code></pre>\n\n<p>NOTE: And put this in application controller</p>\n\n<pre><code>before_action :authenticate_admin!\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 46559668, "answer_count": 1, "score": 0, "last_activity_date": 1507121895, "creation_date": 1507102043, "last_edit_date": 1507102886, "question_id": 46559287, "link": "https://stackoverflow.com/questions/46559287/rails-before-action-authenticate-admin-doesnt-work", "title": "Rails: before_action :authenticate_admin! doesn&#39;t work", "body": "<p>I'm doing this in <code>routes.rb</code>:</p>\n\n<pre><code>devise_for :admins, :skip =&gt; [:registrations], controllers: {sessions: 'admins/sessions'}\ndevise_scope :admin do\n  get \"admins/home\"=&gt; \"admins/sessions#home\", :as =&gt; \"admin_home\"\nend\n</code></pre>\n\n<p>But when I put the <code>before_action :authenticate_admin!</code> in the sessions controller and open the <code>admins/home</code> the login screen doesn't appear, no errors pop up neither. I get full access to the page without having to log in!</p>\n\n<pre><code>class Admins::SessionsController &lt; Devise::SessionsController\n   before_action :configure_sign_in_params, only: [:create]\n   before_action :authenticate_admin!\n\n   def home\n   end\n\n   def new\n     super\n   end\n\n\n   def create\n     super\n   end\n\n\n   def destroy\n     super\n   end\n\n   protected\n\n   def configure_sign_in_params\n     devise_parameter_sanitizer.permit(:sign_in, keys: [:attribute])\n   end\nend\n</code></pre>\n\n<p>Any ideas what I might be doing wrong?</p>\n"}, {"tags": ["ruby", "methods", "rspec", "iteration"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 3, "creation_date": 1507102141, "post_id": 46559074, "comment_id": 80072304, "body": "the <code>times</code> method repeatedly calls a block of code <code>num</code> times -  it is not the &quot;times&quot; (multiplication) operator. For that use <code>*</code> e.g. <code>&quot;hello&quot; * 2 # =&gt; &quot;hellohello&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1507142381, "last_edit_date": 1507142381, "creation_date": 1507103166, "answer_id": 46559588, "question_id": 46559074, "link": "https://stackoverflow.com/questions/46559074/ruby-times-method-returns-variable-instead-of-output/46559588#46559588", "title": "Ruby .times method returns variable instead of output", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.2/Integer.html#method-i-times\" rel=\"nofollow noreferrer\">times</a> will repeat the execution of the block: <code>string</code> will be interpreted twice, but the value won't be used for anything. <code>num.times</code> will return <code>num</code>. You can check it in a Ruby console :</p>\n\n<pre><code>&gt; 2.times{ puts \"hello\" }\nhello\nhello\n =&gt; 2 \n</code></pre>\n\n<p>You don't need a loop, you need concatenation:</p>\n\n<pre><code>string = \"hello\"\nstring + string\n# \"hellohello\"\nstring + string + string\n# \"hellohellohello\"\n</code></pre>\n\n<p>Or just like with numbers, you can use multiplication to avoid multiple additions :</p>\n\n<pre><code>string * 3\n# \"hellohellohello\"\nnum = 2\nstring * num\n# \"hellohello\"\n</code></pre>\n\n<p>If you need a list with 2 <code>string</code> elements, you can use :</p>\n\n<pre><code>[string] * num\n# [\"hello\", \"hello\"]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>Array.new(num) { string }\n# [\"hello\", \"hello\"]\n</code></pre>\n\n<p>If you want to join the strings with a space in the middle :</p>\n\n<pre><code>Array.new(num, string).join(' ')\n# \"hello hello\"\n</code></pre>\n\n<p>Just for fun, you could also use :</p>\n\n<pre><code>[string] * num * \" \"\n</code></pre>\n\n<p>but it's probably not really readable.</p>\n"}, {"comments": [{"owner": {"reputation": 36, "user_id": 8658912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78743f805dd27a8b16f0d579ef9910af?s=128&d=identicon&r=PG", "display_name": "oheydrew", "link": "https://stackoverflow.com/users/8658912/oheydrew"}, "edited": false, "score": 0, "creation_date": 1507104281, "post_id": 46559823, "comment_id": 80073481, "body": "Essentially, yes. I think many answers here have shown that using a loop like .times might have been an overcomplication."}], "tags": [], "owner": {"reputation": 462, "user_id": 8706204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaBHD.png?s=128&g=1", "display_name": "Pend", "link": "https://stackoverflow.com/users/8706204/pend"}, "is_accepted": false, "score": 0, "last_activity_date": 1507104069, "creation_date": 1507104069, "answer_id": 46559823, "question_id": 46559074, "link": "https://stackoverflow.com/questions/46559074/ruby-times-method-returns-variable-instead-of-output/46559823#46559823", "title": "Ruby .times method returns variable instead of output", "body": "<p>Is this the behavior you're looking for?</p>\n\n<pre><code>def repeat(count, text)\n  text * count\nend\n\nrepeat(2, \"hello\") #  =&gt; \"hellohello\"\n</code></pre>\n\n<p>(No steps were taken to defend against bad input)</p>\n"}], "owner": {"reputation": 36, "user_id": 8658912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78743f805dd27a8b16f0d579ef9910af?s=128&d=identicon&r=PG", "display_name": "oheydrew", "link": "https://stackoverflow.com/users/8658912/oheydrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 1, "accepted_answer_id": 46559588, "answer_count": 2, "score": 0, "last_activity_date": 1507142381, "creation_date": 1507101314, "last_edit_date": 1507107983, "question_id": 46559074, "link": "https://stackoverflow.com/questions/46559074/ruby-times-method-returns-variable-instead-of-output", "title": "Ruby .times method returns variable instead of output", "body": "<p>In order to pass an rspec test, I need to get a simple string to be returned \"num\" amount of times. I've been googling and it seems the .times method should help. In theory from what I can see:</p>\n\n<pre><code>num = 2\nstring = \"hello\"\n\nnum.times do\n  string\nend\n</code></pre>\n\n<p>...Should work? But the output continues to return as \"2\", or whatever \"num\" is equal to. I can get it to \"puts 'hello'\" twice, but it still returns \"2\" after printing \"hellohello\".</p>\n\n<p>Also tried </p>\n\n<pre><code>num.times { string }\n</code></pre>\n\n<p>Am I missing something fundamental about the .times method, here? Or should I be going about this another way?</p>\n"}, {"tags": ["ruby", "stdout", "wget"], "answers": [{"comments": [{"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "edited": false, "score": 0, "creation_date": 1507101227, "post_id": 46558926, "comment_id": 80071800, "body": "<code>Open3.capture3</code> didn&#39;t work with wget for me. It worked with <code>Open3.capture2(&#39;wget http:&#47;&#47;example.org&#47;some&#47;large&#47;archive.zip&#39;)</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "edited": false, "score": 0, "creation_date": 1507102061, "post_id": 46558926, "comment_id": 80072271, "body": "Yes, slightly different."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1507100792, "creation_date": 1507100792, "answer_id": 46558926, "question_id": 46558616, "link": "https://stackoverflow.com/questions/46558616/how-do-i-get-wget-output-in-ruby/46558926#46558926", "title": "How do I get wget output in ruby?", "body": "<p>You could use the <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\">Open3</a> module, which is in the Ruby's standard library. </p>\n\n<p>This <em>grants you access to stdout, stderr, exit codes and a thread to wait for the child process when running another program</em>.</p>\n\n<p>So, having a <code>pwd</code> command you can do something like:</p>\n\n<pre><code>require 'open3'\nstdout, stderr, status = Open3.capture3('pwd')\nputs stdout # ~/ current directory\nputs stderr #    no error\nputs status # pid 25522 exit 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1507104503, "creation_date": 1507104503, "answer_id": 46559951, "question_id": 46558616, "link": "https://stackoverflow.com/questions/46558616/how-do-i-get-wget-output-in-ruby/46559951#46559951", "title": "How do I get wget output in ruby?", "body": "<p>The ruby provide a good built-in libs to make any kind of http things, for example to download file you can use <code>net/http</code>:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\n\nuri = URI(URI.encode(\"http://example.org/some/large/archive.zip\"))\nNet::HTTP.start(uri.host,uri.port) do |http|\n  request = Net::HTTP::Get.new uri.path\n\n  http.request request do |response|\n    open \"/tmp/my_large_file.zip\", 'w' do |io|\n       response.read_body do |chunk|\n         puts \"Writing  #{chunk.length} bits ...\" # see progress\n         io.write chunk\n       end\n     end\n  end  \nend\n</code></pre>\n\n<p>With <code>wget</code> <em>you unable</em> to catch any kind of http errors in your ruby code.*</p>\n\n<p>With <code>wget</code> <em>you unable</em> to make auth, basic for example in your ruby code.*</p>\n\n<p>Use Ruby built-in libs, it is very powerfull.</p>\n\n<p><sub> You able but with some buggy code </sub></p>\n"}], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "accepted_answer_id": 46558926, "answer_count": 2, "score": 0, "last_activity_date": 1507104503, "creation_date": 1507099655, "question_id": 46558616, "link": "https://stackoverflow.com/questions/46558616/how-do-i-get-wget-output-in-ruby", "title": "How do I get wget output in ruby?", "body": "<p>I need to run the following code from ruby:</p>\n\n<pre><code>system \"wget http://example.org/some/large/archive.zip\"\n</code></pre>\n\n<p>When I run this command I see</p>\n\n<blockquote>\n  <p>Redirecting output to \u2018wget-log\u2019.</p>\n</blockquote>\n\n<p>I need to do <code>tail -f wget-log</code> to see the progress</p>\n\n<p>How can I see wget output in terminal where I run the ruby process?</p>\n\n<p>I've tried </p>\n\n<pre><code>system \"wget -O - http://example.org/some/large/archive.zip &gt; dev/null\"\n</code></pre>\n\n<p>but it didn't help</p>\n\n<p>Maybe there are other options to download large archives with ruby and see the progress?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "youtube-api"], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 7688423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8093d1654bea6c1548a5a9f76993e923?s=128&d=identicon&r=PG", "display_name": "ahmetkilinc", "link": "https://stackoverflow.com/users/7688423/ahmetkilinc"}, "is_accepted": false, "score": 0, "last_activity_date": 1507099521, "creation_date": 1507099521, "answer_id": 46558585, "question_id": 46558476, "link": "https://stackoverflow.com/questions/46558476/is-there-a-way-to-get-notifications-from-youtube-api-when-broadcaster-is-live/46558585#46558585", "title": "Is there a way to get notifications from YouTube API when broadcaster is live", "body": "<p>The way you looking for is YouTube Live Streaming API. </p>\n\n<p>the documentation of the API can be read from this <a href=\"https://developers.google.com/youtube/v3/live/getting-started\" rel=\"nofollow noreferrer\">link</a></p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 8718215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4725b7c592838a3657166a3c57f40e76?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/8718215/dave"}, "edited": false, "score": 0, "creation_date": 1507100965, "post_id": 46558628, "comment_id": 80071654, "body": "What about push notifications using &#39;PubSubHubbub&#39;?"}, {"owner": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "reply_to_user": {"reputation": 15, "user_id": 8718215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4725b7c592838a3657166a3c57f40e76?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/8718215/dave"}, "edited": false, "score": 0, "creation_date": 1507101098, "post_id": 46558628, "comment_id": 80071731, "body": "It&#39;s mentioned <a href=\"https://developers.google.com/youtube/v3/guides/push_notifications\" rel=\"nofollow noreferrer\">here</a>, but doesn&#39;t say anything about live broadcasts."}], "tags": [], "owner": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "is_accepted": false, "score": 0, "last_activity_date": 1507100096, "last_edit_date": 1507100096, "creation_date": 1507099706, "answer_id": 46558628, "question_id": 46558476, "link": "https://stackoverflow.com/questions/46558476/is-there-a-way-to-get-notifications-from-youtube-api-when-broadcaster-is-live/46558628#46558628", "title": "Is there a way to get notifications from YouTube API when broadcaster is live", "body": "<p>It appears the <a href=\"https://developers.google.com/youtube/v3/live/docs/liveBroadcasts/list\" rel=\"nofollow noreferrer\"><code>GET https://www.googleapis.com/youtube/v3/liveBroadcasts</code></a> endpoint is what you want.</p>\n\n<blockquote>\n  <p>Returns a list of YouTube broadcasts that match the API request parameters.</p>\n</blockquote>\n\n<p>However, getting a notification will require some work. It will probably require polling the endpoint for changes to determine if a new broadcast has been started. I'm not aware of a PUSH API from YouTube to send a request to an endpoint of your choice to create a notification. </p>\n\n<p>More info in the <a href=\"https://developers.google.com/youtube/v3/live/docs/liveBroadcasts/list\" rel=\"nofollow noreferrer\">Youtube docs</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 8203251, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uXqkBAQDcE/AAAAAAAAAAI/AAAAAAAAABg/S0PC5XHsWeg/photo.jpg?sz=128", "display_name": "Patrick Cyiza", "link": "https://stackoverflow.com/users/8203251/patrick-cyiza"}, "is_accepted": true, "score": 0, "last_activity_date": 1507107455, "creation_date": 1507107455, "answer_id": 46560842, "question_id": 46558476, "link": "https://stackoverflow.com/questions/46558476/is-there-a-way-to-get-notifications-from-youtube-api-when-broadcaster-is-live/46560842#46560842", "title": "Is there a way to get notifications from YouTube API when broadcaster is live", "body": "<p>I think it requires a websocket connection with your api endpoint by using ws:// protocole at some point. Websocket listen to a server, and enable your browser to handle it's changes like events. So it's exacly what u need for notifications.</p>\n\n<p>In RoR 5 you can do it using ActionCable.</p>\n\n<p>I've used Rails 5's ActionCable to handle notifications. But sinds I've only used it to listening to changes inside the server of my own Rails app's and not an API endpoint so I won't be able to give you a step by step guide.</p>\n\n<p>You should checkout how to make an action cable connection with an API end point.</p>\n\n<p>Here is a documentaion that might help u out:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">RoR doc on ActionCable</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API\" rel=\"nofollow noreferrer\">MDN docs on Websocket</a></p>\n"}], "owner": {"reputation": 15, "user_id": 8718215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4725b7c592838a3657166a3c57f40e76?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/8718215/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3503, "favorite_count": 2, "accepted_answer_id": 46560842, "answer_count": 3, "score": 1, "last_activity_date": 1507107455, "creation_date": 1507099082, "last_edit_date": 1507101147, "question_id": 46558476, "link": "https://stackoverflow.com/questions/46558476/is-there-a-way-to-get-notifications-from-youtube-api-when-broadcaster-is-live", "title": "Is there a way to get notifications from YouTube API when broadcaster is live", "body": "<p>I'm creating a app that has a database of users who stream there computer game play from YouTube, is there a way to get a notification from YouTube API that will tell me when the gamer is live so I can randomly broadcast each live video for 2 minutes each?</p>\n"}, {"tags": ["ruby", "centos", "rubygems", "tmux", "tmuxinator"], "comments": [{"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 1, "creation_date": 1507103342, "post_id": 46558350, "comment_id": 80072974, "body": "can you post the output of <code>ruby -v</code> and <code>rpm -q ruby</code> please"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1507118214, "post_id": 46558350, "comment_id": 80081798, "body": "This is using the RHSCL correct? You have to setup an env for those post-installation i believe. Better to use other tools for most use cases."}, {"owner": {"reputation": 130, "user_id": 1062443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iodv6.png?s=128&g=1", "display_name": "asliyanage", "link": "https://stackoverflow.com/users/1062443/asliyanage"}, "edited": false, "score": 0, "creation_date": 1507118331, "post_id": 46558350, "comment_id": 80081876, "body": "what do you mean RHCL and what are those env ?"}], "owner": {"reputation": 130, "user_id": 1062443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iodv6.png?s=128&g=1", "display_name": "asliyanage", "link": "https://stackoverflow.com/users/1062443/asliyanage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 739, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507104349, "creation_date": 1507098558, "last_edit_date": 1507104349, "question_id": 46558350, "link": "https://stackoverflow.com/questions/46558350/ruby-installation-issue-in-centos", "title": "ruby installation issue in centos", "body": "<p>I have installed ruby in centos 7. Then i try to ran the tmuxinator it gives me below error. How to solve this issue?</p>\n\n<pre><code>/opt/rh/rh-ruby23/root/usr/bin/ruby: error while loading shared libraries: libruby.so.2.3: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>output for <strong>ruby -v</strong>   is \nruby 2.2.8p477 (2017-09-14 revision 59906) [x86_64-linux]</p>\n\n<p>output for  <strong>rpm -q ruby</strong> is \nruby-2.0.0.648-30.el7.x86_64</p>\n\n<p>I try to remove old dependencies using <strong>rpm -e ruby</strong> , but it gives me below error.\nerror: Failed dependencies:\n        /usr/bin/ruby is needed by (installed) rubygems-2.0.14.1-30.el7.noarch\n        /usr/bin/ruby is needed by (installed) ruby-irb-2.0.0.648-30.el7.noarch\n        /usr/bin/ruby is needed by (installed) rubygem-rdoc-4.0.0-30.el7.noarch</p>\n"}, {"tags": ["jquery", "json", "ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1507109778, "post_id": 46558037, "comment_id": 80076743, "body": "Try to explain what is your goal. Maybe you think this is the path, but it depends of what you wanna do."}], "answers": [{"comments": [{"owner": {"reputation": 208, "user_id": 6450465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNWBu.jpg?s=128&g=1", "display_name": "Manoj Kumar", "link": "https://stackoverflow.com/users/6450465/manoj-kumar"}, "edited": false, "score": 0, "creation_date": 1507104582, "post_id": 46558305, "comment_id": 80073621, "body": "Thank you quick response.  But want to use this into JS as JSON and JS does not support for   {:key1=&gt;&quot;value1&quot;, :key2=&gt;&quot;value2&quot;}  It&#39;s accepted only {key1:\u201cvalue1\u201d, key2: \u201cvalue2\u201d} and {&quot;key1&quot;:\u201cvalue1\u201d, &quot;key2&quot;: \u201cvalue2\u201d}  So looking for these {key1:\u201cvalue1\u201d, key2: \u201cvalue2\u201d} OR {&quot;key1&quot;:\u201cvalue1\u201d, &quot;key2&quot;: \u201cvalue2\u201d}"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1507109718, "post_id": 46558305, "comment_id": 80076702, "body": "This answers the question you have made. If not, you should explain what you&#39;re trying to achieve in your question. That way we are capable of advising you if is the correct way."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 208, "user_id": 6450465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNWBu.jpg?s=128&g=1", "display_name": "Manoj Kumar", "link": "https://stackoverflow.com/users/6450465/manoj-kumar"}, "edited": false, "score": 1, "creation_date": 1507135583, "post_id": 46558305, "comment_id": 80093895, "body": "current stable is 2.4.2 which includes <code>transform_keys</code> and <code>transform_keys!</code> as <code>some_hash.transform_keys!(&amp;:to_sym)</code>. @ManojKumar <code>to_json</code> will handle the conversion for you no work needed."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507145305, "post_id": 46558305, "comment_id": 80099055, "body": "@engineersmnky I mistook the method name, and was also outdated. Thanks for the comment."}, {"owner": {"reputation": 208, "user_id": 6450465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNWBu.jpg?s=128&g=1", "display_name": "Manoj Kumar", "link": "https://stackoverflow.com/users/6450465/manoj-kumar"}, "edited": false, "score": 0, "creation_date": 1507181395, "post_id": 46558305, "comment_id": 80109826, "body": "Thank all, I managed this conversion from js because I want similar as it is same which asked in question."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1507145221, "last_edit_date": 1507145221, "creation_date": 1507098366, "answer_id": 46558305, "question_id": 46558037, "link": "https://stackoverflow.com/questions/46558037/how-to-convert-key1-value1-key2-value2-to-key1value1-ke/46558305#46558305", "title": "How to convert &#39;{&quot;key1&quot; =&gt; &quot;value1&quot;, &quot;key2&quot; =&gt; &quot;value2&quot;}&#39; to &#39;{key1:&quot;value1&quot;, key2: &quot;value2&quot;}&#39;", "body": "<p>For the moment, you have to do this:</p>\n\n<pre><code>{\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\"}\n.map{|k, v| [k.to_sym, v]}.to_h\n# =&gt; {:key1=&gt;\"value1\", :key2=&gt;\"value2\"}\n</code></pre>\n\n<p>Slightly more efficient is:</p>\n\n<pre><code>{\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\"}\n.each_with_object({}){|(k, v), h| h[k.to_sym] = v}\n# =&gt; {:key1=&gt;\"value1\", :key2=&gt;\"value2\"}\n</code></pre>\n\n<p>In the near future, <code>Hash#transform_keys</code> will probably become available.</p>\n"}], "owner": {"reputation": 208, "user_id": 6450465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNWBu.jpg?s=128&g=1", "display_name": "Manoj Kumar", "link": "https://stackoverflow.com/users/6450465/manoj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1507098672, "answer_count": 1, "score": -2, "last_activity_date": 1507145221, "creation_date": 1507097309, "last_edit_date": 1507098459, "question_id": 46558037, "link": "https://stackoverflow.com/questions/46558037/how-to-convert-key1-value1-key2-value2-to-key1value1-ke", "closed_reason": "Needs details or clarity", "title": "How to convert &#39;{&quot;key1&quot; =&gt; &quot;value1&quot;, &quot;key2&quot; =&gt; &quot;value2&quot;}&#39; to &#39;{key1:&quot;value1&quot;, key2: &quot;value2&quot;}&#39;", "body": "<p>I want to convert from:</p>\n\n<pre><code>{\"key1\" =&gt; \"value1\",\"key2\" =&gt; \"value2\"}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>{key1: \"value1\", key2: \"value2\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1507096880, "post_id": 46557879, "comment_id": 80069697, "body": "Seems your validation is doing its job, just perhaps not what you expected. Can you show your strong params, the submitted params and your Micropost schema?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "reply_to_user": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1507097468, "post_id": 46557879, "comment_id": 80069925, "body": "sure, added the code and view fields. If you want the form value it is a jpg starting with https, I have a pretty heafty method on those fields to change the dimensions on a before_create action."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1507097813, "post_id": 46557879, "comment_id": 80070092, "body": "You have a typo <code>img_url</code> must be <code>image_url</code>. Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1507097869, "post_id": 46557879, "comment_id": 80070112, "body": "Oh man you be right."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1507097670, "post_id": 46558085, "comment_id": 80070025, "body": "I get a nomethoderror when I change it to this on those fields."}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 1, "creation_date": 1507097989, "post_id": 46558085, "comment_id": 80070160, "body": "didn&#39;t notice the typo with <code>img</code>. Can you try again?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1507098111, "post_id": 46558085, "comment_id": 80070226, "body": "Aha. You got it! Thanks!"}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": true, "score": 1, "last_activity_date": 1507097911, "last_edit_date": 1507097911, "creation_date": 1507097521, "answer_id": 46558085, "question_id": 46557879, "link": "https://stackoverflow.com/questions/46557879/model-validate-method-returns-error-from-server-rails-5/46558085#46558085", "title": "Model validate method returns error from server rails 5", "body": "<p>I think the problem is this line:</p>\n\n<pre><code>if :img_url? &amp;&amp; :video_url? \n</code></pre>\n\n<p>here <code>:img_url?</code> is a symbol, not an attribute</p>\n\n<p>What you want is <code>self.image_url?</code> or just <code>image_url</code>, same for <code>video_url</code></p>\n"}], "owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 46558085, "answer_count": 1, "score": 0, "last_activity_date": 1507098608, "creation_date": 1507096417, "last_edit_date": 1507098608, "question_id": 46557879, "link": "https://stackoverflow.com/questions/46557879/model-validate-method-returns-error-from-server-rails-5", "title": "Model validate method returns error from server rails 5", "body": "<p>I have this method in my <code>micropost.rb</code>, the error is souly when I run this method. When I submit my form I do not get the errors from the model but the rendering of the <code>else</code> condition in the <strong>controller</strong>. Something seems to be wrong in the <strong>model</strong> but don't see why I get rollback transaction from server?</p>\n\n<p>The method just checks that a user has not entered and sent more than one field.</p>\n\n<p><strong>Micropost.rb</strong>    </p>\n\n<pre><code>validate :return_media_field_errors\n\nprivate \n\ndef return_media_field_errors\n  if :img_url? &amp;&amp; :video_url? \n    errors.add(:img_url, \"Can only submit one field at a time\")\n  end\nend\n</code></pre>\n\n<p><strong>MicropostController</strong></p>\n\n<pre><code>def create\n  @micropost = current_user.microposts.build(micropost_params)\n  if @micropost.save\n    flash[:success] = \"Micropost created!\"\n    @micropost  = current_user.microposts.build\n    @feed_items = current_user.feed.paginate(page: params[:page])\n    render 'static_pages/home'\n  else\n    @feed_items = []\n    render 'shared/error_messages'\n  end\nend\n\nprivate\n\n  def micropost_params\n    params.require(:micropost).permit(:content, :picture, :picture_cache, :image_url, :video_url, :gif_url)\n  end\n</code></pre>\n\n<p><strong>micropost schema.rb</strong></p>\n\n<pre><code>create_table \"microposts\", force: :cascade do |t|\n  t.text     \"content\"\n  t.integer  \"user_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string   \"picture\"\n  t.string   \"image_url\"\n  t.string   \"video_url\"\n  t.string   \"gif_url\"\n  t.index [\"user_id\", \"created_at\"], name: \"index_microposts_on_user_id_and_created_at\"\n  t.index [\"user_id\"], name: \"index_microposts_on_user_id\"\nend\n</code></pre>\n\n<p>View params</p>\n\n<pre><code>&lt;div class=\"media_field_1\"&gt;    \n  Image &lt;%= f.text_field :image_url, class: 'form-control' %&gt;\n&lt;/div&gt;\n&lt;div class=\"media_field_2\"&gt; \n  Video &lt;%= f.text_field :video_url, class: 'form-control' %&gt;\n&lt;/div&gt; \n</code></pre>\n"}, {"tags": ["ruby", "time", "nanotime"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507097793, "post_id": 46557704, "comment_id": 80070085, "body": "Your time seems to be wrong. Somehow, <code>147</code> is interpreted as milliseconds, not nanoseconds."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1507111455, "post_id": 46557704, "comment_id": 80077724, "body": "@sawa <code>%N</code> parses fractional seconds, i.e. <code>147</code> is interpreted as 0.147 seconds."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507114530, "post_id": 46557704, "comment_id": 80079629, "body": "@marco what&#39;s your expected result?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507144761, "post_id": 46557704, "comment_id": 80098777, "body": "@Stefan That is what I am pointing out. And I think the OP intended that part to be interpreted as nanoseconds since the documentation says <code>%N</code> is defaulted to the 9th decimal place."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1507111289, "post_id": 46558082, "comment_id": 80077621, "body": "Or <code>time.to_i * (10 ** 9) + time.nsec</code> to avoid floating point errors."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1507104475, "last_edit_date": 1507104475, "creation_date": 1507097500, "answer_id": 46558082, "question_id": 46557704, "link": "https://stackoverflow.com/questions/46557704/convert-a-time-to-nanoseconds-in-ruby/46558082#46558082", "title": "Convert a time to nanoseconds in Ruby", "body": "<p>This should give you the value:</p>\n\n<pre><code>time.to_f * (10 ** 9)\n</code></pre>\n\n<p>If you want an integer, apply <code>to_i</code> or whatever to it.</p>\n\n<p>However, notice that your <code>time</code> is wrong, so it would not give the right results.</p>\n"}], "owner": {"reputation": 12766, "user_id": 185432, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/041bdec8ecdaf925b08065b476e08cfb?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/185432/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2633, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507104475, "creation_date": 1507095461, "last_edit_date": 1507097880, "question_id": 46557704, "link": "https://stackoverflow.com/questions/46557704/convert-a-time-to-nanoseconds-in-ruby", "title": "Convert a time to nanoseconds in Ruby", "body": "<p>I have the following time format:</p>\n\n<pre><code>require 'time'\n\ninput = \"2016-10-04_00.50.31.147\"\nformat = \"%Y-%m-%d_%H.%M.%S.%N\"\n\ntime = Time.strptime(input, format)\n</code></pre>\n\n<p>How do I get the number of nanoseconds since the epoch?</p>\n"}, {"tags": ["arrays", "ruby", "string", "methods"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1507093485, "post_id": 46557349, "comment_id": 80068505, "body": "Could you show what have you tried so far?"}, {"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1507093734, "post_id": 46557349, "comment_id": 80068583, "body": "pets = [&quot;Scooby&quot;, &quot;Soco&quot;, &quot;Summer&quot;, &quot;Pixie&quot;, &quot;Wilson&quot;, &quot;Mason&quot;,&quot;Baron&quot;, &quot;Brinkley&quot;, &quot;Bella&quot;]  (1..9).each {|pets| def start_with?   if pets.start_with? &quot;S&quot;     puts &quot;My name starts with an S for super!&quot;   else     puts &quot;I\u2019m still pretty special too!&quot;   end end }"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1507093962, "post_id": 46557349, "comment_id": 80068661, "body": "keep your question clean and shortly. Nobody worries about your expirience, we all here and we all learn. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1507104591, "post_id": 46557349, "comment_id": 80073622, "body": "You are defining the same method over and over and over and over again in the loop. You also never even call the method you define. It is not clear what that code is supposed to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1507094730, "last_edit_date": 1507094730, "creation_date": 1507093712, "answer_id": 46557410, "question_id": 46557349, "link": "https://stackoverflow.com/questions/46557349/iterate-over-an-array-of-names-that-start-with-a-specific-letter/46557410#46557410", "title": "Iterate over an array of names that start with a specific letter", "body": "<p>You need a <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html\" rel=\"nofollow noreferrer\">control expression</a>:</p>\n\n<pre><code>names.each { |name| puts name if name[0] == 'S' }\n#Steve\n#Sarah\n</code></pre>\n\n<p>This only prints a <code>name</code> (via <code>puts</code>) <em>if</em> the first letter is 'S'. If you don't have to use <code>each</code> then you can do:</p>\n\n<pre><code>puts names.grep(/\\AS/)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "edited": false, "score": 0, "creation_date": 1507095264, "post_id": 46557414, "comment_id": 80069121, "body": "hi, thanks for the reply. this worked for me. How do i submit a block of code like you just did? I cant seem to find how to do it in a comment. I want to show you what I did."}], "tags": [], "owner": {"reputation": 462, "user_id": 8706204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaBHD.png?s=128&g=1", "display_name": "Pend", "link": "https://stackoverflow.com/users/8706204/pend"}, "is_accepted": false, "score": 1, "last_activity_date": 1507094432, "last_edit_date": 1507094432, "creation_date": 1507093727, "answer_id": 46557414, "question_id": 46557349, "link": "https://stackoverflow.com/questions/46557349/iterate-over-an-array-of-names-that-start-with-a-specific-letter/46557414#46557414", "title": "Iterate over an array of names that start with a specific letter", "body": "<p>A basic approach using <code>each</code>:</p>\n\n<pre><code>names = ['Steve', 'Mason', 'John', 'Sarah']\nnames.each do |name|\n  puts 'some text' if name.start_with?('S')\nend\n</code></pre>\n\n<p>You can read more about <code>each</code> <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">here</a> and <code>start_with</code> <a href=\"https://apidock.com/ruby/v1_9_3_125/String/start_with%3F\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>(There are probably much faster ways to determine if a string starts with a single character, but I like that this method is very self documenting.)</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1507094413, "post_id": 46557467, "comment_id": 80068831, "body": "Don&#39;t you mean <code>&#47;\\AS&#47;</code> or <code>&#47;\\As&#47;i</code>? <code>^</code> is beginning of <i>line</i> in Ruby, <code>\\A</code> is beginning of <i>string</i>; and you need to watch the case of your <code>S</code>."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1507094127, "creation_date": 1507094127, "answer_id": 46557467, "question_id": 46557349, "link": "https://stackoverflow.com/questions/46557349/iterate-over-an-array-of-names-that-start-with-a-specific-letter/46557467#46557467", "title": "Iterate over an array of names that start with a specific letter", "body": "<p>We can solve this by using regular expression:</p>\n\n<pre><code>names = [\"Steve\", \"Mason\", \"John\", \"Sarah\"]\nnames.each do |name| \n  puts name if name =~ /^s/ \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": true, "score": 1, "last_activity_date": 1507096369, "last_edit_date": 1507096369, "creation_date": 1507094619, "answer_id": 46557538, "question_id": 46557349, "link": "https://stackoverflow.com/questions/46557349/iterate-over-an-array-of-names-that-start-with-a-specific-letter/46557538#46557538", "title": "Iterate over an array of names that start with a specific letter", "body": "<p>Instead of using <strong><a href=\"https://apidock.com/ruby/String/start_with%3F\" rel=\"nofollow noreferrer\">starts_with?</a></strong>, you could also check the first letter of each pet name manually:</p>\n\n<pre><code>def pets_that_start_with_s(pets_array)\n  pets_array.each do |pet|\n    if pet[0].upcase == 'S'\n      puts \"My name is #{pet}, it starts with an S for Super!\" \n    else \n      puts \"My name is #{pet}, I\u2019m still pretty special too!\" \n    end\n  end\nend\n\npets = [\"Scooby\", \"Soco\", \"Summer\", \"Pixie\", \"Wilson\", \"Mason\",\"Baron\", \"Brinkley\", \"Bella\"]\n\npets_that_start_with_s(pets)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>My name is Scooby, it starts with an S for Super!\nMy name is Soco, it starts with an S for Super!\nMy name is Summer, it starts with an S for Super!\nMy name is Pixie, I\u2019m still pretty special too!\nMy name is Wilson, I\u2019m still pretty special too!\nMy name is Mason, I\u2019m still pretty special too!\nMy name is Baron, I\u2019m still pretty special too!\nMy name is Brinkley, I\u2019m still pretty special too!\nMy name is Bella, I\u2019m still pretty special too!\n</code></pre>\n\n<p><strong>N.B.</strong> <a href=\"https://apidock.com/ruby/String/upcase\" rel=\"nofollow noreferrer\"><strong>upcase</strong></a> has been added to ensure there are no issues with capitalization of the pet names.</p>\n"}], "owner": {"reputation": 11, "user_id": 8717890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9418abfd70ce552d6ef8943ce0a31a86?s=128&d=identicon&r=PG&f=1", "display_name": "slothy", "link": "https://stackoverflow.com/users/8717890/slothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 46557538, "answer_count": 4, "score": 0, "last_activity_date": 1507096369, "creation_date": 1507093347, "last_edit_date": 1507093739, "question_id": 46557349, "link": "https://stackoverflow.com/questions/46557349/iterate-over-an-array-of-names-that-start-with-a-specific-letter", "title": "Iterate over an array of names that start with a specific letter", "body": "<p>Struggling with this concept.</p>\n\n<p>For example:</p>\n\n<pre><code>names = [\"Steve\", \"Mason\", \"John\", \"Sarah\"]\n</code></pre>\n\n<p>If I want to output some text only for the people whose name start with the letter \"S\" using the each method, how would i do so?</p>\n\n<pre><code>pets = [\"Scooby\", \"Soco\", \"Summer\", \"Pixie\", \"Wilson\", \"Mason\",\"Baron\", \"Brinkley\", \"Bella\"] \n(1..9).each {|pets| \n  def start_with? \n    if pets.start_with? \"S\"\n      puts \"My name starts with an S for super!\" \n    else \n     puts \"I\u2019m still pretty special too!\" \n    end \n  end\n }\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby", "ruby-on-rails-3", "accordion"], "owner": {"reputation": 11, "user_id": 8680404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580296705367914/picture?type=large", "display_name": "Hansen Salim", "link": "https://stackoverflow.com/users/8680404/hansen-salim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507605458, "creation_date": 1507091969, "last_edit_date": 1507605458, "question_id": 46557126, "link": "https://stackoverflow.com/questions/46557126/accordion-different-behavior-when-running-on-staging", "title": "Accordion different Behavior when running on Staging", "body": "<p>I'm currently developing a website using Ruby-on-rails. I have included the accordion on my form.</p>\n\n<pre><code>&lt;div id=\"accordion\" class=\"accordion no-margin\"&gt;\n  &lt;div class=\"accordion-group\"&gt;\n    &lt;div class=\"accordion-heading\"&gt;\n      &lt;a href=\"#accordion-ci\" data-parent=\"#accordion\" data-toggle=\"collapse\" class=\"accordion-toggle\"&gt;\n        &lt;i class=\"icon-th\"&gt;&lt;/i&gt;\n              COMMERCIAL ITEM\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=\"accordion-body in collapse\" id=\"accordion-ci\" style=\"height: auto;\"&gt;\n      &lt;div class=\"accordion-inner\"&gt;\n            &lt;!--\n              revised by: hansen.salim@nutrifood.co.id, August 31st 2017\n              adding id to connect to JS for drag n drop\n            --&gt;\n              &lt;!--&lt;table class=\"table table-condensed table-striped table-bordered table-hover no-margin\"&gt;--&gt;\n        &lt;table class=\"table table-condensed table-striped table-bordered table-hover no-margin\" id=\"sortable\"&gt;\n          &lt;thead&gt;\n            &lt;tr&gt;\n              &lt;th style=\"width:20%\"&gt;ITEM DESCRIPTION&lt;/th&gt;\n              &lt;th style=\"width:20%\"&gt;SECONDARY ITEM DESCRIPTION&lt;/th&gt;\n              &lt;th style=\"width:10%\"&gt;PRICE&lt;/th&gt;\n              &lt;th style=\"width:8%\"&gt;PRICE ON MASTER&lt;/th&gt;\n              &lt;th style=\"width:8%\"&gt;QUANTITY&lt;/th&gt;\n              &lt;th style=\"width:9%\"&gt;VOLUME (CBM)&lt;/th&gt;\n              &lt;th style=\"width:9%\"&gt;WEIGHT (KG)&lt;/th&gt;\n              &lt;th style=\"width:10%\"&gt;TOTAL FOB (USD)&lt;/th&gt;\n              &lt;th style=\"width:6%\"&gt;ACTION&lt;/th&gt;\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody id=\"ci\"&gt;\n            &lt;%= render partial: 'item_detail', collection: @ci_products %&gt;\n              &lt;tr&gt;\n                &lt;td colspan=\"9\"&gt;\n                  &lt;ul&gt;\n                    &lt;li&gt;\n                      &lt;a href=\"#\" class=\"add_buyer_sales_contract_detail btn btn-success\" data-icon=\"\ue102\"&gt;&lt;/a&gt;\n                    &lt;/li&gt;\n                  &lt;/ul&gt;\n                &lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n        &lt;br /&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I've been testing the website running locally using <code>localhost:3000</code>. The result come out nicely, the accordion will show the form when the header is clicked. Then I'm going to test it at Staging phase. I have push to the server and then precompile it and <code>rake assets:clean</code>.</p>\n\n<p>And then the problem arise, I tested the accordion, but it doesn't show the form like it's supposed to. I tried to something like this to check :</p>\n\n<pre><code>    show: function () {\n      var dimension\n        , scroll\n        , actives\n        , hasData\n\n      if (this.transitioning) return\n\n      dimension = this.dimension()\n      scroll = $.camelCase(['scroll', dimension].join('-'))\n      actives = this.$parent &amp;&amp; this.$parent.find('&gt; .accordion-group &gt; .in')\n\n      this.$element[dimension](0)\n      this.transition('addClass', $.Event('show'), 'shown')\n      $.support.transition &amp;&amp; this.$element[dimension](this.$element[0][scroll])\n      alert(\"Open\")\n      return this\n    }\n\n  , hide: function () {\n      var dimension\n      if (this.transitioning) return\n      dimension = this.dimension()\n      this.reset(this.$element[dimension]())\n      this.transition('removeClass', $.Event('hide'), 'hidden')\n      this.$element[dimension](0)\n      alert(\"Hide\")\n      return this\n    }\n</code></pre>\n\n<p>This is the collapse function that implemented the accordion. I tried to add the alert to check if the javascript and jquery worked. When I tested it again at my Staging, after I clicked on the header, Alert \"Hide\" worked (because the default that form is open) and then another Alert \"Open\" popped up. It seems that both the </p>\n\n<pre><code> hide()\n</code></pre>\n\n<p>and </p>\n\n<pre><code> show()\n</code></pre>\n\n<p>function worked simultaneously. I had no idea why this would occur while my Local is working perfectly.</p>\n"}, {"tags": ["arrays", "ruby", "loops"], "comments": [{"owner": {"reputation": 316, "user_id": 3897591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fb11088a9dc9fc6c422951c3640669?s=128&d=identicon&r=PG", "display_name": "scarsam", "link": "https://stackoverflow.com/users/3897591/scarsam"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1507097827, "post_id": 46556784, "comment_id": 80070096, "body": "Updated, hopefully it should be more clear now."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1507158771, "post_id": 46556784, "comment_id": 80104503, "body": "Did any of the answers help?"}, {"owner": {"reputation": 316, "user_id": 3897591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fb11088a9dc9fc6c422951c3640669?s=128&d=identicon&r=PG", "display_name": "scarsam", "link": "https://stackoverflow.com/users/3897591/scarsam"}, "edited": false, "score": 0, "creation_date": 1507158820, "post_id": 46556784, "comment_id": 80104514, "body": "I will take a look later tonight, thanks for all the suggestions so far!"}], "answers": [{"tags": [], "owner": {"reputation": 2899, "user_id": 2981518, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vdLsm.jpg?s=128&g=1", "display_name": "Manish Giri", "link": "https://stackoverflow.com/users/2981518/manish-giri"}, "is_accepted": false, "score": 0, "last_activity_date": 1507090010, "creation_date": 1507090010, "answer_id": 46556848, "question_id": 46556784, "link": "https://stackoverflow.com/questions/46556784/iterate-over-an-array-n-items-at-a-time-and-continue-the-iteration/46556848#46556848", "title": "Iterate over an array n items at a time and continue the iteration", "body": "<p>You can use <code>break</code> and <code>next</code>. A short demo -</p>\n\n<pre><code>def foo_next(arr)\n  arr.each_with_index { |item, index| \n    next if index % 2 == 0\n    puts item\n  }\nend\n\n\ndef foo_break(arr)\n  arr.each_with_index { |item, index| \n    puts item\n    break if index % 2 == 0\n  }\nend\n\nnums = (1..10).to_a\n\nfoo_next(nums) # prints 2 4 6 8 10\n\nfoo_break(nums) # prints 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507136555, "post_id": 46557066, "comment_id": 80094355, "body": "No need for the initial intermediary <code>Array</code>. something like this would work equivalently well <code>my_arr.each_with_index.each_slice(5) {|slice| puts slice.map {|e,i| &quot;#{i} #{e}&quot;}; gets}</code> where <code>5</code> is the number of elements to show on each enter press"}, {"owner": {"reputation": 316, "user_id": 3897591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fb11088a9dc9fc6c422951c3640669?s=128&d=identicon&r=PG", "display_name": "scarsam", "link": "https://stackoverflow.com/users/3897591/scarsam"}, "edited": false, "score": 1, "creation_date": 1507176631, "post_id": 46557066, "comment_id": 80108411, "body": "I ended up using this solution and it worked. I ended up slicing my Array which I iterated over to print. I used this in combination with <code>next</code> and <code>break</code> to stop or continue my loop. Thanks for all the answers and I will try the other solutions if I have time during the weekend."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1507091574, "creation_date": 1507091574, "answer_id": 46557066, "question_id": 46556784, "link": "https://stackoverflow.com/questions/46556784/iterate-over-an-array-n-items-at-a-time-and-continue-the-iteration/46557066#46557066", "title": "Iterate over an array n items at a time and continue the iteration", "body": "<p>Ruby has an <a href=\"https://ruby-doc.org/core-2.4.2/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>Enumerable#each_slice</code></a> method that will give you an array in groups, which could allow you to do something similar to:</p>\n\n<pre><code>my_arr = my_arr.collect.with_index do |my_obj, index|\n  \"#{index} #{my_obj.name}\" # do this all the way up here to get the original index\nend.each_slice(5)\n\nlength = my_arr.size - 1 # how many groups do we need to display\nmy_arr.each.with_index do |group, index|\n  puts group.join(\"\\n\") # show the group, which is already in the desired format\n\n  if index &lt; length # if there are more groups to show,\n                    # show a message and wait for input\n    puts \"-- MORE --\"\n    gets\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1507100464, "last_edit_date": 1507100464, "creation_date": 1507092266, "answer_id": 46557185, "question_id": 46556784, "link": "https://stackoverflow.com/questions/46556784/iterate-over-an-array-n-items-at-a-time-and-continue-the-iteration/46557185#46557185", "title": "Iterate over an array n items at a time and continue the iteration", "body": "<p>Use an <a href=\"http://ruby-doc.org/core-2.4.1/Enumerator.html\" rel=\"nofollow noreferrer\">enumerator</a> to enable a stop/continue process:</p>\n\n<pre><code>arr = ('a'..'j').to_a\n #=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\"]\nenum = arr.to_enum\n\ndef taker n, enum\n  n.times.with_object [] { |_, o| o &lt;&lt; enum.next }\nend\n</code></pre>\n\n<p>Then take how ever many elements you want...</p>\n\n<pre><code>taker 2, enum\n #=&gt; [\"a\", \"b\"]\n</code></pre>\n\n<p>...and pick up from where you left off:</p>\n\n<pre><code>taker 3, enum\n #=&gt; [\"c\", \"d\", \"e\"]\ntaker 1, enum\n #=&gt; [\"f\"]\n</code></pre>\n\n<p>How you print the output and/or user-prompt is up to you.</p>\n"}], "owner": {"reputation": 316, "user_id": 3897591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99fb11088a9dc9fc6c422951c3640669?s=128&d=identicon&r=PG", "display_name": "scarsam", "link": "https://stackoverflow.com/users/3897591/scarsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 46557066, "answer_count": 3, "score": 0, "last_activity_date": 1507100464, "creation_date": 1507089457, "last_edit_date": 1507097785, "question_id": 46556784, "link": "https://stackoverflow.com/questions/46556784/iterate-over-an-array-n-items-at-a-time-and-continue-the-iteration", "title": "Iterate over an array n items at a time and continue the iteration", "body": "<p>I'm trying to build a CLI. I want to print the name of each object stored in my array. This is how my array looks like:</p>\n\n<pre><code>my_arr = [#&lt;MyObject::Obj:0x007f828daf33b0&gt;, #&lt;MyObject::Obj:0x007f358daf33b0&gt;..]\n</code></pre>\n\n<p>Instead of showing a long list at once, I want the user to take action to display 200/1000 names at a time. This is my code:</p>\n\n<pre><code>my_arr.each_with_index do |my_obj, index|\n  puts \"#{index} #{my_obj.name}\"\nend\n</code></pre>\n\n<p>I'm thinking to use <code>case</code> statement to build the user interaction part, but having issues finding ways to split my Array. How can I start iterating on my Array, break out from the iteration (ask for user input) and after that continue to iterate where I left off?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507092051, "post_id": 46556446, "comment_id": 80068093, "body": "Try <code>customer_list { FactoryGirl.build_list(:customer_bulk, 1) }</code>. The braces cause FactoryGirl to re-evaluate what&#39;s inside. For example, to get random numbers, you use <code>attribute { rand(0..10) }</code> instead of <code>attribute rand(0..10)</code>."}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507098403, "post_id": 46556446, "comment_id": 80070378, "body": "That did not work"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507099034, "post_id": 46557555, "comment_id": 80070661, "body": "Although I want to be able to have a sequential increment in the id, to be predictable, I went ahead and tried this just to rule out me not typing the sequence code correctly but I am still getting the same value returned every time."}, {"owner": {"reputation": 1097, "user_id": 7561846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ltf18iz1bQw/AAAAAAAAAAI/AAAAAAAAABQ/Hbnp3xFtDJg/photo.jpg?sz=128", "display_name": "gkats", "link": "https://stackoverflow.com/users/7561846/gkats"}, "reply_to_user": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507099415, "post_id": 46557555, "comment_id": 80070866, "body": "I think I missed the brackets &quot;{}&quot; around the values. I&#39;m sorry. Please try <code>account_id { rand(1e4..1e5).to_i.to_s }</code>. My initial answer will generate the random number <i>once</i>, at the time the code is parsed."}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507100064, "post_id": 46557555, "comment_id": 80071189, "body": "Thanks for the quick update. still the same result. I am not sure if build_list is actually building the factory again."}, {"owner": {"reputation": 1097, "user_id": 7561846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ltf18iz1bQw/AAAAAAAAAAI/AAAAAAAAABQ/Hbnp3xFtDJg/photo.jpg?sz=128", "display_name": "gkats", "link": "https://stackoverflow.com/users/7561846/gkats"}, "reply_to_user": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507100833, "post_id": 46557555, "comment_id": 80071586, "body": "Why don&#39;t you try to use the factory outside of the other factory at first, to make sure that it indeed works?  It&#39;s hard to know your whole setup unfortunately, but in general I think what you&#39;re trying to achieve would be more cleanly solved by pure Ruby instead of factories inside factories.  What I mean of course is that you can keep your factories simple and compose (mix and match) them on each test. If you see room for re-usability consider creating helper methods in a module or class."}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507102088, "post_id": 46557555, "comment_id": 80072282, "body": "Ok that did not work as well. Now I am starting to think that the way I am returning the mock object is the issue? Could this be the issue?  Is rspec adding some caching smarts somewhere? <code>allow(subject).to receive(:get_customer).and_return(build(:customer_list_resul&zwnj;&#8203;t))</code>"}, {"owner": {"reputation": 1097, "user_id": 7561846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ltf18iz1bQw/AAAAAAAAAAI/AAAAAAAAABQ/Hbnp3xFtDJg/photo.jpg?sz=128", "display_name": "gkats", "link": "https://stackoverflow.com/users/7561846/gkats"}, "reply_to_user": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507103845, "post_id": 46557555, "comment_id": 80073272, "body": "I&#39;m not sure about that sorry. It&#39;s been a while since I used Rspec. Try using the <code>allow_any_instance_of</code> method (or something like that). It might be overkill but it will probably ensure any instance of your class will get the mocked result.  Try to keep your tests simple. If it&#39;s come down to mocking at this level, it probably means there&#39;s a simpler way to wire things up. ;)"}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507105613, "post_id": 46557555, "comment_id": 80074191, "body": "I agree, that this needs to be simplified but I was just trying to preserve the object that I get back from the actual call. That being said I was able to simplify a bit and can get away with <code>allow(subject).to receive(:get_customer).and_return(build(:customer_bulk))</code> . But still sequence or random is not working"}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507105894, "post_id": 46557555, "comment_id": 80074332, "body": "OK it works with <code>allow(subject).to receive(:get_customer).and_return(build(:customer_bulk), build(:customer_bulk))</code> It solves the purpose since I am only testing on 2 values but this is not clean at all."}, {"owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507106523, "post_id": 46557555, "comment_id": 80074685, "body": "meh.. <a href=\"http://owowthathurts.blogspot.com/2014/08/rspec-3-and-deprecated-andreturn-blocks.html\" rel=\"nofollow noreferrer\">owowthathurts.blogspot.com/2014/08/&hellip;</a> .   <code>allow(subject).to receive(:get_customer) { (build(:customer_bulk)) }</code> fixed it.. Thanks for the pointers gkats"}, {"owner": {"reputation": 1097, "user_id": 7561846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ltf18iz1bQw/AAAAAAAAAAI/AAAAAAAAABQ/Hbnp3xFtDJg/photo.jpg?sz=128", "display_name": "gkats", "link": "https://stackoverflow.com/users/7561846/gkats"}, "reply_to_user": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "edited": false, "score": 0, "creation_date": 1507106830, "post_id": 46557555, "comment_id": 80074864, "body": "No problem! Happy if I helped."}], "tags": [], "owner": {"reputation": 1097, "user_id": 7561846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ltf18iz1bQw/AAAAAAAAAAI/AAAAAAAAABQ/Hbnp3xFtDJg/photo.jpg?sz=128", "display_name": "gkats", "link": "https://stackoverflow.com/users/7561846/gkats"}, "is_accepted": false, "score": 0, "last_activity_date": 1507099506, "last_edit_date": 1507099506, "creation_date": 1507094720, "answer_id": 46557555, "question_id": 46556446, "link": "https://stackoverflow.com/questions/46556446/rspec-factorygirl-build-a-factory-of-variable-list/46557555#46557555", "title": "rspec factorygirl build a factory of variable list", "body": "<p>The sequence will bump the value by 1 for each factory method invocation in the <em>same</em> test. If you call it once, it'll only give you back the first sequence number, which in this case is <code>1</code>.</p>\n\n<p>Would it be enough to just pass a random number as <code>account_id</code> every time you call the factory?</p>\n\n<pre><code>factory :customer_bulk, class: Com::Customer do\n  # random 5-digit string\n  account_id { rand(1e4...1e5).to_i.to_s }\n  # or random string with same digit\n  account_id { \"#{rand(10).to_s}\" * 5 }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "is_accepted": false, "score": 0, "last_activity_date": 1507107076, "creation_date": 1507107076, "answer_id": 46560721, "question_id": 46556446, "link": "https://stackoverflow.com/questions/46556446/rspec-factorygirl-build-a-factory-of-variable-list/46560721#46560721", "title": "rspec factorygirl build a factory of variable list", "body": "<p>Ok, just had to change the rspec to return a block.</p>\n\n<p><code>allow(subject).to receive(:get_customer) { (build(:customer_bulk)) }</code></p>\n"}], "owner": {"reputation": 35, "user_id": 4392604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadcc59134e3ade5c1bbe8757e88541f?s=128&d=identicon&r=PG&f=1", "display_name": "skd", "link": "https://stackoverflow.com/users/4392604/skd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507107076, "creation_date": 1507086893, "question_id": 46556446, "link": "https://stackoverflow.com/questions/46556446/rspec-factorygirl-build-a-factory-of-variable-list", "title": "rspec factorygirl build a factory of variable list", "body": "<p>I have a factory for a response object that contains a list, so I have a factory for that list as well, but I am now trying to get dynamic list every time I make the build_list call. </p>\n\n<p>Current state of the world is below:</p>\n\n<p>An API call and response that looks something like this.</p>\n\n<pre><code>pry(main)&gt; get_customer('12345').class\n=&gt; Com::ListResult\npry(main)&gt; get_customer('12345').c_list.class\n=&gt; Array\npry(main)&gt; get_customer('12345').c_list[0].class\n=&gt; Com::Customer`\n</code></pre>\n\n<p>Output of the call:</p>\n\n<pre><code>pry(main)&gt; get_customer('12345')\n=&gt; #&lt;Com::ListResult:0xHEX\n  @c_list=\n   [#&lt;Com::Customer:0xHEX\n     @account_id=\"12345\",\n     @email=\"test@bla.com\"&gt;]&gt;\n</code></pre>\n\n<p>I have created a factory and it works fine if I want to make the <code>get_customer</code> call just once.\nHere how the factory is setup:</p>\n\n<pre><code>factory :customer_each, class: Com::Customer do\n  account_id \"12345\"\n  email \"test@bla.com\"\nend\nfactory :customer_list_result, class: Com::ListResult do\n  customer_list FactoryGirl.build_list(:customer_each, 1)\nend\n</code></pre>\n\n<p>In the rspec, I have below to get me the mock results.</p>\n\n<pre><code>allow(subject).to receive(:get_customer).and_return(build(:customer_list_result))\n</code></pre>\n\n<p>Now I am trying to get different list every time I make the mock call. I tried sequence as shown below expecting account_id to be 11111, 22222, and so on but I always get 11111 back. Email doesn't matter since I only want a variable account_id.</p>\n\n<pre><code>  factory :customer_bulk, class: Com::Customer do\n    sequence(:account_id) {|n| \"#{n}\"*5}\n    email \"test@bla.com\"\n  end\n  factory :customer_list_result, class: Com::ListResult do\n    customer_list FactoryGirl.build_list(:customer_bulk, 1)\n  end\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1507085844, "post_id": 46556304, "comment_id": 80066566, "body": "***which does not make a lot of sense to me. iv used a different mysql user and granting it mysql privileges and searching on the web but no luck."}, {"owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "edited": false, "score": 0, "creation_date": 1507086067, "post_id": 46556304, "comment_id": 80066624, "body": "Could you please paste the output of <code>show variables like &#39;collation_database&#39;;</code>"}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "reply_to_user": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "edited": false, "score": 0, "creation_date": 1507124438, "post_id": 46556304, "comment_id": 80086413, "body": "thanks for the response ....where would i find that? in mysql or command line terminal?"}, {"owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "edited": false, "score": 0, "creation_date": 1507124937, "post_id": 46556304, "comment_id": 80086741, "body": "Run it in the <code>mysql client</code>"}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "reply_to_user": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "edited": false, "score": 0, "creation_date": 1507145840, "post_id": 46556304, "comment_id": 80099349, "body": "mysql&gt; show variables like &#39;collation_database&#39;; +--------------------+--------------------+ | Variable_name      | Value              | +--------------------+--------------------+ | collation_database | utf8mb4_0900_ai_ci | +--------------------+--------------------+ 1 row in set (0.26 sec)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1507254692, "post_id": 46581314, "comment_id": 80146914, "body": "my rails version is Rails 5.0.6 and i tried using &quot;bundle update rails&quot; but will not update to 5.1 i have also tried gem &#39;rails&#39;, &#39;~&gt; 5.1&#39; but comes back with an error..... isnt updating rails to new versions suppose to be easy?"}, {"owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1507272275, "post_id": 46581314, "comment_id": 80151418, "body": "A <code>bundle update</code> will only push your <code>minor version</code> to the latest. I&#39;d suggest you first change the version in the Gemfile to <code>gem &#39;rails&#39;, &#39;~&gt; 5.1&#39;</code>, and then run <code>bundle update rails</code>. You won&#39;t get errors then."}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1507331922, "post_id": 46581314, "comment_id": 80182207, "body": "thank you that fixed it! i can see my tables now in mysql your man bitsapien."}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1604277730, "post_id": 46581314, "comment_id": 114290642, "body": "@bitsapien Thanks! We were running MySQL 8.x and were trying to upgrade Rails 4.2 to 5.0 and ran into this error. Ended up having to upgrade to Rails 5.2 instead to get this fix in place."}], "tags": [], "owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "is_accepted": false, "score": 1, "last_activity_date": 1507192906, "creation_date": 1507192906, "answer_id": 46581314, "question_id": 46556304, "link": "https://stackoverflow.com/questions/46556304/activerecordstatementinvalid-mysql2error-unknown-collation-utf8-0900-ai/46581314#46581314", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown collation: &#39;utf8_0900_ai_ci&#39;", "body": "<p>There was an issue related to your problem : <a href=\"https://github.com/rails/rails/issues/28730\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/28730</a></p>\n\n<p>This has been fixed in <code>rails v5.1.0.rc2</code>. Upgrading to the latest version and regenerating <code>schema.rb</code> should eliminate your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 5589, "user_id": 406642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMSzb.jpg?s=128&g=1", "display_name": "Lev Lukomsky", "link": "https://stackoverflow.com/users/406642/lev-lukomsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1593034674, "creation_date": 1593034674, "answer_id": 62564469, "question_id": 46556304, "link": "https://stackoverflow.com/questions/46556304/activerecordstatementinvalid-mysql2error-unknown-collation-utf8-0900-ai/62564469#62564469", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown collation: &#39;utf8_0900_ai_ci&#39;", "body": "<p>Also it's possible to add general <code>collation</code> to your <code>database.yml</code> if <code>utf8_0900_ai_ci</code> doesn't work:</p>\n<pre><code>development:\n  adapter: mysql2\n  ...\n  encoding: utf8\n  collation: utf8_general_ci\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2399, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1593034674, "creation_date": 1507085711, "question_id": 46556304, "link": "https://stackoverflow.com/questions/46556304/activerecordstatementinvalid-mysql2error-unknown-collation-utf8-0900-ai", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown collation: &#39;utf8_0900_ai_ci&#39;", "body": "<p>i am a newbie trying to learn ruby on rails by following the Lynda video series using ROR version 5.0 and mysql 8.02. after creating my table entries in DB>migrate>model.rb file and running \"rails db:migrate\" i get an error in the terminal which does not make a lot of sense to. iv using a different user and grating it mysql privileges and searching on the web but no luck. </p>\n\n<p>=============================</p>\n\n<p>class CreateUsers &lt; ActiveRecord::Migration[5.0]</p>\n\n<p>def up\n    create_table :users do |t|</p>\n\n<pre><code>    t.column \"first_name\", :string, :limit =&gt; 25\n    t.string \"last_name\", :limit =&gt; 50\n    t.string \"email\", :default =&gt; '', :null =&gt; false\n    t.string \"password\", :limit =&gt; 40\n\n  t.timestamps\nend\n</code></pre>\n\n<p>end</p>\n\n<p>def down</p>\n\n<pre><code>drop_table :users\n</code></pre>\n\n<p>end</p>\n\n<h1>end</h1>\n\n<p>MBP:simple_cms $ rails db:migrate\nrails aborted!\nActiveRecord::StatementInvalid: Mysql2::Error: Unknown collation: 'utf8_0900_ai_ci': CREATE TABLE <code>schema_migrations</code> (<code>version</code> varchar(255) COLLATE utf8_0900_ai_ci PRIMARY KEY) ENGINE=InnoDB\n/Users/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.9/lib/mysql2/client.rb:120:in <code>_query'\n/Users/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.9/lib/mysql2/client.rb:120:in</code>block in query'\n/Users/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.9/lib/mysql2/client.rb:119:in <code>handle_interrupt'\n/Users/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.9/lib/mysql2/client.rb:119:in</code>query'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:218:in <code>block in execute'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract_adapter.rb:590:in</code>block in log'\n/Users/.rvm/gems/ruby-2.3.0/gems/activesupport-5.0.6/lib/active_support/notifications/instrumenter.rb:21:in <code>instrument'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract_adapter.rb:583:in</code>log'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:218:in <code>execute'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/mysql/database_statements.rb:31:in</code>execute'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/schema_statements.rb:278:in <code>create_table'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:423:in</code>create_table'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/schema_migration.rb:27:in <code>create_table'\n/Users/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/schema_statements.rb:1008:in</code>initialize_schema_migrations_table'</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rspec", "circleci"], "comments": [{"owner": {"reputation": 3334, "user_id": 1772245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b75ac639ad884c9dd27942d985ace8ee?s=128&d=identicon&r=PG", "display_name": "mostafazh", "link": "https://stackoverflow.com/users/1772245/mostafazh"}, "edited": false, "score": 0, "creation_date": 1507338678, "post_id": 46556121, "comment_id": 80183289, "body": "Can you share your git repo or circleci job URLs?"}], "owner": {"reputation": 179, "user_id": 6228435, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/488485558008153/picture?type=large", "display_name": "Hiromu Masuda", "link": "https://stackoverflow.com/users/6228435/hiromu-masuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1507084376, "creation_date": 1507084376, "question_id": 46556121, "link": "https://stackoverflow.com/questions/46556121/circleci-mysql2error-cant-connect-to-mysql-server-on-127-0-0-1-111", "title": "CircleCI: Mysql2::Error: Can&#39;t connect to MySQL server on &#39;127.0.0.1&#39; (111)", "body": "<p>I cannot solve error while updating circleCI 1.0 to 2.0.\nWhat I want to do using circleCI is very simple, just running rspec test.</p>\n\n<p>The error is</p>\n\n<pre><code>Mysql2::Error: Can't connect to MySQL server on '127.0.0.1' (111)\n</code></pre>\n\n<p>My .circleci/config.yml file is</p>\n\n<pre><code>version: 2\njobs:\n  build:\n    docker:\n      - image: circleci/ruby:2.1-node-browsers\n        environment:\n          RAILS_ENV: test\n      - image: circleci/mysql:5.7\n        environment:\n          - MYSQL_USER=root\n          - MYSQL_PASSWORD=''\n    steps:\n      - checkout\n\n      # Restore bundle cache\n      - restore_cache:\n          key: rails-demo-{{ checksum \"Gemfile.lock\" }}\n\n      # Bundle install dependencies\n      - run: bundle install --path vendor/bundle\n\n      # Store bundle cache\n      - save_cache:\n          key: rails-demo-{{ checksum \"Gemfile.lock\" }}\n          paths:\n            - vendor/bundle\n\n      # Database setup\n      - run: mv config/database.yml.sample config/database.yml\n      - run: RAILS_ENV=test bundle exec rake db:create\n      - run: RAILS_ENV=test bundle exec rake db:schema:load\n\n      # Run rspec in parallel\n      - type: shell\n        command: |\n          bundle exec rspec --profile 10 \\\n                            --format RspecJunitFormatter \\\n                            --out test_results/rspec.xml \\\n                            --format progress \\\n                            $(circleci tests glob \"spec/**/*_spec.rb\" | circleci tests split --split-by=timings)\n\n      # Save test results for timing analysis\n      - store_test_results:\n          path: test_results\n</code></pre>\n\n<p>My config/database.yml file is</p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password:\n  socket: /tmp/mysql.sock\n\ndevelopment:\n  &lt;&lt;: *default\n  database: app_development\n\ntest:\n  &lt;&lt;: *default\n  database: app_test\n</code></pre>\n\n<p>ruby version is 2.1.4, and mysql version is 5.7.10</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507083908, "post_id": 46555955, "comment_id": 80066110, "body": "What is the rule? Don&#39;t expect us to guess what you want."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1507087011, "post_id": 46555955, "comment_id": 80066808, "body": "markdown to html. Probably a gem that does this for you. If you want diy solution use regex with the <code>gsub</code> method."}, {"owner": {"reputation": 21, "user_id": 8717428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vs4UVXvvEiE/AAAAAAAAAAI/AAAAAAAAAIQ/2bKg3JdFgOk/photo.jpg?sz=128", "display_name": "Irfan Ardiansyah", "link": "https://stackoverflow.com/users/8717428/irfan-ardiansyah"}, "edited": false, "score": 0, "creation_date": 1507161025, "post_id": 46555955, "comment_id": 80104990, "body": "the rules is using repacle using regex"}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "reply_to_user": {"reputation": 21, "user_id": 8717428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vs4UVXvvEiE/AAAAAAAAAAI/AAAAAAAAAIQ/2bKg3JdFgOk/photo.jpg?sz=128", "display_name": "Irfan Ardiansyah", "link": "https://stackoverflow.com/users/8717428/irfan-ardiansyah"}, "edited": false, "score": 0, "creation_date": 1507085418, "post_id": 46556070, "comment_id": 80066450, "body": "I&#39;m glad it helped you. Please consider accepting the answer"}, {"owner": {"reputation": 21, "user_id": 8717428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vs4UVXvvEiE/AAAAAAAAAAI/AAAAAAAAAIQ/2bKg3JdFgOk/photo.jpg?sz=128", "display_name": "Irfan Ardiansyah", "link": "https://stackoverflow.com/users/8717428/irfan-ardiansyah"}, "edited": false, "score": 0, "creation_date": 1507161051, "post_id": 46556070, "comment_id": 80104998, "body": "how about using regex"}, {"owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "reply_to_user": {"reputation": 21, "user_id": 8717428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vs4UVXvvEiE/AAAAAAAAAAI/AAAAAAAAAIQ/2bKg3JdFgOk/photo.jpg?sz=128", "display_name": "Irfan Ardiansyah", "link": "https://stackoverflow.com/users/8717428/irfan-ardiansyah"}, "edited": false, "score": 0, "creation_date": 1507216282, "post_id": 46556070, "comment_id": 80131331, "body": "I don&#39;t believe using Regex is a best practice for what you&#39;re trying to do. In general, you only want to use Regular Expressions when native language features won&#39;t work for what you&#39;re trying to do."}], "tags": [], "owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "is_accepted": false, "score": 1, "last_activity_date": 1545550789, "last_edit_date": 1545550789, "creation_date": 1507083977, "answer_id": 46556070, "question_id": 46555955, "link": "https://stackoverflow.com/questions/46555955/ruby-regex-replace/46556070#46556070", "title": "Ruby regex replace", "body": "<p>#tr doesn't use Regular Expressions to replace single characters, so if it doesn't necessarily need to use regex you could do something like this-</p>\n\n<pre><code>str = 'this _is_ a *string*'\nnew_str = []\n# Split string into an array we can loop through\nstr.split.map do |word|\n  # Trade the characters for blank strings, wrap in HTML\n  if word.start_with?('_')\n    new_word = \"&lt;em&gt;#{word.tr('_', '')}&lt;/em&gt;\"\n  elsif word.start_with?('*')\n    new_word = \"&lt;strong&gt;#{word.tr('*', '')}&lt;/strong&gt;\"\n  end\n  # Add the word to the new string\n  new_word ? new_str &lt;&lt; new_word : new_str &lt;&lt; word\nend\nnew_str.join(' ')\n# =&gt; this &lt;em&gt;is&lt;/em&gt; a &lt;strong&gt;string&lt;/strong&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8717428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vs4UVXvvEiE/AAAAAAAAAAI/AAAAAAAAAIQ/2bKg3JdFgOk/photo.jpg?sz=128", "display_name": "Irfan Ardiansyah", "link": "https://stackoverflow.com/users/8717428/irfan-ardiansyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545550789, "creation_date": 1507082848, "question_id": 46555955, "link": "https://stackoverflow.com/questions/46555955/ruby-regex-replace", "title": "Ruby regex replace", "body": "<p>how to replace this word<br></p>\n\n<pre><code>This is a _test_ on *regex* and other string manipulations. This is *crucial* for your *training*.\n</code></pre>\n\n<p>to be a</p>\n\n<pre><code>This is a &lt;em&gt;test&lt;/em&gt; on &lt;strong&gt;regex&lt;/strong&gt; and other string manipulations. This is &lt;strong&gt;crucial&lt;/strong&gt; for your &lt;strong&gt;training&lt;/strong&gt;.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2127, "user_id": 923194, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d48e182893f9d17460dd2404c4072828?s=128&d=identicon&r=PG", "display_name": "Imran Ali", "link": "https://stackoverflow.com/users/923194/imran-ali"}, "edited": false, "score": 0, "creation_date": 1507082289, "post_id": 46555873, "comment_id": 80065797, "body": "have you gone through <a href=\"http://guides.rubyonrails.org/form_helpers.html#nested-forms\" rel=\"nofollow noreferrer\">Nested Forms</a> section of the Rails documentation"}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 2127, "user_id": 923194, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d48e182893f9d17460dd2404c4072828?s=128&d=identicon&r=PG", "display_name": "Imran Ali", "link": "https://stackoverflow.com/users/923194/imran-ali"}, "edited": false, "score": 0, "creation_date": 1507082936, "post_id": 46555873, "comment_id": 80065914, "body": "@ImranAli i have. I may not have understood it perfectly, but from what i understand, Nested Forms are meant for creating the Child together with the Parent in the Parent&#39;s form?"}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "is_accepted": false, "score": 0, "last_activity_date": 1507083108, "creation_date": 1507083108, "answer_id": 46555981, "question_id": 46555873, "link": "https://stackoverflow.com/questions/46555873/rails-5-create-multiple-objects-of-1-model/46555981#46555981", "title": "Rails 5 - Create Multiple Objects of 1 Model", "body": "<p>Nested forms is always tricky but there are gems that can do that for you. One of my personal favourites would be this: <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">https://github.com/nathanvda/cocoon</a></p>\n\n<p>Here's a tutorial using the gem <a href=\"https://www.sitepoint.com/better-nested-attributes-in-rails-with-the-cocoon-gem/\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/better-nested-attributes-in-rails-with-the-cocoon-gem/</a></p>\n"}, {"comments": [{"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1507106512, "post_id": 46556633, "comment_id": 80074672, "body": "Thanks for the long and detailed answer. Just a couple of questions. If i were to use nested attributes, I am basically creating a &quot;dummy parent&quot; just to use that right? (Or i am mistaken that nested attributes are only meant for Parent/Child forms). The other question is, in the code you&#39;ve written, specfically <code>Bar.new(baz: bar_params[:baz])</code>, could you explain why does the syntax include <code>baz:</code>? Rather than just <code>Bar.new(bar_params[:baz])</code>."}, {"owner": {"reputation": 21499, "user_id": 19839, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/971cfac6afb23c0f0fd3623284a02a81?s=128&d=identicon&r=PG", "display_name": "csexton", "link": "https://stackoverflow.com/users/19839/csexton"}, "reply_to_user": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1507562632, "post_id": 46556633, "comment_id": 80248793, "body": "Oh, sorry, it was just psudocode from memory. If you are using nested attributes you wouldn&#39;t need to create the nested model directly. Rails will do that for you. It will even provide form helpers to set things up so you get the proper <code>bar_attributes</code> or <code>baz_attributes</code> keys."}], "tags": [], "owner": {"reputation": 21499, "user_id": 19839, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/971cfac6afb23c0f0fd3623284a02a81?s=128&d=identicon&r=PG", "display_name": "csexton", "link": "https://stackoverflow.com/users/19839/csexton"}, "is_accepted": false, "score": 2, "last_activity_date": 1507088306, "creation_date": 1507088306, "answer_id": 46556633, "question_id": 46555873, "link": "https://stackoverflow.com/questions/46555873/rails-5-create-multiple-objects-of-1-model/46556633#46556633", "title": "Rails 5 - Create Multiple Objects of 1 Model", "body": "<p>Looks like you are headed in the right direction.</p>\n\n<h3>Problem 1: The IDs</h3>\n\n<p>You don't need IDs if you are creating new records. If you want to be able to edit the records with the same form it may be better to generate IDs, but that is more of a decision on how you want to handle create vs. update.</p>\n\n<p>The way this works is Rails looks at the Name of the form elements. If you have empty brackets in the name Rails will render the params into an array:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"foo[bar][][baz]\" value=\"one\" /&gt;\n&lt;input type=\"text\" name=\"foo[bar][][baz]\" value=\"two\" /&gt;\n&lt;input type=\"text\" name=\"foo[bar][][baz]\" value=\"three\" /&gt;\n\nparams =&gt; { foo: { bar: [\"one\", \"two\", \"three\"]}}\n</code></pre>\n\n<p>But, if you have IDs, Rails will render params into a hash:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"foo[bar][1][baz]\" value=\"one\" /&gt;\n&lt;input type=\"text\" name=\"foo[bar][2][baz]\" value=\"two\" /&gt;\n&lt;input type=\"text\" name=\"foo[bar][3][baz]\" value=\"three\" /&gt;\n\nparams =&gt; { foo: { bar: {1: \"one\", 2: \"two\", 3: \"three\"}}}\n</code></pre>\n\n<h3>Problem 3: Creating the models</h3>\n\n<p>Now the trick is how you handle the creation of the models. If you want to use nested attributes you can do that by setting up <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>#accepts_nested_attributes_for</code></a> and nesting everything under <code>bar_attributes</code>. This will let you just pass the params hash to the model and have it work some magic.</p>\n\n<p>Alternatively you might want to iterate over the <code>params</code> hash and make each model right in your controller.</p>\n\n<p>Or create a form object to contain all that logic. Up to you.</p>\n\n<p>I would start with the manual iterate-over-params approach and get things working. Then you can refactor and clean things up.</p>\n\n<p>This might look something like this in your controller:</p>\n\n<pre><code>array_of_bars = foo_params[:bar].map do |bar_params|\n  Bar.new(baz: bar_params[:baz])\nend\n</code></pre>\n\n<hr>\n\n<p>Take a look at RailCast's <a href=\"http://railscasts.com/episodes/403-dynamic-forms\" rel=\"nofollow noreferrer\">Dynamic Forms</a> and <a href=\"http://railscasts.com/episodes/196-nested-model-form-revised\" rel=\"nofollow noreferrer\">Nested Forms</a> for more details. I revisit those guides numerous times over the last few years and have been happy with the resulting code every time.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7291473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef471625b2f095aca0629c059621f8d6?s=128&d=identicon&r=PG&f=1", "display_name": "Roel4811", "link": "https://stackoverflow.com/users/7291473/roel4811"}, "is_accepted": false, "score": 0, "last_activity_date": 1523562786, "creation_date": 1523562786, "answer_id": 49804835, "question_id": 46555873, "link": "https://stackoverflow.com/questions/46555873/rails-5-create-multiple-objects-of-1-model/49804835#49804835", "title": "Rails 5 - Create Multiple Objects of 1 Model", "body": "<p>I've been dealing with the same error Rack::QueryParser::ParameterTypeError (expected Array (got Rack::QueryParser::Params). <a href=\"https://stackoverflow.com/questions/39027715/rails-multi-record-form-only-saves-parameters-for-last-record\">This answer helped me to fix it.</a></p>\n\n<p>The error is caused by the fact that the records with an ID render params into a hash. The solution: you don't need the fields_for. Removing the fields_for block and just using form tag helpers instead should work, such as: </p>\n\n<pre><code>text_field_tag \"foos[][name]\", f[\"name\"]\n</code></pre>\n\n<p>With this approach, there will be no IDs that mess with your params. If you submit and inspect the params, you will see a nice array of hashes. </p>\n"}], "owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1523562786, "creation_date": 1507081984, "question_id": 46555873, "link": "https://stackoverflow.com/questions/46555873/rails-5-create-multiple-objects-of-1-model", "title": "Rails 5 - Create Multiple Objects of 1 Model", "body": "<p>I think what I would like to achieve is rather straightforward. I would like to have a form with 5 fields, and a person can create any number of objects from that form (i.e. If you fill in only 1 field, you create 1 object, if you field 2 fields, you create 2 objects etc...)</p>\n\n<p>Interestingly, nothing much comes up when I attempt to google this topic. The only \"proper\" example I came across was <a href=\"http://vicfriedman.github.io/blog/2015/07/18/create-multiple-objects-from-single-form-in-rails/\" rel=\"nofollow noreferrer\">this</a>. Which leads me to where I'm currently at (cause it doesn't work).</p>\n\n<p>Here's my <code>foo_controller.rb</code></p>\n\n<pre><code>def new\n  @foo = []\n  5.times do\n    @foo &lt;&lt; Foo.new\n  end\nend\n\ndef create\n  if params.has_key?(\"foos\")\n    Foo.create(foo_params(params[\"foos\"]))\n  else\n    params[\"foos\"].each do |f|\n      Foo.create(foo_params(f))\n    end\n  end\nend\n\nprivate\ndef foo_params(my_params)\n  my_params.permit(:item_one, :item_two)\nend\n</code></pre>\n\n<p>And here's the <code>new.html.erb</code></p>\n\n<pre><code>&lt;%= form_tag foos_path do %&gt;\n  &lt;% @foo.each do |f| %&gt;\n    &lt;% fields_for \"foos[]\", f do |ff| %&gt;\n      #all the form stuff, labels, buttons etc\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Now before I even hit submit, I already \"know\" that there's one problem. My form fields all have the same ID, which means even \"if\" I could submit without any problems, only the last entry would end up hitting the database. So...</p>\n\n<p><strong>Problem #1</strong>\n- How do I have unique form IDs?</p>\n\n<p>The next issue I face is when I hit submit, I get this error <code>Rack::QueryParser::ParameterTypeError (expected Array (got Rack::QueryParser::Params)</code>, so basically the params is not receiving the right thing. And that's my next problem...</p>\n\n<p><strong>Problem 2</strong>\n- What's the proper way to be passing an Array of params?</p>\n\n<p>But that is all assuming that <a href=\"http://vicfriedman.github.io/blog/2015/07/18/create-multiple-objects-from-single-form-in-rails/\" rel=\"nofollow noreferrer\">THIS</a> guide's solution works. I followed pretty much every step but came up empty. So i guess my big question/problem is:</p>\n\n<p><strong>How do i create One or Multiple objects of a single model?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "ruby-on-rails-5", "prawn"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 1873515, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a73dea145edac111183ea8544f004624?s=128&d=identicon&r=PG", "display_name": "Bob Nicholson", "link": "https://stackoverflow.com/users/1873515/bob-nicholson"}, "edited": false, "score": 0, "creation_date": 1549211474, "post_id": 49683036, "comment_id": 95813691, "body": "When I try to execute this, I get an error: &quot;undefined method `text_direction&#39; for nil:NilClass&#39;.  Has something changed or am I missing something?"}, {"owner": {"reputation": 532, "user_id": 219025, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a12bb528909b2beda629b742e15ecc7?s=128&d=identicon&r=PG", "display_name": "adg", "link": "https://stackoverflow.com/users/219025/adg"}, "reply_to_user": {"reputation": 163, "user_id": 1873515, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a73dea145edac111183ea8544f004624?s=128&d=identicon&r=PG", "display_name": "Bob Nicholson", "link": "https://stackoverflow.com/users/1873515/bob-nicholson"}, "edited": false, "score": 0, "creation_date": 1549302669, "post_id": 49683036, "comment_id": 95845963, "body": "Which line of code raised the exception? It is true that text_direction is not defined for nil. So we need to figure out which variable is nil."}, {"owner": {"reputation": 532, "user_id": 219025, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a12bb528909b2beda629b742e15ecc7?s=128&d=identicon&r=PG", "display_name": "adg", "link": "https://stackoverflow.com/users/219025/adg"}, "reply_to_user": {"reputation": 163, "user_id": 1873515, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a73dea145edac111183ea8544f004624?s=128&d=identicon&r=PG", "display_name": "Bob Nicholson", "link": "https://stackoverflow.com/users/1873515/bob-nicholson"}, "edited": false, "score": 0, "creation_date": 1549331646, "post_id": 49683036, "comment_id": 95855692, "body": "I&#39;m going to guess that you&#39;re missing the reference to the document itself. Try adding &quot;@pdf = self&quot; as the first line in the document."}, {"owner": {"reputation": 163, "user_id": 1873515, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a73dea145edac111183ea8544f004624?s=128&d=identicon&r=PG", "display_name": "Bob Nicholson", "link": "https://stackoverflow.com/users/1873515/bob-nicholson"}, "edited": false, "score": 1, "creation_date": 1549342968, "post_id": 49683036, "comment_id": 95857723, "body": "Yes, that was the problem. Thanks for the suggestion."}, {"owner": {"reputation": 600, "user_id": 3962760, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3036b6597a3ac345fd62dd73cee3fb1c?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Upadhyay", "link": "https://stackoverflow.com/users/3962760/nishant-upadhyay"}, "edited": false, "score": 0, "creation_date": 1600492357, "post_id": 49683036, "comment_id": 113111595, "body": "You made my day! Thanks for this answer!"}], "tags": [], "owner": {"reputation": 532, "user_id": 219025, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a12bb528909b2beda629b742e15ecc7?s=128&d=identicon&r=PG", "display_name": "adg", "link": "https://stackoverflow.com/users/219025/adg"}, "is_accepted": false, "score": 4, "last_activity_date": 1522970910, "creation_date": 1522970910, "answer_id": 49683036, "question_id": 46555227, "link": "https://stackoverflow.com/questions/46555227/prawn-move-cursor-down-after-text-box-expand/49683036#49683036", "title": "Prawn - Move cursor down after text_box expand", "body": "<p>You've probably figured out something by now but I'm also new to Prawn and had the same question so hopefully this will help someone else. This example shows both a text box and a formatted text box. There is probably somehow a better way but this is working for me.</p>\n\n<pre><code>  txt1 = \"u\" * 250\n  txt2 = \"v\" * 600\n  txt3 = \"w\" * 100\n  txt4 = \"x\" * 500\n  txt5 = \"y\" * 200\n  txt6 = \"z\" * 400\n\n  stroke_horizontal_rule\n\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  text_box(txt1, options)\n  measure = Prawn::Text::Box.new(txt1, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  text_box(txt2, options)\n  measure = Prawn::Text::Box.new(txt2, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  text_box(txt3, options)\n  measure = Prawn::Text::Box.new(txt3, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  array = [{:text=&gt;txt4, :size=&gt;12}]\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  formatted_text_box(array, options)\n  measure = Prawn::Text::Formatted::Box.new(array, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  array = [{:text=&gt;txt5, :size=&gt;16}]\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  formatted_text_box(array, options)\n  measure = Prawn::Text::Formatted::Box.new(array, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  array = [{:text=&gt;txt6, :size=&gt;12}]\n  options = {:document=&gt;@pdf, :at=&gt;[0,cursor]}\n  formatted_text_box(array, options)\n  measure = Prawn::Text::Formatted::Box.new(array, options)\n  measure.render(:dry_run =&gt; true)\n  move_down(measure.height)\n\n  stroke_horizontal_rule\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522970910, "creation_date": 1507076026, "last_edit_date": 1507079754, "question_id": 46555227, "link": "https://stackoverflow.com/questions/46555227/prawn-move-cursor-down-after-text-box-expand", "title": "Prawn - Move cursor down after text_box expand", "body": "<p>I'm generating PDF's using the Prawn Gem and I'm unable to find a way to move the <code>cursor</code> down after <code>text_box</code> expands from overflow text, similar to the way a regular <code>text</code> call would.</p>\n\n<p><strong>Text_box example</strong></p>\n\n<pre><code>pad(5) {\n  text_box payable, :at =&gt; [bounds.left, cursor], :width =&gt; 540, :height =&gt; 15, :overflow =&gt; :expand, inline_format: true\n}\n\nmove_down(15)\n\npad(5) {\n  text_box address, :at =&gt; [bounds.left, cursor], :width =&gt; 250, :height =&gt; 15, :overflow =&gt; :expand, inline_format: true\n  text_box city, :at =&gt; [250, cursor], :width =&gt; 100, :height =&gt; 15, :overflow =&gt; :expand, inline_format: true\n  text_box state, :at =&gt; [350, cursor], :width =&gt; 75, :height =&gt; 15, :overflow =&gt; :expand, inline_format: true\n  text_box zip, :at =&gt; [425, cursor], :width =&gt; 110, :height =&gt; 15, :overflow =&gt; :expand, inline_format: true\n}\n</code></pre>\n\n<p>So above, I have to <code>pad</code> and <code>move_down</code> from the <code>text_box payable</code> in order for the next set of text_boxes to be formatted correctly without overlapping. If I use a straight <code>text</code> call on the <code>payable</code> string then the cursor moves down after all of the text is rendered, as expected.</p>\n\n<p>The reason I'm using <code>text_box</code> over regular <code>text</code> is so that I can position text side by side on the same line. While this works great for strings thats all fit on a single line, it doesn't seem to play out well if one of those areas expands the <code>text_box</code> downwards because the cursor just starts at the next text line instead of below the expanded text_box.</p>\n\n<p>Any insight or suggestions would be appreciated, thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8015764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8fafda42073a5b46f5c1f71f65a08d?s=128&d=identicon&r=PG&f=1", "display_name": "Esgaroth", "link": "https://stackoverflow.com/users/8015764/esgaroth"}, "edited": false, "score": 0, "creation_date": 1507073009, "post_id": 46554627, "comment_id": 80063822, "body": "Thanks a lot, this seems to have been the problem."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1507092331, "post_id": 46554627, "comment_id": 80068178, "body": "This applies <code>.strip</code> individually to each badword every time a new <code>content</code> is evaluated."}], "tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 2, "last_activity_date": 1507071303, "creation_date": 1507071303, "answer_id": 46554627, "question_id": 46554441, "link": "https://stackoverflow.com/questions/46554441/if-statement-in-arrayeach-returns-true-only-on-last-element/46554627#46554627", "title": "If-Statement in &#39;Array#each&#39; returns &#39;true&#39; only on last element", "body": "<p>Try to <code>strip</code> a badword because it can has <code>\\n</code> sign in the end.</p>\n\n<pre><code>if content.downcase.include?(badword.strip)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8015764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8fafda42073a5b46f5c1f71f65a08d?s=128&d=identicon&r=PG&f=1", "display_name": "Esgaroth", "link": "https://stackoverflow.com/users/8015764/esgaroth"}, "edited": false, "score": 0, "creation_date": 1507072984, "post_id": 46554641, "comment_id": 80063814, "body": "Thank you for the answer, it helped me a lot in debugging the problem. The solution was what @AlexKojin posted, though."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 13, "user_id": 8015764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8fafda42073a5b46f5c1f71f65a08d?s=128&d=identicon&r=PG&f=1", "display_name": "Esgaroth", "link": "https://stackoverflow.com/users/8015764/esgaroth"}, "edited": false, "score": 0, "creation_date": 1507074244, "post_id": 46554641, "comment_id": 80064097, "body": "OK, but you realize that if the content includes 5 bad_words, you are going to send 5 messages to your user, and then send 5 messages to your log, and then attempt to delete the event.message 5 times. Also, if you have a list of 50 bad_words, you will test each and every one even if the first one is included in <code>content</code>. My solution fixes both of those problems."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1507085542, "last_edit_date": 1507085542, "creation_date": 1507071462, "answer_id": 46554641, "question_id": 46554441, "link": "https://stackoverflow.com/questions/46554441/if-statement-in-arrayeach-returns-true-only-on-last-element/46554641#46554641", "title": "If-Statement in &#39;Array#each&#39; returns &#39;true&#39; only on last element", "body": "<p>I would break your code up into smaller parts so you can better understand what's going on, and then use one of Ruby's <a href=\"https://ruby-doc.org/core-2.4.2/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable methods</a> to help make things more concise. Also, let's use Ruby convention of snake_case (<code>bad_words</code> instead of <code>badWords</code>).</p>\n\n<p>First, let's make sure your <code>bad_words</code> array doesn't contain any unwanted characters. It's better to modify the <code>bad_words</code> collection a single time rather than iterate over it modifying each element every time.  </p>\n\n<p>While we're at it, since our collection will not include duplicates, and since we'll be searching it many times for matching elements, we can increase efficiency greatly by converting the Array to a Set:</p>\n\n<pre><code>require 'set'\nbad_words = bad_words.map(&amp;:strip).to_set\n</code></pre>\n\n<p>Next let's write a method that just checks if the content contains a bad word. We'll put a question mark at the end of the method name to indicate it returns a boolean value:</p>\n\n<pre><code>def profane?(content)\n  bad_words.any? { |bad_word| content.include?(bad_word) }\nend\n</code></pre>\n\n<p>The <code>#any?</code> method returns true if any item passed into the following block returns <code>true</code>. </p>\n\n<p>Now your operative code can call <code>profane?</code> and take appropriate action:</p>\n\n<pre><code>def filter_bad_words(content)\n  if profane?(content)\n    bot.send_message(event.channel.id, \"Sorry #{event.user.name}, this message made my profanity senses tingle!\")\n    bot.send_message(344559522003812354, \"PROFANITY WARNING!!\\n user: #{event.user.name}\\n message: #{event.content}\\n Please check if it is a cause for a warning. Use !?warn to give the user a warning.\")\n    event.message.delete\n    true\n  end\nend\n</code></pre>\n\n<p>I've made the method return <code>true</code> if the content is profane, and it will return <code>nil</code> by default if the content is not profane. You can use different return values if you like, and you can take further action based on that response.</p>\n"}], "owner": {"reputation": 13, "user_id": 8015764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8fafda42073a5b46f5c1f71f65a08d?s=128&d=identicon&r=PG&f=1", "display_name": "Esgaroth", "link": "https://stackoverflow.com/users/8015764/esgaroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46554627, "answer_count": 2, "score": 1, "last_activity_date": 1507085542, "creation_date": 1507070175, "last_edit_date": 1507078585, "question_id": 46554441, "link": "https://stackoverflow.com/questions/46554441/if-statement-in-arrayeach-returns-true-only-on-last-element", "title": "If-Statement in &#39;Array#each&#39; returns &#39;true&#39; only on last element", "body": "<p>I am writing a bot for my discord server, which I want to act as a profanity filter. I read a list of bad words from a text file and store them in an array. Whenever a user sends a message (in a channel the bot is listening to), the bot then checks if that message includes one or more of these bad words. To do that, I use the following code:</p>\n\n<pre><code>badWords.each { |badword|\n  if content.downcase.include? badword\n    ...\n  end\n}\n</code></pre>\n\n<p>My problem is that the if-statement returns <code>true</code> only if the bad word in the content of the message matches the last one in the array. If it matches any other element of the array, it returns <code>false</code>.</p>\n\n<p>Is there any functionality of <code>Array#each</code> that I am misunderstanding?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters", "jsonb", "cocoon-gem"], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 7551494, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wNaKe.jpg?s=128&g=1", "display_name": "Abdelkrim Tabet Aoul", "link": "https://stackoverflow.com/users/7551494/abdelkrim-tabet-aoul"}, "edited": false, "score": 1, "creation_date": 1507144070, "post_id": 46564550, "comment_id": 80098412, "body": "it worked, i added <code>has_many</code> association for both metrics and units as you suggested and also replaced <code>:data</code> in <code>details_parameters</code> by <code>:quantity</code>, <code>:widht</code> and <code>:height</code>. for the UI you are right, with metrics width and height inputs are not at the same lines but this problem is from simple-form-bootstrap wrappers. and about to put all field in details table it can be a problem if later i could add a new detail type for exemple <code>Duration &lt; Detail</code> which have time as attribute, then i must create new migration to add the column time to details table. so i choosed jsonb for more flexibility"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1507119055, "creation_date": 1507119055, "answer_id": 46564550, "question_id": 46554262, "link": "https://stackoverflow.com/questions/46554262/using-submodel-accessor-sti-on-parent-params-for-nested-forms/46564550#46564550", "title": "Using submodel accessor (STI) on parent params for nested forms", "body": "<p>Imho the problem is you are using the association <code>details</code> which means that rails is trying to create/save a <code>Detail</code>. Instead you will have to use the respective associations for <code>units</code> and <code>metrics</code> so rails knows to create the correct object which has the respective <code>jsonb_accessors</code> to save correctly.</p>\n\n<p>You can just add the associations in the model: </p>\n\n<pre><code>has_many :metrics \nhas_many :units \n</code></pre>\n\n<p>I get this is possibly not as clean in your UI (if everything is a detail you can just add/list them together). Another alternative is define all possible json-fields in your <code>Detail</code> model (but not entirely sure if that defeats the purpose of using them in the first place). </p>\n"}], "owner": {"reputation": 130, "user_id": 7551494, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wNaKe.jpg?s=128&g=1", "display_name": "Abdelkrim Tabet Aoul", "link": "https://stackoverflow.com/users/7551494/abdelkrim-tabet-aoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 46564550, "answer_count": 1, "score": 0, "last_activity_date": 1507119055, "creation_date": 1507069143, "last_edit_date": 1507069669, "question_id": 46554262, "link": "https://stackoverflow.com/questions/46554262/using-submodel-accessor-sti-on-parent-params-for-nested-forms", "title": "Using submodel accessor (STI) on parent params for nested forms", "body": "<p>i have the following models:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\nclass Bill &lt; Order\nclass Preorder &lt; Order\n\nclass Detail &lt; ApplicationRecord\nclass Metric &lt; Detail\nclass Unit &lt; Detail\n</code></pre>\n\n<p>the model <code>Order</code> accept nested attributes for <code>Detail</code>, an <code>Order</code> can be a <code>Bill</code> or a <code>Preorder</code> and <code>Detail</code> can be by <code>Unit</code> or by <code>Metric</code></p>\n\n<p>i'm using jsonb_accessor gem to create additional attributes for <code>Unit</code> and <code>Metric</code></p>\n\n<pre><code>class Metric &lt; Detail\n    jsonb_accessor :data,\n      height: :decimal,\n      width: :decimal\nend\n\nclass Unit &lt; Detail\n    jsonb_accessor :data,\n      quantity: :decimal\nend\n</code></pre>\n\n<p>in my view, i'm using Cocoon gem to generate fields for <code>Unit</code> or <code>Metric</code></p>\n\n<pre><code>&lt;%= link_to_add_association(I18n.t('activerecord.models.metric.add'), f, :details, data: {association_insertion_node: '#details', association_insertion_method: :append}, :class =&gt; \"btn btn-success\", \nwrap_object: Proc.new { |detail| detail.type = \"Metric\"; detail = Metric.new }) %&gt;\n&lt;%= link_to_add_association(I18n.t('activerecord.models.unit.add'), f, :details, data: {association_insertion_node: '#details', association_insertion_method: :append}, :class =&gt; \"btn btn-success\",\nwrap_object: Proc.new { |detail| detail.type = \"Unit\"; detail = Unit.new }) %&gt;\n</code></pre>\n\n<p>and in my controller, i have this method to verify the params</p>\n\n<pre><code>def order_params(type)\n  if type==\"Bill\"\n    params.require(:bill).permit(:client_id, :type, :delivered, :paid, :total_paid, details_attributes: [:id, :total_price, :type, :data, :service_id, :_destroy])\n  elsif type==\"Preorder\"\n    params.require(:preorder).permit(:client_id, :type, :delivered, details_attributes: [:id, :total_price, :type, :data, :service_id, :_destroy])\n  end\nend\n</code></pre>\n\n<p>the form works near perfectly, it store all data i put in the form except for <code>:width, :height, :quantity</code>, when i put them in params, it give an error saying that these params do not belong to Detail model and when i put <code>:data</code> instead, the column still empty.</p>\n\n<p>i'm considering, using column directly for parent model <code>Detail</code> instead of using jsonb_accessor, or separate views and controller for each <code>Metric</code> and <code>Unit</code> models but i keep these solutions as last resort because i want to keep the code Dryier and use less columns as possible</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "raty"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7444319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d88a6010bb834ea16167f9434413e0?s=128&d=identicon&r=PG", "display_name": "Alex Virdee", "link": "https://stackoverflow.com/users/7444319/alex-virdee"}, "edited": false, "score": 0, "creation_date": 1507129021, "post_id": 46554185, "comment_id": 80089784, "body": "For some reason that adds a couple extra lines of errors                                                                                                                                            <code>at Object.fireWith [as resolveWith] (jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8&zwnj;&#8203;b42e4c0073393abee.js&zwnj;&#8203;?body=1:3363)     at Function.ready (jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8&zwnj;&#8203;b42e4c0073393abee.js&zwnj;&#8203;?body=1:3583)     at HTMLDocument.completed (jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8&zwnj;&#8203;b42e4c0073393abee.js&zwnj;&#8203;?body=1:3618)</code>"}], "tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507068619, "creation_date": 1507068619, "answer_id": 46554185, "question_id": 46553829, "link": "https://stackoverflow.com/questions/46553829/rails-app-not-showing-raty-js-plugin/46554185#46554185", "title": "Rails app not showing raty js plugin", "body": "<p>Looks like <code>raty</code> library is not loaded but you tried to initialize it. Wrap your code to <a href=\"https://learn.jquery.com/using-jquery-core/document-ready/\" rel=\"nofollow noreferrer\"><code>$(document).ready</code></a></p>\n\n<pre><code>$(document).ready(function() {\n  $('.review-rating').raty({\n      readOnly: true,\n      score: function() {\n          return $(this).attr('data-score');\n      },\n      path: '/assets/'\n  });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8347021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9abfd0084965f3d75857f8684fea27db?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Reuter", "link": "https://stackoverflow.com/users/8347021/dylan-reuter"}, "is_accepted": false, "score": 0, "last_activity_date": 1511842269, "last_edit_date": 1511842269, "creation_date": 1511840496, "answer_id": 47523631, "question_id": 46553829, "link": "https://stackoverflow.com/questions/46553829/rails-app-not-showing-raty-js-plugin/47523631#47523631", "title": "Rails app not showing raty js plugin", "body": "<p>I figured it out. \nFirst, add this to the top of your <code>application.js</code> file</p>\n\n<pre><code>//= require jquery3\n//= require jquery_ujs\n//= require jquery.raty\n</code></pre>\n\n<p>Next, wrap your js code from your <code>show.html.erb</code> view in <code>$(document).ready</code> like so: </p>\n\n<pre><code>$(document).ready(function() {\n   $('.review-rating').raty({\n   readOnly: true,\n   score: function() {\n     return $(this).attr('data-score');\n   },\n   path: '/assets/'\n   });\n});\n</code></pre>\n\n<p>Finally, add</p>\n\n<pre><code>&lt;script src=\"/assets/jquery.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/jquery_ujs.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>In your <code>application.html.erb</code> above <code>&lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;</code></p>\n\n<p>This should fix the problem, and you should see the review stars!</p>\n"}], "owner": {"reputation": 87, "user_id": 7444319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d88a6010bb834ea16167f9434413e0?s=128&d=identicon&r=PG", "display_name": "Alex Virdee", "link": "https://stackoverflow.com/users/7444319/alex-virdee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 872, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511842269, "creation_date": 1507066684, "last_edit_date": 1507068136, "question_id": 46553829, "link": "https://stackoverflow.com/questions/46553829/rails-app-not-showing-raty-js-plugin", "title": "Rails app not showing raty js plugin", "body": "<p>Getting these errors with raty js I am using Rails version 5.0 </p>\n\n<pre><code>jquery.raty.self-628421be04f36f7a8fa8b9b884c6d7824d6f8bdeba4f172b131f15aa63f713e8.js?body=1:761 Uncaught ReferenceError: jQuery is not defined\n    at jquery.raty.self-628421be04f36f7a8fa8b9b884c6d7824d6f8bdeba4f172b131f15aa63f713e8.js?body=1:761\n(anonymous) @ jquery.raty.self-628421be04f36f7a8fa8b9b884c6d7824d6f8bdeba4f172b131f15aa63f713e8.js?body=1:761\n2:131 Uncaught TypeError: $(...).raty is not a function\n    at 2:131\n</code></pre>\n\n<p>My code for adding the raty JS plugin is as follows.</p>\n\n<pre><code>&lt;script&gt;\n$('.review-rating').raty({\n    readOnly: true,\n    score: function() {\n        return $(this).attr('data-score');\n    },\n    path: '/assets/'\n});\n</code></pre>\n\n<p></p>\n\n<p>this corresponds with my show.html.erb file showing my reviews partial </p>\n\n<pre><code>&lt;div class=\"review-rating\" data-score=\"&lt;%= review.rating %&gt;\"&gt;&lt;/div&gt;\n&lt;p&gt;&lt;%= review.comment %&gt;&lt;/p&gt;\n\n\n &lt;% if user_signed_in? %&gt;\n\n&lt;% if review.user_id == current_user.id %&gt;\n\n&lt;%= link_to \"Edit\", edit_book_review_path(review.book, review) %&gt;\n&lt;%= link_to \"Delete\", book_review_path(review.book, review), method: :delete, data: {\nconfirm: \"Are you sure?\" } %&gt;\n\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>jQuery is definitely in the app because I have added it &amp; I am using bootstrap for certain elements which require jQuery which are all working fine. </p>\n\n<p>I have added images for Raty to the app/assets/images path as well as the raty js file to the javascripts folder.</p>\n\n<p>Any insight into why Rails is not reading Raty???</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xpath"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507069692, "creation_date": 1507069692, "answer_id": 46554358, "question_id": 46553351, "link": "https://stackoverflow.com/questions/46553351/how-to-use-xpath-in-ruby-to-get-tag-with-a-specific-attribute/46554358#46554358", "title": "How to use XPath in Ruby to get tag with a specific attribute?", "body": "<p>Ruby REXML library let's use XPath. Below example shows how to use xpath in your case.</p>\n\n<pre><code>require 'rexml/document'\n\nxml = %{&lt;!DOCTYPE html&gt;\n&lt;html lang=\"ko\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"euc-kr\"&gt;&lt;/meta&gt;    \n    &lt;link charset=\"en-us\"&gt;&lt;/link&gt; \n&lt;/head&gt;\n&lt;/html&gt;}\n\n doc = REXML::Document.new xml\n\n REXML::XPath.match(doc, '//*[@charset]')\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>=&gt; [&lt;meta charset='euc-kr'/&gt;, &lt;link charset='en-us'/&gt;]\n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507069692, "creation_date": 1507064426, "question_id": 46553351, "link": "https://stackoverflow.com/questions/46553351/how-to-use-xpath-in-ruby-to-get-tag-with-a-specific-attribute", "title": "How to use XPath in Ruby to get tag with a specific attribute?", "body": "<p>For instance, I want to get the value inside this tag</p>\n\n<pre><code>&lt;meta charset=\"euc-kr\"&gt;   \n</code></pre>\n\n<p>in this document:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"ko\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"euc-kr\"&gt;     \n&lt;/Head&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>How do I use XPath in Ruby to get any meta tag that has the attribute \"charset\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-5", "turbolinks"], "answers": [{"tags": [], "owner": {"reputation": 3742, "user_id": 783009, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8efefc827b7980fd8e39a04439d9295a?s=128&d=identicon&r=PG", "display_name": "Dom Christie", "link": "https://stackoverflow.com/users/783009/dom-christie"}, "is_accepted": false, "score": 0, "last_activity_date": 1507238707, "creation_date": 1507238707, "answer_id": 46595019, "question_id": 46553204, "link": "https://stackoverflow.com/questions/46553204/disable-merging-of-a-specific-head-script-in-turbolinks/46595019#46595019", "title": "Disable merging of a specific head script in Turbolinks", "body": "<blockquote>\n  <p>How can I tell Turbolinks to not consider that specific script in the merging process so I can avoid having those extra calls?</p>\n</blockquote>\n\n<p>I'm afraid I don't think there is a nice way to do what you're asking. If the instance variables have changed, then the script will need to be appended and evaluated.</p>\n\n<p>I'd recommend a different approach, like <a href=\"https://stackoverflow.com/a/46554016/783009\">the solution I proposed in your previous question</a>.</p>\n\n<p>I think what you're after is to teardown the event listener, and remove the script once it has executed. I wouldn't recommend this, as it is unconventional, and a bit flaky, but it is possible.</p>\n\n<pre><code>&lt;script id=\"mail-list-loader\"&gt;\n  // Remove the previously added event listener\n  document.removeEventListener('turbolinks:load', mailListLoader)\n\n  // Redefine the event handler and bind to the load event\n  var mailListLoader = function() {\n    $.ajax({\n      url: '/certified_mail/mail_list',\n      type: 'get',\n      data: {\n        page: &lt;%= @page %&gt;,\n        rut: &lt;%= @rut || 'null' %&gt;,\n        from: &lt;%= @from || 'null' %&gt;,\n        to: &lt;%= @to || 'null' %&gt;,\n        ids: &lt;%= @outdated_message_ids.to_json.html_safe %&gt;\n      }\n    })\n  }\n  document.addEventListener('turbolinks:load', mailListLoader)\n\n  // Remove the script to prevent build up in the head\n  document.head.removeChild(document.getElementById('mail-list-loader'))\n&lt;/script&gt;\n</code></pre>\n\n<p>As I said, I wouldn't recommend this, as you may end up with more headaches down the line, but it serves as a demonstration of what effectively needs to happen.</p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 3548614, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000050098733/picture?type=large", "display_name": "d0ct0r4r6a", "link": "https://stackoverflow.com/users/3548614/d0ct0r4r6a"}, "is_accepted": false, "score": 0, "last_activity_date": 1575939357, "creation_date": 1575939357, "answer_id": 59258724, "question_id": 46553204, "link": "https://stackoverflow.com/questions/46553204/disable-merging-of-a-specific-head-script-in-turbolinks/59258724#59258724", "title": "Disable merging of a specific head script in Turbolinks", "body": "<p>How about placing the script tag inside the <code>&lt;body&gt;</code> tag? In my case, I want some stylesheet <code>&lt;link&gt;</code> tags to be only applied to one page but not merged with another page <code>&lt;link&gt;</code> tags when the page changes. So I ended up moving those tags that don't need to be merged inside the <code>&lt;body&gt;</code>.</p>\n"}], "owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575939357, "creation_date": 1507063855, "question_id": 46553204, "link": "https://stackoverflow.com/questions/46553204/disable-merging-of-a-specific-head-script-in-turbolinks", "title": "Disable merging of a specific head script in Turbolinks", "body": "<p>I'm working on a Rails app that renders a JavaScript in the <code>head</code> of <code>application.html.erb</code> with the following:</p>\n\n<pre><code>&lt;head&gt;\n  ...\n  &lt;script&gt;&lt;%= render 'certified_mail/mail_list_loader.js' %&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>The JS partial rendered with the code above makes an AJAX call with parameters passed via instance variables from the controller:</p>\n\n<pre><code># _mail_list_loader.js.erb\ndocument.addEventListener(\"turbolinks:load\", function() {\n  $.ajax({\n    url: '/certified_mail/mail_list',\n    type: 'get',\n    data: {\n      page: &lt;%= @page %&gt;,\n      rut: &lt;%= @rut || 'null' %&gt;,\n      from: &lt;%= @from || 'null' %&gt;,\n      to: &lt;%= @to || 'null' %&gt;,\n      ids: &lt;%= @outdated_message_ids.to_json.html_safe %&gt;\n    }\n  });\n});\n</code></pre>\n\n<p>Since Turbolinks merges the <code>head</code> content from subsequent requests, every time the parameters for the AJAX calls change I have an extra <code>script</code> being loaded in the <code>head</code>, which results in unwanted extra requests, as shown in the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ICBkU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ICBkU.png\" alt=\"Extra scripts being added to head\"></a></p>\n\n<p>How can I tell Turbolinks to not consider that specific script in the merging process so I can avoid having those extra calls?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3", "32bit-64bit"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1507066056, "creation_date": 1507066056, "answer_id": 46553707, "question_id": 46553082, "link": "https://stackoverflow.com/questions/46553082/change-32-bit-pk-to-bigint-on-32-bit-rails-app/46553707#46553707", "title": "Change 32-bit PK to BIGINT on 32-bit rails app", "body": "<p>The use of <code>INT</code> or <code>BIGINT</code> is not constrained by 32-bit platforms, it's fully supported by both. Although using a 64-bit OS is a good plan for a multitude of reasons, it's not a hard requirement here.</p>\n\n<p>Create a migration to adjust the column type and you should be fine, but be sure to update all columns that reference this particular ID value as well. In other words, follow any <code>has_many</code> type associations and be sure they're also using <code>BIGINT</code>.</p>\n"}], "owner": {"reputation": 28, "user_id": 5278140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207810309322310/picture?type=large", "display_name": "BiggeekTX", "link": "https://stackoverflow.com/users/5278140/biggeektx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507066056, "creation_date": 1507063316, "question_id": 46553082, "link": "https://stackoverflow.com/questions/46553082/change-32-bit-pk-to-bigint-on-32-bit-rails-app", "title": "Change 32-bit PK to BIGINT on 32-bit rails app", "body": "<p>I have a Rails 3.2.18 app running on 32-bit Ubuntu using MySQL as the backend. The PK for one of my tables is a 32-bit integer and has recently maxed out. I know that you can change the PK from int to BIGINT in MySQL, and MySQL will handle the conversions. My question is will Ruby/Rails be able to handle the new, larger, <code>id</code> field since its running on a 32-bit platform?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 7025837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JYdEr.jpg?s=128&g=1", "display_name": "nesaulov", "link": "https://stackoverflow.com/users/7025837/nesaulov"}, "is_accepted": false, "score": 1, "last_activity_date": 1507063444, "creation_date": 1507063444, "answer_id": 46553108, "question_id": 46553063, "link": "https://stackoverflow.com/questions/46553063/rails-wrong-year-4712/46553108#46553108", "title": "rails wrong year -4712", "body": "<p>You can find the answer in <a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-c-new\" rel=\"nofollow noreferrer\">official documentation</a>:</p>\n\n<pre><code># Date.new([year=-4712[, month=1[, mday=1[, start=Date::ITALY]]]])    -&gt;  date\n# \n# Creates a date object denoting the given calendar date.\n# \n# In this class, BCE years are counted astronomically.  Thus, the\n# year before the year 1 is the year zero, and the year preceding the\n# year zero is the year -1.  The month and the day of month should be\n# a negative or a positive number (as a relative month/day from the\n# end of year/month when negative).  They should not be zero.\n# \n# The last argument should be a Julian day number which denotes the\n# day of calendar reform.  Date::ITALY (2299161=1582-10-15),\n# Date::ENGLAND (2361222=1752-09-14), Date::GREGORIAN (the proleptic\n# Gregorian calendar) and Date::JULIAN (the proleptic Julian\n# calendar) can be specified as a day of calendar reform.\n# \n#    Date.new(2001)            #=&gt; #&lt;Date: 2001-01-01 ...&gt;\n#    Date.new(2001,2,3)        #=&gt; #&lt;Date: 2001-02-03 ...&gt;\n#    Date.new(2001,2,-1)       #=&gt; #&lt;Date: 2001-02-28 ...&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 3, "last_activity_date": 1507066961, "last_edit_date": 1507066961, "creation_date": 1507065615, "answer_id": 46553619, "question_id": 46553063, "link": "https://stackoverflow.com/questions/46553063/rails-wrong-year-4712/46553619#46553619", "title": "rails wrong year -4712", "body": "<p>For the current date, use <code>today</code>: </p>\n\n<pre><code>2.4.2 :002 &gt; require \"date\"\n =&gt; true \n2.4.2 :003 &gt; x = Date.today\n =&gt; #&lt;Date: 2017-10-03 ((2458030j,0s,0n),+0s,2299161j)&gt; \n</code></pre>\n"}], "owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1507069943, "answer_count": 2, "score": 1, "last_activity_date": 1507066961, "creation_date": 1507063226, "question_id": 46553063, "link": "https://stackoverflow.com/questions/46553063/rails-wrong-year-4712", "closed_reason": "Duplicate", "title": "rails wrong year -4712", "body": "<pre><code>irb(main):002:0&gt; require 'date'\n=&gt; true\nirb(main):003:0&gt; x = Date.new\n=&gt; #&lt;Date: -4712-01-01 ((0j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>As you can see year is set to -4712.\nWhat do I do wrong?\nYear on my ubuntu is set right:</p>\n\n<blockquote>\n  <p>Oct  4 01:39:58 STD 2017</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1507299156, "post_id": 46598146, "comment_id": 80167279, "body": "This didn&#39;t work. I am positive that we have negotiated shipping rates enabled for our UPS account and I am also positive that I have the correct account number. I didn&#39;t receive any errors but the shipping rates did not change."}, {"owner": {"reputation": 1624, "user_id": 2912211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059632598/picture?type=large", "display_name": "Zzz", "link": "https://stackoverflow.com/users/2912211/zzz"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1507782610, "post_id": 46598146, "comment_id": 80349980, "body": "Could you see the http request which it sends out? You could log them with a gem like <code>httplog</code>? I guess it is a configuration thing."}], "tags": [], "owner": {"reputation": 1624, "user_id": 2912211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059632598/picture?type=large", "display_name": "Zzz", "link": "https://stackoverflow.com/users/2912211/zzz"}, "is_accepted": true, "score": 5, "last_activity_date": 1507263088, "creation_date": 1507263088, "answer_id": 46598146, "question_id": 46552755, "link": "https://stackoverflow.com/questions/46552755/active-shipping-negotiated-rates-for-ups-ruby-on-rails/46598146#46598146", "title": "Active_Shipping Negotiated Rates for UPS - Ruby on Rails", "body": "<p>Try assign your UPS account number as <code>origin_account</code> in the options.</p>\n\n<pre><code>response = carrier.find_rates(origin, destination, packages, {negotiated_rates: true, origin_account: 11111111})\n</code></pre>\n\n<p><a href=\"https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/carriers/ups.rb#L358\" rel=\"noreferrer\">https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/carriers/ups.rb#L358</a></p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 46598146, "answer_count": 1, "score": 12, "last_activity_date": 1507263088, "creation_date": 1507061932, "question_id": 46552755, "link": "https://stackoverflow.com/questions/46552755/active-shipping-negotiated-rates-for-ups-ruby-on-rails", "title": "Active_Shipping Negotiated Rates for UPS - Ruby on Rails", "body": "<p>I've integrated the Shopify active_shipping gem into my site and I am trying to get negotiated rates from my UPS account (I can get regular rates). I can't find any documentation on the negotiated rates. Can anyone help me out here? I think this line of code should work but it doesn't produce any errors or any different shipping rates.</p>\n\n<pre><code>response = carrier.find_rates(origin, destination, packages, {negotiated_rates: true})\n</code></pre>\n\n<p>I ran across this link here but still no luck:</p>\n\n<p><a href=\"https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/carriers/ups.rb\" rel=\"noreferrer\">https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/carriers/ups.rb</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tags", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1507061349, "post_id": 46552538, "comment_id": 80059621, "body": "Post your <code>routes.rb</code> file and be sure to include the line where your <code>show</code> method is defined. It&#39;s possible that <code>id</code> is not the name of the attribute you need to pull from <code>params</code>."}, {"owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 0, "creation_date": 1507061882, "post_id": 46552538, "comment_id": 80059863, "body": "In your article show.html.erb, you are using <i>@tag.articles and</i> <i>@tag</i> not exists."}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1507061570, "creation_date": 1507061570, "answer_id": 46552664, "question_id": 46552538, "link": "https://stackoverflow.com/questions/46552538/undefined-method-articles-for-nilnilclass-when-i-tried-to-display-related-art/46552664#46552664", "title": "undefined method `articles&#39; for nil:NilClass when i tried to display related articles on my article show page", "body": "<p>Your ArticlesController is not instantiating @tag variable while it is used in the show view.</p>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1507061702, "creation_date": 1507061702, "answer_id": 46552695, "question_id": 46552538, "link": "https://stackoverflow.com/questions/46552538/undefined-method-articles-for-nilnilclass-when-i-tried-to-display-related-art/46552695#46552695", "title": "undefined method `articles&#39; for nil:NilClass when i tried to display related articles on my article show page", "body": "<p>In your <code>show.html.erb</code>, you're trying to do:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"row text-white text-center\"&gt;\n    &lt;div class=\"col-md-10 col-lg-10 ml-sm-auto mr-sm-auto article-show-col\"&gt;\n\n      ...\n\n      &lt;% @tag.articles.each do |article| %&gt;\n          &lt;li&gt;&lt;%= link_to article.title, article_path(article) %&gt;&lt;/li&gt;\n      &lt;% end %&gt;**\n\n      ...\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But, hey, check it out! No <code>@tag</code> in your <code>show</code> action:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  before_action :find_article, only: [:show, :edit, :update, :destroy]\n  before_action :owned_article, only: [:edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  ...\n\n  def show\n    #look! no @tag\n  end\n\n  ...\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1507118886, "post_id": 46554636, "comment_id": 80082266, "body": "After i defined the related_articles method as you said i was able to achieved what i wanted... You saved my stress man, am grateful. However, when i changed my find_article method i got this error &quot;undefined method `includes&#39; for #&lt;Article:0x50478f0&gt;&quot;"}, {"owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1507125957, "post_id": 46554636, "comment_id": 80087467, "body": "Good point. The <code>includes</code> should go before the <code>find</code>.  I&#39;ll update the answer."}, {"owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1507127154, "post_id": 46554636, "comment_id": 80088403, "body": "I updated the answer to use a more efficient query for <code>related_articles</code>"}, {"owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1507127835, "post_id": 46554636, "comment_id": 80088938, "body": "Lashe, BTW, I can tell you are new to SO. I am too.  When you find a good answer to your question, don&#39;t be afraid to up vote it and <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept</a> it.  The feedback helps others find good answers."}], "tags": [], "owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "is_accepted": true, "score": 1, "last_activity_date": 1507143331, "last_edit_date": 1507143331, "creation_date": 1507071392, "answer_id": 46554636, "question_id": 46552538, "link": "https://stackoverflow.com/questions/46552538/undefined-method-articles-for-nilnilclass-when-i-tried-to-display-related-art/46554636#46554636", "title": "undefined method `articles&#39; for nil:NilClass when i tried to display related articles on my article show page", "body": "<p>Here is a longer answer that offers a solution to your problem.  The issue is that you want to get all <code>articles</code> that share a <code>tag</code> with the <code>article</code> you are showing, while presumably not showing the current article in the list of related articles.  I would accomplish this by adding a <code>related_articles</code> method to your <code>Article</code> model and calling it in your view.</p>\n\n<p>Add the following method to <code>app/models/article.rb</code>:</p>\n\n<pre><code>def related_articles\n    Article.joins(:tags).where(tags: { id: self.tags.pluck(:id) }).where.not(id: self.id)\nend\n</code></pre>\n\n<p>The above query should return all of the articles that have a matching tag while excluding itself.</p>\n\n<p>You can now replace the related articles section in your view with:</p>\n\n<pre><code>**&lt;h5&gt;Related Articles&lt;/h5&gt;\n&lt;% @article.related_articles.each do |article| %&gt;\n    &lt;li&gt;&lt;%= link_to article.title, article_path(article) %&gt;&lt;/li&gt;\n&lt;% end %&gt;**\n</code></pre>\n\n<p>One final note that is not strictly related to your problem, but worth mentioning.  By iterating over <code>@article.tags</code>, your view is creating an N+1 query.  These are very inefficient.  The good news, is that this can be fixed with <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">eager loading</a> by simply, changing the <code>find_articles</code> method in your <code>articles_controller</code> as follows:</p>\n\n<pre><code>def find_article\n  @article = Article.includes(:tags).find(params[:id])\nend\n</code></pre>\n\n<p>There may be a more efficient way to write the <code>related_articles</code> query, but this should work.</p>\n\n<p>EDIT:</p>\n\n<p>Another way of writing the <code>related_articles</code> query follows. This will yield the same results. It moves more of the processing to the database and results in fewer calls to the database.</p>\n\n<pre><code>def related_articles\n    Article.distinct.joins(tags: :articles).where.not(id: self.id)\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 46554636, "answer_count": 3, "score": 1, "last_activity_date": 1507143331, "creation_date": 1507061090, "question_id": 46552538, "link": "https://stackoverflow.com/questions/46552538/undefined-method-articles-for-nilnilclass-when-i-tried-to-display-related-art", "title": "undefined method `articles&#39; for nil:NilClass when i tried to display related articles on my article show page", "body": "<p>Hello friends i have this error I've been facing yesterday on my Rails App. I get <strong>undefined method `articles' for nil:NilClass when i tried to display related articles on my article show page</strong>.</p>\n\n<p>Here is my app codes</p>\n\n<p><strong>tag.rb</strong></p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n  has_many :taggings\n  has_many :articles, through: :taggings\n\n  def to_s\n    name\n  end\n\nend\n</code></pre>\n\n<p><strong>tagging.rb</strong></p>\n\n<pre><code>class Tagging &lt; ApplicationRecord\n  belongs_to :tag\n  belongs_to :article\nend\n</code></pre>\n\n<p><strong>articles_controller</strong></p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n before_action :find_article, only: [:show, :edit, :update, :destroy]\n before_action :owned_article, only: [:edit, :update, :destroy]\n before_action :authenticate_user!, except: [:index, :show]\n\ndef index\n @articles = Article.all.order(\"created_at desc\")\nend\n\ndef show\nend\n\ndef new\n  @article = current_user.articles.build\nend\n\ndef create\n  @article = current_user.articles.build(article_params)\n\n  if @article.save\n    redirect_to @article\n  else\n    render 'new'\n  end\nend\n\ndef edit\nend\n\ndef update\n  if @article.update(article_params)\n    redirect_to @article, notice: \"Your article was successfully updated!\"\n  else\n    render 'edit'\n  end\nend\n\ndef destroy\n  @article.destroy\n  redirect_to articles_path\nend\n\nprivate\n\ndef find_article\n  @article = Article.find(params[:id])\nend\n\ndef article_params\n  params.require(:article).permit(:title, :content, :image, :tag_list)\nend\n\ndef owned_article\n  unless current_user == @article.user\n    flash[:alert] = \"That article does not belong to you!\"\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>end</p>\n\n<p><strong>articles show.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;div class=\"row text-white text-center\"&gt;\n    &lt;div class=\"col-md-10 col-lg-10 ml-sm-auto mr-sm-auto article-show-col\"&gt;\n        &lt;br&gt;\n        &lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;\n        &lt;p class=\"text-muted\"&gt;Posted on: &lt;%=       @article.created_at.strftime('%-b %-d, %Y') %&gt;&lt;/p&gt;\n\n        &lt;p&gt;\n          Tags:\n          &lt;% @article.tags.each do |tag| %&gt;\n            &lt;%= link_to tag.name, tag_path(tag) %&gt;\n          &lt;% end %&gt;\n        &lt;/p&gt;\n\n\n        &lt;!-- &lt;br&gt; --&gt;\n        &lt;div class=\"article-show-image\"&gt;\n            &lt;%= image_tag @article.image.url(:wide) %&gt;\n        &lt;/div&gt;\n        &lt;!-- &lt;br&gt; --&gt;\n        &lt;p&gt;&lt;%= @article.content.html_safe %&gt;&lt;/p&gt;\n\n        &lt;hr class=\"index-hr\"&gt;\n\n        &lt;h5&gt;Broadcast this article&lt;/h5&gt;\n\n        &lt;%= social_share_button_tag(\"Hey! Checkout this new article from TWM!\") %&gt;\n\n        &lt;hr class=\"index-hr\"&gt;\n\n        **&lt;h5&gt;Related Articles&lt;/h5&gt;\n        &lt;% @tag.articles.each do |article| %&gt;\n            &lt;li&gt;&lt;%= link_to article.title, article_path(article) %&gt;&lt;/li&gt;\n        &lt;% end %&gt;**\n\n        &lt;div class=\"btn-group\"&gt;\n            &lt;%= link_to \"Back\", articles_path, class: \"btn-custom btn-sm\" %&gt;\n            &lt;% if user_signed_in? %&gt;\n                &lt;% if @article.user_id == current_user.id %&gt;\n                    &lt;%= link_to \"Delete\", article_path(@article), method: :delete, data: { confirm: \"Are you sure you want to delete this article?\" }, class: \"btn-custom btn-sm\" %&gt;\n                    &lt;%= link_to \"Edit\", edit_article_path, class: \"btn-custom btn-sm\" %&gt;\n                &lt;% end %&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>tags controller</strong></p>\n\n<pre><code>class TagsController &lt; ApplicationController\nbefore_action :find_article, only: [:show, :edit, :update, :destroy]\n\ndef index\n    @tags = Tag.all.order(\"created_at desc\")\nend\n\ndef show\nend\n\ndef destroy\n    @tag.destroy\n    redirect_to tags_path\nend\n\nprivate\n\ndef find_article\n    @tag = Tag.find(params[:id])\nend\nend\n</code></pre>\n\n<p><strong>show view for tags</strong></p>\n\n<pre><code>&lt;div class=\"container text-white text-center\"&gt;\n\n&lt;h1&gt;Articles Tagged with &lt;%= @tag.name %&gt;&lt;/h1&gt;\n\n&lt;ul&gt;\n  &lt;% @tag.articles.each do |article| %&gt;\n    &lt;li&gt;&lt;%= link_to article.title, article_path(article) %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p></p>\n\n<p>Thank You!</p>\n"}, {"tags": ["ruby", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "is_accepted": true, "score": 1, "last_activity_date": 1507240664, "last_edit_date": 1507240664, "creation_date": 1507058881, "answer_id": 46551979, "question_id": 46551978, "link": "https://stackoverflow.com/questions/46551978/ruby-cucumber-pausing-the-suite-for-demos-and-debugging-with-the-ability-to-re/46551979#46551979", "title": "Ruby Cucumber: Pausing the Suite for demos and debugging, with the ability to resume", "body": "<p>The two functions here work on Windows, and so should work on most other operating systems.</p>\n\n<pre><code># Checks for a pause command in the command line and if it has been pressed, will pause\ndef paused?\n    if STDIN.ready?\n      last_input = STDIN.gets\n      while last_input == 'p'\n        sleep 1\n      end\n    end\nend\n\n# Pauses for debugging, will continue when enter is pressed\ndef pause\n  print 'p'\n  last_input = STDIN.gets\n  while last_input == 'p'\n    sleep 1\n  end\nend\n</code></pre>\n\n<p>The first, when placed once at the start of each step definition, gives the ability to pause straight after a step is completed by pressing 'p' in the terminal. </p>\n\n<p>Alternatively, creating an abstraction library may produce better results, as the <code>paused?</code> method can be used throughout this to pause at other points during execution than the beginning of a new step. This will resume when any standard key other than 'p' is pressed, but I would recommend a new line.</p>\n\n<p>The second, will simply pause the test until any key is pressed, at which point, execution can resume - ideal for debugging.</p>\n\n<p>Happy Pausing!</p>\n"}, {"comments": [{"owner": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "edited": false, "score": 0, "creation_date": 1507063751, "post_id": 46553075, "comment_id": 80060774, "body": "This is a great addition for those who want to pause after a step has finished, and I would definitely recommend using this method if pausing during step execution isn\u2019t necessary."}], "tags": [], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "is_accepted": false, "score": 1, "last_activity_date": 1507063287, "creation_date": 1507063287, "answer_id": 46553075, "question_id": 46551978, "link": "https://stackoverflow.com/questions/46551978/ruby-cucumber-pausing-the-suite-for-demos-and-debugging-with-the-ability-to-re/46553075#46553075", "title": "Ruby Cucumber: Pausing the Suite for demos and debugging, with the ability to resume", "body": "<p>You can try to use <a href=\"https://github.com/cucumber/cucumber/wiki/Hooks#tagged-hooks\" rel=\"nofollow noreferrer\">AfterStep hook</a></p>\n\n<pre><code>AfterStep('@pauseable') do\n  answer = 'n'\n  begin\n    Timeout.timeout 1 do # wait for a second for user to press 'p'\n      answer = STDIN.getch\n    end\n  rescue Timeout::Error  # answer is 'n' when no key is pressed during 1 second\n  end\n\n  STDIN.getch if answer == 'p' # wait until user presses any key\nend\n</code></pre>\n\n<p>Now you can tag your feature as <code>@pauseable</code>. Run it and press <code>p</code> to pause it. Then press any key to continue</p>\n"}], "owner": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 46551979, "answer_count": 2, "score": 0, "last_activity_date": 1507240664, "creation_date": 1507058881, "question_id": 46551978, "link": "https://stackoverflow.com/questions/46551978/ruby-cucumber-pausing-the-suite-for-demos-and-debugging-with-the-ability-to-re", "title": "Ruby Cucumber: Pausing the Suite for demos and debugging, with the ability to resume", "body": "<p>As a software tester, I want to be able to pause test execution with cucumber at any stage during test execution, in order to debug failing tests and show features to clients during demos in more detail.</p>\n\n<pre><code>Scenario: Pause suite mid demo, then resume\n Given I am in a meeting to show off a new feature our team has developed\n And a client asks us a question about the page we are currently on\n When I press the 'p' key in the terminal\n Then I should have enough time to answer the question in detail to the client\n And I should be able to resume test execution by pressing the 'enter' key in the terminal\n\nScenario: Pause suite at a known point for debugging\n Given there is a failed test\n When I add the \"pause\" method to the step definition\n Then the test should pause execution until pressing the 'enter' key in the terminal\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507060259, "creation_date": 1507060259, "answer_id": 46552322, "question_id": 46551937, "link": "https://stackoverflow.com/questions/46551937/cant-upload-images-rails-and-error-occur/46552322#46552322", "title": "cant upload images rails and error occur", "body": "<p>Your \"paintings\" is a collection, not a single image, so you need to either iterate on each of them or select the first one:</p>\n\n<pre><code>&lt;%= @gallery.paintings.first.name %&gt;\n&lt;%= @gallery.paintings.first.gallery_id %&gt;\n&lt;%= @gallery.paintings.first.image %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 6208701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab01ace1d321ff83dea1b2db8d81db4b?s=128&d=identicon&r=PG&f=1", "display_name": "Van", "link": "https://stackoverflow.com/users/6208701/van"}, "is_accepted": true, "score": 0, "last_activity_date": 1507146487, "creation_date": 1507146487, "answer_id": 46573021, "question_id": 46551937, "link": "https://stackoverflow.com/questions/46551937/cant-upload-images-rails-and-error-occur/46573021#46573021", "title": "cant upload images rails and error occur", "body": "<p>I found my error ! in user controller add :image to method painting_params</p>\n\n<pre><code>def painting_params\n    params.require(:painting).permit(:name,:gallery_id,:image)\n  end\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6208701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab01ace1d321ff83dea1b2db8d81db4b?s=128&d=identicon&r=PG&f=1", "display_name": "Van", "link": "https://stackoverflow.com/users/6208701/van"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 46573021, "answer_count": 2, "score": 0, "last_activity_date": 1507146487, "creation_date": 1507058722, "question_id": 46551937, "link": "https://stackoverflow.com/questions/46551937/cant-upload-images-rails-and-error-occur", "title": "cant upload images rails and error occur", "body": "<p>I want to upload an image to my localhost using gem 'carrierwave', i have painting and galleries controller  like below code</p>\n\n<p><strong>painting controller</strong></p>\n\n<pre><code>class PaintingsController &lt; ApplicationController\n  def index\n    @paintings=Painting.all\n  end\n  def new\n    @painting=Painting.new\n  end\n  def show\n    @painting=Painting.find(params[:id])\n  end\n  def create\n    #byebug\n    @painting=Painting.new(painting_params)\n    if @painting.save\n  flash[:success]=\"Created image in album\"\n  redirect_to gallery_path(@painting)\nelse\n  flash[:error]=\"Fail!\"\n  render 'new'\nend\n  end\n\n  private\n  def painting_params\n    params.require(:painting).permit(:name,:gallery_id)\n  end\nend\n</code></pre>\n\n<p><strong>Gallery controller</strong></p>\n\n<pre><code>class GalleriesController &lt; ApplicationController\n  def index\n@galleries=Gallery.all\n  end\n\n  def new\n@gallery=Gallery.new\n  end\n\n  def show\n@gallery=Gallery.find(params[:id])\n  end\n\n  def create\n@gallery=Gallery.create!(gallery_params)\nredirect_to galleries_path\n  end\n\n  private\n  def gallery_params\n      params.require(:gallery).permit(:name)\n    end\nend\n</code></pre>\n\n<p>ok then 2 model files :\n<strong>gallery.rb</strong></p>\n\n<pre><code>class Gallery &lt; ApplicationRecord\n  has_many :paintings\nend\n</code></pre>\n\n<p><strong>painting.rb</strong></p>\n\n<pre><code>class Painting &lt; ApplicationRecord\n  def access_params\n      params.require(:painting).permit(:gallery_id, :name, :image)\n    end\n\n belongs_to :gallery, optional: true\n mount_uploader :image, ImageUploader\nend\n</code></pre>\n\n<p>It seems everying goes well but then i stuck at the step showing image on show.html.erb in gallery.\n<strong>show.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"paintings\"&gt;\n  &lt;% @gallery.paintings.each do |painting| %&gt;\n    &lt;div class=\"painting\"&gt;\n      &lt;%= image_tag painting.image_url.to_s %&gt;\n      &lt;div class=\"name\"&gt;&lt;%= painting.name %&gt;&lt;/div&gt;\n      &lt;div class=\"actions\"&gt;\n        &lt;%= link_to \"edit\", edit_painting_path(painting) %&gt; |\n        &lt;%= link_to \"remove\", painting, :confirm =&gt; 'Are you sure?', :method =&gt; :delete %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n  &lt;div class=\"clear\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>the image isn't showed up althought flash in gallery 's controller reported that i created the image,i inspected the website then i tried print painting s'attributes on show.html.erb </p>\n\n<pre><code>&lt;%= @gallery.name %&gt;\n&lt;%= @gallery.paintings.name %&gt;\n&lt;%= @gallery.paintings.gallery_id%&gt;\n&lt;%= @gallery.paintings.image%&gt;\n</code></pre>\n\n<p>Only gallery's name and painting's name are printed out. other two methods has an error occur. </p>\n\n<pre><code>undefined method `gallery_id' for #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n</code></pre>\n\n<p>I don't know why  gallery can only access to painting's name but not others two.I searched for this error but i dont think those situation apply to mine . What is the problem guys?</p>\n"}, {"tags": ["ruby", "string", "function", "lambda"], "comments": [{"owner": {"reputation": 1768, "user_id": 7672985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6233938657e3693fca648b313da8557?s=128&d=identicon&r=PG", "display_name": "Gabriel Mesquita", "link": "https://stackoverflow.com/users/7672985/gabriel-mesquita"}, "edited": false, "score": 0, "creation_date": 1507058619, "post_id": 46551843, "comment_id": 80058234, "body": "have you tried to use to_s ?"}, {"owner": {"reputation": 348, "user_id": 2562771, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1040706145/picture?type=large", "display_name": "Jonathan Simon", "link": "https://stackoverflow.com/users/2562771/jonathan-simon"}, "reply_to_user": {"reputation": 1768, "user_id": 7672985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6233938657e3693fca648b313da8557?s=128&d=identicon&r=PG", "display_name": "Gabriel Mesquita", "link": "https://stackoverflow.com/users/7672985/gabriel-mesquita"}, "edited": false, "score": 0, "creation_date": 1507058774, "post_id": 46551843, "comment_id": 80058327, "body": "That&#39;s actually what I called, not <code>to_str</code> (that was a typo). Just edited the post to clarify"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1507058805, "post_id": 46551843, "comment_id": 80058342, "body": "Lambdas don&#39;t have names. Consider <code>a = -&gt; { }; b = a</code>, what would you expect the name of the lambda to be and why? And what do you mean by &quot;verify its identity&quot;?"}, {"owner": {"reputation": 348, "user_id": 2562771, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1040706145/picture?type=large", "display_name": "Jonathan Simon", "link": "https://stackoverflow.com/users/2562771/jonathan-simon"}, "edited": false, "score": 0, "creation_date": 1507059195, "post_id": 46551843, "comment_id": 80058534, "body": "&quot;verify its identity&quot; meaning establishes that it does the same thing as the <code>my_lambda</code> function, I don&#39;t care if they&#39;re represented in the same spot in memory. Above I&#39;ve given a toy version of what&#39;s actually going on. In reality the <code>function_verifier</code> performs different operations depending on what lambda functions are passed into it, where these operations are separate from the operation performed by the lambda functions themselves"}, {"owner": {"reputation": 348, "user_id": 2562771, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1040706145/picture?type=large", "display_name": "Jonathan Simon", "link": "https://stackoverflow.com/users/2562771/jonathan-simon"}, "edited": false, "score": 2, "creation_date": 1507059305, "post_id": 46551843, "comment_id": 80058573, "body": "But if lambda functions don&#39;t maintain any knowledge of their name, then I&#39;m probably better off just refactoring my code."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1507059534, "post_id": 46551843, "comment_id": 80058701, "body": "@jon_simon yes you are. They cannot &quot;maintain knowledge of their name&quot; because they don&#39;t have a name you have simply assigned one to a local variable. If you wanted to &quot;establish that [they do] the same thing&quot; you would have to call both of them with an equality check"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1507060362, "post_id": 46551843, "comment_id": 80059167, "body": "this concept of &#39;original variable name&#39; is not something we have available to us. Maybe store the lambdas in a hash, keyed by name? E.g. <code>lambas = {foo: -&gt;() {}}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1507067956, "last_edit_date": 1507067956, "creation_date": 1507064014, "answer_id": 46553249, "question_id": 46551843, "link": "https://stackoverflow.com/questions/46551843/get-name-of-lambda-function-as-string-in-ruby/46553249#46553249", "title": "Get name of lambda function as string in Ruby", "body": "<p>That won't work, because you are passing the <code>proc</code> to <code>function_verifer</code> and <code>proc</code> does not know the variable(s) whose value it is. You could do something like the following.</p>\n\n<pre><code>my_lambda = lambda { |x| 100 * x }\n  #=&gt; #&lt;Proc:0x000000008a1790@(irb):746 (lambda)&gt;\nMY_LAMBDA_OBJECT_ID = my_lambda.object_id\n  #=&gt; 4525000\n\ndef function_verifier(func)\n  func.object_id == MY_LAMBDA_OBJECT_ID ? \"ok\" : \"mismatch!\"\nend\n\nfunction_verifier(my_lambda)\n  #=&gt; \"ok\"\n\nyour_lambda = my_lambda\n  #=&gt; #&lt;Proc:0x000000008a1790@(irb):746 (lambda)&gt;\nyour_lambda.object_id\n  #=&gt; 4525000\nfunction_verifier(your_lambda)\n  #=&gt; \"ok\"\n\nmy_lambda = lambda { |x| 99 * x }\n  #=&gt; #&lt;Proc:0x000000009116d0@(irb):768 (lambda)&gt;\nmy_lambda.object_id\n  #=&gt; 4754280\nfunction_verifier(my_lambda)\n  #=&gt; \"mismatch!\"\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 2562771, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1040706145/picture?type=large", "display_name": "Jonathan Simon", "link": "https://stackoverflow.com/users/2562771/jonathan-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 46553249, "answer_count": 1, "score": 0, "last_activity_date": 1507069628, "creation_date": 1507058260, "last_edit_date": 1507069628, "question_id": 46551843, "link": "https://stackoverflow.com/questions/46551843/get-name-of-lambda-function-as-string-in-ruby", "title": "Get name of lambda function as string in Ruby", "body": "<p>I have a defined a lambda function as</p>\n\n<pre><code>my_lambda = lambda { |x| 100 * x }\n</code></pre>\n\n<p>I am passing this function as an input to another function which needs to verify its identify, something like:</p>\n\n<pre><code>def function_verifier(func)\n  if func.to_s == \"my_lambda\"\n    return \"ok\"\n  else\n    return \"mismatch!\"\n  end\nend\n</code></pre>\n\n<p>However when I pass <code>my_lambda</code> as input to this function, the command <code>func.to_s</code> returns <code>\"#&lt;Proc:0x0000a973516680@(pry):14 (lambda)&gt;\"</code> instead of <code>\"my_lambda\"</code>.</p>\n\n<p>How do I turn the function handle for <code>my_lambda</code> into the string <code>\"my_lambda\"</code>?</p>\n"}, {"tags": ["java", "ruby", "jruby"], "comments": [{"owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "edited": false, "score": 0, "creation_date": 1507128925, "post_id": 46551783, "comment_id": 80089706, "body": "The answer has been updated."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 2521203, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/36415de55a998fbc5ba4eda6d457e315?s=128&d=identicon&r=PG", "display_name": "trav.chung", "link": "https://stackoverflow.com/users/2521203/trav-chung"}, "edited": false, "score": 0, "creation_date": 1507122414, "post_id": 46553147, "comment_id": 80084857, "body": "Thanks for the feedback, but wouldn&#39;t this have to evaluate the entire script (load libraries every time) if I want to run a specific method. Does this container cache the scripts loaded libraries, so that I don&#39;t have to reload them every time i want to call a method from it? Also is there a benefit of having compileMode.OFF if i&#39;m calling the contents of the script many times?"}, {"owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "reply_to_user": {"reputation": 145, "user_id": 2521203, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/36415de55a998fbc5ba4eda6d457e315?s=128&d=identicon&r=PG", "display_name": "trav.chung", "link": "https://stackoverflow.com/users/2521203/trav-chung"}, "edited": false, "score": 0, "creation_date": 1507128602, "post_id": 46553147, "comment_id": 80089494, "body": "I think that &quot;compileMode&quot; would require some profiling. In my case I load it once on a server start so tuning for the startup time for doing TDD. I will update my answer soon."}], "tags": [], "owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "is_accepted": false, "score": 2, "last_activity_date": 1507128790, "last_edit_date": 1507128790, "creation_date": 1507063614, "answer_id": 46553147, "question_id": 46551783, "link": "https://stackoverflow.com/questions/46551783/calling-ruby-method-from-java/46553147#46553147", "title": "Calling Ruby method from Java", "body": "<p>This is how I use JRuby in a scripting container from java code:</p>\n\n<pre><code>import org.jruby.*;\nimport org.jruby.embed.LocalVariableBehavior;\nimport org.jruby.embed.PathType;\nimport org.jruby.embed.ScriptingContainer;\n\nScriptingContainer container = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);\ncontainer.setCompileMode(RubyInstanceConfig.CompileMode.OFF);\ncontainer.setNativeEnabled(false);\ncontainer.setObjectSpaceEnabled(true);\ncontainer.put(\"some_param\", someValue);\n\n// My script return an array - tweak to fit your returning value\nRubyArray resourceArray = (RubyArray) container.runScriptlet(PathType.CLASSPATH, scriptPath);\n</code></pre>\n\n<p>I have to note that JRuby is too slow on launch (these numbers is not too precise but in my case it is 2-3 sec. even on 4Ghz + SSD). TDD turns into pain with such delays. That's why there are some tweaks as object space, etc. </p>\n\n<p>Also, I had to stub out this module so the rest of test uses other fixtures and run without launching JRuby. Other words, I don't have to launch it while running another test separately.</p>\n\n<p>P.S.</p>\n\n<blockquote>\n  <p>Is my understanding correct in that this approach requires me to only load the script's dependencies once?</p>\n</blockquote>\n\n<p>I'm not sure what do you mean here, but it seems all the dependencies \"required\" on JRuby side will be loaded every time while using this approach.</p>\n\n<p>Anyway, I would make a benchmark before. Maybe it isn't worth to be thought about.</p>\n\n<p><strong>UPD:</strong></p>\n\n<p>This was more simple than I thought:</p>\n\n<p>common.rb:</p>\n\n<pre><code>puts \"common\"\n</code></pre>\n\n<p>script.rb:</p>\n\n<pre><code>require 'common'\n\nputs \"script\"\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>ScriptingContainer container = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);\nfor (int i = 0; i &lt; 3; i++) {\n    container.runScriptlet(PathType.CLASSPATH, \"script.rb\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>common\nscript\nscript\nscript\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 2521203, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/36415de55a998fbc5ba4eda6d457e315?s=128&d=identicon&r=PG", "display_name": "trav.chung", "link": "https://stackoverflow.com/users/2521203/trav-chung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1665, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1507210635, "creation_date": 1507057970, "last_edit_date": 1507210635, "question_id": 46551783, "link": "https://stackoverflow.com/questions/46551783/calling-ruby-method-from-java", "title": "Calling Ruby method from Java", "body": "<p>I have a Java application that depends on the result from a ruby script. The issue I'm facing is that this ruby script is called many times which requires loading the script's libraries every time it's executed.</p>\n\n<p>I'm not familiar with Ruby, but in my search I've come across JRuby. Since it interprets ruby code and runs it on the JVM, my initial thought was \"great, I can just compile the ruby script to .class files package it up and interact with it like regular java objects\". This would avoid the overhead that came with loading the libraries each time I executed the ruby script.</p>\n\n<p>After looking deeper into jruby, I'm understanding it doesn't work this way. So to do what I want I can use JRuby's JavaEmbedUtils to</p>\n\n<ol>\n<li>Load a Ruby runtime object with my ruby scripts</li>\n<li>Create a receiver object that essentially knows how to handle and respond to my script.</li>\n<li>Invoke the desired method from script.</li>\n</ol>\n\n<p>This is what I had in mind (I'll be testing soon)</p>\n\n<pre><code>// 1  \nList&lt;String&gt; paths = new ArrayList&lt;&gt;();  \npaths.add(\".\");  \nRuby runtime = JavaEmbedUtils.initialize(paths);\n\n// 2  \nString script = \"/path/to/script.rb\";  \nIRubyObject recvr = JavaEmbedUtils.newRuntimeAdapter().eval(runtime, script);\n\n// 3 Call this many times   \nJavaEmbedUtils.invokeMethod(runtime, receiver, \"method\", null, null);\n</code></pre>\n\n<p>Is my understanding correct in that this approach allows me to use the contents of the script many times while loading the script's libraries once? Is there an alternate or more JRuby way of doing what i'm looking for?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>So I tested something similar to what Eugene suggested (a) i.e. ScriptingContainer and compared that to calling the script using (b) java.lang.Runtime for a total of 30 runs. </p>\n\n<ol>\n<li>On average, (a) was about 8x faster (b)</li>\n<li>Initializing (a)'s runtime took about 7 seconds</li>\n<li>The initial run for both (a) &amp; (b) took 40x &amp; 150-250x longer than following runs.</li>\n<li>(a)'s initial run was 11x faster than (b)s</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "recaptcha"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 6482613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9335060194063153047bbcba4d7a289?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Shevchenko", "link": "https://stackoverflow.com/users/6482613/artem-shevchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1519486556, "creation_date": 1519486556, "answer_id": 48964509, "question_id": 46551692, "link": "https://stackoverflow.com/questions/46551692/recaptcharecaptcha-error-no-site-key-specified/48964509#48964509", "title": "Recaptcha::Recaptcha Error - No site key specified", "body": "<p>You need to configure recaptcha to pull the keys from your secrets.yml by adding an initializer file, config/initializers/recaptcha.rb:</p>\n\n<pre><code># config/initializers/recaptcha.rb\nRecaptcha.configure do |config|\n  config.site_key   = Rails.application.secrets[:RECAPTCHA_SITE_KEY]\n  config.secret_key = Rails.application.secrets[:RECAPTCHA_PRIVATE_KEY]\n  # Uncomment the following line if you are using a proxy server:\n  # config.proxy = 'http://myproxy.com.au:8080'\nend\n</code></pre>\n\n<p>End in secrets.yml RECAPTCHA_SITE_KEY and RECAPTCHA_PRIVATE_KEY make sure that it is written in capital letters</p>\n"}], "owner": {"reputation": 33, "user_id": 7421183, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1182101935231124/picture?type=large", "display_name": "Cosmin Baciu", "link": "https://stackoverflow.com/users/7421183/cosmin-baciu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1322, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519486556, "creation_date": 1507057620, "question_id": 46551692, "link": "https://stackoverflow.com/questions/46551692/recaptcharecaptcha-error-no-site-key-specified", "title": "Recaptcha::Recaptcha Error - No site key specified", "body": "<p>I am working on a MVC project in Ruby on Rails. I have the actual code and i have to understand it in next few days and then try to upgrade it. </p>\n\n<p>I have a home-page with a textbox which ask you the e-mail for resistration. The problem is that when i push the submit button it gives me </p>\n\n<blockquote>\n  <p>Recaptcha::Recaptcha Error  -   No site key specified</p>\n</blockquote>\n\n<p>I know that there are many posts about this problem but i don't manage to resolve it. </p>\n\n<p>Here is my .env file</p>\n\n<pre><code>RECAPTCHA_SITE_KEY=6Lc6BAAAAAAAAChqRbQZcn_yyyyyyyyyyyyyyyyy\nRECAPTCHA_SECRET_KEY=6Lc6BAAAAAAAAKN3DRm6VA_xxxxxxxxxxxxxxxxx\nOMNIAUTH_PROVIDER_KEY=false\nOMNIAUTH_PROVIDER_SECRET=false\nADMIN_NAME=false\nSECRET_KEY_BASE=false\nGA_PROVIDER_KEY=false\nTWILIO_SID=false\nTWILIO_TOKEN=false\nTWILIO_NUMBER=false\n</code></pre>\n\n<p>Please help me with this. </p>\n"}, {"tags": ["ruby", "encryption", "openssl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507055915, "post_id": 46551048, "comment_id": 80056911, "body": "Can the stuff you encrypt with Ruby be decoded with <code>openssl</code>?"}, {"owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507056232, "post_id": 46551048, "comment_id": 80057079, "body": "@tadman no, it returns <code>bad magic number</code> in the cli"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1507056854, "post_id": 46551048, "comment_id": 80057367, "body": "<a href=\"https://crypto.stackexchange.com/questions/20941/why-shouldnt-i-use-ecb-encryption\">Don&#39;t use ECB</a>."}, {"owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1507064067, "post_id": 46551048, "comment_id": 80060917, "body": "@anothermh I&#39;ve tried using CBC, but still get issues. I feel like I&#39;m fundamentally not understanding how openssl cli is working and ruby&#39;s openssl library. Ruby&#39;s openSSL library and instructions is not asking for a passphrase used to create the key in the examples I&#39;m looking at. If anyone can provide an example of encrypting via CLI and decrypting via Ruby that would be extremely helpful."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1507064468, "post_id": 46551048, "comment_id": 80061134, "body": "Also see this Google search: <a href=\"https://www.google.com/search?q=ruby+openssl+evp_bytestokey\" rel=\"nofollow noreferrer\">ruby openssl evp_bytestokey</a>. There are more hits in other languages, like Java and .Net. <a href=\"https://stackoverflow.com/q/17882919/608639\">How do I refactor OpenSSL pkcs5_keyivgen in ruby?</a> may be useful. If you can&#39;t find a <code>EVP_BytesToKey</code> already written in Ruby, you will have to roll it yourself. I would check GitHub because there&#39;s a good chance its already out there (you just have to find it)."}], "owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507068990, "creation_date": 1507055032, "question_id": 46551048, "link": "https://stackoverflow.com/questions/46551048/openssl-encrypt-with-cli-decrypt-with-ruby-not-working", "title": "openSSL encrypt with CLI, decrypt with ruby not working", "body": "<p>I'm using the openSSL CLI tool to encrypt data, and I want to decrypt that data on another machine in my ruby application. I'm unable to decrypt the data and I'm not sure what isn't lining up between the two. I'd really appreciate any help, below is what I'm running:</p>\n\n<p><strong>CLI Tool</strong>\n</p>\n\n<pre><code>$ export PASS=EncryptDecryptSuperSecretKeyNoOne123456789123456789\n$ echo 'someTextIWantToEncrypt' | openssl enc -aes-256-ecb -base64 -e -k $PASS\n:&gt; U2FsdGVkX18Gboawkim6n6Ps/yssGaOZkdb1e6I4VyOZDUcqEh2uYdT8jxUydplX\n</code></pre>\n\n<p><strong>Ruby Application</strong>\n</p>\n\n<pre><code>require 'openssl'\nrequire 'base64'\n\nmodule Aes\n\n  KEY = \"EncryptDecryptSuperSecretKeyNoOne123456789123456789\"\n  ALGORITHM = 'AES-256-ECB'\n\n  def self.decrypt(msg)\n    begin\n      cipher = OpenSSL::Cipher.new(ALGORITHM)\n      cipher.decrypt\n      cipher.key = KEY\n      tempkey = Base64.decode64(msg)\n      crypt = cipher.update(tempkey)\n      crypt &lt;&lt; cipher.final\n      return crypt\n    rescue Exception =&gt; exc\n      puts (\"Message for the decryption log file for message #{msg} = #{exc.message}\")\n    end\n  end\nend\n</code></pre>\n\n<p>When I call <code>Aes.decrypt(\"U2FsdGVkX18Gboawkim6n6Ps/yssGaOZkdb1e6I4VyOZDUcqEh2uYdT8jxUydplX\")</code> it raises an error <code>bad decrypt</code></p>\n\n<p>What am I missing or not including? ECB does not require an IV. Is there something else?</p>\n"}, {"tags": ["ruby", "aws-sdk", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 1, "creation_date": 1507057955, "post_id": 46550903, "comment_id": 80057940, "body": "Share the errors please"}, {"owner": {"reputation": 79, "user_id": 4902856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/10453994f79c937efcc5226f1795edf5?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/4902856/meenakshi"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507092959, "post_id": 46550903, "comment_id": 80068344, "body": "It says &quot;The image cannot be displayed because it contains errors.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 10420, "user_id": 299462, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1239668b80debd03fef129775ff3f065?s=128&d=identicon&r=PG", "display_name": "Kannaiyan", "link": "https://stackoverflow.com/users/299462/kannaiyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1507167946, "creation_date": 1507167946, "answer_id": 46576639, "question_id": 46550903, "link": "https://stackoverflow.com/questions/46550903/aws-sdk-ruby-upload-file-to-s3-with-client-side-encryption/46576639#46576639", "title": "aws-sdk ruby - upload file to s3 with client side encryption", "body": "<p>It looks like you are trying to view an encrypted file through a browser.</p>\n\n<p><a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html</a></p>\n\n<p>With client side encryption you need to decrypt after retrieving the object. A browser cannot do the decryption for you.</p>\n\n<p>If you want the object to be encrypted at rest in S3, you can use the server side S3.</p>\n\n<p>Also It will be encrypted during transit if you use SSL to browser, from there it will get decrypt and browser will show the image.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 79, "user_id": 4902856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/10453994f79c937efcc5226f1795edf5?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/4902856/meenakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507167946, "creation_date": 1507054463, "last_edit_date": 1507056053, "question_id": 46550903, "link": "https://stackoverflow.com/questions/46550903/aws-sdk-ruby-upload-file-to-s3-with-client-side-encryption", "title": "aws-sdk ruby - upload file to s3 with client side encryption", "body": "<p>I am trying to encrypt my files before sending to S3 (client side encryption). But the file is not being uploaded correctly. It opens with an error. Please guide what can be the issue.\nI am using aws-sdk version 3.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>s3 = Aws::S3::Encryption::Client.new(encryption_key: Rails.application.secrets.s3_client_key)\n\nbucket_name = \"my-bucket\"\n\nkey = \"my_records/record_1.jpg\"\nFile.open('file_path', 'rb') do |file|\n   s3.put_object(\n     bucket:bucket_name, \n     key:key, \n     body:file\n)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "comments": [{"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507054575, "post_id": 46550835, "comment_id": 80056210, "body": "Try changing in the strong params employee_contact to employee_contacs_attributes: []"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507054652, "post_id": 46550835, "comment_id": 80056251, "body": "Why are doing create and then save! in the create action?"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507054931, "post_id": 46550835, "comment_id": 80056394, "body": "I see that employee has one employee contact.. so you probably need to change the form to :employee_contact"}, {"owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507055057, "post_id": 46550835, "comment_id": 80056466, "body": "changing it to employee_contacts_attributes:[] still leaves me with  Unpermitted parameter: :employee_contacts.  As far as the save! I was trying to see if I could get more information out of the server response. I still get the same Unpermitted parameter :employee_contacts if I change it to if @employee.valid?"}, {"owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507055417, "post_id": 46550835, "comment_id": 80056664, "body": "@Anton If I change the form to  <code>&lt;%= form.fields_for :employee_contact do |builder| %&gt;</code> the form doesn&#39;t build in the form inputs for the Contact model.   If I go back into the Employee_Controller new method and change it to this     <code>def new     @employee = Employee.new     @employee.build_employee_contact   end</code>  I get: unknown attribute &#39;employee_id&#39; for EmployeeContact."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507057078, "post_id": 46550835, "comment_id": 80057473, "body": "Few questions :) 1. Why your employee_contact inheriting from employee and not ApplicationRecord? 2. Do you really have employee_contact.rb file? 3. Why trying to do Employee_Contact.all and not EmpoyeeContact.all?"}, {"owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507057592, "post_id": 46550835, "comment_id": 80057742, "body": "@Anton I changed the Employee_Contact model to inherit from ApplicationRecord so now Employee_Contact is now saving. Yes I have an employee_contact.rb file.   The Employee_Contact now properly maps with the Employee model. However, the employee_contact_id attribute on Employee model still shows -nil-.  I will update my original post"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507057886, "post_id": 46550835, "comment_id": 80057905, "body": "Now try to build the employee contact from the employee in the new action."}, {"owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507058190, "post_id": 46550835, "comment_id": 80058052, "body": "@Anton -- Updated my post. Listed what I am getting now. Only issue I am having is getting the Employee model to get a value for the Employee Contact Id attribute. Not sure if that even matters if an Employee only has 1 employee_contact"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507058346, "post_id": 46550835, "comment_id": 80058107, "body": "Can you do in the rails c: @employee =  Employee.new and @employee.employee_contact.build? What are getting?"}, {"owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507058538, "post_id": 46550835, "comment_id": 80058183, "body": "@Anton <code>NoMethodError: undefined method build&#39; for nil:NilClass \tfrom (irb):2</code> is what I get when using @employee.employee_contact.build The current build method that I posted in the Update works totally fine."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507058757, "post_id": 46550835, "comment_id": 80058316, "body": "Yeah.. my mistake.. its a has_one. @employee.build_employee_contact this is the correct one. What are you getting with this one?"}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1507060745, "creation_date": 1507060745, "answer_id": 46552455, "question_id": 46550835, "link": "https://stackoverflow.com/questions/46550835/rails-5-nested-model-form-not-saving-child-model-attributes/46552455#46552455", "title": "Rails 5 - Nested Model Form Not Saving Child Model Attributes", "body": "<p>Please set the EmployeeContact to inherit from ApplicationRecord, not Employee.<br>\nIn the new action build the employee contact for the nested form from the employee.<br>\nI would suggest to remove the foreign key from the has_one association.<br>\nThe employee_id on the employee_contact is enough.</p>\n"}], "owner": {"reputation": 49, "user_id": 7977278, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O5hLXJIf81Q/AAAAAAAAAAI/AAAAAAAAAY8/uJ5ERyvmq-s/photo.jpg?sz=128", "display_name": "Tim Freebern II", "link": "https://stackoverflow.com/users/7977278/tim-freebern-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507060745, "creation_date": 1507054155, "last_edit_date": 1507058946, "question_id": 46550835, "link": "https://stackoverflow.com/questions/46550835/rails-5-nested-model-form-not-saving-child-model-attributes", "title": "Rails 5 - Nested Model Form Not Saving Child Model Attributes", "body": "<p>I've been at this problem for a couple weeks now on and off. </p>\n\n<p>Currently I have a User model, Employee model and an Employee_Contact model. The User model was generated using Devise. After the User is logged in they can go to their User Dashboard and create an Employee using a nested form. I am having an issue where the child model Employee_Contact is not saving into the database.</p>\n\n<p>Schema:</p>\n\n<pre><code>  create_table \"employee_contacts\", force: :cascade do |t|\n    t.string \"street\"\n    t.string \"city\"\n    t.string \"state\"\n    t.string \"zip\"\n    t.string \"phone_num\"\n    t.string \"alt_phone_num\"\n    t.string \"email\"\n    t.string \"emergency_contact_first_name\"\n    t.string \"emergency_contact_last_name\"\n    t.string \"emergency_contact_num\"\n    t.integer \"user_id\"\n    t.integer \"employee_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"employee_id\"], name: \"index_employee_contacts_on_employee_id\"\n    t.index [\"user_id\"], name: \"index_employee_contacts_on_user_id\"\n  end\n\n  create_table \"employees\", force: :cascade do |t|\n    t.string \"first_name\"\n    t.string \"middle\"\n    t.string \"last_name\"\n    t.string \"sex\"\n    t.string \"race\"\n    t.date \"birthdate\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"employee_contact_id\"\n    t.index [\"user_id\"], name: \"index_employees_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.inet \"current_sign_in_ip\"\n    t.inet \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \n    \"index_users_on_reset_password_token\", unique: true\n    end\n  end\n</code></pre>\n\n<p>These are my models:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :employees, :dependent =&gt; :destroy\nend\n\nclass Employee &lt; ApplicationRecord\n  belongs_to :user\n  has_one :employee_contact, inverse_of: :employee, autosave: true\n\n  accepts_nested_attributes_for :employee_contact, allow_destroy: true\nend\n\nclass EmployeeContact &lt; Employee\n  belongs_to :employee, inverse_of: :employee_contact\nend\n</code></pre>\n\n<p>My Employee Controller:</p>\n\n<pre><code>class EmployeesController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    @employees = Employee.all\n  end\n\n  def new\n    @employee = Employee.new\n  end\n\n  def create\n    @employee = current_user.employees.create(employee_params)\n\n    if @employee.save!\n      redirect_to root_path\n    else\n      render :new, status: :unprocessable_entity\n    end\n end\n\n private\n\n def employee_params\n   params.require(:employee).permit(:first_name, :middle, :last_name, \n   :sex, :race, :birthdate, employee_contact: [:id, :street, :city, \n   :state, :zip, :phone_num, :email, :alt_phone_num, \n   :emergency_contact_first_name, :emergency_contact_last_name, \n   :emergency_contact_num])\n   end\n end\n</code></pre>\n\n<p>My View Form:</p>\n\n<pre><code>      &lt;%= form_with(model: @employee, local: true) do |form| %&gt;\n      &lt;h3&gt;Employee Profile Information&lt;/h3&gt;\n\n      &lt;%= form.label :first_name %&gt;&lt;br /&gt;\n      &lt;%= form.text_field :first_name %&gt;&lt;br /&gt;\n\n      &lt;%= form.label :middle %&gt;&lt;br /&gt;\n      &lt;%= form.text_field :middle %&gt;&lt;br /&gt;\n\n      &lt;%= form.label :last_name %&gt;&lt;br /&gt;\n      &lt;%= form.text_field :last_name %&gt;&lt;br /&gt;\n\n      &lt;%= form.label :sex %&gt;&lt;br /&gt;\n      &lt;%= form.text_field :sex %&gt;&lt;br /&gt;\n\n      &lt;%= form.label :race %&gt;&lt;br /&gt;\n      &lt;%= form.text_field :race %&gt;&lt;br /&gt;\n\n      &lt;%= form.label :birthdate %&gt;&lt;br /&gt;\n      &lt;%= form.date_field :birthdate %&gt;&lt;br /&gt;\n\n      &lt;h3&gt;Employee Contact Information&lt;/h3&gt;&lt;br /&gt;\n\n      &lt;%= form.fields_for :employee_contacts do |builder| %&gt;\n        &lt;%= builder.label :street %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :street %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :city %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :city %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :street %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :street %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :state %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :state %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :zip %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :zip %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :phone_num %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :phone_num %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :alt_phone_num %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :alt_phone_num %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :email %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :email %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :emergency_contact_first_name %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :emergency_contact_first_name %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :emergency_contact_last_name %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :emergency_contact_last_name %&gt;&lt;br /&gt;\n\n        &lt;%= builder.label :emergency_contact_num %&gt;&lt;br /&gt;\n        &lt;%= builder.text_area :emergency_contact_num %&gt;&lt;br /&gt;\n      &lt;% end %&gt;\n      &lt;%= form.submit \"Add\", class: 'btn btn-primary' %&gt;&lt;br /&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>When I get submit the form to create a new employee this is what I get in my console parameters:</p>\n\n<p>Processing by EmployeesController#create as HTML\nParameters:{\"utf8\"=>\"\u2713\",\"authenticity_token\"=>\"IgYzybxM8+M8jZ8NJgYKZ+Zhqr07kcV1e0QyWf> uY8hQLyBY844jfOlLNl65F/2RRr4TTW0F1MeSmDzVzBsXOjg==\", \"employee\"=>\n{\"first_name\"=>\"Firt Nam\", \"middle\"=>\"kk\", \"last_name\"=>\"jak\", \"sex\"=>\"dfkj\", \"race\"=>\"jkadflj\", \"birthdate\"=>\"2011-01-01\", \"employee_contacts\"=>{\"street\"=>\"afdjkljadfkl\", \"city\"=>\"jadklfjakldfj\", \"state\"=>\"fadjlkdf\", \"zip\"=>\"32787\", \"phone_num\"=>\"567567567\", \"alt_phone_num\"=>\"57875875875\", \"email\"=>\"dajkjdlkfj@jkj.com\", \"emergency_contact_first_name\"=>\"adfjkladjf\", \"emergency_contact_last_name\"=>\"adfjkaldf\", \"emergency_contact_num\"=>\"784339793\"}}, \"commit\"=>\"Add\"}</p>\n\n<pre><code>Unpermitted parameter: :employee_contacts\n</code></pre>\n\n<p>And so it saves the Employee but not anything associated with their contact information. If I run Employee.last in the Rails console I get a nil value for employee_contact_id. If I try and use the Rails Console to look up Employee_Contact.last or Employee_Contact.all I get an 'unable to autoload constant Employee_Contact, expected employee_contact.rb to define it'.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I changed a few things thanks to Anton.</p>\n\n<p>My Employee Contact model now inherits from ApplicationRecord:</p>\n\n<pre><code>class EmployeeContact &lt; ApplicationRecord\n  belongs_to :employee, inverse_of: :employee_contact\nend\n</code></pre>\n\n<p>I changed the view form in the employee_contact loop from plural to singular:</p>\n\n<pre><code>&lt;%= form.fields_for :employee_contact do |builder| %&gt;\n</code></pre>\n\n<p>I added a build method in Employee#New</p>\n\n<pre><code>def new\n  @employee = Employee.new\n  @employee.build_employee_contact\nend\n</code></pre>\n\n<p>And edited Employee#Create</p>\n\n<pre><code>def create\n  @employee = current_user.employees.create(employee_params)\n\n  if @employee.valid?\n  redirect_to root_path\n    else\n  render :new, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>This is now saving an Employee Contact. Here are the results from the console:</p>\n\n<pre><code>#&lt;EmployeeContact id: 1, street: \"dafjkafdjl\", city: \"adjfklajdk\", state: \"dfjkljalkdfjioad\", zip: \"dafjadlkfjkajdkl\", phone_num: \"adf\", alt_phone_num: \"871274892174\", email: \"dafnajdklj@jkklda.com\", emergency_contact_first_name: \"ajdfjalkj\", emergency_contact_last_name: \"fjadkljdfkl\", emergency_contact_num: \"11287244\", user_id: nil, employee_id: 1, created_at: \"2017-10-03 19:01:55\", updated_at: \"2017-10-03 19:01:55\"&gt;\n\nEmployee id: 1, first_name: \"dafad\", middle: \"dfad\", last_name: \"dafd\", sex: \"adfd\", race: \"dfad\", birthdate: \"1210-01-01\", user_id: 1, created_at: \"2017-10-03 19:01:55\", updated_at: \"2017-10-03 19:01:55\", employee_contact_id: nil&gt;\n</code></pre>\n\n<p>The Employee model is still getting an Employee_Contact_Id: nil value. However, the Employee Contact model is getting the correct Employee_Id attribute. </p>\n\n<p><strong>SOLVED</strong></p>\n\n<p>So I'm going to leave it at with what I have posted in the Update. There is no need for my Employee model to have an Employee_Contact_Id attribute. When I create a new Employee the Contact correctly maps to that Employee currently.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1507054382, "post_id": 46550302, "comment_id": 80056126, "body": "try like this never used unsplush personally <code>&lt;img src=&quot;&lt;%= show_photo.urls[&#39;full&#39;]%&gt;&quot;&gt;</code>"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1507057686, "post_id": 46550302, "comment_id": 80057796, "body": "or <code>&lt;img src=&quot;&lt;%= show_photo[&#39;urls&#39;][&#39;full&#39;]%&gt;&quot;&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1507098284, "last_edit_date": 1507098284, "creation_date": 1507054708, "answer_id": 46550963, "question_id": 46550302, "link": "https://stackoverflow.com/questions/46550302/rendering-an-image-from-the-unsplash-api-in-rails/46550963#46550963", "title": "Rendering an image from the Unsplash API in Rails", "body": "<p>You can access to the urls key within the OpenStruct attributes in the Photo object that includes the <code>raw</code>, <code>full</code>, <code>regular</code>, <code>small</code> and <code>thumb</code> sizes, also as keys.</p>\n\n<p>So, just to test you could use the <code>raw</code> one, like:</p>\n\n<pre><code>&lt;%= image_tag Unsplash::Photo.find('tAKXap853rY')[:urls][:raw] %&gt;\n</code></pre>\n\n<p>Or I think you could modify your method to accept one parameter which is the size key of the image, like:</p>\n\n<pre><code>module ApplicationHelper\n  def show_photo(size)\n    Unsplash::Photo.find(\"tAKXap853rY\")[:urls][size.to_sym]\n  end\nend\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>&lt;%= show_photo('raw') %&gt; # 'full', 'regular', etc ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 7283800, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10157837963530655/picture?type=large", "display_name": "Rodolphe Geant", "link": "https://stackoverflow.com/users/7283800/rodolphe-geant"}, "is_accepted": false, "score": 0, "last_activity_date": 1508340740, "creation_date": 1508340740, "answer_id": 46813959, "question_id": 46550302, "link": "https://stackoverflow.com/questions/46550302/rendering-an-image-from-the-unsplash-api-in-rails/46813959#46813959", "title": "Rendering an image from the Unsplash API in Rails", "body": "<p>further to this solution I am trying to display the photographer's name by using the user.name method.\nIn the console I can get the following :</p>\n\n<pre><code>photo = Unsplash::Photo.find(\"tAKXap853rY\")\nphoto.user.name \n</code></pre>\n\n<p>will return\n => \"Alejandro Escamilla\".</p>\n\n<p>But in RAILS :    </p>\n\n<pre><code>def show_photo(size)\n @photo =Unsplash::Photo.find(\"tAKXap853rY\")[:urls][size.to_sym]\nend\n</code></pre>\n\n<p>just trying to display the name in my view like:</p>\n\n<pre><code> &lt;%= @photo.user.name %&gt; will return \"user undefined method\".\n</code></pre>\n\n<p>The .user.name is accessible in the console but not in rails! What have I missed? Thanks</p>\n"}], "owner": {"reputation": 69, "user_id": 7283800, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10157837963530655/picture?type=large", "display_name": "Rodolphe Geant", "link": "https://stackoverflow.com/users/7283800/rodolphe-geant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 46550963, "answer_count": 2, "score": 0, "last_activity_date": 1508340740, "creation_date": 1507052010, "last_edit_date": 1507060795, "question_id": 46550302, "link": "https://stackoverflow.com/questions/46550302/rendering-an-image-from-the-unsplash-api-in-rails", "title": "Rendering an image from the Unsplash API in Rails", "body": "<p>I have extensively researched this matter both on Stack Overflow and Google but found nothing conclusive. Since I'm completely new to the concept of API usage within Rails I have to ask for some advice.</p>\n\n<p>I have followed the procedure from <a href=\"https://github.com/unsplash/unsplash_rb\" rel=\"nofollow noreferrer\">the github page</a></p>\n\n<p>I have included the Unsplash helper in application_helper.rb as follows</p>\n\n<pre><code>def show_photo\n Unsplash::Photo.find(\"tAKXap853rY\")\nend\n</code></pre>\n\n<p>and simply added</p>\n\n<pre><code>&lt;%= image_tag show_photo %&gt;\n</code></pre>\n\n<p>in my view.</p>\n\n<p>This returns an object (So connectivity is good)</p>\n\n<pre><code>&lt;img src=\"/images/#&amp;lt;Unsplash::Photo:0x007fc4b2f953c0&amp;gt;\" alt=\"#\n&lt;unsplash::photo:0x007fc4b2f953c0&gt;\"&gt;\n</code></pre>\n\n<p>I'm aware that Rails is looking for a picture in the assets/images folder </p>\n\n<p>How do I parse the inbound JSON and render it in my Rails view?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507052937, "post_id": 46550015, "comment_id": 80055381, "body": "A) It&#39;s &quot;Ruby&quot;, not an acronym. B) Just use <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</code> when defining arrays. There&#39;s absolutely no need for <code>Array[...]</code> or <code>Array.new</code> here. C) You also need to focus on indenting things correctly so the structure of your program is more apparent, it really helps us understand your intent better."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507053051, "post_id": 46550015, "comment_id": 80055434, "body": "There&#39;s also <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/open-uri/rdoc/OpenURI.html\" rel=\"nofollow noreferrer\">OpenURI</a> as part of the standard library which makes simple GET requests really easy: <code>open(&#39;http:&#47;&#47;...&#39;).read</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1507057700, "creation_date": 1507057700, "answer_id": 46551716, "question_id": 46550015, "link": "https://stackoverflow.com/questions/46550015/how-do-i-find-and-match-unique-letters-in-a-string-in-ruby/46551716#46551716", "title": "How do I find and match unique letters in a string in Ruby?", "body": "<p>I would write it like this:</p>\n\n<pre><code>@guesses = [\"b\", \"a\", \"n\"]\n@word = \"banana\"\n\n#All guesses in @word?:\np @guesses.all?{|char| @word.include?(char)} #=&gt; true\n# All characters in @word are in @guesses:\np @word.chars.uniq.all?{|char| @guesses.include?(char)} #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7578876, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/69420278a22379e75288fbb05a3f664a?s=128&d=identicon&r=PG", "display_name": "asilvester635", "link": "https://stackoverflow.com/users/7578876/asilvester635"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507057700, "creation_date": 1507050926, "last_edit_date": 1507052952, "question_id": 46550015, "link": "https://stackoverflow.com/questions/46550015/how-do-i-find-and-match-unique-letters-in-a-string-in-ruby", "title": "How do I find and match unique letters in a string in Ruby?", "body": "<p>I\u2019m building a hang-person app game. Here, the user guesses \u201cb\u201d, \u201ca\u201d, and \u201cn\u201d, which would result in a win. The <code>@word</code> instance variable will be provided with a random word, in this example, it\u2019s \u201cbanana\u201d. </p>\n\n<pre><code>@guesses = Array[\"b\", \"a\", \"n\"]\n@word = \"banana\"\n</code></pre>\n\n<p>Here I only allow unique letters inside @guesses </p>\n\n<p>How do I know if all the unique letters in @word are inside @guesses?</p>\n\n<p>Are there any methods pre-made methods for this?</p>\n\n<p>Below is my code. I check for a win in my last method, def check_win_or_lose</p>\n\n<pre><code>class HangpersonGame\n\n# add the necessary class methods, attributes, etc. here\n# to make the tests in spec/hangperson_game_spec.rb pass.\n\n# Get a word from remote \"random word\" service\n\n# def initialize()\n# end\nattr_accessor :word, :guesses, :wrong_guesses\ndef initialize(word)\n   @word = word\n   @guesses = '';\n   @wrong_guesses = '';\nend\n\n\ndef guess(letter)\n  # throws an error when letter is empty, not a letter, or nil\n  if letter.nil? || letter.empty? || !(letter =~ /[[:alpha:]]/)\n    raise ArgumentError\n  end\n\n  # make case insensitive\n  letter.downcase!\n\n  # check that the \"letter\" is not empty or null\n  # also check if the letter is already in the guesses and wrong_guesses \n  # instance variable, if so then this is not a valid guess, \n  # return false, if not false then determine if it's a correct or wrong guess.\n  if (@guesses.include?(letter)) || (@wrong_guesses.include?(letter))\n    false\n  else \n    if @word.include?(letter)\n        @guesses &lt;&lt; letter\n    else \n        @wrong_guesses &lt;&lt; letter\n    end\n  end\nend #end of guess method\n\n\ndef word_with_guesses\n  # if @guesses is emtpy, then display '------'\n  # searched on google another way to repeatedly display strings \n  # because using while loop or any other loop gives an error.\n  if guesses.empty?\n    \"-\"*@word.size\n  else\n    # if @guesses isn't empty, then display to the user all the \n    # correctly guessed letters inside @guesses using .gsub\n    @word.gsub(/[^#{@guesses}]/, \"-\")\n  end\nend # end of word_with_guesses method\n\n\ndef check_win_or_lose\n  # check if it's a lose by checking if there are 7 letters in @wrong_guesses\n  if @wrong_guesses.length == 7\n    :lose\n  # check if it's a win\n  elsif ????????\n    :win\n  # else continue playing: no win or lose\n  else \n    :play\n  end\nend\n\n\n# You can test it by running $ bundle exec irb -I. -r app.rb\n# And then in the irb: irb(main):001:0&gt; HangpersonGame.get_random_word\n#  =&gt; \"cooking\"   &lt;-- some random word\ndef self.get_random_word\n  require 'uri'\n  require 'net/http'\n  uri = URI('http://watchout4snakes.com/wo4snakes/Random/RandomWord')\n  Net::HTTP.new('watchout4snakes.com').start { |http|\n  return http.post(uri, \"\").body\n  }\nend\n\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twitter-bootstrap", "bootstrap-modal"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7190190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049333af6640e8a8b52298d1691884c8?s=128&d=identicon&r=PG", "display_name": "Kwaku Boateng", "link": "https://stackoverflow.com/users/7190190/kwaku-boateng"}, "is_accepted": false, "score": 0, "last_activity_date": 1507053338, "creation_date": 1507053338, "answer_id": 46550609, "question_id": 46549964, "link": "https://stackoverflow.com/questions/46549964/rails-bootstrap-modal-trigger-code-on-modal-open/46550609#46550609", "title": "Rails, Bootstrap Modal, trigger code on modal open", "body": "<p>Listen for the on show event of the modal, like </p>\n\n<p><code>$('##picModal-&lt;%= index %&gt;').on('shown.bs.modal', function (e) {\n  \"&lt;% comment.mark_as_read! for: current_user %&gt;\";\n  //do something else!\n})</code></p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 4072856, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/3nhQo.jpg?s=128&g=1", "display_name": "gitastic", "link": "https://stackoverflow.com/users/4072856/gitastic"}, "edited": false, "score": 0, "creation_date": 1507053591, "post_id": 46550621, "comment_id": 80055699, "body": "I have read the docs... I&#39;m just not sure where the error is... with my code in my original post, the  &quot;&lt;% comment.mark_as_read! for: current_user %&gt;&quot;; fires even if the modal is not open... that&#39;s what I&#39;m trying to figure out."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 366, "user_id": 4072856, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/3nhQo.jpg?s=128&g=1", "display_name": "gitastic", "link": "https://stackoverflow.com/users/4072856/gitastic"}, "edited": false, "score": 0, "creation_date": 1507053794, "post_id": 46550621, "comment_id": 80055803, "body": "I guess this is done went the entire page is rendered. I would suggest to create an endpoint for ajax update and do it from the event block via ajax."}], "tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1507057703, "last_edit_date": 1507057703, "creation_date": 1507053404, "answer_id": 46550621, "question_id": 46549964, "link": "https://stackoverflow.com/questions/46549964/rails-bootstrap-modal-trigger-code-on-modal-open/46550621#46550621", "title": "Rails, Bootstrap Modal, trigger code on modal open", "body": "<p>Lets say you have a CommentsController.<br>\nIn the update action set the comment.mark_as_read!</p>\n\n<pre><code>$('#picModal').on('shown.bs.modal', function(e){\n      // Set ajax patch to the 'comments#update' with the comment id\n    })\n</code></pre>\n\n<p>This event fires went the modal shown</p>\n"}], "owner": {"reputation": 366, "user_id": 4072856, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/3nhQo.jpg?s=128&g=1", "display_name": "gitastic", "link": "https://stackoverflow.com/users/4072856/gitastic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507057703, "creation_date": 1507050654, "question_id": 46549964, "link": "https://stackoverflow.com/questions/46549964/rails-bootstrap-modal-trigger-code-on-modal-open", "title": "Rails, Bootstrap Modal, trigger code on modal open", "body": "<p>I'm using the Readable Gem, and have comments in a modal. I want to mark a comment as read only when the user opens up the Bootstrap modal. Can someone point me in the right direction to trigger the comment as read ONLY when the user opens up the modal? Currently, it marks the comment as read before the modal is even open because I believe it is running the code without user opening the modal.</p>\n\n<pre><code>&lt;script&gt;\n  $(('#picModal-&lt;%= index %&gt;').hasClass('show'), function(){\n    \"&lt;% comment.mark_as_read! for: current_user %&gt;\";\n  });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "activerecord"], "comments": [{"owner": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1507049328, "post_id": 46549519, "comment_id": 80053402, "body": "Implement a join, and a where clause and then group by and count. All can be done in Active record. Also which DB are you using?"}, {"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "reply_to_user": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1507050122, "post_id": 46549519, "comment_id": 80053843, "body": "@user1735921 I&#39;ve never used this technique before. I use default SQLite."}, {"owner": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1507050710, "post_id": 46549519, "comment_id": 80054130, "body": "<code>@hotels = Hotel.select(&#39;count(*) as free_rooms&#39;).joins(:rooms).group(&#39;rooms.id&#39;).order(&#39;free_roo&zwnj;&#8203;ms DESC&#39;)</code> and then access the rooms by hotel.free_rooms"}, {"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "reply_to_user": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1507051931, "post_id": 46549519, "comment_id": 80054831, "body": "@user1735921 I believe I do something wrong. Can you give a little bit wider answer, thanks. The best way is not just solve the issue but understand solving as well."}, {"owner": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1507061404, "post_id": 46549519, "comment_id": 80059644, "body": "sorry I don&#39;t know much, can&#39;t help you more than this. i am trying my best."}], "answers": [{"comments": [{"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "edited": false, "score": 0, "creation_date": 1507198849, "post_id": 46561739, "comment_id": 80119313, "body": "Your code only re factor mine. It is still undefined method `free_rooms&#39; for #&lt;Hotel::ActiveRecord_Relation:0x00007f2809db69c8&gt; when I try to sort them through controller. And this is correct behavior because I cant get straight access to free_rooms. I have access only to ActiveRecord_AssociationRelation. Unfortunately  I can&#39;t properly sort ActiveRecord_AssociationRelation. Thats the issue."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "edited": false, "score": 0, "creation_date": 1507622124, "post_id": 46561739, "comment_id": 80271197, "body": "@KirillZhuravlov did this update answer to your original question?"}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 1, "last_activity_date": 1507200114, "last_edit_date": 1507200114, "creation_date": 1507110220, "answer_id": 46561739, "question_id": 46549519, "link": "https://stackoverflow.com/questions/46549519/sort-order-for-activerecordassociationscollectionproxy-in-table-rails/46561739#46561739", "title": "Sort order for ActiveRecord::Associations::CollectionProxy in table rails", "body": "<p>I would add a class method on the <code>Room</code> model in order to return for a given collection the number of free rooms and reserved rooms:</p>\n\n<pre><code>class Room &lt; ApplicationRecord\n  belongs_to :hotel, optional: true\n  accepts_nested_attributes_for :hotel\n\n  def self.reserved_count\n    where(reserved: true).count\n  end\n\n  def self.free_count\n    where(reserved: false).count\n  end\nend\n</code></pre>\n\n<p>Once you have implemented, you can call it from the relationship declared in <code>Hotel</code> model:</p>\n\n<pre><code>class Hotel &lt; ApplicationRecord\n  has_many :rooms, dependent: :destroy\n  accepts_nested_attributes_for :rooms\n\n  def reserved_rooms\n    rooms.reserved_count\n  end\n\n  def free_rooms\n    rooms.free_count\n  end\nend\n</code></pre>\n\n<p>Your view will look finally like this:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Rooms count&lt;/th&gt;\n    &lt;th&gt;Rooms status: in reserved || free&lt;/th&gt;    \n  &lt;/tr&gt;\n\n  &lt;% @hotels.each do |hotel| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= hotel.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= hotel.rooms_count %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= \"#{hotel.reserved_rooms} || #{hotel.free_rooms}\" %&gt;&lt;/td&gt;      \n      &lt;td &gt;&lt;%= link_to 'Show', hotel_path(hotel) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Destroy', hotel, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<h3>Sorting the Hotels in your controller</h3>\n\n<p>In your controller make sure that you <a href=\"https://code.tutsplus.com/articles/improving-the-performance-of-your-rails-app-with-eager-loading--cms-25018\" rel=\"nofollow noreferrer\">eager load</a> <code>Rooms</code> for <code>Hotel</code>:</p>\n\n<pre><code>@hotels = Hotel.includes(:rooms).sort_by { |h| h.free_rooms.to_i }.reverse\n</code></pre>\n\n<p>You could eventually implement it as <code>Hotel.includes(:rooms).sort_by(&amp;:free_rooms).reverse</code>.</p>\n\n<p>In this way you won't need any join or helper.</p>\n\n<p>Regarding your comment, <code>free_rooms</code> is implemented as an instance method (e.g. <code>Hotel.first.free_rooms</code>), so it will not be available for an <code>ActiveRecord_Relation</code> (e.g. <code>Hotel.all.free_rooms</code>)</p>\n"}], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1511, "favorite_count": 0, "accepted_answer_id": 46561739, "answer_count": 1, "score": 0, "last_activity_date": 1507200114, "creation_date": 1507048962, "last_edit_date": 1507052205, "question_id": 46549519, "link": "https://stackoverflow.com/questions/46549519/sort-order-for-activerecordassociationscollectionproxy-in-table-rails", "title": "Sort order for ActiveRecord::Associations::CollectionProxy in table rails", "body": "<p>I want to set up sort order for active record collection proxy in table.\nIt should be sorted by number of available rooms (from highest to lowest).\nThe trick is that <code>@rooms.reserved</code> is a boolean and to calculate quantity of free/reserved rooms I have to use helper method to avoid record collection proxy errors. I get proper results, but I need to sort table by number of available rooms. </p>\n\n<p>I have two models: Room and Hotel.</p>\n\n<pre><code>class Room &lt; ApplicationRecord\n  belongs_to :hotel, optional: true # avoiding rails 5.2 belongs_to error \n  accepts_nested_attributes_for :hotel\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Hotel &lt; ApplicationRecord\n  has_many :rooms, dependent: :destroy\n  accepts_nested_attributes_for :rooms\nend\n</code></pre>\n\n<p>I have table:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Rooms count&lt;/th&gt;\n    &lt;th&gt;Rooms status: in reserve || free&lt;/th&gt;    \n  &lt;/tr&gt;\n\n  &lt;% @hotels.each do |hotel| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= hotel.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= hotel.rooms_count %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= rooms_reservation_status(hotel.rooms) %&gt;&lt;/td&gt;  &lt;!-- rooms_reservation_status helper method in application_helper.rb --&gt;      \n      &lt;td &gt;&lt;%= link_to 'Show', hotel_path(hotel) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Destroy', hotel, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Helper method</p>\n\n<pre><code># rooms_reservation_status iterates throught ActiveRecord::Associations::CollectionProxy \n# and calculates the sum of free rooms aswell as a sum of reserved rooms\n  def rooms_reservation_status(rooms)\n    reserved = 0\n    free     = 0\n    rooms.each do |r|\n      r.reserved == true ? reserved+=1 : free+=1\n    end\n    \"#{reserved} || #{free}\"\n  end\n</code></pre>\n\n<p>Active Record table for rooms:</p>\n\n<pre><code>class CreateRooms &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :rooms do |t|\n      t.boolean :reserved, :default =&gt; false\n      t.belongs_to :hotel, index: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "redmine", "centos6"], "comments": [{"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "edited": false, "score": 0, "creation_date": 1509188079, "post_id": 46548595, "comment_id": 80924283, "body": "You should first type which ruby to figure out if you are using system&#39;s ruby or RVM&#39;s installed one. Then after that, perform re-installation via rvm, or installation and setup."}], "owner": {"reputation": 11, "user_id": 8715023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xA90Z9ZpCw4/AAAAAAAAAAI/AAAAAAAAARE/huVl2Tpb8DI/photo.jpg?sz=128", "display_name": "anditfeels", "link": "https://stackoverflow.com/users/8715023/anditfeels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507045646, "creation_date": 1507045646, "question_id": 46548595, "link": "https://stackoverflow.com/questions/46548595/internalgem-prelude-cant-start-the-redmine-update", "title": "internal:gem_prelude can&#39;t start the redmine update", "body": "<p>When I do: </p>\n\n<pre><code>RAILS_ENV=production rake db:migrate\n</code></pre>\n\n<p>or: </p>\n\n<pre><code>rails\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>gem\n</code></pre>\n\n<p>The answer is:</p>\n\n<pre><code>&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\nfrom &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n</code></pre>\n\n<p>I don't know what to do, I did as most of topics says about completely deletion of ruby and a new installation, it didn't help.\nCentOS 6 is installed and I'm trying to launch an update of redmine.</p>\n\n<p>There is a tip about rvm command, but it didn't work at all, of any kind.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507046598, "post_id": 46548317, "comment_id": 80051897, "body": "See, told ya :)"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507045845, "post_id": 46548510, "comment_id": 80051389, "body": "you sir are an angel sent from god"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1507046755, "post_id": 46548510, "comment_id": 80052000, "body": "<code>map</code> is misused here."}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507046946, "post_id": 46548510, "comment_id": 80052116, "body": "What Sergio said, you should use <code>each</code> if you aren&#39;t intending to use the returned enumerator from map."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1507048360, "post_id": 46548510, "comment_id": 80052900, "body": "Updated the post"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 1, "last_activity_date": 1507048344, "last_edit_date": 1507048344, "creation_date": 1507045376, "answer_id": 46548510, "question_id": 46548317, "link": "https://stackoverflow.com/questions/46548317/how-do-i-get-this-nokogiri-output-to-write-each-object-to-a-column-in-a-csv/46548510#46548510", "title": "How do I get this Nokogiri output to write each object to a column in a csv?", "body": "<p>The problem is that <code>pharma_links.each{|link| ...}</code> returns the ENTIRE enumerator, so if you do this once for <code>company</code> and once for <code>link</code> you now have two new arrays. You then have to re-map each company &amp; link in a new array / hash (or by index if you are lazy AND you know for certain nothing went wrong in the either <code>.each</code> call)</p>\n\n<p>To avoid this, simply construct the CSV while you are looping through the data. <em>For each line of the <code>CSV</code> you expect one <code>pharma_links</code> 'line'</em>, so iterate through each at the same time:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\n\npage = Nokogiri::HTML(open(\"https://www.drugs.com/pharmaceutical-companies.html\"))\n# puts page.class #=&gt; Nokogiri::HTML::Document\n\n\npharma_links = page.css(\"div.col-list-az a\")\n\n# Create the CSV and iterate through the links while creating it\n# You can also add headers to the CSV on instantiation\nCSV.open(\"file.csv\", \"wb\", write_headers: true, headers: ['url','description']) do |csv| \n  pharma_links.each do |link|\n    puts \"Adding #{link.text}\" # prove that it works :)\n    csv &lt;&lt; [link['href'], link.text]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 1, "accepted_answer_id": 46548510, "answer_count": 1, "score": 1, "last_activity_date": 1507048344, "creation_date": 1507044814, "question_id": 46548317, "link": "https://stackoverflow.com/questions/46548317/how-do-i-get-this-nokogiri-output-to-write-each-object-to-a-column-in-a-csv", "title": "How do I get this Nokogiri output to write each object to a column in a csv?", "body": "<p>I have this code here which outputs a CSV, but when I open the CSV file its just has a 0 in the first two columns. </p>\n\n<pre><code>require 'rubygems'\n require 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\n\npage = Nokogiri::HTML(open(\"https://www.drugs.com/pharmaceutical-\ncompanies.html\"))\nputs page.class #=&gt; Nokogiri::HTML::Document\n\n\npharma_links = page.css(\"div.col-list-az a\")\n\nlink= pharma_links.each{|link| puts link['href'] }\ncompany = pharma_links.each{|link| puts link.text} \n\n\n\nCSV.open(\"/Users/file.csv\", \"wb\") do |csv|\n  csv &lt;&lt; [company, link]\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "edited": false, "score": 0, "creation_date": 1507120996, "post_id": 46547708, "comment_id": 80083866, "body": "Hmm.... I am getting an error saying <code>enabled?</code> is an undefined method for <code>Watir::Option</code>.  I <i>am</i> running an older version of watir-webdriver though, could that be the hiccup?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "edited": false, "score": 0, "creation_date": 1507121095, "post_id": 46547708, "comment_id": 80083942, "body": "What version are you using? I don&#39;t remember when the <code>#enabled?</code> method was added."}, {"owner": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "edited": false, "score": 0, "creation_date": 1507124316, "post_id": 46547708, "comment_id": 80086335, "body": "I have <code>v0.6.11</code>."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "edited": false, "score": 0, "creation_date": 1507127896, "post_id": 46547708, "comment_id": 80089000, "body": "<code>#enabled?</code> was added in v0.9.0. For v0.6.11, try <code>@browser.select_list(:class, &#39;preset-select&#39;).options.select { |o| !o.disabled?}</code>"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1507042918, "creation_date": 1507042918, "answer_id": 46547708, "question_id": 46547390, "link": "https://stackoverflow.com/questions/46547390/ruby-and-watir-randomly-select-option-from-select-list-that-does-not-have-disa/46547708#46547708", "title": "Ruby and Watir; randomly select option from select_list that does NOT have &quot;disabled&quot; in the attribute", "body": "<p>You can filter the list of options to those that are enabled:</p>\n\n<pre><code>enabled_options = @browser.select_list(:class, 'preset-select').options.select(&amp;:enabled?)\nenabled_options.sample.click\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507042918, "creation_date": 1507042053, "question_id": 46547390, "link": "https://stackoverflow.com/questions/46547390/ruby-and-watir-randomly-select-option-from-select-list-that-does-not-have-disa", "title": "Ruby and Watir; randomly select option from select_list that does NOT have &quot;disabled&quot; in the attribute", "body": "<p>Running Watir tests where I am looking to select a <em>random</em> value from a select_list element.  By default, one of the options has the attribute <code>disabled value=\"true\"</code></p>\n\n<p>Currently I am putting all the options into an array like such:</p>\n\n<pre><code>@browser.select_list(:class, 'preset-select').options.to_a.sample.click\n</code></pre>\n\n<p>Normally this works in selecting a single option, but I occasionally run into an issue where it tries to click on the disabled object instead.</p>\n\n<p>How would I validate this to ensure the object returned is not a disabled one?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1507040054, "post_id": 46546502, "comment_id": 80047553, "body": "But what if it&#39;s not on C: drive? Print the value of <code>Dir.getwd</code> before that <code>CSV.open</code>. Do you have write access to <i>that</i>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507040492, "post_id": 46546502, "comment_id": 80047842, "body": "Also this line is not doing what you think it does: <code>link= pharma_links.each{|link| puts link[&#39;href&#39;] }</code>. You&#39;ll find out when you fix that permission error."}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507040897, "post_id": 46546502, "comment_id": 80048121, "body": "@SergioTulentsev What is that line doing? in my console its creating a list of the href links, which is what I want.  And according to the error message <code>C:&#47;Ruby24&#47;lib&#47;ruby&#47;2.4.0&#47;csv.rb:1282:in initialize: Permission denied @ rb_sysopen - file.csv (Errno::EACCES)</code> the permission is being denied in the C drive, all my folders and files are located in C, I dont even have another drive"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041101, "post_id": 46546502, "comment_id": 80048263, "body": "No, you misread the error message. It says nothing about the place where you don&#39;t have permissions."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041207, "post_id": 46546502, "comment_id": 80048337, "body": "&quot;in my console its creating a list of the href links, which is what I want&quot; - I thought you wanted to print to a csv file?"}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041213, "post_id": 46546502, "comment_id": 80048341, "body": "Ok, well where else could it be if I only have a C drive? Can you please provide a more substantive answer than &quot;no, you misread the error message&quot; that doesn&#39;t really help me."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041248, "post_id": 46546502, "comment_id": 80048361, "body": "Did you follow the instructions I gave you earlier?"}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041292, "post_id": 46546502, "comment_id": 80048390, "body": "I want to create a csv file from that output yes, I have seen other threads about exporting nokogiri data to csv and this is how they did and had no problems"}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041512, "post_id": 46546502, "comment_id": 80048559, "body": "how do i print the value of <code>Dir.getwd</code> like I said im super new, sorry for being so stupid lol"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041526, "post_id": 46546502, "comment_id": 80048573, "body": "<code>puts Dir.getwd</code>"}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041597, "post_id": 46546502, "comment_id": 80048620, "body": "Okay I get <code>C:&#47;Program Files (x86)&#47;Notepad++</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041807, "post_id": 46546502, "comment_id": 80048755, "body": "Well, that&#39;s where you can&#39;t write files. Double check your permissions there. Might even be some windows sandboxing mechanism."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507041948, "post_id": 46546502, "comment_id": 80048864, "body": "Also, don&#39;t write to program files. Be explicit, <code>CSV.open(&quot;C:\\\\\\\\file.csv&quot;, &quot;wb&quot;)</code>"}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507042205, "post_id": 46546502, "comment_id": 80049027, "body": "@SergioTulentsev You already gave the answer in the comments, do you want to write an answer"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507042613, "post_id": 46546502, "comment_id": 80049308, "body": "@TraversWoodward: don&#39;t change questions like that. It&#39;s now a competely different question. Also pay attention to quotes and backslashes."}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507042709, "post_id": 46546502, "comment_id": 80049380, "body": "I&#39;m not attempting to change questions lol, I am just trying to get this solved, what does that mean please help me"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1507043087, "post_id": 46546502, "comment_id": 80049647, "body": "@gates added an answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507043568, "post_id": 46547722, "comment_id": 80049922, "body": "That still gives me permission denied, I honestly don&#39;t know why its not allowing me to write at all.  I changed the ownership of everyfile on the c drive to myself, I have full admin privileges, it almost seems like there must be a bug. I dont even know at this point"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507043760, "post_id": 46547722, "comment_id": 80050055, "body": "@TraversWoodward: did you try to do <i>exactly</i> as in my answer? or you made some modifications?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507043905, "post_id": 46547722, "comment_id": 80050150, "body": "@TraversWoodward: &quot;I changed the ownership of every file&quot;: yes, you&#39;ll also need every folder, not only file. Actually, just one folder. The one you&#39;ll be writing to."}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "reply_to_user": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507044131, "post_id": 46547722, "comment_id": 80050310, "body": "@TraversWoodward Just copy the file to the D drive and open terminal(shell) from there, and execute the code"}, {"owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "edited": false, "score": 0, "creation_date": 1507044450, "post_id": 46547722, "comment_id": 80050522, "body": "I got it guys, I messed with permissions on different groups till basically any user on my computer had access to write and it worked, thanks so much for all the help"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1507042976, "creation_date": 1507042976, "answer_id": 46547722, "question_id": 46546502, "link": "https://stackoverflow.com/questions/46546502/no-matter-what-i-do-i-get-permission-denied/46547722#46547722", "title": "No matter what I do I get permission denied", "body": "<blockquote>\n  <p>I have literally given myself ownership of the entire C: drive</p>\n</blockquote>\n\n<p>Contrary to what you assert, you don't have write permissions <strong>everywhere</strong> on drive C:. Something is preventing you from writing in the current working dir (<code>Dir.getwd</code>).</p>\n\n<p>Presumably, you have write access to at least root of C:? If so, try writing there.</p>\n\n<pre><code>CSV.open(\"c:/file.csv\", \"wb\") do |csv|\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8233036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1602115993145561/picture?type=large", "display_name": "Travers Woodward", "link": "https://stackoverflow.com/users/8233036/travers-woodward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "accepted_answer_id": 46547722, "answer_count": 1, "score": -2, "last_activity_date": 1507053627, "creation_date": 1507039345, "last_edit_date": 1507053627, "question_id": 46546502, "link": "https://stackoverflow.com/questions/46546502/no-matter-what-i-do-i-get-permission-denied", "title": "No matter what I do I get permission denied", "body": "<p>Hi I am running some code that scrapes a web page and then spits out a csv file here is that code: </p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\n\npage = Nokogiri::HTML(open(\"https://www.drugs.com/pharmaceutical-companies.html\"))\nputs page.class #=&gt; Nokogiri::HTML::Document\n\n\npharma_links = page.css(\"div.col-list-az a\")\n\nlink= pharma_links.each{|link| puts link['href'] }\ncompany = pharma_links.each{|link| puts link.text} \n\nCSV.open(\"file.csv\", \"wb\") do |csv|\n   csv &lt;&lt; [company, link]\nend\n</code></pre>\n\n<p>The code works perfectly all the way till the end, where I get this error</p>\n\n<pre><code>C:/Ruby24/lib/ruby/2.4.0/csv.rb:1282:in `initialize': Permission denied @ rb_sysopen - file.csv (Errno::EACCES)\n</code></pre>\n\n<p>I have literally given myself ownership of the entire C: drive and still receive this error. Please help I am beyond my wits.  Also, I am new to Ruby so please be explicit in your answers.</p>\n\n<p>I am running Windows 10 with 32-bit Ruby.</p>\n"}, {"tags": ["ruby", "automation"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507039476, "post_id": 46546218, "comment_id": 80047132, "body": "You mean File -&gt; New Project isn&#39;t going to work for you?"}, {"owner": {"reputation": 1, "user_id": 8714348, "user_type": "registered", "profile_image": "https://graph.facebook.com/285129085309768/picture?type=large", "display_name": "Richard Donovan", "link": "https://stackoverflow.com/users/8714348/richard-donovan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507192477, "post_id": 46546218, "comment_id": 80115199, "body": "Hi, yes. Sorry, I should have been clearer. It&#39;s about creating the project framework with all associated file structure i.e. features (dir), support (dir), hooks.rb, etc, etc..."}], "owner": {"reputation": 1, "user_id": 8714348, "user_type": "registered", "profile_image": "https://graph.facebook.com/285129085309768/picture?type=large", "display_name": "Richard Donovan", "link": "https://stackoverflow.com/users/8714348/richard-donovan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507039133, "creation_date": 1507038568, "last_edit_date": 1507039133, "question_id": 46546218, "link": "https://stackoverflow.com/questions/46546218/creating-an-empty-rubymine-project", "title": "Creating an empty RubyMine project", "body": "<p><a href=\"https://i.stack.imgur.com/7CNXZ.png\" rel=\"nofollow noreferrer\">Image</a>  Some time ago I used to do a bit of web automation using Ruby and RubyMine. I used to use the command <strong>testgen project project-name --pageobject-driver=watir</strong> to create an empty project in Rubymine (which included hooks.rb etc). Now, I'm just getting an error. Any thoughts on creating an empty project in RubyMine? I know you can use <strong>cucumber --init</strong> but you don't get all the subsidiary files... Thank you!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "html-email", "mustache"], "comments": [{"owner": {"reputation": 3757, "user_id": 7467428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nruPY.png?s=128&g=1", "display_name": "Syfer", "link": "https://stackoverflow.com/users/7467428/syfer"}, "edited": false, "score": 0, "creation_date": 1507069877, "post_id": 46545869, "comment_id": 80063088, "body": "tadman&#39;s right. Check your template to see if its being sent as quoted printable and it should fix those errors."}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 8929392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybCWR.jpg?s=128&g=1", "display_name": "Berkhan Berkdemir", "link": "https://stackoverflow.com/users/8929392/berkhan-berkdemir"}, "edited": false, "score": 0, "creation_date": 1555964334, "post_id": 46552965, "comment_id": 98269987, "body": "Just a quick note: if want to say <code>http:&#47;&#47;...?q=lorem</code>, it will be <code>http:&#47;&#47;...?q=30lorem</code>. So, that will become wrong parameter."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 428, "user_id": 8929392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybCWR.jpg?s=128&g=1", "display_name": "Berkhan Berkdemir", "link": "https://stackoverflow.com/users/8929392/berkhan-berkdemir"}, "edited": false, "score": 0, "creation_date": 1555964440, "post_id": 46552965, "comment_id": 98270038, "body": "@BerkhanBerkdemir <code>?q=l</code> becomes <code>?q=3Dl</code> but that&#39;s only invalid if used raw. If it&#39;s decoded it turns back into <code>?q=l</code>."}, {"owner": {"reputation": 428, "user_id": 8929392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybCWR.jpg?s=128&g=1", "display_name": "Berkhan Berkdemir", "link": "https://stackoverflow.com/users/8929392/berkhan-berkdemir"}, "edited": false, "score": 0, "creation_date": 1555964907, "post_id": 46552965, "comment_id": 98270193, "body": "Sorry, I didn&#39;t mention that we are using raw encode value. I needed to say that :|"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 428, "user_id": 8929392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybCWR.jpg?s=128&g=1", "display_name": "Berkhan Berkdemir", "link": "https://stackoverflow.com/users/8929392/berkhan-berkdemir"}, "edited": false, "score": 0, "creation_date": 1555965367, "post_id": 46552965, "comment_id": 98270375, "body": "@BerkhanBerkdemir Not sure why you&#39;d be using the raw encoded value. That only makes sense inside a quoted-printable context, not as a link you can exercise directly. The quoted-printable encoding will also randomly break lines, so you may get the link cut into two or more pieces which require reassembly via proper decoding."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1507062795, "creation_date": 1507062795, "answer_id": 46552965, "question_id": 46545869, "link": "https://stackoverflow.com/questions/46545869/weird-encode-character-in-email/46552965#46552965", "title": "weird encode character in email", "body": "<p>That's <a href=\"https://en.wikipedia.org/wiki/Quoted-printable\" rel=\"nofollow noreferrer\"><code>quoted-printable</code></a> style where it's similar to how things are escaped in a URL. You're probably used to <code>%20</code> but here <code>=20</code> is the same thing.</p>\n\n<p>Since <code>=</code> is part of the escaping, like in HTML <code>&amp;</code> becomes <code>&amp;amp;</code> and in a URL <code>%</code> becomes <code>%25</code>, <code>=</code> must be encoded as <code>=3D</code>.</p>\n\n<p>HTML just so happens to use a <em>lot</em> of <code>=</code> characters so you'll see the <code>=3D</code> sigil all over.</p>\n"}], "owner": {"reputation": 3842, "user_id": 879921, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8efb046fc10e0ce8f1106074a5545fa6?s=128&d=identicon&r=PG&f=1", "display_name": "ducktyped", "link": "https://stackoverflow.com/users/879921/ducktyped"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 46552965, "answer_count": 1, "score": 1, "last_activity_date": 1507062795, "creation_date": 1507037608, "question_id": 46545869, "link": "https://stackoverflow.com/questions/46545869/weird-encode-character-in-email", "title": "weird encode character in email", "body": "<p>I have a mustache template parsed via ruby and then render it by marking it html_safe against email body but resultant HTML has some weird encode character embedded in it, for example</p>\n\n<pre><code>&lt;body style=3D\"min-width:640px;margin: 0 0 0 0;\" bgcolor=3D\"#f6f6f6\" link==3D\"#000000\" vlink=3D\"#000000\" alink=3D\"#000000\" text=3D\"#000000\"&gt;\n  &lt;br /&gt;\n\n  &lt;table width=3D\"100%\" border=3D\"0\" align=3D\"center\" \ncellpadding=3D\"0\" c=\nellspacing=3D\"0\" bgcolor=3D\"#f6f6f6\"&gt;\n    &lt;tr&gt;\n      &lt;td bgcolor=3D\"#f6f6f6\" style=3D\"border-bottom: 0;\"&gt;\n        &lt;table width=3D\"640\" style=3D\"min-width:640px;\" \ncellspacing=3D\"0\"=\n cellpadding=3D\"0\" border=3D\"0\" align=3D\"center\"&gt;\n\n      &lt;tbody&gt;\n        &lt;tr&gt;\n          &lt;td bgcolor=3D\"#000000\"&gt;\n            &lt;table width=3D\"640\" bgcolor=3D\"#000000\" cellspacing=3D\"0=\n\" cellpadding=3D\"0\" border=3D\"0\" align=3D\"center\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td width=3D\"600\" height=3D\"10\" bgcolor=3D\"#000000\"=\n style=3D\"line-height:0px;font-size:0px;\"&gt;\n                    &lt;div width=3D\"1\" height=3D\"10\" alt=3D\"\" style=3D\"=\ndisplay:block; border:0;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Why these character remains even after marking string as html safe? Am I missing something.\nMustache template is regular HTML template with mustache syntax in it that are to be replaced dynamically</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 216, "user_id": 7949563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZQOj.jpg?s=128&g=1", "display_name": "Yuta", "link": "https://stackoverflow.com/users/7949563/yuta"}, "is_accepted": false, "score": 0, "last_activity_date": 1583913632, "creation_date": 1583913632, "answer_id": 60631492, "question_id": 46545545, "link": "https://stackoverflow.com/questions/46545545/is-there-any-way-to-add-outlinesbookmarks-to-existed-pdf-in-ruby/60631492#60631492", "title": "is there any way to add outlines(bookmarks) to existed pdf in ruby", "body": "<p><a href=\"https://github.com/yutayamamoto/pdfoutline\" rel=\"nofollow noreferrer\">https://github.com/yutayamamoto/pdfoutline</a>\nI made a library which helps you adding an outline to a PDF file though it's not written in ruby.</p>\n"}], "owner": {"reputation": 11, "user_id": 6324957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b006e303b8bb294a46d478ce4e0ccbf?s=128&d=identicon&r=PG&f=1", "display_name": "Rama krishna Thoka", "link": "https://stackoverflow.com/users/6324957/rama-krishna-thoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1583913632, "creation_date": 1507036648, "question_id": 46545545, "link": "https://stackoverflow.com/questions/46545545/is-there-any-way-to-add-outlinesbookmarks-to-existed-pdf-in-ruby", "title": "is there any way to add outlines(bookmarks) to existed pdf in ruby", "body": "<p>I have few pdf files and could combine into single pdf called combined.pdf with the following code.</p>\n\n<pre><code>pdf = CombinePDF.new\npdf &lt;&lt; CombinePDF.load(\"1.pdf\")\n # one way to combine, very fast.\npdf &lt;&lt; CombinePDF.load(\"2.pdf\")\npdf &lt;&lt; CombinePDF.load(\"3.pdf\")\npdf &lt;&lt; CombinePDF.load(\"4.pdf\")\npdf.save \"combined.pdf\"\n</code></pre>\n\n<p>Now I want to add outlines to this combined.pdf.\nTrying with the prawn, but no luck. Here is the code that i have tried</p>\n\n<pre><code>Prawn::Document.generate(\"full_template.pdf\", :template =&gt; filename) do\n  text \"THis content is written on the first page of the template\", :align =&gt; :center\n\n  outline.define do\n   section(\"Slaves\", :destination =&gt; 1) do\n     page :title =&gt; \"Page 2\", :destination =&gt; 2\n     page :title =&gt; \"Page 3\", :destination =&gt; 3\n   end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1507032444, "post_id": 46544216, "comment_id": 80042318, "body": "I means <code>AjaxDatatablesRails::Extensions</code> doesn&#39;t exist. Did you define <code>AjaxDatatablesRails::Extensions</code> somewhere? Perhaps a gem wasn&#39;t installed? Or a <code>require</code> is missing?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7421183, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1182101935231124/picture?type=large", "display_name": "Cosmin Baciu", "link": "https://stackoverflow.com/users/7421183/cosmin-baciu"}, "edited": false, "score": 0, "creation_date": 1507035231, "post_id": 46545087, "comment_id": 80044165, "body": "In requier it seems that   // require dataTables/jquery.dataTables // require dataTables/bootstrap/3/jquery.dataTables.bootstrap // require DataTables/DataTables-1.10.8/js/jquery.dataTables // require DataTables/DataTables-1.10.8/js/dataTables.bootstrap  does not have an equal in front of  the line. I think that it represent that it is not installed, or something like that. What can i have to do?"}], "tags": [], "owner": {"reputation": 33, "user_id": 7421183, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1182101935231124/picture?type=large", "display_name": "Cosmin Baciu", "link": "https://stackoverflow.com/users/7421183/cosmin-baciu"}, "is_accepted": true, "score": 0, "last_activity_date": 1507035175, "creation_date": 1507035175, "answer_id": 46545087, "question_id": 46544216, "link": "https://stackoverflow.com/questions/46544216/nameerror-uninitialized-constant-ajaxdatatablesrailsextensions/46545087#46545087", "title": "NameError: uninitialized constant AjaxDatatablesRails::Extensions", "body": "<p>Here is my application.js file</p>\n\n<pre><code>//= require respond.min\n//= require modernizr\n//= require lodash/lodash\n// require Placeholders.js\n//= require underscore\n// require bootstrap\n//= require jquery\n//= require jquery_ujs\n// require dataTables/jquery.dataTables\n// require dataTables/bootstrap/3/jquery.dataTables.bootstrap\n// require DataTables/DataTables-1.10.8/js/jquery.dataTables\n// require DataTables/DataTables-1.10.8/js/dataTables.bootstrap\n// require DataTables/Buttons-1.0.1/js/dataTables.buttons\n// require DataTables/Buttons-1.0.1/js/buttons.bootstrap\n// require DataTables/Buttons-1.0.1/js/buttons.flash\n// require DataTables/Buttons-1.0.1/js/buttons.html5\n// require DataTables/Responsive-1.0.7/js/dataTables.responsive\n// require DataTables/Select-1.0.0/js/dataTables.select\n//= require autonumeric\n//= require bootstrap-sprockets\n// require parsley\n// require turbolinks\n//= require twitter/typeahead\n\n//= require jquery.noty.packaged\n//= require hopscotch.js\n// require bootstrap-tour\n// require gritter\n// require zeroclipboard\n// require swfobject\n\n//= require valorbit\n//= require campaigns\n//= require invitations\n//= require twitterer\n//= require ga\n// require zendesk \n// require navbar\n//= require react\n//= require react_ujs\n//= require components\n//= require data-confirm-modal\n</code></pre>\n\n<p>Here is my Gemfile</p>\n\n<pre><code>gem 'jquery-datatables-rails', '~&gt; 3.3.0'\ngem 'ajax-datatables-rails', '~&gt; 0.4.0'\ngem \"kaminari\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7421183, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1182101935231124/picture?type=large", "display_name": "Cosmin Baciu", "link": "https://stackoverflow.com/users/7421183/cosmin-baciu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 46545087, "answer_count": 1, "score": 1, "last_activity_date": 1507035175, "creation_date": 1507032319, "last_edit_date": 1507034499, "question_id": 46544216, "link": "https://stackoverflow.com/questions/46544216/nameerror-uninitialized-constant-ajaxdatatablesrailsextensions", "title": "NameError: uninitialized constant AjaxDatatablesRails::Extensions", "body": "<p>I have to learn the MVC structure of a site made in Rails. When I want to run</p>\n\n<pre><code>foreman start -f Procfile.noweb\n</code></pre>\n\n<p>it gives me this error:</p>\n\n<pre><code>NameError: uninitialized constant AjaxDatatablesRails::Extensions\n</code></pre>\n\n<p>These are the lines that appear to have the problem:</p>\n\n<pre><code>class CampaignDatatable &lt; AjaxDatatablesRails::Base\n  def_delegator :@view, :link_to\n  def_delegator :@view, :edit_campaign_path\n  include AjaxDatatablesRails::Extensions::Kaminari\n</code></pre>\n\n<p>Can you tell me what it means?</p>\n"}, {"tags": ["ruby", "rspec", "rubygems"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1507030165, "post_id": 46543054, "comment_id": 80040900, "body": "can you provide examples of how you&#39;re outputting from fuubar and the logs that are being output"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507033490, "post_id": 46543054, "comment_id": 80042986, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ... Please don&#39;t vaguely describe your problem, but provide a concrete example of what you are talking about."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507033714, "post_id": 46543054, "comment_id": 80043137, "body": "<b>Which</b> gem(s) are printing to <code>$stdout</code> during the test run? (This is not generally considered normal/good behaviour!) How many? (You say &quot;multiple&quot;, which is extra surprising.) How are they configured? (I can&#39;t suggest how to modify/reconfigure them without some basic information like this!) By what means are they printing information? <code>puts</code>, or something else?"}], "owner": {"reputation": 110, "user_id": 4578512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/335938873273166/picture?type=large", "display_name": "Hiro", "link": "https://stackoverflow.com/users/4578512/hiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507028511, "creation_date": 1507028511, "question_id": 46543054, "link": "https://stackoverflow.com/questions/46543054/fuubar-gem-progress-bar-overwritten-by-other-logs", "title": "Fuubar gem progress bar overwritten by other logs", "body": "<p>I included <code>gem fuubar</code> for rspec test progress. </p>\n\n<p>Probably due to <a href=\"https://github.com/jfelchner/ruby-progressbar/wiki/Logging\" rel=\"nofollow noreferrer\" title=\"this\">this</a>, every time Fuubar progress bar is updated, almost immediately it's overwritten by other logs.</p>\n\n<p>The page suggests that I should use <code>progressbar.log</code> or something to get around the issue, but I can't modify every gem for this. </p>\n\n<p>What's the convention here?\nYou can't expect progress bar if any of the gems you use outputs log?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1507027815, "post_id": 46542741, "comment_id": 80039559, "body": "What do you expect if someone marks the second template as active? Should that dis-activate the first? Should that raise an error? How to activate another template if you cannot de-active templates?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1507027984, "post_id": 46542741, "comment_id": 80039643, "body": "If site.templates.present? then &quot;action if ok&quot; else &quot;action if not ok&quot; end (site.templates.any? may work too) (it&#39;s not activerecord related, just check where desired and redirect to the template new action if not ok)"}, {"owner": {"reputation": 1828, "user_id": 885540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f5f3af9bf5e751e3a61a6b1f3489e2b?s=128&d=identicon&r=PG", "display_name": "tommarshall", "link": "https://stackoverflow.com/users/885540/tommarshall"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1507028535, "post_id": 46542741, "comment_id": 80039973, "body": "Thanks for taking the time to look at this @spickermann. I think you&#39;d have to mark the other templates non-active in that scenario, though that assumes an <code>active</code> attribute on the template, rather than a <code>active_template_id</code> attribute on the site. I&#39;ve tried it both ways, and hit challenges with both, so wanted to leave the question open to any solution."}], "answers": [{"comments": [{"owner": {"reputation": 1828, "user_id": 885540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f5f3af9bf5e751e3a61a6b1f3489e2b?s=128&d=identicon&r=PG", "display_name": "tommarshall", "link": "https://stackoverflow.com/users/885540/tommarshall"}, "edited": false, "score": 0, "creation_date": 1507028237, "post_id": 46542877, "comment_id": 80039815, "body": "Thanks for your time. Would the custom validation on <code>Site</code> handle the situation where the user destroys, or sets the <code>active</code> attribute to <code>false</code> on the template directly?"}, {"owner": {"reputation": 188, "user_id": 4627092, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/017af18e677c0990acaa8eff4eec9118?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Romanovsky", "link": "https://stackoverflow.com/users/4627092/denis-romanovsky"}, "edited": false, "score": 0, "creation_date": 1507036199, "post_id": 46542877, "comment_id": 80044845, "body": "You will need some more custom validations or , which is better, before_delete and before_update hooks on template."}], "tags": [], "owner": {"reputation": 188, "user_id": 4627092, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/017af18e677c0990acaa8eff4eec9118?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Romanovsky", "link": "https://stackoverflow.com/users/4627092/denis-romanovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1507027955, "creation_date": 1507027955, "answer_id": 46542877, "question_id": 46542741, "link": "https://stackoverflow.com/questions/46542741/how-to-ensure-rails-activerecord-model-always-has-one-of-many-in-a-given-state/46542877#46542877", "title": "How to ensure rails ActiveRecord model always has one of many in a given state?", "body": "<p>I suggest the following:</p>\n\n<ol>\n<li>Add a column <code>active</code> to the templates. Add uniqueness validation to\nit within the site scope.  </li>\n<li>Add a custom validation to site,\nwhich will check if there is an active template.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1828, "user_id": 885540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f5f3af9bf5e751e3a61a6b1f3489e2b?s=128&d=identicon&r=PG", "display_name": "tommarshall", "link": "https://stackoverflow.com/users/885540/tommarshall"}, "edited": false, "score": 0, "creation_date": 1507034266, "post_id": 46543242, "comment_id": 80043507, "body": "Thanks @spickermann. This works. It&#39;s actually what I had already, but I&#39;d failed to recognise that I needed to <code>.reload</code> the pre-existing default in a spec, so I thought it wasn&#39;t working. FWIW <code>update_all</code> gives a deprecated warning in Rails 5, but can be replaced with <code>update</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1507029173, "creation_date": 1507029173, "answer_id": 46543242, "question_id": 46542741, "link": "https://stackoverflow.com/questions/46542741/how-to-ensure-rails-activerecord-model-always-has-one-of-many-in-a-given-state/46543242#46543242", "title": "How to ensure rails ActiveRecord model always has one of many in a given state?", "body": "<p>I would add an <code>active</code> boolean column to the <code>Template</code> model.</p>\n\n<p>To ensure that there is at least one active template add a custom validation to your <code>Template</code> model:</p>\n\n<pre><code>validate :at_least_one_active\n\ndef at_least_one_active\n  return if active || site.templates.where(active: true).exist?\n  errors.add(:active, 'at least one must be active') \nend\n</code></pre>\n\n<p>To ensure that is only one active template I would use an <code>after_save</code> callback in the <code>Template</code> model:</p>\n\n<pre><code>after_save :only_on_active\n\ndef only_one_active\n  return unless active\n  site.templates.where(active: true).where.not(id: id).update_all(active: false)\nend\n</code></pre>\n\n<p>To ensure that you cannot delete the only <code>active</code> template add a <code>before_destroy</code> callback:</p>\n\n<pre><code>before_destroy :cannot_destroy_active_template\n\ndef cannot_destroy_active_template\n  raise :abort if active\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 0, "last_activity_date": 1507049545, "creation_date": 1507049545, "answer_id": 46549669, "question_id": 46542741, "link": "https://stackoverflow.com/questions/46542741/how-to-ensure-rails-activerecord-model-always-has-one-of-many-in-a-given-state/46549669#46549669", "title": "How to ensure rails ActiveRecord model always has one of many in a given state?", "body": "<p>You should add</p>\n\n<pre><code>class Site &lt; ActiveRecord::Base\n  belongs_to :active_template\n  validate :active_template, presence: true\nend\n</code></pre>\n\n<p>And add an active_template_id to your model's table. Also you can add has_one :active_site within your Template model, but nil should be allowed.</p>\n"}], "owner": {"reputation": 1828, "user_id": 885540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f5f3af9bf5e751e3a61a6b1f3489e2b?s=128&d=identicon&r=PG", "display_name": "tommarshall", "link": "https://stackoverflow.com/users/885540/tommarshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1507049545, "creation_date": 1507027512, "question_id": 46542741, "link": "https://stackoverflow.com/questions/46542741/how-to-ensure-rails-activerecord-model-always-has-one-of-many-in-a-given-state", "title": "How to ensure rails ActiveRecord model always has one of many in a given state?", "body": "<p>I have two ActiveRecord models; <code>Site</code> and <code>Template</code>.</p>\n\n<p>A site <code>has_many</code> templates and must <em>always</em> have one active template, i.e. a site should not be without an active template, and should never be more than one template marked as active at one time.</p>\n\n<p>How can I enforce this relationship within ActiveRecord within a Rails 5 app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "comments": [{"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "edited": false, "score": 0, "creation_date": 1507027516, "post_id": 46542554, "comment_id": 80039416, "body": "Please share your view&#39;s code for email and phone while registering"}], "answers": [{"comments": [{"owner": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1507031803, "post_id": 46542923, "comment_id": 80041864, "body": "i have modified the views and now i am getting the following error.  PG::UndefinedColumn: ERROR:  column users.login does not exist"}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "reply_to_user": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1507032134, "post_id": 46542923, "comment_id": 80042091, "body": "Do you have <code>find_for_database_authentication</code> method defined in <code>user.rb</code>?"}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "reply_to_user": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1507032366, "post_id": 46542923, "comment_id": 80042264, "body": "Did you add <code>find_for_database_authentication</code> method? Refer the same <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address#overwrite-devises-find_for_database_authentication-method-in-user-model\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "reply_to_user": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1507032422, "post_id": 46542923, "comment_id": 80042305, "body": "Glad i could help!!"}], "tags": [], "owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "is_accepted": true, "score": 2, "last_activity_date": 1507028100, "creation_date": 1507028100, "answer_id": 46542923, "question_id": 46542554, "link": "https://stackoverflow.com/questions/46542554/devise-login-via-phone-number-or-email/46542923#46542923", "title": "Devise - Login via phone number or email", "body": "<p>By the params you've shared, the phone or the email is being sent to the <code>email</code> named param. Instead it should be <code>login</code>.</p>\n\n<p>If your view's code accepting the email or phone number is  </p>\n\n<pre><code>&lt;%= f.text_field :email %&gt;\n&lt;%= f.text_field :phone %&gt;\n</code></pre>\n\n<p>then replace it with  </p>\n\n<pre><code>&lt;%= f.text_field :login %&gt;\n</code></pre>\n\n<p>This way, the param sent would be login and rest will be handled by your code.Let me know if this still gives you the error. Refer <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address\" rel=\"nofollow noreferrer\">this link</a>. This implements the same except it uses username. Also note <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address\" rel=\"nofollow noreferrer\">modifying views</a>. This seems to your problem. everything else seems to be correct.</p>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 2, "last_activity_date": 1527592062, "last_edit_date": 1527592062, "creation_date": 1507032196, "answer_id": 46544180, "question_id": 46542554, "link": "https://stackoverflow.com/questions/46542554/devise-login-via-phone-number-or-email/46544180#46544180", "title": "Devise - Login via phone number or email", "body": "<p>You should override default login behaviour.</p>\n\n<p>User.rb (put this code in user.rb model)</p>\n\n<pre><code>def self.find_for_database_authentication(warden_conditions)\n  conditions = warden_conditions.dup\n  if login = conditions.delete(:login)\n    where(conditions.to_hash).where([\"lower(phone) ILIKE '%#{login.downcase}%' OR lower(email) = :value\", { :value =&gt; login.downcase }]).first\n  elsif conditions.has_key?(:phone) || conditions.has_key?(:email)\n    where(conditions.to_hash).first\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2822, "favorite_count": 0, "accepted_answer_id": 46542923, "answer_count": 2, "score": 0, "last_activity_date": 1527592062, "creation_date": 1507026791, "question_id": 46542554, "link": "https://stackoverflow.com/questions/46542554/devise-login-via-phone-number-or-email", "title": "Devise - Login via phone number or email", "body": "<p>I need to login to the application using phone number or email address. I am using devise 3.5.2 for authentication. As per this post(<a href=\"https://stackoverflow.com/questions/38221862/devise-sign-up-either-by-email-or-by-mobile-number\">Devise sign up either by email or by mobile number</a>), i have implemented the following.</p>\n\n<p>application_controller.rb</p>\n\n<pre><code>before_action :configure_permitted_parameters, if: :devise_controller?\n\nprotected\n\ndef configure_permitted_parameters\n    added_attrs = [:phone, :email, :password, :password_confirmation, :remember_me]\n    devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(added_attrs) }\n    devise_parameter_sanitizer.for(:sign_in) { |u| u.permit(added_attrs) }\n    devise_parameter_sanitizer.for(:account_update) { |u| u.permit(added_attrs) }\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>attr_accessor :email_confirmation, :login\n\ndevise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable, :authentication_keys =&gt; [:login]\n\n  def login=(login)\n    @login = self.email\n  end\n\n  def login\n    @login || self.phone || self.email\n  end\n</code></pre>\n\n<p>config/initializers/devise.rb</p>\n\n<pre><code>config.authentication_keys = [ :login ]\n</code></pre>\n\n<p>Now if i try to login either by using email or phone number i am getting an \"unauthorized\" error. A sample request is as follows.</p>\n\n<pre><code>Processing by Devise::SessionsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"hCUuF5Ja9f37I4ZBSafGvCpgTnF1nKWf+q8aTEv28mW6vx3z+hIietmYjX9vi0/l/bjVqj0jDaV88mvmdXn9Vg==\", \"user\"=&gt;{\"email\"=&gt;\"jen@companyadmin.com\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\n\n Processing by Devise::SessionsController#create as HTML\n Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"uRnINI6Bogx3yeAP8WNpZB31jNOWnvvWVhHJg1BMZL2Hg/vQ5sl1i1Vy6zHXT+A9yi0XCN4hU+zQTLgpbsNrjg==\", \"user\"=&gt;{\"email\"=&gt;\"1234567890\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\n</code></pre>\n\n<p>For both requests, the response is </p>\n\n<pre><code>Completed 401 Unauthorized in 2ms\n</code></pre>\n\n<p>Any idea on how to fix this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "nokogiri", "html-safe"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1507025577, "creation_date": 1507025577, "answer_id": 46542195, "question_id": 46541936, "link": "https://stackoverflow.com/questions/46541936/undefined-method-html-safe-for-nokogiri-html-document/46542195#46542195", "title": "Undefined method html_safe for Nokogiri Html Document", "body": "<p><code>html_safe</code> is a Rails method defined on <code>String</code> but not on <code>Nokogiri::HTML</code>. </p>\n\n<p>I would try to translate the Nokogiri document into a HTML first:</p>\n\n<pre><code>&lt;p&gt;&lt;%= @description.to_html.html_safe %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 28132, "user_id": 79980, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/09bbc36d6eb2bfdc5b54cf56f73e88f2?s=128&d=identicon&r=PG", "display_name": "useranon", "link": "https://stackoverflow.com/users/79980/useranon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 46542195, "answer_count": 1, "score": 1, "last_activity_date": 1507025577, "creation_date": 1507024789, "question_id": 46541936, "link": "https://stackoverflow.com/questions/46541936/undefined-method-html-safe-for-nokogiri-html-document", "title": "Undefined method html_safe for Nokogiri Html Document", "body": "<p>I am trying to use .html_safe in the below description where I receive the error as Undefined method for Nokogiri HTML document.</p>\n\n<p><strong>blogs_controller.rb</strong></p>\n\n<pre><code>@blog = Blog.find(19)\n@description = Nokogiri::HTML.parse(@blog.description)\n@description.search('a.fr-file').each do |desc|\n  desc['href']= File.join(ActionController::Base.asset_host, desc['href'])\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>&lt;p&gt;&lt;%= @description.html_safe %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Kindly advise.</p>\n"}, {"tags": ["ruby", "erb"], "comments": [{"owner": {"reputation": 10858, "user_id": 788700, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f02925eef8f737905a8702b9cc21ff07?s=128&d=identicon&r=PG", "display_name": "Adobe", "link": "https://stackoverflow.com/users/788700/adobe"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507027452, "post_id": 46541915, "comment_id": 80039362, "body": "@sawa I&#39;ve re-wrote the question."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1507126735, "post_id": 46541915, "comment_id": 80088047, "body": "Note that <a href=\"http://ruby-doc.org/core-2.4.2/Kernel.html#method-i-test\" rel=\"nofollow noreferrer\"><code>test</code> is a <code>Kernel</code> method</a> that expects 2 or 3 arguments, so it\u2019s not a great example for sample code as it can throw unrelated errors."}], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 3, "last_activity_date": 1507126585, "last_edit_date": 1592644375, "creation_date": 1507126585, "answer_id": 46567196, "question_id": 46541915, "link": "https://stackoverflow.com/questions/46541915/how-to-render-erubi-template-to-html/46567196#46567196", "title": "How to render erubi template to html?", "body": "<p><a href=\"https://github.com/jeremyevans/erubi#usage\" rel=\"nofollow noreferrer\">From the Erubi README</a> (it says \u201cfor a file\u201d but it appears to mean \u201cfor a template\u201d):</p>\n<blockquote>\n<p>Erubi only has built in support for retrieving the generated source for a file:</p>\n<pre><code>require 'erubi'\neval(Erubi::Engine.new(File.read('filename.erb')).src)\n</code></pre>\n</blockquote>\n<p>So you will need to use one of the <code>eval</code> variants to run from a standalone script.</p>\n<pre><code>template = Erubi::Engine.new(&quot;7 + 7 = &lt;%= 7 + 7 %&gt;&quot;)\nputs eval(template.src)\n</code></pre>\n<p>Outputs <code>7 + 7 = 14</code>.</p>\n<p>If you want to be able to use instance variables in your template as you might be used to from Rails, Sinatra etc., you will need to create a context object and use <code>instance_eval</code>:</p>\n<pre><code>class Context\n  attr_accessor :message\nend\n\ntemplate = Erubi::Engine.new(&quot;Message is: &lt;%= @message %&gt;&quot;)\ncontext = Context.new\ncontext.message = &quot;Hello&quot;\n\nputs context.instance_eval(template.src)\n</code></pre>\n<p>Outputs <code>Message is: Hello</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 3530767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e06fa390c919acc774b1ca9e38ad7612?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Pereira", "link": "https://stackoverflow.com/users/3530767/damian-pereira"}, "edited": false, "score": 0, "creation_date": 1585777281, "post_id": 59568824, "comment_id": 107886573, "body": "This worked perfectly, without having to create the context, thanks a lot!"}], "tags": [], "owner": {"reputation": 267, "user_id": 2031423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c0c426a03f539aa4528f1c66e78e8b?s=128&d=identicon&r=PG", "display_name": "user2031423", "link": "https://stackoverflow.com/users/2031423/user2031423"}, "is_accepted": false, "score": 1, "last_activity_date": 1577992613, "creation_date": 1577992613, "answer_id": 59568824, "question_id": 46541915, "link": "https://stackoverflow.com/questions/46541915/how-to-render-erubi-template-to-html/59568824#59568824", "title": "How to render erubi template to html?", "body": "<p>In rails 5.1 I switched out the <code>Erubis::Eruby.new</code> code to the following:</p>\n\n<pre><code>ActionController::Base.render(inline: \"&lt;%= test %&gt;\", locals: {test: \"&lt;br&gt;here\"})\n</code></pre>\n\n<p>Rails will do the heavy lifting.</p>\n"}], "owner": {"reputation": 10858, "user_id": 788700, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f02925eef8f737905a8702b9cc21ff07?s=128&d=identicon&r=PG", "display_name": "Adobe", "link": "https://stackoverflow.com/users/788700/adobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 1, "accepted_answer_id": 46567196, "answer_count": 2, "score": 4, "last_activity_date": 1577992613, "creation_date": 1507024738, "last_edit_date": 1507027411, "question_id": 46541915, "link": "https://stackoverflow.com/questions/46541915/how-to-render-erubi-template-to-html", "title": "How to render erubi template to html?", "body": "<p>As rails 5.1+ switched to <code>erubi</code> I tried to use that in ruby script:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'erubi'\n\ntemplate = Erubi::Engine.new(\"&lt;%= test %&gt;\", escape: true)\n</code></pre>\n\n<p>However I'm stacked trying to render that template to html.</p>\n\n<p><code>erubi</code> source code: <a href=\"https://github.com/jeremyevans/erubi\" rel=\"nofollow noreferrer\">https://github.com/jeremyevans/erubi</a></p>\n\n<p><br></p>\n\n<p><code>erubi</code> is fork of <code>erubis</code>, and in <code>erubis</code> the rendering is done via <code>result</code> method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'erubis'\n\ntemplate = Erubis::Eruby.new(\"&lt;%= test %&gt;\", escape: true)\ntemplate.result test: \"&lt;br&gt;here\" #=&gt; \"&amp;lt;br&amp;gt;here\"\n</code></pre>\n\n<p>However there's no <code>result</code> method in <code>erubi</code>.</p>\n"}, {"tags": ["ruby", "jekyll", "macos-high-sierra"], "comments": [{"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 0, "creation_date": 1507024228, "post_id": 46541019, "comment_id": 80037591, "body": "can you provide more details..? What&#39;s your <code>rvm</code>/<code>rbenv</code> version..? What&#39;s your Jekyll - project directory path (relative to your <code>HOME</code> directory)? How old is your Jekyll project (i.e. what version of Jekyll was your jekyll project directory created with?)"}, {"owner": {"reputation": 9244, "user_id": 2397550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAb8N.jpg?s=128&g=1", "display_name": "JoostS", "link": "https://stackoverflow.com/users/2397550/joosts"}, "edited": false, "score": 0, "creation_date": 1507105754, "post_id": 46541019, "comment_id": 80074271, "body": "How about using Cloud9? See: <a href=\"https://stackoverflow.com/a/45811995/2397550\">stackoverflow.com/a/45811995/2397550</a>"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 1731694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d39e65f615fd6dcb9dd44ea7f7995b?s=128&d=identicon&r=PG", "display_name": "christophrumpel", "link": "https://stackoverflow.com/users/1731694/christophrumpel"}, "is_accepted": false, "score": 5, "last_activity_date": 1507973360, "creation_date": 1507973360, "answer_id": 46742979, "question_id": 46541019, "link": "https://stackoverflow.com/questions/46541019/jekyll-with-ruby-2-3-on-macos-10-13-highsierra/46742979#46742979", "title": "Jekyll with Ruby 2.3 on macOS 10.13 (HighSierra)", "body": "<p>I had the same issue. I just uninstalled jekyll</p>\n\n<pre><code>gem uninstall jekyll\n</code></pre>\n\n<p>and then installed it again.</p>\n\n<pre><code>gem install jekyll\n</code></pre>\n\n<p>Then it worked again.</p>\n"}], "owner": {"reputation": 457, "user_id": 3994449, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/cwJXM.jpg?s=128&g=1", "display_name": "Maurice Wipf", "link": "https://stackoverflow.com/users/3994449/maurice-wipf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1546448493, "creation_date": 1507021744, "last_edit_date": 1510392613, "question_id": 46541019, "link": "https://stackoverflow.com/questions/46541019/jekyll-with-ruby-2-3-on-macos-10-13-highsierra", "title": "Jekyll with Ruby 2.3 on macOS 10.13 (HighSierra)", "body": "<p>When I run <code>$ jekyll</code>or <code>$ jekyll serve</code> it raises the following error:</p>\n\n<pre><code>-bash: /usr/local/bin/jekyll: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n\n<p>I checked <code>/System/Library/Frameworks/Ruby.framework/Versions/</code> and Version 2.0 does not exist. It turns out that on the same day I updated on HighSierra, Version 2.3 was installed.</p>\n\n<p>I think Jekyll still looks for Version 2.0. So how can I tell Jekyll to use Ruby 2.3?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>When I uninstall and then install jekyll, it fails:</p>\n\n<pre><code>$ gem install jekyll\nBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.3.0/gems/ffi-1.9.18/ext/ffi_c\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20171111-1004-fgop80.rb extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/ffi-1.9.18 for inspection.\nResults logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/ffi-1.9.18/gem_make.out\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>I googled <code>can't find header files for ruby</code> and it turned out that \"Command Line Tools for Xcode\" must be installed which you can download here: <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow noreferrer\">https://developer.apple.com/download/more/</a></p>\n\n<p>However, I have macOS 10.13 and there is no command line tools for Xcode 8.x (which was the latest version I could install). That's why I searched for Xcode in the Mac App Store and installed Xcode 9. Once, it was installed, a window popped up that said \"git requires command line tools. Do you want to install it?\". I clicked install and still failed to run <code>$gem install jekyll</code>.</p>\n\n<p>Then I tried <code>$ brew doctor</code>. There were some warnings which I fixed one by one and finally I'm able to run <code>$ gem install jekyll</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507020579, "post_id": 46540497, "comment_id": 80035300, "body": "Your Activity model belongs to Campaign, right? (campaign_id)"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 2, "creation_date": 1507020925, "post_id": 46540497, "comment_id": 80035512, "body": "So you could include the campaign in the Activity query and fetch it&#39;s name directly in view if use something like jbulder or construct it with serializer."}, {"owner": {"reputation": 528, "user_id": 4989814, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-w2i5hNUDkmI/AAAAAAAAAAI/AAAAAAAAACI/kOzQgvwb4SA/photo.jpg?sz=128", "display_name": "Yoann Picquenot", "link": "https://stackoverflow.com/users/4989814/yoann-picquenot"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507021074, "post_id": 46540497, "comment_id": 80035605, "body": "I&#39;m gonna try to serialize it. Thanks!"}, {"owner": {"reputation": 528, "user_id": 4989814, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-w2i5hNUDkmI/AAAAAAAAAAI/AAAAAAAAACI/kOzQgvwb4SA/photo.jpg?sz=128", "display_name": "Yoann Picquenot", "link": "https://stackoverflow.com/users/4989814/yoann-picquenot"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507021201, "post_id": 46540497, "comment_id": 80035686, "body": "@Anton After thoughts, It&#39;s for an ajax call. So I can&#39;t fetch its name directly in the view. I can&#39;t query every campaign for each item."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1507021497, "post_id": 46540497, "comment_id": 80035850, "body": "If you&#39;ll include the campaign into the Activity query it won&#39;t do N+1"}], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 4989814, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-w2i5hNUDkmI/AAAAAAAAAAI/AAAAAAAAACI/kOzQgvwb4SA/photo.jpg?sz=128", "display_name": "Yoann Picquenot", "link": "https://stackoverflow.com/users/4989814/yoann-picquenot"}, "edited": false, "score": 0, "creation_date": 1507022202, "post_id": 46541014, "comment_id": 80036288, "body": "I can&#39;t use view, there are too much elements to bind. It becomes very slow."}], "tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": true, "score": 2, "last_activity_date": 1507021728, "creation_date": 1507021728, "answer_id": 46541014, "question_id": 46540497, "link": "https://stackoverflow.com/questions/46540497/rails-convert-an-activerecord-to-a-simple-object-to-add-field-dynamically/46541014#46541014", "title": "Rails - Convert an ActiveRecord to a simple object to add field dynamically", "body": "<p>You could achieve this with some thing like this:  </p>\n\n<pre><code>@act = Activity.includes(:campaign).order('created_at desc')  \nacts = []  \n@act.each do |item|  \n  acts &lt;&lt; item.attributes.merge({campaign_name: item.campaign.name})  \nend  \n</code></pre>\n\n<p>Then render the acts array.<br>\nI think using view is clearer.</p>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 5245132, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6f004e91e164ad823070480a9354a516?s=128&d=identicon&r=PG&f=1", "display_name": "Chet", "link": "https://stackoverflow.com/users/5245132/chet"}, "is_accepted": false, "score": 1, "last_activity_date": 1507022619, "last_edit_date": 1507022619, "creation_date": 1507022186, "answer_id": 46541149, "question_id": 46540497, "link": "https://stackoverflow.com/questions/46540497/rails-convert-an-activerecord-to-a-simple-object-to-add-field-dynamically/46541149#46541149", "title": "Rails - Convert an ActiveRecord to a simple object to add field dynamically", "body": "<pre><code>a = @act.to_json\nb = JSON.parse(a)\nb.each do |item|\n item[\"campaign_name\"] = item.campaign.name\nend\n</code></pre>\n\n<p>or in a single line </p>\n\n<pre><code>JSON.parse(@act.to_json).each do |item| item[\"campaign_name\"] = item.campaign.name end\n</code></pre>\n"}], "owner": {"reputation": 528, "user_id": 4989814, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-w2i5hNUDkmI/AAAAAAAAAAI/AAAAAAAAACI/kOzQgvwb4SA/photo.jpg?sz=128", "display_name": "Yoann Picquenot", "link": "https://stackoverflow.com/users/4989814/yoann-picquenot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 46541014, "answer_count": 2, "score": 0, "last_activity_date": 1507022619, "creation_date": 1507020109, "last_edit_date": 1507020443, "question_id": 46540497, "link": "https://stackoverflow.com/questions/46540497/rails-convert-an-activerecord-to-a-simple-object-to-add-field-dynamically", "title": "Rails - Convert an ActiveRecord to a simple object to add field dynamically", "body": "<p>I am retrieving data from the database. Then I am sending it in JSON.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TZa5s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZa5s.png\" alt=\"enter image description here\"></a></p>\n\n<p>The thing is, I need to add dynamically a field \"campaign_name\".</p>\n\n<pre><code>def loadtimeline\n    @act = Activity.order('created_at desc').paginate(:page =&gt; params[:page], :per_page =&gt; 40)\n\n    @act.each do |item|\n      item.attributes[:campaign_name] = item.campaign.name\n    end\n\n    respond_to do |format|\n      format.json do\n        render json: @act\n      end\n    end\nend\n</code></pre>\n\n<p>Finally, the moment I check client, the new field doesn't appear.</p>\n\n<p>So I told myself it could be related to this object is an ActiveRecord Model. So I am trying to convert it as an object.</p>\n\n<p>Is that possible or is there a way to add the field I need?</p>\n\n<p>Thank you for your help.</p>\n\n<p>EDIT1.\nI didn't precise, but <code>item.campaign</code> belongs to an other model Campaign.</p>\n\n<pre><code>class Activity &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :campaign\n\n  attr_accessor :campaign_name\n\n  def item\n    if item_path &amp;&amp; item_id\n      case item_path\n        when /todo/\n          Todo.find(item_id)\n        when /content/\n          Content.find(item_id)\n        when /netlinking/\n          Netlinking.find(item_id)\n        else\n          nil\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "cancan", "rolify"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1507021956, "post_id": 46540261, "comment_id": 80036119, "body": "You sound confused about what you&#39;re trying to achieve here.... If all you want to do is add the ability to mark users as <code>admin</code>, then why not just add a <code>is_admin</code> boolean column to the <code>users</code> table? If you are having issues setting up the controller/permitter logic, then please <b>show us your code</b> so that we can diagnose the problem."}, {"owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "edited": false, "score": 0, "creation_date": 1507023123, "post_id": 46540261, "comment_id": 80036903, "body": "You should use pundit gem. =&gt; <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow noreferrer\">github.com/elabs/pundit</a> &lt;= it&#39;s exactly what you need."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1507031244, "post_id": 46540261, "comment_id": 80041556, "body": "Can you elaborate on how you implemented multi-user support? How are users and their content are connected, how are the associations defined?"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507036609, "post_id": 46540261, "comment_id": 80045105, "body": "Thanks for the replies @Tom Lord, I have updated the question with more info and details. I hope it helps!"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "edited": false, "score": 0, "creation_date": 1507036873, "post_id": 46540261, "comment_id": 80045264, "body": "Thanks for the replies @ spickermann, I have updated the question with more info and details. I hope it helps!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507038938, "post_id": 46540261, "comment_id": 80046772, "body": "OK, now I&#39;m really confused... Why is there a <b>model</b> for <code>user1</code> and <code>user2</code>?? (And none for <code>admin</code>?) Do you expect your application to have <b>lots</b> of users, with three different roles/permission levels (in which case, I&#39;d suggest using more descriptive names than <code>user1</code> and <code>user2</code>!)? Or, do you want to have exactly three users in the whole system? (In which case, why do you have <code>registrations</code>?) ... Or, and I suspect this is the case, do you want to have <b>many</b> users categorised simply as <b>admins / non-admins</b>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507038987, "post_id": 46540261, "comment_id": 80046802, "body": "Basically, can you please clarify what the user model is supposed to look like - because I highly suspect you&#39;ve taken a wrong turn here, and gotten mixed up with your classes."}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507040307, "post_id": 46540261, "comment_id": 80047723, "body": "@Tom Lord... Actually I do have an admin model, I just forgot to add it. Yes I do expect my application to have lots of users and thats why I wanted to split the models/controllers/views. I want three users with different types of roles/permissions on my app, admin, seller, viewer. The admin is the admin, the seller sells stuff and the viewer just views the uploaded stuff. Sorry if I confused you!!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507041905, "post_id": 46540261, "comment_id": 80048831, "body": "If the role is a <code>Seller</code> and a <code>Viewer</code>, then call it something meaningful like that!! Not <code>User1</code> and <code>User2</code>! :D .... Your design is also dependant on whether a seller can also be a viewer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507042291, "post_id": 46540261, "comment_id": 80049093, "body": "If each user can simply be defined by their class, then you could add a bunch of <code>pundit</code> policies with rules like: <code>user.is_a?(Admin) || user.is_a?(Seller)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7190190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049333af6640e8a8b52298d1691884c8?s=128&d=identicon&r=PG", "display_name": "Kwaku Boateng", "link": "https://stackoverflow.com/users/7190190/kwaku-boateng"}, "is_accepted": false, "score": 0, "last_activity_date": 1507054238, "creation_date": 1507054238, "answer_id": 46550859, "question_id": 46540261, "link": "https://stackoverflow.com/questions/46540261/rails-allow-users-to-only-view-or-edit-their-own-content/46550859#46550859", "title": "Rails: Allow users to only view or edit their own content", "body": "<p>What you can do is to check for the type of class of the current with </p>\n\n<p><code>if current_user.class.eql?(class_name_of_user)\n   #perform some action\n end\n</code>\nYou can refine it by making this a private method in your controller and calling it through a before_action callback.</p>\n"}], "owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507054238, "creation_date": 1507019254, "last_edit_date": 1507039707, "question_id": 46540261, "link": "https://stackoverflow.com/questions/46540261/rails-allow-users-to-only-view-or-edit-their-own-content", "title": "Rails: Allow users to only view or edit their own content", "body": "<p>I'm using <code>devise</code>, and up to now I have only added the <code>devise</code> controllers along with the views for three users (user1, user2, admin). I don't have any <code>before_action :authenticate_user!</code> in any controller. Basically <a href=\"https://github.com/plataformatec/devise/wiki/How-to-Setup-Multiple-Devise-User-Models\" rel=\"nofollow noreferrer\">this</a> is what I have done thus far.<br>\nThus, currently all registered users can login and view/edit all content. At this point I would like to restrict each user to view or edit only his content. </p>\n\n<p>This is basically what I'm after: The admin will have access to all of the app. User1 will have access to <code>get 'books/search' =&gt; 'books#search', as: 'search_books'</code> and thus <code>root 'books#search'</code>. And User2 would be able to add/delete/edit a book via the `resources :books and also view his current account.</p>\n\n<p>Not sure what access I should give the <code>resources :plans, resources :accounts, resources :transactions</code>. Plans are in order to purchase plans, along with the transactions, and accounts belong to user2. You can see the associations below.</p>\n\n<p>I did a bit of research on this and found a couple of <code>gems</code>, <code>CanCan</code>, <code>rolify</code> which add roles to users.</p>\n\n<p>Is there a another way I can implement the roles with <code>devise</code>?</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'books#search'\n\n  get 'books/search' =&gt; 'books#search', as: 'search_books'\n  get \"/cancel_subscription\", to: \"accounts#cancel_subscription\", as: \"cancel_subscription\"\n\n  devise_for :admins, controllers: {registrations: 'admins/registrations', sessions: 'admins/sessions'}, :class_name =&gt; 'Admin' do\n    get \"admins/dashboard\"=&gt; \"admins/sessions#dashboard\", :as =&gt; \"admin_dashboard\"\n  end\n\n  devise_for :users1, controllers: {registrations: 'users1/registrations', sessions: 'users2/sessions'}\n devise_for :users2, controllers: {registrations: 'users2/registrations', sessions: 'users2/sessions'}\n\n resources :books do\n  resources :comments\n end\n resources :categories\n resources :plans\n resources :accounts\n resources :transactions, only: [:new, :index, :create]\n end\n\nclass Comment &lt; ApplicationRecord\n  belongs_to :book\n  belongs_to :user1\nend\n\nclass Books &lt; ApplicationRecord\n  has_many :comments\nend\n\nclass User1 &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :comments\nend\n\nclass User2 &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_one :account, autosave: true\n  has_many :books\n\n  accepts_nested_attributes_for :account\nend\n\nclass Admin &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload"], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 0, "last_activity_date": 1507110809, "creation_date": 1507110809, "answer_id": 46561914, "question_id": 46539675, "link": "https://stackoverflow.com/questions/46539675/how-in-ruby-on-rails-4-2-6-make-a-statement-which-has-to-check-for-file-extensio/46561914#46561914", "title": "How in Ruby on Rails 4.2.6 make a statement which has to check for file extension and upload to right public folder", "body": "<p>You can use the <a href=\"https://ruby-doc.org/core-2.2.2/File.html#extname-method\" rel=\"nofollow noreferrer\">File.extname()</a> method:</p>\n\n<blockquote>\n<pre><code>File.extname(\"test.rb\")         #=&gt; \".rb\"\nFile.extname(\"a/b/d/test.rb\")   #=&gt; \".rb\"\nFile.extname(\"foo.\")            #=&gt; \"\"\nFile.extname(\"test\")            #=&gt; \"\"\nFile.extname(\".profile\")        #=&gt; \"\"\nFile.extname(\".profile.sh\")     #=&gt; \".sh\"\n</code></pre>\n</blockquote>\n\n<p>In your particular case, you could do something like this:</p>\n\n<ul>\n<li>sanitize the file name and save it to an instance variable</li>\n<li>extract the extension name and save it to an instance variable</li>\n<li>eventually manipulate your extension name, e.g.\n\n<ul>\n<li>remove the '.' char</li>\n<li>create an hash having every extension as a key and the sub-folder name as a value</li>\n<li>define a method to manipulate the extension and return the folder name</li>\n</ul></li>\n<li>build your path like <code>path = Rails.root.join('public', 'uploads', 'document' sub_folder_name)</code> </li>\n</ul>\n\n<p>The rest of your code should work as it is</p>\n"}], "owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 46561914, "answer_count": 1, "score": 0, "last_activity_date": 1507110809, "creation_date": 1507017131, "question_id": 46539675, "link": "https://stackoverflow.com/questions/46539675/how-in-ruby-on-rails-4-2-6-make-a-statement-which-has-to-check-for-file-extensio", "title": "How in Ruby on Rails 4.2.6 make a statement which has to check for file extension and upload to right public folder", "body": "<p>I'm working on an application which has an upload functionality for documents. I can download various kind of documents like pdf, docx and etc.  However, all is uploaded in one folder like <code>../uploads/documents</code>. \nWhat I have to reach is when the upload began, a statement will check the file extension and upload it to the right folder named as the extension of the file. As an example, I can have a PDF in upload and the app check if the PDF directory exists and if not create one, then upload to that directory. So far I have done what below but I'm new in RoR so I would like to have some suggestions how to make what mentioned above: </p>\n\n<p>This comes from my CTRL:</p>\n\n<pre><code>module UploaderWidget\n  class Engine &lt; ::Rails::Engine\n  end\n\n  def initialize(params = {})\n    @file = params.delete(:file)\n    super\n    if @file\n      self.filename = sanitize_filename(@file.original_filename)\n      self.content_type = @file.content_type\n      self.file_contents = @file.read\n    end\n  end\n\n  def upload_local\n    path = \"#{Rails.root}/public/uploads/document\"\n    FileUtils.mkdir_p(path) unless File.exists?(path)\n    FileUtils.copy(@file.tempfile, path)\n  end\n\n  private\n\n  def sanitize_filename(filename)\n    return File.basename(filename)\n  end\n\n  def document_file_format\n    unless [\"application/pdf\",\"application/vnd.ms-excel\",     \n             \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n             \"application/msword\", \n             \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", \n             \"text/plain\", \"text/csv\", \"application/octet-stream\"].include? self.content_type\n      errors.add(:file, 'Invalid file format.')\n    end\n  end\n\n  NUM_BYTES_IN_MEGABYTE = 1048576\n  def file_size_under_one_mb\n    if (@file.size.to_f / NUM_BYTES_IN_MEGABYTE) &gt; 1\n      errors.add(:file, 'File size cannot be over one megabyte.')\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507018029, "post_id": 46539611, "comment_id": 80033974, "body": "Write the issue fully in the main text. Don&#39;t let the reader follow a link to understand it. Don&#39;t omit the explanation in the main text just because you think you wrote it int the title."}, {"owner": {"reputation": 5118, "user_id": 609782, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ae52db449f67c30243e5f6a7851882c2?s=128&d=identicon&r=PG", "display_name": "Darpan", "link": "https://stackoverflow.com/users/609782/darpan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507019027, "post_id": 46539611, "comment_id": 80034434, "body": "@sawa this IS exactly the excerpt I used from the link, the line of code which is converting the hash to array and back to hash. And this is what I am looking an alternative for."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507019481, "post_id": 46539611, "comment_id": 80034693, "body": "No, not at all."}, {"owner": {"reputation": 5118, "user_id": 609782, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ae52db449f67c30243e5f6a7851882c2?s=128&d=identicon&r=PG", "display_name": "Darpan", "link": "https://stackoverflow.com/users/609782/darpan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1507038732, "post_id": 46539611, "comment_id": 80046614, "body": "@sawa updated my answer to accommodate your suggestions, thanks."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1507040694, "post_id": 46539611, "comment_id": 80047974, "body": "A small memory improvement is <code>original_hash.keys.sample</code> since you can then retrieve the values from the random keys and thus avoid converting the entire hash."}], "answers": [{"tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507019957, "creation_date": 1507019957, "answer_id": 46540451, "question_id": 46539611, "link": "https://stackoverflow.com/questions/46539611/access-random-pair-from-a-large-hash/46540451#46540451", "title": "Access random pair from a &#39;large&#39; hash", "body": "<p>An option would be if you save all the keys in a caching variable and then randomly access one key and return the key value. e.g.</p>\n\n<pre><code>def random_paire(amount: 1)\n  @keys ||= @large_hash.keys\n  @keys.sample(amount).map {|key| { key =&gt; @large_hash[key] } }\nend\n</code></pre>\n\n<p>But I think this is only practical if you will use this in a class. It is not such an good option to use it for a globaly availalble method.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507038334, "post_id": 46545734, "comment_id": 80046287, "body": "Time complexity here is <code>O(N)</code>, which is comparable (same?) to code in the question. But at least memory complexity is way better, yes."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1507040709, "post_id": 46545734, "comment_id": 80047986, "body": "I&#39;m a little surprised that <code>sample</code> isn&#39;t defined on <code>Enumerable</code> to begin with. The implementation would look just like this."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1507038853, "last_edit_date": 1507038853, "creation_date": 1507037188, "answer_id": 46545734, "question_id": 46539611, "link": "https://stackoverflow.com/questions/46539611/access-random-pair-from-a-large-hash/46545734#46545734", "title": "Access random pair from a &#39;large&#39; hash", "body": "<p>You could gernerate a random number first then go with something like </p>\n\n<pre><code>n = rand(large_hash.count)\nnew_h = [large_hash.find.with_index { |_h,i| i == n }].to_h\n#alternatively new_h = large_hash.find.with_index { |h,i| [h].to_h if i == n }\n</code></pre>\n\n<p>Now <code>new_h</code> will be a random key value pair <code>Hash</code> from the <code>large_hash</code> without the converting the whole <code>large_hash</code> to an <code>Array</code>. Or a more obtuse version: </p>\n\n<pre><code>large_hash.find.with_index.with_object({}) do |((k,v),i),obj|\n  obj[k] = v if i == n\nend\n</code></pre>\n\n<p>Note: this will select <strong>a single</strong> pair </p>\n"}], "owner": {"reputation": 5118, "user_id": 609782, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ae52db449f67c30243e5f6a7851882c2?s=128&d=identicon&r=PG", "display_name": "Darpan", "link": "https://stackoverflow.com/users/609782/darpan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 46545734, "answer_count": 2, "score": 0, "last_activity_date": 1507038853, "creation_date": 1507016941, "last_edit_date": 1507038707, "question_id": 46539611, "link": "https://stackoverflow.com/questions/46539611/access-random-pair-from-a-large-hash", "title": "Access random pair from a &#39;large&#39; hash", "body": "<p>I want to access a random pair of key-value from a very large hash.\nI checked <a href=\"https://stackoverflow.com/questions/15454632/is-there-an-equivalent-to-arraysample-for-hashes\">this</a> answer, which led me to this solution - </p>\n\n<pre><code>original_hash.to_a.sample(n).to_h\n</code></pre>\n\n<p>It works well, but it converts whole hash to <code>array</code> for each call, \n<br>Is there any other way this can be done efficiently for a very large <code>hash</code>?</p>\n"}, {"tags": ["ruby", "ssl", "httpclient"], "answers": [{"tags": [], "owner": {"reputation": 1557, "user_id": 2203061, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t9Adk.jpg?s=128&g=1", "display_name": "Zain Zafar", "link": "https://stackoverflow.com/users/2203061/zain-zafar"}, "is_accepted": false, "score": 0, "last_activity_date": 1507018605, "creation_date": 1507018605, "answer_id": 46540076, "question_id": 46539376, "link": "https://stackoverflow.com/questions/46539376/ruby-http-client-which-support-both-async-requests-and-ssl-support-without-cer/46540076#46540076", "title": "ruby - http client which support both async requests and SSL support without cert verification", "body": "<p>You can use <code>eventmachine gem</code> to make http calls asyn. Please take a look at: <a href=\"https://github.com/eventmachine/eventmachine\" rel=\"nofollow noreferrer\">https://github.com/eventmachine/eventmachine</a></p>\n"}], "owner": {"reputation": 1505, "user_id": 368440, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/86328263df46a03a1cae4b3881d4b92d?s=128&d=identicon&r=PG", "display_name": "yoav.str", "link": "https://stackoverflow.com/users/368440/yoav-str"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507023454, "creation_date": 1507015986, "last_edit_date": 1507023454, "question_id": 46539376, "link": "https://stackoverflow.com/questions/46539376/ruby-http-client-which-support-both-async-requests-and-ssl-support-without-cer", "title": "ruby - http client which support both async requests and SSL support without cert verification", "body": "<p>i am looking for an http client who support both </p>\n\n<ol>\n<li>SSL support with verifaction VERIFY_NONE :  <code>http.verify_mode = OpenSSL::SSL::VERIFY_NONE</code></li>\n<li>async calls</li>\n</ol>\n\n<p>what I already covered is a couple of libraries : </p>\n\n<pre><code>net/https\n</code></pre>\n\n<p>which support SSL VERIFY_NONE but has no async mechanism</p>\n\n<pre><code>manticore                  \n</code></pre>\n\n<p>which support async mechanism but <a href=\"https://github.com/cheald/manticore/issues/53\" rel=\"nofollow noreferrer\">failed to support SSL VERIFY_NONE</a></p>\n\n<pre><code>Unirest \n</code></pre>\n\n<p>I failed to find any documentation regarding my 2 requirements </p>\n\n<p>Can anyone please advise me on a rest client which does both? </p>\n"}]