[{"tags": ["ruby-on-rails", "ruby", "foreach", "filter"], "comments": [{"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479951524, "post_id": 40776102, "comment_id": 68777190, "body": "This <code>, :class_name =&gt; &#39;SchoolUser&#39;, :foreign_key =&gt; :school_user_id</code> is redundant, Rails can figure out this for you. Same applies to <code>:homework</code> mapping in part of <code>foreign_key</code>, and to <code>class_name</code> in the rest of mappings."}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479951627, "post_id": 40776102, "comment_id": 68777215, "body": "<code>.where(school_user_id: current_user.id)</code> should be <code>.where(school_user: current_user)</code>"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479951772, "post_id": 40776102, "comment_id": 68777259, "body": "Is <code>current_user</code> an instance of <code>SchoolUser</code> class?"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479951932, "post_id": 40776102, "comment_id": 68777303, "body": "Thanks, I don&#39;t think so, I think it&#39;s an instance of user. User_id is also in school_users model though. I tried above. Same result, renders nothing. Everything goes through school user, thus &lt;% if homework.school_user.user_id == current_user.id %&gt;, this works in that example."}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479952039, "post_id": 40776102, "comment_id": 68777325, "body": "When debugging, replace <code>link_to</code> with debug output, e.g. <code>&lt;%= current_user.id %&gt;, &lt;%= homework_student.inspect %&gt;</code> and post your output."}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479952246, "post_id": 40776102, "comment_id": 68777384, "body": "Does <code>@homework.homework_students.joins(:school_user).where(school&zwnj;&#8203;_user: { user_id: current_user.id })</code> work?"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479952548, "post_id": 40776102, "comment_id": 68777473, "body": "Thanks, posted update in OP, using your code and the error"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479952613, "post_id": 40776102, "comment_id": 68777490, "body": "Above &lt;%= current_user.id %&gt; comes back as 1, school_user is 10001, homework_student.inspect comes back as undefined method"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953041, "post_id": 40776102, "comment_id": 68777596, "body": "Try .joins(:school_user<b>s</b>)"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953186, "post_id": 40776102, "comment_id": 68777617, "body": "Thanks, This error...Association named &#39;school_users&#39; was not found on HomeworkStudent; perhaps you misspelled it?"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953411, "post_id": 40776102, "comment_id": 68777658, "body": "Try .where(school\u200c\u200b_user<b>s</b>:"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953520, "post_id": 40776102, "comment_id": 68777685, "body": "Pal, I owe you one!! Thank you so much, that works. :)"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953551, "post_id": 40776102, "comment_id": 68777693, "body": "@philpirozhkov not sure if this is most efficient way but at least it works!"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1479953593, "post_id": 40776102, "comment_id": 68777702, "body": "How do I mark your comment as right answer??"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479953734, "post_id": 40776102, "comment_id": 68777725, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128889/discussion-between-phil-pirozhkov-and-co2\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1479953701, "creation_date": 1479953701, "answer_id": 40777072, "question_id": 40776102, "link": "https://stackoverflow.com/questions/40776102/ror-filtering-user-options-in-for-each-loop/40777072#40777072", "title": "RoR: Filtering user options in for_each loop", "body": "<p>Should be</p>\n\n<pre><code>@homework.homework_students.joins(:school_user).where(school\u200c\u200b_users: { user_id: current_user.id }).each\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 40777072, "answer_count": 1, "score": 1, "last_activity_date": 1479953701, "creation_date": 1479945500, "last_edit_date": 1495535417, "question_id": 40776102, "link": "https://stackoverflow.com/questions/40776102/ror-filtering-user-options-in-for-each-loop", "title": "RoR: Filtering user options in for_each loop", "body": "<p>I am trying to filter options for complete by school_user_id in my view. This follows on from this question: <a href=\"https://stackoverflow.com/questions/40752826/ror-mark-an-object-complete-save-completed-on-in-other-model/40754170?noredirect=1#comment68757558_40754170\">RoR: Mark an object complete, save completed_on in other model</a></p>\n\n<p>So a student is able to mark a piece of homework complete. But in the view it is rendering 4 complete options because 4 school_users are associated with that piece of homework. I am trying to filter so that only the current school_user's complete option is available.</p>\n\n<p>User and School_user have a one to one relationship.</p>\n\n<p>In my view (this does not work and renders nothing, if where statement removed renders 4 complete options)</p>\n\n<p>homeworks/show.html.erb</p>\n\n<pre><code>&lt;% @homework.homework_students.where(school_user_id: current_user.id).each do |homework_student| %&gt; \n &lt;%= link_to \"complete\", complete_homework_path(:homework_id =&gt; @homework, :home_work_students_id =&gt; homework_student), method: :patch %&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>Models:</p>\n\n<p>school_user.rb</p>\n\n<pre><code>has_many :homework_students, :class_name =&gt; 'HomeworkStudent'\nhas_many :homeworks, :class_name =&gt; 'Homework'\n</code></pre>\n\n<p>homework_student.rb</p>\n\n<pre><code>has_many :homework_ratings, :class_name =&gt; 'HomeworkRating'\nbelongs_to :homework, :class_name =&gt; 'Homework', :foreign_key =&gt; :homework_id, dependent: :destroy\nbelongs_to :school_user, :class_name =&gt; 'SchoolUser', :foreign_key =&gt; :school_user_id\n</code></pre>\n\n<p>homework.rb</p>\n\n<pre><code>has_many :homework_students, :class_name =&gt; 'HomeworkStudent', dependent: :destroy \nbelongs_to :school_user, :class_name =&gt; 'SchoolUser', :foreign_key =&gt; :school_user_id\n</code></pre>\n\n<p>If I was filtering else where I would do something like this: </p>\n\n<pre><code>&lt;% if homework.school_user.user_id == current_user.id %&gt;\n</code></pre>\n\n<p>From the rails console: </p>\n\n<pre><code>irb(main):002:0&gt; search = HomeworkStudent.find(142) \nHomeworkStudent Load (0.5ms) SELECT `homework_students`.* FROM `homework_students` WHERE `homework_students`.`id` = 142 LIMIT 1 \n=&gt; #&lt;HomeworkStudent id: 142, school_user_id: 10001, homework_id: 78, completed_on: \"2016-11-23 18:05:34\", created_at: \"2016-11-22 00:27:24\", updated_at: \"2016-11-23 18:05:34\", completed: nil&gt;\n</code></pre>\n\n<p>As you can see school_user_id is there. It's just a case of filtering out the other completes which are for other users with that homework. But I don't know how to do this with for_each.</p>\n\n<p>Appreciate any help. Thanks.Happy to provide more code/info if needed.</p>\n\n<p>UPDATE:</p>\n\n<pre><code>&lt;% @homework.homework_students.joins(:school_user).where(school\u200c\u200b_user: { user_id: current_user.id }).each do |homework_student| %&gt;\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>Mysql2::Error: Unknown column 'school\u200c\u200b_user.user_id' in 'where clause': SELECT `homework_students`.* FROM `homework_students` INNER JOIN `school_users` ON `school_users`.`id` = `homework_students`.`school_user_id` WHERE `homework_students`.`homework_id` = 78 AND `school\u200c\u200b_user`.`user_id` = 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 23, "last_activity_date": 1499884858, "last_edit_date": 1499884858, "creation_date": 1479947137, "answer_id": 40776306, "question_id": 40775978, "link": "https://stackoverflow.com/questions/40775978/rspec-wrong-number-of-arguments-when-raising-error/40776306#40776306", "title": "Rspec - wrong number of arguments when raising error", "body": "<p>It turns out the problem was with:</p>\n\n<pre><code>and_raise(\n  Aws::S3::Errors::Forbidden\n)\n</code></pre>\n\n<p>Running this shows the same error:</p>\n\n<pre><code>raise(Aws::S3::Errors::Forbidden)\n</code></pre>\n\n<p>What does work is this:</p>\n\n<pre><code>raise(Aws::S3::Errors::Forbidden.new(nil, nil))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 12162076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5m9m2.jpg?s=128&g=1", "display_name": "John Coote", "link": "https://stackoverflow.com/users/12162076/john-coote"}, "is_accepted": false, "score": 1, "last_activity_date": 1599026715, "creation_date": 1599026715, "answer_id": 63699568, "question_id": 40775978, "link": "https://stackoverflow.com/questions/40775978/rspec-wrong-number-of-arguments-when-raising-error/63699568#63699568", "title": "Rspec - wrong number of arguments when raising error", "body": "<p>according to\n<a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/Errors/ServiceError.html#initialize-instance_method\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/Errors/ServiceError.html#initialize-instance_method</a></p>\n<p>the three arguments are</p>\n<ul>\n<li>context (Seahorse::Client::RequestContext)</li>\n<li>message (String)</li>\n<li>data (Aws::Structure) (defaults to: Aws::EmptyStructure.new)</li>\n</ul>\n<p>The <code>message</code> is where you can add your own information.</p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2208, "favorite_count": 2, "accepted_answer_id": 40776306, "answer_count": 2, "score": 13, "last_activity_date": 1599026715, "creation_date": 1479944609, "last_edit_date": 1499884840, "question_id": 40775978, "link": "https://stackoverflow.com/questions/40775978/rspec-wrong-number-of-arguments-when-raising-error", "title": "Rspec - wrong number of arguments when raising error", "body": "<p>So in my code I have this method I'm trying to test:</p>\n\n<pre><code>  # checks if a file already exists on S3\n  def file_exists?(storage_key)\n    begin\n      s3_resource.bucket(@bucket).object(storage_key).exists?\n    rescue Aws::S3::Errors::Forbidden =&gt; e\n      false\n    end\n  end\n</code></pre>\n\n<p>Now I am trying to make two test cases - one for when the file exists, and one for when it doesn't.</p>\n\n<p>Focusing on the failure case. I want to stub out the <code>exists?</code> to raise the <code>Aws::S3::Errors::Forbidden</code> error so that the <code>file_exists?</code> method will return false.</p>\n\n<p>Here's what my test code looks like:</p>\n\n<pre><code>  it \"returns false if the file doesn't already exist\" do\n    allow_any_instance_of(Aws::S3::Object).to receive(:exists?).and_raise(\n      Aws::S3::Errors::Forbidden\n    )\n    expect(instance.file_exists?('foo')).to be false\n  end\n</code></pre>\n\n<p>Running this test I see this:</p>\n\n<pre><code>   wrong number of arguments (given 0, expected 2)\n   # ./lib/s3_client_builder.rb:48:in `file_exists?'\n</code></pre>\n\n<p>Really not clear what's going on here, since the <code>file_exists?</code> method definitely doesn't have an arity of 2 nor does the <code>exists?</code> method I'm stubbing.</p>\n\n<p>To diagnose this, I put a breakpoint in the <code>begin</code> block. I try and run the <code>&lt;object&gt;.exists?</code> line and get the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "ruby-on-rails-5", "rails-postgresql"], "comments": [{"owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "edited": false, "score": 1, "creation_date": 1479943389, "post_id": 40775611, "comment_id": 68775233, "body": "can you try using rails instead of rake like <code>RAILS_ENV=production DISABLE_DATABASE_ENVIRONMENT_CHECK=1 bin&#47;rails db:reset</code>"}, {"owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "reply_to_user": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "edited": false, "score": 0, "creation_date": 1479944758, "post_id": 40775611, "comment_id": 68775654, "body": "No luck, just does the same thing."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2662537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b451c066382f65651f69b50878186711?s=128&d=identicon&r=PG", "display_name": "marahin", "link": "https://stackoverflow.com/users/2662537/marahin"}, "is_accepted": false, "score": 0, "last_activity_date": 1480214968, "creation_date": 1480214968, "answer_id": 40825304, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/40825304#40825304", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>Can you give below a shot?</p>\n\n<pre><code>RAILS_ENV=production rake db:drop\nRAILS_ENV=production rake db:create\n</code></pre>\n\n<p>This is an old method, but that's how I used to reset the database to pristine level.</p>\n"}, {"tags": [], "owner": {"reputation": 525, "user_id": 6371835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eefecc76d20bf812e5ef43add8939d93?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant", "link": "https://stackoverflow.com/users/6371835/prashant"}, "is_accepted": true, "score": 38, "last_activity_date": 1481535628, "last_edit_date": 1481535628, "creation_date": 1481531748, "answer_id": 41096886, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/41096886#41096886", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>Try this it worked for me:</p>\n\n<pre><code>RAILS_ENV=production rake db:drop DISABLE_DATABASE_ENVIRONMENT_CHECK=1 \n</code></pre>\n\n<p>in a single line.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6163002"}, "is_accepted": false, "score": 1, "last_activity_date": 1485546904, "last_edit_date": 1495542898, "creation_date": 1485546904, "answer_id": 41902013, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/41902013#41902013", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>It is not working but  you should run commands like this</p>\n\n<pre><code> bundle exec rake RAILS_ENV=production db:drop DISABLE_DATABASE_ENVIRONMENT_CHECK=1\n</code></pre>\n\n<p>and when you drop the table you have to create it back.So you will get error if you don't have rights to createdb.Here your asnwer <a href=\"https://stackoverflow.com/questions/28116927/postgres-permission-denied-to-create-database-on-rake-dbcreateall\">Postgres permission denied to create database on rake db:create:all</a></p>\n\n<p>when you type <code>psql</code> you exit from there by typing <code>\\q</code>. </p>\n\n<p>Like i said this is not the answer but i hope this will save your time while you are searching. Beacuse i am right there right now. GL&amp;HF</p>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 2878821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQ1jZ.jpg?s=128&g=1", "display_name": "hatenine", "link": "https://stackoverflow.com/users/2878821/hatenine"}, "edited": false, "score": 0, "creation_date": 1549368601, "post_id": 45035922, "comment_id": 95869613, "body": "yep, that&#39;s the way to go if you won&#39;t disconnect your db and can rollback your migrations"}], "tags": [], "owner": {"reputation": 68, "user_id": 7508848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512dca7f2add55b851369e5d304c82fa?s=128&d=identicon&r=PG", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7508848/marshall"}, "is_accepted": false, "score": 1, "last_activity_date": 1535393038, "last_edit_date": 1535393038, "creation_date": 1499779612, "answer_id": 45035922, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/45035922#45035922", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>Well, even though this is an old post, but for future reference, you can do </p>\n\n<pre><code>    rake db:migrate VERSION=0\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>    rake db:migrate\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4433, "user_id": 3390279, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/679111419/picture?type=large", "display_name": "karns", "link": "https://stackoverflow.com/users/3390279/karns"}, "edited": false, "score": 0, "creation_date": 1579293196, "post_id": 46392190, "comment_id": 105731031, "body": "Just noticed the title doesn&#39;t include Heroku, but this is what I was looking for!"}], "tags": [], "owner": {"reputation": 5188, "user_id": 3560614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e54072123df6b051682d95e76d4bd748?s=128&d=identicon&r=PG", "display_name": "Kostas Rousis", "link": "https://stackoverflow.com/users/3560614/kostas-rousis"}, "is_accepted": false, "score": 15, "last_activity_date": 1506269981, "creation_date": 1506269981, "answer_id": 46392190, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/46392190#46392190", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>From Heroku's documentation on <a href=\"https://devcenter.heroku.com/articles/rake\" rel=\"noreferrer\">Running Rake commands</a>:</p>\n\n<blockquote>\n  <p>The db:reset task is not supported. Heroku apps do not have permission to drop and create databases. Use the heroku pg:reset command instead.</p>\n</blockquote>\n\n<p>So instead of trying to have <code>rails</code> or <code>rake db:reset</code>, try this:</p>\n\n<p><code>heroku pg:reset</code></p>\n"}, {"comments": [{"owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "edited": false, "score": 0, "creation_date": 1608564175, "post_id": 47414309, "comment_id": 115615361, "body": "This is the proper way to do this after the import of a production database to your development environment."}, {"owner": {"reputation": 74, "user_id": 408164, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61ac985ad7e093257349bad8d13ea191?s=128&d=identicon&r=PG", "display_name": "Robert Travis Pierce", "link": "https://stackoverflow.com/users/408164/robert-travis-pierce"}, "edited": false, "score": 0, "creation_date": 1614942165, "post_id": 47414309, "comment_id": 117545274, "body": "Thank you for this. I had used my heroku production in development for the first time recently (<code>heroku pg:pull DATABASE_URL my_app_name --app my_app_name --remote production</code>) and didn&#39;t realize I would have to alter the way I dropped it. (<code>rails db:environment:set RAILS_ENV=development; rails db:drop</code>)"}], "tags": [], "owner": {"reputation": 1107, "user_id": 2434464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Q3hER.jpg?s=128&g=1", "display_name": "yozzz", "link": "https://stackoverflow.com/users/2434464/yozzz"}, "is_accepted": false, "score": 32, "last_activity_date": 1526388191, "last_edit_date": 1526388191, "creation_date": 1511270965, "answer_id": 47414309, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/47414309#47414309", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>It also happens when you dump production database into local. If you want to delete it on local machine, you will need to set <code>bin/rails db:environment:set RAILS_ENV=development</code>, and after <code>rake db:drop</code></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 7978026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8ad2f6df053fa6b234effe59f881d7?s=128&d=identicon&r=PG&f=1", "display_name": "Nickolay Efimov", "link": "https://stackoverflow.com/users/7978026/nickolay-efimov"}, "is_accepted": false, "score": 1, "last_activity_date": 1548259599, "creation_date": 1548259599, "answer_id": 54331279, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/54331279#54331279", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>i know, it could be a little late, but, if it fails to drop with standart rails way, u can always use psql like \n<code>psql --u your_user</code></p>\n\n<p>then enter password\ntype <code>\\l</code> to list all db.\nin my case, psql reject to drop single table, and i create additional db, like 'testdb', typed <code>\\c testdb</code> to establish connection with it, then type <code>drop database 'olddb_name';</code>, then <code>create database 'olddb_name';</code> and its done!</p>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1581083216, "creation_date": 1581083216, "answer_id": 60114747, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database/60114747#60114747", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>I had this same issue when working with a Rails 5.2 application and PostgreSQL database in production.</p>\n\n<p><strong>Here's how I solved it</strong>:</p>\n\n<p>First, stop every session using the database to avoid <a href=\"https://stackoverflow.com/a/60114185/11793091\">database is being accessed by other users</a> error.</p>\n\n<pre><code>sudo kill -9 `ps -u postgres -o pid=`\n</code></pre>\n\n<p>Also, log out every connection to the database on the <a href=\"https://www.pgadmin.org/\" rel=\"nofollow noreferrer\">PGAdmin</a> Client if any.</p>\n\n<p>Start the PostgreSQL server, since the kill operation above stopped the PostgreSQL server.</p>\n\n<pre><code>sudo systemctl start postgresql\n</code></pre>\n\n<p>Drop the database in the production environment appending the production arguments.</p>\n\n<pre><code>rails db:drop RAILS_ENV=production DISABLE_DATABASE_ENVIRONMENT_CHECK=1\n</code></pre>\n\n<p>Create the database in the production environment appending the production arguments.</p>\n\n<pre><code>rails db:create RAILS_ENV=production\n</code></pre>\n\n<p>That's all.</p>\n\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20291, "favorite_count": 5, "accepted_answer_id": 41096886, "answer_count": 8, "score": 22, "last_activity_date": 1581083216, "creation_date": 1479942395, "last_edit_date": 1487000575, "question_id": 40775611, "link": "https://stackoverflow.com/questions/40775611/rails-5-how-to-clear-or-delete-production-postgres-database", "title": "Rails 5 how to clear or delete production postgres database", "body": "<p>I am trying to delete a production database so I can start fresh. When I upgraded to rails 5 from rails 4, it is now protecting the production database from accidental deletion. It shows the following error message when I run <code>rake db:reset</code>.</p>\n\n<pre><code>/app# rake db:reset\n  ActiveRecord::SchemaMigration Load (1.8ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (1.6ms)  SELECT \"ar_internal_metadata\".\"value\" FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1  [[\"key\", :environment]]\n  ActiveRecord::SchemaMigration Load (0.2ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (0.3ms)  SELECT \"ar_internal_metadata\".\"value\" FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1  [[\"key\", :environment]]\n  ActiveRecord::SchemaMigration Load (0.3ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (0.2ms)  SELECT \"ar_internal_metadata\".\"value\" FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1  [[\"key\", :environment]]\nrake aborted!\nActiveRecord::ProtectedEnvironmentError: You are attempting to run a destructive action against your 'production' database.\nIf you are sure you want to continue, run the same command with the environment variable:\nDISABLE_DATABASE_ENVIRONMENT_CHECK=1\n/usr/local/bundle/gems/activerecord-5.0.0.1/lib/active_record/tasks/database_tasks.rb:51:in `check_protected_environments!'\n/usr/local/bundle/gems/activerecord-5.0.0.1/lib/active_record/railties/databases.rake:11:in `block (2 levels) in &lt;top (required)&gt;'\n/usr/local/bundle/gems/rake-11.3.0/exe/rake:27:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; db:reset =&gt; db:drop =&gt; db:check_protected_environments\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>It says that my adding the environment variable  DISABLE_DATABASE_ENVIRONMENT_CHECK=1 to the command should work but it does not. I run it and it does nothing.</p>\n\n<pre><code>&lt;606723-x9dh4:/app# DISABLE_DATABASE_ENVIRONMENT_CHECK=1 rake db:reset       \n  ActiveRecord::SchemaMigration Load (1.6ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n</code></pre>\n\n<p>Anyone know what I am doing wrong? Appreciate the help!</p>\n\n<p>UPDATE:</p>\n\n<p>My server is deployed using kubernetes. I am guessing that I am not able to reset the database because the server is running.</p>\n"}, {"tags": ["ruby", "parsing", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1479943275, "creation_date": 1479943275, "answer_id": 40775752, "question_id": 40775465, "link": "https://stackoverflow.com/questions/40775465/arent-parenthesis-supposed-to-be-optional-when-a-hash-is-the-last-argument/40775752#40775752", "title": "Aren&#39;t parenthesis supposed to be optional when a hash is the last argument?", "body": "<p>It becomes ambiguous if you add another key-value pair:</p>\n\n<pre><code>[OpenStruct.new key: \"foo\", other: \"bar\"]\n</code></pre>\n\n<p><code>other: \"bar\"</code> could be another array element:</p>\n\n<pre><code>[OpenStruct.new(key: \"foo\"), other: \"bar\"]\n#=&gt; [#&lt;OpenStruct key=\"foo\"&gt;, {:other=&gt;\"bar\"}]\n</code></pre>\n\n<p>or another argument:</p>\n\n<pre><code>[OpenStruct.new(key: \"foo\", other: \"bar\")]\n#=&gt; [#&lt;OpenStruct key=\"foo\", other=\"bar\"&gt;]\n</code></pre>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40775752, "answer_count": 1, "score": 3, "last_activity_date": 1479943275, "creation_date": 1479941544, "question_id": 40775465, "link": "https://stackoverflow.com/questions/40775465/arent-parenthesis-supposed-to-be-optional-when-a-hash-is-the-last-argument", "title": "Aren&#39;t parenthesis supposed to be optional when a hash is the last argument?", "body": "<p>I am sure that this is usually the case, but I'm not sure why it's not working here:</p>\n\n<p>Here's the code</p>\n\n<pre><code>  let(:stubbed_object_list) { [OpenStruct.new key: \"foo\"] }\n</code></pre>\n\n<p>And here's the error:</p>\n\n<pre><code>SyntaxError: ...filepath...: syntax error, unexpected tLABEL, expecting ']'\n</code></pre>\n\n<p>I can fix the code by instead using <code>OpenStruct.new(key: \"foo\")</code> but I don't see why this is necessary.</p>\n\n<p>I'm thinking it has something to do with the array brackets, because this works fine:</p>\n\n<pre><code>  let(:stubbed_object_list) { OpenStruct.new key: \"foo\" }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "pagination", "instagram-api"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "edited": false, "score": 0, "creation_date": 1479944716, "post_id": 40775800, "comment_id": 68775646, "body": "Can you be more specific about how to get the pagination.next_url since I am not getting that in my response and how to create the method? Thanks!"}, {"owner": {"reputation": 12602, "user_id": 423089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67a6a3703979f63fd3e843333f449b42?s=128&d=identicon&r=PG", "display_name": "krisrak", "link": "https://stackoverflow.com/users/423089/krisrak"}, "reply_to_user": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "edited": false, "score": 0, "creation_date": 1480090441, "post_id": 40775800, "comment_id": 68838490, "body": "When u make the first API call: <code>tags&#47;{tag_name}&#47;media&#47;recent</code>, the response will have a <code>data</code> and <code>pagination</code> items, the value of <code>pagination.next_url</code> will be the same as API URL plus a <code>max_id</code> url param value, the response from this API call will have next 20"}, {"owner": {"reputation": 1634, "user_id": 5703217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Oj8Lb.jpg?s=128&g=1", "display_name": "Muhammad Faisal Iqbal", "link": "https://stackoverflow.com/users/5703217/muhammad-faisal-iqbal"}, "edited": false, "score": 0, "creation_date": 1482750275, "post_id": 40775800, "comment_id": 69863599, "body": "@krisrak I double checked there is no field named pagination or next_url in response. Any Idea that what changed?"}, {"owner": {"reputation": 12602, "user_id": 423089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67a6a3703979f63fd3e843333f449b42?s=128&d=identicon&r=PG", "display_name": "krisrak", "link": "https://stackoverflow.com/users/423089/krisrak"}, "edited": false, "score": 0, "creation_date": 1482768924, "post_id": 40775800, "comment_id": 69869998, "body": "it will not be in sandbox mode"}], "tags": [], "owner": {"reputation": 12602, "user_id": 423089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67a6a3703979f63fd3e843333f449b42?s=128&d=identicon&r=PG", "display_name": "krisrak", "link": "https://stackoverflow.com/users/423089/krisrak"}, "is_accepted": false, "score": 0, "last_activity_date": 1479943519, "creation_date": 1479943519, "answer_id": 40775800, "question_id": 40775367, "link": "https://stackoverflow.com/questions/40775367/how-to-get-more-than-20-posts-instagram-api-rails/40775800#40775800", "title": "How to get more than 20 posts Instagram API (Rails)", "body": "<p>In the API response get the <code>pagination.next_url</code> and make API call, this will give you next 20, and then do the same until <code>pagination.next_url</code> is <code>null</code></p>\n"}], "owner": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1479943519, "creation_date": 1479940940, "question_id": 40775367, "link": "https://stackoverflow.com/questions/40775367/how-to-get-more-than-20-posts-instagram-api-rails", "title": "How to get more than 20 posts Instagram API (Rails)", "body": "<p>I built a web app that renders photos from the Instagram API and I have the live token.</p>\n\n<p>Wondering how I can pull more than 20 photos, I know there is the pagination but I am confused with the docs and how to actually implement this on my code</p>\n\n<p>This is what I have to pull the 20 photos, how do I pull more?</p>\n\n<pre><code> @response = client.get(\"tags/#{@tag_name}/media/recent\")\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1479942194, "post_id": 40775169, "comment_id": 68774871, "body": "Are you actually supposed to sort the entire array? From your example, it looks like you might have to insert a number in an already sorted array (keeping it sorted)."}, {"owner": {"reputation": 43, "user_id": 7196884, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/689a2eeb24b654dbbf439a4b52e8aa9b?s=128&d=identicon&r=PG&f=1", "display_name": "dzikakoza", "link": "https://stackoverflow.com/users/7196884/dzikakoza"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1479946115, "post_id": 40775169, "comment_id": 68775992, "body": "Yes, I wanted to insert a number in an already sorted array, keeping it sorted"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1479968294, "post_id": 40775169, "comment_id": 68781739, "body": "Unless this is homework. it&#39;s rarely a good idea to compete with the C-speed insertion or sorting methods provided by Ruby. In <i>most</i> cases, they will vastly outperform a roll-your-own solution."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1479941417, "post_id": 40775205, "comment_id": 68774610, "body": "Was <code>list.push(number).sort</code> too simple? ;-)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1479941167, "last_edit_date": 1479941167, "creation_date": 1479940173, "answer_id": 40775205, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/40775205#40775205", "title": "Ruby: insert and sort numbers", "body": "<p>use <a href=\"http://ruby-doc.org/core-2.3.2/Array.html#method-i-sort\" rel=\"nofollow noreferrer\">Array#sort</a>:</p>\n\n<pre><code>def insert_number(list,number=false)\n  number.is_a?(Numeric) ? list.push(number).sort : list.sort\nend\n</code></pre>\n\n<p>The above method uses the <em>ternary operator</em> which is a short form of an if-statement.</p>\n"}, {"comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1480012484, "post_id": 40775410, "comment_id": 68807837, "body": "Why not use #sort! to avoid returning a new array from the method? I get that <code>list &lt;&lt; number</code> will modify the closure variable directly, but #sort will return a new array from the method rather than <i>list</i> itself."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 3, "last_activity_date": 1479941703, "last_edit_date": 1479941703, "creation_date": 1479941233, "answer_id": 40775410, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/40775410#40775410", "title": "Ruby: insert and sort numbers", "body": "<p>I'd do something like:</p>\n\n<pre><code>def insert_number(list, number)\n  (list &lt;&lt; number).sort\nend\n\nlist = [1, 2, 3]\ninsert_number(list, 2.1) # =&gt; [1, 2, 2.1, 3]\ninsert_number(list, 4.1) # =&gt; [1, 2, 2.1, 3, 4.1]\ninsert_number([], 1) # =&gt; [1]\n</code></pre>\n\n<p>The problem is this changes <code>list</code>. If that's not desired then use <code>dup</code>:</p>\n\n<pre><code>def insert_number(list, number)\n  (list.dup &lt;&lt; number).sort\nend\n\nlist = [1, 2, 3]\ninsert_number(list, 2.1) # =&gt; [1, 2, 2.1, 3]\ninsert_number(list, 4.1) # =&gt; [1, 2, 3, 4.1]\ninsert_number([], 1) # =&gt; [1]\n</code></pre>\n\n<p>or a \"splat\" AKA <code>*</code>:</p>\n\n<pre><code>def insert_number(list, number)\n  [*list, number].sort\nend\n\nlist = [1, 2, 3]\ninsert_number(list, 2.1) # =&gt; [1, 2, 2.1, 3]\ninsert_number(list, 4.1) # =&gt; [1, 2, 3, 4.1]\ninsert_number([], 1) # =&gt; [1]\n</code></pre>\n\n<p><code>[*list, number]</code> tells Ruby to explode the array <code>list</code> into its elements, effectively creating a new array:</p>\n\n<pre><code>[1, 2, 3, number]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 2, "creation_date": 1479967579, "post_id": 40775543, "comment_id": 68781454, "body": "<code>&lt;&lt;</code> is faster than <code>+</code> in this case, because it doesn&#39;t have to create an extra array."}], "tags": [], "owner": {"reputation": 21, "user_id": 7183854, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-loGlpG0rgxg/AAAAAAAAAAI/AAAAAAAAAAs/M1fF-9wXOiQ/photo.jpg?sz=128", "display_name": "Jon Murdoch", "link": "https://stackoverflow.com/users/7183854/jon-murdoch"}, "is_accepted": false, "score": 2, "last_activity_date": 1479941967, "creation_date": 1479941967, "answer_id": 40775543, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/40775543#40775543", "title": "Ruby: insert and sort numbers", "body": "<p>A little shorter without having to use dup.</p>\n\n<p><code>def insert_number(list, number)\n  (list + [number]).sort\nend\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1479942371, "post_id": 40775561, "comment_id": 68774925, "body": "Recent Ruby versions have <code>bsearch_index</code>"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1479942528, "post_id": 40775561, "comment_id": 68774973, "body": "@pjs I think it&#39;s implied that it is sorted. Or you can sort it only once in the beginning. If you have a number of insertions you will benefit a lot."}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1479943013, "post_id": 40775561, "comment_id": 68775132, "body": "@pjs, I&#39;ve edited my answer to be more clear about my assumption, thank you for your notice."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1480182752, "post_id": 40775561, "comment_id": 68861630, "body": "@pjs: Unfortunately, the OP chose to specify the fact that the input array is always sorted in the comments instead of in the question."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1480185327, "post_id": 40775561, "comment_id": 68862445, "body": "Too bad that wasn&#39;t in the original problem statement, it&#39;s important info.  On a totally unrelated note, I&#39;d suggest changing the name of the mutating version to end with a bang."}], "tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 4, "last_activity_date": 1479942976, "last_edit_date": 1479942976, "creation_date": 1479942076, "answer_id": 40775561, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/40775561#40775561", "title": "Ruby: insert and sort numbers", "body": "<blockquote>\n  <p>bsearch only works if the original input array is already sorted, which is not a pre-condition. \u2013 @pjs </p>\n</blockquote>\n\n<p>Considering your original array is sorted you can use binary search here. It will perform much better because it won't need to perform expensive sorting procedure on each insert.</p>\n\n<p>This one mutates original array</p>\n\n<pre><code>def insert_number(arr, num)\n  i = (0...arr.size).bsearch{ |a| arr[a] &gt; num }\n  i ||= arr.size\n  arr.insert(i, num)\nend\n\narr = []\ninsert_number(arr, 1)\n#=&gt; [1]\ninsert_number(arr, 2)\n# =&gt; [1, 2]\ninsert_number(arr, 2.1)\n# =&gt; [1, 2, 2.1]\ninsert_number(arr, 1.3)\n#=&gt; [1, 1.3, 2, 2.1]\n</code></pre>\n\n<p>And this one will return new array on each call</p>\n\n<pre><code>def insert_number(arr, num)\n  i = (0...arr.size).bsearch{ |a| arr[a] &gt; num }\n  i ||= arr.size\n  arr[0, i] + [num] + arr[i..-1]\n  # or\n  # arr.dup.insert(i, num)\nend\n\narr = []\narr = insert_number(arr, 1)\n#=&gt; [1]\narr = insert_number(arr, 2)\n# =&gt; [1, 2]\narr = insert_number(arr, 2.1)\n# =&gt; [1, 2, 2.1]\narr = insert_number(arr, 1.3)\n#=&gt; [1, 1.3, 2, 2.1]\n</code></pre>\n\n<p>PS:</p>\n\n<blockquote>\n  <p>Recent Ruby versions have bsearch_index \u2013 @Stefan</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1480185632, "post_id": 40779195, "comment_id": 68862538, "body": "The method shouldn&#39;t mutate inputs unless it&#39;s named <code>insert_number!</code>."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1480186554, "post_id": 40779195, "comment_id": 68862885, "body": "@pjs You may be misunderstanding the convention that  <a href=\"https://github.com/bbatsov/ruby-style-guide#dangerous-method-bang\" rel=\"nofollow noreferrer\">&quot;names...should end with an exclamation mark <b>if there exists a safe version</b> of that <i>dangerous</i> method.&quot;</a> Bang methods are not inherently (or even just) about mutation; rather, they <i>differentiate</i> similarly-named methods like <code>sort</code> and <code>sort!</code>. Because it&#39;s a style issue rather than a language or syntax issue, your mileage may legitimately vary."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1480186893, "post_id": 40779195, "comment_id": 68862990, "body": "I fall in the camp that things that methods which change pre-existing state are inherently dangerous.  I understand that bang is a style issue, but I like the widespread convention of letting users know to watch out for potential side effects."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1480012624, "last_edit_date": 1480012624, "creation_date": 1479968043, "answer_id": 40779195, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/40779195#40779195", "title": "Ruby: insert and sort numbers", "body": "<h2>Use In-Place Array Methods</h2>\n\n<p>In-place operations on the array should be fastest, since they won't have to create additional arrays. For example:</p>\n\n<pre><code>@array = [2.0, 3.5, 4.8]\n\ndef insert_number float\n  (@array &lt;&lt; float).sort!\nend\n</code></pre>\n\n<p>If you can't operate directly on a shared variable, or want to reduce coupling, then you can still shave some time with the in-place sort rather than returning a <em>new</em> sorted array:</p>\n\n<pre><code>def insert_number array, float\n  (array.dup &lt;&lt; float).sort!\nend\n</code></pre>\n\n<p>In all cases, appending to an array with <code>&lt;&lt;</code> should be faster than creating new arrays with the <code>+</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 6821007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYxs9.jpg?s=128&g=1", "display_name": "Daniyar Kayirbolatov", "link": "https://stackoverflow.com/users/6821007/daniyar-kayirbolatov"}, "is_accepted": false, "score": 0, "last_activity_date": 1486997891, "last_edit_date": 1486997891, "creation_date": 1486997537, "answer_id": 42206931, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers/42206931#42206931", "title": "Ruby: insert and sort numbers", "body": "<p>Actually we do not need any sort because we know that our array is sorted, and then when we will new number <code>x</code> we can put it into array with O(n) time, where <code>n</code> is size of array. We will go one by one, let's take <code>i as index</code> and our new array will be built like <code>NewArray = (left numbers &lt; x) + x + (x &lt; right number):</code> here <code>left numbers</code> are that numbers less than x and <code>right number</code> are numbers bigger than x. </p>\n\n<pre><code>ispushed = false\narr.each do |number|\nif number &lt; x\nNewArray.push(number)\nelsif ispushed == false\nispushed=true \nNewArray.push(x) \nnewArray.push(number)\nelse \nNewArray.push(number)\n</code></pre>\n\n<p>if our x is biggest so that ispushed will be remained false\nin the end we can just push our 'x' number</p>\n\n<p>if you use sort it works by O(nlogn) time complexity </p>\n"}], "owner": {"reputation": 43, "user_id": 7196884, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/689a2eeb24b654dbbf439a4b52e8aa9b?s=128&d=identicon&r=PG&f=1", "display_name": "dzikakoza", "link": "https://stackoverflow.com/users/7196884/dzikakoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 6, "score": 4, "last_activity_date": 1486997891, "creation_date": 1479940032, "last_edit_date": 1479940949, "question_id": 40775169, "link": "https://stackoverflow.com/questions/40775169/ruby-insert-and-sort-numbers", "title": "Ruby: insert and sort numbers", "body": "<p>I have to create a method in Ruby which inserts a number and sorts the resulting list. </p>\n\n<p>Input would be like:</p>\n\n<pre><code>insert_number([2.0,3.5,4.8], 4.1) \n</code></pre>\n\n<p>which should output:</p>\n\n<pre><code>[2.0,3.5,4.1,4.8]\n</code></pre>\n\n<p>With input like:</p>\n\n<pre><code>insert_number([], 5.1) \n</code></pre>\n\n<p>it should output:</p>\n\n<pre><code>[5.1]\n</code></pre>\n\n<p>Here is my incomplete code:</p>\n\n<pre><code>def insert_number(list, number)\n  new_list = []               \n  position = 0                         \n  number_has_been_inserted = false     # Remember whether a new number \n  # has been inserted.\n  while position &lt; list.length \n    position += 1\n    new_list = list + [number] \n    ...\n  end\n  ...\n    new_list\nend\n\nprint insert_number([2.0,3.5,4.8], 4.1)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "owner": {"reputation": 31, "user_id": 7202390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10bdd7b25d83ebce15e038f1bfcdae9c?s=128&d=identicon&r=PG&f=1", "display_name": "J. Log", "link": "https://stackoverflow.com/users/7202390/j-log"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1479938606, "creation_date": 1479938606, "question_id": 40774868, "link": "https://stackoverflow.com/questions/40774868/ruby-on-rails-is-it-possible-to-add-categories-to-tags-using-gem-acts-as-taggab", "title": "Ruby on rails, Is it possible to add categories to tags using gem acts as taggable on?", "body": "<p>I need to use fixed list of tags for each model (column_name = model_name).\nI also need ability to create/update/delete all tags by category.\nSo, is it possible with acts_as_taggable?\nOr better way is write everything without this gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1479944017, "post_id": 40774752, "comment_id": 68775452, "body": "Is that the whole warning?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1479948345, "post_id": 40774752, "comment_id": 68776489, "body": "@Stefan edited to see the whole warning"}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 2, "creation_date": 1479952005, "post_id": 40774752, "comment_id": 68777319, "body": "What does the code look like from your model throwing the warning? <code>&#47;myapp&#47;app&#47;models&#47;post.rb:37</code>"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1479980791, "post_id": 40774752, "comment_id": 68788514, "body": "There is no warning in console, when starting sever. There is only warnings when running spec. Mb I misunderstood you question"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1479980891, "post_id": 40777713, "comment_id": 68788585, "body": "When I do this <code>self.random_link = parameterize(&quot;#{theme} #{Time.now.to_formatted_s(:number)}&quot;)</code> it gives me <code>NoMethodError: undefined method &quot;parameterize&quot; for #&lt;Post:0x007f9297a36f48&gt;</code> don&#39;t quite understand why"}, {"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "edited": false, "score": 0, "creation_date": 1479992659, "post_id": 40777713, "comment_id": 68796784, "body": "&quot;#{theme}-#{Time.now.to_formatted_s(:number)}&quot;.parameterize"}], "tags": [], "owner": {"reputation": 893, "user_id": 718409, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4877fe662f99d0104f1523183ba39f76?s=128&d=identicon&r=PG&f=1", "display_name": "mountriv99", "link": "https://stackoverflow.com/users/718409/mountriv99"}, "is_accepted": false, "score": 1, "last_activity_date": 1479959094, "creation_date": 1479959094, "answer_id": 40777713, "question_id": 40774752, "link": "https://stackoverflow.com/questions/40774752/ruby-rails-use-separator-instead/40777713#40777713", "title": "Ruby/Rails: Use `separator: &#39;-&#39;` instead", "body": "<p>Try this instead</p>\n\n<pre><code>parameterize(\"Donald E. Knuth\", separator: '_') # =&gt; \"donald_e_knuth\"\n</code></pre>\n\n<p><a href=\"http://www.rubydoc.info/gems/activesupport/5.0.0/ActiveSupport%2FInflector%3Aparameterize\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/activesupport/5.0.0/ActiveSupport%2FInflector%3Aparameterize</a></p>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1479980836, "post_id": 40780013, "comment_id": 68788540, "body": "I don&#39;t quite understand, can you give me an example? (how to use it)"}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1479971496, "creation_date": 1479971496, "answer_id": 40780013, "question_id": 40774752, "link": "https://stackoverflow.com/questions/40774752/ruby-rails-use-separator-instead/40780013#40780013", "title": "Ruby/Rails: Use `separator: &#39;-&#39;` instead", "body": "<blockquote>\n  <p>DEPRECATION WARNING: Passing the separator argument as a positional\n  parameter is deprecated and will soon be removed. \n  Use <code>separator: '-'</code> instead.</p>\n</blockquote>\n\n<p>This is telling you not to insert <code>-</code> directly into your string, but to pass the options hash or keyword argument <code>separator: '-'</code> to your method instead from line 37 of your Post model.</p>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1479999234, "post_id": 40787275, "comment_id": 68801006, "body": "Yes, you right. It now must be gems author issue. I&#39;ll write to author to let him know that this problem is appears"}], "tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 1, "last_activity_date": 1479992968, "creation_date": 1479992968, "answer_id": 40787275, "question_id": 40774752, "link": "https://stackoverflow.com/questions/40774752/ruby-rails-use-separator-instead/40787275#40787275", "title": "Ruby/Rails: Use `separator: &#39;-&#39;` instead", "body": "<p>This deprecation was removed 10 days ago. <a href=\"https://github.com/rails/rails/commit/0189f4db6fe518de8909b66b7f30046bac52dedc\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/commit/0189f4db6fe518de8909b66b7f30046bac52dedc</a></p>\n\n<p>Probably one of gems use old format of <code>parameterize</code> method.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "accepted_answer_id": 40787275, "answer_count": 3, "score": 8, "last_activity_date": 1479992968, "creation_date": 1479938016, "last_edit_date": 1479991968, "question_id": 40774752, "link": "https://stackoverflow.com/questions/40774752/ruby-rails-use-separator-instead", "title": "Ruby/Rails: Use `separator: &#39;-&#39;` instead", "body": "<p>Writing test for my project, and notice this warning it terminal when running rspec</p>\n\n<pre><code>DEPRECATION WARNING: Passing the separator argument as a positional\nparameter is deprecated and will soon be removed. \nUse `separator: '-'` instead.\n(called from add_link at /myapp/app/models/post.rb:37)\n</code></pre>\n\n<p>I have an action before save record, looks like </p>\n\n<pre><code>self.link = theme + '-' + Time.now.to_formatted_s(:number)\n</code></pre>\n\n<p>And I've tried to find some information about this but I don't really don't understanding what this warning means.</p>\n\n<p>** EDIT **</p>\n\n<p>Well, I've changed for <code>\"#{theme}-#{Time.now.to_formatted_s(:number)}\"</code> but it still gives me the same warning.</p>\n\n<p>Than I decided to go other way and changed for <code>\"#{theme}(#{date})\"</code>. The <code>date</code> method look like:</p>\n\n<pre><code>date = [Time.now.day, Time.now.month, Time.now.year]\ndate = date.join('-')\ndate\n</code></pre>\n\n<p>But it still gives me an error.</p>\n\n<p>I don't think it's really big problem, but still I want t figure out why is that happening.</p>\n\n<p>** EDIT **</p>\n\n<p>Figure it out, it must gem that I use cause that problem (the gem is called <code>the_string_to_slug</code>) I will do future research to fix this warning with gem or I'll try to find way to replace it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "nomethoderror"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1479937883, "post_id": 40774606, "comment_id": 68773343, "body": "I think you need to change reservations_path to restaurant_reservations_path, the problem is in the name of the route, I believe.  This should be in the reservations/new.html.erb"}, {"owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "edited": false, "score": 0, "creation_date": 1479937980, "post_id": 40774606, "comment_id": 68773395, "body": "Check out <a href=\"http://stackoverflow.com/questions/8706774/undefined-method-with-path-while-using-rails-form-for\">this answer</a>, it seems to be very similar to what you need."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5106593, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155762006480290/picture?type=large", "display_name": "Jon Maldia", "link": "https://stackoverflow.com/users/5106593/jon-maldia"}, "edited": false, "score": 0, "creation_date": 1498851484, "post_id": 40774768, "comment_id": 76688323, "body": "Thanks. This was very helpful."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938127, "creation_date": 1479938127, "answer_id": 40774768, "question_id": 40774606, "link": "https://stackoverflow.com/questions/40774606/i-am-getting-this-error-nomethoderror-at-undefined-method/40774768#40774768", "title": "I am getting this error: NoMethodError at ... undefined method", "body": "<p>Add 'path' to the end of your link and the id of the resturaraunt. Something along the lines of</p>\n\n<pre><code>new_restaurant_reservation_path(:restuarant_id) \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5106593, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155762006480290/picture?type=large", "display_name": "Jon Maldia", "link": "https://stackoverflow.com/users/5106593/jon-maldia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479938127, "creation_date": 1479937301, "question_id": 40774606, "link": "https://stackoverflow.com/questions/40774606/i-am-getting-this-error-nomethoderror-at-undefined-method", "title": "I am getting this error: NoMethodError at ... undefined method", "body": "<p>I am a newbie on rails. I am building an app with Users, Restaurants, and Reservations. Everything was fine until I added the reservations and associations. </p>\n\n<p>I am using nested resources for reservations and restaurants. My routes file has this. </p>\n\n<pre><code>resources :restaurants do\n  resources :reservations\nend\n</code></pre>\n\n<p>I added a reservations link on my restaurant view to link to <strong>new_restaurant_reservation</strong>. When I click on that link, it gives me this error:</p>\n\n<pre><code>NoMethodError at /restaurants/14/reservations/new\nundefined method `reservations_path' for #&lt;#&lt;Class:0x007fc50d96ba98&gt;:0x007fc51001a518&gt;\nDid you mean?  resolve_asset_path\n</code></pre>\n\n<p>Please help and let me know what I am doing wrong. </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479943538, "post_id": 40774582, "comment_id": 68775291, "body": "Your question is asking for opinions which is actually off-topic on SO. Neither is a particularly good solution since they don&#39;t take advantage of the power of the language. Instead, @ChrisHeald&#39;s answer to <a href=\"http://stackoverflow.com/a/40774746/128421\">stackoverflow.com/a/40774746/128421</a> is exactly what I&#39;d have used. It&#39;s elegant and takes advantage of the language."}], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1479937733, "creation_date": 1479937733, "answer_id": 40774691, "question_id": 40774582, "link": "https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes/40774691#40774691", "title": "How to efficiently convert minutes to &quot;hours:minutes&quot;", "body": "<p>I prefer your answer (as a Rubyist) to that of the accepted one. You could minify some things, but it reads cleaner than their solution as is. Avoid using the <code>return</code> keyword unless you absolutely need to: Ruby automatically returns the last evaluated statement in a method. Any answer you will get here is going to be subjective to some degree. </p>\n\n<p>The best way to answer the question of \"is this idiomatic\" when alone is to consult the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">Ruby Style Guide</a>. I understand the desire to learn idioms while learning a programming language, but keep in mind: you need to form those habits for whatever <em>your personal objective</em> dictates, within reasonable bounds.</p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 6501572, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5e07d8e107026aba046390ecf2ba9981?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6501572/jeremy"}, "edited": false, "score": 1, "creation_date": 1479938077, "post_id": 40774694, "comment_id": 68773434, "body": "so instead of : return &quot;#{hrs}:#{min}&quot;, I would just use:&quot;#{hrs}:#{min}&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "reply_to_user": {"reputation": 148, "user_id": 6501572, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5e07d8e107026aba046390ecf2ba9981?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6501572/jeremy"}, "edited": false, "score": 1, "creation_date": 1479939139, "post_id": 40774694, "comment_id": 68773833, "body": "@Jeremy Correct"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "is_accepted": true, "score": 2, "last_activity_date": 1479937744, "creation_date": 1479937744, "answer_id": 40774694, "question_id": 40774582, "link": "https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes/40774694#40774694", "title": "How to efficiently convert minutes to &quot;hours:minutes&quot;", "body": "<p>Your answer is perfectly fine, if not a better more succinct way for making the method. Performance wise, your answer is only minimally better as you're using a modulos operation where they are using a while loop in their code. I believe the tutorial is answered the way it is, is so that beginners can better grasp control flow and loops. Lastly, you can leave out the 'return' on the second to last line as ruby will implicitly return the last thing it evaluates in a method. But that's more of a individual preference just incase you come across it. </p>\n"}, {"comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 6, "creation_date": 1479938027, "post_id": 40774746, "comment_id": 68773417, "body": "I&#39;d just go with <code>&quot;%d:%02d&quot; % minutes.divmod(60)</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1479938412, "post_id": 40774746, "comment_id": 68773568, "body": "@ChrisHeald ooh that&#39;s pretty neat."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 2, "creation_date": 1479942138, "post_id": 40774746, "comment_id": 68774850, "body": "See <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\">Kernel#format</a> for an explanation of the formatting codes @Chris used in his excellent suggestion. <a href=\"http://ruby-doc.org//core-2.3.0/Fixnum.html#method-i-divmod\" rel=\"nofollow noreferrer\">Fixnum#divmod</a> is a very handy method that&#39;s greatly underused. sagar, if you like the suggestion, you should edit your answer to incorporate it. After all, we want to present the best solution. If you want to attribute the change to Chris, I suggest you do that in a comment, to keep the answer &quot;clean&quot;."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479944330, "post_id": 40774746, "comment_id": 68775522, "body": "@CarySwoveland thanks for the suggestion and especially the link to <code>Kernel#format</code>, I will have to get stuck in. Regarding <code>divmod</code>, I&#39;m pretty sure (amongst many other things) I picked it up from you at some point!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1479944400, "post_id": 40774746, "comment_id": 68775543, "body": "You could also use <a href=\"http://ruby-doc.org/core-2.3.2/String.html#method-i-rjust\" rel=\"nofollow noreferrer\"><code>rjust</code></a> to pad with zeros, i.e. <code>minutes.to_s.rjust(2, &#39;0&#39;)</code>"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938559, "last_edit_date": 1479938559, "creation_date": 1479937989, "answer_id": 40774746, "question_id": 40774582, "link": "https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes/40774746#40774746", "title": "How to efficiently convert minutes to &quot;hours:minutes&quot;", "body": "<p>Here'a one way to do it in Ruby using <a href=\"http://ruby-doc.org/core-2.3.2/Fixnum.html#method-i-divmod\" rel=\"nofollow noreferrer\">Fixnum#divmod</a>:</p>\n\n<pre><code>def hours_mins mins\n  hours, minutes = mins.divmod 60\n  if minutes &lt; 10\n    minutes = minutes.to_s.prepend '0'\n  end\n  \"#{hours}:#{minutes}\"\nend\n\nputs hours_mins   5 #=&gt; 0:05\nputs hours_mins 125 #=&gt; 2:05\nputs hours_mins 150 #=&gt; 2:30\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1479952474, "post_id": 40776139, "comment_id": 68777452, "body": "I like the format of your answer (as well as the content). Can you set it to music?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1479945781, "last_edit_date": 1495540386, "creation_date": 1479945781, "answer_id": 40776139, "question_id": 40774582, "link": "https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes/40776139#40776139", "title": "How to efficiently convert minutes to &quot;hours:minutes&quot;", "body": "<p>Your answer is OK, but you could have shortened it further.</p>\n\n<p>You can remove the conditional from your code, the <code>if</code> part works just fine in either case:</p>\n\n<pre><code>def time_conversion(minutes)\n  hrs = 0\n  min = 0\n  min = minutes % 60\n  hrs = (minutes - min) / 60\n  min = format('%02d',min)\n  return \"#{hrs}:#{min}\"\nend\n</code></pre>\n\n<p>And you can remove the default values:</p>\n\n<pre><code>def time_conversion(minutes)\n  min = minutes % 60\n  hrs = (minutes - min) / 60\n  min = format('%02d',min)\n  return \"#{hrs}:#{min}\"\nend\n</code></pre>\n\n<p>And because this is integer division, you can remove the subtraction:</p>\n\n<pre><code>def time_conversion(minutes)\n  min = minutes % 60\n  hrs = minutes / 60\n  min = format('%02d',min)\n  return \"#{hrs}:#{min}\"\nend\n</code></pre>\n\n<p>And you can move the entire formatting into <code>format</code>:</p>\n\n<pre><code>def time_conversion(minutes)\n  min = minutes % 60\n  hrs = minutes / 60\n  format('%d:%02d', hrs, min)\nend\n</code></pre>\n\n<p>And you can use <a href=\"http://ruby-doc.org/core-2.3.2/Numeric.html#method-i-divmod\" rel=\"nofollow noreferrer\"><code>divmod</code></a> instead of <code>%</code> and <code>/</code>:</p>\n\n<pre><code>def time_conversion(minutes)\n  hrs, min = minutes.divmod(60)\n  format('%d:%02d', hrs, min)\nend\n</code></pre>\n\n<p>And you can avoid the variables if you use a splat (<code>*</code>):</p>\n\n<pre><code>def time_conversion(minutes)\n  format('%d:%02d', *minutes.divmod(60))\nend\n</code></pre>\n\n<p>And you can avoid the splat if you use <a href=\"http://ruby-doc.org/core-2.3.2/String.html#method-i-25\" rel=\"nofollow noreferrer\"><code>%</code></a> instead of <code>format</code> because it takes an array:</p>\n\n<pre><code>def time_conversion(minutes)\n  '%d:%02d' % minutes.divmod(60)\nend\n</code></pre>\n\n<p>Chris Heald already suggested this in a <a href=\"https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes#comment68773417_40774746\">comment</a>, but I thought it might be helpful to show the refactoring steps.</p>\n"}], "owner": {"reputation": 148, "user_id": 6501572, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5e07d8e107026aba046390ecf2ba9981?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6501572/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 1, "accepted_answer_id": 40774694, "answer_count": 4, "score": 0, "last_activity_date": 1479945781, "creation_date": 1479937172, "last_edit_date": 1479942658, "question_id": 40774582, "link": "https://stackoverflow.com/questions/40774582/how-to-efficiently-convert-minutes-to-hoursminutes", "title": "How to efficiently convert minutes to &quot;hours:minutes&quot;", "body": "<p>For a tutorial I need to write a method that will take in a number of minutes, and return a string that formats the number into \"hours:minutes\".</p>\n\n<p>My answer was:</p>\n\n<pre><code>def time_conversion(minutes)\n  hrs = 0\n  min = 0\n  if minutes &gt;= 60\n    min = minutes % 60\n    hrs = (minutes - min) / 60\n    min = format('%02d',min)\n  else\n    min = minutes\n  end\n  return \"#{hrs}:#{min}\"\nend\n</code></pre>\n\n<p>The tutorial answer is:</p>\n\n<pre><code>def time_conversion(minutes)\n  hours = 0\n\n  while minutes &gt;= 60\n    hours += 1\n    minutes -= 60\n  end\n\n  if minutes &lt; 10\n    minutes_s = \"0\" + minutes.to_s\n  else\n    minutes_s = minutes.to_s\n  end\n\n  return hours.to_s + \":\" + minutes_s\nend\n</code></pre>\n\n<p>They both seem to return the same thing. Is my answer OK, or is theirs a better solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 3831994, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/001c53315c6249ecb9c6bbddd63a4481?s=128&d=identicon&r=PG&f=1", "display_name": "Alb", "link": "https://stackoverflow.com/users/3831994/alb"}, "is_accepted": false, "score": 0, "last_activity_date": 1581180208, "last_edit_date": 1581180208, "creation_date": 1581178293, "answer_id": 60128611, "question_id": 40774146, "link": "https://stackoverflow.com/questions/40774146/why-is-pretty-print-not-working-in-this-snippet-for-profiling-rails-application/60128611#60128611", "title": "Why is pretty_print not working in this snippet for profiling Rails application memory?", "body": "<p>I think your <code>MemoryProfiler.report do ... end</code> block returns nil (which I don't know why it happens).</p>\n\n<p>When report is present, it executes MemoryProfiler's <code>pretty_print</code> method on an instance of <code>MemoryProfiler::Results</code>.</p>\n\n<p>When report is nil, it executes Ruby's <code>pretty_print</code> method on an instance of a <code>NilClass</code>.</p>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1581180208, "creation_date": 1479935137, "last_edit_date": 1479939243, "question_id": 40774146, "link": "https://stackoverflow.com/questions/40774146/why-is-pretty-print-not-working-in-this-snippet-for-profiling-rails-application", "title": "Why is pretty_print not working in this snippet for profiling Rails application memory?", "body": "<p>So I'm following along in the Railer Performance book and it tells me to make following code snippet in environment.rb:</p>\n\n<pre><code>MemoryProfiler.report do\n  # Load the Rails application.\n  require File.expand_path('../application', __FILE__)\n\n  # Initialize the Rails application.\n  Rails.application.initialize!\n\nend.pretty_print(to_file: \"test.txt\")\n</code></pre>\n\n<p>Then I'm supposed to run <code>rails runner \"puts 'hello world'\"</code></p>\n\n<p>But when I do, I get:</p>\n\n<pre><code>/Users/samantha/.rbenv/versions/2.3.1/lib/ruby/2.3.0/pp.rb:316:in `pretty_print': undefined method `text' for {:to_file=&gt;\"test.txt\"}:Hash (NoMethodError)\nDid you mean?  test\n</code></pre>\n\n<p>Is pretty_print a ruby gem that I am supposed to install?</p>\n"}, {"tags": ["json", "ruby", "mongoid"], "comments": [{"owner": {"reputation": 103, "user_id": 6872917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iw4nZ.jpg?s=128&g=1", "display_name": "Elijah Schutz", "link": "https://stackoverflow.com/users/6872917/elijah-schutz"}, "edited": false, "score": 0, "creation_date": 1479935026, "post_id": 40773973, "comment_id": 68772060, "body": "Is <code>@params</code> the JSON hash or the Rails variable? Is it possible to show the output of <code>format_entry</code>?"}, {"owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "reply_to_user": {"reputation": 103, "user_id": 6872917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iw4nZ.jpg?s=128&g=1", "display_name": "Elijah Schutz", "link": "https://stackoverflow.com/users/6872917/elijah-schutz"}, "edited": false, "score": 0, "creation_date": 1479935528, "post_id": 40773973, "comment_id": 68772287, "body": "@ElijahSchutz format entry is not working is merge fail. params is the JSON hash"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479935945, "post_id": 40773973, "comment_id": 68772481, "body": "Do you have the JSON file as text, and you want to convert it to a nested hash? If so, <code>require &#39;json&#39;; myhash = JSON.parse(text);</code> will do that."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479936505, "post_id": 40773973, "comment_id": 68772730, "body": "It seems to me, @JimStewart, the OP needs more than just this. The hash must be &#39;flattened&#39; too."}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479936804, "post_id": 40773973, "comment_id": 68772854, "body": "You&#39;re right, I misread."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1479936833, "post_id": 40773973, "comment_id": 68772869, "body": "In the example code, <code>ps</code> doesn&#39;t exist as a hash until <i>after</i> <code>map</code> returns; when <code>ps.merge!</code> is evaluated, <code>ps</code> is still <code>nil</code>."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1479937181, "post_id": 40773973, "comment_id": 68773041, "body": "Come to that, if <code>@params</code> is a hash, then <code>h</code> will be an array with 2 elements, one the key and one the value. Also, <code>Hash#map</code> is just <code>Enumerable#map</code>, whose return value is an array, not a hash."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1480102737, "post_id": 40773973, "comment_id": 68843180, "body": "@Seb did my solution work for you? If so, can you mark it as the accepted answer. If not, what is still unclear to you?"}, {"owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1480621032, "post_id": 40773973, "comment_id": 69050112, "body": "@Dbz Yes it works. thqnks"}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1479937954, "post_id": 40774616, "comment_id": 68773381, "body": "No. My answer wouldn&#39;t improve yours. As soon as I see it I upvoted it and was about to delete mine when I saw your comment."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1479938062, "post_id": 40774616, "comment_id": 68773426, "body": "Thank you. We&#39;re all just trying to help! I think you did something cool/similar on your answer using <code>class</code>?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1479938311, "post_id": 40774616, "comment_id": 68773529, "body": "I found your way more efficient, more direct. And the important part is the OP has a solution. You pointed it right. We are all here to help."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": true, "score": 3, "last_activity_date": 1479937736, "last_edit_date": 1479937736, "creation_date": 1479937350, "answer_id": 40774616, "question_id": 40773973, "link": "https://stackoverflow.com/questions/40773973/transform-json-to-hashmap-in-ruby/40774616#40774616", "title": "transform JSON to hashmap in Ruby", "body": "<p>It looks like to me you are trying to \"flatten\" the inner hashes into one big hash. Flatten being incorrect because you want to prepend the hash's key to the sub-hash's key. This will require looping through the hash, and then looping again through each sub hash. This code example will only work if you have 1 layer deep. if you have multiple layers, then I would suggest making two methods, or a recursive method.</p>\n\n<pre><code>@business = { # This is a hash, not a json blob, but you can take json and call JSON.parse(blob) to turn it into a hash.\n    \"localbusiness\":{\n        \"name\": \"toto\",\n        \"phone\": \"+11234567890\"\n    },\n    \"date\":\"05/02/2016\",\n    \"time\":\"5:00pm\",\n    \"count\":\"4\",\n    \"userInfo\":{\n        \"name\": \"John Doe\",\n        \"phone\": \"+10987654321\",\n        \"email\":\"john.doe@unknown.com\",\n        \"userId\":\"user1234333\"\n    }\n}\n\n@squashed_business = Hash.new\n\n@business.each do |k, v|\n  if v.is_a? Hash\n    v.each do |key, value|\n      @squashed_business.merge! (k.to_s + \"_\" + key.to_s) =&gt; value\n    end\n  else\n    @squashed_business.merge! k =&gt; v\n  end\nend\n</code></pre>\n\n<p>I noticed that you are getting \"unexpected\" outcomes when enumerating over a hash <code>@params.each { |h| ... }</code>  because it gives you both a key and a value. Instead you want to do <code>@params.each { |key, value| ... }</code> as I did in the above code example.</p>\n"}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 40774616, "answer_count": 1, "score": 2, "last_activity_date": 1491922023, "creation_date": 1479934414, "last_edit_date": 1491922023, "question_id": 40773973, "link": "https://stackoverflow.com/questions/40773973/transform-json-to-hashmap-in-ruby", "title": "transform JSON to hashmap in Ruby", "body": "<p>I am trying to convert a json file which contain object and array to a JSON file.</p>\n\n<p>Below is the JSON file</p>\n\n<pre><code>{\n    \"localbusiness\":{\n        \"name\": \"toto\",\n        \"phone\": \"+11234567890\"\n    },\n    \"date\":\"05/02/2016\",\n    \"time\":\"5:00pm\",    \n    \"count\":\"4\",\n    \"userInfo\":{\n        \"name\": \"John Doe\",\n        \"phone\": \"+10987654321\",\n        \"email\":\"john.doe@unknown.com\",\n        \"userId\":\"user1234333\"\n    }\n}\n</code></pre>\n\n<p>my goal is to save this is a database such as MongoId. I would like to use map to get something like:</p>\n\n<pre><code>localbusiness_name =&gt; \"toto\",\nlocalbusiness_phone =&gt; \"+11234567890\",\ndate =&gt; \"05/02/2016\",\n...\nuserInfo_name =&gt; \"John Doe\"\n...\n</code></pre>\n\n<p>I have tried map but it's not splitting the array of local business or userInfo</p>\n\n<pre><code>def format_entry\n  ps = @params.map do | h |\n    ps.merge!(h)\n    @@logger.info(\"entry #{h}\")\n  end\n  @@logger.info(\"formatting the data #{ps}\")\n  ps\nend\n</code></pre>\n\n<p>I do not really how to parse each entry and rebuild the name</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "unicorn", "systemd"], "comments": [{"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 2, "creation_date": 1479933317, "post_id": 40773697, "comment_id": 68771286, "body": "<code>Nov 23 20:22:36 azure unicorn_appname[39284]: &#47;etc&#47;init.d&#47;unicorn_appname: 30: cd: can&#39;t cd to &#47;home&#47;deploy&#47;appname</code>  check path if exist and application file are accessible, permissions and etc."}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479933526, "post_id": 40773697, "comment_id": 68771375, "body": "PRINT these lines of your config  # app settings USER=&quot;deploy&quot; APP_NAME=&quot;appname&quot; APP_ROOT=&quot;/home/$USER/$APP_NAME&quot; ENV=&quot;production&quot; ????"}, {"owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "reply_to_user": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 1, "creation_date": 1479934301, "post_id": 40773697, "comment_id": 68771733, "body": "@num8er pointed me in the good direction (I forgot to replace the author&#39;s user by mine in a configuration file), but I have other problems now so later I&#39;ll update the question or post an answer"}], "answers": [{"tags": [], "owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "is_accepted": true, "score": 1, "last_activity_date": 1479935026, "creation_date": 1479935026, "answer_id": 40774129, "question_id": 40773697, "link": "https://stackoverflow.com/questions/40773697/failed-to-start-unicorn-application-server/40774129#40774129", "title": "Failed to start Unicorn application server", "body": "<p>As it was pointed out in the comments the problem was in this line:</p>\n\n<pre><code>/etc/init.d/unicorn_appname: 30: cd: can't cd to /home/deploy/appname\n</code></pre>\n\n<p>In the tutorial there is a file called <code>/etc/init.d/unicorn_appname</code> and I forgot to replace the user of the author (<code>deploy</code>) by mine. Later I encountered another problem. Same immediate output, different answer by <code>systemctl</code> but it all came down to this line:</p>\n\n<pre><code>bundler: command not found: unicorn\n</code></pre>\n\n<p>I solved it by installing the dependencies of my project globally:</p>\n\n<pre><code>sudo bundle install\n</code></pre>\n\n<p>I don't know if this is the best option and I still don't know if the overall system will work as a whole because I haven't configued <code>nginx</code> yet but I had no error messages from the command <code>sudo service unicorn_appname start</code>. Other answers are welcomed.</p>\n"}], "owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3706, "favorite_count": 0, "accepted_answer_id": 40774129, "answer_count": 1, "score": 1, "last_activity_date": 1493796377, "creation_date": 1479933198, "question_id": 40773697, "link": "https://stackoverflow.com/questions/40773697/failed-to-start-unicorn-application-server", "title": "Failed to start Unicorn application server", "body": "<p>I'm following <a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-unicorn-and-nginx-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">this tutorial</a> to set up a Rails server, but when I try to start the unicorn application server I encounter this error:</p>\n\n<pre><code>$ sudo service unicorn_appname start\nJob for unicorn_appname.service failed because the control process exited with error code. See \"systemctl status unicorn_appname.service\" and \"journalctl -xe\" for details.\n</code></pre>\n\n<p>More details:</p>\n\n<pre><code>$ systemctl status unicorn_appname.service\n\u25cf unicorn_appname.service - LSB: starts the unicorn app server\n   Loaded: loaded (/etc/init.d/unicorn_appname; bad; vendor preset: enabled)\n   Active: failed (Result: exit-code) since Wed 2016-11-23 20:22:36 UTC; 1min 33s ago\n     Docs: man:systemd-sysv-generator(8)\n  Process: 39284 ExecStart=/etc/init.d/unicorn_appname start (code=exited, status=1/FAILURE)\n\nNov 23 20:22:36 azure systemd[1]: Starting LSB: starts the unicorn app server...\nNov 23 20:22:36 azure unicorn_appname[39284]: /etc/init.d/unicorn_appname: 30: cd: can't cd to /home/deploy/appname\nNov 23 20:22:36 azure systemd[1]: unicorn_appname.service: Control process exited, code=exited status=1\nNov 23 20:22:36 azure systemd[1]: Failed to start LSB: starts the unicorn app server.\nNov 23 20:22:36 azure systemd[1]: unicorn_appname.service: Unit entered failed state.\nNov 23 20:22:36 azure systemd[1]: unicorn_appname.service: Failed with result 'exit-code'.\n</code></pre>\n\n<p>I tried typing these error messages on google but none gave any helpful results, and I'm kind of stuck now because I'm a total beginner with Rails and setting up web servers in general. Any tips?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1479930960, "last_edit_date": 1479930960, "creation_date": 1479930597, "answer_id": 40773006, "question_id": 40772940, "link": "https://stackoverflow.com/questions/40772940/how-exactly-do-quotes-in-ruby-work-to-form-a-string/40773006#40773006", "title": "How exactly do quotes in Ruby work to form a string?", "body": "<blockquote>\n  <p>What exactly are the quotes doing?</p>\n</blockquote>\n\n<p>The quotes themselves do nothing. They're just markers. Here's where a string starts, here's where it ends. When your code is being parsed to be executed, the <strong>parser</strong> will take what's between the quotes and make a string from that content. Simple as that.</p>\n\n<p>If you take a compilers course in the school, chances are that you'll have to implement your own parser and compiler/interpreter for some toy language. Likely, with strings too. It's a fun exercise! :)</p>\n\n<p>BTW, in ruby you can write a string literal in many ways. Not only using quotes. This is a string too, for example</p>\n\n<pre><code>html = &lt;&lt;-HTML\n  &lt;head&gt;&lt;title&gt;stack overflow&lt;/title&gt;&lt;/head&gt;\nHTML\nhtml # =&gt; \"  &lt;head&gt;&lt;title&gt;stack overflow&lt;/title&gt;&lt;/head&gt;\\n\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 1414100, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/raaf9.jpg?s=128&g=1", "display_name": "Chk", "link": "https://stackoverflow.com/users/1414100/chk"}, "is_accepted": false, "score": 1, "last_activity_date": 1479932833, "creation_date": 1479932833, "answer_id": 40773626, "question_id": 40772940, "link": "https://stackoverflow.com/questions/40772940/how-exactly-do-quotes-in-ruby-work-to-form-a-string/40773626#40773626", "title": "How exactly do quotes in Ruby work to form a string?", "body": "<p>In ruby the most common syntax for creating a string is using quotes like below.</p>\n\n<pre><code>my_msg = \"Hello\"\n</code></pre>\n\n<p>This is same in most other languages as well (c, java etc). AFAIK the language's parser is responsible for detecting the above syntax and continue to store <code>Hello</code> as a string in <code>my_msg</code> variable.</p>\n\n<p>Ruby also has many <a href=\"https://ruby-doc.org/core-2.2.0/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">other syntax</a> for creating strings.</p>\n"}], "owner": {"reputation": 13, "user_id": 2399917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23487bf350b56db4dd1d75d799a9f307?s=128&d=identicon&r=PG", "display_name": "De-Bug", "link": "https://stackoverflow.com/users/2399917/de-bug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 40773006, "answer_count": 2, "score": 1, "last_activity_date": 1479932833, "creation_date": 1479930326, "question_id": 40772940, "link": "https://stackoverflow.com/questions/40772940/how-exactly-do-quotes-in-ruby-work-to-form-a-string", "title": "How exactly do quotes in Ruby work to form a string?", "body": "<p>I don't quite understand how string quotes in Ruby actually work. How does wrapping something in a quote suddenly make it a string? What exactly are the quotes doing? I'm trying to understand the C or core language implementation of this.</p>\n"}, {"tags": ["ruby", "amazon-s3", "pre-signed-url"], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1479932492, "creation_date": 1479932492, "answer_id": 40773522, "question_id": 40772745, "link": "https://stackoverflow.com/questions/40772745/awss3presigner-presigned-url-returns-403-forbidden-with-virtual-host/40773522#40773522", "title": "Aws::S3::Presigner presigned_url returns 403 forbidden with virtual_host", "body": "<p>These are the reasons</p>\n\n<ol>\n<li>Access Denied</li>\n<li>Account issue</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/BY7Dp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BY7Dp.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 7201913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94b197cdfa2490ee8ea277a7bc732738?s=128&d=identicon&r=PG&f=1", "display_name": "Sean West", "link": "https://stackoverflow.com/users/7201913/sean-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480098767, "creation_date": 1479929513, "last_edit_date": 1480098767, "question_id": 40772745, "link": "https://stackoverflow.com/questions/40772745/awss3presigner-presigned-url-returns-403-forbidden-with-virtual-host", "title": "Aws::S3::Presigner presigned_url returns 403 forbidden with virtual_host", "body": "<p>I'm trying to make a private object on a static website hosted S3 bucket which is accessible from a signed URL. Seems simple enough, however using the following code with <code>virtual_host</code> enabled seems to always result in a 403 Forbidden. If I disable <code>virtual_host</code> then it works as expected.</p>\n\n<pre><code>url = Aws::S3::Presigner.new.presigned_url(\n    :get_object,\n    :bucket =&gt; BUCKET,\n    :key =&gt; KEY,\n    :virtual_host =&gt; true\n)\n\nuri = URI.parse(url)\nhttp = Net::HTTP.new(uri.host, uri.port)\nrequest = Net::HTTP::Get.new(uri.request_uri)\nresp = http.request(request)\nputs resp.body\n</code></pre>\n\n<p>Is there a permissions/setting that is missing to make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "activerecord", "redis"], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 2599861, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6d85a95672eb0a5ffab8dcfb91efe49?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Claudino", "link": "https://stackoverflow.com/users/2599861/andr%c3%a9-claudino"}, "edited": false, "score": 0, "creation_date": 1479934723, "post_id": 40774005, "comment_id": 68771933, "body": "Thanks for the answer, but my questions is not about it. I know once saved in cache there is no need to go back in database, and is that what I want, but what is beeing cached is not the data itself, but the database loader, so, once read from cache, data need to be loaded from database again, and is exaclty that what I want to avoid.  I&#39;ve already changed config files, cache is beeing saved and used, but as I said, what is beeing saved is not what I need."}, {"owner": {"reputation": 409, "user_id": 3782116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac4b01ba038dabd520c7a23c24dfc61?s=128&d=identicon&r=PG&f=1", "display_name": "VishalTheBeast", "link": "https://stackoverflow.com/users/3782116/vishalthebeast"}, "reply_to_user": {"reputation": 448, "user_id": 2599861, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6d85a95672eb0a5ffab8dcfb91efe49?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Claudino", "link": "https://stackoverflow.com/users/2599861/andr%c3%a9-claudino"}, "edited": false, "score": 0, "creation_date": 1479935963, "post_id": 40774005, "comment_id": 68772492, "body": "If this is the case, then why dont you cache the exact result received from the database, by fetching it instead of the relation."}, {"owner": {"reputation": 448, "user_id": 2599861, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6d85a95672eb0a5ffab8dcfb91efe49?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Claudino", "link": "https://stackoverflow.com/users/2599861/andr%c3%a9-claudino"}, "edited": false, "score": 0, "creation_date": 1479939090, "post_id": 40774005, "comment_id": 68773814, "body": "I am asking how to do that. This is my question."}], "tags": [], "owner": {"reputation": 409, "user_id": 3782116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac4b01ba038dabd520c7a23c24dfc61?s=128&d=identicon&r=PG&f=1", "display_name": "VishalTheBeast", "link": "https://stackoverflow.com/users/3782116/vishalthebeast"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934516, "last_edit_date": 1592644375, "creation_date": 1479934516, "answer_id": 40774005, "question_id": 40772140, "link": "https://stackoverflow.com/questions/40772140/how-to-cache-a-list-resulted-from-database-in-a-rails-query/40774005#40774005", "title": "How to cache a list resulted from database in a Rails query", "body": "<p>Once its saved in the cache, it does not need to read the database again until the cache is invalidated. In case you are using this locally, here is something you should have in mind. This is from <a href=\"http://guides.rubyonrails.org/caching_with_rails.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/caching_with_rails.html</a>.</p>\n<blockquote>\n<p>To play around with caching locally you'll want to enable caching in your local environment by setting config.action_controller.perform_caching to true in relevant config/environments/*.rb.</p>\n<p>Changing the value of config.action_controller.perform_caching will only have an effect on the caching provided by the Action Controller component. For instance, it will not impact low-level caching.</p>\n</blockquote>\n"}], "owner": {"reputation": 448, "user_id": 2599861, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6d85a95672eb0a5ffab8dcfb91efe49?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Claudino", "link": "https://stackoverflow.com/users/2599861/andr%c3%a9-claudino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479934516, "creation_date": 1479926995, "last_edit_date": 1479928248, "question_id": 40772140, "link": "https://stackoverflow.com/questions/40772140/how-to-cache-a-list-resulted-from-database-in-a-rails-query", "title": "How to cache a list resulted from database in a Rails query", "body": "<p>How do I cache a list resulted from database in a Rails query?</p>\n\n<pre><code>@total_untagged = Rails.cache.fetch(\"tags_controller/untagged/@total_untagged\", expires_in: 1.hour) do\n        InventoryApi::BaseEntity\\\n          .joins(@object_type.to_sym)\n          .includes(:base_entities_tags)\n          .where({ base_entities_tags: { base_entity_id: nil }})\n          .size.to_int\n        end\n</code></pre>\n\n<p>This code is loading the InventoryApi::BaseEntity model and saving it in a cache with a key value of:</p>\n\n<pre><code>tags_controller/untagged/@total_untagged\n</code></pre>\n\n<p>The cached result is an Instance, lazily-loaded from the database, not eager-loaded as the class with the field values. </p>\n\n<p>Once it's lazily-loaded, when the cache is read it needs to read the database again, in fact, I gain nothing caching.</p>\n\n<p>How can I cache the final result, not the database relation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479926626, "post_id": 40771957, "comment_id": 68767905, "body": "Have you looked at the YAML and <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/psych/rdoc/Psych.html\" rel=\"nofollow noreferrer\">Psych documentation</a>? YAML uses Psych to load and parse the data. You&#39;re looking for how to use <code>load_file</code>."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1479927402, "post_id": 40771957, "comment_id": 68768325, "body": "<a href=\"http://yaml-online-parser.appspot.com/\" rel=\"nofollow noreferrer\">yaml-online-parser.appspot.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1479926663, "creation_date": 1479926663, "answer_id": 40772052, "question_id": 40771957, "link": "https://stackoverflow.com/questions/40771957/how-to-convert-a-yaml-sequence-to-array/40772052#40772052", "title": "How to convert a YAML sequence to array", "body": "<p>A YAML string can be converted back into Ruby data like so:</p>\n\n<pre><code>1.9.3-p551 :005 &gt; yaml = &lt;&lt;YAML\n1.9.3-p551 :006\"&gt; redis:\n1.9.3-p551 :007\"&gt;   host:\n1.9.3-p551 :008\"&gt;   port:\n1.9.3-p551 :009\"&gt;   sentinels:\n1.9.3-p551 :010\"&gt;     - 1.34.79.100 \n1.9.3-p551 :011\"&gt;     - 1.45.79.101\n1.9.3-p551 :012\"&gt;     - 1.46.79.102\n1.9.3-p551 :013\"&gt; YAML\n=&gt; \"redis:\\n  host:\\n  port:\\n  sentinels:\\n    - 1.34.79.100\\n    - 1.45.79.101\\n    - 1.46.79.102\\n\"\n1.9.3-p551 :014 &gt; YAML.load(yaml)\n=&gt; {\"redis\"=&gt;{\"host\"=&gt;nil, \"port\"=&gt;nil, \"sentinels\"=&gt;[\"1.34.79.100\", \"1.45.79.101\", \"1.46.79.102\"]}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479926987, "post_id": 40772075, "comment_id": 68768099, "body": "You probably want <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/psych/rdoc/Psych.html#method-c-load_file\" rel=\"nofollow noreferrer\"><code>load_file</code></a>, not <code>load</code>. <code>load</code> expects a string containing the YAML to parse, whereas <code>load_file</code> wants a filename which it then reads and parses. Also, using <code>config</code> as the outer variable and also as the block&#39;s parameter isn&#39;t good practice."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479927100, "post_id": 40772075, "comment_id": 68768176, "body": "@theTinMan You are right, thanks. I fixed my answer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1479971938, "last_edit_date": 1479971938, "creation_date": 1479926727, "answer_id": 40772075, "question_id": 40771957, "link": "https://stackoverflow.com/questions/40771957/how-to-convert-a-yaml-sequence-to-array/40772075#40772075", "title": "How to convert a YAML sequence to array", "body": "<p>I would do something like this:</p>\n\n<pre><code>require 'yaml'\nredis_configuration = YAML.load_file(Rails.root.join('config', 'redis.yml'))\n\nSidekiq.configure_client do |config|\n  config.redis = { \n    master_name: 'util-master'\n    sentinels: redis_configuration['redis']['sentinels'].map { |sentinel|\n      \"sentinel://#{sentinel}:23679\"\n    },\n    failover_reconnect_timeout: 20,\n    url: \"redis://#{redis_configuration['redis']['host']}:6379/12\" \n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480002242, "creation_date": 1479926265, "last_edit_date": 1480002242, "question_id": 40771957, "link": "https://stackoverflow.com/questions/40771957/how-to-convert-a-yaml-sequence-to-array", "title": "How to convert a YAML sequence to array", "body": "<p>I need to loop through a YAML sequence and build an array with the sequence items. </p>\n\n<p>I assume my YAML sequence should look like this in my <code>config/redis</code>:</p>\n\n<pre><code>redis:\n  host:\n  port:\n  sentinels:\n    - 1.34.79.100\n    - 1.45.79.101\n    - 1.46.79.102\n</code></pre>\n\n<p>In my <code>config/initializers/sidekiq.rb</code> I have a <code>configure_client</code> block that looks like:</p>\n\n<pre><code>Sidekiq.configure_client do |config|\n  config.redis = { \n    master_name: 'util-master'\n    sentinels: [\n      \"sentinel://#{first_redis_sentinel}:23679\"\n      \"sentinel://#{second_redis_sentinel}:23679\"\n      \"sentinel://#{third_redis_sentinel}:23679\"\n    ],\n    failover_reconnect_timeout: 20,\n    url: \"redis://#{redis_host}:6379/12\" }\nend\n</code></pre>\n\n<p>I don't know how to dynamically load the listed Redis sentinels into that array. Do I need to build that array outside of the hash and <code>configure_client</code> block?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "path", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "edited": false, "score": 0, "creation_date": 1479925753, "post_id": 40771795, "comment_id": 68767472, "body": "I did that but I have no permission so I used <code>sudo gem install bundler</code> instead which is probably the reason why I&#39;m having problems"}, {"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "reply_to_user": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "edited": false, "score": 0, "creation_date": 1479925888, "post_id": 40771795, "comment_id": 68767541, "body": "I guess you should take a look to grant the permission... I believe you should do it without the sudo command... good luck bro"}], "tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": false, "score": 1, "last_activity_date": 1479925695, "creation_date": 1479925695, "answer_id": 40771795, "question_id": 40771549, "link": "https://stackoverflow.com/questions/40771549/rails-looking-for-wrong-path-of-bundler/40771795#40771795", "title": "Rails looking for wrong path of bundler", "body": "<p>try <code>gem install bundler</code> before doing it</p>\n"}, {"tags": [], "owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "is_accepted": false, "score": 0, "last_activity_date": 1479926646, "last_edit_date": 1495542270, "creation_date": 1479926646, "answer_id": 40772049, "question_id": 40771549, "link": "https://stackoverflow.com/questions/40771549/rails-looking-for-wrong-path-of-bundler/40772049#40772049", "title": "Rails looking for wrong path of bundler", "body": "<p>Ok so what I did was:</p>\n\n<ol>\n<li><p><a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">Quick rvm install</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/17599229/rvm-determine-and-install-latest-version-of-ruby\">Intalling the latest version of Ruby with rvm</a></p></li>\n<li><code>gem install bundler</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": true, "score": 2, "last_activity_date": 1479927045, "creation_date": 1479927045, "answer_id": 40772152, "question_id": 40771549, "link": "https://stackoverflow.com/questions/40771549/rails-looking-for-wrong-path-of-bundler/40772152#40772152", "title": "Rails looking for wrong path of bundler", "body": "<p>add <code>PATH=$PATH:$HOME/.gem/ruby/&lt;version&gt;/bin</code> to your <code>.bash_profile</code> and source it.</p>\n\n<p>Then you can install gems for your user without sudo with <code>gem install bundler --install-dir ~/.gem</code> </p>\n"}], "owner": {"reputation": 2053, "user_id": 3076438, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bf8b428c78e1dab170f1273169e06457?s=128&d=identicon&r=PG&f=1", "display_name": "gsmafra", "link": "https://stackoverflow.com/users/3076438/gsmafra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "accepted_answer_id": 40772152, "answer_count": 3, "score": 0, "last_activity_date": 1479927045, "creation_date": 1479924756, "question_id": 40771549, "link": "https://stackoverflow.com/questions/40771549/rails-looking-for-wrong-path-of-bundler", "title": "Rails looking for wrong path of bundler", "body": "<p>I'm trying to create a new Ruby-on-Rails application with a fresh installation on Linux. When I execute</p>\n\n<pre><code>rails new appname -d postgresql\n</code></pre>\n\n<p>I receive the following error</p>\n\n<pre><code>         run  bundle install --local\n/usr/bin/ruby2.3: No such file or directory -- /usr/bin/bundle (LoadError)\n         run  bundle exec spring binstub --all\n/usr/bin/ruby2.3: No such file or directory -- /usr/bin/bundle (LoadError)\n</code></pre>\n\n<p>But <code>bundle</code> is installed in a different path:</p>\n\n<pre><code>$ which bundle\n/usr/local/bin/bundle\n</code></pre>\n\n<p>Is it preferable to change the path of <code>bundle</code> or to specify to <code>rails</code> that it is in a different path? And what is the best way to do it (either changing the path or specifying it)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1479924207, "post_id": 40770994, "comment_id": 68766603, "body": "Please read the <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a> document and put source code in plain text instead of images."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1479927473, "post_id": 40770994, "comment_id": 68768368, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;, then remove the images and copy/paste the text of the message into the question, along with the <i>absolute minimum</i> code that demonstrates the problem. <a href=\"http://stackoverflow.com/q/5508110/128421\">We can&#39;t reuse an image</a>, nor can the search engines index them, which helps others find your question and solve their coding problem."}], "answers": [{"tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1479922919, "creation_date": 1479922919, "answer_id": 40771055, "question_id": 40770994, "link": "https://stackoverflow.com/questions/40770994/what-is-nomethoderror-in-rails/40771055#40771055", "title": "What is NoMethodError in rails?", "body": "<p>In <code>find_item</code> you are setting <code>@post</code>, not <code>@item</code>, which makes it nil on the view.</p>\n"}, {"tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": false, "score": 1, "last_activity_date": 1479922954, "creation_date": 1479922954, "answer_id": 40771060, "question_id": 40770994, "link": "https://stackoverflow.com/questions/40770994/what-is-nomethoderror-in-rails/40771060#40771060", "title": "What is NoMethodError in rails?", "body": "<p>This happens when there's no matching method in the instance that you're accesing in this case, in this case if you look at the <code>show</code> action it only does the <code>find_item</code> and the <code>find_item</code> only returns a <code>@post</code> instance not an <code>@item</code> instance.</p>\n\n<p>Just change <code>@post</code> to <code>@item</code> in the controller</p>\n"}, {"tags": [], "owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "is_accepted": false, "score": 0, "last_activity_date": 1479923606, "creation_date": 1479923606, "answer_id": 40771233, "question_id": 40770994, "link": "https://stackoverflow.com/questions/40770994/what-is-nomethoderror-in-rails/40771233#40771233", "title": "What is NoMethodError in rails?", "body": "<p>ActiveRecord automatically gives you getter and setter methods for the instance attributes. <code>@item.title</code> calls <code>title</code> method on the <code>@item</code> object. If the method is not defined on the object on which it is being called then <code>NoMethodError</code> exception is raised.</p>\n\n<p>The error that you see when you access show is because @item instance variable is not initialized in the controller and thus not available in the view file <code>show.html.erb</code>, i.e. it is nil by default and Rails is complaining that there is no method title on the <code>nil</code> object(as nil object doesnt have that method, <code>@item</code> or <code>@post</code> might have it depending on whether the respective table has that column)</p>\n"}], "owner": {"reputation": 35, "user_id": 5154360, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10152968662853456/picture?type=large", "display_name": "Hisham Malik", "link": "https://stackoverflow.com/users/5154360/hisham-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 40771055, "answer_count": 3, "score": -3, "last_activity_date": 1479923606, "creation_date": 1479922755, "question_id": 40770994, "link": "https://stackoverflow.com/questions/40770994/what-is-nomethoderror-in-rails", "title": "What is NoMethodError in rails?", "body": "<p>I am not a newbie in rails so this is embarassing but I keep getting a nomethoderror I don't know what s happening.</p>\n\n<p>this is the error</p>\n\n<p><a href=\"https://i.stack.imgur.com/Dyyd5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dyyd5.png\" alt=\"enter image description here\"></a></p>\n\n<p>and this is my controller</p>\n\n<p><a href=\"https://i.stack.imgur.com/JB7XT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JB7XT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "windows", "rubygems", "ruby-on-rails-5", "rabl"], "comments": [{"owner": {"reputation": 1905, "user_id": 3432608, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119087799/picture?type=large", "display_name": "Sebasti&#225;n Espinosa", "link": "https://stackoverflow.com/users/3432608/sebasti%c3%a1n-espinosa"}, "edited": false, "score": 1, "creation_date": 1479922377, "post_id": 40770776, "comment_id": 68765501, "body": "I strongly recommend the use of a virtual machine on ruby on rails development, on linux you dont have this sort of problems."}], "answers": [{"comments": [{"owner": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1479996302, "post_id": 40785215, "comment_id": 68799248, "body": "Even then i&#39;m wondering why i couldn&#39;t possibly find relevant links when I search <code>rabl windows</code> with or without keywords <code>rails</code>, <code>gem</code>, <code>install</code>, <code>error</code>...!!"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "reply_to_user": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1479998075, "post_id": 40785215, "comment_id": 68800304, "body": "That&#39;s the fact. Ruby is not primarily targeting Windows, and neither Rails does, since prevalent part of developers are using macOS or Linux. I highly recommend using Vagrant with Ubuntu. You will still be able to use your editor of choice, and will have all the working gems."}, {"owner": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1480006308, "post_id": 40785215, "comment_id": 68805148, "body": "Installing <code>ruby 2.3</code> and fighting some errors... meanwhile JonathanSoifer&#39;s comment <a href=\"http://stackoverflow.com/a/38507114/3125070\">here</a> makes me feel meh :/ How bout docker, huh?"}, {"owner": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1480016474, "post_id": 40785215, "comment_id": 68809318, "body": "Thousand thanks :) Got <code>Permission denied @ rb_file_s_symlink </code> with ruby 2.3, but hey, got it fixed running the <code>gem install</code> as admin"}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "reply_to_user": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "edited": false, "score": 0, "creation_date": 1480020366, "post_id": 40785215, "comment_id": 68810719, "body": "@ZekeDran installing gemfiles as admin is generally a bad idea under Linux/macOS, but you know ;) no advice here"}], "tags": [], "owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1479986756, "creation_date": 1479986756, "answer_id": 40785215, "question_id": 40770776, "link": "https://stackoverflow.com/questions/40770776/symlink-notimplementederror-rabl/40785215#40785215", "title": "symlink() NotImplementedError rabl", "body": "<p>This is controversial, but some say symlinking has been implemented on Ruby 2.3. I would try installing it first.</p>\n"}], "owner": {"reputation": 6703, "user_id": 3125070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/10f028d1e87b11a416d80b7ea0396d20?s=128&d=identicon&r=PG", "display_name": "Saravanabalagi Ramachandran", "link": "https://stackoverflow.com/users/3125070/saravanabalagi-ramachandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 40785215, "answer_count": 1, "score": 0, "last_activity_date": 1479986782, "creation_date": 1479921972, "last_edit_date": 1479986782, "question_id": 40770776, "link": "https://stackoverflow.com/questions/40770776/symlink-notimplementederror-rabl", "title": "symlink() NotImplementedError rabl", "body": "<p>Adding to <code>gemfile</code> failed and hence I tried <code>gem install rabl</code>. It fails with the following error message, looks like its OS specific... I'm on Windows 7 and using Ruby 2.2 on Rails 5 api</p>\n\n<pre><code>G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:388:in `symlink': symlink() function is unimplemented on this machine (NotImplementedError)\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:388:in `block (2 levels) in extract_tar_gz'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package/tar_reader.rb:65:in `each'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:365:in `block in extract_tar_gz'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:459:in `block in open_tar_gz'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:456:in `wrap'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:456:in `open_tar_gz'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:364:in `extract_tar_gz'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:345:in `block (2 levels) in extract_files'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package/tar_reader.rb:65:in `each'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:342:in `block in extract_files'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package/file_source.rb:30:in `open'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package/file_source.rb:30:in `with_read_io'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/package.rb:339:in `extract_files'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/installer.rb:772:in `extract_files'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/installer.rb:302:in `install'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/resolver/specification.rb:97:in `install'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/request_set.rb:166:in `block in install'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/request_set.rb:156:in `each'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/request_set.rb:156:in `install'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/commands/install_command.rb:205:in `install_gem'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/commands/install_command.rb:255:in `block in install_gems'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/commands/install_command.rb:251:in `each'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/commands/install_command.rb:251:in `install_gems'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/commands/install_command.rb:158:in `execute'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/command.rb:310:in `invoke_with_build_args'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/command_manager.rb:169:in `process_args'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/command_manager.rb:139:in `run'\n        from G:/Ruby/ruby/lib/ruby/site_ruby/2.2.0/rubygems/gem_runner.rb:55:in `run'\n        from G:/Ruby/ruby/bin/gem:21:in `&lt;main&gt;'\n</code></pre>\n\n<hr>\n\n<p><em>Edit:</em> After lots of googling, found this <a href=\"http://tickets.chef.io/browse/CHEF-4840\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>Attempting to use the deploy resource on Windows fails with:\n  symlink() function is unimplemented on this machine (NotImplementedError)\n  This is because Ruby's underlying File.symlink() method does not support Windows. </p>\n  \n  <p>In the short-term this should be mentioned in the docs. Longer term I think this could be fixed in the same way that the \"link\" directive works. This method may not work for soft links due to limitations with NTFS.</p>\n</blockquote>\n\n<p>So, it is definitely Windows specific, but wondering why there's no other post or link explaining that its incompatible with Windows. <strong>Isn't this fixable <em>in Windows</em>?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "answers": [{"tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1479922020, "creation_date": 1479922020, "answer_id": 40770793, "question_id": 40770627, "link": "https://stackoverflow.com/questions/40770627/rails-user-has-many-posts-but-only-one-post-can-be-stickied-pinned/40770793#40770793", "title": "Rails: User has many posts, but only one post can be stickied/pinned", "body": "<p>I have not tested it but I think this shoud work. Basically, the method <code>only_one_pinned_post</code> is executed during the validation and, in case the user already has a pinned post, adds a message to the errors object, which will prevent the object from being saved.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  scope :pinned, -&gt; { where(pinned: true) }\n\n  has_many :posts, dependent: :destroy\n  validate :only_one_pinned_post\n\n  def only_one_pinned_post\n    if pinned &amp;&amp; (posts.pinned.pluck(:id) - [id]).any?\n      errors.add(:pinned, 'Only one pinned post')\n    end\n  end\nend\n</code></pre>\n\n<p>The expression <code>posts.pinned.pluck(:id) - [id]</code> in the condition returns the list of ids of pinned posts, excluding the one we are trying to save. This way we will be allowed to modify the existing pinned post for that user.</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1479922660, "last_edit_date": 1479922660, "creation_date": 1479922230, "answer_id": 40770840, "question_id": 40770627, "link": "https://stackoverflow.com/questions/40770627/rails-user-has-many-posts-but-only-one-post-can-be-stickied-pinned/40770840#40770840", "title": "Rails: User has many posts, but only one post can be stickied/pinned", "body": "<p>Create a unique index in the database on <code>(user_id, pinned)</code> compound field. It's the only way to <strong>be sure</strong> that user doesn't have more than one pinned post. All other application-level validations are not reliable (though you may/should use them <strong>in addition</strong> to the unique index)</p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1479923376, "post_id": 40770906, "comment_id": 68766092, "body": "Ah, thank you. This solution works great (and thank you for your other suggestion, too. I was thinking about implementing this user-friendly way as well). There is one more question: Could you explain what the scope :without is doing?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 1, "creation_date": 1479923679, "post_id": 40770906, "comment_id": 68766293, "body": "Sure, I explained why I use the <code>without</code> scope in my updated answer."}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1479923784, "post_id": 40770906, "comment_id": 68766366, "body": "Ah great, now it makes sense to me. Thank you!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1479923642, "last_edit_date": 1479923642, "creation_date": 1479922455, "answer_id": 40770906, "question_id": 40770627, "link": "https://stackoverflow.com/questions/40770627/rails-user-has-many-posts-but-only-one-post-can-be-stickied-pinned/40770906#40770906", "title": "Rails: User has many posts, but only one post can be stickied/pinned", "body": "<p>Since you want to ensure that there is only on pinned post, you might want to add the validation to the <code>Post</code> model:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :user\n\n  scope :pinned,  -&gt; { where(pinned:true) }\n  scope :without, -&gt;(id) { where.not(id: id) if id }\n\n  validate :only_one_pinned_post_per_user\n\nprivate\n\n  def only_one_pinned_post_per_user\n    if pinned? &amp;&amp; user.posts.pinned.without(id).any?\n      errors.add(:pinned, 'Another post ist already pinned')\n    end\n  end\nend\n</code></pre>\n\n<p>I wonder if it is better (from a usability point of view) to implementing it differently: Perhaps you should not tell the user that he cannot pin more than one post. Instead you can just save the newly pinned post and unpin any other post automatically. This could be done with a after save callback:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :user\n\n  scope :pinned,  -&gt; { where(pinned:true) }\n  scope :without, -&gt;(id) { where.not(id: id) if id }\n\n  after_save :ensure_only_one_pinned_post\n\nprivate\n\n  def ensure_only_one_pinned_post\n    user.posts.pinned.without(id).update_all(pinned: false) if pinned?\n  end\nend\n</code></pre>\n\n<p>The <code>without</code> scope is used to not find and not count posts with the given <code>id</code>. I use this in this case to ensure that the currently created or updated post is not found nor counted when looking for other already pinned posts.</p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1480325982, "post_id": 40771498, "comment_id": 68899338, "body": "Hey Dan, thanks, I&#39;ve tried your code and it works great, too!"}], "tags": [], "owner": {"reputation": 2663, "user_id": 116892, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd73497eb3c985f302723424c3fa5b50?s=128&d=identicon&r=PG", "display_name": "Dan Sosedoff", "link": "https://stackoverflow.com/users/116892/dan-sosedoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1479924598, "creation_date": 1479924598, "answer_id": 40771498, "question_id": 40770627, "link": "https://stackoverflow.com/questions/40770627/rails-user-has-many-posts-but-only-one-post-can-be-stickied-pinned/40771498#40771498", "title": "Rails: User has many posts, but only one post can be stickied/pinned", "body": "<p>Here's another take on your problem (simple and clean):  </p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :posts\n\n  # Helper to get only one pinned post\n  has_one :pinned_post, -&gt; { where(pinned: true) }, class_name: \"Post\"\nend\n\n\nclass Post &lt; ApplicationRecord\n  belongs_to :user\n\n  after_save do\n    if pinned?\n      # Automatically unpin any other pinned posts\n      user.posts.where(\"id != ?\", id).update_all(pinned: false)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 40770906, "answer_count": 4, "score": 0, "last_activity_date": 1479924598, "creation_date": 1479921532, "question_id": 40770627, "link": "https://stackoverflow.com/questions/40770627/rails-user-has-many-posts-but-only-one-post-can-be-stickied-pinned", "title": "Rails: User has many posts, but only one post can be stickied/pinned", "body": "<p>A user should be able to pin a post/create a sticky post. But he should only be allowed to pin one post only. So if he decides to create a new pinned post/pin another post, he has to \"un-pin\" the old one (and an error message appears).</p>\n\n<p>There is a simple association between my user and post model and the  post model has a column called \"pinned\" which is a boolean (true or false). This is what I've tried: </p>\n\n<p><strong>models/user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :posts, dependent: :destroy\n  validates_uniqueness_of :posts, if: :only_one_pinned_post\n\n  def only_one_pinned_post\n    if self.post.where(pinned: true).size == 1\n      true\n    else\n      false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>models/post.rb</strong></p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>My questions</strong>:</p>\n\n<ul>\n<li>How can I make it work that the user is only allowed to pin one post? </li>\n<li>Where do I put my error message, if he already has a pinned post but wants to create another? </li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 5, "last_activity_date": 1479921488, "creation_date": 1479921488, "answer_id": 40770611, "question_id": 40770540, "link": "https://stackoverflow.com/questions/40770540/why-are-references-to-methods-in-ruby-formatted-method-instead-of-method/40770611#40770611", "title": "Why are references to methods in Ruby formatted &quot;`method&#39;&quot; instead of &quot;`method`&quot;?", "body": "<p>Quoting strings as</p>\n\n<pre><code>`foo'\n</code></pre>\n\n<p>is based on <a href=\"https://en.wikipedia.org/wiki/Roff_(computer_program)\" rel=\"noreferrer\"><code>roff</code></a> usage, where a backquote represents an opening quotation mark and a single quote represents a closing quotation mark. <code>man</code> pages are formatted using <code>roff</code>, but the ASCII text rendering retains the original markup in place of proper \"typographic\" quotes or using the one or the other for both quotes. Its use in Ruby, then, has no real technical meaning, other than (I suspect) making a stylistic choice that matches <code>man</code> page rendering.</p>\n"}], "owner": {"reputation": 4284, "user_id": 806876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nWZZB.png?s=128&g=1", "display_name": "pygeek", "link": "https://stackoverflow.com/users/806876/pygeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 40770611, "answer_count": 1, "score": 1, "last_activity_date": 1479921488, "creation_date": 1479921266, "question_id": 40770540, "link": "https://stackoverflow.com/questions/40770540/why-are-references-to-methods-in-ruby-formatted-method-instead-of-method", "title": "Why are references to methods in Ruby formatted &quot;`method&#39;&quot; instead of &quot;`method`&quot;?", "body": "<p>I've been writing more Ruby lately and curious about error formatting choice in the language.</p>\n\n<p>When Ruby references another method it formats it with a single back tick followed by a quote.</p>\n\n<p>Other languages that I'm familiar with typically reference a method by using back ticks, quotes, or nothing, but never both.</p>\n\n<p>I was wondering if anyone knew the rationale for this, if any.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1479923082, "post_id": 40770482, "comment_id": 68765918, "body": "It seems to be a problem with SQLite, how did you installed it? Could you try other DB? Postgres maybe?"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1479929913, "post_id": 40770482, "comment_id": 68769545, "body": "@Leito I didn&#39;t know that I had to install it ! I have to do a command line ?"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 1, "creation_date": 1479936148, "post_id": 40770482, "comment_id": 68772571, "body": "It looks like the SQLite gem is already installed, but broken. You could try <code>gem install sqlite3</code> to re-install it. Did you copy your gems or RVM from another machine or something?"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479989574, "post_id": 40770482, "comment_id": 68794693, "body": "@JimStewart Thank you for your answer, I try gem install sqlite3 but it doesn&#39;t work, I still have this error"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 2, "creation_date": 1479989981, "post_id": 40770482, "comment_id": 68794970, "body": "Ok I find the solution, I put the gem in :development, :test do .... and it work fine !"}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 2993674, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/TRxII.jpg?s=128&g=1", "display_name": "rld", "link": "https://stackoverflow.com/users/2993674/rld"}, "edited": false, "score": 0, "creation_date": 1480542666, "post_id": 40857149, "comment_id": 69011535, "body": "the FAMMMM works for me. And uninstall and install not works.. thanks FAMMMM"}], "tags": [], "owner": {"reputation": 69, "user_id": 5617453, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/VJwm9.jpg?s=128&g=1", "display_name": "FAMMMM", "link": "https://stackoverflow.com/users/5617453/fammmm"}, "is_accepted": false, "score": 3, "last_activity_date": 1480392076, "last_edit_date": 1480392076, "creation_date": 1480389130, "answer_id": 40857149, "question_id": 40770482, "link": "https://stackoverflow.com/questions/40770482/rails-console-doesnt-work-you-may-have-encountered-a-bug/40857149#40857149", "title": "Rails console doesn&#39;t work &quot;You may have encountered a bug&quot;", "body": "<p>that's right ,edit Gemfile put</p>\n\n<pre><code>  gem 'sqlite3'\n</code></pre>\n\n<p>to</p>\n\n<pre><code> group :development, :test do\n    gem 'sqlite3'\n end\n</code></pre>\n\n<p>and </p>\n\n<pre><code>rails console\n</code></pre>\n\n<p>would be used for me! thanks! </p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4394917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HxfUWEWDkGY/AAAAAAAAAAI/AAAAAAAAASU/bcnFGkQSNqA/photo.jpg?sz=128", "display_name": "dsn raghavendra rao", "link": "https://stackoverflow.com/users/4394917/dsn-raghavendra-rao"}, "is_accepted": true, "score": 4, "last_activity_date": 1480404612, "creation_date": 1480404612, "answer_id": 40860081, "question_id": 40770482, "link": "https://stackoverflow.com/questions/40770482/rails-console-doesnt-work-you-may-have-encountered-a-bug/40860081#40860081", "title": "Rails console doesn&#39;t work &quot;You may have encountered a bug&quot;", "body": "<p>try like this it workes for me </p>\n\n<pre><code>gem uninstall sqlite3\ngem install sqlite3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 983, "user_id": 3749047, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/605016231/picture?type=large", "display_name": "Dude", "link": "https://stackoverflow.com/users/3749047/dude"}, "edited": false, "score": 0, "creation_date": 1487757391, "post_id": 41155826, "comment_id": 71924547, "body": "reinstalling sqlite3 not working for me but this solution fixed the bug (rails5)"}, {"owner": {"reputation": 972, "user_id": 1441706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/thGSZ.png?s=128&g=1", "display_name": "Fab V.", "link": "https://stackoverflow.com/users/1441706/fab-v"}, "reply_to_user": {"reputation": 983, "user_id": 3749047, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/605016231/picture?type=large", "display_name": "Dude", "link": "https://stackoverflow.com/users/3749047/dude"}, "edited": false, "score": 0, "creation_date": 1492994103, "post_id": 41155826, "comment_id": 74206013, "body": "Similar to @Dude, rails 5 without sqlite3, stoping (and restarting) <code>spring</code> fixed my issue. No crash report though, I don&#39;t know where this is coming from."}], "tags": [], "owner": {"reputation": 46, "user_id": 7079440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a0dafc84db30fe813b99fc771f2df9?s=128&d=identicon&r=PG&f=1", "display_name": "wangboguo", "link": "https://stackoverflow.com/users/7079440/wangboguo"}, "is_accepted": false, "score": 2, "last_activity_date": 1481787954, "last_edit_date": 1481787954, "creation_date": 1481771548, "answer_id": 41155826, "question_id": 40770482, "link": "https://stackoverflow.com/questions/40770482/rails-console-doesnt-work-you-may-have-encountered-a-bug/41155826#41155826", "title": "Rails console doesn&#39;t work &quot;You may have encountered a bug&quot;", "body": "<p>Input <code>spring stop</code> before <code>rails c</code></p>\n\n<p>or just remove <code>gem spring</code> in Gemfile.</p>\n\n<p>Just try it!</p>\n\n<p>Here you can find more about it: </p>\n\n<p><a href=\"https://github.com/sparklemotion/sqlite3-ruby/issues/195\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/sqlite3-ruby/issues/195</a></p>\n\n<p><a href=\"https://github.com/rails/spring/issues/493\" rel=\"nofollow noreferrer\">https://github.com/rails/spring/issues/493</a></p>\n"}], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7432, "favorite_count": 1, "accepted_answer_id": 40860081, "answer_count": 3, "score": 2, "last_activity_date": 1481787954, "creation_date": 1479921060, "question_id": 40770482, "link": "https://stackoverflow.com/questions/40770482/rails-console-doesnt-work-you-may-have-encountered-a-bug", "title": "Rails console doesn&#39;t work &quot;You may have encountered a bug&quot;", "body": "<p>I search if the question had been already asked but I didn't find anything. I have create an application using ruby version 2.3.0 and rails version 5.0.0.1,</p>\n\n<p>When I run this commande</p>\n\n<pre><code>rails console\n</code></pre>\n\n<p>And I try to access db like that : </p>\n\n<pre><code>Post.all\nUser.all\n</code></pre>\n\n<p>Or other command line I have this enormous error (sorry for all these lines : </p>\n\n<pre><code>/Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:27: [BUG] Segmentation fault at 0x00000000000110\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin16]\n\n-- Crash Report log information --------------------------------------------\n   See Crash Report log file under the one of following:                    \n     * ~/Library/Logs/CrashReporter                                         \n     * /Library/Logs/CrashReporter                                          \n     * ~/Library/Logs/DiagnosticReports                                     \n     * /Library/Logs/DiagnosticReports                                      \n   for more details.                                                        \nDon't forget to include the above Crash Report log file in bug reports.     \n\n-- Control frame information -----------------------------------------------\nc:0061 p:---- s:0252 e:000251 CFUNC  :initialize\nc:0060 p:---- s:0250 e:000249 CFUNC  :new\nc:0059 p:0186 s:0245 e:000244 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:\nc:0058 p:0028 s:0238 e:000237 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0057 p:0027 s:0235 e:000234 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0056 p:0025 s:0232 e:000231 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0055 p:0018 s:0227 e:000226 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0054 p:0016 s:0222 e:000220 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0053 p:0035 s:0217 e:000213 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0052 p:0046 s:0211 e:000210 METHOD /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/abstract/connection\nc:0051 p:0015 s:0205 e:000204 METHOD \n</code></pre>\n\n<p>....... (other lines)</p>\n\n<pre><code> 1666 /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/relation/predicate_builder/range_handler.rb\n 1667 /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/relation/predicate_builder/relation_handler.rb\n 1668 /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/relation/predicate_builder.rb\n 1669 /Users/marchardantonin/.rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.1/lib/active_record/table_metadata.rb\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n</code></pre>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "edited": false, "score": 0, "creation_date": 1479920546, "post_id": 40770298, "comment_id": 68764497, "body": "If you are curious, this is the module I want to re-use: <a href=\"https://github.com/ruby-grape/grape/blob/v0.18.0/lib/grape/error_formatter/json.rb\" rel=\"nofollow noreferrer\">github.com/ruby-grape/grape/blob/v0.18.0/lib/grape/&hellip;</a>"}, {"owner": {"reputation": 1677, "user_id": 396793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6068f701243a53dc2232422af65ff769?s=128&d=identicon&r=PG", "display_name": "Deradon", "link": "https://stackoverflow.com/users/396793/deradon"}, "edited": false, "score": 0, "creation_date": 1479930852, "post_id": 40770298, "comment_id": 68770014, "body": "Might be a duplicate of: <a href=\"http://stackoverflow.com/questions/4662722/extending-a-ruby-module-in-another-module-including-the-module-methods\" title=\"extending a ruby module in another module including the module methods\">stackoverflow.com/questions/4662722/&hellip;</a> ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479936436, "post_id": 40770298, "comment_id": 68772694, "body": "Very interesting question!"}, {"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "reply_to_user": {"reputation": 1677, "user_id": 396793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6068f701243a53dc2232422af65ff769?s=128&d=identicon&r=PG", "display_name": "Deradon", "link": "https://stackoverflow.com/users/396793/deradon"}, "edited": false, "score": 0, "creation_date": 1479970226, "post_id": 40770298, "comment_id": 68782581, "body": "@Deradon: not a real duplicate. In the other question the author owns also the base module. Here the base module resides in a public library. Only one of the answers considers that might not always be the case."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1479921652, "creation_date": 1479921652, "answer_id": 40770674, "question_id": 40770298, "link": "https://stackoverflow.com/questions/40770298/overwrite-class-method-from-another-module/40770674#40770674", "title": "Overwrite class method from another module", "body": "<p>Assuming you have <code>A</code> declared as above, the following code would do:</p>\n\n<pre><code>\u25b6 B = A.clone\n#\u21d2 B\n\u25b6 (class &lt;&lt; B; self; end).send :define_method, :bar do |val|\n  val.downcase\nend\n\u25b6 A.foo\n#\u21d2 \"BAZ\"\n\u25b6 B.foo\n#\u21d2 \"baz\"\n</code></pre>\n\n<p>There probably should be less tricky way, but I can\u2019t yet figure it out.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479936548, "post_id": 40773257, "comment_id": 68772750, "body": "I&#39;ve never though about <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-refine\" rel=\"nofollow noreferrer\">Module#refine</a> being used for this purpose. Great answer!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479970899, "post_id": 40773257, "comment_id": 68782885, "body": "This is great, upvoted. First application of <code>refine</code> I saw that it really meaningful."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480182946, "post_id": 40773257, "comment_id": 68861674, "body": "Note that while Refinements are part of Ruby, they are not implemented in all Ruby implementations. Most notably, the Rubinius developers are philosophically opposed to the idea of Refinements, and thus will never implement them. (One could argue whether an implementation that willfully ignores a feature of Ruby can be called a &quot;Ruby implementation&quot; at all.)"}, {"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "edited": false, "score": 1, "creation_date": 1505821169, "post_id": 40773257, "comment_id": 79561098, "body": "Unfortunately, this change in the Ruby code has made this solution invalid: <a href=\"http://mla.n-z.jp/~w3ml/w3ml.cgi/ruby-changes/msg/46511\" rel=\"nofollow noreferrer\">mla.n-z.jp/~w3ml/w3ml.cgi/ruby-changes/msg/46511</a>. This applies to Ruby versions &gt;= 2.3.5 and &gt;= 2.4.2. The error message then is <code>ArgumentError: refinement module is not allowed</code>."}], "tags": [], "owner": {"reputation": 86, "user_id": 5251050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fqB42iFKPh0/AAAAAAAAAAI/AAAAAAAAEK0/OIGZ9JARSoI/photo.jpg?sz=128", "display_name": "tosch", "link": "https://stackoverflow.com/users/5251050/tosch"}, "is_accepted": false, "score": 4, "last_activity_date": 1479931483, "creation_date": 1479931483, "answer_id": 40773257, "question_id": 40770298, "link": "https://stackoverflow.com/questions/40770298/overwrite-class-method-from-another-module/40773257#40773257", "title": "Overwrite class method from another module", "body": "<p><code>extend A</code> doesn't work, because <code>foo</code> and <code>bar</code> are no instance methods of <code>A</code>, but of <code>A</code>'s singleton class. To re-use those methods, you have to either create a copy of <code>A</code> as mudasobwa described, or you can use a refinement of <code>A</code>'s singleton class like this:</p>\n\n<pre><code>module B\n  extend(refine(A.singleton_class) do\n    def bar(val)\n      val.downcase\n    end\n  end)\nend\n\nB.foo # =&gt; \"baz\"\n</code></pre>\n\n<p>You cannot use <code>extend A.singleton_class</code> as <code>extend</code> doesn't accept a class as argument. <code>refine</code> returns a module which is exactly what's needed.</p>\n"}], "owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 40770674, "answer_count": 2, "score": 1, "last_activity_date": 1479931483, "creation_date": 1479920501, "question_id": 40770298, "link": "https://stackoverflow.com/questions/40770298/overwrite-class-method-from-another-module", "title": "Overwrite class method from another module", "body": "<p>I want to modify the existing module <code>A</code> from a library:</p>\n\n<pre><code>module A\n  class &lt;&lt; self\n    def foo\n      bar('Baz')\n    end\n\n    private\n\n    def bar(val)\n      val.upcase\n    end\n  end\nend\n\nA.foo\n=&gt; \"BAZ\"\n\nmodule B\n  extend A\n\n  def self.bar(val)\n    val.downcase\n  end\nend\n\nB.foo            # hoping for 'baz', but instead:\nNoMethodError: undefined method `foo' for B:Module\n</code></pre>\n\n<p>Is there a way to re-use method <code>.foo</code> from <code>A</code> and only modify method <code>.bar</code>?</p>\n"}, {"tags": ["javascript", "ruby", "curl", "cookies", "firebug"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479927871, "post_id": 40770228, "comment_id": 68768563, "body": "Welcome to Stack Overflow. It&#39;s off-topic on SO to ask for recommendations of tools, libraries, code, or other off-site resources. Instead, you&#39;re expected to do the research, trying things to see how they work for you, then, when you run into a problem with the code, ask a specific question about that particular problem. You might find <a href=\"https://softwarerecs.stackexchange.com\">Software Recommendations</a> more useful for this sort of question."}], "answers": [{"comments": [{"owner": {"reputation": 2537, "user_id": 1596686, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bb0df9d59647054dda587a38d1612a78?s=128&d=identicon&r=PG", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1596686/konstantin"}, "edited": false, "score": 0, "creation_date": 1479932041, "post_id": 40770499, "comment_id": 68770633, "body": "Thx, but I would like to code a pure CLI application, as I want to run it on a headless VPS. And I prefer CLI apps."}], "tags": [], "owner": {"reputation": 476, "user_id": 4888658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ebd6007b7ef8bd9183787afce0c962d?s=128&d=identicon&r=PG&f=1", "display_name": "Annarfych", "link": "https://stackoverflow.com/users/4888658/annarfych"}, "is_accepted": true, "score": 0, "last_activity_date": 1479921124, "creation_date": 1479921124, "answer_id": 40770499, "question_id": 40770228, "link": "https://stackoverflow.com/questions/40770228/tool-to-help-automatize-web-tasks/40770499#40770499", "title": "Tool to help automatize web tasks?", "body": "<p>Maybe <em>BrowserAutomationStudio</em> will help:<br>\n<a href=\"https://bablosoft.com/shop/BrowserAutomationStudio\" rel=\"nofollow noreferrer\">https://bablosoft.com/shop/BrowserAutomationStudio</a> </p>\n\n<p>This program can record your browser actions and replay them as a standalone bot.</p>\n"}], "owner": {"reputation": 2537, "user_id": 1596686, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bb0df9d59647054dda587a38d1612a78?s=128&d=identicon&r=PG", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1596686/konstantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 40770499, "answer_count": 1, "score": -2, "last_activity_date": 1479921124, "creation_date": 1479920285, "question_id": 40770228, "link": "https://stackoverflow.com/questions/40770228/tool-to-help-automatize-web-tasks", "title": "Tool to help automatize web tasks?", "body": "<p>I would like to automatize web tasks which normally should be achieved by a web browser, for example video upload to a certain video sharing website. I would like to make a pure command line program, which apply simple cURL command calls, because those calls are accessible for example in FireBug and Chrome / Chromium dev console / Network pane. So I woudn't like to use libcurl, or similar libraries. I would prefer programming in Ruby. </p>\n\n<p>Task is straightforward: I upload a video while watching the dev tool network pane, and tracking the communication between the browser and the server. Copying POST and GET requests by \"copy as cURL\" menu. Applying some modification on the copied cURL command, eg. removing some header lines, which sends cookies, and substitute them with the cookies in a \"cookie jar\" text file (-c option in cURL). And later sending the needed cookies by applying that text file again (-b option in cURL). In the past I managed to make such Ruby scripts and they are simply working I can use those websites services by pure command line, so I can upload files from my VPS which is very fast unlike uploading from home machine.</p>\n\n<p>Unfortunately the website I want to automatize apply a lot of redirections even at the login stage (for example 4 consecutive redirects), which aren't tracked by Chrome dev tool, so I can't see what really happen and when the needed cookies are stored, and which request is responsible for getting those cookies. Sometimes tricky javascript calls are applied by the website to store a cookie which is needed for the video upload and even exporting the video.</p>\n\n<p>So my question is that besides Chrome dev tools and FireBug is there any automated and handy tool which can help achiving similar tasks?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 5, "creation_date": 1479927404, "post_id": 40771012, "comment_id": 68768328, "body": "<code>array.combination(2).any? { |a,b| a+b == target }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1479927464, "post_id": 40771012, "comment_id": 68768365, "body": "I suggest <code>array.combination(2).find { |a,b|  a+b == target }</code>, which returns either the desired pair or <code>nil</code>. Edit: Egad! @steenslag posted almost exactly the same comment less than a minute before I did, even the same block variables!  I do think <code>find</code> is preferred to <code>any?</code> as the desired pair is wanted."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1479931096, "post_id": 40771012, "comment_id": 68770136, "body": "@CarySwoveland from the header: &quot;... return true if any two elements sum to target&quot;."}], "tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1479922794, "creation_date": 1479922794, "answer_id": 40771012, "question_id": 40770188, "link": "https://stackoverflow.com/questions/40770188/given-an-array-of-integers-and-target-return-true-if-any-two-elements-sum-to-ta/40771012#40771012", "title": "Given an array of integers and target, return true if any two elements sum to target", "body": "<pre><code>def two_sum(array, target)\n  array.combination(2).each { |pair| return true if pair.inject(:+) == target }\n  return false;\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1479938186, "post_id": 40774609, "comment_id": 68773479, "body": "And it&#39;s O(n) vs O(n**2).  Nice!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1479937789, "last_edit_date": 1479937789, "creation_date": 1479937305, "answer_id": 40774609, "question_id": 40770188, "link": "https://stackoverflow.com/questions/40770188/given-an-array-of-integers-and-target-return-true-if-any-two-elements-sum-to-ta/40774609#40774609", "title": "Given an array of integers and target, return true if any two elements sum to target", "body": "<pre><code>require 'set'\n\ndef two_sum(arr, tot)\n  st = Set.new\n  arr.each { |n| st.include?(tot-n) ? (return true) : st &lt;&lt; n } \n  false\nend\n\ntwo_sum [1,2,3,4,5,6], 8    #=&gt; true \ntwo_sum [4,4], 8            #=&gt; true \ntwo_sum [1,2,3,4,5,6], 3421 #=&gt; false\n</code></pre>\n\n<p>If you'd prefer to return the two values that sum to <code>tot</code> (when <code>true</code>), replace <code>true</code> with <code>[n, tot-n]</code> (or just return <code>n</code>, the other being <code>tot - n</code>). </p>\n\n<p>I used a set rather than an array for faster lookups.</p>\n"}], "owner": {"reputation": 1375, "user_id": 3059274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65852c2e3d5786cf2e759071062a536e?s=128&d=identicon&r=PG&f=1", "display_name": "jamesvphan", "link": "https://stackoverflow.com/users/3059274/jamesvphan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479937789, "creation_date": 1479920156, "last_edit_date": 1479927774, "question_id": 40770188, "link": "https://stackoverflow.com/questions/40770188/given-an-array-of-integers-and-target-return-true-if-any-two-elements-sum-to-ta", "title": "Given an array of integers and target, return true if any two elements sum to target", "body": "<p>As the title states, I'm looking to find two elements whose sum is equal to the target integer. I've already worked out the solution below, but this works only for unique integers. I'm having an issue when it comes to duplicate values. Of course, I can use multiple loops that keep track of two separate indices and, in this way, make sure those two indices are the same. However, I wanted to see if there was a way to solve this with one iteration.</p>\n\n<pre><code>two_sum([1,2,3,4,5,6], 8) = true\ntwo_sum([4,4], 8) = false\n\ndef two_sum(array, target)\n  idx = 0 \n  while idx &lt; array.length \n    complement = target - array[idx]\n    if array.include?(complement) &amp;&amp; complement != array[idx]\n      return true \n    end \n    idx+=1 \n  end \n  return false \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "nokogiri", "symbols"], "comments": [{"owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "edited": false, "score": 2, "creation_date": 1479920189, "post_id": 40769974, "comment_id": 68764273, "body": "I found my answer: <a href=\"http://stackoverflow.com/questions/35166217/rails-server-will-not-run\">StackOverFlow</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479930303, "post_id": 40769974, "comment_id": 68769732, "body": "It took you 12 minutes to find the solution after asking the question. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a> would be a good thing to read, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages."}], "owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "closed_date": 1479930315, "answer_count": 0, "score": 0, "last_activity_date": 1479930185, "creation_date": 1479919486, "last_edit_date": 1479930185, "question_id": 40769974, "link": "https://stackoverflow.com/questions/40769974/i-ran-bundle-update-now-i-am-getting-an-error-when-i-run-rails-s-what-do-i-do", "closed_reason": "Duplicate", "title": "I ran bundle update now I am getting an error when I run rails s, what do I do?", "body": "<p>As the title says, I ran <code>bundle update</code> and now I am getting an error, what do I do? What does this error mean and where should I be looking for a solution? Also, if you just know the solution to all of my problems and would like to tell me, that would be cool too?</p>\n\n<p>Error:</p>\n\n<pre><code>/home/my_name/.rvm/rubies/ruby-2.3.1/bin/ruby: symbol lookup error: /home/my_name/.rvm/gems/ruby-2.3.1@global/gems/nokogiri-1.6.8.1/lib/nokogiri/nokogiri.so: undefined symbol: rb_data_object_alloc\n</code></pre>\n\n<p>Any help extended would be appreciated. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "loops", "ruby-on-rails-4", "merge"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1479972139, "last_edit_date": 1479972139, "creation_date": 1479924394, "answer_id": 40771444, "question_id": 40769951, "link": "https://stackoverflow.com/questions/40769951/rails-4-how-to-merge-loops/40771444#40771444", "title": "Rails 4: How to merge loops", "body": "<p>This should work out of the box:</p>\n\n<pre><code># in the controller\nitems    = Item.all         # some scope on Items\nreceipes = Receipe.all      # some scope on Receipes\n@things = items + receipes  # combine them into one variable\n\n# in the view\nrender @things              # renders a collection and renders for each item in \n                            # the array a partial named like the item's class name\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479972139, "creation_date": 1479919430, "question_id": 40769951, "link": "https://stackoverflow.com/questions/40769951/rails-4-how-to-merge-loops", "title": "Rails 4: How to merge loops", "body": "<p>I was wondering on how to merge loops within rails.</p>\n\n<p>Do I need to do that in the Controller, or is that even possible in a view?<br>If I wonder how to decide which partial to render.</p>\n\n<p>For instance I have to models: <code>item</code> and <code>receipe</code>.</p>\n\n<p>First, how do I merge all recipes and items into one loop?<br>Second, if I want to render for each <code>receipe</code> the partial <code>_receipe</code> and for each <code>item</code> the partial <code>_item</code>, how am I supposed to da that?</p>\n\n<p>Thanks in advance for each help!</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "edited": false, "score": 0, "creation_date": 1480174321, "post_id": 40794916, "comment_id": 68858948, "body": "Thank you Justin! You have good points. I will discuss with our testers on the options. Thanks again!"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1480024128, "creation_date": 1480024128, "answer_id": 40794916, "question_id": 40769601, "link": "https://stackoverflow.com/questions/40769601/ruby-cucumber-how-to-ignore-ie-protected-mode-error-in-selenium-webdriver/40794916#40794916", "title": "Ruby cucumber: How to ignore IE protected mode error in Selenium WebDriver?", "body": "<p>The desired capabilities include a flag that disables this protected mode check. Note that while disabling the check will allow you to open IE, you may or may not get issues later on. Here is what the <a href=\"https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities#ie-specific\" rel=\"nofollow noreferrer\">Selenium Wiki</a> says about the flag:</p>\n\n<blockquote>\n  <p>Whether to skip the protected mode check. If set, tests may become\n  flaky, unresponsive, or browsers may hang. If not set, and protected\n  mode settings are not the same for all zones, an exception will be\n  thrown on driver construction. Only \"best effort\" support is provided\n  when using this capability.</p>\n</blockquote>\n\n<p>Assuming that correctly setting the IE Protected Mode settings is not an option, here is how you disable the check in Selenium-WebDriver:</p>\n\n<pre><code>caps = Selenium::WebDriver::Remote::Capabilities.internet_explorer(\n  'ignoreProtectedModeSettings' =&gt; true\n)\ndriver = Selenium::WebDriver.for(:internet_explorer, :desired_capabilities =&gt; caps)\n</code></pre>\n\n<p>If you are curious about the history of the IEDriver and Protected Mode, Jim Evans has an interesting blog post, \"<a href=\"http://jimevansmusic.blogspot.ca/2012/08/youre-doing-it-wrong-protected-mode-and.html\" rel=\"nofollow noreferrer\">You're Doing It Wrong: IE Protected Mode and WebDriver </a>.\"</p>\n"}], "owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 899, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480024128, "creation_date": 1479918508, "question_id": 40769601, "link": "https://stackoverflow.com/questions/40769601/ruby-cucumber-how-to-ignore-ie-protected-mode-error-in-selenium-webdriver", "title": "Ruby cucumber: How to ignore IE protected mode error in Selenium WebDriver?", "body": "<p>My test automation is experiencing error using IE browser. </p>\n\n<pre><code>  Unexpected error launching Internet Explorer. Protected Mode settings \n  are not the same for all zones. \n  Enable Protected Mode must be set to the same value \n  (enabled or disabled) for all zones. \n  (Selenium::WebDriver::Error::NoSuchDriverError)\n</code></pre>\n\n<p>In order to let the test run, I have to manually unchecked them all in IE options. I did some research, there is a way to ignore it in java, but I have not found it in Ruby. What I found is below (I am not using remote server): </p>\n\n<pre><code>  IE\n\n   Make sure that Internet Options \u2192 Security has the same \n   Protected Mode setting (on or off, it doesn't \n   matter as long as it is the same value) for all zones.\n\n   From: https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings\n</code></pre>\n\n<p>My env:</p>\n\n<pre><code>  Ruby: 1.9.3\n  Selenium WebDriver: 2.53\n  Cucumber: 2.1\n</code></pre>\n\n<p>Anyone has done this pragmatically in Ruby? Please share your solutions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 61, "user_id": 4633252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K_Q8KxDdVgg/AAAAAAAAAAI/AAAAAAAAAHE/CKzEtuqU7sk/photo.jpg?sz=128", "display_name": "Bechir Segni", "link": "https://stackoverflow.com/users/4633252/bechir-segni"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479919550, "post_id": 40769119, "comment_id": 68763849, "body": "Yes, you are right, i just unchecked the answer, it was so helpful but maybe other answers will help other people :))"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479928469, "post_id": 40769119, "comment_id": 68768857, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; along with &quot;<a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">How much research effort is expected of Stack Overflow users?</a>&quot;. Show us the absolute minimum code necessary to demonstrate the problem you&#39;re having with your code. Without that it looks like you didn&#39;t try and want us to write it for you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479929701, "post_id": 40769119, "comment_id": 68769461, "body": "You&#39;re asking two separate questions, how to count the frequency, and how to persist data. The first is easy, the second is determined by your needs which you didn&#39;t tell us. How big is the list of words? How often do you need to update the list and how fast does it need to run? A database even a simple one like SQLite, can easily do this and would be very fast, even when the list is huge. DBMs are optimized for this sort of query."}, {"owner": {"reputation": 61, "user_id": 4633252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K_Q8KxDdVgg/AAAAAAAAAAI/AAAAAAAAAHE/CKzEtuqU7sk/photo.jpg?sz=128", "display_name": "Bechir Segni", "link": "https://stackoverflow.com/users/4633252/bechir-segni"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479985110, "post_id": 40769119, "comment_id": 68791740, "body": "Hey @theTinMan i will check How to ask the next time, and the problem for me was how  how to persist data , this list of words will be used as a training data for an AI so the list of words will be bigger with time , so what do you think is the fastest way i should store and retrieve data from , Json or SQLite ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480183228, "post_id": 40769119, "comment_id": 68861763, "body": "Fastest for what? How much data do you want to store in total? How much data do you want to store per second, minute, hour, day, week, month, year? What are your throughput requirements? What are your latency requirements? What are your jitter requirements? How do you want to access that data? What is the write frequency? Read frequency? Do you need to search it? By which criteria? What is your search frequency? What are your consistency requirements? What are your atomicity requirements? What are your availability requirements? What are your durability requirements? Those are just a tiny \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480183264, "post_id": 40769119, "comment_id": 68861776, "body": "\u2026 fractions of the questions you need to ask yourself before you can even begin to look for a persistence solution."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1479917970, "last_edit_date": 1479917970, "creation_date": 1479917790, "answer_id": 40769355, "question_id": 40769119, "link": "https://stackoverflow.com/questions/40769119/how-can-i-count-words-frenquency-and-append-results-every-time-i-run-the-script/40769355#40769355", "title": "How can i count words frenquency and append results every time i run the script in ruby", "body": "<p>This should do :</p>\n\n<pre><code>hash = [\"one\", \"two\", \"three\", \"three\"]\n\nfrequency_file = 'frequency.dat'\n\nif File.exists?(frequency_file) \n  old_frequency = File.open(frequency_file) {|f| Marshal.load(f.read)}\nelse\n  old_frequency = {}\nend\n\nold_frequency.default = 0\n\n\nfrequency = hash.group_by{|name| name}.map{|name, list| [name,list.count+old_frequency[name]]}.to_h\n\nFile.open(frequency_file,'w'){|f| f.write(Marshal.dump(frequency))}\n\nputs frequency.inspect\n# =&gt; {\"one\"=&gt;1, \"two\"=&gt;1, \"three\"=&gt;2}\n# =&gt; {\"one\"=&gt;2, \"two\"=&gt;2, \"three\"=&gt;4}\n</code></pre>\n\n<p>If you prefer a human-readable file :</p>\n\n<pre><code>require 'yaml'\nhash = [\"one\", \"two\", \"three\", \"three\"]\n\nfrequency_file = 'frequency.yml'\n\nif File.exists?(frequency_file) \n  old_frequency = YAML.load_file(frequency_file)\nelse\n  old_frequency = {}\nend\n\nold_frequency.default = 0\n\n\nfrequency = hash.group_by{|name| name}.map{|name, list| [name,list.count+old_frequency[name]]}.to_h\n\nFile.open(frequency_file,'w'){|f| f.write frequency.to_yaml}\n\nputs frequency.inspect\n# =&gt; {\"one\"=&gt;1, \"two\"=&gt;1, \"three\"=&gt;2}\n# =&gt; {\"one\"=&gt;2, \"two\"=&gt;2, \"three\"=&gt;4}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4633252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K_Q8KxDdVgg/AAAAAAAAAAI/AAAAAAAAAHE/CKzEtuqU7sk/photo.jpg?sz=128", "display_name": "Bechir Segni", "link": "https://stackoverflow.com/users/4633252/bechir-segni"}, "edited": false, "score": 0, "creation_date": 1479985656, "post_id": 40772578, "comment_id": 68792148, "body": "The case here is Mining tweets and after cleaning the data i&#39;ll put each set of keywords in a separate file based on a category , so i wanna count the frequency of them and add it as long as i keep mining . after that i&#39;ll will compare another array X to the same files to extract the keywords of the array X  i&#39;m still in learning curve so what do you suggest would work for me in this case a SQLite , Json or Yaml files ?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1479930125, "last_edit_date": 1479930125, "creation_date": 1479928926, "answer_id": 40772578, "question_id": 40769119, "link": "https://stackoverflow.com/questions/40769119/how-can-i-count-words-frenquency-and-append-results-every-time-i-run-the-script/40772578#40772578", "title": "How can i count words frenquency and append results every time i run the script in ruby", "body": "<p>Here are some variations that'd do it:</p>\n\n<pre><code>ary = %w[a b a c a b]\n\nary.group_by { |v| v }.map{ |k, v| [k, v.size] }.to_h # =&gt; {\"a\"=&gt;3, \"b\"=&gt;2, \"c\"=&gt;1}\nary.each_with_object(Hash.new(0)) { |v, h| h[v] += 1} # =&gt; {\"a\"=&gt;3, \"b\"=&gt;2, \"c\"=&gt;1}\nary.uniq.map { |v| [v, ary.count(v)] }.to_h # =&gt; {\"a\"=&gt;3, \"b\"=&gt;2, \"c\"=&gt;1}\n</code></pre>\n\n<p>Since they're all about the same length it becomes important to know which is the fastest.</p>\n\n<pre><code>require 'fruity'\n\nary = %w[a b a c a b] * 1000\n\ncompare do\n  group_by { ary.group_by { |v| v }.map{ |k, v| [k, v.size] }.to_h }\n  each_with_object { ary.each_with_object(Hash.new(0)) { |v, h| h[v] += 1} }\n  uniq_map { ary.uniq.map { |v| [v, ary.count(v)] }.to_h }\nend\n\n# &gt;&gt; Running each test 4 times. Test will take about 1 second.\n# &gt;&gt; group_by is faster than uniq_map by 30.000000000000004% \u00b1 10.0%\n# &gt;&gt; uniq_map is faster than each_with_object by 19.999999999999996% \u00b1 10.0%\n</code></pre>\n\n<p>How to persist the data and append to it is a separate question and how to do it depends on the size of the data you're checking, and how fast you need the code to run. Databases are very capable of doing these sort of checks extremely fast as they have code optimized to search and count unique occurrences of records. Even SQLite should have no problem doing this. Using an ORM like Sequel or ActiveRecord would make it painless to talk to the DB and to scale or port to a more capable database manager if needed.</p>\n\n<p>Writing to a local file is OK if you occasionally need to update, or you don't have a big list of words, and you don't need to share the information with other pieces of code or with another machine.</p>\n\n<p>Reading a file to recover the hash then incrementing it assumes a word will never be deleted, they'll only be added. I've written a lot of document analysis code and that case hasn't occurred, so I'd recommend thinking about long-term use before settling on your particular path.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": -1, "last_activity_date": 1479946963, "last_edit_date": 1479946963, "creation_date": 1479940662, "answer_id": 40775303, "question_id": 40769119, "link": "https://stackoverflow.com/questions/40769119/how-can-i-count-words-frenquency-and-append-results-every-time-i-run-the-script/40775303#40775303", "title": "How can i count words frenquency and append results every time i run the script in ruby", "body": "<p>Could you put the string representation of a hash (the first line of the file) in a separate (e.g., JSON) file? If so, consider something like the following.</p>\n\n<p>First let's create a JSON file for the hash and a second file, the words of which are to be counted.</p>\n\n<pre><code>require 'json'\n\nFName = \"lucy\"\nJSON_Fname = \"hash_counter.json\"\n\nFile.write(JSON_Fname, JSON.generate({\"one\" =&gt; 1, \"two\" =&gt; 1, \"three\" =&gt; 2}))\n  #=&gt; 27\n\nFile.write(FName, '[\"one\", \"two\", \"three\", \"three\"]')\n  #=&gt;32\n</code></pre>\n\n<p>First read the JSON file, parse the hash and give <code>h</code> a default value of zero.<sup>1</sup>.</p>\n\n<pre><code>h = JSON.parse(File.read(JSON_Fname))\n  #=&gt; {\"one\"=&gt;1, \"two\"=&gt;1, \"three\"=&gt;2}\n\nh.default = 0\n</code></pre>\n\n<p>(See <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-default-3D\" rel=\"nofollow noreferrer\">Hash#default=</a>). Then read the other file and update the hash.</p>\n\n<pre><code>File.read(FName).downcase.scan(/[[:alpha:]]+/).each { |w| h[w] += 1 }\n  h #=&gt; {\"one\"=&gt;2, \"two\"=&gt;2, \"three\"=&gt;4} \n</code></pre>\n\n<p>Lastly, write the hash <code>h</code> to the JSON file (as I did above).<sup>2</sup></p>\n\n<p><sup>1 Ruby expands <code>h[w] += 1</code> to <code>h[w] = h[w] + 1</code> before parsing the expression. If <code>h</code> does not have a key <code>w</code>, <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Hash#[]</a> returns the hash's default value, if it has one. Here <code>h[\"cat\"] #=&gt; 0</code> since <code>h</code> has no key <code>\"cat\"</code> and the default has been set to zero. The expression therefore becomes <code>h[w] = 0 + 1 #=&gt; 1</code>. Note that the method on the left of the equality is <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash#[]=</a>, which is why the default value does not apply there.</sup></p>\n\n<p><sup>2 To be safe, write the new JSON string to a temporary file, delete the JSON file, then rename the temporary file to the former JSON file name.</sup></p>\n"}], "owner": {"reputation": 61, "user_id": 4633252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K_Q8KxDdVgg/AAAAAAAAAAI/AAAAAAAAAHE/CKzEtuqU7sk/photo.jpg?sz=128", "display_name": "Bechir Segni", "link": "https://stackoverflow.com/users/4633252/bechir-segni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1479946963, "creation_date": 1479917070, "last_edit_date": 1479917416, "question_id": 40769119, "link": "https://stackoverflow.com/questions/40769119/how-can-i-count-words-frenquency-and-append-results-every-time-i-run-the-script", "title": "How can i count words frenquency and append results every time i run the script in ruby", "body": "<pre><code>[\"one\", \"two\", \"three\", \"three\"]\n</code></pre>\n\n<p>I want to open a file and write </p>\n\n<pre><code>{\"one\" =&gt; 1, \"two\" =&gt; 1, \"three\" =&gt; 2}\n\n\n\n[\"one\", \"two\"]\n</code></pre>\n\n<p>and in the next time open the same file and search for the each word if exsit append + 1 else create new word</p>\n\n<pre><code>{\"one\" =&gt; 2, \"two\" =&gt; 2, \"three\" =&gt; 2}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 500, "user_id": 1059230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4a52735d6b6562b77a44e9bb85449388?s=128&d=identicon&r=PG", "display_name": "Mayank Nimje", "link": "https://stackoverflow.com/users/1059230/mayank-nimje"}, "edited": false, "score": 0, "creation_date": 1479917000, "post_id": 40769005, "comment_id": 68762124, "body": "Add some filter on your view, kind of mask and use cookie before showing there common screen. Once the user login remove the mask."}, {"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479917485, "post_id": 40769005, "comment_id": 68762444, "body": "have you used devise for authentication?"}, {"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 1, "creation_date": 1479917843, "post_id": 40769005, "comment_id": 68762692, "body": "If user is not logged in then you can disable the click on photo."}, {"owner": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "reply_to_user": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479924829, "post_id": 40769005, "comment_id": 68766968, "body": "@SwapnilPatil I have not used devised for authentication, how does the syntax work for that in my javascript file?"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479936374, "post_id": 40769005, "comment_id": 68772665, "body": "If you&#39;re using your own custom authentication, you&#39;re largely on your own for debugging it. You may be able to formulate a narrower question (including code examples) if that&#39;s the case, but as it stands, your question is far too broad. You should look into using <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">Devise</a> for authentication anyway; it&#39;s the defacto standard for Rails apps. There are other solutions, but it&#39;s a Solved Problem and considering how important and complicated authentication is, you don&#39;t want to reinvent the wheel."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "edited": false, "score": 0, "creation_date": 1479941043, "post_id": 40774408, "comment_id": 68774515, "body": "I have a click on javascript method on an image that only works when the user is logged in, but the javascript alert &quot;Picture added&quot; still pops up even if the user is logged out, that is why. The picture is not being saved, but the alert pops up. How do I prevent the pop up alert"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "reply_to_user": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "edited": false, "score": 0, "creation_date": 1479942295, "post_id": 40774408, "comment_id": 68774906, "body": "How does your controller look? It should send back a different response to success if the user isn&#39;t logged in. Can you put up some code?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936370, "creation_date": 1479936370, "answer_id": 40774408, "question_id": 40769005, "link": "https://stackoverflow.com/questions/40769005/how-to-make-an-ajax-work-only-if-the-user-is-logged-in-rails/40774408#40774408", "title": "How to make an AJAX work only if the user is logged in? -rails", "body": "<p>You should have a conditional statement in the button or link that states only if the user is logged in is he or she allowed to save something. I don't have any code to use so I'll make up an example</p>\n\n<pre><code>&lt;img&gt;\n  &lt;%if user_logged_in%&gt;\n    &lt;%= link_to \"Save Picture\", profile_picture_path(@profile)%&gt;\n  &lt;% end %&gt;\n&lt;/img&gt;\n</code></pre>\n\n<p>*Note: The user_logged_in is not a default helper method, I used it to better explain the example. You would need to write that method using sessions.</p>\n\n<p>The problem is not in your AJAX call judging from your question, that seems to do exactly what your telling it to. It's actually the fact that you aren't preventing the non-logged in user saving a picture.</p>\n\n<p>With that being said, how is a user saving a picture if they aren't logged in? Where and how is that picture being stored. Please upload some code next time.</p>\n"}], "owner": {"reputation": 157, "user_id": 7174199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27c46c1618d592b029c3adbeede44413?s=128&d=identicon&r=PG&f=1", "display_name": "thatsmesofia", "link": "https://stackoverflow.com/users/7174199/thatsmesofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479936370, "creation_date": 1479916786, "question_id": 40769005, "link": "https://stackoverflow.com/questions/40769005/how-to-make-an-ajax-work-only-if-the-user-is-logged-in-rails", "title": "How to make an AJAX work only if the user is logged in? -rails", "body": "<p>I have an app that the user can only click on a photo and save them if he is logged in, however he is still able to click on it and save them when logged out because the show page is similar.</p>\n\n<p>If he is logged out though, the alert \"picture was saved\" still pops up.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479918106, "post_id": 40768920, "comment_id": 68762879, "body": "Put byebug in view and check the value of @task. I think it is not integer type."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479929097, "post_id": 40768920, "comment_id": 68769172, "body": "Where do you define <code>@task</code>?"}, {"owner": {"reputation": 91, "user_id": 6117786, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29240e457e480593e886704c62c3622b?s=128&d=identicon&r=PG&f=1", "display_name": "snovosel", "link": "https://stackoverflow.com/users/6117786/snovosel"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479930015, "post_id": 40768920, "comment_id": 68769589, "body": "@JagdeepSingh what do you mean? I&#39;m not sure I understand."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479966930, "post_id": 40768920, "comment_id": 68781233, "body": "I mean, where are you initialising it? or setting its value? I don&#39;t see that code above."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6117786, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29240e457e480593e886704c62c3622b?s=128&d=identicon&r=PG&f=1", "display_name": "snovosel", "link": "https://stackoverflow.com/users/6117786/snovosel"}, "edited": false, "score": 0, "creation_date": 1479918942, "post_id": 40769539, "comment_id": 68763459, "body": "I&#39;m not sure I understand. I wanted the application to only display tasks created by the current_user, would the current_user helper not work in the index method?"}, {"owner": {"reputation": 56, "user_id": 5403269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207207679777743/picture?type=large", "display_name": "Pete Tyldesley", "link": "https://stackoverflow.com/users/5403269/pete-tyldesley"}, "reply_to_user": {"reputation": 91, "user_id": 6117786, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29240e457e480593e886704c62c3622b?s=128&d=identicon&r=PG&f=1", "display_name": "snovosel", "link": "https://stackoverflow.com/users/6117786/snovosel"}, "edited": false, "score": 0, "creation_date": 1480001786, "post_id": 40769539, "comment_id": 68802547, "body": "You&#39;ve set @task to a collection in your index method. I&#39;m guessing in your view you have something like this:"}, {"owner": {"reputation": 91, "user_id": 6117786, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29240e457e480593e886704c62c3622b?s=128&d=identicon&r=PG&f=1", "display_name": "snovosel", "link": "https://stackoverflow.com/users/6117786/snovosel"}, "edited": false, "score": 0, "creation_date": 1480093398, "post_id": 40769539, "comment_id": 68839912, "body": "I figured out the problem. I was referencing &quot;@task&quot; in my path for the link when I should have been using &quot;f.id&quot; as I had a each do |f| statement prior to this.   Thank you for your help on this."}], "tags": [], "owner": {"reputation": 56, "user_id": 5403269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207207679777743/picture?type=large", "display_name": "Pete Tyldesley", "link": "https://stackoverflow.com/users/5403269/pete-tyldesley"}, "is_accepted": false, "score": 0, "last_activity_date": 1480050309, "last_edit_date": 1480050309, "creation_date": 1479918339, "answer_id": 40769539, "question_id": 40768920, "link": "https://stackoverflow.com/questions/40768920/delete-method-returning-error-after-devise-logout/40769539#40769539", "title": "Delete method returning error after devise logout", "body": "<p>What is <code>@task</code> referencing? It looks to me like you've set <code>@task</code> to a collection <code>@task = current_user.tasks.all</code>.\nWhich would be why your delete method can't find a specific record to delete.</p>\n\n<p>-EDIT-</p>\n\n<p>Change <code>@task</code> in your index controller to <code>@tasks</code> as it is a collection.\nIn your view, do something like:</p>\n\n<pre><code>&lt;% @tasks.each do |task| %&gt;\n &lt;div&gt;&lt;%= task.title %&gt;&lt;div class=\"delete\"&gt;&lt;%= link_to \"X\", task_path(task), method: :delete, remote: true %&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The key here is that you have <code>task_path(task)</code> which is referencing a specific task id as opposed to <code>task_path(@task)</code> which is referencing a collection of tasks.</p>\n"}], "owner": {"reputation": 91, "user_id": 6117786, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/29240e457e480593e886704c62c3622b?s=128&d=identicon&r=PG&f=1", "display_name": "snovosel", "link": "https://stackoverflow.com/users/6117786/snovosel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480050309, "creation_date": 1479916590, "last_edit_date": 1479917218, "question_id": 40768920, "link": "https://stackoverflow.com/questions/40768920/delete-method-returning-error-after-devise-logout", "title": "Delete method returning error after devise logout", "body": "<p>I'm running into a problem that I'm not exactly sure how to fix.</p>\n\n<p>I have a simple to do list application with AJAX functionality on methods such as 'new', 'create', 'complete', 'delete', as well as Devise authentication.</p>\n\n<p>When I first enter a new session with a User, all of these methods work without a problem. Additionally, the tasks are saved to only the user account, which is perfect.</p>\n\n<p>However, when I log out of an account, and then log back in, the delete method no longer works. I receive the following error:</p>\n\n<pre><code>ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=)\n</code></pre>\n\n<p>My tasks_controller.rb is below:</p>\n\n<pre><code>class TasksController &lt; ApplicationController\n  def index\n    @task = current_user.tasks.all\n  end\n  def new\n    @task = Task.new\n    respond_to do |format|\n      format.js\n      format.html\n    end\n  end\n  def create\n    @task = current_user.tasks.new(task_params)\n    @task.save\n    respond_to do |format|\n      format.html\n      format.js\n    end\n  end\n  def update\n    @task = current_user.tasks.find(params[:id])\n    @task.toggle :complete\n    @task.save\n    respond_to do |format|\n      format.html\n      format.js\n    end\n  end\n  def destroy\n    @task = Task.find(params[:id])\n    @task.destroy\n    respond_to do |format|\n      format.js\n      format.html\n    end\n  end\n  private\n  def task_params\n    params.require(:task).permit(:id, :title, :complete)\n  end\nend\n</code></pre>\n\n<p>I'm not exactly sure how to fix this problem. Would anyone have an idea on what is going wrong here?</p>\n\n<p>EDIT:</p>\n\n<p>I noticed that on my index page, I have a link to destroy the user's session at the top:</p>\n\n<pre><code>&lt;%= link_to \"Log Out\", destroy_user_session_path, :method =&gt; :delete %&gt;\n</code></pre>\n\n<p>I'm wondering if rails is having some trouble with this as both the logout link and the delete link are referencing the same method. If so, how can I change the name of the delete method for Task?</p>\n\n<pre><code>&lt;div class=\"delete\"&gt;&lt;%= link_to \"X\", task_path(@task), method: :delete, remote: true %&gt;&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "import-from-csv"], "comments": [{"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1479917449, "post_id": 40768719, "comment_id": 68762427, "body": "Where did this data come from and/or what is the CSV encoded as? This tutorial might help - <a href=\"http://www.justinweiss.com/articles/3-steps-to-fix-encoding-problems-in-ruby/\" rel=\"nofollow noreferrer\">justinweiss.com/articles/&hellip;</a>"}, {"owner": {"reputation": 137, "user_id": 5289988, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f4a26200840e02e3c32593390687c80?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Matheus", "link": "https://stackoverflow.com/users/5289988/kelvin-matheus"}, "reply_to_user": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1479917946, "post_id": 40768719, "comment_id": 68762780, "body": "@DamienRoche this is a simple file with CSV extension. I did not encode this file. I just use the CSV class to turn each row in a line in an array and. I will see the tutorial. Thanks."}, {"owner": {"reputation": 17720, "user_id": 498594, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/EYtd3.png?s=128&g=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/498594/kelvin"}, "edited": false, "score": 0, "creation_date": 1479918880, "post_id": 40768719, "comment_id": 68763415, "body": "<code>force_encoding</code> should only be used in very specific cases; and almost never when opening a file (unless you know there&#39;s specific text that doesn&#39;t conform to the overall encoding of the file). Instead you should specify the encoding when opening the CSV; see <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/csv/rdoc/CSV.html#method-c-foreach\" rel=\"nofollow noreferrer\">the doc</a>."}], "answers": [{"tags": [], "owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "is_accepted": false, "score": 1, "last_activity_date": 1479918356, "last_edit_date": 1495541626, "creation_date": 1479918356, "answer_id": 40769545, "question_id": 40768719, "link": "https://stackoverflow.com/questions/40768719/error-with-converting-a-string-negative-number-to-an-integer-when-importing-in-r/40769545#40769545", "title": "Error with converting a string negative number to an integer when importing in Ruby", "body": "<p>It looks like you actually have two characters here..</p>\n\n<ul>\n<li><code>\\xC2</code>: <a href=\"https://stackoverflow.com/questions/18382834/sublimetext-keeps-inserting-xc2-characters\">SublimeText keeps inserting \\xc2 characters</a></li>\n<li><code>\\xAD</code>: (soft-hyphen) <a href=\"http://www.fileformat.info/info/unicode/char/00ad/index.htm\" rel=\"nofollow noreferrer\">http://www.fileformat.info/info/unicode/char/00ad/index.htm</a></li>\n</ul>\n\n<p>Personally, I would replace this combination of characters with an actual hyphen and then convert to integer:</p>\n\n<pre><code>CSV.foreach(\"file.csv\") do |row|\n  p row[1].sub(\"\\xC2\\xAD\", '-').to_i\nend\n</code></pre>\n\n<p>That, or clean up the source file. Unsure of how you are generating it, but worth looking into.</p>\n"}], "owner": {"reputation": 137, "user_id": 5289988, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f4a26200840e02e3c32593390687c80?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Matheus", "link": "https://stackoverflow.com/users/5289988/kelvin-matheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1479918356, "creation_date": 1479916039, "last_edit_date": 1479917306, "question_id": 40768719, "link": "https://stackoverflow.com/questions/40768719/error-with-converting-a-string-negative-number-to-an-integer-when-importing-in-r", "title": "Error with converting a string negative number to an integer when importing in Ruby", "body": "<p>My Ruby environment is: Ruby 2.3.1 and Rails 5.0.0.1.</p>\n\n<p>I'm trying to convert a negative string number in an integer, for instance:</p>\n\n<p>When I try to turn this \"-2000\" in the <em>irb</em> terminal, I got the result expected <em>-2000</em></p>\n\n<p>But I'm trying to convert this when I import this data from a <em>CSV</em> file.</p>\n\n<p>I'm using the following information:</p>\n\n<p>CSV file</p>\n\n<pre><code>345,\u00ad-2000\n345,120000\n</code></pre>\n\n<p>Code file</p>\n\n<pre><code>CSV.foreach(\"file.csv\") do |row|\n  p [row[0], row[1]]\n  p row[1].to_i\n  p row[1].force_encoding('UTF-8').to_i\n  p Integer(row[1])\n  p Integer(row[1].force_encoding('UTF-8'))\nend\n</code></pre>\n\n<p>I got that:</p>\n\n<pre><code>[\"345\", \"\u00ad-2000\"]\n0\n0\n'Integer': invalid value for Integer(): \"\\xC2\\xAD2000\" (ArgumentError)\n'Integer': invalid value for Integer(): \"\\xC2\\xAD2000\" (ArgumentError)\n</code></pre>\n\n<p>Using the Integer(), I discovered that the - sign is represented by \"\\xC2\\xAD\".</p>\n\n<p>In summary, the to_i method is converting \"\\xC2\\xAD2000\" to 0 and the Integer() is trigging an error.</p>\n\n<p>Could someone help with that?</p>\n\n<p>Thanks for your attention.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1479913566, "post_id": 40767869, "comment_id": 68759780, "body": "This feature is called here doc. It&#39;s a way to define multiline strings. The result contains all <b>lines</b> between <code>&lt;&lt;-TPL</code> and <code>TPL</code>. <code>gsub(&#47;^\\s+&#47;,&#39;&#39;)</code> is applied to this string."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1479914296, "post_id": 40767869, "comment_id": 68760287, "body": "@Jordan: What&#39;s the difference between <code>duplicate</code> and <code>that solved my problem</code> tags?"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1479913818, "creation_date": 1479913818, "answer_id": 40767981, "question_id": 40767869, "link": "https://stackoverflow.com/questions/40767869/what-does-mean-in-ruby/40767981#40767981", "title": "What does &lt;&lt;- mean in ruby?", "body": "<p>It is called <a href=\"https://ruby-doc.org/core-2.3.3/doc/syntax/literals_rdoc.html#label-Here+Documents\" rel=\"nofollow noreferrer\">heredoc</a>:</p>\n\n<blockquote>\n  <p>If you are writing a large block of text you may use a \u201chere document\u201d\n  or \u201cheredoc\u201d:</p>\n\n<pre><code>expected_result = &lt;&lt;HEREDOC\n\nThis would contain specially formatted text.\n\nThat might span many lines\nHEREDOC\n</code></pre>\n  \n  <p>The heredoc starts on the line following &lt;&lt; HEREDOC and ends with the\n  next line that starts with HEREDOC. The result includes the ending\n  newline.</p>\n  \n  <p>You may use any identifier with a heredoc, but all-uppercase\n  identifiers are typically used.</p>\n  \n  <p>You may indent the ending identifier if you place a \u201c-\u201d after &lt;&lt;:</p>\n\n<pre><code>  expected_result = &lt;&lt;-INDENTED_HEREDOC\nThis would contain specially formatted text.\n\nThat might span many lines\n  INDENTED_HEREDOC\n</code></pre>\n  \n  <p>Note that the while the closing identifier may be indented, the\n  content is always treated as if it is flush left. If you indent the\n  content those spaces will appear in the output.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479914108, "post_id": 40768040, "comment_id": 68760163, "body": "question is about <code>&lt;&lt;-</code>, not <code>&lt;&lt;</code> :)"}, {"owner": {"reputation": 1329, "user_id": 4341902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GA0Ju.jpg?s=128&g=1", "display_name": "Billy Ferguson", "link": "https://stackoverflow.com/users/4341902/billy-ferguson"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479914462, "post_id": 40768040, "comment_id": 68760394, "body": "sorry, TPL wasn&#39;t indented so I assumed he didn&#39;t even want to know what the - was for."}], "tags": [], "owner": {"reputation": 1329, "user_id": 4341902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GA0Ju.jpg?s=128&g=1", "display_name": "Billy Ferguson", "link": "https://stackoverflow.com/users/4341902/billy-ferguson"}, "is_accepted": false, "score": 1, "last_activity_date": 1479914001, "last_edit_date": 1495540403, "creation_date": 1479914001, "answer_id": 40768040, "question_id": 40767869, "link": "https://stackoverflow.com/questions/40767869/what-does-mean-in-ruby/40768040#40768040", "title": "What does &lt;&lt;- mean in ruby?", "body": "<p>Unfortunately there are many uses for the <code>&lt;&lt;</code> operator in Ruby. However, in your specific case the <code>&lt;&lt;</code> is used for declaring a string that spans multiple lines. Which allows you to get the matrix looking standard output.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6852072/what-does-mean-in-ruby\">What does &lt;&lt; mean in Ruby?</a> is a link that has many others</p>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1479914197, "accepted_answer_id": 40767981, "answer_count": 2, "score": 0, "last_activity_date": 1479915880, "creation_date": 1479913499, "last_edit_date": 1479915880, "question_id": 40767869, "link": "https://stackoverflow.com/questions/40767869/what-does-mean-in-ruby", "closed_reason": "Duplicate", "title": "What does &lt;&lt;- mean in ruby?", "body": "<pre><code>  template = &lt;&lt;-TPL.gsub(/^\\s+/,'')\n    \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n    | X X X |\n    | X X X |\n    | X YYX |\n    | X X X |\n    \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n  TPL\n</code></pre>\n\n<p>This is a snippet from <code>gem rubycards</code>.</p>\n\n<p>I understand that it is storing some string in template. But what does <code>&lt;&lt;-</code> do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479914228, "post_id": 40767762, "comment_id": 68760245, "body": "In ruby Console aa = [{xx: &#39;#$&#39;, yy: &#39;yy&#39;}, {zz: &#39;zzz&#39;}].to_json   ===&gt; In chrome console   JSON.parse(aa), you will get expected array, its just ruby method to handle string interpolation thing"}, {"owner": {"reputation": 305, "user_id": 1819539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2394549f198e7e8fc76c9e7e243bd0?s=128&d=identicon&r=PG", "display_name": "Oscar Jiang", "link": "https://stackoverflow.com/users/1819539/oscar-jiang"}, "reply_to_user": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479914742, "post_id": 40767762, "comment_id": 68760581, "body": "Thanks @WishZone. You are right. just put to_json in the array will fix the problem."}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479914903, "post_id": 40767762, "comment_id": 68760699, "body": "GREAT!! Just added answer , please mark it as solved"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479915141, "post_id": 40767762, "comment_id": 68760850, "body": "\u201cput <code>to_json</code> in the array will fix the problem\u201d\u2014wrong. There is no problem, and hence <code>to_json</code> can not fix anything."}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479915216, "post_id": 40767762, "comment_id": 68760900, "body": "@mudasobwa yes there is no such issue but he is trying to get expected results, he will get in this way , you explaination is correct"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1479914130, "creation_date": 1479914130, "answer_id": 40768071, "question_id": 40767762, "link": "https://stackoverflow.com/questions/40767762/string-start-with-return-with-backslash-in-rails-console-in-some-case/40768071#40768071", "title": "String start with # return with backslash in rails console in some case", "body": "<p>This is not true.</p>\n\n<p>In <code>'#{...}'</code> hash will also be escaped. This is done to prevent recursive/implicit <em>string interpolation</em>.</p>\n\n<p>Look:</p>\n\n<pre><code>$a = 'hello'\n\"#$a\"\n#\u21d2 \"hello\"\n</code></pre>\n\n<p>The problem <em>is already solved by ruby for you</em>. Just use the produced string as is and don\u2019t be fooled by the way it is <em>printed out in console</em>.</p>\n\n<pre><code>\"\\#$\".length\n#\u21d2\u00a02\n\"\\#$\" == '#$'\n#\u21d2\u00a0true\n\"\\#$\"[0]\n#\u21d2\u00a0\"#\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1479915778, "last_edit_date": 1479915778, "creation_date": 1479914858, "answer_id": 40768334, "question_id": 40767762, "link": "https://stackoverflow.com/questions/40767762/string-start-with-return-with-backslash-in-rails-console-in-some-case/40768334#40768334", "title": "String start with # return with backslash in rails console in some case", "body": "<p>@mudasobwa's explaination is correct</p>\n\n<p>According to your situation you should try in this way</p>\n\n<p>===> In rails console</p>\n\n<pre><code> json_values = [{xx: '#$', yy: 'yy'}, {zz: 'zzz'}].to_json\n</code></pre>\n\n<p>===> In chrome console</p>\n\n<pre><code> result = JSON.parse(json_values)\n</code></pre>\n\n<p>you will get expected array, its just ruby technique to handle string interpolation thing</p>\n"}], "owner": {"reputation": 305, "user_id": 1819539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2394549f198e7e8fc76c9e7e243bd0?s=128&d=identicon&r=PG", "display_name": "Oscar Jiang", "link": "https://stackoverflow.com/users/1819539/oscar-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 40768334, "answer_count": 2, "score": 2, "last_activity_date": 1479915778, "creation_date": 1479913110, "question_id": 40767762, "link": "https://stackoverflow.com/questions/40767762/string-start-with-return-with-backslash-in-rails-console-in-some-case", "title": "String start with # return with backslash in rails console in some case", "body": "<p>In console of rails 4.2.7, I have the following test:</p>\n\n<pre><code>[45] pry(main)&gt; '#$'\n=&gt; \"\\#$\"\n[46] pry(main)&gt; '#@'\n=&gt; \"\\#@\"\n[47] pry(main)&gt; '#!'\n=&gt; \"#!\"\n[48] pry(main)&gt; '#ab'\n=&gt; \"#ab\"\n</code></pre>\n\n<p>It seems rails will only put a \"\\\" before the string when there is an @ or $ after #.  </p>\n\n<p>The problem leads me to this test is that I have a erb file that render a data attribute with an array of json: </p>\n\n<pre><code>data-xx=\"&lt;%= [{xx: '#$', yy: 'yy'}.to_json, {zz: 'zzz'}.to_json] %&gt;\"\n</code></pre>\n\n<p>Then in chrome console, it will give the unexpected result as</p>\n\n<pre><code>$(\"#entry_show_modal_template\").data('xx')\n\"[\"{\\\"xx\\\":\\\"\\#$\\\",\\\"yy\\\":\\\"yy\\\"}\", \"{\\\"zz\\\":\\\"zzz\\\"}\"]\"\n</code></pre>\n\n<p>And when I change xx value from #! or some other string, the result will be ok as an array</p>\n\n<pre><code>$(\"#entry_show_modal_template\").data('xx')\n[\"{\"xx\":\"#!\",\"yy\":\"yy\"}\", \"{\"zz\":\"zzz\"}\"]\n</code></pre>\n\n<p>Does someone know if it is true and why it has such difference?\nAnd it there any way to tackle this problem?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "mapbox", "geojson"], "comments": [{"owner": {"reputation": 7514, "user_id": 259764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67a6eb9b43b617b2051b912b8373a156?s=128&d=identicon&r=PG", "display_name": "Thiago Belem", "link": "https://stackoverflow.com/users/259764/thiago-belem"}, "edited": false, "score": 0, "creation_date": 1479912550, "post_id": 40767459, "comment_id": 68759041, "body": "Can you elaborate a little more on your question? Show us some code, tell us what are you trying to do and what problems you&#39;re having. See <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 7514, "user_id": 259764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67a6eb9b43b617b2051b912b8373a156?s=128&d=identicon&r=PG", "display_name": "Thiago Belem", "link": "https://stackoverflow.com/users/259764/thiago-belem"}, "edited": false, "score": 0, "creation_date": 1479912739, "post_id": 40767459, "comment_id": 68759180, "body": "Hello @ThiagoBelem, I have no code for the moment, I just want to know how to proceed"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 7514, "user_id": 259764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67a6eb9b43b617b2051b912b8373a156?s=128&d=identicon&r=PG", "display_name": "Thiago Belem", "link": "https://stackoverflow.com/users/259764/thiago-belem"}, "edited": false, "score": 0, "creation_date": 1479912987, "post_id": 40767459, "comment_id": 68759369, "body": "For the moment, I just have my select form created, generated with countries.json, and now, I would like to create a marker on my map (mapbox) using this country name selected by the user"}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1479915926, "post_id": 40767459, "comment_id": 68761378, "body": "You proceed by attempting it yourself, then you ask a question about why it doesn&#39;t work. There is plenty of documentation available to get you started. All you have to do is read it."}], "answers": [{"tags": [], "owner": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "is_accepted": false, "score": 0, "last_activity_date": 1480176680, "creation_date": 1480176680, "answer_id": 40820297, "question_id": 40767459, "link": "https://stackoverflow.com/questions/40767459/create-marker-on-mapbox-with-rails/40820297#40820297", "title": "Create marker on mapbox with rails", "body": "<p>Why does a backend action need to be involved here?And secondly, if you want to draw markers on the map, don't you need geo data as well?</p>\n\n<p>What about trying to </p>\n\n<p>1.Source a countries geojson file(like <a href=\"https://github.com/johan/world.geo.json/blob/master/countries.geo.json\" rel=\"nofollow noreferrer\">https://github.com/johan/world.geo.json/blob/master/countries.geo.json</a>)</p>\n\n<p>2.Loading that json clientside with <code>$.getJSON</code></p>\n\n<p>3.Clientside templating a select box from all the country names in the properties hashes of each feature.</p>\n\n<p>4.Setting a <code>.change(function(){})</code> event handler on said select box which draws a point and moves the map depending on user input</p>\n"}], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480176680, "creation_date": 1479912256, "last_edit_date": 1479913373, "question_id": 40767459, "link": "https://stackoverflow.com/questions/40767459/create-marker-on-mapbox-with-rails", "title": "Create marker on mapbox with rails", "body": "<p>I want to create a dynamic map using Ruby on Rails, <a href=\"http://geojson.org/\" rel=\"nofollow noreferrer\">geojson</a>, gem <a href=\"https://github.com/rgeo/rgeo-geojson\" rel=\"nofollow noreferrer\">rgeo-geojson</a>, and <a href=\"https://www.mapbox.com/mapbox.js/\" rel=\"nofollow noreferrer\">mapbox.js</a>. </p>\n\n<p>I have a form where users input a country with a select generated by a JSON file listing all the countries.</p>\n\n<p>I want Rails to compare it with a <code>countries.geo.json</code> file listing all countries, and then generate a marker on the map with the country selected.</p>\n\n<p>Here is my application_helper.rb where I create the select option form :</p>\n\n<pre><code>  def countries_for_select\n    file = File.read(Rails.root.join( 'app', 'helpers', 'countries.json'))\n    countries = JSON.parse(file)\n    countries.map {|c| [c['name']] }\n  end\n</code></pre>\n\n<p>using countries.json file, and now I want to generate a marker on the map (mapbox) depending on which country user choose </p>\n\n<p>My countries.json file is like that :</p>\n\n<pre><code>[\n    {\n        \"name\": \"Afghanistan\",\n        \"code\": \"AF\"\n    },\n    {\n        \"name\": \"\u00c5land Islands\",\n        \"code\": \"AX\"\n    },\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "linux", "windows-10"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1479914704, "post_id": 40767451, "comment_id": 68760551, "body": "Are you on Linux or Windows10?"}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1479915533, "post_id": 40767451, "comment_id": 68761119, "body": "try sudo bundle install"}, {"owner": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479942627, "post_id": 40767451, "comment_id": 68775005, "body": "linux as sub system of windows 10"}], "answers": [{"comments": [{"owner": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479944798, "post_id": 40774486, "comment_id": 68775666, "body": "It return this find: ``/home/fil/.bundle/cache&#39;: No such file or directory`"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "reply_to_user": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479944944, "post_id": 40774486, "comment_id": 68775711, "body": "Maybe you did <code>sudo bundle</code> the first time you used it, and <code>~&#47;.bundle</code> is owned by root. If <code>ls -l ~&#47;.bundle</code> shows it&#39;s owned by root, do <code>chmod -R fil ~&#47;.bundle</code>. If you don&#39;t even have a <code>.bundle</code> directory then you&#39;ve got bigger problems, like perhaps not owning your home directory."}, {"owner": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479944973, "post_id": 40774486, "comment_id": 68775719, "body": "I also try this since there&#39;s no cache and this was the result <code>chown -R fil ~&#47;.bundle chown: changing ownership of \u2018&#47;home&#47;fil&#47;.bundle\u2019: Operation not permitted</code>"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "reply_to_user": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479945038, "post_id": 40774486, "comment_id": 68775740, "body": "What is <code>ls -l &#47;home&#47;fil</code> showing? Is your filesystem mounted read-only or something crazy like that?"}, {"owner": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479945120, "post_id": 40774486, "comment_id": 68775759, "body": "It just said No such file or directory"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "reply_to_user": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "edited": false, "score": 0, "creation_date": 1479945277, "post_id": 40774486, "comment_id": 68775790, "body": "I&#39;m tapping out. Your problem seems to be well beyond the scope of your question."}], "tags": [], "owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "is_accepted": true, "score": 9, "last_activity_date": 1537286385, "last_edit_date": 1537286385, "creation_date": 1479936768, "answer_id": 40774486, "question_id": 40767451, "link": "https://stackoverflow.com/questions/40767451/grant-permission-for-the-path/40774486#40774486", "title": "Grant permission for the path", "body": "<p>It looks like you ran <code>bundle install</code> as root at some point (via <code>sudo bundle install</code>), which you should never do. You can <code>sudo</code> it again to get past this problem, as @GurmukhSingh suggests, but that's just going to compound the problem and isn't a good idea from a security standpoint.</p>\n\n<p>If you want to find files in your Bundler cache that aren't owned by <code>fil</code> (assuming your username is <code>fil</code>), you can run this:</p>\n\n<pre><code>find ~/.bundle/cache ! -user fil -ls\n</code></pre>\n\n<p>If that returns anything at all, then the problem is likely that those files are owned by <code>root</code> (or some other user); the <code>-ls</code> flag to <code>find</code> will show you who owns them.</p>\n\n<p>You can delete the offending files and run <code>bundle install</code> again, or you can change the ownership of them with:</p>\n\n<pre><code>chown -R fil ~/.bundle/cache\n</code></pre>\n\n<p>You may need to check on all files in <code>~/.bundle</code> and not just the <code>cache</code> dir.</p>\n\n<p>In the future, don't run <code>bundle install</code> via <code>sudo</code>.</p>\n"}], "owner": {"reputation": 5240, "user_id": 3721034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9Xqsk.jpg?s=128&g=1", "display_name": "Fil", "link": "https://stackoverflow.com/users/3721034/fil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2219, "favorite_count": 1, "accepted_answer_id": 40774486, "answer_count": 1, "score": 2, "last_activity_date": 1537286385, "creation_date": 1479912237, "question_id": 40767451, "link": "https://stackoverflow.com/questions/40767451/grant-permission-for-the-path", "title": "Grant permission for the path", "body": "<p>I am following this <a href=\"https://gorails.com/setup/windows/10\" rel=\"nofollow noreferrer\">guide</a>, to install ruby, while everything has no problem except when I try to run this command</p>\n\n<p><strong>rails new myapp -d mysql</strong></p>\n\n<p>in which I got this error</p>\n\n<pre><code>  run  bundle install\nThere was an error while trying to write to\n`/home/fil/.bundle/cache/compact_index/rubygems.org.443.29b0360b937aa4d161703e6160654e47`. It is likely that you need to\ngrant write permissions for that path.\n         run  bundle exec spring binstub --all\nbundler: command not found: spring\nInstall missing gem executables with `bundle install`\n</code></pre>\n\n<p>Is there any way to solve this?</p>\n"}, {"tags": ["ruby", "sockets", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 3967758, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/18386db8285f48189eb7b61d2433aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Vorpulus Lyphane", "link": "https://stackoverflow.com/users/3967758/vorpulus-lyphane"}, "edited": false, "score": 0, "creation_date": 1495559873, "post_id": 40781707, "comment_id": 75300538, "body": "Thanks.  How does the server &#39;notice&#39; that the socket is half-closed after I use socket.close_write?  What does that code actually do?  Does it send something to the server?"}], "tags": [], "owner": {"reputation": 77, "user_id": 2472278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a836eb54d728f5cd9ecf36dceec7aaa1?s=128&d=identicon&r=PG", "display_name": "Vau", "link": "https://stackoverflow.com/users/2472278/vau"}, "is_accepted": false, "score": 0, "last_activity_date": 1479977583, "creation_date": 1479977583, "answer_id": 40781707, "question_id": 40767043, "link": "https://stackoverflow.com/questions/40767043/reading-from-a-tcpsocket-in-ruby/40781707#40781707", "title": "Reading from a TCPSocket in Ruby", "body": "<p><code>socket.close_write</code> is not necessary. I mean you can get what socket returns by <code>socket.read</code>, but you are gonna to wait some time. The reason why is because you are trying to read the whole stream in one with <code>socket.read</code>. It takes time. You can find out what socket returns by doing: </p>\n\n<pre><code>socket.each_line do |line|\n  puts line\nend\n</code></pre>\n\n<p>BTW, <a href=\"https://en.wikipedia.org/wiki/Nagle&#39;s_algorithm\" rel=\"nofollow noreferrer\">Nagle's algorithm</a> makes it slow too.</p>\n\n<p>What<code>close_write</code> does is let the client side half-close the socket.When the server side notice this, it will also close its side. Then you can finish reading very quickly.</p>\n\n<p>Or you can use <code>IO::select</code>.As the <a href=\"https://ruby-doc.org/core-2.0.0/IO.html#method-c-select\" rel=\"nofollow noreferrer\">documentation</a> said:</p>\n\n<blockquote>\n  <p>It monitors given arrays of IO objects, waits one or more of IO objects ready for reading, are ready for writing, and have pending exceptions respectively, and returns an array that contains arrays of those IO objects. It will return nil if optional timeout value is given and no IO object is ready in timeout seconds.</p>\n</blockquote>\n\n<pre><code>ready = IO.select([socket], nil, nil, 10)\nif ready\n  # do something\nelse\n  # raise timeout\nend\n</code></pre>\n\n<p>Here we pass the first parameter, which is the object <code>ready for reading</code> and the last is the timeout you want set. This means if the reading is not ready in 10 seconds it will return nil then raise timeout error. </p>\n"}], "owner": {"reputation": 578, "user_id": 3967758, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/18386db8285f48189eb7b61d2433aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Vorpulus Lyphane", "link": "https://stackoverflow.com/users/3967758/vorpulus-lyphane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4519, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1479977583, "creation_date": 1479911083, "last_edit_date": 1479913051, "question_id": 40767043, "link": "https://stackoverflow.com/questions/40767043/reading-from-a-tcpsocket-in-ruby", "title": "Reading from a TCPSocket in Ruby", "body": "<p>This code sends two HTTP requests to the www.example.com website:</p>\n\n<pre><code>require 'socket'\n\n@host = 'www.example.com'\n@port = 80\n@path = \"/\"\n\n# Build HTTP request\ndef request(close=false)\n  \"GET #{@path} HTTP/1.1\\r\\nHost: #{@host}#{\"\\r\\nConnection: close\" if close}\\r\\n\\r\\n\"\nend\n\n# Build socket\nsocket = TCPSocket.open(@host,@port)  # Connect to server\n\n# Send request twice via socket\n2.times {socket.print request}\n</code></pre>\n\n<p>Here are various methods I have found for reading the response:</p>\n\n<pre><code># Method 1: close_write and read\nsocket.close_write # Without this line, the next line hangs\nresponse = socket.read\nputs response.length\n\n# Method 2: send another http request with 'Connection: close' header, then use 'read'\nsocket.print request(true) # Without this line, the next line hangs\nresponse = socket.read\nputs response.length\n\n# Method 3: recv\n# puts socket.eof?  # Method fails when I add this line\nr1, r2 = socket.recv(1000000), socket.recv(1000000)\nputs r1.length, r2.length\n\n# Method 4: IO.select and read_nonblock\nputs socket.eof?\n# IO.select([socket])  # The code still works without this IO.select...\nr1 = socket.read_nonblock(9999999)\nIO.select([socket])  # ...but not without this one\nr2 = socket.read_nonblock(9999999)\nputs r1.length, r2.length\nputs socket.eof? # Hangs for ages before returning 'true'\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>What exactly is 'socket.close_write' line doing in Method 1 and why is it necessary for the method to work?</li>\n<li>In Method 2, is the 'Connection: close' header somehow achieving the same result as the 'socket.close_write' line in Method 1?  If not, what is it doing, and why is it necessary for the rest of the method to work?</li>\n<li>Why, in Method 3, does the addition of the commented line, 'puts socket.eof?', cause the rest of the code to hang?</li>\n<li>In Method 3, how and why does the recv call stop at the end of an HTTP response (as opposed to picking up the next response as well)?</li>\n<li>Why is it that the second IO.select in Method 4 is necessary, but the first isn't?</li>\n<li>What does IO.select actually do?</li>\n<li>Why does the last line, 'puts socket.eof?', in Method 4 hang for ages before returning true?</li>\n<li>Is there a general way of checking how many responses a socket is currently expecting, and reading that number of responses from the socket, without closing the socket for writing? </li>\n</ol>\n\n<p>Finally, if not possible in an answer here, is there a good resource somewhere where I can get some clarity on all of the above, and general clarity on reading from TCP sockets (or network sockets in general)?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "sparql", "virtuoso"], "comments": [{"owner": {"reputation": 8217, "user_id": 241164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c827c7be0a2d3dc7e4732934f62aa9a?s=128&d=identicon&r=PG", "display_name": "TallTed", "link": "https://stackoverflow.com/users/241164/tallted"}, "edited": false, "score": 0, "creation_date": 1479924953, "post_id": 40766832, "comment_id": 68767029, "body": "The description doesn&#39;t seem to implicate Virtuoso, so I wonder about that tag.  The question seems like a strong candidate for the <a href=\"http://lists.w3.org/Archives/Public/public-rdf-ruby/\" rel=\"nofollow noreferrer\">rdf-raptor mailing list</a>, as it looks bug-like to me, with the local file parsing possibly being handled differently than the download stream parsing..."}, {"owner": {"reputation": 335, "user_id": 4475333, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MGJru.jpg?s=128&g=1", "display_name": "Urco", "link": "https://stackoverflow.com/users/4475333/urco"}, "reply_to_user": {"reputation": 8217, "user_id": 241164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c827c7be0a2d3dc7e4732934f62aa9a?s=128&d=identicon&r=PG", "display_name": "TallTed", "link": "https://stackoverflow.com/users/241164/tallted"}, "edited": false, "score": 0, "creation_date": 1479979938, "post_id": 40766832, "comment_id": 68787904, "body": "You are right. It is due to some bug in the parsing of the result after calling the construct. I worked around it by calling directly the endpoints and not parsing the result afterwards, just returning it as is."}], "owner": {"reputation": 335, "user_id": 4475333, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MGJru.jpg?s=128&g=1", "display_name": "Urco", "link": "https://stackoverflow.com/users/4475333/urco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479924669, "creation_date": 1479910504, "last_edit_date": 1479924669, "question_id": 40766832, "link": "https://stackoverflow.com/questions/40766832/segmentation-fault-in-ruby-rdf-sparql-client-with-construct-query", "title": "segmentation fault in Ruby RDF/Sparql client with CONSTRUCT query", "body": "<p>I want to retrieve a TTL from a <a href=\"http://virtuoso.openlinksw.com/\" rel=\"nofollow noreferrer\">Virtuoso</a> endpoint. </p>\n\n<pre><code>query(construct_query).each_statement do |statement|\n  puts statement.inspect\nend\n</code></pre>\n\n<p>The <code>CONSTRUCT</code> query returns <strong>~652977</strong> statements.</p>\n\n<pre><code>CONSTRUCT {\n  ?s ?p ?o\n}\nFROM &lt;http://tempgraph&gt;\nWHERE {\n  ?s ?p ?o .\n}\n</code></pre>\n\n<p>But I get a segmentation fault.</p>\n\n<pre><code>/usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi/v2/parser.rb:209: [BUG] Segmentation fault at     0x00000000000000\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n\n-- Control frame information -----------------------------------------------\nc:0057 p:---- s:0289 e:000288 CFUNC  :raptor_parser_parse_chunk\nc:0056 p:0018 s:0282 E:001128 METHOD /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi/v2/parser.rb:209\nc:0055 p:0025 s:0278 E:001198 RESCUE /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi/v2/parser.rb:163\nc:0054 p:0056 s:0275 E:001be0 METHOD /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi/v2/parser.rb:157\nc:0053 p:0175 s:0268 E:0006d8 METHOD /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi/v2/parser.rb:92\nc:0052 p:0018 s:0262 E:000110 METHOD /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi.rb:118\nc:0051 p:0048 s:0257 E:001290 METHOD /usr/local/bundle/gems/rdf-raptor-1.99.0/lib/rdf/raptor/ffi.rb:84\nc:0050 p:0130 s:0252 E:000f38 METHOD /app/lib/queries.rb:146\n... etc\n</code></pre>\n\n<p>However testing to query the Virtuoso endpoint via HTTP directly, the result is successfully fetched and created.</p>\n\n<pre><code>require 'net/http'\nrequire 'linkeddata'\nrequire 'cgi'\n\nquery = \"CONSTRUCT { ?s ?p ?o  } FROM &lt;http://tempgraph&gt; WHERE { ?s ?p ?o . }\"\nbaseURL = \"http://localhost:8890/sparql/\"\nsparqlURL=baseURL+\"?query=#{CGI.escape query}\"\nresponse = Net::HTTP.get_response(URI.parse(sparqlURL))\n\n\nFile.open(\"response.ttl\", \"wb\") do |res|\n  res.puts response.body\nend                             \n</code></pre>\n\n<p>And it creates the full TTL</p>\n\n<pre><code>$ cat response.ttl | wc -l\n652996\n</code></pre>\n\n<p>[EDIT]\nThe <strong>response.ttl</strong> fetched from the endpoint via HTTP can be successfully serialized into RDF via the RDF/Ruby library. Hence, it is safe to assume that it is the SPARQL client.</p>\n\n<pre><code>  RDF::Writer.open(\"/app/output.rdf\") do |writer|\n    RDF::Reader.open(\"/app/response.ttl\") do |reader|\n      reader.each_statement do |statement|\n        writer &lt;&lt; statement\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1479910735, "post_id": 40766684, "comment_id": 68757809, "body": "I think <code>params[:id]</code> is <code>nil</code>"}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 6872532, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1191247364279088/picture?type=large", "display_name": "Alexander Donets", "link": "https://stackoverflow.com/users/6872532/alexander-donets"}, "edited": false, "score": 0, "creation_date": 1479911057, "post_id": 40766939, "comment_id": 68758043, "body": "The same outcome. I have a loop of all entries that belong to this user in user -&gt; show view like that &quot;current_user.entries.each do |entry|&quot;. I tried passing &quot;entry&quot; and it won&#39;t work. Neither did passing @entry. Maybe I&#39;m missing some detail? I&#39;m new to rails..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1479911585, "post_id": 40766939, "comment_id": 68758407, "body": "this works if you change the route: <code>delete &quot;remove_entry&#47;:id&quot; =&gt; &quot;entries#destroy&quot;, :as =&gt; &quot;remove_entry&quot;</code>"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1479910784, "creation_date": 1479910784, "answer_id": 40766939, "question_id": 40766684, "link": "https://stackoverflow.com/questions/40766684/rails-4-how-do-i-delete-a-nested-object/40766939#40766939", "title": "Rails 4: How do I delete a nested object?", "body": "<p>You are receiving <code>params[:id]</code> as <code>nil</code> and that's why you are getting this error</p>\n\n<blockquote>\n  <p>Couldn't find Entry without an ID</p>\n</blockquote>\n\n<p>Pass <code>@entry</code> object with the route helper</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Destroy', remove_entry_path(@entry), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": true, "score": 1, "last_activity_date": 1479911986, "last_edit_date": 1479911986, "creation_date": 1479911250, "answer_id": 40767096, "question_id": 40766684, "link": "https://stackoverflow.com/questions/40766684/rails-4-how-do-i-delete-a-nested-object/40767096#40767096", "title": "Rails 4: How do I delete a nested object?", "body": "<p>You need to pass an id to this route:</p>\n\n<pre><code>delete \"remove_entry\" =&gt; \"entries#destroy\", :as =&gt; \"remove_entry\"\n</code></pre>\n\n<p>The remove_entry route, doesn't have a positional parameter for id, and in your call to remove_entry_path, you don't provide an id param.</p>\n\n<p>That is why in your controller action, params[:id] == nil</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Pass an id</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Destroy', remove_entry_path(id: @entry.id), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>or add a positional parameter in the route and pass the id to the url helper.</p>\n\n<pre><code># config/routes.rb\ndelete \"remove_entry/:id\" =&gt; \"entries#destroy\", :as =&gt; \"remove_entry\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;!-- in view --&gt;\n&lt;p&gt;&lt;%= link_to 'Destroy', remove_entry_path(id: @entry.id), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 6872532, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1191247364279088/picture?type=large", "display_name": "Alexander Donets", "link": "https://stackoverflow.com/users/6872532/alexander-donets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 40767096, "answer_count": 2, "score": 1, "last_activity_date": 1479911986, "creation_date": 1479910116, "question_id": 40766684, "link": "https://stackoverflow.com/questions/40766684/rails-4-how-do-i-delete-a-nested-object", "title": "Rails 4: How do I delete a nested object?", "body": "<p>So I have a user model and a nested model \"Entries\" like that: </p>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  has_many :entries\n  ...\n\nend\n</code></pre>\n\n<p>entry.rb</p>\n\n<pre><code>class Entry &lt; ActiveRecord::Base\n\n  belongs_to :user\n  ...\n\nend\n</code></pre>\n\n<p>user/show.html.erb</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Destroy', remove_entry_path, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>resources :users do\n    resources :entries\nend\n...\ndelete \"remove_entry\" =&gt; \"entries#destroy\", :as =&gt; \"remove_entry\"\n</code></pre>\n\n<p>entries_controller.rb</p>\n\n<pre><code>def destroy\n\n    @user = current_user\n    @user.entries.find(params[:id]).destroy\n\n    respond_to do |format|\n      format.html { redirect_to user_path(current_user), notice: 'Entry was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n\n  end\n</code></pre>\n\n<p>And I get this error: </p>\n\n<p>Couldn't find Entry without an ID</p>\n\n<p>on this line</p>\n\n<pre><code>@user.entries.find(params[:id]).destroy\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "image", "ruby-on-rails-4", "thumbnails", "rails-admin"], "comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479908230, "post_id": 40765527, "comment_id": 68756121, "body": "Have you created new submission after adding this style configration??"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "reply_to_user": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479908377, "post_id": 40765527, "comment_id": 68756213, "body": "Yes, I just added a new project and the image is still displayed like very large!"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479908453, "post_id": 40765527, "comment_id": 68756268, "body": ":content_type =&gt; &#39;application/pdf&#39; Why it is validating for PDF??"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "reply_to_user": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479908550, "post_id": 40765527, "comment_id": 68756340, "body": "You&#39;re right. I was resizing the wrong model! Thank you very much!"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479908717, "post_id": 40765527, "comment_id": 68756451, "body": "Great np mark it as solved"}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479908782, "post_id": 40766157, "comment_id": 68756498, "body": "I moved the sizing to the right model, but I am still getting the huge image on the index page"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479908811, "post_id": 40766157, "comment_id": 68756520, "body": "Please create new projects"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479908875, "post_id": 40766157, "comment_id": 68756558, "body": "Or do  Project.find_each { |u| u.file.reprocess! } For to create thumbnails of existing files"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479908971, "post_id": 40766157, "comment_id": 68756623, "body": "I did recreate a new project, and the thumb is still not there. The image on the page is definitely not 100x100"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479909086, "post_id": 40766157, "comment_id": 68756697, "body": "Can you see the processing of paperclip in the console or you can check the public folder for images or if still don&#39;t understand paste the modal code and also be sure that your form is accepting the image parameters"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479910219, "post_id": 40766157, "comment_id": 68757434, "body": "I just checked the public folder and the paperclip is definitely not resizing the image"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1479911180, "post_id": 40766157, "comment_id": 68758127, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128836/discussion-between-wish-zone-and-vlad-balanescu\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1479911777, "last_edit_date": 1479911777, "creation_date": 1479908649, "answer_id": 40766157, "question_id": 40765527, "link": "https://stackoverflow.com/questions/40765527/rails-admin-display-thumb-image/40766157#40766157", "title": "Rails admin display :thumb image", "body": "<p>There is </p>\n\n<pre><code>validates_attachment_content_type :file, :content_type =&gt; 'application/pdf'\n</code></pre>\n\n<p>and you are expecting images to be resized I think you check your modal and implementation again</p>\n\n<p>Follow this </p>\n\n<p><a href=\"https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation</a></p>\n"}], "owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 40766157, "answer_count": 1, "score": 2, "last_activity_date": 1479912356, "creation_date": 1479906838, "last_edit_date": 1479912356, "question_id": 40765527, "link": "https://stackoverflow.com/questions/40765527/rails-admin-display-thumb-image", "title": "Rails admin display :thumb image", "body": "<p>I have the following code:</p>\n\n<p><code>config/initializers/rails_admin.rb</code></p>\n\n<pre><code>list do\n      field :id        #currentId set in app/views/rails_admin/main/index\n      field :year\n      field :title\n      field :intro\n      field :description\n      field :confidential\n      field :star\n      field :image do\n        formatted_value do\n          bindings[:view].tag(:img, { :src =&gt; bindings[:object].image.url(:thumb)}) \n        end\n      end\n    end\n</code></pre>\n\n<p><code>app/models/submission.rb</code></p>\n\n<pre><code>class Submission &lt; ActiveRecord::Base\n\n  # Image attachment and validations\n  has_attached_file :file,\n    :url =&gt; \"/files/:class/:attachment/:id/:style/:basename.:extension\",\n    :path =&gt; \":rails_root/public/files/:class/:attachment/:id/:style/:basename.:extension\",\n    :styles =&gt; { :thumb =&gt; \"100x100#\", :small  =&gt; \"150x150&gt;\", :medium =&gt; \"200x200\" }\n\n  # Validate attachment type\n  validates_attachment_content_type :file, :content_type =&gt; 'application/pdf'\n\nend\n</code></pre>\n\n<p>Question: On the list view, why don't I get that <code>:thumb</code> image and I get a very very large image? I guess the chopping procedure is not working at all?</p>\n"}, {"tags": ["ruby", "methods", "chain"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1479906643, "post_id": 40765407, "comment_id": 68754991, "body": "\u201cso there must be a more elegant way to do this\u201d\u2014why is that? One might use <code>puts b a &#39;Tom&#39;</code>, but I doubt it\u2019s \u201cmore elegant.\u201d"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479907376, "post_id": 40765407, "comment_id": 68755522, "body": "@mudasobwa i understand. I just updated the question to make it a little more clear. Maybe it would help ? :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1479907857, "post_id": 40765407, "comment_id": 68755866, "body": "The question remains: why on the Earth you think that F#\u2019s way is <i>more elegant</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1479907246, "post_id": 40765499, "comment_id": 68755443, "body": "Yay, upvoted for <code>puts [:a,:b].inject(&quot;Tom&quot;){|result,method| Object.send(method,result)}</code> :) <code>puts</code> could be chained too, btw."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1479907652, "post_id": 40765499, "comment_id": 68755710, "body": "Wow, this is great! thanks Eric. Now, how can I get the same result if the methods are inside a class, in my example lets say class D, so how can I get the result by applying methods to an instance of class D? Or should I instead use class methods for that?"}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 2, "creation_date": 1479909014, "post_id": 40765499, "comment_id": 68756656, "body": "@BA you can define instance by <code>d = D.new(&quot;test&quot;)</code> and call <code>d.send</code> instead of <code>Object.send</code>"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1479910736, "post_id": 40765499, "comment_id": 68757810, "body": "@EricDuminil thanks, seems a little complicated though than your other method. :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480183432, "post_id": 40765499, "comment_id": 68861823, "body": "Why do you send the methods to <code>Object</code>? In the original code, they are sent to <code>self</code>, so you are calling completely different method. Although, please use <code>public_send</code> instead, there&#39;s no reason to break encapsulation here."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480197118, "post_id": 40765499, "comment_id": 68865772, "body": "I wanted the code to also work when <code>a</code> and <code>b</code> are defined in main, since the OP mentioned it. In that case, they  are private methods, available to every object."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 5, "last_activity_date": 1480197177, "last_edit_date": 1480197177, "creation_date": 1479906751, "answer_id": 40765499, "question_id": 40765407, "link": "https://stackoverflow.com/questions/40765407/how-to-chain-methods-in-ruby-passing-the-output-of-one-method-to-consecutive-met/40765499#40765499", "title": "How to chain methods in ruby passing the output of one method to consecutive methods", "body": "<p>You can leave the <code>()</code></p>\n\n<pre><code>def a s\n  \"hello #{s}\"\nend\n\ndef b s\n  \"hi #{s}\"\nend\n\nputs b a \"Tom\"\n</code></pre>\n\n<p>If you have many methods :</p>\n\n<pre><code>puts [:a,:b].inject(\"Tom\"){|result,method| self.send(method,result)}\n</code></pre>\n\n<p>If you want to use those methods with any object (including Classes) :</p>\n\n<pre><code>module Kernel\n  def chain_methods(start_value, *methods)\n    methods.inject(start_value){|result,method| self.send(method,result)}\n  end\nend\n\nclass D\n  def a s\n    \"hello #{s}\"\n  end\n\n  def b s\n    \"hi #{s}\"\n  end\nend\n\nclass E\n  class &lt;&lt; self\n    def a s\n      \"hello #{s}\"\n    end\n\n    def b s\n      \"hi #{s}\"\n    end\n  end\nend\n\n\n# Example with instance methods\nputs D.new.chain_methods(\"Tom\", :a, :b)\n\n# Example with class methods\nputs E.chain_methods(\"Tom\", :a, :b)\n\n# Thanks mudasobwa :\nE.chain_methods(\"Tom\", :a, :b, :puts)\n</code></pre>\n"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 40765499, "answer_count": 1, "score": 0, "last_activity_date": 1480197177, "creation_date": 1479906456, "last_edit_date": 1479911756, "question_id": 40765407, "link": "https://stackoverflow.com/questions/40765407/how-to-chain-methods-in-ruby-passing-the-output-of-one-method-to-consecutive-met", "title": "How to chain methods in ruby passing the output of one method to consecutive methods", "body": "<p>How can I pass the results of a method to another method in ruby?\neg:</p>\n\n<pre><code>class D\n  def initialize(text)\n    @text = text\n  end\n\n  def a s\n    \"hello #{s}\"    \n  end\n\n  def b s\n    \"hi #{s}\"\n  end\nend\n</code></pre>\n\n<p>So, what I want to do is pass the output of method a to method b. So essentially(if the methods aren't inside a class) I can do the following the following:</p>\n\n<pre><code>puts b(a \"Tom\") #=&gt;hi hello Tom\n</code></pre>\n\n<p>However, even if this isn't inside a class, it wouldn't look good if there are a lot of methods so there must be a more elegant way to do this. So what is the proper way to get the output <code>hi hello Tom</code> by applying the methods a and b to an instance of the class D?</p>\n\n<p>UPDATE\nI just wanted to make it a little bit more clear. Eg, in F# you can do something like this:</p>\n\n<pre><code>let a s = \"hello \" + s\nlet b s = \"hi \" + s\n\"Tom\" |&gt; a |&gt; b #=&gt; hello hi Tom\n</code></pre>\n\n<p>Here we defined functions a and b and then passed on the results to the next function.\nI know that its a functional language so ways of doing things would be different there. But I am just wondering if there are any such tricks in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid", "decorator"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907129, "post_id": 40765399, "comment_id": 68755366, "body": "What if you are creating a <code>User</code> object without calling it inside any decorator?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907252, "post_id": 40765399, "comment_id": 68755445, "body": "then all validations methods will be performed , however I would like to have more control on validation methods."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907254, "post_id": 40765399, "comment_id": 68755446, "body": "Validations should be present in model only. You can decide which validations to run based values of some <code>field</code>s or <code>attr_accessor</code>s whichever suits your case."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907399, "post_id": 40765399, "comment_id": 68755532, "body": "What is the criteria for deciding which decorator to use?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907416, "post_id": 40765399, "comment_id": 68755546, "body": "Could you give my any example?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479907459, "post_id": 40765399, "comment_id": 68755574, "body": "Controllers are criterias."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1479907513, "post_id": 40765399, "comment_id": 68755608, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128822/discussion-between-jagdeep-singh-and-mike927\">continue this discussion in chat</a>."}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "edited": false, "score": 0, "creation_date": 1479907698, "post_id": 40765399, "comment_id": 68755757, "body": "You should use a Service instead of a Decorator. Decorators are used to add dynamic behavior to objects. Services wraps object logic (such as save/update/delete)"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1479913585, "post_id": 40766282, "comment_id": 68759792, "body": "awesome, that&#39;s solution I was looking for. I&#39;ve not known reform before. Thanks!"}], "tags": [], "owner": {"reputation": 4166, "user_id": 376378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a439d0912d0e079d3a5f8cd44c070b6e?s=128&d=identicon&r=PG", "display_name": "cutalion", "link": "https://stackoverflow.com/users/376378/cutalion"}, "is_accepted": true, "score": 3, "last_activity_date": 1479908997, "creation_date": 1479908997, "answer_id": 40766282, "question_id": 40765399, "link": "https://stackoverflow.com/questions/40765399/rails-validation-inside-decorator/40766282#40766282", "title": "Rails - validation inside decorator", "body": "<p>Try to use a Form Object pattern instead.</p>\n\n<p>Here is an example (from a real project) of how it could be done with <a href=\"https://github.com/apotonick/reform\" rel=\"nofollow noreferrer\">reform</a>.</p>\n\n<pre><code>class PromocodesController &lt; ApplicationController\n  def new\n    @form = PromocodeForm.new(Promocode.new)\n  end\n\n  def create\n    @form = PromocodeForm.new(Promocode.new)\n\n    if @form.validate(promo_params)\n      Promocode.create!(promo_params)\n      redirect_to promocodes_path\n    else\n      render :edit\n    end\n  end\n\n  private\n\n  def promo_params\n    params.require(:promocode).\n      permit(:token, :promo_type, :expires_at, :usage_limit, :reusable)\n  end\nend\n\n\n\nclass PromocodeForm &lt; Reform::Form\n  model :promocode\n\n  property :token\n  property :promo_type\n  property :expires_at\n  property :usage_limit\n  property :reusable\n\n  validates_presence_of :token, :promo_type, :expires_at, :usage_limit, :reusable\n  validates_uniqueness_of :token\n\n  validates :usage_limit, numericality: { greater_or_equal_to: -1 }\n  validates :promo_type, inclusion: { in: Promocode::TYPES }\nend\n</code></pre>\n\n<p><strong>Bonus:</strong> The model does not trigger validations and much easy to use in tests.</p>\n"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 40766282, "answer_count": 1, "score": 1, "last_activity_date": 1479908997, "creation_date": 1479906426, "last_edit_date": 1479907043, "question_id": 40765399, "link": "https://stackoverflow.com/questions/40765399/rails-validation-inside-decorator", "title": "Rails - validation inside decorator", "body": "<p>I'm struggling with some kind of issue. I have a rails model (mongoid).</p>\n\n<pre><code>class User\n  include Mongoid::Document\n  include ActiveModel::SecurePassword\n\n  validate :password_presence,\n           :password_confirmation_match,\n           :email_presence,\n\n  field :email\n  field :password_digest\n\n def password_presence\n end\n\n def email_presence\n end\n\n def password_confirmation_match\n end\nend\n</code></pre>\n\n<p>My goal is to call validations depends on which decorator I will use. Let's say I've got two decorators:</p>\n\n<pre><code>class PasswordDecorator &lt; Draper::Decorator\n def initialize(user)\n   @user = user\n end\nend\n\ndef RegistraionDecorator &lt; Draper::Decorator\n  def initialize(user)\n   @user = user\n  end\nend\n</code></pre>\n\n<p>So now when I create/save/update my user object inside RegistraionDecorator I would like to perform all validation methods.</p>\n\n<pre><code>RegistraionDecorator.new(User.new(attrbiutes))\n</code></pre>\n\n<p>But when I will do it inside PasswordDecorator I want to call for example only password_presence method.</p>\n\n<pre><code>PasswordDecorator.new(User.first)\n</code></pre>\n\n<p>When I move validations to decorator it won't work cuz its different class than my model.</p>\n\n<p>How can I achieve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479906702, "post_id": 40765217, "comment_id": 68755046, "body": "Thanks for the answer. So you mean whenever I access with the <code>#[]</code>, some typecast is occurred based on the column type. And if I didn&#39;t specify with <code>attr_name</code>, it raises an error."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479906841, "post_id": 40765217, "comment_id": 68755154, "body": "@Toshi I&#39;ve edited the answer a bit. Basically two methods are interchangeable, it&#39;s just that convention advices the first one :)"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479907126, "post_id": 40765217, "comment_id": 68755363, "body": "okay, now I got that. I just wonder  there are any cases that <code>#[]</code> would be better than dot notation. Maybe readability or something?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479907418, "post_id": 40765217, "comment_id": 68755547, "body": "Difference would be, for example, that dot notation would raise an exception <code>undefined method</code> if you call non-existing method on an object, whereas <code>[:]</code> will just return <code>nil</code> (no exceptions). My personal preference is after dot notation especially because of readability :)"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479908456, "post_id": 40765217, "comment_id": 68756270, "body": "yep so the dot notation has basically two advantages 1. Ruby convention 2. readability. This is the last question, if I access data with method chain. You still use dot notation or <code>[:]</code> For example <code>user.account.uuid</code> or <code>user[:account][:uuid]</code>? pretty much personal preference?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1479908621, "post_id": 40765217, "comment_id": 68756386, "body": "@Toshi sure, convention remains for any amount of methods in the method&#39;s chain (so <code>user.account.uuid</code>) :)"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 1, "creation_date": 1479908723, "post_id": 40765217, "comment_id": 68756456, "body": "Thank you for the answer :)"}, {"owner": {"reputation": 760, "user_id": 6589218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8d6d47d4adba6110b54ac8d86cd674?s=128&d=identicon&r=PG", "display_name": "Michael Teter", "link": "https://stackoverflow.com/users/6589218/michael-teter"}, "edited": false, "score": 0, "creation_date": 1611270130, "post_id": 40765217, "comment_id": 116404675, "body": "In addition to what is mentioned above: Bracket notation is easier if you want to dynamically specify which attribute you are reading, such as <code>myobj[attr_to_fetch]</code>.  However, dot notation makes it a bit easier to use <a href=\"https://ruby-doc.org/core-2.6/doc/syntax/calling_methods_rdoc.html#label-Safe+navigation+operator\" rel=\"nofollow noreferrer\">Safe Navigation</a>, such as <code>myobj&amp;.some_attr</code>.  Doing the same in bracket notation is visually noisier: <code>myobj&amp;.[](:some_attr)</code>."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 6, "last_activity_date": 1479906711, "last_edit_date": 1479906711, "creation_date": 1479905914, "answer_id": 40765217, "question_id": 40765114, "link": "https://stackoverflow.com/questions/40765114/activerecord-accessor-dot-vs-bracket/40765217#40765217", "title": "ActiveRecord accessor dot(.) vs bracket([])", "body": "<p>Rails convention is to use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Read.html#method-i-read_attribute\" rel=\"noreferrer\">ActiveRecord::AttributeMethods::Read#<code>read_attribute</code></a> (dot notation), rather than its alias <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods.html#method-i-5B-5D\" rel=\"noreferrer\">ActiveRecord::AttributeMethods#<code>[]</code></a>, which:</p>\n\n<blockquote>\n  <p>Returns the value of the attribute identified by <code>attr_name</code> after it\n  has been typecast (for example, <code>\u201c2004-12-12\u201d</code> in a date column is cast\n  to a date object, like <code>Date.new(2004, 12, 12)</code>). It raises\n  <code>ActiveModel::MissingAttributeError</code> if the identified attribute is\n  missing.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5230, "user_id": 1588198, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/68sfL.jpg?s=128&g=1", "display_name": "mastaBlasta", "link": "https://stackoverflow.com/users/1588198/mastablasta"}, "is_accepted": false, "score": 1, "last_activity_date": 1505424768, "creation_date": 1505424768, "answer_id": 46228564, "question_id": 40765114, "link": "https://stackoverflow.com/questions/40765114/activerecord-accessor-dot-vs-bracket/46228564#46228564", "title": "ActiveRecord accessor dot(.) vs bracket([])", "body": "<p>I would strongly advise against using bracket notation as it breaks the inheritance hierarchy of method calls and makes refactoring harder. </p>\n\n<p>If my model has an attribute <code>name</code>, and I decide I want to enhance the name every time someone reads it, a very idiomatic way to do that would be:</p>\n\n<p><code>\ndef name\n  \"Awesome #{super}!\"\nend\n</code></p>\n\n<p>Any place in my app that uses the method version would work fine, any place that uses the <code>[]</code> notation would return raw database data. I could overwrite the <code>[]</code> but then I would need special conditions checking for specific attributes. The whole thing would be a nightmare.</p>\n\n<p>Another scenario, let's say I had an attribute that used to be stored in the database, but after a while decide that it should be computed on the fly, and end up dropping the database column. With the method version all I would need to do is add methods to my model. With the <code>[]</code> notation the process would be much much harder.</p>\n\n<p>Also <code>[]</code> provides an insignificant performance improvement so though it looks like it's \"closer\" to the raw data it really isn't.</p>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 1, "accepted_answer_id": 40765217, "answer_count": 2, "score": 9, "last_activity_date": 1505424768, "creation_date": 1479905643, "last_edit_date": 1497446115, "question_id": 40765114, "link": "https://stackoverflow.com/questions/40765114/activerecord-accessor-dot-vs-bracket", "title": "ActiveRecord accessor dot(.) vs bracket([])", "body": "<p>With Active Record, we can access a value like</p>\n\n<h2>method access</h2>\n\n<pre><code>user = User.find(1)\nuser.name #=&gt; 'John'\n</code></pre>\n\n<p>or </p>\n\n<h2>hash access</h2>\n\n<pre><code>user[:name] #=&gt; 'John'\n</code></pre>\n\n<p>I just wonder when to use which, or is there any best practice out there?\nPersonally I'd prefer <code>method access</code> because I feel that is more like ruby way. However when I see code by others, I face the <code>hash access</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "activerecord", "rails-activejob"], "answers": [{"tags": [], "owner": {"reputation": 2775, "user_id": 169717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6da78618d38cd3678a6527c92faa69b?s=128&d=identicon&r=PG", "display_name": "andrhamm", "link": "https://stackoverflow.com/users/169717/andrhamm"}, "is_accepted": false, "score": 2, "last_activity_date": 1479915769, "creation_date": 1479915769, "answer_id": 40768626, "question_id": 40764778, "link": "https://stackoverflow.com/questions/40764778/how-to-achieve-sequential-processing-in-rails/40768626#40768626", "title": "How to achieve sequential processing in Rails?", "body": "<p>The only way you're likely to achieve this while still using ActiveJob (or any async job framework) is to break the job into multiple separate jobs, where the first piece of work enqueues the next piece of work as another job. Or you will have to store the state of progress through the job in some other data store, so each job can check if previous jobs have completed.</p>\n\n<p>The mutex isn't working because the jobs could be run in different processes/threads or at completely different times depending on your resources.</p>\n"}], "owner": {"reputation": 334, "user_id": 244969, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3699eb38c7e75071fbedaad3af8c1c29?s=128&d=identicon&r=PG", "display_name": "pablo", "link": "https://stackoverflow.com/users/244969/pablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1479915769, "creation_date": 1479904625, "question_id": 40764778, "link": "https://stackoverflow.com/questions/40764778/how-to-achieve-sequential-processing-in-rails", "title": "How to achieve sequential processing in Rails?", "body": "<p>I have a task which has to be performed in sequential manner. It's mosty a database writing.</p>\n\n<p>The problem is that I have hard time to achieve it in Rails 5.</p>\n\n<p>I'm implementing it in an <code>ActiveJob</code> task. First I've tried mutex:</p>\n\n<pre><code>class EventLoadJob &lt; ApplicationJob\n  MUTEX = Mutex.new\n\n  rescue_from(StandardError) do |exception|\n    puts exception.to_s\n  end\n\n  def perform\n    MUTEX.synchronize\n      SomeModel.new.save!\n    end\n  end\nend\n</code></pre>\n\n<p>But this causes deadlock. Let assume: one thread is inside critical section and other wait at critical section entry. So the first thread block on database query. It wait on the query forever. I suppose there iss problem with <code>ActiveRecord</code> thread/connection - it's somehow blocked. But why?</p>\n\n<p>I've tried the same with locking on file:</p>\n\n<pre><code>class EventLoadJob &lt; ApplicationJob\n  rescue_from(StandardError) do |exception|\n    puts exception.to_s\n  end\n\n  def perform\n    File.open(Rails.root.join('tmp', 'event_mutex'), File::RDWR|File::CREAT, 0644) do |file|\n      file.flock(File::LOCK_EX)\n      SomeModel.new.save!\n      file.flock(File::LOCK_UN)\n    end\n  end\nend\n</code></pre>\n\n<p>And I got the same strange behavior. I've tried the same in Controller instead of <code>ActiveJob</code>. The same: deadlock at <code>ActiveRecord</code> query.</p>\n\n<p>Do you guys know a way to perform a task in sequential manner in Rails app? A proper way to create critical section?</p>\n\n<p>Maybe there is <code>ActiveJob</code> queue adapter which is single threaded, without context switching, etc? I don't want to add redis or other stuff to my simple app.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "time", "where"], "comments": [{"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479906978, "post_id": 40764346, "comment_id": 68755257, "body": "In your example you need all records which fall on sunday or monday between the dates from_date and to_date??"}, {"owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479907356, "post_id": 40764346, "comment_id": 68755507, "body": "ummm, not exactly, sunday or monday I just give it for example.., In simple I need a records for every week from tuesday 23:00pm to sunday 02:00 am..., from_date and to_date or not constant it&#39;s a dynamic value."}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479907536, "post_id": 40764346, "comment_id": 68755624, "body": "you do not care the year and the month?"}, {"owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479907711, "post_id": 40764346, "comment_id": 68755769, "body": "No, Year,  month and date and all not required...,"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479908501, "post_id": 40764346, "comment_id": 68756306, "body": "try with some like <code>TIME(start_date)  BETWEEN &#39;?&#39; AND &#39;?&#39;</code>"}, {"owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479909503, "post_id": 40764346, "comment_id": 68756961, "body": "Sorry I don&#39;t understand if possible give me some example..., and I guess If I try like that way consider start_date is Wed nov 22 05:00:00 UTC 2014, here you could see the day is Wednesday 5am do you think the above query will bring the record?"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1479933057, "post_id": 40764346, "comment_id": 68771161, "body": "I think you can try with some like <code>Model.where(&quot; start_date &lt; &#39;?&#39; AND start_date &gt; &#39;?&#39; AND TIME(start_date) BETWEEN &#39;?&#39; AND &#39;?&#39;&quot;, to_date , from_date , &quot;23:00:00&quot; ,&quot;02:00:00&quot;)</code> <a href=\"http://dev.mysql.com/doc/refman/5.7/en/time.html\" rel=\"nofollow noreferrer\">mysql TIME function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "edited": false, "score": 0, "creation_date": 1479904268, "post_id": 40764428, "comment_id": 68753427, "body": "but it will fetch nov 22nd to nov 27, I don&#39;t want for the specific date I need it based on day like from all Tuesday 23:00pm to sunday 2:00."}, {"owner": {"reputation": 118, "user_id": 2004099, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KJUSB.jpg?s=128&g=1", "display_name": "Zeyu", "link": "https://stackoverflow.com/users/2004099/zeyu"}, "reply_to_user": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "edited": false, "score": 0, "creation_date": 1479905736, "post_id": 40764428, "comment_id": 68754384, "body": "Hmm didn&#39;t read the question clearly. Which DB are you using, it may be DB dependent because rails query interface does not have this function."}, {"owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "edited": false, "score": 0, "creation_date": 1479906003, "post_id": 40764428, "comment_id": 68754574, "body": "am using mysql database"}, {"owner": {"reputation": 118, "user_id": 2004099, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KJUSB.jpg?s=128&g=1", "display_name": "Zeyu", "link": "https://stackoverflow.com/users/2004099/zeyu"}, "reply_to_user": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "edited": false, "score": 0, "creation_date": 1480035083, "post_id": 40764428, "comment_id": 68814462, "body": "@sakthivel this query is based on day of week instead of specific date."}], "tags": [], "owner": {"reputation": 118, "user_id": 2004099, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KJUSB.jpg?s=128&g=1", "display_name": "Zeyu", "link": "https://stackoverflow.com/users/2004099/zeyu"}, "is_accepted": false, "score": 1, "last_activity_date": 1479950505, "last_edit_date": 1479950505, "creation_date": 1479903625, "answer_id": 40764428, "question_id": 40764346, "link": "https://stackoverflow.com/questions/40764346/how-to-get-data-which-falls-on-specific-days/40764428#40764428", "title": "How to get data which falls on specific days", "body": "<h2>Updated Answer</h2>\n\n<p>MySQL has <a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek\" rel=\"nofollow noreferrer\"><code>dayofweek</code> function</a> for this.</p>\n\n<p>You can write your query as:</p>\n\n<pre><code>MyModel.where('dayofweek(start_date) = ?', 1) # 1 is Sunday\n</code></pre>\n\n<p>To get all models which start_date is on Sunday.</p>\n\n<p>To achieve your goal, you can query <strong>start_date on Tuesday AND start_date hour is later than 23:00</strong>, <strong>start_date on Wed</strong>, <strong>start_date on Thurs</strong> and etc.</p>\n\n<p>So the final query would be like:</p>\n\n<pre><code>MyModel.where('(dayofweek(start_date) = ? AND hour(start_date) &gt; ?) \nOR dayofweek(start_date) = ? OR dayofweek(start_date) = ? OR\ndayofweek(start_date) = ? OR dayofweek(start_date) = ? OR\n(dayofweek(start_date) = ? AND hour(start_date) &gt; ?)'\n, 3, 23, 4, 5, 6, 7, 1, 2)\n</code></pre>\n\n<h2>Previous Answer</h2>\n\n<p>You can use a range query with <code>where</code>:</p>\n\n<pre><code>Model.where(start_date: from_date..to_date)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479950505, "creation_date": 1479903422, "last_edit_date": 1479903628, "question_id": 40764346, "link": "https://stackoverflow.com/questions/40764346/how-to-get-data-which-falls-on-specific-days", "title": "How to get data which falls on specific days", "body": "<p>Hi I've start_date column which capture time stamp, I'd like to query the data based on days like if date falls on  sunday or monday like that.</p>\n\n<p>For example </p>\n\n<pre><code>from_date = Tue Nov 22 23:00:00 UTC 2016\nto_date = Sun Nov 27 02:00:00 UTC 2016\n</code></pre>\n\n<p>Here I need get all the records  from tuesday 23:00 pm to sunday 02:00 am.</p>\n"}, {"tags": ["ruby", "parsing"], "comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1480163314, "post_id": 40763625, "comment_id": 68856013, "body": "I don&#39;t know why you must do this specifically in Ruby. If this is exactly what you need to do, any language with string hacking facilities (including Ruby) will probably be ok. Normally carrying out modifications to code requires something far strong than ad hoc code and regex matching. If it gets more complex (e.g., your code allows multiline literals or comments which contain &quot;}&quot; or nested conditionals), you might consider a program transformation system, which is a tool designed to parse and transform source code reliably. See en.wikipedia.org/wiki/Program_transformation"}, {"owner": {"reputation": 11, "user_id": 7172827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e2bbd030108b7c6f1c93d0b48cd95d?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Gonz&#225;lez N&#250;&#241;ez", "link": "https://stackoverflow.com/users/7172827/pedro-gonz%c3%a1lez-n%c3%ba%c3%b1ez"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1480423686, "post_id": 40763625, "comment_id": 68947881, "body": "@IraBaxter Well, I&#39;ve just started learning programming to easen my time modding games which mostly involve systematically editing .txt files of the characteristic cited above. Ruby seemed like an interesting language, so i picked that one, but  recommendations on other languages are welcome. Aside from that, yes, the syntax above allows comments containing &quot;{&quot; and &quot;}&quot;, but not multiline literals. I will look at the link you provided, but I&#39;d still be interested in a Ruby solution."}], "owner": {"reputation": 11, "user_id": 7172827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e2bbd030108b7c6f1c93d0b48cd95d?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Gonz&#225;lez N&#250;&#241;ez", "link": "https://stackoverflow.com/users/7172827/pedro-gonz%c3%a1lez-n%c3%ba%c3%b1ez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480156124, "creation_date": 1479901448, "question_id": 40763625, "link": "https://stackoverflow.com/questions/40763625/i-need-ruby-to-parse-and-edit-parts-of-files-with-a-custom-syntax", "title": "I need Ruby to parse and edit parts of files with a custom syntax", "body": "<p>I have a set of .txt files that show a custom languange, files I want to systematically modify using a Ruby script. The syntax of that language is as follows:</p>\n\n<p>(I will use [some text] as meta variables for expressions, like [atom 1] to indicate an arbitrary atom, and [atom 2] to indicate an arbitrary atom diferent from the former) </p>\n\n<p>Atoms: alphanumerical strings, possibly surrounded by double quotes. Examples:</p>\n\n<pre><code>same_realm \n\"Ok\"\n</code></pre>\n\n<p>Statements: either</p>\n\n<pre><code>[atom_1] = [atom_2] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>[atom_1] = { [atom or statement 1] ... [atom or statement n] }\n</code></pre>\n\n<p>comments: in any line of the text, any character after a # is ignored. Example:</p>\n\n<pre><code>[atom_1] = [atom_2]  #This is a comment and will be ignored\n</code></pre>\n\n<p>If an statement is of the form [atom 1] = {[atom or statement 1] ... [atom or statement n]}, we call [atom 1] the head of the satement and [atom or statement 1] ... [atom or statement n] the body of the statement.</p>\n\n<p>Before and after =, { and } there can be an arbitrary number (possibly 0) of space characters.\nBetween two consecutive atoms must be at least one space character, but can be any number higher than that.</p>\n\n<p>So, the two expressions any_realm_lord = {...} and any_realm_lord = {...} in the example below are valid, the only syntactical difference between them being the use of any_realm_lord/any_province_lord as the head of each statement.</p>\n\n<pre><code>#Example file\n\n#previous text\nany_realm_lord={any_character={limit={same_realm=ROOT}set_character_flag=my_flag} \n} any_province_lord={any_character  = {      #some comment\n        limit = {#some other comment\nsame_realm = ROOT} set_character_flag = \n        my_flag\n    }\n}#more text\n</code></pre>\n\n<p>Once that's explained, this is what I want to do with ruby (I will use the Example file above to illustrate it)</p>\n\n<p>1) Open a file and locate the statements which are not within the body of other statements</p>\n\n<p>(in the example, I'd want it to locate the any_realm_character = {...} and the any_province_character = {...} statements)</p>\n\n<p>2) Iterate over the statements located in 1) and select the ones whose head matches a certain string. If the match is in a line where there is also other atoms or statements, separate them. From now on, I will refer to the statement whose head matches the string as \"the target statement\".</p>\n\n<p>(Say the string to match is \"any_province_lord\". After this step the file will look like this:</p>\n\n<pre><code>#Example file\n\n#previous text\nany_realm_lord={any_character={limit={same_realm=ROOT}set_character_flag=my_flag} \n}\nany_province_lord={any_character  = {      #some comment\n        limit = {#some other comment\nsame_realm = ROOT} set_character_flag = \n        my_flag\n    }\n}#more text\n</code></pre>\n\n<p>)</p>\n\n<p>3) create a blank line above the line where the head of the target statement is, and cut and paste there any comment in the lines that the target statement encompass</p>\n\n<p>(</p>\n\n<pre><code>#Example file\n\n#previous text\nany_realm_lord={any_character={limit={same_realm=ROOT}set_character_flag=my_flag} \n}\n #some comment#some other comment\nany_province_lord={any_character  = {     \n        limit = {\nsame_realm = ROOT} set_character_flag = \n        my_flag\n    }\n}#more text\n</code></pre>\n\n<p>)</p>\n\n<p>4)If the closing bracket of the target statement is in the same line as another atom(s) or statement(s), add a \\n after the closing bracket</p>\n\n<p>(</p>\n\n<pre><code>#Example file\n\n#previous text\nany_realm_lord={any_character={limit={same_realm=ROOT}set_character_flag=my_flag} \n}\n #some comment#some other comment\nany_province_lord={any_character  = {     \n        limit = {\nsame_realm = ROOT} set_character_flag = \n        my_flag\n    }\n}\n#more text\n</code></pre>\n\n<p>)</p>\n\n<p>5)Erase the body of the target statement (but not the brackets), and add new content between the brackets that I have already defined, with nice spacing.\n(</p>\n\n<pre><code>#Example file\n\n#previous text\nany_realm_lord={any_character={limit={same_realm=ROOT}set_character_flag=my_flag} \n}\n #some comment#some other comment\nany_province_lord={     \n        #my predefined content will be here\n}\n#more text\n</code></pre>\n\n<p>)</p>\n\n<p>What would then be the best way to do this in terms of efficiency? I need my program to do this to over a thousand of files (each one of an average size of 500Kb). I'm fairly new to Ruby, so I am still figuring out if for these things is best to use read, readlines, or readline in term of efficiency.\nWhat do you think?</p>\n\n<p>I hope I've been clear in the explanation of what I need and not too unnecesarily verbose</p>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "edited": false, "score": 1, "creation_date": 1479899590, "post_id": 40762783, "comment_id": 68750210, "body": "Why don&#39;t you render it as json from the method?"}, {"owner": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "edited": false, "score": 0, "creation_date": 1479899638, "post_id": 40762783, "comment_id": 68750245, "body": "What is the actual path to where the file is stored? i.e which directory is it in?"}, {"owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "reply_to_user": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "edited": false, "score": 0, "creation_date": 1479901973, "post_id": 40762783, "comment_id": 68751927, "body": "@user2085143 the events.json file is generated and stored inside same application directory, where app, bin, etc directories are present <a href=\"https://drive.google.com/open?id=0B2BZFbohNopKT1FIOTlpNi1hVEE\" rel=\"nofollow noreferrer\">screenshot</a>"}, {"owner": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "edited": false, "score": 0, "creation_date": 1479902624, "post_id": 40762783, "comment_id": 68752339, "body": "I think your path might be a bit off hence why you&#39;re getting a 404. Have you tried &#39;/events.json&#39; in the get request?"}], "answers": [{"tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": false, "score": 0, "last_activity_date": 1479959099, "last_edit_date": 1479959099, "creation_date": 1479899738, "answer_id": 40762980, "question_id": 40762783, "link": "https://stackoverflow.com/questions/40762783/how-to-read-a-file-created-in-rails-using-javascript-within-new-html-erb/40762980#40762980", "title": "how to read a file created in rails using javascript within new.html.erb", "body": "<p>First: Are you sure that the file is written? Because you use <code>File.new(\"events.json\", \"r+\")</code> which I think means <code>read</code> you need <code>w+</code> for <code>write</code></p>\n\n<p>Second: Is the <code>location = \"users/14/events/events.json\"</code></p>\n\n<p>Use in both cases <code>Rails.public_path + path + /file</code></p>\n"}, {"comments": [{"owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "edited": false, "score": 0, "creation_date": 1479982705, "post_id": 40768686, "comment_id": 68789932, "body": "thank you. i came to know that browser searches for events.json file in public directory. now it works fine. :)"}, {"owner": {"reputation": 36, "user_id": 3376435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a57a6dae5821075406d0bf9a34af17e?s=128&d=identicon&r=PG", "display_name": "vl3", "link": "https://stackoverflow.com/users/3376435/vl3"}, "reply_to_user": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "edited": false, "score": 0, "creation_date": 1480001985, "post_id": 40768686, "comment_id": 68802659, "body": "Better way to obtain public directory is like in @jrbedard answer with <code>Rails.public_path</code>. Answer edited."}], "tags": [], "owner": {"reputation": 36, "user_id": 3376435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a57a6dae5821075406d0bf9a34af17e?s=128&d=identicon&r=PG", "display_name": "vl3", "link": "https://stackoverflow.com/users/3376435/vl3"}, "is_accepted": true, "score": 0, "last_activity_date": 1480002047, "last_edit_date": 1480002047, "creation_date": 1479915945, "answer_id": 40768686, "question_id": 40762783, "link": "https://stackoverflow.com/questions/40762783/how-to-read-a-file-created-in-rails-using-javascript-within-new-html-erb/40768686#40768686", "title": "how to read a file created in rails using javascript within new.html.erb", "body": "<p>You have to write the file to public/ directory. You can achieve this by doing:</p>\n\n<pre><code>File.new(Rails.public_path + 'events.json', 'w+')\n</code></pre>\n\n<p>Then, you can access the file in your view doing:</p>\n\n<pre><code>$.getJSON(\"/events.json\")\n</code></pre>\n\n<p>But i think that the best way to achieve this is by having an EventsController with and index action that responds in json.</p>\n\n<pre><code>class EventsController &lt; ApplicationController\n  def index\n    @events = Event.all\n    respond_to do |format|\n      format.json { render json: @events}\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 40768686, "answer_count": 2, "score": 0, "last_activity_date": 1480002047, "creation_date": 1479899264, "question_id": 40762783, "link": "https://stackoverflow.com/questions/40762783/how-to-read-a-file-created-in-rails-using-javascript-within-new-html-erb", "title": "how to read a file created in rails using javascript within new.html.erb", "body": "<p>I have this method in rails where i am creating external events.json file. </p>\n\n<pre><code> def new\n        @event=Event.new\n        @users=User.all\n        @events=@user.events\n        tempJson = @events.to_json.html_safe\n        aFile = File.new(\"events.json\", \"r+\")\n        aFile.syswrite(tempJson)\n    end\n</code></pre>\n\n<p>now events.json file is created in my app directory.\nIn my new.html.erb, how to access this file via javascript and set it to a variable?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n          $.getJSON(\"events.json\", function(json) {\n        debugger;\n         console.log(json);\n       });      \n    &lt;/script&gt;\n</code></pre>\n\n<p>I tried this.. and i get this error message when i inspect, </p>\n\n<pre><code>Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:3000/users/14/events/events.json\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 1023, "user_id": 5502552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644c1651396747050a2eb662305f03c8?s=128&d=identicon&r=PG&f=1", "display_name": "DroidNoob", "link": "https://stackoverflow.com/users/5502552/droidnoob"}, "edited": false, "score": 0, "creation_date": 1479899405, "post_id": 40762771, "comment_id": 68750055, "body": "did that. But it&#39;s not compatible with rails 5. That&#39;s why  <code>gem &#39;activeadmin&#39;, github: &#39;activeadmin&#39;</code>"}], "tags": [], "owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "is_accepted": true, "score": 5, "last_activity_date": 1479899900, "last_edit_date": 1479899900, "creation_date": 1479899239, "answer_id": 40762771, "question_id": 40762601, "link": "https://stackoverflow.com/questions/40762601/rails-bundler-could-not-find-compatible-versions-for-gem-actionpack-on-insta/40762771#40762771", "title": "RAILS : Bundler could not find compatible versions for gem &quot;actionpack&quot; on installing ActiveAdmin", "body": "<p>This solution worked for me. For <code>rails 5</code> you would have to add another <code>gem</code> as follows:</p>\n\n<pre><code>gem 'activeadmin', github: 'activeadmin'\ngem 'inherited_resources', github: 'activeadmin/inherited_resources'\n</code></pre>\n\n<p>To read further, go to <a href=\"https://github.com/activeadmin/activeadmin/issues/4177\" rel=\"nofollow noreferrer\">this</a> thread.</p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "is_accepted": false, "score": 1, "last_activity_date": 1479900028, "creation_date": 1479900028, "answer_id": 40763097, "question_id": 40762601, "link": "https://stackoverflow.com/questions/40762601/rails-bundler-could-not-find-compatible-versions-for-gem-actionpack-on-insta/40763097#40763097", "title": "RAILS : Bundler could not find compatible versions for gem &quot;actionpack&quot; on installing ActiveAdmin", "body": "<p>You have to install inherited resources gem with active admin in rails 5</p>\n\n<pre><code>gem 'activeadmin', github: 'activeadmin'\ngem 'inherited_resources', github: 'activeadmin/inherited_resources'\n</code></pre>\n"}], "owner": {"reputation": 1023, "user_id": 5502552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644c1651396747050a2eb662305f03c8?s=128&d=identicon&r=PG&f=1", "display_name": "DroidNoob", "link": "https://stackoverflow.com/users/5502552/droidnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 1, "accepted_answer_id": 40762771, "answer_count": 2, "score": 5, "last_activity_date": 1479900028, "creation_date": 1479898814, "last_edit_date": 1479899536, "question_id": 40762601, "link": "https://stackoverflow.com/questions/40762601/rails-bundler-could-not-find-compatible-versions-for-gem-actionpack-on-insta", "title": "RAILS : Bundler could not find compatible versions for gem &quot;actionpack&quot; on installing ActiveAdmin", "body": "<p>I added <code>gem 'activeadmin', github: 'activeadmin'</code> in my gemfile and did a bundle install. Then it's throwing me the following error.</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"actionpack\":\n   In snapshot (Gemfile.lock):\n     actionpack (= 5.0.0.1)\n\nIn Gemfile:\nactiveadmin (~&gt; 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on\n  formtastic (~&gt; 3.1) was resolved to 3.1.4, which depends on\n    actionpack (&gt;= 3.2.13)\n\nactiveadmin (~&gt; 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on\n  inherited_resources (~&gt; 1.6) was resolved to 1.6.0, which depends on\n    actionpack (&lt; 5, &gt;= 3.2)\n\nactiveadmin (~&gt; 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on\n  inherited_resources (~&gt; 1.6) was resolved to 1.6.0, which depends on\n    actionpack (&lt; 5, &gt;= 3.2)\n\nactiveadmin (~&gt; 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on\n  kaminari (~&gt; 0.15) was resolved to 0.17.0, which depends on\n    actionpack (&gt;= 3.0.0)\n\nactiveadmin (~&gt; 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on\n  ransack (~&gt; 1.3) was resolved to 1.8.2, which depends on\n    actionpack (&gt;= 3.0)\n</code></pre>\n\n<blockquote>\n  <p>Running <code>bundle update</code> will rebuild your snapshot from scratch, using only\n  the gems in your Gemfile, which may resolve the conflict.</p>\n</blockquote>\n\n<p>I did the bundle update, but still the error is the same. Any help would be appreciated.</p>\n\n<p><strong>EDIT</strong></p>\n\n<blockquote>\n  <p><code>gem 'activeadmin'</code> is not compatible with rails 5 </p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479901424, "post_id": 40762578, "comment_id": 68751570, "body": "This error is unrelated to model. So, adding/removing validations won&#39;t affect it."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479900854, "post_id": 40762807, "comment_id": 68751139, "body": "I&#39;ve tried the route change and that hasn&#39;t changed anything. I&#39;m not sure what you mean for the restful routes method - sorry for sounding daft but where does the number 7 come from?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479900917, "post_id": 40762807, "comment_id": 68751199, "body": "If this is a params issue - do I need to change any of the arguments in the create method?"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1479899331, "creation_date": 1479899331, "answer_id": 40762807, "question_id": 40762578, "link": "https://stackoverflow.com/questions/40762578/rails-error-actioncontrollerurlgenerationerror-in-bookingscontroller-create/40762807#40762807", "title": "Rails error - ActionController::UrlGenerationError in BookingsController (Create action)", "body": "<p>You need to use proper route</p>\n\n<p>Rails is expecting <code>:id</code> instead of <code>:event_id</code></p>\n\n<p>so, if you are using restful routes </p>\n\n<p>use the url as <code>booking_path(7)</code> instead of <code>booking_path(event_id: 7)</code></p>\n\n<p>or change your route to</p>\n\n<pre><code>get 'bookings/:event_id', to: 'bookings#show'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479902028, "post_id": 40763591, "comment_id": 68751957, "body": "No, that hasn&#39;t changed anything. I think event.id should be @event.event_id - when I use that I get &#39;undefined method&#39; error for event_id."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479902108, "post_id": 40763591, "comment_id": 68752011, "body": "The reason I&#39;ve included the model is - I changed the model and the code broke. I hadn&#39;t changed the controller and previously this was working, so not sure why that is."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479903553, "post_id": 40763591, "comment_id": 68752977, "body": "Are you still getting the same error as mentioned in the question? If yes, please post the output of <code>rake routes | grep bookings</code>"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479904004, "post_id": 40763591, "comment_id": 68753268, "body": "It&#39;s too long to post in entirety, this is for the show route - event_booking GET      /events/:event_id/bookings/:id(.:format)      bookings#show"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1479906062, "post_id": 40763591, "comment_id": 68754616, "body": "Thanks for this - I was also missing save! for the paid code too - just checked. I&#39;ve also adjusted the validations. All works now."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1479904660, "last_edit_date": 1479904660, "creation_date": 1479901345, "answer_id": 40763591, "question_id": 40762578, "link": "https://stackoverflow.com/questions/40762578/rails-error-actioncontrollerurlgenerationerror-in-bookingscontroller-create/40763591#40763591", "title": "Rails error - ActionController::UrlGenerationError in BookingsController (Create action)", "body": "<p>Try replacing </p>\n\n<pre><code>redirect_to event_booking_path(@event, @booking)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>redirect_to event_booking_path(id: @booking.id, event_id: @event.id)\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I believe the error is because <code>@booking.id</code> is evaluating to <code>nil</code>. It would happen is <code>@booking</code> is not saved to db (still a new record). In you model method <code>booking</code>, inside <code>if</code> block, you are just setting an attribute, but not saving the object. So, calling <code>save!</code> inside <code>if</code> block after setting the attribute should fix this.</p>\n\n<pre><code>def booking\n  if self.event.is_free?\n    self.total_amount = 0\n    save!\n  else\n    ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 40763591, "answer_count": 2, "score": 0, "last_activity_date": 1479904660, "creation_date": 1479898765, "question_id": 40762578, "link": "https://stackoverflow.com/questions/40762578/rails-error-actioncontrollerurlgenerationerror-in-bookingscontroller-create", "title": "Rails error - ActionController::UrlGenerationError in BookingsController (Create action)", "body": "<p>I'm building an events app using rails and I've run into the error above at the end of the booking confirmation process. This is the full error - \n<a href=\"https://i.stack.imgur.com/nxhhX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nxhhX.png\" alt=\"Full error\"></a></p>\n\n<p>And this is my controller code - </p>\n\n<p><strong>Bookings Controller</strong></p>\n\n<pre><code>class BookingsController &lt; ApplicationController\n\n    before_action :authenticate_user!\n\n\n\n    def new\n\n        @event = Event.find(params[:event_id])\n        # and because the event \"has_many :bookings\"\n        @booking = Booking.new(params[:booking])\n        @booking.user = current_user\n\n\n\n    end\n\n    def create\n\n        @event = Event.find(params[:event_id])\n        @booking = @event.bookings.new(booking_params)\n        @booking.user = current_user\n\n\n            if \n                @booking.booking\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_booking_path(@event, @booking)\n            else\n                flash[:error] = \"Booking unsuccessful\"\n                render \"new\"\n            end\n\n            if @event.is_free?\n                @booking.save(booking_params)\n            end\n    end\n\n    def show\n        @event = Event.find(params[:event_id])\n        @booking = Booking.find(params[:id])\n    end\n\n\n    def update\n\n        if @booking.update(booking_params)\n            redirect_to event_booking_path(@event, @booking) , notice: \"Booking was successfully updated!\"\n        else\n            render 'new'\n        end\n    end\n\n\n\n\n    private\n\n    def booking_params\n        params.require(:booking).permit(:stripe_token, :booking_number, :quantity, :event_id, :stripe_charge_id, :total_amount)\n    end\n\n\n\n\n\n\nend\n</code></pre>\n\n<p>I'm trying to implement code to handle both free and paid events/bookings. The event side is fine but handling free bookings has proved troublesome. This is the Booking model code - </p>\n\n<p><strong>Booking.rb</strong></p>\n\n<pre><code>class Booking &lt; ActiveRecord::Base\n\n    belongs_to :event\n    belongs_to :user\n\n\n  before_create :set_booking_number \n\n     validates :quantity, presence: true, numericality: { greater_than_or_equal_to: 0 }\n     validates :total_amount, presence: true, numericality: { greater_than_or_equal_to: 0 }\n     validates :quantity, :total_amount, :booking_number, presence: true\n\n  def set_booking_number\n    self.booking_number = \"MAMA\" + '- ' + SecureRandom.hex(4).upcase\n  end\n\n\n\n    def booking\n        # Don't process this booking if it isn't valid\n        #self.valid?\n\n\n        if self.event.is_free?\n\n            self.total_amount = 0\n        else\n\n\n\n            begin\n                        self.total_amount = event.price_pennies * self.quantity\n                        charge = Stripe::Charge.create(\n                            amount: total_amount,\n                            currency: \"gbp\",\n                            source: stripe_token, \n                            description: \"Booking created for amount #{total_amount}\")\n                        self.stripe_charge_id = charge.id\n              self.booking_number = \"MAMA\" + '- ' + SecureRandom.hex(4).upcase\n                        save!\n                    rescue Stripe::CardError =&gt; e\n                    errors.add(:base, e.message)\n                    false\n                  end\n            end \n        #end\n  end\nend\n</code></pre>\n\n<p>This issue arose following the inclusion of the validations - the problem has been trying to implement validations that apply to paid events but not free. </p>\n\n<p>Any assistance with the above error would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479901713, "post_id": 40762539, "comment_id": 68751765, "body": "Can you give a description of what that code is a actually supposed to accomplish?"}, {"owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479902030, "post_id": 40762539, "comment_id": 68751959, "body": "@max Sure, I&#39;ve added the description."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479902103, "post_id": 40762539, "comment_id": 68752003, "body": "Why not just declare the routes with resources and with a domain constraint?"}, {"owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479902308, "post_id": 40762539, "comment_id": 68752136, "body": "I already have constrains. Please see updates. But that&#39;s a legacy code. I don&#39;t have opportunity to refactor all routes now. I have just to fix the error."}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479902400, "creation_date": 1479898651, "last_edit_date": 1479902400, "question_id": 40762539, "link": "https://stackoverflow.com/questions/40762539/undefined-method-helper-methods-for-controller-class", "title": "Undefined method &#39;_helper_methods&#39; for Controller class", "body": "<p>Here's the <a href=\"https://sentry.io/share/issue/3131333534392e313834373331303430\" rel=\"nofollow noreferrer\">Sentry</a> link. </p>\n\n<p>The problem is that sometimes (several times a day) I get this error message while trying to add a helper to the controller:</p>\n\n<pre><code>helper_name = \"#{helper}_path\".to_sym\nself.class.send(:define_method, helper_name) { |*args| send \"#{helper}_#{MySettings.route_code}_path\", *args }\nself.class.helper_method helper_name\n</code></pre>\n\n<p>This code iterates over an array of URL helper names (like <code>%w(stocks bonds currencies)</code>). Then it creates a symbol <code>helper_name</code> and defines a method in the Controller (the whole code is in <code>before_action</code>). The generated method is accessing URL helper for specific domain. The third line just makes the generated method available in the views by calling <code>helper_method</code> on the controller.</p>\n\n<p>I also have constraints in my routes like this:</p>\n\n<pre><code>constraints host: lambda { |h| h == Settings.de_domain || h == \"www.#{Settings.de_domain}\" \\\n                              || h == Settings.at_domain || h == \"www.#{Settings.at_domain}\" \\\n                              || h == Settings.ch_domain || h == \"www.#{Settings.ch_domain}\" } do\n</code></pre>\n\n<p>The website is frequently visited. Also it's connected to several domains (<code>nl</code>, <code>de</code>, <code>be</code> etc). The error can happen on any domain.\nAny idea of why this can happen and how it can be fixed?</p>\n"}, {"tags": ["css", "ruby", "sass", "sinatra", "reload"], "comments": [{"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 1, "creation_date": 1480065505, "post_id": 40761831, "comment_id": 68823933, "body": "If your css files get build, it&#39;s probably browser caching a few ideas what you could do <a href=\"http://stackoverflow.com/questions/118884/how-to-force-browser-to-reload-cached-css-js-files\" title=\"how to force browser to reload cached css js files\">stackoverflow.com/questions/118884/&hellip;</a>"}, {"owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "reply_to_user": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1480068601, "post_id": 40761831, "comment_id": 68825789, "body": "The CSS files only build properly when I use <code>sass --watch pu blic&#47;styles&#47;scss:public&#47;styles&#47;css&#47;</code> \u2014 it&#39;s possible that I didn&#39;t implement any of the other methods correctly."}, {"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 1, "creation_date": 1480324058, "post_id": 40761831, "comment_id": 68898199, "body": "Something like this <a href=\"https://coderwall.com/p/yjeajq/autoloading-sass-in-sinatra\" rel=\"nofollow noreferrer\">coderwall.com/p/yjeajq/autoloading-sass-in-sinatra</a> doesn&#39;t work?"}, {"owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "reply_to_user": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1480448305, "post_id": 40761831, "comment_id": 68963828, "body": "I&#39;d rather not use livereload \u2014 so can&#39;t say whether it does. I&#39;ve decided to re-start the <code>sass --watch</code> process manually instead, it&#39;s a minor overhead when you&#39;re used to designing in the browser with CSS."}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "edited": false, "score": 0, "creation_date": 1480632509, "post_id": 40761831, "comment_id": 69055816, "body": "I have been using rerun gem for a while and works like a charm and it reloads both ruby css and js files.  You can find an example here how to use it when You start your server  <a href=\"https://github.com/bogdanRada/ruby-gem-downloads-badge/blob/master/Procfile.dev\" rel=\"nofollow noreferrer\">github.com/bogdanRada/ruby-gem-downloads-badge/blob/master/&hellip;</a> . I am using this with Foreman gem to run my application. You might also want to consider adding rb-fsevent as a dependency for developement. Hope this helps :)"}], "answers": [{"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1481142152, "post_id": 40874449, "comment_id": 69260607, "body": "best close the question or put it at least answered"}], "tags": [], "owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "is_accepted": true, "score": 0, "last_activity_date": 1480448466, "creation_date": 1480448466, "answer_id": 40874449, "question_id": 40761831, "link": "https://stackoverflow.com/questions/40761831/making-sinatra-2-2-2-reload-the-compiled-sass/40874449#40874449", "title": "Making Sinatra 2.2.2 reload the compiled SASS", "body": "<p>Issue solved \u2014\u00a0tried Sprockets but that didn't work because I'm using Ruby 1.9.3. Running <code>sass --watch</code> manually instead.</p>\n"}], "owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 40874449, "answer_count": 1, "score": 1, "last_activity_date": 1480448466, "creation_date": 1479896895, "question_id": 40761831, "link": "https://stackoverflow.com/questions/40761831/making-sinatra-2-2-2-reload-the-compiled-sass", "title": "Making Sinatra 2.2.2 reload the compiled SASS", "body": "<p>What's the state of the art when it comes to making Sinatra reload compiled SASS files in development? I've found that when I'm editing pure CSS the app updates on browser refresh. However when using <code>.scss</code> files (which I watch with <code>sass --watch public/styles/scss:public/styles/css/</code>) this doesn't work \u2014\u00a0I have to restart the above watch to see the latest changes (with the server running).</p>\n\n<p>I've tried <code>Sass::Plugin::Rack</code>, <code>Sinatra Reloader</code>, and <code>Rack::LiveReload</code>, with no success.</p>\n"}, {"tags": ["ruby", "performance", "ruby-block"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1479897722, "post_id": 40761743, "comment_id": 68748772, "body": "What you are doing is called <b>\u201cpremature optimization.\u201d</b> The productivity bottleneck <i>is never related to ruby internals</i>. So pick up any variant of your choice and go with it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1479897923, "post_id": 40761743, "comment_id": 68748909, "body": "Also, <code>yield</code> might be perfectly used when named block is given instead of explicit <code>block.call</code>."}, {"owner": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1479898609, "post_id": 40761743, "comment_id": 68749467, "body": "@mudasobwa It&#39;s still good to know the tradeoffs between implementations. Me &amp; singletony work together on our company&#39;s infrastructure. We don&#39;t specifically care about the performance of each implementation but on the tradeoffs of each implementation."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 0, "creation_date": 1479898857, "post_id": 40761743, "comment_id": 68749645, "body": "@the_drow in Layman\u2019s terms the answer is \u201cthere are no tradeoffs; pick up any approach and make sure it\u2019s usage is consistent across the company.\u201d <code>if !block_given?</code> negation under two-branched <code>if</code>, appeared in the OP, is waaaay worse, than <code>cb.nil?</code> vs <code>block_given?</code>."}, {"owner": {"reputation": 1302, "user_id": 641936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1eba903b5f2b166692226fc71f08b5?s=128&d=identicon&r=PG", "display_name": "singletony", "link": "https://stackoverflow.com/users/641936/singletony"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479903584, "post_id": 40761743, "comment_id": 68753003, "body": "@mudasobwa actually the invocation in our code is <code>block.call unless block.nil?</code> vs <code>block.call if block_given?</code>, so my post is a variation and I agree it wasn&#39;t the best one. That said, I agree with @the_drow, we care about the tradeoffs (and proving I am right) and some of the answers here address those well."}], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 0, "last_activity_date": 1479897743, "last_edit_date": 1479897743, "creation_date": 1479897340, "answer_id": 40762017, "question_id": 40761743, "link": "https://stackoverflow.com/questions/40761743/ruby-what-are-the-differences-between-checking-if-block-given-and-block-nil/40762017#40762017", "title": "Ruby - What are the differences between checking if block_given? and !block.nil?", "body": "<p>I think that the main difference is that <code>block_given?</code> can be used without explicitly defining <code>&amp;block</code> in method definition:</p>\n\n<pre><code>def named_block\n  if !block_given?\n    puts \"No block\"\n  else \n    yield\n  end\nend\n</code></pre>\n\n<p>Which version is better when it goes for readability? Sometimes explicitly naming the block can be more readable and sometimes <code>yield</code> can be more readable. It's also mater of personal preferences. </p>\n\n<p>When it goes to speed, in benchmarks, that you've included, the <code>yield</code> is faster. That is because Ruby doesen't have to initialize new object (<code>Proc</code>) for the block and assign it to variable.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 0, "creation_date": 1479898913, "post_id": 40762264, "comment_id": 68749688, "body": "@the_drow what about reading ruby documentation on the subject? I voted for the question to be closed as \u201cprimarily opinion based,\u201d and I suggest everybody here to do so."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 2, "creation_date": 1479899205, "post_id": 40762264, "comment_id": 68749905, "body": "@the_drow, procs are immutable. Also I haven&#39;t checked the implementation, but my guess is that a <code>nil?</code> check is atomic. So I don&#39;t think it makes a difference either way."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1479899403, "last_edit_date": 1479899403, "creation_date": 1479897977, "answer_id": 40762264, "question_id": 40761743, "link": "https://stackoverflow.com/questions/40761743/ruby-what-are-the-differences-between-checking-if-block-given-and-block-nil/40762264#40762264", "title": "Ruby - What are the differences between checking if block_given? and !block.nil?", "body": "<p>First off, while a single <code>nil?</code> check might be faster than <code>block_given?</code>, capturing the block is slow. So unless you were going to capture it anyway, the performance argument is invalid.</p>\n\n<p>Secondly, it's easier to understand. Whenever you see <code>block_given?</code>, you know exactly what is up. When you have <code>x.nil?</code>, you have to stop and think what <code>x</code> is.</p>\n\n<p>Thirdly, it's an idiom. In my experience, the overwhelming majority of Ruby developers will prefer <code>block_given?</code>. When in Rome...</p>\n\n<p>Lastly, you can keep it consistent. If you always use <code>block_given?</code> the problem is solved for you. If you use <code>nil?</code> checks, you have to have the block captured.</p>\n\n<ul>\n<li>There is a performance overhead.</li>\n<li>It's more verbose, something Rubyists try to avoid.</li>\n<li>Naming things is one of the hardest things in programming. :) Can you think of a good name for the block <code>Enumerable#map</code> will get for example?</li>\n<li><em>\"Grepability\"</em> is a desirable trait for a codebase to have. If you want to find all the places where you check if you were given a block, doing <code>nil?</code> checks can prove difficult.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479905863, "post_id": 40762546, "comment_id": 68754474, "body": "To downvoters: I won\u2019t remove this answer, I don\u2019t care about reputation and this answer is <b>perfectly valid</b>. If for some reason you think it\u2019s not a proper way to accomplish what\u2019s asked, start with proving it."}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 1, "creation_date": 1479907913, "post_id": 40762546, "comment_id": 68755900, "body": "I dont thing this is perfectly valid if i raise exception like this <code>named_block { raise ArgumentError, &quot;Test error&quot; }</code> your code produce &#39;No block&#39; :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1479908377, "post_id": 40762546, "comment_id": 68756212, "body": "@LukasBaliak indeed: added to answer. Anyway."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1479909036, "post_id": 40762546, "comment_id": 68756668, "body": "@LukasBaliak within your comment downvote would be fine, as a matter of fact :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1479909383, "post_id": 40762546, "comment_id": 68756897, "body": "@LukasBaliak I fixed an issue, though :)"}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1479910458, "post_id": 40762546, "comment_id": 68757608, "body": "Nice, but i still prefere to use <code>block_given? ? block.() : &#39;No Block&#39;</code> :D"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1497797489, "post_id": 40762546, "comment_id": 76218584, "body": "I don&#39;t think it&#39;s a great answer--it&#39;s just too clever to be useful--but I did just learn what <code>Proc.new</code> does when not given a block.  Thanks for teaching me something."}, {"owner": {"reputation": 71, "user_id": 3385393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e892557de7a1d85d5f22b339b1f1ceab?s=128&d=identicon&r=PG", "display_name": "fritzelr", "link": "https://stackoverflow.com/users/3385393/fritzelr"}, "edited": false, "score": 0, "creation_date": 1598547565, "post_id": 40762546, "comment_id": 112501858, "body": "Looks like this is deprecated now, Ruby 2.7.0p0 says <code>warning: Capturing the given block using Proc.new is deprecated; use &#39;&amp;block&#39; instead</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479909370, "last_edit_date": 1479909370, "creation_date": 1479898672, "answer_id": 40762546, "question_id": 40761743, "link": "https://stackoverflow.com/questions/40761743/ruby-what-are-the-differences-between-checking-if-block-given-and-block-nil/40762546#40762546", "title": "Ruby - What are the differences between checking if block_given? and !block.nil?", "body": "<p>There is another way to accomplish this:</p>\n\n<pre><code>def named_block\n   (Proc.new rescue puts(\"No block\") || -&gt;{}).call\nend\n\n\u25b6 named_block\n#\u21d2\u00a0No block\n\u25b6 named_block { puts 'BLOCK!' }\n#\u21d2\u00a0BLOCK!\n</code></pre>\n\n<p><sup>please don\u2019t take this too seriously</sup></p>\n\n<p><strong>UPD</strong>: as noted by @Lukas in comments, it fails on the block, that raises an exception \u21d2 FIXED</p>\n"}], "owner": {"reputation": 1302, "user_id": 641936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1eba903b5f2b166692226fc71f08b5?s=128&d=identicon&r=PG", "display_name": "singletony", "link": "https://stackoverflow.com/users/641936/singletony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1781, "favorite_count": 0, "accepted_answer_id": 40762264, "answer_count": 3, "score": 7, "last_activity_date": 1479909370, "creation_date": 1479896677, "question_id": 40761743, "link": "https://stackoverflow.com/questions/40761743/ruby-what-are-the-differences-between-checking-if-block-given-and-block-nil", "title": "Ruby - What are the differences between checking if block_given? and !block.nil?", "body": "<p>I have a ruby method that needs to check if a block was passed to it. \nA colleague is suggesting that simply checking if <code>block.nil?</code> is slightly faster in performance and works for named blocks. This is already quite annoying since he is using the named block and invoking it using <code>block.call</code> rather than <code>yield</code> which has been shown to be <a href=\"http://mudge.name/2011/01/26/passing-blocks-in-ruby-without-block.html\" rel=\"noreferrer\">significantly faster</a>, since named blocks are more easy to understand in terms of readability.</p>\n\n<p>Version 1:</p>\n\n<pre><code>def named_block &amp;block\n   if block.nil?\n     puts \"No block\"\n   else\n     block.call\n   end\nend\n</code></pre>\n\n<p>Version 2:</p>\n\n<pre><code>def named_block &amp;block\n  if !block_given?\n    puts \"No block\"\n  else \n    block.call\n  end\nend\n</code></pre>\n\n<p>Benchmarking shows that version 1 is slightly faster than version 2, however a quick look at the <a href=\"http://apidock.com/ruby/v1_9_3_392/Kernel/block_given%3F\" rel=\"noreferrer\">source code</a> seems to suggest that <code>block_given?</code> is thread safe.</p>\n\n<p>What are the main differences between the two approaches? Please help me prove him wrong!</p>\n"}, {"tags": ["ruby", "class", "oop"], "comments": [{"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1479896011, "post_id": 40761131, "comment_id": 68747572, "body": "The name for &quot;anything like self.included&quot; is &quot;object lifecycle hook&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479895937, "creation_date": 1479895937, "answer_id": 40761465, "question_id": 40761131, "link": "https://stackoverflow.com/questions/40761131/ruby-method-which-is-running-after-method-is-defined/40761465#40761465", "title": "Ruby method which is running after method is defined", "body": "<p>Yes, there is. But it\u2019s a bit tricky, since there is no notion of \u201cclass defined\u201d due to open classes concept in ruby.</p>\n\n<p>What you are looking for is <a href=\"http://ruby-doc.org/core/TracePoint.html\" rel=\"nofollow noreferrer\"><code>TracePoint</code></a>. Possible usage:</p>\n\n<pre><code>  TracePoint.new(:end) do |tp|\n    if tp.self.name == 'AB'\n      # DO SOME STUFF\n      # at this very moment class was closed with end for the 1st time\n      tp.disable\n    end\n  end.enable\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1479895937, "creation_date": 1479895076, "question_id": 40761131, "link": "https://stackoverflow.com/questions/40761131/ruby-method-which-is-running-after-method-is-defined", "title": "Ruby method which is running after method is defined", "body": "<p>Let say I have a <code>class Alex</code>.</p>\n\n<pre><code>class AB &lt; Alex\n  some_definition_here # it changes some class variables\nend\n</code></pre>\n\n<p>My question is: is there anything like <code>self.included</code> for classes which is executed only after class is defined? I want to get access to class variables only after some class variables has been changed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "oauth", "reverse-proxy"], "owner": {"reputation": 187, "user_id": 1191817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bb7a16996d604e30c2afb96bbfd9fe?s=128&d=identicon&r=PG", "display_name": "pranshus", "link": "https://stackoverflow.com/users/1191817/pranshus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479893735, "creation_date": 1479893735, "question_id": 40760626, "link": "https://stackoverflow.com/questions/40760626/ror-reverse-proxy-oauth", "title": "RoR reverse proxy (oauth)", "body": "<p>We currently have the following architecture (for a RoR based production system)\n  A gateway, which also acts as auth (oauth functionality implemented using DoorKeeper) is the starting point for all requests coming from the front end. </p>\n\n<p>The system is working perfectly well. The task we are faced with now involves addition of a legacy application (written in multiple languages, including ASP.NET). This legacy application currently works fine as a standalone system. What we intend to do is </p>\n\n<ul>\n<li>Integrate the legacy system within our working system (within our own subnet)</li>\n<li>Do minimum (or if possible zero) modifications to the legacy system</li>\n<li>keep using our oauth layer (gateway) as the first point of contact for all incoming requests (including the requests to the legacy system)</li>\n</ul>\n\n<p><em>We are in control of the front end requests and routing, so CSRF is not a concern</em></p>\n\n<p>One solution that we are considering is that the auth layer (gateway) also acts as a reverse proxy. In essence any request coming for the legacy environment (from the legacy front end clients) will be authenticated by doorkeeper but they will now be redirected to the legacy server-application and the response is then send back to the client. </p>\n\n<p>The above sounds like a nginx reverse proxy, but I want a RoR gem which I can use because I want this to be flexible for future modifications. For example (but not limited to)</p>\n\n<ul>\n<li>I can modify the legacy client to start using multiple auth mechanisms (so the request from client to auth layer will have different headers, but I would like to change this request to its legacy format during the journey from auth-legacy-backend-server-application and back) [<em>easier</em>]</li>\n<li>I would like to add encryption (SSL) on client to auth (gateway) requests. The gateway will decrypt the request and send un-encrypted request for the auth-legacy-backend-server-application and back journey) [<em>tougher</em>]</li>\n<li>A few of the legacy system requests are such that Legacy-FrontEnd (<strong>LFE</strong>) --> Legacy-Backend (<strong>LBE</strong>) use cookie based sessions. I want to use the gateway to simulate this behavior. \n\n<ul>\n<li>LFE -> gateway uses my auth mechanism (say encrypted tokens)</li>\n<li>gateway -> LBE simulates the cookie based sessions behavior</li>\n<li>gateway keeps the mapping of token to session-cookie</li>\n</ul></li>\n</ul>\n\n<p>[<em>the last point above is a over simplification of a use case we might encounter at a later date</em>]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 8949, "user_id": 3270427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8nv26.jpg?s=128&g=1", "display_name": "McNets", "link": "https://stackoverflow.com/users/3270427/mcnets"}, "edited": false, "score": 1, "creation_date": 1479893313, "post_id": 40760184, "comment_id": 68745751, "body": "<a href=\"http://stackoverflow.com/a/36940796/3270427\">stackoverflow.com/a/36940796/3270427</a>"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479894850, "post_id": 40760184, "comment_id": 68746753, "body": "try Base64.encode64(raw_data) before encryption and I think you are trying to encrypt the RSA key right?"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479895262, "post_id": 40760184, "comment_id": 68747056, "body": "You can use cipher.random_key for the key as it will not accept other format other than string"}, {"owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "reply_to_user": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479902554, "post_id": 40760184, "comment_id": 68752296, "body": "I need to extract public key from .cer file then data has to encrypt with obtained public key from .cer file,  for that I followed <a href=\"http://stackoverflow.com/a/1914928/4477305\">stackoverflow.com/a/1914928/4477305</a> @Wish Zone"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479903470, "post_id": 40760184, "comment_id": 68752910, "body": "After doing this Are you thinking about to decrypt the data with private key??"}, {"owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1479903696, "post_id": 40760184, "comment_id": 68753087, "body": "No, posting to api they will decrypt with private key"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479903981, "post_id": 40760184, "comment_id": 68753255, "body": "yes I was saying the same at receivers end this is going to happnen...But this this is not possible as AES always look for the same key with which it was encrypted, AES is not aware of RSA private - public thing..   As I mentioned in the answer you need to follow the same send encrypted key (with  RSA public ) in header from sender side .....at receiver side decry-pt the key from header (RSA private key) and process the AES algorithm to get actual data"}, {"owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1479904217, "post_id": 40760184, "comment_id": 68753402, "body": "thats right!  but I got .cer file which has public key from other side, they had corresponding private key, so they can decrypt the data which I encrypted with their pulbic key"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479904461, "post_id": 40760184, "comment_id": 68753526, "body": "Ok so with RSA there is limit of data that we can ecrpty/decry-pt directly so we have to use AES. So here I think at receiver end also need some modification to follow this approach"}, {"owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1479904896, "post_id": 40760184, "comment_id": 68753821, "body": "yes, but my problem is when I try to set key to cipher like <code>cipher.key = KEY</code>, getting <code>no implicit conversion of OpenSSL::PKey::RSA into String</code> exception where KEY is OpenSSL::PKey::RSA instance, there is any way to convert it into string"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1479907092, "post_id": 40760184, "comment_id": 68755341, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128821/discussion-between-wish-zone-and-codecpm\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479907638, "post_id": 40760184, "comment_id": 68755695, "body": "Hey you can do  File.read(public_key_file)  But I am sure somehow you will do this encryption but you won&#39;t be able to decry-pt it with private key on receiver side"}], "answers": [{"tags": [], "owner": {"reputation": 1259, "user_id": 1355875, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e82c67fe657ccad5220acb88b60e9a11?s=128&d=identicon&r=PG", "display_name": "Chris Lewis", "link": "https://stackoverflow.com/users/1355875/chris-lewis"}, "is_accepted": false, "score": 1, "last_activity_date": 1479896432, "last_edit_date": 1479896432, "creation_date": 1479894963, "answer_id": 40761086, "question_id": 40760184, "link": "https://stackoverflow.com/questions/40760184/how-to-encrypt-data-with-aes-256-ecb-pkcs5padding-in-ruby/40761086#40761086", "title": "how to encrypt data with AES 256 ECB PKCS5Padding in ruby", "body": "<p>I think your key is in the wrong format. You're trying to pass an RSA key, when the key should just be a hash string ... something like:</p>\n\n<pre><code>key = SecureRandom.hex(32)\n=&gt; \"b67f7a5bf031aaa730473e5a9612a94b157c43aed5f52a2e70c9573f2d5a4ecd\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1480002641, "post_id": 40761261, "comment_id": 68803058, "body": "How to use PKCS5Padding in this process and what is default padding?"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 0, "creation_date": 1480021699, "post_id": 40761261, "comment_id": 68811171, "body": "@CodecPM Hey I have edited the answer for help, now its your time to rock!!"}, {"owner": {"reputation": 429, "user_id": 860048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Veirg.jpg?s=128&g=1", "display_name": "Bhaveshkumar", "link": "https://stackoverflow.com/users/860048/bhaveshkumar"}, "reply_to_user": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "edited": false, "score": 1, "creation_date": 1576217668, "post_id": 40761261, "comment_id": 104834985, "body": "@CodecPM default padding is PKCS1_PADDING"}], "tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1480053864, "last_edit_date": 1480053864, "creation_date": 1479895433, "answer_id": 40761261, "question_id": 40760184, "link": "https://stackoverflow.com/questions/40760184/how-to-encrypt-data-with-aes-256-ecb-pkcs5padding-in-ruby/40761261#40761261", "title": "how to encrypt data with AES 256 ECB PKCS5Padding in ruby", "body": "<p>You should use </p>\n\n<pre><code>key = cipher.random_key\n</code></pre>\n\n<p>instead of RSA key</p>\n\n<p>I have used it in following way for my purpose</p>\n\n<ol>\n<li>Generate cypher random keys   </li>\n<li>Do AES encryption of data with these keys </li>\n<li>Before supply the keys encrypt it with RSA public key</li>\n</ol>\n\n<p>At receiver end</p>\n\n<ol>\n<li>Decrypt the cypher keys with RSA private key</li>\n<li>Decrypt the data with resultant cypher keys</li>\n</ol>\n\n<p>Note: We can not encrypt large data with RSA private/public key based technique</p>\n\n<pre><code>Super secured Example\n\n  # At sender side\n  public_key_file = 'public.pem'\n\n  message = 'Hey vishh you are awesome!!'\n  cipher = OpenSSL::Cipher::AES.new(128, :CBC)\n  cipher.encrypt\n  aes_key = cipher.random_key\n  encrypted_data = cipher.update(message) + cipher.final\n  # encrypted_data is ready to travel\n\n  rsa = OpenSSL::PKey::RSA.new(File.read(public_key_file))  \n  rsa_cypher_key = rsa.public_encrypt(aes_key)\n  # rsa_cypher_key is ready to travel\n\n  # sending these data in encoded format is good idea\n  encrypted_data = Base64.encode64(encrypted_data)\n  rsa_cypher_key = Base64.encode64(rsa_cypher_key) \n  ====&gt; encrypted_data + rsa_cypher_key =====&gt; Travelling\n  encrypted_data = Base64.decode64(encrypted_data)\n  rsa_cypher_key = Base64.decode64(rsa_cypher_key) # decode the data\n\n  # At recevier side\n  private_key_file = 'private.pem'\n  # Decrypt the cypher key with private key\n  rsp = OpenSSL::PKey::RSA.new(File.read('./config/private.pem'))\n  aes_key = private_key.private_decrypt(rsa_cypher_key)\n\n  decipher = OpenSSL::Cipher::AES.new(128, :CBC)\n  decipher.decrypt\n  decipher.key = aes_key\n  message = decipher.update(encrypted_data) + decipher.final\n  p message\n  'Hey vishh you are awesome!!'\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 4477305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qjiUcN1hMXI/AAAAAAAAAAI/AAAAAAAAAFk/u623SYPgLzE/photo.jpg?sz=128", "display_name": "CodecPM", "link": "https://stackoverflow.com/users/4477305/codecpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1957, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1480053864, "creation_date": 1479892415, "last_edit_date": 1479893203, "question_id": 40760184, "link": "https://stackoverflow.com/questions/40760184/how-to-encrypt-data-with-aes-256-ecb-pkcs5padding-in-ruby", "title": "how to encrypt data with AES 256 ECB PKCS5Padding in ruby", "body": "<p>I want encrypt data with AES 256bit ECB mode using PKCS5padding\nMy ruby method is as follows, how to use PKCS5Padding here</p>\n\n<pre><code>def encrypt(raw_data,key)\n  cipher = OpenSSL::Cipher::AES.new(256, :ECB)\n  cipher.encrypt\n  cipher.key = key\n  encrypted_data = cipher.update(raw_data) + cipher.final\nend\n</code></pre>\n\n<p>here key is OpenSSL::PKey::RSA type, throwing <code>no implicit conversion of OpenSSL::PKey::RSA into String</code> exception</p>\n"}, {"tags": ["ruby", "output", "highline"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479893795, "post_id": 40760131, "comment_id": 68746075, "body": "<code>puts &quot;\\e[2J&quot;</code>."}, {"owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479898699, "post_id": 40760131, "comment_id": 68749532, "body": "My question is not about clear-screen method itself. It is about where should I put this code and how to do it right way. But thanks for the hint."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479898976, "post_id": 40760131, "comment_id": 68749728, "body": "\u201cwhere should I put this code\u201d\u2014where you need the screen to be cleared."}, {"owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479900050, "post_id": 40760131, "comment_id": 68750545, "body": "It should be cleared before any output as I said."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1479901580, "post_id": 40760131, "comment_id": 68751675, "body": "Really? <code>puts &#39;Q.: Please enter a number&#39;; puts &#39;&gt;&#39;</code> \u21d0 do you really want the screen to be cleared <i>twice</i> (one in between of puts?) Any output is chunked, according to some business rules, and you are the only person who understands these business rules."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "edited": false, "score": 0, "creation_date": 1479919672, "post_id": 40763710, "comment_id": 68763940, "body": "Yes, you are quite right. It is exactly what I ask for and it is not what I want absolutely. I should manually clear screen in right places of <b>my app</b> according to business logic."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1479901701, "creation_date": 1479901701, "answer_id": 40763710, "question_id": 40760131, "link": "https://stackoverflow.com/questions/40760131/clear-screen-before-any-output-to-console/40763710#40763710", "title": "Clear screen before any output to console", "body": "<p>Well, the requirements are not clear and I won\u2019t recommend this way, but the stated problem might be solved with:</p>\n\n<pre><code>$stdout.singleton_class.prepend(Module.new do\n  def write(string)\n    super(\"\\e[2J\" &lt;&lt; string)\n  end\nend)\n</code></pre>\n\n<p>I think, this answer is not suitable for the OP, but <em>it perfectly answers the exact question asked</em>.</p>\n"}], "owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 40763710, "answer_count": 1, "score": 0, "last_activity_date": 1479901701, "creation_date": 1479892270, "last_edit_date": 1495540797, "question_id": 40760131, "link": "https://stackoverflow.com/questions/40760131/clear-screen-before-any-output-to-console", "title": "Clear screen before any output to console", "body": "<p>I use <a href=\"https://github.com/JEG2/highline\" rel=\"nofollow noreferrer\">HighLine</a> gem for UI. I want to <a href=\"https://stackoverflow.com/questions/3170553/how-can-i-clear-the-terminal-in-ruby\">clear the screen</a> before output any data. Which method should I use? <a href=\"https://stackoverflow.com/questions/5513558/executing-code-for-every-method-call-in-a-ruby-module\">Patch</a> some Ruby methods like <code>puts</code>? Patch HighLine? Change my app in some way? At the moment it has <code>Dialog</code> class with various methods which call HighLine functions for interacting with user. Or maybe HighLine has a built-in method to do that?</p>\n"}, {"tags": ["ruby", "sinatra", "warden"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479890097, "post_id": 40759279, "comment_id": 68743727, "body": "Please share all code that related to the problem, I mean the controller too."}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479890910, "post_id": 40759279, "comment_id": 68744170, "body": "added to question body"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479890967, "post_id": 40759279, "comment_id": 68744218, "body": "the authorize method outside of the LoginManager, that&#39;s a problem."}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479897007, "post_id": 40759279, "comment_id": 68748269, "body": "now i have error `Couldn&#39;t find Post with id=admin:&#39;"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479897147, "post_id": 40759279, "comment_id": 68748366, "body": "What an another question. Keep in mind StackOverflow is not your debuggin tool."}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479897147, "post_id": 40759279, "comment_id": 68748367, "body": "class <code>LoginManager</code> move before and after action <code>get &#47;:id</code>, but nothing changes"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479897196, "post_id": 40759279, "comment_id": 68748401, "body": "Move <code>class</code> before or after shouldn&#39;t relfect to something."}], "owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479890870, "creation_date": 1479889511, "last_edit_date": 1479890870, "question_id": 40759279, "link": "https://stackoverflow.com/questions/40759279/undefined-method-authenticated-sinatra-warden", "title": "undefined method authenticated? (Sinatra + Warden)", "body": "<p>When I add the <code>authorize!</code> method in controller, I get an error</p>\n\n<pre><code>NoMethodError - undefined method authenticated? for nil:NilClass\n</code></pre>\n\n<p>My controller</p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire 'sinatra_warden'\nrequire 'warden'\n\nclass LoginManager &lt; Sinatra::Base\n  register Sinatra::Warden\nend\n\nuse Rack::Session::Pool\n\nget '/dashboard' do\n  authorize!('/login')\n  erb :dashboard\nend\n</code></pre>\n\n<p>sinatra_warden 0.3.2</p>\n\n<p>warden 1.2.6</p>\n\n<p>where did I go wrong?</p>\n"}, {"tags": ["ruby", "lambda", "metaprogramming"], "comments": [{"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1479889616, "post_id": 40759161, "comment_id": 68743468, "body": "<code>-&gt; (arg) { arg }</code> is preferable"}], "answers": [{"comments": [{"owner": {"reputation": 12200, "user_id": 473040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2713a4959692f16d27d2553fb06cc4b?s=128&d=identicon&r=PG", "display_name": "equivalent8", "link": "https://stackoverflow.com/users/473040/equivalent8"}, "edited": false, "score": 3, "creation_date": 1479890050, "post_id": 40759254, "comment_id": 68743701, "body": "good stuff @AndreyDeineko,  and the nice thing about this is that it wont change state of the original  <code>phone</code>  ( after exec, phone var it&#39;s still <code>&quot;1(234)567-89-01&quot;</code> ) ... so in order to work with new value: <code>new_phone = phone.instance_exec(&amp;lambda)</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 15, "last_activity_date": 1488631932, "last_edit_date": 1488631932, "creation_date": 1479889427, "answer_id": 40759254, "question_id": 40759161, "link": "https://stackoverflow.com/questions/40759161/apply-lambda-to-an-object/40759254#40759254", "title": "Apply lambda to an object", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.3.2/BasicObject.html#method-i-instance_exec\" rel=\"nofollow noreferrer\">BasicObject#<code>instance_exec</code></a>: </p>\n\n<pre><code>phone.instance_exec &amp;lambda\n#=&gt; \"12345678901\"\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 1, "accepted_answer_id": 40759254, "answer_count": 1, "score": 9, "last_activity_date": 1529383941, "creation_date": 1479889033, "last_edit_date": 1529383941, "question_id": 40759161, "link": "https://stackoverflow.com/questions/40759161/apply-lambda-to-an-object", "title": "Apply lambda to an object", "body": "<p>Let say I have a variable and lambda defined somewhere</p>\n\n<pre><code>phone = \"1(234)567-89-01\"\nlambda = -&gt; { gsub(/[^0-9]/, '') }\n</code></pre>\n\n<p>How can I apply lambda to the phone to get <code>12345678901</code>?</p>\n\n<p>P.S. I know I can go with the following approach:</p>\n\n<pre><code>lambda = -&gt; (arg) { arg.gsub(/[^0-9]/, '') }\nlambda.call(phone)\n#=&gt; \"12345678901\"\n</code></pre>\n\n<p>But I want to be laconic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring"], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1479888014, "creation_date": 1479888014, "answer_id": 40758897, "question_id": 40758775, "link": "https://stackoverflow.com/questions/40758775/refactor-rails-controller-code/40758897#40758897", "title": "Refactor rails controller code", "body": "<p>Updated answer:</p>\n\n<pre><code>def update_receipt\n  attrs = params.slice(:phone_number, :address, :receipt_type)\n  attrs[:tax_number] = params[:tax_number] if attrs[:receipt_type].to_i == 2\n  Receipt.update(user.receipt.id, attrs)\nend\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 40758897, "answer_count": 1, "score": 0, "last_activity_date": 1479891053, "creation_date": 1479887538, "last_edit_date": 1479890928, "question_id": 40758775, "link": "https://stackoverflow.com/questions/40758775/refactor-rails-controller-code", "title": "Refactor rails controller code", "body": "<p>I was tring to reduce duplicatie code in my Rails project.</p>\n\n<pre><code>def update_receipt\n  user = current_user\n  Receipt.update(user.receipt.id, name: params[:name].to_s, phone_number: params[:phone_number].to_s, address: params[:address].to_s, receipt_type: params[:receipt_type].to_i)\n  Receipt.update(user.receipt.id, name: params[:name].to_s, phone_number: params[:phone_number].to_s, address: params[:address].to_s, receipt_type: params[:receipt_type].to_i, tax_number: params[:tax_number].to_i) if params[:receipt_type].to_i == 2 \nend\n</code></pre>\n\n<p>Is there a better way to refactor the above codes?</p>\n"}, {"tags": ["ruby", "oop", "inheritance", "composition"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479893518, "post_id": 40758694, "comment_id": 68745876, "body": "<code>base.singleton_class.send(:attr_accessor, *%i|strokeColor strokeWeight|)</code> :) Also, I doubt it would work with random array element."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1479905083, "post_id": 40758694, "comment_id": 68753946, "body": "@mudasobwa agree."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1479905060, "last_edit_date": 1479905060, "creation_date": 1479887155, "answer_id": 40758694, "question_id": 40758550, "link": "https://stackoverflow.com/questions/40758550/ruby-how-to-do-inheritance-or-compostion/40758694#40758694", "title": "ruby: how to do inheritance or compostion", "body": "<p>I can think of something along these lines:</p>\n\n<pre><code>module Ns4\n  module Maps\n    module StrokeStyle\n      module StrokeHelper\n        def self.included(base)\n          base.singleton_class.send(:attr_accessor, *%i(strokeColor strokeWeight))\n        end\n      end\n      class RedOutline\n        include StrokeHelper\n      end\n      class Random\n        include StrokeHelper\n      end\n      class Transparent\n        include StrokeHelper\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now you have a setter and getter for both <code>strokeColor</code> and <code>strokeWeight</code> in each class:</p>\n\n<pre><code>Ns4::Maps::StrokeStyle::RedOutline.strokeColor = 'red'\nNs4::Maps::StrokeStyle::RedOutline.strokeColor\n#=&gt; \"red\"\nNs4::Maps::StrokeStyle::RedOutline.strokeWeight = 4\nNs4::Maps::StrokeStyle::RedOutline.strokeWeight\n#=&gt; 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479904826, "post_id": 40760101, "comment_id": 68753773, "body": "this is barely compliant with KISS principle but is very cool :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479905728, "post_id": 40760101, "comment_id": 68754376, "body": "@AndreyDeineko this is exactly what I call KISS :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479927088, "post_id": 40760101, "comment_id": 68768171, "body": "Perfect, perfetto, parfait, perfekt, perfecto, \u5b8c\u307a\u304d, \u5b8c\u7f8e, \uc644\uc804\ud55c ! (Upvoted earlier.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479933657, "post_id": 40760101, "comment_id": 68771431, "body": "@CarySwoveland Without a doubt I would opt for one comment like this instead of ten upvotes."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1479892152, "creation_date": 1479892152, "answer_id": 40760101, "question_id": 40758550, "link": "https://stackoverflow.com/questions/40758550/ruby-how-to-do-inheritance-or-compostion/40760101#40760101", "title": "ruby: how to do inheritance or compostion", "body": "<p>If you want to really DRY it:</p>\n\n<pre><code>METHODS = %i|strokeColor strokeWeight|\nDECLARATIONS = { \n  :RedOutline =&gt; [-&gt; { 'red' }, 4], \n  :Random =&gt; [-&gt; { %w|#808080 #909090|.sample }, 4], \n  :Transparent =&gt; ['transparent', 0]\n}\n\n\nmodule Ns4 \n  module Maps\n    module StrokeStyle\n      DECLARATIONS.each do |klazz, props|\n        StrokeStyle.const_set(klazz, Module.new do\n          METHODS.zip(props).each do |(m, p)| \n            define_method m do p.is_a?(Proc) ? p.call : p end\n          end\n          module_function *METHODS\n        end)\n      end \n    end \n  end \nend\n\nputs Ns4::Maps::StrokeStyle::RedOutline.strokeColor\n#\u21d2\u00a0red\nputs Ns4::Maps::StrokeStyle::Random.strokeColor\n#\u21d2\u00a0#808080\nputs Ns4::Maps::StrokeStyle::Transparent.strokeColor\n#\u21d2\u00a0transparent\n</code></pre>\n\n<p>Adding new methods now as easy as adding new <code>Hash</code> elements.</p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479905060, "creation_date": 1479886641, "question_id": 40758550, "link": "https://stackoverflow.com/questions/40758550/ruby-how-to-do-inheritance-or-compostion", "title": "ruby: how to do inheritance or compostion", "body": "<p>I'm trying to DRY some code.\nHow to to do composition and/or inheritance with ruby using this piece of code.</p>\n\n<pre><code>module Ns4\n  module Maps\n    module StrokeStyle\n      class RedOutline\n        def self.strokeColor\n          \"red\"\n        end\n\n        def self.strokeWeight\n          4\n        end\n      end\n\n      class Random\n        def self.strokeColor\n          [ \"#808080\", \"#909090\" ].sample(1)[0]\n        end\n\n        def self.strokeWeight\n          4\n        end\n      end\n\n      class Transparent\n        def self.strokeColor\n          \"transparent\"\n        end\n\n        def self.strokeWeight\n          0\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Basically I want to reduce the duplication of logic wherever possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jekyll", "jekyll-extensions"], "answers": [{"tags": [], "owner": {"reputation": 639, "user_id": 2720989, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/MIy2K.jpg?s=128&g=1", "display_name": "Jeremy P. Beasley", "link": "https://stackoverflow.com/users/2720989/jeremy-p-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1479928000, "creation_date": 1479928000, "answer_id": 40772374, "question_id": 40758233, "link": "https://stackoverflow.com/questions/40758233/assets-not-deploying-with-jekyll-jekyll-siteleaf/40772374#40772374", "title": "Assets not deploying with Jekyll / Jekyll / Siteleaf", "body": "<p>The issue ended up being that I was on the trial and not the team plan which enables plugins. N00b move.</p>\n"}], "owner": {"reputation": 639, "user_id": 2720989, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/MIy2K.jpg?s=128&g=1", "display_name": "Jeremy P. Beasley", "link": "https://stackoverflow.com/users/2720989/jeremy-p-beasley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479928000, "creation_date": 1479885448, "question_id": 40758233, "link": "https://stackoverflow.com/questions/40758233/assets-not-deploying-with-jekyll-jekyll-siteleaf", "title": "Assets not deploying with Jekyll / Jekyll / Siteleaf", "body": "<p>I'm new to Jekyll/Siteleaf and trying to understand why the assets I have in <code>/assets</code> locally aren't publishing to <code>.com/assets</code> remotely. </p>\n\n<p>I'm using Siteleaf to deploy my code to an FTP server.</p>\n\n<p>Locally, everything is working at expected. I have the following <code>_config.yml</code> set up and assets placed in <code>/assets</code> appear immediately in <code>/_site/assets/</code></p>\n\n<p>Oddly when I \"Publish Changes\" in Siteleaf, those same assets aren't published. Any help would be much appreciated!</p>\n\n<pre><code>gems:\n- jekyll-assets\nassets:\n  cache: false\n  autowrite: true\n  prefix: \"/assets\"\n  digest: false\n  assets:\n  - \"*.png\"\n  - \"*.jpg\"\n  - \"*.svg\"\n  - \"*.otf\"\n  - \"*.ttf\"\n  - \"*.woff\"\n  - \"*.woff2\"\n  - \"*.eot\"\n  - master.css\n  - master.js\n  sources:\n  - assets/\n  - assets/_img\n  - assets/_fonts\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "warden"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479884238, "post_id": 40757764, "comment_id": 68740696, "body": "Show please the full code where you add this line."}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1479884716, "post_id": 40757764, "comment_id": 68740907, "body": "added to the body of the question"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "edited": false, "score": 0, "creation_date": 1479886482, "post_id": 40758164, "comment_id": 68741819, "body": "in the app.rb added <code>require &quot;sinatra&#47;base&quot;</code> and <code>class Myapp &lt; Sinatra::Base</code>. Application worked! But when I add the <code>authorize!</code> method in controller, I get an error <code>NoMethodError - undefined method authenticated? for nil:NilClass</code>"}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "edited": false, "score": 0, "creation_date": 1479886532, "post_id": 40758164, "comment_id": 68741849, "body": "log <code>Sinatra::Base#options is deprecated and will be removed, use #settings instead.</code>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "edited": false, "score": 0, "creation_date": 1479886598, "post_id": 40758164, "comment_id": 68741888, "body": "@Chumak this is an another question ). Post another question and maybe I can help."}, {"owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "edited": false, "score": 0, "creation_date": 1479886959, "post_id": 40758164, "comment_id": 68742091, "body": "only an hour :)"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1480206695, "last_edit_date": 1480206695, "creation_date": 1479885163, "answer_id": 40758164, "question_id": 40757764, "link": "https://stackoverflow.com/questions/40757764/how-to-set-authentication-in-sinatra/40758164#40758164", "title": "How to set authentication in Sinatra?", "body": "<p>Because you didn't use the <code>sinatra/base</code> you should add <code>sinatra/namespace</code>. Add to your <code>app.rb</code> this require <code>require \"sinatra/namespace\"</code>.</p>\n\n<blockquote>\n  <p><a href=\"http://www.sinatrarb.com/contrib/namespace.html#label-Classic+Application+Setup\" rel=\"nofollow noreferrer\"><code>Sinatra::Namespace</code></a> is an extension that adds namespaces to an\n  application. This namespaces will allow you to share a path prefix for\n  the routes within the namespace, and define filters, conditions and\n  error handlers exclusively for them. Besides that, you can also\n  <strong>register helpers</strong> and extensions that will be used only within the\n  namespace.</p>\n</blockquote>\n\n<p>Or change your application to the modular style:</p>\n\n<pre><code>require \"sinatra/base\"\n\nclass MyApp &lt; Sinatra::Base\n  register Sinatra::Warden\n\n  # The rest of your modular application code goes here...\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 40758164, "answer_count": 1, "score": 1, "last_activity_date": 1480206695, "creation_date": 1479883608, "last_edit_date": 1479885033, "question_id": 40757764, "link": "https://stackoverflow.com/questions/40757764/how-to-set-authentication-in-sinatra", "title": "How to set authentication in Sinatra?", "body": "<p>I need simple authentication for blog. For a single person. Just login to the website</p>\n\n<p>Can't configure sinatra_warden. Write the line </p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire 'pry-byebug'\nrequire \"sinatra/activerecord\"\nrequire \"carrierwave\"\nrequire \"carrierwave/orm/activerecord\"\nrequire 'sinatra_warden'\nrequire 'warden'\n\nregister Sinatra::Warden\n\nuse Rack::Session::Pool\n</code></pre>\n\n<p>in <strong>app.rb</strong>, but I get an error</p>\n\n<pre><code>NoMethodError: undefined method `register' for main:Object\n</code></pre>\n\n<p>the gem <a href=\"https://github.com/jsmestad/sinatra_warden\" rel=\"nofollow noreferrer\">sinatra_warden</a> has installed. as well written <code>require \"warden\"</code> &amp; <code>require \"sinatra_warden\"</code></p>\n\n<p>sinatra_warden 0.3.2</p>\n\n<p>warden 1.2.6</p>\n\n<p>When I add the <code>authorize!</code> method in controller, I get an error</p>\n\n<pre><code>undefined method `authorize!'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479882940, "post_id": 40757542, "comment_id": 68740151, "body": "Where do &#39;Conveyor&#39; and &#39;Bolt &amp; Nut&#39; come from? Which line is printing them?"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479883094, "post_id": 40757542, "comment_id": 68740209, "body": "Conveyor&#39; and &#39;Bolt &amp; Nut are coming from itemgroups_array. I am printing it through outer loop as ig_name by the statement &lt;% itemgroups_array.each do |ig_name|%&gt;"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479883424, "post_id": 40757542, "comment_id": 68740334, "body": "Can you check you html structure, if one item group and its brands are contained in one outer most div?"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479883506, "post_id": 40757542, "comment_id": 68740364, "body": "I can not get your point @JagdeepSingh"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479883795, "post_id": 40757542, "comment_id": 68740488, "body": "Is there any solution or its a weird thing? Just asking."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479883911, "post_id": 40757542, "comment_id": 68740539, "body": "you can check the generated html in your browser"}, {"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479884009, "post_id": 40757542, "comment_id": 68740587, "body": "Can you show your array elements here?"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479884294, "post_id": 40757542, "comment_id": 68740719, "body": "Yes @SwapnilPatil  itemgroups_array is [&quot;Conveyor&quot;, &quot;Bolt &amp; Nut&quot;] and all_brands_array is [[&quot;Jeekey(AD)&quot;,&quot;SKF&quot;],[&quot;Nirlon(AD)&quot;,&quot;FAG&quot;,&quot;SKF(AD)&quot;]]"}, {"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479884588, "post_id": 40757542, "comment_id": 68740839, "body": "I think you are getting correct output what you want. The only thing is you want the elements in one line? Am i right?"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "edited": false, "score": 0, "creation_date": 1479884737, "post_id": 40757542, "comment_id": 68740920, "body": "Yes @SwapnilPatil,,,output is correct, I just want to print it in one line."}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1479885814, "post_id": 40757542, "comment_id": 68741457, "body": "just try adding a <code>&lt;span&gt;</code> after <code>&lt;%=ig_name%&gt;</code> and close it before <code>&lt;&#47;div&gt;</code>"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1479886014, "post_id": 40757542, "comment_id": 68741553, "body": "But later in javascript I need to catch all of its data including itemgroup name and brand name just from a single div innerHTML ,in this I can get this by document.getElementById(&quot;Conveyordiv&quot;).innerHTML. Will it work as it is if I use span ? @sa77"}, {"owner": {"reputation": 295, "user_id": 3378662, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/845b4f83f7bd0d7118ccb4f6ab3acd77?s=128&d=identicon&r=PG&f=1", "display_name": "alv_721", "link": "https://stackoverflow.com/users/3378662/alv-721"}, "edited": false, "score": 0, "creation_date": 1479907829, "post_id": 40757542, "comment_id": 68755851, "body": "@Abhradip your code looks fine. I have tried it and I get this output (with no styling) - <a href=\"http://awesomescreenshot.com/0fd66t09ac\" rel=\"nofollow noreferrer\">awesomescreenshot.com/0fd66t09ac</a> So the reason should be about some styles You have there. Get a firebug and try to play with it.  ALSO You do not need a <code>counter</code> variable there. Just <code>@itemgroups_array.each_with_index do |ig_name, index|</code> and then <code>@all_brands_array[index].join(&quot; &quot;)</code> will do the thing"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "reply_to_user": {"reputation": 295, "user_id": 3378662, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/845b4f83f7bd0d7118ccb4f6ab3acd77?s=128&d=identicon&r=PG&f=1", "display_name": "alv_721", "link": "https://stackoverflow.com/users/3378662/alv-721"}, "edited": false, "score": 0, "creation_date": 1479910641, "post_id": 40757542, "comment_id": 68757736, "body": "Thanks a lot @Vla. Its working."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "edited": false, "score": 0, "creation_date": 1479885742, "post_id": 40758129, "comment_id": 68741419, "body": "I dont need 2 inner div. That would cause problem in my case later."}, {"owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "reply_to_user": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "edited": false, "score": 0, "creation_date": 1479886257, "post_id": 40758129, "comment_id": 68741678, "body": "You can handle it in javascript by providing id or class and can get the data. @Abhradip"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "edited": false, "score": 0, "creation_date": 1479886545, "post_id": 40758129, "comment_id": 68741854, "body": "You are not getting it. I have an existing webapp. I am working in production. So many things are dependent on each other. Cant change such way."}], "tags": [], "owner": {"reputation": 842, "user_id": 6813116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2Ep2x.jpg?s=128&g=1", "display_name": "Swapnil Patil", "link": "https://stackoverflow.com/users/6813116/swapnil-patil"}, "is_accepted": false, "score": 0, "last_activity_date": 1479885637, "last_edit_date": 1479885637, "creation_date": 1479885002, "answer_id": 40758129, "question_id": 40757542, "link": "https://stackoverflow.com/questions/40757542/issue-regarding-printing-of-array-elements-in-ruby/40758129#40758129", "title": "Issue regarding printing of array elements in Ruby", "body": "<p>Float left is the solution. Provide the div with enough width to the elements and put css property to the div as float:left.</p>\n\n<p>try this:</p>\n\n<pre><code>&lt;div id=\"persist\"&gt;\n    &lt;div id=\"Conveyordiv\"&gt;\n      &lt;div style='float:left'&gt;\n        Conveyor\n      &lt;/div&gt;\n      &lt;div style='float:left'&gt;\n        &lt;input type=\"checkbox\" class=\"check_class\" id=\"Conveyorc\" checked=\"true\"&gt;\n        Jeekay(AD) SKF\n      &lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;div id=\"Bolt &amp;amp; Nutdiv\"&gt;\n      &lt;div style='float:left'&gt;\n        Bolt &amp;amp; Nut\n      &lt;/div&gt;\n      &lt;div style='float:left'&gt;\n        &lt;input type=\"checkbox\" class=\"check_class\" id=\"Bolt &amp;amp; Nutc\" checked=\"true\"&gt;\n        Nirlon(AD) FAG SKF(AD)\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p></p>\n"}], "owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479885637, "creation_date": 1479882684, "last_edit_date": 1479884194, "question_id": 40757542, "link": "https://stackoverflow.com/questions/40757542/issue-regarding-printing-of-array-elements-in-ruby", "title": "Issue regarding printing of array elements in Ruby", "body": "<p>I have an existing rails application. In one view file I want to print 2 array elements in a particular manner. My two arrays are @itemgroups_array and @all_brands_array,where @all_brands_array is an array of arrays. For each element of @itemgroups_array the corresponding element of @all_brands_array will be printed. As I just said each element of @all_brands_array is another array and since I want to print the innermost array elements in a same line,I have used join() method. Upto this its fine.</p>\n\n<p>My code is:</p>\n\n<pre><code>&lt;% counter = 0 %&gt;\n&lt;% @itemgroups_array.each do |ig_name|%&gt;\n  &lt;div id=\"&lt;%=ig_name%&gt;div\"&gt;\n    &lt;%=ig_name%&gt;\n    &lt;input type=\"checkbox\" class=\"check_class\" id=\"&lt;%=ig_name%&gt;c\" checked=\"true\"&gt;\n    &lt;%= @all_brands_array[counter].join(\" \")%&gt;\n\n  &lt;/div&gt;\n  &lt;% counter = counter + 1 %&gt;\n&lt;%end%&gt; \n</code></pre>\n\n<p>And it is giving output like this: (Conceptually)</p>\n\n<pre><code>Conveyor\n\nJeekay(AD) SKF\n\nBolt &amp; Nut\n\nNirlon(AD) FAG SKF(AD)\n</code></pre>\n\n<p>where I have managed to print Nirlon(AD),FAG,SKF(AD) all in same line by the statement  @all_brands_array[counter].join(\" \"). But I want to print it as follows:</p>\n\n<pre><code>Conveyor   Jeekay(AD) SKF\nBolt &amp; Nut   Nirlon(AD) FAG SKF(AD)\n</code></pre>\n\n<p>i.e conceptually outer array element and inner array elements in same line just like above line.</p>\n\n<p>Please help me about this.</p>\n\n<p>Thanks in advance!</p>\n\n<p>My browser generated html for this section is:</p>\n\n<pre><code>&lt;div id=\"persist\"&gt;\n        &lt;div id=\"Conveyordiv\"&gt;\n            Conveyor\n            &lt;input type=\"checkbox\" class=\"check_class\" id=\"Conveyorc\" checked=\"true\"&gt;\n            Jeekay(AD) SKF\n\n        &lt;/div&gt;\n        &lt;div id=\"Bolt &amp;amp; Nutdiv\"&gt;\n            Bolt &amp;amp; Nut\n            &lt;input type=\"checkbox\" class=\"check_class\" id=\"Bolt &amp;amp; Nutc\" checked=\"true\"&gt;\n            Nirlon(AD) FAG SKF(AD)\n\n        &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479881946, "post_id": 40757328, "comment_id": 68739743, "body": "please post about 10 lines before and 10 after around this code"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479882110, "post_id": 40757328, "comment_id": 68739811, "body": "@AndreyDeineko Thats everything I have in that file!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479882280, "post_id": 40757328, "comment_id": 68739882, "body": "check what  inspect element shows at that place"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1479882738, "post_id": 40757328, "comment_id": 68740058, "body": "@AndreyDeineko added html."}], "answers": [{"comments": [{"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1479884320, "post_id": 40757795, "comment_id": 68740739, "body": "Thanks but this failed <code>:hint =&gt; image_tag(f.object.avatar.url(:medium)).html_safe</code> but &#39;hint: image_tag(f.object.avatar.url(:medium)).html_safe&#39; worked, why is that?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1479884402, "post_id": 40757795, "comment_id": 68740776, "body": "@sadaf2605 I didn&#39;t get it, what is worked and what is not?"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1479883758, "creation_date": 1479883758, "answer_id": 40757795, "question_id": 40757328, "link": "https://stackoverflow.com/questions/40757328/activeadmin-formtastic-f-template-image-tag-showing-an-extra-hash-at-form/40757795#40757795", "title": "activeadmin formtastic f.template.image_tag(...) showing an extra hash at form", "body": "<p>Change your code to <code>hint: image_tag(f.object.avatar.url(:medium)).html_safe</code>, <code>f.template</code> is excess here.</p>\n"}], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 40757795, "answer_count": 1, "score": 0, "last_activity_date": 1479883758, "creation_date": 1479881818, "last_edit_date": 1479882705, "question_id": 40757328, "link": "https://stackoverflow.com/questions/40757328/activeadmin-formtastic-f-template-image-tag-showing-an-extra-hash-at-form", "title": "activeadmin formtastic f.template.image_tag(...) showing an extra hash at form", "body": "<p>At active admin, I have this following code:</p>\n\n<pre><code>ActiveAdmin.register Item do\n\n  permit_params :name, :description, :avatar\n\n  form :html =&gt; { :enctype =&gt; \"multipart/form-data\" } do |f|\n    f.inputs do\n      f.input :name\n      f.input :description\n\n      f.input :avatar, :as =&gt; :file  , :hint =&gt; f.template.image_tag(f.object.avatar.url(:medium))\n    end\n    f.actions\n  end\n\nend\n</code></pre>\n\n<p>It shows a class hash at the form,<a href=\"https://i.stack.imgur.com/7EqrL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7EqrL.png\" alt=\"unwanted hash demo\"></a></p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;fieldset class=\"inputs\"&gt;&lt;ol&gt;&lt;li class=\"string input optional stringish\" id=\"item_name_input\"&gt;&lt;label for=\"item_name\" class=\"label\"&gt;Name&lt;/label&gt;&lt;input id=\"item_name\" type=\"text\" name=\"item[name]\"&gt;\n\n&lt;/li&gt;&lt;li class=\"text input optional\" id=\"item_description_input\"&gt;&lt;label for=\"item_description\" class=\"label\"&gt;Description&lt;/label&gt;&lt;textarea rows=\"20\" id=\"item_description\" name=\"item[description]\"&gt;&lt;/textarea&gt;\n\n&lt;/li&gt;#&amp;lt;#&amp;lt;Class:0x007fb884ba0970&amp;gt;:0x007fb886102b38&amp;gt;&lt;li class=\"file input optional\" id=\"item_avatar_input\"&gt;&lt;label for=\"item_avatar\" class=\"label\"&gt;Avatar&lt;/label&gt;&lt;input id=\"item_avatar\" type=\"file\" name=\"item[avatar]\"&gt;\n\n&lt;p class=\"inline-hints\"&gt;&lt;img src=\"/images/medium/missing.png\" alt=\"Missing\"&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/fieldset&gt;\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "json", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 1, "creation_date": 1479877818, "post_id": 40756202, "comment_id": 68738334, "body": "you can do like this  <b>hash.delete_if { |key, value| value.blank? }</b> to remove empty value.Here <b>hash</b> is your JSON"}], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "edited": false, "score": 0, "creation_date": 1479878971, "post_id": 40756527, "comment_id": 68738692, "body": "it works but somehow, document and its id still in the output  <code>{&quot;trigger_event&quot;:&quot;IOR&quot;,&quot;ptc&quot;:{&quot;id&quot;:&quot;409&quot;},&quot;message&quot;:&quot;could you please be faster?&quot;,&quot;document&quot;:{&quot;id&quot;:&quot;&quot;}}</code>"}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "edited": false, "score": 0, "creation_date": 1479879323, "post_id": 40756527, "comment_id": 68738803, "body": "it means the problem is in your database settings, probably you have all your fields mandatory."}, {"owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "edited": false, "score": 0, "creation_date": 1479879579, "post_id": 40756527, "comment_id": 68738883, "body": "nope, there is no validation yet.. btw document is an json object inside json. that&#39;s why it doesn&#39;t not skip this document"}], "tags": [], "owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "is_accepted": false, "score": 2, "last_activity_date": 1479878374, "last_edit_date": 1479878374, "creation_date": 1479878057, "answer_id": 40756527, "question_id": 40756202, "link": "https://stackoverflow.com/questions/40756202/rails-json-empty-blank-data-will-not-save-in-database/40756527#40756527", "title": "Rails JSON : Empty/Blank data will not save in database", "body": "<p>Well, it seems to me there are some fundamental issues here.</p>\n\n<p>First of all, a controller is not a good place to do this kind of stuff. </p>\n\n<p>Second, you should pass this logic to database wrapper, like active record or mongoid.</p>\n\n<p>Or you could do it quick and dirty:</p>\n\n<pre><code>@geo.message_notification = {\n...\n}.select{|_,v| !v.blank?}.to_json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1479882499, "creation_date": 1479882499, "answer_id": 40757497, "question_id": 40756202, "link": "https://stackoverflow.com/questions/40756202/rails-json-empty-blank-data-will-not-save-in-database/40757497#40757497", "title": "Rails JSON : Empty/Blank data will not save in database", "body": "<p>Try this solution please:</p>\n\n<pre><code>ng_geo_params = params[:ng_geo].slice(:trigger_event, :ptc, :message, :mode, :remind_interval, :document).delete_if { |k, v| v.blank? }\n# OR if you can\nng_geo_params = params.require(:ng_geo).permit(:trigger_event, :ptc, :message, :mode, :remind_interval, :document).delete_if { |k, v| v.blank? }\n\nmessage_notification_hash = {}\n\nng_geo_params.each do |k, v|\n  if k == :ptc || k == :document\n    message_notification_hash[k] = { id: v }\n  else\n    message_notification_hash[k] = v\n  end\nend\n\n@geo.message_notification = message_notification_hash.to_json\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1479882499, "creation_date": 1479876226, "question_id": 40756202, "link": "https://stackoverflow.com/questions/40756202/rails-json-empty-blank-data-will-not-save-in-database", "title": "Rails JSON : Empty/Blank data will not save in database", "body": "<p>I have this in my controller</p>\n\n<pre><code>@geo.message_notification = {\n  trigger_event: params[:ng_geo][:trigger_event],\n  ptc: {\n    id: params[:ng_geo][:ptc]\n  },\n  message: params[:ng_geo][:message],\n  mode: params[:ng_geo][:mode],\n  remind_interval: params[:ng_geo][:remind_interval],\n  document: {\n    id: params[:ng_geo][:document]\n  }\n}.to_json\n</code></pre>\n\n<p>will produce JSON:</p>\n\n<pre><code>{\n  \"trigger_event\":\"IOR\",\n  \"ptc\":\n  {\n    \"id\":\"184\"\n  },\n  \"message\":\"could you please be faster?\",\n  \"mode\":\"\",\n  \"remind_interval\":\"\",\n  \"document\":\n  {\n    \"id\":\"234\"\n  }\n}\n</code></pre>\n\n<p>As you can see in the JSON, empty data (mode &amp; remind_interval) still save in db. how to avoid this so will produce just only attr with data:</p>\n\n<pre><code>{\n  \"trigger_event\":\"IOR\",\n  \"ptc\":\n  {\n    \"id\":\"184\"\n  },\n  \"message\":\"could you please be faster?\",\n  \"document\":\n  {\n    \"id\":\"234\"\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby", "jenkins", "cucumber", "watir"], "comments": [{"owner": {"reputation": 1013, "user_id": 2181079, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/iUYXW.png?s=128&g=1", "display_name": "HamTheAstroChimp", "link": "https://stackoverflow.com/users/2181079/hamtheastrochimp"}, "edited": false, "score": 0, "creation_date": 1479901464, "post_id": 40756077, "comment_id": 68751596, "body": "Does it works when you run those commands locally on the system ? Suspecting that there is an issue with installation."}, {"owner": {"reputation": 21, "user_id": 7197929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8c1193b2a56fd8b57d5bb680a06471?s=128&d=identicon&r=PG&f=1", "display_name": "Brinda Manoharan", "link": "https://stackoverflow.com/users/7197929/brinda-manoharan"}, "reply_to_user": {"reputation": 1013, "user_id": 2181079, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/iUYXW.png?s=128&g=1", "display_name": "HamTheAstroChimp", "link": "https://stackoverflow.com/users/2181079/hamtheastrochimp"}, "edited": false, "score": 0, "creation_date": 1479964254, "post_id": 40756077, "comment_id": 68780349, "body": "when i run locally i am able to run cucumber without any error."}, {"owner": {"reputation": 1013, "user_id": 2181079, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/iUYXW.png?s=128&g=1", "display_name": "HamTheAstroChimp", "link": "https://stackoverflow.com/users/2181079/hamtheastrochimp"}, "edited": false, "score": 0, "creation_date": 1480516541, "post_id": 40756077, "comment_id": 68995752, "body": "Sorry for late reply. Is your cucumber installed location is added into <code>PATH</code> variable? How you are executing it ?possible post the required info.Why i&#39;m asking is, basically Jenkins runs all jobs under <code>jenkins</code> user privilege in a system. If jenkins user couldn&#39;t get the binary path of cucumer it will fail &amp; it will result the same what you mentioned in the question, like <code>&quot;cucumber&quot; is not recognized as an internal or external command</code>. Also check this <a href=\"http://stackoverflow.com/questions/31315181/cucumber-is-not-recognized-as-an-internal-or-external-command\">thread</a> as well, it may help."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1493122710, "post_id": 40756077, "comment_id": 74269724, "body": "Any idea if this is resolved? I am facing the same issue currently. My system runs the cucumber command perfectly but the same throws an error in jenkins, with the slave connected to my system"}], "owner": {"reputation": 21, "user_id": 7197929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8c1193b2a56fd8b57d5bb680a06471?s=128&d=identicon&r=PG&f=1", "display_name": "Brinda Manoharan", "link": "https://stackoverflow.com/users/7197929/brinda-manoharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1610375521, "creation_date": 1479875522, "last_edit_date": 1479876727, "question_id": 40756077, "link": "https://stackoverflow.com/questions/40756077/unable-to-run-cucumber-in-jenkins-through-build-step-as-execute-windows-batch-c", "title": "Unable to run cucumber in jenkins through build step as &#39;Execute windows batch command&#39;", "body": "<p>I have automation framework using cucumber, watir and ruby.  I wanted to run cucumber tags through Jenkins using build step as 'Execute windows batch command'.\nBelow are the steps I have followed,  </p>\n\n<ol>\n<li>In Jenkins, Created a new job item as 'Freestyle project' </li>\n<li>In build step, I have selected the step as 'Execute windows batch command'</li>\n</ol>\n\n<p>I have given the path of the project location</p>\n\n<pre><code>cd C:\\Users\\testsample\n\ncucumber -t @testtag -f pretty -f json -o reports/test_result.json\n</code></pre>\n\n<p>Then finally I did build now for the above job</p>\n\n<p>Below is the error console.  Can someone pls help</p>\n\n<blockquote>\n  <p><strong>C:\\Users\\testsample>cucumber -t @testtag -f pretty -f json -o reports/test_result.json 'cucumber' is not recognized as an internal\n  or external command, operable program or batch file.</strong></p>\n</blockquote>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479877859, "post_id": 40755984, "comment_id": 68738343, "body": "the error seems to be coming from a /tasks/new script, can you show that if it exists?"}], "answers": [{"tags": [], "owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1479906782, "creation_date": 1479906782, "answer_id": 40765509, "question_id": 40755984, "link": "https://stackoverflow.com/questions/40755984/uncaught-error-syntax-error-unrecognized-expression-ruby-on-rails/40765509#40765509", "title": "Uncaught Error: Syntax error, unrecognized expression + Ruby on Rails", "body": "<p>The problem seems to be in the script you're using. I believe the <code>/secure/projects/softilluminations/tasks/new</code> part is not surrounded by quotes, so it's considered an expression instead of a string.</p>\n"}, {"tags": [], "owner": {"reputation": 5772, "user_id": 1562574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b2213bb9127f969d58a83ee828bcb1b?s=128&d=identicon&r=PG", "display_name": "Dipak Panchal", "link": "https://stackoverflow.com/users/1562574/dipak-panchal"}, "is_accepted": false, "score": 0, "last_activity_date": 1479919058, "creation_date": 1479919058, "answer_id": 40769813, "question_id": 40755984, "link": "https://stackoverflow.com/questions/40755984/uncaught-error-syntax-error-unrecognized-expression-ruby-on-rails/40769813#40769813", "title": "Uncaught Error: Syntax error, unrecognized expression + Ruby on Rails", "body": "<p>I got solution...</p>\n\n<pre><code>&lt;%= link_to 'Create Task', new_secure_project_task_path(project), class: 'btn btn-primary btn-block', data: {disable_with: loader, remote: true } %&gt;\n</code></pre>\n\n<p>The above is the correct. Actually i send ajax request so no need to add <code>toggle: 'modal'</code> in data. So that it's comming error.</p>\n"}], "owner": {"reputation": 5772, "user_id": 1562574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b2213bb9127f969d58a83ee828bcb1b?s=128&d=identicon&r=PG", "display_name": "Dipak Panchal", "link": "https://stackoverflow.com/users/1562574/dipak-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 854, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479919058, "creation_date": 1479874947, "question_id": 40755984, "link": "https://stackoverflow.com/questions/40755984/uncaught-error-syntax-error-unrecognized-expression-ruby-on-rails", "title": "Uncaught Error: Syntax error, unrecognized expression + Ruby on Rails", "body": "<pre><code>Uncaught Error: Syntax error, unrecognized expression: /secure/projects/softilluminations/tasks/new\n</code></pre>\n\n<p>Getting above error on console of broswer.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fS811.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fS811.png\" alt=\"enter image description here\"></a></p>\n\n<p>My View side code is below</p>\n\n<pre><code>&lt;%= link_to 'Create Task', new_secure_project_task_path(project), class: 'btn btn-primary btn-block', data: {toggle: 'modal', disable_with: loader, remote: true } %&gt;\n</code></pre>\n\n<p>On click of link, my modal popup open and functionality working fine but I don't know why syntax error comes in the console.</p>\n\n<p>Thank You. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "favorites"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479878062, "post_id": 40755979, "comment_id": 68738404, "body": "can you show the stack trace for the error?"}, {"owner": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479878752, "post_id": 40755979, "comment_id": 68738611, "body": "Added trace as well as log if that could possibly help as well. @maxpleaner"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479879018, "post_id": 40755979, "comment_id": 68738707, "body": "It doesn&#39;t look like your Recipe class is really an ApplicationRecord model. Maybe that HTTParty stuff can be extracted into a separate class. Other than that I&#39;m not sure."}, {"owner": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479879372, "post_id": 40755979, "comment_id": 68738820, "body": "From what I understand HTTParty is needed to be included directly within the Recipe class to consume the API, so I&#39;m not sure how I could separate them. How would I go about extracting it into a separate class to test if that would work? @maxpleaner"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "edited": false, "score": 0, "creation_date": 1479879884, "post_id": 40756784, "comment_id": 68739010, "body": "This is the error I now have after making these changes: undefined method `has_many&#39; for Recipe:Class @Hong"}, {"owner": {"reputation": 162, "user_id": 7180440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddca44e10b633fa8610ae75ea58c2a65?s=128&d=identicon&r=PG&f=1", "display_name": "Hong", "link": "https://stackoverflow.com/users/7180440/hong"}, "reply_to_user": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "edited": false, "score": 0, "creation_date": 1479880754, "post_id": 40756784, "comment_id": 68739310, "body": "They were function signatures, not meant exactly for your use case, but I&#39;ve tweaked it a bit to accommodate the fact that Recipe is an HTTParty class. The general idea here is <code>Favorites#belongs_to :user</code> and has a reference to the recipe&#39;s id somehow. And that&#39;s what you use to associate the two together."}], "tags": [], "owner": {"reputation": 162, "user_id": 7180440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddca44e10b633fa8610ae75ea58c2a65?s=128&d=identicon&r=PG&f=1", "display_name": "Hong", "link": "https://stackoverflow.com/users/7180440/hong"}, "is_accepted": false, "score": 0, "last_activity_date": 1479880567, "last_edit_date": 1479880567, "creation_date": 1479879240, "answer_id": 40756784, "question_id": 40755979, "link": "https://stackoverflow.com/questions/40755979/adding-user-favorites-in-rails/40756784#40756784", "title": "Adding User Favorites in Rails", "body": "<p>For basic use, this is done with a <code>has_and_belongs_to_many</code> relationship. See:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association</a></p>\n\n<p>If you want more information on the Favorite model than just the fact that a User favorited a Recipe, you can break it out into its own class.</p>\n\n<p>(WARNING: typed from scratch, has not been tested...but the idea is there)</p>\n\n<pre><code>class Favorite\n  belongs_to :user\n  # has a recipe_id field that's linked to the id of Recipe on Food2Fork API\n\n  def recipe\n    #... code to get a recipe from id ...\n  end\nend\n\nclass User\n  has_many :favorites\n\n  def favorite!(recipe)\n    self.favorites.create(:recipe_id =&gt; recipe.id)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "edited": false, "score": 0, "creation_date": 1479921831, "post_id": 40759477, "comment_id": 68765200, "body": "that is actually what I was following, I did everything in that tutorial step by step."}], "tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1479890230, "creation_date": 1479890230, "answer_id": 40759477, "question_id": 40755979, "link": "https://stackoverflow.com/questions/40755979/adding-user-favorites-in-rails/40759477#40759477", "title": "Adding User Favorites in Rails", "body": "<p>I followed <a href=\"http://schmidt-happens.com/articles/2014/06/04/favoriting-system-in-rails.html\" rel=\"nofollow noreferrer\">this</a> tutorial and got a favouriting system set up in my app with ease. You can use the following implemntaion and set it up in your app. </p>\n"}], "owner": {"reputation": 39, "user_id": 4493111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I848g.jpg?s=128&g=1", "display_name": "crackedact0r", "link": "https://stackoverflow.com/users/4493111/crackedact0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1068, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479894818, "creation_date": 1479874906, "last_edit_date": 1479894818, "question_id": 40755979, "link": "https://stackoverflow.com/questions/40755979/adding-user-favorites-in-rails", "title": "Adding User Favorites in Rails", "body": "<p>I am working on a Rails application that allows users to search for and browse recipes, using the <a href=\"http://food2fork.com/about/api\" rel=\"nofollow noreferrer\">Food2Fork API</a>. </p>\n\n<p>Versions:\nRails 5.0.0.1, ruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]</p>\n\n<p>I have a User model, Recipe model, and Favorites model. I am trying to allow for users who are logged in to favorite recipes they find. To be clear, both search and browse work with the recipes, as well as the logging in/logging out with users, so I know it's not an issue with the users themselves or accessing the API.</p>\n\n<p>When trying to implement this favoriting system, I am getting the following error when I open the view (code is at the bottom):</p>\n\n<pre><code>undefined method `relation_delegate_class' for Recipe:Class\n</code></pre>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n    has_secure_password \n\n    has_many :favorites\n    has_many :favorite_recipes, through: :favorites, source: :favorited, source_type: 'Recipe'\n\nend\n</code></pre>\n\n<p>Recipe model:</p>\n\n<pre><code>require 'httparty'\n\nclass Recipe\ninclude HTTParty\n\n#define API base URL and key for project\nENV['FOOD2FORK_API_KEY'] = 'api_key_here' # (this was edited so I don't make my key public)\nbase_uri 'http://food2fork.com/api'\ndefault_params key: ENV['FOOD2FORK_API_KEY']\nformat :json\n\n#search method\ndef self.for term        \n    get('/search', query: { q: term }) [\"recipes\"]\nend\n\n#show method\ndef self.find term\n    get('/get', query: { rId: term }) [\"recipe\"]\nend\n\ndef self.browse term\n    get('/browse', query: { q: term }) [\"recipes\"]#random number\nend\n\nend\n</code></pre>\n\n<p>Favorite model:</p>\n\n<pre><code>class Favorite &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :favorited, polymorphic: true\n end\n</code></pre>\n\n<p>User controller:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def new\n  @user = User.new\nend\n\ndef create \n  @user = User.new(user_params) \n  if @user.save\n    session[:user_id] = @user.id \n    redirect_to '/home' \n  else \n    redirect_to '/register' \n  end \nend\n\nprivate\n  def user_params\n    params.require(:user).permit(:username, :email, :password, :location, :fname, :lname)\n  end\n\nend\n</code></pre>\n\n<p>Recipe controller:</p>\n\n<pre><code>class RecipesController &lt; ApplicationController\n  def search\n    @search_term = params[:ingredient]\n    @recipes = Recipe.for(@search_term)\n  end\n\n  def show\n    @id_r = params[:id]\n    @recipe = Recipe.find(@id_r)\n  end\n\n  def browse\n    @rand_num = params[:random]\n    @rand_recipes = Recipe.for(@rand_num)\n  end\n\nend\n</code></pre>\n\n<p>Favorite controller:</p>\n\n<pre><code>class FavoriteRecipesController &lt; ApplicationController\n     before_action :set_recipe\n\n  def create\n    if Favorite.create(favorited: @recipe, user: current_user)\n      redirect_to @recipe, notice: 'Recipe favorited'\n    else\n      redirect_to @recipe, alert: 'Something went wrong.'\n    end\n  end\n\n  def destroy\n    Favorite.where(favorited_id: @recipe.rId, user_id: current_user.id).first.destroy\n    redirect_to @recipe, notice: 'Recipe unfavorited.'\n  end\n\n  private\n\n  def set_recipe\n    @recipe = Recipe.find(params[:recipe_id] || params[:id])\n  end\nend\n</code></pre>\n\n<p>Database schema:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20161123033852) do\n\n  create_table \"favorite_recipes\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.integer  \"recipe_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"favorites\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.integer  \"user_id\"\n    t.string   \"favorited_type\"\n    t.integer  \"favorited_id\"\n    t.datetime \"created_at\",     null: false\n    t.datetime \"updated_at\",     null: false\n    t.index [\"favorited_type\", \"favorited_id\"], name: \"index_favorites_on_favorited_type_and_favorited_id\", using: :btree\n    t.index [\"user_id\"], name: \"index_favorites_on_user_id\", using: :btree\n  end\n\n  create_table \"users\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"username\"\n    t.string   \"email\"\n    t.string   \"password_digest\"\n    t.decimal  \"location\",        precision: 10\n    t.string   \"fname\"\n    t.string   \"lname\"\n    t.datetime \"created_at\",                     null: false\n    t.datetime \"updated_at\",                     null: false\n  end\n\n  add_foreign_key \"favorites\", \"users\"\nend\n</code></pre>\n\n<p>And finally, the view, in recipes/show.html:</p>\n\n<pre><code> &lt;% this_recipe = @recipe %&gt;\n &lt;div class=\"container\"&gt;\n    &lt;div class=\"navbar-header\"&gt;\n      &lt;button type=\"button\" class=\"navbar-toggle\"&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n      &lt;/button&gt;\n\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;div class=\"container-fluid bg-grey\" style=\"text-align:center\"&gt;\n&lt;h1&gt;&lt;%= this_recipe[\"title\"] %&gt;&lt;/strong&gt;&lt;/h1&gt;\n&lt;% if (this_recipe.nil? or this_recipe == []) %&gt;\n&lt;p&gt; &lt;h2&gt;&lt;strong&gt;Sorry&lt;/b&gt;, that recipe doesn't exist.&lt;/h2&gt;&lt;/p&gt;\n&lt;% else %&gt;\n&lt;center&gt;&lt;div class=\"recipebox\" style=\"padding:20px;margin:10px; border:1px solid orange; background:white;width:75%\"&gt;\n    &lt;div class=\"row\"&gt;\n&lt;div class=\"col-md-6\"&gt;\n    &lt;p&gt;&lt;%= link_to(image_tag(this_recipe[\"image_url\"], height: '400', width: '400'), this_recipe[\"source_url\"])%&gt;&lt;br/&gt;\n(&lt;%= link_to(\"View Recipe Source\", this_recipe[\"source_url\"]) %&gt;)&lt;/p&gt;\n&lt;/div&gt;\n&lt;div class=\"col-md-6\"&gt;\n&lt;h2&gt;Ingredients:&lt;/h2&gt;\n&lt;% ingredients = this_recipe[\"ingredients\"] %&gt;\n &lt;% ingredients.each do |i| %&gt;\n &amp;#0149; &lt;%= i %&gt; &lt;br/&gt;\n &lt;% end %&gt;\n\n&lt;p&gt;\n&lt;%- unless current_user.favorite_recipes.exists?(id: @recipe.rId) -%&gt;\n&lt;%= link_to 'Add to favorites', favorite_recipes_path(recipe_id: @project), method: :post %&gt;\n&lt;%- else -%&gt;\n&lt;%= link_to 'Remove from favorites', favorite_recipe_path(@recipe), method: :delete %&gt;\n&lt;%- end -%&gt;\n\n&lt;/div&gt;\n\n\n &lt;% end %&gt;\n&lt;/center&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>I am unsure if I am not associating the models correctly, I'm not passing the information correctly, or what exactly is causing this error. Thank you for any help with figuring this out.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Trace:</p>\n\n<pre><code>activerecord (5.0.0.1) lib/active_record/relation/delegation.rb:106:in `relation_class_for'\nactiverecord (5.0.0.1) lib/active_record/relation/delegation.rb:100:in `create'\nactiverecord (5.0.0.1) lib/active_record/associations/collection_association.rb:47:in `reader'\nactiverecord (5.0.0.1) lib/active_record/associations/builder/association.rb:111:in `favorite_recipes'\napp/views/recipes/show.html.erb:32:in `_app_views_recipes_show_html_erb___356804060_113751160'\nactionview (5.0.0.1) lib/action_view/template.rb:158:in `block in render'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:166:in `instrument'\nactionview (5.0.0.1) lib/action_view/template.rb:348:in `instrument'\nactionview (5.0.0.1) lib/action_view/template.rb:156:in `render'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'\nactionview (5.0.0.1) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `instrument'\nactionview (5.0.0.1) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'\n</code></pre>\n\n<p>Log:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `relation_delegate_class' for Recipe:Class):\n    29:  &lt;% end %&gt;\n    30:\n    31: &lt;p&gt;\n    32: &lt;%- unless current_user.favorite_recipes.exists?(id: @recipe.rId) -%&gt;\n    33: &lt;%= link_to 'Add to favorites', favorite_recipes_path(recipe_id: @recipe), method: :post %&gt;\n    34: &lt;%- else -%&gt;\n    35: &lt;%= link_to 'Remove from favorites', favorite_recipe_path(@recipe), method: :delete %&gt;\n\napp/views/recipes/show.html.erb:32:in `_app_views_recipes_show_html_erb___356804060_113751160'\n  Rendering C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout\n  Rendering C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb\n  Rendered C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (6.0ms)\n  Rendering C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)\n  Rendering C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)\n  Rendered C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (1241.0ms)\n</code></pre>\n"}, {"tags": ["ruby", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 4009384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXiT0.jpg?s=128&g=1", "display_name": "David Runger", "link": "https://stackoverflow.com/users/4009384/david-runger"}, "is_accepted": true, "score": 13, "last_activity_date": 1479873178, "creation_date": 1479873178, "answer_id": 40755724, "question_id": 40755631, "link": "https://stackoverflow.com/questions/40755631/convert-a-nested-array-to-a-matrix-in-ruby/40755724#40755724", "title": "Convert a nested array to a matrix in Ruby?", "body": "<pre><code>matrix2 = Matrix[*nested_array]\np matrix2\n=&gt; Matrix[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n\n<p>The asterisk (<code>*</code>) there is called the \"splat operator,\" and it essentially can be used to treat an array (<code>nested_array</code> in this case) as if it weren't an array, but rather as if its elements were individual elements/arguments.</p>\n"}], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2026, "favorite_count": 1, "accepted_answer_id": 40755724, "answer_count": 1, "score": 7, "last_activity_date": 1479878658, "creation_date": 1479872532, "last_edit_date": 1479878658, "question_id": 40755631, "link": "https://stackoverflow.com/questions/40755631/convert-a-nested-array-to-a-matrix-in-ruby", "title": "Convert a nested array to a matrix in Ruby?", "body": "<p>When converting a nested array to a matrix in Ruby, the matrix ends up with an extra <code>[]</code> around the values, compared to simply creating a matrix from scratch.</p>\n\n<pre><code>&gt; require 'matrix'\n\n&gt; matrix1 = Matrix[[1,2,3],[4,5,6],[7,8,9]]\n&gt; p matrix1\n</code></pre>\n\n<blockquote>\n  <p>=> Matrix[[1, 2, 3], [4, 5, 6], [7, 8, 9]]</p>\n</blockquote>\n\n<pre><code>&gt; nested_array = [[1,2,3],[4,5,6],[7,8,9]]\n&gt; matrix2 = Matrix[nested_array]\n&gt; p matrix2\n</code></pre>\n\n<blockquote>\n  <p>=> Matrix[[[1, 2, 3], [4, 5, 6], [7, 8, 9]]]</p>\n</blockquote>\n\n<p>Is there a way to avoid the extra square brackets when building from an array?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479877600, "post_id": 40755537, "comment_id": 68738276, "body": "Having only a &quot;Ruby&quot; tag implies you want a pure Ruby solution. If a Rails solution is acceptable, your should add a Rails tag."}], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1479872427, "post_id": 40755569, "comment_id": 68736887, "body": "Not without some finagling, you wouldn&#39;t, because both <code>:b, :c, :d</code> and <code>:b, :c, :d, :e</code> return an empty set, which doesn&#39;t trivially meet the requirements."}, {"owner": {"reputation": 107, "user_id": 6118400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12e9e934ccb50adc2e29b8b75d0e3c13?s=128&d=identicon&r=PG&f=1", "display_name": "Kepoor Hampond", "link": "https://stackoverflow.com/users/6118400/kepoor-hampond"}, "edited": false, "score": 0, "creation_date": 1479872856, "post_id": 40755569, "comment_id": 68736993, "body": "This worked well for my purposes and seems to answer my question, thanks."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 107, "user_id": 6118400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12e9e934ccb50adc2e29b8b75d0e3c13?s=128&d=identicon&r=PG&f=1", "display_name": "Kepoor Hampond", "link": "https://stackoverflow.com/users/6118400/kepoor-hampond"}, "edited": false, "score": 1, "creation_date": 1479872964, "post_id": 40755569, "comment_id": 68737018, "body": "@KepoorHampond How? You get the same result for <code>:b, :c, :d</code> and <code>:b, :c, :d, :e</code>, which runs counter to your stated requirements, which requires different results."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1479878971, "post_id": 40755569, "comment_id": 68738691, "body": "@DaveNewton, I am equally puzzled by the OP&#39;s reply to your comment."}], "tags": [], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "is_accepted": true, "score": 2, "last_activity_date": 1479872648, "last_edit_date": 1479872648, "creation_date": 1479872102, "answer_id": 40755569, "question_id": 40755537, "link": "https://stackoverflow.com/questions/40755537/how-to-tell-if-there-are-other-keys-in-a-hash-other-than-specified-ones/40755569#40755569", "title": "How to tell if there are other keys in a hash other than specified ones?", "body": "<p><a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-except\" rel=\"nofollow noreferrer\">Rails has an except/except! method</a> that returns the hash with those keys removed. If you're already using Rails, You can use it</p>\n\n<pre><code>class Hash\n  # Returns a hash that includes everything but the given keys.\n  #   hash = { a: true, b: false, c: nil}\n  #   hash.except(:c) # =&gt; { a: true, b: false}\n  #   hash # =&gt; { a: true, b: false, c: nil}\n  #\n  # This is useful for limiting a set of parameters to everything but a few known toggles:\n  #   @person.update(params[:person].except(:admin))\n  def except(*keys)\n    dup.except!(*keys)\n  end\n\n  # Replaces the hash without the given keys.\n  #   hash = { a: true, b: false, c: nil}\n  #   hash.except!(:c) # =&gt; { a: true, b: false}\n  #   hash # =&gt; { a: true, b: false }\n  def except!(*keys)\n    keys.each { |key| delete(key) }\n    self\n  end\nend\n</code></pre>\n\n<p>Using above you can do:</p>\n\n<pre><code>bundle :002 &gt;    a = {b: \"asdfgh\", c: \"qwerty\", d: \"dvorak\"}\n =&gt; {:b=&gt;\"asdfgh\", :c=&gt;\"qwerty\", :d=&gt;\"dvorak\"}\nbundle :006 &gt;  a.except(:b)\n =&gt; {:c=&gt;\"qwerty\", :d=&gt;\"dvorak\"}\nbundle :007 &gt;  a.except(:b).length\n =&gt; 2\nbundle :008 &gt;  a.except(:b, :c, :d, :e).length\n =&gt; 0\n</code></pre>\n\n<hr>\n\n<p>In plain Ruby, You can do something like following:</p>\n\n<pre><code>2.2.2 :010 &gt;  a.select{|x| ![:b, :c, :d, :e].include?(x)}\n =&gt; {}\n2.2.2 :011 &gt;  a.select{|x| ![:b, :c, :d, :e].include?(x)}.length\n =&gt; 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1479872492, "post_id": 40755587, "comment_id": 68736905, "body": "This returns <code>false</code> for the final requirement."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1479872762, "post_id": 40755587, "comment_id": 68736961, "body": "@DaveNewton: Ah, sorry, misread it. (Am I still misreading it? Seems like it could have been phrased much more simply if this is really what was needed.)"}, {"owner": {"reputation": 107, "user_id": 6118400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12e9e934ccb50adc2e29b8b75d0e3c13?s=128&d=identicon&r=PG&f=1", "display_name": "Kepoor Hampond", "link": "https://stackoverflow.com/users/6118400/kepoor-hampond"}, "edited": false, "score": 0, "creation_date": 1479872911, "post_id": 40755587, "comment_id": 68737007, "body": "@Ryan Yeah, I kept overthinking the problem and this is what I was able to work it down to, sorry."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1479873009, "post_id": 40755587, "comment_id": 68737034, "body": "I found it confusing because to me it seems illogical--maybe I&#39;m the one misreading it. Now OP is saying getting the same results from querying against <code>:b, :c, :d</code> and <code>:b, :c, :d, :e</code> is okay, so I give up."}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 1, "last_activity_date": 1479872696, "last_edit_date": 1479872696, "creation_date": 1479872243, "answer_id": 40755587, "question_id": 40755537, "link": "https://stackoverflow.com/questions/40755537/how-to-tell-if-there-are-other-keys-in-a-hash-other-than-specified-ones/40755587#40755587", "title": "How to tell if there are other keys in a hash other than specified ones?", "body": "<p>You can check whether sets constructed from the keys are the same:</p>\n\n<pre><code>require 'set'\n\nclass Hash\n    def has_other_keys?(*keys)\n        Set.new(keys) != Set.new(self.keys)\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1479919555, "last_edit_date": 1479919555, "creation_date": 1479876837, "answer_id": 40756318, "question_id": 40755537, "link": "https://stackoverflow.com/questions/40755537/how-to-tell-if-there-are-other-keys-in-a-hash-other-than-specified-ones/40756318#40756318", "title": "How to tell if there are other keys in a hash other than specified ones?", "body": "<pre><code>def subset_of_keys?(h, other_keys)\n  (other_keys - h.keys).empty?\nend\n\nh  = { b: \"asdfgh\", c: \"qwerty\", d: \"dvorak\"}\n\nsubset_of_keys? h, [:d, :b]\n  #=&gt; true\nsubset_of_keys? h, [:b, :w, :d]\n  #=&gt; false\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-2D\" rel=\"nofollow noreferrer\">Array#-</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 2, "last_activity_date": 1479881266, "last_edit_date": 1479881266, "creation_date": 1479878556, "answer_id": 40756631, "question_id": 40755537, "link": "https://stackoverflow.com/questions/40755537/how-to-tell-if-there-are-other-keys-in-a-hash-other-than-specified-ones/40756631#40756631", "title": "How to tell if there are other keys in a hash other than specified ones?", "body": "<p>EDIT: I just noticed Cary Swoveland's answer uses this same technique. His answer was here first.</p>\n\n<p>If this doesn't have to be a high performance solution, you might consider using Array arithmetics (which a nice Ruby feature).</p>\n\n<p>For example: </p>\n\n<p>Your hash:</p>\n\n<pre><code>a = {b: \"asdfgh\", c: \"qwerty\", d: \"dvorak\"}\n</code></pre>\n\n<p>And our known keys:</p>\n\n<pre><code>known_keys = [:b, :c]\n</code></pre>\n\n<p>The rest of the keys:</p>\n\n<pre><code>other_keys = a.keys - known_keys\nother_keys.empty?\n</code></pre>\n\n<p>For a <code>true</code>/<code>false</code> statement, we can do something like this:</p>\n\n<pre><code>(a.keys - [:b, :c]).empty?\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6118400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12e9e934ccb50adc2e29b8b75d0e3c13?s=128&d=identicon&r=PG&f=1", "display_name": "Kepoor Hampond", "link": "https://stackoverflow.com/users/6118400/kepoor-hampond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 40755569, "answer_count": 4, "score": 2, "last_activity_date": 1479919555, "creation_date": 1479871808, "question_id": 40755537, "link": "https://stackoverflow.com/questions/40755537/how-to-tell-if-there-are-other-keys-in-a-hash-other-than-specified-ones", "title": "How to tell if there are other keys in a hash other than specified ones?", "body": "<p>Say I have a hash:</p>\n\n<pre><code>a = {b: \"asdfgh\", c: \"qwerty\", d: \"dvorak\"}\n</code></pre>\n\n<p>And I want to be able to tell if there are keys other than the ones I specify in it, something like this:</p>\n\n<pre><code>a.has_other_keys?(:b, :c, :d)\n=&gt; false\na.has_other_keys?(:c, :d)\n=&gt; true\n</code></pre>\n\n<p>But I don't want it to return false if there are LESS keys than specified:</p>\n\n<pre><code>a.has_other_keys?(:b, :c, :d, :e)\n=&gt; true\n</code></pre>\n\n<p>Is there an easy way to do this in ruby?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3867285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/588026173/picture?type=large", "display_name": "Rob Nicholas", "link": "https://stackoverflow.com/users/3867285/rob-nicholas"}, "edited": false, "score": 0, "creation_date": 1479879801, "post_id": 40756638, "comment_id": 68738974, "body": "Thanks for the reply! This would work but this is currently a ruby exclusive application. I may at some point use rails however at the moment I&#39;m looking for a way to do this with just ruby"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 53, "user_id": 3867285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/588026173/picture?type=large", "display_name": "Rob Nicholas", "link": "https://stackoverflow.com/users/3867285/rob-nicholas"}, "edited": false, "score": 0, "creation_date": 1479879938, "post_id": 40756638, "comment_id": 68739029, "body": "@RobertNicholas It seems I wrongly assumed you&#39;d be using Rails. Sinatra is more &#39;lightweight&#39; framework that you can basically use this exact same syntax in. It&#39;s hard to find a more minimalist way to do it in Ruby."}, {"owner": {"reputation": 53, "user_id": 3867285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/588026173/picture?type=large", "display_name": "Rob Nicholas", "link": "https://stackoverflow.com/users/3867285/rob-nicholas"}, "edited": false, "score": 0, "creation_date": 1479880978, "post_id": 40756638, "comment_id": 68739381, "body": "Cheers! I&#39;ll give this a look, still open to any other suggestions if anyone does know of a ruby way with no libraries"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1479879248, "last_edit_date": 1495541318, "creation_date": 1479878590, "answer_id": 40756638, "question_id": 40755507, "link": "https://stackoverflow.com/questions/40755507/how-can-i-find-the-content-between-multiple-parameter-strings-e-g-contact-gro/40756638#40756638", "title": "How can I find the content between multiple parameter strings (E.G. /contact-group/{ID}/member/{CONTACT-ID})", "body": "<p>Seems like you're looking for a basic example of routing:</p>\n\n<pre><code># in config/routes.rb\nget \"/:param_1/:param_2\", to: \"MyController#some_action\"\n</code></pre>\n\n<p>Then in the controller you'd be able to get <code>params[:param_1]</code> and such. </p>\n\n<p>You can see <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails' routing guide</a> for more info</p>\n\n<p>Maybe I'm not totally understanding your question, though. If you're looking to be able to capture a <em>variable number</em> of params, there's a special syntax for passing arrays in the query param. </p>\n\n<p>See this: <a href=\"https://stackoverflow.com/questions/11312930/passing-array-of-parameters-through-get-in-rails\">Passing array of parameters through get in rails</a> </p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 3867285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/588026173/picture?type=large", "display_name": "Rob Nicholas", "link": "https://stackoverflow.com/users/3867285/rob-nicholas"}, "is_accepted": true, "score": 0, "last_activity_date": 1479939219, "creation_date": 1479939219, "answer_id": 40775011, "question_id": 40755507, "link": "https://stackoverflow.com/questions/40755507/how-can-i-find-the-content-between-multiple-parameter-strings-e-g-contact-gro/40775011#40775011", "title": "How can I find the content between multiple parameter strings (E.G. /contact-group/{ID}/member/{CONTACT-ID})", "body": "<p>The answer to this was <a href=\"https://www.reddit.com/r/ruby/comments/5ef9jh/how_to_best_parse_urluri_parameters/dac5z5w/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Basically using parameterset = url.scan(/{.+?}/) (replace url with your string name), and what's in scan with your parameter list, I can use this to do \nparameterset.each { |x| x.... etc}</p>\n"}], "owner": {"reputation": 53, "user_id": 3867285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/588026173/picture?type=large", "display_name": "Rob Nicholas", "link": "https://stackoverflow.com/users/3867285/rob-nicholas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40775011, "answer_count": 2, "score": 1, "last_activity_date": 1479939219, "creation_date": 1479871663, "question_id": 40755507, "link": "https://stackoverflow.com/questions/40755507/how-can-i-find-the-content-between-multiple-parameter-strings-e-g-contact-gro", "title": "How can I find the content between multiple parameter strings (E.G. /contact-group/{ID}/member/{CONTACT-ID})", "body": "<p>I had searched around but couldn't find something for it specifically. I was looking for a way to find the content of a URL (In this case these are URIs in a rest API) </p>\n\n<p>A few examples of these look like:\n/currency/{currency-id}\nOr\n/contact-group/{ID}/member/{CONTACT-ID}</p>\n\n<p>The parameters always can be different, however they always are between {}, in different forms within the string. I know how I can replace these when there is only one in the URI without issue, but at runtime the programmer won't know these, and I'm trying to prevent having to define them and because of this when URIs contain multiple parameters I'm not sure how to obtain each case of them.</p>\n\n<p>Happy for any ideas on how to get around this!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479879676, "post_id": 40755274, "comment_id": 68738916, "body": "Where is this <code>my_method</code> placed? and where do you call it from?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1479881421, "creation_date": 1479881421, "answer_id": 40757245, "question_id": 40755274, "link": "https://stackoverflow.com/questions/40755274/passing-create-inside-of-method-rspec/40757245#40757245", "title": "Passing create inside of method rspec", "body": "<p>There is no magic. Instead of:</p>\n\n<pre><code>expect(my_method).to have(1).record\n</code></pre>\n\n<p>you should explicitly call the method (I assume it\u2019s a class method of <code>Question</code>) and then check <code>Question</code> for having records. Methods do not have records for obvious reason:</p>\n\n<pre><code>Question.my_method\nexpect(Question).to have(1).record\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 6457869, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MwLhg.jpg?s=128&g=1", "display_name": "borderline", "link": "https://stackoverflow.com/users/6457869/borderline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 40757245, "answer_count": 1, "score": 0, "last_activity_date": 1479881421, "creation_date": 1479869830, "question_id": 40755274, "link": "https://stackoverflow.com/questions/40755274/passing-create-inside-of-method-rspec", "title": "Passing create inside of method rspec", "body": "<p>In controller you can pass create by the code below:</p>\n\n<pre><code>expect {\n          post :create, params: {question: valid_attributes}, session: valid_session\n        }.to change(Question, :count).by(1)\n</code></pre>\n\n<p>What if the create is inside of a method? I have a method that behaves find or create. And it will return the <code>id</code>.</p>\n\n<pre><code>def my_method(id='')\n  if id.blank?\n    question = Question.create(content: \"The content.\")\n  else\n    question = Question.find(id)\n  end\n\n  question.id\nend\n</code></pre>\n\n<p>I do the Rspec like this:</p>\n\n<pre><code>it \"should create for non existence of id\" do\n  expect(my_method).to have(1).record\nend\n\nit \"should return object base on id\" do\n  expect(assigns(:question)).to eq(question)\nend\n</code></pre>\n\n<p>But it gives me this error:</p>\n\n<pre><code> NoMethodError:\n       undefined method `have' for #&lt;RSpec::ExampleGroups::ClassNameHere:0x00000008543a50&gt;\n</code></pre>\n\n<p>Can someone help? Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 7177192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/43ea154b4983c010bdf468c99b3fd609?s=128&d=identicon&r=PG&f=1", "display_name": "alexandros84", "link": "https://stackoverflow.com/users/7177192/alexandros84"}, "edited": false, "score": 0, "creation_date": 1479897543, "post_id": 40754993, "comment_id": 68748645, "body": "Good answer but the hashes I gave in the example are just an example! Their structure is the way it is just for the sake of simplicity. Thanks a lot anyway."}], "tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1479867764, "creation_date": 1479867764, "answer_id": 40754993, "question_id": 40754965, "link": "https://stackoverflow.com/questions/40754965/can-i-have-a-ruby-block-inside-another-ruby-block/40754993#40754993", "title": "Can I have a ruby block inside another ruby block?", "body": "<p>Why don't you do this</p>\n\n<pre><code>h = {}\nrng.each{|i| h[i] = ary.map{|j| j + i}}\n</code></pre>\n\n<p>That should work where <code>rng</code> is the range and <code>ary</code> is the array. </p>\n\n<p>For example</p>\n\n<pre><code>h = {}\n(1..5).each{|i| h[i] = [1,2,3,4,5].map{|j| j+i}}\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>h = {1=&gt;[2, 3, 4, 5, 6], 2=&gt;[3, 4, 5, 6, 7], 3=&gt;[4, 5, 6, 7, 8], 4=&gt;[5, 6, 7, 8, 9], 5=&gt;[6, 7, 8, 9, 10]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 7177192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/43ea154b4983c010bdf468c99b3fd609?s=128&d=identicon&r=PG&f=1", "display_name": "alexandros84", "link": "https://stackoverflow.com/users/7177192/alexandros84"}, "edited": false, "score": 0, "creation_date": 1479897106, "post_id": 40755001, "comment_id": 68748330, "body": "Hey that works! But can you really have a block inside another block? I ve started writing this yesterday before posting on stack, but I ve got a text editor warning about shadowing statements and got me spooked. To be honest I am kinda surprised to the downvote.. I ve seen much more beginner questions on stack overflow.. Anyway, thanks."}, {"owner": {"reputation": 293, "user_id": 7177192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/43ea154b4983c010bdf468c99b3fd609?s=128&d=identicon&r=PG&f=1", "display_name": "alexandros84", "link": "https://stackoverflow.com/users/7177192/alexandros84"}, "edited": false, "score": 0, "creation_date": 1479901095, "post_id": 40755001, "comment_id": 68751324, "body": "Hey I didnt know this as well!"}], "tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1479867859, "creation_date": 1479867859, "answer_id": 40755001, "question_id": 40754965, "link": "https://stackoverflow.com/questions/40754965/can-i-have-a-ruby-block-inside-another-ruby-block/40755001#40755001", "title": "Can I have a ruby block inside another ruby block?", "body": "<p>Assuming these initial conditions:</p>\n\n<pre><code>h = {1=&gt;nil, 2=&gt;nil, 3=&gt;nil, 4=&gt;nil, 5=&gt;nil}\narr = [1,2,3,4,5]\n</code></pre>\n\n<p>...it's pretty straightforward:</p>\n\n<pre><code>h.keys.each do |key|\n  h[key] = arr.map {|i| i+key}\nend\n# h is now: {1=&gt;[2, 3, 4, 5, 6], 2=&gt;[3, 4, 5, 6, 7], 3=&gt;[4, 5, 6, 7, 8], 4=&gt;[5, 6, 7, 8, 9], 5=&gt;[6, 7, 8, 9, 10]}\n</code></pre>\n\n<p>(However, it may be that your question is about <em>achieving</em> the initial conditions. If so, I didn't grasp that, and I didn't worry about it; I just started with what I took to <em>be</em> your initial conditions and ended up with your desired result.)</p>\n"}], "owner": {"reputation": 293, "user_id": 7177192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/43ea154b4983c010bdf468c99b3fd609?s=128&d=identicon&r=PG&f=1", "display_name": "alexandros84", "link": "https://stackoverflow.com/users/7177192/alexandros84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 40755001, "answer_count": 2, "score": -4, "last_activity_date": 1484250299, "creation_date": 1479867495, "last_edit_date": 1484250299, "question_id": 40754965, "link": "https://stackoverflow.com/questions/40754965/can-i-have-a-ruby-block-inside-another-ruby-block", "title": "Can I have a ruby block inside another ruby block?", "body": "<p>I have a hash whose keys are a range of integers (lets say <code>[1..5]</code>) and its corresponding 5 values are all <code>nil</code>. I have also an array of integers (lets say <code>[1,2,3,4,5]</code>. What I want to do is very specific: I want to take every single key and add it to every single of the array elements, giving me a hash that has the original keys, but has now for values the entire shifted array. </p>\n\n<p>After spending a few hours I have concluded that this is impossible through a really laconic expression, because it is leading to .each shadowing statements. </p>\n\n<p>I think that the only way to go through with this is to create 5 almost identical methods and call them separately. </p>\n\n<pre><code>def a1 \n  array.each do |x|\n    x+1\n  end\nend\n\ndef a2\n  array.each do |x|\n    x+2\n  end\nend\n</code></pre>\n\n<p>and so on..</p>\n\n<p>The end product I want to achieve is this:</p>\n\n<pre><code>{1=&gt;[2,3,4,5,6],2=&gt;[3,4,5,6,7],3=&gt;[4,5,6,7,8],4=&gt;[5,6,7,8,9],5=&gt;[6,7,8,9,10]}\n</code></pre>\n\n<p>It feels like there should be a more DRY way to achieve this. Any ideas? </p>\n"}, {"tags": ["ruby", "io"], "comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1479897267, "post_id": 40754929, "comment_id": 68748453, "body": "what error are you  getting?"}, {"owner": {"reputation": 439, "user_id": 204708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5627156aeaebf962636bcfce420429?s=128&d=identicon&r=PG", "display_name": "dodecaphonic", "link": "https://stackoverflow.com/users/204708/dodecaphonic"}, "edited": false, "score": 0, "creation_date": 1479908509, "post_id": 40754929, "comment_id": 68756314, "body": "I&#39;m not aware of a version of <code>IO#gets</code> that takes a block. Is the fact that your <code>&quot;line = #{line}&quot;</code> doesn&#39;t work what you consider an error?"}, {"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "reply_to_user": {"reputation": 439, "user_id": 204708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5627156aeaebf962636bcfce420429?s=128&d=identicon&r=PG", "display_name": "dodecaphonic", "link": "https://stackoverflow.com/users/204708/dodecaphonic"}, "edited": false, "score": 0, "creation_date": 1480364392, "post_id": 40754929, "comment_id": 68922261, "body": "@dodecaphonic, It doesn&#39;t throw any error.  However, it terminates after reading the first line of input and doesn&#39;t execute the code inside the block."}, {"owner": {"reputation": 439, "user_id": 204708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5627156aeaebf962636bcfce420429?s=128&d=identicon&r=PG", "display_name": "dodecaphonic", "link": "https://stackoverflow.com/users/204708/dodecaphonic"}, "edited": false, "score": 1, "creation_date": 1480364573, "post_id": 40754929, "comment_id": 68922349, "body": "That&#39;s because the block is being ignored, as <code>gets</code> doesn&#39;t take one. Try assigning to a variable like whodini9 showed below."}], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1479916319, "creation_date": 1479916319, "answer_id": 40768826, "question_id": 40754929, "link": "https://stackoverflow.com/questions/40754929/stdin-gets-doesnt-work-as-expected/40768826#40768826", "title": "STDIN.gets doesn&#39;t work as expected", "body": "<p>This is typically done like this</p>\n\n<pre><code>line = STDIN.gets.chomp\nputs \"line = #{line}\"\n</code></pre>\n\n<p>If you want to run it continuously, you could so something like this:</p>\n\n<pre><code>def get_line\n    line = STDIN.gets.chomp\n    puts \"line = #{line}\"\nend\n\nwhile var == true\n    get_line\nend\n</code></pre>\n"}], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520189313, "creation_date": 1479867204, "last_edit_date": 1520189313, "question_id": 40754929, "link": "https://stackoverflow.com/questions/40754929/stdin-gets-doesnt-work-as-expected", "title": "STDIN.gets doesn&#39;t work as expected", "body": "<p>I am trying to read from STDIN in Ruby:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nSTDIN.gets do |line|\n  puts \"line = #{line}\"\nend\n</code></pre>\n\n<p>It doesn't work for me.  I am not able to understand why.  My Ruby version is 2.1.8.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1479869077, "post_id": 40754863, "comment_id": 68736109, "body": "Why can&#39;t you use <code>to_i</code>?"}, {"owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1479869271, "post_id": 40754863, "comment_id": 68736153, "body": "@muistooshort it&#39;s a whiteboarding question and that is the challenge."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480183756, "post_id": 40754863, "comment_id": 68861937, "body": "If you let someone else do the work, it&#39;s not a challenge."}, {"owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1480184861, "post_id": 40754863, "comment_id": 68862296, "body": "@J&#246;rgWMittag Well if you&#39;d take the time to scroll down a bit instead of just being snarky, you&#39;ll see MY solution. I wanted to see other solutions as well."}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "edited": false, "score": 0, "creation_date": 1479867887, "post_id": 40754917, "comment_id": 68735819, "body": "Integer(&quot;0054&quot;)  =&gt; 44"}, {"owner": {"reputation": 3710, "user_id": 6523193, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V6rGA.jpg?s=128&g=1", "display_name": "Luka Kerr", "link": "https://stackoverflow.com/users/6523193/luka-kerr"}, "reply_to_user": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "edited": false, "score": 1, "creation_date": 1479868026, "post_id": 40754917, "comment_id": 68735851, "body": "@morrime that would be <code>Integer(&quot;0054&quot;, 10)</code>. Read the docs that @Cary linked to"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3710, "user_id": 6523193, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V6rGA.jpg?s=128&g=1", "display_name": "Luka Kerr", "link": "https://stackoverflow.com/users/6523193/luka-kerr"}, "edited": false, "score": 1, "creation_date": 1479883898, "post_id": 40754917, "comment_id": 68740533, "body": "It works with &quot;007&quot;, but not with &quot;008&quot;. That&#39;s because octal 7 (07) is the same as decimal 7 and <code>Integer(&quot;008&quot;) #=&gt; ArgumentError: invalid value for Integer(): &quot;008&quot;</code>. @luka, good point."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1479873546, "last_edit_date": 1479873546, "creation_date": 1479867081, "answer_id": 40754917, "question_id": 40754863, "link": "https://stackoverflow.com/questions/40754863/ruby-how-to-convert-string-to-integer-without-to-i/40754917#40754917", "title": "Ruby How to convert string to integer without .to_i", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">Kernel::Integer</a>:</p>\n\n<pre><code>Integer(\"219\")\n  #=&gt; 219 \nInteger(\"21cat9\")\n  # ArgumentError: invalid value for Integer(): \"21cat9\"\n</code></pre>\n\n<p>Sometimes this method is used as follows:</p>\n\n<pre><code>def convert_to_i(str)\n  begin\n    Integer(str)\n  rescue ArgumentError\n    nil\n  end\nend\n\nconvert_to_i(\"219\")\n  #=&gt; 219\nconvert_to_i(\"21cat9\")\n  #=&gt; nil\nconvert_to_i(\"1_234\")\n  #=&gt; 1234\nconvert_to_i(\"  12  \")\n  #=&gt; 12 \nconvert_to_i(\"0b11011\") # binary representation\n  #=&gt; 27 \nconvert_to_i(\"054\")     # octal representation\n  #=&gt; 44\nconvert_to_i(\"0xC\")     # hexidecimal representation\n  #=&gt; 12 \n</code></pre>\n\n<p>Some use an \"inline rescue\" (though it is less selective, as it rescues all exceptions):</p>\n\n<pre><code>def convert_to_i(str)\n  Integer(str) rescue nil\nend\n</code></pre>\n\n<p>There are similar Kernel methods to convert a string to a float or rational.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479871897, "post_id": 40755501, "comment_id": 68736751, "body": "Don&#39;t forget negative integers."}, {"owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479872280, "post_id": 40755501, "comment_id": 68736847, "body": "@CarySwoveland I should have mentioned it earlier, but the parameters of the whiteboarding problem say the string is ONLY characters from 0-9, so negatives aren&#39;t possible."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1479883579, "post_id": 40755501, "comment_id": 68740393, "body": "An alternative to the hash is <code>num_array[i].ord - 48</code>.  Consider using <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> (aka <code>inject</code>) and <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-reverse_each\" rel=\"nofollow noreferrer\">Array#reverse_each</a>: <code>str = &quot;123&quot;; fac = 1; str.chars.reverse_each.reduce(0) do |tot, digit|; tot += (digit.ord - 48)*fac; fac *= 10; tot; end</code>."}], "tags": [], "owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "is_accepted": false, "score": 2, "last_activity_date": 1479881846, "last_edit_date": 1479881846, "creation_date": 1479871645, "answer_id": 40755501, "question_id": 40754863, "link": "https://stackoverflow.com/questions/40754863/ruby-how-to-convert-string-to-integer-without-to-i/40755501#40755501", "title": "Ruby How to convert string to integer without .to_i", "body": "<pre><code>def str_to_int(string)\n digit_hash = {\"0\" =&gt; 0, \"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt; 3, \"4\" =&gt; 4, \"5\" =&gt; 5, \"6\" =&gt; 6, \"7\" =&gt; 7, \"8\" =&gt; 8, \"9\" =&gt; 9}\n total = 0\n num_array = string.split(\"\").reverse\n num_array.length.times do |i|\n   num_value = digit_hash[num_array[i]]\n   num_value_base_ten = num_value * (10**i)\n   total += num_value_base_ten\n end\n return total\nend\n\nputs str_to_int(\"119\") # =&gt; 119\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3418, "favorite_count": 0, "accepted_answer_id": 40754917, "answer_count": 2, "score": -2, "last_activity_date": 1479881846, "creation_date": 1479866771, "question_id": 40754863, "link": "https://stackoverflow.com/questions/40754863/ruby-how-to-convert-string-to-integer-without-to-i", "title": "Ruby How to convert string to integer without .to_i", "body": "<p>Is there a way to output an integer given a string containing numbers between 0 and 9. For example, input is \"219\", output would be 219, and you can't use .to_i </p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1479951345, "post_id": 40776075, "comment_id": 68777143, "body": "&quot;In this particular example setting timeout to zero will disable the use of timeouts.&quot; Actually, as you [originally] wrote it, setting the timeout to zero will stop the example from running at all. Fortunately, all you need to do is remove the <code>unless</code> clause, as <code>Timeout.timeout(0) { ... }</code> will not time out."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "reply_to_user": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1479952060, "post_id": 40776075, "comment_id": 68777331, "body": "ah i wasn&#39;t actually sure about that ... I shall change the answer"}], "tags": [], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "is_accepted": true, "score": 1, "last_activity_date": 1479952075, "last_edit_date": 1479952075, "creation_date": 1479945273, "answer_id": 40776075, "question_id": 40754565, "link": "https://stackoverflow.com/questions/40754565/how-can-i-set-global-rspec-metadata/40776075#40776075", "title": "How can I set global RSpec metadata?", "body": "<p>Apart from hacking at the RSpec internals, which is probably not a good idea, the only way you can do this is by abusing an available option:</p>\n\n<p>The tag option is a good candidate for this as it allows you to enter key/value pairs. The advantage of this is it can be set in the .rspec file, and can be overridden by command line argument. For example,</p>\n\n<p><strong>.rspec configuration</strong></p>\n\n<pre><code>--format documentation\n--color\n--tag timeout:10\n--require spec_helper\n</code></pre>\n\n<p><strong>command line</strong></p>\n\n<pre><code>rspec --tag timeout:2 \n</code></pre>\n\n<p>You just have to be careful and make sure that you remove the tag from the filter or all tests will be filtered out... To use this, in your case you would simply do:</p>\n\n<pre><code>RSpec.configure do | config |\n  timeout = config.filter.delete(:timeout) || 10\n\n  config.around do |example|\n    begin\n      Timeout.timeout(timeout) { example.run }\n    rescue Timeout::Error\n      skip \"Timed out after #{timeout} seconds\"\n    end\n  end\nend\n</code></pre>\n\n<p>In this particular example setting timeout to zero will disable the use of timeouts.</p>\n\n<p>Order of precedence from highest to lowest is <code>command line arg</code> > <code>.rspec configuration</code> > <code>default specified in your config block</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1480031895, "post_id": 40778821, "comment_id": 68813844, "body": "Great! The only thing that&#39;s missing is an easy way to turn it on or off."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1480093545, "post_id": 40778821, "comment_id": 68839962, "body": "Could you expand on this solution and demonstrate how this is configured for a custom option from the rspec file and command line? I&#39;m struggling to figure it out from the documentation."}, {"owner": {"reputation": 9327, "user_id": 814576, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BeB1v.jpg?s=128&g=1", "display_name": "ecbrodie", "link": "https://stackoverflow.com/users/814576/ecbrodie"}, "edited": false, "score": 0, "creation_date": 1557433702, "post_id": 40778821, "comment_id": 98773994, "body": "This is the big winner! Lost a whole hour looking for this."}], "tags": [], "owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "is_accepted": false, "score": 3, "last_activity_date": 1479990274, "last_edit_date": 1479990274, "creation_date": 1479966328, "answer_id": 40778821, "question_id": 40754565, "link": "https://stackoverflow.com/questions/40754565/how-can-i-set-global-rspec-metadata/40778821#40778821", "title": "How can I set global RSpec metadata?", "body": "<p>The <code>define_derived_metadata</code> option does exactly what you want:</p>\n\n<pre><code>define_derived_metadata(*filters) {|metadata| ... } \u21d2 void\n\nRSpec.configure do |config|\n # Tag all groups and examples in the spec/unit directory with\n # :type =&gt; :unit\n config.define_derived_metadata(:file_path =&gt; %r{/spec/unit/}) do |metadata|\n  metadata[:type] = :unit\n end\nend\n</code></pre>\n\n<p>Check it on <a href=\"http://www.rubydoc.info/github/rspec/rspec-core/RSpec%2FCore%2FConfiguration%3Adefine_derived_metadata\" rel=\"nofollow noreferrer\">rubydoc.info</a></p>\n"}], "owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 40776075, "answer_count": 2, "score": 5, "last_activity_date": 1479990274, "creation_date": 1479864400, "question_id": 40754565, "link": "https://stackoverflow.com/questions/40754565/how-can-i-set-global-rspec-metadata", "title": "How can I set global RSpec metadata?", "body": "<p>I have a script that wraps around tests in RSpec 3.4.4 and causes them to timeout after ten seconds.</p>\n\n<pre><code>TIMEOUT = 10\n\nRSpec.configure do | config |\n  config.around do |example|\n    timeout = Float(example.metadata[:timeout]) rescue TIMEOUT\n    begin\n      Timeout.timeout(timeout) { example.run }\n    rescue Timeout::Error\n      skip \"Timed out after #{timeout} seconds\"\n    end\n  end\nend\n</code></pre>\n\n<p>This script is in a central location - <code>~/lib/spec_helper.rb</code> - and is <code>require</code>d by <code>spec_helper</code>s in my repositories.</p>\n\n<p>I would like to be able to configure <code>example.metadata[:timeout]</code> at a <strong>repository-wide</strong> level, to have <strong>all</strong> of its specs time out (for example) after two seconds, or (for another example) not at all.</p>\n\n<p>I've tried setting it as an option in <code>.rspec</code> - a solution which would be ideal for me - but of course it doesn't recognise custom options like that. I would expect the command line to do exactly the same thing.</p>\n\n<p>Is there a way to set metadata for all examples in a test suite?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-console"], "comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1503138157, "post_id": 40753873, "comment_id": 78498925, "body": "This is an old question but since there are new readers : after-restart, etc. hooks are available inside ActiveSupport::Reloader from Rails 5. See the doc <a href=\"http://www.rubydoc.info/gems/activesupport/ActiveSupport/Reloader\" rel=\"nofollow noreferrer\">rubydoc.info/gems/activesupport/ActiveSupport/Reloader</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1503139147, "post_id": 45770428, "comment_id": 78499175, "body": "The problem here is that you couple the implementation with the Rails framework. I had separated into an initializer (that just provides the credentials) and the service itself, because the service could be used outside Rails, and it was the job of the initializer to pass in Rails secrets. I&#39;ll add this to my question and a Ruby tag as well"}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1503144304, "post_id": 45770428, "comment_id": 78500740, "body": "That&#39;s true. What about using a yaml file instead of the secrets one? You will avoid coupling the logic between the framework and the keys. (I think that your problem is not a very common problem haha)"}], "tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 0, "last_activity_date": 1503138517, "creation_date": 1503138517, "answer_id": 45770428, "question_id": 40753873, "link": "https://stackoverflow.com/questions/40753873/rails-reload-resets-class-variables-need-to-rerun-some-initializers/45770428#45770428", "title": "Rails reload! resets class variables, need to rerun some initializers", "body": "<p>You could define config method as:</p>\n\n<p><code>def config\n  @config ||= Rails.application.secrets.my_service.credentials\nend</code></p>\n\n<p>And call this method instead of <code>@config</code>, so when the config variable is unset, it will be set again, otherwise it will return the value.</p>\n"}, {"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": true, "score": 0, "last_activity_date": 1556890133, "creation_date": 1556890133, "answer_id": 55970828, "question_id": 40753873, "link": "https://stackoverflow.com/questions/40753873/rails-reload-resets-class-variables-need-to-rerun-some-initializers/55970828#55970828", "title": "Rails reload! resets class variables, need to rerun some initializers", "body": "<p>Seeing that people are still reading this, here is implementation I ended up with</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config/initializers/0_service_activation.rb\n# Activation done at the end of file\n\nmodule ServiceActivation\n  def self.with_reload\n    ActiveSupport::Reloader.to_prepare do\n      yield\n    end\n  end\n\n  module Slack\n    def self.service\n      ::SlackConnector\n    end\n\n    def self.should_be_activated?\n      Utility.production? ||\n      Utility.staging? ||\n      (\n        Utility.development? &amp;&amp;\n        ENV['ENABLE_SLACK'] == 'true'\n      )\n    end\n\n    def self.activate\n      slack = service\n      slack.webhook = Rails.application.secrets.slack&amp;.dig(:slack_webhooks)\n      Rails.application.secrets&amp;.dig(:slack, :intercept_channel).try do |channel|\n        slack.intercept_channel = channel if channel.present?\n      end\n      slack.activate\n      slack\n    end\n  end\n\n[\n  ServiceActivation::Intercom,\n  ServiceActivation::Slack,\n  ServiceActivation::Google\n] .each do |activator|\n  ServiceActivation.with_reload do\n    activator.activate if activator.should_be_activated?\n    activator.service.status_report\n  end\nend\n</code></pre>\n\n<p>I am not showing my connector class <code>SlackConnector</code>, but basically you can probably guess the interface from the way it is called. You need to set the webhook url, and do other stuff. The implementation is decoupled, so it's possible to use the same SlackConnector in Rails and in Capistrano for deployment, so it's basically in the <code>lib/</code> folder </p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 55970828, "answer_count": 2, "score": 2, "last_activity_date": 1556890133, "creation_date": 1479859221, "last_edit_date": 1503139223, "question_id": 40753873, "link": "https://stackoverflow.com/questions/40753873/rails-reload-resets-class-variables-need-to-rerun-some-initializers", "title": "Rails reload! resets class variables, need to rerun some initializers", "body": "<p>Suppose I need to parse some configuration to instanciate some Service Singletons (that could be used with or without Rails).</p>\n\n<p>A sample code example:</p>\n\n<pre><code>#services/my_service.rb\nmodule MyService\n    @config = nil\n\n    def self.load_config(config)\n      @config = config\n    end\n</code></pre>\n\n<p>When using with Rail (or Capistrano, SInatra, etc.) I would use an initializer to boot up the service</p>\n\n<pre><code>#initializers/svc.rb\nMyService.load_config(Rails.application.secrets.my_service.credentials)\n</code></pre>\n\n<p>But when used specifically with Rails, on every rails console <code>restart!</code>, this @config variable is cleared which is a problem...</p>\n\n<p>Are there</p>\n\n<ul>\n<li><code>after-reload!</code> hooks that I could use to re-run the initializer ?</li>\n<li>other types of variables that would be preserved during a <code>restart!</code>\nthat I could use here ?</li>\n</ul>\n"}, {"tags": ["ruby", "activerecord", "refactoring"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1479858950, "post_id": 40753588, "comment_id": 68733590, "body": "Are <code>tw_posts</code> and <code>fb_posts</code> and ... refer to different tables or do they reside in the same table?"}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1479859324, "post_id": 40753588, "comment_id": 68733692, "body": "They&#39;re all different tables. <code>TwitterPost</code>, <code>FacebookPost</code>, etc. They all <code>belong_to</code> <code>SocialMediaPost</code>, which <code>belongs_to</code> <code>Company</code> if that helps"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1479859896, "post_id": 40753588, "comment_id": 68733847, "body": "Then you are out of luck. Maybe you can optimize it a bit with union selection, but either way you&#39;ll end up with querying multiple tables. Adding indexes to those timestamp columns can help speed up each query."}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1479860065, "post_id": 40753588, "comment_id": 68733892, "body": "Thanks for trying. I&#39;m thinking I might just set up a background task to calculate daily metrics so I can just query a single table. Seems like the only viable option for speeding this up."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1479860128, "post_id": 40753588, "comment_id": 68733902, "body": "You can use the aggregation method <code>sum(column)</code> like <code>(tw_posts.where(&quot;twitter_posts.updated_at &gt;= ? and twitter_posts.updated_at &lt; ?&quot;, date, date + 1).sum(:completed_requests_count)</code>."}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1479860462, "post_id": 40753588, "comment_id": 68733986, "body": "That does seem to shave off about 100ms from the total response time, which is around 1400ms."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479863903, "post_id": 40753588, "comment_id": 68734802, "body": "any time you are doing SQL queries in a loop you should try and use eager loading (includes or preload)"}], "owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479857637, "creation_date": 1479857637, "question_id": 40753588, "link": "https://stackoverflow.com/questions/40753588/speed-up-activerecord-query-within-an-each-block", "title": "Speed up ActiveRecord query within an each block", "body": "<p>I have the following API endpoint that builds an array of <code>DateTime</code> objects and then iterates through it. For each date, the code finds the posts that were updated that day and plucks the <code>completed_requests_count</code>. It then sums those up and pushes that data into a <code>data</code> object to be further processed and returned to the client. This whole process is fairly slow. Right now it takes an average of 400ms just for the <code>ActiveRecord</code> portion of this code to execute. </p>\n\n<p>What I would like to know is how I can further optimize this to cut that time in half (or better). The bottleneck seems to be within the two <code>each</code> blocks. Is there some way to iterate through the dates and pluck the values I need without performing an individual query for each iteration?</p>\n\n<pre><code>def dashboard_metrics\n    # Get all TwitterPosts, FacebookPosts, LinkedInPosts, and InstagramPosts\n    tw_posts = current_user.twitter_posts\n    fb_posts = current_user.facebook_posts\n    li_posts = current_user.linked_in_posts\n    ig_posts = current_user.instagram_posts\n\n    # Build date range if custom dates selected\n    if params[:start_date].present? &amp;&amp; params[:end_date].present?\n        @start_date = DateTime.parse(params[:start_date]).midnight\n        @end_date = DateTime.parse(params[:end_date]).midnight\n\n        # Build array of DateTime objects\n        dates = (@start_date..@end_date).to_a\n        num_days = dates.count\n        dates_for_last_period = ((@end_date - (2 * num_days).days)..(@start_date - 1.day)).to_a\n    else\n        # Number of days for window\n        num_days = params[:num_days].present? &amp;&amp; params[:num_days].to_i &gt; 0 ? params[:num_days].to_i : 30\n\n        # Build array of DateTime objects\n        dates = (0..num_days).map { |n| (DateTime.now - n.days).midnight }.reverse\n        dates_for_last_period = ((num_days + 1)..(num_days * 2)).map { |n| (DateTime.now - n.days).midnight }.reverse\n    end\n\n    # Initialize data object\n    data = [{ key: 'Twitter', values: [] }, { key: 'Facebook', values: [] }, { key: 'LinkedIn', values: [] }, { key: 'Instagram', values: [] }]\n\n    # Initialize Reach and Value counts\n    reach_this_period = 0\n    reach_last_period = 0\n\n    # Iterate over array of DateTime objects and increment/push values for each date to data object\n    dates.each do |date|\n        # Get Amplify counts for each post type and multiply by average follower/friend count for platform\n        tw_amplify_count = (tw_posts.where(\"twitter_posts.updated_at &gt;= ? and twitter_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 300\n        fb_amplify_count = (fb_posts.where(\"facebook_posts.updated_at &gt;= ? and facebook_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 350\n        li_amplify_count = (li_posts.where(\"linked_in_posts.updated_at &gt;= ? and linked_in_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 700\n        ig_amplify_count = (ig_posts.where(\"instagram_posts.updated_at &gt;= ? and instagram_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 200\n\n        # Push [date, amplify_count] pairs to data object for each post type\n        data[0][:values] &lt;&lt; [date, tw_amplify_count]\n        data[1][:values] &lt;&lt; [date, fb_amplify_count]\n        data[2][:values] &lt;&lt; [date, li_amplify_count]\n        data[3][:values] &lt;&lt; [date, ig_amplify_count]\n\n        reach_this_period += tw_amplify_count + fb_amplify_count + li_amplify_count + ig_amplify_count\n    end\n\n    # Iterate over array of DateTime objects for previous N days and get sign_in and confirmation counts\n    dates_for_last_period.each do |date|\n        # Get Amplify counts for each post type and multiply by average follower/friend count for platform\n        tw_amplify_count = (tw_posts.where(\"twitter_posts.updated_at &gt;= ? and twitter_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 208\n        fb_amplify_count = (fb_posts.where(\"facebook_posts.updated_at &gt;= ? and facebook_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 200\n        li_amplify_count = (li_posts.where(\"linked_in_posts.updated_at &gt;= ? and linked_in_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 390\n        ig_amplify_count = (ig_posts.where(\"instagram_posts.updated_at &gt;= ? and instagram_posts.updated_at &lt; ?\", date, date + 1).pluck(:completed_requests_count).reduce(:+) || 0) * 104\n\n        reach_last_period += tw_amplify_count + fb_amplify_count + li_amplify_count + ig_amplify_count\n    end\n\n    # Do some more stuff with all the data we just grabbed and return it to the client\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1479855966, "post_id": 40753144, "comment_id": 68732587, "body": "Few questions - are you using devise? where is the <code>user_params</code> method? have you tried this in the console? might be worth checking the logs - copy parameters hash and chuck it into <code>User.find(1).update_attributes(copied_params)</code>. See if that returns true/false, and check the errors with <code>user.errors</code>. Though the fix might be simple, it would be better to spend your time learning how to debug these issues in the future. They happen a lot when you first get started ;)"}, {"owner": {"reputation": 437, "user_id": 6872532, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1191247364279088/picture?type=large", "display_name": "Alexander Donets", "link": "https://stackoverflow.com/users/6872532/alexander-donets"}, "reply_to_user": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1479857353, "post_id": 40753144, "comment_id": 68733083, "body": "Oh I found my error, and it was stupid.. Initially I created a database of people without email. Then I added a column email not null and was trying to update a previously created user whose email was null and it basically didnt allow the update."}], "owner": {"reputation": 437, "user_id": 6872532, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1191247364279088/picture?type=large", "display_name": "Alexander Donets", "link": "https://stackoverflow.com/users/6872532/alexander-donets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479856563, "creation_date": 1479855236, "last_edit_date": 1479856563, "question_id": 40753144, "link": "https://stackoverflow.com/questions/40753144/rails-4-cant-update-current-user", "title": "Rails 4: can&#39;t update current user", "body": "<p>I'm trying to update some specific values for current_user but I have had no luck with it. The values do not save and the page doesn't get redirected anywhere whatsoever. Here's the code for user controller in update</p>\n\n<pre><code>def update\n\n    @user = current_user\n\n    respond_to do |format|\n      if @user.update_attributes(user_params)\n        format.html { redirect_to @user, notice: 'User was successfully updated.' }\n        format.json { render :show, status: :ok, location: @user }\n      else\n        format.html { render :edit, notice: 'Update unsuccessful' }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n\ndef user_params\n      params.require(:user).permit(:username, :password, :password_confirmation, :email, :weight, :height, :age, :activity_level, :goal, :calorie_goal, :fat_goal, :carb_goal, :protein_goal, :fiber_goal, :sugar_goal)\n    end\n</code></pre>\n\n<p>I tried to use params[:user] or params[:current_user] instead of user_params but with no luck.. here's html</p>\n\n<pre><code>&lt;h2&gt;Set Up Your Profile&lt;/h2&gt;\n\n&lt;% @user = current_user %&gt;\n\n&lt;%= form_for(@user) do |f| %&gt;\n\n  current user is &lt;%= current_user.username %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :weight %&gt;&lt;br&gt;\n    &lt;%= f.text_field :weight %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :height %&gt;&lt;br&gt;\n    &lt;%= f.text_field :height %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :age %&gt;&lt;br&gt;\n    &lt;%= f.number_field :age %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :activity_level %&gt;&lt;br&gt;\n    &lt;%= f.number_field :activity_level %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :goal %&gt;&lt;br&gt;\n    &lt;%= f.number_field :goal %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>here I tried form_for(current_user) as well but didn't work, too... Any ideas what's wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479855519, "post_id": 40752826, "comment_id": 68732425, "body": "It looks like its from your link_to where you reference homework.id.  should it be @homework.id?  Hard to tell without seeing more code but that variable doesnt seem to be defined anywhere.  If its in your controller it should be an instance variable to access it in your view.  What does your log/stack trace say when you click the complete link?"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479856274, "post_id": 40752826, "comment_id": 68732715, "body": "Hi, I can&#39;t get to the link because the page does not load. I put in @homework.id as follows: &lt;%= link_to &quot;Mark as Complete&quot;, complete_homework_homework_student_path(@homework_students, @homework.id), method: :patch %&gt;  and this is the error...No route matches {:action=&gt;&quot;complete&quot;, :controller=&gt;&quot;homework_students&quot;, :homework_id=&gt;nil, :id=&gt;&quot;78&quot;} missing required keys: [:homework_id]...I don&#39;t have a homework_students controller, I only have homework controller. I&#39;ll post some of the code."}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479856685, "post_id": 40752826, "comment_id": 68732856, "body": "Move the <code>member do       patch :complete     end</code> up one block.  You have it nested in the homework_students controller.  Then run <code>rake routes</code> to get the proper path. Also watch the params.  @homework_students is nil (and in the wrong order). Chances are you&#39;re looping through these in your view so that is likely a local variable <code>homework_students.id</code>.  But again, a bit hard to tell."}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479857035, "post_id": 40752826, "comment_id": 68732980, "body": "I&#39;ve deleted my answer as it doesn&#39;t really fix the problem. Sounds like @user3366016 should submit one once the cause has been determined."}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479857116, "post_id": 40752826, "comment_id": 68733006, "body": "Thanks @user3366016, I did this and now error... No route matches {:action=&gt;&quot;complete&quot;, :controller=&gt;&quot;homeworks&quot;, :format=&gt;78, :id=&gt;nil} missing required keys: [:id]. I updated OP with some controller code. Can post more if needed. Thanks for help!"}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1479857752, "post_id": 40752826, "comment_id": 68733205, "body": "Did you check if the route exists by using rake routes? It should be something like complete_homeworks_path.  If yes, then its likely your paramaters you&#39;re passing in (the error makes them seem off). What ever you pass in must be defined in the controller action/view then youll have to update the complete action to use those paramaters to make the update."}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479858012, "post_id": 40752826, "comment_id": 68733298, "body": "Yes the route is complete_homework_path now."}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479859700, "post_id": 40752826, "comment_id": 68733793, "body": "ok now I can load the view, I click on the link and it says undefined method `homework_students&#39;...coming from complete action: def complete \t\t@complete_item = @homework.homework_students.update_attribute(:completed_on, Time.now) \tend"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479859852, "post_id": 40752826, "comment_id": 68733836, "body": "But to get there I had to change in view to &lt;%= link_to &quot;Mark as Complete&quot;, complete_homework_path(@homework.id), method: :patch %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479861982, "post_id": 40754170, "comment_id": 68734345, "body": "Thanks! I really appreciate it. Unfortunately I still get undefined local variable or method `homework_student&#39; after trying your answer. The table name is homework_students. I&#39;m overlooking something in my controller or view pretty basic. I actually was working off the video."}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479862301, "post_id": 40754170, "comment_id": 68734412, "body": "I really appreciate the time, i think i nearly have it...the model associations are right, i&#39;m missing something simple."}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479863025, "post_id": 40754170, "comment_id": 68734572, "body": "Np.  Here you say homework_student is undefined but above you say homework_students.  Can you post the full error as an update to your question and the view code?"}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479863457, "post_id": 40754170, "comment_id": 68734679, "body": "You have to update the attributes for a single homework_student otherwise you could get that error.  I have some comments in the controller above to help explain."}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479864760, "post_id": 40754170, "comment_id": 68735011, "body": "The issue is in your view. Are you looping over your `@homework.homewprk_students.each do |homework_student| &lt;%= link_to &quot;complete&quot;, complete_homework_path(@homework, homework_student), method: :patch %&gt; end"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479865057, "post_id": 40754170, "comment_id": 68735086, "body": "Ok, the view is fixed, now the error is in the complete action. undefined method `homework_students&#39; for nil:NilClass"}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479865831, "post_id": 40754170, "comment_id": 68735260, "body": "I have checked DB and the record is correct in the error, format &#39;142&#39; is the homework_student id and &#39;78&#39; is the homework_id. Nearly there....:/"}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479899084, "post_id": 40754170, "comment_id": 68749796, "body": "Updated view snippet to help set the params properly and controller before action to set the @homework, thats the nil class error."}, {"owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479905653, "post_id": 40754170, "comment_id": 68754330, "body": "Thanks, I updated OP to include new error on &quot;update_attributes&quot; + private settings in controller so you can see find_homework too. set_homework does not appear to work, when i leave set homework in it comes back with &quot;Couldn&#39;t find HomeworkStudent with &#39;id&#39;=&quot;...I really appreciate your help!"}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 0, "creation_date": 1479910388, "post_id": 40754170, "comment_id": 68757558, "body": "@Co2 looks like you might have a typo in your controller complete action.  In the block make the <code>homework_students.update_attr...</code> singular instead of plural. Remove the s from <code>homework_students</code> so that it uses the local variable of the block. we can chat here <a href=\"http://chat.stackoverflow.com/rooms/128806/discussion-between-user3366016-and-co2\">chat.stackoverflow.com/rooms/128806/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "is_accepted": true, "score": 1, "last_activity_date": 1479898894, "last_edit_date": 1479898894, "creation_date": 1479861328, "answer_id": 40754170, "question_id": 40752826, "link": "https://stackoverflow.com/questions/40752826/ror-mark-an-object-complete-save-completed-on-in-other-model/40754170#40754170", "title": "RoR: Mark an object complete, save completed_on in other model", "body": "<p>I mocked this version up based on our comments and it works on my end although it may not be the best approach.  You may want to watch <a href=\"https://www.youtube.com/watch?v=fd1Vn-Wvy2w\" rel=\"nofollow noreferrer\">this video from Mackenzie Child</a> who uses ajax to make this type of update on his todo app (mark things as complete, etc).  </p>\n\n<p>In your routes.rb</p>\n\n<pre><code>resources :homeworks do \n    member do\n      patch :complete\n    end\n    resources :homework_students\nend\n</code></pre>\n\n<p>In your homework_controller.rb</p>\n\n<pre><code> def complete\n    # Loop over each matching homework_student for the @homework where the id matches and update the completed_on attribute.\n    # You need to get the indivual homework_student record and update it. You could do it other ways but this seemed to work for me.\n    @homework.homework_students.where(id: params[:home_work_students_id]).each do |homework_student|\n      homework_student.update_attributes(:completed_on =&gt; Time.now)\n    end\n    # Redirect back to the @homework view.\n    redirect_to @homework, notice: 'Homework was successfully marked as complete.'        \n  end\n</code></pre>\n\n<p><code>before_action :set_homework, only: [:show, :complete]</code></p>\n\n<p>In your homework show.html.erb</p>\n\n<pre><code># This assumes you are looping over the @homework.homework_students in your view to create a link for each homework_student record and that will give you access to the homework_student local variable.\n&lt;%= link_to \"complete\", complete_homework_path(:homework_id =&gt; @homework, :home_work_students_id =&gt; homework_student), method: :patch %&gt;\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 40754170, "answer_count": 1, "score": 1, "last_activity_date": 1479906686, "creation_date": 1479853784, "last_edit_date": 1479906686, "question_id": 40752826, "link": "https://stackoverflow.com/questions/40752826/ror-mark-an-object-complete-save-completed-on-in-other-model", "title": "RoR: Mark an object complete, save completed_on in other model", "body": "<p>I am creating an action whereby a user can mark homework as complete.</p>\n\n<p>Homework is stored mostly in homework table but homework_student holds the completed_on and a boolean complete attribute:</p>\n\n<p>homework_student.rb</p>\n\n<pre><code> id             :integer          not null, primary key\n    #  school_user_id :integer          not null\n    #  homework_id    :integer          not null\n    #  completed_on   :datetime\n    #  created_at     :datetime         not null\n    #  updated_at     :datetime         not null\n    #  complete       :boolean\n\nbelongs_to :homework, :class_name =&gt; 'Homework', :foreign_key =&gt; :homework_id, dependent: :destroy\n</code></pre>\n\n<p>homework.rb</p>\n\n<pre><code> has_many :homework_students, :class_name =&gt; 'HomeworkStudent', dependent: :destroy\n</code></pre>\n\n<p>My attempt...</p>\n\n<p>In my show view for homework I want the user to be able to click complete on their homework and to have the date stored in the completed_on attribute in homework_students.</p>\n\n<p>Routes:</p>\n\n<pre><code> resources :homeworks do \n    resources :homework_students do\n    member do\n      patch :complete\n    end\n  end\nend\n</code></pre>\n\n<p>homeworks_controller.rb:</p>\n\n<pre><code>def complete\n        @complete_item = Homework.homework_students.update_attribute(:completed_on, Time.now)\n    end\n</code></pre>\n\n<p>In my view:</p>\n\n<pre><code>&lt;% @homework.homework_students.each do |homework_student| %&gt; \n          &lt;%= link_to \"complete\", complete_homework_path(:homework_id =&gt; @homework, :home_work_students_id =&gt; homework_student), method: :patch %&gt; \n          &lt;% end %&gt;\n</code></pre>\n\n<p>I am trying a PATCH method but it is not working. I'm not sure whether it is better to use the boolean attribute for this but i'm not sure how. Homework has many users and each user updates whether they completed or not.</p>\n\n<p>Error:</p>\n\n<pre><code>undefined local variable or method `homework\n</code></pre>\n\n<p>Much appreciate any guidance.</p>\n\n<p>UPDATE: homeworks_controller.rb</p>\n\n<pre><code>        before_action :find_homework, only: [:show, :complete, :edit, :update]\n                    #before_action :set_homework, only: [:show]\n                    #before_action :set_homework_student, except: [:create]\n                    before_action :authenticate_user!\n\n            ....\n    def complete\n        # Loop over each matching homework_student for the @homework where the id matches and update the completed_on attribute.\n        # You need to get the indivual homework_student record and update it. You could do it other ways but this seemed to work for me.\n        @homework.homework_students.where(id: params[:home_work_students_id]).each do |homework_student| homework_students.update_attributes(:completed_on =&gt; Time.now)\n        end\n        # Redirect back to the @homework view.\n        redirect_to @homework, notice: 'Homework was successfully marked as complete.'        \n      end\n            ....\n\n          private\n\n                def set_homework_student\n                    @homework_students =    HomeworkStudent.find(params[:homework_id])\n                end\n\n                def set_homework\n                  @homework = @homework_students.homeworks.find(params[:id])\n                end\n\n\n                def homework_params\n                    params.require(:homework).permit(:user_id, :id, :school_user_id, :homeworks, :significance, :significance_id, :sig_option, :feedback_request, :subject, :source, :description, :due, :completed_at, homework_students: [:completed_on, :complete], school_user: [:f_name, :s_name])\n                end\n\n\n\ndef find_homework\n            @homework = Homework.find(params[:id])\n        end\nend\n</code></pre>\n\n<p>UPDATED ERROR:</p>\n\n<pre><code>Error message:\n\nundefined method `update_attributes' for nil:NilClass\n\nRails.root: \n\nApplication Trace | Framework Trace | Full Trace\napp/controllers/homeworks_controller.rb:39:in `block in complete'\napp/controllers/homeworks_controller.rb:39:in `complete'\nRequest\n\nParameters:\n\n{\"_method\"=&gt;\"patch\",\n \"authenticity_token\"=&gt;\"OL1vW0BnnJ8TM5lshZWNKisNMrTU2Gp2cY7jYf3T+NRhlx2994q0ndrpehz+vW5unY1EBtSKCHecOJjTDwLHsw==\",\n \"home_work_students_id\"=&gt;\"142\",\n \"homework_id\"=&gt;\"78\",\n \"id\"=&gt;\"78\"}\n</code></pre>\n\n<p>VIEW Update</p>\n\n<pre><code> &lt;% @homework.homework_students.each do |homework_student| %&gt;\n              &lt;%= link_to \"complete\", complete_homework_path(@homework, homework_student), method: :patch %&gt; \n              &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-votable"], "answers": [{"tags": [], "owner": {"reputation": 5157, "user_id": 97893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/679f1c565405b6521eb1b78eeab69051?s=128&d=identicon&r=PG", "display_name": "fenec", "link": "https://stackoverflow.com/users/97893/fenec"}, "is_accepted": false, "score": 0, "last_activity_date": 1479853055, "creation_date": 1479853055, "answer_id": 40752651, "question_id": 40752559, "link": "https://stackoverflow.com/questions/40752559/get-value-of-votes-from-users-posts/40752651#40752651", "title": "Get value of votes from users posts", "body": "<p>you can always see all the votes of a user by doing <code>@user.votes</code></p>\n\n<p>check out <code>acts_as_voter</code> the  the documentation <a href=\"https://github.com/ryanto/acts_as_votable\" rel=\"nofollow noreferrer\">here</a>, it already does whatever you want.</p>\n"}, {"comments": [{"owner": {"reputation": 13053, "user_id": 341692, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JOu3x.jpg?s=128&g=1", "display_name": "hajpoj", "link": "https://stackoverflow.com/users/341692/hajpoj"}, "edited": false, "score": 0, "creation_date": 1479860477, "post_id": 40752724, "comment_id": 68733989, "body": "thats up to you. you could make a method in the <code>User</code> model like <code>def score; snippets.sum { |s| s.weighted_score }; end</code> and then from your view call <code>&lt;%= @user.score %&gt;</code> or you could directly call <code>&lt;%= @user.snippets.sum { |s| s.weighted_score } %&gt;</code> in the view though this isn&#39;t as clean."}], "tags": [], "owner": {"reputation": 13053, "user_id": 341692, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JOu3x.jpg?s=128&g=1", "display_name": "hajpoj", "link": "https://stackoverflow.com/users/341692/hajpoj"}, "is_accepted": true, "score": 0, "last_activity_date": 1479856807, "last_edit_date": 1479856807, "creation_date": 1479853315, "answer_id": 40752724, "question_id": 40752559, "link": "https://stackoverflow.com/questions/40752559/get-value-of-votes-from-users-posts/40752724#40752724", "title": "Get value of votes from users posts", "body": "<p>I'm assuming you have the relationship <code>user</code> <code>has_many</code> <code>snippets</code> set up? If thats the case you should be able to get all the snippets associated with the user and sum up the <code>votes_for</code>. </p>\n\n<pre><code>user.snippets.sum { |s| s.votes_for.size }\n</code></pre>\n\n<p>Edit: or in your case:</p>\n\n<pre><code>user.snippets.sum { |s| s.weighted_score }\n</code></pre>\n\n<p>References:</p>\n\n<p><a href=\"http://apidock.com/rails/Enumerable/sum\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Enumerable/sum</a></p>\n\n<p><a href=\"https://github.com/ryanto/acts_as_votable\" rel=\"nofollow noreferrer\">https://github.com/ryanto/acts_as_votable</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6806935"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40752724, "answer_count": 2, "score": -1, "last_activity_date": 1479856807, "creation_date": 1479852615, "question_id": 40752559, "link": "https://stackoverflow.com/questions/40752559/get-value-of-votes-from-users-posts", "title": "Get value of votes from users posts", "body": "<p>I have a model <code>snippets</code> in which a user can post a snippet. The snippet that they post can be voted on using the <code>acts_as_votable</code> gem. This is working perfectly, and when a user votes, the vote count of the snippet increases by one.</p>\n\n<p>Although, I am wondering is there a way to get the total value of votes for one  user's snippets they have posted? </p>\n\n<p>So if a user posted 4 snippets, each with a value of 2 votes, then I am trying to get the total value of only their snippets - which is 8.</p>\n\n<p>This code is used to get the votes of one individual snippet:</p>\n\n<pre><code>&lt;%= @snippet.weighted_score %&gt;\n</code></pre>\n\n<p>Although how am I able to get the total value of one users posted snippets?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 257, "user_id": 1886240, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/08a3ae5053b8d973b0a6759304c0d242?s=128&d=identicon&r=PG", "display_name": "Ed_", "link": "https://stackoverflow.com/users/1886240/ed"}, "edited": false, "score": 0, "creation_date": 1479852955, "post_id": 40752457, "comment_id": 68731399, "body": "This error happens when you try to send a parameter that you have not added to the params method, in this case you are missing the rental_params method entirely."}], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1479853099, "post_id": 40752577, "comment_id": 68731454, "body": "Now I get this error: &quot;When assigning attributes, you must pass a hash as an argument.&quot; Any thoughts?"}, {"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "reply_to_user": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1479853181, "post_id": 40752577, "comment_id": 68731490, "body": "What does <code>rental_params</code> look like? Also, post some stracktrace of the error"}, {"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1479853287, "post_id": 40752577, "comment_id": 68731531, "body": "def rental_params     \tparams.require(:rental).permit(:borrowed_on, :rented_on)     end"}], "tags": [], "owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "is_accepted": true, "score": 2, "last_activity_date": 1479852658, "creation_date": 1479852658, "answer_id": 40752577, "question_id": 40752457, "link": "https://stackoverflow.com/questions/40752457/ruby-on-rails-form-error/40752577#40752577", "title": "Ruby on Rails form error", "body": "<p>You aren't using strong params for <code>rentals</code>, hence the <code>ActiveModel::ForbiddenAttributesError</code> error.</p>\n\n<hr>\n\n<p>This should fix the error:</p>\n\n<pre><code>class RentalsController &lt; ApplicationController\n\n  def new\n    @movie = Movie.find(params[:id])\n    @rental = @movie.rentals.build\n  end\n\n  def create \n    @movie = Movie.find(params[:id])\n    @rental = @movie.rentals.build(rental_params)\n    if @rental.save \n        redirect_to new_rental_path(:id =&gt; @movie.id)\n    end\n  end\n\n  private\n\n  def rental_params\n    params.require(:rental).permit(:borrowed_on, :rented_on)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 40752577, "answer_count": 1, "score": 0, "last_activity_date": 1479852658, "creation_date": 1479852174, "question_id": 40752457, "link": "https://stackoverflow.com/questions/40752457/ruby-on-rails-form-error", "title": "Ruby on Rails form error", "body": "<p>I am building an app from an online tutorial. It tracks \"Movies\" and \"Rentals.\" I am trying to set up the part where you create a new rental. When I submit the form, I get this error: </p>\n\n<pre><code>ActiveModel::ForbiddenAttributesError in RentalsController#create\n</code></pre>\n\n<p>Here is the full rentals controller: </p>\n\n<pre><code>class RentalsController &lt; ApplicationController\n\ndef new\n    @movie = Movie.find(params[:id])\n    @rental = @movie.rentals.build\nend\n\ndef create \n    @movie = Movie.find(params[:id])\n    @rental = @movie.rentals.build(params[:rental])\n    if @rental.save \n        redirect_to new_rental_path(:id =&gt; @movie.id)\n    end\nend \nend\n</code></pre>\n\n<p>It seems to take issue with this line in particular: </p>\n\n<pre><code>        @rental = @movie.rentals.build(params[:rental])\n</code></pre>\n\n<p>Here is the Rental model: </p>\n\n<pre><code>class Rental &lt; ApplicationRecord\nhas_one :movie\nend\n</code></pre>\n\n<p>Here is the controller for Movies: </p>\n\n<pre><code>class MoviesController &lt; ApplicationController\n\ndef new \n    @movie = Movie.new\n    @movies = Movie.all\nend\n\ndef create \n    @movie = Movie.new(movie_params)\n    if @movie.save\n        redirect_to new_movie_path\n    end \nend\n\nprivate\n\ndef movie_params\n    params.require(:movie).permit(:title, :year)\nend \nend\n</code></pre>\n\n<p>Here is the Movie model:</p>\n\n<pre><code>class Movie &lt; ApplicationRecord\nhas_many :rentals\nend\n</code></pre>\n\n<p>Here are the routes: </p>\n\n<pre><code>Rails.application.routes.draw do\n resources :movies, :rentals\n root 'movies#new'\n\nend\n</code></pre>\n\n<p>Here is the form: </p>\n\n<pre><code>&lt;h1&gt;&lt;%= @movie.title %&gt;&lt;/h1&gt;\n\n&lt;%= form_for @rental, :url =&gt; {:action =&gt; :create, :id =&gt; @movie.id } do |r| %&gt;\nBorrowed on: &lt;%= r.text_field :borrowed_on %&gt;&lt;br /&gt;\nReturned on: &lt;%= r.text_field :returned_on %&gt;&lt;br /&gt; \n&lt;br /&gt;\n&lt;%= r.button :submit %&gt; \n&lt;% end %&gt; \n&lt;br /&gt;\n&lt;%= link_to \"back\", new_movie_path %&gt; \n</code></pre>\n\n<p>I'm not sure what is going on. From what I can tell, I am copying the tutorial exactly. Any help would be much appreciated!</p>\n"}, {"tags": ["arrays", "ruby", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1479867198, "post_id": 40752512, "comment_id": 68735609, "body": "Thank you so much for your reply.  I think this is what I&#39;m looking for."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1479913483, "post_id": 40752512, "comment_id": 68759717, "body": "Sure thing. For the record, the answer by @tadman will produce the same result. The difference is that instead of hardcoding the field order, as my answer does, he puts the column names in a constant that would allow you to add, reorder, or remove fields a bit more easily."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1479852417, "creation_date": 1479852417, "answer_id": 40752512, "question_id": 40752385, "link": "https://stackoverflow.com/questions/40752385/how-to-create-and-output-array-results/40752512#40752512", "title": "How to create and output array results", "body": "<p>This looks like a good candidate for storage in an array of hashes as the simplest solution.</p>\n\n<pre><code>property_details_array\n  .map { |row| row.split(\"\\n\") }\n  .map { |prop_info| {street: prop_info[4].strip, \n                      city: prop_info[5].strip, \n                      state: prop_info[6].strip, \n                      zip: prop_info[7].strip} }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1479867352, "post_id": 40752539, "comment_id": 68735659, "body": "Thank you for the reply, the problem using this approach is that the list is not properly comma separated.  I don&#39;t have enough ruby knowledge to make it to work properly..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1479868365, "post_id": 40752539, "comment_id": 68735935, "body": "What do you mean &quot;not properly&quot;? I&#39;m not sure what to make of that remark. This processes the sample data that was given."}, {"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1479929778, "post_id": 40752539, "comment_id": 68769498, "body": "Sorry for not explaining better, I&#39;m still getting a hold of Ruby and how to work with it.  I&#39;ve added additional information to the original post...If you can provide any help on this I would be extremely grateful.  Thanks!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1479852518, "creation_date": 1479852518, "answer_id": 40752539, "question_id": 40752385, "link": "https://stackoverflow.com/questions/40752385/how-to-create-and-output-array-results/40752539#40752539", "title": "How to create and output array results", "body": "<p>Why not split out fields into a Hash if they're in a predictable order?</p>\n\n<p>You can do this:</p>\n\n<pre><code>FIELDS = [ nil, nil, nil, nil, :street, :city, :state, :zip ]\n\ndetails.map do |d|\n  Hash[\n    FIELDS.zip(d.split(\"\\n\").map(&amp;:strip)).select do |key, value|\n      key\n    end\n  ]\nend\n# =&gt; [{:street=&gt;\"1 W Maple Dr,\", :city=&gt;\"Atlanta,\", :state=&gt;\"GA\", :zip=&gt;\"30315\"}]\n</code></pre>\n\n<p>That constructs a an array of hashes each containing any fields that could be mapped. The advantage here is if your input format changes, if the fields get rearranged, your output can be consistent.</p>\n"}], "owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 40752539, "answer_count": 2, "score": 0, "last_activity_date": 1479929661, "creation_date": 1479851830, "last_edit_date": 1479929661, "question_id": 40752385, "link": "https://stackoverflow.com/questions/40752385/how-to-create-and-output-array-results", "title": "How to create and output array results", "body": "<p>I have an array called <code>property_details_array</code> where each line of the array looks like:</p>\n\n<pre><code>[\"\\n      \\n        \\n          \\n                1 W Maple Dr,\\n            Atlanta,\\n            GA\\n            30315\"\n</code></pre>\n\n<p>I'm trying to figure out the best way to clean the data for output into a table-like format, either CSV or HTML. </p>\n\n<p>There are over 200 lines for each of these arrays so automating this would be extremely helpful.  I started by parsing the data like:</p>\n\n<pre><code>property_details_array.each do |i|\n    prop_info = i.split(\"\\n\")\n        street = prop_info[4].strip\n        city = prop_info[5].strip\n        state = prop_info[6].strip\n        zip = prop_info[7].strip\nend\n</code></pre>\n\n<p>However, I'm kind of stuck on where to go next.  I've been thinking of either doing it as an array of arrays or an array of hashes, but I'm not sure if one is better than the other based on how much data I would be working with.  Both methods seem to make sense, however since I'm having to clean up the data first, I'm not sure on the best way to go about it.</p>\n\n<p>How do I best feed in these values for future output?  </p>\n\n<hr>\n\n<p>New Info</p>\n\n<p>@tadman - Sorry for the lack of explanation and thank you very much for your help.  What I meant to say was, After looking at the data closer, I realized the results are not in a predictable order.  Sometimes price will be at [16], other times it's not.  I'm back to the drawing board on trying to figure out how to get results into an array of hashes.</p>\n\n<p>The raw data I'm working with looks like:</p>\n\n<pre><code>[\"\\n      \\n        \\n          \\n                2265 Tanglewood Cir NE,\\n            Atlanta,\\n            GA\\n            30345\\n \\n        \\n\\n        \\n          Dresden East\\n        \\n        \\n\\n            $289,900\\n          \\n          \\n            \\n        3 bd\\n                2 ba\\n                1,566 sq ft\\n             \n0.3 acres lot\\n            \\n          \\n        \\n          \\n            Single Family Home\\n          \\n        \\n          \\n            \\n  \nBrokered by Re/Max Town And Country\\n            \\n          \\n       \n\\n        \\n          \\n            Brokered by \\n            Re/Max\nTown And Country\\n          \\n        \\n      \\n    \",  \"\\n      \\n   \n\\n          \\n                2141 Dunwoody Gln,\\n           \nAtlanta,\\n            GA\\n            30338\\n          \\n        \\n\\n \n\\n          \\n            $469,900\\n          \\n          \\n          \n\\n                4 bd\\n                3 ba\\n                2,850 sq\nft\\n                0.3 acres lot\\n                2 car\\n           \n\\n          \\n        \\n          \\n            Single Family Home\\n  \n\\n        \\n          \\n            \\n              Brokered by\nBuckhead Home Realty Llc\\n            \\n          \\n        \\n       \n\\n          \\n            Brokered by \\n            Buckhead Home\nRealty Llc\\n          \\n        \\n      \\n    \",  \"\\n      \\n       \n\\n          \\n                1048 Martin St SE,\\n           \nAtlanta,\\n            GA\\n            30315\\n          \\n        \\n\\n \n\\n          Intown South\\n          Peoplestown\\n        \\n        \\n \n\\n            $164,900\\n          \\n          \\n            \\n        \n5 bd\\n                3 ba\\n                2,376 sq ft\\n             \n7,405 sq ft lot\\n            \\n          \\n        \\n          \\n     \nSingle Family Home\\n          \\n        \\n          \\n            \\n  \nBrokered by Greenlet Llc\\n            \\n          \\n        \\n       \n\\n          \\n            Brokered by \\n            Greenlet Llc\\n    \n\\n        \\n      \\n    \",  \"\\n      \\n        \\n          \\n         \n1048 Martin St SE,\\n            Atlanta,\\n            GA\\n           \n30315\\n          \\n        \\n\\n        \\n          Intown South\\n     \nPeoplestown\\n        \\n        \\n          \\n            $164,900\\n   \n\\n          \\n            \\n                5 bd\\n                3\nba\\n                2,055 sq ft\\n                7,584 sq ft lot\\n    \n\\n          \\n        \\n          \\n            Single Family Home\\n  \n\\n        \\n          \\n            \\n              Brokered by\nGreenlet, Llc\\n            \\n          \\n        \\n        \\n         \n\\n            Brokered by \\n            Greenlet, Llc\\n          \\n   \n\\n      \\n    \"]\n</code></pre>\n\n<p>Ideally, I'm trying to parse out the following: (Street, City, State, Zip, Price, BD, BA, Sq.FT) Any ideas on the best way to do this.  </p>\n"}, {"tags": ["ruby", "macos", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479855326, "post_id": 40752137, "comment_id": 68732358, "body": "That you got the atrociously ancient 1.8.7 working on your computer is remarkable. That it doesn&#39;t work properly is not surprising. That version hasn&#39;t been supported for years. It&#39;s not recommended you use it for anything, there are a number of vulnerabilities in it that have never been patched. I can barely get it working on an older distribution of Linux running in a Vagrant virtual machine. Likewise, Rails 2 is wickedly out of date and you&#39;re living on borrowed time if you haven&#39;t patched it."}, {"owner": {"reputation": 1103, "user_id": 1435518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba3cd6008474e376deb55a4f1dfa6fc7?s=128&d=identicon&r=PG", "display_name": "wmakley", "link": "https://stackoverflow.com/users/1435518/wmakley"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479861077, "post_id": 40752137, "comment_id": 68734152, "body": "Thank you I considered adding an essay about why that isn&#39;t option and yes I know the dire security situation, but felt that it distracted from simply asking the question. Long and short of it is the site will be replaced with a different platform rather than custom ruby code, the client doesn&#39;t have $$$ to upgrade thousands of lines of legacy code. (It has over a dozen old and complex Rails 2 engines that were originally built in Rails 1.2.6 and carried all those old assumptions forward, which won&#39;t upgrade easily.)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479868453, "post_id": 40752137, "comment_id": 68735955, "body": "Hope they&#39;re spending money on lots and lots of liability insurance instead. Rails 2 has some super, super bad vulnerabilities so I hope that site isn&#39;t public. There&#39;s no way to fix this problem. It&#39;s not even a consideration for the core team to keep up with current versions of macOS plus the modern SSL library. Create a VM with a historical version if you <i>must</i> work with this code."}, {"owner": {"reputation": 1103, "user_id": 1435518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba3cd6008474e376deb55a4f1dfa6fc7?s=128&d=identicon&r=PG", "display_name": "wmakley", "link": "https://stackoverflow.com/users/1435518/wmakley"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1479916870, "post_id": 40752137, "comment_id": 68762035, "body": "It uses  <a href=\"https://railslts.com/\" rel=\"nofollow noreferrer\">railslts.com</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479932792, "post_id": 40752137, "comment_id": 68771034, "body": "At least you&#39;ve got that. Maybe they can help with your 1.8.7 problem."}], "owner": {"reputation": 1103, "user_id": 1435518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba3cd6008474e376deb55a4f1dfa6fc7?s=128&d=identicon&r=PG", "display_name": "wmakley", "link": "https://stackoverflow.com/users/1435518/wmakley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479851096, "creation_date": 1479850756, "last_edit_date": 1479851096, "question_id": 40752137, "link": "https://stackoverflow.com/questions/40752137/segmentation-fault-when-opening-an-ssl-socket-in-ruby-1-8-7-on-os-x-sierra", "title": "Segmentation fault when opening an SSL socket in ruby 1.8.7 on OS X Sierra", "body": "<p>Ruby 1.8.7-p375 on OS X Sierra. I'm having a problem with a library that talks to a fedex rates SOAP service seg faulting.</p>\n\n<pre><code>~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/httpclient-2.7.2/lib/httpclient/ssl_socket.rb:46: [BUG] Segmentation fault\nruby 1.8.7 (2013-12-22 patchlevel 375) [i686-darwin16.1.0]'\n</code></pre>\n\n<p>This is a legacy app stuck in Rails 2 / Ruby 1.8.7 and I am running OS X Sierra on my development laptop.</p>\n\n<p>The full call-stack includes a fedex library, soap4r and httpclient, making it very difficult to create a minimal failure case (although I am still trying). Additionally, this ONLY happens in OS X. On Debian - even Debian 8 - I have no problems running this legacy code.</p>\n\n<p>Full stack-trace sans application code:</p>\n\n<pre><code>httpclient (2.7.2) lib/httpclient/ssl_socket.rb:46:in `ssl_connect'\nhttpclient (2.7.2) lib/httpclient/ssl_socket.rb:24:in `create_socket'\nhttpclient (2.7.2) lib/httpclient/session.rb:739:in `connect'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/1.8/timeout.rb:67:in `timeout'\nhttpclient (2.7.2) lib/httpclient/session.rb:735:in `connect'\nhttpclient (2.7.2) lib/httpclient/session.rb:497:in `query'\nhttpclient (2.7.2) lib/httpclient/session.rb:170:in `query'\nhttpclient (2.7.2) lib/httpclient.rb:1238:in `do_get_block'\nhttpclient (2.7.2) lib/httpclient.rb:1021:in `do_request'\nhttpclient (2.7.2) lib/httpclient.rb:1129:in `protect_keep_alive_disconnected'\nhttpclient (2.7.2) lib/httpclient.rb:1016:in `do_request'\nhttpclient (2.7.2) lib/httpclient.rb:858:in `request'\nhttpclient (2.7.2) lib/httpclient.rb:761:in `post'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/soap4r-ng-2.0.3/lib/soap/streamHandler.rb:238:in `send_post'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/soap4r-ng-2.0.3/lib/soap/streamHandler.rb:172:in `send'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/soap4r-ng-2.0.3/lib/soap/rpc/proxy.rb:187:in `route'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/soap4r-ng-2.0.3/lib/soap/rpc/proxy.rb:150:in `call'\n~/.rbenv/versions/1.8.7-p375/lib/ruby/gems/1.8/gems/soap4r-ng-2.0.3/lib/soap/rpc/driver.rb:152:in `call'\n(eval):6:in `getRates'\n</code></pre>\n\n<p>This is the procedure I used to install Ruby 1.8.7: <a href=\"https://gist.github.com/wmakley/8dfe436dfe345efae3ddf6756f9766b6\" rel=\"nofollow noreferrer\">https://gist.github.com/wmakley/8dfe436dfe345efae3ddf6756f9766b6</a></p>\n\n<p>I was hoping the OpenSSL 0.9.8 thing would fix this issue, but no dice.</p>\n\n<p>Open to any suggestions! My minimal test code actually works, but I am probably not doing everything necessary to create the same circumstance:</p>\n\n<p><strong>Gemfile:</strong></p>\n\n<pre><code>gem 'httpclient', '~&gt; 2.7.0' # required by soap4r-ng; 2.8 doesn't work in ruby 1.8\ngem 'soap4r-ng'\n</code></pre>\n\n<p><strong>Ruby code:</strong></p>\n\n<pre><code>require 'httpclient'\nrequire 'soap/soap'\n\nclient = HTTPClient.new(nil, SOAP::VERSION::FORK_STRING)\nclient.post(\n  'https://gateway.fedex.com:443/web-services',\n  LOTS OF XML INCLUDING SECRETS,\n  {\n    'SOAPAction' =&gt; 'getRates',\n    'ContentType' =&gt; 'text/xml; charset=utf-8'\n  }\n)\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479851076, "post_id": 40752023, "comment_id": 68730506, "body": "Hint: <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> or simple interpolation."}, {"owner": {"reputation": 3197, "user_id": 267280, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/517ea04cf362ddc08f107f6ef98a12d9?s=128&d=identicon&r=PG", "display_name": "mikebridge", "link": "https://stackoverflow.com/users/267280/mikebridge"}, "edited": false, "score": 0, "creation_date": 1479851155, "post_id": 40752023, "comment_id": 68730541, "body": "<code>.map{|n| &quot;#{n[0]} o&#39;clock #{&quot;%01d&quot; % n[1]} &#176;C&quot;}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 5, "last_activity_date": 1479852245, "last_edit_date": 1479852245, "creation_date": 1479851922, "answer_id": 40752408, "question_id": 40752023, "link": "https://stackoverflow.com/questions/40752023/ruby-extract-data-from-nested-arrays/40752408#40752408", "title": "Ruby: Extract data from nested arrays", "body": "<p>The key here is <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> which makes it easy to convert in conjunction with <code>map</code> since your incoming data is already in a concise form:</p>\n\n<pre><code>list.map do |row|\n  \"%s o'clock %04.1f \u00b0C\" % row\nend\n</code></pre>\n\n<p>This helps with the formatting of <code>8.0</code> to <code>08.0</code> as well using the <code>%04.1f</code> placeholder.</p>\n"}], "owner": {"reputation": 43, "user_id": 7196884, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/689a2eeb24b654dbbf439a4b52e8aa9b?s=128&d=identicon&r=PG&f=1", "display_name": "dzikakoza", "link": "https://stackoverflow.com/users/7196884/dzikakoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479852245, "creation_date": 1479850340, "last_edit_date": 1479851037, "question_id": 40752023, "link": "https://stackoverflow.com/questions/40752023/ruby-extract-data-from-nested-arrays", "title": "Ruby: Extract data from nested arrays", "body": "<p>How can I get in Ruby from a nested array like this</p>\n\n<pre><code>[[\"21:45\",8.0],[\"11:20\",14.5],[\"15:30\",21.0]]\n</code></pre>\n\n<p>get a result like this (each subarray in a single line):</p>\n\n<pre><code>[\n  \"21:45 o'clock 08.0 \u00b0C\",\n  \"11:20 o'clock 14.5 \u00b0C\",\n  \"15:30 o'clock 21.0 \u00b0C\"\n]\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1479849159, "post_id": 40751691, "comment_id": 68729570, "body": "Can you add some sample data in Ruby format? It&#39;s not quite clear from your question what the input and output would be. Do you mean something like  <code>{ 1 =&gt; :free, 2 =&gt; :used, ... }</code>?"}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479849420, "post_id": 40751691, "comment_id": 68729684, "body": "yes assume it is in that format, I will add to the question"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479849434, "post_id": 40751691, "comment_id": 68729692, "body": "Also add the expected output format, it helps a lot."}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479849539, "post_id": 40751691, "comment_id": 68729759, "body": "consider the output format to be the same as the input format, but the results either in separate hashes (if possible) or else add all the new hashes to an array if thats easier??"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479849699, "post_id": 40751691, "comment_id": 68729842, "body": "The output format can&#39;t be the same since you want it split up somehow. Please make an effort to describe the desired result. Your example with <code>hash1, hash2</code> is not sufficient. Is that an array of arrays of hashes? Are they necessarily grouped as contiguous blocks?"}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479850173, "post_id": 40751691, "comment_id": 68730076, "body": "I really just want to split the original hash into separate parts, the splitting point being the used numbers.  Apologies if this is not clear, I&#39;m not sure how to describe it differently."}], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1479852711, "post_id": 40752226, "comment_id": 68731293, "body": "Looks great! Would this differ much if @assortment was an active record result in rails, so I assume would that be an array with each element of the array being a hash of attributes like :number =&gt; &quot;1&quot;, :status =&gt; &quot;free&quot;.... I guess I convert the active record result to a hash, see the example here <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Result.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Result.html</a>"}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1479853355, "post_id": 40752226, "comment_id": 68731554, "body": "So I guess it would be an array of hashes, rather than a hash. Would that require iteration? Or could it be flattened perhaps"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1479854185, "post_id": 40752226, "comment_id": 68731929, "body": "I don&#39;t know Rails, so perhaps a reader could answer the first question. If I returned an array of hashes what would the hashes look like? Would all values be <code>:free</code>?"}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1479854266, "post_id": 40752226, "comment_id": 68731956, "body": "They would ask be free numbers, but in different hashes based on the splitting via the used"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1479859629, "last_edit_date": 1479859629, "creation_date": 1479851135, "answer_id": 40752226, "question_id": 40751691, "link": "https://stackoverflow.com/questions/40751691/creating-multiple-arrays-by-splitting-a-hash/40752226#40752226", "title": "creating multiple arrays by splitting a hash", "body": "<pre><code>@assortment = (20..50).to_a.product([:free]).to_h\n[30,31,32,40].each { |n| @assortment[n] = :used }\n@assortment\n  # =&gt; {20=&gt;:free, 21=&gt;:free, 22=&gt;:free, 23=&gt;:free, 24=&gt;:free, 25=&gt;:free,\n  #     26=&gt;:free, 27=&gt;:free, 28=&gt;:free, 29=&gt;:free, 30=&gt;:used, 31=&gt;:used,\n  #     32=&gt;:used, 33=&gt;:free, 34=&gt;:free, 35=&gt;:free, 36=&gt;:free, 37=&gt;:free,\n  #     38=&gt;:free, 39=&gt;:free, 40=&gt;:used, 41=&gt;:free, 42=&gt;:free, 43=&gt;:free,\n  #     44=&gt;:free, 45=&gt;:free, 46=&gt;:free, 47=&gt;:free, 48=&gt;:free, 49=&gt;:free, 50=&gt;:free} \n</code></pre>\n\n<p><strong>Return an array of hashes</strong></p>\n\n<pre><code>@assortment.reject { |_,v| v == :used }.\n            slice_when { |(a,_),(b,_)| b &gt; a+1 }.\n            to_a.\n            map(&amp;:to_h)\n  #=&gt; [{20=&gt;:free, 21=&gt;:free,...29=&gt;:free},\n  #    {33=&gt;:free, 34=&gt;:free,...39=&gt;:free},\n  #    {41=&gt;:free, 42=&gt;:free,...50=&gt;:free}] \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-reject\" rel=\"nofollow noreferrer\">Hash#reject</a> (which returns a hash) and <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable#slice_when</a>.</p>\n\n<p><strong>Return an array of arrays</strong></p>\n\n<p>Having a hash whose values are all the same doesn't seem very useful. If you'd prefer returning an array of array, just drop <code>to_h</code>.</p>\n\n<pre><code>arr = @assortment.reject { |_,v| v == :used }.\n            keys.\n            slice_when { |a,b| b &gt; a+1 }.\n            to_a\n  #=&gt; [[20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\n  #    [33, 34, 35, 36, 37, 38, 39],\n  #    [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]] \n</code></pre>\n\n<p><strong>Return an array of ranges</strong></p>\n\n<p>A third option is to return an array of ranges. To do that map each of <code>arr</code>'s elements (arrays) to a range:</p>\n\n<pre><code>arr.map { |f,*_,l| f..l }\n  #=&gt; [20..29, 33..39, 41..50] \n</code></pre>\n\n<p>The first element of <code>arr</code> passed to the block is <code>[20, 21, 22, 23, 24, 25, 26, 27, 28, 29]</code>. The three block variables are computed using <em>parallel assignement</em>:</p>\n\n<pre><code>f,*b,l = [20, 21, 22, 23, 24, 25, 26, 27, 28, 29] \nf #=&gt; 20 \n_ #=&gt; [21, 22, 23, 24, 25, 26, 27, 28] \nl #=&gt; 29 \n</code></pre>\n\n<p>I wish to underscore that I've used an underscore for the second block variable to underscore that it is not used in the block calculation.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 40752226, "answer_count": 1, "score": 0, "last_activity_date": 1479859629, "creation_date": 1479849066, "last_edit_date": 1479850496, "question_id": 40751691, "link": "https://stackoverflow.com/questions/40751691/creating-multiple-arrays-by-splitting-a-hash", "title": "creating multiple arrays by splitting a hash", "body": "<p>Lets say I have an <code>@assortment</code> of numbers in a hash, e.g. 1 to 100.\nEach number in the <code>@assortment</code> can have a status of <code>:free</code>, or <code>:used</code>.</p>\n\n<p>An example <code>@assortment</code> could be: \n    { 1 => :free, 2 => :free, 3=> :used etc ... }</p>\n\n<p>Lets say I want to split the <code>@assortment</code> up based on the used numbers, and extract the free numbers into their <em>own</em> hash (or an array or hashes?)</p>\n\n<p>For example, for an <code>@assortment</code> of 1 to 100, if numbers 25 and 75 were 'used' and the rest were 'free', then the result would be 3 new hashes of all the free values:</p>\n\n<pre><code>1 to 24\n26 to 74\n76 to 100\n</code></pre>\n\n<p>Similarly, lets say we have a different <code>@assortmen</code>t, with numbers 1 to 100, but I want to extract numbers 20 to 80, but numbers 30, 31, 32 and 40 are used then the result is like this :</p>\n\n<pre><code>hash1 -&gt; 20 to 29\nhash2 -&gt;33 to 39\nhash3 -&gt; 41 to 80\n</code></pre>\n\n<p>Is there a nice functional way to do this in Ruby, where I can pass in a complete <code>@assortment</code> of numbers, and an optional range to extract and get the resulting hashes, perhaps in an array?</p>\n\n<p>I guess the original hash gets broken up or split based on the <code>:used</code> elements...</p>\n\n<p>If you were to loop through the hash, then every free number would be added to a new hash (e.g. hash1) until you reach a used number. Keep going through the loop until you reach a free number, this and all subsequent free numbers get added to a new hash (hash2). Keep this going until you have all the free numbers in new hashes...</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479847908, "post_id": 40751323, "comment_id": 68728847, "body": "Why order the hash? That doesn&#39;t do much good since they&#39;re random access. Simply get the keys in the order of <code>my_array</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479848023, "post_id": 40751323, "comment_id": 68728914, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>. We&#39;d like to see your effort, either where you searched for solutions and why those didn&#39;t help, or in the minimum code showing what you wrote to solve the problem and an explanation why it doesn&#39;t work correctly. Without that looks like you&#39;re asking us to solve the problem for you. And, just so you know, this question has been asked multiple times on SO, so the answer is out there."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479848560, "post_id": 40751323, "comment_id": 68729225, "body": "@theTinMan is there a case for rearranging a hash for readability?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479851070, "post_id": 40751323, "comment_id": 68730499, "body": "Why would you need to make a hash readable? You might want to make <code>inspect</code> more readable, or you might want to iterate over the hash and make <i>that</i> output more readable, but in either case it doesn&#39;t involve changing the hash or its order, only the order that data is retrieved from the hash and the format of that output."}, {"owner": {"reputation": 951, "user_id": 717216, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24825a1dc9410edc67f68c38bfb1ccf5?s=128&d=identicon&r=PG", "display_name": "absessive", "link": "https://stackoverflow.com/users/717216/absessive"}, "edited": false, "score": 0, "creation_date": 1480349181, "post_id": 40751323, "comment_id": 68913823, "body": "To be clearer, how to iterate the hash according to the order of its keys from an array?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1479849256, "post_id": 40751507, "comment_id": 68729616, "body": "Expecting a hash to have a particular order can be problematic, so it&#39;s best avoided."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1479851269, "post_id": 40751507, "comment_id": 68730605, "body": "Hashes maintain their insertion order, which is kinda nice, but it&#39;s hardly essential, nor should it be counted on as @tadman says. Get in the habit of ordering the keys, then extracting the values in that order; <code>values_at</code> is our friend and makes it very easy. Sorting or ordering the keys in a hash really only wastes CPU time since the same thing can be accomplished when retrieving the values."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1479851763, "post_id": 40751507, "comment_id": 68730848, "body": "Yeah, that&#39;s what I mean. Having to rebuild the hash just to get some arbitrary ordering is expensive, such as you&#39;d have to do when inserting a key between two other keys. Treating them like arrays, which are intrinsically ordered, is usually a mistake. They&#39;re only ordered for consistency&#39;s sake: Two hashes produced the same way are going to be identical. Historically this wasn&#39;t the case, they&#39;d often be randomized and unpredictable."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1479848339, "creation_date": 1479848339, "answer_id": 40751507, "question_id": 40751323, "link": "https://stackoverflow.com/questions/40751323/how-do-i-sort-a-ruby-hash-by-keys-according-to-the-order-of-those-keys-in-an-arr/40751507#40751507", "title": "How do I sort a ruby hash by keys according to the order of those keys in an array?", "body": "<p>Try this:</p>\n\n<pre><code>my_array = ['ONE', 'TWO', 'THREE']\nmy_hash = { 'THREE' =&gt; \"this is the third\", \n            'ONE' =&gt; \"this is the first\",\n            'TWO' =&gt; 'second' }\n\nmy_array.zip(my_array.map {|s| my_hash[s]}).to_h\n#=&gt; {\"ONE\"=&gt;\"this is the first\", \"TWO\"=&gt;\"second\", \"THREE\"=&gt;\"this is the third\"}\n</code></pre>\n"}], "owner": {"reputation": 951, "user_id": 717216, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24825a1dc9410edc67f68c38bfb1ccf5?s=128&d=identicon&r=PG", "display_name": "absessive", "link": "https://stackoverflow.com/users/717216/absessive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479848339, "creation_date": 1479847662, "question_id": 40751323, "link": "https://stackoverflow.com/questions/40751323/how-do-i-sort-a-ruby-hash-by-keys-according-to-the-order-of-those-keys-in-an-arr", "title": "How do I sort a ruby hash by keys according to the order of those keys in an array?", "body": "<p>I have a hash of some random order and the keys of that hash are are in an array.</p>\n\n<pre><code>my_array = ['ONE', 'TWO', 'THREE']\nmy_hash = { 'THREE' =&gt; \"this is the third\", \n            'ONE' =&gt; \"this is the first\",\n            'TWO' =&gt; 'second' }\n</code></pre>\n\n<p>How to get this ordered in a way where </p>\n\n<pre><code>new_hash = { 'ONE' =&gt; \"this is the first\",\n             'TWO' =&gt; 'second',\n             'THREE' =&gt; \"this is the third\" }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "zip", "zipline"], "answers": [{"tags": [], "owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "is_accepted": false, "score": 0, "last_activity_date": 1493761425, "creation_date": 1493761425, "answer_id": 43747722, "question_id": 40751175, "link": "https://stackoverflow.com/questions/40751175/can-i-use-zipline-gem-to-download-from-s3-without-model-associations-with-paperc/43747722#43747722", "title": "Can I use zipline gem to download from s3 without model associations with paperclip or carrierwave", "body": "<p>See the part of the zipline README where an enumerator gets used to include remote files into the ZIP. It uses absolute URLs, to generate those from your S3 objects you will need to use presigned URLs (which Zipline is going to pass on to Curb):</p>\n\n<p><code>\nAws::S3::Bucket.new(your_bucket_name).object(your_key).presigned_url(:get)\n</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7089739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458bf0157f4ff40da8957b54b40e7fad?s=128&d=identicon&r=PG&f=1", "display_name": "heehee_arm", "link": "https://stackoverflow.com/users/7089739/heehee-arm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493761425, "creation_date": 1479847121, "question_id": 40751175, "link": "https://stackoverflow.com/questions/40751175/can-i-use-zipline-gem-to-download-from-s3-without-model-associations-with-paperc", "title": "Can I use zipline gem to download from s3 without model associations with paperclip or carrierwave", "body": "<p>I want to allow my user to download a bundle of files that are stored on s3 using the zipline gem.  The files are already hosted on an s3 server but they aren't there as part of a paperclip or carrierwave attachment in my app.  Will I need to create some records in my database to sort of trick zipline into thinking they are paperclip attachments, or is there a way I can send the zip file without bothering with an attachment gem?  At the moment, trying to download the files with zipline doesn't throw an error message at all.  It just seems to skip right over and nothing downloads.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1479846227, "post_id": 40750937, "comment_id": 68727913, "body": "Post code, not screenshots of code. Also, don&#39;t add useless tags."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1479846277, "post_id": 40750937, "comment_id": 68727929, "body": "Use <code>puts</code> instead of <code>print</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1479846660, "post_id": 40750937, "comment_id": 68728174, "body": "Don&#39;t link to your code either. Links break. If you paste code your question will live forever."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479847104, "post_id": 40750937, "comment_id": 68728434, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimum code in the question itself that demonstrates the problem. It&#39;s important to understand SO isn&#39;t a discussion list, it&#39;s an online reference book to help solve programming problems and your question just created a new article. Saying  &quot;Just ignore the content of the program&quot; doesn&#39;t fit what we do on SO. Please edit your question so it fits the SO model better. Please."}, {"owner": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "edited": false, "score": 0, "creation_date": 1479847871, "post_id": 40750937, "comment_id": 68728827, "body": "Thank you Sergio and Cary!"}, {"owner": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "edited": false, "score": 0, "creation_date": 1479848130, "post_id": 40750937, "comment_id": 68728973, "body": "The Tin Man: Sorry, I asked! I said I was new and not aware of how things worked. You can&#39;t intimidate a new member like that. If you can&#39;t help, then just don&#39;t reply. Wouldn&#39;t that be better? Have a good day ahead."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "edited": false, "score": 0, "creation_date": 1479848329, "post_id": 40751444, "comment_id": 68729095, "body": "Lovely! Thanks a ton."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "edited": false, "score": 0, "creation_date": 1479848509, "post_id": 40751444, "comment_id": 68729192, "body": "About your question: the code does not appear as code. Edit it, select the lines that are code and click the <code>{}</code> button, that should take care of it."}, {"owner": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "edited": false, "score": 0, "creation_date": 1479848915, "post_id": 40751444, "comment_id": 68729425, "body": "Ah! I see... Thank you again. And it is working now. :D"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 1, "last_activity_date": 1480023638, "last_edit_date": 1480023638, "creation_date": 1479848106, "answer_id": 40751444, "question_id": 40750937, "link": "https://stackoverflow.com/questions/40750937/no-breaks-in-the-output/40751444#40751444", "title": "No breaks in the output", "body": "<p>2 options, <code>print</code> with explicit linebreaks ( \\n , also works on Windows), or <code>puts</code> which adds a linebreak if the string does not already ends with one. These two examples result in the same output:</p>\n\n<pre><code>print \"Hello\\nworld\\n\"\n\nputs \"Hello\nworld\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7183452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o1ixyTX_dH8/AAAAAAAAAAI/AAAAAAAAAQY/f2DMhBUoX0s/photo.jpg?sz=128", "display_name": "Glen", "link": "https://stackoverflow.com/users/7183452/glen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40751444, "answer_count": 1, "score": 1, "last_activity_date": 1480023638, "creation_date": 1479846172, "last_edit_date": 1479848856, "question_id": 40750937, "link": "https://stackoverflow.com/questions/40750937/no-breaks-in-the-output", "title": "No breaks in the output", "body": "<p>Just started Ruby yesterday (for the first time). And struggling a bit. Please help. </p>\n\n<p>Here's the program: </p>\n\n<pre><code>print \"What's your name?\"\nname = gets.chomp \nif name == \"James\"\n    print \"Someone loves you!\"\nelse \n    print \"Try again #{name}!\"\nend\n\nprint \"How old are you?\"\nage = gets.chomp\nif age &lt;= \"25\"\n    print \"Boy, you are just a child\"\nelsif age &gt;= \"45\"\n    print \"Shame on you old man, craddle snacher!\"\nend\n</code></pre>\n\n<p>The output is:\n<a href=\"https://i.stack.imgur.com/g5WCz.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>So my concern is; why is it not beginning from a new line after \"Try again Jack\". I would like all the questions and answers to start at a fresh line. Please help! </p>\n\n<p>PS: Just ignore the content of the program. That was just something to keep myself motivated. I don't really mean to be offensive. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "fixtures"], "answers": [{"comments": [{"owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "edited": false, "score": 2, "creation_date": 1530285812, "post_id": 51104623, "comment_id": 89196967, "body": "thanks for this! I have long moved on from this project and don&#39;t have time to verify that it works right now. If someone else having this question wants to verify it worked for them I will approve."}], "tags": [], "owner": {"reputation": 3333, "user_id": 259368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d4ddc41d7cf45d2601c3afc736fc58?s=128&d=identicon&r=PG", "display_name": "Jon M.", "link": "https://stackoverflow.com/users/259368/jon-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1530284604, "creation_date": 1530284604, "answer_id": 51104623, "question_id": 40750164, "link": "https://stackoverflow.com/questions/40750164/rails-minitest-dont-load-fixtures-for-select-tests/51104623#51104623", "title": "rails/minitest don&#39;t load fixtures for select tests", "body": "<p>You should be able to selectively load fixtures for a test case like this:</p>\n\n<pre><code>class ActiveSupport::TestCase\n  ActiveRecord::FixtureSet.create_fixtures('test/fixtures', %w[units owners guests])\n  ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15106, "user_id": 1117851, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9FMVK.jpg?s=128&g=1", "display_name": "itsnikolay", "link": "https://stackoverflow.com/users/1117851/itsnikolay"}, "is_accepted": false, "score": 7, "last_activity_date": 1530708071, "last_edit_date": 1530708071, "creation_date": 1530554038, "answer_id": 51141403, "question_id": 40750164, "link": "https://stackoverflow.com/questions/40750164/rails-minitest-dont-load-fixtures-for-select-tests/51141403#51141403", "title": "rails/minitest don&#39;t load fixtures for select tests", "body": "<p>Put fixtures in <code>test/fixtures/users.yml</code></p>\n\n<p>Then you are able to include them where you need, for example in <code>spec_helper</code></p>\n\n<pre><code># spec_helper.rb\nfixtures :all   # include all fixtures\nfixtures :users # include only specific fixtures\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/TestFixtures/ClassMethods.html#method-i-fixtures\" rel=\"noreferrer\">Doc: fixtures method</a></p>\n\n<p>P.S. it works well together with FactoryBot gem (ex. FactoryGirl)</p>\n"}], "owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 3, "answer_count": 2, "score": 9, "last_activity_date": 1530708071, "creation_date": 1479843161, "last_edit_date": 1479843931, "question_id": 40750164, "link": "https://stackoverflow.com/questions/40750164/rails-minitest-dont-load-fixtures-for-select-tests", "title": "rails/minitest don&#39;t load fixtures for select tests", "body": "<p>My tests are written using fixtures and I am slowly refactoring them to use factories instead.</p>\n\n<p>Once I've refactored a test class to not use fixtures I want to not load fixtures for that class. Is there a way to do this? Or am I stuck with either loading them for everything or nothing?</p>\n\n<p>For context, here is how my fixtures are set up now:</p>\n\n<pre><code>class ActiveSupport::TestCase\n   Rake::Task[\"db:fixtures:load\"].execute\n   ...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "friendly-id", "pretty-urls"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1479846676, "post_id": 40749958, "comment_id": 68728190, "body": "Read the official documentation and start again on your implementation. You&#180;re making it difficult on yourself by overcomplicating it. FriendlyID does not override the ActiveRecord finders anymore. That behavior was made optional a long time ago and should not be used."}, {"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479847710, "post_id": 40749958, "comment_id": 68728744, "body": "I have read the official documentation, and that is why I am here. I have reimplemented several times and the result is always the same. Either with spaces or dashes with the id in the front.  I removed the finders and still the behavior continues. I just finished doing it on an empty project exactly as the documentation prescribes however I am still getting urls with spaces in them."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479864221, "post_id": 40749958, "comment_id": 68734881, "body": "Thats because you are using the name and not the slug column in your <code>to_param</code> override."}], "owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1479845211, "creation_date": 1479842283, "last_edit_date": 1479845211, "question_id": 40749958, "link": "https://stackoverflow.com/questions/40749958/ruby-on-rails-friendly-id-url-has-spaces-instead-of-hyphens", "title": "Ruby On Rails - friendly_id - URL has spaces instead of Hyphens", "body": "<p>Ok folks I have been struggling with this for a couple days and I am totally confused at this point.</p>\n\n<p>I am running Rails 5 and Ruby 2.3.0\nFrom my understanding on ROR that if I load a url with like this</p>\n\n<pre><code>post/3-DIY-Mirror\n</code></pre>\n\n<p>ActiveRecord is able to interpret the post id by doing to_i on the string and which would leave just the integer 3 which is the id of the post. \nNow I understand FriendlyId is suppose to be able to override that behavior and have ActiveRecord find DIY-Mirror without the integer 3 by doing Post.friendly.find(params[:id])\nI have followed several sets of instructions and I end up with 2 types of behavior and not the one that I believe FriendlyId is suppose to give me.</p>\n\n<p><strong>CASE 1</strong>\nIn my controller I have:</p>\n\n<pre><code> def show\n   @page = Page.find(params[:id])\n   if request.path != page_path(@page)\n      redirect_to @page, status: :moved_permanently\n   end\n end\n</code></pre>\n\n<p>in my Model I have:</p>\n\n<pre><code>class Page &lt; ApplicationRecord\n  extend FriendlyId\n  friendly_id :name, use: [:slugged, :finders, :history]\n  validates :name, :slug, presence: true\n  def to_param\n    [id, name.parameterize].join(\"-\")\n  end\n  def should_generate_new_friendly_id?\n    send(friendly_id_config.slug_column).nil? &amp;&amp;\n            !send(friendly_id_config.base).nil?\n  end\n\nend\n</code></pre>\n\n<p>This returns a url like <a href=\"http://localhost:3000/pages/4-sdfasdf\" rel=\"nofollow noreferrer\">http://localhost:3000/pages/4-sdfasdf</a> and it works. However the default ActiveRecord Behavior is there with the id at the beginning of the string.</p>\n\n<p><strong>CASE 2</strong>\nNow if I take my controller to:</p>\n\n<pre><code> def show\n    @page = Page.friendly.find(params[:id])\n    if request.path != page_path(@page)\n      redirect_to @page, status: :moved_permanently\n    end\n end\n</code></pre>\n\n<p>and my model to:</p>\n\n<pre><code>class Page &lt; ApplicationRecord\n   extend FriendlyId\n   friendly_id :name, use: [:slugged, :finders, :history]\n   validates :name, :slug, presence: true\nend\n</code></pre>\n\n<p>I get it without the id and it works, however the URL has spaces instead of hyphens?! <a href=\"http://localhost:3000/pages/asdf\" rel=\"nofollow noreferrer\">http://localhost:3000/pages/asdf</a> asdfas asdfas</p>\n\n<p>I have followed several of the guides on github and none of the produce <a href=\"http://localhost:3000/pages/asdf-asdfas-asdfas\" rel=\"nofollow noreferrer\">http://localhost:3000/pages/asdf-asdfas-asdfas</a> . They produce either of the above results instead. Anyone have any light they can shine on this as I am sure I have setup everything correctly but it just doesn't seem to be putting the dashes in automatically.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paper-trail-gem"], "comments": [{"owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1479842796, "post_id": 40749467, "comment_id": 68726004, "body": "How flexible is your schema?  Could you move those attributes into another model?"}, {"owner": {"reputation": 15009, "user_id": 283398, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b1cdc38a7e1707aae0699d7bacdc7095?s=128&d=identicon&r=PG", "display_name": "Gabe Kopley", "link": "https://stackoverflow.com/users/283398/gabe-kopley"}, "reply_to_user": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1479844782, "post_id": 40749467, "comment_id": 68727040, "body": "This attribute, no - it&#39;s actually this data attribute that I am most interested in versioning - I just don&#39;t want the diffs."}, {"owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1479919640, "post_id": 40749467, "comment_id": 68763912, "body": "I also didn&#39;t see anyway in papertrail to do this.  Its either skip, or ignore.   You could fork the gem and see if you can add configuration that would do what you want."}], "answers": [{"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": true, "score": 6, "last_activity_date": 1556818588, "last_edit_date": 1556818588, "creation_date": 1480541979, "answer_id": 40898717, "question_id": 40749467, "link": "https://stackoverflow.com/questions/40749467/using-papertrail-can-i-opt-out-of-object-changes-for-a-particular-model-or-at/40898717#40898717", "title": "Using PaperTrail, can I opt out of `object_changes` for a particular model or attribute?", "body": "<p>Some options, in descending order of recommendation (most highly recommended first):</p>\n\n<ol>\n<li><strong><code>version_limit</code></strong> (Supported) - Save disk space instead by limiting the number of versions you create for a given record, using <code>version_limit</code>. (<a href=\"https://github.com/airblade/paper_trail#2e-limiting-the-number-of-versions-created\" rel=\"nofollow noreferrer\">https://github.com/airblade/paper_trail#2e-limiting-the-number-of-versions-created</a>)</li>\n<li><strong>Custom table</strong> (Supported) - Custom version model, custom table without <code>object_changes</code> column. Precludes the experimental associations feature (<code>track_associations</code> must be <code>false</code> [the default])</li>\n<li><strong>Patch <code>recordable_object_changes</code>, method 1</strong> (Not supported) - Custom version model, but still using the <code>versions</code> table. Override <code>#paper_trail</code> to return a custom child class of <code>RecordTrail</code> which overrides <code>RecordTrail#recordable_object_changes</code>. Overriding these methods breaks your warranty.</li>\n<li><strong>Patch <code>recordable_object_changes</code>, method 2</strong> (Not supported) - Override <code>RecordTrail#recordable_object_changes</code>, adding a class-check conditional. Call super for all but the model you want to hack. Overriding this method breaks your warranty.</li>\n<li><strong>Custom serializer</strong> (Supported, but not for this) - Custom serializer with class-check conditional, and some way of telling whether you're serializing <code>object_changes</code> and not <code>object</code>. Probably a bad idea, seems really hacky.</li>\n</ol>\n\n<p>Finally, I'd be happy to review a PR that adds a new feature, the ability to configure, on a per-model basis, which data should be written to the <code>object_changes</code> column. If you're serious about working on that, and seeing it through to the finish, please open a new issue so we can discuss it further. There are a few different designs that could work.</p>\n\n<p>Update, 2019: We now have <a href=\"https://github.com/paper-trail-gem/paper_trail#6c-custom-object-changes\" rel=\"nofollow noreferrer\">object_changes_adapter</a> It's only for expert users, and probably not my top recommendation.</p>\n"}], "owner": {"reputation": 15009, "user_id": 283398, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b1cdc38a7e1707aae0699d7bacdc7095?s=128&d=identicon&r=PG", "display_name": "Gabe Kopley", "link": "https://stackoverflow.com/users/283398/gabe-kopley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 2, "accepted_answer_id": 40898717, "answer_count": 1, "score": 6, "last_activity_date": 1582571131, "creation_date": 1479840539, "last_edit_date": 1582571131, "question_id": 40749467, "link": "https://stackoverflow.com/questions/40749467/using-papertrail-can-i-opt-out-of-object-changes-for-a-particular-model-or-at", "title": "Using PaperTrail, can I opt out of `object_changes` for a particular model or attribute?", "body": "<p>This is somewhat related to <a href=\"https://github.com/airblade/paper_trail/issues/837\" rel=\"nofollow noreferrer\">#837</a> in that I have a large data column on my models, however I think I may be better served by the opposite of what's proposed in that issue - that is, to maintain the object column but not the object_changes column.</p>\n\n<p>We had been running with no versions.object_changes column. Now that I've added this column, I realized I am writing a lot of data I don't care about for the data column in object_changes - since a tiny change to data causes it to be written out to versions effectively 3x (once in <code>object</code> and twice in <code>object_changes</code> for the before and after).</p>\n\n<p>I don't think skip or ignore is what I want, because I would indeed like the changes to data to produce a new version.</p>\n\n<p>Should I go down the custom version model route? Or what do you recommend?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "reform"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479840041, "post_id": 40749066, "comment_id": 68724431, "body": "Please do not use screen dumps from your editor. Instead copy the code itself into the question."}, {"owner": {"reputation": 53, "user_id": 4138109, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/55e7bc98ea0552b067b4d15a21badd13?s=128&d=identicon&r=PG&f=1", "display_name": "Quin", "link": "https://stackoverflow.com/users/4138109/quin"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479840319, "post_id": 40749066, "comment_id": 68724604, "body": "Ok, I thought the colored syntax was easier to read. I will add the code instead ;)"}], "owner": {"reputation": 53, "user_id": 4138109, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/55e7bc98ea0552b067b4d15a21badd13?s=128&d=identicon&r=PG&f=1", "display_name": "Quin", "link": "https://stackoverflow.com/users/4138109/quin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479840724, "creation_date": 1479839204, "last_edit_date": 1479840724, "question_id": 40749066, "link": "https://stackoverflow.com/questions/40749066/in-reform-how-to-compose-a-property-with-two-values-from-a-form", "title": "In Reform, how to compose a property with two values from a form", "body": "<p>I have a form object built with Reform and I would like to populate a property using two values that come from the form and they are not included in the model.</p>\n\n<p>My form:</p>\n\n<pre><code>  div.form-item.form-item--near\n    = f.input :employment_contract_type, collection: @presenter.employment_contract_codes_collection\n    = f.input :employment_contract_time, collection: [\"Partial\", \"Complete\"], as: :radio_buttons\n</code></pre>\n\n<p>My form object:</p>\n\n<pre><code>  class FinancingRequestForm &lt; Reform::Form\n    property :employment_contract_code\n    property :employment_contract_time, virtual: true\n    property :employment_contract_type, virtual: true\n  end\n</code></pre>\n\n<p>The model:</p>\n\n<pre><code># Table name: purchase_financing_customers\n#\n#  id                       :integer          not null, primary key\n#  employment_contract_code :string\n\nmodule Purchase\n  class FinancingCustomer &lt; ApplicationRecord\n  end\nend\n</code></pre>\n\n<p>I would like something like this:</p>\n\n<pre><code>  class FinancingRequestForm &lt; Reform::Form\n    ContractCodePopulator = lambda do |_|\n      time = employment_contract_type == \"Complete\" ? \"C\" : \"P\"\n      self.employment_contract_code  = \"#{send(\"employment_contract_type\")}#{time}\"\n    end\n\n    property :employment_contract_code, populator: ContractCodePopulator\n    property :employment_contract_time, virtual: true\n    property :employment_contract_type, virtual: true\n  end\n</code></pre>\n\n<p>But the problem is that de Populator doesn't trigger when I run form.validate(request_params). </p>\n\n<p>I just want the employment_contract_code composed with the other two virtual values.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "multithreading"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1479839263, "post_id": 40748994, "comment_id": 68723928, "body": "I&#39;m not familar with Twilio, but it appears that the rest client simply isn&#39;t thread-safe."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479844339, "post_id": 40748994, "comment_id": 68726806, "body": "I&#39;d recommend looking at Hydra and <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow noreferrer\">Typhoeus</a>, which implement and handle parallel HTTP requests very nicely. I&#39;ve used them to pull in multiple requests in parallel with good results; I think I was using 15 at once without problems."}, {"owner": {"reputation": 2647, "user_id": 1334746, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e99085d2f0b6f460fb53d1d76830c428?s=128&d=identicon&r=PG", "display_name": "michael", "link": "https://stackoverflow.com/users/1334746/michael"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479845473, "post_id": 40748994, "comment_id": 68727460, "body": "@theTinMan Yeah, I had checked that out, but I was hoping to use the stock client library. Oh well! I&#39;ll give it a shot. Thanks!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479846338, "post_id": 40748994, "comment_id": 68727977, "body": "Well, the alternate path is to run multiple instances of your client code, rather than try to do it with threads. People forget that an OS, like Linux or Mac OS, is designed to run multiple instances of code <i>IF</i> the code is written to not step all over itself. Also, <code>map</code> is the wrong iterator. In the first example you should be using <code>each</code> because you&#39;re not returning something the result of the block and using it further."}, {"owner": {"reputation": 2647, "user_id": 1334746, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e99085d2f0b6f460fb53d1d76830c428?s=128&d=identicon&r=PG", "display_name": "michael", "link": "https://stackoverflow.com/users/1334746/michael"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1480824886, "post_id": 40748994, "comment_id": 69120195, "body": "@theTinMan I had actually thought about that too, but I couldn&#39;t see a good way to coordinate between processes so each request to get a page of recordings from Twilio would ask for a different page number, especially since the pages change as recordings are deleted. And I&#39;m using <code>map</code> to return the thread and call <code>.join</code> on each one, so that the code doesn&#39;t complete until the the thread finishes running."}], "owner": {"reputation": 2647, "user_id": 1334746, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e99085d2f0b6f460fb53d1d76830c428?s=128&d=identicon&r=PG", "display_name": "michael", "link": "https://stackoverflow.com/users/1334746/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479844414, "creation_date": 1479838921, "last_edit_date": 1479844414, "question_id": 40748994, "link": "https://stackoverflow.com/questions/40748994/ruby-script-works-without-threads-crashes-with", "title": "Ruby script works without threads, crashes with", "body": "<p>I have a script I'm using to transfer audio recordings from my Twilio account to S3. The network requests take a long time, so I thought I'd use threading to run several requests in parallel. A simplifed version of my non-threaded code looks like this:</p>\n\n<pre><code>require 'twilio-ruby'\naccount_sid = 'sid'\nauth_token = 'secret'\ntwilio_rest_client = Twilio::REST::Client.new(account_sid, auth_token)\n\nrecordings = twilio_rest_client.account.recordings.list(page_size: 2)\n\nrecordings.map do |recording|\n  recording.mp3! do |file|\n    path = recording.mp3.gsub('https://api.twilio.com/', '')\n    puts path\n    # add code to transfer to S3 here\n  end\nend\n</code></pre>\n\n<p>This works fine. When I add threading like this:</p>\n\n<pre><code>recordings.map do |recording|\n  Thread.new do\n    recording.mp3! do |file|\n      path = recording.mp3.gsub('https://api.twilio.com/', '')\n      puts path\n      # add code to transfer to S3 here\n    end\n  end\nend.each(&amp;:join)\n</code></pre>\n\n<p>Sometimes it works, and sometimes I get different errors each time I run it, like</p>\n\n<pre><code>/Users/michael/.rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:1452:in `begin_transport': undefined method `closed?' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>/Users/michael/.rubies/ruby-2.2.5/lib/ruby/2.2.0/net/protocol.rb:212:in `write0': undefined method `+' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/Users/michael/.rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:923: [BUG] Segmentation fault at 0x00000000000000\n</code></pre>\n\n<p>I've never used them before, so am I not using threads correctly? Or is this just an indicator that the <code>twilio-ruby</code> library isn't threadsafe?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1479840419, "post_id": 40749286, "comment_id": 68724660, "body": "Thank you for your reply. As I mentioned before, this environment was working few days ago. I cannot make the changes you are suggesting since the dev environmet has to match the production one."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 2, "creation_date": 1479841643, "post_id": 40749286, "comment_id": 68725396, "body": "What version of Chrome &amp; what version of chromedriver? Most of the EOFError I&#39;ve seen are a result of mismatched versions. I don&#39;t understand the dev vs production issue, since both will be independent of how you are black-box testing with Selenium."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1481294001, "post_id": 40749286, "comment_id": 69332260, "body": "During the OS upgrade the versions of few modules and Chrome got out of sync. After everything was brought to proper versions, Ruby started to operate properly. Thank you."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 1, "last_activity_date": 1479839956, "creation_date": 1479839956, "answer_id": 40749286, "question_id": 40748930, "link": "https://stackoverflow.com/questions/40748930/ruby-web-automation-is-failing/40749286#40749286", "title": "Ruby web automation is failing", "body": "<p>You are most likely not using the latest chromedriver (right now it is 2.25). Make sure you are getting the correct one here: <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a></p>\n\n<p>\"watir-webdriver\" code has been renamed to just be \"watir\", so you should upgrade to use Watir 6.0 with <code>require 'watir'</code></p>\n\n<p>Also, you can initialize a Watir::Browser without creating a driver first:</p>\n\n<pre><code>client = Selenium::WebDriver::Remote::Http::Default.new\nclient.timeout = 600\nswitches = %w[--disable-popup-blocking --disable-translate]\nb = Watir::Browser.new :chrome, {http_client: client, switches: switches}\n</code></pre>\n"}], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 40749286, "answer_count": 1, "score": 1, "last_activity_date": 1479844687, "creation_date": 1479838695, "last_edit_date": 1479844687, "question_id": 40748930, "link": "https://stackoverflow.com/questions/40748930/ruby-web-automation-is-failing", "title": "Ruby web automation is failing", "body": "<p>I have a Ruby automation script that used to work with selenium-webdriver and watir-webdriver on Linux.</p>\n\n<p>A few days ago, one of my scripts crashed and, since then, web automations stopped working.</p>\n\n<p>I am now getting the following error:</p>\n\n<pre><code>Headless display: :99\nD, [2016-11-22T12:59:42.668070 #16284] DEBUG -- : end of file reached (EOFError)\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/protocol.rb:153:in `read_nonblock'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/protocol.rb:153:in `rbuf_fill'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/protocol.rb:134:in `readuntil'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/protocol.rb:144:in `readline'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http/response.rb:39:in `read_status_line'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http/response.rb:28:in `read_new'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1414:in `block in transport_request'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1411:in `catch'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1411:in `transport_request'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1384:in `request'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1377:in `block in request'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:853:in `start'\n/home/batch/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:1375:in `request'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/http/default.rb:103:in `response_for'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/http/default.rb:57:in `request'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/http/common.rb:59:in `call'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/bridge.rb:653:in `raw_execute'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/bridge.rb:124:in `create_session'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/remote/bridge.rb:88:in `initialize'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/chrome/bridge.rb:41:in `initialize'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/common/driver.rb:61:in `new'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver/common/driver.rb:61:in `for'\n/home/batch/.rvm/gems/ruby-2.2.1/gems/selenium-webdriver-3.0.1/lib/selenium/webdriver.rb:82:in `for'\ntest.rb:18:in `&lt;main&gt;'\n</code></pre>\n\n<p>I tried to reinstall both selenium-webdriver and watir-webdriver gems and it did not help.</p>\n\n<p>I  compared all .rb files in the error message with the files on the production server and they are exactly the same.</p>\n\n<p>Here is the test code I am running:</p>\n\n<pre><code>#!/bin/ruby\n\nrequire 'rubygems'\nrequire 'watir-webdriver'\nrequire 'selenium-webdriver'\nrequire 'headless'\nrequire 'logger'\n\nheadless = Headless.new(autopick: true, reuse: false, destroy_at_exit: true).start\nputs \"Headless display: #{ENV['DISPLAY']}\"\n\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::DEBUG\n\nbegin\n    client = Selenium::WebDriver::Remote::Http::Default.new\n    client.timeout = 600 # seconds - default is 60\n    d = Selenium::WebDriver.for :chrome, :http_client =&gt; client, :switches =&gt; %w[--disable-popup-blocking --disable-translate]\n    b = Watir::Browser.new d\n\n    saved_cookies = b.cookies.to_a\n\n    site_url = 'https://www.google.com/'\n    puts site_url\n    b.goto site_url\n    sleep 2\n    b.close\n    exit\nrescue  =&gt; err\n      logger.debug(err)\nend\n</code></pre>\n\n<p>This code works fine on other servers.\nIt feels like something got corrupted, but I cannot figure out what.</p>\n"}, {"tags": ["ruby", "ldap"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1479844861, "post_id": 40748889, "comment_id": 68727096, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>. We&#39;d like to see the minimum example of what you tried rather than write an entire script from scratch that might or might not fit what you&#39;ve written. We could also inadvertently end up duplicating your code, wasting our time. &quot;What would be the easiest way&quot; kinda depends on what you&#39;ve already tried, right?"}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1479840072, "creation_date": 1479840072, "answer_id": 40749325, "question_id": 40748889, "link": "https://stackoverflow.com/questions/40748889/how-to-parse-ldap-into-ruby-data/40749325#40749325", "title": "how to parse LDAP into Ruby data?", "body": "<p>It's not pretty, but some regexes do the job quickly:</p>\n\n<pre><code>obj = {}\nusers = []\n\nldap_file.each_line do |line|\n  if line =~ /([^:]+): (.*?),?$/\n    obj[$1] = $2\n    if line =~ /,$/\n      users &lt;&lt; obj\n      obj = {}\n    end\n  else\n    warn \"Failed to match: #{line}\"\n  end\nend\n</code></pre>\n\n<p>A more elegant solution (though you need the whole text in memory at once)</p>\n\n<pre><code>users = ldap_text.split(/,\\s*/m).map do |grp|\n  grp.each_line.map { |line| line.strip.split(/:\\s*/) }.to_h\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6600, "user_id": 336945, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20d20227ee48cd31c4eb8582f058b4c7?s=128&d=identicon&r=PG", "display_name": "Rodrigo Souza", "link": "https://stackoverflow.com/users/336945/rodrigo-souza"}, "is_accepted": false, "score": 0, "last_activity_date": 1479840963, "last_edit_date": 1492087233, "creation_date": 1479840963, "answer_id": 40749597, "question_id": 40748889, "link": "https://stackoverflow.com/questions/40748889/how-to-parse-ldap-into-ruby-data/40749597#40749597", "title": "how to parse LDAP into Ruby data?", "body": "<p>I used a solution described in <a href=\"https://codereview.stackexchange.com/questions/80572/parsing-a-string-of-the-form-key1-value1key2-value2-into-a-hash\">Parsing a string of the form \u201ckey1=value1;key2=value2;\u201d into a Hash</a> using <a href=\"http://ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Hash[[key, value], \u2026]</a> definition since <em>Ruby 1.9</em></p>\n\n<pre><code>def to_hash(str)\n  Hash[\n    str.split(';').map do |pair|\n      k, v = pair.split('=', 2)\n      [k, v.to_i]\n    end\n  ]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1479955163, "last_edit_date": 1479955163, "creation_date": 1479845467, "answer_id": 40750753, "question_id": 40748889, "link": "https://stackoverflow.com/questions/40748889/how-to-parse-ldap-into-ruby-data/40750753#40750753", "title": "how to parse LDAP into Ruby data?", "body": "<pre><code>str =&lt;&lt;_\nuid: angelica\ncn: Angelica Turaca\nhomeDirectory: /home/exaluno/angelica\nmail: angelica@linux.ime.usp.br,\n\nuid: ljunior\ncn: Lourinaldo Anastacio da Silva Junior\nhomeDirectory: /home/exaluno/ljunior\nmail: ljunior@linux.ime.usp.br,\n\nuid: acvm\ncn: Ana Cristina Vieira de Melo\nhomeDirectory: /home/prof/acvm\nmail: acvm@linux.ime.usp.br,\n_\n\nusers = str.split(/\\n\\n+/).each_with_object([]) do |s,a|\n  a &lt;&lt; s.each_line.with_object({}) do |line,h|\n    k,v = line.strip.split(/:\\s*/)\n    h[k] = v\n  end\nend\n  #=&gt; [{ \"uid\"=&gt;\"angelica\", \"cn\"=&gt;\"Angelica Turaca\",\n  #      \"homeDirectory\"=&gt;\"/home/exaluno/angelica\", \n  #      \"mail\"=&gt;\"angelica@linux.ime.usp.br,\"},\n  #    { \"uid\"=&gt;\"ljunior\", \"cn\"=&gt;\"Lourinaldo Anastacio da Silva Junior\",\n  #      \"homeDirectory\"=&gt;\"/home/exaluno/ljunior\",\n  #      \"mail\"=&gt;\"ljunior@linux.ime.usp.br,\"},\n  #    { \"uid\"=&gt;\"acvm\", \"cn\"=&gt;\"Ana Cristina Vieira de Melo\",\n  #      \"homeDirectory\"=&gt;\"/home/prof/acvm\", \"mail\"=&gt;\"acvm@linux.ime.usp.br,\"}]   \n\nusers[0]['uid']   #=&gt; \"angelica\"\nusers[1]['mail']  #=&gt; \"ljunior@linux.ime.usp.br,\"\n</code></pre>\n\n<p>If you don't want the comma at the end of the last return value, that's easily dealt with.</p>\n"}], "owner": {"reputation": 6600, "user_id": 336945, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20d20227ee48cd31c4eb8582f058b4c7?s=128&d=identicon&r=PG", "display_name": "Rodrigo Souza", "link": "https://stackoverflow.com/users/336945/rodrigo-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 40749325, "answer_count": 3, "score": 0, "last_activity_date": 1479955163, "creation_date": 1479838531, "question_id": 40748889, "link": "https://stackoverflow.com/questions/40748889/how-to-parse-ldap-into-ruby-data", "title": "how to parse LDAP into Ruby data?", "body": "<p>I'm trying consume a LDAP database of users that I have and I already made some previous text processing so that I have a text like this:</p>\n\n<pre><code>uid: angelica\ncn: Angelica Turaca\nhomeDirectory: /home/exaluno/angelica\nmail: angelica@linux.ime.usp.br,\n\nuid: ljunior\ncn: Lourinaldo Anastacio da Silva Junior\nhomeDirectory: /home/exaluno/ljunior\nmail: ljunior@linux.ime.usp.br,\n\nuid: acvm\ncn: Ana Cristina Vieira de Melo\nhomeDirectory: /home/prof/acvm\nmail: acvm@linux.ime.usp.br,\n</code></pre>\n\n<p>It contains all data that I want to have. I just would like to transform it into something like:</p>\n\n<pre><code>users[0]['uid'] #angelica\nusers[1]['mail'] #ljunior@linux.ime.usp.br\n</code></pre>\n\n<p>What would be the easiest way?</p>\n"}, {"tags": ["ruby", "string"], "answers": [{"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": false, "score": 5, "last_activity_date": 1479838547, "creation_date": 1479838547, "answer_id": 40748895, "question_id": 40748813, "link": "https://stackoverflow.com/questions/40748813/stuck-in-abbreviation-implementation-to-ruby-string/40748895#40748895", "title": "Stuck in Abbreviation implementation to ruby string", "body": "<p>Your mistake is that your second parameter is a substitution string operating on <code>x</code> (the original entire string) as a whole.</p>\n\n<p>Instead of using the form of <code>gsub</code> where the second parameter is a substitution string, use the form of <code>gsub</code> where the second parameter is a <em>block</em> (listed, for example, third on <a href=\"https://ruby-doc.org/core-2.1.4/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">this page</a>). Now you are receiving <em>each substring</em> into your block and can operate on <em>that</em> substring individually.</p>\n"}, {"tags": [], "owner": {"reputation": 1387, "user_id": 3981789, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OO3JI.jpg?s=128&g=1", "display_name": "Rockster160", "link": "https://stackoverflow.com/users/3981789/rockster160"}, "is_accepted": false, "score": 1, "last_activity_date": 1479838851, "creation_date": 1479838851, "answer_id": 40748970, "question_id": 40748813, "link": "https://stackoverflow.com/questions/40748813/stuck-in-abbreviation-implementation-to-ruby-string/40748970#40748970", "title": "Stuck in Abbreviation implementation to ruby string", "body": "<p>I would recommend something along the lines of this:</p>\n\n<pre><code>class Abbreviator\n  def self.abbreviate(x)\n    x.gsub(/\\w+/) do |word|\n      # Skip the word unless it's long enough\n      next word unless word.length &gt; 4\n      # Do the same I18n conversion you do before\n      \"#{word[0]}#{(word.length-2)}#{word[-1]}\"\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479873952, "post_id": 40750332, "comment_id": 68737253, "body": "Thanks to @KirillZhuravlov for flagging a mistake I made."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1479874345, "post_id": 40750332, "comment_id": 68737357, "body": "I initially thought the conversion only applied to words or hyphenated words. I&#39;ve modified my answer to deal with strings."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1479874297, "last_edit_date": 1479874297, "creation_date": 1479843793, "answer_id": 40750332, "question_id": 40748813, "link": "https://stackoverflow.com/questions/40748813/stuck-in-abbreviation-implementation-to-ruby-string/40750332#40750332", "title": "Stuck in Abbreviation implementation to ruby string", "body": "<pre><code>def short_form(str)\n  str.gsub(/[[:alpha:]]{4,}/) { |s| \"%s%d%s\" % [s[0], s.size-2, s[-1]] }\nend\n</code></pre>\n\n<p>The regex reads, \"match four or more alphabetic characters\".</p>\n\n<pre><code>short_form \"abc\"          # =&gt; \"abc\" \nshort_form \"a-b-c\"        #=&gt; \"a-b-c\" \nshort_form \"cats\"         #=&gt; \"c2s\" \nshort_form \"two-ponies-c\" #=&gt; \"two-p4s-c\" \nshort_form \"Humpty-Dumpty, who sat on a wall, fell over\"\n  #=&gt; \"H4y-D4y, who sat on a w2l, f2l o2r\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "edited": false, "score": 0, "creation_date": 1479853252, "post_id": 40751170, "comment_id": 68731518, "body": "I believe that this answer is more complete"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1479875200, "post_id": 40751170, "comment_id": 68737587, "body": "The question is not clear on which characters can be in the string that is converted. They might be alphabetic characters, alphanumeric characters, or all characters, but I doubt that they would be  &quot;word characters&quot; (<code>\\w</code>), considering that <code>&quot;_______&quot;str.gsub(&#47;(\\w)(\\w{3,})(\\w)&#47;) { &quot;#{$1}#{$2.size}#{$3}&quot; } #=&gt; &quot;_5_&quot;</code>. If <code>&quot;_5_&quot;</code> is OK, then why not <code>&quot;-5-&quot;</code>?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479877771, "post_id": 40751170, "comment_id": 68738319, "body": "@CarySwoveland OP used <code>\\w</code> in their own code, so I made a deductive leap."}, {"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1479909203, "post_id": 40751170, "comment_id": 68756772, "body": "@CarySwoveland You are right, my question was not fully clean. I will change it."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1479913765, "last_edit_date": 1479913765, "creation_date": 1479847105, "answer_id": 40751170, "question_id": 40748813, "link": "https://stackoverflow.com/questions/40748813/stuck-in-abbreviation-implementation-to-ruby-string/40751170#40751170", "title": "Stuck in Abbreviation implementation to ruby string", "body": "<p>The accepted answer isn't bad, but it can be made a lot simpler by not matching words that are too short in the first place:</p>\n\n<pre><code>def abbreviate(str)\n  str.gsub(/([[:alpha:]])([[:alpha:]]{3,})([[:alpha:]])/i) { \"#{$1}#{$2.size}#{$3}\" }\nend\n\nabbreviate(\"You, and I, should speak.\")\n# =&gt; \"You, and I, s4d s3k.\"\n</code></pre>\n\n<p>Alternatively, we can use lookbehind and lookahead, which makes the Regexp more complex but the substitution simpler:</p>\n\n<pre><code>def abbreviate(str)\n  str.gsub(/(?&lt;=[[:alpha:]])[[:alpha:]]{3,}(?=[[:alpha:]])/i, &amp;:size)\nend\n</code></pre>\n"}], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 40750332, "answer_count": 4, "score": 0, "last_activity_date": 1479913765, "creation_date": 1479838216, "last_edit_date": 1479909251, "question_id": 40748813, "link": "https://stackoverflow.com/questions/40748813/stuck-in-abbreviation-implementation-to-ruby-string", "title": "Stuck in Abbreviation implementation to ruby string", "body": "<p>I want to convert all the words(alphabetic) in the string to their abbreviations like i18n does.  In other words I want to change <code>\"extraordinary\"</code> into \"e11y\" because there are 11 characters between the first and the last letter in <code>\"extraordinary\"</code>. It  works with a single word in  the string. But how can I do the same for a multi-word string? And of course if a word is <code>&lt;= 4</code> there is  no point to make an abbreviation from it. </p>\n\n<pre><code>class Abbreviator\n\n  def self.abbreviate(x)\n    x.gsub(/\\w+/, \"#{x[0]}#{(x.length-2)}#{x[-1]}\")\n  end\n\nend\n\nTest.assert_equals( Abbreviator.abbreviate(\"banana\"), \"b4a\", Abbreviator.abbreviate(\"banana\") )\nTest.assert_equals( Abbreviator.abbreviate(\"double-barrel\"), \"d4e-b4l\", Abbreviator.abbreviate(\"double-barrel\") )\nTest.assert_equals( Abbreviator.abbreviate(\"You, and I, should speak.\"), \"You, and I, s4d s3k.\", Abbreviator.abbreviate(\"You, and I, should speak.\") )\n</code></pre>\n"}, {"tags": ["ruby", "session", "ruby-on-rails-4", "actioncontroller"], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 6137628, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/12da01c603d3b807ff8d3e8c53efe89e?s=128&d=identicon&r=PG", "display_name": "Sherwood Callaway", "link": "https://stackoverflow.com/users/6137628/sherwood-callaway"}, "reply_to_user": {"reputation": 397, "user_id": 2610292, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/77449070823d66b0d75969004552316b?s=128&d=identicon&r=PG", "display_name": "Dashing Boy", "link": "https://stackoverflow.com/users/2610292/dashing-boy"}, "edited": false, "score": 0, "creation_date": 1479843683, "post_id": 40749128, "comment_id": 68726431, "body": "Okay. You could also try adding <code>include Rails.application.routes.url_helpers</code> to the <code>SessionsController</code>. If that doesn&#39;t work, I&#39;ll keep looking!"}, {"owner": {"reputation": 1130, "user_id": 6137628, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/12da01c603d3b807ff8d3e8c53efe89e?s=128&d=identicon&r=PG", "display_name": "Sherwood Callaway", "link": "https://stackoverflow.com/users/6137628/sherwood-callaway"}, "reply_to_user": {"reputation": 397, "user_id": 2610292, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/77449070823d66b0d75969004552316b?s=128&d=identicon&r=PG", "display_name": "Dashing Boy", "link": "https://stackoverflow.com/users/2610292/dashing-boy"}, "edited": false, "score": 0, "creation_date": 1479843952, "post_id": 40749128, "comment_id": 68726571, "body": "One other thing I noticed is, the user authentication block"}], "tags": [], "owner": {"reputation": 1130, "user_id": 6137628, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/12da01c603d3b807ff8d3e8c53efe89e?s=128&d=identicon&r=PG", "display_name": "Sherwood Callaway", "link": "https://stackoverflow.com/users/6137628/sherwood-callaway"}, "is_accepted": false, "score": -1, "last_activity_date": 1479844194, "last_edit_date": 1479844194, "creation_date": 1479839409, "answer_id": 40749128, "question_id": 40748541, "link": "https://stackoverflow.com/questions/40748541/ruby-on-rails-throws-error-wihen-redirects-to-root-path-or-login-path/40749128#40749128", "title": "Ruby on Rails throws error wihen redirects to root_path or login_path", "body": "<p>Have you tried using <code>root_url</code> instead of <code>root_path</code> in your <code>SessionsController</code>? </p>\n\n<p>HTTP requires a fully qualified URL when doing a 302 redirect. The <code>_url</code> method provides an absolute path, including protocol and server name. The <code>_path</code> method provides a relative path, while assuming the same server and protocol as the current URL.</p>\n\n<p>Try switching to <code>root_url</code> and let me know if anything changes!</p>\n\n<p><strong>Edit:</strong> The reason I suggest using an absolute path is because you mentioned the redirect was working fine with just one table, before you added another table and nested routes. </p>\n\n<p><strong>Edit:</strong> One other thing I noticed is the authentication block below is not placed within the <code>sessions#create</code> route, as you would expect.</p>\n\n<pre><code>if @user &amp;&amp; @user.authenticate(password)\n  session[:user_id] = @user.id\n  redirect_to root_path, notice: \"Logged in successfully\"\nelse \n  redirect_to login_path, alert: \"Invalid Username/Password combination\"\nend\n</code></pre>\n\n<p>Is there a reason it exists outside of a method? Try moving it back inside the create route.</p>\n"}, {"tags": [], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "is_accepted": false, "score": 0, "last_activity_date": 1479844467, "creation_date": 1479844467, "answer_id": 40750488, "question_id": 40748541, "link": "https://stackoverflow.com/questions/40748541/ruby-on-rails-throws-error-wihen-redirects-to-root-path-or-login-path/40750488#40750488", "title": "Ruby on Rails throws error wihen redirects to root_path or login_path", "body": "<p>Your logic for redirecting is outside of the method block:</p>\n\n<pre><code>if @user &amp;&amp; @user.authenticate(password)\n    session[:user_id] = @user.id\n    redirect_to root_path, notice: \"Logged in successfully\"\n  else \n    redirect_to login_path, alert: \"Invalid Username/Password combination\"\n end\n</code></pre>\n\n<p>That code should be before the final <code>end</code> of the <code>create</code> method</p>\n"}, {"tags": [], "owner": {"reputation": 604, "user_id": 1797492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfe82bba479fd0e91b8353038f9355?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/1797492/andr%c3%a9s"}, "is_accepted": true, "score": 0, "last_activity_date": 1479847234, "creation_date": 1479847234, "answer_id": 40751205, "question_id": 40748541, "link": "https://stackoverflow.com/questions/40748541/ruby-on-rails-throws-error-wihen-redirects-to-root-path-or-login-path/40751205#40751205", "title": "Ruby on Rails throws error wihen redirects to root_path or login_path", "body": "<p>I think the code is not in <code>create</code> method, and root_path is not a class method, is an instance method:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    @user = User.find_by(username: params[:username])\n    @password = params[:password]\n  end # &lt;--- here create method finish. Where this end comes from?\n\n  if @user &amp;&amp; @user.authenticate(password)\n    session[:user_id] = @user.id\n    # root_path is defined for an instance\n    # of a controller, not for the class\n    redirect_to root_path, notice: \"Logged in successfully\"\n  else \n    redirect_to login_path, alert: \"Invalid Username/Password combination\"\n  end\n\n  def destroy\n    reset_session\n    redirect_to login_path, notice: \"You have been logged out\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 2610292, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/77449070823d66b0d75969004552316b?s=128&d=identicon&r=PG", "display_name": "Dashing Boy", "link": "https://stackoverflow.com/users/2610292/dashing-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 40751205, "answer_count": 3, "score": 0, "last_activity_date": 1479847234, "creation_date": 1479837297, "question_id": 40748541, "link": "https://stackoverflow.com/questions/40748541/ruby-on-rails-throws-error-wihen-redirects-to-root-path-or-login-path", "title": "Ruby on Rails throws error wihen redirects to root_path or login_path", "body": "<p>I made a simple application that interacts with DB and perform CRUD operations in it after authenticating and authorizing a user. It used to work when there was a single table but as soon as I started playing with nested relations and authentication mechanism I get the error. So far I think I have done everything right. Here's the screenshot of the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SwLWU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SwLWU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's my routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n root to: \"todo_lists#index\"\n\n   resources :todo_lists do\n    resources :todo_items\n  end\n\n  resources :sessions, only: [:new, :create, :destroy]\n  get \"/login\" =&gt; \"sessions#new\", as: \"login\"\n  delete \"/logout\" =&gt; \"sessions#destroy\", as: \"logout\"\nend\n</code></pre>\n\n<p>My session controller:</p>\n\n<pre><code>    class SessionsController &lt; ApplicationController\n      def new\n      end\n\n      def create\n        @user = User.find_by(username: params[:username])\n        @password = params[:password]\n      end\n\n      if @user &amp;&amp; @user.authenticate(password)\n        session[:user_id] = @user.id\n        redirect_to root_path, notice: \"Logged in successfully\"\n      else \n        redirect_to login_path, alert: \"Invalid Username/Password combination\"\n      end\n\n      def destroy\n        reset_session\n        redirect_to login_path, notice: \"You have been logged out\"\n      end\n    end\n</code></pre>\n\n<p>Oh and I modified the ApplicationController so the routes should work nonetheless:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n\n  before_action :ensure_login\n  helper_method :logged_in?, :current_user\n\n  protected\n      def ensure_login\n        redirect_to login_path unless session[:user_id]\n      end\n\n      def logged_in?\n        session[:user_id]\n      end\n\n      def current_user\n        @current_user ||= User.find(session[:user_id])\n      end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1479838208, "post_id": 40748421, "comment_id": 68723277, "body": "The error doesn&#39;t say that there&#39;s no <code>create</code> method. It says there&#39;s no method named <code>Request</code>. What is the value of <code>request_params</code>?"}, {"owner": {"reputation": 185, "user_id": 3121794, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1855950e35fe9bb47c791488958f2c21?s=128&d=identicon&r=PG&f=1", "display_name": "CS2016", "link": "https://stackoverflow.com/users/3121794/cs2016"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1479838748, "post_id": 40748421, "comment_id": 68723611, "body": "It should be the <code>:description</code> that the user submits. It&#39;s used as <code>@request = Request.new(request_params)</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1479838814, "post_id": 40748421, "comment_id": 68723651, "body": "If things were always as they should be, we would never have bugs. What is the <i>actual</i> value?"}, {"owner": {"reputation": 185, "user_id": 3121794, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1855950e35fe9bb47c791488958f2c21?s=128&d=identicon&r=PG&f=1", "display_name": "CS2016", "link": "https://stackoverflow.com/users/3121794/cs2016"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1479839353, "post_id": 40748421, "comment_id": 68723999, "body": "It&#39;s not getting a value passed to it from the form.html.erb."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1479841505, "post_id": 40749727, "comment_id": 68725317, "body": "If you really have to use <code>Request</code> then call your variable <code>@the_request</code> and always resolve it from the base namespace <code>::Request</code> to avoid collisions. But that just stinks of poor design."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1479841405, "creation_date": 1479841405, "answer_id": 40749727, "question_id": 40748421, "link": "https://stackoverflow.com/questions/40748421/rails-nomethod-error/40749727#40749727", "title": "Rails nomethod error", "body": "<p>Using Request (or Response) as the name of a model is not a very good idea since you will end up shadowing the <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Request.html\" rel=\"nofollow noreferrer\">request object</a>. Which is a core part of Rails controllers.</p>\n\n<p>It will also make it very confusing to reason about your code since it will collide with a core concept in MVC and web development in general.</p>\n\n<p>Use a <a href=\"http://www.thesaurus.com/browse/request\" rel=\"nofollow noreferrer\">thesaurus</a> and find another name for your model.</p>\n"}], "owner": {"reputation": 185, "user_id": 3121794, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1855950e35fe9bb47c791488958f2c21?s=128&d=identicon&r=PG&f=1", "display_name": "CS2016", "link": "https://stackoverflow.com/users/3121794/cs2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1479894964, "creation_date": 1479836835, "last_edit_date": 1479894964, "question_id": 40748421, "link": "https://stackoverflow.com/questions/40748421/rails-nomethod-error", "title": "Rails nomethod error", "body": "<p>I'm new to Rails and am trying to create an application that takes a user request. However this is what is happening when I am trying to create a new request.</p>\n\n<p><strong>Request Controller:</strong></p>\n\n<pre><code>class RequestsController &lt; ApplicationController\n  before_action :set_request, only: [:show, :edit, :update, :destroy]\n\n  # GET /requests\n  # GET /requests.json\n  def index\n    @requests = Request.all\n  end\n\n  # GET /requests/1\n  # GET /requests/1.json\n  def show\n\n  end\n\n  # GET /requests/new\n  def new\n    @request = Request.new\n\n  end\n\n  # GET /requests/1/edit\n  def edit\n  end\n\n  # POST /requests\n  # POST /requests.json\n  def create\n    @request = Request.new(request_params)\n\n    respond_to do |format|\n      if @request.save # &lt;-------------- The problem is here\n        format.html { redirect_to @request, notice: 'Request was successfully created.' }\n        format.json { render :show, status: :created, location: @request }\n      else\n        format.html { render :new }\n        format.json { render json: @request.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /requests/1\n  # PATCH/PUT /requests/1.json\n  def update\n    respond_to do |format|\n      if @request.update(request_params)\n        format.html { redirect_to @request, notice: 'Request was successfully updated.' }\n        format.json { render :show, status: :ok, location: @request }\n      else\n        format.html { render :edit }\n        format.json { render json: @request.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /requests/1\n  # DELETE /requests/1.json\n  def destroy\n    @request.destroy\n    respond_to do |format|\n      format.html { redirect_to requests_url, notice: 'Request was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_request\n      @request = Request.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def request_params\n      params.require(:request).permit(:user_id, :description, :created)\n    end\nend\n</code></pre>\n\n<p>The error says there is no \"Create\" method in the requests controller, however the method that is saying this is the create method. I think that a problem is that my view isn't passing the description as a parameter and I'm not sure how to do that/why it's not already. </p>\n\n<p><strong>_form.html.erb (Rendered by edit.html.erb):</strong></p>\n\n<pre><code>%= form_for(@request) do |f| %&gt;\n  &lt;% if @request.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@request.errors.count, \"error\") %&gt; prohibited this request from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @request.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;center&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label 'Describe your favor' %&gt;&lt;br&gt;\n    &lt;%= f.text_area :description %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n  &lt;/center&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If someone could show me how to pass the description object as a parameter to my create method and get the method to not crash.</p>\n\n<p><strong>Here is the error log:</strong></p>\n\n<pre><code>NoMethodError (undefined method `Request' for #&lt;Request:0x007f9fbd8992e8&gt;):\n  app/controllers/requests_controller.rb:32:in `block in create'\n  app/controllers/requests_controller.rb:31:in `create'\n\n\n  Rendered /usr/local/rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.9ms)\n  Rendered /usr/local/rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)\n  Rendered /usr/local/rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)\n  Rendered /usr/local/rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (29.4ms)\n</code></pre>\n"}]