[{"tags": ["ruby"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1550701817, "post_id": 54796111, "comment_id": 96370447, "body": "Here&#39;s a link to the docs: <a href=\"https://ruby-doc.org/core-2.6/Array.html#method-i-each\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6/Array.html#method-i-each</a>.  It has an example that seems close to what you are trying to accomplish."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550704092, "post_id": 54796111, "comment_id": 96371218, "body": "Considering that knowledge of both Python and Ruby are needed to answer your question, you should add a &quot;python&quot; tag. That will also greatly expand the number of members that see your question."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550708685, "post_id": 54796221, "comment_id": 96372415, "body": "...or puts <code>[1,2,3,4,5]</code>. I initially interpreted the question as you did, but I think the OP wants to know how to display two consecutive elements per &quot;Iteration&quot;, when using an enumerator."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1550701638, "creation_date": 1550701638, "answer_id": 54796221, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby/54796221#54796221", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p>You're just trying to print each element of the Array?</p>\n\n<pre><code>[1,2,3,4,5].each {|n| puts n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1550701923, "post_id": 54796232, "comment_id": 96370488, "body": "This is basically the same code as OP already had. <code>[1,2,3].to_enum</code> and <code>[1,2,3].each</code> with no block are functionally equivalent."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1602492"}, "edited": false, "score": 1, "creation_date": 1550703644, "post_id": 54796232, "comment_id": 96371092, "body": "The documentation says that calling next &quot;returns the next object in the enumerator, and moves the internal position forward.&quot; The point is that in your and my  example calling next inside the for loop doesn&#39;t change the position. That&#39;s why you get 2 and 3 twice..."}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1550705573, "post_id": 54796232, "comment_id": 96371657, "body": "@marcus are you just looking for <a href=\"https://ruby-doc.org/core-2.5.3/Enumerator.html#method-i-peek\" rel=\"nofollow noreferrer\">Enum#peek</a>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550707118, "post_id": 54796232, "comment_id": 96372035, "body": "<code>arr</code> is perhaps not the best name for an enumerator."}], "tags": [], "owner": {"reputation": 16009, "user_id": 1407656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aFPUN.png?s=128&g=1", "display_name": "toniedzwiedz", "link": "https://stackoverflow.com/users/1407656/toniedzwiedz"}, "is_accepted": false, "score": 0, "last_activity_date": 1550701671, "creation_date": 1550701671, "answer_id": 54796232, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby/54796232#54796232", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p>If you're looking for a direct equivalent of <a href=\"https://docs.python.org/3/glossary.html#term-iterator\" rel=\"nofollow noreferrer\">Python's iterator</a>, you should check out <a href=\"https://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\"><code>Enumerator#next</code></a> for a very similar API</p>\n\n<pre><code>arr = [1, 2, 3].to_enum\n#&lt;Enumerator: [1, 2, 3]:each&gt;\narr.next\n# 1\n\nfor x in arr do\n    puts x\n    puts arr.next\nend\n\n#1\n#2\n#2\n#3\n#3\n#StopIteration: iteration reached an end\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550706342, "post_id": 54796305, "comment_id": 96371864, "body": "<code>1</code> has gone astray."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550734375, "post_id": 54796305, "comment_id": 96379733, "body": "@CarySwoveland yes, but I mentioned it :) It depends on the usage. If developer knows the language boundaries there would be no any anomaly."}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1550702025, "creation_date": 1550702025, "answer_id": 54796305, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby/54796305#54796305", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p><code>each_cons</code> is what you need. But this method has a downside that is the <code>current</code> will not print last element of the array. Please keep in mind this. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[1,2,3,4,5].each_cons(2) { |current,next_val| puts next_val }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550745470, "post_id": 54797168, "comment_id": 96386379, "body": "<i>&quot;except Ruby keeps track of the position of the enumerator internally&quot;</i> \u2013 what do you mean by that?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1602492"}, "edited": false, "score": 0, "creation_date": 1550760727, "post_id": 54797168, "comment_id": 96396401, "body": "Calling n.next() inside the for loop doesn&#39;t change the position of the for loop&#39;s Enumerator."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1550734783, "last_edit_date": 1550734783, "creation_date": 1550707369, "answer_id": 54797168, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby/54797168#54797168", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p>You have the right idea except Ruby keeps track of the position of the enumerator internally. Try this:</p>\n\n<pre><code>enum = [1,2,3,4,5].each\n  #=&gt; #&lt;Enumerator: [1, 2, 3, 4, 5]:each&gt;    \nloop do\n  puts enum.next\n  puts enum.next\nend\n1\n2\n3\n4\n5\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a> raises a <em>StopInteration</em> exception when invoked after all elements of the enumerator <code>enum</code> have been generated. <a href=\"http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-loop\" rel=\"nofollow noreferrer\">Kernel#loop</a> handles the exception by breaking out of the loop.</p>\n\n<p>Note that <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Array#each</a>, without the optional block, has the same effect as <a href=\"https://ruby-doc.org/core-2.6.1/Object.html#method-i-to_enum\" rel=\"nofollow noreferrer\">Object#to_enum</a>. Also, though authors of Ruby books feel an obligation to cover <code>for</code> loops (seemingly, on page one), they are <em>never</em> used in practice.  </p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1550733598, "last_edit_date": 1550733598, "creation_date": 1550708327, "answer_id": 54797303, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby/54797303#54797303", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p>In Python the <a href=\"https://docs.python.org/3.7/glossary.html#term-iterator\" rel=\"nofollow noreferrer\">iterator</a> <code>n</code> obtained applying the function <a href=\"https://docs.python.org/3.7/library/functions.html#iter\" rel=\"nofollow noreferrer\">iter()</a> <strong>can be consumed once</strong>.</p>\n\n<pre><code>array = [1,2,3,4,5]\nn = iter(array)\n\nfor x in n:\n  print(x)\n\n# 1\n# 2\n# 3\n# 4\n# 5\n</code></pre>\n\n<p>If you then call <code>next(n)</code> you get no output but error: <a href=\"https://docs.python.org/3.7/library/exceptions.html#StopIteration\" rel=\"nofollow noreferrer\">StopIteration</a>. If you try to iterate n again you get no output (no error, the for loop hanldes the exception).</p>\n\n<p>But you can iterate over the array:</p>\n\n<pre><code>for x in array:\n  print(x)\n</code></pre>\n\n<p>If you <strong>check the output a code like yours</strong>, you get:</p>\n\n<pre><code>n = iter([1,2,3,4,5])\nfor x in n:\n  print('odd_', x)\n  y = next(n)\n  print('even', y)\n\n# odd_ 1\n# even 2\n# odd_ 3\n# even 4\n# odd_ 5\n\n# StopIteration\n</code></pre>\n\n<hr>\n\n<p>As pointed by @toniedzwiedz <a href=\"https://ruby-doc.org/core-2.6.1/Object.html#method-i-to_enum\" rel=\"nofollow noreferrer\">Object#to_enum</a> is the equivalent for the Python <code>iter()</code>, so you can call <a href=\"https://ruby-doc.org/core-2.6.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a> on it.</p>\n\n<p>In <strong>Ruby you can consume more than once</strong> the enumerator:</p>\n\n<pre><code>array = [1, 2, 3, 4, 5]\nn = array.to_enum\n# n = array.each # each returns an Enumerable\n\nfor x in n do\n    puts x\nend\n\nfor x in n do\n    puts x\nend\n</code></pre>\n\n<p>Since you can consume more than once the enumerator <strong>you get \"double\" output</strong>:</p>\n\n<pre><code>for x in n do\n    p x\n    p n.next\nend\n</code></pre>\n\n<p>Or using <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Array#each</a>:</p>\n\n<pre><code>n.each do |x| # same as array.each.each\n  p x\n  p n.next\nend\n</code></pre>\n\n<p>Also in Ruby you reach end the iteration signal:</p>\n\n<pre><code>6.times do\n  p n.next\nend\n# `next': iteration reached an end (StopIteration)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1602492"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 54797168, "answer_count": 5, "score": 1, "last_activity_date": 1550734783, "creation_date": 1550701122, "question_id": 54796111, "link": "https://stackoverflow.com/questions/54796111/whats-pythons-next-in-ruby", "title": "What&#39;s Python&#39;s next() in Ruby?", "body": "<p>I am currently learning Ruby and am lost a bit.</p>\n\n<p>This Python snippet:</p>\n\n<pre><code>n = iter([1,2,3,4,5])\nfor x in n:\n  print(x)\n  y = next(n)\n  print(y)\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>And I'm trying to do the same in Ruby, which is not working:</p>\n\n<pre><code>n = [1,2,3,4,5].each\n\nfor x in n do\n  puts x\n  y = n.next()\n  puts y\nend\n</code></pre>\n\n<p>How do I need to write the Python example in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 3439190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OC6w4.jpg?s=128&g=1", "display_name": "jhnatr", "link": "https://stackoverflow.com/users/3439190/jhnatr"}, "edited": false, "score": 0, "creation_date": 1568823111, "post_id": 54798243, "comment_id": 102400346, "body": "Thanks! This drives me nuts but it makes sense."}], "tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": true, "score": 1, "last_activity_date": 1550715737, "creation_date": 1550715737, "answer_id": 54798243, "question_id": 54795634, "link": "https://stackoverflow.com/questions/54795634/why-is-activesupporttimewithzoneto-f-returning-greater-precision-than-what-is/54798243#54798243", "title": "Why is ActiveSupport::TimeWithZone#to_f returning greater precision than what is stored in postgres?", "body": "<p>Because Ruby's <code>inspect</code> as you see just prints out the value in the decimal form, converted from the internally stored form, which is a binary, and its representation has not much to do with its internal precision and absolutely nothing to do with the precision of the value stored in the database before it is imported to the Ruby object instance.</p>\n\n<p>To demonstrate (a part of) the point, try <code>f=0.1000; p f</code> in irb or rails console. It just print \"0.1\" and <em>not</em> \"0.1000\".</p>\n"}], "owner": {"reputation": 363, "user_id": 3439190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OC6w4.jpg?s=128&g=1", "display_name": "jhnatr", "link": "https://stackoverflow.com/users/3439190/jhnatr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 54798243, "answer_count": 1, "score": 0, "last_activity_date": 1550715737, "creation_date": 1550698767, "question_id": 54795634, "link": "https://stackoverflow.com/questions/54795634/why-is-activesupporttimewithzoneto-f-returning-greater-precision-than-what-is", "title": "Why is ActiveSupport::TimeWithZone#to_f returning greater precision than what is stored in postgres?", "body": "<p>I have a Rails 5.2 application with a postgres backend. When I pull a timestamp from the database and convert it to a float (<code>to_f</code>), it should return the time in seconds with fractional seconds down to the microsecond (since the greatest precision postgres stores is microseconds). Instead, for about 25% of the timestamps I look at, I get 7 decimal digits (hundredths of nanoseconds) when converting timestamps to float. </p>\n\n<pre><code>irb(main):009:0&gt; u.created_at.to_f\n=&gt; 1440127129.5120609\n</code></pre>\n\n<p>What's going on here? Shouldn't this be <code>1440127129.512060</code> or <code>1440127129.512061</code>? Where is this extra decimal digit coming from? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio", "twilio-api"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 1438771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24e278f449bd439003619c695bb6680?s=128&d=identicon&r=PG", "display_name": "korada", "link": "https://stackoverflow.com/users/1438771/korada"}, "is_accepted": false, "score": 0, "last_activity_date": 1550700963, "creation_date": 1550700963, "answer_id": 54796076, "question_id": 54794586, "link": "https://stackoverflow.com/questions/54794586/twilio-responding-to-user-input-with-multiple-distinct-messages/54796076#54796076", "title": "Twilio: Responding to user input with multiple distinct messages", "body": "<p>I think your question is more on how to design synchronous(webhook response) vs asynchronous responses/messages. I have not used twiml but the concepts are same.</p>\n\n<p>If you don't want to use a background job, then send fir N-1 messages using API with time delay in between, and the last message as response.</p>\n\n<p>If you are OK with using background jobs, then send 1st message as response and queue a job for sending the remaining messages using API.</p>\n"}], "owner": {"reputation": 1, "user_id": 5781667, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153167088706086/picture?type=large", "display_name": "Jonah Price", "link": "https://stackoverflow.com/users/5781667/jonah-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550700963, "creation_date": 1550693826, "question_id": 54794586, "link": "https://stackoverflow.com/questions/54794586/twilio-responding-to-user-input-with-multiple-distinct-messages", "title": "Twilio: Responding to user input with multiple distinct messages", "body": "<p>I'm working on a twilio-programable-sms chatbot that needs to provide a good chunk of information to a user at the outset of the first conversation. Currently, what we've written is about 562 characters. For some of our users, this gets broken up into chunks of 160 characters that do not necessarily show up in their SMS app in the right order.</p>\n\n<p>To account for this, we're trying to break our message down into 160 character or less distinct messages that each send one-after-the-other. </p>\n\n<p>However, my teammates and I are currently unsure how to accomplish this. Our application is currently written to provide a twiml response for each message that is received from a user. I've been unable to find a way to create a twiml response that indicates a number of consecutive messages, and the theoretical solutions we've come up with feel hacky and flawed.</p>\n\n<p>To demonstrate, currently our code looks like this. As you can see, when a new user sends in the keyword \"start\" we join 4 messages together in one long text response. However we'd like each message to be sent individually, one after the other, about a second or two apart. </p>\n\n<pre><code>    case @body\n    when \"start\"\n      if !!@user\n        CreateMessage::SubscriptionMessage.triage_subscribable_type(!!@user)\n      else\n        [\n          CreateMessage::AlphaMessage.personalized_welcome(@conversation.from, true),\n          CreateMessage::SubscriptionMessage.introduce_bcd,\n          CreateMessage::SubscriptionMessage.for_example,\n          CreateMessage::SubscriptionMessage.intvite_to_start\n        ].join(\"\\n\\n\")\n      end\n</code></pre>\n\n<p>We'd like to avoid creating a background worker/cron job, if possible - but welcome any and all suggested solutions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "post"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1550689371, "post_id": 54793491, "comment_id": 96365064, "body": "How&#39;s your route defined in <code>config&#47;routes.rb</code>?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550689658, "post_id": 54793491, "comment_id": 96365201, "body": "Would you share the corresponding route in <code>config&#47;routes.rb</code> ?"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1550689885, "post_id": 54793491, "comment_id": 96365321, "body": "I&#39;d recommend to use something like <code>Post.increment_counter(:likes, params[:id])</code>. If you use the approach you described, the counter might not have the right data, why ?; suppose you make a request to like a post, then I do the same, for some reason each request loads the <code>post</code> having <code>post.likes = 2</code>, then your request is processed &amp; updates the post which will set <code>likes = 3</code>, then mine does the same and since the <code>post</code> instance also had <code>likes = 2</code> at the time it was loaded, my request will set <code>likes = 3</code> in the DB as well. You&#39;ll end up with <code>-1</code> like than the ones you would expect."}, {"owner": {"reputation": 47, "user_id": 9711320, "user_type": "registered", "profile_image": "https://graph.facebook.com/1212429205555220/picture?type=large", "display_name": "Davis Roberto", "link": "https://stackoverflow.com/users/9711320/davis-roberto"}, "edited": false, "score": 0, "creation_date": 1550690124, "post_id": 54793491, "comment_id": 96365418, "body": "<code>patch &quot;&#47;like&#47;:id&quot;, to: &quot;posts#like&quot;, as: &quot;like&quot;</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550690203, "post_id": 54793491, "comment_id": 96365446, "body": "The first argument is the HTTP verb you&#39;re gonna use for the route, try changing it to post."}, {"owner": {"reputation": 47, "user_id": 9711320, "user_type": "registered", "profile_image": "https://graph.facebook.com/1212429205555220/picture?type=large", "display_name": "Davis Roberto", "link": "https://stackoverflow.com/users/9711320/davis-roberto"}, "edited": false, "score": 0, "creation_date": 1550690351, "post_id": 54793491, "comment_id": 96365516, "body": "Changed it to POST and it still downloads an empty file"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550690556, "post_id": 54793491, "comment_id": 96365603, "body": "Is there a corresponding view for the <code>like</code> action that can be rendered? Or what do you expect Rails to respond? Would a redirect be more appropriate?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550691008, "post_id": 54793491, "comment_id": 96365800, "body": "That code, with the post route, works."}, {"owner": {"reputation": 47, "user_id": 9711320, "user_type": "registered", "profile_image": "https://graph.facebook.com/1212429205555220/picture?type=large", "display_name": "Davis Roberto", "link": "https://stackoverflow.com/users/9711320/davis-roberto"}, "edited": false, "score": 0, "creation_date": 1550691426, "post_id": 54793491, "comment_id": 96365994, "body": "When using redirect_to the file isn&#39;t downloaded, but I want the user to keep on the same page. The code works, the post gets a like when &quot;like&quot; is clicked, the only issue is the empty file being downloaded when clicking &quot;like&quot;"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550692806, "post_id": 54793491, "comment_id": 96366680, "body": "Would you share the request headers?"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550695725, "post_id": 54793491, "comment_id": 96368020, "body": "You have a request, you cant simply ignore the res unless you are using websockets, a modern frontend stack or remote true. Simply add redirect_to @post or :back after the save call and your vote will be posted and as a response your user will be redirected to the page the vote was submitted. Also, see below answer from another user."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1550711360, "post_id": 54793491, "comment_id": 96372990, "body": "Show the log of the server when you do that request."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1550692975, "creation_date": 1550692975, "answer_id": 54794389, "question_id": 54793491, "link": "https://stackoverflow.com/questions/54793491/rails-downloads-empty-file-when-doing-a-post-request/54794389#54794389", "title": "Rails downloads empty file when doing a POST request", "body": "<p>At the end of a request, you need to make a decision what page to render or where to redirect the user to. In your example, it seems like you want to redirect the user back to that post page they came from:</p>\n\n<pre><code>def like\n  post = Post.find(params[:id])\n  post.increment(:likes)\n  post.save\n\n  redirect_back(fallback_location: post)\nend\n</code></pre>\n\n<p>I suggest reading about <a href=\"https://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_back\" rel=\"nofollow noreferrer\"><code>redirect_back</code></a>.</p>\n"}], "owner": {"reputation": 47, "user_id": 9711320, "user_type": "registered", "profile_image": "https://graph.facebook.com/1212429205555220/picture?type=large", "display_name": "Davis Roberto", "link": "https://stackoverflow.com/users/9711320/davis-roberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567760659, "creation_date": 1550689238, "last_edit_date": 1567760659, "question_id": 54793491, "link": "https://stackoverflow.com/questions/54793491/rails-downloads-empty-file-when-doing-a-post-request", "title": "Rails downloads empty file when doing a POST request", "body": "<p>I have a POST method that adds a like to a model post</p>\n\n<pre><code>  def like\n    post = Post.find(params[:id])\n    post.likes += 1\n    post.save\n  end\n</code></pre>\n\n<p>I'm a using a link_to to call it.</p>\n\n<pre><code>&lt;%= link_to \"like\", like_path(post), method: \"POST\" %&gt;\n</code></pre>\n\n<p>But whenever I click, an empty file downloads.</p>\n\n<p><a href=\"https://i.stack.imgur.com/416b8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/416b8.png\" alt=\"Click here to see the image\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550689515, "post_id": 54793428, "comment_id": 96365129, "body": "Where&#39;s that company name being printed? what&#39;s the simple one?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550689530, "post_id": 54793428, "comment_id": 96365141, "body": "Probably there&#39;s missing code in your question."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1550691394, "post_id": 54793939, "comment_id": 96365980, "body": "You can use just <code>address_book.each do |company_name, address, city, state, zip, tel, email, web_address| ... end</code>"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550691754, "post_id": 54793939, "comment_id": 96366177, "body": "Thank you, I have learned new thing. But the thing is this is valid for nested array."}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 0, "last_activity_date": 1550692343, "last_edit_date": 1550692343, "creation_date": 1550691063, "answer_id": 54793939, "question_id": 54793428, "link": "https://stackoverflow.com/questions/54793428/nested-array-printing-an-inner-array-into-an-empty-string-ruby/54793939#54793939", "title": "Nested Array Printing an inner array into an empty string - Ruby", "body": "<p>The following usage is not correct if array is single:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>address_block.each do |company_name, address, city, state, zip, tel, email, web_address|\n</code></pre>\n\n<p>Because <code>address_block</code> is an array and only 1 argument passed to block as array member. </p>\n\n<p>So you would change it with the following code snippet. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>address_book.each do |address_block|\n  email_temp &lt;&lt; \"Company Name: #{address_block.first} \"\n  email_temp &lt;&lt; address_block[1..4].join(' ')\n  email_temp &lt;&lt; \" Tel: #{address_block[5]} #{address_block[6..7].join(' ') }\"\nend\n</code></pre>\n\n<p><strong>UPDATE</strong>\nThanks to <a href=\"https://stackoverflow.com/users/5025116/sebastian-palma\">@sebastian-palma</a>, I have learned a new thing regarding to ruby blocks when it comes to nested arrays. So I update the solution for this question. But I do not recommend this solution due to code smells. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>address_book.each do |company_name, address, city, state, zip, tel, email, web_address|\n  email_temp &lt;&lt; \"Company Name: #{company_name} #{address} #{city} #{state} #{zip} Tel: #{tel} #{email} #{web_address}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54793939, "answer_count": 1, "score": 0, "last_activity_date": 1550692343, "creation_date": 1550689024, "last_edit_date": 1550690700, "question_id": 54793428, "link": "https://stackoverflow.com/questions/54793428/nested-array-printing-an-inner-array-into-an-empty-string-ruby", "title": "Nested Array Printing an inner array into an empty string - Ruby", "body": "<pre><code>address_book = [\n['Company1','123 Mission Blvd', 'San Francisco','California', 12345, '415-555-4444','CompanyOne@companyone.com','https://company1.com'], \n['Company2','77 Market Street', 'San Francisco','California', 94111,'415-444 4444','Company2@company2.com','https://company2.com']\n]\n</code></pre>\n\n<p>I have an address block here that I would like to iterate through and send to the below empty string. </p>\n\n<pre><code>email_temp = \"\"\n\n\naddress_book.each do |address_block|\n  address_block.each do |company_name, address, city, state, zip, tel, email, web_address|\n    email_temp &lt;&lt; \"Company Name: #{company_name} #{address} #{city} #{state} #{zip} Tel: #{tel} #{email} #{web_address}\"\n  end\nend\n</code></pre>\n\n<p>I started off with ,the above but at every iteration it is printing the Company Name before every element of the inner array. How do I fix this? \nI want to keep it very simple. Just trying to figure out what is going wrong.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "pkcs#8"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8079768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jUgWxH8R1b8/AAAAAAAAAAI/AAAAAAAADSY/UiWVWnXr0JA/photo.jpg?sz=128", "display_name": "Esteban Arocha Ortu&#241;o", "link": "https://stackoverflow.com/users/8079768/esteban-arocha-ortu%c3%b1o"}, "edited": false, "score": 1, "creation_date": 1550785570, "post_id": 54799366, "comment_id": 96409653, "body": "Unfortunately I&#39;m having troubles installing that gem, I think I&#39;ll have to execute the command. Thank you very much for your help :)"}, {"owner": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "reply_to_user": {"reputation": 45, "user_id": 8079768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jUgWxH8R1b8/AAAAAAAAAAI/AAAAAAAADSY/UiWVWnXr0JA/photo.jpg?sz=128", "display_name": "Esteban Arocha Ortu&#241;o", "link": "https://stackoverflow.com/users/8079768/esteban-arocha-ortu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1550797164, "post_id": 54799366, "comment_id": 96412869, "body": "@EstebanArochaOrtu&#241;o If you don&#39;t mind, would you accept my answer?"}], "tags": [], "owner": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "is_accepted": true, "score": 0, "last_activity_date": 1550724061, "creation_date": 1550724061, "answer_id": 54799366, "question_id": 54793265, "link": "https://stackoverflow.com/questions/54793265/decrypt-pkcs8-ruby-openssl/54799366#54799366", "title": "Decrypt PKCS#8 Ruby OpenSSL", "body": "<p>Unfortunately, there is no way to decrypt on PKCS#8 format by <code>openssl</code> gem. But there are some hacky ways.</p>\n\n<ol>\n<li>Execute the OpenSSL command from ruby.</li>\n<li>Install the following gem (<a href=\"https://github.com/twg/openssl_pkcs8\" rel=\"nofollow noreferrer\">https://github.com/twg/openssl_pkcs8</a>)</li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 8079768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jUgWxH8R1b8/AAAAAAAAAAI/AAAAAAAADSY/UiWVWnXr0JA/photo.jpg?sz=128", "display_name": "Esteban Arocha Ortu&#241;o", "link": "https://stackoverflow.com/users/8079768/esteban-arocha-ortu%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 54799366, "answer_count": 1, "score": 0, "last_activity_date": 1550724061, "creation_date": 1550688405, "last_edit_date": 1550688721, "question_id": 54793265, "link": "https://stackoverflow.com/questions/54793265/decrypt-pkcs8-ruby-openssl", "title": "Decrypt PKCS#8 Ruby OpenSSL", "body": "<p>I need to use the OpenSSL ruby gem to decrypt a file. I've tried what every post told me to do. I've tried using this code from: <a href=\"https://stackoverflow.com/questions/4753184/load-pkcs8-binary-key-into-ruby\">Load PKCS#8 binary key into Ruby</a></p>\n\n<pre><code>  def box(tag, lines)\n    lines.unshift \"-----BEGIN #{tag}-----\"\n    lines.push \"-----END #{tag}-----\"\n    lines.join(\"\\n\")\n  end\n\n  def der_to_pem(tag, der)\n    box tag, Base64.strict_encode64(der).scan(/.{1,64}/)\n  end\n\n  pem = der_to_pementer code here('ENCRYPTED PRIVATE KEY', File.read('./file.key'))\n  key = OpenSSL::PKey::RSA.new(pem, 'passkey')\n  puts key \n  puts pem\n</code></pre>\n\n<p>And I get this: </p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAzxy...\n...ECYUOVC3zgw23aGcFA8z9ghI=\n-----END RSA PRIVATE KEY-----\n\n-----BEGIN ENCRYPTED PRIVATE KEY-----\nMIIFDjBABgk...\n...Y948X9Zop7aCnxmWI7vHNts=\n-----END ENCRYPTED PRIVATE KEY-----\n</code></pre>\n\n<p>But I need something like this:</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nMIIEvwIBADA...\n...ZwUDzP2CEg==\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>This is the console code that works, but as I said I need to use the ruby gem:</p>\n\n<pre><code>openssl pkcs8 -inform DER -in \"./file.key\" -passin pass:passkey -out \"./file.key.pem\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "redux", "react-on-rails"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 2058004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7222625a5d82577bf9fd32dd4647e120?s=128&d=identicon&r=PG", "display_name": "Harry Fairbanks", "link": "https://stackoverflow.com/users/2058004/harry-fairbanks"}, "is_accepted": false, "score": 1, "last_activity_date": 1582915623, "creation_date": 1582915623, "answer_id": 60457579, "question_id": 54793095, "link": "https://stackoverflow.com/questions/54793095/how-do-you-hydrate-a-store-using-react-on-rails-redux-api/60457579#60457579", "title": "How do you hydrate a store using react_on_rails&#39; Redux API?", "body": "<p>I had the exact same problem. This is how I solved it. Initially, I had this </p>\n\n<pre><code>const appStore = ReactOnRails.getStore(\"myStore\");\n\nconst HelloWorldApp = (appStore) =&gt; (\n    &lt;Provider store={appStore}&gt;\n        &lt;HelloWorldContainer /&gt;\n     &lt;/Provider&gt;\n);\n\nexport default HelloWorldApp;\n</code></pre>\n\n<p>But it was failing to register the store here </p>\n\n<pre><code>const appStore = ReactOnRails.getStore(\"myStore\");\n</code></pre>\n\n<p>So I changed it to this</p>\n\n<pre><code>import React from 'react';\nimport { Provider } from 'react-redux';\nimport HelloWorldContainer from './HelloWorldContainer';\n\nconst HelloWorldApp = (props) =&gt; (\n    &lt;Provider store={ReactOnRails.getStore(\"myStore\")}&gt;\n        &lt;HelloWorldContainer /&gt;\n    &lt;/Provider&gt;\n);\n\nexport default HelloWorldApp;\n</code></pre>\n\n<p>The \"There are no stores hydrated\" thing is a bit misleading. A \"hydrated\" store, is just a populated object. When you viewed your html you did have a hydrated store it just wasn't found by the JS. I believe by adding ReactOnRails.getStore in here  </p>\n\n<pre><code>&lt;Provider store={ReactOnRails.getStore(\"myStore\")}&gt;\n</code></pre>\n\n<p>helps with the load order. I believe the reason it wasn't initially working for me is because of the JS load order. I hope this helps someone.</p>\n"}], "owner": {"reputation": 284, "user_id": 3325134, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af47b01e1731ffbd511776851ea501d0?s=128&d=identicon&r=PG", "display_name": "robbymarston", "link": "https://stackoverflow.com/users/3325134/robbymarston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1582915623, "creation_date": 1550687689, "last_edit_date": 1592644375, "question_id": 54793095, "link": "https://stackoverflow.com/questions/54793095/how-do-you-hydrate-a-store-using-react-on-rails-redux-api", "title": "How do you hydrate a store using react_on_rails&#39; Redux API?", "body": "<p>Currently, I'm working with this setup (simplified for readability):</p>\n<h2>react_on_rails 11.1.4</h2>\n<h3>Layout Controller (index method):</h3>\n<pre><code>redux_store('appStore', props: { foo: 'bar' })\n</code></pre>\n<h3>Layout:</h3>\n<pre><code>&lt;%= redux_store_hydration_data %&gt; (before close of body tag)\n</code></pre>\n<h3>View:</h3>\n<pre><code>&lt;%= react_component('FooBar') %&gt;\n</code></pre>\n<h3>Component (FooBar):</h3>\n<pre><code>ReactOnRails.getStore('appStore');\n</code></pre>\n<h3>JavaScript (main.js):</h3>\n<pre><code>ReactOnRails.registerStore({ appStore });\n</code></pre>\n<p>If I inspect the source, the data and the component appear to be present:</p>\n<pre><code>&lt;div id=&quot;FooBar-react-component-fb8d03cb-b3d3-4247-8b4b-3e5a2ad52f84&quot;&gt;&lt;/div&gt;\n&lt;script type=&quot;application/json&quot; class=&quot;js-react-on-rails-component&quot; data-component-name=&quot;FooBar&quot; data-trace=&quot;true&quot; data-dom-id=&quot;FooBar-react-component-fb8d03cb-b3d3-4247-8b4b-3e5a2ad52f84&quot;&gt;{}&lt;/script&gt;\n&lt;script src=&quot;/main.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;application/json&quot; data-js-react-on-rails-store=&quot;appStore&quot;&gt;{&quot;foo&quot;:&quot;bar&quot;}&lt;/script&gt;\n</code></pre>\n<p>However, the component itself isn't rendering due to these fatal errors:</p>\n<pre><code>Uncaught Error: There are no stores hydrated and you are requesting the store appStore...`\nUncaught Error: Could not find store registered with name 'appStore'. Registered store names include...\n</code></pre>\n<p>So far as I can tell, the setup is inline with what's been outlined in the documentation, so I'm wondering if this is a bug of some sort. I've tried putting the call to <code>redux_store</code> in both the controller and the view, moving the other calls into other files and locations, etc. to no avail.</p>\n<p>Any help is much appreciated, thanks in advance!</p>\n"}, {"tags": ["ruby", "testing", "popen3"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1550698728, "post_id": 54792789, "comment_id": 96369321, "body": "What does <code>..&#47;src&#47;bin</code> do? Under what circumstances can it enter and infinite loop?"}, {"owner": {"reputation": 53, "user_id": 9047830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ekfAG.jpg?s=128&g=1", "display_name": "Pypaut", "link": "https://stackoverflow.com/users/9047830/pypaut"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1550740428, "post_id": 54792789, "comment_id": 96383136, "body": "@simonwo It&#39;s a compiler. I guess there are many ways it could enter an infinite loop, However as said earlier, the command line works just fine and returns 0."}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1550766114, "post_id": 54792789, "comment_id": 96400209, "body": "Can you write a script to look at the environment variables? It could be that they are key to success and only on the command line. It could also be that it\u2019s not entering an infinite loop and is actually waiting for input from STDIN or another pipe for some reason. Or it may behave differently on purpose when invoked from a script. Have a read about psudeo-TTYs, and use the Ruby module to test this."}, {"owner": {"reputation": 53, "user_id": 9047830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ekfAG.jpg?s=128&g=1", "display_name": "Pypaut", "link": "https://stackoverflow.com/users/9047830/pypaut"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1550782757, "post_id": 54792789, "comment_id": 96408526, "body": "I also noticed that calling <code>$bin $file</code> doesn&#39;t work as well in a shell script as <code>&quot;$bin $file&quot;</code>, it might indeed be related in some way."}], "owner": {"reputation": 53, "user_id": 9047830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ekfAG.jpg?s=128&g=1", "display_name": "Pypaut", "link": "https://stackoverflow.com/users/9047830/pypaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550686334, "creation_date": 1550686334, "question_id": 54792789, "link": "https://stackoverflow.com/questions/54792789/retrieving-exit-status-value-from-executable-in-ruby-with-open3", "title": "Retrieving exit status value from executable in Ruby with Open3", "body": "<p>Launching</p>\n\n<pre><code>stdout, status = Open3.capture2(\"ls\")\nif (status == 0)\n  puts(\"PASS\")\nelse\n  puts(\"FAIL\")\n</code></pre>\n\n<p>works like a charm, however when I try to use</p>\n\n<p><code>stdout, status = Open3.capture2(\"../src/bin tests/test01.txt\")</code></p>\n\n<p>to launch an executable <code>bin</code> with his argument's path (which works from my command line, I checked with <code>echo $?</code>), it seems to enter an infinite loop.\nI tried capture3 and popen3, same thing.</p>\n\n<p>Any idea about what could be wrong?</p>\n"}, {"tags": ["ruby", "functional-programming"], "comments": [{"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 1, "creation_date": 1550686384, "post_id": 54792469, "comment_id": 96363551, "body": "I see two data here: keywords and phrase. Phrase is not really a collection (but could be easily turned into one), and reduce is generally used on collections. Keywords, however is. So, it think the object you want to <code>reduce</code> might be <code>keywords</code>, and the initial value for reduce might be <code>phrase</code>... (and you may still end up using <code>gsub</code> or similar...)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550709479, "post_id": 54792469, "comment_id": 96372601, "body": "You should state your question at the beginning, something like, &quot;Given an array of words, keywords, and a string, I wish to return a string that is the same string with the words contained in keywords (case indifferent) capitalized.&quot; On re-reading, I see you are only interested in solutions that use the method <code>Hash#reduce</code>. That&#39;s fine, but you may be doing yourself a disservice by requiring that a particular approach or method be used. If you wish to edit your question, I suggest you avoid drawing attention to the fact that it&#39;s an edit. If necessary, explain why you&#39;ve edited in a comment."}], "answers": [{"comments": [{"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1550686534, "post_id": 54792810, "comment_id": 96363621, "body": "What if, alternatively, you reduced the keywords, and not the phrase?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1550686705, "post_id": 54792810, "comment_id": 96363708, "body": "How&#39;s that @Garrett? could you enlighten me?"}, {"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1550686940, "post_id": 54792810, "comment_id": 96363834, "body": "There is an implicit assumption that the OP seems to make that the thing to be reduced is the phrase (and I think you picked up on that assumption). However, the phrase is not a collection, so it has to be made into one, ergo with split. <i>But</i>, what if that assumption is wrong, and the target object to call reduce on is actually <code>keywords</code>?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550697475, "post_id": 54792810, "comment_id": 96368794, "body": "Who&#39;re you referring to @CarySwoveland?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550699511, "post_id": 54792810, "comment_id": 96369638, "body": "I really appreciate the way you share your knowledge in all your answers @CarySwoveland, and in this way I respect you. But adding words for others is nothing but annoying. Did you see the <i>I am only interested in solutions using reduce, or an explanation why reduce does not work in this case.</i>? this is an answer which uses <code>reduce</code>. Of course, if I answer anything else it wouldn&#39;t be what the user expects as an answer."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1550686397, "creation_date": 1550686397, "answer_id": 54792810, "question_id": 54792469, "link": "https://stackoverflow.com/questions/54792469/use-reduce-to-modify-certain-words-in-a-string-in-ruby/54792810#54792810", "title": "Use Reduce to modify certain words in a string in ruby", "body": "<p>If using reduce, I imagine you can start by splitting your string within whitespaces (if it is normalized to have always a separation by one whitespace), then check if the current word in the block is in the keywords array if so, push it to the memo its uppercased version plus a whitespace to the right, otherwise just the word (plus the whitespace):</p>\n\n<pre><code>new_phrase = phrase.split.reduce('') do |memo, word|\n  pushed_word = if keywords.include?(word)\n                  word.upcase\n                else\n                  word\n                end\n  memo &lt;&lt; \"#{pushed_word} \"\nend\n\np new_phrase\n# \"one FISH two FISH red FISH BLUE FISH \"\n</code></pre>\n\n<p>As you'll finish with one additional right whitespace, you can use <code>rstrip</code> to get rid of it.</p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1550688420, "post_id": 54793172, "comment_id": 96364591, "body": "IMO this is needlessly clever and no more functional than the more idiomatic and easier to read solution OP came up with."}, {"owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1550688630, "post_id": 54793172, "comment_id": 96364709, "body": "@JordanRunning agreed, I just wanted to show a more general idiom. For example, if other transformations besides capitalization are needed, my approach could be easily extended."}], "tags": [], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "is_accepted": false, "score": 0, "last_activity_date": 1550688423, "last_edit_date": 1550688423, "creation_date": 1550688018, "answer_id": 54793172, "question_id": 54792469, "link": "https://stackoverflow.com/questions/54792469/use-reduce-to-modify-certain-words-in-a-string-in-ruby/54793172#54793172", "title": "Use Reduce to modify certain words in a string in ruby", "body": "<p>tl;dr</p>\n\n<pre><code>f1 = def upcase_fish(str); str.gsub('fish', 'FISH'); end\nf2 = def upcase_blue(str); str.gsub('blue', 'BLUE'); end\n[f1, f2].reduce(phrase){ |str, f| Method.send f, str }\n</code></pre>\n\n<p>Explanantion</p>\n\n<p>Calling several functions, such that the output of one function is the input of the next function, is a common use case. E.g. here we have two functions: one that capitalizes 'fish' and the other - 'blue'. Of course, we could have added other transformations as well, like removing trailing whitespace, capitalizing the first letter etc. In functional programming this can be achieved by reducing a collection of functions. We first initialize the result with the original <code>phrase</code> and then apply f1 followed by f2. This is equivalent to:\n<code>f2(f1(phrase))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550709819, "post_id": 54793545, "comment_id": 96372673, "body": "It was only after I posted my answer did I see that answers were required to use the method <code>Hash#reduce</code>. I will let my answer stand as I would like to show ways to obtain the desired result which are not subject to that requirement."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1550695010, "last_edit_date": 1550695010, "creation_date": 1550689408, "answer_id": 54793545, "question_id": 54792469, "link": "https://stackoverflow.com/questions/54792469/use-reduce-to-modify-certain-words-in-a-string-in-ruby/54793545#54793545", "title": "Use Reduce to modify certain words in a string in ruby", "body": "<p>Here are a couple ways of doing that. Both are intended to be relatively efficient and share the method <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> and the regular expression:</p>\n\n<pre><code>r = /\\p{Alpha}+/\n</code></pre>\n\n<p>This matches one or more Unicode letters.</p>\n\n<pre><code>keywords = [\"fish\", \"blue\"]\nphrase = \"one fish two Fish red fisH blue fish.\"\n</code></pre>\n\n<p>Notice that in I've capitalized the first \"Fish\", upcased the \"H\" in the second \"FisH\" and added a period.</p>\n\n<p><strong>Use the form of <code>String#gsub</code>that employs a hash for making substitutions</strong></p>\n\n<pre><code>subs = keywords.each_with_object({}) { |word,h|\n  h[word] = word.capitalize }\n  #=&gt; {\"fish\"=&gt;\"Fish\", \"blue\"=&gt;\"Blue\"} \nsubs.default_proc = Proc.new { |_,word|\n  subs.include?(word.downcase) ? word.upcase : word } \n  #=&gt; #&lt;Proc:0x000059dc26dd1510@(irb):95&gt; \nphrase.gsub(r, subs)\n  #=&gt; \"one Fish two FISH red FISH Blue Fish.\" \n</code></pre>\n\n<p>The default proc returns a string if <code>word</code> is not a key of <code>subs</code>. If <code>word.downcase</code> is is a key of <code>subs</code>, <code>word.upcase</code> is returned; else <code>word</code> is returned unchanged. See <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-default_proc-3D\" rel=\"nofollow noreferrer\">Hash#default_proc=</a>.</p>\n\n<p><strong>Use a set to speed lookups</strong></p>\n\n<pre><code>require 'set'\n\nsubs = keywords.to_set\n  #=&gt; #&lt;Set: {\"fish\", \"blue\"}&gt; \nphrase.gsub(r) { |word|\n  subs.include?(word.downcase) ? word.upcase : word }\n  #=&gt; \"one FISH two FISH red FISH BLUE FISH.\"  \n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10746747, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212546417993340/picture?type=large", "display_name": "Patrick Duvall", "link": "https://stackoverflow.com/users/10746747/patrick-duvall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550696415, "creation_date": 1550685048, "last_edit_date": 1550696415, "question_id": 54792469, "link": "https://stackoverflow.com/questions/54792469/use-reduce-to-modify-certain-words-in-a-string-in-ruby", "title": "Use Reduce to modify certain words in a string in ruby", "body": "<pre><code>keywords = [\"fish\", \"blue\"]\nphrase = 'one fish two fish red fish blue fish'\nactual = ???\n\nassert_equal 'one FISH two FISH red FISH BLUE FISH', actual\n</code></pre>\n\n<p>In short, using reduce, what should I replace ??? with above.</p>\n\n<p>In long, is there a way to use reduce to modify each word in a string for which a condition is met. In this case I want to <code>upcase</code> each <code>word</code> in <code>phrase</code> that is included in <code>keywords</code>. I would imagine I could use this method, with some modification, to delete every instance of a word or replace it. I know about <code>sub</code> and <code>gsub</code> but I'm doing a problem set that leads me to believe this is possible with reduce. I've been to the docs with no avail.</p>\n\n<p>I am only interested in solutions using reduce, or an explanation why reduce does not work in this case.</p>\n\n<p>I got it to work using. </p>\n\n<pre><code>actual = keywords.reduce('one fish two fish red fish blue fish'){|memo,word| memo.gsub(word,word.upcase) }\n</code></pre>\n\n<p>Garret's comment lead me in the right direction. I may have been unclear, initially I just didn't want a <code>gsub</code> solution outside of <code>reduce</code>. Thanks for the help!</p>\n"}, {"tags": ["ruby", "capistrano", "unicorn", "bluepill", "ruby-upgrade"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550687299, "post_id": 54792463, "comment_id": 96364036, "body": "Do you specify ruby version in your <code>Gemfile</code> ?"}, {"owner": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550687588, "post_id": 54792463, "comment_id": 96364187, "body": "@zeitnot Yes, it is 2.3.7."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550688236, "post_id": 54792463, "comment_id": 96364506, "body": "Is this a rails project?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1550771176, "post_id": 54792463, "comment_id": 96403114, "body": "what is <code>&#47;usr&#47;lib&#47;ruby&#47;site_ruby&#47;2.1.0&#47;</code> ? add code which shows how blupill is running unicorn, and what you did to trigger the error"}, {"owner": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1550830947, "post_id": 54792463, "comment_id": 96424598, "body": "@lacostenycoder - This is the old ruby configuration. Updated question description with bluepill configuration."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1550876016, "post_id": 54792463, "comment_id": 96447326, "body": "what about capfile?  you said it only happens with cap deploy"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "edited": false, "score": 0, "creation_date": 1550687528, "post_id": 54793025, "comment_id": 96364150, "body": "Hi, i am using ruby 2.3.7 and everywhere it is same. It used to be 2.1.4 and then I upgraded it to 2.3.7."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "edited": false, "score": 0, "creation_date": 1550714103, "post_id": 54793025, "comment_id": 96373600, "body": "@vikram what do you mean by &quot;everywhere&quot; ?"}, {"owner": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "edited": false, "score": 0, "creation_date": 1550766270, "post_id": 54793025, "comment_id": 96400313, "body": "means it&#39;s a system-wide installed ruby version."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1550687364, "creation_date": 1550687364, "answer_id": 54793025, "question_id": 54792463, "link": "https://stackoverflow.com/questions/54792463/ruby-version-mismatch-after-ruby-upgrade-without-rvm-or-rbenv/54793025#54793025", "title": "Ruby version mismatch after ruby upgrade without rvm or rbenv", "body": "<p>The error is pretty clear:  <code>Your Ruby version is 2.1.4, but your Gemfile specified 2.3.7</code></p>\n\n<p>Did you check the ruby version in your Gemfile?  It should match the ruby version you're using and you'll likely need to run</p>\n\n<pre><code>bundle update\n</code></pre>\n\n<p>and </p>\n\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 1483051, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/384c74e3ef91ca3c1a600c8cdca4e674?s=128&d=identicon&r=PG", "display_name": "vikram", "link": "https://stackoverflow.com/users/1483051/vikram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1550830859, "creation_date": 1550685033, "last_edit_date": 1550830859, "question_id": 54792463, "link": "https://stackoverflow.com/questions/54792463/ruby-version-mismatch-after-ruby-upgrade-without-rvm-or-rbenv", "title": "Ruby version mismatch after ruby upgrade without rvm or rbenv", "body": "<p>I am using bluepill to manage unicorn and after ruby upgrade unicorn start is failing with below error:</p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.3.0/gems/bundler-1.17.3/lib/bundler/definition.rb:495:in `validate_ruby!': Your Ruby version is 2.1.4, but your Gemfile specified 2.3.7 (Bundler::RubyVersionMismatch)\n    from /usr/local/lib/ruby/gems/2.3.0/gems/bundler-1.17.3/lib/bundler/definition.rb:470:in `validate_runtime!'\n    from /usr/local/lib/ruby/gems/2.3.0/gems/bundler-1.17.3/lib/bundler.rb:101:in `setup'\n    from /usr/local/lib/ruby/gems/2.3.0/gems/bundler-1.17.3/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n    from /usr/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nE, [2019-02-20T10:42:13.897013 #10437] ERROR -- : reaped #&lt;Process::Status: pid 12149 exit 1&gt; exec()-ed\n</code></pre>\n\n<p>The strange thing is it fails only when it is invoked via capistrano deployment. It runs fine if I run it manually on the server. I tried all sort of things but nothing seems to work.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Bluepill confiuguration for running unicorn:</p>\n\n<pre><code>Bluepill.application(APPLICATION_NAME) do |application|\n  application.working_dir = \"/var/apps/APPLICATION_NAME/current\"\n\n  process \"unicorn\" do\n    start_command    \"/usr/local/bin/bundle exec unicorn -c config/unicorn.rb -E qa -D\"\n    environment      ({\n\n      \"RAILS_ENV\"  =&gt; \"qa\",\n      \"RACK_ENV\"   =&gt; \"qa\"\n    })\n    pid_file         \"/var/apps/APPLICATION/shared/pids/unicorn.pid\"\n    cache_actual_pid false\n    stop_command     \"kill -QUIT {{PID}}\"\n    restart_command  \"kill -USR2 {{PID}}\"\n\n    start_grace_time   60.seconds\n    stop_grace_time    20.seconds\n    restart_grace_time 13.seconds\n\n    checks :flapping, :times =&gt; 2, :within =&gt; 30.seconds, :retry_in =&gt; 7.seconds\n\n    monitor_children do\n      stop_command \"kill -QUIT {{PID}}\"\n\n      checks :mem_usage, :every =&gt; 10.seconds, :below =&gt; 500.megabytes, :times =&gt; [3,4], :fires =&gt; :stop\n      checks :cpu_usage, :every =&gt; 10.seconds, :below =&gt; 20, :times =&gt; [3,4], :fires =&gt; :stop\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for"], "comments": [{"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 0, "creation_date": 1550684703, "post_id": 54792340, "comment_id": 96362785, "body": "Where is the <code>current_user</code> method defined? However, some logs could make the situation much cleaner"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550684715, "post_id": 54792340, "comment_id": 96362789, "body": "Would you share logs with us?"}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550684814, "post_id": 54792340, "comment_id": 96362830, "body": "You&#39;re wanting the text from the :user and :class_name text area to be saved to your Register model? :class_name is not being permitted in your controller, just :class_id. Is that another model?"}, {"owner": {"reputation": 29, "user_id": 8767993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f44f21c7b562bce46cbc8d0dcbd2e9?s=128&d=identicon&r=PG&f=1", "display_name": "DammitJanet", "link": "https://stackoverflow.com/users/8767993/dammitjanet"}, "edited": false, "score": 0, "creation_date": 1550685517, "post_id": 54792340, "comment_id": 96363181, "body": "current_user saves fine, that comes from devise.  I added the logs"}], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 0, "last_activity_date": 1550686338, "creation_date": 1550686338, "answer_id": 54792794, "question_id": 54792340, "link": "https://stackoverflow.com/questions/54792340/form-for-not-saving-data-to-database/54792794#54792794", "title": "Form_for not saving data to database", "body": "<p>Just do like: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def create\n    @reg = Register.new(params.required(:register).permit(:user_id, :class_name))\n    @reg.user_id = current_user.id\n    @reg.save! # This will raise exception if something is wrong\n  end\n</code></pre>\n\n<p>Btw, just apply to TDD/BDD concepts to eliminate problems like this one. This process is pretty simple.  </p>\n"}], "owner": {"reputation": 29, "user_id": 8767993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f44f21c7b562bce46cbc8d0dcbd2e9?s=128&d=identicon&r=PG&f=1", "display_name": "DammitJanet", "link": "https://stackoverflow.com/users/8767993/dammitjanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 54792794, "answer_count": 1, "score": 0, "last_activity_date": 1550687399, "creation_date": 1550684495, "last_edit_date": 1550685447, "question_id": 54792340, "link": "https://stackoverflow.com/questions/54792340/form-for-not-saving-data-to-database", "title": "Form_for not saving data to database", "body": "<p>I for the life of me can't figure out what I am doing wrong with my code here.  I have a form_for, but when I click save, it doesn't save the data from the form, just the data in the controller.</p>\n\n<p>Controller:</p>\n\n<pre><code>class RegistersController &lt; ApplicationController\n\n  def index\n\n  end\n\n  def new\n    @reg = Register.new\n  end\n\n  def create\n    @reg = Register.new(params.permit(:user, :user_id, :class_id))\n    @reg.user_id = current_user.id\n\n    @reg.save\n  end\n\n  def update\n\n  end\nend\n</code></pre>\n\n<p>New:</p>\n\n<pre><code>&lt;%= form_for @reg do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :class_name, class: \"col-sm-2 control-label\" %&gt;\n    &lt;%= f.text_area :class_name, class: \"form-control\"%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :user, class: \"col-sm-2 control-label\" %&gt;\n    &lt;%= f.text_area :user, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;%= f.submit 'Save', class: 'btn btn-primary btn-block' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Register &lt; ApplicationRecord\n  belongs_to :user, optional: true\n  belongs_to :event, optional: true\nend\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I did some messing around further and got here:<br>\n@reg = Register.new(params.required(:user).permit(:user_id, :class_name))</p>\n\n<p>This is giving me the log:</p>\n\n<pre><code>    Processing by RegistersController#create as HTML\n      Parameters: {\"utf8\"=&gt;\"\u00e2\u0153\u201c\", \"authenticity_token\"=&gt;\"BJr3T+RiI0YiyixC6EORKtMG3L8Q9LP3kL7Dh4apt0WdeGzN5mVhy/oNn64+xF9TRRztLqL5/Hf6WEwhucRF8w==\", \"register\"=&gt;{\"class_name\"=&gt;\"Toddler\", \"user\"=&gt;\"Billy\"}, \"commit\"=&gt;\"Save\"}\n    Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty: user):\n</code></pre>\n"}, {"tags": ["ruby", "character-encoding", "utf-16", "utf-16le"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550686867, "post_id": 54792298, "comment_id": 96363795, "body": "<code>file</code> is really good at what it does, but it still has limitations."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1550708953, "post_id": 54792298, "comment_id": 96372476, "body": "try <code>puts Encoding.list</code> to see what you are up against."}], "answers": [{"comments": [{"owner": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550689103, "post_id": 54793290, "comment_id": 96364931, "body": "The problem is, I already don&#39;t have a BOM, and without it, character detection libraries can&#39;t understand that it&#39;s UTF-16."}, {"owner": {"reputation": 1, "user_id": 5162051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a2bb134e22d0b129ad23c944ca559c?s=128&d=identicon&r=PG", "display_name": "Vladimir Bogaevsky", "link": "https://stackoverflow.com/users/5162051/vladimir-bogaevsky"}, "reply_to_user": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550689823, "post_id": 54793290, "comment_id": 96365288, "body": "Is it allways UTF-16 without BOM?"}, {"owner": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550690934, "post_id": 54793290, "comment_id": 96365768, "body": "No, it MIGHT be UTF-16 without BOM."}, {"owner": {"reputation": 1, "user_id": 5162051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a2bb134e22d0b129ad23c944ca559c?s=128&d=identicon&r=PG", "display_name": "Vladimir Bogaevsky", "link": "https://stackoverflow.com/users/5162051/vladimir-bogaevsky"}, "reply_to_user": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550693568, "post_id": 54793290, "comment_id": 96367048, "body": "Is it always UTF-16?"}, {"owner": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550693626, "post_id": 54793290, "comment_id": 96367082, "body": "No, it really might be anything."}, {"owner": {"reputation": 1, "user_id": 5162051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a2bb134e22d0b129ad23c944ca559c?s=128&d=identicon&r=PG", "display_name": "Vladimir Bogaevsky", "link": "https://stackoverflow.com/users/5162051/vladimir-bogaevsky"}, "reply_to_user": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "edited": false, "score": 0, "creation_date": 1550697386, "post_id": 54793290, "comment_id": 96368753, "body": "UTF-16 file will be twice the size of UTF-8 file with the same content and each &quot;char&quot; will be separated by &quot;\\x00&quot;. May be we can remove all &quot;\\x00&quot; and check if file size will match the number of letters?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5162051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a2bb134e22d0b129ad23c944ca559c?s=128&d=identicon&r=PG", "display_name": "Vladimir Bogaevsky", "link": "https://stackoverflow.com/users/5162051/vladimir-bogaevsky"}, "is_accepted": false, "score": -1, "last_activity_date": 1550688528, "creation_date": 1550688528, "answer_id": 54793290, "question_id": 54792298, "link": "https://stackoverflow.com/questions/54792298/in-ruby-how-to-reliably-detect-a-files-encoding-including-utf-16-without-bom/54793290#54793290", "title": "In Ruby, how to reliably detect a file&#39;s encoding (including UTF-16 without BOM)?", "body": "<p>You can always cut BOM off and process file without it.\n<a href=\"https://stackoverflow.com/a/5011768/5162051\">This</a> describes how it can be done.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1550694502, "creation_date": 1550694502, "answer_id": 54794730, "question_id": 54792298, "link": "https://stackoverflow.com/questions/54792298/in-ruby-how-to-reliably-detect-a-files-encoding-including-utf-16-without-bom/54794730#54794730", "title": "In Ruby, how to reliably detect a file&#39;s encoding (including UTF-16 without BOM)?", "body": "<p>It is impossible to detect the encoding of a text file reliably. You have to be told out-of-band what the encoding is.</p>\n\n<p>The reason for this is simple: there are tons of 8-bit encodings. In those encodings, <em>every</em> combination of 8 bits is a valid character. Since every combination of 8 bits is a valid character in every 8 bit encoding, <em>any arbitrary</em> text file, and in fact any arbitrary file <em>at all</em> is a valid text file in <em>any</em> 8 bit encoding.</p>\n\n<p>For example, in ISO 8859-15 <code>0xA4</code> is the Euro sign <code>\u20ac</code>. In ISO 8859-1, CP1252, and Unicode, <code>0xA4</code> is the international currency sign <code>\u00a4</code>. So, if you have a file that contains <code>0xA4</code>, you cannot know if it is ISO 8859-15, ISO 8859-1, CP1252, one half of a character in UTF-16, one quarter of a character in UTF-32, the middle of a multibyte sequence in UTF-8, or one of many other possibilities.</p>\n"}], "owner": {"reputation": 2785, "user_id": 2733119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4HDSo.jpg?s=128&g=1", "display_name": "art-solopov", "link": "https://stackoverflow.com/users/2733119/art-solopov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550694502, "creation_date": 1550684342, "last_edit_date": 1592644375, "question_id": 54792298, "link": "https://stackoverflow.com/questions/54792298/in-ruby-how-to-reliably-detect-a-files-encoding-including-utf-16-without-bom", "title": "In Ruby, how to reliably detect a file&#39;s encoding (including UTF-16 without BOM)?", "body": "<p>I need to detect a file type and encoding in Ruby.</p>\n<p>I'm currently using libmagic through the <a href=\"https://github.com/qoobaa/magic\" rel=\"nofollow noreferrer\">magic</a> gem, but it has one problem: it doesn't detect UTF-16 files if they don't have BOM. <a href=\"https://yadi.sk/i/k5CAQ_DMHHcwYA\" rel=\"nofollow noreferrer\">This</a> is an example of such file.</p>\n<pre><code>$ file -i text_without_bom.txt\ntext_without_bom.txt: application/octet-stream; charset=binary\n</code></pre>\n<p>Is there any other library or method I could use that would detect UTF-16 files properly?</p>\n<p>P. S. Also tried <a href=\"https://github.com/jmhodges/rchardet\" rel=\"nofollow noreferrer\">rchardet</a> and <a href=\"https://github.com/brianmario/charlock_holmes\" rel=\"nofollow noreferrer\">charlock_holmes</a>, without much luck.</p>\n"}, {"tags": ["ruby", "sparql", "rdf"], "answers": [{"tags": [], "owner": {"reputation": 9995, "user_id": 7879193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128", "display_name": "Stanislav Kralin", "link": "https://stackoverflow.com/users/7879193/stanislav-kralin"}, "is_accepted": true, "score": 2, "last_activity_date": 1550741110, "last_edit_date": 1550741110, "creation_date": 1550685522, "answer_id": 54792581, "question_id": 54791831, "link": "https://stackoverflow.com/questions/54791831/ruby-sparql-client-with-property-path-unary-operator-syntax/54792581#54792581", "title": "Ruby SPARQL Client with Property Path Unary * Operator syntax", "body": "<p>Try <code>sparql_client.select.where([:x, [RDF::RDFS.subClassOf,\"*\"], :type])</code>.</p>\n\n<p>See <a href=\"https://github.com/ruby-rdf/sparql-client/blob/master/spec/query_spec.rb#L242\" rel=\"nofollow noreferrer\">query_spec.rb</a>. Related <a href=\"https://github.com/ruby-rdf/sparql-client/issues/43\" rel=\"nofollow noreferrer\">GitHub issue</a>.</p>\n"}], "owner": {"reputation": 93, "user_id": 6093415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Og8Ri.png?s=128&g=1", "display_name": "s0rin", "link": "https://stackoverflow.com/users/6093415/s0rin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54792581, "answer_count": 1, "score": 1, "last_activity_date": 1550853474, "creation_date": 1550682486, "last_edit_date": 1550853474, "question_id": 54791831, "link": "https://stackoverflow.com/questions/54791831/ruby-sparql-client-with-property-path-unary-operator-syntax", "title": "Ruby SPARQL Client with Property Path Unary * Operator syntax", "body": "<p>This SPARQL query example works fine:</p>\n\n<pre><code>require 'sparql/client'\nrdfs_vocabulary = RDF::Vocabulary.new(\"http://www.w3.org/2000/01/rdf-schema#\")\nsparql_client.select.where(:x, rdfs_vocabulary.subClassOf, :type)\n</code></pre>\n\n<p>Extending it with the <strong>Property Path <code>*</code> operator</strong> to get all subclasses, the following syntax works as well:</p>\n\n<pre><code>sparql_client.select.where(:x, \"&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;*\", :type)\n</code></pre>\n\n<p>but is it possible to avoid the full-URI?</p>\n"}, {"tags": ["ruby", "mongodb", "ruby-on-rails-4", "mongoid"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550680872, "post_id": 54791271, "comment_id": 96360692, "body": "Nothing in that snippet shows what caused the problem. Your module&#39;s version isn&#39;t tied to Ruby&#39;s version, either, so that upgrade could be rolled back if it&#39;s problematic."}, {"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550681227, "post_id": 54791271, "comment_id": 96360904, "body": "Can&#39;t be rolled back. I am being forced to move to Ruby 2.4 as MLab is forcing upgrades to mongodb 3.4 from 3.2 and ruby needs to be 2.4"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550681664, "post_id": 54791271, "comment_id": 96361193, "body": "Might as well bump to Ruby 2.6.1 if you can as that&#39;s the current release. As to this problem, it seems dependency related, possibly, but you&#39;ll need to identify what line of code is causing the problem."}, {"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550684859, "post_id": 54791271, "comment_id": 96362847, "body": "Looks like the major issue is Devise. We are on 3.5.2 but bumping up Ruby it wants us to use 4.0.  I see some issues around to many params coming. It says it wants 0 params, but is getting 1 param.  I have searched for almost an hour and cannot find anything show the differences between Devise 3.5 and 4.0?"}], "owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550681265, "creation_date": 1550680699, "last_edit_date": 1550681265, "question_id": 54791271, "link": "https://stackoverflow.com/questions/54791271/unable-to-parse-json-of-crypted-text", "title": "Unable to parse JSON of crypted text", "body": "<p>I updated to Ruby 2.4.2 which required me to update Gibberish to 2.0.</p>\n\n<p>I am getting this error and not sure what is the culprit.</p>\n\n<pre><code>        Completed 500 Internal Server Error in 157ms \n    Feb 20 10:34:14 my-staging app/web.1: ActionView::Template::Error (Unable to parse JSON of crypted text): \n    348:           &lt;% end %&gt; \n    349:           &lt;li class=\"dropdown &lt;%= 'active' if request.fullpath == \"/es/account\" %&gt;\"&gt; \n    350:             &lt;a aria-haspopup=\"true\"&gt; \n    351:               &lt;i class=\"icon-user\"&gt;&lt;/i&gt; &lt;%= current_user.email %&gt; \n    352:               &lt;b class=\"caret\"&gt;&lt;/b&gt; \n    353:             &lt;/a&gt; \n    354:             &lt;ul&gt; \n    Feb 20 10:34:14 my-staging app/web.1:   config/initializers/mongoid_encryption.rb:15:in `decrypt' \n</code></pre>\n\n<p>I think the issue might be this gem, but not sure??</p>\n\n<pre><code>gem 'mongoid-encrypted-fields', :path =&gt; \"./vendor/plugins/mongoid-encrypted-fields-1.2.2\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10574191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b689ee65aa5c5cb4c0da0e9a849d3b?s=128&d=identicon&r=PG&f=1", "display_name": "JackFurby", "link": "https://stackoverflow.com/users/10574191/jackfurby"}, "is_accepted": true, "score": 0, "last_activity_date": 1550853696, "creation_date": 1550853696, "answer_id": 54831544, "question_id": 54791045, "link": "https://stackoverflow.com/questions/54791045/carrierwave-cannot-update-a-database-to-correct-value-after-calling-recreate-ver/54831544#54831544", "title": "Carrierwave Cannot update a database to correct value after calling recreate_versions", "body": "<p>After another day or so of trying to fix my problem I have a solution that kind of works. This is using the following code: </p>\n\n<pre><code>def self.reprocess_user_picture\n    User.all.each do |user|\n        if user.photo?\n            user.photo.recreate_versions!\n            user.update_column(:photo, File.basename(user.photo.url))\n        end\n    end\nend\n</code></pre>\n\n<p>This solution will reprocess all image uploads for the user photo in all versions. It however will not delete the old versions but at least the database is updated correctly.</p>\n\n<p>Now, I know this solution is not perfect. If someone wants to try and answer the original please do and I will try out the solution. The reason why I was struggling with other attempts (and why an old image name was appearing back in the database) is still not clear but I can only think it is some kind of caching that I could not figure out.</p>\n"}], "owner": {"reputation": 31, "user_id": 10574191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b689ee65aa5c5cb4c0da0e9a849d3b?s=128&d=identicon&r=PG&f=1", "display_name": "JackFurby", "link": "https://stackoverflow.com/users/10574191/jackfurby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 54831544, "answer_count": 1, "score": 1, "last_activity_date": 1550853696, "creation_date": 1550680010, "question_id": 54791045, "link": "https://stackoverflow.com/questions/54791045/carrierwave-cannot-update-a-database-to-correct-value-after-calling-recreate-ver", "title": "Carrierwave Cannot update a database to correct value after calling recreate_versions", "body": "<p>I am trying to reprocess all image uploads in my Rails app which uses Carrierwave as I have added a new image version. Looking at the documentation and other examples I found online I created a rake file with the following code:</p>\n\n<pre><code>namespace :reprocess_user_photo do\n    desc \"RESIZE\"\n    task :recreate =&gt; :environment do\n        User.all.each do |user|\n            if user.photo?\n                puts user.photo_url\n                user.photo.cache_stored_file!\n                user.photo.retrieve_from_cache!(user.photo.cache_name)\n                user.photo.recreate_versions!\n                puts user.photo_identifier\n                user.update_column(:photo, File.basename(user.photo_url))\n                user.save!\n                puts user.photo_identifier\n            end\n        rescue =&gt; e\n            puts  \"ERROR: User: #{user.id} -&gt; #{e.to_s}\"\n        end\n    end\nend\n</code></pre>\n\n<p>This has the output of the following:</p>\n\n<pre><code>/uploads/user/photo/2/1f99e6711141ef7ee2a516db9a197e87.jpg\n1f99e6711141ef7ee2a516db9a197e87.jpg\n9fda01d5a01ab9803d08d108078345bf.jpg\n</code></pre>\n\n<p>From this I can see the file being reprocessed is the correct one. The new file has a new name and appears in the correct directory (the new file can be found there) but the update to the database is not the correct file (this file name relates to an old file that existed before I started working on this feature and has long since been deleted).</p>\n\n<p>I have also tried replacing this code with:</p>\n\n<pre><code>namespace :reprocess_user_photo do\n    desc \"RESIZE\"\n    task :recreate =&gt; :environment do\n        User.all.each do |user|\n            if user.photo?\n                puts user.photo_url\n                user.photo.cache_stored_file!\n                user.photo.retrieve_from_cache!(user.photo.cache_name)\n                user.photo.recreate_versions!\n                puts user.photo_identifier\n                user.photo = File.basename(user.photo_url)\n                user.save!\n                puts user.photo_identifier\n            end\n        rescue =&gt; e\n            puts  \"ERROR: User: #{user.id} -&gt; #{e.to_s}\"\n        end\n    end\nend\n</code></pre>\n\n<p>which has the output:</p>\n\n<pre><code>/uploads/user/photo/2/0401399fd5c9092d5388e97b1991a295.jpg\n0401399fd5c9092d5388e97b1991a295.jpg\n0401399fd5c9092d5388e97b1991a295.jpg\n</code></pre>\n\n<p>This code does not replace the image at all.</p>\n\n<p>Finally I have tried the following: </p>\n\n<pre><code>namespace :reprocess_user_photo do\n    desc \"RESIZE\"\n    task :recreate =&gt; :environment do\n        User.all.each do |user|\n            if user.photo?\n                puts user.photo_url\n                user.photo.cache_stored_file!\n                user.photo.retrieve_from_cache!(user.photo.cache_name)\n                user.photo.recreate_versions!\n                puts user.photo_identifier\n                user.save!\n                puts user.photo_identifier\n            end\n        rescue =&gt; e\n            puts  \"ERROR: User: #{user.id} -&gt; #{e.to_s}\"\n        end\n    end\nend\n</code></pre>\n\n<p>which has the output</p>\n\n<pre><code>/uploads/user/photo/2/946283bd082efbf970784d3c2c00235c.jpg\n946283bd082efbf970784d3c2c00235c.jpg\n9fda01d5a01ab9803d08d108078345bf.jpg\n</code></pre>\n\n<p>In this test the new image was created with the file name 5f41bc1e46c67e551e9ea36a8109bae2.jpg</p>\n"}, {"tags": ["ruby", "rspec", "boxapiv2", "webmock"], "answers": [{"tags": [], "owner": {"reputation": 2405, "user_id": 3704713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c169cba3cd10f9bd85d65d5dc15630c?s=128&d=identicon&r=PG&f=1", "display_name": "MikeWu", "link": "https://stackoverflow.com/users/3704713/mikewu"}, "is_accepted": true, "score": 1, "last_activity_date": 1550732637, "creation_date": 1550732637, "answer_id": 54801082, "question_id": 54790747, "link": "https://stackoverflow.com/questions/54790747/test-using-self-expected-1-time-with-arguments-received-0-times/54801082#54801082", "title": "Test: Using self, expected: 1 time with arguments received: 0 times", "body": "<p>I think you can start with putting <code>expect(client).to receive(:upload_file).with(file_path, folder_id)</code> above <code>subject.upload_file_to_box(file_path, file_name, folder_id)</code></p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 54801082, "answer_count": 1, "score": 0, "last_activity_date": 1550732637, "creation_date": 1550679144, "question_id": 54790747, "link": "https://stackoverflow.com/questions/54790747/test-using-self-expected-1-time-with-arguments-received-0-times", "title": "Test: Using self, expected: 1 time with arguments received: 0 times", "body": "<p>I'm currently working on writting test for a Proxy Class that uses Boxr gem to make http calls to Box API. Currently, I have the following method:</p>\n\n<pre><code>class BoxApi\n ####\n  def upload_file_to_box(file_path, file, box_folder_id)\n    client.upload_file(file_path, self.folder(box_folder_id))\n  rescue Boxr::BoxrError\n    file = find_file_by_name(file).shift\n    client.upload_new_version_of_file(file_path, file)\n  end\n</code></pre>\n\n<p>I want to test that when <code>upload_file_to_box</code> is executed, the <code>client</code>'s method <code>upload_file</code> is called with arguments <code>file_path</code> and <code>folder</code>. I guess the error in this situation is the <code>self.folder</code> method.</p>\n\n<p>Which retrieves a folder from it's id as follows:</p>\n\n<pre><code>class BoxApi\n#######\n  def folder(box_folder_id)\n    prepare_folder(box_folder_id)\n  end\n\n  def prepare_folder(folder_id)\n    client.folder_from_id(folder_id)\n  end\n</code></pre>\n\n<p>I'm thinking this is where the error is coming from. However, the <code>method</code> is stubbed to return a string. <code>allow(subject).to receive(:folder).with(folder_id).and_return('123')</code> </p>\n\n<p>Here is the full method test:</p>\n\n<pre><code>context 'success' do\n  subject { BoxApi.new }\n  let(:client) { Boxr::Client.new(refresh_token: nil, jwt_private_key: nil) }\n\n  let(:file_path) {'spec/fixtures/pdfs/pdf_without_data.pdf'}\n  let(:file_name) {'pdf_without_data.pdf'}\n  let(:folder_id) {'123'}\n\n  it 'Uploads file to folder on Box' do\n    allow(subject).to receive(:client).and_return(client)\n    allow(subject).to receive(:folder).with(folder_id).and_return('123')\n    allow(client).to receive(:upload_file).with(file_path, folder_id).and_return(status: 201)\n\n\n    subject.upload_file_to_box(file_path, file_name, folder_id)\n\n    expect(client).to receive(:upload_file).with(file_path, folder_id)\n  end\nend\n</code></pre>\n\n<p>If I <code>pry</code> into the test case, I'm able to see that <code>calling</code> folder does return the expect string.</p>\n\n<pre><code>[1] pry(#&lt;RSpec::ExampleGroups::BoxApi::UploadFileToBox::Fail&gt;)&gt; subject.upload_file_to_box(file_path, file_name, folder_id)\n=&gt; {:status=&gt;201}\n[2] pry(#&lt;RSpec::ExampleGroups::BoxApi::UploadFileToBox::Fail&gt;)&gt; self\n=&gt; #&lt;RSpec::ExampleGroups::BoxApi::UploadFileToBox::Fail \"Uploads file to folder on Box\" (./spec/clients/box_api.rb:101)&gt;\n[3] pry(#&lt;RSpec::ExampleGroups::BoxApi::UploadFileToBox::Fail&gt;)&gt; subject.folder(folder_id)\n=&gt; \"123\"\n[4] pry(#&lt;RSpec::ExampleGroups::BoxApi::UploadFileToBox::Fail&gt;)&gt;\n</code></pre>\n\n<p>however, when I run the test I still get the error as if <code>upload_file_to_box</code> is never called.</p>\n\n<pre><code>Failures:\n\n  1) BoxApi#upload_file_to_box fail Uploads file to folder on Box\n     Failure/Error: expect(client).to receive(:upload_file).with(file_path, folder_id)\n\n       (#&lt;Boxr::Client:0x00007fea5f8b1db0 @access_token=\"123\", @refresh_token=nil, @client_id=\"1234\", @client_secret=\"345\", @enterprise_id=nil, @jwt_private_key=nil, @jwt_private_key_password=\"1234545677\", @jwt_public_key_id=\"12345467\", @identifier=nil, @as_user_id=nil, @token_refresh_listener=nil&gt;).upload_file(\"spec/fixtures/pdfs/pdf_without_data.pdf\", \"123\")\n           expected: 1 time with arguments: (\"spec/fixtures/pdfs/pdf_without_data.pdf\", \"123\")\n           received: 0 times\n</code></pre>\n"}, {"tags": ["ruby", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 4172, "user_id": 3088353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vGI0r.jpg?s=128&g=1", "display_name": "williamcodes", "link": "https://stackoverflow.com/users/3088353/williamcodes"}, "edited": false, "score": 0, "creation_date": 1550932998, "post_id": 54822281, "comment_id": 96458750, "body": "I could swap pry out for byebug but it wouldn&#39;t change the fact that it is never reached so execution never stops. The goal isn&#39;t to use the debugging tool to get more info, it&#39;s to leave the browser open at the time the assertion failed and allow me to run more commands."}, {"owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "reply_to_user": {"reputation": 4172, "user_id": 3088353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vGI0r.jpg?s=128&g=1", "display_name": "williamcodes", "link": "https://stackoverflow.com/users/3088353/williamcodes"}, "edited": false, "score": 0, "creation_date": 1550954589, "post_id": 54822281, "comment_id": 96464884, "body": "my point is by the time the assertion fails the interesting stuff is past. You can use Pry or Byebug that doesn&#39;t matter. But in general with a well written scenario that is failing you have to debug from the When that prompts the action, By the time you get to the Then that is failing you are past the problem code."}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1550821328, "creation_date": 1550821328, "answer_id": 54822281, "question_id": 54790643, "link": "https://stackoverflow.com/questions/54790643/how-to-pause-execution-on-error-in-cucumber-ruby/54822281#54822281", "title": "how to pause execution on error in cucumber ruby", "body": "<p>Use byebug.</p>\n\n<p>When you get an error, use the error message to </p>\n\n<ol>\n<li>get the scenario causing the problem (so you can run it on its own)</li>\n<li>get a starting point to start debugging, which will be above where the error occurs.</li>\n</ol>\n\n<p>There isn't much point in debugging at the point of the error because most errors occur when an assertion fails and you will just be in a pile of complex test framework code that has nothing to do with your application, and is already past the point of failure</p>\n"}], "owner": {"reputation": 4172, "user_id": 3088353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vGI0r.jpg?s=128&g=1", "display_name": "williamcodes", "link": "https://stackoverflow.com/users/3088353/williamcodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550821328, "creation_date": 1550678847, "question_id": 54790643, "link": "https://stackoverflow.com/questions/54790643/how-to-pause-execution-on-error-in-cucumber-ruby", "title": "how to pause execution on error in cucumber ruby", "body": "<p>I want the test suite to pause when an error is thrown so that I can debug in the browser, like how chrome devtools allows you to pause on error. I tried using an Around block to catch the error and start a debug session but the error must be getting caught before it bubbles up to this level because the rescue is never triggered.</p>\n\n<pre><code>require 'pry-nav'\n\nAround do |_scenario, block|\n  begin\n    block.call\n  rescue Exception, StandardError, Selenium::WebDriver::Error::UnknownError, RSpec::Expectations::ExpectationNotMetError, Capybara::ElementNotFound =&gt; e\n    puts e\n    binding.pry\n  end\nend\n</code></pre>\n\n<p>How do I stop the execution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1550678564, "post_id": 54790356, "comment_id": 96359294, "body": "What is <code>Smtpapi</code>? Where is it coming from? Is it a gem you are using?"}, {"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1552112813, "post_id": 54790356, "comment_id": 96896530, "body": "It is part of send-grid   sendgrid-ruby (1.1.6)       faraday (~&gt; 0.9)       mimemagic       smtpapi (~&gt; 0.1)     smtpapi (0.1.0)"}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 6, "last_activity_date": 1554879851, "creation_date": 1554879851, "answer_id": 55606593, "question_id": 54790356, "link": "https://stackoverflow.com/questions/54790356/nameerror-uninitialized-constant-smtpapi/55606593#55606593", "title": "NameError: uninitialized constant Smtpapi", "body": "<p><code>sendgrid-ruby</code> depends on <code>smtpapi</code> only in version 1.x, later versions including current 5.3.0 do not.</p>\n\n<p>Since this error came along with ruby update - it may be due to gems update. This should have been prevented by <code>Gemfile.lock</code>, but if Gemfile contains any mentions of windows (<code>mswin</code>, <code>mingw</code> etc.) Heroku will ignore it.</p>\n\n<p>The gem itself has not been updated for 4 years now, because sendgrid rewrote <code>sendgrid-ruby</code>.\nBest option is to follow them and update your code too.\nBut for app to run before you do that - you can explicitly lock version of sendgrid-ruby: <code>gem 'sendgrid-ruby', '~&gt;1.1.6'</code></p>\n"}], "owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1554904000, "creation_date": 1550678021, "last_edit_date": 1552112860, "question_id": 54790356, "link": "https://stackoverflow.com/questions/54790356/nameerror-uninitialized-constant-smtpapi", "title": "NameError: uninitialized constant Smtpapi", "body": "<p>I am tyring to push my code to Heroku and the build is failing with </p>\n\n<pre><code> NameError: uninitialized constant Smtpapi\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/app/helpers/my_mailer_header.rb:1:in `&lt;top (required)&gt;'\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/lib/api_v1/users.rb:3:in `&lt;top (required)&gt;'\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/lib/api_v1/mymedical.rb:3:in `&lt;class:Mymedical&gt;'\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/lib/api_v1/mymedical.rb:1:in `&lt;top (required)&gt;'\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/config/routes.rb:1:in `&lt;top (required)&gt;'\n    /tmp/build_0ce2a697c4ef6c16626b01b82d9463f3/vendor/bundle/ruby/2.4.0/gems/railties-4.2.11/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\n</code></pre>\n\n<p>I update my Gemfile from Ruby 2.3 to 2.4 and now I am getting this error? Cannot find a solution.</p>\n\n<p>This seems to be the code that is causing the issue.</p>\n\n<pre><code>class MyMailerHeader &lt; Smtpapi::Header\n</code></pre>\n\n<p>Does Smtpapi not exist in Ruby 2.4.2?</p>\n\n<p>The Smtpapi is part of Send-Grid gem and some other gem.</p>\n\n<pre><code>    sendgrid-ruby (1.1.6)\n      faraday (~&gt; 0.9)\n      mimemagic\n      smtpapi (~&gt; 0.1)\n    smtpapi (0.1.0)\n</code></pre>\n"}, {"tags": ["ruby", "visual-studio-code"], "comments": [{"owner": {"reputation": 327, "user_id": 4942323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxEAB.jpg?s=128&g=1", "display_name": "Sepp", "link": "https://stackoverflow.com/users/4942323/sepp"}, "edited": false, "score": 0, "creation_date": 1550677508, "post_id": 54789237, "comment_id": 96358616, "body": "How do you run the script? You execute the script like a bash file. To run a ruby script you have to run it like this:  <code>ruby test.rb</code>"}, {"owner": {"reputation": 29, "user_id": 9175041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313fab97a16147daee43bb1d299d3eb?s=128&d=identicon&r=PG&f=1", "display_name": "user9175041", "link": "https://stackoverflow.com/users/9175041/user9175041"}, "reply_to_user": {"reputation": 327, "user_id": 4942323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxEAB.jpg?s=128&g=1", "display_name": "Sepp", "link": "https://stackoverflow.com/users/4942323/sepp"}, "edited": false, "score": 0, "creation_date": 1550677677, "post_id": 54789237, "comment_id": 96358739, "body": "How do i configure that in VSCode? If I run it in a separate terminal using the ruby command it works, but VSCode doesnt add the ruby command automatically in VSCode, even though I have it saved as a .rb file and set up the language as Ruby"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9175041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313fab97a16147daee43bb1d299d3eb?s=128&d=identicon&r=PG&f=1", "display_name": "user9175041", "link": "https://stackoverflow.com/users/9175041/user9175041"}, "edited": false, "score": 0, "creation_date": 1550681401, "post_id": 54790495, "comment_id": 96361004, "body": "Worked for me. Thanks!"}], "tags": [], "owner": {"reputation": 352, "user_id": 9183222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9b1a50e6c274ae33796027c3d4ce156?s=128&d=identicon&r=PG&f=1", "display_name": "Aman Gupta", "link": "https://stackoverflow.com/users/9183222/aman-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1550678391, "creation_date": 1550678391, "answer_id": 54790495, "question_id": 54789237, "link": "https://stackoverflow.com/questions/54789237/how-do-i-change-the-terminal-command-type-in-vscode/54790495#54790495", "title": "How do I change the terminal command type in VSCode", "body": "<p>just add <strong>.</strong> to the start of the file but make sure you do the following before executing it</p>\n\n<ol>\n<li>start your program with #!/usr/bin/env ruby,</li>\n<li>make your file executable by running chmod +x your_program.rb</li>\n<li>and do <strong>.</strong>/your_program.rb some_param</li>\n</ol>\n"}], "owner": {"reputation": 29, "user_id": 9175041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313fab97a16147daee43bb1d299d3eb?s=128&d=identicon&r=PG&f=1", "display_name": "user9175041", "link": "https://stackoverflow.com/users/9175041/user9175041"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54790495, "answer_count": 1, "score": 0, "last_activity_date": 1550678391, "creation_date": 1550674706, "question_id": 54789237, "link": "https://stackoverflow.com/questions/54789237/how-do-i-change-the-terminal-command-type-in-vscode", "title": "How do I change the terminal command type in VSCode", "body": "<p>Im running VSCode on Mac and I'm trying to write a Ruby script, however everytime I try to run the file I get this error:</p>\n\n<pre><code>/Ruby/test.rb: line 1: puts: command not found\n</code></pre>\n\n<p>I notice that the terminal is set up to use bash. I suspect that I need to somehow configure the terminal to recognize the script as Ruby, but I'm not sure how.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11090670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32fc231f851dd45e3d3315d6c7f459b?s=128&d=identicon&r=PG&f=1", "display_name": "blackbrokkoli", "link": "https://stackoverflow.com/users/11090670/blackbrokkoli"}, "is_accepted": false, "score": 0, "last_activity_date": 1550763984, "creation_date": 1550763984, "answer_id": 54810993, "question_id": 54789173, "link": "https://stackoverflow.com/questions/54789173/debugging-rails-latex-gem-on-heroku-actionviewtemplateerror-rails-latex-fa/54810993#54810993", "title": "Debugging rails-latex gem on Heroku | ActionView::Template::Error rails-latex failed", "body": "<p>Just in case anyone ever stumbles upon this:</p>\n\n<p>After a lot of headache I found that my file containing my tex packages (instructed in the README of the buildpack) was incorrectly named and not doing anything, so I was trying to use non-existing packages.</p>\n\n<p>Fixing that sent me down another rabbithole in the world of texlive-versions, but brute-forcing my way through various version declaration and replacing libraries finally got me a working Heroku app.</p>\n\n<p>If you have a similar problem, I recommend deleting all tex dependencies, get a MWE and then slowly add them back in to identify the evildoers.</p>\n"}], "owner": {"reputation": 1, "user_id": 11090670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32fc231f851dd45e3d3315d6c7f459b?s=128&d=identicon&r=PG&f=1", "display_name": "blackbrokkoli", "link": "https://stackoverflow.com/users/11090670/blackbrokkoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550763984, "creation_date": 1550674536, "question_id": 54789173, "link": "https://stackoverflow.com/questions/54789173/debugging-rails-latex-gem-on-heroku-actionviewtemplateerror-rails-latex-fa", "title": "Debugging rails-latex gem on Heroku | ActionView::Template::Error rails-latex failed", "body": "<p><strong>Problem:</strong></p>\n\n<p>I have a Rails app which generates a pdf via the <code>rails-latex</code> gem. It works just fine on <code>rails s</code> and <code>heroku local</code>.\nHowever, trying to use the pdf-generation-link on Heroku throws me <code>We're sorry, but something went wrong.</code></p>\n\n<p>Using <code>heroku logs --tail</code> yields me:</p>\n\n<pre><code>Rendered sheets/show.pdf.erb within layouts/application (3.4ms)\nRunning 'pdflatex -halt-on-error -shell-escape -interaction=batchmode input' in /app/tmp/rails-latex/4--3678030941334020140 1 times...\nCompleted 500 Internal Server Error in 59ms (ActiveRecord: 5.6ms)\nActionView::Template::Error (rails-latex failed: See /app/tmp/rails-latex/4--3678030941334020140/input.log for details):\n19:\n20: \\end{document}\napp/views/layouts/application.pdf.erbtex:22:in `_app_views_layouts_application_pdf_erbtex___[LOTS OF NUMBERS]\n</code></pre>\n\n<p>Again, the rest of the Heroku app and the local version are working, so this is not a problem with models etc.</p>\n\n<p>teX is installed with a buildback (the installation shows as successful when pushing). \n<code>heroku buildpacks</code> is:</p>\n\n<pre><code>1. heroku/ruby\n2. https://github.com/Thermondo/heroku-buildpack-tex.git\n</code></pre>\n\n<p><strong>What I tried:</strong></p>\n\n<p>I tried to access the file referenced in the error message, however (I think because of Herokus dyno system) the <code>app/tmp</code> does not exist or isn't accessible by the <code>heroku run bash</code> console at least.</p>\n\n<p>The layout file referenced in the logs contains:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>\\documentclass[12pt,a5paper,sloppy]{article}\r\n&lt;% @latex_config = { :recipe =&gt; [\r\n\t{:command =&gt; 'pdflatex'},\r\n]} # you can override the defaults if you wish; see LatexToPdf#config\r\n%&gt;\r\n\\usepackage{filecontents}\r\n\\usepackage{lastpage}\r\n\\usepackage{graphics}\r\n\\usepackage[utf8]{inputenc}\r\n\\usepackage{scrextend}\r\n\\usepackage[a5paper, left=.3cm, right=.3cm, bottom=0cm, top=0.3cm]{geometry}\r\n\r\n\\setlength\\parindent{0pt}\r\n\\thispagestyle{empty}\r\n\r\n\\begin{document}\r\n\r\n\t&lt;%= yield %&gt;\r\n\r\n\\end{document}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>I'm really at a loss here because I can't get more information to debug nor replicate the error anywhere else.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1550679532, "last_edit_date": 1550679532, "creation_date": 1550678724, "answer_id": 54790603, "question_id": 54788845, "link": "https://stackoverflow.com/questions/54788845/how-can-i-convert-a-guid-into-a-byte-array-in-ruby/54790603#54790603", "title": "How can I convert a GUID into a byte array in Ruby?", "body": "<p>Your example GUID is in a Microsoft specific format. From <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Encoding\" rel=\"nofollow noreferrer\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>Other systems, notably Microsoft's marshalling of UUIDs in their COM/OLE libraries, use a mixed-endian format, whereby the first three components of the UUID are little-endian, and the last two are big-endian.</p>\n</blockquote>\n\n<p>So in order to get that result, we have to move the bits around a little. Specifically, we have to change the endianess of the first three components. Let's start by breaking the GUID string apart:</p>\n\n<pre><code>guid = '35918bc9-196d-40ea-9779-889d79b753f0'\nparts = guid.split('-')\n#=&gt; [\"35918bc9\", \"196d\", \"40ea\", \"9779\", \"889d79b753f0\"]\n</code></pre>\n\n<p>We can convert these hex-strings to binary via:</p>\n\n<pre><code>mixed_endian = parts.pack('H* H* H* H* H*')\n#=&gt; \"5\\x91\\x8B\\xC9\\x19m@\\xEA\\x97y\\x88\\x9Dy\\xB7S\\xF0\"\n</code></pre>\n\n<p>Next let's swap the first three parts:</p>\n\n<pre><code>big_endian = mixed_endian.unpack('L&lt; S&lt; S&lt; A*').pack('L&gt; S&gt; S&gt; A*')\n#=&gt; \"\\xC9\\x8B\\x915m\\x19\\xEA@\\x97y\\x88\\x9Dy\\xB7S\\xF0\"\n</code></pre>\n\n<ul>\n<li><code>L</code> denotes a 32-bit unsigned integer (1st component)</li>\n<li><code>S</code> denotes a 16-bit unsigned integer (2nd and 3rd component) </li>\n<li><code>&lt;</code> and <code>&gt;</code> denote little-endian and big-endian, respectively</li>\n<li><code>A*</code> treats the remaining bytes as an arbitrary binary string (we don't have to convert these)</li>\n</ul>\n\n<p>If you prefer an array of bytes instead of a binary string, you'd just use:</p>\n\n<pre><code>big_endian.bytes\n#=&gt; [201, 139, 145, 53, 109, 25, 234, 64, 151, 121, 136, 157, 121, 183, 83, 240]\n</code></pre>\n\n<hr>\n\n<p>PS: if your actual GUID isn't Microsoft specific, you can skip the swapping part.</p>\n"}], "owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 54790603, "answer_count": 1, "score": 1, "last_activity_date": 1550679532, "creation_date": 1550673526, "question_id": 54788845, "link": "https://stackoverflow.com/questions/54788845/how-can-i-convert-a-guid-into-a-byte-array-in-ruby", "title": "How can I convert a GUID into a byte array in Ruby?", "body": "<p>In order to save data traffic we want to send our GUID's as array of bytes instead of as a string (with the use of Google Protocol Buffers).</p>\n\n<p>How can I convert a string representation of a GUID in Ruby to an array of bytes:</p>\n\n<p>Example:</p>\n\n<pre><code>Guid: 35918bc9-196d-40ea-9779-889d79b753f0\n=&gt; Result: C9 8B 91 35 6D 19 EA 40 97 79 88 9D 79 B7 53 F0\n</code></pre>\n\n<p>In .NET this seems to be natively implemented: \n<a href=\"http://msdn.microsoft.com/en-us/library/system.guid.tobytearray%28v=vs.110%29.aspx\" rel=\"nofollow noreferrer\">http://msdn.microsoft.com/en-us/library/system.guid.tobytearray%28v=vs.110%29.aspx</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1175, "user_id": 1142113, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce627ea82f589ccb85c6a37b921dcad6?s=128&d=identicon&r=PG", "display_name": "Gregology", "link": "https://stackoverflow.com/users/1142113/gregology"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1550851663, "post_id": 54788840, "comment_id": 96436773, "body": "Hi @mu-is-too-short, I was googling for a while to find a solution and the suggested duplicate never came up. I assume it never came up because it&#39;s referring to methods as functions. I appreciate that the answer is the same but hopefully this question will save a dev some time in the future. Either that or update the duplicate question to use the term &quot;method&quot; instead, especially in the title so it comes up on searches."}], "answers": [{"comments": [{"owner": {"reputation": 1175, "user_id": 1142113, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce627ea82f589ccb85c6a37b921dcad6?s=128&d=identicon&r=PG", "display_name": "Gregology", "link": "https://stackoverflow.com/users/1142113/gregology"}, "edited": false, "score": 0, "creation_date": 1550676878, "post_id": 54788915, "comment_id": 96358216, "body": "Thank you! I was googling for ages but I didn&#39;t know what I should be searching for :+1:"}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": true, "score": 4, "last_activity_date": 1550674091, "last_edit_date": 1550674091, "creation_date": 1550673770, "answer_id": 54788915, "question_id": 54788840, "link": "https://stackoverflow.com/questions/54788840/string-as-object-method-in-ruby/54788915#54788915", "title": "String as object method in Ruby", "body": "<p>You can call just any method on an object with <code>send</code>:</p>\n\n<pre><code>foo = 'bar'\nBaz.send(foo) // calls bar on Baz\n</code></pre>\n\n<p>This calls private methods, too. If you only want to call public methods use <code>public_send</code>:</p>\n\n<pre><code>foo = 'bar'\nBaz.public_send(foo) // calls only public method bar on Baz\n</code></pre>\n\n<p>If you want to check if a public method is defined, you can use <code>respond_to?</code></p>\n\n<pre><code>foo = 'bar'\nif Baz.respond_to?(foo)\n  // only gets executed if public method bar is defined on Baz\n  Baz.send(foo) // executes bar on Baz\nend\n</code></pre>\n\n<p>If you want to also check private methods you have to provide <code>true</code> as second arg:</p>\n\n<pre><code>Baz.respond_to?(foo, true)\n</code></pre>\n"}], "owner": {"reputation": 1175, "user_id": 1142113, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce627ea82f589ccb85c6a37b921dcad6?s=128&d=identicon&r=PG", "display_name": "Gregology", "link": "https://stackoverflow.com/users/1142113/gregology"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1550680753, "accepted_answer_id": 54788915, "answer_count": 1, "score": 2, "last_activity_date": 1550674091, "creation_date": 1550673519, "question_id": 54788840, "link": "https://stackoverflow.com/questions/54788840/string-as-object-method-in-ruby", "closed_reason": "Duplicate", "title": "String as object method in Ruby", "body": "<p>Is it possible to use a string to call a method on an object. For instance with a string <code>foo = 'bar'</code>, how could I call <code>bar</code> on the class <code>Baz</code>: <code>Baz.bar</code>. An alternative would be to create a case statement like this;</p>\n\n<pre><code>case foo\nwhen 'bar'\n  Baz.bar\nwhen 'qux'\n  Baz.qux\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10766598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zFS3VaLL1ZY/AAAAAAAAAAI/AAAAAAAAAEc/M23Z0HL9tzQ/photo.jpg?sz=128", "display_name": "\u3072\u308d\u30dd\u30f3\u30c1\u30e3\u30f3\u30cd\u30eb", "link": "https://stackoverflow.com/users/10766598/%e3%81%b2%e3%82%8d%e3%83%9d%e3%83%b3%e3%83%81%e3%83%a3%e3%83%b3%e3%83%8d%e3%83%ab"}, "edited": false, "score": 0, "creation_date": 1550706296, "post_id": 54790653, "comment_id": 96371853, "body": "Oh..I have very simple mistake... It worked.  I&#39;m sorry in a rudimentary mistake. Thank you for all your kindness!"}], "tags": [], "owner": {"reputation": 5980, "user_id": 60131, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/axDcf.jpg?s=128&g=1", "display_name": "John Gallagher", "link": "https://stackoverflow.com/users/60131/john-gallagher"}, "is_accepted": false, "score": 1, "last_activity_date": 1550679326, "last_edit_date": 1550679326, "creation_date": 1550678864, "answer_id": 54790653, "question_id": 54787949, "link": "https://stackoverflow.com/questions/54787949/how-to-test-spree-decorator-in-original-app/54790653#54790653", "title": "How to test spree decorator in original app?", "body": "<h2>The Problem</h2>\n\n<p>It's not loading Rails so it can't see Spree.</p>\n\n<h2>The Solution</h2>\n\n<p><strong><code>MyApp/specs/controllers/home_controller_spec.rb</code></strong></p>\n\n<p>Instead of</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'spec_helper'\n\ndescribe Spree::HomeController do\n  # ...\n</code></pre>\n\n<p>you need</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rails_helper'\n\ndescribe Spree::HomeController do\n  # ...\n</code></pre>\n\n<h2>More Information</h2>\n\n<ul>\n<li><code>spec_helper</code> is designed to set up RSpec ready for testing plain Ruby objects</li>\n<li>If your code under test was in the <code>lib</code> folder and didn't depend on Rails, this would be fine</li>\n<li>Because Spree depends entirely on Rails, you need to load Rails by <code>require 'rails_helper'</code></li>\n<li><code>rails_helper</code> also requires <code>spec_helper</code> but the reverse is not true</li>\n<li><code>rails_helper</code> is much slower to load than <code>spec_helper</code> precisely because it boots up Rails</li>\n</ul>\n\n<h2>Anatomy of <code>rails_helper</code></h2>\n\n<ul>\n<li>Rails 5 version</li>\n<li>Your <code>rails_helper</code> might look different</li>\n</ul>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Load spec_helper\nrequire 'spec_helper'\n\n# Setup Rails to run in test mode\nENV['RAILS_ENV'] ||= 'test'\n\n# This is the magic line that runs Rails. Check out config/environment.rb.\nrequire File.expand_path('../../config/environment', __FILE__)\n\n# Guard against running any tests in production mode\nabort(\"The Rails environment is running in production mode!\") if Rails.env.production?\n\n# Load all the rspec rails related goodness\nrequire 'rspec/rails'\n\n# Make sure the migrations are up to date\nbegin\n  ActiveRecord::Migration.maintain_test_schema!\nrescue ActiveRecord::PendingMigrationError =&gt; e\n  puts e.to_s.strip\n  exit 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10766598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zFS3VaLL1ZY/AAAAAAAAAAI/AAAAAAAAAEc/M23Z0HL9tzQ/photo.jpg?sz=128", "display_name": "\u3072\u308d\u30dd\u30f3\u30c1\u30e3\u30f3\u30cd\u30eb", "link": "https://stackoverflow.com/users/10766598/%e3%81%b2%e3%82%8d%e3%83%9d%e3%83%b3%e3%83%81%e3%83%a3%e3%83%b3%e3%83%8d%e3%83%ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550679326, "creation_date": 1550670663, "question_id": 54787949, "link": "https://stackoverflow.com/questions/54787949/how-to-test-spree-decorator-in-original-app", "title": "How to test spree decorator in original app?", "body": "<p>I'm making Rails app called \"MyApp\" with Spree and try test with RSpec.</p>\n\n<p>I read Spree Test App Document, and try test with RSpec.</p>\n\n<p>But I got error</p>\n\n<pre><code>~/r/d/MyApp \u276f\u276f\u276f bundle exec rspec                                                             \n\nAn error occurred while loading ./spec/controllers/spree/home_controller_spec.rb.\nFailure/Error:\n  describe Spree::HomeController, type: :controller do\n    it \"render index template\" do\n      get :index\n      response.should render_template(:index)\n    end\n  end\n\nNameError:\n  uninitialized constant Spree\n# ./spec/controllers/spree/home_controller_spec.rb:3:in `&lt;top (required)&gt;'\nNo examples found.\n\nFinished in 0.0004 seconds (files took 0.146 seconds to load)\n0 examples, 0 failures, 1 error occurred outside of examples\n</code></pre>\n\n<blockquote>\n  <p>NameError: uninitialized constant Spree\n  I think that this error occured because it only define decorator.\n  Original Controller is defined in Spree gem(core, backend, frontend ...etc).</p>\n</blockquote>\n\n<p>Detail codes are the following: </p>\n\n<p>MyApp/app/controllers/home_controller_decorator.rb</p>\n\n<pre><code>Spree::HomeController.class_eval do\n  def index\n    do_something\n  end\nend\n</code></pre>\n\n<p>MyApp/specs/controllers/home_controller_spec.rb</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Spree::HomeController do\n  it \"render index template\" do\n    get :index\n    response.should render_template(:index)\n  end\nend\n</code></pre>\n\n<p>MyApp/spec/spec_helper.rb</p>\n\n<pre><code>RSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n  config.shared_context_metadata_behavior = :apply_to_host_groups\n  config.disable_monkey_patching!\n  config.order = :random\n  Kernel.srand config.seed\nend\n\n</code></pre>\n\n<p>How to test my decorator original logic?\nWhere should I write code?\nCan't test MyApp/spec directory?</p>\n\n<p>Maybe I misunderstand about Spree Test.</p>\n\n<p>Please give me the hint.\nThank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport-concern"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550668610, "post_id": 54787224, "comment_id": 96352853, "body": "Nope. AS::Concern doesn&#39;t do any before/after callbacks. Also you mean &quot;initializer&quot;, not &quot;constructor&quot;. It does not <i>create</i> the object."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550669045, "post_id": 54787224, "comment_id": 96353138, "body": "Thanks. AFAIK &quot;constructor&quot; and &quot;initialize(r)&quot; are used interchangeably in Ruby, but updated anyway."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1550670370, "post_id": 54787224, "comment_id": 96353999, "body": "Can you please elaborate on what you try to achieve? How do you want to use the concern?"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1550673402, "post_id": 54787224, "comment_id": 96355961, "body": "Had a couple of applications in mind, one being a locking mechanism and one being benchmarking."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550672491, "post_id": 54788510, "comment_id": 96355364, "body": "Where does this <code>after_initialize</code> come from?"}, {"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550672600, "post_id": 54788510, "comment_id": 96355441, "body": "It is one of the callbacks provided by Rails. <a href=\"https://guides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> The code in <code>after_initialize</code> gets triggered as soon as we instantiate an object."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550672781, "post_id": 54788510, "comment_id": 96355568, "body": "There&#39;s no such thing as &quot;rails provides&quot;. Rails is a huge monster, consisting of many many smaller libs. Your link points to a page titled &quot;Active Record callbacks&quot;. Note that active record is not mentioned in the question. If a class is not an activerecord (or does not include the relevant activemodel module), it does not get that callback."}, {"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550673072, "post_id": 54788510, "comment_id": 96355750, "body": "Well, Activesupport is mentioned in the question, and that is definitely part of Rails. Link: <a href=\"https://github.com/rails/rails/tree/master/activesupport\" rel=\"nofollow noreferrer\">github.com/rails/rails/tree/master/activesupport</a> Also, the question is tagged as a &quot;Ruby on Rails&quot; question. Hence, the usage of ActiveRecord is justified"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550673154, "post_id": 54788510, "comment_id": 96355797, "body": "&quot;the usage of ActiveRecord is justified&quot; - no, it&#39;s not. Not every class in a rails app is an activerecord. Some rails apps don&#39;t even have activerecord loaded. And activesupport by itself doesn&#39;t offer these callbacks."}, {"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1550673173, "post_id": 54788510, "comment_id": 96355817, "body": "Added a note mentioning the usage in only those classes that include ActiveRecord"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550673338, "post_id": 54788510, "comment_id": 96355928, "body": "Yes, note is good, but, IMHO, it deserves a more prominent position. Like, at the very top, and in bold font :)"}, {"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550673437, "post_id": 54788510, "comment_id": 96355983, "body": "Agreed! @SergioTulentsev"}], "tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1550673397, "last_edit_date": 1550673397, "creation_date": 1550672390, "answer_id": 54788510, "question_id": 54787224, "link": "https://stackoverflow.com/questions/54787224/activesupportconcern-running-method-before-after-initialize/54788510#54788510", "title": "ActiveSupport::Concern running method before/after initialize", "body": "<p>NOTE: This would work for models or only those classes which inherit from <code>ActiveRecord</code>.</p>\n\n<p>Rails does not support a <code>before_initialize</code> callback. You could use the <a href=\"https://guides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find\" rel=\"nofollow noreferrer\">after_initialize</a> callback instead. However, when using it in a concern, you need to mention it in an <code>included do..end</code> block. For example, the following code should work for your use case:</p>\n\n<pre><code>Module Benchmarker\n  extend ActiveSupport::Concern\n\n  included do\n    after_initialize do |subject|\n      p \"I'm in after_initialize\"\n    end\n  end\nend\n</code></pre>\n\n<p>You could refer to <a href=\"https://stackoverflow.com/questions/28009772/ruby-modules-included-do-end-block\">this answer</a> for more details on how the <code>included</code> hook works. <br></p>\n"}], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 54788510, "answer_count": 1, "score": 0, "last_activity_date": 1550673474, "creation_date": 1550668490, "last_edit_date": 1550673474, "question_id": 54787224, "link": "https://stackoverflow.com/questions/54787224/activesupportconcern-running-method-before-after-initialize", "title": "ActiveSupport::Concern running method before/after initialize", "body": "<p>Does <code>ActiveSupport::Concern</code> support a way to run a method before or after the object's constructed.</p>\n\n<p>e.g. to achieve something like</p>\n\n<pre><code>Module Benchmarker\n\n  extend ActiveSupport::Concern\n\n  before_initialize\n    @constructed_at = DateTime.now\n  end\n\nend\n</code></pre>\n\n<p>(Note: Not wanting this for ActiveRecord or ActiveController. Just a generic Ruby class within a Rails project.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "nokogiri", "macos-mojave"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 4187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd129b52e33f9377b97eb93c19357c55?s=128&d=identicon&r=PG", "display_name": "Wes Oldenbeuving", "link": "https://stackoverflow.com/users/4187/wes-oldenbeuving"}, "edited": false, "score": 8, "creation_date": 1550669668, "post_id": 54787462, "comment_id": 96353536, "body": "I&#39;d like to add some nuance to this answer: <code>~&#47;.gemrc</code> contained a referce use rubyforge as a source. This was relevant 10 years ago, but these days gems live on rubygems.org, so you should have a reference to have <code>https:&#47;&#47;rubygems.org</code> as source instead."}, {"owner": {"reputation": 305, "user_id": 11089895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3dUEWEzHLFg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOqBZ80ui0ex5n1nBXQjDX1j30nZg/mo/photo.jpg?sz=128", "display_name": "R&#233;mi JUHE", "link": "https://stackoverflow.com/users/11089895/r%c3%a9mi-juhe"}, "edited": false, "score": 2, "creation_date": 1550678437, "post_id": 54787462, "comment_id": 96359220, "body": "Thanks a lot Morgan ! I checked my current sources, they were outdated, so I removed them and replaced them with <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>. Then I was able to install nokogori and run bundle install without any problem."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "edited": false, "score": 0, "creation_date": 1553268232, "post_id": 54787462, "comment_id": 97334131, "body": "removing your .gemrc is **** NOT **** the solution. In fact a .gemrc can have a number of helpful controls like setting <code>gem: --no-ri --no-rdoc</code> :: the correct naswer to this question is the one with more votes below."}], "tags": [], "owner": {"reputation": 365, "user_id": 1149166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QhDs2.jpg?s=128&g=1", "display_name": "Morgan Jarry", "link": "https://stackoverflow.com/users/1149166/morgan-jarry"}, "is_accepted": false, "score": 23, "last_activity_date": 1550669257, "creation_date": 1550669257, "answer_id": 54787462, "question_id": 54786580, "link": "https://stackoverflow.com/questions/54786580/error-while-executing-gem-typeerror-incompatible-marshal-file-format-can/54787462#54787462", "title": "ERROR: While executing gem ... (TypeError) incompatible marshal file format (can&#39;t be read)", "body": "<p>Try removing your <code>~/.gemrc</code>. I had the same problem on Mojave and this solve my problem.</p>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 11089895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3dUEWEzHLFg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOqBZ80ui0ex5n1nBXQjDX1j30nZg/mo/photo.jpg?sz=128", "display_name": "R&#233;mi JUHE", "link": "https://stackoverflow.com/users/11089895/r%c3%a9mi-juhe"}, "is_accepted": true, "score": 39, "last_activity_date": 1550678690, "creation_date": 1550678690, "answer_id": 54790592, "question_id": 54786580, "link": "https://stackoverflow.com/questions/54786580/error-while-executing-gem-typeerror-incompatible-marshal-file-format-can/54790592#54790592", "title": "ERROR: While executing gem ... (TypeError) incompatible marshal file format (can&#39;t be read)", "body": "<p>Thanks to Morgan Jarry answer, this is what worked for me :</p>\n\n<p>I checked my current sources and indeed they were outdated :</p>\n\n<pre><code>gem sources\n</code></pre>\n\n<p>It printed </p>\n\n<pre><code>*** CURRENT SOURCES ***\nhttp://gems.rubyforge.org/\nhttp://gems.github.com\n</code></pre>\n\n<p>So I ran this script to remove them and replaced them with <a href=\"https://rubygems.org/\" rel=\"noreferrer\">https://rubygems.org/</a></p>\n\n<pre><code>gem sources -r  http://gems.rubyforge.org/\ngem sources -r http://gems.github.com\ngem sources -a https://rubygems.org/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "edited": false, "score": 0, "creation_date": 1552291864, "post_id": 54885539, "comment_id": 96938293, "body": "This helped, I had <a href=\"http://gemcutter.org\" rel=\"nofollow noreferrer\">gemcutter.org</a> setup, removing which my problem went away"}], "tags": [], "owner": {"reputation": 355, "user_id": 9272667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzjR1.jpg?s=128&g=1", "display_name": "Th&#233;ophile Avoyne", "link": "https://stackoverflow.com/users/9272667/th%c3%a9ophile-avoyne"}, "is_accepted": false, "score": 9, "last_activity_date": 1551184292, "last_edit_date": 1551184292, "creation_date": 1551183878, "answer_id": 54885539, "question_id": 54786580, "link": "https://stackoverflow.com/questions/54786580/error-while-executing-gem-typeerror-incompatible-marshal-file-format-can/54885539#54885539", "title": "ERROR: While executing gem ... (TypeError) incompatible marshal file format (can&#39;t be read)", "body": "<p>You have to remove all the gem sources you have and add <a href=\"https://rubygems.org/\" rel=\"noreferrer\">https://rubygems.org/</a> instead. Note that <a href=\"http://gems.rubyforge.org/\" rel=\"noreferrer\">http://gems.rubyforge.org/</a> and <a href=\"http://gems.github.com\" rel=\"noreferrer\">http://gems.github.com</a> are permanently dead and should be removed. You can list your sources by running:</p>\n\n<pre><code>gem sources \n</code></pre>\n\n<p>You should get something like this:</p>\n\n<pre><code>*** CURRENT SOURCES ***\n\n//gems.rubyforge.org/\n//gems.github.com\n</code></pre>\n\n<p>1) Delete all sources:</p>\n\n<pre><code>gem sources -r http://gems.rubyforge.org/\ngem sources -r http://gems.github.com\n</code></pre>\n\n<p>2) Add the right source:</p>\n\n<pre><code>gem sources -a https://rubygems.org/\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 305, "user_id": 11089895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3dUEWEzHLFg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOqBZ80ui0ex5n1nBXQjDX1j30nZg/mo/photo.jpg?sz=128", "display_name": "R&#233;mi JUHE", "link": "https://stackoverflow.com/users/11089895/r%c3%a9mi-juhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5600, "favorite_count": 5, "accepted_answer_id": 54790592, "answer_count": 3, "score": 17, "last_activity_date": 1552668200, "creation_date": 1550666300, "last_edit_date": 1552668200, "question_id": 54786580, "link": "https://stackoverflow.com/questions/54786580/error-while-executing-gem-typeerror-incompatible-marshal-file-format-can", "title": "ERROR: While executing gem ... (TypeError) incompatible marshal file format (can&#39;t be read)", "body": "<p>I encountered this issue when I run <code>bundle install</code> with Ruby version 2.4.4 and macOS Mojave:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Fetching nokogiri 1.8.5\nInstalling nokogiri 1.8.5 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\nERROR: cannot discover where libxml2 is located on your system. please\nmake sure `pkg-config` is installed.\n</code></pre>\n\n<p>So I ran</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>xcode-select --install\n</code></pre>\n\n<p>But then when I run <code>gem install nokogiri</code> I got the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ERROR:  While executing gem ... (TypeError)\n    incompatible marshal file format (can't be read)\n    format version 4.8 required; 60.33 given\n</code></pre>\n\n<p>I tried to set my <code>cookies_serializer</code> to <code>:hybrid</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.config.action_dispatch.cookies_serializer = :hybrid\n</code></pre>\n\n<p>But nothing worked.</p>\n\n<p>Is there a way to fix this? I cannot even run my Rails server right now.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550665573, "post_id": 54786097, "comment_id": 96351042, "body": "You need to show the backtrace."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550665760, "post_id": 54786097, "comment_id": 96351178, "body": "<code>params[:questions]</code> is probably <code>nil</code> (though I can&#39;t be sure without the backtrace)."}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550666380, "post_id": 54786097, "comment_id": 96351547, "body": "@MarekLipka yes when i do binding pry than params[:questions] is nil but in model there are 2 questions in that survey"}, {"owner": {"reputation": 2837, "user_id": 6245337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VoQ5.jpg?s=128&g=1", "display_name": "Ana Mar&#237;a Mart&#237;nez G&#243;mez", "link": "https://stackoverflow.com/users/6245337/ana-mar%c3%ada-mart%c3%adnez-g%c3%b3mez"}, "edited": false, "score": 0, "creation_date": 1550666889, "post_id": 54786097, "comment_id": 96351853, "body": "@ShahrozAshraf are you passing them as param? can you post more context - for example the view code?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667417, "post_id": 54786097, "comment_id": 96352171, "body": "in params i am passing question_id survey_id like this..it has no view... this is api"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550666554, "post_id": 54786626, "comment_id": 96351656, "body": "yes when i do binding pry than params[:questions] is nil but in model there are 2 questions in that survey model"}, {"owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550666698, "post_id": 54786626, "comment_id": 96351742, "body": "I assume that you&#39;re submitting some sort of a form then. Make sure you allow the parameters that you are passing through. Otherwise, they could be <b>nil</b> even if you enter them."}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667199, "post_id": 54786626, "comment_id": 96352031, "body": "key                       value                              survey_id             1 question_id          32 title                       test   this is how i am giving parameters in postman"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667342, "post_id": 54786626, "comment_id": 96352131, "body": "Completed 500 Internal Server Error in 377041ms (ActiveRecord: 0.0ms)      NoMethodError (undefined method <code>each&#39; for nil:NilClass):    app&#47;controllers&#47;api&#47;survey_answers_controller.rb:8:in </code>create&#39;"}, {"owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667371, "post_id": 54786626, "comment_id": 96352151, "body": "Well, then you&#39;re trying to loop through <code>params[:questions]</code> while supplying only <code>params[:question_id]</code>.  By looking at your code, I would suggest passing a hash with all of the questions instead of a single <b>question_id</b> parameter."}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667523, "post_id": 54786626, "comment_id": 96352225, "body": "i need to change in code or should i change the way of passing parameters in postman?"}, {"owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550667648, "post_id": 54786626, "comment_id": 96352291, "body": "It completely depends on what you&#39;re trying to achieve. If you don&#39;t want to change the code, try passing a hash called <b>questions</b> where you have all of the questions with their respective ids, survey_ids, titles, etc. Otherwise, you&#39;ll have to adjust the code itself so it handles one question at a time."}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550668373, "post_id": 54786626, "comment_id": 96352715, "body": "thanks that error was solved..now i&#39;m getting question id as well.. but now new error occurs TypeError (no implicit conversion of Symbol into Integer):"}, {"owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1550671372, "post_id": 54786626, "comment_id": 96354616, "body": "That&#39;s a different problem altogether. Try to make sure that you&#39;re passing the right datatypes. It currently seems that you&#39;re trying to do something on a <i>Symbol</i> what is meant to be done on <i>Integer</i>. So either try to post a new question or spend some time debugging."}], "tags": [], "owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "is_accepted": true, "score": 1, "last_activity_date": 1550666446, "creation_date": 1550666446, "answer_id": 54786626, "question_id": 54786097, "link": "https://stackoverflow.com/questions/54786097/nomethoderror-undefined-method-each-for-nilnilclass/54786626#54786626", "title": "NoMethodError (undefined method `each&#39; for nil:NilClass):", "body": "<p>You are trying to run the <strong>.each</strong> loop an empty object.</p>\n\n<p>Make sure that both </p>\n\n<pre><code>params[:questions]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>q[:options]\n</code></pre>\n\n<p>are not empty (not equal to <em>nil</em>). </p>\n\n<p><strong>NoMethodError</strong> sometimes sounds very unrepresentative, especially if you're just starting off with Ruby. </p>\n\n<p>Try to browse Stackoverflow next time, because this has been answered <a href=\"https://stackoverflow.com/questions/12709204/nomethoderror-undefined-method-each-for-nilnilclass?rq=1\">here</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 54786626, "answer_count": 1, "score": -3, "last_activity_date": 1550674503, "creation_date": 1550664646, "last_edit_date": 1550674503, "question_id": 54786097, "link": "https://stackoverflow.com/questions/54786097/nomethoderror-undefined-method-each-for-nilnilclass", "title": "NoMethodError (undefined method `each&#39; for nil:NilClass):", "body": "<pre><code>class Api::SurveyAnswersController &lt; ApplicationController\n\n  def create\n    # @survey_answer = SurveyAnswer.new(survey_answer_params)\n    survey_answers = []\n    survey_id = params[:survey_id]\n    params[:questions].each do |q|\n      answer = {survey_id: survey_id, option_ids: [], question_id: q[:id], \n                title: q[:answer]}\n      if q[:options].present?\n        selected_options = q[:answer].split(',')\n        selected_options.each do |selected_option|\n          q[:options].each do |option|\n            if option[:title]== selected_option\n              answer[:option_ids] &lt;&lt; option[:id]\n              #&lt;todo add break when in this condition\n            end\n          end\n        end\n        survey_answers &lt;&lt; answer\n      end\n    end\n\n    puts survey_answers\n    # @survey_answers = SurveyAnswer.create(survey_answers)\n    if SurveyAnswer.create(survey_answers)\n    render json: survey_answers\n    end\n  end\nend\n</code></pre>\n\n<p>I have a survey model which has some questions. Each question contains answers. When I try to hit post request through postman to insert answers, it gives 505 internal server error with message \"undefined method each for nil:nilclass\". Can anybody tell what the problem is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "model", "pg"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550663205, "post_id": 54785592, "comment_id": 96349560, "body": "What is that empty regex for?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550663671, "post_id": 54785592, "comment_id": 96349820, "body": "You should use it in the controller, to assign one more instance variable, which you will use in the view. Add controller <code>show</code> action, please"}, {"owner": {"reputation": 55, "user_id": 10598322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMUwVZRjxbg/AAAAAAAAAAI/AAAAAAAAABM/qPUt_NxbUi4/photo.jpg?sz=128", "display_name": "kubet", "link": "https://stackoverflow.com/users/10598322/kubet"}, "edited": false, "score": 1, "creation_date": 1550663715, "post_id": 54785592, "comment_id": 96349837, "body": "SQL injection ?"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 1, "creation_date": 1550664398, "post_id": 54785592, "comment_id": 96350241, "body": "<code>Product.similar(@product.name)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550668450, "post_id": 54787157, "comment_id": 96352750, "body": "You missed the <code>%...%</code>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 1, "creation_date": 1550668470, "post_id": 54787157, "comment_id": 96352763, "body": "What is <code>@product_lines</code>?"}, {"owner": {"reputation": 55, "user_id": 10598322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMUwVZRjxbg/AAAAAAAAAAI/AAAAAAAAABM/qPUt_NxbUi4/photo.jpg?sz=128", "display_name": "kubet", "link": "https://stackoverflow.com/users/10598322/kubet"}, "edited": false, "score": 0, "creation_date": 1550668657, "post_id": 54787157, "comment_id": 96352886, "body": "on show page, I have @product.name so I want to use that  <code>&lt;% @similar_products(@product.name).each do |product| %&gt;</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550669362, "post_id": 54787157, "comment_id": 96353330, "body": "You don&#39;t need to pass that @product.name as an argument. The controller takes the product_name fro the params and makes the query; <code>@similar_products.each</code> is enough."}], "tags": [], "owner": {"reputation": 422, "user_id": 10327084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mFBqu.jpg?s=128&g=1", "display_name": "srng", "link": "https://stackoverflow.com/users/10327084/srng"}, "is_accepted": true, "score": 1, "last_activity_date": 1550702370, "last_edit_date": 1550702370, "creation_date": 1550668240, "answer_id": 54787157, "question_id": 54785592, "link": "https://stackoverflow.com/questions/54785592/rails-how-to-use-model-with-params-in-view/54787157#54787157", "title": "Rails How to use model with params in view", "body": "<p>So I'm not sure where you are getting the 'product_name' but it sounds like you just need a variable in the controller 'Show' method.</p>\n\n<p>The easy way would be to just add something like the following into your Controllers 'Show' method;</p>\n\n<pre><code>def show\n    @similar_products = Product.where(\"name LIKE ?\", params[:product_name]).limit(4)\nend\n</code></pre>\n\n<p>And then in your show page just add it into the html.erb;</p>\n\n<pre><code>&lt;div class='container'&gt;\n    &lt;% @similar_products.each do |product| %&gt;\n        &lt;%= product.name %&gt;\n        &lt;%= product.price %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10598322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMUwVZRjxbg/AAAAAAAAAAI/AAAAAAAAABM/qPUt_NxbUi4/photo.jpg?sz=128", "display_name": "kubet", "link": "https://stackoverflow.com/users/10598322/kubet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54787157, "answer_count": 1, "score": 0, "last_activity_date": 1550702370, "creation_date": 1550663080, "question_id": 54785592, "link": "https://stackoverflow.com/questions/54785592/rails-how-to-use-model-with-params-in-view", "title": "Rails How to use model with params in view", "body": "<p>I want to make suggested product show up on show page I have this in my model(i am using pg)</p>\n\n<pre><code>//Product model\ndef self.similar(product_name)\n        where(\"name LIKE ?\", \"%#{product_name}%\").limit(4)\n      end \n</code></pre>\n\n<p>How do i use this in my views(how to pass params)</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "angularjs", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4907037, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/PPXQS.jpg?s=128&g=1", "display_name": "YoanGJ", "link": "https://stackoverflow.com/users/4907037/yoangj"}, "edited": false, "score": 0, "creation_date": 1550661475, "post_id": 54784879, "comment_id": 96348580, "body": "Thank&#39;s for your precisions, I see way clearer now. I&#39;ll rethink my code logic."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 6, "last_activity_date": 1550660876, "creation_date": 1550660876, "answer_id": 54784879, "question_id": 54784816, "link": "https://stackoverflow.com/questions/54784816/why-does-ruby-include-function-not-working-as-expected-with-angularjs-variable/54784879#54784879", "title": "Why does Ruby include? function not working as expected with AngularJS variable?", "body": "<blockquote>\n  <p>Do you have any idea of the source of the problem?</p>\n</blockquote>\n\n<p>Yes. When ruby runs, angular is not yet bootstrapped and didn't have a chance to process the bindings. This means that string <code>\"{{competence_name}}\"</code> is just that, a literal string <code>\"{{competence_name}}\"</code>. Of course, it's not in the list.</p>\n\n<p>Similarly, when JS runs, ruby code is long finished. In fact, there's no ruby code at all there (in the context where JS runs).</p>\n\n<p>Client-side and server-side don't mix.</p>\n"}], "owner": {"reputation": 449, "user_id": 4907037, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/PPXQS.jpg?s=128&g=1", "display_name": "YoanGJ", "link": "https://stackoverflow.com/users/4907037/yoangj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54784879, "answer_count": 1, "score": 0, "last_activity_date": 1550664473, "creation_date": 1550660683, "last_edit_date": 1550664473, "question_id": 54784816, "link": "https://stackoverflow.com/questions/54784816/why-does-ruby-include-function-not-working-as-expected-with-angularjs-variable", "title": "Why does Ruby include? function not working as expected with AngularJS variable?", "body": "<p>In the haml of my Ruby on Rails app I'm trying to get through an array via AngularJS's <code>ng-repeat</code> and only display the strings of this array that are contained in another array. I'm trying to achieve this with the help of the <code>include?</code> function of Ruby to know if each string is in my other array but it returns false even if the string is in my other array.</p>\n\n<p>Here's my code to debug this problem (with in comment my \"real\" code):</p>\n\n<pre><code> %span.badge{\"ng-repeat\" =&gt; \"competence_name in mymodel.get_competence_names track by $index\"}\n     = \"{{competence_name}}\"\n     = current_user.get_competence_names\n     = current_user.get_competence_names.include?(\"{{competence_name}}\")\n     -#- if current_user.get_competence_names.include?(\"{{competence_name}}\")\n         -#= \"{{ competence_name }}\"\n</code></pre>\n\n<p>This code displays:</p>\n\n<pre><code>Challenger [\"Challenger\", \"Creative\", \"Innovative\", \"Results-oriented\"] false\n</code></pre>\n\n<p>Note that at the end of the line include? is supposed to return <code>true</code> and not <code>false</code> as \"Challenger\" is included in the array. </p>\n\n<p>But if I replace this line:</p>\n\n<pre><code>= current_user.get_competence_names.include?(\"{{competence_name}}\")\n</code></pre>\n\n<p>By this line:</p>\n\n<pre><code>= current_user.get_competence_names.include?(\"Challenger\")\n</code></pre>\n\n<p>It displays <code>true</code> instead of <code>false</code></p>\n\n<p>So I was thinking that it was a type problem and that <code>\"{{ competence_name }}\"</code> was not interpreted as a <code>String</code> by Ruby. So I tried to replace <code>\"{{ competence_name }}\"</code> by <code>String.new(\"{{ competence_name }}\")</code> but it's still returning false...</p>\n\n<p>Do you have any idea of the source of the problem?</p>\n"}, {"tags": ["ruby", "date"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1550660264, "post_id": 54784557, "comment_id": 96347759, "body": "What is your expected output?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550660494, "post_id": 54784557, "comment_id": 96347915, "body": "@sawa I have updated my expected output"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550660539, "post_id": 54784557, "comment_id": 96347946, "body": "The expected output is still not completely clear, but I assume that you want an array of strings that would be printed as such. The output you have does not seem to be grouped by months in any way. Can you expand on that?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550660692, "post_id": 54784557, "comment_id": 96348038, "body": "I want 30 days date range for every iteration. So that I can pass the 30 days date range as start and end date to api call to fetch reports."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550660849, "post_id": 54784557, "comment_id": 96348149, "body": "That is not a month. It is 30 days range. And still, what you have shown is not grouped in 30 days. For example, take <code>05.01.2017 - 05.02.2017</code>. The number of days in that range is (31 - 4) + 5 = 32 != 30."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661078, "post_id": 54784557, "comment_id": 96348312, "body": "Ok. How can I split the date range by 30 days?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661173, "post_id": 54784557, "comment_id": 96348378, "body": "<code>05.01.2017 - 04.02.2017</code> in your expected output after the edit, is still not 30 days. It is 31 days."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661395, "post_id": 54784557, "comment_id": 96348524, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188747/discussion-between-karan-and-sawa\">continue this discussion in chat</a>."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661512, "post_id": 54784557, "comment_id": 96348605, "body": "I have updated the expected output"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661796, "post_id": 54784557, "comment_id": 96348773, "body": "<code>08.02.2018 - 10.03.2018</code> isn&#39;t 30 days."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550661901, "post_id": 54784557, "comment_id": 96348839, "body": "Updated the date range"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1550662016, "post_id": 54784557, "comment_id": 96348906, "body": "@karan check my answer, just updated on basis of your question update"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550662870, "post_id": 54784557, "comment_id": 96349365, "body": "@karen Range <code>07.02.2018 - 10.03.2018</code> should not appear."}], "answers": [{"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550661818, "post_id": 54785142, "comment_id": 96348788, "body": "I don&#39;t find date range upto 10.03.2018"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550662104, "post_id": 54785142, "comment_id": 96348950, "body": "Still it shows upto 11.02.2018 not a date range upt 10.03.2018"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550662152, "post_id": 54785142, "comment_id": 96348977, "body": "@karan updated answer, check output"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550662220, "post_id": 54785142, "comment_id": 96349016, "body": "I need exact date upto 10.03.2018. But still it shows upto 28.02.2018"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1550662303, "post_id": 54785142, "comment_id": 96349059, "body": "@karan check the note, 01.03.2018 - 10.03.2018 is not 30 days range."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550662421, "post_id": 54785142, "comment_id": 96349128, "body": "But I want to include that range even though it is not 30 days."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550662532, "post_id": 54785142, "comment_id": 96349179, "body": "@karan : updated my answer"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550663070, "post_id": 54785142, "comment_id": 96349487, "body": "@karan &quot;But I want to include that range even though it is not 30 days. &quot;--You have not written so in the question. It is impossible to show the days in 30 days and finish on the <code>to</code> date at the same time."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1550662825, "last_edit_date": 1550662825, "creation_date": 1550661703, "answer_id": 54785142, "question_id": 54784557, "link": "https://stackoverflow.com/questions/54784557/split-the-time-period-into-multiple-periods/54785142#54785142", "title": "Split the time period into multiple periods", "body": "<pre><code>from = Date.parse('05.01.2017')\nto   = Date.parse('10.03.2018')\n\ns = from\ne = s + 29\nbegin\n  puts \"#{s.strftime('%d.%m.%Y')} - #{e.strftime('%d.%m.%Y')}\"\n  s = e + 1\n  e =  (s + 29 &lt; to ) ? s + 29 : to\nend while (s &lt; to)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>05.01.2017 - 03.02.2017 # 30 days\n04.02.2017 - 05.03.2017 # 30 days\n06.03.2017 - 04.04.2017 # 30 days\n05.04.2017 - 04.05.2017 # 30 days\n05.05.2017 - 03.06.2017 # 30 days\n04.06.2017 - 03.07.2017 # 30 days\n04.07.2017 - 02.08.2017 # 30 days\n03.08.2017 - 01.09.2017 # 30 days\n02.09.2017 - 01.10.2017 # 30 days\n02.10.2017 - 31.10.2017 # 30 days\n01.11.2017 - 30.11.2017 # 30 days\n01.12.2017 - 30.12.2017 # 30 days\n31.12.2017 - 29.01.2018 # 30 days\n30.01.2018 - 28.02.2018 # 30 days\n01.03.2018 - 10.03.2018 # remaining days till to (10.03.2018)\n</code></pre>\n\n<p><strong>NOTE:</strong> <code>01.03.2018 - 10.03.2018</code> is not 30 days range. but as per OP's comment I have displayed date till <code>to</code></p>\n"}, {"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1550664648, "post_id": 54785546, "comment_id": 96350449, "body": "What code needs to be changed if we use following from and to instead of Data.parse.  from = Time.find_zone(@time_zone).local(2018,11,01).beginning_of_da&zwnj;&#8203;y and  to   = Time.find_zone(@time_zone).now.yesterday"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1550666585, "last_edit_date": 1550666585, "creation_date": 1550662920, "answer_id": 54785546, "question_id": 54784557, "link": "https://stackoverflow.com/questions/54784557/split-the-time-period-into-multiple-periods/54785546#54785546", "title": "Split the time period into multiple periods", "body": "<pre><code>require \"date\"\n\nfrom = Date.parse('05.01.2017')\nto   = Date.parse('10.03.2018')\n\nfirst = from.jd\n(from..to)\n.chunk{|date| (date.jd - first) / 30}\n.map{|_, (first, *, last)|\n  \"#{first.strftime(\"%d.%m.%Y\")} - #{last.strftime(\"%d.%m.%Y\")}\"\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>05.01.2017 - 03.02.2017\n04.02.2017 - 05.03.2017\n06.03.2017 - 04.04.2017\n05.04.2017 - 04.05.2017\n05.05.2017 - 03.06.2017\n04.06.2017 - 03.07.2017\n04.07.2017 - 02.08.2017\n03.08.2017 - 01.09.2017\n02.09.2017 - 01.10.2017\n02.10.2017 - 31.10.2017\n01.11.2017 - 30.11.2017\n01.12.2017 - 30.12.2017\n31.12.2017 - 29.01.2018\n30.01.2018 - 28.02.2018\n01.03.2018 - 10.03.2018\n</code></pre>\n"}], "owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1550675183, "accepted_answer_id": 54785546, "answer_count": 2, "score": -1, "last_activity_date": 1550666585, "creation_date": 1550659906, "last_edit_date": 1550663601, "question_id": 54784557, "link": "https://stackoverflow.com/questions/54784557/split-the-time-period-into-multiple-periods", "closed_reason": "Needs details or clarity", "title": "Split the time period into multiple periods", "body": "<p>I have a date range as follows</p>\n\n<pre><code>from = Date.parse('05.01.2017')\nto   = Date.parse('10.03.2018')\n</code></pre>\n\n<p>I want to split the date range by 30 days as follows. I want to include the from and to date.</p>\n\n<p>I found this reference <a href=\"https://stackoverflow.com/questions/39958476/how-to-divide-a-time-period-into-multiple-periods\">link</a>. But I don't find from and to date in the response. How can I do this?</p>\n\n<p>Expected Output:</p>\n\n<pre><code>05.01.2017 - 03.02.2017\n04.02.2017 - 05.03.2017\n06.03.2017 - 04.04.2017\n...\n07.02.2018 - 10.03.2018\n</code></pre>\n"}, {"tags": ["ruby", "rake", "rake-task", "popen3"], "answers": [{"tags": [], "owner": {"reputation": 12483, "user_id": 2123922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e1269993bc2c97b8eef7134917b89565?s=128&d=identicon&r=PG", "display_name": "Benj", "link": "https://stackoverflow.com/users/2123922/benj"}, "is_accepted": true, "score": 1, "last_activity_date": 1550658681, "creation_date": 1550658681, "answer_id": 54784154, "question_id": 54783830, "link": "https://stackoverflow.com/questions/54783830/real-time-output-of-a-rake-task-with-popen3/54784154#54784154", "title": "Real-time output of a rake task with popen3", "body": "<p>Adding <code>$stdout.sync = true</code> at the beginning of the rake task solved it.</p>\n"}], "owner": {"reputation": 12483, "user_id": 2123922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e1269993bc2c97b8eef7134917b89565?s=128&d=identicon&r=PG", "display_name": "Benj", "link": "https://stackoverflow.com/users/2123922/benj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 54784154, "answer_count": 1, "score": 1, "last_activity_date": 1550658681, "creation_date": 1550657738, "question_id": 54783830, "link": "https://stackoverflow.com/questions/54783830/real-time-output-of-a-rake-task-with-popen3", "title": "Real-time output of a rake task with popen3", "body": "<p>It seems impossible to run a rake task from within a <code>popen3</code> block while getting real-time output. All lines come at once at the end of the rake task. I'm trying to get real-time output from rake tasks though a <code>popen3</code> block</p>\n\n<pre><code>cmd = 'rake perform_a_task'\nOpen3::popen3(cmd) do |std_in, std_out, std_err|\n  std_out.each_line do |line|\n    puts line\n  end\nend\n</code></pre>\n\n<h1>How to reproduce</h1>\n\n<h3>Proof of concept: the rake task</h3>\n\n<ol>\n<li>Create a task as follow</li>\n</ol>\n\n<pre><code>task :print_and_wait do\n  puts 'A'\n  sleep 1\n  puts 'B'\n  sleep 1\n  putc 'C'\nend\n</code></pre>\n\n<ol start=\"2\">\n<li>call the task from the command line</li>\n</ol>\n\n<p><code>$ rake print_and_wait</code> outputs 3 lines (A, B, and C) with a one second pause in between. As expected</p>\n\n<h3>Proof of concept 2: popen3</h3>\n\n<ol>\n<li>Create a shell script</li>\n</ol>\n\n<pre><code>$ cat print_and_wait\n#!/bin/bash\necho 'A'\nsleep 1\necho 'B'\nsleep 1\necho 'C'\n</code></pre>\n\n<ol start=\"2\">\n<li>create a ruby scrip</li>\n</ol>\n\n<pre><code>$ cat print_and_wait.rb\nrequire 'open3'\n\ndef exec_async(cmd)\n  Open3::popen3(cmd) do |std_in, std_out, std_err|\n    std_out.each_line do |line|\n      puts line\n    end\n  end\nend\n\nexec_async './print_and_wait'\n</code></pre>\n\n<ol start=\"3\">\n<li>run the ruby script</li>\n</ol>\n\n<p><code>$ ruby print_and_wait.rb</code> works as expected: output 3 line with a one second pause in-between</p>\n\n<h3>Where it does not work</h3>\n\n<ul>\n<li>edit the ruby script print_and_wait.rb and change <code>exec_async './print_and_wait'</code> to <code>exec_async 'rake print_and_wait'</code></li>\n<li>run <code>$ ruby print_and_wait.rb</code></li>\n<li>nothing outputs, and after 3 seconds all 3 lines are printed at the same time</li>\n</ul>\n\n<p>I've tried several combinations but was never able to make it work as expected. Any idea why is this not working? Is this a bug?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 11, "user_id": 8613006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA9W9v8nQSg/AAAAAAAAAAI/AAAAAAAAAC0/RYkRnMQQJIg/photo.jpg?sz=128", "display_name": "jaswant gupta", "link": "https://stackoverflow.com/users/8613006/jaswant-gupta"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550660111, "post_id": 54782429, "comment_id": 96347667, "body": "Why two different environment has different output one is nill and other is ok when we click?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8613006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA9W9v8nQSg/AAAAAAAAAAI/AAAAAAAAAC0/RYkRnMQQJIg/photo.jpg?sz=128", "display_name": "jaswant gupta", "link": "https://stackoverflow.com/users/8613006/jaswant-gupta"}, "edited": false, "score": 0, "creation_date": 1550655939, "post_id": 54782684, "comment_id": 96344947, "body": "Previously it was returned &quot;ok&quot; with ruby version ruby 2.1.2p95, Firefox  52.2.0 and selenium-webdriver-2.53.4"}, {"owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "reply_to_user": {"reputation": 11, "user_id": 8613006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA9W9v8nQSg/AAAAAAAAAAI/AAAAAAAAAC0/RYkRnMQQJIg/photo.jpg?sz=128", "display_name": "jaswant gupta", "link": "https://stackoverflow.com/users/8613006/jaswant-gupta"}, "edited": false, "score": 0, "creation_date": 1550656379, "post_id": 54782684, "comment_id": 96345192, "body": "@jaswantgupta <code>click</code> has never returned anything, you must have looked at something else."}], "tags": [], "owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1550654240, "creation_date": 1550654240, "answer_id": 54782684, "question_id": 54782429, "link": "https://stackoverflow.com/questions/54782429/ruby-selenium-element-click-has-different-output-with-different-environment/54782684#54782684", "title": "ruby selenium element.click has different output with different environment", "body": "<p><a href=\"https://www.rubydoc.info/gems/selenium-webdriver/0.0.28/Selenium/WebDriver/Element#click-instance_method\" rel=\"nofollow noreferrer\">click method</a> doesn't return an explicit value, so it returns <code>nil</code> by Ruby default.</p>\n"}], "owner": {"reputation": 11, "user_id": 8613006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA9W9v8nQSg/AAAAAAAAAAI/AAAAAAAAAC0/RYkRnMQQJIg/photo.jpg?sz=128", "display_name": "jaswant gupta", "link": "https://stackoverflow.com/users/8613006/jaswant-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550675099, "creation_date": 1550653404, "last_edit_date": 1550657651, "question_id": 54782429, "link": "https://stackoverflow.com/questions/54782429/ruby-selenium-element-click-has-different-output-with-different-environment", "title": "ruby selenium element.click has different output with different environment", "body": "<pre><code>require 'selenium-webdriver'    \ncaps = Selenium::WebDriver::Remote::Capabilities.firefox    \ncaps['acceptInsecureCerts'] = true    \n@driver = Selenium::WebDriver.for(:firefox, desired_capabilities: caps)    \n@driver.navigate.to \"https://s1.demo.opensourcecms.com/s/44\"    \nel=@driver.find_element(:xpath,\"//span[contains(text(),'Remove Frame')]\").click    \np el\n</code></pre>\n\n<p>Output with following Setup</p>\n\n<blockquote>\n  <p>2.6.0 :006 > @driver.find_element(:xpath,\"//span[contains(text(),'Remove Frame')]\").click\n   => nil</p>\n</blockquote>\n\n<p>Environment</p>\n\n<ol>\n<li>Mozilla Firefox 60.5.0</li>\n<li>ruby 2.6.0p0 (2018-12-25 revision 66547)[x86_64-linux] </li>\n<li><p>selenium-webdriver-3.141.0</p>\n\n<p>Output with the following Setup</p></li>\n</ol>\n\n<blockquote>\n  <p>2.1.2 :006 > @driver.find_element(:xpath,\"//span[contains(text(),'Remove Frame')]\").click\n   => \"ok\"</p>\n</blockquote>\n\n<p>Environment</p>\n\n<ol>\n<li>Mozilla Firefox 52.2.0</li>\n<li>ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]</li>\n<li>selenium-webdriver-2.53.4</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1550654952, "post_id": 54781981, "comment_id": 96344339, "body": "I post an answer, but if someone find an other way, I will be really interessed"}], "answers": [{"comments": [{"owner": {"reputation": 1423, "user_id": 5179633, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/845697198881966/picture?type=large", "display_name": "Syamsoul Azrien", "link": "https://stackoverflow.com/users/5179633/syamsoul-azrien"}, "edited": false, "score": 1, "creation_date": 1550658093, "post_id": 54782204, "comment_id": 96346327, "body": "so there&#39;s no way to redirect to another path (based on the route name)??"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "reply_to_user": {"reputation": 1423, "user_id": 5179633, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/845697198881966/picture?type=large", "display_name": "Syamsoul Azrien", "link": "https://stackoverflow.com/users/5179633/syamsoul-azrien"}, "edited": false, "score": 0, "creation_date": 1550677950, "post_id": 54782204, "comment_id": 96358931, "body": "@SyamsoulAzrien I find a better way, check my edit. With RedirectToHome it works. Feel free to accept my answer if it works for you =)"}, {"owner": {"reputation": 1423, "user_id": 5179633, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/845697198881966/picture?type=large", "display_name": "Syamsoul Azrien", "link": "https://stackoverflow.com/users/5179633/syamsoul-azrien"}, "edited": false, "score": 0, "creation_date": 1551161555, "post_id": 54782204, "comment_id": 96528088, "body": "looks complicated..but i think there is no other way except this...and it is actually works...thanks for your answer..."}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "reply_to_user": {"reputation": 1423, "user_id": 5179633, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/845697198881966/picture?type=large", "display_name": "Syamsoul Azrien", "link": "https://stackoverflow.com/users/5179633/syamsoul-azrien"}, "edited": false, "score": 0, "creation_date": 1551167836, "post_id": 54782204, "comment_id": 96530656, "body": "I agree, it&#39;s a little bit boilerplate"}], "tags": [], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "is_accepted": true, "score": 3, "last_activity_date": 1550677910, "last_edit_date": 1550677910, "creation_date": 1550652605, "answer_id": 54782204, "question_id": 54781981, "link": "https://stackoverflow.com/questions/54781981/rails-route-redirect-based-on-route-name/54782204#54782204", "title": "Rails - route redirect based on Route Name", "body": "<p>You can redirect with the url path but not with the name of your route. </p>\n\n<pre><code>get '/house-url', to: redirect('/home-url')\n</code></pre>\n\n<blockquote>\n  <p>Redirect any path to another path</p>\n</blockquote>\n\n<p><a href=\"https://guides.rubyonrails.org/routing.html#redirection\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/routing.html#redirection</a></p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Routing/Redirection.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionDispatch/Routing/Redirection.html</a></p>\n\n<h2>Edit</h2>\n\n<p>I find a better way :</p>\n\n<p><strong>1. Create RedirectToHome</strong></p>\n\n<p>Create a class named <code>RedirectToHome</code> (in file <code>redirect_to_home.rb</code>). </p>\n\n<p>You can create this for exemple in your <code>app/controllers/</code></p>\n\n<pre><code>class RedirectToHome\n  def call(params, request)\n    Rails.application.routes.url_helpers.home_path # this is the path where to redirect\n  end\nend\n</code></pre>\n\n<p><strong>2. Edit your route.rb</strong></p>\n\n<p>And add the RedirectToHome to your route that you want to redirect</p>\n\n<pre><code>  get '/home-url', to: 'home_ctrl#show', as: 'home'\n  get '/house-url' =&gt; redirect(RedirectToHome.new)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 966, "user_id": 913824, "user_type": "registered", "profile_image": "https://graph.facebook.com/1633045538/picture?type=large", "display_name": "Marthyn Olthof", "link": "https://stackoverflow.com/users/913824/marthyn-olthof"}, "is_accepted": false, "score": 0, "last_activity_date": 1560866996, "last_edit_date": 1560866996, "creation_date": 1550655724, "answer_id": 54783156, "question_id": 54781981, "link": "https://stackoverflow.com/questions/54781981/rails-route-redirect-based-on-route-name/54783156#54783156", "title": "Rails - route redirect based on Route Name", "body": "<p>So if i read your question correctly you want to pass the requested route to a redirect?</p>\n\n<p>You can do something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>get '/houses/:house_id', to: redirect { |path_params, req| \"/houses/#{path_params[:house_id]}\" }\n</code></pre>\n"}], "owner": {"reputation": 1423, "user_id": 5179633, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/845697198881966/picture?type=large", "display_name": "Syamsoul Azrien", "link": "https://stackoverflow.com/users/5179633/syamsoul-azrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 54782204, "answer_count": 2, "score": 1, "last_activity_date": 1560866996, "creation_date": 1550651807, "question_id": 54781981, "link": "https://stackoverflow.com/questions/54781981/rails-route-redirect-based-on-route-name", "title": "Rails - route redirect based on Route Name", "body": "<p>Currently, if I want to redirect to certain page, I must use <code>to: redirect('/this-is-some-url')</code> ..</p>\n\n<p>I wondering if I can redirect to a certain page using <code>Route Name</code> such as <code>to: redirect('route_name')</code></p>\n\n<p>I try below code, but it's not working:</p>\n\n<pre><code>get '/house-url', to: redirect('home')          #the value is route name\nget '/home-url', to: 'home_ctrl#show', as: 'home'\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550651163, "post_id": 54781758, "comment_id": 96342262, "body": "Thank you for your comment. As you say, I am using MacOS. Command execution result <code>xcode-select --install</code>  -&gt; <code>xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</code>,  <code>bundle install</code> -&gt; same result as above"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550651879, "post_id": 54781758, "comment_id": 96342612, "body": "Ok let&#39;s do the second workaround :)  1 -&gt; <code>brew install openssl</code> 2 -&gt; <code>export LIBRARY_PATH=$LIBRARY_PATH:&#47;usr&#47;local&#47;opt&#47;openssl&#47;lib&#47;</code>"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550651992, "post_id": 54781758, "comment_id": 96342664, "body": "let me know if the second work around does not work. I have some other toys :)"}, {"owner": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550652296, "post_id": 54781758, "comment_id": 96342813, "body": "Thank you. <code>brew install openssl</code> -&gt; <code>openssl 1.0.2q is already installed and up-to-date</code>, <code>export LIBRARY_PATH=$LIBRARY_PATH:&#47;usr&#47;local&#47;opt&#47;openssl&#47;lib&#47;</code> -&gt; <code>bundle install</code> -&gt; It`s same :)"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 2, "creation_date": 1550652410, "post_id": 54781758, "comment_id": 96342881, "body": "<code>bundle config --global build.mysql2 --with-opt-dir=&quot;$(brew --prefix openssl)&quot;</code> and then <code>bundle install</code>"}, {"owner": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550652636, "post_id": 54781758, "comment_id": 96342999, "body": "bundle config --global build.mysql2 --with-opt-dir=&quot;$(brew --prefix openssl)\u201d -&gt; <code>Your application has set build.mysql2 to &quot;--with-ldflags=-L&#47;usr&#47;local&#47;opt&#47;openssl&#47;lib --with-cppflags=-I&#47;usr&#47;local&#47;opt&#47;openssl&#47;include&quot;. This will override the global value you are currently setting</code>, bundle install -&gt; It`s same :)"}, {"owner": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550652902, "post_id": 54781758, "comment_id": 96343145, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188736/discussion-between-getty-and-zeitnot\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550652918, "post_id": 54781758, "comment_id": 96343150, "body": "I think the problem is related to mojave. I mean you upgraded your OS but other softwares were not updated. So please reinstall mysql again."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "edited": false, "score": 0, "creation_date": 1550653348, "post_id": 54781758, "comment_id": 96343395, "body": "BTW, I am in the chat room."}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 1, "last_activity_date": 1550660179, "last_edit_date": 1550660179, "creation_date": 1550650956, "answer_id": 54781758, "question_id": 54781603, "link": "https://stackoverflow.com/questions/54781603/ruby-on-rails-bundle-install-mysql2-error/54781758#54781758", "title": "Ruby on Rails bundle install mysql2 error", "body": "<p>It seems that some system libraries are missing. As far as I understand you are using macos. So please try: <code>xcode-select --install</code> and <code>bundle install</code></p>\n\n<p><strong>UPDATE</strong>\nWe had a private chat with @getty and we came up a solution. The problem was with some missing headers regarding to ruby program. \nSo we fixed the problem like following:</p>\n\n<ol>\n<li>rbenv uninstall 2.5.3</li>\n<li>CC=gcc rbenv install 2.5.3</li>\n<li>rbenv local 2.5.3</li>\n<li>bundle install</li>\n</ol>\n\n<p>This solution would be applied to rvm or other version managers. </p>\n"}], "owner": {"reputation": 91, "user_id": 8290407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c902c1eb1940d6916b8a102e28b3fc5?s=128&d=identicon&r=PG&f=1", "display_name": "getty", "link": "https://stackoverflow.com/users/8290407/getty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550660179, "creation_date": 1550650346, "question_id": 54781603, "link": "https://stackoverflow.com/questions/54781603/ruby-on-rails-bundle-install-mysql2-error", "title": "Ruby on Rails bundle install mysql2 error", "body": "<p><strong>About</strong></p>\n\n<p>Currently, I`m building the Ruby on Rails project environment.\nHowever, if I implement bundle install, the following error occurs.\nI do not know where the cause is, I would like advice.</p>\n\n<p><strong>Environment</strong></p>\n\n<ul>\n<li>Ruby v2.5.3</li>\n<li>Rails 5.2.2</li>\n<li>MySQL 5.7</li>\n</ul>\n\n<p><strong>Run Command 1</strong></p>\n\n<p><code>$ bundle install</code></p>\n\n<p><strong>Output error</strong></p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen -\n/Users/xxx/project_dir/vendor/bundle/ruby/2.5.0/gems/mysql2-0.5.2/CHANGELOG.md\nAn error occurred while installing mysql2 (0.5.2), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.5.2' --source 'https://rubygems.org/'` succeeds before bundling.\n</code></pre>\n\n<p><strong>Run Command 2</strong></p>\n\n<pre><code>$ sudo gem install mysql2 -v '0.5.2' --source 'https://rubygems.org/'\n</code></pre>\n\n<p><strong>Output error</strong></p>\n\n<pre><code>ERROR:  Error installing mysql2:\n    ERROR: Failed to build gem native extension.\ncurrent directory: /Users/xxx/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/ext/mysql2/Users/xxx/.rbenv/versions/2.5.3/bin/ruby -I /Users/xxx/.rbenv/versions/2.5.3/lib/ruby/site_ruby/2.5.0 -r ./siteconf20190220-84910-2gf7i1.rb extconf.rb\nchecking for rb_absint_size()... yes\nchecking for rb_absint_singlebit_p()... yes\nchecking for rb_wait_for_single_fd()... yes\n-----\nUsing mysql_config at /usr/local/opt/mysql@5.7/bin/mysql_config\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for SSL_MODE_DISABLED in mysql.h... yes\nchecking for SSL_MODE_PREFERRED in mysql.h... yes\nchecking for SSL_MODE_REQUIRED in mysql.h... yes\nchecking for SSL_MODE_VERIFY_CA in mysql.h... yes\nchecking for SSL_MODE_VERIFY_IDENTITY in mysql.h... yes\nchecking for MYSQL.net.vio in mysql.h... yes\nchecking for MYSQL.net.pvio in mysql.h... no\nchecking for MYSQL_ENABLE_CLEARTEXT_PLUGIN in mysql.h... yes\nchecking for SERVER_QUERY_NO_GOOD_INDEX_USED in mysql.h... yes\nchecking for SERVER_QUERY_NO_INDEX_USED in mysql.h... yes\nchecking for SERVER_QUERY_WAS_SLOW in mysql.h... yes\nchecking for MYSQL_OPTION_MULTI_STATEMENTS_ON in mysql.h... yes\nchecking for MYSQL_OPTION_MULTI_STATEMENTS_OFF in mysql.h... yes\nchecking for my_bool in mysql.h... yes\n-----\nDon't know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n-----\n-----\nSetting libpath to /usr/local/opt/mysql@5.7/lib\n-----\ncreating Makefile\ncurrent directory: /Users/xxx/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/ext/mysql2\nmake \"DESTDIR=\" clean\ncurrent directory: /Users/xxx/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/ext/mysql2\nmake \"DESTDIR=\"\ncompiling client.c\ncompiling infile.c\ncompiling mysql2_ext.c\ncompiling result.c\ncompiling statement.c\nlinking shared-object mysql2/mysql2.bundle\nld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [mysql2.bundle] Error 1\nmake failed, exit code 2\n\n</code></pre>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 83665, "user_id": 2998271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7vUA.png?s=128&g=1", "display_name": "har07", "link": "https://stackoverflow.com/users/2998271/har07"}, "edited": false, "score": 1, "creation_date": 1550647047, "post_id": 54780554, "comment_id": 96340236, "body": "<a href=\"https://stackoverflow.com/questions/4347320/xpath-dates-comparison\" title=\"xpath dates comparison\">stackoverflow.com/questions/4347320/xpath-dates-comparison</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5742, "user_id": 1906131, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40b31f70737db5a1ae964c9b9998c22e?s=128&d=identicon&r=PG", "display_name": "Rober", "link": "https://stackoverflow.com/users/1906131/rober"}, "edited": false, "score": 0, "creation_date": 1550651811, "post_id": 54780799, "comment_id": 96342580, "body": "Well according to the link in the comment from @har07 It&#180;s working by adding the function number before, like resource.xpath(&quot;.//prices/price[number(translate(@dateto, &#39;-&#39;, &#39;&#39;)) &gt; 20190101] . I haven&#180;t tried without it, but hope it works too."}], "tags": [], "owner": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "is_accepted": true, "score": 0, "last_activity_date": 1550647039, "creation_date": 1550647039, "answer_id": 54780799, "question_id": 54780554, "link": "https://stackoverflow.com/questions/54780554/filter-xml-elements-by-attribute-value-with-nokogiri-and-xpath/54780799#54780799", "title": "Filter XML elements by attribute value with Nokogiri and Xpath", "body": "<p>You can convert date string to number like this and then compare:</p>\n\n<pre><code>prices = resource.xpath(\".//prices/price[translate(@dateto, '-', '') &gt; 20190101]\")\n</code></pre>\n"}], "owner": {"reputation": 5742, "user_id": 1906131, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40b31f70737db5a1ae964c9b9998c22e?s=128&d=identicon&r=PG", "display_name": "Rober", "link": "https://stackoverflow.com/users/1906131/rober"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 54780799, "answer_count": 1, "score": 0, "last_activity_date": 1581291367, "creation_date": 1550645931, "last_edit_date": 1581291367, "question_id": 54780554, "link": "https://stackoverflow.com/questions/54780554/filter-xml-elements-by-attribute-value-with-nokogiri-and-xpath", "title": "Filter XML elements by attribute value with Nokogiri and Xpath", "body": "<p>I have a rails service reading an XML from a SOAP endpoint. The simplified structure is like:</p>\n\n<pre><code>&lt;resource id=\"1287085300000102889\" ...&gt;\n  &lt;prices&gt;\n   &lt;price datefrom=\"2018-05-25\" dateto=\"2018-05-26\" price=\"0.0\" currency=\"EUR\"/&gt;\n   &lt;price datefrom=\"2019-07-12\" dateto=\"2019-07-13\" price=\"1000.0\" currency=\"EUR\"/&gt;\n\n   &lt;price datefrom=\"2020-05-23\" dateto=\"2020-05-24\" price=\"1540.0\" currency=\"EUR\"/&gt;\n   ...\n  &lt;/prices&gt;\n&lt;/resource&gt;\n</code></pre>\n\n<p>I\u00b4m parsing the information using Nokogiri gem that I think uses xpath. I would like to filter out all the prices of last year. I\u00b4m trying to do </p>\n\n<pre><code>prices = resource.xpath(\".//prices/price[@dateto &gt; '2019-01-01']\")\n</code></pre>\n\n<p>but it\u00b4s not working.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1550645372, "post_id": 54780389, "comment_id": 96339534, "body": "post your serializer class file"}, {"owner": {"reputation": 59, "user_id": 7789811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ba5f35c42bb0746a11dbee82bd7cf7?s=128&d=identicon&r=PG&f=1", "display_name": "alavni shubham", "link": "https://stackoverflow.com/users/7789811/alavni-shubham"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1550645528, "post_id": 54780389, "comment_id": 96339602, "body": "there is a definition of [<a href=\"https://github.com/Netflix/fast_jsonapi#serializer-definition]\" rel=\"nofollow noreferrer\">github.com/Netflix/fast_jsonapi#serializer-definition]</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "is_accepted": true, "score": 0, "last_activity_date": 1550648523, "creation_date": 1550648523, "answer_id": 54781160, "question_id": 54780389, "link": "https://stackoverflow.com/questions/54780389/how-to-skip-relationships-hash-from-serialized-object/54781160#54781160", "title": "How to skip relationships hash from serialized object", "body": "<p>You can use rails except method to remove an attribute from hash in your case you can      use</p>\n\n<pre><code> data_hash = {\"data\": {\"id\": \"3\",\"type\": \"movie\",\"attributes\": {\"name\": \"test movie\",\"year\":''},\"relationships\": {\"actors\": {\"data\": [{\"id\": \"1\",\"type\": \"actor\"},{\"id\": \"2\",\"type\": \"actor\"}]},\"owner\": {\"data\": {\"id\": \"3\",\"type\": \"user\"}}}}}\n data_hash[:data].except!(:relationships)\n</code></pre>\n\n<p>You get output as below</p>\n\n<pre><code>{:id=&gt;\"3\", :type=&gt;\"movie\", :attributes=&gt;{:name=&gt;\"test movie\", :year=&gt;\"\"}}\n</code></pre>\n\n<p>And <code>data_hash</code> will be</p>\n\n<pre><code>{:data=&gt;{:id=&gt;\"3\", :type=&gt;\"movie\", :attributes=&gt;{:name=&gt;\"test movie\", :year=&gt;\"\"}}}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7789811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ba5f35c42bb0746a11dbee82bd7cf7?s=128&d=identicon&r=PG&f=1", "display_name": "alavni shubham", "link": "https://stackoverflow.com/users/7789811/alavni-shubham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 54781160, "answer_count": 1, "score": -1, "last_activity_date": 1550648523, "creation_date": 1550645260, "last_edit_date": 1550647385, "question_id": 54780389, "link": "https://stackoverflow.com/questions/54780389/how-to-skip-relationships-hash-from-serialized-object", "title": "How to skip relationships hash from serialized object", "body": "<p>How can I skip relationships hash from a serialized object (gem Netflix/fast_jsonapi)?</p>\n\n<pre><code>{\n  \"data\": {\n    \"id\": \"3\",\n    \"type\": \"movie\",\n    \"attributes\": {\n      \"name\": \"test movie\",\n      \"year\": null\n    },\n    \"relationships\": {\n      \"actors\": {\n        \"data\": [\n          {\n            \"id\": \"1\",\n            \"type\": \"actor\"\n          },\n          {\n            \"id\": \"2\",\n            \"type\": \"actor\"\n          }\n        ]\n      },\n      \"owner\": {\n        \"data\": {\n          \"id\": \"3\",\n          \"type\": \"user\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 145725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4d069f8600380502924bf168a7e51c3?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/145725/matthew"}, "edited": false, "score": 1, "creation_date": 1550638475, "post_id": 54778158, "comment_id": 96337133, "body": "Thanks, I&#39;m not sure how I missed that, think I just stoped searching a moment too early. Sure enough the gem I was after (<code>rest-client</code>) was listed a second time in the lock file, indented under the gem that depends on it (<code>ruby-jss</code>)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1550631610, "creation_date": 1550631610, "answer_id": 54778158, "question_id": 54777772, "link": "https://stackoverflow.com/questions/54777772/how-do-i-figure-out-which-gems-caused-a-particular-gem-to-be-bundled/54778158#54778158", "title": "How do I figure out which gem(s) caused a particular gem to be bundled?", "body": "<p>Normally <code>Gemfile.lock</code> documents which dependencies were generated from other dependencies, it's listed in a rough tree form, but you may have to do some digging to get to the right spot.</p>\n"}], "owner": {"reputation": 523, "user_id": 145725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4d069f8600380502924bf168a7e51c3?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/145725/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54778158, "answer_count": 1, "score": 1, "last_activity_date": 1550631610, "creation_date": 1550628273, "question_id": 54777772, "link": "https://stackoverflow.com/questions/54777772/how-do-i-figure-out-which-gems-caused-a-particular-gem-to-be-bundled", "title": "How do I figure out which gem(s) caused a particular gem to be bundled?", "body": "<p>Is there a simple (Bundle?) command to determine which gem(s) caused a particular gem to be bundled and added to my Gemfile.lock?</p>\n\n<p>There are <a href=\"https://stackoverflow.com/questions/1694594/how-do-i-find-gems-that-depend-on-a-given-gem\">one</a> or <a href=\"https://stackoverflow.com/questions/4085301/how-to-find-out-which-gems-depdend-on-gem-x\">two</a> similar questions but they only seem to address the general problem of figuring out which gems out there depend on a given gem.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4213052/cant-activate-gem-how-do-i-figure-out-which-gem-has-a-dependency-on-this-one\">Another question</a> is the closest to this one but it's overly specific and didn't get a good general answer.</p>\n\n<p>Eventually I found the info I was after using <code>bundle viz</code> and eyeballing the resulting image until I found it and traced it back to its parent but it seems like something bundle should be able to tell me with a one line command.</p>\n\n<p>I also tried <code>grep -r rest-client ~/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0</code> which kind of told me but the results were messy and also included a bunch of other gems that weren't from this particular app.</p>\n\n<p>Is there a simpler way for next time?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550641849, "post_id": 54777213, "comment_id": 96338158, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8462512/ruby-way-to-check-for-string-palindrome\">Ruby way to Check for string palindrome</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550644803, "post_id": 54777213, "comment_id": 96339326, "body": "Cannot be reproduced. It returns <code>true</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1550686769, "post_id": 54777213, "comment_id": 96363737, "body": "brykka, if you mean you expected <code>palindrome?(&#39;Stats&#39;)</code> to return <code>false</code> but it returns <code>true</code>, you should (edit to) say that. I expect confusion about that was the reason for the downvote."}, {"owner": {"reputation": 9, "user_id": 11040733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb8dc1bfb88121c16a94ebd3eec0ff5?s=128&d=identicon&r=PG&f=1", "display_name": "brykka", "link": "https://stackoverflow.com/users/11040733/brykka"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550737565, "post_id": 54777213, "comment_id": 96381435, "body": "@CarySwoveland it was returning false when I expected it to return true. I&#39;m sorry about the confusion. Thank you for your help, I&#39;m extremely new to both this website and Ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550743566, "post_id": 54777213, "comment_id": 96385156, "body": "Not a problem. Note that, while <code>&quot;stats&quot; == &quot;stats&quot;.reverse #=&gt; true</code>, <code>&quot;Stats&quot; == &quot;Stats&quot;.reverse #=&gt; false</code>, so if  you regard <code>&quot;Stats&quot;</code> to be a palindrome the test should be <code>s = &quot;Stats&quot;.downcase; s == s.reverse</code>."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1550643782, "post_id": 54777513, "comment_id": 96338902, "body": "Just to be safe, you should use <code>word = word.downcase</code> instead of <code>word.downcase!</code>, in order to not surprise the caller. Consider the case <code>word = &quot;Stats&quot;; print &quot;#{word} is #{palindrome?(word) ? &quot;&quot; : &quot;not &quot;}a palindrome!&quot;</code> -  prints &quot;stats is a palindrome&quot; - with lowercase &quot;stats&quot;!"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550645114, "post_id": 54777513, "comment_id": 96339451, "body": "You are not answering the OP&#39;s question."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550649428, "post_id": 54777513, "comment_id": 96341351, "body": "Provided work-around, not a answer to question <i>why?</i>"}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1550649737, "post_id": 54777513, "comment_id": 96341509, "body": "@Amadan, thank you for your suggestion! I&#39;ve edited my post."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550649858, "post_id": 54777513, "comment_id": 96341577, "body": "@sawa, Before your edition, OP&#39;s question was &#39;Why is this returning false?&#39; As I understand it, he used word &#39;false&#39; to mean &quot;wrong result&quot;, not a FalseClass object. So I explained what the error was, and judging by the fact that the OP accepted my answer, that&#39;s exactly what he wanted to know."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550650019, "post_id": 54777513, "comment_id": 96341660, "body": "@ray, my answer about difference between <code>reverse</code> and <code>reverse!</code> is answer <i>why</i> method returned wrong value."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550653348, "post_id": 54777513, "comment_id": 96343393, "body": "@IvanOlshansky Under that interpretation of the question, the OP has even not stated what a &quot;wrong result&quot; is, or what the &quot;right result&quot; is. And it would be impossible to answer the question."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550653749, "post_id": 54777513, "comment_id": 96343612, "body": "@sawa, &quot;Wrong result&quot; for a method whose task is to check whether an argument is a palindrome is a result that gives an incorrect estimate of whether the argument is a palindrome. For example, if it always returns true, even if the argument is not a palindrome."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550653927, "post_id": 54777513, "comment_id": 96343724, "body": "@IvanOlshansky If you are mentioning that, then the question is: &quot;Why does the method return <code>true</code> irrespective of the argument?&quot; And I don&#39;t see your answer to that question. Cary Swoveland has given the correct answer to that question."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550654304, "post_id": 54777513, "comment_id": 96343932, "body": "@sawa, If I had the rights to directly edit a question, I would change it to &quot;Why does the method return <code>true</code> irrespective of the argument and how to fix it?&quot;. I think this is exactly the question that the OP would like to get an answer to. And I tried to give this answer. But @CarySwoveland&#39;s answer is a very good too."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1550693344, "post_id": 54777513, "comment_id": 96366927, "body": "@sawa and Ivan, I don&#39;t want to get involved in this discussion except to make a point I think we can all agree on (Ivan included, upon reflection): one can conclude absolutely nothing from the fact that an OP selects a particular answer."}], "tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": true, "score": 1, "last_activity_date": 1550649076, "last_edit_date": 1550649076, "creation_date": 1550626421, "answer_id": 54777513, "question_id": 54777213, "link": "https://stackoverflow.com/questions/54777213/ruby-palindrome-boolean-returning-false/54777513#54777513", "title": "Ruby palindrome boolean returning false", "body": "<ol>\n<li>At first, you shouldn't use <code>reverse!</code>. This method modifies <code>word</code>, but you only need to get the modified result. So you should use <code>reverse</code> instead.</li>\n<li><p>Your method can be simplified to:</p>\n\n<pre><code>def palindrome?(word)\n    word == word.reverse\nend\n</code></pre></li>\n<li><p><code>\"Stats\"</code> is not a palindrome unless you convert it to lower or upper register:</p>\n\n<pre><code>def palindrome?(word)\n    word = word.downcase\n    word == word.reverse\nend\n</code></pre></li>\n</ol>\n\n<p>The result of testing the final version is:</p>\n\n<pre><code>puts palindrome?(\"Stats\")\n# =&gt; true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550643737, "post_id": 54779264, "comment_id": 96338892, "body": "Actually, the OP is asking why his method returns <code>false</code>, whereas you are saying it cannot return anything other than <code>true</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550644855, "post_id": 54779264, "comment_id": 96339348, "body": "@J&#246;rgWMittag Actually, the OP&#39;s claim cannot be reproduced. The OP&#39;s code returns <code>true</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550646643, "post_id": 54779264, "comment_id": 96340073, "body": "@Cary Great answer. You might want to add why the evaluation happens in that order, i.e., that <code>==</code> is a method, so its argument  is evaluated before the method is executed."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550649543, "post_id": 54779264, "comment_id": 96341409, "body": "It does only answer exact <i>why?</i> . String is mutated before it gets compared"}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1550650495, "post_id": 54779264, "comment_id": 96341901, "body": "@J&#246;rgWMittag, In the original question, the word &#39;false&#39; was not designated as <code>false</code> (look at question&#39;s edit history). Most likely, the author just meant the &#39;wrong result&#39;, not a <code>FalseClass</code> object."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1550686362, "last_edit_date": 1550686362, "creation_date": 1550639663, "answer_id": 54779264, "question_id": 54777213, "link": "https://stackoverflow.com/questions/54777213/ruby-palindrome-boolean-returning-false/54779264#54779264", "title": "Ruby palindrome boolean returning false", "body": "<p>If <code>str</code> is any string,</p>\n\n<pre><code>str == str.reverse!\n  #=&gt; true\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>str = \"abc\"\nstr == str.reverse!\n  #=&gt; true\n</code></pre>\n\n<p><code>str == str.reverse!</code> is syntactic sugar for <code>str.==(str.reverse!)</code>. Ruby's first step in evaluating this expression is to evaluate the argument, <code>str.reverse!</code>. That expression does two things: it replaces the value of <code>str</code> with the reversed string and it returns the reversed string. The method <code>==</code> then compares the value returned by <code>str.reverse!</code> with the value held by <code>str</code>. As they are the same, the expression returns <code>true</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 11040733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb8dc1bfb88121c16a94ebd3eec0ff5?s=128&d=identicon&r=PG&f=1", "display_name": "brykka", "link": "https://stackoverflow.com/users/11040733/brykka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 54777513, "answer_count": 2, "score": -1, "last_activity_date": 1550686362, "creation_date": 1550623998, "last_edit_date": 1550644668, "question_id": 54777213, "link": "https://stackoverflow.com/questions/54777213/ruby-palindrome-boolean-returning-false", "title": "Ruby palindrome boolean returning false", "body": "<p>Why does this return <code>false</code>?</p>\n\n<pre><code>def palindrome?(word)\n  if word == word.reverse!\n    return true\n  else\n    return false\n  end\nend\n\nputs palindrome?(\"Stats\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1550619432, "post_id": 54776297, "comment_id": 96332866, "body": "are you sure that value &#39;september 2018&#39; is raising an exception ?"}], "answers": [{"tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": true, "score": 0, "last_activity_date": 1550642834, "creation_date": 1550642834, "answer_id": 54779846, "question_id": 54776297, "link": "https://stackoverflow.com/questions/54776297/exception-not-falling-in-models/54779846#54779846", "title": "Exception not falling in models", "body": "<p>In the <code>sorted_exp</code> method, the output of the query is not being used. Rails actually executes the call to the DB when the value of the call is being used. In this case, the value of this is probably being used in some other function and the error is being raised from there, pointing to this line: <code>exp.order(\"currently_active = true DESC, TO_DATE(to_date, 'MM-DD-YYYY') DESC\")</code> <br>\nI'm not sure of your exact use case, but the only way of catching the exception in this block would be to use values that the query is supposed to return, like counting the number of objects returned(Again, it depends on your use case).<br>\nFor example, the following query raises an error inspite of being in a <code>begin..rescue</code> block:</p>\n\n<pre><code>begin\n  User.order(\"TO_DATE(users.created_at, 'MONTH-YYYY') DESC\")\nrescue\n  puts \"In rescue block\"\nend\n</code></pre>\n\n<p>This raises the following error:</p>\n\n<blockquote>\n  <p>ActiveRecord::StatementInvalid: PG::UndefinedFunction: ERROR:  function to_date(timestamp without time zone, unknown) does not exist</p>\n</blockquote>\n\n<p>However, when the output of this query is used in the <code>begin</code> block itself, the exception gets caught. For example:</p>\n\n<pre><code>begin\n  sorted_users = User.order(\"TO_DATE(users.created_at, 'MONTH-YYYY') DESC\")\n  count = sorted_users.count\nrescue\n  puts \"In rescue block\"\nend\n</code></pre>\n\n<p>The output for this is:</p>\n\n<blockquote>\n  <p>In rescue block</p>\n</blockquote>\n\n<p>This is because the query was actually executed in the <code>begin</code> block itself, and hence, got caught by our <code>rescue</code> block.</p>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54779846, "answer_count": 1, "score": -1, "last_activity_date": 1550645294, "creation_date": 1550617690, "last_edit_date": 1550645294, "question_id": 54776297, "link": "https://stackoverflow.com/questions/54776297/exception-not-falling-in-models", "title": "Exception not falling in models", "body": "<p>I wrote a function in ruby on rails model like below</p>\n\n<pre><code>def sorted_exp\n  begin\n    exp.order(\"currently_active = true DESC, TO_DATE(to_date, 'MM-DD-YYYY') DESC\")\n  rescue \n    exp.order(\"currently_active = true DESC\")\n  end\nend\n</code></pre>\n\n<p>but there are few entries in <code>to_date</code> column due to which exception falls like 'september 2018'. When I tried to handle exception in <code>model</code>, it failed, and does not go in the <code>rescue</code> section. I don't know why it does not catch the error in model here, and why it does not return a query in the rescue section.</p>\n\n<p>The exception raised is the following:</p>\n\n<blockquote>\n  <p>PG::InvalidDatetimeFormat: ERROR:  invalid value \"se\" for \"MM\"</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550632977, "post_id": 54774738, "comment_id": 96335894, "body": "Did you restart rails server?"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550652429, "post_id": 54774738, "comment_id": 96342892, "body": "Yes, and it now gives me the following error: NoMethodError (undefined method `authenticate_user!&#39; for #&lt;V1::UsersController:0x0055dd04aad340&gt;)"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550655798, "post_id": 54774738, "comment_id": 96344871, "body": "Are your devise routes namespaced somehow?"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550666820, "post_id": 54774738, "comment_id": 96351810, "body": "Yes, they are.                                                                                                <code>namespace :v1, defaults: { format: :json } do     resources :sessions, only: [:create, :destroy]     resources :artists do       resources :requests     end     resources :users, only: [:create]   end</code>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550668038, "post_id": 54774738, "comment_id": 96352495, "body": "Try to use <code>authenticate_v1_user!</code>"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550668692, "post_id": 54774738, "comment_id": 96352919, "body": "Now it gives me: <code>NoMethodError (undefined method authenticate_v1_user!&#39; for #&lt;V1::UsersController:0x0055dd04fa7df0&gt;)</code>"}], "owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550610009, "creation_date": 1550609601, "last_edit_date": 1550610009, "question_id": 54774738, "link": "https://stackoverflow.com/questions/54774738/getting-error-when-trying-to-create-a-user-after-installing-pundit", "title": "Getting error when trying to create a user after installing pundit", "body": "<p>I get the following error whenever I try to create a new user after I installed pundit within my project. It seems as if it can't find pundit, even though I installed it and included the gem and ran bundle install.</p>\n\n<pre><code>app_1  | ActionController::RoutingError (uninitialized constant ApplicationController::Pundit):\napp_1  |   \napp_1  | app/controllers/application_controller.rb:3:in `&lt;class:ApplicationController&gt;'\napp_1  | app/controllers/application_controller.rb:1:in `&lt;top (required)&gt;'\napp_1  | app/controllers/v1/users_controller.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>My ApplicationController.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  before_action :authenticate_user!\n  include Pundit\n\n  after_action :verify_authorized, except: :index, unless: :skip_pundit?\n  after_action :verify_policy_scoped, only: :index, unless: :skip_pundit?\n\n  private\n\n  def skip_pundit?\n    devise_controller? || params[:controller] =~ /(^(rails_)?admin)|(^pages$)/\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "cancancan"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1550608259, "post_id": 54774433, "comment_id": 96328936, "body": "Please post the error"}, {"owner": {"reputation": 1, "user_id": 11086607, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PAdsSV-4bUs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMVMllow9cpVd-sx-irz6xW1Ko6ZQ/mo/photo.jpg?sz=128", "display_name": "Shooshanne", "link": "https://stackoverflow.com/users/11086607/shooshanne"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1550608807, "post_id": 54774433, "comment_id": 96329193, "body": "Aws::S3::Errors::AccessDenied in EventsController#new  Access Denied"}, {"owner": {"reputation": 479, "user_id": 2237510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c05fc8748e4a2dd5058b1cc81ca467?s=128&d=identicon&r=PG", "display_name": "Jonathan Haar", "link": "https://stackoverflow.com/users/2237510/jonathan-haar"}, "edited": false, "score": 0, "creation_date": 1550609648, "post_id": 54774433, "comment_id": 96329564, "body": "Sounds like the error is coming from s3 and not your model."}, {"owner": {"reputation": 1, "user_id": 11086607, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PAdsSV-4bUs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMVMllow9cpVd-sx-irz6xW1Ko6ZQ/mo/photo.jpg?sz=128", "display_name": "Shooshanne", "link": "https://stackoverflow.com/users/11086607/shooshanne"}, "edited": false, "score": 0, "creation_date": 1550610858, "post_id": 54774433, "comment_id": 96330052, "body": "Can it be because of actions that are responsible for the responses from Aws? Is there a need to authorize that actions? I tried so,but it didn&#39;t help. Maybe I&#39;m doing something wrong?"}], "owner": {"reputation": 1, "user_id": 11086607, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PAdsSV-4bUs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMVMllow9cpVd-sx-irz6xW1Ko6ZQ/mo/photo.jpg?sz=128", "display_name": "Shooshanne", "link": "https://stackoverflow.com/users/11086607/shooshanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550644358, "creation_date": 1550608114, "last_edit_date": 1550644358, "question_id": 54774433, "link": "https://stackoverflow.com/questions/54774433/not-able-to-save-the-object-with-image-after-cancancan-gem-usage", "title": "Not able to save the object with image after cancancan gem usage", "body": "<p>I was able to save the objects with images. But after integrating cancancan gem,it's not possible to save it: </p>\n\n<blockquote>\n  <p>Aws::S3::Errors::AccessDenied in EventsController#new Access Denied</p>\n</blockquote>\n\n<pre><code>image = event_params[:cover_image]\n\n  if image.present?\n    raise \"Unacceptable file format\" if !image.content_type.include?(\"image/\")\n\n    original_filename =  image.original_filename\n    photo_extname = File.extname(original_filename).downcase\n    raise \"Please upload images with .jpg or .png format.\"  unless [\".jpg\", \".jpeg\", \".png\"].include?(photo_extname)\n  end\n\n\n  event = Event.new(event_params.except(:client))\n  event.event_wf_balance_payment_enabled = session[:event_preflight]['event_wf_balance_payment_enabled'].present?\n  event.video_wf_asset_request_enabled = session[:event_preflight]['video_wf_asset_request_enabled'].present?\n\n  # error is here,cannot save\n  event.save\n\n  event.vg_enable_video_workflow if session[:event_preflight]['video_wf_state_enabled'].present?\n  event.vg_enable_photo_workflow if session[:event_preflight]['photo_wf_state_enabled'].present?\n\n  if image.present?\n    safe_name = SafeName.prepare(image.original_filename)\n    event.cover_image_file_name = image.original_filename\n    event.cover_image_content_type = image.content_type\n    event.cover_image_file_size = image.size\n    event.cover_image_status = Event::COVER_IMAGE_STATUSES[:upload_success]\n    event.save\n    photo_extname_lowercase = photo_extname.downcase\n\n    credentials = Aws::Credentials.new(Rails.application.secrets.aws['aws_access_key_id'], Rails.application.secrets.aws['aws_secret_access_key'])\n    aws_s3_resource = Aws::S3::Resource.new(region: Rails.application.secrets.aws['aws_region'], credentials: credentials)\n    bucket = aws_s3_resource.bucket(Rails.application.secrets.aws['aws_s3_assets_bucket'])\n    cover_photos_dir = Rails.application.secrets.aws['aws_s3_event_cover_photos_dir']\n    id_hash = Digest::MD5.hexdigest(event.id.to_s)\n    unique_filename = \"#{id_hash}-#{safe_name}_original#{photo_extname_lowercase}\"\n    key = \"#{cover_photos_dir}/#{event.id}/#{unique_filename}\"\n    object = bucket.object(key)\n    object.put(body: image)\n  end\n</code></pre>\n\n<p>Has anyone know why do I get such kind of error? I tried to debug but all I can receive is that it's impossible to save my event object,but when I sent data without image,it's all OK.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550607947, "post_id": 54774192, "comment_id": 96328798, "body": "<code>ActiveSupport::NumberHelper.number_to_percentage(12.1234, precision: 4)</code> gives the desired result. I guess you can use <code>.to_s.split(&quot;.&quot;)[-1].length</code> to find the precision number."}, {"owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550615037, "post_id": 54774192, "comment_id": 96331634, "body": "@CarySwoveland Thanks for the suggestion, I agree, as the desired outputs are strings, not numbers. Done!"}], "answers": [{"comments": [{"owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 0, "creation_date": 1550608503, "post_id": 54774411, "comment_id": 96329055, "body": "In my Rails 5.2.1 console, testing this solution using <code>ActiveSupport::NumberHelper.number_to_percentage(12.3456, precision:20, strip_insignificant_zeroes:true)</code> yields <code>&quot;12.34560000000000000000%&quot;</code>. Does the behavior differ based on the Rails version? Or does something else account for the difference?"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 2, "creation_date": 1550608774, "post_id": 54774411, "comment_id": 96329185, "body": "I see the issue. You are incorrectly using <code>strip_insignificant_zeroes</code>. The actual name of the option is <code>strip_insignificant_zeros</code>."}, {"owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 0, "creation_date": 1550608906, "post_id": 54774411, "comment_id": 96329236, "body": "!!!!! That was exactly the problem. Thank you! I guess I should have hit <a href=\"https://english.stackexchange.com/questions/3824/what-is-the-plural-form-of-zero\" title=\"what is the plural form of zero\">english.stackexchange.com/questions/3824/&hellip;</a> before hitting StackOverflow. :-p"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 3, "last_activity_date": 1550608058, "creation_date": 1550608058, "answer_id": 54774411, "question_id": 54774192, "link": "https://stackoverflow.com/questions/54774192/make-rails-number-to-percentage-output-a-dynamic-count-of-decimals-based-on-th/54774411#54774411", "title": "Make Rails&#39; number_to_percentage output a dynamic count of decimals, based on the input value?", "body": "<p>Setting the precision to a number higher than you'll need and also setting strip_insignificant_zeros to true gives the desired results:</p>\n\n<pre><code>number_to_percentage 12, precision: 100, strip_insignificant_zeros: true\n#=&gt; \"12%\"\n\nnumber_to_percentage 12.3, precision: 100, strip_insignificant_zeros: true\n#=&gt; \"12.3%\"\n\nnumber_to_percentage 12.34, precision: 100, strip_insignificant_zeros: true\n#=&gt; \"12.34%\"\n\nnumber_to_percentage 12.345, precision: 100, strip_insignificant_zeros: true\n#=&gt; \"12.345%\"\n\nnumber_to_percentage 12.3456, precision: 100, strip_insignificant_zeros: true\n#=&gt; \"12.3456%\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 0, "creation_date": 1550608683, "post_id": 54774420, "comment_id": 96329146, "body": "Interesting approach! This doesn&#39;t work for the <code>12</code> input, though, because <code>&quot;12&quot;.split(&#39;.&#39;).last.size</code> yields <code>2</code> (not <code>0</code>), and thus a final result of <code>12.00%</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 2, "creation_date": 1550608907, "post_id": 54774420, "comment_id": 96329237, "body": "@JonSchneider one can change this to <code>12.to_s.partition(&#39;.&#39;).last.size</code>"}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 2, "last_activity_date": 1550609498, "last_edit_date": 1550609498, "creation_date": 1550608072, "answer_id": 54774420, "question_id": 54774192, "link": "https://stackoverflow.com/questions/54774192/make-rails-number-to-percentage-output-a-dynamic-count-of-decimals-based-on-th/54774420#54774420", "title": "Make Rails&#39; number_to_percentage output a dynamic count of decimals, based on the input value?", "body": "<p>First you need to determine how many digits are after the decimal.  You can do so using the following: </p>\n\n<pre><code>precision= n.to_s.partition('.').last.size\n</code></pre>\n\n<p>You can then set the precision value you want. </p>\n\n<pre><code>number_to_percentage(num, precision: precision)\n</code></pre>\n"}], "owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "accepted_answer_id": 54774411, "answer_count": 2, "score": 1, "last_activity_date": 1550615007, "creation_date": 1550607033, "last_edit_date": 1550615007, "question_id": 54774192, "link": "https://stackoverflow.com/questions/54774192/make-rails-number-to-percentage-output-a-dynamic-count-of-decimals-based-on-th", "title": "Make Rails&#39; number_to_percentage output a dynamic count of decimals, based on the input value?", "body": "<p>I'd like to use Rails' <a href=\"https://apidock.com/rails/ActionView/Helpers/NumberHelper/number_to_percentage\" rel=\"nofollow noreferrer\"><code>number_to_percentage</code></a> method to display a decimal number that I have in the range 0 to 100 as a percentage, including all of the number's decimal digits, and no unnecessary trailing zeroes.</p>\n\n<p>Some example inputs and their corresponding desired outputs:</p>\n\n<pre><code>12        =&gt; \"12%\"\n12.3      =&gt; \"12.3%\"\n12.34     =&gt; \"12.34%\"\n12.345    =&gt; \"12.345%\"\n12.3456   =&gt; \"12.3456%\"\n</code></pre>\n\n<p>As the documentation states, <code>number_to_percentage</code> has a default precision of 3, so <code>number_to_percentage(12.3456)</code> yields <code>\"12.346%\"</code> instead of my desired value.  Similarly, <code>number_to_percentage(12)</code> yields <code>\"12.000%\"</code> instead of just <code>\"12%\"</code>.</p>\n\n<p>I've experimented with combinations of different values for the <code>precision</code>, <code>significant</code>, and <code>strip_insignificant_zeroes</code> options to <code>number_to_percentage</code>, but without getting it to yield my desired results.</p>\n\n<p>Is there a way a use <code>number_to_percentage</code> such that it yields my desired results?  Or is this not the intended function of <code>number_to_percentage</code>, and I should take a different approach -- such as simply appending <code>'%'</code> to the end of my input using basic string manipulation? </p>\n"}, {"tags": ["ruby", "bundler", "gem-bundler"], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "is_accepted": false, "score": 0, "last_activity_date": 1550639073, "creation_date": 1550639073, "answer_id": 54779182, "question_id": 54773718, "link": "https://stackoverflow.com/questions/54773718/after-bundler-installed-with-specific-version-why-version-of-bundler-did-not-cha/54779182#54779182", "title": "after bundler installed with specific version why version of bundler did not change?", "body": "<p>Try updating bundle with <code>bundler update bundler</code> and run the <code>bundle update</code> again. It solved my problem the last time.</p>\n"}, {"comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1550672444, "post_id": 54780120, "comment_id": 96355334, "body": "Also, if the OP doesn&#39;t want to use 2.0.1 at all, they can also run <code>gem uninstall bundler</code> and choose to uninstall the 2.0.1 version (they may need to reshim if using a ruby version manager)"}], "tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": false, "score": 3, "last_activity_date": 1550644165, "creation_date": 1550644165, "answer_id": 54780120, "question_id": 54773718, "link": "https://stackoverflow.com/questions/54773718/after-bundler-installed-with-specific-version-why-version-of-bundler-did-not-cha/54780120#54780120", "title": "after bundler installed with specific version why version of bundler did not change?", "body": "<p>The default bundler version on your system is still <code>2.0.1</code>. If you need to use the downloaded version <code>1.7.15</code>, you would have to run <code>bundle _1.7.15_ install</code>. You could also check if that version was successfully installed on your system using <code>bundle _1.7.15_ -v</code> <br>\nIn either case, if you get the error <code>Could not find command \"_1.7.15_\"</code>, then that means that the bundler version <code>_1.7.15_</code> has not been installed on your system.<br>\nAdditionally, these links may help you:</p>\n\n<ul>\n<li><a href=\"https://makandracards.com/makandra/9741-run-specific-version-of-bundler\" rel=\"nofollow noreferrer\">Run specific version of bundler</a></li>\n<li><a href=\"https://makandracards.com/makandra/29161-downgrade-bundler-in-rvm\" rel=\"nofollow noreferrer\">Downgrade Bundler in RVM</a></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4778505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550644165, "creation_date": 1550604970, "question_id": 54773718, "link": "https://stackoverflow.com/questions/54773718/after-bundler-installed-with-specific-version-why-version-of-bundler-did-not-cha", "title": "after bundler installed with specific version why version of bundler did not change?", "body": "<p>I got following error for bundle<br/></p>\n\n<blockquote>\n  <p>Bundler could not find compatible versions for gem \"bundler\":   In\n  Gemfile:\n      bundler (~> 1.15)</p>\n  \n  <p>Current Bundler version:\n      bundler (2.0.1) This Gemfile requires a different version of Bundler. Perhaps you need to update Bundler by running <code>gem install\n  bundler</code>?</p>\n  \n  <p>Could not find gem 'bundler (~> 1.15)' in any of the relevant sources:\n  the local ruby installation</p>\n</blockquote>\n\n<p>then I tried to downgrade the bundler version with </p>\n\n<blockquote>\n  <p>$ gem install bundler -v '~> 1.7.0' Fetching: bundler-1.7.15.gem <br/>\n  (100%) Successfully installed bundler-1.7.15 Parsing documentation for\n  bundler-1.7.15 Installing ri documentation for bundler-1.7.15 Done\n  installing documentation for bundler after 1 seconds 1 gem installed</p>\n</blockquote>\n\n<p>but when I recheck the bundler version with <br/></p>\n\n<blockquote>\n  <p>bundler --version <br/></p>\n</blockquote>\n\n<p>it still said Bundler version 2.0.1</p>\n"}, {"tags": ["javascript", "ruby", "selenium"], "comments": [{"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 2, "creation_date": 1550604689, "post_id": 54773377, "comment_id": 96327260, "body": "Explicit Wait is what you want"}, {"owner": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "reply_to_user": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1550608039, "post_id": 54773377, "comment_id": 96328841, "body": "@CoreyGoldberg How would i incorporate this to my code? I want selenium to find the element by tagName (p, h1) and find the one that includes the text i provide. It doesn&#39;t return one element. wait.until {driver.find_elements(:xpath =&gt; &quot;//h4&quot;).each do ... fails"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "edited": false, "score": 0, "creation_date": 1550609631, "post_id": 54774694, "comment_id": 96329556, "body": "This works!!! Can you explain why grabbing this with JS worked vs the other method?"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "edited": false, "score": 0, "creation_date": 1550610070, "post_id": 54774694, "comment_id": 96329759, "body": "Because when element text unable to fetch by Normal method that means it is hidden.then you have to use JS to get the value."}, {"owner": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "edited": false, "score": 0, "creation_date": 1550610298, "post_id": 54774694, "comment_id": 96329849, "body": "Thank you so much, I didn&#39;t even think about that. Makes perfect sense."}], "tags": [], "owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "is_accepted": true, "score": 1, "last_activity_date": 1550609417, "creation_date": 1550609417, "answer_id": 54774694, "question_id": 54773377, "link": "https://stackoverflow.com/questions/54773377/load-all-elements-on-page-selenium-ruby/54774694#54774694", "title": "Load all elements on page Selenium + Ruby", "body": "<p>Instead of this</p>\n\n<pre><code>driver.find_elements(:xpath =&gt; \"//p\").each do |r|\n        puts \"Cell Value: \" + r.text\n</code></pre>\n\n<p>Please try this</p>\n\n<pre><code>driver.find_elements(:xpath =&gt; \"//p\").each do |r|\n        puts \"Cell Value: \" + driver.execute_script(\"return arguments[0].innerHTML\", r)\n</code></pre>\n\n<p>Please let me know if this work for you.</p>\n"}], "owner": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 54774694, "answer_count": 1, "score": 0, "last_activity_date": 1550684455, "creation_date": 1550603510, "last_edit_date": 1550684455, "question_id": 54773377, "link": "https://stackoverflow.com/questions/54773377/load-all-elements-on-page-selenium-ruby", "title": "Load all elements on page Selenium + Ruby", "body": "<p><b>Notice </b>I know this has been asked before, I have been attempting to solve this by researching other posts and selenium doc, but I can't resolve the issue.\n<br>\n<b>Questions:</b> How can I make all of the elements on page load before selenium starts? Why is my code returning text values on certain webpages and not this one?\n<br>\n<b>Reproduce the problem </b>\nI am using Selenium with Ruby &amp; Chrome. The result I am looking for is, going to a website, selecting some text, and its tag name, ie, \"//h1 'Diamond Physicians revolutionary healthcare'\" and then having selenium check it is there. I have been successful with other webpages, except this site...\"<a href=\"https://diamondphysicians.com/\" rel=\"nofollow noreferrer\">https://diamondphysicians.com/</a>\" ... I believe it is bootstrap \"business\" theme so certain elements load once you scroll to them. </p>\n\n<p>This is the best sum of what I have been reading and attempting. (Explicit wait, implicit wait, clicking an element, and I have tried scrolling to the bottom)... <a href=\"https://stackoverflow.com/questions/35761677/how-to-get-a-selenium-ruby-bot-to-wait-before-performing-an-action\">How to get a Selenium/Ruby bot to wait before performing an action?</a></p>\n\n<p><b>code</b>\n*Certain things are hashed out for testing</p>\n\n<pre><code>    options = Selenium::WebDriver::Chrome::Options.new\n    #options.add_argument('--headless')\n    #options.add_argument('--window-size=1280x1280')\n    driver = Selenium::WebDriver.for :chrome, options: options\n    #driver.navigate.to \"https://diamondphysicians.com/\"\n    #wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 15)\n    driver.get(\"https://diamondphysicians.com/\")\n    #element = wait.until {driver.find_element(:class =&gt; \"widget-title\")}\n    #element.click\n    #driver.element(:class, \"widget-title\").when_present.click\n    driver.execute_script(\"window.scrollTo(0, document.body.scrollHeight)\")\n\n    substring = \"Welcome to the future of primary care!\"\n    driver.find_elements(:xpath =&gt; \"//p\").each do |r|\n        puts \"Cell Value: \" + r.text\n        if r.text.include? substring\n            puts \"FOUND IT FOUND IT FOUND IT FOUND IT FOUND IT FOUND IT FOUND IT\"\n        end \n    end\n</code></pre>\n\n<p><br>When I run this, I get <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: <br>\nCell Value: Sign up to Diamond Physicians Newsletters to learn the latest new functionalities and exchange experiences with other Diamond Physicians, members or employers</p>\n\n<p><br>\n<b>EDIT</b>\nFor anyone who comes across this and needs a good resource, check out this blog. Valid as of 2/2019\n<a href=\"https://yizeng.me/2014/04/08/get-text-from-hidden-elements-using-selenium-webdriver/\" rel=\"nofollow noreferrer\">https://yizeng.me/2014/04/08/get-text-from-hidden-elements-using-selenium-webdriver/</a></p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550603850, "post_id": 54772636, "comment_id": 96326870, "body": "What about &quot;&#39;Twas Bess&#39; cat that was making all the ruckus.&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1550602371, "post_id": 54772934, "comment_id": 96326272, "body": "The 69&#39;ers&#39; drummer won&#39;t like this."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1550602758, "post_id": 54772934, "comment_id": 96326451, "body": "He said, &#39;it&#39;s clear this does not work&#39;. It does not fit the &#39;contractual obligations&#39;."}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1550644766, "post_id": 54772934, "comment_id": 96339304, "body": "@Schwern I have <a href=\"https://regex101.com/r/NiiskN/5\" rel=\"nofollow noreferrer\">updated my answer</a> to cover your test cases too."}, {"owner": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550653029, "post_id": 54772934, "comment_id": 96343213, "body": "@Potato thanks for this. How to extend this to also remove non-word characters like <code>; : ! $ \\n</code>?"}], "tags": [], "owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1550644719, "last_edit_date": 1550644719, "creation_date": 1550601613, "answer_id": 54772934, "question_id": 54772636, "link": "https://stackoverflow.com/questions/54772636/remove-double-single-quotes-but-not-single-quote/54772934#54772934", "title": "remove double single quotes but not single quote", "body": "<p>Try this regex:</p>\n\n<pre><code>\\B'((?:(?!'\\B)[\\s\\S])*)'\n</code></pre>\n\n<p>Replace each match with <code>\\1</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/NiiskN/5\" rel=\"nofollow noreferrer\">Click for Demo</a></strong></p>\n\n<p>Code(<strong><a href=\"https://rextester.com/OKRL98554\" rel=\"nofollow noreferrer\">Result</a></strong>):</p>\n\n<pre><code>re = /\\B'((?:(?!'\\B)[\\s\\S])*)'/m\nstr = 'That\\'s \\'large\\'\nThe 69\\'ers\\' drummer won\\'t like this.\nHe said, \\'it\\'s clear this does not work\\'. It does not fit the \\'contractual obligations\\''\nsubst = '\\\\1'\n\nresult = str.gsub(re, subst)\n\n# Print the result of the substitution\nputs result\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>\\B</code> - matches a non-word boundary</li>\n<li><code>((?:(?!'\\B)[\\s\\S])*)</code> - matches 0+ occurrences of any character <code>[\\s\\S]</code> which (does not start with <code>'</code> followed by a non-word boundary). This is captured in Group 1.</li>\n<li><code>'</code> - matches a <code>'</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550610825, "post_id": 54773018, "comment_id": 96330041, "body": "Thanks. Sorry but have to ask to how to extend your answer so that it can also remove any non-word characters?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550611270, "post_id": 54773018, "comment_id": 96330216, "body": "@stt106 Can you give some examples?"}, {"owner": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550611383, "post_id": 54773018, "comment_id": 96330270, "body": "In addition to removing double single quote while keeping the apostrophe, I also want to remove non-word characters like comma, semicolon, special signs like <code>$%</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550611527, "post_id": 54773018, "comment_id": 96330333, "body": "@stt106 <code>Would you pay me $100 for that answer?</code> Is that supposed to be <code>Would you pay me 100 for that answer</code>? Or should it understand the <code>$100</code> and <code>?</code> are valid punctuation? Ask a new question, provide clear before and after examples like I have, and link it in a comment here so I can have a look."}, {"owner": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550611828, "post_id": 54773018, "comment_id": 96330465, "body": "Updated the question with a renewed example. I think I just need your current answer AND <code>[\\W]</code> but not sure how to combine them. Thanks."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "edited": false, "score": 0, "creation_date": 1550651474, "post_id": 54773018, "comment_id": 96342423, "body": "@stt106 Please don&#39;t change the question after it&#39;s been answered, it invalidates the answers, and the edited question won&#39;t get much attention. Ask a new question."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1550611609, "last_edit_date": 1550611609, "creation_date": 1550601992, "answer_id": 54773018, "question_id": 54772636, "link": "https://stackoverflow.com/questions/54772636/remove-double-single-quotes-but-not-single-quote/54773018#54773018", "title": "remove double single quotes but not single quote", "body": "<p>This is one of those quagmires ike parsing XML or HTML that can't be done with a regex, but you can sorta pretend like it's mostly going to work. You can tweak it forever and not get right.</p>\n\n<p>You could look for balanced quotes, that is only quotes in pairs, but this doesn't help. Is <code>That's 'large'</code> to be stripped as <code>Thats large'</code> or <code>That's large</code>?</p>\n\n<p>Instead you need to give it an understanding of English grammar and when a <code>'</code> is an <a href=\"https://en.wikipedia.org/wiki/Apostrophe\" rel=\"nofollow noreferrer\">apostrophe</a> versus a quote. Something simple that knows the basics of contractions and possessives. Contractions: <code>don't</code>, <code>won't</code>, <code>I'll</code>. Possessives: <code>Joe's</code> and <code>s'</code>. And maybe you can knock up a regex to skip those.</p>\n\n<p>But it rapidly gets complicated. <code>KO'd</code>. Or what if you wish to indicate a particular pronunciation: <code>fo'c's'le</code>. Or someone's name <code>O'Doole</code>.</p>\n\n<p>What you <em>might</em> be able to get away with stripping a pair of quotes that start at the beginning of a word and the end of a word. <code>It's clear he said, 'this isn't a contraction'.</code> Matching the quote in front of <code>this</code> and the quote at the end of <code>contraction</code> is probably maybe safe.</p>\n\n<pre><code># Use negative look behind and ahead to look for quotes which are\n# not after and before a word character.\n# Use a non-greedy match to catch multiple pairs of quotes.\nre = /(?&lt;!\\w)'(.*?)'(?!\\w)/\nsentence.gsub(re, '\\1')\n</code></pre>\n\n<p>This works in a lot of cases.</p>\n\n<pre><code>That's 'large' -&gt; That's large\nEat at Joe's -&gt; Eat at Joe's\nI'll be Jane's -&gt; I'll be Jane's\nJones' three cats' toys. -&gt; Jones' three cats' toys.\nIt's clear he said, 'this isn't a contraction'. -&gt; It's clear he said, this isn't a contraction.\n'scare quotes' -&gt; scare quotes\nThe 69'ers' drummer -&gt; The 69'ers' drummer\nWas She's success greater, or King Solomon's Mines's? -&gt; Was She's success greater, or King Solomon's Mines's?\nThe 69'er's drummer and their 'contractual obligations'. -&gt; The 69'er's drummer and their contractual obligations.\nHe said, 'it's clear this doesn't work'. -&gt; He said, it's clear this doesn't work.\n</code></pre>\n\n<p>But not always.</p>\n\n<pre><code>His 'n' Hers's first track is called 'Joyriders'. -&gt; His n Hers's first track is called Joyriders.\n</code></pre>\n\n<p>Like I said, this is one of those problems that looks simple but is extremely complicated and you can never get quite right. It can suck down a lot of time. I'd recommend ditching the requirement if possible.</p>\n"}, {"comments": [{"owner": {"reputation": 13587, "user_id": 1136887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iu4z.jpg?s=128&g=1", "display_name": "James Hibbard", "link": "https://stackoverflow.com/users/1136887/james-hibbard"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1550602809, "post_id": 54773099, "comment_id": 96326487, "body": "Yeah, right. Regex isn&#39;t suitable for anything other than simple text manipulation. Too many edge cases, as you have skillfully pointed out. Would be nice to hear more about what the OP is wanting to do."}], "tags": [], "owner": {"reputation": 13587, "user_id": 1136887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iu4z.jpg?s=128&g=1", "display_name": "James Hibbard", "link": "https://stackoverflow.com/users/1136887/james-hibbard"}, "is_accepted": false, "score": 0, "last_activity_date": 1550602256, "creation_date": 1550602256, "answer_id": 54773099, "question_id": 54772636, "link": "https://stackoverflow.com/questions/54772636/remove-double-single-quotes-but-not-single-quote/54773099#54773099", "title": "remove double single quotes but not single quote", "body": "<p>A slight variation \u2014 if the single quotes only occur around word characters, that is a character from a-z, A-Z, 0-9 or the _ (underscore) character. you can use this:</p>\n\n<pre><code>phrase = \"That's 'large' and not 'small', but it's still 'amazing'.\"\nphrase.gsub(/'(\\w*)'/, '\\1')\n=&gt; \"That's large and not small, but it's still amazing.\"\n</code></pre>\n\n<p>But as Schwern says, if you're trying to do anything other than a bit of simple text manipulation, you'll soon find yourself bogged down by edge cases.</p>\n"}], "owner": {"reputation": 2654, "user_id": 3450755, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5356a5c4305b6c53407fc97b19c2149d?s=128&d=identicon&r=PG", "display_name": "stt106", "link": "https://stackoverflow.com/users/3450755/stt106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 2, "accepted_answer_id": 54772934, "answer_count": 3, "score": 0, "last_activity_date": 1550651500, "creation_date": 1550600461, "last_edit_date": 1550651500, "question_id": 54772636, "link": "https://stackoverflow.com/questions/54772636/remove-double-single-quotes-but-not-single-quote", "title": "remove double single quotes but not single quote", "body": "<p>How to remove double single quotes but not the single quote in a string in Ruby? For instance from <code>That's 'large'</code>, to <code>That's large</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth"], "comments": [{"owner": {"reputation": 123, "user_id": 1982531, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ac7a432091c5cfc32110ee1c32b9623a?s=128&d=identicon&r=PG", "display_name": "Anton Pleshivtsev", "link": "https://stackoverflow.com/users/1982531/anton-pleshivtsev"}, "edited": false, "score": 0, "creation_date": 1550763090, "post_id": 54770426, "comment_id": 96398144, "body": "Just a possible reason: <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=696204\" rel=\"nofollow noreferrer\">bugs.chromium.org/p/chromium/issues/detail?id=696204</a>"}], "owner": {"reputation": 123, "user_id": 1982531, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ac7a432091c5cfc32110ee1c32b9623a?s=128&d=identicon&r=PG", "display_name": "Anton Pleshivtsev", "link": "https://stackoverflow.com/users/1982531/anton-pleshivtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550592273, "creation_date": 1550592273, "question_id": 54770426, "link": "https://stackoverflow.com/questions/54770426/rails-session-lost-after-omniauth-oauth-redirect", "title": "Rails session lost after omniauth oauth redirect", "body": "<p>We are using rails session to save user intention before using oauth (Linkedin). The idea here is to show different pages after Linkedin callback. The problem is we sometimes see session lost after Linkedin redirect callback, which causes errors on our side. </p>\n\n<hr>\n\n<p>This is Rails session setup:</p>\n\n<pre><code>Rails.application.config.session_store \n  :cookie_store, \n  key: \"_my_session_#{Rails.env}\", \n  :secure =&gt; !ENV['NO_SSL'] &amp;&amp; (Rails.env.production? || Rails.env.staging?), \n  :expire_after =&gt; 100.years\n</code></pre>\n\n<p>This is how we set cookie before redirect to Linkedin auth page:</p>\n\n<pre><code>def social_login\n  session[:intention] = 'login'\n  redirect_to_provider(params[:provider], request.query_parameters)\nend\n</code></pre>\n\n<p>Session contents after redirect:</p>\n\n<pre><code>{\n  _csrf_token: nYlKmD/KAbj3hmWQ+cIethchxlHTOzUMjG/5y/fldLE=\n  oauth: {\"linkedin\": {\"callback_confirmed\": true}}\n  session_id: 4165617feee7f9a51148318d300291fc\n}\n</code></pre>\n\n<p>Just in case: Rails 5.2.1, omiauth 1.8.1, Docker </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "asset-pipeline"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1550592701, "post_id": 54770418, "comment_id": 96321094, "body": "Did you restart the Rails server after making the changes to your code?"}, {"owner": {"reputation": 71, "user_id": 11085329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decc34508e898cbab353d607355ea4d2?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Azhar Khan", "link": "https://stackoverflow.com/users/11085329/haroon-azhar-khan"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1550592805, "post_id": 54770418, "comment_id": 96321157, "body": "yes, i did restart the server and also saved the changes before restarting the server."}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1550592860, "post_id": 54770418, "comment_id": 96321191, "body": "How did you add minicart.js to your app?"}, {"owner": {"reputation": 71, "user_id": 11085329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decc34508e898cbab353d607355ea4d2?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Azhar Khan", "link": "https://stackoverflow.com/users/11085329/haroon-azhar-khan"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1550594224, "post_id": 54770418, "comment_id": 96321991, "body": "i added it to my rails project by adding it to my rails&#39;  &#39;&#39;application.js&#39;&#39; file under assets section . i have mention this implicitly above. I did this when i added the line &quot;//= require minicart&quot; to the file."}], "owner": {"reputation": 71, "user_id": 11085329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decc34508e898cbab353d607355ea4d2?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Azhar Khan", "link": "https://stackoverflow.com/users/11085329/haroon-azhar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550643135, "creation_date": 1550592238, "last_edit_date": 1550643135, "question_id": 54770418, "link": "https://stackoverflow.com/questions/54770418/rails-app-doesnt-load-a-custom-theme-javascript-listener-on-a-form-button", "title": "Rails app doesn&#39;t load a custom theme Javascript listener on a form button", "body": "<p>I'm trying to using a Bootstrap theme for a Rails project. My Rails imports all the Javascript used by the theme but doesn't use them. To explain lemme get specific about the problem:</p>\n\n<p>A form button when clicked upon pops a modal over the website and upon inspecting all the listeners on the <code>a</code> button, I saw that the button has a click listener implemented in \"minicart.js\"<a href=\"https://i.stack.imgur.com/NurZc.png\" rel=\"nofollow noreferrer\">image showing the implented listener</a></p>\n\n<p>the problem is that my Rails app does load the \"minicart.js\" file but the same form button doesn't have the click listener on it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aTMHS.png\" rel=\"nofollow noreferrer\">image showing all the files load as assets by my rails app</a>\n<a href=\"https://i.stack.imgur.com/K5Gc4.png\" rel=\"nofollow noreferrer\">image showing all the method on my \"add to cart\" button</a></p>\n\n<p>As you can see, my Rails app doesn't have that method, so when I click on the \"add to cart\" button the pop-up doesn't appear. The theme has that method/listener but my rails app doesn't even though they have same Javascripts file i.e \"minicart.js\"</p>\n\n<p>To shed some more light on my project I have added the minicart.js and other custom JS files used by the Bootstrap theme at the path (from root of project) /app/assets/stylesheets/</p>\n\n<p>Next I added those files to Rails' application.js file (which is located at the path from root /app/assets/javascripts/ ) and now my application.js looks like this: </p>\n\n<pre><code>//= require rails-ujs\n//= require activestorage\n//= require turbolinks\n//= require jquery3\n//= require jquery.flexslider\n//= require minicart\n//= require easing\n//= require popper \n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>the HTML code: I just copied it from the theme's HTML file and pasted it into my project.</p>\n\n<p>i added &lt;%= javascript_include_tag \"minicart.js\" %> to my html.erb file of that view but still the method doesn't come up in the listener listed for the button in the inspect element section. note : i saved the code in editor and restarted the rails server but it made no difference. </p>\n\n<p>To sum up my problem, I just want the pop to occur when I click on the button in my rails app. Tips for how to proceed to further debug this &amp; any tutorial/reads/articles are appreciated. If you need any other details please feel free to ask.</p>\n\n<p>I'm new to Rails so please bear with me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri", "xml-builder"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1550592272, "post_id": 54770291, "comment_id": 96320819, "body": "Please show the full error. What is <code>cars</code>? What is <code>cars.brand</code>? Is there a car without a brand? And what is <code>xml</code>?"}, {"owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1550593238, "post_id": 54770291, "comment_id": 96321375, "body": "Cars is the table name, Brand is the column name and I wanted to generate this xml using xml nokogiri builder and I&#39;ve edited my question, Sorry for the inconvenience."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550609755, "post_id": 54770291, "comment_id": 96329616, "body": "You have not provided much to go on and if your comment is accurate than your answer is not. <code>Cars.brand</code> will call the <code>brand</code> method on the class instance <code>Cars</code> but in your comment you stated that <code>brand</code> is an attribute method of an instance of <code>Car</code> not the class itself. Therefor the answer posted is likely to raise <code>NoMethodError</code> for <code>Cars</code>, which btw is not the correct model name under rails convention as model names are singular"}, {"owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "edited": false, "score": 0, "creation_date": 1550681142, "post_id": 54770291, "comment_id": 96360854, "body": "Ya that was the typo, Thanks for correcting me, Edited answer."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "is_accepted": true, "score": 1, "last_activity_date": 1550680922, "last_edit_date": 1550680922, "creation_date": 1550599433, "answer_id": 54772384, "question_id": 54770291, "link": "https://stackoverflow.com/questions/54770291/how-to-generate-xml-tags-dynamically-from-rails-db-using-nokogiri-xml-builder/54772384#54772384", "title": "How to generate xml tags dynamically from Rails DB using Nokogiri XML Builder", "body": "<p>Create variable in the controller like this</p>\n\n<pre><code>brand = Car.find(id).brand\n</code></pre>\n\n<p>and then generate xml like below</p>\n\n<pre><code>xml.tag!(brand) do\n\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 54772384, "answer_count": 1, "score": 0, "last_activity_date": 1550680922, "creation_date": 1550591796, "last_edit_date": 1550595270, "question_id": 54770291, "link": "https://stackoverflow.com/questions/54770291/how-to-generate-xml-tags-dynamically-from-rails-db-using-nokogiri-xml-builder", "title": "How to generate xml tags dynamically from Rails DB using Nokogiri XML Builder", "body": "<p>I want to build xml from rails application. I wanted to generate tags from rails application database.</p>\n\n<p>For example: I have a database table called cars and it have variable brand and it has values. </p>\n\n<p>So I want to generate xml like this</p>\n\n<pre><code>&lt;dodge&gt; &lt;/dodge&gt;\n</code></pre>\n\n<p>I tried by doing so</p>\n\n<pre><code>xml.cars.brand do \n\nend\n</code></pre>\n\n<h2>But I'm getting NoMethodError</h2>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550591990, "post_id": 54770287, "comment_id": 96320643, "body": "I don&#39;t understand, you <i>know</i> the signature of <code>some_other_method</code>. Why not simply write out all the parameters it needs? It&#39;s simple, readable and needs no magic."}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550592236, "post_id": 54770287, "comment_id": 96320791, "body": "Sure it is @SergioTulentsev and I would do that normally as well. But given that it is possible for calls to <code>super</code> and I find that really convenient, I was wondering whether it is also possible to do so generally. And I was hoping for it to be less magic than in the hacks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550592371, "post_id": 54770287, "comment_id": 96320880, "body": "I see. I hope you find it :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550674670, "post_id": 54770287, "comment_id": 96356771, "body": "@SergioTulentsev I welcome your input on my answer as I am trying to find edge cases that I may have missed."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550594164, "post_id": 54770858, "comment_id": 96321963, "body": "Except we lose required args/kwargs in <code>some_method</code>&#39;s signature here."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550594365, "post_id": 54770858, "comment_id": 96322086, "body": "@SergioTulentsev If they are fixed, we can tuck them into both methods&#39; signature. Is that the case? I am actually not sure about the question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1550594511, "post_id": 54770858, "comment_id": 96322185, "body": "This is the question, I think: &quot;But given that it is possible for calls to super and I find that really convenient, I was wondering whether it is also possible to do so generally.&quot;. Do what <code>super</code> does, only for an unrelated method."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1550594172, "last_edit_date": 1550594172, "creation_date": 1550593675, "answer_id": 54770858, "question_id": 54770287, "link": "https://stackoverflow.com/questions/54770287/how-to-pass-on-all-parameters-of-a-method-send/54770858#54770858", "title": "How to pass on all parameters of a method send", "body": "<p>Perhaps you mean this</p>\n\n<pre><code>def some_method *args, **kwargs, &amp;block\n  ...\n  some_other_method(*args, **kwargs, &amp;block)\n  ...\nend\n</code></pre>\n\n<p>But I think it is cleaner to use method delegation on <code>some _other_method</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550630643, "post_id": 54771196, "comment_id": 96335407, "body": "But that would require known method names defined in the prepended Module to act as a pass through which seems less than generic."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1550633073, "post_id": 54771196, "comment_id": 96335921, "body": "@engineersmnky well, yes and no. It could be done afterward to manage legacy code no matter how <code>m2</code> was called in the original one. Or in code generator. But of course I would not use it at home or school."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550671379, "post_id": 54771196, "comment_id": 96354619, "body": "The only other problem I see with this is that a direct call to <code>m2</code> will fail (if called first) or retain the values from the <code>m1</code> call (if called afterwards)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1550595008, "creation_date": 1550595008, "answer_id": 54771196, "question_id": 54770287, "link": "https://stackoverflow.com/questions/54770287/how-to-pass-on-all-parameters-of-a-method-send/54771196#54771196", "title": "How to pass on all parameters of a method send", "body": "<p>Just out of curiosity, you might with a help of <a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>Module.prepend</code></a>:</p>\n\n<pre><code>class Origin\n  def m1(p, *args, **kw)\n    m2()\n  end\n\n  def m2(p, *args, **kw)\n    puts \"p: #{p}, args: #{args.inspect}, kw: #{kw.inspect}\"\n  end\nend\n\nmodule Wrapper \n  def m1(*args, **kw)\n    @__args__, @__kw__ = args, kw\n    super\n  end\n\n  def m2(*)\n    super(*@__args__, **@__kw__)\n  end\nend\n\nOrigin.prepend(Wrapper)\n\nOrigin.new.m1(:foo, 42, bar: :baz)\n#\u21d2\u00a0p: foo, args: [42], kw: {:bar=&gt;:baz}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1550690218, "last_edit_date": 1550690218, "creation_date": 1550612990, "answer_id": 54775480, "question_id": 54770287, "link": "https://stackoverflow.com/questions/54770287/how-to-pass-on-all-parameters-of-a-method-send/54775480#54775480", "title": "How to pass on all parameters of a method send", "body": "<p>This was a very interesting question so first of all, thank you for that. </p>\n\n<p>Given that <code>Binding</code> is an object, like any other, we can build a class to provide this type of functionality and leverage the binding from the original method to delegate all the arguments to the next method like so:</p>\n\n<pre><code>class ArgsBuilder \n  attr_reader\n  def initialize(b)\n    @standard_args, @kwargs = [],{}\n    @binding = b\n    build!\n  end\n  def delegate(m)\n    @binding.receiver.send(m,*@standard_args,**@kwargs,&amp;@block)\n  end\n  private\n    def build!\n      set_block(&amp;@binding.eval('Proc.new')) if @binding.eval('block_given?')\n      @binding.eval('method(__method__)') \n        .parameters.each do |type,name|\n          next if type == :block\n          val = @binding.local_variable_get(name)\n          if type =~ /key/\n            @kwargs.merge!(type == :keyrest ? val : {name =&gt; val})\n          else  \n            type == :rest ? @standard_args.concat(val) : @standard_args &lt;&lt; val\n          end\n        end\n    end\n    def set_block(&amp;block)\n      @block = block\n    end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>class B \n\n  def some_method(a,b,c, *d, e:, f:, g: nil, **h)\n    ArgsBuilder.new(binding).delegate(:some_other_method)      \n  end\n\n  def some_other_method(a,b,c, *d, e:, f:, g: , **h)\n     yield __method__ if block_given?\n    \"I received: #{[a,b,c,d,e,f,g,h].inspect}\"\n  end\nend\n\nB.new.some_method(1,2,3,4,5,6, e: 7, f: 8, p: 9, n: 10) do |m| \n  puts \"called from #{m}\"\nend\n# called from some_other_method\n#=&gt; \"I received: [1, 2, 3, [4, 5, 6], 7, 8, nil, {:p=&gt;9, :n=&gt;10}]\"\n#                 a  b  c  ----d----  e  f   g   -------h-------\n</code></pre>\n\n<p>Seems simple enough to be a helper and handles named and anonymous block passing across the methods as well.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p>This obviously requires matching or at least acceptable like signatures in the delegated method similar to the way <code>super</code> works. However we could take this quite a few steps further and create classes for the argument types <code>[:req,:opt,:rest,:keyreq,:key,:keyrest,:block]</code> place them into a collection and then interrogate the method being delegated to to determine the correct args to pass through; however I am not sure that this type of example would fit well in an SO post.  </p>\n\n<p>Additional note: because <code>build!</code> is called in <code>initialize</code> the local variable binding is static at the point of instantiation of the <code>ArgsBuilder</code> class.  e.g. </p>\n\n<pre><code> def foo(n) \n   builder = ArgsBuilder.new(binding) \n   n = 17\n   builder.delegate(:bar)\n end \n def bar(n) \n   n \n end \n\n  foo(42) \n  #=&gt; 42\n</code></pre>\n\n<p>However </p>\n\n<pre><code> def foo(n) \n   n = 17\n   ArgsBuilder.new(binding).delegate(:bar)\n end \n\n foo(42) \n #=&gt; 17\n</code></pre>\n\n<p>That does not mean though that mutable objects cannot be changed </p>\n\n<pre><code> def foo(n)\n   builder = ArgsBuilder.new(binding) \n   n.upcase!\n   builder.delegate(:bar)\n end\n\n foo('a')\n #=&gt; \"A\"\n</code></pre>\n\n<p>You could obviously change this by just moving the call to <code>build!</code></p>\n"}], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1550690218, "creation_date": 1550591791, "question_id": 54770287, "link": "https://stackoverflow.com/questions/54770287/how-to-pass-on-all-parameters-of-a-method-send", "title": "How to pass on all parameters of a method send", "body": "<h3>Question</h3>\n\n<p>When in a method, how can I pass on all parameters provided as part of the method sending to another method sending? The parameters should all be named in the sense that there are no placeholders/catchalls like <code>*args</code> but they can be a mix of keyword arguments and non keyword arguments. Additionally, the inner method send is not <code>super</code>.</p>\n\n<h3>Example (pseudocode)</h3>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def some_method(a_parameter, a_named_parameter:)\n  ...do something...\n  some_other_method([send with original parameters])\n  ...do something else...\nend\n</code></pre>\n\n<h3>Related question</h3>\n\n<p><a href=\"https://stackoverflow.com/questions/9211813/is-there-a-way-to-access-method-arguments-in-ruby\">Is there a way to access method arguments in Ruby?</a> has been asked 7 years ago.</p>\n\n<h3>Ugly hack</h3>\n\n<p>Based on what I have found, it is possible to do something like this for keyword parameters:</p>\n\n<pre><code>def some_method(a_named_parameter:, another_named_parameter:)\n  ...do something...\n\n  params = method(__method__)\n           .parameters\n           .map { |p| [p[1], binding.local_variable_get(p[1])] }\n           .to_h\n\n  some_other_method(**params)\n  ...do something else...\nend\n</code></pre>\n\n<p>And this for non-keyword parameters:</p>\n\n<pre><code>def some_method(a_named_parameter, another_named_parameter)\n  ...do something...\n\n  params = method(__method__)\n           .parameters\n           .map { |p| binding.local_variable_get(p[1]) }\n\n  some_other_method(*params)\n  ...do something else...\nend\n</code></pre>\n\n<p>Based on the information returned by <code>method(__method__).parameters</code> one could also work out a solution that would work for both, but even given that it would be possible to extract all of this into a helper, it is way to complicated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 504, "user_id": 3835909, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/295d2b54568cf89ad10d5a11fe0b1222?s=128&d=identicon&r=PG&f=1", "display_name": "kbisang", "link": "https://stackoverflow.com/users/3835909/kbisang"}, "edited": false, "score": 0, "creation_date": 1550590466, "post_id": 54769752, "comment_id": 96319697, "body": "the example above based on postgresql 9.6"}, {"owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "edited": false, "score": 0, "creation_date": 1550590892, "post_id": 54769752, "comment_id": 96319974, "body": "There is no such thing as a &quot;default sort&quot;. I suppose that in Postgres you get the rows in the order according to how it lives on the disk. If you need to get some consistent order add <code>Order</code> clause."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1550591615, "post_id": 54769752, "comment_id": 96320421, "body": "<a href=\"https://dba.stackexchange.com/a/6053\">dba.stackexchange.com/a/6053</a>"}, {"owner": {"reputation": 504, "user_id": 3835909, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/295d2b54568cf89ad10d5a11fe0b1222?s=128&d=identicon&r=PG&f=1", "display_name": "kbisang", "link": "https://stackoverflow.com/users/3835909/kbisang"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550592685, "post_id": 54769752, "comment_id": 96321081, "body": "@Spickermann: According to the stackexchange article the physically order is not influenceable it&#39;s a RDBMS specific thing. Obviously I will not coming arround to order first before I process further operations based on that data. Thanks for your comment."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "is_accepted": false, "score": 1, "last_activity_date": 1550591326, "creation_date": 1550591326, "answer_id": 54770145, "question_id": 54769752, "link": "https://stackoverflow.com/questions/54769752/keep-origin-order-when-update-all-records-in-rails/54770145#54770145", "title": "Keep origin order when update all records in Rails", "body": "<p>What you want is to <code>order</code> the records by their id :</p>\n\n<p><code>Foo.order(id: :asc)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10807185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d704774344b0753f2dcc584dbb2836f?s=128&d=identicon&r=PG&f=1", "display_name": "iki", "link": "https://stackoverflow.com/users/10807185/iki"}, "is_accepted": false, "score": 0, "last_activity_date": 1550593053, "last_edit_date": 1550593053, "creation_date": 1550592440, "answer_id": 54770475, "question_id": 54769752, "link": "https://stackoverflow.com/questions/54769752/keep-origin-order-when-update-all-records-in-rails/54770475#54770475", "title": "Keep origin order when update all records in Rails", "body": "<p>when you update the field on database, depend of database configuration, the order is the \"older\" field and the last will be \"younger\" field, if you add timestamp in you database you look at it. Then if you want a order in you sql you should use the \"order\" and then the field that you want ordered. </p>\n\n<pre><code>Foo.order(id: :asc)\nFoo.order(id: :desc)\n</code></pre>\n"}], "owner": {"reputation": 504, "user_id": 3835909, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/295d2b54568cf89ad10d5a11fe0b1222?s=128&d=identicon&r=PG&f=1", "display_name": "kbisang", "link": "https://stackoverflow.com/users/3835909/kbisang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1550593053, "creation_date": 1550590094, "question_id": 54769752, "link": "https://stackoverflow.com/questions/54769752/keep-origin-order-when-update-all-records-in-rails", "title": "Keep origin order when update all records in Rails", "body": "<p>I have a table </p>\n\n<pre><code>create table foos\n(\n    id int,\n    bar varchar(1),\n    var int\n)\n</code></pre>\n\n<p>and the corresponding model class</p>\n\n<pre><code>class Foo &lt; ApplicationRecord\n  self.table_name = \"foos\"\nend\n</code></pre>\n\n<p>I fill the table directly with the ruby console <code>./script/rails console</code> as follow</p>\n\n<pre><code>Foo.new(:id =&gt; 1, :bar =&gt; \"x\", :var =&gt; 2).save\nFoo.new(:id =&gt; 2, :bar =&gt; \"y\", :var =&gt; 2).save\nFoo.new(:id =&gt; 3, :bar =&gt; \"z\", :var =&gt; 3).save\n</code></pre>\n\n<p>If I print the records out with <code>Foo.all</code> I get this order </p>\n\n<pre><code>#&lt;ActiveRecord::Relation [\n    #&lt;Foo id: 1, bar: \"x\", var: 2&gt;, \n    #&lt;Foo id: 2, bar: \"y\", var: 2&gt;, \n    #&lt;Foo id: 3, bar: \"z\", var: 3&gt;]&gt; \n</code></pre>\n\n<p>If I query <code>select * from foos</code> on database I get the same order</p>\n\n<pre><code>id  bar  var\n-------------\n1   x    2\n2   y    2\n3   z    3\n</code></pre>\n\n<p>Then I update the column <code>bar</code> on each record which <code>var</code> is <code>2</code> with value <code>a</code></p>\n\n<pre><code>Foo.where(:var =&gt; 2).update_all(:bar =&gt; \"a\")\n</code></pre>\n\n<p>If I print the records out again I get an other order</p>\n\n<pre><code>#&lt;ActiveRecord::Relation [\n    #&lt;Foo id: 3, bar: \"z\", var: 3&gt;, \n    #&lt;Foo id: 1, bar: \"a\", var: 2&gt;, \n    #&lt;Foo id: 2, bar: \"a\", var: 2&gt;]&gt; \n</code></pre>\n\n<p>Also if I query <code>select * from foos</code> on database</p>\n\n<pre><code>id  bar  var\n-------------\n3   z    3\n1   a    2\n2   a    2\n</code></pre>\n\n<p>Is there a way to keep the origin order if I update the records as explained?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1550586893, "post_id": 54767265, "comment_id": 96317430, "body": "<code>self.practice_questions ||= array</code> will only assign the array if <code>self.practice_questions</code> is false or nil, are you sure it&#39;s one of those?"}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1550587102, "creation_date": 1550587102, "answer_id": 54768744, "question_id": 54767265, "link": "https://stackoverflow.com/questions/54767265/how-to-create-an-instance-of-a-class-in-rails-giving-each-new-instance-5-has-ma/54768744#54768744", "title": "How to create an instance of a class in Rails, giving each new instance 5 has_many through relationships", "body": "<p><code>self.practice_questions ||= array</code> will only assign the array if <code>self.practice_questions</code> is false or nil, are you sure it's one of those?</p>\n\n<p>If <code>practice_questions</code> is a has_many, try one of this:</p>\n\n<pre><code>array.each do |el|\n  self.practice_questions &lt;&lt; el\nend\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>self.practice_questions_ids = array.map(&amp;:id)\n</code></pre>\n\n<p><a href=\"https://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html#has-many-association-reference</a></p>\n"}], "owner": {"reputation": 35, "user_id": 10616527, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kVWtp9wGpFU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDPUUZ2jcAANQvw0cpdlrxcdFx8Ig/mo/photo.jpg?sz=128", "display_name": "Louis Raymond", "link": "https://stackoverflow.com/users/10616527/louis-raymond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550603275, "creation_date": 1550582277, "last_edit_date": 1550603275, "question_id": 54767265, "link": "https://stackoverflow.com/questions/54767265/how-to-create-an-instance-of-a-class-in-rails-giving-each-new-instance-5-has-ma", "title": "How to create an instance of a class in Rails, giving each new instance 5 has_many through relationships", "body": "<p>I want to make an instance of my <code>Test</code> class get five practice questions through a join class when it is initialised. If a test is an \"exam\" then it should just get 5 exam questions without a join class. (the question types have different models)</p>\n\n<p>So far It doesn't behave the way I expect</p>\n\n<pre><code>self.practice_questions = []\n</code></pre>\n\n<p>it makes 5 join classes every time, but the array of self.practice_questions stays empty.</p>\n\n<pre><code>def get_questions\n  puts \"ASDASDASDASDSAD\"\n  array = []\n  if self.for_practice\n    puts \"ASDASDASOASKODKSAOKDASODKOASKDSAOKDOASKDOASK\"\n\n    PracticeQuestion.sort_for_selection[0...5].each do |question|\n      array &lt;&lt; question\n      question.use_practice_question\n    end\n  elsif for_practice === false\n    puts self.exam_questions\n    if self.exam_questions.length ===0\n     grab 5 unused exam type questions\n     ExamQuestion.unused[0...5].each do |question|\n     puts \"grabbing question #{question.title}\"\n     question.test = self\n     question.use_question\n    end\n  end\n  puts \"hello\"\n  puts self.practice_questions.length\n  self.practice_questions ||= array\n  self.save\n  puts self.practice_questions.length\n\n  self.practice_questions.each {|question| puts question.title}\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550584443, "post_id": 54767157, "comment_id": 96315883, "body": "Try to add <code>errors.add(:base, &quot;Base error&quot;)</code>"}, {"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550585456, "post_id": 54767157, "comment_id": 96316504, "body": "Doesn&#39;t work. I believe :base means that the error is related to the whole model and not only a single of its attributes. I don&#39;t think that has anything to do with the propagation."}, {"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1550591970, "post_id": 54767157, "comment_id": 96320636, "body": "are you sure that <code>task_completions</code> is not empty ?"}, {"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "edited": false, "score": 0, "creation_date": 1550680596, "post_id": 54767157, "comment_id": 96360521, "body": "Yes, I am completely sure. I used byebug and it clearly enters the if and adds the error."}], "owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1550581875, "creation_date": 1550581875, "question_id": 54767157, "link": "https://stackoverflow.com/questions/54767157/rails-nested-attributes-errors-not-propagated", "title": "Rails nested attributes errors not propagated", "body": "<p>I have the following models:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CourseSection &lt; ApplicationRecord\n  has_many :tasks, through: :content_refs, source: :content, source_type: \"Task\"\n  ...\nend\n\nclass ContentRef &lt; ApplicationRecord\n  before_destroy do\n    if task_completions.any?\n      errors.add(:content_ref, \"has associated task completions and can't be deleted. Try archiving it instead.\")\n      course_section.errors.add(:content_ref, \"has associated task completions and can't be deleted. Try archiving it instead.\")\n      throw(:abort)\n    end\n  end\n\n  belongs_to :course_section\n  has_one :task, :through =&gt; :self_ref, :source =&gt; :content, :source_type =&gt; 'Task'\n  ...\nend\n\nclass Task &lt; ApplicationRecord\n  has_many :referring_content_refs, as: :content, dependent: :destroy, class_name: \"ContentRef\"\n  ...\nend\n</code></pre>\n\n<p>I am operating the tasks through nested attributes in the CourseSectionsController as such:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>@course_section.update update_attributes_params\n</code></pre>\n\n<p>where update_attributes_params is</p>\n\n<pre><code>&lt;ActionController::Parameters {\"tasks_attributes\"=&gt;{\"0\"=&gt;{\"title\"=&gt;\"Task\", \"id\"=&gt;\"6\", \"_destroy\"=&gt;\"1\"}}} permitted: true&gt;\n</code></pre>\n\n<p>Based on these params, it tries to destroy the Task, which triggers the dependent: :destroy and tries to destroy the ContentRef. There the before_destroy is triggered and performs the check and (in this case) enters the if, inserts the errors and aborts. In the end this results in the Task not being destroyed as I want it to be, but the <code>@course_section</code> in the controller doesn't have any errors, so it doesn't know that something went wrong. Also the <code>.update</code> returns true, which I also don't understand. Shouldn't it know that there was an abort and return false?</p>\n\n<p>Right now, in this situation, the controller acts as if there wasn't any problem and the update was successful.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-lambda"], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 2871845, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7bFOd.png?s=128&g=1", "display_name": "victorpacheco3107", "link": "https://stackoverflow.com/users/2871845/victorpacheco3107"}, "is_accepted": false, "score": 0, "last_activity_date": 1612888606, "creation_date": 1612888606, "answer_id": 66123156, "question_id": 54766969, "link": "https://stackoverflow.com/questions/54766969/aws-lambda-ruby-environment-variables-are-not-available/66123156#66123156", "title": "AWS Lambda Ruby - Environment variables are not available", "body": "<p>Try with env (in lower case), and remove ENV.keys.</p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1612888606, "creation_date": 1550581193, "question_id": 54766969, "link": "https://stackoverflow.com/questions/54766969/aws-lambda-ruby-environment-variables-are-not-available", "title": "AWS Lambda Ruby - Environment variables are not available", "body": "<p>I am trying to send secrets to my Ruby Lambda function but the <code>ENV</code> variable does not seem to contain my AWS secrets. What am I doing wrong ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZNfOG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZNfOG.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the logs there are no trace at all of my 'SECRET' variable in ENV </p>\n\n<p>(Even when I disable encryption, no trace of the ENV variable, and when I try to use the \"code\" provided by AWS for decryption, it just timeouts after 3secs)</p>\n"}, {"tags": ["ruby", "file", "software-collections"], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 881133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d948cd504c69a27885f00038bf0be81?s=128&d=identicon&r=PG", "display_name": "Myles Prather", "link": "https://stackoverflow.com/users/881133/myles-prather"}, "is_accepted": true, "score": 1, "last_activity_date": 1550771989, "creation_date": 1550771989, "answer_id": 54813437, "question_id": 54766745, "link": "https://stackoverflow.com/questions/54766745/using-scl-in-the-command-call-for-ruby-script/54813437#54813437", "title": "using SCL in the command call for Ruby script", "body": "<p>How about this:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>#!/usr/bin/ruby\nif RUBY_VERSION != \"2.4.1\"\n  exec \"scl enable ruby-24; ruby __FILE__\"\nend\nputs \"Ruby Version: #{RUBY_VERSION}\"\n</code></pre>\n"}], "owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 54813437, "answer_count": 1, "score": 0, "last_activity_date": 1550771989, "creation_date": 1550580489, "question_id": 54766745, "link": "https://stackoverflow.com/questions/54766745/using-scl-in-the-command-call-for-ruby-script", "title": "using SCL in the command call for Ruby script", "body": "<p><br>My employer has Ruby 1.8.7 in the /usr/bin/ruby, and allows the usage of Ruby 2.4 only via SCL (sofoware collections).\n<br> Which means that when I run ruby, I need to use (from the RH6 shell) <code>scl enablde ruby-24 'ruby foo.rb'</code> when <code>foo.rb</code>\nis the file name.\nI want to enable the ruby call on the first execution line, i.e., instead of the Ruby code file looking like:</p>\n\n<pre><code>#!/usr/bin/ruby\nputs \"Hello world\"\n</code></pre>\n\n<p>That the code will look</p>\n\n<pre><code>#!cmd\nputs \"Hello world\"\n</code></pre>\n\n<p>Where the cmd is what calls via the <code>scl</code> and run the Ruby 2.4  for the <code>puts</code> command. I know that a wrapper file can be used. I want something in 1 file. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 2718803, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15f3df84f9a81acdea006ac557e5ecb8?s=128&d=identicon&r=PG&f=1", "display_name": "Makoto", "link": "https://stackoverflow.com/users/2718803/makoto"}, "edited": false, "score": 1, "creation_date": 1550587642, "post_id": 54767825, "comment_id": 96317896, "body": "oh cool, didn&#39;t realise you could do that, will verify that this works and give a green tick :)"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 227, "user_id": 2718803, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15f3df84f9a81acdea006ac557e5ecb8?s=128&d=identicon&r=PG&f=1", "display_name": "Makoto", "link": "https://stackoverflow.com/users/2718803/makoto"}, "edited": false, "score": 0, "creation_date": 1550591195, "post_id": 54767825, "comment_id": 96320172, "body": "@Makoto, happy to help you!"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 2, "last_activity_date": 1550584171, "creation_date": 1550584171, "answer_id": 54767825, "question_id": 54766655, "link": "https://stackoverflow.com/questions/54766655/rails-active-record-serialisation-inside-migration/54767825#54767825", "title": "Rails active record serialisation inside migration", "body": "<p>Yes, just define all needed info inside the migration file:</p>\n\n<pre><code># db/migrate/20190219114703_move_data_to_another_table.rb\nclass MyModel &lt; ApplicationRecord\n  # here you need only the line that specifies the serialisation type\nend\n\nclass MoveDataToAnotherTable &lt; ActiveRecord::Migration[5.1]\n  def change\n    # here goes the migration itself\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 2718803, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15f3df84f9a81acdea006ac557e5ecb8?s=128&d=identicon&r=PG&f=1", "display_name": "Makoto", "link": "https://stackoverflow.com/users/2718803/makoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 54767825, "answer_count": 1, "score": 0, "last_activity_date": 1550584171, "creation_date": 1550580210, "question_id": 54766655, "link": "https://stackoverflow.com/questions/54766655/rails-active-record-serialisation-inside-migration", "title": "Rails active record serialisation inside migration", "body": "<p>I am doing a migration where I am moving data that is saved as a ruby Hash from one table to another. The column is saved as :text, and in the model the serialisation is defined as a Hash. </p>\n\n<p>I want to move this column into another table but if I remove the line that specifies the serialisation type (which I want to do because the field will no longer exist), then the migration treats the data as a string. Is it possible to define how the data must be serialised in the migration file itself? so that future migrations from scratch don't break at this point.</p>\n"}, {"tags": ["ruby", "graphql", "microservices"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550579631, "post_id": 54765675, "comment_id": 96312953, "body": "Deprecated by who? In favour of what?"}, {"owner": {"reputation": 35, "user_id": 7245279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QMSS4yyCsYc/AAAAAAAAAAI/AAAAAAAAAFU/KoPcqLoPs8s/photo.jpg?sz=128", "display_name": "Alex Damian", "link": "https://stackoverflow.com/users/7245279/alex-damian"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550579947, "post_id": 54765675, "comment_id": 96313143, "body": "@AlekseiMatiushkin in favor of the <a href=\"https://graphql-ruby.org/schema/class_based_api.html\" rel=\"nofollow noreferrer\">class-based API</a>. It uses the <code>.define</code> style, which is going to be removed in <code>graphql 2.0</code>."}, {"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1550588826, "post_id": 54765675, "comment_id": 96318572, "body": "Can you share a repo with your code?"}, {"owner": {"reputation": 35, "user_id": 7245279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QMSS4yyCsYc/AAAAAAAAAAI/AAAAAAAAAFU/KoPcqLoPs8s/photo.jpg?sz=128", "display_name": "Alex Damian", "link": "https://stackoverflow.com/users/7245279/alex-damian"}, "reply_to_user": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1550650571, "post_id": 54765675, "comment_id": 96341937, "body": "@hernanvicente unfortunately not, as the repo is private. I added some code to better explain what I&#39;d like to do. Since a schema can only have <b>one</b> query/mutation type, I thought of somehow stitching all those queries together and the mutations together and just import those two in my <code>schema.rb</code>."}], "owner": {"reputation": 35, "user_id": 7245279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QMSS4yyCsYc/AAAAAAAAAAI/AAAAAAAAAFU/KoPcqLoPs8s/photo.jpg?sz=128", "display_name": "Alex Damian", "link": "https://stackoverflow.com/users/7245279/alex-damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550650311, "creation_date": 1550577030, "last_edit_date": 1550650311, "question_id": 54765675, "link": "https://stackoverflow.com/questions/54765675/how-to-aggregate-multiple-query-root-types-over-micro-services-in-ruby", "title": "How to aggregate multiple Query Root Types over micro-services in Ruby?", "body": "<p>I have a <code>Ruby+GraphQL</code> project built out of micro-services and a front end that uses <code>ember-apollo</code>. I am still learning all of these technologies and am pretty new to the concept of micro-services.</p>\n\n<p>I have three modules in my API - <code>Clients</code>, <code>Collaborators</code> and <code>main</code> (which can be seen as the umbrella of the others), each, excepting <code>main</code>, with their own <code>graphql</code> directory that contains their respective <code>QueryType</code>, along with the types/resolvers, and a <code>schema</code> that is located outside these modules.</p>\n\n<p>Since the <code>schema</code> can have <strong>only one</strong> <code>query</code> type, what I thought of is to somehow aggregate the fields in my other <code>QueryTypes</code> in a manner like <a href=\"https://m.alphasights.com/graphql-ruby-clean-up-your-query-type-d7ab05a47084\" rel=\"nofollow noreferrer\">this one</a> with a <code>FieldCombiner</code> in the <code>main</code> module, sort of as an entry-point, and use that one in my schema.</p>\n\n<p>The problem with this solution is that it uses the old <code>.define</code> style which is going to be removed in <code>graphql 2.0</code>, so I believe a <a href=\"https://graphql-ruby.org/schema/class_based_api.html\" rel=\"nofollow noreferrer\">class-based-api</a> is a better solution. I searched quite a bit and did not come across something that works in that direction.</p>\n\n<p>What I'd like to do in code:</p>\n\n<pre><code>module OpenCompanyApi\n  class Schema &lt; GraphQL::Schema\n    query Clients::Graphql::Types::Query\n    query Collaborators::Graphql::Types::Query # Something like that. They're two different modules, each with their own root query type\n    mutation Clients::Graphql::Types::Mutation\n    mutation Collaborators::Graphql::Types::Mutation # This too\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 1952, "user_id": 4706562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2f514797bfe38d26848402a2dda3fb?s=128&d=identicon&r=PG&f=1", "display_name": "chrisis", "link": "https://stackoverflow.com/users/4706562/chrisis"}, "is_accepted": false, "score": 1, "last_activity_date": 1550584254, "creation_date": 1550584254, "answer_id": 54767856, "question_id": 54765421, "link": "https://stackoverflow.com/questions/54765421/parse-specific-path-with-xpath-nokogiri/54767856#54767856", "title": "Parse specific path with xpath (Nokogiri)", "body": "<p>I think the XPath you want is <code>.//resource/prices/price</code> but it's not clear from your question what the context, represented by the <code>.</code> in your path, is.</p>\n"}], "owner": {"reputation": 5742, "user_id": 1906131, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40b31f70737db5a1ae964c9b9998c22e?s=128&d=identicon&r=PG", "display_name": "Rober", "link": "https://stackoverflow.com/users/1906131/rober"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581291377, "creation_date": 1550576177, "last_edit_date": 1581291377, "question_id": 54765421, "link": "https://stackoverflow.com/questions/54765421/parse-specific-path-with-xpath-nokogiri", "title": "Parse specific path with xpath (Nokogiri)", "body": "<p>I have a rails service reading an XML from a SOAP endpoint. The simplified structure is like:</p>\n\n<pre><code>&lt;resource id=\"1287085300000102889\" ...&gt;\n  &lt;prices&gt;\n   &lt;price datefrom=\"2018-05-25\" dateto=\"2018-05-26\" price=\"0.0\" currency=\"EUR\"/&gt;\n   &lt;price datefrom=\"2020-05-23\" dateto=\"2020-05-24\" price=\"1540.0\" currency=\"EUR\"/&gt;\n   ...\n  &lt;/prices&gt;\n  &lt;products&gt;\n    &lt;product name=\"product1\"&gt;\n      &lt;prices&gt;\n        &lt;price datefrom=\"2018-05-25\" dateto=\"2018-05-26\" price=\"0.0\" currency=\"EUR\"/&gt;\n        &lt;price datefrom=\"2020-05-23\" dateto=\"2020-05-24\" price=\"1540.0\" currency=\"EUR\"/&gt;\n      &lt;/prices&gt;\n    &lt;/product&gt;\n  &lt;/products&gt;\n&lt;/resource&gt;\n</code></pre>\n\n<p>I\u00b4m parsing the information using Nokogiri gem that I think uses xpath. \nIn the example above, I\u00b4m using <code>resource.xpath(\".//price\")</code> but this is processing all prices.I just want to parse the prices inside the \"default\" prices node  and I don\u00b4t want to process the prices inside each product. How can I do it.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "edited": false, "score": 0, "creation_date": 1550574585, "post_id": 54764751, "comment_id": 96309845, "body": "Is your issue not being able to run the <code>.each</code> or you need help with the algorithm itself?"}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "reply_to_user": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "edited": false, "score": 0, "creation_date": 1550574698, "post_id": 54764751, "comment_id": 96309908, "body": "I was asking if there is a better ruby way to achieve this @elvinas"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550574863, "post_id": 54764751, "comment_id": 96310021, "body": "Time is not crucial to your issue. You need to simplify the hash to make your point."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1550582019, "post_id": 54764751, "comment_id": 96314331, "body": "This is called <i>prefix-sum</i> or <i>scan</i> and is indeed strangely missing from Ruby&#39;s collections library."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1550609013, "post_id": 54764751, "comment_id": 96329287, "body": "Unless you have a good reason for doing so, it&#39;s generally not a good idea to assume that hash keys have a particular order."}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550660017, "post_id": 54764751, "comment_id": 96347607, "body": "@CarySwoveland the hash is generate from a SQL select ordered by date"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550597431, "post_id": 54764978, "comment_id": 96323733, "body": "This problem has many guises, one being to convert a discrete probability density function to a cumulative distribution function. You&#39;ve provided a nice way of doing that. Is this a first: your answer having been edited?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550651669, "post_id": 54764978, "comment_id": 96342511, "body": "@CarySwoveland ha! I&#39;m usually the one editing answers to include links :-) Seems like I was in a hurry."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1550576062, "last_edit_date": 1550576062, "creation_date": 1550574874, "answer_id": 54764978, "question_id": 54764751, "link": "https://stackoverflow.com/questions/54764751/add-previous-value-to-each-hash-value/54764978#54764978", "title": "Add previous value to each hash value", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>inject</code></a> to calculate the total sum:</p>\n\n<pre><code>h = { a: 1, b: 1, c: 1, d: 2, e: 2}\n\nh.inject(100) { |s, (k, v)| s + v }\n#=&gt; 107\n</code></pre>\n\n<p>And while doing so, you can also set the hash values to get an accumulated sum:</p>\n\n<pre><code>h.inject(100) { |s, (k, v)| h[k] = s + v }\n\nh #=&gt; {:a=&gt;101, :b=&gt;102, :c=&gt;103, :d=&gt;105, :e=&gt;107}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550575958, "post_id": 54764982, "comment_id": 96310717, "body": "I edited your answer according to my edit of the question."}], "tags": [], "owner": {"reputation": 404, "user_id": 3790990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9YY.png?s=128&g=1", "display_name": "elvinas", "link": "https://stackoverflow.com/users/3790990/elvinas"}, "is_accepted": false, "score": 1, "last_activity_date": 1550575909, "last_edit_date": 1550575909, "creation_date": 1550574880, "answer_id": 54764982, "question_id": 54764751, "link": "https://stackoverflow.com/questions/54764751/add-previous-value-to-each-hash-value/54764982#54764982", "title": "Add previous value to each hash value", "body": "<p>Maybe this is not the most efficient solution, but it is definitely nice and readable.</p>\n\n<pre><code>accumulated_sum = 0\nh.each do |key, value|\n  accumulated_sum += value\n  hash[key] = 100 + accumulated_sum\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1550575644, "creation_date": 1550575644, "answer_id": 54765242, "question_id": 54764751, "link": "https://stackoverflow.com/questions/54764751/add-previous-value-to-each-hash-value/54765242#54765242", "title": "Add previous value to each hash value", "body": "<p>You can just keep track of the sum as an external variable:</p>\n\n<pre><code>sum = 100\nh.transform_values{|v| sum += v} # =&gt; {:a=&gt;101, :b=&gt;102, :c=&gt;103, :d=&gt;105, :e=&gt;107}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1550575870, "creation_date": 1550575870, "answer_id": 54765317, "question_id": 54764751, "link": "https://stackoverflow.com/questions/54764751/add-previous-value-to-each-hash-value/54765317#54765317", "title": "Add previous value to each hash value", "body": "<p>Immutable solution that does not modify the input:</p>\n\n<pre><code>h.each_with_object({sum: 100, outcome: {}}) do |(k, v), acc|\n  acc[:outcome][k] = acc[:sum] += v\nend\n#\u21d2 {:sum=&gt;107, :outcome=&gt;{:a=&gt;101, :b=&gt;102, :c=&gt;103, :d=&gt;105, :e=&gt;107}}\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54764978, "answer_count": 4, "score": -1, "last_activity_date": 1550576062, "creation_date": 1550574227, "last_edit_date": 1550575094, "question_id": 54764751, "link": "https://stackoverflow.com/questions/54764751/add-previous-value-to-each-hash-value", "title": "Add previous value to each hash value", "body": "<p>I have a hash with integer values:</p>\n\n<pre><code>h = {\n  a: 1,\n  b: 1,\n  c: 1,\n  d: 2,\n  e: 2,\n}\n</code></pre>\n\n<p>I need to add <code>100</code> to the first value, and for the second value and on, I need to add the preceding value to the original value to get:</p>\n\n<pre><code>{\n  a: 101,\n  b: 102,\n  c: 103,\n  d: 105,\n  e: 107,\n}\n</code></pre>\n\n<p>Is there a good way to achieve this?</p>\n"}, {"tags": ["python", "ruby", "cloud", "erp", "sage-one"], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 2024073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mETW6.jpg?s=128&g=1", "display_name": "Sarwan Kumar", "link": "https://stackoverflow.com/users/2024073/sarwan-kumar"}, "edited": false, "score": 0, "creation_date": 1552396624, "post_id": 54817105, "comment_id": 96986218, "body": "thanks, @funkmonkey33  Can you please share you idea on integrating sData on my question: <a href=\"https://stackoverflow.com/questions/55122325/sdata-rest-apis-for-sage-100-erp\" title=\"sdata rest apis for sage 100 erp\">stackoverflow.com/questions/55122325/&hellip;</a>"}], "tags": [], "owner": {"reputation": 553, "user_id": 886432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3d6cea6632e81e287c5e16fd4cda1a01?s=128&d=identicon&r=PG", "display_name": "FunkMonkey33", "link": "https://stackoverflow.com/users/886432/funkmonkey33"}, "is_accepted": false, "score": 3, "last_activity_date": 1550787526, "creation_date": 1550787526, "answer_id": 54817105, "question_id": 54764065, "link": "https://stackoverflow.com/questions/54764065/sage-100-erp-setup-on-windows-server-machine/54817105#54817105", "title": "Sage 100 ERP setup on windows server machine", "body": "<p>Typically you would work with a Sage partner or reseller to set up your Sage 100 environment.  Depending on your location, there should be several available.  You would typically check the Sage website to see the Sage partners in your area.</p>\n\n<p>With that said, I used to do a lot of programming against Sage 100 and I can tell you that there is no REST or web services API.  What you would typically do is deploy your own API that reads from Sage 100 as a database.  There is an ODBC connection that is included by default with the product, called SOTAMAS90, that will allow you read-only access to all the Sage 100 tables.  The 32-bit connector is installed automatically when you install the program.  There is a 64 bit version as well, but that takes more work to set up.  The 32 bit version is easiest, but it does require that your API code be running as a 32 bit service or program.</p>\n\n<p>I would typically write C# programs that consume the SOTAMAS90 data and serve it via REST.  ASP.NET Web API or Core are both good choices for doing this.</p>\n\n<p>Since the SOTAMAS90 ODBC client is read-only, you will have to do something else if you need to write data back to Sage 100.  The two interfaces that I'm familiar with are VI and BOI.</p>\n\n<p>VI, or Visual Integrator is basically a utility for importing data from a source file (typically a CSV).  It has some limitations, but it does work.  You can launch it programmatically, which makes it usable on-demand.  If doesn't throw error messages, however.  If a row can't be written, it just skips it.  You can view a report after the fact to see what wrote and what didn't.  </p>\n\n<p>BOI, or the Business Object Interface, is a COM component that you can code against.  It provides more robust data validation, and does throw errors on a per-record (and sometimes a per-field) basis so you can respond to those in your code accordingly.  Unfortunately, while most of the modules are exposed the BOI, not all of them are.  Every year, Sage is porting more and more functionality to \"the new framework\" which also means it is available via BOI.  </p>\n\n<p>Finally, you can also set up a linked server in SQL Server to serve the ODBC data that way.  Any way you hit that SOTAMAS90 DSN though, it's slow.  Some developers like to copy all of the data to SQL Server and serve it from there.  If you do that, be sure to add foreign keys and indexes.  And run a nightly ETL to keep the data fresh.  There are also solutions via User Defined Scripts that will allow you to respond to individual row CRUD events.</p>\n\n<p>Hope that helps.</p>\n\n<p>Aaron</p>\n"}], "owner": {"reputation": 1099, "user_id": 2024073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mETW6.jpg?s=128&g=1", "display_name": "Sarwan Kumar", "link": "https://stackoverflow.com/users/2024073/sarwan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1550787526, "creation_date": 1550572224, "last_edit_date": 1550661419, "question_id": 54764065, "link": "https://stackoverflow.com/questions/54764065/sage-100-erp-setup-on-windows-server-machine", "title": "Sage 100 ERP setup on windows server machine", "body": "<p>We have purchased Sage 100 partner account. I have also set up Sage ERP 100 on windows server 2016. But, I am stuck at the following points.</p>\n\n<ol>\n<li>Where to add business</li>\n<li>How to set up web services and access REST APIs</li>\n<li>How I will make server configuration</li>\n</ol>\n\n<p>Any help in Sage 100 setup will be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550571663, "post_id": 54763691, "comment_id": 96308042, "body": "Did you restart your development server after <code>bundle install</code>?"}, {"owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550572193, "post_id": 54763691, "comment_id": 96308388, "body": "My bad, I did now. uninitialized constant error is gone but implicit conversion error arises @MarekLipka, can you help me out with it"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1550572286, "post_id": 54763691, "comment_id": 96308445, "body": "You probably need to define previlege_value on the model as a hash, like the example in the README"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550572316, "post_id": 54763691, "comment_id": 96308464, "body": "Did you try to initialize your <code>array_enum</code> attribute just like the Usage section says, i.e. <code>array_enum privilege_value: { &quot;read&quot; =&gt; 1, &quot;write&quot; =&gt; 2, &quot;edit&quot; =&gt; 3 }</code>?"}, {"owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1550572760, "post_id": 54763691, "comment_id": 96308763, "body": "I tried, still it threw me <b>1 is not a valid value for privilege_value</b> if I query <i>Privilege.create! privilege_value: [1,2]</i> @AntarrByrd and MarekLipka"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573137, "post_id": 54763691, "comment_id": 96309002, "body": "Did you try to create your record just like the Usage section says, i.e. <code>Privilege.create! privilege_value: %w[read write]</code>?"}, {"owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573212, "post_id": 54763691, "comment_id": 96309046, "body": "no @MarekLipka, Privilege.create! privilege_value: [1,2] this is what I used"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573267, "post_id": 54763691, "comment_id": 96309084, "body": "Well, that&#39;s probably why it didn&#39;t work. I guess if you do it according to Usage section of README of this gem, it will work."}, {"owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573381, "post_id": 54763691, "comment_id": 96309166, "body": "I also tried it as Privilege.create! privilege_value: [&quot;write&quot;,&quot;read&quot;] as in README, yet couldn&#39;t create @MarekLipka"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573426, "post_id": 54763691, "comment_id": 96309201, "body": "What was the error then? Was it the same?"}, {"owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550573622, "post_id": 54763691, "comment_id": 96309322, "body": "ya its the same instead <b>1 is not a valid value for privilege_value</b> it thew <b>write is not a valid value for privilege_value</b> @MarekLipka"}], "owner": {"reputation": 31, "user_id": 4593210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39b16583a084adad736b7af4ca39c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan V", "link": "https://stackoverflow.com/users/4593210/narayanan-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550572860, "creation_date": 1550571151, "last_edit_date": 1550572860, "question_id": 54763691, "link": "https://stackoverflow.com/questions/54763691/array-enum-implicit-conversion-of-string-into-integer-exception", "title": "array_enum implicit conversion of string into integer Exception", "body": "<p>I included <code>gem 'array_enum'</code> in Gemfile, and executed <code>bundle install</code> in the console, and included <code>extend ArrayEnum</code> in respective <code>ModelName.rb</code> as instructed in <a href=\"https://github.com/freeletics/array_enum\" rel=\"nofollow noreferrer\">array_enum</a>.</p>\n\n<p><strong>Privilege.rb</strong></p>\n\n<pre><code>class Privilege &lt; ApplicationRecord\n  extend ArrayEnum\n\n  array_enum privilege_value: [:read, :write, :edit]\nend\n</code></pre>\n\n<p><strong>x_create_privilege.rb</strong></p>\n\n<pre><code>class CreatePrivileges &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :privileges do |t|\n      t.integer :privilege_value, array: true, default: []\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I'm trying to insert into the table by the following code in rails console:</p>\n\n<pre><code>Privilege.create! privilege_value: [1,2]\n</code></pre>\n\n<p>It throws <code>implicit conversion of String into Integer</code> exception. Why is this:?</p>\n"}, {"tags": ["ruby", "selenium-chromedriver", "centos7", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1550599675, "post_id": 54760863, "comment_id": 96324938, "body": "<a href=\"http://chromedriver.chromium.org/capabilities\" rel=\"nofollow noreferrer\">chromedriver.chromium.org/capabilities</a> will give you background on chrome capabilities.  Check out <a href=\"http://watir.com/watir-6-6/\" rel=\"nofollow noreferrer\">watir.com/watir-6-6</a> to see how to use them in <code>watir</code>.  Try <code>Watir::Browser.new :chrome, :args =&gt; [ &quot;--no-sandbox&quot; ]</code> when instantiating your browser..."}, {"owner": {"reputation": 189, "user_id": 5877576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea1ba7d43a09b73ae0cfdb538875151a?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Kansal", "link": "https://stackoverflow.com/users/5877576/nishant-kansal"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1550635451, "post_id": 54760863, "comment_id": 96336427, "body": "I tried with passing the arguments as explained by you. However, error is still the same: /usr/local/rvm/gems/ruby-2.6.0/gems/selenium-webdriver-3.141&zwnj;&#8203;.0/lib/selenium/webd&zwnj;&#8203;river/remote/respons&zwnj;&#8203;e.rb:69:in `assert_ok&#39;: unknown error: Chrome failed to start: exited abnormally (Selenium::WebDriver::Error::UnknownError)   (unknown error: DevToolsActivePort file doesn&#39;t exist)   (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1550699118, "post_id": 54760863, "comment_id": 96369484, "body": "Hmmm...might want to try latest chrome + chromedriver.  Or check the chromedriver log: <a href=\"http://chromedriver.chromium.org/logging\" rel=\"nofollow noreferrer\">chromedriver.chromium.org/logging</a>.  Good luck."}], "answers": [{"tags": [], "owner": {"reputation": 2134, "user_id": 7368965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29569b46e10e8108c2d193e8cd51cfca?s=128&d=identicon&r=PG&f=1", "display_name": "error404", "link": "https://stackoverflow.com/users/7368965/error404"}, "is_accepted": false, "score": 1, "last_activity_date": 1558339745, "last_edit_date": 1558339745, "creation_date": 1558288806, "answer_id": 56210561, "question_id": 54760863, "link": "https://stackoverflow.com/questions/54760863/error-unknown-error-devtoolsactiveport-file-doesnt-exist-when-executing-ruby/56210561#56210561", "title": "Error: unknown error: DevToolsActivePort file doesn&#39;t exist, when executing ruby script with watir", "body": "<p>Also faced similar issue but with npm and protractor configuration but I guess the solution would be similar. You have to install chrome browser in your linux system. </p>\n\n<p>The chromedriver is just a wrapper written to use the chromebrowser for running the test cases.</p>\n\n<p>Also if google-chrome is installed you might want to check the path were it is installed in linux based operating system the path expected is under /usr/bin/google-chrome. This file is generally a link to the actual binary of the chrome. </p>\n\n<p>Hope so this helps</p>\n"}], "owner": {"reputation": 189, "user_id": 5877576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea1ba7d43a09b73ae0cfdb538875151a?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Kansal", "link": "https://stackoverflow.com/users/5877576/nishant-kansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4901, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1558339745, "creation_date": 1550561488, "last_edit_date": 1550562620, "question_id": 54760863, "link": "https://stackoverflow.com/questions/54760863/error-unknown-error-devtoolsactiveport-file-doesnt-exist-when-executing-ruby", "title": "Error: unknown error: DevToolsActivePort file doesn&#39;t exist, when executing ruby script with watir", "body": "<p>I am fairly new to Centos7 and trying to develop a solution for browser automation in the below environment:</p>\n\n<p>OS: Centos7\nRuby: 2.6\nWatir\nBrowser:Google Chrome 72.0.3626.109\nDriver: ChromeDriver 2.46.628388</p>\n\n<p>My script:</p>\n\n<pre><code>require 'watir'\n\n# Initialize the browser with the driver path\nsite=\"https://google.com\"\nbrowser = Watir::Browser.new :chrome\nbrowser.goto site\n</code></pre>\n\n<p>Getting error:</p>\n\n<pre><code>`assert_ok': unknown error: Chrome failed to start: exited abnormally (Selenium::WebDriver::Error::UnknownError)\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\n  (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 3.10.0-957.5.1.el7.x86_64 x86_64)\n</code></pre>\n\n<p>I found multiple solutions on net that are recommending to modify chrome options like:</p>\n\n<pre><code>chrome_options.add_argument('--headless')\nchrome_options.add_argument('--no-sandbox')\nchrome_options.add_argument('--disable-dev-shm-usage')\n</code></pre>\n\n<p>But I don't know where to set these. The nearest I was able to reach is the answers provided here: <a href=\"https://stackoverflow.com/questions/12698843/how-do-i-pass-options-to-the-selenium-chrome-driver-using-python\">How do I pass options to the Selenium Chrome driver using Python?</a></p>\n\n<p>Can anyone please help me to resolve it in a step-by-step manner?  </p>\n"}, {"tags": ["ruby", "heroku", "heroku-pipelines"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1550569899, "post_id": 54760838, "comment_id": 96306826, "body": "Maybe too old dependencies? Have you deleted the Gemfile.lock and rebundled?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1550569924, "post_id": 54760838, "comment_id": 96306849, "body": "Maybe try a newer <code>bundler</code>. Have you updated any Gems since last deploy? ALl gems up to date?"}, {"owner": {"reputation": 129, "user_id": 1220494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oU9XW.png?s=128&g=1", "display_name": "secondbreakfast", "link": "https://stackoverflow.com/users/1220494/secondbreakfast"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1550591675, "post_id": 54760838, "comment_id": 96320456, "body": "Yes, I dug into the Gemfile and started specifying specific versions that are in my master branch&#39;s lockfile. That solved the problem."}], "owner": {"reputation": 129, "user_id": 1220494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oU9XW.png?s=128&g=1", "display_name": "secondbreakfast", "link": "https://stackoverflow.com/users/1220494/secondbreakfast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550561399, "creation_date": 1550561399, "question_id": 54760838, "link": "https://stackoverflow.com/questions/54760838/why-do-my-review-apps-keep-failing-to-build-on-heroku-pipelines", "title": "Why do my Review Apps keep failing to build on Heroku Pipelines?", "body": "<p>I have a Heroku Pipeline set up. The Review Apps are based off the Staging App, so the Review Apps are using all the same environment variables etc. as the Staging App.</p>\n\n<p>When the Review Apps try to spin up, I keep getting the follow log error. How come the Review App cannot build, but the Staging App (which is based off) can build no problem?</p>\n\n<pre><code>-----&gt; Ruby app detected\n-----&gt; Compiling Ruby/Rails\n-----&gt; Using Ruby version: ruby-2.5.3\n-----&gt; Installing dependencies using bundler 1.15.2\n       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n       Warning: the running version of Bundler (1.15.2) is older than the version that created the lockfile (1.16.2). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n       Fetching gem metadata from https://rubygems.org/.......\n       Fetching version metadata from https://rubygems.org/..\n       Fetching dependency metadata from https://rubygems.org/.\n       Fetching https://github.com/stripe/stripe-ruby\n       Fetching rake 11.2.2\n       Fetching StreetAddress 1.0.6\n       Fetching i18n 0.7.0\n       Installing StreetAddress 1.0.6\n       Installing i18n 0.7.0\n       Installing rake 11.2.2\n       Fetching json 1.8.3\n       Installing json 1.8.3 with native extensions\n       Fetching minitest 5.9.0\n       Installing minitest 5.9.0\n       Fetching thread_safe 0.3.5\n       Installing thread_safe 0.3.5\n       Fetching builder 3.2.2\n       Installing builder 3.2.2\n       Fetching erubis 2.7.0\n       Fetching mini_portile2 2.1.0\n       Installing erubis 2.7.0\n       Installing mini_portile2 2.1.0\n       Fetching pkg-config 1.1.7\n       Installing pkg-config 1.1.7\n       Fetching rack 1.6.4\n       Installing rack 1.6.4\n       Fetching mime-types-data 3.2016.0521\n       Installing mime-types-data 3.2016.0521\n       Fetching arel 6.0.3\n       Installing arel 6.0.3\n       Fetching public_suffix 2.0.4\n       Fetching httpclient 2.8.2.3\n       Installing public_suffix 2.0.4\n       Installing httpclient 2.8.2.3\n       Fetching ansi 1.5.0\n       Installing ansi 1.5.0\n       Fetching execjs 2.7.0\n       Installing execjs 2.7.0\n       Fetching jmespath 1.3.1\n       Installing jmespath 1.3.1\n       Fetching aws_cf_signer 0.1.3\n       Installing aws_cf_signer 0.1.3\n       Fetching htmlentities 4.3.4\n       Installing htmlentities 4.3.4\n       Fetching rubyzip 1.0.0\n       Installing rubyzip 1.0.0\n       Fetching thor 0.19.1\n       Installing thor 0.19.1\n       Fetching sass 3.4.22\n       Installing sass 3.4.22\n       Fetching browser 2.5.1\n       Installing browser 2.5.1\n       Using bundler 1.15.2\n       Fetching unf_ext 0.0.7.2\n       Installing unf_ext 0.0.7.2 with native extensions\n       Fetching netrc 0.11.0\n       Installing netrc 0.11.0\n       Fetching coffee-script-source 1.10.0\n       Installing coffee-script-source 1.10.0\n       Fetching concurrent-ruby 1.0.2\n       Installing concurrent-ruby 1.0.2\n       Fetching dalli 2.7.6\n       Installing dalli 2.7.6\n       Fetching declarative 0.0.9\n       Fetching declarative-option 0.1.0\n       Installing declarative 0.0.9\n       Installing declarative-option 0.1.0\n       Fetching excon 0.61.0\n       Fetching multipart-post 2.0.0\n       Installing multipart-post 2.0.0\n       Installing excon 0.61.0\n       Fetching geocoder 1.5.0\n       Installing geocoder 1.5.0\n       Fetching multi_json 1.12.1\n       Installing multi_json 1.12.1\n       Fetching jwt 1.5.6\n       Fetching little-plugger 1.1.4\n       Installing jwt 1.5.6\n       Installing little-plugger 1.1.4\n       Fetching memoist 0.16.0\n       Installing memoist 0.16.0\n       Fetching os 0.9.6\n       Fetching hurley 0.2\n       Installing os 0.9.6\n       Installing hurley 0.2\n       Fetching uber 0.1.0\n       Installing uber 0.1.0\n       Fetching retriable 3.1.1\n       Installing retriable 3.1.1\n       Fetching moneta 0.8.1\n       Fetching http-form_data 1.0.3\n       Installing http-form_data 1.0.3\n       Installing moneta 0.8.1\n       Fetching http_parser.rb 0.6.0\n       Installing http_parser.rb 0.6.0 with native extensions\n       Fetching nesty 1.0.2\n       Installing nesty 1.0.2\n       Fetching model_attribute 3.2.0\n       Installing model_attribute 3.2.0\n       Fetching multi_fetch_fragments 0.0.17\n       Installing multi_fetch_fragments 0.0.17\n       Fetching mustache 1.0.3\n       Installing mustache 1.0.3\n       Fetching net-http-persistent 2.9.4\n       Installing net-http-persistent 2.9.4\n       Fetching nickel 0.1.6\n       Installing nickel 0.1.6\n       Fetching pg 0.18.4\n       Installing pg 0.18.4 with native extensions\n       Fetching phone 1.2.3\n       Installing phone 1.2.3\n       Fetching pusher-signature 0.1.8\n       Installing pusher-signature 0.1.8\n       Fetching rails_serve_static_assets 0.0.5\n       Installing rails_serve_static_assets 0.0.5\n       Fetching rails_stdout_logging 0.0.5\n       Installing rails_stdout_logging 0.0.5\n       Fetching remotipart 1.2.1\n       Installing remotipart 1.2.1\n       Fetching rumoji 0.5.0\n       Installing rumoji 0.5.0\n       Fetching tilt 2.0.5\n       Installing tilt 2.0.5\n       Fetching spellingbee 0.0.2\n       Installing spellingbee 0.0.2\n       Fetching turbolinks-source 5.0.0\n       Installing turbolinks-source 5.0.0\n       Fetching wicked_pdf 1.1.0\n       Installing wicked_pdf 1.1.0\n       Fetching wkhtmltopdf-heroku 2.12.4.0\n       Fetching tzinfo 1.2.2\n       Installing tzinfo 1.2.2\n       Fetching memoizable 0.4.2\n       Installing memoizable 0.4.2\n       Fetching nokogiri 1.6.8\n       Installing wkhtmltopdf-heroku 2.12.4.0\n       Installing nokogiri 1.6.8 with native extensions\n       Fetching rack-test 0.6.3\n       Installing rack-test 0.6.3\n       Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/ruby-2.5.3/bin/ruby -r\n       ./siteconf20190219-234-1ecip0x.rb extconf.rb\n       creating Makefile\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       make \"DESTDIR=\" clean\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       make \"DESTDIR=\"\n       compiling generator.c\n       generator.c: In function \u2018generate_json\u2019:\n       generator.c:861:25: error: \u2018rb_cFixnum\u2019 undeclared (first use in this function)\n            } else if (klass == rb_cFixnum) {\n                                ^\n       generator.c:861:25: note: each undeclared identifier is reported only once for\n       each function it appears in\n       generator.c:863:25: error: \u2018rb_cBignum\u2019 undeclared (first use in this function)\n            } else if (klass == rb_cBignum) {\n                                ^\n       generator.c: At top level:\n       cc1: warning: unrecognized command line option \"-Wno-self-assign\" [enabled by\n       default]\n       cc1: warning: unrecognized command line option \"-Wno-constant-logical-operand\"\n       [enabled by default]\n       cc1: warning: unrecognized command line option \"-Wno-parentheses-equality\"\n       [enabled by default]\n       cc1: warning: unrecognized command line option \"-Wno-tautological-compare\"\n       [enabled by default]\n       make: *** [generator.o] Error 1\n\n       make failed, exit code 2\n\n       Gem files will remain installed in\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3\n       for inspection.\n       Results logged to\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/extensions/x86_64-linux/2.5.0-static/json-1.8.3/gem_make.out\n\n       An error occurred while installing json (1.8.3), and Bundler cannot continue.\n       Make sure that `gem install json -v '1.8.3'` succeeds before bundling.\n\n       In Gemfile:\n         postmark-rails was resolved to 0.13.0, which depends on\n           actionmailer was resolved to 4.2.2, which depends on\n             actionpack was resolved to 4.2.2, which depends on\n               actionview was resolved to 4.2.2, which depends on\n                 rails-dom-testing was resolved to 1.0.7, which depends on\n                   rails-deprecated_sanitizer was resolved to 1.0.3, which depends on\n                     activesupport was resolved to 4.2.2, which depends on\n                       json\n       Bundler Output: Warning: the running version of Bundler (1.15.2) is older than the version that created the lockfile (1.16.2). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n       Fetching gem metadata from https://rubygems.org/.......\n       Fetching version metadata from https://rubygems.org/..\n       Fetching dependency metadata from https://rubygems.org/.\n       Fetching https://github.com/stripe/stripe-ruby\n       Fetching rake 11.2.2\n       Fetching StreetAddress 1.0.6\n       Fetching i18n 0.7.0\n       Installing StreetAddress 1.0.6\n       Installing i18n 0.7.0\n       Installing rake 11.2.2\n       Fetching json 1.8.3\n       Installing json 1.8.3 with native extensions\n       Fetching minitest 5.9.0\n       Installing minitest 5.9.0\n       Fetching thread_safe 0.3.5\n       Installing thread_safe 0.3.5\n       Fetching builder 3.2.2\n       Installing builder 3.2.2\n       Fetching erubis 2.7.0\n       Fetching mini_portile2 2.1.0\n       Installing erubis 2.7.0\n       Installing mini_portile2 2.1.0\n       Fetching pkg-config 1.1.7\n       Installing pkg-config 1.1.7\n       Fetching rack 1.6.4\n       Installing rack 1.6.4\n       Fetching mime-types-data 3.2016.0521\n       Installing mime-types-data 3.2016.0521\n       Fetching arel 6.0.3\n       Installing arel 6.0.3\n       Fetching public_suffix 2.0.4\n       Fetching httpclient 2.8.2.3\n       Installing public_suffix 2.0.4\n       Installing httpclient 2.8.2.3\n       Fetching ansi 1.5.0\n       Installing ansi 1.5.0\n       Fetching execjs 2.7.0\n       Installing execjs 2.7.0\n       Fetching jmespath 1.3.1\n       Installing jmespath 1.3.1\n       Fetching aws_cf_signer 0.1.3\n       Installing aws_cf_signer 0.1.3\n       Fetching htmlentities 4.3.4\n       Installing htmlentities 4.3.4\n       Fetching rubyzip 1.0.0\n       Installing rubyzip 1.0.0\n       Fetching thor 0.19.1\n       Installing thor 0.19.1\n       Fetching sass 3.4.22\n       Installing sass 3.4.22\n       Fetching browser 2.5.1\n       Installing browser 2.5.1\n       Using bundler 1.15.2\n       Fetching unf_ext 0.0.7.2\n       Installing unf_ext 0.0.7.2 with native extensions\n       Fetching netrc 0.11.0\n       Installing netrc 0.11.0\n       Fetching coffee-script-source 1.10.0\n       Installing coffee-script-source 1.10.0\n       Fetching concurrent-ruby 1.0.2\n       Installing concurrent-ruby 1.0.2\n       Fetching dalli 2.7.6\n       Installing dalli 2.7.6\n       Fetching declarative 0.0.9\n       Fetching declarative-option 0.1.0\n       Installing declarative 0.0.9\n       Installing declarative-option 0.1.0\n       Fetching excon 0.61.0\n       Fetching multipart-post 2.0.0\n       Installing multipart-post 2.0.0\n       Installing excon 0.61.0\n       Fetching geocoder 1.5.0\n       Installing geocoder 1.5.0\n       Fetching multi_json 1.12.1\n       Installing multi_json 1.12.1\n       Fetching jwt 1.5.6\n       Fetching little-plugger 1.1.4\n       Installing jwt 1.5.6\n       Installing little-plugger 1.1.4\n       Fetching memoist 0.16.0\n       Installing memoist 0.16.0\n       Fetching os 0.9.6\n       Fetching hurley 0.2\n       Installing os 0.9.6\n       Installing hurley 0.2\n       Fetching uber 0.1.0\n       Installing uber 0.1.0\n       Fetching retriable 3.1.1\n       Installing retriable 3.1.1\n       Fetching moneta 0.8.1\n       Fetching http-form_data 1.0.3\n       Installing http-form_data 1.0.3\n       Installing moneta 0.8.1\n       Fetching http_parser.rb 0.6.0\n       Installing http_parser.rb 0.6.0 with native extensions\n       Fetching nesty 1.0.2\n       Installing nesty 1.0.2\n       Fetching model_attribute 3.2.0\n       Installing model_attribute 3.2.0\n       Fetching multi_fetch_fragments 0.0.17\n       Installing multi_fetch_fragments 0.0.17\n       Fetching mustache 1.0.3\n       Installing mustache 1.0.3\n       Fetching net-http-persistent 2.9.4\n       Installing net-http-persistent 2.9.4\n       Fetching nickel 0.1.6\n       Installing nickel 0.1.6\n       Fetching pg 0.18.4\n       Installing pg 0.18.4 with native extensions\n       Fetching phone 1.2.3\n       Installing phone 1.2.3\n       Fetching pusher-signature 0.1.8\n       Installing pusher-signature 0.1.8\n       Fetching rails_serve_static_assets 0.0.5\n       Installing rails_serve_static_assets 0.0.5\n       Fetching rails_stdout_logging 0.0.5\n       Installing rails_stdout_logging 0.0.5\n       Fetching remotipart 1.2.1\n       Installing remotipart 1.2.1\n       Fetching rumoji 0.5.0\n       Installing rumoji 0.5.0\n       Fetching tilt 2.0.5\n       Installing tilt 2.0.5\n       Fetching spellingbee 0.0.2\n       Installing spellingbee 0.0.2\n       Fetching turbolinks-source 5.0.0\n       Installing turbolinks-source 5.0.0\n       Fetching wicked_pdf 1.1.0\n       Installing wicked_pdf 1.1.0\n       Fetching wkhtmltopdf-heroku 2.12.4.0\n       Fetching tzinfo 1.2.2\n       Installing tzinfo 1.2.2\n       Fetching memoizable 0.4.2\n       Installing memoizable 0.4.2\n       Fetching nokogiri 1.6.8\n       Installing wkhtmltopdf-heroku 2.12.4.0\n       Installing nokogiri 1.6.8 with native extensions\n       Fetching rack-test 0.6.3\n       Installing rack-test 0.6.3\n       Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/ruby-2.5.3/bin/ruby -r\n       ./siteconf20190219-234-1ecip0x.rb extconf.rb\n       creating Makefile\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       make \"DESTDIR=\" clean\n\n       current directory:\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3/ext/json/ext/generator\n       make \"DESTDIR=\"\n       compiling generator.c\n       generator.c: In function \u2018generate_json\u2019:\n       generator.c:861:25: error: \u2018rb_cFixnum\u2019 undeclared (first use in this function)\n            } else if (klass == rb_cFixnum) {\n                                ^\n       generator.c:861:25: note: each undeclared identifier is reported only once for\n       each function it appears in\n       generator.c:863:25: error: \u2018rb_cBignum\u2019 undeclared (first use in this function)\n            } else if (klass == rb_cBignum) {\n                                ^\n       generator.c: At top level:\n       cc1: warning: unrecognized command line option \"-Wno-self-assign\" [enabled by\n       default]\n       cc1: warning: unrecognized command line option \"-Wno-constant-logical-operand\"\n       [enabled by default]\n       cc1: warning: unrecognized command line option \"-Wno-parentheses-equality\"\n       [enabled by default]\n       cc1: warning: unrecognized command line option \"-Wno-tautological-compare\"\n       [enabled by default]\n       make: *** [generator.o] Error 1\n\n       make failed, exit code 2\n\n       Gem files will remain installed in\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/gems/json-1.8.3\n       for inspection.\n       Results logged to\n       /tmp/build_db9f24d052d7c3b0fc0a6d8f7a7bec58/vendor/bundle/ruby/2.5.0/extensions/x86_64-linux/2.5.0-static/json-1.8.3/gem_make.out\n\n       An error occurred while installing json (1.8.3), and Bundler cannot continue.\n       Make sure that `gem install json -v '1.8.3'` succeeds before bundling.\n\n       In Gemfile:\n         postmark-rails was resolved to 0.13.0, which depends on\n           actionmailer was resolved to 4.2.2, which depends on\n             actionpack was resolved to 4.2.2, which depends on\n               actionview was resolved to 4.2.2, which depends on\n                 rails-dom-testing was resolved to 1.0.7, which depends on\n                   rails-deprecated_sanitizer was resolved to 1.0.3, which depends on\n                     activesupport was resolved to 4.2.2, which depends on\n                       json\n !\n !     Failed to install gems via Bundler.\n !\n !     Push rejected, failed to compile Ruby app.\n !     Push failed\n</code></pre>\n"}, {"tags": ["ruby", "user-input"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1550546369, "post_id": 54758003, "comment_id": 96298027, "body": "Dupe of <a href=\"https://stackoverflow.com/questions/1235863/test-if-a-string-is-basically-an-integer-in-quotes-using-ruby\" title=\"test if a string is basically an integer in quotes using ruby\">stackoverflow.com/questions/1235863/&hellip;</a>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550560422, "post_id": 54758003, "comment_id": 96301929, "body": "User input is always a string, never an integer."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550564766, "post_id": 54758003, "comment_id": 96303902, "body": "Maybe this from @sawa: <a href=\"https://stackoverflow.com/a/14900559/5239030\">stackoverflow.com/a/14900559/5239030</a> helps?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1550555521, "post_id": 54758480, "comment_id": 96300146, "body": "<code>Integer(get.chomp, exception: false)</code> since Ruby 2.6."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1550562588, "post_id": 54758480, "comment_id": 96302929, "body": "You can omit <code>chomp</code> here, but you probably want to set the base to <code>10</code>."}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550562975, "post_id": 54758480, "comment_id": 96303127, "body": "@Stefan I am not sure what exactly you mean, because by default the  base is 10"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1550563152, "post_id": 54758480, "comment_id": 96303213, "body": "<code>to_i</code> has a default base of <code>10</code> whereas <code>Integer()</code> has a default base of <code>0</code>, i.e. it attempts to determine the base from the input: <code>Integer(&#39;0100&#39;) #=&gt; 64</code>"}], "tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1550547331, "creation_date": 1550547331, "answer_id": 54758480, "question_id": 54758003, "link": "https://stackoverflow.com/questions/54758003/how-do-i-check-if-user-input-is-an-integer-in-ruby/54758480#54758480", "title": "How do I check if user input is an integer in Ruby?", "body": "<p>let check below one used <code>Integer(gets.chomp) rescue ''</code></p>\n\n<pre><code>print \"Think of a number \"\n\nwhile user_input = Integer(gets.chomp) rescue ''\n  if user_input.is_a? Integer\n    puts \"your number is #{user_input}\"\n    break\n  else\n    print \"Think of a number \"\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550557399, "post_id": 54759292, "comment_id": 96300779, "body": "The latter would eliminate integers though."}, {"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550557736, "post_id": 54759292, "comment_id": 96300895, "body": "Exactly. It checks only for floats. If one needs both, they can be <code>or</code>ed."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1550557801, "post_id": 54759292, "comment_id": 96300927, "body": "Technically <code>1</code> is somewhat float since <code>1 == 1.0 #\u21d2 true</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1550557954, "post_id": 54759292, "comment_id": 96300973, "body": "Also it won\u2019t work on absolutely legit <code>01</code> for integers and <code>1.00</code> for floats."}], "tags": [], "owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "is_accepted": false, "score": -1, "last_activity_date": 1550553522, "creation_date": 1550553522, "answer_id": 54759292, "question_id": 54758003, "link": "https://stackoverflow.com/questions/54758003/how-do-i-check-if-user-input-is-an-integer-in-ruby/54759292#54759292", "title": "How do I check if user input is an integer in Ruby?", "body": "<p>I came across a similar problem. I ended up doing this: </p>\n\n<pre><code>if user_input.strip == user_input.to_i.to_s\n  # More code here!\nend\n</code></pre>\n\n<p>Testing for float would be: </p>\n\n<pre><code>if user_input.strip == user_input.to_f.to_s\n  # More code here!\nend\n</code></pre>\n\n<p>Solved my issue. See if it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550560823, "post_id": 54760051, "comment_id": 96302128, "body": "Don&#39;t always use the positive form for matching. Use <code>!user_input.match?(&#47;\\D&#47;)</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550560864, "post_id": 54760051, "comment_id": 96302150, "body": "This is old-school way. Nowadays, you can use <code>Integer</code> method."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550561515, "post_id": 54760051, "comment_id": 96302450, "body": "@sawa yes, <code>Integer(exception: false)</code> but Ruby 2.6 is not yet everywhere. Also, <code>&#47;\\D&#47;</code> would hardly allow negatives."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1550564096, "post_id": 54760051, "comment_id": 96303623, "body": "There&#39;s also <code>\\Z</code> (uppercase) which allows you to omit <code>chomp</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1550564355, "last_edit_date": 1550564355, "creation_date": 1550557749, "answer_id": 54760051, "question_id": 54758003, "link": "https://stackoverflow.com/questions/54758003/how-do-i-check-if-user-input-is-an-integer-in-ruby/54760051#54760051", "title": "How do I check if user input is an integer in Ruby?", "body": "<p>The main issue with your code is <code>String#to_i</code> method is omnivorous.</p>\n\n<pre><code>\"0\".to_i #\u21d2 0\n\"0.1\".to_i #\u21d2 0\n\"foo\".to_i #\u21d2 0\n</code></pre>\n\n<p>That said, <code>user_input</code> in your code is <em>always integer</em>.</p>\n\n<p>What you probably want is to accept digits only (and maybe a leading minus for negatives.) The only concise way to accept a subset of characters is a regular expression.</p>\n\n<pre><code># chomp to strip out trailing carriage return\nuser_input = gets.chomp \n\nif user_input =~ /\\A-?\\d+\\z/\n  ...\n</code></pre>\n\n<p>The regular expression above means nothing save for digits with optional leading minus.</p>\n\n<hr>\n\n<p>Or, even better (credits to @Stefan)</p>\n\n<pre><code>if gets =~ /\\A-?\\d+\\Z/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 954, "user_id": 8838821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uzgur.png?s=128&g=1", "display_name": "Oli Crt", "link": "https://stackoverflow.com/users/8838821/oli-crt"}, "is_accepted": false, "score": 2, "last_activity_date": 1550569175, "creation_date": 1550569175, "answer_id": 54763016, "question_id": 54758003, "link": "https://stackoverflow.com/questions/54758003/how-do-i-check-if-user-input-is-an-integer-in-ruby/54763016#54763016", "title": "How do I check if user input is an integer in Ruby?", "body": "<p>If you only want to accept postive digits, you can use a <a href=\"https://ruby-doc.org/core-2.2.0/Range.html\" rel=\"nofollow noreferrer\">range</a>:</p>\n\n<pre><code>user_input = gets.chomp \nif ('0'..'9').cover? user_input\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 10366209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tyyVVZV0Ac4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMs8xZK2AXib6BqLNHEbFk8ru26pQ/mo/photo.jpg?sz=128", "display_name": "Taj", "link": "https://stackoverflow.com/users/10366209/taj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 1, "accepted_answer_id": 54760051, "answer_count": 4, "score": 1, "last_activity_date": 1550569175, "creation_date": 1550543168, "last_edit_date": 1550560616, "question_id": 54758003, "link": "https://stackoverflow.com/questions/54758003/how-do-i-check-if-user-input-is-an-integer-in-ruby", "title": "How do I check if user input is an integer in Ruby?", "body": "<p>I am trying to loop until user inputs an integer. When user inputs a letter, the following code should print \"Think of a number\":</p>\n\n<pre><code>print \"Think of a number \"\n\nwhile user_input = gets.to_i\n  if user_input.is_a? Integer\n    puts \"your number is #{user_input}\"\n    break\n  else\n    print \"Think of a number \"\n  end \nend \n</code></pre>\n\n<p>I succeeded with my code when user inputs an integer. However when user inputs a string, the <code>to_i</code> method returns <code>0</code>, and does not execute the else statement because it is a number.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "cloudinary"], "comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1551221773, "post_id": 54757438, "comment_id": 96559906, "body": "You got the console log output?"}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1551222100, "post_id": 54757438, "comment_id": 96560021, "body": "Hi cd-rum, I just added it now."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1551222162, "post_id": 54757438, "comment_id": 96560036, "body": "What version of Rails are you running? Try adding <code>optional: true</code> to your relations."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1551222310, "post_id": 54757438, "comment_id": 96560083, "body": "Also, <code>belongs_to :users</code> (i.e., plural and not <code>user</code>) seems like a mistake?"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551224355, "post_id": 54895605, "comment_id": 96560716, "body": "Hi cd-rum. Thanks for the reply. It&#39;s bizarre, I&#39;ve done the following:  Product model  <code>belongs_to :user</code>   Regarding the optional: true, I realised I forgot to add in the foreign_key for the Product model (as I was making sure to remove certain code, and missed this)  So it would be:  <code>belongs_to :user, :foreign_key =&gt; &#39;user_id&#39;</code>  If I add in the <code>optional: true</code>, it doesn&#39;t work, as it states its an &quot;unknown key&quot;  I could add  the <code>optional: true</code> to products, though."}], "tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 0, "last_activity_date": 1551222397, "creation_date": 1551222397, "answer_id": 54895605, "question_id": 54757438, "link": "https://stackoverflow.com/questions/54757438/added-a-image-upload-progress-bar-paperclip-javascript-but-images-themselves/54895605#54895605", "title": "Added a image upload progress bar (Paperclip, Javascript), but images themselves are not being saved. How can I fix this?", "body": "<p>Rails 5+ makes all <code>belongs_to</code> relations <a href=\"https://blog.bigbinary.com/2016/02/15/rails-5-makes-belong-to-association-required-by-default.html\" rel=\"nofollow noreferrer\">required by default</a>. Solve your problem either by setting <code>:user</code> and <code>:product</code> in your form or controller or model, or make both <code>optional: true</code>.</p>\n\n<p>Also you can't have a <code>belongs_to :users</code> (i.e., belongs-to-many isn't a thing).</p>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551694025, "post_id": 54969215, "comment_id": 96719741, "body": "Hi Kache, thank you for the reply.  I realised  that I left out some code for the Products controller (as I tried to keep it as concise as possible), but the redirect to products/new is if the Products create method fails.  Regarding your question, I&#39;ve looked and there isn&#39;t any before_action or around_action in the controller.  If you require more information, please tell me."}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551694240, "post_id": 54969215, "comment_id": 96719880, "body": "I apologise, I skipped over your 1st question. I&#39;m actually a junior RoRs dev, so I haven&#39;t used logger/debugger before. I&#39;ll try and see what I can do"}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551694678, "post_id": 54969215, "comment_id": 96720122, "body": "Hi Kache, so I just did debugger now, and I&#39;ve updated the question (since it&#39;s a little too long to psot as a comment)"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551762417, "post_id": 54969215, "comment_id": 96747865, "body": "Hi @JamesWu, I made an update a while ago, can you check again? If it was helpful, it&#39;d be great to get my answer accepted."}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 0, "creation_date": 1551782116, "post_id": 54969215, "comment_id": 96756912, "body": "Hi Kache, apologies as I&#39;ve just done it now. Annoyingly, I&#39;ve going to put this on the back burner now as it&#39;s been quite a frustrating experience getting this to work. I&#39;ve awarded you the points, however."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1551762324, "last_edit_date": 1551762324, "creation_date": 1551618977, "answer_id": 54969215, "question_id": 54757438, "link": "https://stackoverflow.com/questions/54757438/added-a-image-upload-progress-bar-paperclip-javascript-but-images-themselves/54969215#54969215", "title": "Added a image upload progress bar (Paperclip, Javascript), but images themselves are not being saved. How can I fix this?", "body": "<p>Going by the log, execution never succeeds at the <code>if @product.save</code> line of <code>ProductsController#create</code>.</p>\n\n<p>Using the logger or a debugger, can you tell if execution enters the action at all?</p>\n\n<p>Is there any <code>before_action</code> or <code>around_action</code> in that controller or any superclass (including mixins) that redirects to <code>/products/new</code>?</p>\n\n<hr>\n\n<p>Ah, so the <code>@product.save</code> is failing. Change it to <code>@product.save!</code>, which will raise an exception instead of returning \"success false\" and take a look at what the exception raised is.</p>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551762324, "creation_date": 1550537697, "last_edit_date": 1551694848, "question_id": 54757438, "link": "https://stackoverflow.com/questions/54757438/added-a-image-upload-progress-bar-paperclip-javascript-but-images-themselves", "title": "Added a image upload progress bar (Paperclip, Javascript), but images themselves are not being saved. How can I fix this?", "body": "<p><strong>UPDATE FIVE</strong></p>\n\n<p>I've just did a debugger and this is the log (arrow appears at line 61), so it looks like the product item would just fail.</p>\n\n<pre><code>   47:  def create\n   48:    @product = Product.new(product_params)\n   49:\n   50:    respond_to do |format|\n   51:      if @product.save\n   52:\n   53:        if params[:images]\n   54:          params[:images].each { |image|\n   55:            @product.pictures.create(image: image)\n   56:          }\n   57:        end\n   58:        flash[:notice] = \"The product was successfully added.\"\n   59:        redirect_to show_product_path and return\n   60:      else\n=&gt; 61:        flash[:notice] = \"The product was not able to be saved.\"\n   62:        redirect_to new_product_path and return\n   63:      end\n   64:    end\n   65:  end\n</code></pre>\n\n<p><strong>UPDATE FOUR</strong></p>\n\n<p>My apologies, as the previous update, I left something out in the Product controller, just the redirect command.</p>\n\n<pre><code>  def create\n    @product = Product.new(product_params)\n\n    respond_to do |format|\n      if @product.save\n\n        if params[:images]\n          params[:images].each { |image|\n            @product.pictures.create(image: image)\n          }\n        end\n        flash[:notice] = \"The product was successfully added.\"\n        redirect_to show_product_path and return\n      else\n        flash[:notice] = \"The product was not able to be saved.\"\n        redirect_to new_product_path and return\n      end\n    end\n  end\n</code></pre>\n\n<p><strong>UPDATE THREE</strong></p>\n\n<p>I just realised since I had removed some code, I may have left out something essential. I do have a User model, which is:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :products, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>Essentially, the user creates a product, the product itself has images tied to it through the pictures model. I hope that explains things a bit more clearly.</p>\n\n<p><strong>UPDATE TWO</strong></p>\n\n<p>I am still receiving the same error as above, but I've updated the models as follows:</p>\n\n<p>(Changed users to user, forget to add in the foreign_key, optional: true does not work, error is this is an unknown key)</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  belongs_to :user, :foreign_key =&gt; 'user_id', optional: true\n  has_many :pictures, :dependent =&gt; :destroy\nend\n\n\nclass Picture &lt; ActiveRecord::Base\n  belongs_to :product, optional: true\n  has_attached_file :image,\n    :path =&gt; \":rails_root/public/images/:id/:filename\",\n    :url  =&gt; \"/images/:id/:filename\"\n\n  do_not_validate_attachment_file_type :image\nend\n</code></pre>\n\n<p><strong>UPDATE ONE</strong></p>\n\n<p>This is the log for when I am uploading the images:</p>\n\n<pre><code>Started POST \"/products\" for [IP ADDRESS] at [DATE AND TIME]\nProcessing by ProductsController#create as */*\n  Parameters: {\"file\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007f621971b808 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20190227-181-kldesh.JPG&gt;,     @original_filename=\"book1.JPG\", @content_type=\"image/jpeg\",     @headers=\"Content-Disposition: form-data; name=\\\"file\\\";     filename=\\\"book1.JPG\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;, \"product\"=&gt;    {\"name\"=&gt;\"test\"}}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 21]]\n   (0.2ms)  BEGIN\n   (0.2ms)  ROLLBACK\nRedirected to http://localhost:3000/products/new\nCompleted 200 OK in 7ms (ActiveRecord: 0.7ms)\n</code></pre>\n\n<p>Essentially, the images can't be saved and it's redirecting back to the products new page. I can't figure out why this is the case.</p>\n\n<p><strong>ORIGINAL QUESTION</strong></p>\n\n<p>So I've got a basic image upload system using Paperclip (which allows for multiple image uploads and they are associated with each product created). My issue is now trying to add in an image upload progress bar, and after searching around, it sounds like Jquery is the best for this. </p>\n\n<p>I've been following this: <a href=\"https://github.com/hayageek/jquery-upload-file\" rel=\"nofollow noreferrer\">https://github.com/hayageek/jquery-upload-file</a> and I just can't get it to work.</p>\n\n<p>So I have \"Products\", which itself is linked to \"Pictures\". Products has a one to many relationship with Pictures.</p>\n\n<p>Schema:</p>\n\n<pre><code>  create_table \"products\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"description\"\n    t.integer  \"image\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.integer  \"user_id\"\n  end\n\n  create_table \"pictures\", force: :cascade do |t|\n    t.string   \"description\"\n    t.string   \"image\"\n    t.integer  \"product_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"product_token\"\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n  end\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  belongs_to :users\n  has_many :pictures, :dependent =&gt; :destroy\nend\n\n\nclass Picture &lt; ActiveRecord::Base\n  belongs_to :product\n  has_attached_file :image,\n    :path =&gt; \":rails_root/public/images/:id/:filename\",\n    :url  =&gt; \"/images/:id/:filename\"\n\n  do_not_validate_attachment_file_type :image\nend\n</code></pre>\n\n<p>Controller (Products):</p>\n\n<p>(I've intentionally left out some stuff, but I figured the main thing would be the create action)</p>\n\n<pre><code>  def create\n    @product = Product.new(product_params)\n\n    respond_to do |format|\n      if @product.save\n\n        if params[:images]\n          params[:images].each { |image|\n            @product.pictures.create(image: image)\n          }\n        end\n        flash[:notice] = \"The product was successfully added.\"\n        format.html { redirect_to @product, notice: 'Product was successfully created.' }\n        format.json { render json: @product, status: :created, location: @product }\n      else\n        flash[:notice] = \"The product was not able to be saved.\"\n        format.html { render action: \"new\" }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>View (for products new) (Again, I've removed code just to show the most relevant stuff):</p>\n\n<pre><code>&lt;%= form_for @product, :html =&gt; { :class =&gt; 'form-horizontal', multipart: true } do |f| %&gt;\n  &lt;div class=\"control-group\"&gt;\n    &lt;%= f.label :name, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= f.text_field :name, :class =&gt; 'text_field' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"control-group\"&gt;\n    &lt;%= f.label :description, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= f.text_field :description, :class =&gt; 'text_field' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"control-group\"&gt;\n    &lt;%= f.label :pictures, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= file_field_tag \"images[]\", type: :file, multiple: true %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-actions\"&gt;\n    &lt;%= f.submit nil, :class =&gt; 'btn btn-primary' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Show (for products):</p>\n\n<pre><code>        &lt;td&gt; Name &lt;/td&gt;\n        &lt;td&gt; &lt;%= @product.name %&gt; &lt;/td&gt;\n    &lt;div class = \"images_styling\"&gt; Photos &lt;/div&gt;\n    &lt;% @products.pictures.each do |picture| %&gt;\n    &lt;%= image_tag picture.images.url(:medium) %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Now this is what I've attempted to do:</p>\n\n<p>(Added a fileUpload id, and a save id in submit)</p>\n\n<p>View for new products form</p>\n\n<pre><code>  &lt;div class=\"control-group\"&gt;\n    &lt;%= f.label :pictures, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\" id=\"fileUpload\" &gt;\n      &lt;%= file_field_tag \"images[]\", type: :file, multiple: true %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div id=\"save\" class=\"form-actions\"&gt;\n    &lt;%= f.submit nil, :class =&gt; 'btn btn-primary' %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>And this is the script I obtained online (this is present in the view for new products form):</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  $(document).ready(function () {\n\n      var fileUpload = $(\"#fileUpload\").uploadFile({\n      url: \"/products\",\n      multiple: true,\n      autoSubmit: false,\n      showCancel: false,\n      showAbort: false,\n      dragDrop: true,\n      maxFileCount: 4,\n      showPreview: true,\n      showProgress: true,\n      showStatusAfterSuccess: true,\n      dynamicFormData: function () {\n        var name = $('#product_name').val();\n        var data = {\"product[name]\": name};\n        return data;\n      }\n    });\n\n    $(\"#save\").click(function (e) {\n      $(\"#save\").prop(\"disabled\", true);\n      fileUpload.startUpload();\n      e.preventDefault();\n    });\n\n\n  });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>But it doesnt work. Rather, it does a \"begins\" then \"rollbacks\" when I click the submit button. Interestingly, the button does show an upload progress bar for each image. </p>\n\n<p>However, the images, when I look at the \"show\" for the product, is not there. I guess the images are not saving to the product, due to the \"rollback\". I've looked at the log and it seems there isn't anything substantial in it.</p>\n\n<p>Based on this, what could I do to get this to work? Is there an easier way to implement what I want to do?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550537046, "post_id": 54757332, "comment_id": 96296155, "body": "I think it would work if you moved the code out of the <code>it &quot;get_list&quot;</code> block and into the <code>describe</code> block. Basically each <code>it</code> block has its own context, and it&#39;s not typical to share their results with other <code>it</code> examples."}, {"owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "edited": false, "score": 0, "creation_date": 1550571824, "post_id": 54757332, "comment_id": 96308157, "body": "Try to reduce example. If you think passing arguments doesn\u2019t work, write a simple example that only pass arguments. It looks like you\u2019re using it right, but passing empty strings"}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 6769558, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6c3dc2b239e077038e9d23b590da5854?s=128&d=identicon&r=PG&f=1", "display_name": "oneWorkingHeadphone", "link": "https://stackoverflow.com/users/6769558/oneworkingheadphone"}, "is_accepted": false, "score": 0, "last_activity_date": 1555936098, "creation_date": 1555936098, "answer_id": 55794420, "question_id": 54757332, "link": "https://stackoverflow.com/questions/54757332/passing-arguments-in-rspec-shared-example/55794420#55794420", "title": "passing arguments in rspec shared example", "body": "<p>To pass an argument to a shared example, wrap the variable inside the example block (without listing them as you have as arguments in the example):</p>\n\n<pre><code>RSpec.shared_examples \"coupons_shared\" do\n  ...code that includes your variables coupon1, coupon2 etc..\nend\n</code></pre>\n\n<pre><code>include_examples \"coupons_shared\" do\n  coupon1 = coupons[0]\n  ...and so on (also works with let)...\n  let(:coupon1) { coupons[0] }\nend\n</code></pre>\n\n<p>I would also strongly suggest that you stub out the HTTP requests so they aren't hitting an actual server every time you run your tests and consider using FactoryBot (or fixtures if that's your preference) to clean up a lot of the variable assignments.</p>\n"}], "owner": {"reputation": 11, "user_id": 4077597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32e5c009f599135036599e7da801f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/4077597/lucky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555936098, "creation_date": 1550536702, "question_id": 54757332, "link": "https://stackoverflow.com/questions/54757332/passing-arguments-in-rspec-shared-example", "title": "passing arguments in rspec shared example", "body": "<p>I am a bit new with Rspec. </p>\n\n<p>Here is my problem</p>\n\n<p>I have an example which could be shared</p>\n\n<h2>shared example</h2>\n\n<pre><code>RSpec.shared_examples \"coupons_shared\" do |arg1,email,coupon1,coupon2|\n  it \"present_coupons\" do\n    post_rest_url = \"https://blahblahblah=\" + \"#{arg1}\" + \"&amp;email=\" + \"#{email}\"\n    json_request = &lt;&lt;END_OF_MESSAGE\n    [\n\"#{coupon1}\",\n\"#{coupon2}\"\n    ]\nEND_OF_MESSAGE\n    header = {:accept =&gt; \"application/json\",:content_type =&gt; \"application/json\"}\n    resp = RestClient.post(post_rest_url, json_request, header)\n    json_obj = JSON.parse(resp)\n    expect(json_obj[0][\"ccode\"]).to include(\"#{coupon1}\")\n    expect(json_obj[0][\"ccode\"]).to include(\"#{coupon2}\")\n  end\nend\n\n</code></pre>\n\n<p>shared example file location is in \\spec\\support\\shared_examples</p>\n\n<p>In the actual spec file I have an example which gets the coupon and then need to present using the shared example</p>\n\n<pre><code>describe \"enrol_cust\" do\n  cust_id = '1'\n  coupons = []\n  header_basic_auth = {:accept =&gt; \"application/json\",:content_type =&gt; \"application/json\"}\n  random_no = (rand(999) + 10)\n  random_no = random_no.to_s\n  email = \"johndoe\" + \"#{random_no}\" + \"@gmail.com\"\n  st = 1111\n  st = st.to_i\n  before(:each) do\n    @dob = 20.years.ago(Date.today).strftime(\"%m-%d-%Y\")\n  end\n\n  it \"enrol_cust\" do\n    post_rest_url = \"https://blahblah?st=\" + \"#{st}\"\n    json_request = &lt;&lt;END_OF_MESSAGE\n{\n\"email\": \"#{email}\",\n\"first_name\": \"John\",\n\"last_name\": \"Doe\",\n\"date_of_birth\": \"#{@dob}\",\n}\nEND_OF_MESSAGE\n    header = header_basic_auth\n    resp = RestClient.post(post_rest_url, json_request, header)\n    json_obj = JSON.parse(resp)\n    cust_id = json_obj[\"cid\"]\n  end\n# above example gets customer id\n\nit \"get_list\" do\n    get_rest_url = \"https://blahblah=\" + \"#{cust_id}\" + \"&amp;st=\" + \"#{st}\"\n    header = header_basic_auth\n    resp = RestClient.get(get_rest_url, header)\n    json_obj = JSON.parse(resp)\n    coupons = json_obj.collect {|x| x[\"cccode\"]}\nend\n# above example gets coupons\n# I have tried printing out the coupons and I can see the correct coupons in this example\n\ninclude_examples \"coupons_shared\" ,\"#{st}\",\"#{email}\",\"#{coupons[0]}\",\"#{coupons[1]}\"\n\n</code></pre>\n\n<p>When I try to pass the parameters, st and email is passed correctly. However, coupons[0] and coupons[1] is always passed as \"\"</p>\n\n<p>I am not sure what am I missing here.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1550529404, "post_id": 54756372, "comment_id": 96294233, "body": "This will do it <code>[*&#39;a&#39;..&#39;z&#39;]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1550529609, "post_id": 54756372, "comment_id": 96294295, "body": "...which is the same as <code>(&#39;a&#39;..&#39;z&#39;).to_a</code>. There&#39;s really nothing more to be said!"}, {"owner": {"reputation": 33, "user_id": 10949024, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yH2B2RBGQN8/AAAAAAAAAAI/AAAAAAAAEs0/pPissxMJgkY/photo.jpg?sz=128", "display_name": "Adam Ladell", "link": "https://stackoverflow.com/users/10949024/adam-ladell"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1550529612, "post_id": 54756372, "comment_id": 96294296, "body": "@SagarPandya Thanks!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550533482, "post_id": 54756372, "comment_id": 96295396, "body": "@CarySwoveland: You <i>could</i> say <code>[*?a..?z]</code>... :P"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1550535226, "post_id": 54756372, "comment_id": 96295797, "body": "@Amadan, or <code>&quot;the quick brown dog jumps over the lazy fox&quot;.delete(&#39; &#39;).each_char.uniq.sort</code>. That&#39;s the version of the expression my dog prefers."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550554512, "post_id": 54756372, "comment_id": 96299816, "body": "@CarySwoveland hahahaha, I did not get until I run it on the irb, hilarious!"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1550529987, "creation_date": 1550529987, "answer_id": 54756485, "question_id": 54756372, "link": "https://stackoverflow.com/questions/54756372/is-there-a-function-i-can-create-to-push-the-entire-alphabet-to-an-array/54756485#54756485", "title": "Is there a function I can create to push the entire alphabet to an array?", "body": "<p>Yes, you can use <code>..</code> to create a <a href=\"https://ruby-doc.org/core/Range.html\" rel=\"nofollow noreferrer\">Range</a>.</p>\n\n<pre><code>letters = ('a'..'z')\n</code></pre>\n\n<p>These are <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> so you can iterate over the range without needing to turn it into an Array. For large ranges this can save memory.</p>\n\n<pre><code>(\"a\"..\"z\").each { |letter| p letter }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10949024, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yH2B2RBGQN8/AAAAAAAAAAI/AAAAAAAAEs0/pPissxMJgkY/photo.jpg?sz=128", "display_name": "Adam Ladell", "link": "https://stackoverflow.com/users/10949024/adam-ladell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550564380, "creation_date": 1550529294, "last_edit_date": 1550564380, "question_id": 54756372, "link": "https://stackoverflow.com/questions/54756372/is-there-a-function-i-can-create-to-push-the-entire-alphabet-to-an-array", "title": "Is there a function I can create to push the entire alphabet to an array?", "body": "<p>I need to create an array, and set each of its index to an individual letter of the alphabet. I could do it in Javascript using CharCodes, but I have not found anything for Ruby that does something similar. I don't feel like typing <code>[\"a\", \"b\"...\"z\"]</code>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550527574, "post_id": 54755988, "comment_id": 96293632, "body": "1) attr_accessor defines a getter(<code>def title</code>) and a setter(<code>def title=</code>) but in this case the setter is a custom implementation so the <code>attr_reader</code> is correct (just a getter). 2) the initialize method of <code>Book</code> essentially is <code>def initialize; end</code> it accepts no arguments and provides no functionality but it does exist via inheritance from <code>BasicObject</code>. You are not required to accept any arguments or set any attributes in the <code>initialize</code> method. 3) This is converting the given <code>new_title</code> to what is commonly referred to as &quot;title case&quot; and assigning it to the instance variable <code>@title</code>"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550529131, "post_id": 54755988, "comment_id": 96294145, "body": "What do you mean when you say &quot; the setter is a custom implementation&quot;? I still don&#39;t understand the meaning of this <code>title=(new_title)</code>..you say it is assigning new_title to the instance variable @title..ok, so what in this line? <code>@title = words.join(&quot; &quot;)</code>..is it now doing the same thing again returning the instance variable?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550561074, "post_id": 54755988, "comment_id": 96302242, "body": "If you don&#39;t understand the question, then how can we understand it, let alone answer it?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550537657, "post_id": 54757192, "comment_id": 96296255, "body": "Excepting assignment like methods (methods ending in <code>=</code>) can only accept a single argument and will always return that object regardless."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1550537995, "post_id": 54757192, "comment_id": 96296327, "body": "@engineersmnky: Almost always (you can still send more arguments and get a different output if you use <code>Object#send</code>). Very good point though."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1550588714, "post_id": 54757192, "comment_id": 96318510, "body": "@Amadan &quot;The reader is the same default reader. But the solution wants to make a custom writer, so we&#39;ll define it ourselves. Thus, only the reader needs to be autogenerated: attr_reader :title.&quot;  Ok so we don&#39;t write attr_writer in the solution code gave by the exercise because we are defining a custom one, right? Different from this ``` def title=(value)   @title = value end ``` and we only write attr_reader :title so then we can call @book.title when we riquiring it the test file, right?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1550589293, "post_id": 54757192, "comment_id": 96318883, "body": "Yes, that is correct."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1550589620, "post_id": 54757192, "comment_id": 96319091, "body": "@Amadan Learning coding sometimes makes even difficult explain what you don&#39;t understand, but you clarified my doubts. Thank you!"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1550535265, "creation_date": 1550535265, "answer_id": 54757192, "question_id": 54755988, "link": "https://stackoverflow.com/questions/54755988/stuck-with-this-ruby-logic/54757192#54757192", "title": "Stuck with this Ruby logic", "body": "<p>First of all, you need to understand the idea about accessors. Many languages have direct access to instance variables. Ruby does not; it thinks that everything from outside the class should go through methods alone. Thus, in order to read or write <code>@title</code> from outside, you use accessors.</p>\n\n<p><code>attr_accessor</code> is a convenience method that defines two methods: the attribute reader, and the attribute writer. When you say <code>attr_accessor :title</code>, it is equivalent to</p>\n\n<pre><code>def title()\n  @title\nend\n\ndef title=(value)\n  @title = value\nend\n</code></pre>\n\n<p>where <code>title</code> and <code>title=</code> are method names, and <code>value</code> is a parameter to the <code>title=</code> method. Having done so, you can write</p>\n\n<pre><code>book.title=(\"New title\")\nputs book.title()\n</code></pre>\n\n<p>to call the setter, and then getter. Ruby gives us a bit of a convenience here, as these are the equivalent syntactic sugar:</p>\n\n<pre><code>book.title = \"New title\"\nputs book.title\n</code></pre>\n\n<p>The reason why we want everything to go through methods is, we can customise methods. If we need to make sure we are permitted to read, or if we want to have side effects of setting, we can just switch out an accessor method. But if we do that, we don't need the autogenerated accessor - we'll write our own.</p>\n\n<blockquote>\n  <p>First of all i would have wrote attr_accessor :title because at the end we write the title, but probably it would have been wrong.</p>\n</blockquote>\n\n<p>The reader is the same default reader. But the solution wants to make a custom writer, so we'll define it ourselves. Thus, only the reader needs to be autogenerated: <code>attr_reader :title</code>.</p>\n\n<blockquote>\n  <p>Second of all, what i don't fully understand is the fact that i believed that every time we call the new method on a class, we have to instantiate it with the method Initialize and assigning the attributes.</p>\n</blockquote>\n\n<p>There is an implicit empty <code>initialize</code> that gets inherited to every class that doesn't override it. It takes no parameters, and does nothing, pretty much like this:</p>\n\n<pre><code>def initialize()\nend\n</code></pre>\n\n<p>If you don't write your own <code>initialize</code> method, then that one is being used. Since <code>Book</code> as described by your spec does not take arguments to <code>new</code>, and all interaction with the title goes through the attribute accessors, you don't need anything more than the default empty <code>initialize</code>.</p>\n\n<blockquote>\n  <p>Third thing i don't understand is this line of code def title=(new_title). What are we exactly doing here? Are we doing it otherwise the following code wouldn't work?</p>\n</blockquote>\n\n<p>As explained above, <code>def title=(new_title)</code> is exactly the same syntax as <code>def factorial(n)</code>, just with a weird method name. Ruby lets methods end in many unconventional ways: with a question mark to signify boolean result like <code>equal?</code>, with an exclamation mark to signify dangerous operation like <code>sort!</code>, or with an equal sign to allow for the alternate call syntax masquerading as assignment, as described above.</p>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1550586477, "accepted_answer_id": 54757192, "answer_count": 1, "score": -2, "last_activity_date": 1550590167, "creation_date": 1550527105, "last_edit_date": 1550590167, "question_id": 54755988, "link": "https://stackoverflow.com/questions/54755988/stuck-with-this-ruby-logic", "closed_reason": "Needs details or clarity", "title": "Stuck with this Ruby logic", "body": "<p>I had this exercise to solve. From the test i thought i had to initialize the class, but looking at the solution i was thinking the wrong way. Now, i understand pretty much all the code in the solution, but what i don't understand is the logic behind the getter. First of all i would have wrote attr_accessor :title because at the end we write the title, but probably it would have been wrong. Second, what i don't understand is the fact that i believed that every time we call the new method on a class, we have to instantiate it with the method Initialize and assigning the attributes. Third thing i don't understand is this line of code def title=(new_title). What are we exactly doing here? Are we doing it otherwise the following code wouldn't work? Thank you.</p>\n\n<pre><code> @book.title = \"inferno\"\n</code></pre>\n\n<p>This is the rake file:</p>\n\n<pre><code># # Book Titles\n#\n# # Topics\n#\n# * classes and objects\n# * instance variables\n# * setter methods\n# * strings\n#\n# # Notes\n#\n# Book Titles in English obey some strange capitalization rules. For example, \"and\" is lowercase in \"War and Peace\". This test attempts to make sense of some of those rules.\n#\n\nrequire 'book'\n\ndescribe Book do\n\n  before do\n    @book = Book.new\n  end\n\n  describe 'title' do\n    it 'should capitalize the first letter' do\n      @book.title = \"inferno\"\n      expect(@book.title).to eq(\"Inferno\")\n    end\n\n    it 'should capitalize every word' do\n      @book.title = \"stuart little\"\n      expect(@book.title).to eq(\"Stuart Little\")\n    end\n\n    describe 'should capitalize every word except...' do\n      describe 'articles' do\n        specify 'the' do\n          @book.title = \"alexander the great\"\n          expect(@book.title).to eq(\"Alexander the Great\")\n        end\n\n        specify 'a' do\n          @book.title = \"to kill a mockingbird\"\n          expect(@book.title).to eq(\"To Kill a Mockingbird\")\n        end\n\n        specify 'an' do\n          @book.title = \"to eat an apple a day\"\n          expect(@book.title).to eq(\"To Eat an Apple a Day\")\n        end\n      end\n\n      specify 'conjunctions' do\n        @book.title = \"war and peace\"\n        expect(@book.title).to eq(\"War and Peace\")\n      end\n\n      specify 'prepositions' do\n        @book.title = \"love in the time of cholera\"\n        expect(@book.title).to eq(\"Love in the Time of Cholera\")\n      end\n    end\n\n    describe 'should always capitalize...' do\n      specify 'I' do\n        @book.title = \"what i wish i knew when i was 20\"\n        expect(@book.title).to eq(\"What I Wish I Knew When I Was 20\")\n      end\n\n      specify 'the first word' do\n        @book.title = \"the man in the iron mask\"\n        expect(@book.title).to eq(\"The Man in the Iron Mask\")\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and the solution they give:</p>\n\n<pre><code>class Book\n  attr_reader :title\n\n  def title=(new_title)\n    words = new_title.split(\" \")\n    words = [words[0].capitalize] +\n      words[1..-1].map do |word|\n        little_words = %w{a an and the in of}\n        if little_words.include? word\n          word\n        else\n          word.capitalize\n        end\n      end\n    @title = words.join(\" \")\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "git", "sublimetext", "gitignore", "tmp"], "comments": [{"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1550602594, "post_id": 54755672, "comment_id": 96326379, "body": "Your question isn&#39;t entirely clear; you&#39;re saying you want a temp file to appear but that you modified the setting for excluding folders. If the file you want to show in a folder that&#39;s being excluded from the side bar?"}], "owner": {"reputation": 375, "user_id": 10409976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91acc14383d05b02f61e8deb0fde4c56?s=128&d=identicon&r=PG&f=1", "display_name": "b.herring", "link": "https://stackoverflow.com/users/10409976/b-herring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550525502, "creation_date": 1550525502, "question_id": 54755672, "link": "https://stackoverflow.com/questions/54755672/show-files-that-are-git-ignored-in-sublime-sidebar", "title": "Show files that are git ignored in sublime sidebar", "body": "<p>I'm trying to get the tmp file that is git ignored, to display in my sublime sidebar so that i can look at the contents. I have tried everything that I found, including going into preferences => settings and deleting 'tmp' from the 'folder_exclude_patterns' in the user settings but it is still not appearing. I still want the file to be git ignored though.\nThanks.</p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1550521468, "post_id": 54754765, "comment_id": 96291225, "body": "yea makes sense, what code have you written?"}, {"owner": {"reputation": 7, "user_id": 11080981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3ddbdf0acf348eda8f67faf5ac7de?s=128&d=identicon&r=PG&f=1", "display_name": "Fauxlosophy", "link": "https://stackoverflow.com/users/11080981/fauxlosophy"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1550523499, "post_id": 54754765, "comment_id": 96292107, "body": "I am very new to writing code. I have dabbled with java and ruby. This is part of a project my friend and I are working on. He has much more experience. As far as I know he has coded in python, ruby, and some java script."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11080981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3ddbdf0acf348eda8f67faf5ac7de?s=128&d=identicon&r=PG&f=1", "display_name": "Fauxlosophy", "link": "https://stackoverflow.com/users/11080981/fauxlosophy"}, "edited": false, "score": 0, "creation_date": 1550523543, "post_id": 54754852, "comment_id": 96292117, "body": "Thank you!  I appreciate the time given. We will be working on this this evening."}], "tags": [], "owner": {"reputation": 2207, "user_id": 8357864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fe690b4dfe322a7c5b9d8ba23b3bd05?s=128&d=identicon&r=PG&f=1", "display_name": "LetEpsilonBeLessThanZero", "link": "https://stackoverflow.com/users/8357864/letepsilonbelessthanzero"}, "is_accepted": true, "score": 1, "last_activity_date": 1550524676, "last_edit_date": 1550524676, "creation_date": 1550521536, "answer_id": 54754852, "question_id": 54754765, "link": "https://stackoverflow.com/questions/54754765/i-need-to-reformat-text-within-a-document/54754852#54754852", "title": "I need to reformat text within a document", "body": "<p>Could you achieve what you want with a function that takes in the original string and the variable and then outputs the \"reformatted\" string?</p>\n\n<p>You can you use the <code>string.split()</code> function in python to turn a string into a list of the pieces of the string. By default, it looks for space characters and breaks up the string from those. E.g.:</p>\n\n<pre><code>'a b c'.split()\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>['a', 'b', 'c']\n</code></pre>\n\n<p>I suspect the split() function would be the key to the solution you're searching for.</p>\n\n<p>Here's some code that may achieve what you want. Maybe you could use a dictionary object to turn identifiers into their long descriptions? How practical this is depends on how many identifiers you have, how often they might change, etc.</p>\n\n<pre><code>#dictionary of identifiers and their long descriptions\nidLkUp = {'AKA': 'Alsoknownas',\n          'FYI': 'Foryourinformation',\n          }\n\ninputStr = '5 Robert [FYI]'\nvariable = '1'\n\ndef reformatInputStr(inputStr, variable):\n    # Expected input pattern: 'Number Name [Identifier]'\n    #Returned output pattern: 'Name, Identifier, Variable, Number'\n    splitStr = inputStr.split()\n    splitStr[2] = splitStr[2].replace(']','').replace('[','')     #removes brackets from the Identifier\n    strElements = {'Name': splitStr[1],\n                   'Identifier': idLkUp[splitStr[2]],             #uses the idLkUp dictionary to get the long description of identifier\n                   'Variable': variable,\n                   'Number': splitStr[0],\n                   }\n\n    return '{Name}, {Identifier}, {Variable}, {Number}'.format(**strElements)\n\noutputStr = reformatInputStr(inputStr, variable)\nprint(outputStr)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Robert, Foryourinformation, 1, 5\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11080981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3ddbdf0acf348eda8f67faf5ac7de?s=128&d=identicon&r=PG&f=1", "display_name": "Fauxlosophy", "link": "https://stackoverflow.com/users/11080981/fauxlosophy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54754852, "answer_count": 1, "score": -4, "last_activity_date": 1550524676, "creation_date": 1550521144, "question_id": 54754765, "link": "https://stackoverflow.com/questions/54754765/i-need-to-reformat-text-within-a-document", "title": "I need to reformat text within a document", "body": "<p>Currently the text is formatted like this :</p>\n\n<p>\"Number Name [identifier]\"</p>\n\n<p>There are spaces as indicated between each and the brackets exist around the identifier, the quote marks are just for example.  </p>\n\n<p>I am trying to reformat it to look like </p>\n\n<p>\"Name, identifier, variable, number\"</p>\n\n<p>In this example the commas do need to be in place (no quote marks) and the variable is something I would just need to set to either a \"1 or 2\" throughout the entire document. </p>\n\n<p>The name and number will be directly pulled from (lets say) text file A and reformatted and saved into file B.  The identifier actually has some additional formatting that would need to take place.</p>\n\n<p>The identifier comes in a 3 letter format (IE 'AKA').  Which correlates to something specific which I can define within some code (IE 'AKA' = 'Alsoknownas').</p>\n\n<p>So in total I believe I am trying to </p>\n\n<p>1.reformat the name and quantity directly from document a and saved in a new document (b)\n2.manually define a variable before the script / code executes on 'a' then saves to new document 'b'.\n3.Recognize the 3 digit identifier code in each line of document A, change it to something new in document b.  So i'll need some sort of data base to have the script pull from (ie, read AKA on the line in document 'a' and look it up in a database or something then exchange AKA for Alsoknownas and input that into document b before saving).</p>\n\n<p>IF this all makes sense I would love anyones input on what your approach would be for this.  The identifiers are always going to be 3 alpha numeric characters, and they will always correlate to a alpha numeric string.  so AKA always = Alsoknownas, FYI always = Foryourinformation etc... etc..</p>\n\n<p>Thanks for any input!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos-mojave"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11081006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kNJ3nbfaGlY/AAAAAAAAAAI/AAAAAAAAk5w/ihvXX96qCa0/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11081006/pierre"}, "edited": false, "score": 0, "creation_date": 1550522265, "post_id": 54754756, "comment_id": 96291585, "body": "Thanks for your help Dimitrius! I installed RVM with Ruby and Rails, but I am not sure how to use it in order to execute this:   rails new MySite"}, {"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "reply_to_user": {"reputation": 1, "user_id": 11081006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kNJ3nbfaGlY/AAAAAAAAAAI/AAAAAAAAk5w/ihvXX96qCa0/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11081006/pierre"}, "edited": false, "score": 0, "creation_date": 1550522453, "post_id": 54754756, "comment_id": 96291680, "body": "Nice!! RVM its a really good manager. For your question, tell me the output if you execute one rvm command like <code>rvm list</code> or <code>rvm --version</code>"}, {"owner": {"reputation": 1, "user_id": 11081006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kNJ3nbfaGlY/AAAAAAAAAAI/AAAAAAAAk5w/ihvXX96qCa0/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11081006/pierre"}, "edited": false, "score": 0, "creation_date": 1550524045, "post_id": 54754756, "comment_id": 96292301, "body": "It&#39;s this: * jruby-9.2.5.0 [ x86_64 ] =&gt; ruby-2.3.7 [ x86_64 ]"}, {"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "reply_to_user": {"reputation": 1, "user_id": 11081006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kNJ3nbfaGlY/AAAAAAAAAAI/AAAAAAAAk5w/ihvXX96qCa0/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11081006/pierre"}, "edited": false, "score": 0, "creation_date": 1550524103, "post_id": 54754756, "comment_id": 96292318, "body": "Just install a <code>rvm version</code>, and after this, install <code>rails</code>"}], "tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": false, "score": 1, "last_activity_date": 1550521123, "creation_date": 1550521123, "answer_id": 54754756, "question_id": 54754689, "link": "https://stackoverflow.com/questions/54754689/error-message-when-installing-ruby-on-rails-on-mojave/54754756#54754756", "title": "Error message when installing Ruby on Rails on Mojave", "body": "<p>May for only install it, you can use <code>-n</code> option: <code>sudo gem install -n /usr/local/bin rails</code></p>\n\n<p>But,i strongly recommends you to use a ruby manager, like RVM (<a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a>) supports MacOS, permits you to have multiple Ruby versions and keep all your gems organized by version.</p>\n"}, {"comments": [{"owner": {"reputation": 2141, "user_id": 14401, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/40e744b781ece70efd05033c0ab6602a?s=128&d=identicon&r=PG", "display_name": "Andre Gallo", "link": "https://stackoverflow.com/users/14401/andre-gallo"}, "edited": false, "score": 1, "creation_date": 1551299832, "post_id": 54755141, "comment_id": 96594474, "body": "Great! Looked over 100 different answers and blogs and what have you. This one did the trick! rvm FTW!"}], "tags": [], "owner": {"reputation": 4688, "user_id": 6241184, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1022848011119215/picture?type=large", "display_name": "Vinicius Brasil", "link": "https://stackoverflow.com/users/6241184/vinicius-brasil"}, "is_accepted": false, "score": 2, "last_activity_date": 1550522943, "creation_date": 1550522943, "answer_id": 54755141, "question_id": 54754689, "link": "https://stackoverflow.com/questions/54754689/error-message-when-installing-ruby-on-rails-on-mojave/54755141#54755141", "title": "Error message when installing Ruby on Rails on Mojave", "body": "<p>Do not use <code>sudo</code> with <code>gem install</code>, because that will mess up your file system permissions, and you won't be able to run <code>rails</code>, or any other gem, commands without <code>sudo</code>, which can be harmful.</p>\n\n<p>Use RVM or rbenv to manage Ruby versions. To install RVM, run (without sudo):</p>\n\n<pre><code>\\curl -sSL https://get.rvm.io | bash -s stable\n</code></pre>\n\n<p>Then, follow any post install instructions and install the Ruby version you'd like:</p>\n\n<pre><code>rvm install 2.6.0\n</code></pre>\n\n<p>Then install <code>bundler</code> and <code>rails</code>:</p>\n\n<pre><code>gem install bundler\ngem install rails\n</code></pre>\n\n<p>And you're done! Have a happy Ruby-life without file permission issues.</p>\n"}], "owner": {"reputation": 1, "user_id": 11081006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kNJ3nbfaGlY/AAAAAAAAAAI/AAAAAAAAk5w/ihvXX96qCa0/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11081006/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1550529740, "creation_date": 1550520779, "last_edit_date": 1550529740, "question_id": 54754689, "link": "https://stackoverflow.com/questions/54754689/error-message-when-installing-ruby-on-rails-on-mojave", "title": "Error message when installing Ruby on Rails on Mojave", "body": "<p>When I try to install Ruby on Rails using the following commands...</p>\n\n<pre><code>sudo gem install rails\n</code></pre>\n\n<p>... I get the following error message: </p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /usr/bin directory.\n</code></pre>\n\n<p>My OS is MacOS Mojave and I think this may be the reason why I am getting this message. What could I do to install Ruby on Rails? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1493, "user_id": 2236470, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J8hqM.jpg?s=128&g=1", "display_name": "Paul Byrne", "link": "https://stackoverflow.com/users/2236470/paul-byrne"}, "edited": false, "score": 0, "creation_date": 1550520166, "post_id": 54753584, "comment_id": 96290672, "body": "I would just add to the answers below that there&#39;s not a lot of value to testing this relationship, as there&#39;s no real logic involved. You are just adding some framework convenience methods. The tests won&#39;t do any harm, but won&#39;t really give you much either."}], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1550516946, "creation_date": 1550516946, "answer_id": 54753852, "question_id": 54753584, "link": "https://stackoverflow.com/questions/54753584/test-for-models-that-points-itself-rspec-rails-5/54753852#54753852", "title": "test for models that points itself rspec rails 5", "body": "<p>You give an instance to matcher but it waits for the reference name and the referenced class name. Your test should be like following.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>it { should belong_to(:created_by).of_type(User) } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1550518466, "creation_date": 1550518466, "answer_id": 54754179, "question_id": 54753584, "link": "https://stackoverflow.com/questions/54753584/test-for-models-that-points-itself-rspec-rails-5/54754179#54754179", "title": "test for models that points itself rspec rails 5", "body": "<p>The <a href=\"https://github.com/thoughtbot/shoulda-matchers#activerecord-matchers\" rel=\"nofollow noreferrer\">ActiveRecord shoulda matchers</a> do not require any object of the class to be instantiated for the tests to run. Here, you have initialised a new <code>User</code> instance as the subject, and have tried to pass that to the shoulda matcher to check the <code>belongs_to</code> association.<br/>\nHowever, in order to check a <code>belongs_to</code> association on a model with a particular foreign key and class name, the following test can be used:</p>\n\n<pre><code>it { should belong_to(:created_by).with_foreign_key(:created_by_id).class_name('User') }\n</code></pre>\n\n<p>ActiveRecord matchers take lots of other options apart from the two mentioned above. These options are very well documented in the <a href=\"https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_record/association_matcher.rb\" rel=\"nofollow noreferrer\">Shoulda code on GitHub</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10108805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/021c00322a0d159fea842a22075f22f0?s=128&d=identicon&r=PG&f=1", "display_name": "RuthSchmuck", "link": "https://stackoverflow.com/users/10108805/ruthschmuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54754179, "answer_count": 2, "score": 0, "last_activity_date": 1550518466, "creation_date": 1550515623, "question_id": 54753584, "link": "https://stackoverflow.com/questions/54753584/test-for-models-that-points-itself-rspec-rails-5", "title": "test for models that points itself rspec rails 5", "body": "<p>I'm new doing unit test in Ruby on Rails, so I need some help in a test.</p>\n\n<p>This is my model User.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  belongs_to :created_by, foreign_key: :created_by_id, class_name: 'User'\nend\n</code></pre>\n\n<p>I want to create a test to verify this association. I tried doing this on my user_spec.rb    </p>\n\n<pre><code>describe 'should validates associations' do\n  subject { User.new }\n  it { should belong_to(subject.created_by) }\nend\n</code></pre>\n\n<p>This is the error response </p>\n\n<blockquote>\n  <p>Failures:</p>\n  \n  <p>1) User  should validates associations should belong to \n      Failure/Error: it { should belong_to(subject.created_by) }\n        Expected User to have a belongs_to association called  (no association > called )\n      # ./spec/models/user_spec.rb:17:in `block (3 levels) in '</p>\n</blockquote>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "edited": false, "score": 0, "creation_date": 1550522863, "post_id": 54754384, "comment_id": 96291856, "body": "Thank you for the reply and pointing to the example. I tried <code>q.case = :down</code> and it is setting <code>selected</code> value to downcase but it is not auto-completing when I hit <code>Y</code> followed by <code>tab</code> key. I was just thinking is it possible to do here?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1550519450, "creation_date": 1550519450, "answer_id": 54754384, "question_id": 54753512, "link": "https://stackoverflow.com/questions/54753512/how-to-get-case-insensitive-tab-completion-in-ruby/54754384#54754384", "title": "How to get case insensitive tab-completion in Ruby?", "body": "<p>It\u2019s open source btw.</p>\n\n<p>Block argument of <code>ask</code> is an instance of <code>Highline::Question</code> that has <a href=\"https://github.com/JEG2/highline/blob/bf489b632afd92c68df0b2c1f348afb66b5495aa/lib/highline/question.rb#L136\" rel=\"nofollow noreferrer\"><code>case</code></a> attribute. Here is <a href=\"https://github.com/JEG2/highline/blob/bf489b632afd92c68df0b2c1f348afb66b5495aa/examples/basic_usage.rb#L50\" rel=\"nofollow noreferrer\">the example</a> of usage:</p>\n\n<pre><code>selected = ask(\"What: \", tab_complete) do |q|\n  q.case = :down # THIS\n  q.readline = true\nend\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550519549, "creation_date": 1550515332, "last_edit_date": 1550519549, "question_id": 54753512, "link": "https://stackoverflow.com/questions/54753512/how-to-get-case-insensitive-tab-completion-in-ruby", "title": "How to get case insensitive tab-completion in Ruby?", "body": "<p>I am using <code>HighLine::Question.readline</code> to achieve <code>tab completion</code> in Ruby. Below is the piece of code of <code>tab_complete.rb</code> which does that for me.</p>\n\n<pre><code>require \"rubygems\"\nrequire \"highline/import\"\n\ntab_complete = [\"yes\", \"okay\", \"maybe\", \"no\"]\n\nselected = ask(\"Please say something: \", tab_complete) do |q|\n  q.readline = true\nend\np selected\n\n-bash-4.1$ ruby tab_complete.rb\nPlease say something: yes\n\"yes\"\n</code></pre>\n\n<p>The above code works fine for the items which are in the array, but I want to handle case-insensitive tab-completion. For example, if user enters <code>upcase</code> or <code>downcase</code> <code>y</code> and hit <code>tab</code> key it should get completes as <code>downcase</code> <code>yes</code> and that value should be saved in <code>selected</code>. Right now I get prompted to enter case-sensitive words as shown below:</p>\n\n<pre><code>-bash-4.1$ ruby tab_complete.rb\nPlease say something: Y\nYou must choose one of [yes, okay, maybe, no].\n?  Please say something:\n</code></pre>\n\n<p>Any pointers on this will be really helpful to move forward.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4331, "user_id": 59991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fee5ffeec5750ef42697fdfe6e1348c4?s=128&d=identicon&r=PG", "display_name": "Cimm", "link": "https://stackoverflow.com/users/59991/cimm"}, "edited": false, "score": 0, "creation_date": 1550513142, "post_id": 54752940, "comment_id": 96287971, "body": "Can you print the value of <code>params</code> you are seeing on the server? It seems it got lost when posting your question."}, {"owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "reply_to_user": {"reputation": 4331, "user_id": 59991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fee5ffeec5750ef42697fdfe6e1348c4?s=128&d=identicon&r=PG", "display_name": "Cimm", "link": "https://stackoverflow.com/users/59991/cimm"}, "edited": false, "score": 0, "creation_date": 1550513575, "post_id": 54752940, "comment_id": 96288140, "body": "here u go.. its when i print params in console:  {&quot;-----------------------------1190833731009709688837505639\\&zwnj;&#8203;r\\nContent-Dispositi&zwnj;&#8203;on: form-data; name&quot;=&gt;&quot;\\&quot;role\\&quot;\\r\\n\\r\\nadmin\\r\\n---------------------------&zwnj;&#8203;--119083373100970968&zwnj;&#8203;8837505639\\r\\nConten&zwnj;&#8203;t-Disposition: form-data; name=\\&quot;user_id\\&quot;\\r\\n\\r\\n1\\r\\n-----------------------------11&zwnj;&#8203;90833731009709688837&zwnj;&#8203;505639--\\r\\n&quot;, &quot;controller&quot;=&gt;&quot;users&quot;, &quot;action&quot;=&gt;&quot;updaterole&quot;, &quot;id&quot;=&gt;&quot;1&quot;}"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1550513713, "post_id": 54752940, "comment_id": 96288188, "body": "hmmm looks like the body is not right, try to create the formdata object manually (<code>formdata = new FormData(); data.append(&#39;role&#39;, selected_role); data.append(&#39;user_id&#39;, theuserid)</code>) just to make the content more explicit"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550514245, "post_id": 54752940, "comment_id": 96288405, "body": "If you do not have file upload try to send json payload to server. But you need to change content type to <code>application&#47;json</code>."}, {"owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "edited": false, "score": 0, "creation_date": 1550514597, "post_id": 54752940, "comment_id": 96288558, "body": "yes thanks to all for help... i just removed (headers: { &#39;Content-Type&#39;:&#39;multipart/form-data&#39; }) in fetch request and now my problem is fixed"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550581631, "post_id": 54752940, "comment_id": 96314094, "body": "@ultra2mh, could you please post the solution, to not leave the question unanswered"}, {"owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "edited": false, "score": 0, "creation_date": 1550588375, "post_id": 54752940, "comment_id": 96318309, "body": "ok i added the solution."}], "answers": [{"tags": [], "owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "is_accepted": true, "score": 0, "last_activity_date": 1550588292, "creation_date": 1550588292, "answer_id": 54769130, "question_id": 54752940, "link": "https://stackoverflow.com/questions/54752940/rails-5-2-how-to-get-form-data-value-in-controller/54769130#54769130", "title": "rails 5.2 how to get form-data value in controller", "body": "<p>in my case, that it is alredy mentioned in comments, we have incorrect body.\ni solved it by removing  <code>headers: { 'Content-Type':'multipart/form-data' },</code> form fetch request.. looks like we dont need  add Content-Type to header. anyway my issue solved by this .</p>\n"}], "owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1569, "favorite_count": 1, "accepted_answer_id": 54769130, "answer_count": 1, "score": 5, "last_activity_date": 1550588292, "creation_date": 1550512817, "last_edit_date": 1550581841, "question_id": 54752940, "link": "https://stackoverflow.com/questions/54752940/rails-5-2-how-to-get-form-data-value-in-controller", "title": "rails 5.2 how to get form-data value in controller", "body": "<p>I have a simple HTML form and I'm sending some data to my server by using Fetch API and FormData.</p>\n\n<p>I'm sending <code>role</code> and <code>user_id</code> with their values to the server. In controller when I print <code>params</code> I get:</p>\n\n<blockquote>\n  <p>{\"-----------------------------1190833731009709688837505639\\r\\nContent-Disposition: form-data; name\"=>\"\\\"role\\\"\\r\\n\\r\\nadmin\\r\\n-----------------------------1190833731009709688837505639\\r\\nContent-Disposition: form-data; name=\\\"user_id\\\"\\r\\n\\r\\n1\\r\\n-----------------------------1190833731009709688837505639--\\r\\n\", \"controller\"=>\"users\", \"action\"=>\"updaterole\", \"id\"=>\"1\"}</p>\n</blockquote>\n\n<p>How can I access and get <code>role</code> and <code>user_id</code> value from this?</p>\n\n<p>This is my script on client side:</p>\n\n<pre><code>var form = document.querySelector(\"#roleForm\");\nvar formdata = new FormData(form);\n\nfetch(url, {\n    method: \"PATCH\",\n    headers: { 'Content-Type':'multipart/form-data' },\n    body: formdata,\n}).then(\n    response =&gt; response.text() // .json(), etc.\n    // same as function(response) {return response.text();}\n).then(\n    html =&gt; {\n        console.log(html)\n    }\n);\n</code></pre>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1550522890, "post_id": 54751572, "comment_id": 96291874, "body": "It looks like what you want is actually an algorithm to &quot;generate all partitions of a set&quot; (that&#39;s what you should Google for). There&#39;s got to be some white papers with pseudocode you can implement, which will be way more efficient than the approach you are asking for in your question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550535814, "post_id": 54751572, "comment_id": 96295920, "body": "NP-hard alert! This is equivalent to finding all partitions of a set, a partition being a mutually-disjoint collection of subsets that covers the set."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "edited": false, "score": 0, "creation_date": 1550514203, "post_id": 54751953, "comment_id": 96288373, "body": "Thanks! That actually works, but it still creates all combinations of combis which also gets large very quickly. It is too slow for the size of my arr. Is there any way to speed it up?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "edited": false, "score": 0, "creation_date": 1550515411, "post_id": 54751953, "comment_id": 96288898, "body": "No it does not create all combinations of combined. Read the docs I linked."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550515834, "post_id": 54751953, "comment_id": 96289072, "body": "I also have the feeling that <code>#lazy</code> doesn&#39;t do anything if the intention is to call <code>#to_a</code> afterwards. It will still iterate the whole collection since it needs to be converted to an array. Lazy only works when you need a finite amount of elements taken. eg. <code>(0..Float::INFINITY).lazy.select { |i| (i % 2).zero? }.take(3).to_a</code> works because of the <code>.take(3)</code> when removing <i>take</i> you might as well leave out the <i>lazy</i> call <code>(0..Float::INFINITY).select { |i| (i % 2).zero? }.to_a</code> (try adding <i>lazy</i> here and notice the lack of difference)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550516052, "post_id": 54751953, "comment_id": 96289173, "body": "I know, but when you call <code>#to_a</code> you&#39;re essentially saying: <i>run <code>#select</code> for all elements in the collection</i>. It only works when you&#39;re adding a limitation on the amount of elements taken. This can be done by calling <code>#take</code> , <code>#take_while</code> and maybe some other methods."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "edited": false, "score": 0, "creation_date": 1550516904, "post_id": 54751953, "comment_id": 96289485, "body": "@SanderSchepens Just out of curiosity, what size is your actual array?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550518731, "post_id": 54751953, "comment_id": 96290135, "body": "@JohanWentholt you misunderstand how lazy enumerators work in Ruby: <code>[*1..10].each.lazy.select(&amp;:odd?).each(&amp;method(:puts)).to_a</code>. It does not produce intermediate arrays, it runs the whole chain for <i>each</i> element in input instead."}, {"owner": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "edited": false, "score": 0, "creation_date": 1550524529, "post_id": 54751953, "comment_id": 96292480, "body": "I want to run it for 20 elements in arr. Doing a benchmark now. 4 elements in 0,05 seconds, 5 elements in 1,3 seconds and 6 in 616 seconds. 7 still running after 2 hours.. :) I&#39;ve tried to read up on the lazy enumerator, but seems I don&#39;t get it. It still has to generate the combination that it has to test to be valid, right? And there&#39;s a lot of those combinations.. Maybe I&#39;m missing something"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550551522, "post_id": 54751953, "comment_id": 96299052, "body": "Generate \u2014 yes, but one by one, without memory consumption. For 20 elements in any case you need somewhat else approach."}, {"owner": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "edited": false, "score": 0, "creation_date": 1550558533, "post_id": 54751953, "comment_id": 96301194, "body": "Aah okay I get it. Memory wasn&#39;t a problem until now though. It&#39;s just the amount of time. Thanks anyway for the solution. I might have some way to get the number of combis down to around 700. Still large, but maybe manageable. I only need to run it once."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1550508719, "creation_date": 1550508719, "answer_id": 54751953, "question_id": 54751572, "link": "https://stackoverflow.com/questions/54751572/combine-all-combinations-to-get-complete-sets/54751953#54751953", "title": "Combine all combinations to get complete sets", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Enumerator/Lazy.html\" rel=\"nofollow noreferrer\"><code>Enumerator::Lazy</code></a> to reject unwanted / invalid combinations immediately:</p>\n\n<pre><code>combis = 1.upto(arr.size).each_with_object([]) do |i, acc|\n  acc.concat arr.combination(i).to_a \nend \n#\u21d2 [[1], [2], [3], [1, 2], [1, 3], [2, 3], [1, 2, 3]]\n\nvalid = 1.upto(arr.size).each_with_object([]) do |i, acc|\n  acc.concat(\n    #                     \u21d3\u21d3\u21d3\u21d3 THIS\n    combis.combination(i).lazy.select do |e|\n      items = e.flatten\n      items.uniq.size == items.size &amp;&amp; items | arr == items\n    end.to_a\n  )\nend\n#\u21d2\u00a0[[[1, 2, 3]], [[1], [2, 3]], [[2], [1, 3]], [[3], [1, 2]], [[1], [2], [3]]]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5954894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-8X0CW76fM/AAAAAAAAAAI/AAAAAAAABso/wAAEVVufZIk/photo.jpg?sz=128", "display_name": "Sander Schepens", "link": "https://stackoverflow.com/users/5954894/sander-schepens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1550564492, "creation_date": 1550507376, "last_edit_date": 1550564492, "question_id": 54751572, "link": "https://stackoverflow.com/questions/54751572/combine-all-combinations-to-get-complete-sets", "title": "Combine all combinations to get complete sets", "body": "<p>I have an array:</p>\n\n<pre><code>arr = [1, 2, 3]\n</code></pre>\n\n<p>I want to find all combinations and then combine the combinations to get arrays that contain all the elements of <code>arr</code> only once. The sequence doesn't matter. The first combination should return something like</p>\n\n<pre><code>combis = [\n  [1], [2], [3],\n  [1, 2], [1, 3], [2, 3], \n  [1, 2, 3]\n]\n</code></pre>\n\n<p>I need <code>valid</code> that has the combinations of <code>combis</code> that contain each value from <code>arr</code> exactly once. So:</p>\n\n<pre><code>valid = [\n  [[1], [2], [3]],\n  [[1], [2, 3]],\n  [[2], [1, 3]],\n  [[3], [1, 2]],\n  [[1, 2, 3]]\n]\n</code></pre>\n\n<p>This gets large very quickly, so I need a way to do this without using the combination function twice and then filtering out the incorrect ones.</p>\n\n<p>I feel I need to use some kind of tree structure and recursion to generate the second set of combinations and stop traversing when it is no longer a valid final set.</p>\n\n<p>Would be great if someone could help me with the (pseudo)code for this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bcrypt"], "comments": [{"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550507154, "post_id": 54751444, "comment_id": 96285169, "body": "what was your bundle version and ruby version? <code>bundle -v</code> will tell you the version no"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "reply_to_user": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550507217, "post_id": 54751444, "comment_id": 96285210, "body": "bundle version is 1.16.5 and ruby version is 2.4.4"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1550508112, "post_id": 54751444, "comment_id": 96285678, "body": "Just remove <code>platforms: :ruby</code> statement and try again."}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550508234, "post_id": 54751444, "comment_id": 96285749, "body": "I removed it ran bundle install and bundle update, but when I try to migrate I get the same error"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550508421, "post_id": 54751444, "comment_id": 96285863, "body": "what was the output of <code>gem install bcrypt</code>"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550508471, "post_id": 54751444, "comment_id": 96285886, "body": "Building native extensions.  This could take a while... Successfully installed bcrypt-3.1.12 WARNING:  Unable to pull data from &#39;<a href=\"http://gems.github.com\" rel=\"nofollow noreferrer\">gems.github.com</a>&#39;: bad response Not Found 404 (<a href=\"http://gems.github.io/specs.4.8.gz\" rel=\"nofollow noreferrer\">gems.github.io/specs.4.8.gz</a>) 1 gem installed"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550508492, "post_id": 54751444, "comment_id": 96285897, "body": "That is what I get"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550509009, "post_id": 54751444, "comment_id": 96286154, "body": "I am not sure why its fetching data from  <code>gems.github.com</code> ideally it should fetch from <code>https:&#47;&#47;rubygems.org</code>"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550509083, "post_id": 54751444, "comment_id": 96286204, "body": "Is there a way to tell it where to fetch from?"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550509175, "post_id": 54751444, "comment_id": 96286253, "body": "what is output of <code>gem sources</code>"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550509239, "post_id": 54751444, "comment_id": 96286289, "body": "run this <code>gem sources -a https:&#47;&#47;rubygems.org</code> to set gem source"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550509301, "post_id": 54751444, "comment_id": 96286320, "body": "I added it but it&#39;s still fetching from gems.github.com when installing the gem"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550509623, "post_id": 54751444, "comment_id": 96286486, "body": "use <code>gem install bcrypt --source https:&#47;&#47;rubygems.org&#47;</code>  to install bcrypt"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550509929, "post_id": 54751444, "comment_id": 96286626, "body": "let me know if it works"}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550510093, "post_id": 54751444, "comment_id": 96286702, "body": "Doesn&#39;t work, I get the same error, it&#39;s still pulling from the wrong source"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 0, "creation_date": 1550510264, "post_id": 54751444, "comment_id": 96286781, "body": "i am out of  idea  if you have <code>tmate</code> <code>https:&#47;&#47;tmate.io&#47;</code>  then share your terminal session  here will check it on terminal"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "reply_to_user": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550510411, "post_id": 54751444, "comment_id": 96286854, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188622/discussion-between-rahul-mishra-and-razvanusc\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": true, "score": 1, "last_activity_date": 1550513000, "creation_date": 1550513000, "answer_id": 54752990, "question_id": 54751444, "link": "https://stackoverflow.com/questions/54751444/could-not-find-bcrypt-3-1-12-in-any-of-the-sources/54752990#54752990", "title": "Could not find bcrypt-3.1.12 in any of the sources", "body": "<p>problem is got resolved by rebuilding the docker service </p>\n\n<p><code>docker-compose --build app</code></p>\n"}], "owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 54752990, "answer_count": 1, "score": 0, "last_activity_date": 1550513000, "creation_date": 1550506898, "question_id": 54751444, "link": "https://stackoverflow.com/questions/54751444/could-not-find-bcrypt-3-1-12-in-any-of-the-sources", "title": "Could not find bcrypt-3.1.12 in any of the sources", "body": "<p>I installed the gem 'devise' within my project. After doing so I tried to migrate the db; however this seems to stop due to \"Could not find bcrypt-3.1.12 in any of the sources\". It tells me to run bundle install again, which doesn't seem to work. I have to mention that the project is running on docker.</p>\n\n<p>I tried uninstalling the gem and installing it again, as well as deleting the gemfile.lock file. These failed too.</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\ngem 'rails', '~&gt; 5.0.7', '&gt;= 5.0.7.1'\ngem 'mysql2', '&gt;= 0.3.18', '&lt; 0.6.0'\ngem 'devise'\ngem 'puma', '~&gt; 3.0'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'bcrypt', platforms: :ruby\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1550506637, "creation_date": 1550506637, "answer_id": 54751377, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54751377#54751377", "title": "Ruby: Assigning array values in a hash", "body": "<p>Maybe something like this:</p>\n\n<pre><code>[0..2, 3..5, 6..8].each.with_object({}) do |range, result|\n  range.each do |ind|\n    result[ind] = range.to_a\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": false, "score": 2, "last_activity_date": 1550523416, "last_edit_date": 1550523416, "creation_date": 1550506701, "answer_id": 54751388, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54751388#54751388", "title": "Ruby: Assigning array values in a hash", "body": "<p>Using modulo operations (<code>%</code>) you can calculate the values of the subarrays:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>(0..8).map { |i| [i, (i - i%3 .. i - i%3 + 2).to_a] }.to_h\n\n# =&gt; {0=&gt;[0, 1, 2], 1=&gt;[0, 1, 2], 2=&gt;[0, 1, 2], 3=&gt;[3, 4, 5], 4=&gt;[3, 4, 5], 5=&gt;[3, 4, 5], 6=&gt;[6, 7, 8], 7=&gt;[6, 7, 8], 8=&gt;[6, 7, 8]}\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 1, "creation_date": 1550507202, "post_id": 54751391, "comment_id": 96285198, "body": "Very nice solution!"}, {"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1550508690, "post_id": 54751391, "comment_id": 96285992, "body": "My first time see <code>[*a..b]</code> usage, tried it and seems wonderful. Tried search but can&#39;t find it&#39;s document, could you give me a keyword to search it? Thanks :)"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 1, "creation_date": 1550508825, "post_id": 54751391, "comment_id": 96286062, "body": "seems to be the clean and optimised solution with O(n) complexity"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1550508848, "post_id": 54751391, "comment_id": 96286072, "body": "@Tiw well, <code>*</code> is a splat operator that basically <i>splats</i> the argument. I am not sure there is a specific paper describing it\u2019s usage inside array initialization."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1550506717, "creation_date": 1550506717, "answer_id": 54751391, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54751391#54751391", "title": "Ruby: Assigning array values in a hash", "body": "<p>With a dynamic upper bound:</p>\n\n<pre><code>count, split = 9, 3\n0.upto(count - 1).map do |i|\n  [i, [*(i / split * split)...(i / split) * split + split]]\nend.to_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1550507751, "post_id": 54751484, "comment_id": 96285475, "body": "Don\u2019t abuse <code>each</code> for <code>reducing</code>: <code>(0..8).each_slice(3).each_with_object({}) { |m, acc| m.each {|v| acc[v] = m }}</code>."}], "tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1550507042, "creation_date": 1550507042, "answer_id": 54751484, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54751484#54751484", "title": "Ruby: Assigning array values in a hash", "body": "<pre><code>dummy_data = {}\n(0..8).to_a.each_slice(3).map{ |m| m.each{|v| dummy_data[v] = m }}\n</code></pre>\n\n<p>it generates expected dummy data</p>\n\n<pre><code>dummy_data\n =&gt; {0=&gt;[0, 1, 2], 1=&gt;[0, 1, 2], 2=&gt;[0, 1, 2], 3=&gt;[3, 4, 5], 4=&gt;[3, 4, 5], 5=&gt;[3, 4, 5], 6=&gt;[6, 7, 8], 7=&gt;[6, 7, 8], 8=&gt;[6, 7, 8]} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550518561, "post_id": 54754152, "comment_id": 96290071, "body": "Yes, I could change <code>(0..n*n-1)</code> to <code>(0...n*n)</code>, but I <i>never</i> use three dots. &#175;\\_(\u30c4)_/&#175;"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1550518346, "creation_date": 1550518346, "answer_id": 54754152, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54754152#54754152", "title": "Ruby: Assigning array values in a hash", "body": "<pre><code>def make_da_hash(n)\n  a = (0..n*n-1).to_a\n  a.zip(a.each_slice(n).flat_map { |e| [e]*n }).to_h\nend\n\nmake_da_hash(3)\n  #=&gt; {0=&gt;[0, 1, 2], 1=&gt;[0, 1, 2], 2=&gt;[0, 1, 2],\n  #    3=&gt;[3, 4, 5], 4=&gt;[3, 4, 5], 5=&gt;[3, 4, 5],\n  #    6=&gt;[6, 7, 8], 7=&gt;[6, 7, 8], 8=&gt;[6, 7, 8]} \n\nmake_da_hash(4)\n  #=&gt; {0=&gt;[0, 1, 2, 3], 1=&gt;[0, 1, 2, 3], 2=&gt;[0, 1, 2, 3], 3=&gt;[0, 1, 2, 3],\n  #    4=&gt;[4, 5, 6, 7], 5=&gt;[4, 5, 6, 7], 6=&gt;[4, 5, 6, 7], 7=&gt;[4, 5, 6, 7],\n  #    8=&gt;[8, 9, 10, 11], 9=&gt;[8, 9, 10, 11], 10=&gt;[8, 9, 10, 11],\n  #    11=&gt;[8, 9, 10, 11], 12=&gt;[12, 13, 14, 15], 13=&gt;[12, 13, 14, 15],\n  #    14=&gt;[12, 13, 14, 15], 15=&gt;[12, 13, 14, 15]} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1550561978, "creation_date": 1550561978, "answer_id": 54760984, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash/54760984#54760984", "title": "Ruby: Assigning array values in a hash", "body": "<pre><code>{}.merge(*Array.new(3){|i| (0..8).group_by{|n| n / 3 * 3 + i}})  \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  0=&gt;[0, 1, 2],\n  3=&gt;[3, 4, 5],\n  6=&gt;[6, 7, 8],\n  1=&gt;[0, 1, 2],\n  4=&gt;[3, 4, 5],\n  7=&gt;[6, 7, 8],\n  2=&gt;[0, 1, 2],\n  5=&gt;[3, 4, 5],\n  8=&gt;[6, 7, 8]\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10404505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11d32bafd0c36a0b223d130ee11e8005?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/10404505/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 6, "score": 2, "last_activity_date": 1550561978, "creation_date": 1550506059, "question_id": 54751223, "link": "https://stackoverflow.com/questions/54751223/ruby-assigning-array-values-in-a-hash", "title": "Ruby: Assigning array values in a hash", "body": "<p>I would like the following hash output: </p>\n\n<pre><code>{ 0 =&gt; [0,1,2], 1 =&gt; [0,1,2], 2 =&gt; [0,1,2],\n  3 =&gt; [3,4,5], 4 =&gt; [3,4,5], 5 =&gt; [3,4,5],\n  6 =&gt; [6,7,8], 7 =&gt; [6,7,8], 8 =&gt; [6,7,8]\n}\n</code></pre>\n\n<p>Intuitively I can just hard code these values in, but I am struggle to figure out how I can dynamically assign each hash key to the appropriate array value.. For instance perhaps creating a 9.times loop? </p>\n\n<pre><code>{ 0 =&gt; (0..2).to_a, 1 =&gt; (0..2).to_a, 2 =&gt; (0..2).to_a,\n  3 =&gt; (3..5).to_a, 4 =&gt; (3..5).to_a, 5 =&gt; (3..5).to_a, \n  6 =&gt; (6..8).to_a, 7 =&gt; (6..8).to_a, 8 =&gt; (6..8).to_a \n}\n</code></pre>\n\n<p>Thanks for any guidance</p>\n"}, {"tags": ["ruby", "graphql"], "answers": [{"comments": [{"owner": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 0, "creation_date": 1550507885, "post_id": 54751158, "comment_id": 96285555, "body": "I can&#39;t use the first suggestion because the order by nested_field is not an active record field. I don&#39;t understand the second suggestion. How does an enum help me sort on a virtual attribute when getting a list of <code>ExampleTypes</code>?"}, {"owner": {"reputation": 4156, "user_id": 4850916, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a2443b68836f2d166eae52b940e99bf6?s=128&d=identicon&r=PG", "display_name": "galkin", "link": "https://stackoverflow.com/users/4850916/galkin"}, "reply_to_user": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 0, "creation_date": 1550507996, "post_id": 54751158, "comment_id": 96285630, "body": "Sorry, I missed the problem with sorting by nesting field in Ruby Active Record."}, {"owner": {"reputation": 4156, "user_id": 4850916, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a2443b68836f2d166eae52b940e99bf6?s=128&d=identicon&r=PG", "display_name": "galkin", "link": "https://stackoverflow.com/users/4850916/galkin"}, "reply_to_user": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 0, "creation_date": 1550508087, "post_id": 54751158, "comment_id": 96285662, "body": "&quot;How does an enum help me sort&quot; \u2013 GraphQL is typebased language. Using enums is better, then using string."}, {"owner": {"reputation": 4156, "user_id": 4850916, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a2443b68836f2d166eae52b940e99bf6?s=128&d=identicon&r=PG", "display_name": "galkin", "link": "https://stackoverflow.com/users/4850916/galkin"}, "reply_to_user": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 0, "creation_date": 1550508880, "post_id": 54751158, "comment_id": 96286089, "body": "I change my answer. If you should move your nested_field to DB view, then you can use DB for sorting with active record."}], "tags": [], "owner": {"reputation": 4156, "user_id": 4850916, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a2443b68836f2d166eae52b940e99bf6?s=128&d=identicon&r=PG", "display_name": "galkin", "link": "https://stackoverflow.com/users/4850916/galkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1550508584, "last_edit_date": 1550508584, "creation_date": 1550505809, "answer_id": 54751158, "question_id": 54750639, "link": "https://stackoverflow.com/questions/54750639/how-to-sort-on-nested-field-in-graphql-ruby/54751158#54751158", "title": "How to sort on nested field in graphql ruby?", "body": "<p>You can not order Active record by <code>virtual attribute</code>, because Active record can not match this <code>virtual attribute</code> to SQL/NoSQL query. You can avoid limitation, by <strong>creating view at DB layer</strong>. In GraphQL, sorting/pagination should be implemented at DB layer. Without that sorting/pagination implementation queries all data from DB to application memory.</p>\n\n<p>Also, I want to recommend you switching from <code>order</code> argument with string type to <code>sort</code> argument with <code>[SearchSort!]</code> type based on enums. GraphQL schema will looks like that:</p>\n\n<pre><code>input SearchSort {\n  sorting: Sorting!\n  order: Order = DESC\n}\n\nenum Sorting {\n  FieldName1\n  FieldName2\n}\n\nenum Order {\n  DESC\n  ASC\n}\n</code></pre>\n\n<p>It helps you implement mapping from GraphQL subquery to DataBase query.</p>\n"}], "owner": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550508584, "creation_date": 1550504140, "question_id": 54750639, "link": "https://stackoverflow.com/questions/54750639/how-to-sort-on-nested-field-in-graphql-ruby", "title": "How to sort on nested field in graphql ruby?", "body": "<p>How do I sort on a nested field (or a virtual attribute) in <a href=\"https://github.com/rmosolgo/graphql-ruby\" rel=\"nofollow noreferrer\">graphql-ruby</a>?</p>\n\n<pre><code>ExampleType = GraphQL::ObjectType.define do\n   name 'Example'\n   description '...'\n   field :nested_field, NestedType, 'some nested field' do\n       // some result that is virtually calculated and returns\n       OpenStruct.new(a: 123//some random number, b: 'some string')\n   end\nend\n\nQueryType = GraphQL::ObjectType.define do\n    name 'query'\n    field: example, ExampleType do\n    resolve -&gt; (_obj, args,_ctx) {\n            Example.find(args['id']) //Example is an active record\n        }\n    end\n\n    field: examples, types[ExampleType] do\n        resolve -&gt; (_obj, args,_ctx) {\n            // NOTE: How to order by nested field here? \n            Example.where(args['id'])\n        }\n    end\nend\n</code></pre>\n\n<p>And if I am trying to get a list of examples ordered by <code>nested_field.a</code>:</p>\n\n<pre><code>query getExamples {\n    examples(ids: [\"1\",\"2\"], order: 'nested_field.a desc') {\n        nested_field {\n             a\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby", "cron", "expression"], "comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 1, "creation_date": 1550502668, "post_id": 54750057, "comment_id": 96282465, "body": "I think you had it right the first time, and its probably a Timezone issue rather than cron expression issue: <a href=\"https://crontab.guru/#30_5_%2A_%2A_1-5\" rel=\"nofollow noreferrer\">see crontab.guru</a>"}, {"owner": {"reputation": 13, "user_id": 9305831, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-roI6BV3_J9M/AAAAAAAAAAI/AAAAAAAAADI/elfTnlsJL-I/photo.jpg?sz=128", "display_name": "Marcos Octavio Guerra Liso", "link": "https://stackoverflow.com/users/9305831/marcos-octavio-guerra-liso"}, "reply_to_user": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1550503539, "post_id": 54750057, "comment_id": 96282996, "body": "thanks a lot. I appreciate your help"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1550525895, "last_edit_date": 1550525895, "creation_date": 1550525546, "answer_id": 54755681, "question_id": 54750057, "link": "https://stackoverflow.com/questions/54750057/i-need-a-cron-expression/54755681#54755681", "title": "I need a cron expression", "body": "<p><a href=\"https://github.com/jmettraux/rufus-scheduler#a-note-about-timezones\" rel=\"nofollow noreferrer\">According to the project README</a>, you can specify the cron job with a timezone as follows:</p>\n\n<pre><code>scheduler.cron '30 5 * * 1-5 America/New_York' do\n  # ...\nend\n</code></pre>\n\n<p>This <em>does</em> mean \"at exactly 5:30am on weekdays\", as you desired.</p>\n"}], "owner": {"reputation": 13, "user_id": 9305831, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-roI6BV3_J9M/AAAAAAAAAAI/AAAAAAAAADI/elfTnlsJL-I/photo.jpg?sz=128", "display_name": "Marcos Octavio Guerra Liso", "link": "https://stackoverflow.com/users/9305831/marcos-octavio-guerra-liso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54755681, "answer_count": 1, "score": -2, "last_activity_date": 1550525895, "creation_date": 1550502172, "last_edit_date": 1550502343, "question_id": 54750057, "link": "https://stackoverflow.com/questions/54750057/i-need-a-cron-expression", "title": "I need a cron expression", "body": "<p>I need a cron expression to execute some code at exactly <code>5:30 am</code> weekday.</p>\n\n<p>I tried this one</p>\n\n<pre><code>30 5 * * 1-5\n</code></pre>\n\n<p>but it execute at 10:30 pm\nSearching in internet i find this one</p>\n\n<pre><code>0 30 5 ? * MON,TUE,WED,THU,FRI *\n</code></pre>\n\n<p>but ruby show me an exception message saying this:</p>\n\n<pre><code>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler/jobs.rb:674:in `next_time_from': undefined method `next_time' for nil:NilClass (NoMethodError)\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler/jobs.rb:668:in `set_next_time'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler/jobs.rb:636:in `initialize'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler.rb:617:in `new'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler.rb:617:in `do_schedule'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rufus-scheduler-3.5.2/lib/rufus/scheduler.rb:224:in `cron'\n    from E:/Marcos_Guerra/RubyWorkspace/calisoft-suite/Proyectos/RedmineApi/api.rb:30:in `&lt;main&gt;'\n</code></pre>\n\n<p>this is my code:</p>\n\n<pre><code>ENV['TZ'] = 'America/New_York'\n\nscheduler = Rufus::Scheduler.new\nscheduler.cron '0 30 5 ? * MON,TUE,WED,THU,FRI *' do\n    begin\n      # do something that might fail...\n      # every day of the week at 05:30 am\n      puts RedmineConnector.resetYourLife(user,pass)\n    rescue =&gt; e\n\n    end\n  end\nsleep 3\n</code></pre>\n\n<p>I'm using Rufus Gem</p>\n"}, {"tags": ["ruby", "sensu"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550501802, "post_id": 54749447, "comment_id": 96281974, "body": "Can you please post the error message including the full stack trace?"}, {"owner": {"reputation": 11, "user_id": 11079525, "user_type": "registered", "profile_image": "https://graph.facebook.com/2009815435721463/picture?type=large", "display_name": "gonja_dude", "link": "https://stackoverflow.com/users/11079525/gonja-dude"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1559989902, "post_id": 54749447, "comment_id": 99598772, "body": "@spickermann - really sorry now seeing this. I actually couldn&#39;t find the stack trace of this error on the sensu master (server) aside from the error being displayed on the uchiwa dashboard as  <code>CheckMysqlReplicationStatus CRITICAL: undefined method `encoding&#39; for nil:NilClass</code>  However, we decided to write our own custom ruby script for db replication and I can say it is perfectly working as it should for us.  Thanks!"}], "owner": {"reputation": 11, "user_id": 11079525, "user_type": "registered", "profile_image": "https://graph.facebook.com/2009815435721463/picture?type=large", "display_name": "gonja_dude", "link": "https://stackoverflow.com/users/11079525/gonja-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550500128, "creation_date": 1550500128, "question_id": 54749447, "link": "https://stackoverflow.com/questions/54749447/checkmysqlreplicationstatus-critical-undefined-method-encoding-for-nilnilcla", "title": "CheckMysqlReplicationStatus CRITICAL: undefined method `encoding&#39; for nil:NilClass", "body": "<p>sensu CheckMysqlReplication.rb on db servers returns undefined method `encoding' for nil:NilClass when executed in mysql 8.0.13-4 with latin1 as the default character set name. Prior to this error, the CheckMysqlReplication.rb worked perfectly ok on mysql 5.0 with UTF-8 as the default charset.</p>\n\n<p>I have gleaned the code but I am unable to pinpoint where the problem might be from. \nhere's the check below:</p>\n\n<pre><code>require 'sensu-plugin/check/cli'\nrequire 'mysql'\nrequire 'inifile'\n\nclass CheckMysqlReplicationStatus &lt; Sensu::Plugin::Check::CLI\n  option :host,\n         short: '-h',\n         long: '--host=VALUE',\n         description: 'Database host'\n\n  option :port,\n         short: '-P',\n         long: '--port=VALUE',\n         description: 'Database port',\n         default: 3306,\n         # #YELLOW\n         proc: lambda { |s| s.to_i } # rubocop:disable Lambda\n\n  option :socket,\n         short: '-s SOCKET',\n         long: '--socket SOCKET',\n         description: 'Socket to use'\n\n  option :user,\n         short: '-u',\n         long: '--username=VALUE',\n         description: 'Database username'\n\n  option :pass,\n         short: '-p',\n         long: '--password=VALUE',\n         description: 'Database password'\n\n  option :master_connection,\n         short: '-m',\n         long: '--master-connection=VALUE',\n         description: 'Replication master connection name'\n\n  option :ini,\n         short: '-i',\n         long: '--ini VALUE',\n         description: 'My.cnf ini file'\n\n  option :ini_section,\n         description: 'Section in my.cnf ini file',\n         long: '--ini-section VALUE',\n         default: 'client'\n\n  option :warn,\n         short: '-w',\n         long: '--warning=VALUE',\n         description: 'Warning threshold for replication lag',\n         default: 900,\n         # #YELLOW\n         proc: lambda { |s| s.to_i } # rubocop:disable Lambda\n\n  option :crit,\n         short: '-c',\n         long: '--critical=VALUE',\n         description: 'Critical threshold for replication lag',\n         default: 1800,\n         # #YELLOW\n         proc: lambda { |s| s.to_i } # rubocop:disable Lambda\n\n  def detect_replication_status?(row)\n    %w[\n      Slave_IO_State\n      Slave_IO_Running\n      Slave_SQL_Running\n      Last_IO_Error\n      Last_SQL_Error\n      Seconds_Behind_Master\n    ].all? { |key| row.key? key }\n  end\n\n  def slave_running?(row)\n    %w[\n      Slave_IO_Running\n      Slave_SQL_Running\n    ].all? { |key| row[key] =~ /Yes/ }\n  end\n\n  def run\n    if config[:ini]\n      ini = IniFile.load(config[:ini])\n      section = ini[config[:ini_section]]\n      db_user = section['user']\n      db_pass = section['password']\n    else\n      db_user = config[:user]\n      db_pass = config[:pass]\n    end\n    db_host = config[:host]\n    db_conn = config[:master_connection]\n\n    if [db_host, db_user, db_pass].any?(&amp;:nil?)\n      unknown 'Must specify host, user, password'\n    end\n\n    begin\n      db = Mysql.new(db_host, db_user, db_pass, nil, config[:port], config[:socket])\n\n      results = if db_conn.nil?\n                  db.query 'SHOW SLAVE STATUS'\n                else\n                  db.query \"SHOW SLAVE '#{db_conn}' STATUS\"\n                end\n\n      unless results.nil?\n        results.each_hash do |row|\n          warn \"couldn't detect replication status\" unless detect_replication_status?(row)\n\n          slave_running = slave_running?(row)\n\n          output = if db_conn.nil?\n                     'Slave not running!'\n                   else\n                     \"Slave on master connection #{db_conn} not running!\"\n                   end\n\n          output += ' STATES:'\n          output += \" Slave_IO_Running=#{row['Slave_IO_Running']}\"\n          output += \", Slave_SQL_Running=#{row['Slave_SQL_Running']}\"\n          output += \", LAST ERROR: #{row['Last_SQL_Error']}\"\n\n          critical output unless slave_running\n\n          replication_delay = row['Seconds_Behind_Master'].to_i\n\n          message = \"replication delayed by #{replication_delay}\"\n\n          if replication_delay &gt; config[:warn] &amp;&amp;\n             replication_delay &lt;= config[:crit]\n            warning message\n          elsif replication_delay &gt;= config[:crit]\n            critical message\n          elsif db_conn.nil?\n            ok \"slave running: #{slave_running}, #{message}\"\n          else\n            ok \"master connection: #{db_conn}, slave running: #{slave_running}, #{message}\"\n          end\n        end\n        ok 'show slave status was nil. This server is not a slave.'\n      end\n    rescue Mysql::Error =&gt; e\n      errstr = \"Error code: #{e.errno} Error message: #{e.error}\"\n      critical \"#{errstr} SQLSTATE: #{e.sqlstate}\" if e.respond_to?('sqlstate')\n    rescue StandardError =&gt; e\n      critical e\n    ensure\n      db.close if db\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1550543500, "post_id": 54749249, "comment_id": 96297413, "body": "Thanks for the answer. I will try this option"}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 1, "last_activity_date": 1551372036, "last_edit_date": 1551372036, "creation_date": 1550499490, "answer_id": 54749249, "question_id": 54747817, "link": "https://stackoverflow.com/questions/54747817/how-to-use-devise-lockable-functionality-outside-of-devise-controller-or-method/54749249#54749249", "title": "How to use Devise lockable functionality outside of devise controller or method?", "body": "<p>To increment lock count you would use <code>user.increment_failed_attempts</code>. However, to see whether the user is locked or not you would use <code>user.access_locked?</code>.\nThe sample code is here:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>if user.access_locked?\n  return redirect_to root_path, alert: 'Your account is locked'\nend\n\nunless user.valid_password?(params[:password])\n if Devise.maximum_attempts &lt;= user.increment_failed_attempts\n   user.lock_access!(send_instructions: true)\n end\n user.save(validate: false)  \nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 8214179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Re6Mu.jpg?s=128&g=1", "display_name": "Ranjith Rana", "link": "https://stackoverflow.com/users/8214179/ranjith-rana"}, "is_accepted": true, "score": 1, "last_activity_date": 1550581677, "creation_date": 1550581677, "answer_id": 54767095, "question_id": 54747817, "link": "https://stackoverflow.com/questions/54747817/how-to-use-devise-lockable-functionality-outside-of-devise-controller-or-method/54767095#54767095", "title": "How to use Devise lockable functionality outside of devise controller or method?", "body": "<pre><code>#You Can Try this way. It will work Perfectly\n\nif user.failed_attempts &gt;= Devise.maximum_attempts\n            user.lock_access!(send_instructions: true)\n    else\n            user.increment_failed_attempts\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1550583209, "creation_date": 1550583209, "answer_id": 54767516, "question_id": 54747817, "link": "https://stackoverflow.com/questions/54747817/how-to-use-devise-lockable-functionality-outside-of-devise-controller-or-method/54767516#54767516", "title": "How to use Devise lockable functionality outside of devise controller or method?", "body": "<p>I have added <strong>/lib/devise/models/lockable.rb</strong> files in my application. i have used the below methods based on my lockable functionalities. It is working fine.</p>\n\n<pre><code>def lock_access!(opts = { })\n    self.locked_at = Time.now.utc\n    if unlock_strategy_enabled?(:email) &amp;&amp; opts.fetch(:send_instructions, true)\n      send_unlock_instructions\n    else\n      save(validate: false)\n    end\n  end\n\n\n def send_unlock_instructions\n    raw, enc = Devise.token_generator.generate(self.class, :unlock_token)\n    self.unlock_token = enc\n    save(validate: false)\n    send_devise_notification(:unlock_instructions, raw, {})\n    raw\n  end\n\n  def access_locked?\n    !!locked_at &amp;&amp; !lock_expired?\n  end\n\n  def increment_failed_attempts\n    self.class.increment_counter(:failed_attempts, id)\n    reload\n  end\n\n   def unlock_access_by_token(unlock_token)\n      original_token = unlock_token\n      unlock_token   = Devise.token_generator.digest(self, :unlock_token, unlock_token)\n\n      lockable = find_or_initialize_with_error_by(:unlock_token, unlock_token)\n      lockable.unlock_access! if lockable.persisted?\n      lockable.unlock_token = original_token\n      lockable\n    end\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 54767095, "answer_count": 3, "score": 1, "last_activity_date": 1551372036, "creation_date": 1550494493, "question_id": 54747817, "link": "https://stackoverflow.com/questions/54747817/how-to-use-devise-lockable-functionality-outside-of-devise-controller-or-method", "title": "How to use Devise lockable functionality outside of devise controller or method?", "body": "<p>I want to lock the user after 5 multiple attempts in my application. So it is working when i use devise lockable. But i want to use it for API method except default action.</p>\n\n<h1>when i am using devise controller &amp; model it is working</h1>\n\n<p>devise :database_authenticatable, :registerable, :lockable</p>\n\n<h1>user_sign_in method in my controller #using own method not working in my controller</h1>\n\n<pre><code>  if user.first.valid_password?(params[:password])\n    user.update_attributes(current_sign_in_at: DateTime.current)\n\n    success_response(:ok, user, message: 'success message')\n  else\n\n    error_response(412, nil, 'failure message')\n  end\n</code></pre>\n\n<h1>in routes</h1>\n\n<p>post '/user_sign_in' => 'api/users#user_sign_in'</p>\n\n<p>if i am using api call 'user_sign_in' method. It is not updating devise lockable method. How to trigger devise method in API?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "upload", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10214686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pV-SR_GFP6k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psH5lWURGJLpVABJT0KPCVSPc-kg/mo/photo.jpg?sz=128", "display_name": "Mohamed Anwar", "link": "https://stackoverflow.com/users/10214686/mohamed-anwar"}, "edited": false, "score": 0, "creation_date": 1550495292, "post_id": 54747552, "comment_id": 96277957, "body": "thanks for your replay, am already using fog but the file gets copied first to the server then it gets uploaded to s3 bucket ... but i want to upload the file directly to s3 skipping the part where it gets to be saved in the server ."}, {"owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "reply_to_user": {"reputation": 13, "user_id": 10214686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pV-SR_GFP6k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psH5lWURGJLpVABJT0KPCVSPc-kg/mo/photo.jpg?sz=128", "display_name": "Mohamed Anwar", "link": "https://stackoverflow.com/users/10214686/mohamed-anwar"}, "edited": false, "score": 0, "creation_date": 1550496147, "post_id": 54747552, "comment_id": 96278461, "body": "In that case, please take a look at this <a href=\"https://stackoverflow.com/questions/21461143/use-fog-with-ruby-to-generate-a-pre-signed-url-to-put-a-file-in-amazon-s3\">question</a>. It explains how to use &quot;fog&quot; to generate pre-signed URLs for direct uploads."}, {"owner": {"reputation": 13, "user_id": 10214686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pV-SR_GFP6k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psH5lWURGJLpVABJT0KPCVSPc-kg/mo/photo.jpg?sz=128", "display_name": "Mohamed Anwar", "link": "https://stackoverflow.com/users/10214686/mohamed-anwar"}, "edited": false, "score": 0, "creation_date": 1550673017, "post_id": 54747552, "comment_id": 96355713, "body": "yea thanks, but other than that there is no way to upload directly from the server?"}, {"owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "reply_to_user": {"reputation": 13, "user_id": 10214686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pV-SR_GFP6k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psH5lWURGJLpVABJT0KPCVSPc-kg/mo/photo.jpg?sz=128", "display_name": "Mohamed Anwar", "link": "https://stackoverflow.com/users/10214686/mohamed-anwar"}, "edited": false, "score": 0, "creation_date": 1550673908, "post_id": 54747552, "comment_id": 96356278, "body": "I&#39;m not sure. You may try to investigate <code>carrierwave</code> source code. Maybe you&#39;ll find a way to upload a file to s3 through fog from RAM. However, this doesn&#39;t sound like a good, scalable solution."}], "tags": [], "owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "is_accepted": true, "score": 1, "last_activity_date": 1550673962, "last_edit_date": 1550673962, "creation_date": 1550493689, "answer_id": 54747552, "question_id": 54747447, "link": "https://stackoverflow.com/questions/54747447/how-to-direct-upload-to-s3-using-carrierwave-rails/54747552#54747552", "title": "how to direct upload to s3 using carrierwave rails", "body": "<p>You can use \"fog-aws\" gem if you want to upload to S3 using <code>carrierwave</code>.</p>\n\n<p>Here's <a href=\"https://github.com/carrierwaveuploader/carrierwave#using-amazon-s3\" rel=\"nofollow noreferrer\">a link</a>. Scroll down to <code>Using Amazon S3</code> section for details.</p>\n\n<p>Also, you can take a look at this <a href=\"https://stackoverflow.com/questions/21461143/use-fog-with-ruby-to-generate-a-pre-signed-url-to-put-a-file-in-amazon-s3\">question</a>. It explains how to use <code>fog</code> to generate pre-signed URLs for direct uploads.</p>\n"}], "owner": {"reputation": 13, "user_id": 10214686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pV-SR_GFP6k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psH5lWURGJLpVABJT0KPCVSPc-kg/mo/photo.jpg?sz=128", "display_name": "Mohamed Anwar", "link": "https://stackoverflow.com/users/10214686/mohamed-anwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "accepted_answer_id": 54747552, "answer_count": 1, "score": 1, "last_activity_date": 1593114100, "creation_date": 1550493341, "question_id": 54747447, "link": "https://stackoverflow.com/questions/54747447/how-to-direct-upload-to-s3-using-carrierwave-rails", "title": "how to direct upload to s3 using carrierwave rails", "body": "<p>Is there a way to upload to s3 directly using carrierwave in my server? \nthe problem is am trying to track my uploading progress in the frontend (angularjs) but it only tracks the part where the file is uploaded or copied to my server.</p>\n\n<p>I don't want to use the client side to upload directly or use background jobs is there any way or a workaround?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 121, "user_id": 5909281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d5a0d446d2045ce6b49a8a2c4511a0?s=128&d=identicon&r=PG", "display_name": "M. Wyatt", "link": "https://stackoverflow.com/users/5909281/m-wyatt"}, "edited": false, "score": 2, "creation_date": 1550493653, "post_id": 54747157, "comment_id": 96276949, "body": "I don&#39;t use PostgreSQL but either you shouldn&#39;t wrap <code>created_at</code> in quotes and/or the column is ambiguous; try <code>users.created_at</code> (no single quotes)."}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1550494226, "post_id": 54747157, "comment_id": 96277277, "body": "Not meant to answer the question but <code>order(&quot;DATE_TRUNC(&#39;day&#39;, &#39;created_at&#39;)&quot;)</code> should be superfluous because of the grouping and counting."}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "reply_to_user": {"reputation": 121, "user_id": 5909281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d5a0d446d2045ce6b49a8a2c4511a0?s=128&d=identicon&r=PG", "display_name": "M. Wyatt", "link": "https://stackoverflow.com/users/5909281/m-wyatt"}, "edited": false, "score": 0, "creation_date": 1550497811, "post_id": 54747157, "comment_id": 96279481, "body": "@M.Wyatt tried it and still same issue"}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 1, "last_activity_date": 1550499633, "creation_date": 1550499633, "answer_id": 54749294, "question_id": 54747157, "link": "https://stackoverflow.com/questions/54747157/rails-count-of-users-grouped-by-created-at-day-postgresql/54749294#54749294", "title": "Rails, Count of Users Grouped by created_at day - PostgreSQL", "body": "<p>I think you can use date function from sql to get date of timestamp field, and since table User and SpreeOrder has created_at field, you should inform table name (spree_orders.created_at)</p>\n\n<pre><code>Spree::User.joins(:orders)\n  .where(spree_orders: { completed_at: params[:start_date]..params[:end_date]})\n  .order(\"date(spree_orders.created_at)\")\n  .group(\"date(spree_orders.created_at)\")\n  .count\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 0, "creation_date": 1550565429, "post_id": 54754705, "comment_id": 96304216, "body": "Thanks alot, adding &#39;spree_users.created_at&#39; this removed  removed AmbiguousFunction error. There was another error due to default scope sorting conflicting with order by date here so adding unscope(;order) solved the 2nd issue"}], "tags": [], "owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1550520899, "creation_date": 1550520899, "answer_id": 54754705, "question_id": 54747157, "link": "https://stackoverflow.com/questions/54747157/rails-count-of-users-grouped-by-created-at-day-postgresql/54754705#54754705", "title": "Rails, Count of Users Grouped by created_at day - PostgreSQL", "body": "<blockquote>\n  <p>ActiveRecord::StatementInvalid: PG::AmbiguousFunction</p>\n</blockquote>\n\n<p>This error occurs when our query contains a column name, which may belong to more than one table. For example, we have two tables, <code>User</code> and <code>Company</code>, and both of them have a column called <code>name</code>. Now the following query would raise an error similar to the one that you are facing:</p>\n\n<pre><code>User.joins(:companies).where(\"name = ABC\")\n</code></pre>\n\n<p>This happens because we do not specify which table to search the <code>name</code> in. Hence, <code>ActiveRecord</code> gets confused and cannot create a unique query.<br>\nIn the case mentioned above, the error can be resolved simply by prepending <code>spree_users</code> to the <code>created_at</code> column name used in the <code>order</code> and <code>group</code> queries:</p>\n\n<pre><code>Spree::User.joins(:orders)\n       .where(spree_orders: { completed_at: params[:start_date]..params[:end_date] })\n       .order(\"DATE_TRUNC('day', 'spree_users.created_at')\")\n       .group(\"DATE_TRUNC('day', 'spree_users.created_at')\")\n       .count\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 54754705, "answer_count": 2, "score": 0, "last_activity_date": 1550520899, "creation_date": 1550492341, "last_edit_date": 1550498741, "question_id": 54747157, "link": "https://stackoverflow.com/questions/54747157/rails-count-of-users-grouped-by-created-at-day-postgresql", "title": "Rails, Count of Users Grouped by created_at day - PostgreSQL", "body": "<p>I am using Rails 5, PostgreSQL. I need to get count of users grouped by created_at day, using postgres DATE_TRUNC. \nThe conditions are users created within a date range and have orders within the same date range. </p>\n\n<p>Below is my code which result in an AmbiguousFunction error</p>\n\n<pre><code>Spree::User.joins(:orders)\n           .where(spree_orders: { completed_at: params[:start_date]..params[:end_date] })\n           .order(\"DATE_TRUNC('day', 'created_at')\")\n           .group(\"DATE_TRUNC('day', 'created_at')\")\n           .count\n</code></pre>\n\n<p>The params of start_date and end_date are as follow:</p>\n\n<pre><code>params[:end_date] = Time.current.end_of_day\nparams[:start_date] = (Time.current - 200.days).beginning_of_day\n</code></pre>\n\n<p>I get the following error</p>\n\n<blockquote>\n  <p>ActiveRecord::StatementInvalid: PG::AmbiguousFunction: ERROR:  function date_trunc(unknown, unknown) is not unique</p>\n</blockquote>\n\n<p>and even when I explicitly write spree_users.created_at  I get the same error.</p>\n\n<p>Is there a better way to achieve the required or a solution for this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1550476145, "post_id": 54742552, "comment_id": 96267337, "body": "This <code>[object Object]</code> indicates that you didn&#39;t pass the params properly from JavaScript, so this question should not be about Ruby at all."}, {"owner": {"reputation": 1457, "user_id": 6276241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f64f62cb877130d0f4e0b036c2cdfd12?s=128&d=identicon&r=PG", "display_name": "jdecid", "link": "https://stackoverflow.com/users/6276241/jdecid"}, "edited": false, "score": 5, "creation_date": 1550476188, "post_id": 54742552, "comment_id": 96267357, "body": "The problem is that you are sending &quot;[object Object]&quot; as an string itself, it&#39;s not a real Object, the problem is in JS, not Rails"}, {"owner": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1550476436, "post_id": 54742552, "comment_id": 96267456, "body": "@MarekLipka Thank you for your comment.And I will change my question."}, {"owner": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "reply_to_user": {"reputation": 1457, "user_id": 6276241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f64f62cb877130d0f4e0b036c2cdfd12?s=128&d=identicon&r=PG", "display_name": "jdecid", "link": "https://stackoverflow.com/users/6276241/jdecid"}, "edited": false, "score": 0, "creation_date": 1550476452, "post_id": 54742552, "comment_id": 96267462, "body": "@JosepJoestar Thank you for your comment.And I will change my question."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1550476673, "post_id": 54742552, "comment_id": 96267566, "body": "you need to call <code>JSON.stringify</code> before adding to the url params"}, {"owner": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550476858, "post_id": 54742552, "comment_id": 96267646, "body": "@maxpleaner I have tried to do this.But my params have be encoded with encodeURIComponent and if I use JSON.stringify,it will be too long with url."}], "answers": [{"comments": [{"owner": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "edited": false, "score": 0, "creation_date": 1550477010, "post_id": 54742705, "comment_id": 96267717, "body": "Thank you.I have tried to do this.But my params have be encoded with encodeURIComponent and if I use JSON.stringify,it will be too long with url. And I have found some answers about this question that I can use POST method and  pass data in JSON."}, {"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "reply_to_user": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "edited": false, "score": 0, "creation_date": 1550477080, "post_id": 54742705, "comment_id": 96267746, "body": "I think you should use POST for any data that can potentially become too big for a URL in any encoding."}], "tags": [], "owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "is_accepted": false, "score": 3, "last_activity_date": 1550476774, "creation_date": 1550476774, "answer_id": 54742705, "question_id": 54742552, "link": "https://stackoverflow.com/questions/54742552/convert-object-object-to-json/54742705#54742705", "title": "Convert [object Object] to JSON", "body": "<p>I think you are passing the object like so in your call </p>\n\n<pre><code>$.ajax.post('/to/some/url', data: { test: js_object } );\n</code></pre>\n\n<p>where <code>test</code> is something like <code>{ \"some\" : \"value\" }</code>. </p>\n\n<p>What you need to do is to first stringify the object. Something like this should do: </p>\n\n<pre><code>$.ajax.post('/to/some/url', data: { test: JSON.stringify(js_object) } );\n</code></pre>\n\n<p>When you send objects directly, they are converted to a string by JavaScript and when JS converts an object to string automatically, it converts it into <code>[object Object]</code>. </p>\n\n<p>To prove, just run the these lines in console one after another:</p>\n\n<pre><code>console.log({a:'b'});\nconsole.log({a:'b'}.toString());\nconsole.log(JSON.stringify({a:'b'}));\n</code></pre>\n\n<p>You will figure out the difference!</p>\n"}], "owner": {"reputation": 2003, "user_id": 9561784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfe50e60a48ca2f6bf0c798e7fdfd3b?s=128&d=identicon&r=PG&f=1", "display_name": "Root", "link": "https://stackoverflow.com/users/9561784/root"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1550476774, "creation_date": 1550476068, "last_edit_date": 1550476302, "question_id": 54742552, "link": "https://stackoverflow.com/questions/54742552/convert-object-object-to-json", "title": "Convert [object Object] to JSON", "body": "<p>I have to pass some params from js to rails. And because the params are too long, I have to use <code>post</code> method and make the params be JSON, not string. But I can't change the parts back to JSON in rails.</p>\n\n<pre><code>&lt;ActionController::Parameters {\" \"=&gt;nil, \"test\"=&gt;\"[object Object]\", \"controller\"=&gt;\"super\", \"action\"=&gt;\"addArticle\"} permitted: false&gt;\n</code></pre>\n\n<p>And I want to get the params in <code>parms[:test]</code> [sic]. But I can only get this:</p>\n\n<pre><code>params[:test]\n#=&gt; [object Object]\n</code></pre>\n\n<p>So, please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1550475799, "post_id": 54742486, "comment_id": 96267183, "body": "It does not seem to be related to references, the <code>events</code> table does not have <code>expiry_date</code> column.  Have you run the migrations?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1550476684, "post_id": 54742486, "comment_id": 96267570, "body": "@Sid yes did, I get same error with reference, which I got from solution provided by Marek Lipka. Updating question!"}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550476940, "post_id": 54742541, "comment_id": 96267684, "body": "Yes I need to filter it out (not associated record needed further) so joins worked, I forgot  it &amp; tried only <code>includes</code>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477017, "post_id": 54742541, "comment_id": 96267719, "body": "Tried with <code>eager_load</code> but threw same error I got with <code>includes</code> with <code>references</code> what I added in question update, please check and comment here what possible reason can be for that."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477140, "post_id": 54742541, "comment_id": 96267778, "body": "@ray is it the same error when you use <code>references</code> or <code>eager_load</code>? What does the DB query look like?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477379, "post_id": 54742541, "comment_id": 96267868, "body": "<code>joins</code> is enough for me now but I am curious about further i got in update in question. This I faced previous also for <code>includes</code> - <code>references</code> used for <code>undefined column for table</code> error but later got error column ambiguity error for order(&#39;column_name&#39;) so I used to provide it by order(<code>table_name.column_name</code>)"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477518, "post_id": 54742541, "comment_id": 96267930, "body": "@ray I edited my answer to address this issue, please check."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477766, "post_id": 54742541, "comment_id": 96268057, "body": "But why table_name is explicitly needed column is present in both tables? If no table_name is provided it should consider target table in sql query. It can be more advantageous"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550478075, "post_id": 54742541, "comment_id": 96268209, "body": "It&#39;s the question for DB engines developers. But TBH for me it&#39;s quite obvious that when you references the column present in at least 2 tables in join query, you have to specify which specific column (i.e. of which table) you have in mind to avoid ambiguity."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1550479464, "last_edit_date": 1550479464, "creation_date": 1550476008, "answer_id": 54742541, "question_id": 54742486, "link": "https://stackoverflow.com/questions/54742486/activerecordstatementinvalid-mysql2error-unknown-column-for-where-query/54742541#54742541", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column for `where` query when using includes", "body": "<p>By default, <code>includes</code> doesn't perform <code>left join</code>, it performs two separate DB queries instead. You can force <code>left join</code> using <code>eager_load</code>, like this:</p>\n\n<pre><code>MobileApplication.eager_load(:events).where('events.expiry_date &gt;= ?', Time.zone.now)\n</code></pre>\n\n<p>or, if you in fact don't need eager loading (I don't know that), you can simply use <code>joins</code>:</p>\n\n<pre><code>MobileApplication.joins(:events).where('events.expiry_date &gt;= ?', Time.zone.now)\n</code></pre>\n\n<p>About the error with using <code>references</code> or <code>eager_load</code>: You clearly try to do ordering by <code>created_at</code> somewhere (though you didn't include this in the question) like: </p>\n\n<pre><code>order('created_at DESC')\n</code></pre>\n\n<p>So, obviously, DB doesn't know what table you have in mind with <code>joins</code>, because there is <code>created_at</code> column both in <code>mobile_applications</code> or <code>events</code>. So you need to specify the 'target' table, like:</p>\n\n<pre><code>order('mobile_applications.created_at DESC')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550477471, "post_id": 54742654, "comment_id": 96267904, "body": "<code>includes</code> with <code>references</code> I used threw column ambiguity error for <code>created_at</code>, I guess it is default_scope which fire <code>order</code> query. Perhaps <code>joins</code> worked for me just to filter it."}], "tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 1, "last_activity_date": 1550476571, "creation_date": 1550476571, "answer_id": 54742654, "question_id": 54742486, "link": "https://stackoverflow.com/questions/54742486/activerecordstatementinvalid-mysql2error-unknown-column-for-where-query/54742654#54742654", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column for `where` query when using includes", "body": "<p>From rails 4.x, you must add keyword <code>references</code>:</p>\n\n<pre><code>MobileApplication.includes(:events).references(:events).where(\"events.expiry_date &gt;= ?\", Time.zone.now)\n</code></pre>\n"}], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1066, "favorite_count": 0, "accepted_answer_id": 54742541, "answer_count": 2, "score": 1, "last_activity_date": 1550479464, "creation_date": 1550475720, "last_edit_date": 1550477190, "question_id": 54742486, "link": "https://stackoverflow.com/questions/54742486/activerecordstatementinvalid-mysql2error-unknown-column-for-where-query", "title": "ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column for `where` query when using includes", "body": "<p>I have the following associations:</p>\n\n<p>mobile_application.rb</p>\n\n<pre><code>has_many :events\n</code></pre>\n\n<p>event.rb</p>\n\n<pre><code>belongs_to :mobile_application\n</code></pre>\n\n<p>The following runs properly:</p>\n\n<pre><code>MobileApplication.includes(:events)\n#=&gt; MobileApplication Load (1.6ms)  SELECT `mobile_applications`.* FROM `mobile_applications`  ORDER BY created_at desc\n#   Event Load (1.3ms)  SELECT `events`.* FROM `events` WHERE `events`.`mobile_application_id` IN (746, 745, 744, ....\n</code></pre>\n\n<p>but when I tried with the following,</p>\n\n<pre><code>MobileApplication.includes(:events).where(\"events.expiry_date &gt;= ?\", Time.zone.now)\n</code></pre>\n\n<p>it throws an error:</p>\n\n<pre><code>MobileApplication Load (1.2ms)  SELECT `mobile_applications`.* FROM `mobile_applications` WHERE (events.expiry_date &gt;= '2019-02-18 07:34:40.738517')  ORDER BY created_at desc\nMysql2::Error: Unknown column 'events.expiry_date' in 'where clause': SELECT `mobile_applications`.* FROM `mobile_applications` WHERE (events.expiry_date &gt;= '2019-02-18 07:34:40.738517')  ORDER BY created_at desc\nActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'events.expiry_date' in 'where clause': SELECT `mobile_applications`.* FROM `mobile_applications` WHERE (events.expiry_date &gt;= '2019-02-18 07:34:40.738517')  ORDER BY created_at desc\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Please suggest how I can filter it. Using <code>references</code> also throws the following error &amp; also got same with answer provided by Marek Lipka,</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: Column 'created_at' in \norder clause is ambiguous: SELECT `mobile_applications`.`id` AS t0_r0, \n`mobile_applications`.`name` AS t0_r1, ...\n</code></pre>\n\n<p>I guess it is due to column ambiguity created by <code>default_scope</code> present in model to order it by <code>created_at</code> which is present in both associated tables.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sqlite", "rails-activerecord"], "comments": [{"owner": {"reputation": 403, "user_id": 4034806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f58f4a7e64e4c118a1de7ffcc2681d?s=128&d=identicon&r=PG", "display_name": "Sohair Ahmad", "link": "https://stackoverflow.com/users/4034806/sohair-ahmad"}, "edited": false, "score": 2, "creation_date": 1550473205, "post_id": 54741893, "comment_id": 96265960, "body": "should not <code>userroles</code> be <code>user_roles</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 10706174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abe39094dc66a87ffe959bb40fef139?s=128&d=identicon&r=PG&f=1", "display_name": "gangothri", "link": "https://stackoverflow.com/users/10706174/gangothri"}, "edited": false, "score": 0, "creation_date": 1550479630, "post_id": 54741941, "comment_id": 96268914, "body": "this worked for me @user = User.includes(:roles).where(roles: { name: &#39;Player&#39; })"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 191, "user_id": 10706174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abe39094dc66a87ffe959bb40fef139?s=128&d=identicon&r=PG&f=1", "display_name": "gangothri", "link": "https://stackoverflow.com/users/10706174/gangothri"}, "edited": false, "score": 2, "creation_date": 1550479714, "post_id": 54741941, "comment_id": 96268944, "body": "@gangothri, sorry, I was inattentive to your answer. Yes, it is correct, because user_roles table has no <code>name</code> field"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1550473237, "creation_date": 1550473237, "answer_id": 54741941, "question_id": 54741893, "link": "https://stackoverflow.com/questions/54741893/error-while-querying-a-tables-with-has-many-through-relationship-in-rails/54741941#54741941", "title": "Error: while querying a tables with has many through relationship in rails", "body": "<p>By default, <code>includes</code> doesn't perform <code>left join</code> and performs two separate DB queries instead. You can easily force <code>left join</code> though, in this case it's enough to do:</p>\n\n<pre><code>@user = User.includes(:user_roles).where(user_roles: { name: 'Player' })\n</code></pre>\n\n<p>By using <code>user_roles: { }</code> notation you let ActiveRecord know that you want to query DB also by <code>user_roles</code> column and ActiveRecord decides to perform <code>left join</code>. If you don't have the condition easily translatable to this notation, you can force <code>left join</code> using <code>eager_load</code>:</p>\n\n<pre><code>@user = User.eager_load(:user_roles).where('some complex SQL query including user_roles column(s)')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2376, "user_id": 716568, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/5xQyw.jpg?s=128&g=1", "display_name": "LongHike", "link": "https://stackoverflow.com/users/716568/longhike"}, "is_accepted": false, "score": 0, "last_activity_date": 1550475417, "last_edit_date": 1550475417, "creation_date": 1550473313, "answer_id": 54741950, "question_id": 54741893, "link": "https://stackoverflow.com/questions/54741893/error-while-querying-a-tables-with-has-many-through-relationship-in-rails/54741950#54741950", "title": "Error: while querying a tables with has many through relationship in rails", "body": "<p>You need to keep your table names consistent:</p>\n\n<p>Wrong:</p>\n\n<pre><code>User.includes(:userroles).where(\"userroles.name = ?\",\"Player\")\n</code></pre>\n\n<p>Right (with underscore)</p>\n\n<pre><code>User.includes(:user_roles).where(\"user_roles.name = ?\",\"Player\")\n</code></pre>\n\n<p><strong>Addendum</strong> (I'm not not on my dev machine right now, so this is untested)</p>\n\n<pre><code>User.joins(:user_roles).where(\"user_roles.name = ?\", \"Player\")\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 10706174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abe39094dc66a87ffe959bb40fef139?s=128&d=identicon&r=PG&f=1", "display_name": "gangothri", "link": "https://stackoverflow.com/users/10706174/gangothri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54741941, "answer_count": 2, "score": -2, "last_activity_date": 1550477196, "creation_date": 1550472996, "last_edit_date": 1550473956, "question_id": 54741893, "link": "https://stackoverflow.com/questions/54741893/error-while-querying-a-tables-with-has-many-through-relationship-in-rails", "title": "Error: while querying a tables with has many through relationship in rails", "body": "<p>I am trying to pop up a modal which should display the user with role \"player\", I implemented three tables user role and userrole where user and role has, has many through association by userrole table.</p>\n\n<p>the condition is as follows \none user can be a player or admin or both,\nwhile displaying we should display users with the role, player only.</p>\n\n<p>schema </p>\n\n<pre><code> create_table \"roles\", force: :cascade do |t|\n    t.string \"name\"\n    t.boolean \"active\"\n    t.integer \"counter\"\n end\n  create_table \"user_roles\", force: :cascade do |t|\n    t.integer \"role_id\"\n    t.integer \"user_id\"\n    t.index [\"role_id\"], name: \"index_user_roles_on_role_id\"\n    t.index [\"user_id\"], name: \"index_user_roles_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"first_name\"\n    t.string \"last_name\"\n    t.string \"email\"\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n    t.index [\"team_id\"], name: \"index_users_on_team_id\"\n  end\n</code></pre>\n\n<p>the table model is as follows</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_roles\n  has_many :roles, through: :user_roles, :dependent =&gt; :destroy\nend\nclass UserRole &lt; ApplicationRecord\n  belongs_to :role\n  belongs_to :user\n  validates :user_id, :uniqueness =&gt; { :scope =&gt; :role_id }\nend\n\nclass Role &lt; ApplicationRecord\n    has_many :user_roles\n    has_many :users, through: :user_roles ,:dependent =&gt; :destroy   \nend\n</code></pre>\n\n<p>in team controller i have </p>\n\n<pre><code>def load_users\n              @user = User.includes(:userroles).where('userroles.name = ?',\"Player\")\n\n                respond_to do |format|\n                  format.html\n                  format.js\n                  format.json\n                end\n\n            end\n</code></pre>\n\n<p>log shows following error</p>\n\n<blockquote>\n  <p>Error (SQLite3::SQLException: no such column: userroles.name: SELECT\n  \"users\".* FROM \"users\" WHERE (userroles.name = 'Player')):</p>\n</blockquote>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550471552, "post_id": 54741585, "comment_id": 96265350, "body": "Examine your <code>mygem.gemspec</code> file and change <code>mygemserver.com</code> to the name of the gemserver you want to push to (presumably <code>rubygems.org</code>.)"}, {"owner": {"reputation": 85, "user_id": 8654845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a062881eb20b954b7e041a6d4ff7106?s=128&d=identicon&r=PG&f=1", "display_name": "Bablu Patel", "link": "https://stackoverflow.com/users/8654845/bablu-patel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1550733673, "post_id": 54741585, "comment_id": 96379429, "body": "Thanks a lot. Now this is working."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8654845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a062881eb20b954b7e041a6d4ff7106?s=128&d=identicon&r=PG&f=1", "display_name": "Bablu Patel", "link": "https://stackoverflow.com/users/8654845/bablu-patel"}, "edited": false, "score": 0, "creation_date": 1550733773, "post_id": 54747633, "comment_id": 96379466, "body": "I changed as Aleksei Matiushkin told."}], "tags": [], "owner": {"reputation": 4754, "user_id": 1209628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa17169df5962bb7d05e661c3b6ba4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/1209628/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1550493951, "creation_date": 1550493951, "answer_id": 54747633, "question_id": 54741585, "link": "https://stackoverflow.com/questions/54741585/publishing-ruby-gem-to-rubygem-org/54747633#54747633", "title": "Publishing Ruby gem to RubyGem.org", "body": "<p>As Aleksei mentioned, you should check the gemspec file of your gem.</p>\n\n<p>In your gemspec file you probably find something like (this is the default after generating a gem skeleton):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>spec.metadata[\"allowed_push_host\"] = \"TODO: Set to 'http://mygemserver.com'\"\n</code></pre>\n\n<p>Then change the spec accordingly as follows:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># ...\nif spec.respond_to?(:metadata)\n  spec.metadata[\"allowed_push_host\"] = \"https://rubygems.org\"\n\n  spec.metadata[\"homepage_uri\"] = spec.homepage\n  spec.metadata[\"source_code_uri\"] = spec.homepage \n  #spec.metadata[\"changelog_uri\"] = \"\"\nelse\n  raise \"RubyGems 2.0 or newer is required to protect against public gem pushes.\"\nend\n# ...\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8654845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a062881eb20b954b7e041a6d4ff7106?s=128&d=identicon&r=PG&f=1", "display_name": "Bablu Patel", "link": "https://stackoverflow.com/users/8654845/bablu-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54747633, "answer_count": 1, "score": 1, "last_activity_date": 1550493951, "creation_date": 1550471463, "question_id": 54741585, "link": "https://stackoverflow.com/questions/54741585/publishing-ruby-gem-to-rubygem-org", "title": "Publishing Ruby gem to RubyGem.org", "body": "<p>When i am publishing my custom ruby gem to <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">https://rubygems.org</a> using following command</p>\n\n<pre><code>   gem push d2w-0.1.0.gem\n</code></pre>\n\n<p>Getting following errors</p>\n\n<pre><code>   ERROR:  While executing gem ... (SocketError)\n   Failed to open TCP connection to mygemserver.com:80 (getaddrinfo: nodename nor servname provided, or not known)\n</code></pre>\n\n<p>I want to know why this error is coming and please tell what i am doing wrong</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1550473368, "creation_date": 1550473368, "answer_id": 54741958, "question_id": 54739783, "link": "https://stackoverflow.com/questions/54739783/how-to-pass-number-field-to-controller-as-parameter/54741958#54741958", "title": "How to pass number_field to controller as parameter?", "body": "<p>For your case \"that the user fills\", You have to user a form with a submit button, Here is a relate <a href=\"https://stackoverflow.com/questions/13414663/using-rails-link-to-for-links-that-post\">question</a>, If the value is determined you can use <code>link_to</code> otherwise a form is better, Although sometimes I rely on JS or Jquery, I give the <code>link_to</code> a specific <code>id</code> and I give the input field and <code>id</code> too (HTML id), Then make an action listener on the the <code>&lt;a&gt;</code> that <code>link_to</code> generates, Once user click on it I get the data and submit the data.</p>\n\n<p>The problem for the JS way is that if you are listing a table for more than one link_to for the product with multiple <code>numeric_field</code> you have to make sure that the <code>id</code> is unique, you can simply doing this by adding <code>_#{id}</code> part to the generated <code>id</code>.</p>\n"}], "owner": {"reputation": 345, "user_id": 5425522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45dbdd22b76c06be2e2781c4ab86b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Humberto", "link": "https://stackoverflow.com/users/5425522/eduardo-humberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554105773, "creation_date": 1550457733, "question_id": 54739783, "link": "https://stackoverflow.com/questions/54739783/how-to-pass-number-field-to-controller-as-parameter", "title": "How to pass number_field to controller as parameter?", "body": "<p>The problem is this: I am showing some data to the user in a table and in it has a field of the numeric type that the user fills. However, I do not know how to send the value populated by the user as a parameter to the controller.</p>\n\n<p>I've tried using the following syntax: </p>\n\n \n\n<p></p>\n\n<pre><code>&lt;td&gt;&lt;%= number_field :stock, params[:amount] %&gt;&lt;/td&gt; ## HERE IS THE PROBLEM\n\n&lt;td&gt;&lt;%= link_to 'Buy', new_transaction_path(stock: {stock_id: \"#{stock[:id]}\", buy_price: \"#{stock[:value]}\", amount: \"#{params[:amount]}\", transaction_type: 'buy'}), method: :post %&gt;&lt;/td&gt;\n</code></pre>\n\n<p></p>\n\n<p>I would like to pass the value that the user informed thought the number_field as a parameter to the controller, but it's not working..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-i18n"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7806106"}, "edited": false, "score": 0, "creation_date": 1550462994, "post_id": 54739471, "comment_id": 96262967, "body": "look, I put some images now, browser and terminal"}], "tags": [], "owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "is_accepted": false, "score": 1, "last_activity_date": 1550454858, "creation_date": 1550454858, "answer_id": 54739471, "question_id": 54739259, "link": "https://stackoverflow.com/questions/54739259/object-must-be-a-date-datetime-or-time-object-nil-given/54739471#54739471", "title": "Object must be a Date, DateTime or Time object. nil given", "body": "<p>After you try to save <code>movie</code> and it fails, look at the resulting error, and also display the errors on that object, e.g.</p>\n\n<pre><code>movie.errors.full_messages\n</code></pre>\n\n<p>That should give you more details about why it failed.</p>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1550464032, "creation_date": 1550464032, "answer_id": 54740484, "question_id": 54739259, "link": "https://stackoverflow.com/questions/54739259/object-must-be-a-date-datetime-or-time-object-nil-given/54740484#54740484", "title": "Object must be a Date, DateTime or Time object. nil given", "body": "<p>Your <code>localize</code> hates <code>nil</code> values, so don't give it one.</p>\n\n<p>Hacky but short:</p>\n\n<pre><code>&lt;td&gt;&lt;%= movie.release_date &amp;&amp; localize(movie.release_date, format: :long) %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Nice and long:</p>\n\n<pre><code>&lt;% unless movie.release_date.nil? %&gt;\n  &lt;td&gt;&lt;%= localize(movie.release_date, format: :long) %&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1550492441, "post_id": 54746875, "comment_id": 96276230, "body": "Nice. OP, this answer is better than mine for your scenario."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7806106"}, "edited": false, "score": 0, "creation_date": 1550513066, "post_id": 54746875, "comment_id": 96287941, "body": "nice, thks Stefan! :D u and Amadan helped me a lot!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1550491314, "creation_date": 1550491314, "answer_id": 54746875, "question_id": 54739259, "link": "https://stackoverflow.com/questions/54739259/object-must-be-a-date-datetime-or-time-object-nil-given/54746875#54746875", "title": "Object must be a Date, DateTime or Time object. nil given", "body": "<p>You can pass a default value to <code>localize</code>:</p>\n\n<pre><code>&lt;td&gt;&lt;%= localize(movie.release_date, format: :long, default: '-') %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>The default value is returned whenever the first argument is <code>nil</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7806106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "accepted_answer_id": 54746875, "answer_count": 3, "score": 2, "last_activity_date": 1550491314, "creation_date": 1550452610, "last_edit_date": 1550462861, "question_id": 54739259, "link": "https://stackoverflow.com/questions/54739259/object-must-be-a-date-datetime-or-time-object-nil-given", "title": "Object must be a Date, DateTime or Time object. nil given", "body": "<pre><code>Object must be a Date, DateTime or Time object. nil given.\nExtracted source (around line #23):                  \n\n        &lt;td&gt;&lt;%= localize(movie.release_date, format: :long) %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>when I try to save with the blank date this error occurs, is there a strong textsolution where I can save without needing to fill it?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Yh6kj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yh6kj.png\" alt=\"my browser\"></a></p>\n\n<p><strong>==========================================================================</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/zTHYj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zTHYj.png\" alt=\"my terminal\"></a></p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1550447145, "post_id": 54738696, "comment_id": 96259966, "body": "I tried <code>a | b</code> and simply works."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1550447180, "post_id": 54738696, "comment_id": 96259977, "body": "I&#39;m using <code>2.5.1</code> as well"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1550447210, "post_id": 54738696, "comment_id": 96259989, "body": "Yes, it works for me.  <code>a.union(b)</code> does not.  I&#39;m looking for a <b>written</b> method."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 2, "creation_date": 1550447256, "post_id": 54738696, "comment_id": 96260003, "body": "It seems to me <code>union</code> is just for sets"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1550447333, "post_id": 54738696, "comment_id": 96260019, "body": "OK, <code>Set.union</code>.  The documentation seems to overlap these as inheritance is at play."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 3, "creation_date": 1550447547, "post_id": 54738696, "comment_id": 96260063, "body": "<code>a.|(b)</code>. Does this look <b>written</b> enough to you?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550447738, "post_id": 54738696, "comment_id": 96260106, "body": "Not really.  I&#39;m looking for a word like <code>.merge</code> but it seems there is none."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550447971, "post_id": 54738696, "comment_id": 96260150, "body": "@Rich_F: out of curiosity, what do you expect to be able to do with a word that you can&#39;t with method <code>|</code>?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550448046, "post_id": 54738696, "comment_id": 96260167, "body": "@SergioTulentsev I&#39;m just seeing if I missed it.  There&#39;s no difference in expectations.  Usually something like <code>|</code> is an alias for another fuller written method.  I thought I had missed it."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 3, "creation_date": 1550448323, "post_id": 54738696, "comment_id": 96260230, "body": "Ok. <code>a | b</code> is now written for you. May be <code>(a + b).uniq</code> more written?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550448420, "post_id": 54738696, "comment_id": 96260256, "body": "No, this isn&#39;t about creating a new way around it.  I&#39;m looking for the alias to <code>|</code>, which seems elusive, or non-existent.  Am I not finding it for some reason?  <code>a.|(b)</code> seems rather confusing in a language that is filled with aliases."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 4, "creation_date": 1550448502, "post_id": 54738696, "comment_id": 96260267, "body": "<code>union</code> was introduced in 2.6, it&#39;s not available in 2.5 and you&#39;re correct in that it appears there&#39;s no alternate named method for <code>|</code> (which is probably why they added <code>union</code>"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1550448553, "post_id": 54738696, "comment_id": 96260273, "body": "@JayDorsey Thank you.  Exactly what I was looking for."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 2, "creation_date": 1550448832, "post_id": 54738696, "comment_id": 96260315, "body": "@JayDorsey, using <code>|</code> you can merge only 2 arrays, using <code>union</code> as much as you want. So they are no aliases"}, {"owner": {"reputation": 1607, "user_id": 7151673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257324e88d03e0fd01d7f09f3bd5a788?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7151673/max"}, "edited": false, "score": 3, "creation_date": 1550449310, "post_id": 54738696, "comment_id": 96260397, "body": "I don&#39;t see a method named <code>union</code> at <a href=\"https://ruby-doc.org/core-2.5.1/Array.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.1/Array.html</a>. Is there some other documentation you&#39;re looking at?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550455246, "post_id": 54738696, "comment_id": 96261439, "body": "<a href=\"https://docs.ruby-lang.org/en/2.0.0/Array.html#method-i-7C\" rel=\"nofollow noreferrer\">Array#|</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550460960, "post_id": 54738696, "comment_id": 96262537, "body": "Cannot be reproduced. <code>Array#union</code> does not raise an undefined method error."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1550489823, "post_id": 54738696, "comment_id": 96274651, "body": "BTW, <a href=\"http://ruby-doc.org/core-2.6/Array.html#method-i-union\" rel=\"nofollow noreferrer\"><code>union</code></a> in Ruby 2.6 isn&#39;t just an alias for <code>|</code> \u2013 unlike the operator, it can take <i>multiple</i> arguments. Just like <code>push</code> vs <code>&lt;&lt;</code>."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550498091, "post_id": 54738696, "comment_id": 96279649, "body": "@Max Some people don&#39;t publish versions.  See how Jay Dorsey replied?  2.6 has <code>union</code>.  That&#39;s why I was confused."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550498128, "post_id": 54738696, "comment_id": 96279678, "body": "@sawa What version are you running?  Please read the OP.  Version 2.5.1, not the version you&#39;re using."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550503942, "post_id": 54738696, "comment_id": 96283244, "body": "@Rich_F It does say that you are asking for a method that does not function in Ruby 2.5.1. And <code>union</code> is not defined for arrays in Ruby 2.5.1. Doesn&#39;t that satisfy your requirement? Furthermore, that does not say anything about the version you have, which implies you want the method to work in the newest Ruby. Please read your own OP."}, {"owner": {"reputation": 1607, "user_id": 7151673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257324e88d03e0fd01d7f09f3bd5a788?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7151673/max"}, "edited": false, "score": 1, "creation_date": 1550507434, "post_id": 54738696, "comment_id": 96285322, "body": "@Rich_F I can understand you were confused, since Ruby 2.6 has the method. You said the documentation for 2.5.1 mentioned <code>Array#union</code>, so I was trying to figure out where you were seeing that."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 1607, "user_id": 7151673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257324e88d03e0fd01d7f09f3bd5a788?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7151673/max"}, "edited": false, "score": 0, "creation_date": 1550516053, "post_id": 54738696, "comment_id": 96289174, "body": "@Max People don&#39;t always mention the version they&#39;re talking about, and just went ahead saying the method <code>union</code> could be used, and I kept getting errors."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550447830, "post_id": 54738844, "comment_id": 96260123, "body": "I&#39;ve just tripped over the <code>.union</code> but that might have been for a <code>Set</code> only.  I&#39;m not insisting, I&#39;m just looking to see if I haven&#39;t found it.  I can always run off to a <code>Set</code>."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 2, "creation_date": 1550448253, "post_id": 54738844, "comment_id": 96260220, "body": "Then you need to rewrite the question.  You explicitly said &quot;I&#39;m looking for a written method.&quot;  Since one doesn&#39;t exist, it&#39;s easy to write one if that&#39;s your need.  If that&#39;s not your need, explain your need more unambiguously."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550448334, "post_id": 54738844, "comment_id": 96260233, "body": "Yes, one that&#39;s already present.  I further explained how the documentation lead me to <code>.union</code>.  <code>Looking for</code>, not requesting to have one written for me, which I&#39;m capable of doing, as evidence in my original post."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550448599, "post_id": 54738844, "comment_id": 96260284, "body": "Ah, so you don&#39;t have a coding question.  You want others to confirm the absence of a particular implementation feature, which you could observe by direct testing.  In that case I don&#39;t see any point to your question."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550448658, "post_id": 54738844, "comment_id": 96260288, "body": "I direct tested it.  I posted that direct test in my original post.  Documentation said otherwise.  Read the question as posted."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550451712, "post_id": 54738844, "comment_id": 96260843, "body": "No, documentation does not say otherwise: <a href=\"https://ruby-doc.org/core-2.5.3/Array.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.3/Array.html</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1550477200, "post_id": 54738844, "comment_id": 96267796, "body": "Alternatively: <code>others.inject(self, &amp;:|)</code> \u2013 more concise and doesn&#39;t alter the argument."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550498294, "post_id": 54738844, "comment_id": 96279796, "body": "@pjs There is no <code>union</code> there.  I saw a reference to <code>array.union</code> and I stated the version I was using.  Version <code>2.6</code> does have <code>array.union</code>.  You still don&#39;t understand I was asking for clarification.  This isn&#39;t a puzzle, it&#39;s a question.  Documentation is a big part of software."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1550500909, "post_id": 54738844, "comment_id": 96281434, "body": "@Stefan Very elegant, I&#39;ve modified my answer accordingly."}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 3, "last_activity_date": 1550500760, "last_edit_date": 1550500760, "creation_date": 1550447690, "answer_id": 54738844, "question_id": 54738696, "link": "https://stackoverflow.com/questions/54738696/ruby-array-merge-method/54738844#54738844", "title": "Ruby array merge method", "body": "<p><code>Array#union</code> works fine in Ruby 2.6, but if it's not in Ruby 2.5 and you insist on having a method named <code>union</code>, the following worked like a champ for me in Ruby 2.3.7:</p>\n\n<pre><code>[1,2,3].union [4,5,6]  # =&gt; NoMethodError: undefined method `union' for [1, 2, 3]:Array\n\nclass Array\n  def union(other)\n    self | other\n  end\nend\n\n[1,2,3].union [4,5,6]  # =&gt; [1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>To get functionality comparable to 2.6's <code>Array#union</code> documented behavior in earlier versions of Ruby:</p>\n\n<pre><code>class Array\n  def union(*others)\n    others.inject(self, &amp;:|)\n  end\nend\n\n[1,2].union [3,4], [5]  # =&gt; [1, 2, 3, 4, 5]\n[10,11].union           # =&gt; [10, 11] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1550494324, "last_edit_date": 1550494324, "creation_date": 1550493755, "answer_id": 54747579, "question_id": 54738696, "link": "https://stackoverflow.com/questions/54738696/ruby-array-merge-method/54747579#54747579", "title": "Ruby array merge method", "body": "<p>There's no exact equivalent for <code>Array#|</code>, even in Ruby 2.6.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.6/Array.html#method-i-union\" rel=\"nofollow noreferrer\"><code>Array#union</code></a> is implemented in <a href=\"https://github.com/ruby/ruby/blob/v2_6_1/array.c#L6803\" rel=\"nofollow noreferrer\"><code>array.c#rb_ary_union_multi</code></a> while <a href=\"http://ruby-doc.org/core-2.6/Array.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>Array#|</code></a> is implemented in <a href=\"https://github.com/ruby/ruby/blob/v2_6_1/array.c#L6864\" rel=\"nofollow noreferrer\"><code>array.c#rb_ary_or</code></a>.</p>\n\n<p>They both use <code>rb_ary_union</code> under the hood for small arrays (less than 16 elements) and <code>rb_ary_union_hash</code> for larger arrays but <code>rb_ary_union_multi</code> accepts more than 2 arguments:</p>\n\n<pre><code>a = [1, 2, 3]\nb = [3, 4, 5]\nc = [4, 5, 6]\n\na.union(b, c)\n# =&gt; [1, 2, 3, 4, 5, 6]\na.|(b, c)\n# ArgumentError (wrong number of arguments (given 2, expected 1))\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1550500760, "creation_date": 1550446376, "last_edit_date": 1550460652, "question_id": 54738696, "link": "https://stackoverflow.com/questions/54738696/ruby-array-merge-method", "title": "Ruby array merge method", "body": "<p>I'm looking for a method that is equivalent to <code>Array#|</code>, and whose method name is in ordinary word.</p>\n\n<pre><code>a = [1, 2, 3]\nb = [3, 4, 5]\na|b # =&gt; [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>I'm not looking for new methods. I can write any sort of method that will accomplish this. That's not what I'm asking. I'm wondering if there's an alias. Is there a method like <code>a.merge(b)</code> that isn't a functioning method for arrays in 2.5.1?</p>\n\n<p>It's described in the documentation for version 2.5.1 that <code>|</code> is the same as <code>Array.union(another_array)</code>. But it throws an error.</p>\n\n<pre><code>a.union(b) # &gt;&gt; undefined method `union' for [1, 2, 3]:Array (NoMethodError)\n</code></pre>\n\n<p>Is there such a written method for a <code>union</code>?</p>\n"}, {"tags": ["ruby", "sqlite", "rubygems"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1550444247, "post_id": 54738267, "comment_id": 96259402, "body": "Do you need the most actual version? I had also problems with sqlite3 1.4.0, but version 1.3.13 worked fine for me. <code>gem install sqlite3 -v 1.3.13</code>"}, {"owner": {"reputation": 111, "user_id": 3969865, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4756f6a83c892a2d5ad5b79cf3bd32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Samiul Alam Anik", "link": "https://stackoverflow.com/users/3969865/samiul-alam-anik"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 1, "creation_date": 1550448888, "post_id": 54738267, "comment_id": 96260322, "body": "I was able to resolve that issue using these steps in this link: <a href=\"https://github.com/sparklemotion/sqlite3-ruby/issues/241\" rel=\"nofollow noreferrer\">github.com/sparklemotion/sqlite3-ruby/issues/241</a>"}, {"owner": {"reputation": 1978, "user_id": 371917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad5ed2e23fb9da199240784c4f167092?s=128&d=identicon&r=PG", "display_name": "Peet Brits", "link": "https://stackoverflow.com/users/371917/peet-brits"}, "edited": false, "score": 0, "creation_date": 1550501801, "post_id": 54738267, "comment_id": 96281973, "body": "Perfect timing for this question. I am learning Ruby on Rails and just got this error on my first project."}, {"owner": {"reputation": 111, "user_id": 3969865, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4756f6a83c892a2d5ad5b79cf3bd32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Samiul Alam Anik", "link": "https://stackoverflow.com/users/3969865/samiul-alam-anik"}, "edited": false, "score": 0, "creation_date": 1550619588, "post_id": 54738267, "comment_id": 96332906, "body": "someone put that link in a comment. Don&#39;t know why that comment was deleted."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 3969865, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4756f6a83c892a2d5ad5b79cf3bd32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Samiul Alam Anik", "link": "https://stackoverflow.com/users/3969865/samiul-alam-anik"}, "is_accepted": true, "score": 3, "last_activity_date": 1550444021, "creation_date": 1550444021, "answer_id": 54738429, "question_id": 54738267, "link": "https://stackoverflow.com/questions/54738267/ruby-sqlite3-gem-installation-issue-on-windows-10/54738429#54738429", "title": "Ruby sqlite3 gem installation issue on Windows 10", "body": "<p>adding <code>gem 'sqlite3', git: \"https://github.com/larskanis/sqlite3-ruby\", branch: \"add-gemspec\"</code> in the project Gemfile file works. After that run <code>bundle install</code>. Make sure to install git in the machine. This is the <a href=\"https://github.com/sparklemotion/sqlite3-ruby/issues/241\" rel=\"nofollow noreferrer\">github link</a></p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 11096552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Batz-aRN3Eg/AAAAAAAAAAI/AAAAAAAAAAc/JFGx2VCHdwk/photo.jpg?sz=128", "display_name": "Help with code", "link": "https://stackoverflow.com/users/11096552/help-with-code"}, "is_accepted": false, "score": 1, "last_activity_date": 1550789848, "creation_date": 1550789848, "answer_id": 54817549, "question_id": 54738267, "link": "https://stackoverflow.com/questions/54738267/ruby-sqlite3-gem-installation-issue-on-windows-10/54817549#54817549", "title": "Ruby sqlite3 gem installation issue on Windows 10", "body": "<p>For solving this issue for all the projects I downloaded the gem file from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a> and saved it locally, installed MinGW by cmd</p>\n\n<pre><code>C:\\Sites&gt;ridk exec pacman -S mingw-w64-x86_64-dlfcn\n</code></pre>\n\n<p>and the SQLite 3 gem after </p>\n\n<pre><code>C:\\Sites&gt;gem install --local C:\\sqlite3-1.4.0.gem\n</code></pre>\n\n<p>and it worked for all the next projects created on Sites folder if you need to fix a project already created trying running <code>bundle install</code> again after those lines.</p>\n\n<p>I also tried including the SQLite 3 files to the path but it didn't work for me either</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5020220, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GQinrW1tcI/AAAAAAAAAAI/AAAAAAAABlo/SaKthzflkJc/photo.jpg?sz=128", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5020220/tommy-mertell"}, "is_accepted": false, "score": 1, "last_activity_date": 1552524918, "creation_date": 1552524918, "answer_id": 55153355, "question_id": 54738267, "link": "https://stackoverflow.com/questions/54738267/ruby-sqlite3-gem-installation-issue-on-windows-10/55153355#55153355", "title": "Ruby sqlite3 gem installation issue on Windows 10", "body": "<p>This is what has currently worked for me and it's a per project fix; Samiul Alam Anik's answer, but with an addition. After you follow those steps, you might get a <code>requires Bundler 2</code> and this is solved for me with <code>gem update --system</code> thanks to this <a href=\"https://github.com/bundler/bundler/issues/6937\" rel=\"nofollow noreferrer\">GitHub ticket</a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 3969865, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4756f6a83c892a2d5ad5b79cf3bd32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Samiul Alam Anik", "link": "https://stackoverflow.com/users/3969865/samiul-alam-anik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2251, "favorite_count": 0, "accepted_answer_id": 54738429, "answer_count": 3, "score": 3, "last_activity_date": 1552524918, "creation_date": 1550442594, "question_id": 54738267, "link": "https://stackoverflow.com/questions/54738267/ruby-sqlite3-gem-installation-issue-on-windows-10", "title": "Ruby sqlite3 gem installation issue on Windows 10", "body": "<p>I am very new to ruby and rails. I am trying to install to sqlite3 for trying a tutorial and having issues. I am on Windows 10 and using <code>ruby 2.6.1p33 (2019-01-30 revision 66950) [x64-mingw32]</code>.</p>\n\n<p>Here is the installation error I am getting while running <code>gem install sqlite3-ruby</code>. I have also tried running <code>gem install sqlite3 --platform=ruby -- --with-sqlite3-include=c:/sqlite3/include --with-sqlite3-lib=c:/sqlite3/lib</code></p>\n\n<pre><code>C:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r ./siteconf20190217-3116-1d59gcv.rb extconf.rb\nchecking for sqlite3.h... yes\nchecking for pthread_create() in -lpthread... yes\nchecking for -ldl... no\nchecking for dlopen()... no\nmissing function dlopen\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n    --with-sqlcipher\n    --without-sqlcipher\n    --with-sqlite3-config\n    --without-sqlite3-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-sqlcipher\n    --without-sqlcipher\n    --with-sqlite3-dir\n    --without-sqlite3-dir\n    --with-sqlite3-include\n    --without-sqlite3-include=${sqlite3-dir}/include\n    --with-sqlite3-lib\n    --without-sqlite3-lib=${sqlite3-dir}/lib\n    --with-pthreadlib\n    --without-pthreadlib\n    --with-dllib\n    --without-dllib\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/mkmf.log\n\nextconf failed, exit code 1\n</code></pre>\n\n<p>I have downloaded sqlite3 from their site and here is the folder structure of <code>C:\\sqlite3\\</code></p>\n\n<pre><code>sqldiff.exe\nsqlite3.exe\nsqlite3_analyzer.exe\ninclude\\shell.c\ninclude\\sqlite3.c\ninclude\\sqlite3.h\ninclude\\sqlite3ext.h\nlib\\sqlite3.def\nlib\\sqlite3.dll\n</code></pre>\n\n<p>I have also copied <code>sqldiff.exe, sqlite3.exe and sqlite3_analyzer.exe</code> to <code>C:\\Ruby26-x64\\bin</code>.\nIn my environment variable, I have added <code>C:\\sqlite3\\</code> to <code>PATH</code> and also created a new environment variable <code>sqlite3-dir</code> pointing to <code>C:\\sqlite3\\</code></p>\n\n<p>Could someone please provide some help for this installation problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "rvm", "bundler"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 1, "creation_date": 1550442389, "post_id": 54738120, "comment_id": 96258990, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54563777/brand-new-rails-app-cant-generate-scaffold\">Brand new rails app, can&#39;t generate scaffold</a>"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "edited": false, "score": 0, "creation_date": 1550465124, "post_id": 54739925, "comment_id": 96263471, "body": "yes, i know it it work for me too but...it is not a solution of problem is stupid to make some changes in new app, which should work without any changes"}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "reply_to_user": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "edited": false, "score": 1, "creation_date": 1550481721, "post_id": 54739925, "comment_id": 96269923, "body": "@Axelrod, but that is a problem that only the rails team will be able to fix. And actually there is already a commit fixing it in the 5.2 branch but 5.2.3 would need to be released before it becomes available by default."}, {"owner": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1550514017, "post_id": 54739925, "comment_id": 96288300, "body": "@ulferts okay, another idea how about to reinstall all? I try to but I have feeling than smth may stay....so it didn&#39;t help how do it right?"}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "reply_to_user": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "edited": false, "score": 0, "creation_date": 1550522922, "post_id": 54739925, "comment_id": 96291887, "body": "@Axelrod, you currently cannot work around the need to limit the sqlite3 gem to stay within the 1.3 range. Removing and reinstalling won&#39;t help there. But as soon as it is specified, a call to <code>bundle install</code> will solve the problem."}, {"owner": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1550667561, "post_id": 54739925, "comment_id": 96352248, "body": "@ulferts no, it didn&#39;t help"}], "tags": [], "owner": {"reputation": 643, "user_id": 1821888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d26ad8e176c4bab6b390a432b96ba23f?s=128&d=identicon&r=PG", "display_name": "Carlos Ribeiro", "link": "https://stackoverflow.com/users/1821888/carlos-ribeiro"}, "is_accepted": true, "score": 37, "last_activity_date": 1550458942, "creation_date": 1550458942, "answer_id": 54739925, "question_id": 54738120, "link": "https://stackoverflow.com/questions/54738120/build-new-rails-app-error-loading-the-sqlite3-without-evidently-write-verion/54739925#54739925", "title": "Build new Rails app Error loading the &#39;sqlite3&#39; without evidently write verion", "body": "<p>Try to add this on your Gemfile</p>\n\n<pre><code>gem 'sqlite3', '~&gt; 1.3.6'\n</code></pre>\n\n<p>Instead of having only the SQLite3 without version. </p>\n\n<p>It worked for me</p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 6952242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b64a80fc19cd6b1e6ab350868409a7?s=128&d=identicon&r=PG&f=1", "display_name": "Liang Lyon", "link": "https://stackoverflow.com/users/6952242/liang-lyon"}, "is_accepted": false, "score": 1, "last_activity_date": 1551487071, "creation_date": 1551487071, "answer_id": 54954106, "question_id": 54738120, "link": "https://stackoverflow.com/questions/54738120/build-new-rails-app-error-loading-the-sqlite3-without-evidently-write-verion/54954106#54954106", "title": "Build new Rails app Error loading the &#39;sqlite3&#39; without evidently write verion", "body": "<p>It works for me by adding sqlite3 version in the Gemfile.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 1607361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a698f9f3c4384ad7917d5774ccf6728?s=128&d=identicon&r=PG", "display_name": "jeaddoncel", "link": "https://stackoverflow.com/users/1607361/jeaddoncel"}, "is_accepted": false, "score": 4, "last_activity_date": 1551958717, "creation_date": 1551958717, "answer_id": 55042894, "question_id": 54738120, "link": "https://stackoverflow.com/questions/54738120/build-new-rails-app-error-loading-the-sqlite3-without-evidently-write-verion/55042894#55042894", "title": "Build new Rails app Error loading the &#39;sqlite3&#39; without evidently write verion", "body": "<p>To me, edit your Gemfile:</p>\n\n<blockquote>\n  <p>gem 'sqlite3', '~> 1.3.6'</p>\n</blockquote>\n\n<p>and run this command:</p>\n\n<blockquote>\n  <p>bundle install</p>\n</blockquote>\n"}], "owner": {"reputation": 173, "user_id": 9795796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad1717dc95056d51103dc37eb3acb5?s=128&d=identicon&r=PG&f=1", "display_name": "Axelrod", "link": "https://stackoverflow.com/users/9795796/axelrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3761, "favorite_count": 1, "accepted_answer_id": 54739925, "answer_count": 3, "score": 17, "last_activity_date": 1551958717, "creation_date": 1550441008, "last_edit_date": 1550465748, "question_id": 54738120, "link": "https://stackoverflow.com/questions/54738120/build-new-rails-app-error-loading-the-sqlite3-without-evidently-write-verion", "title": "Build new Rails app Error loading the &#39;sqlite3&#39; without evidently write verion", "body": "<p>When generate new rails app, and start the server \"rails s\", first massage I got:</p>\n\n<blockquote>\n  <p>Puma caught this error: Error loading the 'sqlite3' Active Record adapter. Missing a gem it depends on? can't activate sqlite3 (~> 1.3.6), already activated sqlite3-1.4.0. Make sure all dependencies are added to Gemfile. (LoadError)</p>\n</blockquote>\n\n<p>after reload a page:</p>\n\n<blockquote>\n  <p>ActiveRecord::ConnectionNotEstablished\n  No connection pool with 'primary' found.</p>\n</blockquote>\n\n<pre><code>  def retrieve_connection(spec_name) #:nodoc:\n    pool = retrieve_connection_pool(spec_name)\n    raise ConnectionNotEstablished, \"No connection pool with '#{spec_name}' found.\" unless pool\n    pool.connection\n  end\n</code></pre>\n\n<p>I reinstall ruby, rails, bundler, all except rvm\nand I don't know what to do</p>\n\n<p>P.S.\nthis error disappears when I evidently write sqlite3 verion, but it should work fine from a without it!!!\nHelp!What to do? or maybe reinstall all of it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-i18n", "pundit"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 2, "creation_date": 1550432983, "post_id": 54736987, "comment_id": 96256494, "body": "You have <code>flash[:alert]</code> on the first code and <code>flash[:error]</code> on the second one, does using <code>:alert</code> fixes your issue?"}, {"owner": {"reputation": 1015, "user_id": 3054855, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/774ae7bce6faf0f2227e163399b0809f?s=128&d=identicon&r=PG", "display_name": "puredevotion", "link": "https://stackoverflow.com/users/3054855/puredevotion"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1550433204, "post_id": 54736987, "comment_id": 96256568, "body": "@arieljuod wow. 2hours in, and this is the fix!"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1550433333, "post_id": 54736987, "comment_id": 96256614, "body": "I&#39;d recommend you to read about the Flash hash, you can use :error if you want, just be sure to update the part of your layout that renders that <a href=\"https://guides.rubyonrails.org/action_controller_overview.html#the-flash\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 1015, "user_id": 3054855, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/774ae7bce6faf0f2227e163399b0809f?s=128&d=identicon&r=PG", "display_name": "puredevotion", "link": "https://stackoverflow.com/users/3054855/puredevotion"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1550433974, "post_id": 54736987, "comment_id": 96256836, "body": "Thanks. I&#39;ve been Ruby&#39;ing for a short while now. Lots of manual parts to read!"}], "owner": {"reputation": 1015, "user_id": 3054855, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/774ae7bce6faf0f2227e163399b0809f?s=128&d=identicon&r=PG", "display_name": "puredevotion", "link": "https://stackoverflow.com/users/3054855/puredevotion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550432787, "creation_date": 1550432787, "question_id": 54736987, "link": "https://stackoverflow.com/questions/54736987/flash-not-shown-with-i18n", "title": "Flash not shown with i18n", "body": "<p>My flash message doesn't show when I use i18n, but does when I just use a string. This is in the application controller.</p>\n\n<p>This works:</p>\n\n<pre><code>def user_not_authorized(exception)\n    policy_name = exception.policy.class.to_s.underscore\n    ## require 'pry'; binding.pry\nflash[:alert] = \"You're not invited for this event.\"\n    redirect_to request.referrer || root_path\nend\n</code></pre>\n\n<p>This doesn't show anything:</p>\n\n<pre><code>def user_not_authorized(exception)\n    policy_name = exception.policy.class.to_s.underscore\n    ## require 'pry'; binding.pry\n    flash[:error] = I18n.t \"#{policy_name}.#{exception.query}\", scope: 'pundit',\n                       default: [:default, \"I'm sorry, you're not allowed\"]\n    redirect_to request.referrer || root_path\nend\n</code></pre>\n\n<p>I tried using just <code>t</code> instead of <code>I18n.t</code> but no effect either. </p>\n\n<p>When using <code>pry</code> and running the <code>I18n.t</code> it shows the expected String.  </p>\n\n<p><strong>The i18n file:</strong></p>\n\n<pre><code>pundit:\n  default: \"I'm sorry, but you're not allowed to see this.\"\n  event_policy:\n    show?: 'You cannot view this event. You need an invitation first.'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "carrierwave"], "comments": [{"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1552295245, "post_id": 54736437, "comment_id": 96939818, "body": "Perhaps you&#39;re looking for the <code>recreate_versions!</code> command (<a href=\"https://github.com/carrierwaveuploader/carrierwave#recreating-versions\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave#recreating-versi&zwnj;&#8203;ons</a>) that Carrierwave provides?"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1552393712, "post_id": 54736437, "comment_id": 96984347, "body": "I&#39;d imagine it would work, but I was expecting <code>update</code> to do it for me. More importantly, it seems it gets called somehow, because after saving a new image, the old :optimised version is gone and all that remains is the standard, newly uploaded image. Which again, is not the behaviour I&#39;d expect and I haven&#39;t seen this problem on another project that does similar things @AnujKhandelwal"}, {"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 0, "creation_date": 1552534733, "post_id": 54736437, "comment_id": 97049196, "body": "please update a carrierwave&#39;s version"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 0, "creation_date": 1552561172, "post_id": 54736437, "comment_id": 97060544, "body": "@ogelacinyc I have checked the changelog and since my version - 1.2.2, nothing has changed that could have affected this. I can try upgrading, as there is no harm in that, but was that just a random suggestion or you actually had something in mind?"}, {"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 1, "creation_date": 1552616611, "post_id": 54736437, "comment_id": 97088090, "body": "@MaximFedotov Nope. There are some kind of misunderstaning. My comment was meaning to comment current your carrierwave version. I&#39;m sorry for about that."}], "answers": [{"comments": [{"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1552590532, "post_id": 55168711, "comment_id": 97079777, "body": "That&#39;s the thing, I don&#39;t think this is needed and I&#39;d like to avoid having to add a callback when it might not be needed. On a different project, I am part of, versions get recreated on the update, without anything additional added. And that&#39;s how I&#39;d expect it to work..."}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "reply_to_user": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1552667380, "post_id": 55168711, "comment_id": 97111848, "body": "The best advice I can give you then is to define a private method called <code>recreate_versions_if_needed!</code> then only call <code>cover_image.recreate_versions!</code> conditionally.  I just don&#39;t know enough about your specific apps requirements to advise what those conditions ought to be."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1552738854, "post_id": 55168711, "comment_id": 97130712, "body": "Sure, but do you need to? My question can be boiled down to: Does CarrierWave recreate versions automatically, on uploading a new image? My understanding that it does, hence trying to understand why it doesn&#39;t in my app. I am not doing anything out of ordinary, as far as I can tell. I would rather get to the bottom of the issue and fix it properly than put in a stopgap like adding this callback"}], "tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1552584627, "creation_date": 1552584627, "answer_id": 55168711, "question_id": 54736437, "link": "https://stackoverflow.com/questions/54736437/carrierwave-doesnt-recreate-versions-after-the-model-update/55168711#55168711", "title": "Carrierwave doesn&#39;t recreate versions after the model update", "body": "<p>You need to add an <code>after_save</code> callback to Event and then call <code>recreate_versions!</code> on your mounted uploader.</p>\n\n<p>Assuming you have an Event model with the following, this would solve your problem.</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n  mount_uploader :cover_image, CoverUploader\n  after_save :recreate_versions!\n  delegate :recreate_versions!, to: :cover_image, allow_nil: true\nend\n</code></pre>\n\n<p>See <a href=\"https://github.com/carrierwaveuploader/carrierwave#recreating-versions\" rel=\"nofollow noreferrer\">CarrierWave's README</a> also. </p>\n"}, {"tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": true, "score": 2, "last_activity_date": 1552757976, "creation_date": 1552757976, "answer_id": 55199676, "question_id": 54736437, "link": "https://stackoverflow.com/questions/54736437/carrierwave-doesnt-recreate-versions-after-the-model-update/55199676#55199676", "title": "Carrierwave doesn&#39;t recreate versions after the model update", "body": "<p>@ogelacinyc was partly correct when he found the bug in <code>full_filename</code>. I went back to test normal functionality with creating another version, with a simple dimension change. I could then see that update would recreate the versions by itself, just like I expected.</p>\n\n<p>That made me think that maybe there is something wrong with my <code>version :optimised</code> block. So after commenting one by one, I found that <code>full_filename</code> was the culprit. It could have been <code>model.cover.file</code> failing silently, but I think it was <code>model.id</code>, as can be seen in the description for <a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/a91ab69fdd8052cdf5a5e48ef8baf40939e441fb/lib/carrierwave/uploader/store.rb#L22\" rel=\"nofollow noreferrer\">filename method in Carrierwave</a></p>\n\n<p>So instead, I grab the filename directly, extract extension and substitute it with webp:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def full_filename(for_file = model.file_name.file)\n    extension = File.extname(for_file)\n    \"cover_#{for_file.sub(extension, '.webp')}\"\n  end\n</code></pre>\n\n<p>Which works without problems!</p>\n"}], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 55199676, "answer_count": 2, "score": 4, "last_activity_date": 1552757976, "creation_date": 1550428816, "last_edit_date": 1552738728, "question_id": 54736437, "link": "https://stackoverflow.com/questions/54736437/carrierwave-doesnt-recreate-versions-after-the-model-update", "title": "Carrierwave doesn&#39;t recreate versions after the model update", "body": "<p>I've introduced a new version on my Carrierwave Uploader. When I create a new <code>Event</code> it creates both versions correctly. But when I update it, only the file I attached gets uploaded, but versions do not get recreated.</p>\n\n<p>I am using <code>CarrierWave 1.2.2</code>, and looking at the changelog, it doesn't seem to have been a bug that got fixed in the newer versions</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CoverUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::MiniMagick\n\n  if Rails.env.development? || Rails.env.test?\n    storage :file\n  elsif Rails.env.production?\n    storage :fog\n  end\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    if ENV['HEROKU_APP_NAME'].to_s.include?('-pr-')\n      \"review_apps/#{model.class.to_s.underscore}/#{model.id}\"\n    else\n      \"#{Rails.env}/#{model.class.to_s.underscore}/#{model.id}\"\n    end\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  def default_url(*args)\n    ActionController::Base.helpers.asset_path('test.jpg')\n  end\n\n  # Create different versions of your uploaded files:\n  version :optimised do\n    process convert: 'webp'\n    process :set_content_type_to_webp\n\n    def full_filename(_for_file = model.cover.file)\n      \"cover_#{model.id}.webp\"\n    end\n\n    def exists?\n      file&amp;.exists?\n    end\n  end\n\n  def extension_blacklist\n    %w(webp)\n  end\n\n  private\n\n  # Required to actually force Amazon S3 to treat it like an image\n  def set_content_type_to_webp\n    file.instance_variable_set(:@content_type, 'image/webp')\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "edited": false, "score": 0, "creation_date": 1550417017, "post_id": 54734604, "comment_id": 96251659, "body": "A method marked protected means that it can be used only by instances of the class where it was defined, or by derived classes.   Source: Learning Ruby by Michael Fitzgerald."}, {"owner": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "edited": false, "score": 0, "creation_date": 1550417104, "post_id": 54734604, "comment_id": 96251690, "body": "Also refer:  <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes</a>"}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "reply_to_user": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "edited": false, "score": 1, "creation_date": 1550417293, "post_id": 54734604, "comment_id": 96251742, "body": "saying can be used by instances of the class is misleading and pretty much untrue. It can be used by the class and sublcasses INTERNALLY. The difference between private and protected is that private methods cannot be used by subclasses."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550417313, "post_id": 54734604, "comment_id": 96251746, "body": "Yes. But you are not using it in an instance of the class where it was defined or in a derived class. You are using it at the top-level, i.e. in <code>Object</code>."}, {"owner": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550417617, "post_id": 54734604, "comment_id": 96251830, "body": "@J&#246;rgWMittag , see the description method of Laptop class, also in ruby does creating instance doesn&#39;t means creating an object ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1550417707, "post_id": 54734604, "comment_id": 96251860, "body": "Yes. <code>description</code> is protected. Which means you can call it in <code>Laptop</code> and all its subclasses. But you are calling it in <code>Object</code>, which is not a subclass of <code>Laptop</code>."}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1550417819, "post_id": 54734604, "comment_id": 96251897, "body": "You are calling it <code>on</code> an instance of <code>Laptop</code>, not <code>in</code> an instance of <code>Laptop</code>.. does that explain it better?"}], "tags": [], "owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "is_accepted": false, "score": 1, "last_activity_date": 1550436726, "last_edit_date": 1550436726, "creation_date": 1550416475, "answer_id": 54734604, "question_id": 54734398, "link": "https://stackoverflow.com/questions/54734398/unable-to-access-protected-method-in-ruby/54734604#54734604", "title": "Unable to access protected method in Ruby", "body": "<p>Protected methods can only be called by methods encapsulated in the class or subclass itself, not directly from an instance of a class/subclass. If you want the <code>eat</code> method to be called from an instance than make it public or call it from another public method:</p>\n\n<pre><code>[19] pry(main)&gt; class Machine\n[19] pry(main)*   protected\n[19] pry(main)*   def eat\n[19] pry(main)*     puts \"eating\"\n[19] pry(main)*   end\n[19] pry(main)* end\n:eat\n[20] pry(main)&gt; class Laptop &lt; Machine\n[20] pry(main)*   def chow\n[20] pry(main)*     self.eat\n[20] pry(main)*   end\n[20] pry(main)* end\n:chow\n[21] pry(main)&gt; l = Laptop.new\n#&lt;Laptop:0x007f9c92b5c968&gt;\n[22] pry(main)&gt; l.chow\neating\nnil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "edited": false, "score": 0, "creation_date": 1550417370, "post_id": 54734698, "comment_id": 96251763, "body": "What do you mean?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550417387, "post_id": 54734698, "comment_id": 96251770, "body": "This is explained in the documentation, in the language specification, and in very Ruby book, Ruby tutorial, and Ruby course."}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1550418107, "last_edit_date": 1550418107, "creation_date": 1550417137, "answer_id": 54734698, "question_id": 54734398, "link": "https://stackoverflow.com/questions/54734398/unable-to-access-protected-method-in-ruby/54734698#54734698", "title": "Unable to access protected method in Ruby", "body": "<p>You can not reach protected or private methods from outside for ruby except dynamic dispatching. I mean <code>laptop.eat</code> will raise exception, however, <code>laptop.send(:eat)</code> will make run the method. This is dynamic dispatching.  </p>\n"}, {"tags": [], "owner": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "is_accepted": true, "score": 0, "last_activity_date": 1550463468, "creation_date": 1550463468, "answer_id": 54740416, "question_id": 54734398, "link": "https://stackoverflow.com/questions/54734398/unable-to-access-protected-method-in-ruby/54740416#54740416", "title": "Unable to access protected method in Ruby", "body": "<ul>\n<li>The visibility or access of methods and constants may be set with the\nmethods public, private, or protected.</li>\n<li>Ruby doesn't allow you to access or change the instance variable form\noutside of the class. For overcoming this you have to use accessor\nmethods</li>\n<li><p>Private methods can only be called within the class and not from an\ninstance of class itself also it is not used with the self keyword</p></li>\n<li><p>Protected methods can only be called by methods encapsulated in the class or subclass itself,not directly from an instance of a class/subclass.</p>\n\n<pre><code> class Machine\n  attr_accessor :name,:cost\n\n  # All the methods below the  protected keyword will be protected\n  protected\n\n  def eat\n    puts \"machine don't eat\"\n  end\n\n  def sleep\n    puts \"machine don't sleep\"\n  end\n\nend\n\nmachine=Machine.new\nmachine.name =\"Keyword\"\nputs \"The name of the machine is #{machine.name}\"\n\n# NoMethodError  because of accessing the protected methods via an object of Machine\n# puts machine.eat\n# puts machine.sleep\n\nclass Laptop &lt; Machine\n\n  # All the method below the private keyword be will private\n  private\n\n  def ram                                 # private method\n    return \"4gb\"\n  end\n\n  def core                                # private method\n    return \"i3\"\n  end\n\n  # all the methods below the protected keyword will be protected\n  public\n\n  def description\n    puts \"The laptop has #{ram} ram and it has #{core} core\"\n  end\n\n  def laptopActivity\n    eat\n    sleep\n  end\nend\n\nlaptop=Laptop.new\nlaptop.name=\"hp_notebook_15_n205tx\"\nlaptop.cost =44000\n\n# puts \"laptop is a machine, &amp; #{laptop.eat}\"   NoMethodError coz trying to access protected method through the object\nputs \"#{laptop.name} costs #{laptop.cost}\"     #accessing public method of Machine through the laptop object\nputs \"#{laptop.description}\"                   # made description public ( description method calls private method of laptop class)\nputs laptop.laptopActivity                     # calling protected methods of parent class (inheritance)\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1384, "user_id": 9247465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-q9Lq4aEZoms/AAAAAAAAAAI/AAAAAAAAANg/KR9sPMb4MdM/photo.jpg?sz=128", "display_name": "AConsumer", "link": "https://stackoverflow.com/users/9247465/aconsumer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 54740416, "answer_count": 3, "score": 0, "last_activity_date": 1550463468, "creation_date": 1550414948, "question_id": 54734398, "link": "https://stackoverflow.com/questions/54734398/unable-to-access-protected-method-in-ruby", "title": "Unable to access protected method in Ruby", "body": "<p>I was learning the concept of encapsulation in ruby.</p>\n\n<p>Below is the sample code, Laptop inherits from Machine, i have made eat a protected method (Machine class), but can't access through Laptop's instance.</p>\n\n<p>Also, i am not able to access the Laptop's protected method called description.</p>\n\n<pre><code>class Machine\n\n  attr_accessor :name,:cost  generated\n\n  protected\n  def eat\n    puts \"machine don't eat\"\n  end\n\nend\n\n\nclass Laptop &lt; Machine\n\n  private\n  def ram\n    return \"4gb\"\n  end\n\n  private\n  def core\n    return \"i3\"\n  end\n\n  protected\n  def description\n    puts \"The laptop has #{ram} ram and it has #{core} core\"\n  end\nend\n\nlaptop=Laptop.new\nlaptop.name=\"hp_notebook_15_n205tx\"\nlaptop.cost =44000\n\nputs \"laptop is a machine, &amp; #{laptop.eat} \"  #doesn't work\nputs \"#{laptop.name} costs #{laptop.cost}\"\nputs \"#{laptop.description}\"                  #doesn't work\n</code></pre>\n\n<p>Below is the error which i have got: </p>\n\n<pre><code>`&lt;top (required)&gt;': protected method `eat' called for #&lt;Laptop:0x2ed3b68 @name=\"hp_notebook_15_n205tx\", @cost=44000&gt; (NoMethodError)\n    from -e:1:in `load'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1550413311, "post_id": 54734130, "comment_id": 96250617, "body": "Maybe show some sample data?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1550413699, "post_id": 54734130, "comment_id": 96250721, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550427441, "post_id": 54734130, "comment_id": 96254766, "body": "Your question has nothing to do with the elements you show as <code>Time</code> (or <code>DateTime</code>?) objects.  Yet, to answer the question readers must change those elements to strings and either leave them as strings or convert them to <code>Time</code> objects, both of which is a waste of time. It would have been simpler to make them, say, integers. When you give an example it&#39;s helpful to assign a variable to each input (<code>arr = [...]</code>) so that readers can refer to those variables in answers and comments without having to define them."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550445256, "post_id": 54734130, "comment_id": 96259594, "body": "Also <i>&quot;Gives me the max date rather than the max value?&quot;</i>  what do you mean with <i>max date</i> and <i>max value</i>? A date is a value and a value could be a date."}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 5439673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec5c6c4ba0667a04c0601db068f7691?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/5439673/eldar"}, "is_accepted": false, "score": 0, "last_activity_date": 1550414893, "creation_date": 1550414893, "answer_id": 54734393, "question_id": 54734130, "link": "https://stackoverflow.com/questions/54734130/get-min-and-max-value-from-this-array-of-hashes/54734393#54734393", "title": "Get min and max value from this array of hashes", "body": "<p>I may guess that this is what you were asking for:</p>\n\n<pre><code> [{ created_at: Date.new(2017, 1, 1) }, { created_at: Date.new(2019, 1, 1) }, { created_at: Date.new(2018, 1, 1) }]\n   .minmax_by { |value| value[:created_at] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1550416576, "creation_date": 1550416576, "answer_id": 54734619, "question_id": 54734130, "link": "https://stackoverflow.com/questions/54734130/get-min-and-max-value-from-this-array-of-hashes/54734619#54734619", "title": "Get min and max value from this array of hashes", "body": "<p>By default when you sort an array sorts by the first element first.</p>\n\n<p>You can reverse the array for the purposes of the sort.</p>\n\n<pre><code>channel_counts_for_history_graph.map(&amp;:reverse).max[0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1550420417, "last_edit_date": 1550420417, "creation_date": 1550417420, "answer_id": 54734736, "question_id": 54734130, "link": "https://stackoverflow.com/questions/54734130/get-min-and-max-value-from-this-array-of-hashes/54734736#54734736", "title": "Get min and max value from this array of hashes", "body": "<p>I suggest using <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-minmax_by\" rel=\"nofollow noreferrer\"><code>Enumerable#minmax_by</code></a> to get the min <em>and</em> the max value in just one method call:</p>\n\n<pre><code>array = [['Sun, 30 Dec 2018 15:03:55 UTC +00:00', 4305],['Sun, 30 Dec 2018 15:05:42 UTC +00:00', 4305],['Mon, 31 Dec 2018 09:24:06 UTC +00:00', 4306],['Sat, 05 Jan 2019 09:04:50 UTC +00:00', 4308],['Tue, 01 Jan 2019 11:26:04 UTC +00:00', 4306],['Wed, 02 Jan 2019 17:24:19 UTC +00:00', 4305]]\n\narray.minmax_by(&amp;:last)\n#=&gt; [[\"Sun, 30 Dec 2018 15:03:55 UTC +00:00\", 4305], [\"Sat, 05 Jan 2019 09:04:50 UTC +00:00\", 4308]]\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 7362953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/861d6b7318cb88a14e12f7a15b23702c?s=128&d=identicon&r=PG&f=1", "display_name": "Simonp27", "link": "https://stackoverflow.com/users/7362953/simonp27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 54734619, "answer_count": 3, "score": -3, "last_activity_date": 1550426770, "creation_date": 1550413033, "last_edit_date": 1550415824, "question_id": 54734130, "link": "https://stackoverflow.com/questions/54734130/get-min-and-max-value-from-this-array-of-hashes", "title": "Get min and max value from this array of hashes", "body": "<p>I have an array that contains a hash in each row containing created_at and a value.  How do I get the min and max from the array for the value fields?</p>\n\n<p>The array is called - <code>channels_counts_for_history_graph</code></p>\n\n<p>and</p>\n\n<pre><code>channels_counts_for_history_graph.max[1]\n</code></pre>\n\n<p>Gives me the max date rather than the max value?</p>\n\n<pre><code>[[Sun, 30 Dec 2018 15:03:55 UTC +00:00, 4305],\n[Sun, 30 Dec 2018 15:05:42 UTC +00:00, 4305],\n[Mon, 31 Dec 2018 09:24:06 UTC +00:00, 4306],\n[Sat, 05 Jan 2019 09:04:50 UTC +00:00, 4308],\n[Tue, 01 Jan 2019 11:26:04 UTC +00:00, 4306],\n[Wed, 02 Jan 2019 17:24:19 UTC +00:00, 4305]]\n</code></pre>\n\n<p>Any help appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550414568, "post_id": 54734076, "comment_id": 96250923, "body": "You need not a one advice here... Why do you write <code>user = User.all.where(id: current_user&amp;.id)</code>?! It is just a <code>current_user</code>, which you already have"}, {"owner": {"reputation": 345, "user_id": 5425522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45dbdd22b76c06be2e2781c4ab86b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Humberto", "link": "https://stackoverflow.com/users/5425522/eduardo-humberto"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550416011, "post_id": 54734076, "comment_id": 96251318, "body": "I think my question was not clear. My doubt here is about presenting the data in the view side. I don&#39;t know how to make the field  amount (in &lt;td&gt;) editable by the user."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550416548, "post_id": 54734076, "comment_id": 96251488, "body": "Your question is clear. I&#39;m about code quality."}, {"owner": {"reputation": 345, "user_id": 5425522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45dbdd22b76c06be2e2781c4ab86b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Humberto", "link": "https://stackoverflow.com/users/5425522/eduardo-humberto"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1550421918, "post_id": 54734076, "comment_id": 96252995, "body": "Thanks though, but I still don&#39;t know how to create a choice on the &lt;td&gt; element."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11061332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8678af923a88841e904f3d098b6f89?s=128&d=identicon&r=PG&f=1", "display_name": "Justus K", "link": "https://stackoverflow.com/users/11061332/justus-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1550477875, "last_edit_date": 1550477875, "creation_date": 1550477072, "answer_id": 54742784, "question_id": 54734076, "link": "https://stackoverflow.com/questions/54734076/how-to-make-a-form-in-a-table-for-use-selection-in-rails/54742784#54742784", "title": "How to make a form, in a table, for use selection in rails?", "body": "<p>I just started to use Rails so i dont know if this is the best solution but anyways:</p>\n\n<p>You can use the form builder to create a editable text field and something like a save button as shown here:</p>\n\n<p><a href=\"https://guides.rubyonrails.org/getting_started.html#updating-articles\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/getting_started.html#updating-articles</a></p>\n\n<p>I don't really know if this is the most elegant solution or if you can make it look good with your table, but i hope this helps a bit.</p>\n\n<p>Edit:</p>\n\n<p>to include it in your table you can probably create a _form.html.erb\nand create the whole table similar to what iam doing in my task at the moment:</p>\n\n<pre><code>    &lt;% @project.order(:title).each do |project| %&gt;\n    &lt;tr&gt;\n    &lt;td&gt;&lt;%= link_to project.title, project_path(project) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= project.status %&gt;&lt;/td&gt;\n    ...\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 5425522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45dbdd22b76c06be2e2781c4ab86b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Humberto", "link": "https://stackoverflow.com/users/5425522/eduardo-humberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550477875, "creation_date": 1550412582, "question_id": 54734076, "link": "https://stackoverflow.com/questions/54734076/how-to-make-a-form-in-a-table-for-use-selection-in-rails", "title": "How to make a form, in a table, for use selection in rails?", "body": "<p>I'm building an application where I pass an array from controller to view, fill it in a table and then, the user can select it and make a post. Code bellow.</p>\n\n<p>I don't know how to use form_tag or similar to display and make it available for submiting and let user change the amount. Any help/advice?</p>\n\n<p>Array example</p>\n\n<pre><code>[{:stock_id=&gt;10, :name=&gt;\"VALE3\", :value=&gt;\"50.02\", :amount=&gt;\"5\"}, {:stock_id=&gt;10, :name=&gt;\"VALE3\", :value=&gt;\"50.02\", :amount=&gt;\"5\"}]\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>def get_stocks\n\n    if !current_user.nil?\n      user = User.all.where(id: current_user&amp;.id)\n      @user_stocks = Array.new\n      for u in user.first.stocks\n        user_stock =  UserStock.find_by(stock_id: u['id'])\n        @user_stocks &lt;&lt; {stock_id: u['id'],name: u['name'], value: u['value'], amount: user_stock['amount']}\n      end\n    end\n  end\n</code></pre>\n\n<p>View</p>\n\n<pre><code> &lt;div class=\"table-bordered table-responsive\"&gt;\n    &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th scope=\"col\"&gt;Code&lt;/th&gt;\n            &lt;th scope=\"col\"&gt;Price&lt;/th&gt;\n            &lt;th scope=\"col\"&gt;Amount&lt;/th&gt;\n            &lt;th scope=\"col\"&gt;Action&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;% @user_stocks.each do |stock| %&gt;\n            &lt;%# byebug %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;%= stock[:name] %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= stock[:value] %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= stock[:amount] %&gt;&lt;/td&gt;   ## THE USER NEED TO CHOOSE THE AMOUNT HE/SHE WANTS TO SELL\n                &lt;td&gt;&lt;%= link_to 'Sell', new_transaction_path %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n    &lt;/table&gt;\n &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "json-api", "fastjsonapi"], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 1, "last_activity_date": 1550416379, "creation_date": 1550416379, "answer_id": 54734595, "question_id": 54733854, "link": "https://stackoverflow.com/questions/54733854/how-to-treat-jsonb-field-values-as-first-class-attributes-in-serialization/54734595#54734595", "title": "How to treat jsonb field values as first-class attributes in serialization?", "body": "<p>For <code>fast_jsonapi</code> this is not possible. Every attribute declared in serializer class are dispatched to active record object. You would see <a href=\"https://github.com/Netflix/fast_jsonapi/blob/master/lib/fast_jsonapi/attribute.rb#L16\" rel=\"nofollow noreferrer\">here</a> how the the library serializes the given object. </p>\n\n<p>So if you want to serialize jsonb objects as first citizen I think you have 2 ways. First, you would extend <code>FastJsonapi::Attribute</code> class and then override the <code>serialize</code> method. But I do not recommend this way due to the fact that this is really error prone.</p>\n\n<p>The second way is explicitly declaring fields from the jsonb object. For istance, the following workaround would fit your problem I think. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class TestSerializer\n  include FastJsonapi::ObjectSerializer\n\n  JSONB_ATTRIBUTES = %i[title author review_count]\n  JSONB_ATTRIBUTES.each do |attr|\n    attribute attr do |object|\n      object.data[attr.to_s] if object.data # Protection againts nil value\n    end\n  end\nend\n</code></pre>\n\n<p>This is much more better than extending the serializer class. </p>\n"}], "owner": {"reputation": 78, "user_id": 3476913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddbdd988d7e3504483668645982c0999?s=128&d=identicon&r=PG&f=1", "display_name": "Lewaa Bahmad", "link": "https://stackoverflow.com/users/3476913/lewaa-bahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550416379, "creation_date": 1550410912, "last_edit_date": 1550411701, "question_id": 54733854, "link": "https://stackoverflow.com/questions/54733854/how-to-treat-jsonb-field-values-as-first-class-attributes-in-serialization", "title": "How to treat jsonb field values as first-class attributes in serialization?", "body": "<p>I have a Rails backend using postgresql jsonb field. I would like to use the gem <code>fast_jsonapi</code> but am not married to it. </p>\n\n<p>I have a jsonb field that is pretty much the model I want to serialize. However, I haven't figured out how to make json attributes of them (serialize them as first class citizens.) So, instead of:</p>\n\n<pre><code>{  \n   \"attributes\":{  \n      \"data\":{  \n         \"title\":\"ok\",\n         \"author\":\"masta p\"\n      },\n      \"created_at\":\"2019-02-16T17:40:21.477Z\",\n      \"updated_at\":\"2019-02-16T17:40:21.477Z\"\n   }\n}\n</code></pre>\n\n<p>I don't need the extra 'data' namespace and would like it to be: </p>\n\n<pre><code>{  \n   \"attributes\":{  \n      \"title\":\"ok\",\n      \"author\":\"masta p\"\n      \"created_at\":\"2019-02-16T17:40:21.477Z\",\n      \"updated_at\":\"2019-02-16T17:40:21.477Z\"\n   }\n}\n</code></pre>\n\n<p>What's a low cost way of doing this? </p>\n"}, {"tags": ["ruby", "pry"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550405796, "post_id": 54732991, "comment_id": 96248711, "body": "From the docs of <code>Kernel#load</code>: <i>Loads and executes the Ruby program in the file filename. If the filename does not resolve to an absolute path, the file is searched for in the library directories listed in <code>$:</code>.</i> Do you call <code>load</code> with an absolute filename? Or is the file stored in a directory that is listed in <code>$:</code>?"}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1550405831, "post_id": 54732991, "comment_id": 96248722, "body": "Are you running pry from the same directory as the file? Your code works as is for me."}, {"owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "edited": false, "score": 0, "creation_date": 1550412284, "post_id": 54732991, "comment_id": 96250368, "body": "Thanks :) I was running Pry, from different directory than the file. Now the <code>load</code> method is loading the file, but <code>Useful.perfom_useful_processing(important_number)</code> gives me  <code>NameError: undefined local variable or method &#39;important_number&#39; for main:Object</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1550429554, "post_id": 54732991, "comment_id": 96255439, "body": "@ArtuX local variables defined in a file, are not accessible from elsewhere. You can use a contant though."}], "answers": [{"tags": [], "owner": {"reputation": 1564, "user_id": 511205, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d00fdaffce0316eaf114de1f9ea274cf?s=128&d=identicon&r=PG", "display_name": "kyrylo", "link": "https://stackoverflow.com/users/511205/kyrylo"}, "is_accepted": false, "score": 0, "last_activity_date": 1551179429, "creation_date": 1551179429, "answer_id": 54884185, "question_id": 54732991, "link": "https://stackoverflow.com/questions/54732991/load-rb-file-in-pry-repl/54884185#54884185", "title": "Load *.rb file in Pry REPL", "body": "<pre><code>% pry -r ./my_code.rb\n</code></pre>\n\n<p>As @max_pleaner points out local variables defined in one file are not be accessible from the other file. A Pry session is a file named <code>(pry)</code>, so it doesn't know anything about <code>important_number</code>, which is expected.</p>\n"}], "owner": {"reputation": 356, "user_id": 11074303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861774b4e56866f97492a1de358e06e2?s=128&d=identicon&r=PG&f=1", "display_name": "ArtuX", "link": "https://stackoverflow.com/users/11074303/artux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1551179429, "creation_date": 1550404550, "last_edit_date": 1550405391, "question_id": 54732991, "link": "https://stackoverflow.com/questions/54732991/load-rb-file-in-pry-repl", "title": "Load *.rb file in Pry REPL", "body": "<p>I have <code>my_code.rb</code> file with some Ruby code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Useful\n  def self.perfom_useful_processing(arg)\n    arg + 1\n  end\nend\nimportant_number = 42\n</code></pre>\n\n<p>How can I load that file in Pry REPL, without modifying the file? So that I can do something like that:</p>\n\n<pre><code>[1] pry(main)&gt; load \"my_code.rb\" #&lt;-- This will not work: \"LoadError: cannot load such file -- my_code.rb\"\n[2] pry(main)&gt; Useful.perfom_useful_processing(important_number)\n=&gt; 43\n</code></pre>\n"}, {"tags": ["ruby", "nlp"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1550404865, "post_id": 54732884, "comment_id": 96248481, "body": "Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow."}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1550408565, "post_id": 54732884, "comment_id": 96249411, "body": "&quot;what is the weather tomorrow in France&quot;.downcase.include?(&quot;france&quot;) i doubt you are looking for something this, if you are aware that the name of country will fall only once in sentence and index is known, keep an array of countries to match."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550475381, "post_id": 54732884, "comment_id": 96266954, "body": "If you have <code>&quot;New Amsterdam&quot;</code>, do you want both &quot;New Amsterdam&quot; and &quot;Amsterdam&quot;, or only &quot;New Amsterdam&quot;, or only &quot;Amsterdam&quot; (because New Amsterdam does not exist anymore)?"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 7612998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32af3d16a622b34c97e9e7e4bfcbc786?s=128&d=identicon&r=PG&f=1", "display_name": "sarat", "link": "https://stackoverflow.com/users/7612998/sarat"}, "is_accepted": false, "score": 0, "last_activity_date": 1550879805, "last_edit_date": 1550879805, "creation_date": 1550879453, "answer_id": 54836756, "question_id": 54732884, "link": "https://stackoverflow.com/questions/54732884/how-to-find-the-name-of-a-place-inside-a-sentence-using-nlp/54836756#54836756", "title": "How to find the name of a place inside a sentence using NLP", "body": "<p>To extract named entities from the text you can use Named Entity Recognition(NER).</p>\n\n<p>For NER in ruby check this git repo:</p>\n\n<p><a href=\"https://github.com/mblongii/ruby-ner\" rel=\"nofollow noreferrer\">https://github.com/mblongii/ruby-ner</a></p>\n\n<p>and this:</p>\n\n<p><a href=\"https://github.com/diasks2/ruby-nlp#named-entity-recognition\" rel=\"nofollow noreferrer\">https://github.com/diasks2/ruby-nlp#named-entity-recognition</a></p>\n\n<p>In python you can do as below:</p>\n\n<p>You can use Spacy NER(Name entity Recognition) for this.</p>\n\n<pre><code>import spacy\n\nnlp = spacy.load('en_core_web_sm')\ndoc = nlp(u'what is the weather tomorrow in France')\n\nfor ent in doc.ents:\n    print(ent.text, ent.start_char, ent.end_char, ent.label_)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(u'tomorrow', 20, 28, u'DATE')\n(u'France', 32, 38, u'GPE')`\n</code></pre>\n\n<p><strong>'GPE'</strong> stands for <strong>'Geopolitical entity, i.e. countries, cities, states'</strong>.</p>\n\n<p>To Know more about spacy ner, check this link: <a href=\"https://spacy.io/usage/linguistic-features#101\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 369, "user_id": 4018622, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002223418893/picture?type=large", "display_name": "\u0414\u0430\u043d\u0438\u044d\u043b\u044c \u0421\u0430\u0439\u0444\u0443\u043b\u0438\u043d", "link": "https://stackoverflow.com/users/4018622/%d0%94%d0%b0%d0%bd%d0%b8%d1%8d%d0%bb%d1%8c-%d0%a1%d0%b0%d0%b9%d1%84%d1%83%d0%bb%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550879805, "creation_date": 1550403692, "last_edit_date": 1550475039, "question_id": 54732884, "link": "https://stackoverflow.com/questions/54732884/how-to-find-the-name-of-a-place-inside-a-sentence-using-nlp", "title": "How to find the name of a place inside a sentence using NLP", "body": "<p>There are sentences like</p>\n\n<pre><code>query = \"Weather of Moscow\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>query = \"what is the weather tomorrow in France\"\n</code></pre>\n\n<p>I want to find the name of the city. It will be <code>Moscow</code> and <code>France</code> for both of them.</p>\n\n<p>Do you know any gem that solves this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550401221, "post_id": 54732527, "comment_id": 96247597, "body": "Please post the log entry for a specific request and the full error message including the stack trace."}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550401468, "post_id": 54732527, "comment_id": 96247653, "body": "The request is made to <a href=\"http://localhost:3001/api/v1/artists\" rel=\"nofollow noreferrer\">localhost:3001/api/v1/artists</a>, it&#39;s supposed to print all the items, the application trace is the following                         {                 &quot;id&quot;: 0,                 &quot;trace&quot;: &quot;app/controllers/api/v1/artists_controller.rb:3:in <code>&lt;module:V1&gt;&#39;&quot;             },             {                 &quot;id&quot;: 1,                 &quot;trace&quot;: &quot;app&#47;controllers&#47;api&#47;v1&#47;artists_controller.rb:2:in </code>&lt;module:API&gt;&#39;&quot;             },             {                 &quot;id&quot;: 2,                 &quot;trace&quot;: &quot;app/controllers/api/v1/artists_controller.rb:1:in `&lt;top (required)&gt;&#39;&quot;             }"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1550403457, "post_id": 54732527, "comment_id": 96248163, "body": "Error trace from logs? post the entire content. Code looks fine to me, atleast the Artist.create(name: &quot;Some text&quot;) should work. Have you tried this operation from rails console."}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550404104, "post_id": 54732527, "comment_id": 96248323, "body": "I&#39;m not getting any error in the logs, these are the errors I&#39;m getting when I make the request in Postman. Yes, I have tried it in the console, that is when I get the uninitialised constant Artist."}, {"owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "edited": false, "score": 0, "creation_date": 1550405373, "post_id": 54732527, "comment_id": 96248609, "body": "I have realized that the reason I couldn&#39;t create an object was because I am using docker and to enter the development environment you have to use a different command. So I managed to create an object; however I still cannot make the request to the api. Docker might be the reason I cannot make the request too, but I can&#39;t see what exactly is causing the problem."}], "answers": [{"tags": [], "owner": {"reputation": 1337, "user_id": 5422365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e31b390fd694c2ef039dc1baf59888?s=128&d=identicon&r=PG&f=1", "display_name": "Aschen", "link": "https://stackoverflow.com/users/5422365/aschen"}, "is_accepted": false, "score": 0, "last_activity_date": 1550425317, "creation_date": 1550425317, "answer_id": 54735881, "question_id": 54732527, "link": "https://stackoverflow.com/questions/54732527/superclass-mismatch-for-class-artistscontroller-and-uninitialised-constant-artis/54735881#54735881", "title": "Superclass mismatch for class ArtistsController and uninitialised constant Artist", "body": "<p>Since you are in a module, Ruby is looking for the class <code>API::V1::Artist</code>.</p>\n\n<p>You have to use the namespace resolution operator (<code>::</code>) to indicate to Ruby that you want to use the class <code>Artist</code>: <code>::Artist.all</code></p>\n"}], "owner": {"reputation": 159, "user_id": 10783264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c79202fa95a8fc1716b3ccfc40a3c9?s=128&d=identicon&r=PG&f=1", "display_name": "razvanusc", "link": "https://stackoverflow.com/users/10783264/razvanusc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1550425317, "creation_date": 1550401089, "question_id": 54732527, "link": "https://stackoverflow.com/questions/54732527/superclass-mismatch-for-class-artistscontroller-and-uninitialised-constant-artis", "title": "Superclass mismatch for class ArtistsController and uninitialised constant Artist", "body": "<p>I am trying to create an API in Rails and whenever I try to make a get request it gives me a \"TypeError: superclass mismatch for class ArtistsController\" error. Also it seems like there is a problem with the model too since whenever I try to create a new Artist object with Artist.create it gives me uninitialised constant Artist</p>\n\n<p>My artists_controller.rb</p>\n\n<pre><code>module API\n  module V1\n    class ArtistsController &lt; ::ApplicationController\n      def index\n        @artists = Artist.all\n        render json: { status: 'Success', data: @artists }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>My application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\nend\n</code></pre>\n\n<p>My artist.rb</p>\n\n<pre><code>class Artist &lt; ApplicationRecord\nend\n</code></pre>\n\n<p>My schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20190217083634) do\n\n  create_table \"artists\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=latin1\" do |t|\n    t.string   \"name\"\n    t.text     \"bio\",            limit: 65535\n    t.string   \"genre\"\n    t.integer  \"price_per_hour\"\n    t.datetime \"created_at\",                   null: false\n    t.datetime \"updated_at\",                   null: false\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1550400097, "creation_date": 1550400097, "answer_id": 54732401, "question_id": 54731931, "link": "https://stackoverflow.com/questions/54731931/explain-this-race-condition-in-ruby/54732401#54732401", "title": "Explain this race condition in Ruby", "body": "<p>Having only one thread executed at the time does not mean that a thread always stops at a useful line for example at the end of a block before the next thread gets its execution-time.</p>\n\n<p>In your example, it is possible that one thread reads and evaluates <code>list.empty?</code> and then has to wait for another thread. The other thread reads and evaluates <code>list.empty?</code> too and gets the same result as the first thread. After that, both threads will execute the same branch of the <code>if</code> condition because they saw the same state.</p>\n"}], "owner": {"reputation": 2337, "user_id": 6488, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a12283c32dbd6c414bd91d079a748b41?s=128&d=identicon&r=PG", "display_name": "ardsrk", "link": "https://stackoverflow.com/users/6488/ardsrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550400097, "creation_date": 1550396528, "question_id": 54731931, "link": "https://stackoverflow.com/questions/54731931/explain-this-race-condition-in-ruby", "title": "Explain this race condition in Ruby", "body": "<p>Four threads loop for 10 million times each. On each loop they push a number if the list is empty else they pop a number from the list.</p>\n\n<pre><code>list = []\n\nthreads = []\n\n4.times do |i|\n  threads &lt;&lt; Thread.new do\n    1e7.to_i.times do |i|\n      if list.empty?\n        list &lt;&lt; i\n      else\n        list.pop\n      end\n    end\n  end\nend\n\nthreads.each(&amp;:join)\np list\n</code></pre>\n\n<p>Since the loop executes an even number of times, I would expect the list to be empty after all the threads execute.</p>\n\n<p>However, sometimes the list contains the number 9999999.</p>\n\n<p>I thought that Array in MRI Ruby is thread safe because of the GIL.</p>\n\n<p>How does the race condition happen in spite of the GIL?</p>\n"}]