[{"tags": ["ruby-on-rails", "ruby"], "owner": {"reputation": 1261, "user_id": 1703854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f41010c9e8f1c939704135336aa0282?s=128&d=identicon&r=PG", "display_name": "Jay Lane", "link": "https://stackoverflow.com/users/1703854/jay-lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480545309, "creation_date": 1480545309, "question_id": 40899513, "link": "https://stackoverflow.com/questions/40899513/errnoeacces-permission-denied-sys-fail2-only-on-windows-enviornment", "title": "Errno::EACCES Permission denied @ sys_fail2 only on Windows Enviornment", "body": "<p>I have a rails app that takes in a CSV file then runs the data against the Barby barcode generator gem and creates Barcode PDFs then zips the file and sends the zip to the browser for download. It works totally fine on my mac book pro but when I pushed the project to my windows server I am getting an permission error even though I have full control on both the project folder and directory that ruby is installed to.</p>\n\n<p>error message:</p>\n\n<p>Errno::EACCES in ToolsController#barcode\nPermission denied @ sys_fail2 - (C:/rugbelt2/dump/barcodes.zip20161130-62088-1bsvaxl20161130-62088-63ne7b, C:/rugbelt2/dump/barcodes.zip20161130-62088-1bsvaxl)</p>\n\n<p>Extracted source (around line #157):</p>\n\n<pre><code>  Zip::File.open(temp_file.path, Zip::File::CREATE) do |zip|\n</code></pre>\n\n<p>controller code:</p>\n\n<pre><code>def barcode\n    @input_filenames = []\n    readQuad(params[:file])\n    @array_of_hashes.length.times do | i |\n\n      @sku = @array_of_hashes[i]['sku']\n      puts @sku\n      barcode = Barby::Code128.new(@sku)\n\n      pdf = PDF::Writer.new(:paper =&gt; [10, 10])\n      pdf.select_font \"Times-Roman\"\n      barcode.annotate_pdf(pdf, :x =&gt; 40, :y =&gt; 125, :width =&gt; 1)\n      pdf.trim_box(0, 0, 21, 29.7)\n      pdf.text \"SKU: \" + @array_of_hashes[i]['sku'], :font_size =&gt; 12, :justification =&gt; :center\n      pdf.text \"STYLE: \" + @array_of_hashes[i]['style'], :font_size =&gt; 12, :justification =&gt; :center\n      pdf.text \"ORIGIN: \" + @array_of_hashes[i]['origin'], :font_size =&gt; 12, :justification =&gt; :center\n\n\n      pdf.save_as(\"./dump/\" + @array_of_hashes[i]['sku'] + '.pdf')\n      @filename = @array_of_hashes[i]['sku'] + '.pdf'\n      @input_filenames.push(@filename)\n\n    end\n\n\n    folder = \"./dump/\"\n    filename = \"barcodes.zip\"\n    temp_file = Tempfile.new(filename, \"./dump/\")\n\n    begin\n\n      Zip::OutputStream.open(temp_file) { |zos| }\n\n\n      Zip::File.open(temp_file.path, Zip::File::CREATE) do |zip|\n        @input_filenames.each do |filename|\n\n          zip.add(filename, folder + filename)\n          end\n      end\n\n\n      zip_data = File.read(temp_file.path)\n\n\n\n      send_data(zip_data, :type =&gt; 'application/zip', :filename =&gt; filename)\n    ensure\n\n      temp_file.close\n      temp_file.unlink\n    end\n\n\n  end\n</code></pre>\n"}, {"tags": ["ruby", "case"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1480547619, "post_id": 40899186, "comment_id": 69013707, "body": "This code looks incomplete, like it&#39;s missing a few <code>end</code> statements. Used to Python with indentation being sufficient?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1480547736, "post_id": 40899597, "comment_id": 69013741, "body": "Instead of triple-equals, what about <code>(x..y).include?(z)</code>? That&#39;s a more common pattern as it works on Array, Set, and so on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1480549353, "post_id": 40899597, "comment_id": 69014289, "body": "@tadman, I agree, and mentioned that in connection with the doc for <code>Range#===</code>: <code>(1..10) === number</code> is true if and only if <code>(1..10).include?(number)</code>. You could of course use that."}, {"owner": {"reputation": 75, "user_id": 6939236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmlKX.jpg?s=128&g=1", "display_name": "Ima", "link": "https://stackoverflow.com/users/6939236/ima"}, "edited": false, "score": 0, "creation_date": 1480589754, "post_id": 40899597, "comment_id": 69029928, "body": "Thank you very much! Both works fine but I guess last one&#39;s the best. I&#39;ll keep on studying"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 12, "last_activity_date": 1520756669, "last_edit_date": 1520756669, "creation_date": 1480545744, "answer_id": 40899597, "question_id": 40899186, "link": "https://stackoverflow.com/questions/40899186/case-statement-and-comparison-with-integers/40899597#40899597", "title": "Case statement and comparison with integers", "body": "<p>Try this.</p>\n\n<pre><code> def evaluate(number)\n   case number\n   when -Float::INFINITY...0\n     puts \"#{number} is negative\"\n   when 0..50\n     puts \"#{number} is between 0 and 51\"\n   when 51..100\n     puts \"#{number} is between 51 and 100\"\n   else \n     puts \"#{number} is greater than 100\"\n   end\n end\n\nputs evaluate(-43)\n # -43 is negative\nputs evaluate(0)\n # 0 is between 0 and 51\nputs evaluate(27)\n # 27 is between 0 and 51\nputs evaluate(100)\n # 100 is between 51 and 100\nputs evaluate(9999)\n # 9999 is greater than 100\n</code></pre>\n\n<p>Alternatively, because case statements use <code>===</code> for comparisons, you could write</p>\n\n<pre><code> def evaluate(number)\n   case\n   when number &lt; 0\n     puts \"#{number} is negative\"\n   when (0..50) === number\n     puts \"#{number} is between 0 and 51\"\n   when (51..100) === number\n     puts \"#{number} is between 51 and 100\"\n   else \n     puts \"#{number} is greater than 100\"\n   end\n end\n</code></pre>\n\n<p>which effectively is what is happening in the first case statement presented above.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Range.html#method-i-3D-3D-3D\" rel=\"noreferrer\">Range#===</a>: \"Returns true if obj [the argument] is an element of the range, false otherwise.\" In other words, <code>(1..10) === number</code>is <code>true</code> if and only if <code>(1..10).include?(number)</code>.</p>\n\n<p>I'm not advocating this alternative; I presented it to help show what's going on in the case statement. The following is an alternative that is a bit shorter and perhaps reads better.</p>\n\n<pre><code> def evaluate(number)\n   suffix =\n   case number\n   when -Float::INFINITY...0 then \"negative\"\n   when 0..50                then \"between 0 and 51\"\n   when 51..100              then \"between 51 and 100\"\n   else                            \"greater than 100\"\n   end\n   puts \"#{number} is #{suffix}\"\n end\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6939236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmlKX.jpg?s=128&g=1", "display_name": "Ima", "link": "https://stackoverflow.com/users/6939236/ima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4783, "favorite_count": 0, "accepted_answer_id": 40899597, "answer_count": 1, "score": 5, "last_activity_date": 1520756669, "creation_date": 1480543953, "question_id": 40899186, "link": "https://stackoverflow.com/questions/40899186/case-statement-and-comparison-with-integers", "title": "Case statement and comparison with integers", "body": "<p>I'm a newbie with Ruby and I don't know why it behaves this way in this case statement:</p>\n\n<pre><code>def evaluate(number)\n  case\n  when number&lt;0\n    puts \"#{number} is negative\"\n  when 0..50\n    puts \"#{number} is between 0 and 51\"\n  when 51..100\n    puts \"#{number} is between 51 and 100\"\n  else \n    puts \"#{number} is greater than 100\"\n\n  number = gets.chomp.to_i\n\n  puts evaluate(number)\n</code></pre>\n\n<p>when passing -4 for example it works but if I add number to the case</p>\n\n<pre><code>  def evaluate(number)\n  case number\n  when number&lt;0 ...\n</code></pre>\n\n<p>then it interprets the negative value as if was an else and prints out <em>is greater than 100</em> </p>\n\n<p>Is there a reason for that? I'de be very thankful if someone could help me out</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 1, "creation_date": 1480543705, "post_id": 40898982, "comment_id": 69012032, "body": "it should not matter how SomeObject is defined, since you&#39;re testing that the method is getting called. In theory, there should be a spec for <code>:a_method</code> in <code>MyClass</code> specs that exercises what you&#39;re trying to solve here"}, {"owner": {"reputation": 63, "user_id": 3230279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0273eb96c792d6b89cc3d6eca74603c5?s=128&d=identicon&r=PG&f=1", "display_name": "user3230279", "link": "https://stackoverflow.com/users/3230279/user3230279"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1480546452, "post_id": 40898982, "comment_id": 69013246, "body": "Thanks for your comment. Do you mean that I shouldn&#39;t test the inner workings of <code>SomeObject</code> when testing <code>:a_method</code>? In my particular circumstance, <code>MyClass::some_other_method</code> gets called with different parameters. <code>:some_method</code> always ends up getting called with SomeObject as an argument when I test :some_other_method, but depending on those parameters <code>:some_other_method</code> gets called with, the attributes in SomeObject change."}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 1, "creation_date": 1480553803, "post_id": 40898982, "comment_id": 69015544, "body": "yeah, <code>SomeObject</code> inner stuff is not relevant here, but, I think it&#39;s right to expect an instance of that class."}, {"owner": {"reputation": 63, "user_id": 3230279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0273eb96c792d6b89cc3d6eca74603c5?s=128&d=identicon&r=PG&f=1", "display_name": "user3230279", "link": "https://stackoverflow.com/users/3230279/user3230279"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1480554312, "post_id": 40898982, "comment_id": 69015658, "body": "gotcha thanks. I think there might be a better way about it. :)"}], "owner": {"reputation": 63, "user_id": 3230279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0273eb96c792d6b89cc3d6eca74603c5?s=128&d=identicon&r=PG&f=1", "display_name": "user3230279", "link": "https://stackoverflow.com/users/3230279/user3230279"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480543109, "creation_date": 1480543109, "question_id": 40898982, "link": "https://stackoverflow.com/questions/40898982/can-i-write-an-rspec-test-that-expects-a-method-to-be-called-with-an-object-as-a", "title": "Can I write an RSpec test that expects a method to be called with an Object as an argument, and that Object to have a particular property?", "body": "<p>I'm trying to test out that a method gets called with a custom Ruby object as an argument, and that that object has the correct attribute. </p>\n\n<p>This is working right now:</p>\n\n<p><code>expect(MyClass).to receive(:a_method).with(instance_of(SomeObject))</code></p>\n\n<p>but I can't find anything about how to test the internals of SomeObject</p>\n\n<p>I want something like: </p>\n\n<p><code>expect(MyClass).to receive(:a_method).with(instance_of(SomeObject)).with_attribute(:name =&gt; \"Bob\")</code></p>\n\n<p>but this throws a NoMethodError</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "profile"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1480541133, "post_id": 40898412, "comment_id": 69010754, "body": "So the pieces you need, as it sounds to me, are some basic pages, user authentication, and then time tracking (which would probably be in javascript, not ruby).  These are very broad topics however and can probably not be answered in a real direct way here.  I would look at a ruby on rails tutorial, something that has users sign in, a tutorial using a gem called devise might be easiest as it handles a lot for you."}, {"owner": {"reputation": 7922, "user_id": 2747593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cdcEd.jpg?s=128&g=1", "display_name": "Scott Weldon", "link": "https://stackoverflow.com/users/2747593/scott-weldon"}, "edited": false, "score": 0, "creation_date": 1481153563, "post_id": 40898412, "comment_id": 69266066, "body": "Welcome to Stack Overflow! Questions that ask &quot;where do I start&quot; are typically too broad and are not a good fit for this site. People have their own method for approaching the problem and because of this there cannot be a <i>correct</i> answer. See <a href=\"//meta.softwareengineering.stackexchange.com/a/6367/143094\"><b>Where to Start</b></a>."}], "answers": [{"tags": [], "owner": {"reputation": 378, "user_id": 6117757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U77wG.jpg?s=128&g=1", "display_name": "Dmitry T.", "link": "https://stackoverflow.com/users/6117757/dmitry-t"}, "is_accepted": false, "score": 3, "last_activity_date": 1480589006, "creation_date": 1480589006, "answer_id": 40908520, "question_id": 40898412, "link": "https://stackoverflow.com/questions/40898412/creating-a-user-time-sheet-for-a-ror-web-app/40908520#40908520", "title": "Creating a User Time Sheet for a RoR Web App", "body": "<h3>Users: Ruby part</h3>\n\n<ul>\n<li>Use <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\"><code>Devise</code></a> gem - it will save a lot of time for you.  </li>\n</ul>\n\n<p>Add Devise to user model (something like that: <code>rails generate devise User</code>), then autogenerate basic Devise pages (sign in, sign up, etc), see Devise tutorials:  </p>\n\n<ul>\n<li><a href=\"https://launchschool.com/blog/how-to-use-devise-in-rails-for-authentication\" rel=\"nofollow noreferrer\">https://launchschool.com/blog/how-to-use-devise-in-rails-for-authentication</a>  </li>\n<li><a href=\"http://guides.railsgirls.com/devise\" rel=\"nofollow noreferrer\">http://guides.railsgirls.com/devise</a></li>\n</ul>\n\n<p>Also you'll probably need something like <code>Job</code> model with fields <code>user_id</code>, <code>time_spent</code>, <code>date</code> or something. </p>\n\n<h3>Timesheets: JS part</h3>\n\n<p>Time tracking is more front-end part of work, so you'll need to write some JS scripts for time tracking, which will monitor user activity and then send it to Job mobel on Rails side.</p>\n\n<p>Track time spent on page (example):</p>\n\n<pre><code>    var page_opened;\n\n    $(document).ready(function () {\n        page_opened = Date.getTime();\n\n        $(window).unload(function () {\n            page_closed = Date.getTime();\n            $.ajax({\n                url: \"/save_user_time\",\n                data: {\n                    'timeSpent': page_closed - page_opened,\n                    'job_id': job_id\n                }\n            })\n        });\n    }\n</code></pre>\n\n<p>Also you defenetly should take a look on some basic Rails tutorials for better understanding:</p>\n\n<ul>\n<li><a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a></li>\n<li><a href=\"https://www.codecademy.com/learn/learn-rails\" rel=\"nofollow noreferrer\">https://www.codecademy.com/learn/learn-rails</a></li>\n</ul>\n"}], "owner": {"reputation": 17, "user_id": 7233058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87ad9a0da07c004e8ab9528e1a7d45c?s=128&d=identicon&r=PG&f=1", "display_name": "RDavis", "link": "https://stackoverflow.com/users/7233058/rdavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480589006, "creation_date": 1480540826, "last_edit_date": 1480556407, "question_id": 40898412, "link": "https://stackoverflow.com/questions/40898412/creating-a-user-time-sheet-for-a-ror-web-app", "title": "Creating a User Time Sheet for a RoR Web App", "body": "<p>I'm kind of a newb to RoR and I'm working on creating my first web app.</p>\n\n<p>So...My question is, how do I create a user time sheet in RoR?</p>\n\n<p>What I need to do is create a classroom time sheet for students' (Users) reading times at home.</p>\n\n<p>The students (Users) are able to sign up and have a profile created. From there, I would like for them to have access to log in their reading time(s).</p>\n\n<p>I have attached examples of just some simple timesheets that would work perfectly for this. </p>\n\n<p>I just do not know where to start and have not been able to find any gems that could help me create this.</p>\n\n<p><strong>Time Sheet 1</strong>\n<a href=\"https://i.stack.imgur.com/TniuT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TniuT.png\" alt=\"timesheet 1\"></a></p>\n\n<p><strong>TimeSheet 2</strong>\n<a href=\"https://i.stack.imgur.com/cT02h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cT02h.png\" alt=\"timesheet 2\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1480540812, "post_id": 40898361, "comment_id": 69010589, "body": "So, that&#39;s still throwing the error that a view doesn&#39;t exist."}, {"owner": {"reputation": 2405, "user_id": 135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agZcF.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/135845/eric"}, "edited": false, "score": 0, "creation_date": 1480541107, "post_id": 40898361, "comment_id": 69010738, "body": "You&#39;ll probably want <code>redirect_to root_url</code> at the end of <code>cancel_subscription</code>."}], "tags": [], "owner": {"reputation": 1905, "user_id": 186974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd97abde02d25ac3a3cd1fb18c363067?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/186974/sunny"}, "is_accepted": true, "score": 0, "last_activity_date": 1480541573, "last_edit_date": 1480541573, "creation_date": 1480540646, "answer_id": 40898361, "question_id": 40898176, "link": "https://stackoverflow.com/questions/40898176/sign-user-out-in-rails-controller/40898361#40898361", "title": "Sign user out in rails controller", "body": "<pre><code>def cancel_subscription\n  #code to cancel\n  sign_out current_user\n  redirect_to new_user_session_path\nend\n</code></pre>\n\n<p>inside <code>cancel_subscription</code></p>\n"}, {"tags": [], "owner": {"reputation": 452, "user_id": 5963312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8189bae2149dcd07fb2738329aff6e72?s=128&d=identicon&r=PG", "display_name": "David Stump", "link": "https://stackoverflow.com/users/5963312/david-stump"}, "is_accepted": false, "score": 0, "last_activity_date": 1480540646, "last_edit_date": 1495541630, "creation_date": 1480540646, "answer_id": 40898362, "question_id": 40898176, "link": "https://stackoverflow.com/questions/40898176/sign-user-out-in-rails-controller/40898362#40898362", "title": "Sign user out in rails controller", "body": "<p>Does this answer help with your situation: <a href=\"https://stackoverflow.com/questions/12162077/sign-out-a-devise-session-from-custom-controller-action-rails\">Sign out a devise session from custom controller action (Rails)</a></p>\n\n<p>There is a <code>sign_out</code> method provided from devise. Once you sign the user out, you can then redirect them to a proper action with a valid template (root, etc). </p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 40898361, "answer_count": 2, "score": 1, "last_activity_date": 1480541573, "creation_date": 1480539919, "question_id": 40898176, "link": "https://stackoverflow.com/questions/40898176/sign-user-out-in-rails-controller", "title": "Sign user out in rails controller", "body": "<p>I've created functionality to allow a user to delete their account from my app, that works.  However, at the end, I'm trying to automatically log the user OUT which would send them back to the sign in page.  </p>\n\n<p>I've tried various things which I thought would work, but my controller is throwing an error saying that I don't have the view in place for the Controller method:</p>\n\n<blockquote>\n  <p>Missing template subscriptions/cancel_subscription</p>\n</blockquote>\n\n<pre><code>def cancel_subscription\n ...a bunch of code that clears out the user's info\n redirect_to destroy_user_session_path      \nend\n</code></pre>\n\n<p>I'm using <code>Devise</code>, so the routes are default:</p>\n\n<pre><code>new_user_session GET    /login(.:format)        devise/sessions#new\nuser_session POST   /login(.:format)            devise/sessions#create\ndestroy_user_session GET    /logout(.:format)   devise/sessions#destroy\n</code></pre>\n\n<p>How do I go about automatically logging the user out since they don't actually have any account data anymore?</p>\n"}, {"tags": ["ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480542506, "post_id": 40898014, "comment_id": 69011441, "body": "Are you sure that <code>server_name</code> is exactly what you think it is? What does <code>select &#39;-&#39; || server_name || &#39;-&#39; from webserver</code> say?"}, {"owner": {"reputation": 312, "user_id": 4588390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-JPw4tYnugG8/AAAAAAAAAAI/AAAAAAAAABM/kLYOSnbuX7I/photo.jpg?sz=128", "display_name": "Recoba20", "link": "https://stackoverflow.com/users/4588390/recoba20"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480543238, "post_id": 40898014, "comment_id": 69011810, "body": "Well, I even uploaded the picture, it&#39;s a varchar column, the weirdest is that I am able to fetch any urls with the same pattern."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480545109, "post_id": 40898014, "comment_id": 69012650, "body": "There&#39;s something funny going on. Can you reproduce the problem in a self-contained script?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480569495, "post_id": 40898014, "comment_id": 69019400, "body": "&quot;Self contained&quot; as in &quot;doesn&#39;t depend on any external resources&quot;. A script that opens the database, INSERTs some data (that is contained in the script itself), and then queries it is what I meant."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1480583861, "post_id": 40898014, "comment_id": 69025802, "body": "Try to create an <a href=\"http://www.sqlfiddle.com/#!5\" rel=\"nofollow noreferrer\">SQL Fiddle</a>."}], "owner": {"reputation": 312, "user_id": 4588390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-JPw4tYnugG8/AAAAAAAAAAI/AAAAAAAAABM/kLYOSnbuX7I/photo.jpg?sz=128", "display_name": "Recoba20", "link": "https://stackoverflow.com/users/4588390/recoba20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480543189, "creation_date": 1480539252, "last_edit_date": 1480543189, "question_id": 40898014, "link": "https://stackoverflow.com/questions/40898014/ruby-sqlite3-like-not-working-as-expected", "title": "Ruby sqlite3 LIKE not working as expected", "body": "<p>This is the situation, I have a simple table:</p>\n\n<pre><code>&gt; DB.execute(\"CREATE TABLE IF NOT EXISTS webserver(id INTEGER PRIMARY\n&gt; KEY AUTOINCREMENT, url varchar(1000), server_name varchar(1000));\")\n</code></pre>\n\n<p>I have just one record in the table:</p>\n\n<pre><code>SELECT * FROM webserver; 1 https://onlinetvs.inbulgaria.info/   cloudflare-nginx\n</code></pre>\n\n<p>When I am selecting the the server_name column I am getting nothing back: <code>SELECT * FROM webserver WHERE server_name LIKE 'c%';</code></p>\n\n<p>Before any update, I am checking the type as well, I know I am missing something small and stupid, but after my verification with the sqlite3 documentation, not sure which way to go.</p>\n\n<pre><code>hrefs.each do |link|\n    result = get_server_from_headers(link)\n    if result != nil &amp;&amp; result.respond_to?(:to_str) &amp;&amp; link.respond_to?(:to_str)\n        DB.execute(\"INSERT INTO webserver(url, server_name) VALUES(?, ?)\", link, result)\n        puts \"Adding to DB \" + link + \" \" + result\n        abort\n    end\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sk56h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sk56h.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "chef-infra", "rvm", "rhel"], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 3183532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cce3fd4ecd01cb0a495b6adb365816e7?s=128&d=identicon&r=PG", "display_name": "Chiefwarpaint", "link": "https://stackoverflow.com/users/3183532/chiefwarpaint"}, "edited": false, "score": 0, "creation_date": 1480625175, "post_id": 40898007, "comment_id": 69052346, "body": "Thanks for the recommendation @augusto  I ended up uninstalling RVM and going with RBENV. I&#39;m able to install Ruby now without it killing my CHEF-Client."}], "tags": [], "owner": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "is_accepted": true, "score": 2, "last_activity_date": 1480539222, "creation_date": 1480539222, "answer_id": 40898007, "question_id": 40897698, "link": "https://stackoverflow.com/questions/40897698/rvm-ruby-install-breaks-chef-client-on-bootstrapped-node/40898007#40898007", "title": "RVM Ruby Install Breaks Chef-Client On Bootstrapped Node", "body": "<p><code>rvm</code> overrides the <code>cd</code> internal function with a custom function, and that is causing the error. Try removing <code>rvm</code> and use a different ruby manager such as <code>rbenv</code>. </p>\n\n<p>Check this blog post for other differences between <code>rvm</code> and <code>rbenv</code> : <a href=\"http://jonathan-jackson.net/rvm-and-rbenv\" rel=\"nofollow noreferrer\">http://jonathan-jackson.net/rvm-and-rbenv</a></p>\n\n<p>I'll be honest, I had the same issue before (but not with chef), read a bit more about <code>rvm</code> and decided that it was not the right tool for me. I'm sure there must be a way to make rvm play nicely, but I decided it was not worth the effort.</p>\n"}, {"tags": [], "owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "is_accepted": false, "score": 0, "last_activity_date": 1481312415, "creation_date": 1481312415, "answer_id": 41067693, "question_id": 40897698, "link": "https://stackoverflow.com/questions/40897698/rvm-ruby-install-breaks-chef-client-on-bootstrapped-node/41067693#41067693", "title": "RVM Ruby Install Breaks Chef-Client On Bootstrapped Node", "body": "<p>This may be fixed in chef-client 12.17.x so that chef-client correctly breaks out of the RVM environment:</p>\n\n<p>Related Chef bugs:</p>\n\n<p><a href=\"https://github.com/chef/appbundler/pull/24\" rel=\"nofollow noreferrer\">https://github.com/chef/appbundler/pull/24</a></p>\n\n<p><a href=\"https://github.com/chef/chef/issues/5589\" rel=\"nofollow noreferrer\">https://github.com/chef/chef/issues/5589</a></p>\n\n<p>If it is still broken after 12.17.x (when <code>::Gem.clear_paths</code> exists in the /opt/chef/bin/chef-client appbundler binstub) then a new issue should get cut against appbundler.</p>\n\n<p>(As an RVM user, though, I would not recommend using it for running production services, but I find it very nice to use in a dev workstation kind of environment -- but YMMV).</p>\n"}], "owner": {"reputation": 553, "user_id": 3183532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cce3fd4ecd01cb0a495b6adb365816e7?s=128&d=identicon&r=PG", "display_name": "Chiefwarpaint", "link": "https://stackoverflow.com/users/3183532/chiefwarpaint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 40898007, "answer_count": 2, "score": 2, "last_activity_date": 1481312415, "creation_date": 1480538153, "question_id": 40897698, "link": "https://stackoverflow.com/questions/40897698/rvm-ruby-install-breaks-chef-client-on-bootstrapped-node", "title": "RVM Ruby Install Breaks Chef-Client On Bootstrapped Node", "body": "<p>I have a Red Hat Enterprise Linux Server release 6.7 node that I have bootstrapped with CHEF.  I've successfully executed multiple cookbooks/recipes on this node.  Now I need to setup this node to run Ruby On Rails applications.</p>\n\n<p>I have a cookbook with recipes that successfully ::</p>\n\n<ol>\n<li>installs RVM</li>\n<li>installs Ruby v2.2</li>\n</ol>\n\n<hr>\n\n<p><strong>The Problem</strong></p>\n\n<p>After RVM installs Ruby, the CHEF-Client on the bootstrapped node no longer works.  Regardless of what Cookbook/Recipe(s) I try to run, I get the following output ::</p>\n\n<pre><code>PS C:\\Users\\JW031544\\workspace\\CHEF\\chef-repo&gt; knife ssh dh2vrtooldev01 \"chef-client -o recipe[MY_COOKBOOK::default]\" --manual-list --ssh-user MY_USER --ssh-password \"MY_PASS\"\n\ndh2vrtooldev01 Ignoring executable-hooks-1.3.2 because its extensions are not built.  Try: gem pristine executable-hooks --version 1.3.2\ndh2vrtooldev01 Ignoring gem-wrappers-1.2.7 because its extensions are not built.  Try: gem pristine gem-wrappers --version 1.2.7\ndh2vrtooldev01 Ignoring nokogiri-1.6.8.1 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.8.1\ndh2vrtooldev01 /opt/chef/embedded/lib/ruby/site_ruby/2.3.0/rubygems/dependency.rb:308:in `to_specs': Could not find 'addressable' (= 2.4.0) among 45 total gem(s) (Gem::MissingSpecError)\ndh2vrtooldev01 Checked in 'GEM_PATH=/usr/local/rvm/gems/ruby-2.2.4:/usr/local/rvm/gems/ruby-2.2.4@global', execute `gem env` for more information\ndh2vrtooldev01  from /opt/chef/embedded/lib/ruby/site_ruby/2.3.0/rubygems/dependency.rb:320:in `to_spec'\ndh2vrtooldev01  from /opt/chef/embedded/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem'\ndh2vrtooldev01  from /usr/bin/chef-client:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I go onto the node and tell RVM to remove that version of Ruby, then the CHEF-Client will begin working again just fine.</p>\n\n<hr>\n\n<p><strong>The Question</strong></p>\n\n<p>Does anyone have any idea why CHEF-Client suddenly forgets how to run once RVM installs a version of Ruby?</p>\n\n<hr>\n\n<p><strong>Source Code</strong></p>\n\n<p>(default.rb)</p>\n\n<pre><code>include_recipe 'abl_rails::rvm_install'\ninclude_recipe 'abl_rails::ruby_install'\n</code></pre>\n\n<p>(rvm_install.rb)</p>\n\n<pre><code># Install RVM (if it doesn't already exist)\nexecute 'install_rvm' do\n  cwd '/root/'\n  command 'curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -; curl -L get.rvm.io | bash -s stable'\n  not_if {::File.exists?('/etc/profile.d/rvm.sh')}\nend\n</code></pre>\n\n<p>(ruby_install.rb)</p>\n\n<pre><code># Install Ruby\nbash 'install_ruby' do\n  cwd '/root/'\n   code &lt;&lt;-EOH\n    source /etc/profile.d/rvm.sh;\n    rvm install #{node['ruby_version']};\n  EOH\n  not_if \"source /etc/profile.d/rvm.sh; ruby --version | grep #{node['ruby_version']}\", :cwd =&gt; '/root'\n  notifies :run, \"bash[set_default_rvm_ruby]\", :immediately\nend\n\n# Set the default Ruby version in RVM\nbash \"set_default_rvm_ruby\" do\n  cwd '/root'\n  code &lt;&lt;-EOH\n    source /etc/profile.d/rvm.sh;\n    rvm use #{node['ruby_version']} --default;\n  EOH\n  action :run\nend\n</code></pre>\n\n<hr>\n"}, {"tags": ["ruby-on-rails", "ruby", "redmine"], "comments": [{"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 0, "creation_date": 1480538951, "post_id": 40897500, "comment_id": 69009548, "body": "Per <a href=\"http://www.redmine.org/projects/redmine/wiki/RedmineInstall#Step-9-Test-the-installation\" rel=\"nofollow noreferrer\">redmine.org/projects/redmine/wiki/&hellip;</a>, run <code>bundle exec rails server webrick -e production</code> for redmine 3+."}], "answers": [{"tags": [], "owner": {"reputation": 4414, "user_id": 5452008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-305SHYPJuxE/AAAAAAAAAAI/AAAAAAAAABE/re8EZA9WuXs/photo.jpg?sz=128", "display_name": "S&#246;ren", "link": "https://stackoverflow.com/users/5452008/s%c3%b6ren"}, "is_accepted": false, "score": 0, "last_activity_date": 1480539892, "last_edit_date": 1480539892, "creation_date": 1480538364, "answer_id": 40897765, "question_id": 40897500, "link": "https://stackoverflow.com/questions/40897500/how-to-fix-bundler-missing-usr-bin-ruby-mri-loaderror/40897765#40897765", "title": "How to fix bundler missing /usr/bin/ruby-mri (LoadError)?", "body": "<p>It is the wrong command. <code>script/server</code> is outdated. Use instead:</p>\n\n<pre><code>bundle exec rails server webrick -e production\n</code></pre>\n"}], "owner": {"reputation": 4414, "user_id": 5452008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-305SHYPJuxE/AAAAAAAAAAI/AAAAAAAAABE/re8EZA9WuXs/photo.jpg?sz=128", "display_name": "S&#246;ren", "link": "https://stackoverflow.com/users/5452008/s%c3%b6ren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480539892, "creation_date": 1480537455, "last_edit_date": 1480538637, "question_id": 40897500, "link": "https://stackoverflow.com/questions/40897500/how-to-fix-bundler-missing-usr-bin-ruby-mri-loaderror", "title": "How to fix bundler missing /usr/bin/ruby-mri (LoadError)?", "body": "<p>I am executing the following line to test the installation of redmine-3.3:</p>\n\n<pre><code>bundle exec ruby script/server webrick -e production\n&gt; /usr/bin/ruby-mri: No such file or directory -- script/server (LoadError)\n</code></pre>\n\n<p>Apparently, the executable <code>ruby-mri</code> is missing. Does anyone know how I can fix this? I am running Fedora24. Installed ruby with <code>dnf install rubygem-rails</code>. </p>\n\n<p>I installed ruby with <code>dnf install ruby</code>, now the file is present, but the error message stays the same. So there is a file <code>/usr/bin/ruby-mri</code>, but the error message complaints the file is not present. ???</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480539544, "post_id": 40897381, "comment_id": 69009886, "body": "You need to correct your example. For <code>&quot;userjim1&quot;</code>, <code>Bob User</code> and <code>10.10.2016</code>are not valid Ruby objects. I expect you want <code>[&quot;Bob User&quot;, 10, &quot;10.10.2016&quot;]</code> and similar for <code>&quot;userjim2&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7232569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811504a4e745ea255bd7abbf7a6f34a2?s=128&d=identicon&r=PG&f=1", "display_name": "northdakota2170", "link": "https://stackoverflow.com/users/7232569/northdakota2170"}, "edited": false, "score": 0, "creation_date": 1480538500, "post_id": 40897521, "comment_id": 69009301, "body": "Thank you both! Most have been running a little low on caffeine! My last question is, if I added a blank array to the hash for each user, is there a way to use the array.push method to add values to it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 11, "user_id": 7232569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811504a4e745ea255bd7abbf7a6f34a2?s=128&d=identicon&r=PG&f=1", "display_name": "northdakota2170", "link": "https://stackoverflow.com/users/7232569/northdakota2170"}, "edited": false, "score": 0, "creation_date": 1480538905, "post_id": 40897521, "comment_id": 69009526, "body": "Try evaluating these things in <code>irb</code> to see how they behave. If you&#39;re referencing an array, you can do anything to it you can do to an array: <code>hash[&quot;userbob1&quot;][0] &lt;&lt; &#39;Another field&#39;</code> for example, where <code>&lt;&lt;</code> is an alias for <code>push</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1480537514, "creation_date": 1480537514, "answer_id": 40897521, "question_id": 40897381, "link": "https://stackoverflow.com/questions/40897381/working-with-multiple-arrays-inside-a-hash-ruby/40897521#40897521", "title": "Working with multiple arrays inside a hash - Ruby", "body": "<p>You've got to navigate through each part of the structure sequentially, and remember each part of that code is evaluated as it goes left to right:</p>\n\n<pre><code>hash[\"userbob1\"][0]\n</code></pre>\n\n<p>What you were doing is asking for <code>\"userbob1\"[0]</code> which of course evaluates to <code>\"u\"</code>, and that value is then used as a hash key, which is wrong.</p>\n\n<p>Just think of each part as something you can evaluate and append to:</p>\n\n<pre><code>hash\nhash[\"userbob1\"]\nhash[\"userbob1\"][0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 7210209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4e2fe7ec7252f1910143e7d90441053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Stroud", "link": "https://stackoverflow.com/users/7210209/michael-stroud"}, "is_accepted": false, "score": 0, "last_activity_date": 1480537539, "creation_date": 1480537539, "answer_id": 40897527, "question_id": 40897381, "link": "https://stackoverflow.com/questions/40897381/working-with-multiple-arrays-inside-a-hash-ruby/40897527#40897527", "title": "Working with multiple arrays inside a hash - Ruby", "body": "<p>Your syntax is close to correct. Try hash[\"userbob1\"] [0]</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7232569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811504a4e745ea255bd7abbf7a6f34a2?s=128&d=identicon&r=PG&f=1", "display_name": "northdakota2170", "link": "https://stackoverflow.com/users/7232569/northdakota2170"}, "edited": false, "score": 0, "creation_date": 1480539556, "post_id": 40897774, "comment_id": 69009893, "body": "Thanks for the detailed breakdown! Very helpful as well!!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1480540381, "last_edit_date": 1480540381, "creation_date": 1480538391, "answer_id": 40897774, "question_id": 40897381, "link": "https://stackoverflow.com/questions/40897381/working-with-multiple-arrays-inside-a-hash-ruby/40897774#40897774", "title": "Working with multiple arrays inside a hash - Ruby", "body": "<pre><code>hash = { \"userbob1\" =&gt; [\"Bob User\", 10, \"10.10.2016\"],\n         \"userjim2\" =&gt; [\"Jim User\", 4, \"9.16.16\"] }\n\narr = hash[\"userbob1\"]\n  #=&gt; [\"Bob User\", 10, \"10.10.2016\"] \n</code></pre>\n\n<p><em>Retrieve a value from the array</em></p>\n\n<p>Retrieve the value at index 1.</p>\n\n<pre><code>arr[1]\n  #=&gt; 10 \n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>hash[\"userbob1\"][1]\n</code></pre>\n\n<p><em>Append the array</em></p>\n\n<p>Append the array with <code>\"cat\"</code>,</p>\n\n<pre><code>arr &lt;&lt; \"cat\"\nhash\n  #=&gt; {\"userbob1\"=&gt;[\"Bob User\", 10, \"10.10.2016\", \"cat\"],\n  #    \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]} \n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>hash[\"userbob1\"] &lt;&lt; \"cat\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>hash[\"userbob1\"].push(\"cat\")\n</code></pre>\n\n<p><em>Replace the array with another array</em></p>\n\n<pre><code>arr.replace [1,2,3]\nhash\n  #=&gt; {\"userbob1\"=&gt;[1, 2, 3], \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]} \n</code></pre>\n\n<p>which is the same as </p>\n\n<pre><code>hash[\"userbob1\"].replace [1,2,3]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>hash[\"userbob1\"] = [1,2,3]\n  #=&gt; [1,2,3]\nhash\n  #=&gt; {\"userbob1\"=&gt;[1, 2, 3], \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]} \n</code></pre>\n\n<p>Note</p>\n\n<pre><code>arr = [1,2,3]\nhash\n  #=&gt; {\"userbob1\"=&gt;[\"Bob User\", 10, \"10.10.2016\"],\n  #    \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]}\n</code></pre>\n\n<p>(The hash is not altered.)</p>\n\n<p><em>Reverse the array</em></p>\n\n<pre><code>arr.reverse!\nhash\n  #=&gt; {\"userbob1\"=&gt;[\"10.10.2016\", 10, \"Bob User\"],\n  #    \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]} \n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>hash[\"userbob1\"].reverse!\n</code></pre>\n\n<p>Note</p>\n\n<pre><code>arr.reverse\nhash\n  #=&gt; {\"userbob1\"=&gt;[\"Bob User\", 10, \"10.10.2016\"],\n  #    \"userjim2\"=&gt;[\"Jim User\", 4, \"9.16.16\"]}\n</code></pre>\n\n<p>The hash is unchanged because <code>arr.reverse</code> returns the reversed array but does not change it.</p>\n"}], "owner": {"reputation": 11, "user_id": 7232569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811504a4e745ea255bd7abbf7a6f34a2?s=128&d=identicon&r=PG&f=1", "display_name": "northdakota2170", "link": "https://stackoverflow.com/users/7232569/northdakota2170"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1480540381, "creation_date": 1480537007, "last_edit_date": 1480539884, "question_id": 40897381, "link": "https://stackoverflow.com/questions/40897381/working-with-multiple-arrays-inside-a-hash-ruby", "title": "Working with multiple arrays inside a hash - Ruby", "body": "<p>I am having an issue trying to figure out how to work with an array inside a hash in ruby. I am running a command (last command on linux if you must know), capturing output from it and trying to insert unique data about each user that appeared in this log into the hash, each having its own array. Example below:</p>\n\n<pre><code>hash = {\n  \"userbob1\" =&gt; [\"Bob User\", 10, \"10.10.2016\"],\n  \"userjim2\" =&gt; [\"Jim User\", 4, \"9.16.16\"]\n}\n</code></pre>\n\n<p>and so forth.</p>\n\n<p>I have been able to successfully insert an array into a hash as a whole, but how would I go about retrieving specific values of that array, or adding values to it after I added it to the hash?</p>\n\n<p>I'd imagine something like this:</p>\n\n<pre><code>hash[\"userbob1\"[0]]  #=&gt; \"Bob User\"\n</code></pre>\n"}, {"tags": ["ruby", "linux", "ssl"], "comments": [{"owner": {"reputation": 11, "user_id": 6317478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5291e003825a7c4b2c42675353d1f652?s=128&d=identicon&r=PG&f=1", "display_name": "Jian", "link": "https://stackoverflow.com/users/6317478/jian"}, "edited": false, "score": 0, "creation_date": 1480705549, "post_id": 40896586, "comment_id": 69090046, "body": "I also tried to make it happen on windows in Java, got the same error message while httpie works.  The question is still where I should put these client certs to and the application can read correctly from.  Thanks."}], "owner": {"reputation": 11, "user_id": 6317478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5291e003825a7c4b2c42675353d1f652?s=128&d=identicon&r=PG&f=1", "display_name": "Jian", "link": "https://stackoverflow.com/users/6317478/jian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480534001, "creation_date": 1480534001, "question_id": 40896586, "link": "https://stackoverflow.com/questions/40896586/how-to-connect-to-restful-web-service-with-a-client-certificate-from-centos-mach", "title": "How to connect to RESTful web service with a client certificate from CentOS machine(not web server)", "body": "<p>I'm writing a small ruby code, trying to connect to a RESTful web service with provided client certificate(pkcs12) from my CentOS machine. </p>\n\n<p>I can use httpie to successfully connect to the web server with the certificate from windows machine.  But somehow I can't make it happen on Linux machine.</p>\n\n<h1>I tried to put extracted cert.pem to /etc/pki/tls/certs and private key to /etc/pki/tls/private.  Or I tried to create new cert store within the code, which doesn't work either, always got the following errors:</h1>\n\n<p>/usr/share/ruby/net/http.rb:918:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server hello A: sslv3 alert handshake failure (OpenSSL::SSL::SSLError)</p>\n\n<p>=====ruby code======</p>\n\n<h1>!/usr/bin/env ruby</h1>\n\n<p>require 'net/http'\nrequire 'uri'\nrequire 'openssl'</p>\n\n<p>begin\n    uri = URI.parse('<a href=\"https://api.test.com/rest/api/exports\" rel=\"nofollow noreferrer\">https://api.test.com/rest/api/exports</a>')\n    args = {:\"Client ID\"=>'111111', :\"Client secret\"=>'11111'}\n    uri.query = URI.encode_www_form(args)\n    httpHM  = Net::HTTP.new(uri.host, 443)\n    httpHM.use_ssl = true\n    httpHM.ssl_version=\"SSLv3\"\n    #cert_store = OpenSSL::X509::Store.new\n    #cert_store.add_file 'cert.pem'\n    #httpHM.cert_store=cert_store</p>\n\n<pre><code>request = Net::HTTP::Get.new(uri.request_uri)\n\n#response = httpHM.request(request)\nhttpHM.start do |http|\n    response=http.request(request)\nend\nputs response.body\n</code></pre>\n\n<h1>end</h1>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1480640354, "post_id": 40896678, "comment_id": 69058120, "body": "That&#39;s a super helpful explanation. Any chance to learn SQL tricks is a plus to me. Thank you and it has really helped."}], "tags": [], "owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "is_accepted": true, "score": 3, "last_activity_date": 1480599466, "last_edit_date": 1480599466, "creation_date": 1480534393, "answer_id": 40896678, "question_id": 40896240, "link": "https://stackoverflow.com/questions/40896240/rails-5-render-a-div-for-each-child-object-in-a-collection/40896678#40896678", "title": "Rails 5: Render a div for each child object in a collection", "body": "<p>Two ways to do it:</p>\n\n<p>Create a partial that references itself for child comments, like:</p>\n\n<pre><code># comments/_show.html.erb\n\n&lt;% depth ||= 0 %&gt;\n&lt;div class=\"comment\" style=\"padding-left: &lt;%= 16 * depth %&gt;px;\"&gt;\n  &lt;%= comment.text %&gt;\n  &lt;% comment.children.each do |c| %&gt;\n    &lt;%= render partial: \"comments/show\", locals: { comment: c, depth: depth + 1 } %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>Or you can modify your Comment model to have a natural nesting at the database level, and query/order/indent them all at once. This is more complicated, but it's extremely powerful and extremely easy to use.</p>\n\n<p>Add a <code>tree_left</code>, <code>tree_right</code> and <code>depth</code> column to your comments table (all positive integers). Index the <code>tree</code> columns.</p>\n\n<p><code>tree_left</code> and <code>tree_right</code> are mutually unique and contain every number from 1 to (Number of records * 2). Here is an example tree:</p>\n\n<pre><code>test# select id, text, parent, tree_left, tree_right, depth from comments order by tree_left;\n+----+----------------------------+-----------+-----------+------------+-------+\n| id | text                       | parent    | tree_left | tree_right | depth |\n+----+----------------------------+-----------+-----------+------------+-------+\n|  1 | Top Level Comment          |      NULL |         1 |         30 |     0 |\n|  2 | Second Level               |         1 |         2 |         29 |     1 |\n|  3 | Third Level 1              |         2 |         3 |         20 |     2 |\n|  5 | Fourth Level 1             |         3 |         4 |          9 |     3 |\n| 12 | Fifth Level 4              |         5 |         5 |          6 |     4 |\n| 13 | Fifth Level 5              |         5 |         7 |          8 |     4 |\n|  6 | Fourth Level 2             |         3 |        10 |         19 |     3 |\n|  8 | Fifth Level                |         6 |        11 |         18 |     4 |\n|  9 | Sixth Level 1              |         8 |        12 |         13 |     5 |\n| 10 | Sixth Level 2              |         8 |        14 |         15 |     5 |\n| 11 | Sixth Level 3              |         8 |        16 |         17 |     5 |\n|  4 | Third Level 2              |         2 |        21 |         28 |     2 |\n|  7 | Fourth Level 3             |         4 |        22 |         27 |     3 |\n| 14 | Fifth Level 6              |         7 |        23 |         24 |     4 |\n| 15 | Fifth Level 7              |         7 |        25 |         26 |     4 |\n+----+----------------------------+-----------+-----------+------------+-------+\n</code></pre>\n\n<p>Insert top level comments with <code>depth = 0</code>, <code>tree_left = (current largest tree_right + 1)</code> and <code>tree_right = (current largest tree_right + 2)</code>. </p>\n\n<p>Insert child comments with <code>depth = parent.depth + 1</code>, <code>tree_left = parent.tree_right</code>, and <code>tree_right = parent.tree_right +</code>. THEN, run:  </p>\n\n<p><code>UPDATE comments SET tree_left  = tree_left  + 2 WHERE tree_left  &gt;= #{parent.tree_right}</code><br>\n<code>UPDATE comments SET tree_right = tree_right + 2 WHERE tree_right &gt;= #{parent.tree_right}</code></p>\n\n<p>Comment <code>A</code> is a child of comment <code>B</code> if and only if:\n  <code>A.tree_left &gt; B.tree_left</code>, and <code>A.tree_right &lt; B.tree_right</code>.</p>\n\n<p>So the way this works is you can get all children in the tree belonging to comment \"XYZ\" with this query:</p>\n\n<p><code>Select * from comments where tree_left &gt;= #{XYZ.tree_left} AND tree_right &lt;= #{XYZ.tree_right} ORDER BY tree_left</code>.</p>\n\n<p>To get all the PARENTS of a comment, use the opposite signs: </p>\n\n<p><code>Select * from comments where tree_left &lt;= #{XYZ.tree_left} AND tree_right &gt;= #{XYZ.tree_right} ORDER BY tree_left</code>.</p>\n\n<p>Inclusion of <code>=</code> in the conditions determines whether or not to include the comment being used to generate the query.</p>\n\n<p>The order by tree_left is important, it puts them in nested tree order. Then in your view, you can directly iterate over this list and just indent them by their depth.</p>\n\n<p>For more information on why this tree_left and tree_right stuff works, check out the Nested Set theory part of this article: <a href=\"http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/\" rel=\"nofollow noreferrer\">http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/</a></p>\n"}, {"tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": false, "score": 1, "last_activity_date": 1480534803, "creation_date": 1480534803, "answer_id": 40896791, "question_id": 40896240, "link": "https://stackoverflow.com/questions/40896240/rails-5-render-a-div-for-each-child-object-in-a-collection/40896791#40896791", "title": "Rails 5: Render a div for each child object in a collection", "body": "<p>Recursion is what you are looking for. Here's a railsy example:  <a href=\"http://benjit.com/rails/2015/04/01/rendering-partials-with-layouts-recursively/\" rel=\"nofollow noreferrer\">http://benjit.com/rails/2015/04/01/rendering-partials-with-layouts-recursively/</a></p>\n\n<p>And here is some example code </p>\n\n<pre><code>#_post.html.erb\n&lt;%= render partial: 'comment_list', locals: {commenabel: @post} %&gt;\n</code></pre>\n\n<p>This is the recursive partial:</p>\n\n<pre><code>#_comment_list.html.erb\n&lt;div&gt;\n  &lt;%= commentable.to_s %&gt;\n&lt;/div&gt;\n&lt;ul&gt;\n  &lt;% commentable.comments.each do |comment| %&gt;\n    &lt;li&gt;\n      &lt;%= render partial: 'comment_list', locals: {commentable: comment} %&gt;\n    &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 40896678, "answer_count": 2, "score": 1, "last_activity_date": 1480599466, "creation_date": 1480532747, "question_id": 40896240, "link": "https://stackoverflow.com/questions/40896240/rails-5-render-a-div-for-each-child-object-in-a-collection", "title": "Rails 5: Render a div for each child object in a collection", "body": "<p>I'm trying to figure out an efficient way to have reddit style nested comments on a page. I've got everything set up the way I want. But, I'm having trouble figuring out how to render comments in an efficient manner. See my current partial below:</p>\n\n<pre><code>#_comment_list.html.erb\n&lt;div class=\"comment-list\"&gt;\n  &lt;h2&gt;Comments&lt;/h2&gt;\n  &lt;ul&gt;\n    &lt;% @post.comments.each do |c| %&gt;\n        &lt;% byebug %&gt;\n      &lt;li&gt;&lt;%= c.body %&gt;&lt;/li&gt;\n      &lt;% unless c.is_deleted == true %&gt;\n        &lt;%= render partial: \"shared/comment_form\", :locals =&gt; { commentable_type: c.class.name, commentable_id: c.id, post: @post.id } if current_user %&gt;\n      &lt;% end %&gt;\n      &lt;ul&gt;\n        &lt;% c.comments.each do |d| %&gt;\n          &lt;li&gt;&lt;%= d.body %&gt;&lt;/li&gt;\n          &lt;% unless d.is_deleted == true %&gt;\n            &lt;%= render partial: \"shared/comment_form\", :locals =&gt; { commentable_type: d.class.name, commentable_id: d.id, post: @post.id } if current_user %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Obviously, this will only render only one set of child comments like so:</p>\n\n<pre><code>Post\n  Comment\n    Child Comment\n    Child Comment\n  Comment\n  ...\n</code></pre>\n\n<p>I'm drawing a blank, design wise, on how to render children of child comments for as many times as they need to be nested.</p>\n\n<pre><code>Post\n  Comment\n    Child Comment\n      Grandchild Comment\n        Great Grandchild Comment\n        Great Grandchild Comment\n    Child Comment\n  Comment\n  ...\n</code></pre>\n\n<p>If someone could point me in a direction of where to go, I would be much appreciated.</p>\n\n<p>Here is some info about my models and associations if it would help come up with a solution.</p>\n\n<pre><code># Comment.rb\nclass Comment &lt; ApplicationRecord\n  validates_presence_of :body\n  # validates :user_id, presence: true\n\n  belongs_to :user\n  belongs_to :commentable, polymorphic: true\n  has_many :comments, as: :commentable\n\n  def find_parent_post\n    return self.commentable if self.commentable.is_a?(Post)\n    self.commentable.find_parent_post # semi recursion will keep calling itself until it .is_a? Post\n  end\nend\n\n# Post.rb\nclass Post &lt; ApplicationRecord\n  validates :user_id, presence: true\n  validates :forum_id, presence: true\n\n  belongs_to :user\n  belongs_to :forum\n\n  has_many :comments, as: :commentable\nend\n\ncreate_table \"comments\", force: :cascade do |t|\n  t.text     \"body\"\n  t.datetime \"created_at\",                       null: false\n  t.datetime \"updated_at\",                       null: false\n  t.integer  \"commentable_id\"\n  t.string   \"commentable_type\"\n  t.integer  \"user_id\"\n  t.boolean  \"is_deleted\",       default: false, null: false\nend\n\ncreate_table \"forums\", force: :cascade do |t|\n  t.string   \"name\"\n  t.text     \"description\"\n  t.integer  \"user_id\"\n  t.datetime \"created_at\",  null: false\n  t.datetime \"updated_at\",  null: false\n  t.index [\"user_id\"], name: \"index_forums_on_user_id\", using: :btree\nend\n\ncreate_table \"posts\", force: :cascade do |t|\n  t.string   \"title\"\n  t.text     \"description\"\n  t.integer  \"user_id\"\n  t.integer  \"forum_id\"\n  t.datetime \"created_at\",  null: false\n  t.datetime \"updated_at\",  null: false\n  t.index [\"forum_id\"], name: \"index_posts_on_forum_id\", using: :btree\n  t.index [\"user_id\"], name: \"index_posts_on_user_id\", using: :btree\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480536393, "post_id": 40895911, "comment_id": 69008172, "body": "You need one or more additional tags to indicate this is a Rails or Active Support question (and not a pure Ruby question)."}], "answers": [{"tags": [], "owner": {"reputation": 3363, "user_id": 2876504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f861d39e1561dc8147fc6442d1235e8?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro C.", "link": "https://stackoverflow.com/users/2876504/alejandro-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1480531900, "creation_date": 1480531900, "answer_id": 40896000, "question_id": 40895911, "link": "https://stackoverflow.com/questions/40895911/how-does-active-support-inflector-get-included/40896000#40896000", "title": "How does active_support/inflector get included?", "body": "<p>You're right, String is getting monkeypatched here:</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/activesupport/lib/active_support/core_ext/string/inflections.rb#L9\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/activesupport/lib/active_support/core_ext/string/inflections.rb#L9</a></p>\n\n<p>This is then included by the module you're requiring here:\n<a href=\"https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/activesupport/lib/active_support/inflector.rb#L7\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/activesupport/lib/active_support/inflector.rb#L7</a></p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 40896000, "answer_count": 1, "score": 0, "last_activity_date": 1480540748, "creation_date": 1480531497, "last_edit_date": 1480540748, "question_id": 40895911, "link": "https://stackoverflow.com/questions/40895911/how-does-active-support-inflector-get-included", "title": "How does active_support/inflector get included?", "body": "<p>I required <code>active_support/inflector</code> and now I'm able to use the <code>pluralize</code> method on strings.</p>\n\n<pre><code>require 'active_support/inflector'\n\nmodule Foodie\n  class Food\n    def self.pluralize(word)\n      word.pluralize\n    end\n  end\nend\n\np Foodie::Food.pluralize(\"foo\") #=&gt; foos\n</code></pre>\n\n<p>But I was expecting to have to include the <code>ActiveSupport::Inflector</code> module as a mixin for it to work.</p>\n\n<p>Why don't I need something like:</p>\n\n<pre><code>module Foodie\n  class Food\n    include ActiveSupport::Inflector\n    def self.pluralize(word)\n      word.pluralize\n    end\n  end\nend\n\np Foodie::Food.pluralize(\"foo\") #=&gt; foos\n</code></pre>\n\n<p>Also the above example still works.</p>\n\n<p>I thought the whole point of requiring a file is just so you have access to the classes/modules/methods/variables inside that file, but it doesn't necessarily include that functionality in all the modules and classes.</p>\n\n<p>Maybe, is it because the ruby file with the Inflector module is opening up the string class? Like in this example:</p>\n\n<p>foo.rb:</p>\n\n<pre><code>module Foo\nend\n\nclass String\n  def cats  \n    self + \" cats\"\n  end\nend\n</code></pre>\n\n<p>bar.rb:</p>\n\n<pre><code>require_relative 'foo'\n\np \"foobar\".cats #=&gt; \"foobar cats\"\n</code></pre>\n\n<p>Would love some guidance :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables", "stdout"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480531461, "post_id": 40895748, "comment_id": 69005567, "body": "You&#39;re trying to capture the standard output of your own script in variables?"}, {"owner": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480531814, "post_id": 40895748, "comment_id": 69005778, "body": "@muistooshort Sort of. In my script, I am calling another ruby script which will puts multiple strings to standard output.  How do I store each string from the standard output individually?  Thanks."}, {"owner": {"reputation": 1097, "user_id": 1179430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RBTl0.jpg?s=128&g=1", "display_name": "GAntoine", "link": "https://stackoverflow.com/users/1179430/gantoine"}, "edited": false, "score": 1, "creation_date": 1480531914, "post_id": 40895748, "comment_id": 69005837, "body": "Although I wouldn&#39;t recommend it, <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow noreferrer\">StringIO</a> is the way to go. Take a look at <a href=\"http://stackoverflow.com/a/14988271/1179430\">this answer</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1480533172, "post_id": 40895748, "comment_id": 69006513, "body": "<a href=\"http://ruby-doc.org/stdlib-2.3.3/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.3.3/libdoc/open3/rdoc/Open3.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "edited": false, "score": 0, "creation_date": 1480532367, "post_id": 40895953, "comment_id": 69006084, "body": "Thanks.  But what if I don&#39;t have the values saved?  For example, in my case, I call another script in my script so I have no control.  The other scripts has many lines where strings are puts to standout output."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "edited": false, "score": 0, "creation_date": 1480532676, "post_id": 40895953, "comment_id": 69006256, "body": "Maybe you could use pipes? For example, ruby script1.rb | ruby script2.rb and use $stdin.gets to get the output? I don&#39;t think there is a way to both execute another ruby script an and also monitor $stdin at the same time within script2. Also what should happen if script1 has an Exception? The proper way to do this is to use a database/redis/filestore and store the values there :)"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "edited": false, "score": 0, "creation_date": 1480532974, "post_id": 40895953, "comment_id": 69006411, "body": "Also this: <a href=\"http://stackoverflow.com/questions/14987362/how-can-i-capture-stdout-to-a-string\" title=\"how can i capture stdout to a string\">stackoverflow.com/questions/14987362/&hellip;</a>"}, {"owner": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "edited": false, "score": 0, "creation_date": 1480533224, "post_id": 40895953, "comment_id": 69006535, "body": "I think this part is consistent with what I have found so far.  Thanks.  :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1480537693, "post_id": 40895953, "comment_id": 69008821, "body": "If you want more control use the <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\">Open3</a> library and a method like <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html#method-c-popen3\" rel=\"nofollow noreferrer\"><code>popen3</code></a> which gives you handles for input, output, errors and a way to wait for that process to finish."}, {"owner": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1480547221, "post_id": 40895953, "comment_id": 69013545, "body": "@tadman Thank you sir.  This is more advanced but works for me."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1480612139, "post_id": 40895953, "comment_id": 69045102, "body": "It isn&#39;t necessary to use <code>$stdin.gets</code> because, <a href=\"http://ruby-doc.org/core-2.3.3/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\">by default <code>gets</code> reads from the standard input stream</a>, just as it&#39;s not necessary to use <code>$stdout.puts</code> since <a href=\"http://ruby-doc.org/core-2.3.3/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\"><code>puts</code> defaults to the standard output stream</a>."}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1480531697, "creation_date": 1480531697, "answer_id": 40895953, "question_id": 40895748, "link": "https://stackoverflow.com/questions/40895748/how-do-i-store-standard-outputs-to-multiple-variables/40895953#40895953", "title": "How do I store standard outputs to multiple variables?", "body": "<p>I'm not sure that I understand the question, but there are countless numbers of ways to store / print strings.  Its hard to imagine a situation where you would have a value following <code>puts</code> that is not entered manually or set programatically.</p>\n\n<p>You can save input variables with gets or $stdin.gets or as an argument with the ARGV array. For example:</p>\n\n<pre><code>puts \"Enter the first string\"\nvar0 = $stdin.gets.chomp\n</code></pre>\n\n<p>If you already have the values saved </p>\n\n<pre><code>var1 = \"hello\"\nvar2 = \"thanks\"\narray = [var1, var2]\nhash = {:key1 =&gt; var1, :key2 =&gt; var2}\n\n\nputs var1\nputs var2\narray.each do |str| puts str end\nhash.map do |k, v| puts v end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1480543287, "creation_date": 1480543287, "answer_id": 40899027, "question_id": 40895748, "link": "https://stackoverflow.com/questions/40895748/how-do-i-store-standard-outputs-to-multiple-variables/40899027#40899027", "title": "How do I store standard outputs to multiple variables?", "body": "<p>You're basically chaining applications/scripts together. There are multiple ways to do it but the simplest path uses the STDIN/STDOUT pipeline.</p>\n\n<p>A simple example would be using two small scripts. Save this as test.rb:</p>\n\n<pre><code>puts 'foo'\nputs 'bar'\n</code></pre>\n\n<p>and this as test2.rb:</p>\n\n<pre><code>v1 = gets.chomp\nv2 = gets.chomp\n\nputs \"v1=#{v1} v2=#{v2}\"\n</code></pre>\n\n<p>then, at the command line use:</p>\n\n<pre><code>ruby test.rb | ruby test2.rb\n</code></pre>\n\n<p>which will output:</p>\n\n<pre><code>v1=foo v2=bar\n</code></pre>\n\n<p><code>|</code> is how we chain the output of one script to the input of another and isn't part of Ruby, it's part of the OS.</p>\n\n<p>This works because, by default, <code>puts</code> writes to STDOUT and <code>gets</code> reads from STDIN. <code>|</code> wires them together.</p>\n"}], "owner": {"reputation": 581, "user_id": 7232500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c61b9c1c99c75d16db01dc89309a2d50?s=128&d=identicon&r=PG&f=1", "display_name": "000000000000000000000", "link": "https://stackoverflow.com/users/7232500/000000000000000000000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1480543287, "creation_date": 1480531010, "last_edit_date": 1480542893, "question_id": 40895748, "link": "https://stackoverflow.com/questions/40895748/how-do-i-store-standard-outputs-to-multiple-variables", "title": "How do I store standard outputs to multiple variables?", "body": "<p>How do I store Ruby standard outputs to multiple variables?</p>\n\n<p>For example, if I have:</p>\n\n<pre><code>puts \"hello\"\n\nputs \"thanks\"\n</code></pre>\n\n<p>How do I store \"hello\" and \"thanks\" to two different variables like <code>strVar</code> (containing the value \"hello\") and <code>strVar2</code> (containing the value \"thanks\").</p>\n\n<p>In my script, I am calling another Ruby script which will <code>puts</code> multiple strings to standard output. How do I store each string from the standard output individually?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480629451, "post_id": 40895739, "comment_id": 69054427, "body": "Hi @EricDuminil. Again thanks for you help. Today I found out there are two scenarios:   :survey_detail =&gt; {:question_number =&gt; &quot;1&quot;} and  :survey_detail =&gt; {[:question_number =&gt; &quot;1&quot;]}. If there are more than one question answered, it returns an Array of Hash.  If there&#39;s only one question answered, it returns a Hash.  So the <i>find</i> solution only works with Array of Hash. Could you let me know how to choose if it returns a Hash?"}], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1480532145, "creation_date": 1480532145, "answer_id": 40896071, "question_id": 40895739, "link": "https://stackoverflow.com/questions/40895739/how-to-select-a-hash-from-array-of-hash-it-throws-in-no-implicit-convers/40896071#40896071", "title": "how to select a hash from array of hash? It throws &quot;in `[]&#39;: no implicit conversion of Symbol into Integer (TypeError)&quot;", "body": "<p>Does <code>q1 = response[:survey_detail][0]</code> or <code>q1 = response[:survey_detail].each</code> not work? <code>response[:survey_detail]</code> is an array so any Array methods should work on it. The fact that the is inside of a Hash is not really relevant.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480539128, "post_id": 40897350, "comment_id": 69009641, "body": "Is response[:survey_detail] an array or a hash?"}, {"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480541109, "post_id": 40897350, "comment_id": 69010741, "body": "Yes. it returns Array."}, {"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480541361, "post_id": 40897350, "comment_id": 69010871, "body": "q1 = response[:survey_detail].find{|question| question[:question_number] == &quot;1&quot; }   puts q1.class   exit . Now q1 becomes a Hash. How can I make sure q1 to be an array? I need to do q1_question = q1[:question_text], since q1 is now a Hash, it erros out."}, {"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480541631, "post_id": 40897350, "comment_id": 69011011, "body": "as you said, @eric if use select, q1 is an array, if use find, q1 is a hash"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480541637, "post_id": 40897350, "comment_id": 69011015, "body": "Could you please update your question and post a complete and correct definition of your <code>response</code>, or at least <code>response[:survey_detail]</code>? <code>q1_question</code> is a Hash, and if it contains <code>:question_text</code>, there shouldn&#39;t be any problem."}, {"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480542382, "post_id": 40897350, "comment_id": 69011376, "body": "q1 = response[:survey_detail].find{|question| question[:question_number] == &quot;1&quot;}  #return a Hash   q1_recommend = q1[:question_text]  #error out here `[]&#39;: no implicit conversion of Symbol into Integer (TypeError)"}, {"owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "edited": false, "score": 0, "creation_date": 1480542994, "post_id": 40897350, "comment_id": 69011696, "body": "q1 = response[:survey_detail].find{|question| question[:question_number] == &quot;1&quot;}"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1480542059, "last_edit_date": 1480542059, "creation_date": 1480536903, "answer_id": 40897350, "question_id": 40895739, "link": "https://stackoverflow.com/questions/40895739/how-to-select-a-hash-from-array-of-hash-it-throws-in-no-implicit-convers/40897350#40897350", "title": "how to select a hash from array of hash? It throws &quot;in `[]&#39;: no implicit conversion of Symbol into Integer (TypeError)&quot;", "body": "<p>Got it!</p>\n\n<p>Replace <code>select</code> with <code>find</code>, and you're good to go.</p>\n\n<p>With <code>select</code>, you get back an Array of elements which satisfy the condition in the block, even if it only is an Array with 1 element.</p>\n\n<pre><code>(1..10).select{|i| i&gt;3 &amp;&amp; i&lt;5}\n#=&gt; [4]\n</code></pre>\n\n<p>With <code>find</code>, you get back the first element which satisfies the condition in the block.</p>\n\n<pre><code>(1..10).find{|i| i&gt;3 &amp;&amp; i&lt;5}\n#=&gt; 4\n</code></pre>\n\n<p>So :</p>\n\n<pre><code>q1 = response[:survey_detail].find{|question| question[:question_number].to_s == \"1\" }\nq1_text = q1[:question_text]\nq1_response =q1[:answer][:answer_text]\n#=&gt; \"Yes\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "is_accepted": false, "score": 0, "last_activity_date": 1480649289, "creation_date": 1480649289, "answer_id": 40924303, "question_id": 40895739, "link": "https://stackoverflow.com/questions/40895739/how-to-select-a-hash-from-array-of-hash-it-throws-in-no-implicit-convers/40924303#40924303", "title": "how to select a hash from array of hash? It throws &quot;in `[]&#39;: no implicit conversion of Symbol into Integer (TypeError)&quot;", "body": "<p><code>response[:survey_detail]</code> return a hash if there's only 1 question. \n<code>response[:survey_detail]</code> return an array of hash if there's more than 1 question.</p>\n\n<p>The business logic is that if quesion1.answer=\"No\" then the survey exit.</p>\n\n<p>So, my problem becomes when <code>response[:survey_detail]</code> return only 1 hash, <code>response[:survey_detail].find...</code> or <code>response[:survey_detail].select { |question| question[:question_number].to_s == \"1\" }[0]</code> won't operate on hash. </p>\n\n<p>Thus it throws \"<code>in</code>[]': no implicit conversion of Symbol into Integer (TypeError)`</p>\n\n<p>This error basically means I'm using a function available to an Array on a Hash.</p>\n\n<p>I did <code>is_a?(Hash)</code> to test response[:survey_detail] then divide it into two scenarios,hash or array.</p>\n"}], "owner": {"reputation": 125, "user_id": 1617237, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a319bf31f9278f6288201beac8deb725?s=128&d=identicon&r=PG", "display_name": "user1617237", "link": "https://stackoverflow.com/users/1617237/user1617237"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1480649289, "creation_date": 1480530973, "last_edit_date": 1480603267, "question_id": 40895739, "link": "https://stackoverflow.com/questions/40895739/how-to-select-a-hash-from-array-of-hash-it-throws-in-no-implicit-convers", "title": "how to select a hash from array of hash? It throws &quot;in `[]&#39;: no implicit conversion of Symbol into Integer (TypeError)&quot;", "body": "<p>How to select from the array of hash below to get</p>\n\n<blockquote>\n  <p>q1={\n                          :question_text => \"Have you received your goods?\",\n                  :question_export_value => nil,\n                          :question_type => \"1\",\n                                 :answer => {\n                              :answer_part => nil,\n                            :answer_column => nil,\n                              :answer_text => \"Yes\",\n                             :answer_other => nil,\n                      :answer_export_value => nil,\n                           :answer_comment => nil\n                  },\n                         :question_score => \"0\",\n                          :question_code => nil,\n                        :question_number => \"1\"\n              }</p>\n</blockquote>\n\n<p>I tried</p>\n\n<pre><code>q1 = response[:survey_detail].select { |question| question[:question_number].to_s == \"1\" }\nq1_text = q1[:question_text]  \nq1_response = q1[:answer][:answer_text]\n</code></pre>\n\n<p><strong>but got \"in `[]': no implicit conversion of Symbol into Integer</strong> (TypeError)</p>\n\n<p>Here is </p>\n\n<blockquote>\n  <p>puts response[:survey_detail]</p>\n</blockquote>\n\n<pre><code>{:question_text=&gt;\"Please rate the following based on your overall experience:\", :question_export_value=&gt;nil, :question_type=&gt;\"10\", :answer=&gt;[{:answer_part=&gt;\"Purchasing experience\", :answer_column=&gt;\"7 - High\", :answer_text=&gt;\"7 - High\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, {:answer_part=&gt;\"Design on the product\", :answer_column=&gt;\"6\", :answer_text=&gt;\"6\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, {:answer_part=&gt;\"Quality of the product\", :answer_column=&gt;\"7 - High\", :answer_text=&gt;\"7 - High\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}], :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"2\"}\n{:question_text=&gt;\"Which best describes your overall experience?\", :question_export_value=&gt;nil, :question_type=&gt;\"2\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"WOW!\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;\"2\", :question_number=&gt;\"4\"}\n{:question_text=&gt;\"In the space below, feel free to share any additional feedback about the aspects above.\", :question_type=&gt;\"8\", :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"3\"}\n{:question_text=&gt;\"My evaluation may be shared with others?\", :question_export_value=&gt;nil, :question_type=&gt;\"1\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"Yes\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"6\"}\n{:question_text=&gt;\"What is the primary reason  \", :question_type=&gt;\"8\", :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"5\"}\n{:question_text=&gt;\"Have you received your good?\", :question_export_value=&gt;nil, :question_type=&gt;\"1\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"Yes\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"1\"}\n</code></pre>\n\n<blockquote>\n  <p>response[:survey_detail].inspect</p>\n</blockquote>\n\n<pre><code>[{:question_text=&gt;\"Please rate the following based on your overall experience:\", :question_export_value=&gt;nil, :question_type=&gt;\"10\", :answer=&gt;[{:answer_part=&gt;\"Purchasing experience\", :answer_column=&gt;\"7 - High\", :answer_text=&gt;\"7 - High\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, {:answer_part=&gt;\"Design on the product\", :answer_column=&gt;\"6\", :answer_text=&gt;\"6\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, {:answer_part=&gt;\"Quality of the product\", :answer_column=&gt;\"7 - High\", :answer_text=&gt;\"7 - High\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}], :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"2\"}, {:question_text=&gt;\"Which best describes your overall experience?\", :question_export_value=&gt;nil, :question_type=&gt;\"2\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"WOW!\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;\"2\", :question_number=&gt;\"4\"}, {:question_text=&gt;\"In the space below, feel free to share any additional feedback about the aspects above.\", :question_type=&gt;\"8\", :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"3\"}, {:question_text=&gt;\"My evaluation may be shared with others:\", :question_export_value=&gt;nil, :question_type=&gt;\"1\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"Yes\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"6\"}, {:question_text=&gt;\"What is the primary reason for the score you just gave us?\", :question_type=&gt;\"8\", :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"5\"}, {:question_text=&gt;\"Have you received your shirt or product as part  ?\", :question_export_value=&gt;nil, :question_type=&gt;\"1\", :answer=&gt;{:answer_part=&gt;nil, :answer_column=&gt;nil, :answer_text=&gt;\"Yes\", :answer_other=&gt;nil, :answer_export_value=&gt;nil, :answer_comment=&gt;nil}, :question_score=&gt;\"0\", :question_code=&gt;nil, :question_number=&gt;\"1\"}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml"], "answers": [{"tags": [], "owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "is_accepted": true, "score": 3, "last_activity_date": 1480531235, "creation_date": 1480531235, "answer_id": 40895831, "question_id": 40895141, "link": "https://stackoverflow.com/questions/40895141/how-to-convert-an-array-of-hashes-into-xml-in-rails/40895831#40895831", "title": "How to convert an array of hashes into XML in Rails?", "body": "<p>try this:</p>\n\n<pre><code>    pp entries.to_xml(:root =&gt; 'map', :children =&gt; 'entry', :indent =&gt; 0, :skip_types =&gt; true)\n</code></pre>\n\n<p>source: <a href=\"http://apidock.com/rails/Array/to_xml\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Array/to_xml</a></p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 2407512, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c9113be2befa1aae0e3cec3cbc428b8?s=128&d=identicon&r=PG", "display_name": "Ayanami", "link": "https://stackoverflow.com/users/2407512/ayanami"}, "edited": false, "score": 0, "creation_date": 1480936754, "post_id": 40902508, "comment_id": 69155076, "body": "Thank you very much for the enlightenment and detailed explanation @7stud, it really helped me understand to_xml(). Thanks for your time!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1480620873, "last_edit_date": 1480620873, "creation_date": 1480565473, "answer_id": 40902508, "question_id": 40895141, "link": "https://stackoverflow.com/questions/40895141/how-to-convert-an-array-of-hashes-into-xml-in-rails/40902508#40902508", "title": "How to convert an array of hashes into XML in Rails?", "body": "<p>Suppose entry is the following hash:</p>\n\n<pre><code>entry = {\n  a: \u201chello\u201d,\n  b: \u201cgoodbye\u201d,\n}\n</code></pre>\n\n<p>If you write:</p>\n\n<pre><code>entries = []\nentries &lt;&lt; entry\np entries\n</code></pre>\n\n<p>then the output is:</p>\n\n<pre><code>[{:a =&gt; \u201chello\u201d, {:b =&gt; \u201cgoodbye\u201d}]\n</code></pre>\n\n<p>So if you then write:</p>\n\n<pre><code>p entries.to_xml\n</code></pre>\n\n<p>how do you suppose the word \u201centry\u201d will ever appear in the output?  That's sort of like expecting the output of:</p>\n\n<pre><code>x = 10\ny = 20\nputs x+y\n</code></pre>\n\n<p>to include the letters \"x\" and \"y\" somewhere.</p>\n\n<p>According to the to_xml() docs for arrays:</p>\n\n<blockquote>\n  <p>Returns a string ... by invoking to_xml on each element.<br>\n  The options hash is passed downwards.<br>\n  <a href=\"http://apidock.com/rails/Array/to_xml\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Array/to_xml</a></p>\n</blockquote>\n\n<p>The fact that the options hash is passed downwards means that when you specify <code>{root: map}</code> for the to_xml() call on the array, then <code>&lt;map&gt;</code> will become the root of the xml, and when <code>to_xml()</code> is called on each array element the method will be called with the option <code>{root: \u201cmap\u201d}</code>, which will cause each array element to be wrapped in a <code>&lt;map&gt;</code> tag.  For instance:</p>\n\n<pre><code>puts [{a: 10, b: 20}, {a: 100, b: 200}].to_xml({root: \"map\"})\n\n--output:--\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;map type=\"array\"&gt;\n  &lt;map&gt;\n    &lt;a type=\"integer\"&gt;10&lt;/a&gt;\n    &lt;b type=\"integer\"&gt;20&lt;/b&gt;\n  &lt;/map&gt;\n  &lt;map&gt;\n    &lt;a type=\"integer\"&gt;100&lt;/a&gt;\n    &lt;b type=\"integer\"&gt;200&lt;/b&gt;\n  &lt;/map&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>The nested <code>&lt;map&gt;</code> tags are a side effect of a feature built into the to_xml() method: if you specify a plural name for the :root option when calling to_xml() on an array, e.g. \u201cmaps\u201d, then when rails turns around and calls to_xml() on each element of the array, rails will specify the singular \u201cmap\u201d for the :root option. That makes some sense because if you call to_xml() on an array and you specify the :root option to be \u201cmaps\u201d then naturally each array element would probably be a \"map\".  Of course, that isn\u2019t what you want.</p>\n\n<p>Luckily, as mr_sudaca pointed out, there is this:</p>\n\n<blockquote>\n  <p>By default name of the node for the children of root is\n  root.singularize. You can change it with the <code>:children option</code>.<br>\n  <a href=\"http://apidock.com/rails/Array/to_xml\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Array/to_xml</a></p>\n</blockquote>\n\n<p>As a result, this code:</p>\n\n<pre><code>require 'ostruct'\n\nconfigs = [\n  OpenStruct.new(\n    key: \"PNB_ALERTLOG_RECEIVER_CHANNEL\",\n    value: \"PNB_ALERTLOG_RECEIVER\",\n    comment: \"Canal que...\",\n  ),\n  OpenStruct.new(\n    key: \"PNB_CFG_FILE_ACCESS_CONTROL\",\n    value: \"resources/configPnbDev/pnbAccessControl.json\",\n    comment: \"Este ficheiro...\",\n  )\n]\n\nentries = []\n\nconfigs.each do |config|\n  entry = {}\n  conf = {}\n\n  entry.store('string', config.key)\n\n  conf.store('value', config.value)\n  conf.store('comment', config.comment)\n\n  entry.store('com.mirth.connect.util.ConfigurationProperty', conf)\n\n  entries &lt;&lt; entry\nend\n\np entries\nputs entries.to_xml(:root =&gt; 'map', children: \"entry\", :skip_types =&gt; true)\n</code></pre>\n\n<p>produces the output:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;map&gt;\n  &lt;entry&gt;\n    &lt;string&gt;PNB_ALERTLOG_RECEIVER_CHANNEL&lt;/string&gt;\n    &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n      &lt;value&gt;PNB_ALERTLOG_RECEIVER&lt;/value&gt;\n      &lt;comment&gt;Canal que...&lt;/comment&gt;\n    &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;PNB_CFG_FILE_ACCESS_CONTROL&lt;/string&gt;\n    &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n      &lt;value&gt;resources/configPnbDev/pnbAccessControl.json&lt;/value&gt;\n      &lt;comment&gt;Este ficheiro...&lt;/comment&gt;\n    &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n  &lt;/entry&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>It looks to me like you also have some problems with your entry and conf hashes as every element in the entries array will refer to the same entry and conf hash, and because your loop keeps changing those hashes, each entry in the array will refer to a hash that contains the last key/values set in the loop.</p>\n"}], "owner": {"reputation": 85, "user_id": 2407512, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c9113be2befa1aae0e3cec3cbc428b8?s=128&d=identicon&r=PG", "display_name": "Ayanami", "link": "https://stackoverflow.com/users/2407512/ayanami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1205, "favorite_count": 0, "accepted_answer_id": 40895831, "answer_count": 2, "score": 1, "last_activity_date": 1480620873, "creation_date": 1480528743, "question_id": 40895141, "link": "https://stackoverflow.com/questions/40895141/how-to-convert-an-array-of-hashes-into-xml-in-rails", "title": "How to convert an array of hashes into XML in Rails?", "body": "<p>I have an array of database objects, <code>@configs</code>, that I want to convert to the XML format but the output is not the expected. Every entry gets enclosed in a <code>&lt;map&gt;</code> tag instead of a <code>&lt;entry&gt;</code> tag, I only wanted <code>&lt;tag&gt;</code> to be the XML root. How do I build the XML with the <code>&lt;tag&gt;</code> root and put all the entries in a <code>&lt;entry&gt;</code> tag?\nThank you in advance for your help and time!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    entries = Array.new\n    entry = Hash.new\n    conf = Hash.new  \n\n    @configs.each do |config|\n\n      entry.store('string', config.key)\n\n      conf.store('value', config.value)\n      conf.store('comment', config.comment)\n\n      entry.store('com.mirth.connect.util.ConfigurationProperty', conf)\n\n      entries &lt;&lt; entry    \n\n    end\n\n    pp entries.to_xml(:root =&gt; 'map', :indent =&gt; 0, :skip_types =&gt; true)\n</code></pre>\n\n<p>And the result is:</p>\n\n<pre><code>&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\n&lt;map&gt;\n    &lt;map&gt;\n        &lt;string&gt;PNB_ALERTLOG_RECEIVER_CHANNEL&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;PNB_ALERTLOG_RECEIVER&lt;/value&gt;\n            &lt;comment&gt;Canal que ir\u00c3\u00a1 receber tudo o que for logged com Warning e Error&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/map&gt;\n    &lt;map&gt;\n        &lt;string&gt;PNB_CFG_FILE_ACCESS_CONTROL&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/pnbAccessControl.json&lt;/value&gt;\n            &lt;comment&gt;Este ficheiro permite configurar Autentica\u00c3\u00a7\u00c3\u00a3o e Controlo de Acessos.&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/map&gt;\n    &lt;map&gt;\n        &lt;string&gt;PNB_CFG_FILE_CONNECTION_POOLS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/pnbConnectionPools.json&lt;/value&gt;\n            &lt;comment&gt;Configura\u00c3\u00a7\u00c3\u00a3o de Oracle Universal Connection Pools usadas pelo PNB (PEM, RCU2)&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/map&gt;\n    &lt;map&gt;\n        &lt;string&gt;PNB_CFG_FILE_CSP_MC_EXCLUSIONS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/medCronExclusions/mcExclCurrentRevision.json&lt;/value&gt;\n            &lt;comment&gt;N/A&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/map&gt;\n    &lt;map&gt;\n        &lt;string&gt;PNB_CFG_FILE_FACILITIES_ALIAS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/snsFacilitiesAlias.json&lt;/value&gt;\n            &lt;comment&gt;Mapa de alias do codigo das instituicoes do SNS.&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/map&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>What I wanted:</p>\n\n<pre><code>&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\n&lt;map&gt;\n    &lt;entry&gt;\n        &lt;string&gt;PNB_ALERTLOG_RECEIVER_CHANNEL&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;PNB_ALERTLOG_RECEIVER&lt;/value&gt;\n            &lt;comment&gt;Canal que ir\u00c3\u00a1 receber tudo o que for logged com Warning e Error&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/entry&gt;\n    &lt;entry&gt;\n        &lt;string&gt;PNB_CFG_FILE_ACCESS_CONTROL&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/pnbAccessControl.json&lt;/value&gt;\n            &lt;comment&gt;Este ficheiro permite configurar Autentica\u00c3\u00a7\u00c3\u00a3o e Controlo de Acessos.&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/entry&gt;\n    &lt;entry&gt;\n        &lt;string&gt;PNB_CFG_FILE_CONNECTION_POOLS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/pnbConnectionPools.json&lt;/value&gt;\n            &lt;comment&gt;Configura\u00c3\u00a7\u00c3\u00a3o de Oracle Universal Connection Pools usadas pelo PNB (PEM, RCU2)&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/entry&gt;\n    &lt;entry&gt;\n        &lt;string&gt;PNB_CFG_FILE_CSP_MC_EXCLUSIONS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/medCronExclusions/mcExclCurrentRevision.json&lt;/value&gt;\n            &lt;comment&gt;N/A&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/entry&gt;\n    &lt;entry&gt;\n        &lt;string&gt;PNB_CFG_FILE_FACILITIES_ALIAS&lt;/string&gt;\n        &lt;com.mirth.connect.util.ConfigurationProperty&gt;\n            &lt;value&gt;resources/configPnbDev/snsFacilitiesAlias.json&lt;/value&gt;\n            &lt;comment&gt;entrya de alias do codigo das instituicoes do SNS.&lt;/comment&gt;\n        &lt;/com.mirth.connect.util.ConfigurationProperty&gt;\n    &lt;/entry&gt;\n&lt;/map&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "split"], "comments": [{"owner": {"reputation": 502, "user_id": 2801159, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f35c793bdcf3198af6448cdead9b9f91?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Smith", "link": "https://stackoverflow.com/users/2801159/travis-smith"}, "edited": false, "score": 0, "creation_date": 1480530601, "post_id": 40895089, "comment_id": 69005107, "body": "What is the output you were expecting? This seems to run as one would expect."}, {"owner": {"reputation": 424, "user_id": 406835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cbae80f1ea00408841fcd67312ba365?s=128&d=identicon&r=PG", "display_name": "Dmitry Z.", "link": "https://stackoverflow.com/users/406835/dmitry-z"}, "edited": false, "score": 1, "creation_date": 1480531984, "post_id": 40895089, "comment_id": 69005877, "body": "You should try CSV module with custom delimiters. CSV.read(&quot;path-to-file.csv&quot;, col_sep: &quot;\\t&quot;)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480533566, "post_id": 40895089, "comment_id": 69006742, "body": "I&#39;m having trouble understanding the question. You say &quot;Trying to split this Tab delimited data set&quot;, but you don&#39;t say what you are splitting on. Also, I can&#39;t reconcile &quot;The <code>\\t\\n</code> combination seems to shave off the last <code>\\t</code>,...&quot; with the title: &quot;...split on <code>&quot;\\t&quot;</code> loses <code>&quot;\\n&quot;</code>. Do you first want to split on newlines, then split each of those strings on tabs, with the resulting arrays for the first three lines ending with an empty string? It would be particularly helpful if you could edit the question to show your desired result."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480533750, "post_id": 40895089, "comment_id": 69006876, "body": "Also, I noticed that each of the first three lines contains one or more spaces between the last tab and the newline. Is that intentional? If so, do you want to keep those spaces?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1480542015, "post_id": 40895089, "comment_id": 69011217, "body": "The first three entries, a \\t\\n is significant and should import as a nil inside the record&#39;s array, not a 3-member array."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480542591, "post_id": 40895089, "comment_id": 69011491, "body": "Could you please edit to show the desired result for your example?"}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1480542360, "post_id": 40895648, "comment_id": 69011371, "body": "I&#39;m splitting using /\\n/ first.  The issue shows up on each of those.  That limit seems to be the trick I was looking for.  Negative limit expands all apparent items."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 7, "last_activity_date": 1480535469, "last_edit_date": 1480535469, "creation_date": 1480530630, "answer_id": 40895648, "question_id": 40895089, "link": "https://stackoverflow.com/questions/40895089/ruby-string-split-on-t-loses-n/40895648#40895648", "title": "Ruby String Split on &quot;\\t&quot; loses &quot;\\n&quot;", "body": "<p>If this is for production, you should be using the <a href=\"http://ruby-doc.org/stdlib-2.3.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV class</a> as @DmitryZ pointed out in the comments. CSV processing has a surprising number of caveats and you should not do it by hand.</p>\n\n<p>But let's go through it as an exercise...</p>\n\n<hr>\n\n<p>The problem is split does not keep the delimiter, and it does not keep trailing null columns. You've hit both issues.</p>\n\n<p>When you run <code>a = text.split(/\\n/)</code> then the elements of <code>a</code> do not have newlines.</p>\n\n<pre><code>a = [\n    171\\t1000\\t21\\t   \n    269\\t1000\\t25\\t   \n    389\\t1000\\t40\\t\n    1020\\t1-03\\t30\\t1\n    1058\\t1-03\\t30\\t1\n    1074\\t1-03\\t30\\t1\n    200\\t300\\t\\t500\n]\n</code></pre>\n\n<p>Then, <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-split\" rel=\"nofollow noreferrer\">as documented in String#split</a>, \"<em>if the limit parameter is omitted, trailing null fields are suppressed.</em>\", so <code>u = i.split(/\\t/)</code> will ignore that last field <strong><em>unless</em></strong> you give it a limit.</p>\n\n<p>If you know it's always going to be 4 fields, you can use 4.</p>\n\n<pre><code>u = i.split(/\\t/, 4)\n</code></pre>\n\n<p>But it's probably more flexible to use -1 because \"<em>If [the limit is] negative, there is no limit to the number of fields returned, and trailing null fields are not suppressed.</em>\" so that will keep the empty fields without hard coding the number of columns in the CSV.</p>\n\n<pre><code>u = i.split(/\\t/, -1)\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 40895648, "answer_count": 1, "score": 4, "last_activity_date": 1480542841, "creation_date": 1480528586, "last_edit_date": 1480542841, "question_id": 40895089, "link": "https://stackoverflow.com/questions/40895089/ruby-string-split-on-t-loses-n", "title": "Ruby String Split on &quot;\\t&quot; loses &quot;\\n&quot;", "body": "<p>\\tTrying to split this Tab delimited data set:</p>\n\n<pre><code>171 1000    21  \n269 1000    25  \n389 1000    40  \n1020    1-03    30  1\n1058    1-03    30  1\n1074    1-03    30  1\n200 300     500\n</code></pre>\n\n<p>(for clarity: )</p>\n\n<pre><code>171\\t1000\\t21\\t\\n   \n269\\t1000\\t25\\t\\n   \n389\\t1000\\t40\\t\\n\n1020\\t1-03\\t30\\t1\\n\n1058\\t1-03\\t30\\t1\\n\n1074\\t1-03\\t30\\t1\\n\n200\\t300\\t\\t500\\n\n\na = text.split(/\\n/)\na.each do |i|\n  u = i.split(/\\t/)\n  puts u.size\nend\n\n==&gt;\n3\n3\n3\n4\n4\n4\n4\n</code></pre>\n\n<p>The \\t\\n combination seems to shave off the last \\t, which I need for further importation.  How can I get around this?  Cheers</p>\n\n<p>Edited: This is what I was expecting:</p>\n\n<pre><code>4\n4\n4\n4\n4\n4\n4\n</code></pre>\n"}, {"tags": ["ruby", "datetime", "ruby-on-rails-5", "rails-activejob"], "comments": [{"owner": {"reputation": 1388, "user_id": 683982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a178d98faf33ed9d5fc8348b0c03733?s=128&d=identicon&r=PG", "display_name": "Mathieu J.", "link": "https://stackoverflow.com/users/683982/mathieu-j"}, "edited": false, "score": 0, "creation_date": 1573714457, "post_id": 40894727, "comment_id": 103974522, "body": "isn&#39;t this missing a method to de-serialize the object from the json? ActiveJob should document this, but I can&#39;t find it at the moment..."}], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 13, "last_activity_date": 1480535562, "creation_date": 1480535562, "answer_id": 40896988, "question_id": 40894727, "link": "https://stackoverflow.com/questions/40894727/activejobserializationerror-unsupported-argument-type-time-datetime/40896988#40896988", "title": "ActiveJob::SerializationError - Unsupported argument type: Time / DateTime", "body": "<p>Use <code>card.to_json</code> instead. It will return a JSON string that the job will be able to accept.</p>\n\n<p>If you have logic you want to use with <code>as_json</code> just chain <code>to_json</code> to the end of the call to <code>as_json</code> i.e. <code>card.as_json.to_json</code>.</p>\n"}], "owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20171, "favorite_count": 1, "accepted_answer_id": 40896988, "answer_count": 1, "score": 12, "last_activity_date": 1524834104, "creation_date": 1480527328, "last_edit_date": 1524834104, "question_id": 40894727, "link": "https://stackoverflow.com/questions/40894727/activejobserializationerror-unsupported-argument-type-time-datetime", "title": "ActiveJob::SerializationError - Unsupported argument type: Time / DateTime", "body": "<p>I am using Rails 5 and ActiveJob to process background tasks.  I am trying to pass a object serialized with <code>as_json</code> to my job but I am receiving the following errors:</p>\n\n<pre><code>ActiveJob::SerializationError (Unsupported argument type: Time):\nActiveJob::SerializationError (Unsupported argument type: DateTime):\n</code></pre>\n\n<p>I understand that ActiveJob will not take Time/DateTime objects due to some queueing systems not handling those type.  So the object I am trying to serialize is as follows:</p>\n\n<pre><code>card = Card.first\n=&gt; #&lt;Card id: 256, title: \"quis\", description: \"Sunt corporis error laudantium veritatis impedit r...\", due_date: \"2016-12-15 12:00:00\", slug: \"quis\", created_at: \"2016-11-30 17:00:01\", updated_at: \"2016-11-30 17:00:01\", list_id: 26, position: 0, period_type: \"hours\", period_length: 0.0, user_id: 1&gt;\n</code></pre>\n\n<p>When I run:</p>\n\n<pre><code>card.as_json\n=&gt; {\"id\"=&gt;256, \"title\"=&gt;\"quis\", \"description\"=&gt;\"Sunt corporis error laudantium veritatis impedit repellat quasi.\", \"due_date\"=&gt;Wed, 15 Dec 2016 12:00:00 UTC +00:00, \"slug\"=&gt;\"quis\", \"created_at\"=&gt;Wed, 30 Nov 2016 17:00:01 UTC +00:00, \"updated_at\"=&gt;Wed, 30 Nov 2016 17:00:01 UTC +00:00, \"list_id\"=&gt;26, \"position\"=&gt;0, \"period_type\"=&gt;\"hours\", \"period_length\"=&gt;0.0, \"user_id\"=&gt;1}\n</code></pre>\n\n<p>The created_at, updated_at and due_date are all instances of <code>ActiveSupport::TimeWithZone</code></p>\n\n<p>I have tried to override this by using the following code in a initializer, which I found in another SO post but it does not help:</p>\n\n<pre><code>class ActiveSupport::TimeWithZone\n    def as_json(options = {})\n        strftime('%Y-%m-%d %H:%M:%S')\n    end\nend\n</code></pre>\n\n<p>Could anyone help with possibly have the dates as strings when <code>as_json</code> is run on the object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1480528939, "post_id": 40894744, "comment_id": 69004204, "body": "I will clarify my question. <code>&#47;go_to_home</code> will send the user to SalesController#go_to_home."}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1480530491, "post_id": 40894744, "comment_id": 69005047, "body": "No, I&#39;m only calling go_to_home from SalesController#create. Understand I&#39;ve simplified this example down so there&#39;s a lot of logic missing."}], "tags": [], "owner": {"reputation": 322, "user_id": 2268404, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6dDt8.jpg?s=128&g=1", "display_name": "rodeleon", "link": "https://stackoverflow.com/users/2268404/rodeleon"}, "is_accepted": false, "score": 3, "last_activity_date": 1480529975, "last_edit_date": 1480529975, "creation_date": 1480527371, "answer_id": 40894744, "question_id": 40894664, "link": "https://stackoverflow.com/questions/40894664/testing-controllers-redirect-in-rspec/40894744#40894744", "title": "Testing controller&#39;s redirect in RSpec", "body": "<p>Why are you expecting to be redirect to '/' in the specs? \nFrom the controller code you pasted you are going to be redirected to '/go_to_home' after hitting the create action</p>\n\n<p>Try changing the specs to:</p>\n\n<pre><code>expect(response).to redirect_to '/go_to_home'\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Is this a real example or the code is just for sharing what you are trying to achieve? \nI don't think rspec will follow the redirect after going to '/go_to_home' and I think is fine.</p>\n\n<p>If you are testing the create action it's ok to test that redirects to '/go_to_home' because that's what action is doing.\nThen you can do another test for the other action <code>go_to_home</code> and expect that redirects to root.</p>\n\n<p>Are you calling the action 'go_to_home' from somewhere else? </p>\n"}, {"tags": [], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "is_accepted": true, "score": 1, "last_activity_date": 1480531954, "creation_date": 1480531954, "answer_id": 40896018, "question_id": 40894664, "link": "https://stackoverflow.com/questions/40894664/testing-controllers-redirect-in-rspec/40896018#40896018", "title": "Testing controller&#39;s redirect in RSpec", "body": "<p>Controller tests are effectively unit tests - you are testing the effect of calling a single action and what the expected behaviour of that action is.</p>\n\n<p>The <code>create</code> action does return a response back with a status code of <code>302</code> and includes in the header a <code>Location</code> indicating the new URI, which in the case of calling create would be <code>Location: http://localhost/go_to_home</code></p>\n\n<p>This is as far as the controller test goes. It has emulated a call made from a browser to the create action and received the initial redirection. </p>\n\n<p>In the real world of course the browser would then navigate to the given location and would then hit the <code>go_to_home</code> action but this is beyond the scope of controller tests ... this is in the domain of integration testing.</p>\n\n<p>So, either,</p>\n\n<ol>\n<li>Create an integration test to initially call the <code>create</code> action, follow the redirection and test that you end up at '/'.</li>\n<li>Change the controller test to <code>expect(response).to redirect_to '/go_to_home'</code></li>\n<li>Change the <code>create</code> action to redirect directly to '/'</li>\n</ol>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2755, "favorite_count": 0, "accepted_answer_id": 40896018, "answer_count": 2, "score": 3, "last_activity_date": 1480531954, "creation_date": 1480527148, "last_edit_date": 1480528980, "question_id": 40894664, "link": "https://stackoverflow.com/questions/40894664/testing-controllers-redirect-in-rspec", "title": "Testing controller&#39;s redirect in RSpec", "body": "<p>I have a rspec test testing a controller action.</p>\n\n<pre><code>class SalesController &lt; ApplicationController\n  def create\n    # This redirect sends the user to SalesController#go_to_home\n    redirect_to '/go_to_home'\n  end\n\n  def go_to_home\n    redirect_to '/'\n  end\nend\n</code></pre>\n\n<p>My controller test looks like</p>\n\n<pre><code>RSpec.describe SalesController, type: :controller do\n  include PathsHelper\n\n  describe 'POST create' do\n    post :create\n\n    expect(response).to redirect_to '/'\n  end\nend\n</code></pre>\n\n<p>However, when I run the test it tells me that: </p>\n\n<pre><code>   Expected response to be a redirect to &lt;http://test.host/&gt; but was a redirect to &lt;http://test.host/go_to_home&gt;.\n   Expected \"http://test.host/\" to be === \"http://test.host/go_to_home\".\n</code></pre>\n\n<p><code>/go_to_home</code> will send the user to SalesController#go_to_home. How can I test that the response will eventually lead to the home page with the url <code>http://test.host/</code>?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "css-selectors", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1480614780, "post_id": 40894361, "comment_id": 69046688, "body": "Nokogiri implements CSS including some of the jQuery extensions so get familiar with how style sheets selectors work and you should have better luck. CSS is more readable but XPath is more powerful so knowing both is good. <code>tbody</code> tags are rarely used in generated HTML, however browsers tend to stick them in when you look at the page HTML. Don&#39;t trust the browser, instead look at the HTML directly using <code>wget</code> or <code>curl</code> or <code>nokogiri</code> at the command-line. Only use <code>tbody</code> if the raw HTML has it."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480693752, "post_id": 40894361, "comment_id": 69083328, "body": "@Dave : Just curious : why would you accept an answer and not upvote it?"}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1480526861, "post_id": 40894524, "comment_id": 69002918, "body": "It does not.  It fails if the HTML is a table followed by a tr (no tbody in between)."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1480527076, "post_id": 40894524, "comment_id": 69003061, "body": "It wasn&#39;t clear in your example. Do you have both <code>table&#47;tbody&#47;tr</code> and <code>table&#47;tr</code> ?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 1, "creation_date": 1480527231, "post_id": 40894524, "comment_id": 69003164, "body": "My quesiton is more genearl than that.  How do I select the trs in a table that are not nested within other trs?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1480529380, "last_edit_date": 1480529380, "creation_date": 1480526761, "answer_id": 40894524, "question_id": 40894361, "link": "https://stackoverflow.com/questions/40894361/how-do-i-find-direct-children-and-not-nested-children-using-rails-and-nokogiri/40894524#40894524", "title": "How do I find direct children and not nested children using Rails and Nokogiri?", "body": "<p>I don't know if it could be done directly with css/xpath, so I wrote a small method which recursively looks for the node. It stops recursion as soon as it is found.</p>\n\n<pre><code>xml= %q{\n&lt;root&gt;\n  &lt;table&gt;\n    &lt;tbody&gt;\n      &lt;tr nested=\"false\"&gt;\n        &lt;td&gt;\n          &lt;table&gt;\n            &lt;tr nested=\"true\"&gt;\n              This is found&lt;/tr&gt;\n          &lt;/table&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;another_table&gt;\n    &lt;tr nested = \"false\"&gt;\n      &lt;tr nested = \"true\"&gt;\n    &lt;/tr&gt;\n  &lt;/another_table&gt;\n  &lt;tr nested = \"false\"/&gt;\n&lt;/root&gt;\n}\n\nrequire 'nokogiri'\n\ndoc = Nokogiri::XML.parse(xml)\n\nclass Nokogiri::XML::Node\n  def first_children_found(desired_node)\n    if name == desired_node\n      [self]\n    else\n      element_children.map{|child|\n        child.first_children_found(desired_node)\n      }.flatten\n    end\n  end\nend\n\ndoc.first_children_found('tr').each do |tr|\n  puts tr[\"nested\"]\nend\n\n#=&gt;\n# false\n# false\n# false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480693512, "post_id": 40895763, "comment_id": 69083166, "body": "It&#39;s interesting to see how it can be done with xpath count, but it only works with <code>tag_a&#47;tag_b&#47;tag_a&#47;tag_b</code> structure (for example <code>&#47;table&#47;tr&#47;table&#47;tr</code>), not with <code>tag_a&#47;tag_b&#47;tag_b</code>. The OP said he wanted to have a general answer."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480695702, "post_id": 40895763, "comment_id": 69084721, "body": "@EricDuminil you can extend this technique to handle cases like <code>tag_a&#47;tag_b&#47;tag_b</code>. It\u2019s a little more complex, but not much."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480696292, "post_id": 40895763, "comment_id": 69085089, "body": "Thanks for the answer. Would you mind showing the corresponding solution? I really don&#39;t know much about xpath and would like to learn."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480703069, "post_id": 40895763, "comment_id": 69088820, "body": "Thanks a lot for the edit. I&#39;m still not sure it works in the general case, though. Non-nested tr&#39;s could be at different depths in different branches of a table (as you said, it might not be valid HTML). As long as a tr node doesn&#39;t have another tr between table and itself, it should be returned."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480705225, "post_id": 40895763, "comment_id": 69089887, "body": "@EricDuminil yes, but they would be nested under nodes other than <code>tr</code>. This code only looks at the nesting of <code>tr</code> elements, so it should work. I\u2019ve added some comments."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1480705246, "last_edit_date": 1480705246, "creation_date": 1480531053, "answer_id": 40895763, "question_id": 40894361, "link": "https://stackoverflow.com/questions/40894361/how-do-i-find-direct-children-and-not-nested-children-using-rails-and-nokogiri/40895763#40895763", "title": "How do I find direct children and not nested children using Rails and Nokogiri?", "body": "<p>You can do it in a couple of steps using XPath. First you need to find the \u201clevel\u201d of the <code>table</code> (i.e. how nested it is in other tables), then find all descendant <code>tr</code> that have the same number of <code>table</code> ancestors:</p>\n\n<pre><code>tables = doc.xpath('//table')\ntables.each do |table|\n  level = table.xpath('count(ancestor-or-self::table)')\n  rows = table.xpath(\".//tr[count(ancestor::table) = #{level}]\")\n  # do what you want with rows...\nend\n</code></pre>\n\n<p>In the more general case, where you might have <code>tr</code> nested directly other <code>tr</code>s, you could do something like this (this would be invalid HTML, but you might have XML or some other tags):</p>\n\n<pre><code>tables.each do |table|\n  # Find the first descendant tr, and determine its level. This\n  # will be a \"top-level\" tr for this table. \"level\" here means how\n  # many tr elements (including itself) are between it and the\n  # document root.\n  level = table.xpath(\"count(descendant::tr[1]/ancestor-or-self::tr)\")\n  # Now find all descendant trs that have that same level. Since\n  # the table itself is at a fixed level, this means all these nodes\n  # will be \"top-level\" rows for this table.\n  rows = table.xpath(\".//tr[count(ancestor-or-self::tr) = #{level}]\")\n  # handle rows...\nend\n</code></pre>\n\n<p>The first step could be broken into two separate queries, which may be clearer:</p>\n\n<pre><code>first_tr = table.at_xpath(\".//tr\")\nlevel = first_tr.xpath(\"count(ancestor-or-self::tr)\")\n</code></pre>\n\n<p>(This will fail if there is a table with no <code>tr</code>s though, as <code>first_tr</code> will be <code>nil</code>. The combined XPath above handles that situation correctly.)</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 40895763, "answer_count": 2, "score": 1, "last_activity_date": 1480705246, "creation_date": 1480526213, "question_id": 40894361, "link": "https://stackoverflow.com/questions/40894361/how-do-i-find-direct-children-and-not-nested-children-using-rails-and-nokogiri", "title": "How do I find direct children and not nested children using Rails and Nokogiri?", "body": "<p>I\u2019m using Rails 4.2.7 with Ruby (2.3) and Nokogiri.  How do I find the most direct tr children of a table, as opposed to nested ones?  Currently I find table rows within a table like so \u2026</p>\n\n<pre><code>  tables = doc.css('table')\n  tables.each do |table|\n    rows = table.css('tr')\n</code></pre>\n\n<p>This not only finds direct rows of a table, e.g.</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tbody&gt;\n        &lt;tr&gt;\u2026&lt;/tr&gt;\n</code></pre>\n\n<p>but it also finds rows within rows, e.g.</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tbody&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;table&gt;\n                    &lt;tr&gt;This is found&lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n</code></pre>\n\n<p>How do I refine my search to only find the direct tr elements?</p>\n"}, {"tags": ["json", "ruby", "openstruct"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480526317, "post_id": 40894111, "comment_id": 69002596, "body": "What do you mean, garbage?"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 5481945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a73afabc97042ece5244589f8bf989ec?s=128&d=identicon&r=PG&f=1", "display_name": "runski74", "link": "https://stackoverflow.com/users/5481945/runski74"}, "edited": false, "score": 0, "creation_date": 1480531374, "post_id": 40894480, "comment_id": 69005525, "body": "Yes, I meant the #&lt;OpenStruct.    I will make the change, altough that will complicate my code a bit."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 177, "user_id": 5481945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a73afabc97042ece5244589f8bf989ec?s=128&d=identicon&r=PG&f=1", "display_name": "runski74", "link": "https://stackoverflow.com/users/5481945/runski74"}, "edited": false, "score": 0, "creation_date": 1480531396, "post_id": 40894480, "comment_id": 69005538, "body": "Okay, so you want a json back, after having modified your openstruct?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 177, "user_id": 5481945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a73afabc97042ece5244589f8bf989ec?s=128&d=identicon&r=PG&f=1", "display_name": "runski74", "link": "https://stackoverflow.com/users/5481945/runski74"}, "edited": false, "score": 0, "creation_date": 1480534560, "post_id": 40894480, "comment_id": 69007216, "body": "Okay. You can (and should) edit your original question if you want to clarify it. You shouldn&#39;t add an answer for that. I updated my answer."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1480534639, "last_edit_date": 1480534639, "creation_date": 1480526585, "answer_id": 40894480, "question_id": 40894111, "link": "https://stackoverflow.com/questions/40894111/ruby-parsing-json-array-with-openstruct/40894480#40894480", "title": "Ruby Parsing json array with OpenStruct", "body": "<p>If by garbage, you mean <code>#&lt;OpenStruct</code> and <code>\"&gt;</code>, it is just the way Ruby represents objects when called with puts. It is useful for development and debugging, and it makes it easier to understand the difference between a String, an Array, an Hash and an OpenStruct.</p>\n\n<p>If you just want to display the name and cluster name, and nothing else : </p>\n\n<pre><code>puts job.Job\njob.Skills.each do |skill|\n  puts skill.Name\n  puts skill.ClusterName\nend\n</code></pre>\n\n<p>It returns :</p>\n\n<pre><code>My Job 1\nName 1\nCluster Name 1 Skills\nName 2\nCluster Name 2 Skills\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>When you use <code>job = JSON.parse(json, object_class: OpenStruct)</code>, your job variable becomes an OpenStruct Ruby object, which has been created from a json file.</p>\n\n<p>It doesn't have anything to do with json though: it is not a json object anymore, so you cannot just write it back to a <code>.json</code> file and expect it to have the correct syntax.</p>\n\n<p>OpenStruct doesn't seem to work well with <code>to_json</code>, so it might be better to remove <code>object_class: OpenStruct</code>, and just work with hashes and arrays.</p>\n\n<p>This code reads <code>1.json</code>, convert it to a Ruby object, adds a skill, modifies the job name, writes the object to <code>2.json</code>, and reads it again as JSON to check that everything worked fine.</p>\n\n<pre><code>require 'json'\n\njson = File.read('1.json')\njob = JSON.parse(json)\n\njob[\"Skills\"] &lt;&lt; {\"Name\" =&gt; \"Name 3\", \"ClusterName\" =&gt; \"Cluster Name 3 Skills\"}\njob[\"Job\"] += \" (modified version)\"\n\n# job[:Fa] = 'blah'\n\nFile.open('2.json', 'w'){|out|\n  out.puts job.to_json\n} \n\nrequire 'pp'\npp JSON.parse(File.read('2.json'))\n\n# {\"Job\"=&gt;\"My Job 1 (modified version)\",\n# \"Skills\"=&gt;\n#  [{\"Name\"=&gt;\"Name 1\", \"ClusterName\"=&gt;\"Cluster Name 1 Skills\"},\n#   {\"Name\"=&gt;\"Name 2\", \"ClusterName\"=&gt;\"Cluster Name 2 Skills\"},\n#   {\"Name\"=&gt;\"Name 3\", \"ClusterName\"=&gt;\"Cluster Name 3 Skills\"}]}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5481945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a73afabc97042ece5244589f8bf989ec?s=128&d=identicon&r=PG&f=1", "display_name": "runski74", "link": "https://stackoverflow.com/users/5481945/runski74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 0, "accepted_answer_id": 40894480, "answer_count": 1, "score": 2, "last_activity_date": 1480536420, "creation_date": 1480525386, "last_edit_date": 1480534675, "question_id": 40894111, "link": "https://stackoverflow.com/questions/40894111/ruby-parsing-json-array-with-openstruct", "title": "Ruby Parsing json array with OpenStruct", "body": "<p>I'm trying to parse a json file with OpenStruct.  Json file has an array for Skills.  When I parse it I get some extra \"garbage\" returned.  How do I get rid of it?</p>\n\n<p>json</p>\n\n<pre><code>{\n      \"Job\": \"My Job 1\",\n\n      \"Skills\": [{ \"Name\": \"Name 1\", \"ClusterName\": \"Cluster Name 1 Skills\"},{ \"Name\": \"Name 2\", \"ClusterName\": \"Cluster Name 2 Skills\"}]\n}\n\nrequire 'ostruct'\nrequire 'json'\n\n\njson = File.read('1.json')\njob = JSON.parse(json, object_class: OpenStruct)\n\nputs job.Skills\n\n\n#&lt;OpenStruct Name=\"Name 1\", ClusterName=\"Cluster Name 1 Skills\"&gt;\n#&lt;OpenStruct Name=\"Name 2\", ClusterName=\"Cluster Name 2 Skills\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "simple-form", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480521174, "post_id": 40892563, "comment_id": 68999148, "body": "Please share the stacktrace."}, {"owner": {"reputation": 511, "user_id": 2552551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5895df89f834a6e2af841550d4ec3807?s=128&d=identicon&r=PG", "display_name": "riksof-zeeshan", "link": "https://stackoverflow.com/users/2552551/riksof-zeeshan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480521328, "post_id": 40892563, "comment_id": 68999263, "body": "@mudasobwa is this what you&#39;re asking for <a href=\"https://gist.github.com/riksof-zzlalani/74252563cfd787c419dac9400c521f83\" rel=\"nofollow noreferrer\">gist.github.com/riksof-zzlalani/&hellip;</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480522650, "post_id": 40892563, "comment_id": 69000208, "body": "Sounds like <code>registration_path</code> does not require an argument anymore. Try to remove it and see if it works."}, {"owner": {"reputation": 511, "user_id": 2552551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5895df89f834a6e2af841550d4ec3807?s=128&d=identicon&r=PG", "display_name": "riksof-zeeshan", "link": "https://stackoverflow.com/users/2552551/riksof-zeeshan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480572037, "post_id": 40892563, "comment_id": 69020335, "body": "@mudasobwa I tried that and it doesn&#39;t work either"}, {"owner": {"reputation": 664, "user_id": 2246156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853e908411fc2e8f3efe05c312c7182c?s=128&d=identicon&r=PG", "display_name": "imsinu9", "link": "https://stackoverflow.com/users/2246156/imsinu9"}, "edited": false, "score": 0, "creation_date": 1517065331, "post_id": 40892563, "comment_id": 83947264, "body": "Did you find any answer to it? I too invested a lot but unable to understand with similar versions."}], "owner": {"reputation": 511, "user_id": 2552551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5895df89f834a6e2af841550d4ec3807?s=128&d=identicon&r=PG", "display_name": "riksof-zeeshan", "link": "https://stackoverflow.com/users/2552551/riksof-zeeshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480572452, "creation_date": 1480520975, "question_id": 40892563, "link": "https://stackoverflow.com/questions/40892563/simple-form-devise-actionviewtemplateerror-wrong-number-of-arguments-1-0", "title": "simple_form devise ActionView::Template::Error (wrong number of arguments (1, 0))", "body": "<p>I have upgraded rails to 5.0.0.1 and ruby 2.3.0 now I'm getting following error in my devise view using simple_form</p>\n\n<blockquote>\n  <p>ActionView::Template::Error (wrong number of arguments (given 1, expected 0)):</p>\n</blockquote>\n\n<p>at this line of code</p>\n\n<pre><code>&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :html =&gt; {:class =&gt; 'form-horizontal' }) do |f| %&gt;\n</code></pre>\n\n<p>I have googled this for hours and cannot find any solution,</p>\n\n<p>my devise version is 4.2.0 and simple_form 3.3.1</p>\n"}, {"tags": ["ruby", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 2158, "user_id": 1535349, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e09da026507a6121afc647cf2c75abe2?s=128&d=identicon&r=PG", "display_name": "kroe761", "link": "https://stackoverflow.com/users/1535349/kroe761"}, "edited": false, "score": 0, "creation_date": 1480526414, "post_id": 40892548, "comment_id": 69002658, "body": "I just copied the message directly from the terminal.  That said, when I removed the <code>@</code> form the variable, i got this error instead:  undefined local variable or method `\u2002\u2002eyes&#39; for #&lt;Object:0x007fd9f542fd70&gt; (NameError)   ./features/support/env.rb:10:in `Before&#39;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2158, "user_id": 1535349, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e09da026507a6121afc647cf2c75abe2?s=128&d=identicon&r=PG", "display_name": "kroe761", "link": "https://stackoverflow.com/users/1535349/kroe761"}, "edited": false, "score": 0, "creation_date": 1480527648, "post_id": 40892548, "comment_id": 69003404, "body": "Please remove all leading spaces before <code>eyes</code> (from the very beginning of the line,) and retype them using your keyboard."}, {"owner": {"reputation": 2158, "user_id": 1535349, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e09da026507a6121afc647cf2c75abe2?s=128&d=identicon&r=PG", "display_name": "kroe761", "link": "https://stackoverflow.com/users/1535349/kroe761"}, "edited": false, "score": 0, "creation_date": 1480528316, "post_id": 40892548, "comment_id": 69003836, "body": "I removed and retyped all the spaces before <code>eyes</code> in the env.rb code, and included a screenshot of the error message.  <a href=\"http://imgur.com/mumWSmE\" rel=\"nofollow noreferrer\">imgur.com/mumWSmE</a>.  I know it&#39;s strange, but this is the error message I&#39;m getting.  I don&#39;t know why it looks strange."}, {"owner": {"reputation": 2158, "user_id": 1535349, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e09da026507a6121afc647cf2c75abe2?s=128&d=identicon&r=PG", "display_name": "kroe761", "link": "https://stackoverflow.com/users/1535349/kroe761"}, "edited": false, "score": 0, "creation_date": 1480536440, "post_id": 40892548, "comment_id": 69008191, "body": "Ah, I see.  It was the invisible unicode that was throwing me off.  Thanks a lot!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1480520919, "creation_date": 1480520919, "answer_id": 40892548, "question_id": 40892421, "link": "https://stackoverflow.com/questions/40892421/undefined-method-nomethoderror-when-using-applitools-eyes-in-ruby-seleni/40892548#40892548", "title": "((undefined method ` &#39; NoMethodError)) when using applitools EYES in Ruby/Selenium", "body": "<pre><code>\u25b6 '\u2002\u2002'.codepoints\n#\u21d2 [\n#    [0] 8194,\n#    [1] 8194\n# ]\n</code></pre>\n\n<p>The above is a result of me copy-pasting the content of \u201cundefined method\u201d from your error description.</p>\n\n<p>That said, you accidentally have entered <a href=\"http://unicode-table.com/en/search/?q=8194\" rel=\"nofollow noreferrer\">unicode en-space</a> (possibly with <kbd>AltGr</kbd><kbd>SPACE</kbd> on MacOS, or copy-paste from some web example.) Retype the line manually and everything should work as intended.</p>\n"}], "owner": {"reputation": 2158, "user_id": 1535349, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e09da026507a6121afc647cf2c75abe2?s=128&d=identicon&r=PG", "display_name": "kroe761", "link": "https://stackoverflow.com/users/1535349/kroe761"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 40892548, "answer_count": 1, "score": 1, "last_activity_date": 1480528011, "creation_date": 1480520501, "last_edit_date": 1480528011, "question_id": 40892421, "link": "https://stackoverflow.com/questions/40892421/undefined-method-nomethoderror-when-using-applitools-eyes-in-ruby-seleni", "title": "((undefined method ` &#39; NoMethodError)) when using applitools EYES in Ruby/Selenium", "body": "<p>I am simply trying to set a constant on the Eyes class, but I get a very strange error. It works when setting the API key, but setting any other constant (like <code>save_new_tests</code>, <code>host_os</code>, or <code>match_level</code> see <a href=\"https://applitools.atlassian.net/wiki/display/Java/Selenium+-+Ruby\" rel=\"nofollow noreferrer\">documentation</a>)) gives me the error below.  I don't know what I'm doing differently than when I'm setting the API key.  Thanks for your help!</p>\n\n<p>env.rb:</p>\n\n<pre><code>require 'selenium-webdriver'\nrequire 'eyes_selenium'\n\nBefore do |scenario|\n\n  $driver = Selenium::WebDriver.for :chrome\n  $driver.manage.window.resize_to(1050, 900)\n  @eyes = Applitools::Eyes.new\n  @eyes.api_key = 'my_api_key'\n  @eyes.save_new_tests = true  # &lt;-- Errors here\n  @eyes.open(app_name: 'my_app', test_name: scenario.title, driver: $driver)\n\nend\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>undefined method `\u2002\u2002' for #&lt;Object:0x007fdc778eb740&gt; (NoMethodError)\n./features/support/env.rb:10:in `Before'\n</code></pre>\n"}, {"tags": ["ruby", "server"], "comments": [{"owner": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 1, "creation_date": 1480519273, "post_id": 40891935, "comment_id": 68997768, "body": "Can you post the content of this file <code>hello&#47;config&#47;routes.rb</code>"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1480519996, "post_id": 40891935, "comment_id": 68998309, "body": "The first line of the trace points to line 2 of the routes file. Please post that file."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1480521319, "post_id": 40891935, "comment_id": 68999255, "body": "The title of the book tells that it covers Rails 4. But you generated a Rails 5 application. I would suggest to start over with a Rails 4 application or to buy a new book."}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1480598779, "post_id": 40891935, "comment_id": 69035782, "body": "Thanks for your help guys. It did end up being because I had two blank spaces in front of &quot;get.&quot;  Hello::Application.routes.draw do get &#39;:controller(/:action(/:id(.:format)))&#39; end"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1480598721, "post_id": 40892283, "comment_id": 69035746, "body": "Thank you. This was it... not sure why the spaces matter? The spaces are supposed to make the code look more legible, and I thought they were ignored."}, {"owner": {"reputation": 515, "user_id": 4461539, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P1gw5q8RY4Y/AAAAAAAAAAI/AAAAAAAAAO8/vbF-z9SZp44/photo.jpg?sz=128", "display_name": "moyinho20", "link": "https://stackoverflow.com/users/4461539/moyinho20"}, "reply_to_user": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1480601093, "post_id": 40892283, "comment_id": 69037398, "body": "Spaces inside quotes would matter, I think."}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1480601778, "post_id": 40892283, "comment_id": 69037906, "body": "Hello::Application.routes.draw do get &#39;:controller(/:action(/:id(.:format)))&#39; end  Well there are no quotes around &quot;get.&quot; I am using quotes to signal that &quot;get&quot; is a keyword but there are no quotes around it in the code so the spaces should not matter. In any programming language spaces don&#39;t matter."}], "tags": [], "owner": {"reputation": 515, "user_id": 4461539, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P1gw5q8RY4Y/AAAAAAAAAAI/AAAAAAAAAO8/vbF-z9SZp44/photo.jpg?sz=128", "display_name": "moyinho20", "link": "https://stackoverflow.com/users/4461539/moyinho20"}, "is_accepted": true, "score": 0, "last_activity_date": 1480520128, "creation_date": 1480520128, "answer_id": 40892283, "question_id": 40891935, "link": "https://stackoverflow.com/questions/40891935/cant-start-ruby-server-following-book-beginning-rails-4/40892283#40892283", "title": "Can&#39;t start Ruby server, following book &quot;Beginning Rails 4&quot;", "body": "<p>The error says undefined method `  get' for . \nThis is due to the extra spaces before 'get'. Remove them and I think you should be good to go.</p>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40892283, "answer_count": 1, "score": 0, "last_activity_date": 1480520128, "creation_date": 1480519065, "last_edit_date": 1480519897, "question_id": 40891935, "link": "https://stackoverflow.com/questions/40891935/cant-start-ruby-server-following-book-beginning-rails-4", "title": "Can&#39;t start Ruby server, following book &quot;Beginning Rails 4&quot;", "body": "<p>I have been following directions in this book (and I made sure I copied everything over correctly). The example I'm working on is making a simple application by first generating a controller, creating an action, and then creating a template. This is just a simple \"hello world\" example. </p>\n\n<p>The problem: When I enter \"rails server\" (while in the app folder) in my Terminal, I get a bunch of stuff, but it starts off with an undefined method error. I am posting the stuff below:</p>\n\n<pre><code>admins-MacBook-Pro:hello alexcrisan$ rails server\n=&gt; Booting Puma\n=&gt; Rails 5.0.0.1 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\nExiting\n/Users/alexcrisan/Documents/Beginning Rails 4/hello/config/routes.rb:2:in `block in &lt;top (required)&gt;': undefined method `\u00a0\u00a0get' for #&lt;ActionDispatch::Routing::Mapper:0x007fe383be0a00&gt; (NoMethodError)\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/actionpack-5.0.0.1/lib/action_dispatch/routing/route_set.rb:389:in `instance_exec'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/actionpack-5.0.0.1/lib/action_dispatch/routing/route_set.rb:389:in `eval_block'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/actionpack-5.0.0.1/lib/action_dispatch/routing/route_set.rb:371:in `draw'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config/routes.rb:1:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `block in load'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:40:in `each'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:40:in `load_paths'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:16:in `reload!'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:26:in `block in updater'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/activesupport-5.0.0.1/lib/active_support/file_update_checker.rb:77:in `execute'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:27:in `updater'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application/finisher.rb:119:in `block in &lt;module:Finisher&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/initializable.rb:30:in `instance_exec'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/initializable.rb:30:in `run'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `call'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n    from /Users/alexcrisan/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/initializable.rb:54:in `run_initializers'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/application.rb:352:in `initialize!'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config/environment.rb:5:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config.ru:3:in `require_relative'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config.ru:3:in `block in &lt;main&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/builder.rb:55:in `instance_eval'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/builder.rb:55:in `initialize'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config.ru:in `new'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/config.ru:in `&lt;main&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/builder.rb:49:in `eval'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/builder.rb:49:in `new_from_string'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/builder.rb:40:in `parse_file'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/server.rb:318:in `build_app_and_options_from_config'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/server.rb:218:in `app'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/server.rb:59:in `app'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/rack-2.0.1/lib/rack/server.rb:353:in `wrapped_app'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/server.rb:124:in `log_to_stdout'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/server.rb:77:in `start'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:90:in `block in server'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3@global/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/bin/rails:9:in `require'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/bin/rails:9:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `load'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `call'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/client/command.rb:7:in `call'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/client.rb:30:in `run'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/bin/spring:49:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `load'\n    from /Users/alexcrisan/.rvm/gems/ruby-2.3.3/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/bin/spring:14:in `require'\n    from /Users/alexcrisan/Documents/Beginning Rails 4/hello/bin/spring:14:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm not sure why it's doing this, so any help is appreciated! </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "delayed-job", "rails-activejob"], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 1913420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c1058ce7a9abc85ca03cf03c2b2bfb0?s=128&d=identicon&r=PG", "display_name": "divideByZero", "link": "https://stackoverflow.com/users/1913420/dividebyzero"}, "edited": false, "score": 1, "creation_date": 1480583062, "post_id": 40891991, "comment_id": 69025333, "body": "config.active_job.queue_adapter = :test - this is what I was looking for, thanks!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 10, "last_activity_date": 1534316021, "last_edit_date": 1534316021, "creation_date": 1480519273, "answer_id": 40891991, "question_id": 40891740, "link": "https://stackoverflow.com/questions/40891740/disable-ruby-on-rails-job-for-test/40891991#40891991", "title": "Disable ruby on rails job for test", "body": "<pre><code>#config/environment/test.rb\nconfig.active_job.queue_adapter = :test\n\n# in spec\nexpect { your_action_that_triggers_job_enqueuing }\n  .to have_enqueued_job(AdminNotificationJob)\n  .with(your_arguments)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1480519340, "post_id": 40891992, "comment_id": 68997820, "body": "simultaneously :) +1"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1480519356, "post_id": 40891992, "comment_id": 68997828, "body": "I think that&#39;s called &#39;twinning&#39; ? ;)"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1480519276, "creation_date": 1480519276, "answer_id": 40891992, "question_id": 40891740, "link": "https://stackoverflow.com/questions/40891740/disable-ruby-on-rails-job-for-test/40891992#40891992", "title": "Disable ruby on rails job for test", "body": "<p>Your controller test would look like this:</p>\n\n<pre><code>it \"enqueues a AdminNotification\" do\n  expect {\n    get :your_controller_action, {}\n  }.to have_enqueued_job(AdminNotificationJob)\nend\n</code></pre>\n\n<p>This uses the <a href=\"http://www.relishapp.com/rspec/rspec-rails/docs/matchers/have-enqueued-job-matcher\" rel=\"nofollow noreferrer\"><code>#have_enqueued_job</code></a> method found on <a href=\"http://www.relishapp.com/rspec/rspec-rails/docs/matchers/have-enqueued-job-matcher\" rel=\"nofollow noreferrer\"><code>rspec-rails</code></a></p>\n"}], "owner": {"reputation": 910, "user_id": 1913420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c1058ce7a9abc85ca03cf03c2b2bfb0?s=128&d=identicon&r=PG", "display_name": "divideByZero", "link": "https://stackoverflow.com/users/1913420/dividebyzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1566, "favorite_count": 1, "accepted_answer_id": 40891991, "answer_count": 2, "score": 7, "last_activity_date": 1534316021, "creation_date": 1480518505, "last_edit_date": 1480573245, "question_id": 40891740, "link": "https://stackoverflow.com/questions/40891740/disable-ruby-on-rails-job-for-test", "title": "Disable ruby on rails job for test", "body": "<p>I'm writing controller test with rspec and after action completed, my job supposed to send email to the admin user. But I'd like to disable this job for my tests or mock it somehow. How can I do this?</p>\n\n<p>I'm using <a href=\"https://github.com/collectiveidea/delayed_job_active_record\" rel=\"noreferrer\"><code>delayed_job_active_record</code></a> + <a href=\"https://github.com/thuehlinger/daemons\" rel=\"noreferrer\"><code>daemons</code></a> gems.</p>\n\n<pre><code>class AdminNotificationJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform(method, parameter)\n    User.admin.includes(:profile).each do |admin|\n      AdminMailer.send(method, admin, parameter).deliver_later\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480518458, "post_id": 40891678, "comment_id": 68997181, "body": "Yes, I allways add the version of the gem I&#39;m using in my gemfile"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480518581, "post_id": 40891678, "comment_id": 68997275, "body": "then you will not have any problems on deployment"}], "tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": true, "score": 2, "last_activity_date": 1480518525, "last_edit_date": 1480518525, "creation_date": 1480518345, "answer_id": 40891678, "question_id": 40891613, "link": "https://stackoverflow.com/questions/40891613/having-different-rails-and-gems-versions-installed-on-dev-environment/40891678#40891678", "title": "Having different rails and gems versions installed on dev environment", "body": "<p>You will have all different versions. BUT you will need to add the version number for all gems to your gemfile</p>\n\n<p>For example\n<a href=\"https://i.stack.imgur.com/ql6qA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ql6qA.png\" alt=\"enter image description here\"></a></p>\n\n<p>and in the <code>gemfile</code> you state:</p>\n\n<pre><code>gem 'remotipart', '1.2.1'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480580603, "post_id": 40901027, "comment_id": 69024011, "body": "I&#39;m using RVM too and had read a bit about gemfiles, however I thought this was not required, since bundler added on Rails.One thing I haven&#39;t completely understand is that with this process you create the rvm-project and then inside this the rails-project folder, right? so basically you have a project folder nested inside another folder, correct? or when you do <code>rails new project</code> you can set the gemsets too?"}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480598076, "post_id": 40901027, "comment_id": 69035343, "body": "First of all, gemsets don&#39;t create a folder in the current directory. If you create a gemset (2.3.3@project1) , it will create a directory in /home/username/.rvm/gems/2.3.3@project1 where all gems used in your project will reside. So there is no nesting of folders, gemsets are located in different folder. However, you are totally right, if your goal is only to run  &quot;rails new project&quot; with other version, then you don&#39;t really need RVM for running this command, you can totally do this with Bundler ( check out this blog: <a href=\"http://rakeroutes.com/blog/how-to-use-bundler-instead-of-rvm-gemsets/\" rel=\"nofollow noreferrer\">rakeroutes.com/blog/how-to-use-bundler-instead-of-rvm-gemset&zwnj;&#8203;s</a> )"}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480598084, "post_id": 40901027, "comment_id": 69035348, "body": "However RVM helps you in a different situation. Let;s suppose we have in Gemfile <code>gem &#39;rails&#39; , &#39;5.0.0&#39; </code>  and in a different project we have <code>gem &#39;rails&#39;, &#39;~&gt; 5.0.0&#39; </code> ,  The first project will match against version 5.0.0, because it is fixed, however the second project will not load 5.0.0, but 5.0.0.1 , because the matching is different,   So if you have both 5.0.0 and 5.0.0.1 in same gemset , and you use only bundler, you will get unexpected result.   RVM fixes this problem but completely separating this versions in different gemsets so there is no conflict"}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480598187, "post_id": 40901027, "comment_id": 69035402, "body": "You can find more about this differences here <a href=\"http://stackoverflow.com/a/15586667/2067375\">stackoverflow.com/a/15586667/2067375</a> . This is a great answer that i hope will help you"}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480600819, "post_id": 40901027, "comment_id": 69037198, "body": "Ok, so for using gemsets for my (new) projects I have to follow the steps you describe on your answer, but how do I set gemsets to my &quot;old&quot; projects then? I guess the gems on my list now are in some kind &quot;global&quot; scope, right? Btw I &#39;ve checked all the gemfiles of my projects and they are all look like this: <code>gem &#39;rails&#39;, &#39;4.2.6&#39;</code>, <code>gem &#39;haml&#39;, &#39;~&gt; 4.0&#39;, &#39;&gt;= 4.0.7&#39;</code>, <code>gem &#39;bootstrap-sass&#39;, &#39;~&gt; 3.3&#39;, &#39;&gt;= 3.3.7&#39;</code>, <code>gem &#39;devise&#39;, &#39;~&gt; 4.2&#39;</code> etc etc, so only rails gem match specific version, not that I did this intentionally, I was just copying it from ribygems.org"}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1480602057, "post_id": 40901027, "comment_id": 69038121, "body": "Yes, currently your gems are all installed inside the &quot;default&quot; ( or global)  gemset . You just need to repeat same steps starting from 5) for all other projects . Its very easy ."}], "tags": [], "owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "is_accepted": false, "score": 2, "last_activity_date": 1480555358, "last_edit_date": 1480555358, "creation_date": 1480554684, "answer_id": 40901027, "question_id": 40891613, "link": "https://stackoverflow.com/questions/40891613/having-different-rails-and-gems-versions-installed-on-dev-environment/40901027#40901027", "title": "Having different rails and gems versions installed on dev environment", "body": "<p>Best thing to do when using different versions of a same gem is to use either rbenv or RVM to create different gemsets for each project. This way You can be sure that your project won't load by mistake another version . </p>\n\n<p>I personally use RVM so i am going to let You know how to use it. </p>\n\n<p>1) install RVM from here <a href=\"https://rvm.io\" rel=\"nofollow\">https://rvm.io</a></p>\n\n<p>2 ) make sure You are loading RVM in your .bashrc or .bash_profile files from your home directory ( /home/your_username)  . You can use this code: </p>\n\n<p>export PATH=\"$PATH:$HOME/.rvm/bin\" </p>\n\n<p>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" </p>\n\n<p>3) take a look at this page <a href=\"https://rvm.io/workflow/projects\" rel=\"nofollow\">https://rvm.io/workflow/projects</a> and choose how You want to set RVM for your project . i personally use .rvmrc because i am old school...but those are not recommended anymore because they need trusting and are slower. As a alternative You can use .ruby-version and .ruby-gemset files. But You can use .versions.conf also If You want. Let's say for now we choose to use .ruby-version and .ruby-gemset files. </p>\n\n<p>4) cd into your project and run this command `rvm --ruby-version use 2.3.3@project1 --create' . This will generate those two files \u00een your project . And everytime You will cd into this project RVM will pick-up the gemset automatically. </p>\n\n<p>5) Do the step 4) for the second project also but replace 'project1' with 'project2' .</p>\n\n<p>6) Now You can edit the Gemfiles of these two project and put the version of rails that You desire. </p>\n\n<p>7) to install each project You need to cd into that directory and run command 'gem install bundler' ( only first time) and then You can safely do 'bundle install' </p>\n\n<p>8) repeat 7) for second project.</p>\n\n<p>9) You are all Done. Now You have different version of same gem in two different gemsets . </p>\n\n<p>To also answer the other questions: </p>\n\n<p>1) having \u00een the same gemset multiple versions of same gem can lead to conflicts especially when doing 'rails new project ' from terminal since this doesn't require a specific version . I suggest to create different gemset before installing a new version of a existing gem on your machine.     For example for this particular case  we can do this </p>\n\n<p>rvm use 2.3.3@rails5 --create </p>\n\n<p>gem install bundler </p>\n\n<p>gem install rails -v 5.O.0.1</p>\n\n<p>And now we can safely do 'rails new project' . This way the new version of rails is inside a new gemset . </p>\n\n<p>I Hope this will help You :)</p>\n"}], "owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "accepted_answer_id": 40891678, "answer_count": 2, "score": 1, "last_activity_date": 1480601892, "creation_date": 1480518164, "question_id": 40891613, "link": "https://stackoverflow.com/questions/40891613/having-different-rails-and-gems-versions-installed-on-dev-environment", "title": "Having different rails and gems versions installed on dev environment", "body": "<p>I'm quite newbie in ruby and ruby on rails and I'd like some clarification, if possible.</p>\n\n<p>I'm currently having rails <code>4.2.6</code> installed on my development environment in which I have built a few projects. Now, for my new projects I'd like to use Rails 5, so I assume that if I type the <code>gem install rails</code> command will get me the latest rails verion and probably set it as default, so every time I want to create a new project by <code>rails new my_new_project_name</code> this project will have the latest version (currently v5). </p>\n\n<p>My question is will my gem list contain both rails versions then or is it going to cause any conflicts and issues to my old porjects? so, if I want to work back on any of my projects which has the \"old\" version, won't affect of any changes, right? As far as I understand its the <code>bundler</code> who picks the version of each gem, right?</p>\n\n<p>If thats the case, I assume same thing applies and for every other gem that I use for each project, right?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1480518412, "creation_date": 1480518412, "answer_id": 40891703, "question_id": 40891510, "link": "https://stackoverflow.com/questions/40891510/encrypt-ruby-code-inside-a-gem/40891703#40891703", "title": "Encrypt Ruby code inside a gem", "body": "<p>There are no real obfuscation solutions for Ruby, as it is interpreted. The best you can get to make your application more <em>difficult</em> to reverse engineer is <a href=\"http://www.erikveen.dds.nl/allinoneruby/index.html\" rel=\"nofollow noreferrer\">AllInOneRuby</a>, but it will not provide real obfuscation. You can unpack this and get what you want relatively easily. </p>\n\n<p>If obfuscation is super critical, I would encrypt all the scripts then make an application that wraps the Ruby C runtime, decrypts your script into a memory buffer, then invoke it. Then, pack all of that with something like  <a href=\"http://www.oreans.com/themida.php\" rel=\"nofollow noreferrer\">Themida</a> to stop people from attempting to attach debuggers (or, even if they do, understand the assembly, it'll all be <code>db [byte]</code> for the most part containing their VM's bytecode and not actual control flow instructions e.g. <code>jmp</code> <code>mov</code> etc). At this point you should have deterred the efforts of most inexperienced reverse engineers, but at the end of the day it is still security through obscurity. </p>\n"}], "owner": {"reputation": 920, "user_id": 5450134, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d652a7b14b60443a47636cd4baef06ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja Boy", "link": "https://stackoverflow.com/users/5450134/ninja-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480518412, "creation_date": 1480517901, "question_id": 40891510, "link": "https://stackoverflow.com/questions/40891510/encrypt-ruby-code-inside-a-gem", "title": "Encrypt Ruby code inside a gem", "body": "<p>I want to ship out a gem to on premises for clients. I don't want them to know my code so I want to encrypt or obfuscate code inside the .gem file and ship it to them to integrate inside their ruby projects.</p>\n\n<p>Any ref? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sinatra"], "comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1480517714, "post_id": 40891375, "comment_id": 68996601, "body": "can you use rvm-capistrano gem? @stefan"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1480517905, "post_id": 40891375, "comment_id": 68996750, "body": "`  gem &#39;capistrano-rails&#39;   gem &#39;capistrano-rvm&#39;` I have these in my gem file"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1480518030, "post_id": 40891375, "comment_id": 68996839, "body": "can you add gem &#39;capistrano-rails&#39; as well you have added gem &quot;capistrano&quot;"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1480518238, "post_id": 40891375, "comment_id": 68997012, "body": "Oh yes sorry for that missed that"}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1480521197, "post_id": 40891375, "comment_id": 68999161, "body": "The answer for this is already in SO... couldn&#39;t find it though... you need to add <code>require: false</code> to <code>gem &quot;capistrano-rvm&quot;, github: &quot;capistrano&#47;rvm&quot;</code> in your Gemfile"}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1480521574, "post_id": 40891375, "comment_id": 68999436, "body": "i added, same error cap aborted! LoadError: cannot load such file -- rvm/capistrano"}], "owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1199, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480519032, "creation_date": 1480517520, "last_edit_date": 1592644375, "question_id": 40891375, "link": "https://stackoverflow.com/questions/40891375/loaderror-cannot-load-such-file-rvm-capistrano", "title": "LoadError: cannot load such file -- rvm/capistrano", "body": "<p>I want deploy sinatra project.</p>\n<p>Run command <code>cap production deploy</code>.</p>\n<p>errors:</p>\n<pre><code>cap aborted!\nLoadError: cannot load such file -- rvm/capistrano\nconfig/deploy.rb:1:in `require'\nconfig/deploy.rb:1:in `&lt;top (required)&gt;'\n/home/user/.rbenv/versions/2.3.1/bin/cap:23:in `load'\n/home/user/.rbenv/versions/2.3.1/bin/cap:23:in `&lt;top (required)&gt;'\n/home/user/.rbenv/versions/2.3.1/bin/bundle:23:in `load'\n/home/user/.rbenv/versions/2.3.1/bin/bundle:23:in `&lt;main&gt;'\n\n#gemfile\nsource 'http://rubygems.org'\n\ngem &quot;rake&quot;\ngem &quot;sinatra&quot;\ngem &quot;sinatra-activerecord&quot;\ngem &quot;sinatra-flash&quot;\ngem &quot;pg&quot;\ngem &quot;bcrypt&quot;\ngem &quot;pry&quot;\ngem &quot;pony&quot;\ngem &quot;capistrano&quot;, '~&gt; 3.1.0'\ngem &quot;capistrano-bundler&quot;, '~&gt; 1.1.2'\ngem &quot;capistrano-rvm&quot;, github: &quot;capistrano/rvm&quot;\n</code></pre>\n<p>Setting capistrano Capgile file</p>\n<h1>Capfile</h1>\n<pre><code># Load DSL and set up stages\nrequire 'capistrano/setup'\n\n# Include default deployment tasks\nrequire 'capistrano/deploy'\n\n# If you are using rvm add these lines:\nrequire 'capistrano/rvm'\nset :rvm_type, :user\nset :rvm_ruby_version, '2.3.1-p112'\n#Dir.glob('lib/capistrano/tasks/*.rake').each { |r| import r }\n</code></pre>\n<p>In deploy file i added folowing settng for rvm</p>\n<pre><code>#config/deploy.rb\n#RVM and bundler settings\nset :bundle_cmd, &quot;/home/deploy/.rvm/gems/ruby-2.3.1-p112@global/bin/bundle&quot;\nset :bundle_dir, &quot;/home/deploy/.rvm/gems/ruby-2.3.1-p112/gems&quot;\nset :rvm_ruby_string, :local\nset :rack_env, :production\n</code></pre>\n<p>I dont undestand why this error, maybe becose First time on local I used rbenv for installing ruby and bundle install gems. But after installed rvm, in directory project select right version ruby with command <code>rvm use 2.3.1.</code></p>\n<pre><code>ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux] \n</code></pre>\n<p>How solve this issue? Thank you for advance.</p>\n"}, {"tags": ["ruby", "anonymous-class", "class-hierarchy"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480515301, "post_id": 40890576, "comment_id": 68994852, "body": "Define &quot;defined under&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1480515641, "post_id": 40890576, "comment_id": 68995104, "body": "Interesting, anonymous modules are not registered in <code>Module.nesting</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480516370, "post_id": 40890576, "comment_id": 68995633, "body": "@SergioTulentsev I&#39;ve rephrased my question, maybe there is no nesting at all."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1480516876, "post_id": 40890576, "comment_id": 68996003, "body": "@SergioTulentsev \u201cregistered in <code>Module.nesting</code>\u201d is an oxymoron :) <code>Module.nesting</code> method is a pure stack rewind on parsing stage: <code>while (cref &amp;&amp; CREF_NEXT(cref)) ...</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480516916, "post_id": 40890576, "comment_id": 68996030, "body": "@Stefan No name \u21d2 no luck. The closest attempt would be: <code>classes.each { |c| class &lt;&lt; c; puts Module.nesting.inspect; end }</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480517008, "post_id": 40890576, "comment_id": 68996099, "body": "Also, there is no \u201cconcept\u201d <i>of nesting</i>. It is basically <i>a concept of <b>naming</b></i> :)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480577051, "post_id": 40893577, "comment_id": 69022389, "body": "So <code>Module.nesting</code> is just a stack of modules used for constant lookup. Every <code>module</code> (or <code>class</code>) keyword pushes an arbitrary module onto the stack (popping it at <code>end</code>). And the top-most element functions as a prefix for new constants."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480577655, "post_id": 40893577, "comment_id": 69022637, "body": "Furthermore only <i>constants</i> are stored and form an implicit hierarchy. The current nesting is transient and not stored anywhere \u2013 I can re-open the same module under different nestings. I would conclude: modules and classes cannot be nested, only constants can. Is that correct?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480577773, "post_id": 40893577, "comment_id": 69022678, "body": "@Stefan, yes. Named classes/modules get stored in the current nesting because they are constants (start with capital letter)."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1480524824, "last_edit_date": 1480524824, "creation_date": 1480523840, "answer_id": 40893577, "question_id": 40890576, "link": "https://stackoverflow.com/questions/40890576/can-anonymous-modules-and-class-be-nested-in-ruby/40893577#40893577", "title": "Can anonymous modules and class be nested in Ruby?", "body": "<p>It is not about being anonymous. Assigning a dynamically created class to a constant makes it named:</p>\n\n<pre><code>Foo = Class.new # =&gt; Foo\nfoo = Class.new # =&gt; #&lt;Class:0x007fe5dd45d650&gt;\n</code></pre>\n\n<p>Yet it still doesn't nest further:</p>\n\n<pre><code>module Bar\n  Baz = Module.new do\n    p Module.nesting # =&gt; [Bar]\n  end\nend\n</code></pre>\n\n<p>Or even about being dynamic for that matter:</p>\n\n<pre><code>module Quz\n  eval 'module Qux; p Module.nesting; end' # =&gt; [Quz::Qux, Quz]\nend\n</code></pre>\n\n<p>It's about scope gates.</p>\n\n<hr>\n\n<p>As far as constants are concerned, there are only two scope gates - the keywords <code>class</code> and <code>module</code>.</p>\n\n<p>Nesting is done purely syntactically. That is why you get the weird:</p>\n\n<pre><code>module Do\n  X = 42\nend\n\nmodule Do\n  module Re\n    p Module.nesting # =&gt; [Do::Re, Do]\n    p X              # =&gt; 42\n  end\nend\n\nmodule Do::Mi\n  p Module.nesting # =&gt; [Do::Mi]\n  p X # =&gt; uninitialized constant\nend\n\nDo.module_eval   { p X } # =&gt; uninitialized constant\nDo.instance_eval { p X } # =&gt; uninitialized constant\n</code></pre>\n\n<hr>\n\n<p>So if Ruby sees the keywords <code>class</code> or <code>module</code>, it nests the <em>\"current node\"</em> further. When the closing <code>end</code> is found, it goes up the tree. When a new constant is being defined, it places it in the current node.</p>\n"}], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 1, "accepted_answer_id": 40893577, "answer_count": 1, "score": 4, "last_activity_date": 1480524824, "creation_date": 1480515201, "last_edit_date": 1480516328, "question_id": 40890576, "link": "https://stackoverflow.com/questions/40890576/can-anonymous-modules-and-class-be-nested-in-ruby", "title": "Can anonymous modules and class be nested in Ruby?", "body": "<p>I can define an anonymous class within an anonymous module:</p>\n\n<pre><code>c = nil\nm = Module.new do\n  c = Class.new\nend\n\nm #=&gt; #&lt;Module:0x007fad3a055660&gt;\nc #=&gt; #&lt;Class:0x007fad3a0555e8&gt;\n</code></pre>\n\n<p>Is the above equivalent to:</p>\n\n<pre><code>m = Module.new\nc = Class.new\n</code></pre>\n\n<p>In other words: does the concept of \"nesting\" actually apply to anonymous modules?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1480515037, "post_id": 40890442, "comment_id": 68994647, "body": "post full error please"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1480515074, "post_id": 40890442, "comment_id": 68994674, "body": "You are trying to find stroy with id but not passing id in the params THATS THE MAIN REASON"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1480515195, "post_id": 40890442, "comment_id": 68994757, "body": "You said it was create AND show?  Looks like just create from error above, is it also show, and if so, can you give me an example of the route you are using for that, it needs to have an id in it, e.g.&quot;/whatever/therouteis/1&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1480515236, "post_id": 40890537, "comment_id": 68994796, "body": "That works,, thanks! If I go on /stories/show it gives me the similar error &#39;ActiveRecord::RecordNotFound in StoriesController#show &#39; &#39;Couldn&#39;t find Story with &#39;id&#39;=show&#39;"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1480515276, "post_id": 40890537, "comment_id": 68994827, "body": "needs to be &quot;stories/show/:id&quot;, so &quot;stories/show/1&quot; for example"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1480515302, "post_id": 40890537, "comment_id": 68994854, "body": "You don&#39;t do <code>stories&#47;show</code> that&#39;s not a RESTful route.  Do <code>stories&#47;1</code> to show story with id 1, etc..."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1480515339, "post_id": 40890537, "comment_id": 68994878, "body": "so configure my routing to be  get &#39;stories/show/:id&#39; =&gt; &#39;posts#show&#39; ?"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1480515402, "post_id": 40890537, "comment_id": 68994934, "body": "no that is linking to the post controller, with the resources in your route you should have the route available already, if you type in rake routes in the terminal you should see that route"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1480526998, "post_id": 40890537, "comment_id": 69003020, "body": "If this solved the issue could you accept the answer?"}], "tags": [], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "is_accepted": true, "score": 2, "last_activity_date": 1480515379, "last_edit_date": 1480515379, "creation_date": 1480515091, "answer_id": 40890537, "question_id": 40890442, "link": "https://stackoverflow.com/questions/40890442/activerecordrecordnotfound-couldnt-find-story-with-id/40890537#40890537", "title": "ActiveRecord::RecordNotFound (Couldn&#39;t find Story with &#39;id&#39;=):", "body": "<p>You want to change the \":find_story\" to not include the create as that is what is telling it to look for an id, but there is no id when on the create page, you are creating a new one, not finding one that exists</p>\n\n<p>so change the before_action to this</p>\n\n<pre><code>before_action :find_story, only: [:destroy, :show, :edit, :update]\n</code></pre>\n\n<p>Your issue with stories is the route you are trying to use.  Show looks for an id, for the same reason I mentioned above, so the route need to be something like</p>\n\n<pre><code>stories/show/1\n</code></pre>\n\n<p>where \"1\" is the id of the story you want.</p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1480515303, "creation_date": 1480515303, "answer_id": 40890610, "question_id": 40890442, "link": "https://stackoverflow.com/questions/40890442/activerecordrecordnotfound-couldnt-find-story-with-id/40890610#40890610", "title": "ActiveRecord::RecordNotFound (Couldn&#39;t find Story with &#39;id&#39;=):", "body": "<blockquote>\n  <p>ActiveRecord::RecordNotFound in StoriesController#create </p>\n</blockquote>\n\n<p>you have before_action <code>:find_story</code> with create method which is trying to find <code>Story</code> but there is no <code>:id</code> in params</p>\n\n<p>So you need to remove <code>:create</code> action from the list of <code>before_action</code> and change it to </p>\n\n<pre><code>before_action :find_story, only: [:destroy, :show, :edit, :update]\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 40890537, "answer_count": 2, "score": 0, "last_activity_date": 1480515379, "creation_date": 1480514749, "last_edit_date": 1480515101, "question_id": 40890442, "link": "https://stackoverflow.com/questions/40890442/activerecordrecordnotfound-couldnt-find-story-with-id", "title": "ActiveRecord::RecordNotFound (Couldn&#39;t find Story with &#39;id&#39;=):", "body": "<p>I have been looking at other people's posts about this question. Unfortunately, still a while later I am stuck on it. I understand that a couple of the controller methods cannot find a story with the relevant 'ID' and render that to the views, hence my error. </p>\n\n<p>However, I don't understand how I can edit my controller methods/routing so it can actually find the id of '1,2,3,4 etc'. I believe it is trying to look for a different from of ID. The 'create' and 'show' methods are creating the same error.</p>\n\n<p>Error on screen:</p>\n\n<pre><code>ActiveRecord::RecordNotFound in StoriesController#create \n\nCouldn't find Story with 'id'=\n\ndef find_story\n    @story = Story.find(params[:id])\nend\n</code></pre>\n\n<p>Here, I have put in ID as the params for the story find method but it isn't finding it. Why?</p>\n\n<pre><code>class StoriesController &lt; ApplicationController\n    before_action :find_story, only: [:destroy, :create, :show, :edit, :update]\n\n\ndef index\n    @stories = Story.order('created_at DESC')\nend\n\ndef new\n    @story = Story.new\nend\n\ndef create\n    @story = Story.new(story_params)\n    if @story.save\n        flash[:success] = \"Your beautiful story has been added!\"\n        redirect_to root_path\n    else\n        render 'new'\n    end\nend\n\ndef edit\nend\n\ndef update\n    if @story.update.attributes(story_params)\n        flash[:success] = \"More knowledge, more wisdom\"\n        redirect_to root_path\n    else\n        render 'edit'\n    end\nend\n\ndef destroy\n    if @story.destroy\n        flash[:success] = \"I think you should have more confidence in your storytelling\"\n    else\n        flash[:error] = \"Can't delete this story, sorry\"\n    end\nend\n\ndef show\n    @stories = Story.all\nend\n\nprivate\n\ndef story_params\n    params.require(:story).permit(:name, :description)\nend\n\ndef find_story\n    @story = Story.find(params[:id])\nend\n\n\nend\n</code></pre>\n\n<p>My routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n\nget 'stories/new/:id' =&gt; 'posts#show'\nresources :stories\ndevise_for :users\nroot to: 'stories#index'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1480514297, "post_id": 40890151, "comment_id": 68994100, "body": "680.40 = 226.80 * 3 if that helps in any way. But the issue isn&#39;t with the code you have shown us."}, {"owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "edited": false, "score": 0, "creation_date": 1480514472, "post_id": 40890151, "comment_id": 68994236, "body": "@records.pluck(:cost).sum"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1480515146, "post_id": 40890151, "comment_id": 68994722, "body": "How is <code>@records</code> defined?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1480516328, "post_id": 40890151, "comment_id": 68995604, "body": "What SQL statement gets executed in the different cases?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1480516391, "post_id": 40890151, "comment_id": 68995648, "body": "Also have you overridden the getter method on the Record cost attribute?"}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1480514637, "post_id": 40890380, "comment_id": 68994358, "body": "This gives the right answer, why did my original code not work?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1480516187, "post_id": 40890380, "comment_id": 68995505, "body": "why using <code>pluck</code> + <code>sum</code> when <code>sum</code> does the same but faster? I edited your answer, you reverted the edit.."}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1480516415, "post_id": 40890380, "comment_id": 68995661, "body": "@AndreyDeineko apparently.. <code>@records.sum(:cost)</code> gives me the sum of all the records in that table not just the objects in <code>@records</code> (i faced similar issue earlier with ruby 2.3.0, rails 4.2.7) .. OP has tried <code>@records.sum(:cost)</code> with wrong answer"}], "tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 1, "last_activity_date": 1480515511, "last_edit_date": 1480515511, "creation_date": 1480514584, "answer_id": 40890380, "question_id": 40890151, "link": "https://stackoverflow.com/questions/40890151/active-record-sum-giving-the-wrong-answer/40890380#40890380", "title": "Active record sum giving the wrong answer", "body": "<p>try this: </p>\n\n<p>pluck the values of attr <code>cost</code> into an array and aggregate their sum</p>\n\n<pre><code>@total = @records.pluck(:cost).sum\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1480519977, "post_id": 40890656, "comment_id": 68998294, "body": "But in general the two ought to yield the same result, as the underlying parameters associated with the collection proxy&#39;s query is present in both cases, no?"}, {"owner": {"reputation": 3047, "user_id": 321330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XH3wL.jpg?s=128&g=1", "display_name": "Jan Min&#225;rik", "link": "https://stackoverflow.com/users/321330/jan-min%c3%a1rik"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1480550597, "post_id": 40890656, "comment_id": 69014663, "body": "@DavidAldridge Hard to say. I have an example where this is not true, although it is not exactly what I wrote above:  If you have: <code>@records = Record.all; @record.last.cost += 1</code> then <code>@records.sum(:cost) &lt; @records.map(&amp;:cost).sum</code>"}], "tags": [], "owner": {"reputation": 3047, "user_id": 321330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XH3wL.jpg?s=128&g=1", "display_name": "Jan Min&#225;rik", "link": "https://stackoverflow.com/users/321330/jan-min%c3%a1rik"}, "is_accepted": false, "score": 3, "last_activity_date": 1480516239, "last_edit_date": 1480516239, "creation_date": 1480515444, "answer_id": 40890656, "question_id": 40890151, "link": "https://stackoverflow.com/questions/40890151/active-record-sum-giving-the-wrong-answer/40890656#40890656", "title": "Active record sum giving the wrong answer", "body": "<p>Be careful, as a record collection is an instance of <code>ActiveRecord::Associations::CollectionProxy</code>, not an <code>Array</code>. It means that if you call:</p>\n\n<pre><code>@object.collection.sum(:cost)\n</code></pre>\n\n<p>actually what gets called is this method: <a href=\"http://apidock.com/rails/v4.2.7/ActiveRecord/Calculations/sum\" rel=\"nofollow noreferrer\">http://apidock.com/rails/v4.2.7/ActiveRecord/Calculations/sum</a></p>\n\n<p>And it will call <code>sum</code> in the SQL database, so the result gets influenced by the parameters of the query, e.g. groups, joins, etc.</p>\n\n<p>While if you want to use Array sum, as in here: <a href=\"http://apidock.com/rails/Enumerable/sum\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Enumerable/sum</a></p>\n\n<p>You would have to make your object Array first, via <code>to_a</code>:</p>\n\n<pre><code>@object.collection.to_a.sum(&amp;:cost)\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480519166, "creation_date": 1480513937, "question_id": 40890151, "link": "https://stackoverflow.com/questions/40890151/active-record-sum-giving-the-wrong-answer", "title": "Active record sum giving the wrong answer", "body": "<p>Hi I'm working on a project and I have to get the sum of an attribute of a active record collection. So I used:</p>\n\n<pre><code>@total = @records.sum(:cost)\n</code></pre>\n\n<p>However this gives the wrong value, for example if I have:</p>\n\n<pre><code>@records.each{ |x| puts x.cost}\n</code></pre>\n\n<p>I get 118.80 and 108.00</p>\n\n<p>but for @total I get 680.40, which obviously isn't the answer, however if I use:</p>\n\n<pre><code>@total = 0\n@records.each{ |x| @total = @total + x.cost}\n</code></pre>\n\n<p>I get the right answer of 226.80</p>\n\n<p>If anyone can help me understand what is going on here it would be greatly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1480511335, "post_id": 40889214, "comment_id": 68991972, "body": "Remove the validation from presumably <code>Resume</code>"}, {"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1480511452, "post_id": 40889214, "comment_id": 68992054, "body": "@j-dexx already done, didn&#39;t change anything.."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1480512048, "post_id": 40889214, "comment_id": 68992496, "body": "In the model? Not just changing required to false."}, {"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1480512267, "post_id": 40889214, "comment_id": 68992683, "body": "@j-dexx Yes, in the model. updated my question with the code of my model."}], "answers": [{"comments": [{"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "edited": false, "score": 0, "creation_date": 1480578577, "post_id": 40903814, "comment_id": 69023032, "body": "Thank you, worked! I tried everything... but I didn&#39;t thought that it would be so easy. :P"}], "tags": [], "owner": {"reputation": 471, "user_id": 3510489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92874711894acba72c18012316a23a?s=128&d=identicon&r=PG", "display_name": "Duyet Nguyen", "link": "https://stackoverflow.com/users/3510489/duyet-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1480573026, "creation_date": 1480573026, "answer_id": 40903814, "question_id": 40889214, "link": "https://stackoverflow.com/questions/40889214/upload-file-with-carrierwave-without-name/40903814#40903814", "title": "Upload file with carrierwave without name", "body": "<p>Try to remove column <code>name</code> on table <code>resumes</code> and others related, \nmaybe on views, controller (<code>strong params</code>), migration file...</p>\n\n<p>Then re-run drop, migrate database</p>\n"}], "owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 40903814, "answer_count": 1, "score": 0, "last_activity_date": 1480573026, "creation_date": 1480511272, "last_edit_date": 1480512327, "question_id": 40889214, "link": "https://stackoverflow.com/questions/40889214/upload-file-with-carrierwave-without-name", "title": "Upload file with carrierwave without name", "body": "<p>It's me again. I try to upload some yaml files with carrierwave. Everything works fine till now. </p>\n\n<p>So, as you know for carrierwave the forms looks like the follow:</p>\n\n<pre><code>&lt;%= form_for @resume, html: { multipart: true } do |f| %&gt;\n      &lt;%= f.label :name %&gt;&lt;br&gt;\n      &lt;%= f.text_field :name, :required =&gt; true %&gt;\n      &lt;%= f.label :attachment %&gt;&lt;br&gt;\n      &lt;%= f.file_field :attachment, :required =&gt; true %&gt;\n      &lt;br&gt;&lt;br&gt;\n      &lt;%= f.submit \"Save\", class: \"btn btn-primary\" %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>What i want to do now is to remove the \"name\" field. I don't need it. So i thought its quite easy, just remove the \"name\" part of the form. But then I got an error while upload:</p>\n\n<pre><code>Name can't be blank\n</code></pre>\n\n<p>So I tried now nearly everything... I had set the <code>required =&gt; false</code> same result.\nI went to Github and tooked a look at their how-to... there are methods to overwrite the name, but nobody cares about upload a file without a name. May somebody can tell me how i can upload a file without this name field?</p>\n\n<p>Thanks!</p>\n\n<p>Edit:</p>\n\n<p>My resume.rb model:</p>\n\n<pre><code>class Resume &lt; ActiveRecord::Base\n  mount_uploader :attachment, AttachmentUploader # Tells rails to use this uploader for this model.\n\n\nend\n</code></pre>\n\n<p>My AttachmentUploader:</p>\n\n<pre><code>class AttachmentUploader &lt; CarrierWave::Uploader::Base\n  storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  def extension_white_list\n    %w(yml)\n  end\n\n  def filename\n    \"something.jpg\" if original_filename # This is the part where i'm trying around right now.\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "operators", "metaprogramming"], "comments": [{"owner": {"reputation": 2461, "user_id": 277527, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c43eba4a99f65e071e66e684cea8177?s=128&d=identicon&r=PG", "display_name": "kamaradclimber", "link": "https://stackoverflow.com/users/277527/kamaradclimber"}, "edited": false, "score": 0, "creation_date": 1480510207, "post_id": 40888810, "comment_id": 68991255, "body": "I can&#39;t find any ruby example but I admit not having tried to write any code on my side yet"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1480513454, "post_id": 40888810, "comment_id": 68993474, "body": "Since this is a feature of the <i>parser</i> it is not possible."}], "answers": [{"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": false, "score": 3, "last_activity_date": 1480519490, "last_edit_date": 1480519490, "creation_date": 1480518708, "answer_id": 40891814, "question_id": 40888810, "link": "https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby/40891814#40891814", "title": "How to convert any method to infix operator in ruby", "body": "<p>In Ruby, whether the operator is prefix or infix is fixed by the parser.  Operator precedence is also fixed.  There is no way, short of modifying the parser, of changing these things.</p>\n\n<h1>But you can implement the built-in operators for your objects</h1>\n\n<p>Although you may not change the fix-ness or precedence of a built-in operator, you may implement operators for your objects by defining methods.  That is because Ruby translates operators into method calls.  For example, this expression:</p>\n\n<pre><code>a + b\n</code></pre>\n\n<p>is translated into:</p>\n\n<pre><code>a.+(b)\n</code></pre>\n\n<p>Therefore, you may implement the + operator for an arbitrary object by defining the + method:</p>\n\n<pre><code>def +(rhs)\n  ...\nend\n</code></pre>\n\n<p>The prefix operator <code>-</code> causes a call to method <code>@-</code>, so to implement prefix - you do this:</p>\n\n<pre><code>def @-\n  ..\nend\n</code></pre>\n\n<h1>You may also use methods</h1>\n\n<p>You may implement your own infix operators as plain methods.  This will require a slightly different syntax than what you want.  You want:</p>\n\n<pre><code>\"omg\" or_if_familiar \"oh!\"\n</code></pre>\n\n<p>Which you cannot have.  What you can have is:</p>\n\n<pre><code>\"omg\".or_if_familiar \"oh!\"\n</code></pre>\n\n<p>This works because, in Ruby, the parentheses on method arguments may often be omitted.  The above is equivalent to:</p>\n\n<pre><code>\"omg\".or_if_familiar(\"oh!\")\n</code></pre>\n\n<p>In this example, we would implement this by monkey-patching the String class:</p>\n\n<pre><code>class String\n  def or_ir_familiar(rhs)\n    ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1480538902, "creation_date": 1480538902, "answer_id": 40897920, "question_id": 40888810, "link": "https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby/40897920#40897920", "title": "How to convert any method to infix operator in ruby", "body": "<p>Ruby does not have infix method syntax, except for a fixed and predefined set of operators. And Ruby does not allow user code to change the language syntax. Ergo, what you want is not possible.</p>\n"}, {"tags": [], "owner": {"reputation": 2461, "user_id": 277527, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c43eba4a99f65e071e66e684cea8177?s=128&d=identicon&r=PG", "display_name": "kamaradclimber", "link": "https://stackoverflow.com/users/277527/kamaradclimber"}, "is_accepted": false, "score": 0, "last_activity_date": 1480664650, "last_edit_date": 1495540946, "creation_date": 1480540078, "answer_id": 40898216, "question_id": 40888810, "link": "https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby/40898216#40898216", "title": "How to convert any method to infix operator in ruby", "body": "<p>Based on <a href=\"https://stackoverflow.com/users/238886/wayne-conrad\">Wayne Conrad</a>'s answer, I can write the following code that would work for any method defined in ruby top-level:</p>\n\n<pre><code>class Object\n  def method_missing(method, *args)\n    return super if args.size != 1\n    # only work if \"method\" method is defined in ruby top level\n    self.send(method, self, *args)\n  end\nend\n</code></pre>\n\n<p>which allows to write</p>\n\n<pre><code>def much_greater_than(a,b)\n  a &gt;= b * 10\nend\n\n\"A very long sentence that say nothing really but should be long enough\".much_greater_than \"blah\"\n\n# or\n\n42.much_greater_than 2\n</code></pre>\n\n<p>Thanks Wayne!</p>\n\n<p>Interesting reference on the same subject:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8297645/defining-a-new-logical-operator-in-ruby?rq=1\">Defining a new logical operator in Ruby</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 7324619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fceecbf4e9c3c61e8ee1335da9d83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asone Tuhid", "link": "https://stackoverflow.com/users/7324619/asone-tuhid"}, "is_accepted": true, "score": 6, "last_activity_date": 1492287242, "last_edit_date": 1492287242, "creation_date": 1492277819, "answer_id": 43429202, "question_id": 40888810, "link": "https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby/43429202#43429202", "title": "How to convert any method to infix operator in ruby", "body": "<p>A bit late to the party but I've been toying around with it and you can use operator overloading to create Infix operators just like in <a href=\"http://code.activestate.com/recipes/384122-infix-operators/\" rel=\"noreferrer\">python</a> (but with a bit more work), the syntax becomes <code>a |op| b</code>, here's how:</p>\n\n<p>First a quick and dirty copy-paste to play around with Infix:</p>\n\n<pre><code>class Infix def initialize*a,&amp;b;raise'arguments size mismatch'if a.length&lt;0||a.length&gt;3;raise'both method and b passed'if a.length!=0&amp;&amp;b;raise'no arguments passed'if a.length==0&amp;&amp;!b;@m=a.length&gt;0? a[0].class==Symbol ? method(a[0]):a[0]:b;if a.length==3;@c=a[1];@s=a[2]end end;def|o;if@c;o.class==Infix ? self:@m.(@s,o)else;raise'missing first operand'end end;def coerce o;[Infix.new(@m,true,o),self]end;def v o;Infix.new(@m,true,o)end end;[NilClass,FalseClass,TrueClass,Object,Array].each{|c|c.prepend Module.new{def|o;o.class==Infix ? o.v(self):super end}};def Infix*a,&amp;b;Infix.new *a,&amp;b end\n#\n</code></pre>\n\n<p>Ok</p>\n\n<p>Step 1: create the <code>Infix</code> class</p>\n\n<pre><code>class Infix\n  def initialize *args, &amp;block\n    raise 'error: arguments size mismatch' if args.length &lt; 0 or args.length &gt; 3\n    raise 'error: both method and block passed' if args.length != 0 and block\n    raise 'error: no arguments passed' if args.length == 0 and not block\n    @method = args.length &gt; 0 ? args[0].class == Symbol ? method(args[0]) : args[0] : block\n    if args.length == 3; @coerced = args[1]; @stored_operand = args[2] end\n  end\n  def | other\n    if @coerced\n      other.class == Infix ? self : @method.call(@stored_operand, other)\n    else\n      raise 'error: missing first operand'\n    end\n  end\n  def coerce other\n    [Infix.new(@method, true, other), self]\n  end\n  def convert other\n    Infix.new(@method, true, other)\n  end\nend\n</code></pre>\n\n<p>Step 2: fix all the classes that don't have a <code>|</code> method and the three special cases (<code>true</code>, <code>false</code>, and <code>nil</code>) (note: you can add any class in here and it will probably work fine)</p>\n\n<pre><code>[ NilClass, FalseClass, TrueClass,\n  Float, Symbol, String, Rational,\n  Complex, Hash, Array, Range, Regexp\n].each {|c| c.prepend Module.new {\n  def | other\n    other.class == Infix ? other.convert(self) : super\n  end}}\n</code></pre>\n\n<p>Step 3: define your operators in one of 5 ways</p>\n\n<pre><code># Lambda\npow = Infix.new -&gt; (x, y) {x ** y}\n# Block\nmod = Infix.new {|x, y| x % y}\n# Proc\navg = Infix.new Proc.new {|x, y| (x + y) / 2.0}\n# Defining a method on the spot (the method stays)\npick = Infix.new def pick_method x, y\n  [x, y][rand 2]\nend\n# Based on an existing method\ndef diff_method x, y\n  (x - y).abs\nend\ndiff = Infix.new :diff_method\n</code></pre>\n\n<p>Step 4: use them (spacing doesn't matter):</p>\n\n<pre><code>2 |pow| 3      # =&gt; 8\n9|mod|4        # =&gt; 1\n3| avg |6      # =&gt; 4.5\n0 | pick | 1   # =&gt; 0 or 1 (randomly chosen)\n</code></pre>\n\n<p>You can even kinda sorta curry:\n(This only works with the first operand)</p>\n\n<pre><code>diff_from_3 = 3 |diff\n\ndiff_from_3| 2    # =&gt; 1\ndiff_from_3| 4    # =&gt; 1\ndiff_from_3| -3   # =&gt; 6\n</code></pre>\n\n<p>As a bonus, this little method allows you to define Infixes (or any object really) without using <code>.new</code>:</p>\n\n<pre><code>def Infix *args, &amp;block\n  Infix.new *args, &amp;block\nend\n\npow = Infix -&gt; (x, y) {x ** y} # and so on\n</code></pre>\n\n<p>All that's left to do is wrap it up in a module</p>\n\n<p>Hope this helped</p>\n\n<p>P.S. You can muck about with the operators to have something like <code>a &lt;&lt;op&gt;&gt; b</code>, <code>a -op- b</code>, <code>a &gt;op&gt; b</code> and <code>a &lt;op&lt;b</code> for directionality, <code>a **op** b</code> for precedence and any other combination you want but beware when using <code>true</code>, <code>false</code> and <code>nil</code> as the first operand with logical operators (<code>|</code>, <code>&amp;&amp;</code>, <code>not</code>, etc.) as they tend to return before the infix operator is called.</p>\n\n<p>For example: <code>false |equivalent_of_or| 5  # =&gt; true</code> if you don't correct.</p>\n\n<p>FINALLY, run this to check a bunch of cases of all the builtin classes as both the first and second operand:</p>\n\n<pre><code># pp prints both inputs\npp = Infix -&gt; (x, y) {\"x: #{x}\\ny: #{y}\\n\\n\"}\n\n[ true, false, nil, 0, 3, -5, 1.5, -3.7, :e, :'3%4s', 'to',\n  /no/, /(?: [^A-g7-9]\\s)(\\w{2,3})*?/,\n  Rational(3), Rational(-9.5), Complex(1), Complex(0.2, -4.6),\n  {}, {e: 4, :u =&gt; 'h', 12 =&gt; [2, 3]},\n  [], [5, 't', :o, 2.2, -Rational(3)], (1..2), (7...9)\n].each {|i| puts i.class; puts i |pp| i}\n</code></pre>\n"}], "owner": {"reputation": 2461, "user_id": 277527, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c43eba4a99f65e071e66e684cea8177?s=128&d=identicon&r=PG", "display_name": "kamaradclimber", "link": "https://stackoverflow.com/users/277527/kamaradclimber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 1, "accepted_answer_id": 43429202, "answer_count": 4, "score": 2, "last_activity_date": 1492287242, "creation_date": 1480510161, "question_id": 40888810, "link": "https://stackoverflow.com/questions/40888810/how-to-convert-any-method-to-infix-operator-in-ruby", "title": "How to convert any method to infix operator in ruby", "body": "<p>In some language such as Haskell, <a href=\"https://wiki.haskell.org/Infix_operator\" rel=\"nofollow noreferrer\">it is possible</a> to use any function taking two arguments as an infix operator.</p>\n\n<p>I find this notation interesting and would like to achieve the same in ruby.</p>\n\n<p>Given a imaginary method <code>or_if_familiar</code>\nI'd like to be able to write something like <code>\"omg\" or_if_familiar \"oh!\"</code> instead of <code>or_if_familiar(\"omg\", \"oh!\")</code></p>\n\n<p>How one would create such a notation in ruby (without modifying ruby itself)?</p>\n"}, {"tags": ["ruby", "openssl", "powerpc"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1480528752, "post_id": 40888696, "comment_id": 69004101, "body": "Many folks install Homebrew or MacPorts to manage older Macs. <code>i2d_ECPKParameters</code> is available in OpenSSL 1.0.2 or higher. I&#39;m guessing Ruby is linking to the down level version of OpenSSL provided by Apple."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1480584653, "post_id": 40888696, "comment_id": 69026293, "body": "That&#39;s good to know. I&#39;ve checked the version of OpenSSL and it&#39;s 1.0.1t, that might be the problem. I&#39;ll upgrade it to 1.0.2 and try again. Thanks."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1480585921, "post_id": 40888696, "comment_id": 69027167, "body": "As for the Homebrew of MacPorts, well it or its PowerPC port TigerBrew fails at the compilation because ruby-2+ causes _fgetattrlist undefined symbol error on PowerPC and it&#39;s got a patch at ruby-lang.org but brew doesn&#39;t apply that patch; eventually I have to do the compilation manually, but that&#39;s fine with me."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1480603919, "post_id": 40888696, "comment_id": 69039472, "body": "I don&#39;t know about TigerBrew or Ruby because I don&#39;t use them. But I have a PowerMac for testing software under PowerPC, and MacPorts works as expected."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1480618552, "post_id": 40888696, "comment_id": 69048764, "body": "AFAIK Macports justs downloads the tarball and only manages the configure part i.e. manages the dependencies but cannot do anything against the errors encountered at the make and install steps. Btw, I ve installed OpenSSL-1.0.2j and tried again but the same <b>i2d_ECPKParameters</b> error came up again. I guess there&#39;s something wrong in my OpenSSL setup."}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480509792, "creation_date": 1480509792, "question_id": 40888696, "link": "https://stackoverflow.com/questions/40888696/ruby-2-2-1-error-during-installing-bundle-gems-symbol-not-found-i2d-ecpkparame", "title": "ruby-2.2.1 error during installing bundle gems Symbol not found: _i2d_ECPKParameters on PowerPC", "body": "<p>I successfully configured &amp; compiled ruby-2.2.1 on my Mac mini G4 (PowerPC) Leopard 10.5.8 but during the install after all binaries and the like have been installed I get this error (shortened) How to fix it? Thanks.</p>\n\n<pre><code>installing binary commands:   /usr/local/bin\ninstalling base libraries:    /usr/local/lib\n....\ninstalling default gems:      /usr/local/lib/ruby/gems/2.2.0 (build_info, cache, doc, extensions, gems, specifications)\n                          bigdecimal 1.2.6\n                          io-console 0.4.3\n                          json 1.8.1\n                          psych 2.0.8\n                          rake 10.4.2\n                          rdoc 4.2.0\ninstalling bundle gems:       /usr/local/lib/ruby/gems/2.2.0 (build_info, cache, doc, extensions, gems, specifications)\n\n/Users/macmini/Downloads/ruby-2.2.1/lib/rubygems/core_ext\n/kernel_require.rb:54:in `require': dlopen(/Users/macmini/Downloads\n/ruby-2.2.1/.ext/powerpc-darwin9.0/openssl.bundle, 9): Symbol not \nfound: _i2d_ECPKParameters (LoadError)\n\nReferenced from: /Users/macmini/Downloads/ruby-2.2.1/.ext/powerpc-darwin9.0/openssl.bundle\n\n  Expected in: dynamic lookup\n - /Users/macmini/Downloads/ruby-2.2.1/.ext/powerpc-darwin9.0    /openssl.bundle\n    from /Users/macmini/Downloads/ruby-2.2.1/lib/rubygems/core_ext\n/kernel_require.rb:54:in `require'\n    from /Users/macmini/Downloads/ruby-2.2.1/.ext/common\n/openssl.rb:17:in `&lt;top (required)&gt;'\n....\nfrom ./tool/rbinstall.rb:722:in `block (2 levels) in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:721:in `each'\nfrom ./tool/rbinstall.rb:721:in `block in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:757:in `call'\nfrom ./tool/rbinstall.rb:757:in `block in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:754:in `each'\nfrom ./tool/rbinstall.rb:754:in `&lt;main&gt;'\nmake: *** [do-install-all] Error 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480509830, "post_id": 40888499, "comment_id": 68990969, "body": "<code>age_ranges.each_with_object(&#39;unknown&#39;) { |a, _| break a[:name] if a[:age_range] === age }</code> handles the <code>&#39;unknown&#39;</code> case, while your code does not."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480509906, "post_id": 40888499, "comment_id": 68991024, "body": "In general, <code>find</code>/<code>detect</code> is not applicable as a surrogate for <code>case</code> unless you have an explicit <code>|| ELSE_VARIANT</code>."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480509954, "post_id": 40888499, "comment_id": 68991060, "body": "@mudasobwa actually after a glance at your code decided to add a note about the out of range age passed to method. Will edit in a moment, thanks"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1480511075, "post_id": 40888499, "comment_id": 68991813, "body": "<code>each_with_object</code> still handles negatives, though :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 5, "last_activity_date": 1480510864, "last_edit_date": 1480510864, "creation_date": 1480509211, "answer_id": 40888499, "question_id": 40888414, "link": "https://stackoverflow.com/questions/40888414/interrogate-a-ruby-array-of-hashes/40888499#40888499", "title": "interrogate a Ruby array of hashes", "body": "<p>Now that you have an map of age names and ranges (note I used <em>range</em>, not string as a value of <code>age_range</code>), you want to search the <code>age_ranges</code> array of hashes for such, which value of <code>age_range</code> includes the age:</p>\n\n<pre><code>def age_ranges\n  [\n    { name: 'child',    age_range: 0..15 },\n    { name: '16 to 24', age_range: 16..24 }\n  ]\nend\n\ndef find_age(age)\n  age_ranges.find { |hash| hash[:age_range].include?(age) }[:name]\nend\n\nfind_age(12)\n#=&gt; \"child\"\nfind_age(17)\n#=&gt; \"16 to 24\"\n</code></pre>\n\n<p>Note, that <code>[:name]</code> will fail if <code>find</code> returns <code>nil</code> (meaning, no matches found).</p>\n\n<p>To overcome it either add an infinite range as a last one in the array (I'd prefer this one, because it is simpler):</p>\n\n<pre><code>def age_ranges\n  [\n    { name: 'child',    age_range: 0..15 },\n    { name: '16 to 24', age_range: 16..24 },\n    { name: 'unknown',  age_range: 25..Float::INFINITY }\n  ]\nend\n</code></pre>\n\n<p>Or handle it while fetching the age in the <code>find_age</code> method:</p>\n\n<pre><code>def find_age(age)\n  age_ranges.each_with_object('unknown') { |hash, _| break hash[:name] if hash[:age_range].include?(age) }\nend\n</code></pre>\n\n<p>Also, make sure to handle the negative numbers passed to the method (since <code>age_ranges</code> do not cover negatives):</p>\n\n<pre><code>def find_age(age)\n  return 'Age can not be less than 0' if age.negative?\n  age_ranges.find { |hash| hash[:age_range].include?(age) }[:name]\nend\n</code></pre>\n\n<p>P.S. After all these \"note/make sure\" I want to say that @mudasobwa's answer is the simplest way to go about it :)</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480510100, "post_id": 40888523, "comment_id": 68991180, "body": "<code>Proc#===</code> is useful too: <code>when -&gt; (a) { a &gt; 64 }</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480510346, "post_id": 40888523, "comment_id": 68991338, "body": "Hah, I asked this very same question <a href=\"http://stackoverflow.com/q/8531662/125816\">ages ago</a> :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480510634, "post_id": 40888523, "comment_id": 68991505, "body": "Or put a <code>when nil then &#39;unknown&#39;</code> at the top and use <code>else</code> to handle the &quot;above 64&quot; part."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1480510664, "post_id": 40888523, "comment_id": 68991533, "body": "@Stefan <code>64.method(:&lt;).to_proc</code> :) Also, <code>when nil</code> is wrong, due to negatives."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480511812, "post_id": 40888523, "comment_id": 68992309, "body": "@Stefan What about 15.5?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480512171, "post_id": 40888523, "comment_id": 68992600, "body": "@EricDuminil Good catch. I have updated an answer to handle floats."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480512288, "post_id": 40888523, "comment_id": 68992697, "body": "64.5 should be really old."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480512327, "post_id": 40888523, "comment_id": 68992717, "body": "@EricDuminil and it is, why?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480513877, "post_id": 40888523, "comment_id": 68993769, "body": "@EricDuminil age values are usually given in whole years. In the odd case of fractional years you could just say <code>case age_years.to_i</code> (or <code>floor</code> / <code>ceil</code> / <code>round</code>, whatever fits) but I doubt that you&#39;ll ever need it."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1480526194, "post_id": 40888523, "comment_id": 69002517, "body": "Who knows? Depending on the input, it could also from a duration in seconds which has been converted to float years."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 5, "last_activity_date": 1480512147, "last_edit_date": 1480512147, "creation_date": 1480509301, "answer_id": 40888523, "question_id": 40888414, "link": "https://stackoverflow.com/questions/40888414/interrogate-a-ruby-array-of-hashes/40888523#40888523", "title": "interrogate a Ruby array of hashes", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.3.3/Range.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\"><code>Range#===</code></a> triple equal directly, as it is supposed to be used:</p>\n\n<pre><code>case age_years\nwhen 0..15 then 'child'\nwhen 16..24 then '16 to 24'\nwhen 25..34 then '25 to 34'\nwhen 35..44 then '35 to 44'\nwhen 45..54 then '45 to 54'\nwhen 55..64 then '55 to 64'\nwhen 64..Float::INFINITY then 'really old' # or when 64.method(:&lt;).to_proc\nelse 'unknown'\nend\n</code></pre>\n\n<hr>\n\n<p>To make <code>case</code> to accept floats, one should use triple-dot ranges:</p>\n\n<pre><code>case age_years\nwhen 0...16 then 'child'\nwhen 16...25 then '16 to 24'\nwhen 25...35 then '25 to 34'\nwhen 35...45 then '35 to 44'\nwhen 45...55 then '45 to 54'\nwhen 55...64 then '55 to 64'\nwhen 64..Float::INFINITY then 'really old' # or when 64.method(:&lt;).to_proc\nelse 'unknown'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1480510929, "post_id": 40888829, "comment_id": 68991718, "body": "Why do you prohibit people to live more than 999 years?!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480511083, "post_id": 40888829, "comment_id": 68991816, "body": "Why do you prohibit people to live more than Aleph-naught?! :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480511311, "post_id": 40888829, "comment_id": 68991955, "body": "@mudasobwa On a more serious note, returning <code>unknown</code> for people older than 1000 years could help finding bugs, for example parsing <code>31&#47;12&#47;99</code> as <code>31st of december 0099</code> and returning <code>age</code> as 1918."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1480511747, "last_edit_date": 1480511747, "creation_date": 1480510217, "answer_id": 40888829, "question_id": 40888414, "link": "https://stackoverflow.com/questions/40888414/interrogate-a-ruby-array-of-hashes/40888829#40888829", "title": "interrogate a Ruby array of hashes", "body": "<p>Here's how I'd do it, to avoid code repetition between 16 and 64 :</p>\n\n<pre><code>def age_range(age, offset=4, span=10, lowest_age=16)\n  i    = ((age-offset-1)/span).to_i\n  min  = [i*span+offset+1, lowest_age].max\n  max  = (i+1)*span + offset\n  \"#{min} to #{max}\"\nend\n\ndef age_description(age)\n  case age\n    when 0...16 then 'child'\n    when 16..64 then age_range(age)\n    when 64..999 then 'really old'\n    else 'unknown'\n  end\nend\n\n(0..99).each do |age|\n  puts \"%s (%s)\" % [age_description(age), age]\nend\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>child (0)\nchild (1)\nchild (2)\nchild (3)\nchild (4)\nchild (5)\nchild (6)\nchild (7)\nchild (8)\nchild (9)\nchild (10)\nchild (11)\nchild (12)\nchild (13)\nchild (14)\nchild (15)\n16 to 24 (16)\n16 to 24 (17)\n16 to 24 (18)\n16 to 24 (19)\n16 to 24 (20)\n16 to 24 (21)\n16 to 24 (22)\n16 to 24 (23)\n16 to 24 (24)\n25 to 34 (25)\n25 to 34 (26)\n25 to 34 (27)\n25 to 34 (28)\n25 to 34 (29)\n25 to 34 (30)\n25 to 34 (31)\n25 to 34 (32)\n25 to 34 (33)\n25 to 34 (34)\n35 to 44 (35)\n...\n</code></pre>\n\n<p>As a bonus, it also works with Floats (e.g. 15.9 and 16.0).</p>\n"}], "owner": {"reputation": 45, "user_id": 2427972, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bdf6b9eab8365b270e452c65e7fd916b?s=128&d=identicon&r=PG", "display_name": "user2427972", "link": "https://stackoverflow.com/users/2427972/user2427972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1480573397, "creation_date": 1480509007, "last_edit_date": 1480573397, "question_id": 40888414, "link": "https://stackoverflow.com/questions/40888414/interrogate-a-ruby-array-of-hashes", "title": "interrogate a Ruby array of hashes", "body": "<p>I need to group people by age in Ruby. I have their date of birth, and a method which returns their age in years. So a solution like this works.</p>\n\n<pre><code>case\nwhen (0..15).cover?(age_years)\n  'child'\nwhen (16..24).cover?(age_years)\n  '16 to 24'\nwhen (25..34).cover?(age_years)\n  '25 to 34'\nwhen (35..44).cover?(age_years)\n  '35 to 44'\nwhen (45..54).cover?(age_years)\n  '45 to 54'\nwhen (55..64).cover?(age_years)\n  '55 to 64'\nwhen age_years &gt; 64\n  'really old'\nelse\n  'unknown'\nend\n</code></pre>\n\n<p>However, I am trying to learn Ruby and am looking for a more elegant solution. I thought about putting the age_ranges into an array of hashes like this...</p>\n\n<pre><code>age_ranges = [{ name: 'child', min_age: 0, max_age: 15 },\n              { name: '16 to 24', min_age: 16, max_age: 24 }]\n</code></pre>\n\n<p>but am at a loss as to how to interrogate this data to return the correct name where the age_years is within the appropriate ranges, or even a range like this</p>\n\n<pre><code>age_ranges = [{ name: 'child', age_range: '0..15' },\n              { name: '16 to 24', age_range: '16..24' }]\n</code></pre>\n\n<p>which looks neater but I have no idea if I have written gibberish as I don't know how to extract the name when the age years matches.</p>\n\n<p>Can someone point me in the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1480507999, "post_id": 40888068, "comment_id": 68989822, "body": "<code>allow(Facebook).to receive(:profile).with(&quot;token&quot;).and_return({&quot;name&quot; =&gt; &quot;Hello&quot;, &quot;id&quot; =&gt; &quot;14314141&quot;, &quot;email&quot; =&gt; &quot;hello@me.com&quot;})</code> should work"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1480508075, "post_id": 40888068, "comment_id": 68989882, "body": "Amazing, that worked like a charm. The docs are very difficult."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1480508896, "post_id": 40888068, "comment_id": 68990414, "body": "right, mocking and stubbing isn&#39;t the easiest topic.."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480539041, "post_id": 40888068, "comment_id": 69009592, "body": "Hint: there are no class methods in Ruby. Only instance methods. The question is: in which class are they defined and on which instance are they called? If you can answer that question, then you know what to do, since you already know how to mock instance methods, and there are no class methods, only instance methods."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1480508114, "creation_date": 1480508114, "answer_id": 40888124, "question_id": 40888068, "link": "https://stackoverflow.com/questions/40888068/how-to-mock-class-method-in-rspec-expect-syntax/40888124#40888124", "title": "How to mock class method in RSpec expect syntax?", "body": "<p>Here's what you want to do (no need for <code>double</code>):</p>\n\n<pre><code>allow(Facebook)\n  .to receive(:profile)\n  .with(\"token\")\n  .and_return({\"name\" =&gt; \"Hello\", \"id\" =&gt; \"14314141\", \"email\" =&gt; \"hello@me.com\"})\n</code></pre>\n"}], "owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2330, "favorite_count": 0, "accepted_answer_id": 40888124, "answer_count": 1, "score": 5, "last_activity_date": 1480508202, "creation_date": 1480507933, "last_edit_date": 1480508202, "question_id": 40888068, "link": "https://stackoverflow.com/questions/40888068/how-to-mock-class-method-in-rspec-expect-syntax", "title": "How to mock class method in RSpec expect syntax?", "body": "<p>I have a confusion about how to mock a class method using new <code>expect</code> syntax.\nThis works:</p>\n\n<pre><code>Facebook\n  .should_receive(:profile)\n  .with(\"token\")\n  .and_return({\"name\" =&gt; \"Hello\", \"id\" =&gt; \"14314141\", \"email\" =&gt; \"hello@me.com\"})\n</code></pre>\n\n<p>and this doesn't:</p>\n\n<pre><code>facebook = double(\"Facebook\")\nallow(facebook).to receive(:profile).with(\"token\").and_return({\"name\" =&gt; \"Hello\", \"id\" =&gt; \"14314141\", \"email\" =&gt; \"hello@me.com\"})\n</code></pre>\n\n<p>Can someone tell me what is wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 1, "creation_date": 1480507999, "post_id": 40887960, "comment_id": 68989823, "body": "Try &quot;/resume/attachment/12/yaml_error_complete.yml&quot;.split(&#39;/&#39;).l&zwnj;&#8203;ast"}, {"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "reply_to_user": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1480508147, "post_id": 40887960, "comment_id": 68989931, "body": "@BalaKarthik Thank you very much, worked perfect!!!!"}], "answers": [{"comments": [{"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "edited": false, "score": 0, "creation_date": 1480508183, "post_id": 40888114, "comment_id": 68989953, "body": "Thank you very much. Exactly what I was looking for! Ruby is so nice... but its so difficult for a newbie to find all those options!"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "edited": false, "score": 0, "creation_date": 1480509315, "post_id": 40888114, "comment_id": 68990665, "body": "@Twinfriends Your welcome! Next time you can search options on the  <a href=\"http://ruby-doc.com\" rel=\"nofollow noreferrer\">ruby-doc</a> :)"}, {"owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "edited": false, "score": 0, "creation_date": 1480509837, "post_id": 40888114, "comment_id": 68990975, "body": "Thanks. I know ruby-doc and I often try to find what I need. Often it works great, but sometimes, like this time, i&#39;m just stuck because i don&#39;t know what to search. But exactly for those problems there is SO! :D"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1480508095, "creation_date": 1480508095, "answer_id": 40888114, "question_id": 40887960, "link": "https://stackoverflow.com/questions/40887960/remove-first-part-of-a-string-that-havent-fixed-length/40888114#40888114", "title": "Remove first part of a string that haven&#39;t fixed length", "body": "<p>If I understand your question right, then, maybe it should help you:</p>\n\n<pre><code>a = \"/resume/attachment/12/yaml_error_complete.yml\"\na.split('/').last\n#=&gt; \"yaml_error_complete.yml\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "is_accepted": true, "score": 3, "last_activity_date": 1480508132, "creation_date": 1480508132, "answer_id": 40888129, "question_id": 40887960, "link": "https://stackoverflow.com/questions/40887960/remove-first-part-of-a-string-that-havent-fixed-length/40888129#40888129", "title": "Remove first part of a string that haven&#39;t fixed length", "body": "<p>I assume that you need to retrieve the file of a path.</p>\n\n<p>for ex if your file name is <code>\"/resume/attachment/12/yaml_error_complete.yml\"</code></p>\n\n<p>Then try this one</p>\n\n<pre><code>\"/resume/attachment/12/yaml_error_complete.yml\".split('/').last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1480508941, "creation_date": 1480508941, "answer_id": 40888391, "question_id": 40887960, "link": "https://stackoverflow.com/questions/40887960/remove-first-part-of-a-string-that-havent-fixed-length/40888391#40888391", "title": "Remove first part of a string that haven&#39;t fixed length", "body": "<p>In addition to the sulution with <code>split('/')</code> you could do the following</p>\n\n<pre><code>File.basename(\"/resume/attachment/12/yaml_error_complete.yml\")\n</code></pre>\n"}], "owner": {"reputation": 1914, "user_id": 5740849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63c498a66baa5ed9f1eaebff98e43c40?s=128&d=identicon&r=PG&f=1", "display_name": "Twinfriends", "link": "https://stackoverflow.com/users/5740849/twinfriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 40888129, "answer_count": 3, "score": 1, "last_activity_date": 1480508941, "creation_date": 1480507571, "last_edit_date": 1480507929, "question_id": 40887960, "link": "https://stackoverflow.com/questions/40887960/remove-first-part-of-a-string-that-havent-fixed-length", "title": "Remove first part of a string that haven&#39;t fixed length", "body": "<p>I ran into some problems with my code and I don't know how to fix it. So my problem:</p>\n\n<p>On a View of my application, there is a filepath displayed like this:</p>\n\n<pre><code>/resume/attachment/12/yaml_error_complete.yml\n</code></pre>\n\n<p>But I only want the filename as Output, means:</p>\n\n<pre><code>yaml_error_complete.yml\n</code></pre>\n\n<p>How can i achieve this? I tried with several options like <code>string.slice!</code> etc, but it doesn't work, since the number after \"attachment\" is increased by 1 for every single upload. At beginning I thought about to simply remove 2 chars, don't matter what they are. But then i ran into another problem that happens when the 100 file is uploaded. In this case i would have to remove 3 chars instead of 2, and i'm again at the beginning of my problem.</p>\n\n<p>May someone of you can help me?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1480507096, "post_id": 40887726, "comment_id": 68989300, "body": "Instead of <code>simple_form_for</code> try <code>form_for</code>..."}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "reply_to_user": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1480507308, "post_id": 40887726, "comment_id": 68989426, "body": "change the error <code>undefined method &#39;error_notification&#39;</code>"}, {"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1480507559, "post_id": 40887726, "comment_id": 68989558, "body": "Is this the error message that you are getting..?"}, {"owner": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "edited": false, "score": 0, "creation_date": 1480507600, "post_id": 40887726, "comment_id": 68989590, "body": "registration_path(resource_name) why are u passing resource_name here"}, {"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "reply_to_user": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "edited": false, "score": 0, "creation_date": 1480507656, "post_id": 40887726, "comment_id": 68989624, "body": "@rohankharvi this(registration_path(resource_name)) is generated by devise by default."}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "reply_to_user": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1480507839, "post_id": 40887726, "comment_id": 68989727, "body": "@BalaKarthik after implementing your solution i get this on the very next line if you want i can share the full error"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 1, "creation_date": 1480507854, "post_id": 40887726, "comment_id": 68989736, "body": "try <code>&lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; user_registration_path) do |f| %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "reply_to_user": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480507862, "post_id": 40887869, "comment_id": 68989743, "body": "@ZainAbbas: Please check above answer"}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480507970, "post_id": 40887869, "comment_id": 68989795, "body": "<code>wrong number of arguments (given 1, expected 0)</code> :("}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "reply_to_user": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480508226, "post_id": 40887869, "comment_id": 68989989, "body": "@ZainAbbas: Try now"}], "tags": [], "owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "is_accepted": false, "score": 2, "last_activity_date": 1480508008, "last_edit_date": 1480508008, "creation_date": 1480507301, "answer_id": 40887869, "question_id": 40887726, "link": "https://stackoverflow.com/questions/40887726/argumenterror-in-deviseregistrationsnew/40887869#40887869", "title": "ArgumentError in Devise::Registrations#new", "body": "<p>Update</p>\n\n<pre><code>&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :html =&gt; {:class =&gt; 'form-horizontal' }) do |f| %&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; user_registration_path, :html =&gt; {:class =&gt; 'form-horizontal' }) do |f| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1480508086, "post_id": 40888088, "comment_id": 68989888, "body": "@Zain Abbas, check this answer."}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480508188, "post_id": 40888088, "comment_id": 68989957, "body": "undefined method &#39;error_notification&#39;     <code>&lt;% resource.subscribe = true if resource.subscribe.nil? %&gt; &lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; user_registration_path, :html =&gt; {:class =&gt; &#39;form-horizontal&#39; }) do |f| %&gt;   &lt;%= f.error_notification %&gt;    &lt;div class=&quot;inputs&quot;&gt;     &lt;%= f.input :email, :autofocus =&gt; true, :input_html =&gt; { :autocomplete =&gt; &quot;off&quot; } %&gt;</code>"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480508349, "post_id": 40888088, "comment_id": 68990068, "body": "what are you getting now?"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1480508575, "post_id": 40888088, "comment_id": 68990209, "body": "did you set <code>error_notification</code> from the controller?"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1480508762, "post_id": 40888088, "comment_id": 68990332, "body": "remove, &lt;%= f.error_notification %&gt; and add <code>&lt;%= devise_error_messages! %&gt;</code>"}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480509324, "post_id": 40888088, "comment_id": 68990670, "body": "f.something supported by simple_form_for when i use form_for its starting giving errors on each line .. after replacing ` &lt;%= f.error_notification %&gt; to &lt;%= devise_error_messages! %&gt;` now its saying <code>undefined method &#39;input&#39;   &lt;%= f.input :email, :autofocus =&gt; true, :input_html =&gt; { :autocomplete =&gt; &quot;off&quot; } %&gt;</code>"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1480509473, "post_id": 40888088, "comment_id": 68990752, "body": "yes after changing to <code>form_for</code>, <code>simple_form_for</code> inputs don&#39;t work, change <code>input</code> to <code>text_field</code>"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1480509719, "post_id": 40888088, "comment_id": 68990914, "body": "check my updated answer. you can do something like that."}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480510285, "post_id": 40888088, "comment_id": 68991305, "body": "After updating all the attributes ... now its giving the original error <code>wrong number of arguments (given 1, expected 0)</code> :("}, {"owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480510597, "post_id": 40888088, "comment_id": 68991490, "body": "question is updated the the current code please review"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "edited": false, "score": 0, "creation_date": 1480510699, "post_id": 40888088, "comment_id": 68991558, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/129440/discussion-between-sravan-and-zain-abbas\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": false, "score": 2, "last_activity_date": 1480509678, "last_edit_date": 1480509678, "creation_date": 1480507990, "answer_id": 40888088, "question_id": 40887726, "link": "https://stackoverflow.com/questions/40887726/argumenterror-in-deviseregistrationsnew/40888088#40888088", "title": "ArgumentError in Devise::Registrations#new", "body": "<p><strong>According to your routes, you have</strong>,</p>\n\n<p><strong><code>user_registration POST /users(.:format)</code></strong></p>\n\n<p>This will <strong><code>post</code></strong> to <strong><code>/users</code></strong> which is the <strong><code>create</code></strong> action for the <strong><code>registration</code></strong>. </p>\n\n<p>so the form should be.</p>\n\n<pre><code>&lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; user_registration_path) do |f| %&gt;\n        &lt;%= devise_error_messages! %&gt;\n\n        &lt;%= f.text_field :email %&gt;\n&lt;%end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4690173, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d65a48432748fc3564af64022d7acb6?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Abbas", "link": "https://stackoverflow.com/users/4690173/zain-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480510569, "creation_date": 1480506902, "last_edit_date": 1480510569, "question_id": 40887726, "link": "https://stackoverflow.com/questions/40887726/argumenterror-in-deviseregistrationsnew", "title": "ArgumentError in Devise::Registrations#new", "body": "<blockquote>\n  <p><strong>Note:</strong> ruby 2.3.0, Rails 5.0.0.1, devise (4.2.0)</p>\n</blockquote>\n\n<p><strong>views/devise/registrations/new.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :html =&gt; {:class =&gt; 'form-horizontal' }) do |f| %&gt;\n</code></pre>\n\n<p><strong>application trace</strong></p>\n\n<pre><code>app/views/devise/registrations/new.html.erb:6:in `_app_views_devise_registrations_new_html_erb__2494954624473792684_38973380'\n</code></pre>\n\n<p><strong>full trace</strong></p>\n\n<pre><code>breach-mitigation-rails (0.2.2) lib/breach_mitigation/railtie.rb:30:in `form_authenticity_token'\nactionpack (5.0.0.1) lib/abstract_controller/helpers.rb:68:in `form_authenticity_token'\nactionview (5.0.0.1) lib/action_view/helpers/url_helper.rb:589:in `token_tag'\nactionview (5.0.0.1) lib/action_view/helpers/form_tag_helper.rb:866:in `extra_tags_for_form'\nactionview (5.0.0.1) lib/action_view/helpers/form_tag_helper.rb:886:in `form_tag_html'\nactionview (5.0.0.1) lib/action_view/helpers/form_tag_helper.rb:891:in `form_tag_with_body'\nactionview (5.0.0.1) lib/action_view/helpers/form_helper.rb:454:in `form_for'\n/home/vagrant/.rvm/gems/ruby-2.3.0/bundler/gems/simple_form-5fcefffdadd6/lib/simple_form/action_view_extensions/form_helper.rb:26:in `block in simple_form_for'\n/home/vagrant/.rvm/gems/ruby-2.3.0/bundler/gems/simple_form-5fcefffdadd6/lib/simple_form/action_view_extensions/form_helper.rb:45:in `with_simple_form_field_error_proc'\n/home/vagrant/.rvm/gems/ruby-2.3.0/bundler/gems/simple_form-5fcefffdadd6/lib/simple_form/action_view_extensions/form_helper.rb:25:in `simple_form_for'\napp/views/devise/registrations/new.html.erb:6:in `_app_views_devise_registrations_new_html_erb__2494954624473792684_38973380'\nactionview (5.0.0.1) lib/action_view/template.rb:158:in `block in render'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `instrument' \n</code></pre>\n\n<p><strong>Rake routes output</strong></p>\n\n<pre><code>        new_user_session GET      /users/sign_in(.:format)                                                                 devise/sessions#new\n              user_session POST     /users/sign_in(.:format)                                                                 devise/sessions#create\n      destroy_user_session DELETE   /users/sign_out(.:format)                                                                devise/sessions#destroy\n             user_password POST     /users/password(.:format)                                                                devise/passwords#create\n         new_user_password GET      /users/password/new(.:format)                                                            devise/passwords#new\n        edit_user_password GET      /users/password/edit(.:format)                                                           devise/passwords#edit\n                           PATCH    /users/password(.:format)                                                                devise/passwords#update\n                           PUT      /users/password(.:format)                                                                devise/passwords#update\n  cancel_user_registration GET      /users/cancel(.:format)                                                                  devise/registrations#cancel\n         user_registration POST     /users(.:format)                                                                         devise/registrations#create\n     new_user_registration GET      /users/sign_up(.:format)                                                                 devise/registrations#new\n    edit_user_registration GET      /users/edit(.:format)                                                                    devise/registrations#edit\n                           PATCH    /users(.:format)                                                                         devise/registrations#update\n                           PUT      /users(.:format)                                                                         devise/registrations#update\n                           DELETE   /users(.:format)                                                                         devise/registrations#destroy\n         user_confirmation POST     /users/confirmation(.:format)                                                            devise/confirmations#create\n     new_user_confirmation GET      /users/confirmation/new(.:format)                                                        devise/confirmations#new\n                           GET      /users/confirmation(.:format)                                                            devise/confirmations#show\n                   sign_in GET      /sign_in(.:format)                                                                       devise/sessions#new\n                           GET      /sign-in(.:format)                                                                       devise/sessions#new\n                   sign_up GET      /sign_up(.:format)                                                                       devise/registrations#new\n                           GET      /sign-up(.:format)                                                                       devise/registrations#new\n</code></pre>\n\n<p><strong>Full error</strong></p>\n\n<pre><code>ArgumentError in Devise::Registrations#new wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<p>I upgraded rails to 5 and this appears Please help me to sort it out Thanx :)</p>\n\n<p><strong>updated views/devise/registrations/new.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; user_registration_path, :html =&gt; {:class =&gt; 'form-horizontal' }) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"inputs\"&gt;\n    &lt;%= f.text_field :email, :autofocus =&gt; true, :input_html =&gt; { :autocomplete =&gt; \"off\" } %&gt;\n&lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "riot-games-api"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1480506821, "post_id": 40887452, "comment_id": 68989117, "body": "<code>champs[&quot;data&quot;][champ_name][&quot;id&quot;]</code> ???"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 1, "creation_date": 1480506859, "post_id": 40887452, "comment_id": 68989150, "body": "what is the structure of champs? some more infos needed"}, {"owner": {"reputation": 13, "user_id": 7230484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a2a70b90d4e8a937b1a6de307e1150?s=128&d=identicon&r=PG&f=1", "display_name": "TechnicalIssue3", "link": "https://stackoverflow.com/users/7230484/technicalissue3"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1480511051, "post_id": 40887452, "comment_id": 68991798, "body": "champs returns this hash -&gt; <a href=\"http://pastebin.com/wKpmWabC\" rel=\"nofollow noreferrer\">pastebin</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": true, "score": 0, "last_activity_date": 1480511138, "creation_date": 1480511138, "answer_id": 40889162, "question_id": 40887452, "link": "https://stackoverflow.com/questions/40887452/how-to-save-a-string-that-is-given-from-the-form-in-the-html/40889162#40889162", "title": "How to save a string that is given from the form in the html?", "body": "<p>Yes than it should be </p>\n\n<pre><code>champs[\"data\"][champ_name][\"id\"]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7230484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a2a70b90d4e8a937b1a6de307e1150?s=128&d=identicon&r=PG&f=1", "display_name": "TechnicalIssue3", "link": "https://stackoverflow.com/users/7230484/technicalissue3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 40889162, "answer_count": 1, "score": 1, "last_activity_date": 1480511138, "creation_date": 1480506025, "last_edit_date": 1480510870, "question_id": 40887452, "link": "https://stackoverflow.com/questions/40887452/how-to-save-a-string-that-is-given-from-the-form-in-the-html", "title": "How to save a string that is given from the form in the html?", "body": "<p>I'm following this <a href=\"http://organicrails.github.io/2015-07-20-Riftodds/\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n\n<p>This tutorial was made with older versions of Ruby/Rails and HAML that I didn't learn yet, so I'm trying to do the exact same app but working.</p>\n\n<p>Here is what the app should do, the user puts in the view :</p>\n\n<ul>\n<li>Their name on League of Legends (a game if any of you don't know\nthis) => called p1</li>\n<li>The name of a friend on League of Legends => called p2</li>\n<li>The name of their champion => called c1</li>\n<li>The name of the champion of a friend => called c2</li>\n</ul>\n\n<p>Here is the code :</p>\n\n<pre><code>&lt;%= form_for :player, url: players_path do |f| %&gt;\n  &lt;%= f.label :p1, \"First Summoner's Name \"  %&gt;\n  &lt;br/&gt;\n  &lt;%= f.text_field :p1 %&gt;\n  &lt;br/&gt;\n  &lt;br/&gt;\n  &lt;%= f.label :p2, \"Second Summoner's Name\" %&gt;\n  &lt;br/&gt;\n  &lt;%= f.text_field :p2 %&gt;\n  &lt;br/&gt;\n  &lt;br/&gt;\n  &lt;%= f.label :c1, \"Summoner One's Champion\" %&gt;\n  &lt;br/&gt;\n  &lt;%= f.text_field :c1 %&gt;\n  &lt;br/&gt;\n  &lt;br/&gt;\n  &lt;%= f.label :c2, \"Summoner Two's Champion\" %&gt;\n  &lt;br/&gt;\n  &lt;%= f.text_field :c2 %&gt;\n  &lt;br/&gt;\n  &lt;br/&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then I use the Riot API. The point is to calculate the winrate of each player with their respective champion.\nSo far everything is done and works, but I can't manage to get the champs ID. In order to get this data I use this method</p>\n\n<pre><code>def self.get_champion_id(champ_name)\n    api = RiotApi.new\n    champs = api.get_champion\n    champs[\"data\"][\"id\"]\n\nend \n</code></pre>\n\n<p>My problem is that, to get the id, I need to give the method, the name of the champion (named c1 and c2 previously) but I have no idea on how to achieve that, it should look like</p>\n\n<pre><code>def self.get_champion_id(champ_name)\n    api = RiotApi.new\n    champs = api.get_champion\n    champs[\"data\"][\"CHAMPION_NAME\"][\"id\"]\n\nend \n</code></pre>\n\n<p>Here is the <a href=\"https://github.com/Zepri/lolapp2\" rel=\"nofollow noreferrer\">repo</a> if you want to check the code, you can't do the api calls without a key </p>\n\n<p>Thanks for any advice !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480509138, "post_id": 40887227, "comment_id": 68990549, "body": "<i>Sidenote</i>: <code>tools_list = @tools.map { |t| t.name if params[t.name] }.compact</code> is your 6 lines for setting <code>tools_list</code> written in ruby."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480506044, "post_id": 40887412, "comment_id": 68988654, "body": "Order should be <code>DESC</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480506128, "post_id": 40887412, "comment_id": 68988717, "body": "Also, please make the code smartphone screen friendly (put chained methods on their own lines.)"}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480506214, "post_id": 40887412, "comment_id": 68988767, "body": "I never thought about it (I use to browse SO on my laptop). Fixed as well"}, {"owner": {"reputation": 1025, "user_id": 6219895, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6lGIm.jpg?s=128&g=1", "display_name": "Adear", "link": "https://stackoverflow.com/users/6219895/adear"}, "edited": false, "score": 0, "creation_date": 1480506782, "post_id": 40887412, "comment_id": 68989098, "body": "i think its on the right track but this feeds to a visual list of contractors that have names , pictures , locations and so on. really i just need to list the returned contractors but relevance to the search params."}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1480507309, "post_id": 40887412, "comment_id": 68989428, "body": "Ok, I just added <code>where</code> clause to it, also, you can change params you want to retrieve from the query, i&#39;ve changed it to <code>select(&#39;users.*...</code>, so you&#39;ll have all user fields"}, {"owner": {"reputation": 1025, "user_id": 6219895, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6lGIm.jpg?s=128&g=1", "display_name": "Adear", "link": "https://stackoverflow.com/users/6219895/adear"}, "edited": false, "score": 0, "creation_date": 1480508486, "post_id": 40887412, "comment_id": 68990150, "body": "You sir are a very handsom man! that is near enough exactly what i need! im sure i can adapt it from here! Thank you very much for all your help!"}], "tags": [], "owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "is_accepted": true, "score": 3, "last_activity_date": 1480507867, "last_edit_date": 1480507867, "creation_date": 1480505913, "answer_id": 40887412, "question_id": 40887227, "link": "https://stackoverflow.com/questions/40887227/how-can-i-order-by-relevance-in-ruby-on-rails/40887412#40887412", "title": "how can i order by relevance in ruby on rails", "body": "<p>you can try this, most of SQL clauses (if not all of them) are defined in ActiveRecord:</p>\n\n<pre><code>User\n  .joins(:tools)\n  .select('users.*, count(tools.id) \"counting\"')\n  .where(tools: { name: tools_list })\n  .having('counting &gt; 0')\n  .group('users.id')\n  .order('counting DESC')\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 6219895, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6lGIm.jpg?s=128&g=1", "display_name": "Adear", "link": "https://stackoverflow.com/users/6219895/adear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 3, "accepted_answer_id": 40887412, "answer_count": 1, "score": 3, "last_activity_date": 1480507867, "creation_date": 1480505345, "question_id": 40887227, "link": "https://stackoverflow.com/questions/40887227/how-can-i-order-by-relevance-in-ruby-on-rails", "title": "how can i order by relevance in ruby on rails", "body": "<p>i have a query happening </p>\n\n<pre><code>contractors = User.all\n\n@tools = Tool.all\n\ntools_list = []\n\n    @tools.each do |t|\n        if params[t.name]\n            tools_list.push(\"#{t.name}\")\n        end\n    end\n\ncontractors = contractors.joins(:tools).where('tools.name IN (?) ', tools_list).uniq\n</code></pre>\n\n<p>so this looks through my params and then if a tool in the list is found  it adds it to an array and then searches for all people that have at least one of these tools in there tools set.</p>\n\n<p>my question is how do i then order my results so that the people with all of the tools specified come out at the top of the list and then people with less come below?</p>\n\n<p>so to clarify at the moment i get a list in no particular order of all of my contractors that have at least one of the tools specified. how do i order that list so that people with more of the tools appear on the top of the list and people with less appear on the bottom?</p>\n\n<p>Thank you in advance with any help :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "edited": false, "score": 0, "creation_date": 1480506690, "post_id": 40887142, "comment_id": 68989056, "body": "I suggest using the dedicated method for such a check: <code>if Rails.production?</code>. You will gain a better maintainability."}, {"owner": {"reputation": 493, "user_id": 3840858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534f215d73d93dae9314db40d9746acd?s=128&d=identicon&r=PG", "display_name": "tegon", "link": "https://stackoverflow.com/users/3840858/tegon"}, "edited": false, "score": 0, "creation_date": 1480510332, "post_id": 40887142, "comment_id": 68991330, "body": "For the email sending I generally use this gem <a href=\"https://github.com/ryanb/letter_opener\" rel=\"nofollow noreferrer\">github.com/ryanb/letter_opener</a> which will open the email right in the browser instead of sending it in development."}], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1480992130, "post_id": 40887263, "comment_id": 69183094, "body": "thanks for the answer. It would be the answer if <code>deliver_now</code>, but for <code>deliver_later</code> it enqueued the job to redis."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1480505467, "creation_date": 1480505467, "answer_id": 40887263, "question_id": 40887142, "link": "https://stackoverflow.com/questions/40887142/best-way-to-change-the-behavior-depending-on-the-environment-variables-in-rails/40887263#40887263", "title": "Best way to change the behavior depending on the environment variables in Rails", "body": "<p>It is impossible to answer an exact question, since it\u2019s heavily opinion-based, but you might find useful stubbing such methods with:</p>\n\n<p><strong>config/initializers/stubs.rb</strong></p>\n\n<pre><code>ReceiptMailer.prepend(Module.new do\n  def receipt(*args)\n    Logger.info \"ReceiptMailer#receipt called with #{args.inspect}\"\n    Hashie::Mash.new { deliver_later: nil } # to allow call\n  end\nend) unless RAILS_ENV[:production]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1480556271, "creation_date": 1480556271, "answer_id": 40901230, "question_id": 40887142, "link": "https://stackoverflow.com/questions/40887142/best-way-to-change-the-behavior-depending-on-the-environment-variables-in-rails/40901230#40901230", "title": "Best way to change the behavior depending on the environment variables in Rails", "body": "<p>Instead of relying on the name of the environment to check if something should be activated or not ..why not use a environment variable which You can set its value \u00een the environment specific file and check its value instead. </p>\n\n<p>This way if You for example deploy your app on Heroku You can enable or disable this 'feature without touching the code or re-deploy every time since this are all available from the interface or command line. </p>\n\n<p>I personally think this is a good approach. There might be other good approaches also. </p>\n\n<p>You can use different gems like dotenv to accomplish this . There might be other gems out there too. </p>\n\n<p>Hope this will help :)</p>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480556271, "creation_date": 1480505101, "question_id": 40887142, "link": "https://stackoverflow.com/questions/40887142/best-way-to-change-the-behavior-depending-on-the-environment-variables-in-rails", "title": "Best way to change the behavior depending on the environment variables in Rails", "body": "<p>I sometimes face the situation which could be better to handle flow differently depending on the environment. (Ex. disable some features)</p>\n\n<p>For example.\nIf you are on the <em>production</em>, you can send a email if the process is succeeded.\nBut for <em>test</em>, and <em>development</em> environment we just simply disable it.</p>\n\n<p>For now, I just put <code>if-clause</code>.</p>\n\n<pre><code>  ActiveRecord::Base.transaction do\n    itemable = create_invoiceitemable(each_line)\n    next unless itemable.present?\n\n    create_invoiceitem(invoice, itemable, each_line[:id])\n  end\n  ReceiptMailer.receipt(invoie[:uuid]).deliver_later if RAILS_ENV[:production]\n</code></pre>\n\n<p>Any ideas for better way to handle this?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1480505204, "post_id": 40887041, "comment_id": 68988145, "body": "Very close, but there is one issue. Between Survey and Builder should not be any space."}], "tags": [], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "is_accepted": false, "score": 1, "last_activity_date": 1480505687, "last_edit_date": 1480505687, "creation_date": 1480504847, "answer_id": 40887041, "question_id": 40886977, "link": "https://stackoverflow.com/questions/40886977/refactor-haml-to-use-rails-link-to-helper/40887041#40887041", "title": "Refactor haml to use rails link_to helper", "body": "<pre><code>= link_to '/surveys', class: 'logo-text' do\n  %b Survey\n  Builder\n</code></pre>\n\n<p>In a single line:</p>\n\n<pre><code>= link_to raw('&lt;b&gt;Survey&lt;/b&gt;Builder'), '/surveys', class: 'logo-text'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 1, "last_activity_date": 1480505008, "creation_date": 1480505008, "answer_id": 40887101, "question_id": 40886977, "link": "https://stackoverflow.com/questions/40886977/refactor-haml-to-use-rails-link-to-helper/40887101#40887101", "title": "Refactor haml to use rails link_to helper", "body": "<p>You can pass a block to link_to helper:</p>\n\n<pre><code>= link_to \"/surveys\", class: \"logo-text\" do\n  %b Survey\n  Builder\n</code></pre>\n\n<p>or in one line:</p>\n\n<pre><code>= link_to \"&lt;b&gt;Survey&lt;/b&gt;Builder\".html_safe, \"/surveys\", class: \"logo-text\" \n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40887101, "answer_count": 2, "score": 0, "last_activity_date": 1480505687, "creation_date": 1480504642, "last_edit_date": 1480504838, "question_id": 40886977, "link": "https://stackoverflow.com/questions/40886977/refactor-haml-to-use-rails-link-to-helper", "title": "Refactor haml to use rails link_to helper", "body": "<p>I have the following haml markup:</p>\n\n<pre><code>%a.logo-text{href: \"/surveys\"}\n    %b Survey\n    Builder\n</code></pre>\n\n<p>Is there any way of rewriting this to use Ruby on Rails <code>link_to</code> helper?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake-task"], "answers": [{"comments": [{"owner": {"reputation": 1238, "user_id": 5501716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NUNlx.jpg?s=128&g=1", "display_name": "Alex Zakruzhetskyi", "link": "https://stackoverflow.com/users/5501716/alex-zakruzhetskyi"}, "edited": false, "score": 1, "creation_date": 1480504373, "post_id": 40886804, "comment_id": 68987623, "body": "That&#39;s it! Thanks a lot."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1480504821, "last_edit_date": 1480504821, "creation_date": 1480504115, "answer_id": 40886804, "question_id": 40886731, "link": "https://stackoverflow.com/questions/40886731/nameerror-uninitialized-constant-classclass-in-a-rake-task/40886804#40886804", "title": "NameError: uninitialized constant Class::Class in a rake-task", "body": "<p>Does it work when you replace</p>\n\n<pre><code>task :parse_news do\n</code></pre>\n\n<p>with</p>\n\n<pre><code>task :parse_news =&gt; :environment do\n</code></pre>\n\n<p>?</p>\n\n<p>It will load your Rails environment before your task, and your code should work just like in the rails console.</p>\n\n<p>Also, you could DRY your code a bit :</p>\n\n<pre><code>require 'open-uri'\n\nnamespace :news_parser do\n  desc 'Parsing news from 6 news sites'\n  task :parse_news =&gt; :environment do\n    load 'lib/news_parser.rb'\n    [ProcherkParser, VikkaParser, InfomistParser, ZmiParser, VycherpnoParser, ProvceParser].each do |parser_klass|\n      parser_klass.new.save_novelties\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1480504268, "creation_date": 1480504268, "answer_id": 40886857, "question_id": 40886731, "link": "https://stackoverflow.com/questions/40886731/nameerror-uninitialized-constant-classclass-in-a-rake-task/40886857#40886857", "title": "NameError: uninitialized constant Class::Class in a rake-task", "body": "<p>This is how I am using in my app</p>\n\n<pre><code>namespace :raw_logs do\n  desc 'Download - Decrypt - Save raw logs'\n  task process: :environment do\n   LogItem.create(org_id: 12)\n  end\nend\n</code></pre>\n\n<p>My rake task is rake <code>raw_logs:process</code></p>\n"}], "owner": {"reputation": 1238, "user_id": 5501716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NUNlx.jpg?s=128&g=1", "display_name": "Alex Zakruzhetskyi", "link": "https://stackoverflow.com/users/5501716/alex-zakruzhetskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 1, "accepted_answer_id": 40886804, "answer_count": 2, "score": 1, "last_activity_date": 1480504821, "creation_date": 1480503910, "last_edit_date": 1480504518, "question_id": 40886731, "link": "https://stackoverflow.com/questions/40886731/nameerror-uninitialized-constant-classclass-in-a-rake-task", "title": "NameError: uninitialized constant Class::Class in a rake-task", "body": "<p>I'm trying to make a rake-task in a such way:</p>\n\n<pre><code>require 'open-uri'\n\nnamespace :news_parser do\n  desc 'Parsing news from 6 news sites'\n  task :parse_news do\n    load 'lib/news_parser.rb'\n    ProcherkParser.new.save_novelties\n    VikkaParser.new.save_novelties\n    InfomistParser.new.save_novelties\n    ZmiParser.new.save_novelties\n    VycherpnoParser.new.save_novelties\n    ProvceParser.new.save_novelties\n  end\nend\n</code></pre>\n\n<p>In my <code>lib/news_parser.rb</code> I have classes and instance methods, which perfectly work in a rails console, by doing the following:</p>\n\n<pre><code>load 'lib/news_parser.rb'\nProcherkParser.new.save_novelties\n</code></pre>\n\n<p>It saves to my db all the information I need. But how can I do it in a rake-task? Any help would be appreciate. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1480503313, "post_id": 40886459, "comment_id": 68986926, "body": "can you also post the output of <code>rake routes | grep stories</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1480503368, "post_id": 40886459, "comment_id": 68986953, "body": "One more tip - your controller name should be <code>StoriesController</code>"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1480503571, "post_id": 40886459, "comment_id": 68987107, "body": "Oh really? I have added more information above. I think this is uncovering the unfortunate reality here! What have I done wrong?"}, {"owner": {"reputation": 13234, "user_id": 409792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9f1a530bb9d8cf91a889b4af5f80e9?s=128&d=identicon&r=PG", "display_name": "zwippie", "link": "https://stackoverflow.com/users/409792/zwippie"}, "edited": false, "score": 0, "creation_date": 1480503663, "post_id": 40886459, "comment_id": 68987170, "body": "Can confirm: use plural form for resourceful routes: <code>&#47;stories</code>."}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1480503882, "post_id": 40886653, "comment_id": 68987304, "body": "Thank you everyone! I appreciate the rapid responses. I find it hard to understand when I am meant to pluralise!"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1480512459, "post_id": 40886653, "comment_id": 68992795, "body": "Models are singular, e.g. <code>class Story &lt; ApplicationRecord</code> but controllers and view folders are plural.  For instance variables, use whatever is appropriate to the context, so <code>index</code> (a list of objects) would be <code>@stories</code> and <code>edit</code> or <code>show</code> (a slingle object) would be <code>@story</code>"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1480503706, "creation_date": 1480503706, "answer_id": 40886653, "question_id": 40886459, "link": "https://stackoverflow.com/questions/40886459/nomethoderror-in-storynew/40886653#40886653", "title": "NoMethodError in Story#new", "body": "<p>Easiest is to follow \"convention over configuration\" and use the defaults that Rails expects.</p>\n\n<p>So in your routes.rb</p>\n\n<pre><code>resources :stories\nroot to: 'stories#index'\n</code></pre>\n\n<p>rename <code>app/controllers/story_controller.rb</code> to <code>app/controllers/stories_controller.rb</code> and change the class definition to </p>\n\n<pre><code>class StoriesController &lt; ApplicationController\n</code></pre>\n\n<p>The rest should all work.</p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 2, "last_activity_date": 1480504102, "last_edit_date": 1480504102, "creation_date": 1480503758, "answer_id": 40886671, "question_id": 40886459, "link": "https://stackoverflow.com/questions/40886459/nomethoderror-in-storynew/40886671#40886671", "title": "NoMethodError in Story#new", "body": "<p>The main problem here is you are using singular name for controller and routes</p>\n\n<p>You need to change following </p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources :stories\n</code></pre>\n\n<p><strong>stories_controller.rb</strong></p>\n\n<pre><code>class StoriesController &lt; ApplicationController\nend\n</code></pre>\n\n<p>which will give you the following routes</p>\n\n<pre><code>stories    GET    /stories(.:format)          stories#index\n           POST   /stories(.:format)          stories#create\nnew_story  GET    /stories/new(.:format)      stories#new\nedit_story GET    /stories/:id/edit(.:format) stories#edit\nstory      GET    /stories/:id(.:format)      stories#show\n           PATCH  /stories/:id(.:format)      stories#update\n           PUT    /stories/:id(.:format)      stories#update\n           DELETE /stories/:id(.:format)      stories#destroy\n</code></pre>\n\n<p>And then the form will get <code>stories_path</code> properly while creating new story</p>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480504102, "creation_date": 1480503191, "last_edit_date": 1480503520, "question_id": 40886459, "link": "https://stackoverflow.com/questions/40886459/nomethoderror-in-storynew", "title": "NoMethodError in Story#new", "body": "<p>It says <code>undefined method</code>stories_path'`. </p>\n\n<p>Hi, I have been trying to figure out the solution to the above error for a while, to no avail. I also am receiving an error in my terminal as well:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `stories_path' for #&lt;#&lt;Class:0x005557c1a40560&gt;:0x005557c1885cc0&gt;\nDid you mean?  story_path):\n    1: &lt;%= form_for @story do |f| %&gt;\n    2:   &lt;%= render 'shared/errors', object: @story %&gt;\n    3: \n    4:   &lt;div class=\"form-group\"&gt;\n</code></pre>\n\n<p>I have a feeling it might be to do with my routes but I am unsure of how to change the configuration.</p>\n\n<p>My controller:</p>\n\n<pre><code>class StoryController &lt; ApplicationController\n    before_action :find_story, only: [:destroy, :show, :edit, :update]\n\n\ndef index\n    @stories = Story.order('created_at DESC')\nend\n\ndef new\n    @story = Story.new\nend\n\ndef create\n    @story = Story.new(story_params)\n    if @story.save\n        flash[:success] = \"Your beautiful story has been added!\"\n        redirect_to root_path\n    else\n        render 'new'\n    end\nend\n\ndef edit\nend\n\ndef update\n    if @story.update.attributes(story_params)\n        flash[:success] = \"More knowledge, more wisdom\"\n        redirect_to root_path\n    else\n        render 'edit'\n    end\nend\n\ndef destroy\n    if @story.destroy\n        flash[:success] = \"I think you should have more confidence in your storytelling\"\n    else\n        flash[:error] = \"Can't delete this story, sorry\"\n    end\nend\n\ndef show\n    @stories = Story.all\nend\n\nprivate\n\ndef story_params\n    params.require(:story).permit(:title, :body)\nend\n\ndef find_story\n    @story = Story.find(params[:id])\nend\n\n\nend\n</code></pre>\n\n<p>new.html.erb:</p>\n\n<pre><code>&lt;%= form_for @story do |f| %&gt;\n\n &lt;%= render 'shared/errors', object: @story %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :title %&gt;\n    &lt;%= f.text_field :title, class: 'form-control', required: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :body %&gt;\n    &lt;%= f.text_area :body, class: 'form-control', required: true, cols: 3 %&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.submit 'Post', class: 'btn btn-primary' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My routes.rb file:</p>\n\n<p>Rails.application.routes.draw do</p>\n\n<pre><code>devise_for :users\nresources :story\nroot to: 'story#index'\nend\n</code></pre>\n\n<p>and finally, /shared/_errors.html.erb</p>\n\n<pre><code>&lt;% if object.errors.any? %&gt;\n  &lt;div class=\"panel panel-danger\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n      &lt;h3 class=\"panel-title\"&gt;The following errors were found while submitting the form:&lt;/h3&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"panel-body\"&gt;\n      &lt;ul&gt;\n        &lt;% object.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Added information: <code>rake routes | grep stories</code> does not work. However, <code>rake routes | grep story</code> display these results:</p>\n\n<pre><code>  story_index GET    /story(.:format)               story#index\n                         POST   /story(.:format)               story#create\n               new_story GET    /story/new(.:format)           story#new\n              edit_story GET    /story/:id/edit(.:format)      story#edit\n                   story GET    /story/:id(.:format)           story#show\n                         PATCH  /story/:id(.:format)           story#update\n                         PUT    /story/:id(.:format)           story#update\n                         DELETE /story/:id(.:format)           story#destroy\n                    root GET    /                              story#index\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "connection", "timeout", "sinatra"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1480500640, "post_id": 40885355, "comment_id": 68985050, "body": "Please use plain English on that site."}, {"owner": {"reputation": 1325, "user_id": 6139818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zV0XZ.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6139818/tom"}, "edited": false, "score": 0, "creation_date": 1480500968, "post_id": 40885355, "comment_id": 68985281, "body": "Please edit your question to make it understandable to all SO users - in English."}, {"owner": {"reputation": 11, "user_id": 7230012, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GeRS6ChV8N8/AAAAAAAAAAI/AAAAAAAAAZs/xZRW46WYrGs/photo.jpg?sz=128", "display_name": "atozzz", "link": "https://stackoverflow.com/users/7230012/atozzz"}, "edited": false, "score": 0, "creation_date": 1480501349, "post_id": 40885355, "comment_id": 68985542, "body": "I&#39;m sorry.I have fixed this."}], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1481143131, "creation_date": 1481143131, "answer_id": 41026947, "question_id": 40885355, "link": "https://stackoverflow.com/questions/40885355/timeout-with-activerecord-activerecordconnectiontimeouterror/41026947#41026947", "title": "Timeout with ActiveRecord\uff08ActiveRecord::ConnectionTimeoutError \uff09", "body": "<p>Decouple the connection to your database from your code in a separate script to test and publish that with the error produced so that we can reproduce the problem, something like</p>\n\n<pre><code>require \"active_record\"\n\nActiveRecord::Base.establish_connection(\n    adapter: \"sqlite3\",\n    database: \"./image.db\"\n) \n\nif !ActiveRecord::Base.connection.table_exists?('SRCS')\n  ActiveRecord::Schema.define do\n    create_table 'SRCS' do |table|\n      table.column :account, :string\n      table.column :url, :string\n    end\n  end\nend\n\nclass Src &lt; ActiveRecord::Base\n  self.table_name  = 'SRCS'\nend\n\np Src.first\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7230012, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GeRS6ChV8N8/AAAAAAAAAAI/AAAAAAAAAZs/xZRW46WYrGs/photo.jpg?sz=128", "display_name": "atozzz", "link": "https://stackoverflow.com/users/7230012/atozzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1481143131, "creation_date": 1480500186, "last_edit_date": 1480501280, "question_id": 40885355, "link": "https://stackoverflow.com/questions/40885355/timeout-with-activerecord-activerecordconnectiontimeouterror", "title": "Timeout with ActiveRecord\uff08ActiveRecord::ConnectionTimeoutError \uff09", "body": "<p>While creating an application using ActiveRecord with sinatra, I encountered such an error.\n\u00a0\u00a0\u00a0\u00a0</p>\n\n<blockquote>\n  <p>ActiveRecord::ConnectionTimeoutError at / could not obtain a database\n  connection within 5.000 seconds (waited 5.005 seconds)</p>\n</blockquote>\n\n<p>What I was about to do was to \"get a profile image from Twitter API, save it in a database, and embed it in index.erb\". I stopped here.</p>\n\n<p>The code is below.</p>\n\n<p>main.rb</p>\n\n<pre><code>require \"sinatra\"\nrequire \"sinatra/reloader\"\nrequire \"twitter\"\nrequire \"active_record\"\n\n\nActiveRecord::Base.establish_connection(\n    adapter: \"sqlite3\",\n    database: \"./image.db\"\n)   \n\nclass Src &lt; ActiveRecord::Base\nend\n\ndef get_profile_image\n    @srcs = Src.order(\"id desc\").all\nend\n\ndef add_profile_image(twitter_id)\n\n    client = Twitter::REST::Client.new(\n        consumer_key: \"[CONSUMER_KEY]\",\n        consumer_secret: \"[CONSUMER_SECRET]\",\n        access_token: \"[ACCESS_TOMEN]\",\n        access_token_secret: \"[ACCESS_TOKEN_SECRET]\"\n    )\n    user = client.user(twitter_id)\n    url = user.profile_image_url\n\n    src = Src.new(account: twitter_id, url: url)\n    src.save \nend\n\ndef delete_img(twitter_id)\n    Src.find_by(account: twitter_id).delete\nend\n\n\n\nget \"/\" do\n    get_profile_image\n    erb :index\nend\n\npost \"/\" do\n    add_profile_image(params[:id])\n    get_profile_image\n    erb :index\nend\n\nget \"/delete\" do\n    delete_img(params[:id])\n    get_profile_image\n    erb :index\nend\n</code></pre>\n\n<p>index.erb</p>\n\n<pre><code>  &lt;form method=\"post\" action=\"/\"&gt;\n    &lt;input type=\"text\" name=\"id\"&gt;\n    &lt;input type=\"submit\" value=\"enter\"&gt;\n  &lt;/form&gt;\n\n  &lt;form method=\"get\" action=\"/delete\"&gt;\n    &lt;input type=\"text\" name=\"id\"&gt;\n    &lt;input type=\"submit\" value=\"delete\"&gt;\n  &lt;/form&gt;\n\n  &lt;% @srcs.each do |src| %&gt;\n    &lt;div id=\"images-space\" style=\"float: left;\" class=\"imgs\"&gt;\n      &lt;img data-id=\"&lt;%= src.id %&gt;\" src=\"&lt;%= src.url %&gt;\"&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>DB table name is \"srcs\" and column is</p>\n\n<ul>\n<li>id integer primary key </li>\n<li>account text</li>\n<li>url text</li>\n</ul>\n\n<p>This kind of error is the first time for me, but where is the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 2, "last_activity_date": 1480501492, "creation_date": 1480501492, "answer_id": 40885874, "question_id": 40884909, "link": "https://stackoverflow.com/questions/40884909/how-can-i-set-the-expire-time-in-redis-ruby-client-when-using-mapped-mset/40885874#40885874", "title": "How can I set the expire time in Redis&#39; ruby client when using mapped_mset?", "body": "<p>You can write wrapper method to set a list and add expiration. Use <code>redis.multi</code> to wrap it into trasactional module. </p>\n\n<pre><code>def set_list(list, expire_in = 10)\n  redis.multi do\n    list.each{ |k, v| redis.set(k,v, ex: expire_in)}\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "edited": false, "score": 0, "creation_date": 1480518206, "post_id": 40886023, "comment_id": 68996979, "body": "Thanks for your answer!"}, {"owner": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "edited": false, "score": 0, "creation_date": 1480518827, "post_id": 40886023, "comment_id": 68997463, "body": "But I don&#39;t care whether these set operation are in same transaction, does this mean I can call them separately without using Redis#multi?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "edited": false, "score": 0, "creation_date": 1480520180, "post_id": 40886023, "comment_id": 68998450, "body": "You have asked for an equivalent of <code>mapped_mset</code> with expiration. <code>mapped_mset</code> is a transacted atomic operation. If you don\u2019t want it to be atomic, call it without <code>multi</code>."}, {"owner": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "edited": false, "score": 0, "creation_date": 1480558655, "post_id": 40886023, "comment_id": 69016687, "body": "I totally understand what you mean. One more thing I want to confirm, if a hash parameter contains N keys,  redis client will send N <code>set</code> requests to server, right?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "edited": false, "score": 0, "creation_date": 1480574239, "post_id": 40886023, "comment_id": 69021192, "body": "I have linked both sources of where to get answers. No, since Redis supports <code>mset</code> command, ruby wrapper will send 1 <code>MSET</code> request to Redis, which Redis will internally execute as a transacted set."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1480501913, "creation_date": 1480501913, "answer_id": 40886023, "question_id": 40884909, "link": "https://stackoverflow.com/questions/40884909/how-can-i-set-the-expire-time-in-redis-ruby-client-when-using-mapped-mset/40886023#40886023", "title": "How can I set the expire time in Redis&#39; ruby client when using mapped_mset?", "body": "<p>Redis itself <a href=\"https://redis.io/commands\" rel=\"noreferrer\">does not support</a> multiple setting with an expiration parameter. <a href=\"https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L822\" rel=\"noreferrer\"><code>Redis#mapped_set</code></a> is a syntactic sugar to call <code>mset</code> and <code>mset</code> itself is a syntactic sugar to transactionally call subsequent <code>set</code> many times.</p>\n\n<p>So, the only thing you need is to wrap subsequent calls to <code>set(... ex:...)</code> into a transaction with <code>Redis#multi</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 7229941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lw0Om.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/7229941/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7798, "favorite_count": 0, "accepted_answer_id": 40886023, "answer_count": 2, "score": 5, "last_activity_date": 1589819655, "creation_date": 1480498978, "last_edit_date": 1589819655, "question_id": 40884909, "link": "https://stackoverflow.com/questions/40884909/how-can-i-set-the-expire-time-in-redis-ruby-client-when-using-mapped-mset", "title": "How can I set the expire time in Redis&#39; ruby client when using mapped_mset?", "body": "<p>I am trying to use </p>\n\n<pre><code>redis.mapped_mset({ \"f1\" =&gt; \"v1\", \"f2\" =&gt; \"v2\" })\n</code></pre>\n\n<p>to set multiple keys into <code>Redis</code> and I can not set expire time at the same time.\nThe only way to set expire time to to use this:</p>\n\n<pre><code>set(key, value, options = {})\n</code></pre>\n\n<p>or</p>\n\n<pre><code>expire(key, seconds)\n</code></pre>\n\n<p>I have to call many times and this is not what I want to see.\nAre there any other ways to solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "cookies", "session-cookies"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "is_accepted": false, "score": 1, "last_activity_date": 1480556895, "creation_date": 1480556895, "answer_id": 40901323, "question_id": 40884877, "link": "https://stackoverflow.com/questions/40884877/where-is-rails-actually-writing-the-set-cookie-header-for-session-id/40901323#40901323", "title": "Where is Rails actually writing the Set-Cookie header for _session_id?", "body": "<p>I think what You are looking for is actually this <a href=\"http://apidock.com/rails/ActionDispatch/Response/set_cookie\" rel=\"nofollow\">http://apidock.com/rails/ActionDispatch/Response/set_cookie</a></p>\n\n<p>The response should set the cookie header . You can do this in a middleware or a after_action filter \u00een your base controller.</p>\n\n<p>Personally i prefer using the filter for this case. </p>\n"}], "owner": {"reputation": 1829, "user_id": 261006, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67ccb6ee1a893be3dac35a7feff19e09?s=128&d=identicon&r=PG", "display_name": "Jasper", "link": "https://stackoverflow.com/users/261006/jasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1474, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480556895, "creation_date": 1480498893, "question_id": 40884877, "link": "https://stackoverflow.com/questions/40884877/where-is-rails-actually-writing-the-set-cookie-header-for-session-id", "title": "Where is Rails actually writing the Set-Cookie header for _session_id?", "body": "<p>Initial <code>GET</code> requests to my Rails 4 app will usually respond with a <code>Set-Cookie</code> Header for <code>_session_id</code>. Now I would like to ensure this header for some <code>POST</code> requests, but am not yet proficient enough with all the middlewares to pinpoint the exact location of where the header is being set.</p>\n\n<p>Could anybody help with that, and maybe the transfer into a custom controller?</p>\n\n<p>Meanwhile I will further investigate <code>ActionDispatch::Session::CookieStore</code>.</p>\n"}, {"tags": ["ruby", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1480498355, "post_id": 40884632, "comment_id": 68983442, "body": "You can&#39;t flatten it. <code>User</code> could override <code>name</code> and call <code>super</code> which would not exist any more."}, {"owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1480499140, "post_id": 40884632, "comment_id": 68983964, "body": "Easiest way <code>user.instance_methods</code>, will show you list the methods name."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1480502931, "post_id": 40884632, "comment_id": 68986668, "body": "@Stefan. It makes the problem harder, but not impossible. You could replace <code>super</code> with an alias, and keep the old <code>name</code> as a private method under an alias."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1480539116, "post_id": 40884632, "comment_id": 69009635, "body": "Should your method also include all methods from <code>Object</code>? If not, why not?"}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480619292, "post_id": 40884632, "comment_id": 69049136, "body": "@J&#246;rgWMittag: I don&#39;t mind that much. But for completeness, I&#39;ve used the answers code and made &quot;excluded parents&quot; a second argument in my implementation. That way one can pick and choose what parents to include."}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480619453, "post_id": 40884632, "comment_id": 69049209, "body": "@stefan: correct. And in case of inheritance a good point. For modules, in theory too, but since &quot;overriding the method from a module and calling super&quot; is often considered a codesmell, because hard to follow and reason about, you don&#39;t see it that often. AFAIKR."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1480637862, "post_id": 40884632, "comment_id": 69057472, "body": "@berkes: it&#39;s only a codesmell because it is so often so badly explained. Including a module makes it the superclass of the class and the old superclass becomes the superclass of the module. Bam. That&#39;s it. There&#39;s really nothing more to it. Everything else follows from there: method resolution, <code>super</code>, <code>ancestors</code>, it all makes sense, once you understand that simple concept."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1480502842, "last_edit_date": 1480502842, "creation_date": 1480498643, "answer_id": 40884786, "question_id": 40884632, "link": "https://stackoverflow.com/questions/40884632/is-it-possible-to-render-the-source-code-for-a-ruby-class-that-includes-any-in/40884786#40884786", "title": "Is it possible to render the &quot;source code&quot; for a Ruby class that includes any included models?", "body": "<p>You can use method_source <a href=\"https://github.com/banister/method_source\" rel=\"nofollow noreferrer\">gem</a>.</p>\n\n<pre><code>require 'method_source'\n\ndef flatten_source_code(klass)\n  excluded_parents = [Kernel, Object, BasicObject]\n  type = klass.instance_of?(Module) ? \"module\" : \"class\"\n  puts \"#{type} #{klass}\"\n\n  (klass.ancestors-excluded_parents).reverse.each do |ancestor|\n    ancestor.instance_methods(false).each do |method_name|\n      method = ancestor.instance_method(method_name)\n      script, line = method.source_location\n      if script then\n        puts\n        puts \"  # #{script} (line #{line})\"\n        puts method.source\n      else\n        puts\n        puts \"  #  def #{method_name}\"\n        puts \"  #  end\"\n      end\n    end\n  end\n  puts \"end\"\nend\n\nmodule Nameable\n  def name\n    \"John\"\n  end\nend\n\nclass User\n  include Nameable\n  def email\n    \"john@example.com\"\n  end\nend\n\n\nflatten_source_code(User)\n\nputs \n\nflatten_source_code(Nameable)\n\n#=&gt;\n# class User\n#\n#   # flatten_source_code.rb (line 27)\n#   def name\n#     \"John\"\n#   end\n#\n#   # flatten_source_code.rb (line 34)\n#   def email\n#     \"john@example.com\"\n#   end\n# end\n\n# module Nameable\n#\n#   # flatten_source_code.rb (line 27)\n#   def name\n#     \"John\"\n#   end\n# end\n</code></pre>\n\n<p>It will not work perfectly for more complex cases, but it does the job for your example.</p>\n\n<p>Just for fun, with :</p>\n\n<pre><code>module Nameable\n  def name\n    \"John\"\n  end\n\n  def email\n    \"included john@example.com\"\n  end\nend\n\nmodule AnotherModule\n  def email\n    \"prepended john@example.com\"\n  end\nend\n\nclass User\n  include Nameable\n  prepend AnotherModule\n  def email\n    \"john@example.com\"\n  end\nend\n\nflatten_source_code(User)\nputs \"u = User.new\"\nputs \"puts u.name\"\nputs \"puts u.email\"\n</code></pre>\n\n<p>Launching <code>ruby flatten_source_code.rb | ruby</code> returns :</p>\n\n<pre><code>John\nprepended john@example.com\n</code></pre>\n\n<p>So the displayed Ruby code is valid and respects inheritance order.\nIt will define the same method multiple times, though.</p>\n\n<p>You could keep an Hash of <code>|method_name,method_source|</code>. If a method overrides an old one and calls <code>super</code>, you could define the old method as  as a private <code>old_method_name_from_Module_blabla</code> and replace <code>super</code> accordingly.</p>\n"}], "owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "accepted_answer_id": 40884786, "answer_count": 1, "score": 1, "last_activity_date": 1480502842, "creation_date": 1480498206, "last_edit_date": 1480498336, "question_id": 40884632, "link": "https://stackoverflow.com/questions/40884632/is-it-possible-to-render-the-source-code-for-a-ruby-class-that-includes-any-in", "title": "Is it possible to render the &quot;source code&quot; for a Ruby class that includes any included models?", "body": "<p>Say, I have the following Ruby:</p>\n\n<pre><code>module Nameable\n  def name\n    \"John\"\n  end\nend\n\nclass User\n  include Nameable\n  def email\n    \"john@example.com\"\n  end\nend\n</code></pre>\n\n<p>Is there a way to display, print or review the \"expanded source code\" of the entire \"User\"? I'm not sure what the term would be, but with \"expanded source code\" I mean the code, in Ruby (so not an AST), that has the included parts included: </p>\n\n<pre><code>class User\n  def name\n    \"John\"\n  end\n\n  def email\n    \"john@example.com\"\n  end\nend\n</code></pre>\n\n<p>Bonuspoints when a solution can also display the code for inherited behaviour.</p>\n"}, {"tags": ["arrays", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480498796, "post_id": 40884219, "comment_id": 68983728, "body": "What kind of elements do you store in the array and how do you sort them?"}, {"owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480500152, "post_id": 40884219, "comment_id": 68984678, "body": "I&#39;m only putting floats in the array."}], "answers": [{"tags": [], "owner": {"reputation": 16646, "user_id": 1139099, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/AWxKH.png?s=128&g=1", "display_name": "harishr", "link": "https://stackoverflow.com/users/1139099/harishr"}, "is_accepted": false, "score": 0, "last_activity_date": 1480497435, "creation_date": 1480497435, "answer_id": 40884362, "question_id": 40884219, "link": "https://stackoverflow.com/questions/40884219/is-there-a-way-to-maintain-an-ordered-array-within-a-mongo-document/40884362#40884362", "title": "Is there a way to maintain an ordered array within a mongo document?", "body": "<p>you can use <code>$sort</code> in <code>$push</code></p>\n\n<pre><code>$push: {\n    innerElement: {\n        $each: [\n            {\n                \"new-entry\": ObjectId(\"xxxxxxx\"),\n                \"createdOn\": ISODate()\n            }\n        ],\n\n        $slice:-10,\n\n        $sort: {'createdOn': 1}\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10685, "user_id": 4079967, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/509151049/picture?type=large", "display_name": "Kevin Smith", "link": "https://stackoverflow.com/users/4079967/kevin-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1480526528, "creation_date": 1480526528, "answer_id": 40894462, "question_id": 40884219, "link": "https://stackoverflow.com/questions/40884219/is-there-a-way-to-maintain-an-ordered-array-within-a-mongo-document/40894462#40894462", "title": "Is there a way to maintain an ordered array within a mongo document?", "body": "<p>You can use <code>$position</code> operator when doing a <code>$push</code> in a <code>update(...)</code>:</p>\n\n<pre><code>&gt;db.students.save({ \"_id\" : 1, \"scores\" : [  50,  60,  70,  100 ] })\n\n&gt;db.students.update(\n   { _id: 1 },\n   {\n     $push: {\n        scores: {\n           $each: [ 20, 30 ],\n           $position: 2\n        }\n     }\n   }\n)\n\n&gt; db.students.find()\n{ \"_id\" : 1, \"scores\" : [  50,  60,  20,  30,  70,  100 ] }\n</code></pre>\n\n<p>See - <a href=\"https://docs.mongodb.com/manual/reference/operator/update/position/#up._S_position\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/reference/operator/update/position/#up._S_position</a></p>\n"}], "owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480526528, "creation_date": 1480497004, "question_id": 40884219, "link": "https://stackoverflow.com/questions/40884219/is-there-a-way-to-maintain-an-ordered-array-within-a-mongo-document", "title": "Is there a way to maintain an ordered array within a mongo document?", "body": "<p>I have a mongo document with a field of times:</p>\n\n<p><code>\n   field :times, type: Array, default: []`\n</code></p>\n\n<p>Currently, on update, I will take another time, find its place and overwrite the whole array on save. Is there a better way to do this? Is there a way to do this automatically through Mongo somehow?</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1480514373, "post_id": 40884166, "comment_id": 68994153, "body": "You&#39;ll have to play with the state of your resource for that, without it&#39;s code it&#39;s hard to tell how to tweak it..."}], "answers": [{"comments": [{"owner": {"reputation": 908, "user_id": 1354282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vyer0.jpg?s=128&g=1", "display_name": "danielcooperxyz", "link": "https://stackoverflow.com/users/1354282/danielcooperxyz"}, "edited": false, "score": 0, "creation_date": 1576768585, "post_id": 40893255, "comment_id": 105012095, "body": "This is no longer the suggested method in chef11.x/12.x"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1480522973, "creation_date": 1480522973, "answer_id": 40893255, "question_id": 40884166, "link": "https://stackoverflow.com/questions/40884166/how-to-make-a-chef-custom-resource-execute-on-every-chef-run/40893255#40893255", "title": "How to make a Chef custom resource execute on every chef run", "body": "<p>It does run every time by default, but unless you call <code>new_resource.updated_by_last_action(true)</code> or a similar API Chef shows \"up to date\" because the resource hasn't said it updated anything on the system.</p>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 1354282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vyer0.jpg?s=128&g=1", "display_name": "danielcooperxyz", "link": "https://stackoverflow.com/users/1354282/danielcooperxyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1579255754, "creation_date": 1579255754, "answer_id": 59785200, "question_id": 40884166, "link": "https://stackoverflow.com/questions/40884166/how-to-make-a-chef-custom-resource-execute-on-every-chef-run/59785200#59785200", "title": "How to make a Chef custom resource execute on every chef run", "body": "<p>The answer described <a href=\"https://gist.github.com/lamont-granquist/8cda474d6a31fadd3bb3b47a66b0ae78\" rel=\"nofollow noreferrer\">here</a> is the recommended way in Chef 11.x/12.x.</p>\n\n<p>Add the below in your custom resource file.</p>\n\n<pre><code>def whyrun_supported?\n  true\nend\n</code></pre>\n"}], "owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 40893255, "answer_count": 2, "score": 0, "last_activity_date": 1579255754, "creation_date": 1480496813, "question_id": 40884166, "link": "https://stackoverflow.com/questions/40884166/how-to-make-a-chef-custom-resource-execute-on-every-chef-run", "title": "How to make a Chef custom resource execute on every chef run", "body": "<p>I have a custom Chef resource that starts a background job. It has <code>:start</code>, <code>:stop</code> and <code>:reset</code> actions.</p>\n\n<p>There is another resource that notifies <code>:reset</code> to my custom one when it is updated.</p>\n\n<p>The main problem I have is that on each <code>chef-client</code> run the status of the resource returns:</p>\n\n<pre><code>custom_resource[resource-name] action start (up to date)\ncustom_resource[resource-name] action reset (up to date)\n</code></pre>\n\n<p>This behavior from Chef is the one I expect but not the one I need. My resource must be run on each <code>chef-client</code> run like the resource <code>execute</code> does. How can I achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1480496973, "post_id": 40884018, "comment_id": 68982518, "body": "how department is belongs_to department?"}, {"owner": {"reputation": 73, "user_id": 5679283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddac173c11f41ece058b98f10fcfe91?s=128&d=identicon&r=PG&f=1", "display_name": "John Elent", "link": "https://stackoverflow.com/users/5679283/john-elent"}, "reply_to_user": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1480497171, "post_id": 40884018, "comment_id": 68982632, "body": "Sorry it&#39;s a typo, it belongs to a company. Fixed it"}, {"owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1480497298, "post_id": 40884018, "comment_id": 68982689, "body": "You have 2 types Employees(Not sure this is required). why you need <code>company_id</code> in <code>Employee</code> table, it will be associated through &#39;Department`. Isn&#39;t it?"}, {"owner": {"reputation": 73, "user_id": 5679283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddac173c11f41ece058b98f10fcfe91?s=128&d=identicon&r=PG&f=1", "display_name": "John Elent", "link": "https://stackoverflow.com/users/5679283/john-elent"}, "reply_to_user": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1480497796, "post_id": 40884018, "comment_id": 68983024, "body": "In the first code sample you can notice that <code>department_id</code> is optional for <code>employee</code>, <code>employee</code> can belong straight to the <code>company</code> without <code>department</code> assigned. So it can&#39;t have only <code>department</code> association."}], "owner": {"reputation": 73, "user_id": 5679283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddac173c11f41ece058b98f10fcfe91?s=128&d=identicon&r=PG&f=1", "display_name": "John Elent", "link": "https://stackoverflow.com/users/5679283/john-elent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480567583, "creation_date": 1480496352, "last_edit_date": 1480497666, "question_id": 40884018, "link": "https://stackoverflow.com/questions/40884018/validating-that-associated-objects-have-the-same-parent", "title": "Validating that associated objects have the same parent", "body": "<p>I'm creating kind of triangular structure like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Company &lt; ActiveRecord::Base\n  has_many :departments\n  has_many :employees\nend\n\nclass Department &lt; ActiveRecord::Base\n  belongs_to :company\n  has_many :employees\nend\n\nclass Employee &lt; ActiveRecord::Base\n  belongs_to :company\n  belongs_to :department # optional, employee can belong only to a company\nend\n</code></pre>\n\n<p>Now, when creating Employee, what's the best way to make sure that it's possible to assign only departments that belong to the same company as the employee I'm creating?</p>\n\n<p><code>company_id</code> is automatically assigned from nested resource route and <code>department_id</code> is from params. I guess I could create a custom method that would validate this, but I was wondering if there's some kind of out of the box way (eg. using only associations) to do this.</p>\n\n<p>So for example I'd like to avoid something like this:</p>\n\n<pre><code>CompA ---- DepA\n \\\n  \\_ !EmpA! _\n             \\\nCompB ---- DepB ---- EmpC\n  \\___________________/\n   \\        \n    \\_______ EmpD\n</code></pre>\n"}, {"tags": ["ruby", "linux", "shell", "virtualbox", "vagrantfile"], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "is_accepted": false, "score": 0, "last_activity_date": 1480512549, "creation_date": 1480512549, "answer_id": 40889663, "question_id": 40883218, "link": "https://stackoverflow.com/questions/40883218/vagrant-ruby-code-for-manage-virtualbox-from-shell/40889663#40889663", "title": "Vagrant Ruby Code for manage Virtualbox from shell", "body": "<p>I have fix this issue reading to vagrant function calling sentence argument.</p>\n\n<p>Writing in ruby:</p>\n\n<pre><code>if !(ARGV[0] == \"up\")\n</code></pre>\n\n<p>then from shell script i exec <code>vagrant reload</code> and the provision i added to Vagrantfile.</p>\n"}], "owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480512549, "creation_date": 1480493307, "last_edit_date": 1480498910, "question_id": 40883218, "link": "https://stackoverflow.com/questions/40883218/vagrant-ruby-code-for-manage-virtualbox-from-shell", "title": "Vagrant Ruby Code for manage Virtualbox from shell", "body": "<p>Im creating a sh script in Debian shell to automate Vagrantfile creation based in different OS, to manage the storagecontroller for example (Sata Controller for Debian or IDE controller for CentOS). Trying to manage the disk size, i analyze the box default disk (vmdk), converting to vdi for Virtualbox native management. </p>\n\n<p>The problem is in use Ruby code for analyze the VM data.</p>\n\n<pre><code>storagecontroller = %x[VBoxManage showvminfo $machinename'-'master --machinereadable | grep storagecontrollername0 | cut -d '=' -f 2 | sed 's/\\\"//g']\nstoragecontrollertype = %x[VBoxManage showvminfo $machinename'-'master --machinereadable | grep storagecontrollertype0 | cut -d '=' -f 2 | sed 's/\\\"//g']\nstoragecontrollerportcount = %x[VBoxManage showvminfo $machinename'-'master --machinereadable | grep storagecontrollerportcount0 | cut -d '=' -f 2 | sed 's/\\\"//g']\n</code></pre>\n\n<p>This code works when the machine is already created and i use:</p>\n\n<pre><code>vagrant reload\n</code></pre>\n\n<p>but when i try to do </p>\n\n<pre><code>vagrant up\n</code></pre>\n\n<p>the problem is that machine doesnt exists in machines directory. I get an error in shell.\nError:</p>\n\n<pre><code>Message: Errno::ENOENT: No such file or directory @ dir_chdir - /root/VirtualBox VMs/projectname/machinename-master\n</code></pre>\n\n<p>The thing is, i want to analize the machine disk, but this Ruby code exec before machine creation, i need a way to do this after the machine is created but when vagrant up sentence is called in shell.</p>\n\n<p>This is a part of my generated code.</p>\n\n<pre><code>config.vm.define \"machinename\" do |machinename|\n       machinename.vm.box =\"debian/contrib-jessie64\"\n       machinename.vm.hostname = \"machinename\"\n       machinename.vm.provider \"virtualbox\" do |virtualbox|\n       virtualbox.memory = \"2048\"\n       virtualbox.cpus = \"8\"\n       virtualbox.name = \"machinename-master\"\n       virtualbox.customize [\n         \"modifyvm\", :id, \"--groups\", \"/projectname\"\n       ]\n       storagecontroller = %x[VBoxManage showvminfo machinename'-'master --machinereadable | grep storagecontrollername0 | cut -d '=' -f 2 | sed 's/\\\"//g']\n       path = File.join [ENV[\"HOME\"], 'VirtualBox VMs/','projectname','machinename-master']\n       Dir.chdir(\"#{path}\")\n       storagecontroller = %x[VBoxManage showvminfo machinename'-'master --machinereadable | grep storagecontrollername0 | cut -d '=' -f 2 | sed 's/\\\"//g']\n       storagecontroller.delete!(\"\\n\")\n       storagecontrollertype = %x[VBoxManage showvminfo machinename'-'master --machinereadable | grep storagecontrollertype0 | cut -d '=' -f 2 | sed 's/\\\"//g']\n       storagecontrollertype.delete!(\"\\n\")\n       storagecontrollerportcount = %x[VBoxManage showvminfo machinename'-'master --machinereadable | grep storagecontrollerportcount0 | cut -d '=' -f 2 | sed 's/\\\"//g']\n       storagecontrollerportcount.delete!(\"\\n\")\n       require \"find\"\n       file=Dir['*.vmdk'].first\n       if !File.exist?('/root/VirtualBox VMs/projectname/machinename-master/machinename-box.vdi')\n                            virtualbox.customize [\n                                    \"storagectl\", :id,\n                                    \"--name\", \"#{storagecontroller}\",\n                                    \"--controller\", \"#{storagecontrollertype}\",\n                                    \"--portcount\", \"#{storagecontrollerportcount}\",\n                                    \"--hostiocache\", \"on\"\n                            ]\n                            virtualbox.customize [\n                                    \"clonehd\", \"#{ENV[\"HOME\"]}/VirtualBox VMs/projectname/#{virtualbox.name}/box-disk1.vmdk\",\n                                        \"#{ENV[\"HOME\"]}/VirtualBox VMs/projectname/#{virtualbox.name}/ojocuidao-box.vdi\",\n                                    \"--format\", \"VDI\"\n                            ]\n                            virtualbox.customize [\n                                    \"modifyhd\", \"#{ENV[\"HOME\"]}/VirtualBox VMs/projectname/#{virtualbox.name}/machinename-box.vdi\",\n                                    \"--resize\", 55 * 1024\n                            ]\n                            virtualbox.customize [\n                                    \"storageattach\", :id,\n                                    \"--storagectl\", \"#{storagecontroller}\",\n                                    \"--port\", \"0\",\n                                    \"--device\", \"0\",\n                                    \"--type\", \"hdd\",\n                                    \"--nonrotational\", \"on\",\n                                    \"--medium\", \"#{ENV[\"HOME\"]}/VirtualBox VMs/projectname/#{virtualbox.name}/machinename-box.vdi\"\n                            ]\n</code></pre>\n\n<p>The ruby sentences for calling shell are executing before the machine is created, so i need to locate this sentences and vagrantfile disk customize sentences right after the box is downloaded and the VM is created.</p>\n\n<p>Someone can help me?</p>\n"}, {"tags": ["sql-server", "ruby", "linux", "freetds", "tiny-tds"], "comments": [{"owner": {"reputation": 66, "user_id": 4760168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0074346e354384c53f84d9e1104f0bb2?s=128&d=identicon&r=PG&f=1", "display_name": "andrea-lam-MSFT", "link": "https://stackoverflow.com/users/4760168/andrea-lam-msft"}, "edited": false, "score": 0, "creation_date": 1480546084, "post_id": 40883148, "comment_id": 69013101, "body": "Does each machine have it&#39;s own SQL Server running or are both machines connecting to SQL Server elsewhere?"}, {"owner": {"reputation": 2048, "user_id": 2310411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JrQvD.jpg?s=128&g=1", "display_name": "Vignesh Paramasivam", "link": "https://stackoverflow.com/users/2310411/vignesh-paramasivam"}, "reply_to_user": {"reputation": 66, "user_id": 4760168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0074346e354384c53f84d9e1104f0bb2?s=128&d=identicon&r=PG&f=1", "display_name": "andrea-lam-MSFT", "link": "https://stackoverflow.com/users/4760168/andrea-lam-msft"}, "edited": false, "score": 0, "creation_date": 1481628152, "post_id": 40883148, "comment_id": 69443404, "body": "I was able to fix it changing :dataserver to :host"}], "answers": [{"tags": [], "owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "is_accepted": false, "score": 2, "last_activity_date": 1514549749, "creation_date": 1514549749, "answer_id": 48022489, "question_id": 40883148, "link": "https://stackoverflow.com/questions/40883148/tinytds-adaptive-server-is-unavailable-or-does-not-exist/48022489#48022489", "title": "TinyTds - Adaptive server is unavailable or does not exist", "body": "<p>My problem was resolved after I enabled port 1433 on all connections</p>\n\n<p><a href=\"https://i.stack.imgur.com/URJVF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/URJVF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2048, "user_id": 2310411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JrQvD.jpg?s=128&g=1", "display_name": "Vignesh Paramasivam", "link": "https://stackoverflow.com/users/2310411/vignesh-paramasivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514549749, "creation_date": 1480493023, "last_edit_date": 1480493403, "question_id": 40883148, "link": "https://stackoverflow.com/questions/40883148/tinytds-adaptive-server-is-unavailable-or-does-not-exist", "title": "TinyTds - Adaptive server is unavailable or does not exist", "body": "<p><strong>Machine 1:</strong> </p>\n\n<pre><code>&gt;tsql -C\nCompile-time settings (established with the \"configure\" script)\n                            Version: freetds v0.91.90\n             freetds.conf directory: /etc\n     MS db-lib source compatibility: no\n        Sybase binary compatibility: no\n                      Thread safety: yes\n                      iconv library: yes\n                        TDS version: 4.2\n                              iODBC: no\n                           unixodbc: yes\n              SSPI \"trusted\" logins: no\n                           Kerberos: no\n</code></pre>\n\n<p>I have the freeTDS installed and able to make a connection to the mssql,</p>\n\n<pre><code>&gt; TDSVER=4.2 tsql -S xx.xx.xxx.xxx -U xxxx -P xxxx -p 1433\nlocale is \"en_US.UTF-8\"\nlocale charset is \"UTF-8\"\nusing default charset \"UTF-8\"\n1&gt;\n</code></pre>\n\n<p>So, when i try connecting from TinyTds, it is throwing the below error,</p>\n\n<pre><code>Adaptive server is unavailable or does not exist\n</code></pre>\n\n<p><strong>Machine 2:</strong></p>\n\n<p>The configuration is same as in the machine 1, and from this machine, it is connecting to the mssql with TinyTds</p>\n\n<pre><code>&gt;tsql -C\n    Compile-time settings (established with the \"configure\" script)\n                                Version: freetds v0.91.90\n                 freetds.conf directory: /etc\n         MS db-lib source compatibility: no\n            Sybase binary compatibility: no\n                          Thread safety: yes\n                          iconv library: yes\n                            TDS version: 4.2\n                                  iODBC: no\n                               unixodbc: yes\n                  SSPI \"trusted\" logins: no\n                               Kerberos: no\n</code></pre>\n\n<p>I have the freeTDS installed and able to make a connection to the mssql,</p>\n\n<pre><code>&gt; TDSVER=4.2 tsql -S xx.xx.xxx.xxx -U xxxx -P xxxx -p 1433\nlocale is \"en_US.UTF-8\"\nlocale charset is \"UTF-8\"\nusing default charset \"UTF-8\"\n1&gt;\n\nAble to connect to the server using TinyTds\n</code></pre>\n\n<p>I am not sure why this is happening or where to check and i don't think it is a firewall issue as i am able to connect from the terminal, also i have verified its credentials etc., all are same  except that the connection is unsuccessful. Any help much appreciated!</p>\n\n<p>Note: The scenario is,</p>\n\n<p>I am running a test through jenkins, where it is running the ruby process using the slave 'machine1', where it is not able to connect to the sqlserver(having freetds configured) throwing Adaptive server unavailable or does not exist error.</p>\n\n<p>when i modify the slave to 'machine2', it is establishing the connection, despite having the same freetds configuration as machine1</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "psql"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1480493119, "last_edit_date": 1480493119, "creation_date": 1480492799, "answer_id": 40883090, "question_id": 40882958, "link": "https://stackoverflow.com/questions/40882958/search-in-one-query-when-params-are-nil/40883090#40883090", "title": "Search in one query when params are nil?", "body": "<p>The problem is, as I am sure you understand, that if e.g. <code>deliverer_ids</code> is missing, you are requiring that <code>deliverer_id</code> is one of... no IDs. No rows will match that, even if you specify valid IDs in <code>shopper_ids</code>.</p>\n\n<p>Untested but I'm thinking this should work, if you change <code>deliverer_ids</code> to <code>deliverer_id</code>:</p>\n\n<pre><code>conditions = params\n    .slice(:deliverer_id, :shopper_id)\n    .map { |x| x.map(&amp;:to_i) }\n@orders = @orders.includes(:deliverer, :shopper).where(conditions)\n</code></pre>\n\n<p>If you don't rename them, then you have a bit more of a hassle.</p>\n\n<p>The idea is not to pass the conditions you don't have. ActiveSupport's <code>slice</code> allows you to just keep parameters you want, then deliver them directly to <code>where</code> as conditions.</p>\n\n<p>EDIT: Easier, and no need for renaming: just use <code>compact</code>:</p>\n\n<pre><code>deliverer_ids = params[:deliverer_ids]&amp;.map(&amp;:to_i)\nshopper_ids = params[:shopper_ids]&amp;.map(:to_i)\nconditions = {\n  deliverer_id: deliverer_ids,\n  shopper_id: shopper_ids\n}.compact\n@orders = @orders.includes(:deliverer, :shopper).where(conditions)\n</code></pre>\n\n<p>Note the removal of the damaging <code>|| []</code> bit. In fact, I didn't test, but it may even work with your original code, as long as you drop that bit - ActiveRecord might be smart enough to not include any restrictions if the restriction is <code>nil</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7067399, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e5d83393f757f9e27be1f2cd710a055?s=128&d=identicon&r=PG&f=1", "display_name": "user7067399", "link": "https://stackoverflow.com/users/7067399/user7067399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40883090, "answer_count": 1, "score": 0, "last_activity_date": 1480494605, "creation_date": 1480492303, "last_edit_date": 1480494605, "question_id": 40882958, "link": "https://stackoverflow.com/questions/40882958/search-in-one-query-when-params-are-nil", "title": "Search in one query when params are nil?", "body": "<p>I wish to have only one query, but my problem is that when some params are nil, it will return no results, while I want it to return all. See code:</p>\n\n<pre><code>deliverer_ids = params[:deliverer_ids]&amp;.map(&amp;:to_i) || []\nshopper_ids   = params[:shopper_ids]&amp;.map(:to_i) || []\n@orders       = @orders.includes(:deliverer, :shopper).where(deliverer_id: deliverer_ids, shopper_id: shopper_ids)\n</code></pre>\n\n<p>will return nothing and what I want to achieve is to get <code>Order.all</code> if params <code>deliverer_ids</code> and <code>shopper_ids</code> are nil.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "is_accepted": false, "score": 5, "last_activity_date": 1480492446, "last_edit_date": 1495541629, "creation_date": 1480492446, "answer_id": 40882990, "question_id": 40882943, "link": "https://stackoverflow.com/questions/40882943/ruby-csv-generate-options-quote-char-does-not-work/40882990#40882990", "title": "Ruby | CSV.generate options &quot;quote_char&quot; does not work", "body": "<p>Use the <code>force_quotes</code> option:</p>\n\n<pre><code>puts CSV.generate(quote_char: '\"', force_quotes: true) { |csv| csv &lt;&lt; ['A','B','C'] }\n\"A\",\"B\",\"C\"\n</code></pre>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/5832131\">https://stackoverflow.com/a/5832131</a></p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 5496638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s1cqM.png?s=128&g=1", "display_name": "Yuma Inaura", "link": "https://stackoverflow.com/users/5496638/yuma-inaura"}, "edited": false, "score": 0, "creation_date": 1480493003, "post_id": 40883032, "comment_id": 68980317, "body": "Thank you for your great advice! I understand now."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 5, "last_activity_date": 1480492593, "creation_date": 1480492593, "answer_id": 40883032, "question_id": 40882943, "link": "https://stackoverflow.com/questions/40882943/ruby-csv-generate-options-quote-char-does-not-work/40883032#40883032", "title": "Ruby | CSV.generate options &quot;quote_char&quot; does not work", "body": "<p>First, your specification of <code>quote_char</code> is redundant, because this is the default.</p>\n\n<p><code>quote_char</code> does <strong>not</strong> say that quotes must be used, but indicates which quotes to use if something needs to be quoted. In your example, no quotes are needed, so you don't see any affect of the quote character.</p>\n\n<p>If you want to have quotes always, you should set <code>force_quotes: true</code>.</p>\n\n<p>See for instance <a href=\"https://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html\" rel=\"noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 99, "user_id": 5496638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s1cqM.png?s=128&g=1", "display_name": "Yuma Inaura", "link": "https://stackoverflow.com/users/5496638/yuma-inaura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1480499593, "creation_date": 1480492212, "last_edit_date": 1480499593, "question_id": 40882943, "link": "https://stackoverflow.com/questions/40882943/ruby-csv-generate-options-quote-char-does-not-work", "title": "Ruby | CSV.generate options &quot;quote_char&quot; does not work", "body": "<p>By this code.</p>\n\n<pre><code>require 'csv'\nCSV.generate('', quote_char: '\"') { |csv| csv &lt;&lt; ['A','B','C'] }\n</code></pre>\n\n<p>It returns this.</p>\n\n<pre><code>A,B,C\n</code></pre>\n\n<p>But I expect this result.</p>\n\n<pre><code>\"A\",\"B\",\"C\"\n</code></pre>\n\n<h1>Enviroment</h1>\n\n<ul>\n<li>Ruby 2.3.1</li>\n</ul>\n"}, {"tags": ["ruby", "macos", "rbenv"], "comments": [{"owner": {"reputation": 31, "user_id": 6272943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b5cc59c3427b9fa8e6d43a4b65807f8?s=128&d=identicon&r=PG&f=1", "display_name": "tinskip", "link": "https://stackoverflow.com/users/6272943/tinskip"}, "edited": false, "score": 0, "creation_date": 1480492125, "post_id": 40882880, "comment_id": 68979902, "body": "Sorry for the crappy formatting of the command lines above. stackoverflow ate my newlines."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1480492183, "post_id": 40882880, "comment_id": 68979925, "body": "Relevant: <a href=\"http://stackoverflow.com/questions/32659348/operation-not-permitted-when-on-root-el-capitan-rootless-disabled\">Operation Not Permitted when on root El capitan (rootless disabled)</a>"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1480492236, "post_id": 40882880, "comment_id": 68979950, "body": "Also, why would you mix <code>rvm</code> and <code>rbenv</code>? Pick one. Besides, Homebrew is required for <code>rvm</code> - but don&#39;t install <code>rvm</code> from Homebrew! Use the method their webpage tells you."}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1480494663, "last_edit_date": 1480494663, "creation_date": 1480493635, "answer_id": 40883297, "question_id": 40882880, "link": "https://stackoverflow.com/questions/40882880/wrong-ruby-on-mac-os-x-10-12-sierra/40883297#40883297", "title": "Wrong Ruby on Mac OS X 10.12 Sierra", "body": "<p>The problem is not your system Ruby, the problem is you probably didn't follow the rbenv installation instructions completely correctly.</p>\n\n<p>The reason the system Ruby is located before your rbenv Ruby, is because your <code>PATH</code> has not been properly updated.</p>\n\n<p>This explains why that is important:<br>\n<a href=\"https://github.com/rbenv/rbenv#understanding-path\" rel=\"nofollow noreferrer\">https://github.com/rbenv/rbenv#understanding-path</a></p>\n\n<p>To set up your <code>PATH</code> correctly you can read and complete steps 2-4 here:<br>\n<a href=\"https://github.com/rbenv/rbenv#basic-github-checkout\" rel=\"nofollow noreferrer\">https://github.com/rbenv/rbenv#basic-github-checkout</a></p>\n"}], "owner": {"reputation": 31, "user_id": 6272943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b5cc59c3427b9fa8e6d43a4b65807f8?s=128&d=identicon&r=PG&f=1", "display_name": "tinskip", "link": "https://stackoverflow.com/users/6272943/tinskip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1673, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1480494663, "creation_date": 1480491902, "last_edit_date": 1480493693, "question_id": 40882880, "link": "https://stackoverflow.com/questions/40882880/wrong-ruby-on-mac-os-x-10-12-sierra", "title": "Wrong Ruby on Mac OS X 10.12 Sierra", "body": "<p>I have gone about the recommended way of installing a new version of Ruby on Mac OS X: Homebrew, and rvm. I ran rbenv to install Ruby 2.3.3, and selected it as the preferred version by using \"rbenv global 2.3.3\". The problem I am having is that there is currently a 2.0.0 version installed at /usr/bin/ruby, and for some crazy reason I am unable to remove it.</p>\n\n<pre><code>$ rbenv global\n2.3.3\n\n$ which ruby\n/usr/bin/ruby\n\n$ ruby -v\nruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin16]\n\n$ ~/.rbenv/versions/2.3.3/bin/ruby -v\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin16]\n\nsudo rm -rf /usr/bin/ruby\nPassword:\nrm: /usr/bin/ruby: Operation not permitted\n</code></pre>\n\n<p>Argh!! Please help.</p>\n"}, {"tags": ["ruby", "firefox", "selenium-webdriver", "cucumber"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1480491612, "post_id": 40882515, "comment_id": 68979652, "body": "Downgrade to FF 45. See here <a href=\"https://github.com/seleniumhq/selenium/issues/835\" rel=\"nofollow noreferrer\">github.com/seleniumhq/selenium/issues/835</a>"}, {"owner": {"reputation": 464, "user_id": 4778146, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m8Ktr.jpg?s=128&g=1", "display_name": "Sudeepthi", "link": "https://stackoverflow.com/users/4778146/sudeepthi"}, "edited": false, "score": 0, "creation_date": 1480496695, "post_id": 40882515, "comment_id": 68982374, "body": "I don&#39;t know whether it might help you but it did help me. I added the path of GeckoDriver to system paths and it resolved my problem. I&#39;m using selenium with C# so not sure with cucumber."}], "owner": {"reputation": 21, "user_id": 5060759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pbQZn3ozh0I/AAAAAAAAAAI/AAAAAAAAAH0/MewB0tzU8tc/photo.jpg?sz=128", "display_name": "Adnan Shaikh", "link": "https://stackoverflow.com/users/5060759/adnan-shaikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480490581, "creation_date": 1480490581, "question_id": 40882515, "link": "https://stackoverflow.com/questions/40882515/unable-to-obtain-stable-firefox-connection-in-60-seconds-127-0-0-17055-when", "title": "Unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055). When I am executing cucumber file", "body": "<p>I am using Firefox version 50.0.1 and Selenium-Webdriver gem version 3.0.3. I am able to create Firefox instance but not able to proceed for further operations using script Getting unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055) error.</p>\n\n<p>Can someone help me ?</p>\n"}, {"tags": ["ruby", "io", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "edited": false, "score": 0, "creation_date": 1480488710, "post_id": 40881856, "comment_id": 68978300, "body": "I try to stub user input with RSpec tests. And $stdin assigning doesn&#39;t work for it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "edited": false, "score": 0, "creation_date": 1480489352, "post_id": 40881856, "comment_id": 68978591, "body": "If you have control over the code that&#39;s doing the reading try and make a parameter for the input source so you can tweak it like this for testing purposes."}, {"owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "edited": false, "score": 0, "creation_date": 1480492324, "post_id": 40881856, "comment_id": 68979998, "body": "I use <a href=\"https://github.com/JEG2/highline\" rel=\"nofollow noreferrer\">HighLine gem</a> for UI. It looks to be possible to do <a href=\"http://www.rubydoc.info/github/JEG2/highline/master/Kernel\" rel=\"nofollow noreferrer\">something</a> like what you suggest. But I have not enaugh skills for that."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "edited": false, "score": 0, "creation_date": 1480537400, "post_id": 40881856, "comment_id": 69008670, "body": "This is how you do it in a general sense. If you have a different question with new requirements, it&#39;s best to open up a new question to address those. Keep things focused."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1480487981, "creation_date": 1480487981, "answer_id": 40881856, "question_id": 40881835, "link": "https://stackoverflow.com/questions/40881835/ruby-reopen-stdin-without-file/40881856#40881856", "title": "Ruby reopen STDIN without file", "body": "<p>Why not just reassign the handle, like:</p>\n\n<pre><code>$stdin = StringIO.new('text')\n</code></pre>\n\n<p>Then you can work with that as you would the regular <code>$stdin</code> handle:</p>\n\n<pre><code>gets\n# =&gt; \"text\"\n</code></pre>\n\n<p>It's true that the <a href=\"https://ruby-doc.org/core-2.3.1/IO.html#method-i-reopen\" rel=\"nofollow noreferrer\">documentation on <code>reopen</code> implies you can do this</a>, but for whatever reason StringIO is not derived from IO so it doesn't count as a filehandle and can't be used by that.</p>\n"}], "owner": {"reputation": 135, "user_id": 2354951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3bb88ecb05e50cebce7cc132f70d98df?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2354951/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480487981, "creation_date": 1480487905, "question_id": 40881835, "link": "https://stackoverflow.com/questions/40881835/ruby-reopen-stdin-without-file", "title": "Ruby reopen STDIN without file", "body": "<p>STDIN can be reopened with File:</p>\n\n<pre><code>STDIN.reopen(File.open('filename'))\n</code></pre>\n\n<p>But it returns error with StringIO:</p>\n\n<pre><code>STDIN.reopen(StringIO.new('text'))\nTypeError:\n       no implicit conversion of StringIO into String\n</code></pre>\n\n<p>Should I use files for reopen always or it can be done with strings in some way?</p>\n"}, {"tags": ["ruby", "mechanize", "scrape"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1480489659, "post_id": 40880921, "comment_id": 68978727, "body": "it&#39;d be helpful to know what&#39;s not working with this."}, {"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1480522960, "post_id": 40880921, "comment_id": 69000416, "body": "Thanks Max, I&#39;ve added additional info to the original post.  Hopefully that clears things up."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1480561377, "post_id": 40900302, "comment_id": 69017331, "body": "THANK YOU SO MUCH FOR YOUR INPUT......I&#39;m getting very close to making this work, however I still have one last hurdle.  It appears that my results are coming back as multiple arrays of hashes vs a single array of hashes.  I added detail to the original post in hopes you may know how to correct this.  Thanks again for your help."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "reply_to_user": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1480568692, "post_id": 40900302, "comment_id": 69019130, "body": "This is really a separate question. I don&#39;t think I should try to answer it here."}, {"owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1480620916, "post_id": 40900302, "comment_id": 69050049, "body": "I swear I had it working (at least going to next page) yesterday, but running it today, it&#39;s not working again.  Can you check/ run the updated code in the original post and let me know what I&#39;m missing.  THanks again for your help."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "reply_to_user": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "edited": false, "score": 0, "creation_date": 1480632179, "post_id": 40900302, "comment_id": 69055698, "body": "Do it the way I showed you with do_something_with page a separate method."}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 1, "last_activity_date": 1480549560, "creation_date": 1480549560, "answer_id": 40900302, "question_id": 40880921, "link": "https://stackoverflow.com/questions/40880921/use-ruby-mechanize-to-scrape-all-successive-pages/40900302#40900302", "title": "Use Ruby Mechanize to scrape all successive pages", "body": "<p>Whenever you see a <code>[rel=next]</code>, that's the thing you want to follow:</p>\n\n<pre><code>page = agent.get url\ndo_something_with page\nwhile link = page.at('[rel=next]')\n  page = agent.get link[:href]\n  do_something_with page\nend\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7153064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91e3943cbb0697d5012f6483d990240c?s=128&d=identicon&r=PG&f=1", "display_name": "pjw23", "link": "https://stackoverflow.com/users/7153064/pjw23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480621371, "creation_date": 1480483570, "last_edit_date": 1495541629, "question_id": 40880921, "link": "https://stackoverflow.com/questions/40880921/use-ruby-mechanize-to-scrape-all-successive-pages", "title": "Use Ruby Mechanize to scrape all successive pages", "body": "<p>I'm looking for assistance on the best way to loop through successive pages on a website while scraping relevant data off of each page.</p>\n\n<p>For example, I want to go to a specific site (craigslist in below example), scrape the data from the first page, go to the next page, scrape all relevant data, etc, until the very last page.</p>\n\n<p>In my script I'm using a <code>while</code> loop since it seemed to make the most sense to me.  However, it doesn't appear to be working properly and is only scraping data from the first page. </p>\n\n<p>Can someone familiar with Ruby/Mechanize point me in the right direction on what the best way to accomplish this task is.  I've spent countless hours trying to figure this out and feel like I'm missing something very basic. </p>\n\n<p>Thanks in advance for your help.</p>\n\n<pre><code>require 'mechanize'\nrequire 'pry'\n\n# initialze\nagent = Mechanize.new { |agent| agent.user_agent_alias = 'Mac Safari'}\nurl = \"http://charlotte.craigslist.org/search/rea\"\npage = agent.get(url)\n\n# Create an empty array to dump contents into\nproperty_results = []\n\n# Scrape all successive pages from craigslist\nwhile page.link_with(:dom_class =&gt; \"button next\") != nil\n    next_link = page.link_with(:dom_class =&gt; \"button next\")  \n    page.css('ul.rows').map do |d|  \n        property_hash = { title: d.at_css('a.result-title.hdrlnk').text }    \n        property_results.push(property_hash)    \n    end  \n    page = next_link.click\nend \n</code></pre>\n\n<hr>\n\n<p>UPDATE:\nI found this, but still no dice:</p>\n\n<h2><a href=\"https://stackoverflow.com/questions/6689345/ruby-mechanize-follow-a-link\">Ruby Mechanize: Follow a Link</a></h2>\n\n<p>@pguardiario </p>\n\n<pre><code>require 'mechanize'\nrequire 'httparty'\nrequire 'pry'\n\n# initialze\nagent = Mechanize.new \nurl = \"http://charlotte.craigslist.org/search/rea\"\npage = agent.get(url)\n\n#create Empty Array\nproperty_results = []\n\n# Scrape all successive pages from craigslist\nwhile link = page.at('[rel=next]')\n  page.css('ul.rows').map do |d|  \n    property_hash = { title: d.at_css('a.result-title.hdrlnk').text }    \n    property_results.push(property_hash)\n  end\n    link = page.at('[rel=next]')\n    page = agent.get link[:href]\n end\npry(binding)\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1480475172, "post_id": 40879528, "comment_id": 68973879, "body": "give us an example, with desired output please:)"}, {"owner": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480475648, "post_id": 40879528, "comment_id": 68974003, "body": "@sagarpandya82 done"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1480492652, "post_id": 40879528, "comment_id": 68980134, "body": "Benchmark code here if anyone&#39;s interested: <a href=\"https://repl.it/EbZ5/1\" rel=\"nofollow noreferrer\">repl.it/EbZ5/1</a> There are so many variations that I wasn&#39;t sure which strings-keyword combos to use to make a fair test. Also you&#39;ll have to run it on your machine since repl.it won&#39;t load &#39;fruity&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "edited": false, "score": 0, "creation_date": 1480488713, "post_id": 40879841, "comment_id": 68978303, "body": "I have switched the accepted answer, because the other answer is more efficient."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "edited": false, "score": 0, "creation_date": 1480488822, "post_id": 40879841, "comment_id": 68978345, "body": "That&#39;s fine. I upvoted him too. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480489066, "post_id": 40879841, "comment_id": 68978451, "body": "It&#39;s not necessarily more efficient. That&#39;s an empirical question. For  one, lazy enumerators have a rep for being slower than their non-lazy counterparts."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480489246, "post_id": 40879841, "comment_id": 68978543, "body": "@CarySwoveland: They <i>are</i> slower (currently), assuming the amount of processing is the same. But yours breaks early, which is an optimisation mine doesn&#39;t have. So yours should take much less time for long keyword lists, and data where most rows have two or more keywords. Mine will be faster where most data does, indeed, have only one or no keywords, and small keyword lists."}, {"owner": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "edited": false, "score": 0, "creation_date": 1480489681, "post_id": 40879841, "comment_id": 68978738, "body": "In my case the strings are long have a lot of keywords, and i have 22 keywords, so this optimization is an important addition ^_^."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 3, "last_activity_date": 1480477081, "creation_date": 1480477081, "answer_id": 40879841, "question_id": 40879528, "link": "https://stackoverflow.com/questions/40879528/ruby-how-to-find-if-a-keyword-from-a-list-of-keywords-was-the-only-one-to-appea/40879841#40879841", "title": "Ruby, how to find if a keyword from a list of keywords was the only one to appear in a string", "body": "<pre><code>def only_one(str, keywords)\n  result = nil\n  count = keywords.count { |k|\n    result = k if str.include?(k)\n  }\n  count == 1 ? result : false\nend\n</code></pre>\n\n<p><code>Enumerable#count</code> will count how many times its block is truthy. The last expression of the block is a conditional assignment; it will produce <code>nil</code> if it is falsy, and the new value of <code>result</code> if truthy. <code>result</code> will always contain a truthy value here because all keywords are strings, and all strings are truthy. At the end, we just check whether there was a single </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1480491038, "last_edit_date": 1480491038, "creation_date": 1480482967, "answer_id": 40880815, "question_id": 40879528, "link": "https://stackoverflow.com/questions/40879528/ruby-how-to-find-if-a-keyword-from-a-list-of-keywords-was-the-only-one-to-appea/40880815#40880815", "title": "Ruby, how to find if a keyword from a list of keywords was the only one to appear in a string", "body": "<p>I have interpreted the question literally, that you are checking to see if each <code>keywords</code> element is a substring of the string, not a word in the string (e.g., \"sandy\" contains the keyword \"and\"). Moreover, I've assumed there are no upper-case letters in the string or any keyword (following, possibly, some pre-processing). </p>\n\n<pre><code>def just_one_match?(str, keywords)\n  arr = keywords.lazy.select { |keyword| str.include?(keyword) }.first(2)\n  (arr.size==1) ? arr.first : false\nend\n\nkeywords = ['cat', 'dog', 'mouse']\n\njust_one_match? 'dog pig elephant', keywords\n  #=&gt; \"dog\" \njust_one_match? 'dog chased cat', keywords\n  #=&gt; false \njust_one_match? 'cat dog mouse', keywords\n  #=&gt; false \njust_one_match? 'mouse ran away, mouse mouse mouse', keywords\n  #=&gt; \"mouse\" \njust_one_match? 'it was a three-legged pig?', keywords\n  #=&gt; false \n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.0/Enumerator/Lazy.html#method-i-lazy\" rel=\"nofollow noreferrer\">Enumerator::Lazy#lazy</a> makes the enumerator <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-select\" rel=\"nofollow noreferrer\">Array#select</a> lazy. That, combined with <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-first\" rel=\"nofollow noreferrer\">Array#first</a>, causes the enumeration to terminate as soon as two matches are found. (In my third example above the enumeration stops after <code>cat</code> and <code>dog</code> have been found.) If two matches are not found either an empty array or an array of one element is returned.</p>\n\n<p>Another way that terminates the enumeration when two matches have been found is to use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-one-3F\" rel=\"nofollow noreferrer\">Enumerable#one?</a> and <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">Enumerable#find</a>:</p>\n\n<pre><code>def just_one_match?(str, keywords)\n  return false unless keywords.one? { |keyword| str.include?(keyword) }\n  keywords.find { |keyword| str.include?(keyword) }\nend\n</code></pre>\n\n<p>Also (possibly the fastest),</p>\n\n<pre><code>def just_one_match?(str, keywords)\n  found = false\n  arr = keywords.select do |keyword|\n    next unless str.include?(keyword)\n    return false if found\n    found = true\n  end\n  found ? arr.first : false\nend\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1480539134, "accepted_answer_id": 40880815, "answer_count": 2, "score": -3, "last_activity_date": 1480491038, "creation_date": 1480475008, "last_edit_date": 1480476129, "question_id": 40879528, "link": "https://stackoverflow.com/questions/40879528/ruby-how-to-find-if-a-keyword-from-a-list-of-keywords-was-the-only-one-to-appea", "closed_reason": "Needs details or clarity", "title": "Ruby, how to find if a keyword from a list of keywords was the only one to appear in a string", "body": "<p>I have list of key words, and i have a big string,. What i am interested in finding out is which keyword if any was the only one to appear in this string, so if more than one keyword from the list was in the string, then it gives nothing but if only 1 keyword from the list appeared i want to know that (how many times this single keyword was repeated doesn't matter). I am going to do this for multiple big strings.   </p>\n\n<p>Example as requested :</p>\n\n<pre><code>keywords=['cat','dog','mouse']\n\nstring1 = 'cat ate dog food'\nstring2 = 'dog chased cat'\nstring3 = 'my cat is chasing a mouse'\nstring4 = 'mouse ran away, mouse mouse mouse'\n\noutput for string1: false\noutput for string2: false\noutput for string3: false\noutput for string4: 'mouse'\n</code></pre>\n"}, {"tags": ["ruby", "inject", "enumerable"], "comments": [{"owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "edited": false, "score": 0, "creation_date": 1480475081, "post_id": 40879373, "comment_id": 68973850, "body": "What do you mean by initializing the object being injected ?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "edited": false, "score": 0, "creation_date": 1480475165, "post_id": 40879373, "comment_id": 68973876, "body": "I mean, how does Ruby proceeds the initialization. You explained it in a certain sense in your answer below."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1480475202, "post_id": 40879373, "comment_id": 68973895, "body": "Using the multiplicative identity (<code>1</code>) as the initial value in the  <code>(5..10).reduce(1, :*)</code> example was a poor choice as <code>(5..10).reduce(:*)</code> produces the same result. Similarly, <code>(5..10).reduce(0, :+)</code> would be a poor and misleading example."}, {"owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "edited": false, "score": 1, "creation_date": 1480475252, "post_id": 40879373, "comment_id": 68973905, "body": "Yes, as I edited in my answer, it initialises the object as the first element of the array."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1480475255, "post_id": 40879373, "comment_id": 68973907, "body": "I think the point of including <code>1</code> in the example is to demonstrate how to (if required) pass an initial value/total etc."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1480475278, "post_id": 40879373, "comment_id": 68973911, "body": "Agreed, @muistooshort. I see many poor examples in Ruby documents."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480475504, "post_id": 40879373, "comment_id": 68973968, "body": "Agreed, @sagarpandya82. The problem here was the poor choice of values. One is hardly a good value, since one can&#39;t see its effect in the multiplication. The example would be better without using the multiplicative identity, as it was pointed in other comment."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480477536, "post_id": 40879373, "comment_id": 68974497, "body": "@tokland makes a good point for why you might pass a multiplicative or additive identity <a href=\"http://stackoverflow.com/a/40708047/5101493\">here</a>"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480477840, "post_id": 40879373, "comment_id": 68974578, "body": "Well noticed @sagarpandya82."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480484926, "post_id": 40879373, "comment_id": 68976762, "body": "Be careful with <code>reduce(1, :*)</code>. <code>[].reduce(1, :*) #=&gt; 1</code> may not be what you want. Similar for <code>[].reduce(0, :+) #=&gt; 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1480488237, "post_id": 40879531, "comment_id": 68978120, "body": "It&#39;s also worth noting that it&#39;s often a good idea to seed in a default value to handle the case of an empty list: <code>[].inject(:+)</code> returns <code>nil</code>, but <code>[].inject(0, :+)</code> returns <code>0</code>."}], "tags": [], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "is_accepted": true, "score": 8, "last_activity_date": 1480475880, "last_edit_date": 1480475880, "creation_date": 1480475015, "answer_id": 40879531, "question_id": 40879373, "link": "https://stackoverflow.com/questions/40879373/ruby-inject-behavior-is-different-from-documentation/40879531#40879531", "title": "Ruby #inject behavior is different from documentation", "body": "<p>To answer your first question:</p>\n\n<p>a) <strong>Why the documentation includes this 1 as initial value when, in fact, it is not needed?</strong></p>\n\n<p>inject does not take 1 as initial value, from the <a href=\"http://apidock.com/ruby/Enumerable/inject\" rel=\"nofollow noreferrer\">apidock</a>:</p>\n\n<blockquote>\n  <p>If you do not explicitly specify an initial value for memo, then uses the first element of collection is used as the initial value of memo.</p>\n</blockquote>\n\n<p>Answer of second question lies in the answer of first itself, as it initialises the object as the first element of array on which inject is being applied.</p>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 40879531, "answer_count": 1, "score": 4, "last_activity_date": 1480475880, "creation_date": 1480473807, "question_id": 40879373, "link": "https://stackoverflow.com/questions/40879373/ruby-inject-behavior-is-different-from-documentation", "title": "Ruby #inject behavior is different from documentation", "body": "<p>Taking a look at <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html\" rel=\"nofollow noreferrer\">Ruby documentation on <code>Enumerable</code> class</a> I noticed something interesting and I'd like to know why it happens this way.</p>\n\n<p>At <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><strong><code>#inject</code></strong> description</a> I've found these examples:</p>\n\n<pre><code># Sum some numbers\n(5..10).reduce(:+)                             #=&gt; 45\n# Same using a block and inject\n(5..10).inject { |sum, n| sum + n }            #=&gt; 45\n# Multiply some numbers\n(5..10).reduce(1, :*)                          #=&gt; 151200\n# Same using a block\n(5..10).inject(1) { |product, n| product * n } #=&gt; 151200\n</code></pre>\n\n<p>Notice that when <code>#inject</code> is used for multiplication, it receives an initial value of 1. I thought this was necessary because otherwise product would receive 0 as start value (as it happens in the sum) and the multiplication would also be 0. In fact, if I run</p>\n\n<pre><code>p (1..5).inject(0) { |prod, n| prod * n } \n</code></pre>\n\n<p>I got</p>\n\n<pre><code>0\n</code></pre>\n\n<p>But then I run </p>\n\n<pre><code>p (1..5).inject { |sum, n| sum + n } \np (1..5).inject { |prod, n| prod * n } \n</code></pre>\n\n<p>and got</p>\n\n<pre><code>15\n120\n</code></pre>\n\n<p>My questions are:</p>\n\n<p>a) <strong>Why the documentation includes this 1 as initial value when, in fact, it is not needed?</strong></p>\n\n<p>and</p>\n\n<p>b) <strong>What is the behavior of <code>#inject</code> when it comes to initializing the object being injected?</strong></p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1480472383, "post_id": 40879149, "comment_id": 68973111, "body": "Are you talking about: <code>if __name__ == &quot;__main__&quot;:   main() </code>"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "reply_to_user": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1480472650, "post_id": 40879149, "comment_id": 68973187, "body": "But <code>__name__ == &quot;__main__&quot;</code> is true regardless of whether you&#39;re in an interactive shell, isn&#39;t it?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1480473002, "post_id": 40879149, "comment_id": 68973276, "body": "if you want to create a file which can be run independently as well as defining scripts adding that would allow you to have a default main if the file is run standalone.  If the file is run as an imported item, it wouldn&#39;t run the main, but instead just define in your case, the class <code>Foo</code>"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "reply_to_user": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1480473102, "post_id": 40879149, "comment_id": 68973314, "body": "Oh, ok. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": false, "score": 1, "last_activity_date": 1480472518, "creation_date": 1480472518, "answer_id": 40879220, "question_id": 40879149, "link": "https://stackoverflow.com/questions/40879149/python-equivalent-of-ruby-if-file-program-name/40879220#40879220", "title": "Python equivalent of Ruby `if __FILE__ == $PROGRAM_NAME`", "body": "<p>Python modules include a <code>__name__</code> variable holding the module name. If its the top level script, the name is <code>__main__</code>.</p>\n\n<pre><code>class Foo:\n  def bar(self):\n    print('Foo bar')\n\nif __name__ == \"__main__\":\n  foo = Foo()\n  foo.bar()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "is_accepted": true, "score": 2, "last_activity_date": 1480472628, "creation_date": 1480472628, "answer_id": 40879228, "question_id": 40879149, "link": "https://stackoverflow.com/questions/40879149/python-equivalent-of-ruby-if-file-program-name/40879228#40879228", "title": "Python equivalent of Ruby `if __FILE__ == $PROGRAM_NAME`", "body": "<p>In your example, when you are running a file independantly vs a part of a module, you can do something like this:</p>\n\n<pre><code>if __name__ == \"__main__\":\n  main()\n</code></pre>\n\n<p>which will run <code>main()</code> if the python file is executed independently.</p>\n\n<p>In your example, you would likely want something like this.</p>\n\n<pre><code>class Foo:\n  def bar(self):\n    print 'Foo bar'\n\ndef main():\n  foo = Foo()\n  foo.bar()\n\nif __name__ == \"__main__\":\n  main()\n</code></pre>\n\n<p>I personally like to define a main function as the above example, but could easily just do:</p>\n\n<pre><code>if __name__ == \"__main__\":\n  foo = Foo()\n  foo.bar()\n</code></pre>\n"}], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 40879228, "answer_count": 2, "score": -1, "last_activity_date": 1485921265, "creation_date": 1480472121, "last_edit_date": 1485921265, "question_id": 40879149, "link": "https://stackoverflow.com/questions/40879149/python-equivalent-of-ruby-if-file-program-name", "title": "Python equivalent of Ruby `if __FILE__ == $PROGRAM_NAME`", "body": "<p>In Ruby, you can write a class/module such that it can be (a) loaded into an interactive Ruby terminal without actually executing code, or (b) run as a shell script.</p>\n\n<p>For example, given file <code>foo.rb</code>:</p>\n\n<pre><code>class Foo\n  def bar\n    puts 'Foo bar'\n  end\nend\n\nif __FILE__ == $PROGRAM_NAME\n  foo = Foo.new\n  foo.bar\nend\n</code></pre>\n\n<p>This would load the <code>Foo</code> class for use in <code>irb</code> or <code>pry</code>, but wouldn't execute the instantiation of <code>foo</code> or the method call <code>foo.bar</code> inside the <code>if</code> statement at the end. </p>\n\n<p>But if run in the command line with <code>ruby foo.bar</code> it would return <code>\"Foo bar\"</code> and exit.</p>\n\n<p><strong>Is there a Python (v2 or v3) equivalent of this?</strong></p>\n\n<p>The closest I've come (in 2.7) is this, but I feel like there might be a cleaner way:</p>\n\n<pre><code>import os, sys\n\nif os.__file__ == sys.argv[0]:\n    # do stuff\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "carrierwave", "factory-bot"], "comments": [{"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1480467006, "post_id": 40878112, "comment_id": 68971771, "body": "I have a pretty similar setup, please verify <code>testimage.jpg</code> exists, also the only one difference with your factory is the following: Rack::Test::UploadedFile.new(File.join(Rails.root, &#39;spec&#39;, &#39;fixtures&#39;, &#39;testfiles&#39;, &#39;testimage.jpg&#39;))}"}, {"owner": {"reputation": 23, "user_id": 7132650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5M9s5Z9zCRs/AAAAAAAAAAI/AAAAAAAABGo/rIRA5TDj59E/photo.jpg?sz=128", "display_name": "Kainan Zhang", "link": "https://stackoverflow.com/users/7132650/kainan-zhang"}, "reply_to_user": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1480517038, "post_id": 40878112, "comment_id": 68996125, "body": "The &quot;testimage.jpg&quot; exists, and I tried your way but still got &#39;nil&#39; for attachment."}], "owner": {"reputation": 23, "user_id": 7132650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5M9s5Z9zCRs/AAAAAAAAAAI/AAAAAAAABGo/rIRA5TDj59E/photo.jpg?sz=128", "display_name": "Kainan Zhang", "link": "https://stackoverflow.com/users/7132650/kainan-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480464834, "creation_date": 1480464834, "question_id": 40878112, "link": "https://stackoverflow.com/questions/40878112/rspec-and-factorygirl-setup-for-testing-carrierwave-uploaders", "title": "RSpec and FactoryGirl Setup for Testing Carrierwave Uploaders", "body": "<p>I am trying to set up RSpec and FactoryGirl for testing my carrierwave uploaders </p>\n\n<p><strong>the uploader model code is</strong> </p>\n\n<pre><code># app\\models\\go_upload.rb\nclass GoUpload &lt; ActiveRecord::Base\n  mount_uploader :attachment, GoAttachmentUploader\n  validates :name, :subname, :person_name, :attachment, presence: true\nend\n</code></pre>\n\n<p><strong>the factory code is</strong> ,referring to <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Use-test-factories\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Use-test-factories</a></p>\n\n<pre><code>factory :go_upload do\n  name \"foo\"\n  subname \"bar\"\n  person_name \"testimage\"\n  attachment  {Rack::Test::UploadedFile.new(File.open(File.join(Rails.root, '/spec/fixtures/testfiles/testimage.jpg')))}\nend\n</code></pre>\n\n<p><strong>the GoAttachmentUploader code is</strong> </p>\n\n<pre><code>#app\\uploaders\\go_attachment_uploader.rb\nclass GoAttachmentUploader &lt; CarrierWave::Uploader::Base\n\n storage :file\n\n def store_dir(file=\"go_contact/#{model.subname}\")\n  file\n end\n\n def extension_white_list\n  %w(jpg jpeg gif png)\n end\n\n def filename\n  \"#{model.person_name}.jpg\"\n end\nend\n</code></pre>\n\n<p>The problem is that when I use factory girl to create a go_upload object, all the attributes (\"name\", \"subname\" and \"person_name\") of the object get values expect \"attachment\" is 'nil'.\nI guess the format of \"attachment\" in database is String, and\n{Rack::Test::UploadedFile.new(File.open(File.join(Rails.root, '/spec/fixtures/testfiles/testimage.jpg')))} gives hash, so I assign a string to \"attachment\", but also fail and still get \"attachment\" nil.</p>\n\n<p>The code works well in development environment, but I am trying to write a test so can anyone help me about this problem, thanks a lot.</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 1175, "user_id": 14819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb9e8356ed5d33b69d15f5097f5b9aa?s=128&d=identicon&r=PG", "display_name": "Brenton Fletcher", "link": "https://stackoverflow.com/users/14819/brenton-fletcher"}, "edited": false, "score": 1, "creation_date": 1480477829, "post_id": 40877662, "comment_id": 68974576, "body": "Just a note, the canonical way to join strings in Ruby is interpolation, rather than concatenation with plus or double shovel. That avoids the mutation question altogether. I am guessing that Matz chose to make the double shovel associate the way it does to support the use case of &quot;a&quot; &lt;&lt; b &lt;&lt; &quot;c&quot;. Otherwise people coming from languages like C++ would have been quite surprised to see the side effects. Re avoiding mutating state, Ruby supports functional style as well as many other styles; Ruby isn&#39;t a pure functional language and I think that&#39;s intentional."}, {"owner": {"reputation": 3032, "user_id": 88406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b8df8cd7729e9e503186b061265583d8?s=128&d=identicon&r=PG", "display_name": "squarism", "link": "https://stackoverflow.com/users/88406/squarism"}, "reply_to_user": {"reputation": 1175, "user_id": 14819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb9e8356ed5d33b69d15f5097f5b9aa?s=128&d=identicon&r=PG", "display_name": "Brenton Fletcher", "link": "https://stackoverflow.com/users/14819/brenton-fletcher"}, "edited": false, "score": 0, "creation_date": 1480529585, "post_id": 40877662, "comment_id": 69004566, "body": "Totally.  I usually do &quot;#{one} #{two} #{three}&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1480470328, "post_id": 40877689, "comment_id": 68972628, "body": "Thanks for the left-/right-associative terminology that I missed."}], "tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 3, "last_activity_date": 1480463276, "last_edit_date": 1495542280, "creation_date": 1480462139, "answer_id": 40877689, "question_id": 40877662, "link": "https://stackoverflow.com/questions/40877662/why-does-double-shovel-in-ruby-not-mutate-state/40877689#40877689", "title": "Why does double shovel in Ruby not mutate state?", "body": "<p>You are making it too complicated.</p>\n\n<p>The operator returns the left-hand side and so in the first case it's just reading <code>name</code> (because <code>\"Hi there, \" &lt;&lt; name</code> is evaluated first) but in the second example it is writing it.</p>\n\n<p>Now, many Ruby operators <em>are</em> right-associative, but <code>&lt;&lt;</code> is not one of them. See: <a href=\"https://stackoverflow.com/a/21060235/140740\">https://stackoverflow.com/a/21060235/140740</a></p>\n"}, {"comments": [{"owner": {"reputation": 3032, "user_id": 88406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b8df8cd7729e9e503186b061265583d8?s=128&d=identicon&r=PG", "display_name": "squarism", "link": "https://stackoverflow.com/users/88406/squarism"}, "edited": false, "score": 0, "creation_date": 1480463397, "post_id": 40877828, "comment_id": 68970824, "body": "Yep.  Nice.  <code>one = &quot;1&quot;; two=&quot;2&quot;; three=&quot;3&quot;; greeting = (one.&lt;&lt;(two.&lt;&lt;(three)))</code> does what I expect."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 9, "last_activity_date": 1552159723, "last_edit_date": 1552159723, "creation_date": 1480463048, "answer_id": 40877828, "question_id": 40877662, "link": "https://stackoverflow.com/questions/40877662/why-does-double-shovel-in-ruby-not-mutate-state/40877828#40877828", "title": "Why does double shovel in Ruby not mutate state?", "body": "<p>If we convert your <code>a &lt;&lt; b &lt;&lt; c</code> construct to a more method-ish form and throw in a bunch of implicit parentheses the behavior should be clearer. Rewriting:</p>\n\n<pre><code>greeting = \"Hi there, \" &lt;&lt; name &lt;&lt; \"?\"\n</code></pre>\n\n<p>yields:</p>\n\n<pre><code>greeting = (\"Hi there, \".&lt;&lt;(name)).&lt;&lt;(\"?\")\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core/String.html#method-i-3C-3C\" rel=\"nofollow noreferrer\"><code>String#&lt;&lt;</code></a> is modifying things but <code>name</code> never appears as the target/LHS of <code>&lt;&lt;</code>, the <code>\"Hi there ,\" &lt;&lt; name</code> string does but <code>name</code> doesn't. If you replace the first string literal with a variable:</p>\n\n<pre><code>hi_there = 'Hi there, '\ngreeting = hi_there &lt;&lt; name &lt;&lt; '?'\nputs hi_there\n</code></pre>\n\n<p>you'll see that <code>&lt;&lt;</code> changed <code>hi_there</code>; in your <code>\"Hi there, \"</code> case, this change was hidden because you were modifying something (a string literal) that you couldn't look at afterwards.</p>\n"}, {"tags": [], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1480463912, "creation_date": 1480463912, "answer_id": 40877971, "question_id": 40877662, "link": "https://stackoverflow.com/questions/40877662/why-does-double-shovel-in-ruby-not-mutate-state/40877971#40877971", "title": "Why does double shovel in Ruby not mutate state?", "body": "<p>The right-hand side of your <code>=</code> is evaluated left to right. </p>\n\n<p>When you are doing </p>\n\n<pre><code>\"Hello\" &lt;&lt; name &lt;&lt; \"?\"\n</code></pre>\n\n<p>The operation starts with <code>\"Hello\"</code>, adds <code>name</code> to it, then adds <code>\"?\"</code> to the mutated <code>\"Hello\"</code>. </p>\n\n<p>When you do </p>\n\n<pre><code>name &lt;&lt; \"?\"\n</code></pre>\n\n<p>The operation starts with <code>name</code>, and adds <code>\"?\"</code> to it, mutating name (which exists outside the internal scope of the method. </p>\n\n<p>So in your example of <code>one &lt;&lt; two &lt;&lt; three</code>, you are mutating only <code>one</code>.</p>\n"}], "owner": {"reputation": 3032, "user_id": 88406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b8df8cd7729e9e503186b061265583d8?s=128&d=identicon&r=PG", "display_name": "squarism", "link": "https://stackoverflow.com/users/88406/squarism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 40877828, "answer_count": 3, "score": 12, "last_activity_date": 1552159723, "creation_date": 1480461957, "last_edit_date": 1480463144, "question_id": 40877662, "link": "https://stackoverflow.com/questions/40877662/why-does-double-shovel-in-ruby-not-mutate-state", "title": "Why does double shovel in Ruby not mutate state?", "body": "<p>I ran into this weird side effect that caused a bug or confusion.  So imagine that this isn't a trivial example but an example of a <em>gotcha</em> perhaps.</p>\n\n<pre><code>name = \"Zorg\"\n\ndef say_hello(name)\n  greeting = \"Hi there, \" &lt;&lt; name &lt;&lt; \"?\"\n  puts greeting\nend\n\nsay_hello(name)\nputs name\n\n# Hi there, Zorg?\n# Zorg\n</code></pre>\n\n<p>This doesn't mutate name.  Name is still <code>Zorg</code>.</p>\n\n<p>But now look at a very subtle difference. in this next example:</p>\n\n<pre><code>name = \"Zorg\"\n\ndef say_hello(name)\n  greeting = name &lt;&lt; \"?\"\n  puts \"Hi there, #{greeting}\"\nend\n\nsay_hello(name)\nputs name\n\n# Hi there, Zorg?\n# Zorg?  &lt;-- name has mutated\n</code></pre>\n\n<p>Now name is <code>Zorg?</code>.  Crazy.  Very subtle difference in the <code>greeting =</code> assignment.  Ruby is doing something internally with the parsing (?) or message passing chaining?  I thought this would just chain the shovels like <code>name.&lt;&lt;(\"?\")</code> along but I guess this isn't happening.</p>\n\n<p>This is why I avoid the shovel operator when trying to do concatenation.  I generally try to avoid mutating state when I can but Ruby (currently) isn't optimized for this (yet).  Maybe Ruby 3 will change things.  Sorry for scope-creep / side discussion about the future of Ruby.</p>\n\n<p>I think this is particularly weird since the example with less side effects (first one) has two shovel operators where the example with more side effects has fewer shovel operators.</p>\n\n<p><strong>Update</strong>\nYou are correct DigitalRoss, I'm making it too complicated.\nReduced example:</p>\n\n<pre><code>one = \"1\"\ntwo = \"2\"\nthree = \"3\"\nmessage = one &lt;&lt; two &lt;&lt; three\n</code></pre>\n\n<p>Now what do you think everything is set to? (no peeking!)\nIf I had to guess I'd say:</p>\n\n<pre><code>one is 123\ntwo is 23\nthree is 3\nmessage is 123\n</code></pre>\n\n<p>But I'd be wrong about two.  Two is 2.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "edited": false, "score": 0, "creation_date": 1480462581, "post_id": 40877717, "comment_id": 68970592, "body": "I guess I meant how to I abstract the config and the username and password, but thanks. I will edit the question"}, {"owner": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "edited": false, "score": 0, "creation_date": 1480463277, "post_id": 40877717, "comment_id": 68970799, "body": "thanks! yes like that, however, is there a way to do this without defining each variable individually? I am potentially adding a handful more config variables, and it would seem a little lengthy to spread it out like that."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "edited": false, "score": 0, "creation_date": 1480463340, "post_id": 40877717, "comment_id": 68970813, "body": "Your config method could return a hash: <code>{ username: ..., password:... }</code>"}, {"owner": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "edited": false, "score": 0, "creation_date": 1480463566, "post_id": 40877717, "comment_id": 68970875, "body": "ok thanks. I  will give that a try. I will leave this question open and see if anyone has other ideas, but I&#39;ll mark it correct in a few hours. Thanks for the insights."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1480463094, "last_edit_date": 1480463094, "creation_date": 1480462303, "answer_id": 40877717, "question_id": 40877537, "link": "https://stackoverflow.com/questions/40877537/abstract-logic-from-rake-task/40877717#40877717", "title": "Abstract logic from rake task", "body": "<p>After your tasks add</p>\n\n<pre><code>def config\n  ActiveRecord::Base.configurations[Rails.env]\nend\n</code></pre>\n\n<p>But you can also do</p>\n\n<pre><code>def username\n  config['username']\nend\n\ndef password\n  config['password'] ? \"-p#{config['password']}\" : nil\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": false, "score": 0, "last_activity_date": 1480465504, "creation_date": 1480465504, "answer_id": 40878230, "question_id": 40877537, "link": "https://stackoverflow.com/questions/40877537/abstract-logic-from-rake-task/40878230#40878230", "title": "Abstract logic from rake task", "body": "<p>I think @b-seven answer is the best option for clarity, but you can use meta-programming something like:</p>\n\n<pre><code>namespace :download do\n  task :only do\n    # just use username or password\n  end\n  task :environment do\n    # just use username or password\n  end\nend\n\nActiveRecord::Base.configurations[Rails.env].each do |key, value|\n  define_method key do\n    value\n  end\nend\n</code></pre>\n\n<p>BTW In my test I had to use <code>Rails.application.config.database_configuration[Rails.env]</code> instead of <code>ActiveRecord::Base.configurations[Rails.env]</code></p>\n"}], "owner": {"reputation": 1438, "user_id": 4327359, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3c5290a91874261127f6f3a4357c2e07?s=128&d=identicon&r=PG&f=1", "display_name": "ambe5960", "link": "https://stackoverflow.com/users/4327359/ambe5960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1480465504, "creation_date": 1480461350, "last_edit_date": 1480462616, "question_id": 40877537, "link": "https://stackoverflow.com/questions/40877537/abstract-logic-from-rake-task", "title": "Abstract logic from rake task", "body": "<p>Amateur ruby-ist here...</p>\n\n<p>I have a set of rake tasks that look like:</p>\n\n<pre><code>namespace :download do\n  task :only do\n     config = ActiveRecord::Base.configurations[Rails.env]\n\n     username = config['username'] \n     password = config['password'] ? \"-p#{config['password']}\" : nil\n  end\n  task :environment do\n     config = ActiveRecord::Base.configurations[Rails.env]\n\n     username = config['username'] \n     password = config['password'] ? \"-p#{config['password']}\" : nil\n  end\nend\n</code></pre>\n\n<p>How do I abstract the 'config' logic (inclusing the username and password) \nor define it globally?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["ruby", "http", "curl", "mailchimp", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 525, "user_id": 1070325, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75ca853e340d5717a6821a3a42312163?s=128&d=identicon&r=PG", "display_name": "FellyTone84", "link": "https://stackoverflow.com/users/1070325/fellytone84"}, "is_accepted": true, "score": 2, "last_activity_date": 1480718474, "creation_date": 1480718474, "answer_id": 40941955, "question_id": 40877463, "link": "https://stackoverflow.com/questions/40877463/how-to-perform-the-following-curl-request-using-the-ruby-faraday-gem/40941955#40941955", "title": "How to perform the following curl request using the ruby Faraday gem?", "body": "<p>This ended up working for me:</p>\n\n<pre><code>conn = Faraday.new('https://us8.api.mailchimp.com/3.0/') do |c|\n  c.use FaradayMiddleware::ParseJson, content_type: \"application/json\"\n  c.use Faraday::Adapter::NetHttp\nend\n\nconn.basic_auth('apikey', &lt;api_key&gt;)\n\nresponse = conn.get('campaigns')\n\nputs response # =&gt; json blob\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 1060930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QKzbp.jpg?s=128&g=1", "display_name": "Elayaraja Dev", "link": "https://stackoverflow.com/users/1060930/elayaraja-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1498879170, "creation_date": 1498879170, "answer_id": 44857044, "question_id": 40877463, "link": "https://stackoverflow.com/questions/40877463/how-to-perform-the-following-curl-request-using-the-ruby-faraday-gem/44857044#44857044", "title": "How to perform the following curl request using the ruby Faraday gem?", "body": "<p>This is the farday code for curl operations using ruby gem.</p>\n\n<pre><code>    def contacts\n     response = JSON.parse(params)\n\n     @conn = Faraday.new('https://domain.example.com/api/v2/') do |farday|\n      farday.use FaradayMiddleware::ParseJson, content_type: \"application/json\"\n      farday.use Faraday::Adapter::NetHttp\n     end\n     @conn.basic_auth('apikey', &lt;your_api_key&gt;)\n     response = @conn.get('contacts')\n     puts response \n     render :json =&gt; {\"success\" =&gt; true}\n\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4516, "user_id": 2737435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f14cf408fdb0a4ad5c9b6169557ced9?s=128&d=identicon&r=PG&f=1", "display_name": "XtraSimplicity", "link": "https://stackoverflow.com/users/2737435/xtrasimplicity"}, "is_accepted": false, "score": 0, "last_activity_date": 1578609023, "creation_date": 1578609023, "answer_id": 59673047, "question_id": 40877463, "link": "https://stackoverflow.com/questions/40877463/how-to-perform-the-following-curl-request-using-the-ruby-faraday-gem/59673047#59673047", "title": "How to perform the following curl request using the ruby Faraday gem?", "body": "<p>A much more concise option is to manually encode your credentials into Base64 and set the <code>Authorization</code> header manually. This saves a few lines of code and keeps it in a similar format to regular Faraday requests (i.e. <code>Faraday.post &lt;URL&gt;, &lt;BODY&gt;, &lt;HEADERS&gt;</code>).</p>\n\n<p>i.e.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>encoded_credentials = Base64.encode64('apikey:api_secret').chomp\nFaraday.post 'http://myhost.local/my_url', {}, authorization: \"Basic #{encoded_credentials}\"\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 1070325, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75ca853e340d5717a6821a3a42312163?s=128&d=identicon&r=PG", "display_name": "FellyTone84", "link": "https://stackoverflow.com/users/1070325/fellytone84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "accepted_answer_id": 40941955, "answer_count": 3, "score": 0, "last_activity_date": 1578609023, "creation_date": 1480460926, "last_edit_date": 1480461774, "question_id": 40877463, "link": "https://stackoverflow.com/questions/40877463/how-to-perform-the-following-curl-request-using-the-ruby-faraday-gem", "title": "How to perform the following curl request using the ruby Faraday gem?", "body": "<p>This is the curl request I'd like to perform:</p>\n\n<p><code>curl --request GET --url 'https://us8.api.mailchimp.com/3.0/' --user 'anystring:&lt;apikey&gt;'</code></p>\n\n<p>Running this curl command from the command line, I get a bunch of JSON, which is what I want.</p>\n\n<p>I'm trying to perform this same request using Faraday. This is what I've tried:</p>\n\n<pre><code>conn = Faraday.new \"https://us8.api.mailchimp.com/3.0/\" do |faraday|\n  faraday.adapter Faraday.default_adapter\nend\nconn.basic_auth('apikey', &lt;apikey&gt;)\n\nresponse = conn.get\n\nputs response.body # =&gt; \"&lt;!DOCTYPE HTML PUBLIC \\\"-//IETF//DTD HTML 2.0//EN\\\"&gt;\\n&lt;html&gt;&lt;head&gt;\\n&lt;title&gt;301 Moved Permanently&lt;/title&gt;\\n&lt;/head&gt;...\n</code></pre>\n\n<p>How do I get JSON instead of the html I'm seeing in <code>response.body</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1480464034, "post_id": 40877385, "comment_id": 68971008, "body": "Just above your expect statement, put these 3 lines: <code>p response, p response.status, p response.body</code>. What is the output of each? Also, personally, I find these RSpec helpers to obscure test errors. I&#39;d rewrite that test as <code>expect(response.status).to eq(200)</code>. Then you&#39;ll see what the status really was."}, {"owner": {"reputation": 81, "user_id": 6427913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa066a242719a06145faa3ab547b92b?s=128&d=identicon&r=PG&f=1", "display_name": "HyperMeat", "link": "https://stackoverflow.com/users/6427913/hypermeat"}, "reply_to_user": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1480464645, "post_id": 40877385, "comment_id": 68971142, "body": "@steel It gives me a NoMethodError <code>undefined method </code>status&#39; for nil:NilClass` at <code>p response.status</code>.  I commented those lines out and tried your suggestion, <code>expect(response.status).to eq(200)</code> (thanks for the tip, btw), which gave me the same error."}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1480464810, "post_id": 40877385, "comment_id": 68971199, "body": "Try adding this above your <code>create</code> method in the controller. <code>respond_to :json</code>"}, {"owner": {"reputation": 81, "user_id": 6427913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa066a242719a06145faa3ab547b92b?s=128&d=identicon&r=PG&f=1", "display_name": "HyperMeat", "link": "https://stackoverflow.com/users/6427913/hypermeat"}, "reply_to_user": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1480465196, "post_id": 40877385, "comment_id": 68971293, "body": "I had tried that earlier, but <code>respond_to</code> isn&#39;t defined when you create a Rails app with the api flag.  I followed the suggestions at <a href=\"http://stackoverflow.com/a/35985101/6427913\">this answer</a>, but I still get a NoMethodError for respond_to."}, {"owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "edited": false, "score": 0, "creation_date": 1480480315, "post_id": 40877385, "comment_id": 68975231, "body": "Can you try to place <code>post &quot;&#47;api&#47;v1&#47;login&quot;, { auth: { email: user.email, password: user.password } }, { accept: &quot;application&#47;json&quot; }</code> in a <code>before</code> block"}, {"owner": {"reputation": 81, "user_id": 6427913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa066a242719a06145faa3ab547b92b?s=128&d=identicon&r=PG&f=1", "display_name": "HyperMeat", "link": "https://stackoverflow.com/users/6427913/hypermeat"}, "edited": false, "score": 0, "creation_date": 1480518918, "post_id": 40877385, "comment_id": 68997539, "body": "I can and did!  Unfortunately, there&#39;s no change in the outcome.  Still <code>undefined method &#39;status&#39; for nil:NilClass</code>."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 6427913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa066a242719a06145faa3ab547b92b?s=128&d=identicon&r=PG&f=1", "display_name": "HyperMeat", "link": "https://stackoverflow.com/users/6427913/hypermeat"}, "is_accepted": false, "score": 2, "last_activity_date": 1480548997, "creation_date": 1480548997, "answer_id": 40900212, "question_id": 40877385, "link": "https://stackoverflow.com/questions/40877385/rspec-request-specs-empty-response/40900212#40900212", "title": "Rspec request spec&#39;s empty response", "body": "<p>Ok, I've got this working.<br>\n</p>\n\n<pre><code>it 'status code is 200' do\n   post \"/api/v1/login\", { auth: { email: user.email, password: user.password } }, { accept: \"application/json\" }\n      expect(last_response.status).to eq(200)\nend\n</code></pre>\n\n<p>I'm not sure why I need to use <code>last_response</code> or how I should have known that (especially since the official documentation tells me I should use <code>response</code>), but there it is.</p>\n"}], "owner": {"reputation": 81, "user_id": 6427913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa066a242719a06145faa3ab547b92b?s=128&d=identicon&r=PG&f=1", "display_name": "HyperMeat", "link": "https://stackoverflow.com/users/6427913/hypermeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1480548997, "creation_date": 1480460566, "question_id": 40877385, "link": "https://stackoverflow.com/questions/40877385/rspec-request-specs-empty-response", "title": "Rspec request spec&#39;s empty response", "body": "<p>I'm trying to write a request spec for my first Rails app, but the response object is <code>nil</code>.  Rspec is still dark magic to me, so I may be missing something really basic, but given the example <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec#requesting-a-json-response\" rel=\"nofollow noreferrer\">here</a> I figured this would work.  When I run the Rails server, I can authenticate over cURL, and my controller spec works fine.</p>\n\n<p>Here's my request spec:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># spec/requests/tokens_request_spec.rb\nrequire 'rails_helper'\n\nRSpec.describe Api::V1::TokensController, type: :request do\n  context \"getting the token\" do\n    let(:user) { create(:user) }\n\n    it 'status code is 2xx' do\n      post \"/api/v1/login\", { auth: { email: user.email, password: user.password } }, { accept: \"application/json\" }\n      expect(response).to have_http_status(:success)\n    end\n  end\nend\n</code></pre>\n\n<p>Here's my controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/controllers/api/v1/tokens_controller.rb\nclass Api::V1::TokensController &lt; ApplicationController\n  def create\n    user = User.find_by(email: user_params[\"email\"])\n    return render json: { jwt: Auth.issue(user: user.id) } if user.authenticate(user_params[\"password\"])\n    render json: { message: \"Invalid credentials\" }, status: 401\n  end\n\n  private\n\n  def user_params\n    params.require(:auth).permit(:email, :password)\n  end\nend\n</code></pre>\n\n<p>Here's my test output: </p>\n\n<pre class=\"lang- prettyprint-override\"><code>Failures:\n\n  1) Api::V1::TokensController getting the token status code is 2xx\n     Failure/Error: expect(response).to have_http_status(:success)\n       expected the response to have a success status code (2xx) but it was\n     # ./spec/requests/tokens_request_spec.rb:13:in `block (3 levels) in &lt;top (required)&gt;'\n     # ./spec/spec_helper.rb:27:in `block (3 levels) in &lt;top (required)&gt;'\n     # ./spec/spec_helper.rb:26:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "string", "loops"], "comments": [{"owner": {"reputation": 36290, "user_id": 300836, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/En2qu.jpg?s=128&g=1", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/300836/matt-gibson"}, "edited": false, "score": 0, "creation_date": 1480460329, "post_id": 40877314, "comment_id": 68969758, "body": "What happens in your loop when i = 1? (Hint: nothing.)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1480460716, "post_id": 40877314, "comment_id": 68969912, "body": "In addition, <code>words[idx] == &#39;a&#39;||&#39;e&#39;||&#39;i&#39;||&#39;o&#39;||&#39;u&#39;</code> is <i>not</i> how you test multiple values for equality. <code>a == b || c</code> evaluates as <code>(a == b) || c</code>, and if <code>c</code> is truthy, the entire expression is truthy. Your <code>if</code> will never be false."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1480460871, "post_id": 40877314, "comment_id": 68969989, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/26812757/how-do-i-count-vowels\">How do I count vowels?</a>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1480460907, "post_id": 40877314, "comment_id": 68969995, "body": "I admit I was looking for a canonical analogous to what @meagar was proposing, but considering that this particular problem has already been addressed in Ruby, it&#39;s fine.  If someone <i>does</i> find a canonical, that&#39;d be good to know about."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1480462255, "post_id": 40877314, "comment_id": 68970472, "body": "@meagar the three things you summon to close are all in the question, it&#39;s crystal clear what he wants and what the problem is and the code is all there"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 1, "creation_date": 1480462410, "post_id": 40877314, "comment_id": 68970538, "body": "@peter Absolutely nothing has been done to debug this. The code sample is <i>not</i> an MCVE, it contains all kinds of code unrelated to the actual problem at hand."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1480462624, "post_id": 40877314, "comment_id": 68970608, "body": "@meagar I disagree and I see others do also"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1480462650, "post_id": 40877314, "comment_id": 68970619, "body": "You can disagree all you like, but it&#39;s objective truth that this is <i>not</i> the shortest code necessary to reproduce the problem."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1480462762, "post_id": 40877314, "comment_id": 68970657, "body": "and you put it on hold based on that, no surprise you scary new users away"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1480462817, "post_id": 40877314, "comment_id": 68970677, "body": "@peter OP has their answer, closing a question is not some &quot;hostile&quot; act. If the OP had gone through the simple exercise of producing the shortest code, they would have found their problem when they reached <code>while true; end</code>.  This question is not useful in its current form, and there is absolutely no reason to leave it open."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 1, "creation_date": 1480462962, "post_id": 40877314, "comment_id": 68970720, "body": "This code is on par for a very new Rubyist, and isn&#39;t a wall of code. It may be an X/Y problem, where X may have existing solutions, but the Y question lacks an exact duplicate. I think we all agree it could be debugged better, but it&#39;s not a terrible question, so I&#39;m voting to reopen."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1480463038, "post_id": 40877314, "comment_id": 68970737, "body": "@CodeGnome If you want to modify the question so that it&#39;s useful for other people, I&#39;ll happily reopen it."}], "answers": [{"comments": [{"owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "edited": false, "score": 3, "creation_date": 1480461229, "post_id": 40877474, "comment_id": 68970111, "body": "Why the downvote on this? The infinite loop is a clear issue in the original code that this sample addresses."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "edited": false, "score": 0, "creation_date": 1480461325, "post_id": 40877474, "comment_id": 68970148, "body": "@quantumpotato:  It feels like this code is a lot longer than it needs to be, especially in the wake of a simple <code>count</code> method on String."}, {"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 3, "creation_date": 1480461407, "post_id": 40877474, "comment_id": 68970176, "body": "I wanted the OP to understand what I suggested. That&#39;s why I didnt change it that much. He also did not asked for any optimization in speed or in writing, I just gave him a tip."}], "tags": [], "owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "is_accepted": false, "score": 3, "last_activity_date": 1480461833, "last_edit_date": 1480461833, "creation_date": 1480461000, "answer_id": 40877474, "question_id": 40877314, "link": "https://stackoverflow.com/questions/40877314/what-is-wrong-with-my-ruby-vowel-counting-loop/40877474#40877474", "title": "What is wrong with my Ruby vowel-counting loop?", "body": "<p>You can use Regular expressions for shorter comparison if the string or char is a vowel. The other way like you wanted to would be way too long:</p>\n\n<pre><code>if words[idx] == 'a' || words[idx] == 'e'\n</code></pre>\n\n<p>And so on ...</p>\n\n<p>Also if you would just increment <code>idx</code> everytime you have actually a vowel, you would get stuck in an infinite loop if the char isnt a vowel, <code>idx</code> would not increase, thus always checking for the same value in the while loop.</p>\n\n<p>This code works by using Regular expression:</p>\n\n<pre><code>def count_vowels(string)\n  vowlcounter = 0 \n  idx = 0\n\n  while idx &lt; string.length\n    if string[idx][/[aeiou]/]\n      vowlcounter += 1;\n    end\n    idx += 1;\n  end\n  return vowlcounter\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1480461758, "post_id": 40877546, "comment_id": 68970302, "body": "This does absolutely nothing to address the actual problem being described in the question."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1480462085, "post_id": 40877546, "comment_id": 68970410, "body": "@meagar It&#39;s an X/Y problem. If you want to answer the Y problem, go ahead, but I&#39;d rather solve for X. YMMV."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 2, "last_activity_date": 1480462545, "last_edit_date": 1480462545, "creation_date": 1480461435, "answer_id": 40877546, "question_id": 40877314, "link": "https://stackoverflow.com/questions/40877314/what-is-wrong-with-my-ruby-vowel-counting-loop/40877546#40877546", "title": "What is wrong with my Ruby vowel-counting loop?", "body": "<h2>Scan and Count Vowels</h2>\n\n<p>This strikes me as an <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">X/Y problem</a>. Rather than debugging your code, it may be better to simply use built-in String methods to count your vowels, rather than doing your own iteration through the string. Other people can address the Y in your X/Y problem, but I'd rather help you solve for X directly.</p>\n\n<h3>Using String#scan</h3>\n\n<p>Use <a href=\"https://ruby-doc.org/core-2.3.3/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> and <a href=\"https://ruby-doc.org/core-2.3.3/Array.html#method-i-count\" rel=\"nofollow noreferrer\">Array#count</a> to do this quickly and easily. While this doesn't account for <code>y</code> when used as a vowel, it should otherwise do what you want.</p>\n\n<pre><code>def vowel_count str \n  str.scan(/[aeiou]/).count\nend\n\nvowel_count 'foo'\n#=&gt; 2\n\nvowel_count 'foo bar baz'\n#=&gt; 4\n</code></pre>\n\n<h3>Using String#count</h3>\n\n<p>I like using #scan best, because it returns an array you can use elsewhere if you like and helps with debugging. However, if you don't care about <em>which</em> vowels are found, you can use the <a href=\"https://ruby-doc.org/core-2.3.3/String.html#method-i-count\" rel=\"nofollow noreferrer\">String#count</a> method directly. For example:</p>\n\n<pre><code>def vowel_count str\n  str.count 'aeiou'\nend\n\nvowel_count 'foo'\n#=&gt; 2\n\nvowel_count 'foo bar baz'\n#=&gt; 4\n</code></pre>\n\n<p>The results are the same, but you loose the ability to introspect the values returned inside your method. YMMV.</p>\n"}], "owner": {"reputation": 323, "user_id": 4430891, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1044a26da1f416cac1b2bcd33264431f?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/4430891/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1480461581, "answer_count": 2, "score": 0, "last_activity_date": 1480462545, "creation_date": 1480460211, "last_edit_date": 1480462239, "question_id": 40877314, "link": "https://stackoverflow.com/questions/40877314/what-is-wrong-with-my-ruby-vowel-counting-loop", "closed_reason": "Not suitable for this site", "title": "What is wrong with my Ruby vowel-counting loop?", "body": "<p>I'm trying to create a loop that add 1 to the <em>idx</em> every time theres a vowel in the string, but my code returns nothing.</p>\n\n<pre><code>def count_vowels(string)\n  vowlcounter = 0 \n  idx = 0 \n  words = string.split('')\n\n  while idx &lt; string.length \n    if words[idx] == 'a'||'e'||'i'||'o'||'u'\n      vowlcounter += 1 \n      idx += 1\n    end\n  end\n\n  return vowlcounter\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "is_accepted": true, "score": 1, "last_activity_date": 1480461744, "last_edit_date": 1480461744, "creation_date": 1480460828, "answer_id": 40877445, "question_id": 40877273, "link": "https://stackoverflow.com/questions/40877273/could-not-find-table-tags-travels-rails/40877445#40877445", "title": "Could not find table &#39;tags_travels&#39; rails", "body": "<p>Rails looks for join tables in a specific syntax. Its trying to find <code>tags_travles</code> but uouve created it with <code>travels_tags</code>.</p>\n\n<p>Change your model associations to specify the join table.</p>\n\n<p><code>has_and_belongs_to_many :travels,  :join_table =&gt; :travels_tags</code></p>\n\n<p>And</p>\n\n<p><code>has_and_belongs_to_many :tags,  :join_table =&gt; :travels_tags</code></p>\n\n<p>Heres some info from the docs to help explain the defsult behaviour for join table naming. </p>\n\n<p>\"By default, the name of the join table comes from the union of the first two arguments provided to create_join_table, in alphabetical order.\"</p>\n\n<p><a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#creating-a-join-table\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/active_record_migrations.html#creating-a-join-table</a></p>\n"}], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 40877445, "answer_count": 1, "score": 1, "last_activity_date": 1480461744, "creation_date": 1480460015, "question_id": 40877273, "link": "https://stackoverflow.com/questions/40877273/could-not-find-table-tags-travels-rails", "title": "Could not find table &#39;tags_travels&#39; rails", "body": "<p>I have a problem, I want to create an hashtags system, but when I run my code, and when I want to create a travel that contain hashtags I have this error : </p>\n\n<pre><code>ActiveRecord::StatementInvalid in TravelsController#create\nCould not find table 'tags_travels' \n</code></pre>\n\n<p>Here is my travel.rb </p>\n\n<pre><code>class Travel &lt; ApplicationRecord\n  has_many :posts\n  belongs_to :user\n  has_and_belongs_to_many :tags\n\n  #after / before create\n  after_create do\n    travel = Travel.find_by(id: self.id)\n    sh = self.hashtags.scan(/#\\w+/)\n    sh.uniq.map do |s|\n      tag = Tag.find_or_create_by(name: s.downcase.delete('#'))\n      travel.tags &lt;&lt; tag\n    end\n  end\n\n  before_update do\n    travel = Travel.find_by(id: self.id)\n    travel.tags.clear\n    sh = self.hashtags.scan(/#\\w+/)\n    sh.uniq.map do |s|\n      tag = Tag.find_or_create_by(name: s.downcase.delete('#'))\n      travel.tags &lt;&lt; tag\n    end\n  end\nend\n</code></pre>\n\n<p>my tag.rb </p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n  has_and_belongs_to_many :travels\nend\n</code></pre>\n\n<p>the schema.rb file (just table concerned) :</p>\n\n<pre><code> create_table \"tags\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"topics\", force: :cascade do |t|\n    t.string   \"title\"\n    t.string   \"text\"\n    t.string   \"end_date\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"post_id\"\n  end\n\n  create_table \"travels\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"trip_type\"\n    t.string   \"description\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n    t.integer  \"user_id\"\n    t.string   \"hashtags\"\n  end\n\n  create_table \"travels_tags\", id: false, force: :cascade do |t|\n    t.integer \"travel_id\"\n    t.integer \"tag_id\"\n    t.index [\"tag_id\"], name: \"index_travels_tags_on_tag_id\"\n    t.index\n\n [\"travel_id\"], name: \"index_travels_tags_on_travel_id\"\n  end\n</code></pre>\n\n<p>Someone has a solution ? Thank !</p>\n"}, {"tags": ["ruby", "watir"], "answers": [{"comments": [{"owner": {"reputation": 1327, "user_id": 3063045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7878e3c842c9d6870a01394177dfc28?s=128&d=identicon&r=PG&f=1", "display_name": "user3063045", "link": "https://stackoverflow.com/users/3063045/user3063045"}, "edited": false, "score": 0, "creation_date": 1480517296, "post_id": 40881011, "comment_id": 68996301, "body": "Works great but you need to require selenium-webdriver as well. Once the answer is corrected I&#39;ll mark it as correct. Thanks!"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 1327, "user_id": 3063045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7878e3c842c9d6870a01394177dfc28?s=128&d=identicon&r=PG&f=1", "display_name": "user3063045", "link": "https://stackoverflow.com/users/3063045/user3063045"}, "edited": false, "score": 1, "creation_date": 1480522088, "post_id": 40881011, "comment_id": 68999792, "body": "You only need to <code>require &#39;selenium-webdriver&#39;</code> if you are using an older version of Watir. As of Watir 6.0, it is just Watir-Webdriver, not the metagem for selecting between Watir-Classic and Watir-Webdriver. As a result, <code>require &#39;watir&#39;</code> <a href=\"https://github.com/watir/watir/blob/master/lib/watir.rb#L1\" rel=\"nofollow noreferrer\">already does the necessary <code>require &#39;selenium-webdriver&#39;</code></a>."}, {"owner": {"reputation": 1327, "user_id": 3063045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7878e3c842c9d6870a01394177dfc28?s=128&d=identicon&r=PG&f=1", "display_name": "user3063045", "link": "https://stackoverflow.com/users/3063045/user3063045"}, "edited": false, "score": 0, "creation_date": 1480556264, "post_id": 40881011, "comment_id": 69016146, "body": "Sorry...had an old reference that brought in the old version of watir. Thanks for the answer!"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1480708006, "post_id": 40881011, "comment_id": 69091115, "body": "Hi Justin Ko, I don&#39;t understand the meaning of metagem, this name is given because it chooses between two gems ?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 1, "creation_date": 1480713632, "post_id": 40881011, "comment_id": 69093555, "body": "@Gopal, that is correct. Watir v5 (and maybe 3/4), was simply a gem that loaded Watir-Classic or Watir-Webdriver based on the browser selected. Basically if you wanted to test IE, it loaded Watir-Classic, otherwise it would load Watir-Webdriver."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1480761932, "post_id": 40881011, "comment_id": 69104003, "body": "Okay, thank you but why did you use the word &#39;meta&#39;?"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 5, "last_activity_date": 1480484039, "creation_date": 1480484039, "answer_id": 40881011, "question_id": 40877185, "link": "https://stackoverflow.com/questions/40877185/webdriver-watir-ruby-chrome-versions/40881011#40881011", "title": "Webdriver Watir Ruby Chrome Versions", "body": "<p>To use a specific Chrome executable specify the <code>Selenium::WebDriver::Chrome.path</code>.</p>\n\n<pre><code>require 'watir'\n\n# Note that the path includes the file directory and executable\nSelenium::WebDriver::Chrome.path = 'C:/Program Files (x86)/Google/Chrome/Application/Chrome.exe'\n\nbrowser = Watir::Browser.new :chrome\n</code></pre>\n"}], "owner": {"reputation": 1327, "user_id": 3063045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7878e3c842c9d6870a01394177dfc28?s=128&d=identicon&r=PG&f=1", "display_name": "user3063045", "link": "https://stackoverflow.com/users/3063045/user3063045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "accepted_answer_id": 40881011, "answer_count": 1, "score": 4, "last_activity_date": 1480484039, "creation_date": 1480459564, "question_id": 40877185, "link": "https://stackoverflow.com/questions/40877185/webdriver-watir-ruby-chrome-versions", "title": "Webdriver Watir Ruby Chrome Versions", "body": "<p>I want to test with different versions of Chrome. How can you point at a specific Chrome executable/version with Watir and Ruby?</p>\n"}, {"tags": ["ruby", "sinatra", "sidekiq", "padrino"], "owner": {"reputation": 964, "user_id": 510905, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9aa2a816c61170cc0183a68be0386ba5?s=128&d=identicon&r=PG", "display_name": "Oranges13", "link": "https://stackoverflow.com/users/510905/oranges13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1480460060, "creation_date": 1480458558, "last_edit_date": 1480460060, "question_id": 40876972, "link": "https://stackoverflow.com/questions/40876972/using-sidekiq-with-padrino-sidekiq-does-not-inherit-the-environment", "title": "Using Sidekiq with Padrino - Sidekiq does not inherit the environment", "body": "<p>I am using Padrino (0.13.2) with Sidekiq (4.2.7) and I have some Mailers set up in Padrino to fire off when things occur in my app.</p>\n\n<p>Here's the set up info (from <a href=\"https://gist.github.com/passcod/3754086\" rel=\"nofollow noreferrer\">here</a>, mostly)</p>\n\n<p>At first, when running sidekiq with <code>bundle exec sidekiq -r ./config/workers.rb</code> it wasn't getting any of my environment (Models, database, etc) so that was fairly useless.</p>\n\n<p>Now I'm starting it with <code>bundle exec sidekiq ./config/boot.rb</code> so that it has access to the entire Padrino environment. No problem, everything works great.</p>\n\n<p>HOWEVER, I'm trying to send a mailer and it doesn't work.</p>\n\n<pre><code>Portal::App.delay.deliver(:user, :confirm, \"John Doe\", \"confirmation link here\")\n</code></pre>\n\n<p>This gets scheduled into sidekiq no problem, but when it goes to run it, it again isn't getting the padrino environment because I receive the error: <code>WARN: RuntimeError: mailer 'user' is not registered</code></p>\n\n<p>I can run the mailer command from the Padrino console without a problem (it sends) but when I schedule it with sidekiq it fails. Help?</p>\n\n<p>Oh, I should also add that in TESTS it works!!! WTF??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "callback"], "answers": [{"comments": [{"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1480516255, "post_id": 40876989, "comment_id": 68995547, "body": "Thanks for the thorough explanation!"}], "tags": [], "owner": {"reputation": 535, "user_id": 3214870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KIhCa.jpg?s=128&g=1", "display_name": "epergo", "link": "https://stackoverflow.com/users/3214870/epergo"}, "is_accepted": true, "score": 2, "last_activity_date": 1480458649, "creation_date": 1480458649, "answer_id": 40876989, "question_id": 40876538, "link": "https://stackoverflow.com/questions/40876538/rails-4-access-variable-inside-before-destroy-callback/40876989#40876989", "title": "Rails 4: Access variable inside before_destroy callback", "body": "<p>You are accessing the tags of the recipe but you are not seeing anything becase <code>dependant_destroy</code> is executed <strong>before</strong> the actual destroy of the Recipe object.</p>\n\n<p>If you inspect carefully the queries launched you will see that right before your callback, the <code>DELETE FROM \"taggings\" . . .</code> is executed, so when you try to access the tags of the Recipe it returns an empty array.</p>\n\n<p>Because you don't want to destroy tags everytime you destroy a recipe but only when is the only one you should remove your <code>dependant_destroy</code> and place the logic in a <code>after_destroy</code> so the resulting code would be:</p>\n\n<pre><code>class Recipe &lt; ApplicationRecord\n  has_many :taggings\n  has_many :tags, through: :taggings\n\n  after_destroy :remove_tags\n\n  private\n\n  # I need to pass an individual recipe\n  def remove_tags\n    if self.tags.present?\n      self.tags.each do |tag|\n        Recipe.tagged_with(tag).length == 1 ? tag.delete : next\n        # tagged_with() returns recipes with the given tag name\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 40876989, "answer_count": 1, "score": 1, "last_activity_date": 1480458649, "creation_date": 1480456722, "question_id": 40876538, "link": "https://stackoverflow.com/questions/40876538/rails-4-access-variable-inside-before-destroy-callback", "title": "Rails 4: Access variable inside before_destroy callback", "body": "<p>I have a recipe portal and these recipes can have tags.  </p>\n\n<pre><code>class Recipe &lt; ActiveRecord::Base\n    has_many :taggings, dependent: :destroy\n    has_many :tags, through: :taggings, dependent: :destroy\nend\n\nclass Tag &lt; ActiveRecord::Base\n    has_many :taggings, dependent: :destroy\n    has_many :recipes, through: :taggings\nend\n\nclass Tagging &lt; ActiveRecord::Base\n  belongs_to :tag\n  belongs_to :recipe\nend\n</code></pre>\n\n<p>...when I delete a recipe, I'd like to delete the tag <strong>if the recipe being deleted is the only recipe with this tag</strong>.</p>\n\n<pre><code>class Recipe &lt; ActiveRecord::Base\n    has_many :taggings, dependent: :destroy\n    has_many :tags, through: :taggings, dependent: :destroy\n\n    before_destroy :remove_tags\n\n    private\n\n    # I need to pass an individual recipe\n    def remove_tags\n        if self.tags.present?\n            self.tags.each do |tag|\n                Recipe.tagged_with(tag).length == 1 ? tag.delete : next\n                # tagged_with() returns recipes with the given tag name\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>This function would work but I can't access the tags.  <strong>How do I access the tags for the recipe being deleted?</strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480485945, "post_id": 40876442, "comment_id": 68977115, "body": "To use <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-rjust\" rel=\"nofollow noreferrer\">String#rjust</a>, to add, say, two spaces at the beginning, write <code>line.rjust(line.size+2)</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1480457131, "post_id": 40876475, "comment_id": 68968332, "body": "Thanks but how would I do this with a variable number of spaces?  I put &quot;1&quot;  just as an example, but what if the nubmer were stored in a variable called &quot;num_spaces&quot;?"}, {"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 1, "creation_date": 1480457209, "post_id": 40876475, "comment_id": 68968363, "body": "you can use the multiplication operator"}], "tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 5, "last_activity_date": 1480457505, "last_edit_date": 1480457505, "creation_date": 1480456508, "answer_id": 40876475, "question_id": 40876442, "link": "https://stackoverflow.com/questions/40876442/how-do-i-add-a-certain-number-of-spaces-to-the-beginning-of-a-string-in-ruby/40876475#40876475", "title": "How do I add a certain number of spaces to the beginning of a string in Ruby?", "body": "<p>try</p>\n\n<pre><code>line = \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\n#=&gt; \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\nline.prepend(\" \")\n#=&gt; \"   29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\nline.prepend(\" \" * 2) # for a variable number of spaces\n#=&gt; \"    29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1480457183, "post_id": 40876498, "comment_id": 68968353, "body": "Hi, I don&#39;t want to format to a particular width, I want to add a certain number of spaces in front of the string.  It&#39;s not necessarily the same because I have no idea what the total length of the string should be, only the number of spaces I want to add."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1480459054, "post_id": 40876498, "comment_id": 68969203, "body": "Usually you add spaces to get a desired length, but if that&#39;s not the case then go with @baseballlover723&#39;s solution."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1480456868, "last_edit_date": 1480456868, "creation_date": 1480456583, "answer_id": 40876498, "question_id": 40876442, "link": "https://stackoverflow.com/questions/40876442/how-do-i-add-a-certain-number-of-spaces-to-the-beginning-of-a-string-in-ruby/40876498#40876498", "title": "How do I add a certain number of spaces to the beginning of a string in Ruby?", "body": "<p>If you want to format that to a particular width:</p>\n\n<pre><code>line =  \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\n'%76s' % line\n</code></pre>\n\n<p>The <code>sprintf</code> <a href=\"https://ruby-doc.org/core-2.3.0/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\">formatting directives</a> make it easy to organize things that way.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 40876475, "answer_count": 2, "score": 0, "last_activity_date": 1480457581, "creation_date": 1480456381, "last_edit_date": 1480457581, "question_id": 40876442, "link": "https://stackoverflow.com/questions/40876442/how-do-i-add-a-certain-number-of-spaces-to-the-beginning-of-a-string-in-ruby", "title": "How do I add a certain number of spaces to the beginning of a string in Ruby?", "body": "<p>I'm using Ruby 2.3.  How do I add a certain number of spaces to the beginning of a string?  I thought rjust was the way to do it, but these calls do nothing when I want to add 1 space of padding to the front of the string ..</p>\n\n<pre><code>line = \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\n# =&gt; \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\" \nline.rjust(1)\n# =&gt; \"  29  25  13 M10-19 14    23:36  7:36    826 HYLLBERG MARCO      WI Kenosha\"\n</code></pre>\n"}, {"tags": ["ruby", "sqlite", "rubygems"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1480454622, "post_id": 40875967, "comment_id": 68967098, "body": "The question is pretty vague. Can you share an example of what you have tried so far? Are you getting errors? etc"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1480455456, "post_id": 40875967, "comment_id": 68967505, "body": "You&#39;ll need to check (and possibly rebuild) SQLite for the extensions, and Ruby is unlikely to provide bindings for the <code>sqlite3session_*</code> functions, so you&#39;ll likely have to write the bindings yourself."}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1480476119, "post_id": 40875967, "comment_id": 68974133, "body": "I don&#39;t know how to start - I can&#39;t figure that out from the sqlite3 gem documentation.  As I stated, I have compiled SQLite3 for the session extension, but how this gets accessed by the sqlite3 gem is unclear to me."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1480495613, "post_id": 40875967, "comment_id": 68981687, "body": "The session functions are not (yet) part of that gem; you have to extend that package, or write your own."}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1480520457, "post_id": 40875967, "comment_id": 68998645, "body": "OK - not the answer I wanted, but at least I won&#39;t waste time looking for something that doesn&#39;t exist.  Any idea on how to get started extending the gem?"}], "owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480454489, "creation_date": 1480454489, "question_id": 40875967, "link": "https://stackoverflow.com/questions/40875967/how-to-use-sqlite3-session-extension-with-ruby", "title": "How to use sqlite3 session extension with ruby", "body": "<p>I'd like to make use of the SQLite3 session extension (<a href=\"https://sqlite.org/sessionintro.html\" rel=\"nofollow noreferrer\">https://sqlite.org/sessionintro.html</a>) under Ruby using the sqlite3 gem, but can't figure out how to do that.  Can anyone give me guidance on how to proceed?</p>\n\n<p>(I'm currently using FreeBSD and have compiled sqlite3 with the SESSION extension.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1480464546, "post_id": 40875719, "comment_id": 68971112, "body": "<a href=\"http://guides.rubygems.org/ssl-certificate-update/\" rel=\"nofollow noreferrer\">guides.rubygems.org/ssl-certificate-update</a> Here is the official documentation. You have to manually update rubygems by either downloading the gem itself and installing the local copy OR patching the SSL certificate itself"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1480556930, "post_id": 40875719, "comment_id": 69016293, "body": "I still had the error after manually downloading rubygems-update-2.6.7 and installing it."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1480557242, "post_id": 40875719, "comment_id": 69016378, "body": "What did work for me is rvm install 2.2 and then I was able to install Rails on 2.3."}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1480453449, "creation_date": 1480453449, "answer_id": 40875719, "question_id": 40875447, "link": "https://stackoverflow.com/questions/40875447/rvm-certificate-verify-failed-when-installing-rails/40875719#40875719", "title": "rvm: certificate verify failed when installing Rails", "body": "<p>Have a look here <a href=\"https://gist.github.com/luislavena/f064211759ee0f806c88\" rel=\"nofollow noreferrer\">https://gist.github.com/luislavena/f064211759ee0f806c88</a> (see also Issue #1050 on the rubygems gem repo itself: <a href=\"https://github.com/rubygems/rubygems/issues/1050\" rel=\"nofollow noreferrer\">https://github.com/rubygems/rubygems/issues/1050</a> if you want some great bedtime reading )</p>\n\n<p>The gist (no pun intended) is that RubyGems had to update their SSL Certificate in a manner which was not deployable via rubygems itself.</p>\n\n<p>You will need to do a 1 time manual installation / update of rubygems</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480453449, "creation_date": 1480452294, "question_id": 40875447, "link": "https://stackoverflow.com/questions/40875447/rvm-certificate-verify-failed-when-installing-rails", "title": "rvm: certificate verify failed when installing Rails", "body": "<p>For the first time, I am trying <code>ruby-2.3.0</code>. I installed it from rvm. After installation, I try to install Rails:</p>\n\n<pre><code>$ rvm-prompt\nruby-2.3.0@mygemset\n\n$ rvm osx-ssl-certs update all\nUpdating certificates for /etc/openssl/cert.pem: Updating certificates in '/etc/openssl/cert.pem'.\nUpdated.\nUpdating certificates for /usr/local/etc/openssl/cert.pem: Already up to date.\n\n$ rvm rubygems latest\nInstalled rubygems 2.5.1 is newer than 2.4.8 provided with installed ruby, skipping installation, use --force to force installation.\n\n$ gem install rails\nERROR:  Could not find a valid gem 'rails' (&gt;= 0), here is why:\n          Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=error: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)\n</code></pre>\n\n<p>Why am I receiving the error <code>certificate verify failed</code>? When I navigate to the link <a href=\"https://api.rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">https://api.rubygems.org/specs.4.8.gz</a> on the browser, it downloads without problem.</p>\n"}, {"tags": ["ruby", "sorting", "elasticsearch"], "comments": [{"owner": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "edited": false, "score": 0, "creation_date": 1480468670, "post_id": 40875443, "comment_id": 68972221, "body": "Scripting or build a custom field <b>at indexing time</b> that will contain the already built value for sorting."}, {"owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "reply_to_user": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "edited": false, "score": 0, "creation_date": 1480541430, "post_id": 40875443, "comment_id": 69010909, "body": "Sadly, @andrei-stefan, I believe you are correct. Add your comment as an answer below and I&#39;ll accept it after a day or 2 if no other answer comes along."}], "answers": [{"tags": [], "owner": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1480558528, "creation_date": 1480558528, "answer_id": 40901536, "question_id": 40875443, "link": "https://stackoverflow.com/questions/40875443/elasticsearch-conditionally-sort-on-2-fields-1-replaces-the-other-if-it-exists/40901536#40901536", "title": "Elasticsearch: conditionally sort on 2 fields, 1 replaces the other if it exists", "body": "<p>The only way is scripting or building a custom field at indexing time that will contain the already built value for sorting.</p>\n"}], "owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 40901536, "answer_count": 1, "score": 1, "last_activity_date": 1480558528, "creation_date": 1480452285, "last_edit_date": 1480452738, "question_id": 40875443, "link": "https://stackoverflow.com/questions/40875443/elasticsearch-conditionally-sort-on-2-fields-1-replaces-the-other-if-it-exists", "title": "Elasticsearch: conditionally sort on 2 fields, 1 replaces the other if it exists", "body": "<p>Without scripting, I need to sort records based on rating. The system-rating exists for all records, but a user-rating may or may not exist. If a user-rating does exist I want to use that value in the sort instead of the system-rating, for that particular record and only for that record.</p>\n\n<p>Tried looking into the <code>missing</code> setting but it only allows <code>_first</code>, <code>_last</code> or a custom value (that will be used for missing docs as the sort value):</p>\n\n<pre><code>{\n    \"sort\" : [\n        { \"user_rating\" : {\"missing\" : \"_last\"} },\n    ],\n    \"query\" : {\n        \"term\" : { \"meal\" : \"cabbage\" }\n    }\n}\n</code></pre>\n\n<p>...but is there a way to specify the custom value should be <code>system_rating</code> when <code>user_rating</code> is missing?</p>\n\n<p>I can do the following:</p>\n\n<pre><code>query_hash[:sort] = []\nif user_rating.exist?\n  query_hash[:sort] &lt;&lt; {\n    \"user_rating\" =&gt; {\n      \"order\": sort_direction,\n      \"unmapped_type\": \"long\",\n      \"missing\": \"_last\",\n    }\n  }\nend\nquery_hash[:sort] &lt;&lt; {\n  \"system_rating\" =&gt; {\n    \"order\": sort_direction,\n    \"unmapped_type\": \"long\",\n  }\n}\n</code></pre>\n\n<p>...but that will always sort user rated records on top regardless of the <code>user_rating</code> value.</p>\n\n<p>I know that scripting will allow me to do it but we cannot use scripting. Is it possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multidimensional-array", "flatten"], "answers": [{"comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1480450037, "post_id": 40874730, "comment_id": 68964763, "body": "@@sagarpandya82 beat me to it."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1480450077, "post_id": 40874730, "comment_id": 68964790, "body": "No, we have different answers!"}, {"owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "edited": false, "score": 2, "creation_date": 1480450152, "post_id": 40874730, "comment_id": 68964833, "body": "And this is te perfect answer for my problem. Thank you"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "edited": false, "score": 1, "creation_date": 1480450500, "post_id": 40874730, "comment_id": 68964991, "body": "@RickySpanish updated with a possibly better way, take a look."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "edited": false, "score": 1, "creation_date": 1480450937, "post_id": 40874730, "comment_id": 68965249, "body": "@RickySpanish removed alternative, as Anuj has already posted, it&#39;s actually the better solution so  I&#39;d accept that answer."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 3, "last_activity_date": 1480450881, "last_edit_date": 1480450881, "creation_date": 1480449554, "answer_id": 40874730, "question_id": 40874674, "link": "https://stackoverflow.com/questions/40874674/ruby-convert-multidimensional-array-into-one-array/40874730#40874730", "title": "ruby convert multidimensional array into one array", "body": "<p>You could do something like this:</p>\n\n<pre><code>arr = [[[\"/path/element1\", false], 7], [[4, true], 5], [[\"/path/element6\", false], 1]]\narr.map { |k,v| [*k,v] }\n#=&gt; [[\"/path/element1\", false, 7], [4, true, 5], [\"/path/element6\", false, 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "is_accepted": false, "score": 2, "last_activity_date": 1480450686, "last_edit_date": 1495541828, "creation_date": 1480449939, "answer_id": 40874863, "question_id": 40874674, "link": "https://stackoverflow.com/questions/40874674/ruby-convert-multidimensional-array-into-one-array/40874863#40874863", "title": "ruby convert multidimensional array into one array", "body": "<p>You can use the <a href=\"http://apidock.com/ruby/Array/flatten\" rel=\"nofollow noreferrer\">Ruby flatten method</a>.</p>\n\n<pre><code>[[[\"/path/element1\", false], 7], [[4, true], 5], [[\"/path/element6\", false], 1]].flatten(1)\n\nresult =&gt; [[\"/path/element1\", false], 7, [4, true], 5, [\"/path/element6\", false], 1]\n</code></pre>\n\n<p>Also posted here in this <a href=\"https://stackoverflow.com/questions/5612625/how-to-flatten-an-array-of-arrays-but-not-all-the-way-down\">question/answer</a>.</p>\n\n<p>Update below to at least make this correct (like the other answers).\nTo flatten a level deeper, you can use .map to flatten the lower arrays.</p>\n\n<pre><code>[[[\"/path/element1\", false], 7], [[4, true], 5], [[\"/path/element6\", false], 1]].map {|x| x.flatten }\n\nresult =&gt; [[\"/path/element1\", false, 7], [4, true, 5], [\"/path/element6\", false, 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 5068445, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vRVZ7.jpg?s=128&g=1", "display_name": "Anuj Dhanju", "link": "https://stackoverflow.com/users/5068445/anuj-dhanju"}, "is_accepted": false, "score": 7, "last_activity_date": 1480450177, "creation_date": 1480450177, "answer_id": 40874921, "question_id": 40874674, "link": "https://stackoverflow.com/questions/40874674/ruby-convert-multidimensional-array-into-one-array/40874921#40874921", "title": "ruby convert multidimensional array into one array", "body": "<p>Easy and simple do flatten to each sub array.</p>\n\n<pre><code>output_array=[[[\"/path/element1\", false], 7], [[4, true], 5], [[\"/path/element6\", false], 1]].map{|x| x.flatten}\n</code></pre>\n"}], "owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1980, "favorite_count": 0, "accepted_answer_id": 40874730, "answer_count": 3, "score": 1, "last_activity_date": 1480450881, "creation_date": 1480449359, "last_edit_date": 1480450761, "question_id": 40874674, "link": "https://stackoverflow.com/questions/40874674/ruby-convert-multidimensional-array-into-one-array", "title": "ruby convert multidimensional array into one array", "body": "<p>I've merged 2 lists.</p>\n\n<pre><code>list1 = customer.links.where(ext: true).group(:link_id, :external).limit(100).order('count_id desc').count('id') \nlist2 = customer.links.where(ext: false).where.not(url: '/specific_link').group(:url, :ext).limit(100).order('count_id desc').count('id')\n\nlist = list1.merge(list2).sort_by{|k, v| -v}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>[[[\"/path/element1\", false], 7], [[4, true], 5], [[\"/path/element6\", false], 1]]\n</code></pre>\n\n<p>I want to convert it into a on dimensional hash, like that:</p>\n\n<pre><code>[[\"/path/element1\", false, 7], [4, true, 5], [\"/path/element6\", false, 1]]\n</code></pre>\n\n<p>When I use <code>flatten</code>, there is no separation between the arrays.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for", "fields-for"], "answers": [{"tags": [], "owner": {"reputation": 493, "user_id": 5068445, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vRVZ7.jpg?s=128&g=1", "display_name": "Anuj Dhanju", "link": "https://stackoverflow.com/users/5068445/anuj-dhanju"}, "is_accepted": false, "score": 1, "last_activity_date": 1480450716, "creation_date": 1480450716, "answer_id": 40875057, "question_id": 40874309, "link": "https://stackoverflow.com/questions/40874309/ror-nested-form-and-patch/40875057#40875057", "title": "RoR: Nested form and Patch", "body": "<p>It seems your model file name is not correct.(homework_students.rb)\nIt should be singular (homework_student.rb). Also your model class name will be singular.</p>\n"}], "owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480450716, "creation_date": 1480447979, "question_id": 40874309, "link": "https://stackoverflow.com/questions/40874309/ror-nested-form-and-patch", "title": "RoR: Nested form and Patch", "body": "<p>I have a form in my application with which I am looking to update fields in a column called \"interest\" using radio buttons which is in another model called \"homework_students\" so I am using (or trying!) a nested form:</p>\n\n<pre><code>    &lt;%= form_for @homework, url: homework_homework_student_path(:homework_id =&gt; @homework, home_work_students_id =&gt; @homework_student,  :controller =&gt; 'homeworks', :action =&gt; 'update_interest'), method: :patch do |f| %&gt;\n\n  &lt;%= f.fields_for :homework_students do |builder| %&gt;\n\n  &lt;%= builder.radio_button :interest, '1' %&gt;\n  &lt;/label&gt;\n  1\n  &lt;label&gt;\n    &lt;%= builder.radio_button :interest, '2' %&gt;\n  &lt;/label&gt;\n  2\n  &lt;label&gt;\n    &lt;%= builder.radio_button :interest, '3' %&gt;\n    3\n  &lt;/label&gt;\n&lt;%= f.button :submit %&gt;\n\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In my models:</p>\n\n<p>homework.rb:</p>\n\n<pre><code>has_many :homework_students, :class_name =&gt; 'HomeworkStudent', dependent: :destroy\naccepts_nested_attributes_for :homework_students\n</code></pre>\n\n<p>homework_students.rb</p>\n\n<pre><code>belongs_to :homework, :class_name =&gt; 'Homework', :foreign_key =&gt; :homework_id, dependent: :destroy\n</code></pre>\n\n<p>The action I want to use in my controller (homeworks_controller.rb):</p>\n\n<pre><code>def update_interest\n     @homework.homework_students.where(id: params[:home_work_students_id]).each do |homework_student| homework_student.update_attributes(:interest)\n    end\n    redirect_to @homework, notice: 'Homework was successfully updated.'\nend\n</code></pre>\n\n<p>I am trying Patch here so in my routes:</p>\n\n<pre><code>resources :homeworks do\n      member do\n        patch :update_interest\n      end\n    resources :homework_students\n  end\n</code></pre>\n\n<p>But it does not seem to use \"update_interest\" action. I don't have a homework_students controller either. I get this error, but probably more wrong with the above too.</p>\n\n<pre><code>undefined local variable or method `homework_student'\n</code></pre>\n\n<p>Thanks. Appreciate any guidance. Can give more info. </p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1480450120, "last_edit_date": 1495542266, "creation_date": 1480450120, "answer_id": 40874909, "question_id": 40874291, "link": "https://stackoverflow.com/questions/40874291/why-does-css-work-with-this-nokogiri-object-but-not-xpath/40874909#40874909", "title": "Why does .css work with this Nokogiri object but not XPath?", "body": "<p>Assuming <code>case_insensitive_equals</code> does what its name suggests, it is because the <code>class</code> attribute isn\u2019t equal to <code>post-head</code> (case insensitively or not), but it does <em>contain</em> it. XPath treats <code>class</code> attributes as plain strings, it doesn\u2019t split them and handle the classes individually as CSS does.</p>\n\n<p>A simple XPath that would work would be:</p>\n\n<pre><code>doc.xpath('//hgroup[contains(@class, \"post-head\")]//h2')\n</code></pre>\n\n<p>(I\u2019ve removed the custom function, you will need to write your own to do this case insensitively.)</p>\n\n<p>This isn\u2019t quite the same though, as it will also match classes such as <code>not-post-head</code>. A more complete XPath would be <a href=\"https://stackoverflow.com/questions/1604471/how-can-i-find-an-element-by-css-class-with-xpath\">something like this</a>:</p>\n\n<pre><code>doc.xpath('//hgroup[contains(concat(\" \", normalize-space(@class), \" \"), \" post-head \")]//h2')\n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1480459610, "accepted_answer_id": 40874909, "answer_count": 1, "score": 1, "last_activity_date": 1480459552, "creation_date": 1480447928, "last_edit_date": 1480459552, "question_id": 40874291, "link": "https://stackoverflow.com/questions/40874291/why-does-css-work-with-this-nokogiri-object-but-not-xpath", "closed_reason": "Duplicate", "title": "Why does .css work with this Nokogiri object but not XPath?", "body": "<p>Why does the CSS selector return the correct info, but the XPath does not?</p>\n\n<pre><code>source = \"&lt;hgroup class='page-header channel post-head' data-channel='tech' data-section='sec0=tech&amp;amp;sec1=index&amp;amp;sec2='&gt;&lt;h2&gt;Tech&lt;/h2&gt;&lt;/hgroup&gt;\"\n\ndoc = Nokogiri::HTML(source)\ndoc.xpath('//hgroup[case_insensitive_equals(@class,\"post-head\")]//h2', XpathFunctions.new)\n =&gt; [] \n\ndoc.css(\"hgroup.post-head\")[0].css(\"h2\")\n =&gt; [#&lt;Nokogiri::XML::Element:0x6c2b824 name=\"h2\" children=[#&lt;Nokogiri::XML::Text:0x6c2b554 \"Tech\"&gt;]&gt;] \n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec", "factory-bot", "instance-variables"], "comments": [{"owner": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 3, "creation_date": 1480448021, "post_id": 40874252, "comment_id": 68963672, "body": "Try <code>@video.reload.title</code>, to update record from DB."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 1, "creation_date": 1480454981, "post_id": 40874252, "comment_id": 68967296, "body": "@SergiiK has the correct idea. Simply put when you create <code>@video</code> it is now disconnected from the database changes (static copy in a Video object) <code>reload</code> will cause it to refresh itself from the database showing the changes made since its initial assignment."}, {"owner": {"reputation": 512, "user_id": 6952495, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oEQEL.jpg?s=128&g=1", "display_name": "RyanQuey", "link": "https://stackoverflow.com/users/6952495/ryanquey"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1480527287, "post_id": 40874252, "comment_id": 69003194, "body": "@engineersmnky, Thanks, this solved the problem! Is there any resource for this though, or any documentation that I could look at that addresses this? You might have been able to tell even from my original post, but it was hard for me to even know what question I was supposed to ask to figure this out\u2026"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1480602034, "post_id": 40874252, "comment_id": 69038100, "body": "<a href=\"https://binarapps.com/blog/rspec-reload-objects\" rel=\"nofollow noreferrer\">binarapps.com/blog/rspec-reload-objects</a> <a href=\"https://everydayrails.com/2015/04/05/rspec-assigns-rails-testing.html\" rel=\"nofollow noreferrer\">everydayrails.com/2015/04/05/rspec-assigns-rails-testing.htm&zwnj;&#8203;l</a> <a href=\"http://spaghettirefactory.blogspot.com/2015/01/reload-stale-objects-in-finnicky-rails.html\" rel=\"nofollow noreferrer\">spaghettirefactory.blogspot.com/2015/01/&hellip;</a> I am sure you can find more"}], "answers": [{"tags": [], "owner": {"reputation": 512, "user_id": 6952495, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oEQEL.jpg?s=128&g=1", "display_name": "RyanQuey", "link": "https://stackoverflow.com/users/6952495/ryanquey"}, "is_accepted": true, "score": 0, "last_activity_date": 1480607574, "creation_date": 1480607574, "answer_id": 40915040, "question_id": 40874252, "link": "https://stackoverflow.com/questions/40874252/behavior-of-assigning-instance-variable-to-persistent-data-that-factory-girl-cre/40915040#40915040", "title": "Behavior of assigning instance variable to persistent data that factory girl creates", "body": "<p>The solution is to use <code>@video.reload.title</code>, to update record from DB.</p>\n\n<p>When you create <code>@video</code> it is now disconnected from the database changes (static copy in a Video object) <code>reload</code> will cause it to refresh itself from the database showing the changes made since its initial assignment.</p>\n\n<p><strong>Resources include:</strong></p>\n\n<ul>\n<li><a href=\"http://binarapps.com/blog/rspec-reload-objects\" rel=\"nofollow noreferrer\">binarapps.com/blog/rspec-reload-objects</a> </li>\n<li><a href=\"http://everydayrails.com/2015/04/05/rspec-assigns-rails-testing.html\" rel=\"nofollow noreferrer\">everydayrails.com/2015/04/05/rspec-assigns-rails-testing.htm\u200c\u200bl</a> </li>\n<li><a href=\"http://spaghettirefactory.blogspot.com/2015/01/reload-stale-objects-in-finnicky-rails.html\" rel=\"nofollow noreferrer\">http://spaghettirefactory.blogspot.com/2015/01/reload-stale-objects-in-finnicky-rails.html</a></li>\n</ul>\n\n<p>(Credit goes to @SergiiK and @engineersmnky who answered the question in the above comments.)</p>\n"}], "owner": {"reputation": 512, "user_id": 6952495, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oEQEL.jpg?s=128&g=1", "display_name": "RyanQuey", "link": "https://stackoverflow.com/users/6952495/ryanquey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 40915040, "answer_count": 1, "score": 1, "last_activity_date": 1480607574, "creation_date": 1480447812, "question_id": 40874252, "link": "https://stackoverflow.com/questions/40874252/behavior-of-assigning-instance-variable-to-persistent-data-that-factory-girl-cre", "title": "Behavior of assigning instance variable to persistent data that factory girl creates", "body": "<p>I have seen this kind of notation elsewhere: <code>@user = FactoryGirl.create(:user)</code>, but can't figure out exactly how this instance variable will behave.</p>\n\n<p>Specifically, I'm wondering about the behavior of this instance variable. For example, I'm currently creating integration tests in RSpec. In one of the tests, I tried to assign an instance variable to an instance of my Video class:</p>\n\n<pre><code>@video = FactoryGirl.create(:video, title: \"Test title\")\n</code></pre>\n\n<p>I have no trouble at that point accessing the different attributes of the video instance (e.g., using <code>@video.title</code>)). </p>\n\n<p>However, I am creating an integration test to make sure that a user can clear the \"title\" field in the form and when the video updates, the title is erased in the database. E.g.,</p>\n\n<pre><code>click_link \"Edit\"\nfill_in \"Title\", with: \"\"\nclick_button \"Update Video\"\nexpect(find('#title')).to_not have_content \"Test title\"\n</code></pre>\n\n<p>For some reason, the page displays correctly, but when I try to access the instance using the instance variable, no change has occurred: <code>print @video.title</code> returns <code>\"Test title\"</code></p>\n\n<p>What is strange is that in a different integration test I use a similar process to update the video instance's attributes (e.g., to \"Updated Test title\"). I then tested to see if the attributes updated correctly in the webpage, and they did, but this time instance variable also reflected that (using <code>print @video.title</code>). </p>\n\n<p>Any guesses on why this would be the case?</p>\n"}, {"tags": ["json", "ruby", "jira"], "comments": [{"owner": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "edited": false, "score": 0, "creation_date": 1480448305, "post_id": 40874140, "comment_id": 68963827, "body": "What does the <code>Project</code> represent? What does the <code>find()</code> method return? List, hash, tuple? Is it specific to some library/class that <code>client</code> object is or a general Python question?"}, {"owner": {"reputation": 11, "user_id": 7227234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1dd946045897a53fda12b008abaaf25?s=128&d=identicon&r=PG&f=1", "display_name": "Needa M", "link": "https://stackoverflow.com/users/7227234/needa-m"}, "reply_to_user": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "edited": false, "score": 0, "creation_date": 1480449503, "post_id": 40874140, "comment_id": 68964472, "body": "Sorry if my question was vague. It&#39;s my first time here :) I have edited my question. Please let me know if I need anything else to make my post clear. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 6780349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nTE9G.jpg?s=128&g=1", "display_name": "Runningriot", "link": "https://stackoverflow.com/users/6780349/runningriot"}, "is_accepted": false, "score": 0, "last_activity_date": 1480453427, "creation_date": 1480453427, "answer_id": 40875716, "question_id": 40874140, "link": "https://stackoverflow.com/questions/40874140/how-to-page-through-issues-for-a-given-project-in-ruby/40875716#40875716", "title": "How to page through issues for a given project in Ruby", "body": "<p>Looking into the Github page you supplied I see in the actual code and option called :max_results. Setting this should do the trick if you know how much results you want to see (if there are huge amounts of issue querying them all at once will might not be the best idea). </p>\n\n<p>If the :max_results option isn't actually implemented you might try any of the following solutions:</p>\n\n<blockquote>\n  <p>project = client.Project.find('SAMPLEPROJECT&amp;StartAt=51')</p>\n</blockquote>\n\n<p>This will show the next 50 results and so on.\nOr</p>\n\n<blockquote>\n  <p>project = client.Project.find('SAMPLEPROJECT&amp;maxResults=250')</p>\n</blockquote>\n\n<p>Which as you already guessed provides the amount of results you point out.</p>\n\n<p>Source: <a href=\"https://answers.atlassian.com/questions/39128076/how-to-get-more-than-50-issues-with-search-api\" rel=\"nofollow noreferrer\">https://answers.atlassian.com/questions/39128076/how-to-get-more-than-50-issues-with-search-api</a></p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 11, "user_id": 7227234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1dd946045897a53fda12b008abaaf25?s=128&d=identicon&r=PG&f=1", "display_name": "Needa M", "link": "https://stackoverflow.com/users/7227234/needa-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480453427, "creation_date": 1480447397, "last_edit_date": 1480449316, "question_id": 40874140, "link": "https://stackoverflow.com/questions/40874140/how-to-page-through-issues-for-a-given-project-in-ruby", "title": "How to page through issues for a given project in Ruby", "body": "<p>How do I loop through all of the issues for a given project? Say I am doing something like this:</p>\n\n<pre><code>project = client.Project.find('SAMPLEPROJECT')\nproject.issues.each do |issue|\nputs \"#{issue.id} - #{issue.summary}\"\nend\n</code></pre>\n\n<p>project.issues returns only the first 50 and I'm unsure how to get the next 50 and so on.</p>\n\n<p>Here is a link to the gem: <strong><a href=\"https://github.com/sumoheavy/jira-ruby\" rel=\"nofollow noreferrer\">https://github.com/sumoheavy/jira-ruby</a></strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "edited": false, "score": 0, "creation_date": 1480446776, "post_id": 40873795, "comment_id": 68962978, "body": "share your code"}, {"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "edited": false, "score": 0, "creation_date": 1480507060, "post_id": 40873795, "comment_id": 68989280, "body": "What exactly is your question? What is your expected behaviour and what&#39;s the actual? Also, please don&#39;t post code that is not relevant to your question (like other controller actions) and please try harder with punctuation in your English."}, {"owner": {"reputation": 1, "user_id": 4205663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081271518/picture?type=large", "display_name": "Aneesh Kohli", "link": "https://stackoverflow.com/users/4205663/aneesh-kohli"}, "edited": false, "score": 0, "creation_date": 1480524263, "post_id": 40873795, "comment_id": 69001309, "body": "Expected behavior is image should be displayed ..but iam getting ArgumentError in Shakes#index , nil is not a valid asset source Erro"}], "owner": {"reputation": 1, "user_id": 4205663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081271518/picture?type=large", "display_name": "Aneesh Kohli", "link": "https://stackoverflow.com/users/4205663/aneesh-kohli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480504376, "creation_date": 1480446235, "last_edit_date": 1480504376, "question_id": 40873795, "link": "https://stackoverflow.com/questions/40873795/argumenterror-in-shakesindex-nil-is-not-a-valid-asset-source", "title": "ArgumentError in Shakes#index , nil is not a valid asset source", "body": "<p>Hi guys when iam trying to pull image using image tag its giving nil is not a valid asset source ive image file in my assests , strangely this problem is only occuring when iam trying use decorator pattern else without it image is being properly displaye ,Iam fairly new to this can any of the experts shred some light what am i doing wrong ?\nThanks</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>require 'shake_decorator'\r\n\r\nclass ShakesController &lt; ApplicationController\r\n  before_action :set_shake, only: [:show, :edit, :update, :destroy]\r\n\r\n  # GET /shakes\r\n  # GET /shakes.json\r\n  def index\r\n    @shakes = Shake.all\r\n  end\r\n\r\n  # GET /shakes/1\r\n  # GET /shakes/1.json\r\n  def show\r\n  end\r\n\r\n  # GET /shakes/new\r\n  def new\r\n    @shake = Shake.new\r\n  end\r\n\r\n  # GET /shakes/1/edit\r\n  def edit\r\n  end\r\n\r\n  # POST /shakes\r\n  # POST /shakes.json\r\n  def create\r\n  \r\n     @shake = Shake.new()\r\n     @shake.Name=params[:shake][:Name]\r\n     @shake.Cost=params[:shake][:Cost]\r\n     @shake.Calories=params[:shake][:Calories]\r\n   \r\n  \r\n   # create an instance/object of a BasicCar\r\n   \r\n\r\n\r\n     myShake=BasicShake.new(@shake.Cost,@shake.Calories)\r\n\r\n\r\n    #add the extra features to the new car\r\n   if params[:shake][:caramel].to_s.length &gt; 0 then\r\n     myShake = CaramelDecorator.new(myShake)\r\n   end\r\n   if params[:shake][:pbutter].to_s.length &gt; 0 then\r\n     myShake = PeanutbutterDecorator.new(myShake)\r\n   end\r\n   if params[:shake][:cream].to_s.length &gt; 0 then\r\n     myShake = CreamDecorator.new(myShake)\r\n   end\r\n      #populate the cost and the description details\r\n    @shake.Cost = myShake.cost\r\n    @shake.description = myShake.details\r\n\r\n     #retrieve the instance/object of the MyLogger class\r\n  \r\n \r\n\r\n       respond_to do |format|\r\n      if @shake.save\r\n        format.html { redirect_to @shake, notice: 'Shake was successfully created.' }\r\n        format.json { render :show, status: :created, location: @shake }\r\n      else\r\n        format.html { render :new }\r\n        format.json { render json: @shake.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # DELETE /shakes/1\r\n  # DELETE /shakes/1.json\r\n  def destroy\r\n    @shake.destroy\r\n    respond_to do |format|\r\n      format.html { redirect_to shakes_url, notice: 'Shake was successfully destroyed.' }\r\n      format.json { head :no_content }\r\n    end\r\n  end\r\n\r\n  private\r\n    # Use callbacks to share common setup or constraints between actions.\r\n    def set_shake\r\n      @shake = Shake.find(params[:id])\r\n    end\r\n\r\n    # Never trust parameters from the scary internet, only allow the white list through.\r\n    def shake_params\r\n      params.require(:shake).permit(:Name, :Cost, :Calories, :image_url)\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\r\n\r\n&lt;h1&gt;Shakes&lt;/h1&gt;\r\n\r\n&lt;table border=\"2\"&gt;\r\n  &lt;thead&gt;\r\n    &lt;tr&gt;\r\n      &lt;th&gt;Name&lt;/th&gt;\r\n      &lt;th&gt;Cost&lt;/th&gt;\r\n      &lt;th&gt;Calories&lt;/th&gt;\r\n      &lt;th&gt;Image url&lt;/th&gt;\r\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\r\n    &lt;/tr&gt;\r\n  &lt;/thead&gt;\r\n\r\n  &lt;tbody&gt;\r\n    &lt;% @shakes.each do |shake| %&gt;\r\n      &lt;tr&gt;\r\n        &lt;td&gt;&lt;%= shake.Name %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%= shake.Cost %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%= shake.Calories %&gt;&lt;/td&gt;\r\n           &lt;td&gt;&lt;%= image_tag(shake.image_url, :class =&gt; 'list_image' ,:style =&gt; \"height:100px\") %&gt;&lt;/td&gt;\r\n\r\n    \r\n\r\n\r\n    \r\n        &lt;td&gt;&lt;%= link_to 'Show', shake %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_shake_path(shake) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%= link_to 'Destroy', shake, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\r\n      &lt;/tr&gt;\r\n    &lt;% end %&gt;\r\n  &lt;/tbody&gt;\r\n&lt;/table&gt;\r\n\r\n&lt;br&gt;\r\n\r\n&lt;%= link_to 'New Shake', new_shake_path %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1480445321, "post_id": 40873423, "comment_id": 68962144, "body": "Why are you allowing the user to handle <code>id</code>s? This is a bad practice."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 1, "creation_date": 1480445531, "post_id": 40873423, "comment_id": 68962267, "body": "I would suggest debugging <code>params</code>. You might need to do something like <code>params[:travel_id]</code> instead. But I still would not allow users to choose <code>id</code>s."}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1480445587, "post_id": 40873423, "comment_id": 68962300, "body": "@Dbz I just try to add the travel id in the :travel_id column of my table post, the field in the form is just here to help me, I&#39;ll remove that line when it will work"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 1, "creation_date": 1480445729, "post_id": 40873423, "comment_id": 68962402, "body": "My guess is that <code>id</code> is returning the <code>post_id</code>, and not the <code>travel_id</code>, so when you use it to search for the <code>travel</code>, it doesn&#39;t find it because it is a larger number than all of the travels."}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1480445841, "post_id": 40873423, "comment_id": 68962455, "body": "@Dbz And you&#39;re right, when I put :travel_id instead of :id, it work ! thank you very much for your help !"}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": true, "score": 1, "last_activity_date": 1480448323, "creation_date": 1480448323, "answer_id": 40874405, "question_id": 40873423, "link": "https://stackoverflow.com/questions/40873423/activerecord-couldnt-find-travel-with-id/40874405#40874405", "title": "ActiveRecord Couldn&#39;t find Travel with &#39;id&#39;=", "body": "<p><code>params[:id]</code> will give you the <code>post</code>'s <code>id</code>, and you're using it to find a <code>travel</code>. This could potentially not error and give you the wrong travel, but that's not what you're looking for. You specified <code>travel_id</code> in your form, so what you are looking for is <code>params[:travel_id]</code>.</p>\n\n<p>In the future you may want to use the <code>debugger</code> right at the top of the controller function and <code>puts</code> the <code>params</code> object to see what's inside. This will give you insight to if you're calling the wrong <code>key</code>s and what the structure looks like as things get complicated.</p>\n"}], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 40874405, "answer_count": 1, "score": 1, "last_activity_date": 1480448323, "creation_date": 1480445054, "question_id": 40873423, "link": "https://stackoverflow.com/questions/40873423/activerecord-couldnt-find-travel-with-id", "title": "ActiveRecord Couldn&#39;t find Travel with &#39;id&#39;=", "body": "<p>I search a solution on stackoverflow but there are different issues each time, so I decided to ask the question.\nOn my application, I have Travel, which has many posts. One user can create many travels, with many posts on one travel. \nBut when I try to create a post, I have this error : </p>\n\n<pre><code>ActiveRecord::RecordNotFound in PostsController#create\nCouldn't find Travel with 'id'=\n</code></pre>\n\n<p>I don't understand why, so if someone could help me ..\nHere is my Posts_controller.rb (create action):</p>\n\n<pre><code>def create\n    @travel = Travel.find(params[:id])\n    @post = @travel.posts.new(posts_params)\n    @post.user = current_user\n    if @post.save\n        flash[:success] = \"Your post is published\"\n        redirect_to user_path(current_user)\n    else\n        render 'new'\n    end\nend\n</code></pre>\n\n<p>Here is my the models :</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :travel\n\n  geocoded_by :country\n  after_validation :geocode\nend\n\nclass Travel &lt; ApplicationRecord\n  has_many :posts\n  belongs_to :user\nend\n</code></pre>\n\n<p>My routes :</p>\n\n<pre><code># Travel\n    resources :travels, :shallow =&gt; true do\n        # Posts\n        resources :posts\n    end\n</code></pre>\n\n<p>And a ligne for form : </p>\n\n<pre><code>&lt;%= form_for(@post, :html =&gt; {class: \"form-horizontal\", role: \"form\"}, :url =&gt; travel_posts_path(@travel)) do |f| %&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;%= f.text_field :travel_id, placeholder: @travel.id %&gt;\n        &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "race-condition", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4075220, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/82d0ebc91df77ca9ecc5185b811fe7cd?s=128&d=identicon&r=PG", "display_name": "Jesper Lugner", "link": "https://stackoverflow.com/users/4075220/jesper-lugner"}, "edited": false, "score": 0, "creation_date": 1480598488, "post_id": 40895421, "comment_id": 69035586, "body": "1) The loop is just a ugly hack to make sure all threads start at the same time. You were right regarding &quot;pod.save&quot;, I edited it to match my example.  2) I&#39;ll have to try that out. I thought I configured it to clean after each test, but you might very well be correct.  3) Yeah, that&#39;s the solution I&#39;m using. And you are right that I can probably just trust the DB to handle it correctly. I have a few other scenarios that might be a bit harder to solve though, so a general way to test race conditions would still be great."}], "tags": [], "owner": {"reputation": 646, "user_id": 31352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c32b63b4a7dbe19c9327eca4e231bc8?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/31352/brad"}, "is_accepted": false, "score": 1, "last_activity_date": 1480529754, "creation_date": 1480529754, "answer_id": 40895421, "question_id": 40873013, "link": "https://stackoverflow.com/questions/40873013/testing-rails-for-race-conditions-and-cleaning-up-afterwards/40895421#40895421", "title": "Testing rails for race conditions, and cleaning up afterwards", "body": "<p>A few things:</p>\n\n<p>1) Probably my ignorance, but the <code>true while should_wait</code> line seems wrong to me. Something more like <code>while should_wait do</code> seems more like what you intend. You also call <code>pod.save</code> which seems to not make sense, so I'm guessing this is not exactly the code you're using.</p>\n\n<p>2) I would expect database cleaner to work, because I think if you use the \"truncation\" strategy it will go through and truncate every table when the test is run. My wild ass guess is that you have configured it to only run for integration tests and this is a unit test, or something like that. If that's not it, try calling <code>DatabaseCleaner.truncate</code> (or however you do that explicitly) at the end of the test and see if that works.</p>\n\n<p>3) Can you solve the problem with a unique index in your DB? That removes the need for this test at all because you get to just trust your database. When you do get a non-unique value you can handle that in a non-validation way in your code. Much faster too, because you don't have to make the extra sql call every time you save.</p>\n\n<p>4) Impossible to know from the information given why you're getting the circular dependency issue. I've had that issue before and did a <code>puts caller</code> at the top of the file to try to diagnose.</p>\n"}], "owner": {"reputation": 195, "user_id": 4075220, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/82d0ebc91df77ca9ecc5185b811fe7cd?s=128&d=identicon&r=PG", "display_name": "Jesper Lugner", "link": "https://stackoverflow.com/users/4075220/jesper-lugner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480598328, "creation_date": 1480443668, "last_edit_date": 1480598328, "question_id": 40873013, "link": "https://stackoverflow.com/questions/40873013/testing-rails-for-race-conditions-and-cleaning-up-afterwards", "title": "Testing rails for race conditions, and cleaning up afterwards", "body": "<p>I'm trying to test parts of my code for race conditions. The issue I had was related to uniqueness validations, which as it turns out is not safe from race conditions in rails. I believe I'll be able to fix the issue, but I'm not sure how to test my solution. </p>\n\n<p>The closest I've come is the following(inspired by: <a href=\"http://blog.arkency.com/2015/09/testing-race-conditions/\" rel=\"nofollow noreferrer\">http://blog.arkency.com/2015/09/testing-race-conditions/</a>):</p>\n\n<pre><code>test \"Can't create duplicate keys with same value and keyboard\" do\n  assert_equal(5, ActiveRecord::Base.connection.pool.size)\n  begin\n    concurrency_level = 4\n    keyboard = create :keyboard\n    should_wait = true\n\n    statuses = {}\n\n    threads = Array.new(concurrency_level) do |i|\n      Thread.new do\n        true while should_wait\n        begin\n          # Unique validation for key values exists scoped to keyboard\n          key = keyboard.keys.new(value: 'a')\n          statuses[i] = key.save\n        rescue ActiveRecord::RecordNotUnique\n          statuses[i] = false\n        end\n      end\n    end\n    should_wait = false\n    threads.each(&amp;:join)\n\n    assert_equal(1, keyboard.keys.count)\n    assert_equal(1, statuses.count { |_k, v| v })\n    assert_equal(3, statuses.count { |_k, v| !v })\n  ensure\n    ActiveRecord::Base.connection_pool.disconnect!\n  end\nend\n</code></pre>\n\n<p>The code above is structured exactly like mine, but models have changed to be more general.</p>\n\n<p>The test itself seems to work alright. However, keys created in the tests are not deleted afterwards. I'm using DatabaseCleaner, and I've tried all different strategies. Also, sometimes I get a Circular Dependency issue for constant Key. Not sure why, but I'm guessing its due to requires not being thread safe in ruby?</p>\n\n<p>Is there a better way to my problem? As I specified above, I've gotten a few different issues with this, and I feel it should be a common enough problem that good testing standards should exist.</p>\n"}, {"tags": ["ruby", "algorithm", "hashmap"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 4, "creation_date": 1480438693, "post_id": 40871444, "comment_id": 68958532, "body": "You are overcomplicating! Try to study Ruby core and make this smaller."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1480451663, "post_id": 40871444, "comment_id": 68965624, "body": "Your code is very procedural, very un-Ruby-like. Don&#39;t worry, you&#39;ll soon have an &quot;aha&quot; moment, after which writing code the Ruby way will seem both natural and liberating."}, {"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 2, "creation_date": 1480470033, "post_id": 40871444, "comment_id": 68972550, "body": "You posted basically the same question on CS.SE (<a href=\"http://cs.stackexchange.com/q/66651/755\">cs.stackexchange.com/q/66651/755</a>), and got the feedback over there that <a href=\"http://cs.stackexchange.com/q/66651/755\">debugging your code is off-topic on CS.SE and probably off-topic everywhere on the Stack Exchange network</a>.  20 seconds after that comment, you posted here.  I&#39;m not sure why you posted here after you were previously told that posting here is probably off-topic."}, {"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 2, "creation_date": 1480470150, "post_id": 40871444, "comment_id": 68972587, "body": "Anyway, as our <a href=\"https://stackoverflow.com/help\">help center</a> states: &quot;Questions <i>seeking debugging help (&quot;why isn&#39;t this code working?&quot;)</i> must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&quot;  &quot;why isn&#39;t my code working?&quot; does not describe a specific problem or error and thus does not count as a clear problem statement."}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 3, "last_activity_date": 1480444837, "last_edit_date": 1480444837, "creation_date": 1480439265, "answer_id": 40871690, "question_id": 40871444, "link": "https://stackoverflow.com/questions/40871444/hash-map-algorithm/40871690#40871690", "title": "Hash Map Algorithm", "body": "<p>You modify <code>number</code>variable (its just variable not poiter to the hash value) inside loop and its not possible to do it this way.\nAnother problem is <code>letters[str[j]]</code> will never have same value as <code>letter</code> because <code>letters</code> return <code>Integer</code> (count in this case 0) not a <code>String</code>.</p>\n\n<p>So you can modify your code like this:</p>\n\n<pre><code>def letter_count(str)\n  i=0\n  letters = {}\n  while i&lt;str.length\n    letters[str[i]] = 0\n    i+=1\n  end\n  puts letters\n  letters.each do |letter, number|\n    j=0\n    while j&lt;str.length\n      # puts letters[str[j]]\n      if str[j] == letter\n        puts \"something happens\"\n        letters[letter] += 1\n      end\n      j+=1\n    end\n  end\n  letters.delete(\" \")\n  puts letters\n  return letters\nend\n</code></pre>\n\n<p>will produce</p>\n\n<pre><code>letter_count(\"cats\")\n\n# something happens\n# something happens\n# something happens\n# something happens\n# =&gt; {\"c\"=&gt;1, \"a\"=&gt;1, \"t\"=&gt;1, \"s\"=&gt;1}\n</code></pre>\n\n<p><strong>But more redable and simple example:</strong></p>\n\n<pre><code>def letter_count(str)\n  str.chars.each_with_object(Hash.new(0)) do |char, hsh|\n    hsh[char] += 1\n  end\nend\n\nletter_count(\"cats\")\n# =&gt; {\"c\"=&gt;1, \"a\"=&gt;1, \"t\"=&gt;1, \"s\"=&gt;1}\n\nletter_count(\"tests\")\n# =&gt; {\"t\"=&gt;2, \"e\"=&gt;1, \"s\"=&gt;2}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480441962, "post_id": 40871733, "comment_id": 68960285, "body": "This would be a good opportunity to use <code>each_with_object({})</code>. Also don&#39;t call print/puts in the method definition. Print when calling the method."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1480450320, "post_id": 40871733, "comment_id": 68964912, "body": "Yes, I&#39;ve learned recently that initializing a hash like in <code>tmp_hash = {}</code> to use in a block is a code smell in Ruby. <code>#each_with_object</code> would surely be a better way. <code>#inject</code> is also a possibility."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1480467230, "post_id": 40871733, "comment_id": 68971845, "body": "@EddeAlmeida how would you do this with <code>#inject</code>?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480467855, "post_id": 40871733, "comment_id": 68972014, "body": "Haven&#39;t tested the idea, @sagarpandya82. Something like <b><code>str.split(&quot;&quot;).inject(Hash.new(0)) { |h,letter| ...}</code></b>, I think. Gonna try it later. Busy now."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481178595, "post_id": 40871733, "comment_id": 69273529, "body": "@EddeAlmeida In case (like me) you didn&#39;t manage to figure out a way, Cary has kindly posted a method with <code>inject</code> in the comments to his answer."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481193689, "post_id": 40871733, "comment_id": 69282153, "body": "You see? It is possibe! I was missing that &quot;h&quot; in the end."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481194709, "post_id": 40871733, "comment_id": 69282791, "body": "Without that &quot;h&quot; in the end, the block won&#39;t return the hash to iterate the next step."}], "tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 2, "last_activity_date": 1480439369, "creation_date": 1480439369, "answer_id": 40871733, "question_id": 40871444, "link": "https://stackoverflow.com/questions/40871444/hash-map-algorithm/40871733#40871733", "title": "Hash Map Algorithm", "body": "<p>you can do it like this:</p>\n\n<pre><code>def letter_count(str)\n  tmp_hash = {}\n  str.split('').uniq.each do |letter|\n    tmp_hash[letter] = str.count(letter)\n  end\n\n  puts tmp_hash\n  return tmp_hash\nend\n</code></pre>\n\n<p>output</p>\n\n<pre><code>word = 'hello'\nletter_count(word)\n# output: {\"h\"=&gt;1, \"e\"=&gt;1, \"l\"=&gt;2, \"o\"=&gt;1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1480440603, "last_edit_date": 1480440603, "creation_date": 1480439578, "answer_id": 40871792, "question_id": 40871444, "link": "https://stackoverflow.com/questions/40871444/hash-map-algorithm/40871792#40871792", "title": "Hash Map Algorithm", "body": "<p>One way for a string defined in <code>str</code>:</p>\n\n<pre><code>Hash[str.chars.group_by(&amp;:itself).map { |k,v| [k, v.count] }]\n</code></pre>\n\n<p>key methods: <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-chars\" rel=\"nofollow noreferrer\">String#chars</a>, <a href=\"http://ruby-doc.org/core-2.3.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a> and <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-count\" rel=\"nofollow noreferrer\">String#count</a></p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481105807, "post_id": 40872673, "comment_id": 69236761, "body": "Cary, is there a way to do this with <code>inject</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1481173164, "post_id": 40872673, "comment_id": 69271462, "body": "@sagarpandya82, certainly: <code>&quot;muddled&quot;.each_char.inject(Hash.new(0)) { |h,c| h[c] += 1; h } #=&gt; {&quot;m&quot;=&gt;1, &quot;u&quot;=&gt;1, &quot;d&quot;=&gt;3, &quot;l&quot;=&gt;1, &quot;e&quot;=&gt;1}</code>. Old-timers report that before <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">Enumerable#inject</a> (aka <code>reduce</code>) made its debut in Ruby v1.9, <code>inject</code> was used where <code>each_with_object</code> is used now. Note that the order of <code>inject</code>&#39;s block variables is reversed relative to <code>each_with_object</code>&#39;s, and that pesky <code>; h</code> at the end of <code>inject</code>&#39;s block is not needed with <code>each_with_object</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1481178329, "post_id": 40872673, "comment_id": 69273391, "body": "Interesting ty. The <code>h</code> was my undoing, have I feeling I won&#39;t forget it next time for sure."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481193642, "post_id": 40872673, "comment_id": 69282118, "body": "This was the point I was missing. The &quot;h&quot; in the end, so that it could return the hash to the next step!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1480451043, "last_edit_date": 1480451043, "creation_date": 1480442468, "answer_id": 40872673, "question_id": 40871444, "link": "https://stackoverflow.com/questions/40871444/hash-map-algorithm/40872673#40872673", "title": "Hash Map Algorithm", "body": "<p>I would use a <em>counting hash</em>.</p>\n\n<pre><code>\"muddled\".each_char.with_object(Hash.new(0)) { |c,h| h[c] += 1 }\n  #=&gt; { 'm'=&gt;1, 'u'=&gt;1, 'd'=&gt;3, , 'l'=&gt;1, 'e'=&gt;1 }\n</code></pre>\n\n<p>See <a href=\"https://docs.ruby-lang.org/en/2.0.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>, particularly in reference to <em>default value</em> as an argument of <code>new</code>. Ruby expands <code>h[c] += 1</code> to</p>\n\n<pre><code>h[c] = h[c] + 1\n</code></pre>\n\n<p>before processing the expression further. Suppose</p>\n\n<pre><code>h = Hash.new(0).merge('d'=&gt;2)\n  #=&gt; {\"d\"=&gt;2}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>h[\"cat\"]\n  #=&gt; 0\n</code></pre>\n\n<p>because does not have a key <code>'cat'</code> and <code>h</code>'s default value is zero. Now suppose <code>c = 'd'</code>. Then</p>\n\n<pre><code>h['d'] = h['d'] + 1\n   #=&gt; 2 + 1 =&gt; 3\n</code></pre>\n\n<p>so</p>\n\n<pre><code>h #=&gt; {\"d\"=&gt;3}\n</code></pre>\n\n<p>Next, if <code>c = 'm'</code>, because <code>h.key?('m') #=&gt; false</code>, <code>h[c]</code> on the right of the equality returns <code>h</code>'s default value, zero.</p>\n\n<pre><code>h['m'] = h['m'] + 1\n   #=&gt; 0 + 1 =&gt; 1\n</code></pre>\n\n<p>Note that the method <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash[]=</a> on the left of the equality is not the same as the method <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Hash[]</a> on the right side.</p>\n\n<p>I could have instead written</p>\n\n<pre><code>\"muddled\".each_char.with_object({}) do |c,h|\n   h[c] = 0 unless h.key?(c)\n   h[c] += 1\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"muddled\".each_char.with_object({}) { |c,h| h[c] = (h[c] || 0) + 1 }\n</code></pre>\n\n<p>If you are unfamiliar with <a href=\"http://ruby-doc.org/core-2.3.0/Enumerator.html#method-i-with_object\" rel=\"nofollow noreferrer\">Enumerator#with_object</a> it produces the same result as the following, at the expense of two additional lines of code.</p>\n\n<pre><code>h = Hash.new(0)\n\"muddled\".each_char { |c| h[c] += 1 }\nh\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7226411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8959535bd4fffafda72670a1abdd1ef?s=128&d=identicon&r=PG&f=1", "display_name": "knight_of_ni", "link": "https://stackoverflow.com/users/7226411/knight-of-ni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1480451043, "creation_date": 1480438535, "last_edit_date": 1480439480, "question_id": 40871444, "link": "https://stackoverflow.com/questions/40871444/hash-map-algorithm", "title": "Hash Map Algorithm", "body": "<p>The assignment is to count the number of times a letter shows up in a word by using hashmaps. Ex: \"cats\" should be {'c' => 1, 'a' => 1, 't'=>1}, so why isn't the what I've written working? Thanks in advance!</p>\n\n<pre><code>def letter_count(str)\n  i=0 \n  letters = {}\n  while i&lt;str.length \n    letters[str[i]]=0\n    i+=1 \n  end\n  puts letters\n  letters.each do |letter, number| \n    j=0 \n    while j&lt;str.length \n     # puts letters[str[j]]\n      if letters[str[j]] == letter\n        puts \"something happens\"\n        number=number+1 \n      end\n      j+=1 \n    end \n  end\n  letters.delete(\" \")\n  puts letters\n  return letters\nend\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 2488011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S91lB.jpg?s=128&g=1", "display_name": "Dan Hodgins", "link": "https://stackoverflow.com/users/2488011/dan-hodgins"}, "edited": false, "score": 0, "creation_date": 1480451238, "post_id": 40871702, "comment_id": 68965412, "body": "Thanks for the feedback and ideas Steve - it sounds like there are many ways to accomplish this!  -Dan"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1480439286, "creation_date": 1480439286, "answer_id": 40871702, "question_id": 40871184, "link": "https://stackoverflow.com/questions/40871184/rails-jquery-filter-cities-according-to-selected-state-option/40871702#40871702", "title": "Rails &amp; Jquery: Filter Cities According To Selected State Option", "body": "<p>You don't have enough information in the view as it currently is to be able to do what you want... there's nothing in the view that can be used to deduce that \"Los Angeles\" is in \"California\".</p>\n\n<p>You could do this with an ajax call... when <code>#job_state_id</code> changes send a request to the rails app and the rails app will return a new options list. </p>\n\n<p>Alternatively you could create a hidden div with multiple internal divs, containing all city options grouped (per div) by state id, then copy the html of the div relating to the selected state...</p>\n\n<pre><code>&lt;div style=style=\"display: none;\"&gt;\n  &lt;% current_state_id = nil %&gt;\n  &lt;% City.order_by(:state_id).each do |city| %&gt;\n    &lt;% if city.state_id != current_state_id %&gt;\n      &lt;% if current_state_id %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n      &lt;% current_state_id = city.state_id %&gt;\n      &lt;div id='&lt;%=current_state_id %&gt;'&gt;\n    &lt; % end %&gt;\n    &lt;option value=\"&lt;%= city.id %&gt;\"&gt;&lt;%=city.name%&gt;&lt;/option&gt;\n  &lt;% end %&gt;\n  &lt;% if current_state_id %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Then in your code when the state changes do...</p>\n\n<pre><code>var state = $('#job_state_id option:selected').val();\n$('#job_city_id').html($('#' + state).html());\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 2488011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S91lB.jpg?s=128&g=1", "display_name": "Dan Hodgins", "link": "https://stackoverflow.com/users/2488011/dan-hodgins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 40871702, "answer_count": 1, "score": 0, "last_activity_date": 1480451176, "creation_date": 1480437791, "last_edit_date": 1480451176, "question_id": 40871184, "link": "https://stackoverflow.com/questions/40871184/rails-jquery-filter-cities-according-to-selected-state-option", "title": "Rails &amp; Jquery: Filter Cities According To Selected State Option", "body": "<p>Can't figure out how to filter cities based on the selected state's ID using the JQuery filter() method and rails. Already watched Railscasts #88 regular and revised, but I'm not using optgroup, so his recommended way of doing it isn't working. What I'm looking for is what to put inside the filter() method call below. I suspect it should be something like: </p>\n\n<pre><code>.filter(\"select label='job_state_id' \")) \n</code></pre>\n\n<p>Anyway, here is the JQuery: </p>\n\n<pre><code> $(document).ready(function(){  \n     // grab all cities for later filtering\n     cities = $('#job_city_id').html();\n    $('#job_state_id').change(function(){\n      state = $('#job_state_id option:selected').text();\n      // can't figure out how to only display cities of the selected state, hence filter() is blank below\n      options = $(cities).filter().text();\n      $('#job_city_id').html(options);\n  });\n });\n</code></pre>\n\n<p>The Rails model</p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  belongs_to :state\n  belongs_to :city\n\nclass State &lt; ActiveRecord::Base\n\n  has_many :citys\n  has_many :jobs\n\nclass City &lt; ActiveRecord::Base\n  belongs_to :state\n  has_many :jobs\n</code></pre>\n\n<p>The Rails form</p>\n\n<pre><code>&lt;div class=\"field\" &gt;\n        &lt;%= f.label :state_id %&gt;\n        &lt;%= f.collection_select :state_id, State.all, :id, :name, {:prompt =&gt; '-- Select a US State --'} %&gt;\n&lt;/div&gt;\n    &lt;div class=\"field\"&gt; \n    &lt;%= f.label :city_id %&gt;\n    &lt;%= f.collection_select :city_id, City.all, :id, :name, {:prompt =&gt; '-- Select a US City --'} %&gt;\n</code></pre>\n\n<p>and the HTML</p>\n\n<pre><code>&lt;div class=\"field\" &gt;\n        &lt;label for=\"job_state_id\"&gt;State&lt;/label&gt;\n        &lt;select name=\"job[state_id]\" id=\"job_state_id\"&gt;&lt;option value=\"\"&gt;-- Select a US State --&lt;/option&gt;\n&lt;option value=\"1\"&gt;California&lt;/option&gt;\n&lt;option value=\"2\"&gt;Nevada&lt;/option&gt;\n&lt;option value=\"3\"&gt;Oregon&lt;/option&gt;\n&lt;option value=\"4\"&gt;Alaska&lt;/option&gt;&lt;/select&gt;\n&lt;/div&gt;\n    &lt;div class=\"field\"&gt; \n    &lt;label for=\"job_city_id\"&gt;City&lt;/label&gt;\n    &lt;select name=\"job[city_id]\" id=\"job_city_id\"&gt;&lt;option value=\"\"&gt;-- Select a US City --&lt;/option&gt;\n&lt;option value=\"1\"&gt;Los Angeles&lt;/option&gt;\n&lt;option value=\"2\"&gt;San Francisco&lt;/option&gt;\n&lt;option value=\"3\"&gt;Portland&lt;/option&gt;&lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Any help in the right direction would be greatly appreciated!</p>\n\n<p>Dan </p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby", "performance", "frontend"], "comments": [{"owner": {"reputation": 604, "user_id": 1797492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfe82bba479fd0e91b8353038f9355?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/1797492/andr%c3%a9s"}, "edited": false, "score": 2, "creation_date": 1480437426, "post_id": 40870918, "comment_id": 68957696, "body": "This is not an answer to your question, but why you don&#39;t do a REST app in rails and a pure angualr FE app? I think with that approach you will get the best of both worlds. The BE is less stressed rendering views and the FE doesn&#39;t need to reload the page every time to see changes :)"}, {"owner": {"reputation": 4630, "user_id": 3058254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z10oX.jpg?s=128&g=1", "display_name": "Aravin", "link": "https://stackoverflow.com/users/3058254/aravin"}, "edited": false, "score": 0, "creation_date": 1494178035, "post_id": 40870918, "comment_id": 74705655, "body": "@Moises, did you find any solution? I am also looking for the same question :/"}], "answers": [{"comments": [{"owner": {"reputation": 14805, "user_id": 690413, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f550702d221c82a52f8e2ce6bf57318c?s=128&d=identicon&r=PG", "display_name": "pedrommuller", "link": "https://stackoverflow.com/users/690413/pedrommuller"}, "edited": false, "score": 0, "creation_date": 1480441367, "post_id": 40872269, "comment_id": 68960011, "body": "Fair point, performance shouldn&#39;t be a deal breaker, more important is the download time for the client app, using cache / gzip could improve dramatically the user experience"}], "tags": [], "owner": {"reputation": 70, "user_id": 920949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9099108e6ea46e4ac816341a26b384?s=128&d=identicon&r=PG", "display_name": "ragar90", "link": "https://stackoverflow.com/users/920949/ragar90"}, "is_accepted": true, "score": 3, "last_activity_date": 1480441186, "creation_date": 1480441186, "answer_id": 40872269, "question_id": 40870918, "link": "https://stackoverflow.com/questions/40870918/rails-with-angular-vs-rails-pure-views-performance/40872269#40872269", "title": "Rails with angular vs Rails pure (views performance)", "body": "<p>I think that perfomance is not so much a deal breaker because most tools are already optimized and if you have problems of perfomance the most certain is that it is your code that is bad, now the truth I would suggest separating things and that the Front end is just one more client of the server and maybe to speed things up a bit more use a hybrid of SPA and rendering on the server for the first load but otherwise better a SPA because you can follow a design pattern like MVVM and do More testable to front end so you increase the quality of your development</p>\n"}], "owner": {"reputation": 622, "user_id": 819710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Us2AK.jpg?s=128&g=1", "display_name": "Moises Portillo", "link": "https://stackoverflow.com/users/819710/moises-portillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 1, "accepted_answer_id": 40872269, "answer_count": 1, "score": 6, "last_activity_date": 1480441186, "creation_date": 1480437032, "question_id": 40870918, "link": "https://stackoverflow.com/questions/40870918/rails-with-angular-vs-rails-pure-views-performance", "title": "Rails with angular vs Rails pure (views performance)", "body": "<p>I've tried to search on internet information about the views performance with angularJS into Ruby on Rails project vs Ruby on Rails pure. My questions born because 2 months ago I started to work with AngularJS pure and now I need to integrate AngularJS into a new project but need to show what is the performance to render views with AngularJS with Ruby on Rails and remove that charge to Ruby on Rails. </p>\n\n<p>For example:</p>\n\n<p>Angular with Rails:</p>\n\n<p>Get data with Ruby on Rails (from database or GET request), send information to file.js.erb and manipulate data with AngularJS and show views with parse data.</p>\n\n<p>Rails pure:</p>\n\n<p>(natural flow) Get data with Ruby on Rails (from database or GET request), send data to file.html.erb and manipulate data with Ruby.</p>\n\n<p>I know, the questions could be absurd but render view with Ruby on Rails represent a charge to the serve. However, If I manipulate data with AngularJS, I separate the charge to the server and use the web navigator memory.</p>\n"}, {"tags": ["ruby", "encoding"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1480447757, "post_id": 40870500, "comment_id": 68963542, "body": "Your <code>data</code> is an array of strings where the first is <code>&quot;0x4E&quot;</code> (a zero, a small  x, a 4 and an E). There are no special characters, Is it possible you want to check Hex-values? Maybe you get some help here <a href=\"http://stackoverflow.com/questions/30563697/convert-a-hex-string-to-a-hex-int\" title=\"convert a hex string to a hex int\">stackoverflow.com/questions/30563697/&hellip;</a> to improve your question."}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1480448318, "post_id": 40870500, "comment_id": 68963832, "body": "Are you looking for <code>puts char.chr.encode(&#39;iso-8859-1&#39;, invalid: :replace, undef: :replace)</code>"}, {"owner": {"reputation": 303, "user_id": 7157934, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nUGMV.jpg?s=128&g=1", "display_name": "papasmurf", "link": "https://stackoverflow.com/users/7157934/papasmurf"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1480448787, "post_id": 40870500, "comment_id": 68964083, "body": "@knut why would a website URL pull color hex?"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1480449993, "post_id": 40870500, "comment_id": 68964730, "body": "Which colors? The <a href=\"http://stackoverflow.com/questions/30563697/convert-a-hex-string-to-a-hex-int\">question</a> is about converting a hex string to a hex int. Your strings look like strings of hex numbers. If you need numbers, you need first a conversion from string to number."}, {"owner": {"reputation": 303, "user_id": 7157934, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nUGMV.jpg?s=128&g=1", "display_name": "papasmurf", "link": "https://stackoverflow.com/users/7157934/papasmurf"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1480509765, "post_id": 40870500, "comment_id": 68990941, "body": "@knut sorry I misread the information"}], "answers": [{"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 1, "last_activity_date": 1480452380, "creation_date": 1480452380, "answer_id": 40875475, "question_id": 40870500, "link": "https://stackoverflow.com/questions/40870500/io-encoding-errors-in-ruby/40875475#40875475", "title": "IO encoding errors in ruby", "body": "<p>Your array </p>\n\n<pre><code>[\"0x4E\", \"0x3C\", \"0x89\", \"0x50\", \"0xC3\", \"0x47\", \"0xFF\", \"0x70\", \"xFF\", \"0x2F\", \"0xA2\", \"0xB3\", \"0x98\"]\n</code></pre>\n\n<p>is an array of strings, each string has four characters. The first string is \"0x4E\" (a zero, a small x, a 4 and an E)</p>\n\n<p>Probably you want to check an array of hex values like:</p>\n\n<pre><code>data = [0x4E, 0x3C, 0x89, 0x50, 0xC3, 0x47, 0xFF, 0x70, 0xFF, 0x2F, 0xA2, 0xB3, 0x98]\n</code></pre>\n\n<p>To get the character values you can use <code>Integer#chr</code>:</p>\n\n<pre><code>p data.map{|c|c.chr} #-&gt; [\"N\", \"&lt;\", \"\\x89\", \"P\", \"\\xC3\", \"G\", \"\\xFF\", \"p\", \"\\xFF\", \"/\", \"\\xA2\", \"\\xB3\", \"\\x98\"]\n</code></pre>\n\n<p>This characters can be \"encoded\":</p>\n\n<pre><code>p data.map { |char|\n  char.chr.encode('utf-8', invalid: :replace, undef: :replace)\n}    #[\"N\", \"&lt;\", \"\\uFFFD\", \"P\", \"\\uFFFD\", \"G\", \"\\uFFFD\", \"p\", \"\\uFFFD\", \"/\", \"\\uFFFD\", \"\\uFFFD\", \"\\uFFFD\"]\n\n\np data.map { |char|\n  char.chr.encode('iso-8859-1', invalid: :replace, undef: :replace)\n} #[\"N\", \"&lt;\", \"?\", \"P\", \"?\", \"G\", \"?\", \"p\", \"?\", \"/\", \"?\", \"?\", \"?\"]\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 7157934, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nUGMV.jpg?s=128&g=1", "display_name": "papasmurf", "link": "https://stackoverflow.com/users/7157934/papasmurf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 40875475, "answer_count": 1, "score": 0, "last_activity_date": 1480452380, "creation_date": 1480435831, "last_edit_date": 1480436178, "question_id": 40870500, "link": "https://stackoverflow.com/questions/40870500/io-encoding-errors-in-ruby", "title": "IO encoding errors in ruby", "body": "<p>I know Ruby has a real bad wrap when it comes to pulling stuff from the web, and gets a lot of encoding errors and such. How can I force the encoding of the below array to it's true form?</p>\n\n<pre><code>[\"0x4E\", \"0x3C\", \"0x89\", \"0x50\", \"0xC3\", \"0x47\", \"0xFF\", \"0x70\", \"xFF\", \"0x2F\", \"0xA2\", \"0xB3\", \"0x98\"]\n</code></pre>\n\n<p>First I tried encoding to UTF-8:</p>\n\n<pre><code>irb(main):012:0&gt; data = [\"0x4E\", \"0x3C\", \"0x89\", \"0x50\", \"0xC3\", \"0x47\", \"0xFF\", \"0x70\", \"xFF\", \"0x2F\", \"0xA2\", \"0xB3\", \"0x98\"]\nirb(main):013:0&gt; data.each do |char|\nirb(main):014:1*   puts char.encode!(\"UTF-8\", invalid: :replace, undef: :replace)\nirb(main):015:1&gt; end\n0x4E\n0x3C\n0x89\n0x50\n0xC3\n0x47\n0xFF\n0x70\nxFF\n0x2F\n0xA2\n0xB3\n0x98\n=&gt; [\"0x4E\", \"0x3C\", \"0x89\", \"0x50\", \"0xC3\", \"0x47\", \"0xFF\", \"0x70\", \"xFF\", \"0x2F\", \"0xA2\", \"0xB3\", \"0x98\"]\n</code></pre>\n\n<p>So it seems that the characters are already UTF-8, so next I tried ISO-8859-1:</p>\n\n<pre><code>irb(main):086:0&gt; data.each { |char|\nirb(main):087:1* puts char.encode!(\"iso-8859-1\", invalid: :replace, undef: :replace)\nirb(main):088:1&gt; }\nx4E\nx3C\nx89\nx50\nxC3\nx47\nxFF\nx70\nxFF\nx2F\nxA2\nxB3\nx98\n=&gt; [\"x4E\", \"x3C\", \"x89\", \"x50\", \"xC3\", \"x47\", \"xFF\", \"x70\", \"xFF\", \"x2F\", \"xA2\", \"xB3\", \"x98\"]\n</code></pre>\n\n<p>That also did not work, it seems to have dropped the <code>0</code>'s though. </p>\n\n<p>So I went out on a limb and tried it with <code>URI.decode</code>:</p>\n\n<pre><code>irb(main):093:0&gt; require 'uri'\n=&gt; true\nirb(main):094:0&gt; data.each { |char|\nirb(main):095:1* puts URI.decode(char)\nirb(main):096:1&gt; }\nx4E\nx3C\nx89\nx50\nxC3\nx47\nxFF\nx70\nxFF\nx2F\nxA2\nxB3\nx98\n=&gt; [\"x4E\", \"x3C\", \"x89\", \"x50\", \"xC3\", \"x47\", \"xFF\", \"x70\", \"xFF\", \"x2F\", \"xA2\", \"xB3\", \"x98\"]\n</code></pre>\n\n<p>And wouldn't you know it? It didn't work.</p>\n\n<p>Is there a way to get the characters back to the original form? If it helps, this came from a URL, I do not have the full URL anymore.</p>\n"}, {"tags": ["ruby", "api", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "is_accepted": true, "score": 9, "last_activity_date": 1480441486, "last_edit_date": 1495542382, "creation_date": 1480441486, "answer_id": 40872354, "question_id": 40869996, "link": "https://stackoverflow.com/questions/40869996/change-s3-file-access-with-aws-sdk-2-and-ruby/40872354#40872354", "title": "Change s3 file access with aws-sdk -&gt; 2 and ruby", "body": "<p>I presume here that you want to change the object ACL after it's been uploaded to S3. If you can, consider setting the ACL when the object is sent to S3 rather than after.</p>\n\n<p>There's two ways to do it. They are both similar and perform the same action. Pick the one you like best or the one you are more comfortable with.</p>\n\n<h3>Using the Client API</h3>\n\n<pre><code>client = Aws::S3::Client.new(region: myregion)\nresp = client.put_object_acl({ acl: \"public-read\", bucket: mybucket, key: mykey })\n</code></pre>\n\n<p>Documentation:</p>\n\n<p><a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#put_object_acl-instance_method\" rel=\"noreferrer\">http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#put_object_acl-instance_method</a></p>\n\n<hr>\n\n<h3>The Resource API</h3>\n\n<pre><code>s3 = Aws::S3::Resource.new(region: myregion)\nbucket = s3.bucket(mybucket)\nobject = bucket.object(mykey)\nresp = object.acl.put({ acl: \"public-read\" })\n</code></pre>\n\n<p>Documentation: </p>\n\n<p><a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/ObjectAcl.html#put-instance_method\" rel=\"noreferrer\">http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/ObjectAcl.html#put-instance_method</a></p>\n\n<hr>\n\n<h3>Bonus</h3>\n\n<p>If absolutely all your objects inside your bucket needs to be public, you can set the default ACL on your whole bucket so that any object uploaded will be automatically public without having you to specify it. You do that by setting a bucket policy to your bucket.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2547046/make-a-bucket-public-in-amazon-s3\">Make a bucket public in Amazon S3</a></p>\n"}], "owner": {"reputation": 459, "user_id": 3355599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FD36Q.jpg?s=128&g=1", "display_name": "Flamine", "link": "https://stackoverflow.com/users/3355599/flamine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1381, "favorite_count": 0, "accepted_answer_id": 40872354, "answer_count": 1, "score": 4, "last_activity_date": 1480441486, "creation_date": 1480434405, "question_id": 40869996, "link": "https://stackoverflow.com/questions/40869996/change-s3-file-access-with-aws-sdk-2-and-ruby", "title": "Change s3 file access with aws-sdk -&gt; 2 and ruby", "body": "<p>I try to migrate my project to aws-sdk 2. Need to use AWS SDK for Ruby - Version 2 for this.\nI found all methods, but i cant change access to file (make public).\nIn later version i use this:</p>\n\n<pre><code>bucket.objects[file_path].acl = :public_read\n</code></pre>\n\n<p>But i cant find method for changing with new api version.</p>\n\n<p>This is link to <a href=\"http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html#move_to-instance_method\" rel=\"nofollow noreferrer\">old api documentation</a></p>\n\n<p>This is link to <a href=\"http://docs.aws.amazon.com/sdkforruby/api/index.html\" rel=\"nofollow noreferrer\">new api documentations</a></p>\n"}, {"tags": ["ruby", "redis"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 3865777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4826fd6154e04a34627faf9c479e1da?s=128&d=identicon&r=PG", "display_name": "zzz", "link": "https://stackoverflow.com/users/3865777/zzz"}, "edited": false, "score": 0, "creation_date": 1480434565, "post_id": 40869979, "comment_id": 68955623, "body": "I did some relatively informal scripting to check results and got the expected results back, but you&#39;re right about the documentation not being explicit about it, which is why I posted up here."}, {"owner": {"reputation": 656, "user_id": 1123693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898baf8ecaa17a61ff1f56e70f3ce19f?s=128&d=identicon&r=PG", "display_name": "davissp14", "link": "https://stackoverflow.com/users/1123693/davissp14"}, "edited": false, "score": 3, "creation_date": 1480455448, "post_id": 40869979, "comment_id": 68967501, "body": "When in doubt, check the source. <a href=\"https://github.com/antirez/redis/blob/d680eb6dbdf2d2030cb96edfb089be1e2a775ac1/src/t_string.c#L285-L301\" rel=\"nofollow noreferrer\">github.com/antirez/redis/blob/&hellip;</a>"}, {"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "edited": false, "score": 0, "creation_date": 1604292304, "post_id": 40869979, "comment_id": 114293081, "body": "Judging by the for loop in the source code I would say YES it ALWAYS comes back in the same order."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1480434360, "creation_date": 1480434360, "answer_id": 40869979, "question_id": 40869844, "link": "https://stackoverflow.com/questions/40869844/does-redis-guarantee-mget-return-order/40869979#40869979", "title": "Does Redis guarantee mget return order?", "body": "<p>Although the documentation isn't explicit about this, I think it does guarantee the order. It'd be a very useless command if it didn't.</p>\n"}], "owner": {"reputation": 106, "user_id": 3865777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4826fd6154e04a34627faf9c479e1da?s=128&d=identicon&r=PG", "display_name": "zzz", "link": "https://stackoverflow.com/users/3865777/zzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1544691544, "creation_date": 1480433992, "last_edit_date": 1544691544, "question_id": 40869844, "link": "https://stackoverflow.com/questions/40869844/does-redis-guarantee-mget-return-order", "title": "Does Redis guarantee mget return order?", "body": "<p>Given this simplistic block:</p>\n\n<pre><code>mget object:1 object:2 object:3\n</code></pre>\n\n<p>Does redis guarantee that the return order will always be <code>[object:1,object:2,object:3]</code>?</p>\n\n<p>I'm using the standard <a href=\"https://github.com/redis/redis-rb\" rel=\"nofollow noreferrer\">ruby redis client</a> (v3.3.0), so it should return exactly what redis does and not affect anything.</p>\n"}, {"tags": ["ruby", "binary-search-tree"], "comments": [{"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 1, "creation_date": 1480433514, "post_id": 40869662, "comment_id": 68954854, "body": "Who says an empty tree (<code>t == nil</code>) is not a valid bst? Your base case seems incorrect to me. Moreover, this question as it stands needs to be elaborated on. What is the current <i>issue</i> with the code? Be specific. Check out <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 9, "user_id": 5349165, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/f5aebc86e43586d8dc96f52084b92170?s=128&d=identicon&r=PG&f=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5349165/clement"}, "reply_to_user": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1480433685, "post_id": 40869662, "comment_id": 68954967, "body": "what I meant was, this code is to check if the tree (with values in it) are arranged like a BST. I&#39;m not very sure if my code works the way I want to and I wanna get more opinions, maybe how to make it more efficient or something?"}, {"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1480433828, "post_id": 40869662, "comment_id": 68955078, "body": "SO is not a code-testing service. You are fully capable of running it and seeing if it works yourself. Make sure to check edge cases like multiple identical keys and empty trees. If it doesn&#39;t work, it&#39;ll give bad output or crash, not destroy the universe. Don&#39;t be afraid to run your code and just see if it works. If you&#39;re looking for code review, there&#39;s another SE site for that. If you have a specific problem, this is the place. And if you have an update or clarification for your question it is best to post it as an edit to the question rather than a comment."}], "answers": [{"tags": [], "owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "is_accepted": false, "score": 0, "last_activity_date": 1480513682, "creation_date": 1480513682, "answer_id": 40890075, "question_id": 40869662, "link": "https://stackoverflow.com/questions/40869662/checking-if-tree-is-bst/40890075#40890075", "title": "Checking if tree is BST", "body": "<p>Let me explain it line by line first :- </p>\n\n<pre><code>1    def checkBST(t) \n2        return false if t==nil\n3       if t.left!=nil &amp;&amp; t.left&gt;t \n4            return false\n5        end\n6        if t.right!=nil &amp;&amp; t.right&lt;t\n7            return false\n8        end\n9        if checkBST(t.left) &amp;&amp; checkBST(t.right)\n10            return true\n11        end\n12    end\n</code></pre>\n\n<p>Line 2 - return true when t is NULL. </p>\n\n<p>Line 3 and 6 - you are juct checking the immediate child, what if child satisfy the BST property but not its grand children. Try yourself, you will get to know what i am trying to say.</p>\n\n<p>Here is a probable solution - i am just writing it, did not compile, you can work on it more.</p>\n\n<p>Function - </p>\n\n<pre><code>bool isBST(class tree* root, int minL, int maxR)\n{\n    if(!root)\n        return true;\n    else if(root-&gt;data &gt; minL &amp;&amp; root-&gt;data &lt; maxR)\n        return true;\n    else if(root-&gt;data &lt; minL || root-&gt;data &gt; maxR)\n        return false;\n    return isBST(root-&gt;right, root-&gt;data, maxR) &amp;&amp; isBST(root-&gt;left, minL, root-&gt;data);\n}\n\nCaller - \nisBST(root, INT_MIN, INT_MAX);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5349165, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/f5aebc86e43586d8dc96f52084b92170?s=128&d=identicon&r=PG&f=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5349165/clement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480513682, "creation_date": 1480433443, "question_id": 40869662, "link": "https://stackoverflow.com/questions/40869662/checking-if-tree-is-bst", "title": "Checking if tree is BST", "body": "<p>I wrote a code in ruby to check if tree passed in is a binary search tree. Just wanna check if I'm on the right track. </p>\n\n<pre><code>def checkBST(t) \n    return false if t==nil\n   if t.left!=nil &amp;&amp; t.left&gt;t \n        return false\n    end\n    if t.right!=nil &amp;&amp; t.right&lt;t\n        return false\n    end\n    if checkBST(t.left) &amp;&amp; checkBST(t.right)\n        return true\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "google-maps"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1480434091, "post_id": 40869612, "comment_id": 68955269, "body": "please clarify for stupid people like me: So you want <code>markers = handler.addMarkers([{&quot;lat&quot;: 51.50853, &quot;lng&quot;: -0.076132}, {&quot;lat&quot;: 51.510357, &quot;lng&quot;: -0.116773}])</code>, right?"}, {"owner": {"reputation": 7, "user_id": 5922898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wIcoE.jpg?s=128&g=1", "display_name": "user5922898", "link": "https://stackoverflow.com/users/5922898/user5922898"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1480434959, "post_id": 40869612, "comment_id": 68955917, "body": "Yes, exatcly as you write"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1480518129, "post_id": 40869612, "comment_id": 68996907, "body": "did you try my solution?"}], "answers": [{"tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": false, "score": 0, "last_activity_date": 1480439153, "last_edit_date": 1480439153, "creation_date": 1480435180, "answer_id": 40870277, "question_id": 40869612, "link": "https://stackoverflow.com/questions/40869612/iterate-through-array-of-arrays-and-pass-coordinates-to-google-map/40870277#40870277", "title": "Iterate through array of arrays and pass coordinates to google map", "body": "<p>try this:</p>\n\n<pre><code>markers = handler.addMarkers([\n  &lt;% User::COORDINATES.each.with_index do |geo,i| %&gt;\n  {\n    \"lat\": &lt;%= geo[0] %&gt;,\n    \"lng\": &lt;%= geo[1] %&gt;\n  }\n  &lt;% if User::COORDINATES[i+1] %&gt;,&lt;% end %&gt;\n  &lt;% end %&gt;\n]);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5922898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wIcoE.jpg?s=128&g=1", "display_name": "user5922898", "link": "https://stackoverflow.com/users/5922898/user5922898"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480439153, "creation_date": 1480433272, "question_id": 40869612, "link": "https://stackoverflow.com/questions/40869612/iterate-through-array-of-arrays-and-pass-coordinates-to-google-map", "title": "Iterate through array of arrays and pass coordinates to google map", "body": "<p>In my Rails app I have google map that I want to display pins based on coordinates (latitude, longitude). I have dummy data in user.rb file as an array and I'm trying to map through it and pass coordinates to google map, however I'm missing something basic, because all works if I supply it manually. So how do I iterate so coordinates would be displayed on map?</p>\n\n<pre><code>#user.rb\n\nclass User &lt; ApplicationRecord\n\n  COORDINATES = [[51.50853, -0.076132], [51.510357, -0.116773]]\n\n  def self.latitude\n    COORDINATES.map do |x|\n      x[0] # How to pass coordinates correctly?\n    end\n  end\n\n  def self.longitude\n    COORDINATES.map do |x|\n      x[-1] # How to pass coordinates correctly?\n    end\n  end\nend\n</code></pre>\n\n<p>That's User controller index action:</p>\n\n<pre><code>def index\n  @latitude = User.latitude\n  @longitude = User.longitude\nend\n</code></pre>\n\n<p>And that's index.html.erb. Here I provide @latitude and @longitude.</p>\n\n<pre><code>handler = Gmaps.build('Google');\nhandler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){\nmarkers = handler.addMarkers([\n  {\n    \"lat\": &lt;%= @latitude %&gt;,\n    \"lng\": &lt;%= @longitude %&gt;\n  }\n]);\n});\n</code></pre>\n"}, {"tags": ["ruby", "include", "case", "case-when"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1480430805, "post_id": 40868693, "comment_id": 68952946, "body": "Use regex with either <code>[]</code>-notation, <code>scan</code> or <code>match</code>."}, {"owner": {"reputation": 421, "user_id": 1323851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96631d7d253e8bc6adc17a2a2aee9764?s=128&d=identicon&r=PG", "display_name": "MrSlippyFist", "link": "https://stackoverflow.com/users/1323851/mrslippyfist"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480431099, "post_id": 40868693, "comment_id": 68953145, "body": "@sagarpandya82 Thank you. Can you provide me with an example of how this works? I&#39;m new to this area"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1480432596, "post_id": 40868693, "comment_id": 68954196, "body": "<code>(listen.include?(&quot;navigate&quot;))</code> equals <code>true</code> or <code>false</code>, so the line following is executed if <code>listen</code> equals that logical value. That&#39;s not what you want. You need to change <code>case listen</code> to <code>case</code>."}, {"owner": {"reputation": 421, "user_id": 1323851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96631d7d253e8bc6adc17a2a2aee9764?s=128&d=identicon&r=PG", "display_name": "MrSlippyFist", "link": "https://stackoverflow.com/users/1323851/mrslippyfist"}, "edited": false, "score": 0, "creation_date": 1480432692, "post_id": 40868693, "comment_id": 68954255, "body": "Exactly what I needed. Thanks for the explanation. If you put this as answer I can mark your answer as solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480433211, "post_id": 40868693, "comment_id": 68954640, "body": "Glad to help. I can&#39;t post an answer right now, but someone else will. Please don&#39;t be in a rush to accept any answer as you don&#39;t want to discourage others."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1480433756, "post_id": 40868693, "comment_id": 68955023, "body": "I see @spickermann posted a good answer. (The posting times show he undoubtedly did not see my comment before he posted.)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480435851, "post_id": 40868693, "comment_id": 68956574, "body": "<code>r = &#47;\\bhello\\b&#47;; listen[r]; listen.scan(r); listen.match(r)</code>. See <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">square-bracket notation</a>, <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> and <a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-match\" rel=\"nofollow noreferrer\">String#match</a> for more info."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1480455708, "post_id": 40868693, "comment_id": 68967627, "body": "<code>listen</code> is a <code>String</code>, <code>listen.include?(&#39;navigate&#39;)</code> is a boolean. A boolean will never be equal to nor will it match a <code>String</code>, therefore that branch can never execute \u2026 and the same for all the other branches."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 1323851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96631d7d253e8bc6adc17a2a2aee9764?s=128&d=identicon&r=PG", "display_name": "MrSlippyFist", "link": "https://stackoverflow.com/users/1323851/mrslippyfist"}, "edited": false, "score": 0, "creation_date": 1480431016, "post_id": 40868750, "comment_id": 68953090, "body": "Wow quick response! That&#39;ll work, thank you. I was wondering though if there was a cleaner way since the game will &quot;listen&quot; to a lot more inputs in the future. Hence I chose to use     case"}], "tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": false, "score": 0, "last_activity_date": 1480430803, "creation_date": 1480430803, "answer_id": 40868750, "question_id": 40868693, "link": "https://stackoverflow.com/questions/40868693/can-i-use-include-in-a-case-statement-ruby/40868750#40868750", "title": "Can I use .include?() in a case statement? Ruby", "body": "<p>In your case use a <code>if elsif</code></p>\n\n<pre><code>if listen.include?(\"navigate\")\n  # ...\nelsif $player_items.include?(listen)\n  # ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 15, "last_activity_date": 1618953955, "last_edit_date": 1618953955, "creation_date": 1480432693, "answer_id": 40869391, "question_id": 40868693, "link": "https://stackoverflow.com/questions/40868693/can-i-use-include-in-a-case-statement-ruby/40869391#40869391", "title": "Can I use .include?() in a case statement? Ruby", "body": "<p>If you want to use a <code>case</code> instead of an <code>if-elsif</code> block, then you can write it like this (note the blank space after the <code>case</code>):</p>\n<pre><code>while listen = $stdin.gets.chomp\n  case\n  when listen.include?('navigate')\n    puts &quot;Navigate to #{listen}&quot;\n\n  when listen.include?('test')\n    puts 'test'\n  \n  when $player_items.include?(listen)\n    puts &quot;Using the #{$player_items[listen]}&quot;\n    break\n\n  else\n    puts &quot;Not an option&quot;\n  end\n\n  print &quot;&gt; &quot;\nend\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 1323851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96631d7d253e8bc6adc17a2a2aee9764?s=128&d=identicon&r=PG", "display_name": "MrSlippyFist", "link": "https://stackoverflow.com/users/1323851/mrslippyfist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8220, "favorite_count": 0, "accepted_answer_id": 40869391, "answer_count": 2, "score": 7, "last_activity_date": 1618953955, "creation_date": 1480430635, "last_edit_date": 1570491622, "question_id": 40868693, "link": "https://stackoverflow.com/questions/40868693/can-i-use-include-in-a-case-statement-ruby", "title": "Can I use .include?() in a case statement? Ruby", "body": "<p>I have started to learn Ruby. I have a small project to build a game and tried to create a function that receives user input and handles it accordingly.</p>\n\n<pre><code>def Game.listener\n  print \"&gt; \"\n\n  while listen = $stdin.gets.chomp.downcase\n\n    case listen\n    when (listen.include?(\"navigate\"))\n      puts \"Navigate to #{listen}\"\n      break\n    when ($player_items.include?(listen))\n      Items.use(listen)\n      break\n    end\n\n    puts \"Not a option\"\n    print \"&gt; \"\n  end\nend\n</code></pre>\n\n<p>However, the case statement is unable to detect I have typed navigate. Is there a way to fix this or if I'm totally off can someone point me in the right direction?</p>\n\n<p>I have found this way to solve my problem, is it a safe and reliable way?</p>\n\n<pre><code>  while listen = $stdin.gets.chomp\n      case listen.include?(listen)\n      when listen.include?(\"navigate\")\n        puts \"Navigate to #{listen}\"\n      when listen.include?(\"test\")\n        puts \"test\"\n      when $player_items.include?(listen)\n        puts \"Using the #{$player_items[listen]}\"\n        break\n      else\n        puts \"Not a option\"\n      end\n      print \"&gt; \"\n   end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5", "user-profile"], "answers": [{"comments": [{"owner": {"reputation": 262, "user_id": 7208879, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/010028fd3cbf06887e6878c6df5114bb?s=128&d=identicon&r=PG&f=1", "display_name": "Means", "link": "https://stackoverflow.com/users/7208879/means"}, "edited": false, "score": 0, "creation_date": 1480505860, "post_id": 40868552, "comment_id": 68988545, "body": "Thanks but actually extending profile to user and company is next process for now profile is not being created."}], "tags": [], "owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1480430233, "creation_date": 1480430233, "answer_id": 40868552, "question_id": 40866963, "link": "https://stackoverflow.com/questions/40866963/rails-5-empty-user-profile-after-devise-sign-up/40868552#40868552", "title": "Rails 5 - Empty User profile after devise sign_up", "body": "<p>I suggest you use an approach based on inheritance.</p>\n\n<p>You can add a type in users table and Rails will manage it for you.</p>\n\n<p><strong>example_timestamp_add_type_to_users.rb</strong></p>\n\n<pre><code>class AddTypeToUsers &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :users, :type, :string, null: false\n  end\nend\n</code></pre>\n\n<p>Using this you can add as user types as you want:</p>\n\n<p><strong>models/job_seeker.rb</strong></p>\n\n<pre><code>class JobSeeker &lt; User\n  has_one :job_seeker_profile, dependent: :destroy\n  after_create :profile\n\n  private\n\n  def profile\n    create_job_seeker_profile\n  end\nend\n</code></pre>\n\n<p><strong>models/company_owner.rb</strong></p>\n\n<pre><code>class CompanyOwner &lt; User\n  has_one :company_owner_profile, dependent: :destroy\n  after_create :profile\n\n  private\n\n  def profile\n    create_company_owner_profile\n  end\nend\n</code></pre>\n\n<p><strong>models/admin.rb</strong></p>\n\n<pre><code>class Admin &lt; User\nend\n</code></pre>\n\n<p>This approach will allows you to use the authentication methods based on user type:</p>\n\n<p><strong>for job seekers:</strong></p>\n\n<ol>\n<li>current_job_seeker</li>\n<li>authenticate_job_seeker!</li>\n</ol>\n\n<p><strong>for company owners:</strong></p>\n\n<ol start=\"3\">\n<li>current_company_owner</li>\n<li>authenticate_company_owner!</li>\n</ol>\n\n<p><strong>for admins:</strong></p>\n\n<ol start=\"5\">\n<li>current_admin</li>\n<li>authenticate_admin!</li>\n</ol>\n\n<p>You can also build a different registration and/or sign-in forms for each user type:</p>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :admins\n  devise_for :job_seekers\n  devise_for :company_owners\nend\n</code></pre>\n"}], "owner": {"reputation": 262, "user_id": 7208879, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/010028fd3cbf06887e6878c6df5114bb?s=128&d=identicon&r=PG&f=1", "display_name": "Means", "link": "https://stackoverflow.com/users/7208879/means"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480914795, "creation_date": 1480425583, "last_edit_date": 1480914795, "question_id": 40866963, "link": "https://stackoverflow.com/questions/40866963/rails-5-empty-user-profile-after-devise-sign-up", "title": "Rails 5 - Empty User profile after devise sign_up", "body": "<p>I'm new to Rails and building a jobboard marketplace.I'm stuck with a user signup profile form. I'm using devise(4.2) with Rails 5. I've created profile before user_create and then just redirect to profile view and now update users with registration form fields like first_name &amp; last_name.</p>\n\n<p>My signup is a 2-way process and not nested profile. \nstep 1 - devise sign-up form with just an extra field to check role of user as user(jobseeker)or company.\nStep 2 - Based on this role, create separate profile forms for users and company. If profile is not committed to DB, then user also should not be saved and again user sign_up must happen.</p>\n\n<p>At present, I'm trying with just one generic user form which has fields first_name and last_name. I used before_create :build_profile in user model but it just passes the Profile.create without creating it on DB. Should I overwrite 'create'or 'new' in profiles_controller or registrations_controller(devise).</p>\n\n<p>The error in views/profiles/show.html.erb is: First argument in form cannot contain nil or be empty. Also on the terminal I see this for profiles: \"user_id\"=>\"2\", \"id\"=>\"profile_id\"}...does this signify something between user and profile tables in DB that is hampering the create or the routes correctly set?</p>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n   root \"jobs#index\"\n  devise_for :users, :controllers =&gt; {registrations: \"registrations\"}\n  resources :users do\n\n    resources :profiles, only: [:show, :update]\n  end\nend\n</code></pre>\n\n<p>Registrations_controller</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n    protected\n    def after_sign_up_path_for(user)\n      if resource.class == User &amp;&amp; current_user.role == 'user'\n        user_profile_path\n      else # to check for company user resource.class == User &amp;&amp; current_user.role == 'company'\n        puts \"redirecting to company profile-will do later\"\n      end\n    end\n  end\n</code></pre>\n\n<p>profiles_controller.rb</p>\n\n<pre><code>      class ProfilesController &lt; ApplicationController\n\n      def show\n      end\n\n      def update\n        @profile = Profile.find_by_user_id(profile_params)\n        current_user.update(@profile)\n      end\n\n      def destroy\n        @profile.destroy\n        respond_with(@profile)\n      end\n\n      private\n\n      def profile_params\n        params.require(:user).permit(profile_attributes: [])\n      end\n\n      def set_profile\n        @profile = Profile.find(params[:id])\n      end\n    end\n</code></pre>\n\n<p>profile.rb</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>   class User &lt; ApplicationRecord\n      before_create :build_profile\n      devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable\n     enum role: [:user, :company, :admin]\n      has_one :profile\n\n      def build_profile\n        Profile.create\n        true\n      end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "class", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 1, "creation_date": 1480422258, "post_id": 40865822, "comment_id": 68952939, "body": "Don&#39;t do that. Use I18n with localize"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1480422317, "post_id": 40865822, "comment_id": 68947064, "body": "you added an instance method, but used singleton one. You should define singleton method, in order to use it: <code>def self.date_of_next(day)...</code> - now you can do <code>Date.date_of_next(day)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480429251, "post_id": 40865822, "comment_id": 68951760, "body": "<i>&quot;...because i want to use my translated day names&quot;</i> \u2013 what does that mean?"}, {"owner": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480437519, "post_id": 40865822, "comment_id": 68957749, "body": "@Stefan &quot;day&quot; in italian language. I&#39;m using I18n with it.yml file. date_of_next(&quot;sunday&quot;) -&gt; ok. date_of_next(&quot;domenica&quot;) -&gt; error."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1480438813, "post_id": 40865822, "comment_id": 68958601, "body": "@AlexBeginner okay, but none of the proposed solutions allow you to write <code>date_of_next(&quot;domenica&quot;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 2055252, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8f740b1af3815ed9ca61789f376cb590?s=128&d=identicon&r=PG", "display_name": "nisevi", "link": "https://stackoverflow.com/users/2055252/nisevi"}, "edited": false, "score": 0, "creation_date": 1480430950, "post_id": 40866012, "comment_id": 68953040, "body": "I think that it worth saying that class methods are just singleton methods that live in the class&#39;s singleton class."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 597, "user_id": 2055252, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8f740b1af3815ed9ca61789f376cb590?s=128&d=identicon&r=PG", "display_name": "nisevi", "link": "https://stackoverflow.com/users/2055252/nisevi"}, "edited": false, "score": 1, "creation_date": 1480431137, "post_id": 40866012, "comment_id": 68953188, "body": "@nisevi there is no such thing as &quot;class method&quot; in Ruby ;)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1480423150, "last_edit_date": 1480423150, "creation_date": 1480422743, "answer_id": 40866012, "question_id": 40865822, "link": "https://stackoverflow.com/questions/40865822/how-can-i-add-a-method-to-an-existing-class-in-rails-5/40866012#40866012", "title": "How can i add a method to an existing class in Rails 5?", "body": "<p>Putting monkey patched files under <code>initializers</code> is fine (in spite of how \"good\" monkey patching is itself :)).</p>\n\n<p>You want to change the method definition to following:</p>\n\n<pre><code>class Date\n  def self.date_of_next(day)\n    date  = parse(day)\n    delta = date &gt; today ? 0 : 7\n    date + delta\n  end\nend\n</code></pre>\n\n<p>Your problem was that you called a singleton method on the object <code>Date</code>, whereas it did not have such method defined.</p>\n"}, {"tags": [], "owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "is_accepted": false, "score": 3, "last_activity_date": 1480422792, "creation_date": 1480422792, "answer_id": 40866031, "question_id": 40865822, "link": "https://stackoverflow.com/questions/40865822/how-can-i-add-a-method-to-an-existing-class-in-rails-5/40866031#40866031", "title": "How can i add a method to an existing class in Rails 5?", "body": "<p>As Andrey Deineko points out in his comment (and now answer), you wrote an instance method but called a class method. Try:</p>\n\n<pre><code>class Date\n  def self.date_of_next(day)\n    date  = Date.parse(day)\n    delta = date &gt; Date.today ? 0 : 7\n    date + delta\n  end\nend\n</code></pre>\n\n<p>The other (and probably better) way would be more object oriented with an instance method:</p>\n\n<pre><code>class Date\n  def date_of_next\n    delta = self &gt; Date.today ? 0 : 7\n    self + delta\n  end\nend\n\nday.date_of_next    # you might want to pick a better name\n</code></pre>\n\n<p>One more hint: monkey patching (extending an existing class in such a way) is not the best solution on the longer run. You might want to switch to different patterns some day.</p>\n"}], "owner": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 1, "accepted_answer_id": 40866012, "answer_count": 2, "score": 2, "last_activity_date": 1480423469, "creation_date": 1480422179, "last_edit_date": 1480423469, "question_id": 40865822, "link": "https://stackoverflow.com/questions/40865822/how-can-i-add-a-method-to-an-existing-class-in-rails-5", "title": "How can i add a method to an existing class in Rails 5?", "body": "<p>Sorry for my bad english. I have to add a method in Date class in Rails because i want to use my translated day names.\nSo, i tried: </p>\n\n<pre><code>class Date\n  def date_of_next(day)\n    date  = Date.parse(day)\n    delta = date &gt; Date.today ? 0 : 7\n    date + delta\n  end\nend\n</code></pre>\n\n<p>in config/initializers/date_of_next.rb but when i call Date.date_of_next(day) in my controller i get \"no method in Date\".\nHow can i do that? And where should i put the file?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "edited": false, "score": 0, "creation_date": 1480421899, "post_id": 40865557, "comment_id": 68946790, "body": "Why don&#39;t you put the procs in the array (rather than their names) ?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "edited": false, "score": 0, "creation_date": 1480422378, "post_id": 40865557, "comment_id": 68947101, "body": "@roychri actually i have the methods inside a class and need to run each of these methods inside a popen3 block to send and receive output from popen3 and use the output as the parameter. these procs are multiline and almost like a method."}, {"owner": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "edited": false, "score": 0, "creation_date": 1480422492, "post_id": 40865557, "comment_id": 68947180, "body": "It would help to see what you got so far."}, {"owner": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "edited": false, "score": 0, "creation_date": 1480422702, "post_id": 40865557, "comment_id": 68947305, "body": "I get the feeling the names of those procs are not really important. If I understand what you mean, you just need to call them all everytime your popen3 has new stdout/stderr data, right?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "edited": false, "score": 0, "creation_date": 1480422852, "post_id": 40865557, "comment_id": 68947392, "body": "@roychri they are kind of important because each of their names determine the type of modification they go through before being passed as a parameter in the array of methods."}], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480421465, "post_id": 40865583, "comment_id": 68946490, "body": "this is the default way, How can I call it when method names are in the form of strings?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480422306, "post_id": 40865583, "comment_id": 68947061, "body": "@roychri: as for the &quot;array of names rather than procs themselves&quot;, this could be useful in a configurable app. You put chunks of code in the app, name them, but the exact order is defined through a yaml file or something. No idea if that&#39;s the case here."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480422486, "post_id": 40865583, "comment_id": 68947176, "body": "@SergioTulentsev there are around 10 methods and the order are right inside the ruby file."}], "tags": [], "owner": {"reputation": 2637, "user_id": 1260068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1e0f4a1006aaeb0ae65db3d6ccdaa89?s=128&d=identicon&r=PG", "display_name": "roychri", "link": "https://stackoverflow.com/users/1260068/roychri"}, "is_accepted": false, "score": 5, "last_activity_date": 1480421967, "last_edit_date": 1480421967, "creation_date": 1480421398, "answer_id": 40865583, "question_id": 40865557, "link": "https://stackoverflow.com/questions/40865557/how-can-i-dynamically-call-a-proc-in-ruby/40865583#40865583", "title": "How can i dynamically call a Proc in Ruby?", "body": "<h2>Updated</h2>\n\n<p>Procs are objects, so you can store them in variables, arrays, hashs, just like any objects, and call them from those rather than by names.</p>\n\n<p>If you need to make an array of procs, store the procs themself in an array, rather than the names of the variables you assigned them to. This way, you can pass this array around and call them all.</p>\n\n<pre><code>myprocs = []\nmyprocs &lt;&lt; = Proc.new{|s| s + 1}\nmyprocs.each {|p| p.call(10)}\n</code></pre>\n\n<p>If you want to call them by names, use a hash.</p>\n\n<pre><code>myprocs = {}\nmyprocs[\"d\"] = Proc.new{|s| s + 1}\nmyprocs[\"d\"].call(10)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480421778, "post_id": 40865644, "comment_id": 68946701, "body": "@SergioTulentsev if you make that an answer, I&#39;ll vote it up."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480421861, "post_id": 40865644, "comment_id": 68946760, "body": "@mudasobwa I just updated the question, I have the method names as strings inside an array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 2, "creation_date": 1480421965, "post_id": 40865644, "comment_id": 68946829, "body": "@BA I do not see any difference between calling 1 proc and many procs."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480422712, "post_id": 40865644, "comment_id": 68947311, "body": "@mudasobwa wow thanks. I think binding.local_variable_get is the way to go. I did this: <code>p = Proc.new{ |s| s + 1};d = [&quot;p&quot;];d.each do |s|; puts binding.local_variable_get(s).(10);end;</code> that is what i am looking for thanks. i will look more into binding.local_variable_get, this is new to me."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 6, "creation_date": 1480423184, "post_id": 40865644, "comment_id": 68947580, "body": "Local variables and explicit binding usage is <b>never a good way to go</b>. The proper way to go was shown by @SergioTulentsev. Once again, in Layman\u2019s terms: you are doing it wrong unless you use a hash as suggested by Sergio."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1480421581, "creation_date": 1480421581, "answer_id": 40865644, "question_id": 40865557, "link": "https://stackoverflow.com/questions/40865557/how-can-i-dynamically-call-a-proc-in-ruby/40865644#40865644", "title": "How can i dynamically call a Proc in Ruby?", "body": "<p>For this particular example:</p>\n\n<pre><code>p = Proc.new{|s| s + 1}\nd = \"p\"\n#\u21d2 *call d.to_sym,10 *\n</code></pre>\n\n<p>It would be:</p>\n\n<pre><code>binding.local_variable_get(d).(10)\n#\u21d2\u00a011\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480422254, "post_id": 40865781, "comment_id": 68947018, "body": "this proc i am using is almost like a method with multiple lines(I need to use that instead of a method because it has to run inside an open3 block and procs are more convenient there because the method definitions wont take the stdin,stdout from the main popen3 block ). Right now i am using eval to call the proc and its working fine but was wondering if there is a better way."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 2, "creation_date": 1480422336, "post_id": 40865781, "comment_id": 68947073, "body": "@BA: this way is a better way."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1480427005, "post_id": 40865781, "comment_id": 68950132, "body": "I like the phrase &#39;&quot;civilian-grade&quot; ruby&#39;"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480427289, "post_id": 40865781, "comment_id": 68950347, "body": "@BA I would like it if you would ask a question showing the problem you&#39;re trying to solve with open3, blocks, and procs.  There&#39;s almost certainly a simpler way to do it than what you are doing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1480429788, "post_id": 40865781, "comment_id": 68952161, "body": "@WayneConrad: hopefully, someday I&#39;ll become rich and famous because of it :)"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1480435769, "post_id": 40865781, "comment_id": 68956514, "body": "@WayneConrad because i thought it would be too much work for both me and the SO community.  here is the code with the open3 part.  <a href=\"http://pastebin.com/ypn7Jye3\" rel=\"nofollow noreferrer\">pastebin.com/ypn7Jye3</a>"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 1, "creation_date": 1480438936, "post_id": 40865781, "comment_id": 68958682, "body": "@BA If that&#39;s working code, it looks like it&#39;d form the basis of a good question on <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 15, "last_activity_date": 1480422064, "creation_date": 1480422064, "answer_id": 40865781, "question_id": 40865557, "link": "https://stackoverflow.com/questions/40865557/how-can-i-dynamically-call-a-proc-in-ruby/40865781#40865781", "title": "How can i dynamically call a Proc in Ruby?", "body": "<p>The other answers cover <em>the exact</em> question asked. But I say, it was a wrong approach. Don't do that runtime introspection. It brings no benefit. If you want to address your procs by name, put them in a hash and use \"civilian-grade\" ruby.</p>\n\n<pre><code>handlers = {\n  'process_payment' =&gt; proc { ... },\n  'do_this' =&gt; proc { ... },\n  'or_maybe_that' =&gt; proc { ... },\n}\n\npipeline = ['process_payment', 'or_maybe_that']\n\npipeline.each do |method_name|\n  handlers[method_name].call\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480424152, "post_id": 40866444, "comment_id": 68948155, "body": "@Alex yeah i am using eval currently but was looking for a better way."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480426985, "post_id": 40866444, "comment_id": 68950115, "body": "@SergioTulentsev you must be kidding. <code>prepend Module.new def eval(*args) puts args.inspect; end end</code> and all your obfuscation is done."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1480429382, "post_id": 40866444, "comment_id": 68951862, "body": "@mudasobwa: obviously, the trick will not hold against such powerful tools, but good luck compiling it in your head. That&#39;s what I meant. :)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1480424041, "creation_date": 1480424041, "answer_id": 40866444, "question_id": 40865557, "link": "https://stackoverflow.com/questions/40865557/how-can-i-dynamically-call-a-proc-in-ruby/40866444#40866444", "title": "How can i dynamically call a Proc in Ruby?", "body": "<p>Using <code>eval</code> - bad practice, but as one of the possible solutions is:</p>\n\n<pre><code>p = Proc.new{|s| s + 1}\nd = \"p\"\neval(\"#{d}[10]\")\n#=&gt; 11\n</code></pre>\n"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2231, "favorite_count": 1, "accepted_answer_id": 40865644, "answer_count": 4, "score": 5, "last_activity_date": 1480424041, "creation_date": 1480421310, "last_edit_date": 1480421815, "question_id": 40865557, "link": "https://stackoverflow.com/questions/40865557/how-can-i-dynamically-call-a-proc-in-ruby", "title": "How can i dynamically call a Proc in Ruby?", "body": "<p>Is there a method.send equivalent for proc?\neg:</p>\n\n<pre><code>def s a\na + 1\nend\nb = \"s\"\nsend b.to_sym,10 #=&gt; 11\n</code></pre>\n\n<p>Is there something like this?</p>\n\n<pre><code>p = Proc.new{|s| s + 1}\nd = \"p\"\n*call d.to_sym,10 *\n</code></pre>\n\n<p>EDIT:\nIn response to mudasobwa's answer\nI need to call the Procs from an array of methods.\neg: </p>\n\n<pre><code>ss = [\"a\",\"b\",\"c\",\"d\"] \n</code></pre>\n\n<p>Is it possible in this case?</p>\n"}, {"tags": ["ios", "ruby", "testing", "calabash", "xamarin-test-cloud"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "edited": false, "score": 0, "creation_date": 1481625729, "post_id": 40909866, "comment_id": 69441871, "body": "Thanks, I&#39;ve updated the question with some code and more information. I hope it helps."}, {"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "reply_to_user": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "edited": false, "score": 0, "creation_date": 1481822910, "post_id": 40909866, "comment_id": 69540307, "body": "Please send me a link your Test Cloud run.  You can private message me."}, {"owner": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "edited": false, "score": 0, "creation_date": 1482152941, "post_id": 40909866, "comment_id": 69645104, "body": "<a href=\"https://testcloud.xamarin.com/test/eon-espana-sl-tu-oficina-online-pre_48d384c5-429a-4ef0-8c47-8cd3d797060d/\" rel=\"nofollow noreferrer\">testcloud.xamarin.com/test/&hellip;</a>"}, {"owner": {"reputation": 641, "user_id": 3757150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15eac370ff38ef73f3db614d69c09846?s=128&d=identicon&r=PG", "display_name": "Kent.Green", "link": "https://stackoverflow.com/users/3757150/kent-green"}, "reply_to_user": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "edited": false, "score": 0, "creation_date": 1483481173, "post_id": 40909866, "comment_id": 70112670, "body": "@AntonioD.Barquero the link you shared is currently publically accessible to anyone who clicks it. If you set it to &quot;Private&quot; than it will no longer be publically accessible, though Xamarin Engineers should still be able to view it using admin access (including myself &amp; @jmoody).   You can also click the &quot;Support&quot; link at the top to reach out directly to Test Cloud email support if needed.  Screenshot with privacy setting in red &amp; support link in green: <a href=\"http://www.screencast.com/t/8C3yWVuT\" rel=\"nofollow noreferrer\">screencast.com/t/8C3yWVuT</a>"}, {"owner": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "edited": false, "score": 0, "creation_date": 1485177394, "post_id": 40909866, "comment_id": 70802223, "body": "I&#39;ve tested the application again and the tests are working. Thanks for all the help provided."}], "tags": [], "owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "is_accepted": true, "score": 0, "last_activity_date": 1484652393, "last_edit_date": 1484652393, "creation_date": 1480592783, "answer_id": 40909866, "question_id": 40865263, "link": "https://stackoverflow.com/questions/40865263/error-executing-calabash-ios-tests-xamarin-test-cloud/40909866#40909866", "title": "Error executing Calabash iOS tests Xamarin Test Cloud", "body": "<p>You are probably referencing RunLoop::Xcode in your hooks.  If you provide a gist of your 01_launch.rb, I might be able to help.</p>\n\n<p>^ Thanks!</p>\n\n<p>The bug that was causing this has been fixed.</p>\n"}], "owner": {"reputation": 43, "user_id": 7052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0952727097b3b5b2e8da51c5a5198819?s=128&d=identicon&r=PG&f=1", "display_name": "anbarquer", "link": "https://stackoverflow.com/users/7052555/anbarquer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 40909866, "answer_count": 1, "score": 0, "last_activity_date": 1484652393, "creation_date": 1480420399, "last_edit_date": 1481625782, "question_id": 40865263, "link": "https://stackoverflow.com/questions/40865263/error-executing-calabash-ios-tests-xamarin-test-cloud", "title": "Error executing Calabash iOS tests Xamarin Test Cloud", "body": "<p>I've various tests written in Calabash using Ruby. I've tried the tests locally on the simulator and on a physical device and there wasn't any issues but, when I try to execute them on the Xamarin Test Cloud it throws an error relative to the Calabash launcher. I've changed the 01_launch.rb file several times and the error persists. This is the log file:</p>\n\n<pre><code>{\"type\":\"install\",\"last_exception\":{\"class\":\"XTCOperationalError\",\"message\":\"500\\n{\\\"message\\\":\\\"undefined method `strip' for nil:NilClass\\\",\\\"app_id\\\u201d:\\\u201dXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\"}\",\"backtrace\":null}} (XTCOperationalError)\n./xtc-sandbox-runtime-lib/xtc/formatter/patches/calabash_common_patch.rb:64:in `raise_operational_error'\n./xtc-sandbox-runtime-lib/xtc/formatter/patches/calabash_ios_patch.rb:223:in `xtc_install_app'\n./xtc-sandbox-runtime-lib/xtc/formatter/patches/calabash_ios_patch.rb:129:in `relaunch'\n./features/support/01_launch.rb:98:in `launch'\n./features/support/01_launch.rb:340:in `Before'\n</code></pre>\n\n<p>I've been searching about this issue but I don't find anything related. I'm trying to test the platform in order to use it in a CI environment for a large iOS and Android app. Any help would be welcome.</p>\n\n<p><strong>Update</strong>:\nI've been able to run the test on a physical device on my local machine with these settings but the Xamarin Test Cloud tests still failing.\nThe failing line is at the Before hook is:</p>\n\n<pre><code>launcher.relaunch(options)\n</code></pre>\n\n<p>This is the 01_launch.rb file:</p>\n\n<pre><code># encoding: utf-8\n\nrequire 'calabash-cucumber/launcher'\n\nmodule LaunchControl\n  @@launcher = nil\n\n  def self.launcher\n    @@launcher ||= Calabash::Cucumber::Launcher.new\n  end\n\n  def self.launcher=(launcher)\n    @@launcher = launcher\n  end\n\n  def self.xcode\n    Calabash::Cucumber::Environment.xcode\n  end\n\n  def self.instruments\n    Calabash::Cucumber::Environment.instruments\n  end\n\n  def self.simctl\n    Calabash::Cucumber::Environment.simctl\n  end\n\n  def self.environment\n    {\n      :simctl =&gt; self.simctl,\n      :instruments =&gt; self.instruments,\n      :xcode =&gt; self.xcode\n    }\n  end\n\n  def self.target\n    ENV['DEVICE_TARGET'] || RunLoop::Core.default_simulator\n  end\n\n  def self.target_is_simulator?\n    self.launcher.simulator_target?\n  end\n\n  def self.target_is_physical_device?\n    self.launcher.device_target?\n  end\nend\n\n# Delete user data after a scenario tagged with '@reset_settings'\nAfter('@reset_settings') do\n  if xamarin_test_cloud?\n   ENV['RESET_BETWEEN_SCENARIOS'] = '1'\n  elsif LaunchControl.target_is_simulator?\n    target = LaunchControl.target\n    device = RunLoop::Device.device_with_identifier(target,       LaunchControl.environment)\n    RunLoop::CoreSimulator.erase(device)\n  else\n    LaunchControl.install_on_physical_device\n  end\nend\n\n\n\nBefore do |scenario|\n\n  launcher = LaunchControl.launcher\n  options = {\n  }\n\n launcher.relaunch(options)\n\nend\n\nAfter do |scenario|\n  if launcher.quit_app_after_scenario?\n    calabash_exit\n  end\nend\n</code></pre>\n\n<p>I've used the calabash-cucumber (0.20.3) and the run_loop (2.2.2) gems. </p>\n\n<p>Thanks.\nP.S: The app_id is omitted, in the tests the real app_id is setted correctly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rbenv", "compass"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1480424164, "post_id": 40864331, "comment_id": 68948160, "body": "Please add the output of: <code>gem list -d | grep compass -A 4</code> to the question."}, {"owner": {"reputation": 31, "user_id": 4540918, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca950ffec667785014f6c4a14ffc3131?s=128&d=identicon&r=PG&f=1", "display_name": "dumb_iam", "link": "https://stackoverflow.com/users/4540918/dumb-iam"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1480424787, "post_id": 40864331, "comment_id": 68948598, "body": "@Casper added the output."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1480425308, "post_id": 40864331, "comment_id": 68948956, "body": "Did you try it with Ruby 2.2 instead? Compass hasn&#39;t been maintained for a very long time and is no longer actively developed. It could be a Ruby 2.3 issue, so maybe try to downgrade? I have Ruby 2.2 and on this machine it works. Did not try it with 2.3."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5393128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d7749e3805802d5c2480e4afb8137f?s=128&d=identicon&r=PG&f=1", "display_name": "hajush", "link": "https://stackoverflow.com/users/5393128/hajush"}, "is_accepted": false, "score": 0, "last_activity_date": 1554500059, "creation_date": 1554500059, "answer_id": 55543653, "question_id": 40864331, "link": "https://stackoverflow.com/questions/40864331/ruby-compass-cannot-load-such-file-compass-core-loaderror/55543653#55543653", "title": "Ruby compass - cannot load such file -- compass/core (LoadError)", "body": "<p>Ruby compass is no longer supported. Best get off. But I ran into the same issue, only one one VM, a linux machine with ruby 2.6.2p47 &amp; gem 3.0.3, until finally I saw that gem install compass was not getting compass-core. Whereas on other versions it was getting it. Solution - do it explicitly:</p>\n\n<pre><code>gem install compass-core\n</code></pre>\n\n<p>Anyway - it worked for me and I hope it helps other stragglers!</p>\n"}], "owner": {"reputation": 31, "user_id": 4540918, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca950ffec667785014f6c4a14ffc3131?s=128&d=identicon&r=PG&f=1", "display_name": "dumb_iam", "link": "https://stackoverflow.com/users/4540918/dumb-iam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554500059, "creation_date": 1480417576, "last_edit_date": 1480424750, "question_id": 40864331, "link": "https://stackoverflow.com/questions/40864331/ruby-compass-cannot-load-such-file-compass-core-loaderror", "title": "Ruby compass - cannot load such file -- compass/core (LoadError)", "body": "<p>I'm trying to install and work around compass gem and the commands I used while installing this are - </p>\n\n<pre><code>gem install sass\ngem install compass\n</code></pre>\n\n<p>Now I can see the version of sass with the command - </p>\n\n<pre><code>sass --version\n</code></pre>\n\n<p>But when I do -</p>\n\n<pre><code>compass --version\n</code></pre>\n\n<p>The messsage i get is - </p>\n\n<pre><code>/home/name/.rbenv/versions/2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- compass/core (LoadError)\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/lib/compass.rb:14:in `block in &lt;top (required)&gt;'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/lib/compass.rb:13:in `each'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/lib/compass.rb:13:in `&lt;top (required)&gt;'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/bin/compass:20:in `block in &lt;top (required)&gt;'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/bin/compass:8:in `fallback_load_path'\nfrom /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/compass-1.0.3/bin/compass:19:in `&lt;top (required)&gt;'\nfrom /home/name/.rbenv/versions/2.3.1/bin/compass:22:in `load'\nfrom /home/name/.rbenv/versions/2.3.1/bin/compass:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I've tried searching on google and went through whole lot of github issues and stackoverflow questions regarding compass, but any of those didn't help.</p>\n\n<p>How should i resolve this issue?</p>\n\n<p><strong>Update:-</strong>\nI was asked to include the o/p of following command here - </p>\n\n<pre><code>gem list -d | grep compass -A 4\n</code></pre>\n\n<p><strong>O/p:-</strong></p>\n\n<pre><code>    compass (1.0.3)\n    Authors: Chris Eppstein, Scott Davis, Eric M. Suzanne, Brandon\n    Mathis, Nico Hagenburger\n    Homepage: http://compass-style.org\n    Installed at: /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n\n    A Real Stylesheet Framework\n\ncompass-core (1.0.3)\n    Authors: Chris Eppstein, Scott Davis, Eric M. Suzanne, Brandon\n    Mathis\n    Homepage: http://compass-style.org/reference/compass/\n    License: MIT\n    Installed at: /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n\n    The Compass core stylesheet library\n--\ncompass-import-once (1.0.5)\n    Author: Chris Eppstein\n    Homepage:\n    https://github.com/chriseppstein/compass/tree/master/import-once\n    License: MIT\n    Installed at: /home/name/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n\n    Speed up your Sass compilation by making @import only import each\n</code></pre>\n"}, {"tags": ["ruby", "shell", "cd"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 1, "creation_date": 1480415751, "post_id": 40862934, "comment_id": 68942709, "body": "<code>variable = %x[cd #{ENV[&quot;HOME&quot;]}&#47;Virtual\\\\ VMs&#47;]</code> works for me"}, {"owner": {"reputation": 604, "user_id": 1797492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfe82bba479fd0e91b8353038f9355?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/1797492/andr%c3%a9s"}, "edited": false, "score": 1, "creation_date": 1480435936, "post_id": 40862934, "comment_id": 68956637, "body": "Why you just don&#39;t use <code>Dir.chdir</code> from Ruby std? <a href=\"https://ruby-doc.org/core-2.2.0/Dir.html#chdir-method\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Dir.html#chdir-method</a>"}, {"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480492007, "post_id": 40862934, "comment_id": 68979841, "body": "I used it. Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1480416008, "creation_date": 1480416008, "answer_id": 40863728, "question_id": 40862934, "link": "https://stackoverflow.com/questions/40862934/shell-cd-command-in-ruby/40863728#40863728", "title": "shell cd command in Ruby", "body": "<p>To be absolutely safe:</p>\n\n<pre><code>path = File.join [ENV[\"HOME\"], 'Virtual VMs']\nvariable = %x[cd '#{path}']\n</code></pre>\n\n<p>Please note, that <code>cd</code> has empty output, so to make sure it works one probably wants to do smth like:</p>\n\n<pre><code>path = File.join [ENV[\"HOME\"], 'Virtual VMs']\nvariable = %x[cd '#{path}' &amp;&amp; ls -la]\n#\u21d2\u00a0\"total 32\\ndrwxr-xr-x  .....\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480418761, "post_id": 40864651, "comment_id": 68944622, "body": "Im trying to check information about virtual machine allocated in: /root/Virtual VMs/folder/folder so first i need to change the directory im working"}, {"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480419305, "post_id": 40864651, "comment_id": 68945037, "body": "i thing that Dir.chdir is the best way but i cant change to path with spaces on it, the system says Message: Errno::ENOENT: No such file or directory @ dir_chdir"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1480419629, "post_id": 40864651, "comment_id": 68945289, "body": "Again: <code>Dir.chdir File.join [ENV[&quot;HOME&quot;], &#39;Virtual VMs&#39;]</code> perfectly works."}, {"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480420100, "post_id": 40864651, "comment_id": 68945598, "body": "This is the message i get from shell -   Message: Errno::ENOENT: No such file or directory @ dir_chdir - /root/Virtual VMs/tt/holo-master"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1480420426, "post_id": 40864651, "comment_id": 68945826, "body": "There is no way you could get \u201c<code>Errno::ENOENT: No such file or directory @ dir_chdir - &#47;root&#47;Virtual VMs&#47;</code> <b><code>tt&#47;holo-master</code></b>\u201d by executing the command above. If you after all want to get an answer, don\u2019t mess with what you are sharing and what you are really executing."}, {"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480420942, "post_id": 40864651, "comment_id": 68946159, "body": "The directory exists i&#39;ve checked with listing the contents from shell.  # ls /root/Virtual VMs/tt/holo-master # centos-7-1-1.x86_64.vmdk  holo-master.vbox  holo-master.vbox-prev The code im running in ruby is the following:  path = File.join [ENV[&quot;HOME&quot;], &#39;Virtual VMs&#39;, &#39;tt,&#39;holo-master&#39;] Dir.chdir(&quot;#{path}&quot;)  And the error is: Message: Errno::ENOENT: No such file or directory @ dir_chdir - /root/Virtual VMs/tt/holo-master"}, {"owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "edited": false, "score": 0, "creation_date": 1480421560, "post_id": 40864651, "comment_id": 68946555, "body": "sorry,  guys the problem was an uppercase. Thank you very much."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1480418531, "creation_date": 1480418531, "answer_id": 40864651, "question_id": 40862934, "link": "https://stackoverflow.com/questions/40862934/shell-cd-command-in-ruby/40864651#40864651", "title": "shell cd command in Ruby", "body": "<p>What is ist supposed to do? You try to chdir into a directory, but then don't do anything in it. Your <code>variable</code> will be empty in any case. Aside from the fact that it is pointless to do, you can not reliably execute a cd by itself in this way, because it is not an executable file.  You can see this if you just execute <code>%x[cd]</code>. You will get an <code>Errno::ENOENT</code> exception. </p>\n\n<p>Maybe you should first describe in a broader context, what you want to achieve with your code. Where would you like to change the working directory? Within the Ruby process - in which case you have to use <code>Dir.chdir</code> - or in the child process - in which case you have to execute some command after the cd.</p>\n"}], "owner": {"reputation": 641, "user_id": 986623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/618412883/picture?type=large", "display_name": "eifersucht", "link": "https://stackoverflow.com/users/986623/eifersucht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480418531, "creation_date": 1480413779, "question_id": 40862934, "link": "https://stackoverflow.com/questions/40862934/shell-cd-command-in-ruby", "title": "shell cd command in Ruby", "body": "<p>Im trying to execute shell commands using ruby, but i cant change directory to PATH with blank spaces.</p>\n\n<pre><code>variable = %x[cd #{ENV[\"HOME\"]}/Virtual\\\\ VMs/]\n</code></pre>\n\n<p>This is not working.\nThank you</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1480416089, "post_id": 40862908, "comment_id": 68942929, "body": "instance variable is <i>always</i> referenced with <code>@</code>, local variable without <code>@</code>. <code>attr_reader</code> just adds an instance <b><i>method</i></b> <code>var</code> for you, so it is neither instance variable nor local one."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480428611, "post_id": 40862908, "comment_id": 68951284, "body": "Slightly dubious use of TL;DR here:)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1480429140, "post_id": 40862908, "comment_id": 68951661, "body": "As you have shown already, you can reference <code>@var</code> with either <code>@var</code> or <code>var</code> (providing you have the wrapper method setup). It&#39;s up to you, @var is marginally faster but it really doesn&#39;t matter."}], "answers": [{"comments": [{"owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "edited": false, "score": 0, "creation_date": 1480413974, "post_id": 40862951, "comment_id": 68941446, "body": "Oh, so var uses the implicit method <code>var</code> because of <code>attr_reader :var</code>?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "edited": false, "score": 0, "creation_date": 1480414000, "post_id": 40862951, "comment_id": 68941465, "body": "Yes, exactly :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 0, "last_activity_date": 1480413814, "creation_date": 1480413814, "answer_id": 40862951, "question_id": 40862908, "link": "https://stackoverflow.com/questions/40862908/when-to-use-at-symbol-to-reference-an-instance-variable-and-when-not-to/40862951#40862951", "title": "When to use at symbol to reference an instance variable and when not to?", "body": "<p>In your code you can use just <code>var</code> because the <code>attr_reader</code> that is something like</p>\n\n<pre><code>def var\n  @var\nend\n</code></pre>\n"}], "owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 40862951, "answer_count": 1, "score": 0, "last_activity_date": 1480413814, "creation_date": 1480413707, "question_id": 40862908, "link": "https://stackoverflow.com/questions/40862908/when-to-use-at-symbol-to-reference-an-instance-variable-and-when-not-to", "title": "When to use at symbol to reference an instance variable and when not to?", "body": "<p>If I have a custom class with a method that prints the instance variable <code>var</code> should I reference <code>var</code> using an <code>at symbol @</code>? </p>\n\n<p>TL;DR: should I use the method <code>puts_reader</code> or <code>puts_ivar</code> and why?  </p>\n\n<pre><code>class Foo\n  attr_reader :var\n\n  def initialize\n    @var = \"foobar\"\n  end\n\n  def puts_reader\n    puts var\n  end\n\n  def puts_ivar\n    puts @var\n  end\nend \n</code></pre>\n"}, {"tags": ["html", "ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1480441048, "last_edit_date": 1480441048, "creation_date": 1480419813, "answer_id": 40865099, "question_id": 40861875, "link": "https://stackoverflow.com/questions/40861875/regex-remove-multiple-whitespace-and-line-break-inside-html-tag/40865099#40865099", "title": "Regex remove multiple whitespace and line-break inside HTML tag", "body": "<p><a href=\"http://ruby-doc.org/core-2.3.3/String.html#method-i-squeeze\" rel=\"nofollow noreferrer\"><code>String#sqeeze</code></a> comes to the rescue:</p>\n\n<blockquote>\n  <p><code>squeeze([other_str]*)</code> \u2192 <code>new_str</code></p>\n  \n  <p>Builds a set of characters from the <code>other_str</code> parameter(s) using the procedure described for <code>String#count</code>. Returns a new string where runs of the same character that occur in this set are replaced by a single character. If no arguments are given, all runs of identical characters are replaced by a single character.</p>\n\n<pre><code>\"yellow moon\".squeeze                  #=&gt; \"yelow mon\"\n\"  now   is  the\".squeeze(\" \")         #=&gt; \" now is the\"\n\"putters shoot balls\".squeeze(\"m-z\")   #=&gt; \"puters shot balls\"\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5979, "user_id": 1423536, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef0ebe22e4ce251084e75d1020015ae4?s=128&d=identicon&r=PG", "display_name": "pstenstrm", "link": "https://stackoverflow.com/users/1423536/pstenstrm"}, "edited": false, "score": 0, "creation_date": 1480426991, "post_id": 40865738, "comment_id": 68950120, "body": "It might be overly complicated to only have 1 regex, this works much better. I changed the first regex to make sure I only match a single tagg: <code>&#47;&lt;([^&gt;]+)&gt;&#47;</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": true, "score": 1, "last_activity_date": 1480427099, "last_edit_date": 1480427099, "creation_date": 1480421902, "answer_id": 40865738, "question_id": 40861875, "link": "https://stackoverflow.com/questions/40861875/regex-remove-multiple-whitespace-and-line-break-inside-html-tag/40865738#40865738", "title": "Regex remove multiple whitespace and line-break inside HTML tag", "body": "<p>You can use the <a href=\"http://brettterpstra.com/2014/10/28/the-matchdata-object-in-ruby-gsub-blocks/\" rel=\"nofollow noreferrer\">matchdata object in gsub blocks</a>:</p>\n\n<pre><code>html.gsub(/(?&lt;=&lt;)(.+)(?&gt;)/m) { |match| match.gsub(/\\n/, ' ').gsub(/\\s+/, ' ') }\n</code></pre>\n"}], "owner": {"reputation": 5979, "user_id": 1423536, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef0ebe22e4ce251084e75d1020015ae4?s=128&d=identicon&r=PG", "display_name": "pstenstrm", "link": "https://stackoverflow.com/users/1423536/pstenstrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 40865738, "answer_count": 2, "score": 0, "last_activity_date": 1480441048, "creation_date": 1480410949, "question_id": 40861875, "link": "https://stackoverflow.com/questions/40861875/regex-remove-multiple-whitespace-and-line-break-inside-html-tag", "title": "Regex remove multiple whitespace and line-break inside HTML tag", "body": "<p>Some background: we're adding a styleguide to our Middleman project. It's for other developers to use, so we want our code examples to be readable. We don't however want to have to update code in multiple places when we change a component.</p>\n\n<p>We use <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow noreferrer\">redcarpet</a> for markdown parsing and creating code examples. </p>\n\n<pre><code>&lt;%= partial '../partials/component' %&gt;\n\n```html\n    &lt;%= partial '../partials/component' %&gt;\n```\n</code></pre>\n\n<p>This does however leave very messy and unreadable code examples. We can clean them up pretty well with <a href=\"https://github.com/threedaymonk/htmlbeautifier\" rel=\"nofollow noreferrer\">htmlbeautifier</a>. But we still have the issue with multiple whitespaces and linebreaks inside HTML tags.</p>\n\n<p>It often looks like this:</p>\n\n<pre><code>&lt;article class=\"default-s-sans teaser-media\"\n\n     data-item-ratio=\"16x9\"\n\n\n    data-background-color=\"d-blue\"\n\n&gt;\n</code></pre>\n\n<p>We want to remove the extra white space and line breaks inside the tag, that is between <code>&lt;</code> and <code>&gt;</code>. But not between elements, so it should leave this unchanged:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;span class=\"price\"&gt;$100&lt;/span&gt;\n    &lt;span&gt;\n       Word     word\n    &lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have gotten <a href=\"https://regex101.com/r/oMPi8T/1\" rel=\"nofollow noreferrer\">this far</a>:</p>\n\n<pre><code>html.gsub(/(?&lt;=&lt;)(\\s{2,})(?&gt;)/, ' ')\n</code></pre>\n\n<p>But it will only match whitespaces between <code>&lt;</code> and <code>&gt;</code> if there's nothing else between.</p>\n\n<p>How can I match whitespaces between <code>&lt;</code> and <code>&gt;</code> but allow other characters as well?</p>\n"}]